!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(3),i=r(o),c=n(22),s=n(26),l=n(28),u=n(29),p=n(24),f=n(25),d=n(23),h=n(31),v=r(h),m=n(27),y=(n(32),function(e){(0,a.ParseConfig)(e,g),(0,l.SetupGraphs)(),(0,u.BindTabEvents)(),(0,f.BindCopyLinkEvents)()}),g=function(e){(0,f.AddShareSettingsToConfig)(e);var t=(0,p.CreateMap)(e.map);(0,s.CreateBaseLayers)(t,e.baselayers),(0,d.CreateDefaultLayers)(e.layers,e["active-layers"]),(0,c.SetupPanel)(e.layers,e.layout),(0,i.default)(t),(0,v.default)(e.logo),e.tab&&(0,u.HandleTabChange)(e.tab),e.graph&&(0,l.HandleGraphTabChange)(e.graph),(0,l.BindGraphEvents)(t),(0,f.BindUpdateShareUrl)(t),(0,m.SetupPointsOfInterest)(t,e.pois),(0,f.updateShareUrl)()};window.Base=y,t.default={Base:y}},function(e,t){"use strict";function n(e,t){a(e,t)}function r(e){var t;return t=window.ActiveXObject?new window.ActiveXObject("MSXML2.XMLHTTP.3.0"):new XMLHttpRequest,t.onreadystatechange=function(){4===t.readyState&&e(t.responseText)},t}function a(e,t){var n=r(function(e){var n=o(e);t(n)});n.open("GET",e,!0),n.send(),console.log("hi")}function o(e){try{var t=JSON.parse(e)}catch(e){console.log("ERROR: Malformed JSON in config file."),console.log(e)}return i(t),c(t),t}function i(e){e.map||(e.map={})}function c(e){var t,n,r=e.layers,a=e.mapserverUrl;e["active-layers"];for(var o in r){if(!r.hasOwnProperty(o))return;for(t=r[o],n=0;n<t.length;n++)s(t[n],a)}}function s(e,t){e.url=e.url||t}Object.defineProperty(t,"__esModule",{value:!0}),t.ParseConfig=n,t.GetAjaxObject=r},function(e,t,n){"use strict";function r(e){var t=new a.EsriProvider,n=new a.GeoSearchControl({provider:t,showMarker:!1,autoComplete:!1});e.addControl(n),L.DomEvent.on(n.searchElement.elements.container,"click",function(e){L.DomEvent.stopPropagation(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(4)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5);Object.defineProperty(t,"GeoSearchControl",{enumerable:!0,get:function(){return r(a).default}});var o=n(13);Object.defineProperty(t,"SearchElement",{enumerable:!0,get:function(){return r(o).default}});var i=n(17);Object.defineProperty(t,"BingProvider",{enumerable:!0,get:function(){return r(i).default}});var c=n(19);Object.defineProperty(t,"EsriProvider",{enumerable:!0,get:function(){return r(c).default}});var s=n(20);Object.defineProperty(t,"GoogleProvider",{enumerable:!0,get:function(){return r(s).default}});var l=n(21);Object.defineProperty(t,"OpenStreetMapProvider",{enumerable:!0,get:function(){return r(l).default}});var u=n(18);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return r(u).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){if(!L||!L.Control||!L.Control.extend)throw new Error("Leaflet must be loaded before instantiating the GeoSearch control");for(var e=L.Control.extend(m),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e,[null].concat(n)))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=(r(o),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});t.default=a;var c=n(12),s=r(c),l=n(13),u=r(l),p=n(16),f=r(p),d=n(14),h=n(15),v=function(){return{position:"topleft",style:"button",showMarker:!0,showPopup:!1,marker:{icon:new L.Icon.Default,draggable:!1},maxMarkers:1,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",notFoundMessage:"Sorry, that address could not be found.",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",msgbox:"leaflet-bar message",form:"",input:""},autoComplete:!0,autoCompleteDelay:250}},m={initialize:function(e){var t=this;this.markers=new L.FeatureGroup,this.options=i({},v(),e);var n=this.options,r=n.style,a=n.classNames,o=n.searchLabel,c=n.autoComplete,l=n.autoCompleteDelay;"button"!==r&&(this.options.classNames.container+=" "+e.style),this.searchElement=new u.default(i({},this.options,{handleSubmit:function(e){return t.onSubmit(e)}}));var p=this.searchElement.elements,h=p.container,m=p.form,y=p.input;h.addEventListener("dblclick",function(e){e.stopPropagation()});var g=(0,d.createElement)("a",a.button,h);g.title=o,g.href="#",g.addEventListener("click",function(e){t.onClick(e)},!1),c&&(this.resultList=new f.default({handleClick:function(e){var n=e.result;y.value=n.label,t.onSubmit({query:n.label})}}),m.appendChild(this.resultList.elements.container),y.addEventListener("keyup",(0,s.default)(function(e){return t.autoSearch(e)},l),!0),y.addEventListener("keydown",function(e){return t.selectResult(e)},!0),y.addEventListener("keydown",function(e){return t.clearResults(e)},!0)),this.elements={button:g}},onAdd:function(e){var t=this.options,n=t.showMarker,r=t.style;if(this.map=e,n&&this.markers.addTo(e),"bar"===r){var a=this.searchElement.elements.form,o=e.getContainer().querySelector(".leaflet-control-container"),i=(0,d.createElement)("div","leaflet-control-geosearch bar");i.appendChild(a),o.appendChild(i),this.elements.container=i}return this.searchElement.elements.container},onRemove:function(){var e=this.elements.container;return e&&e.remove(),this},onClick:function(e){e.preventDefault();var t=this.searchElement.elements,n=t.container,r=t.input;n.classList.contains("active")?(0,d.removeClassName)(n,"active"):((0,d.addClassName)(n,"active"),r.focus())},selectResult:function(e){if([h.ARROW_DOWN_KEY,h.ARROW_UP_KEY].includes(e.keyCode)){e.preventDefault();var t=this.searchElement.elements.input,n=this.resultList,r=this.resultList.count()-1,a="ArrowDown"===e.code?1+~~n.selected:~~n.selected-1,o=a<0?r:a>r?0:a,i=n.select(o);t.value=i.label}},clearResults:function(e){e.keyCode===h.ESCAPE_KEY&&this.resultList.clear()},autoSearch:function(e){return new Promise(function(t,n){var r,a,o;return h.SPECIAL_KEYS.includes(e.keyCode)?t():(r=e.target.value,a=this.options.provider,a.search({query:r}).then(function(e){return o=e,this.resultList.render(o),t()}.$asyncbind(this,n),n))}.$asyncbind(this))},onSubmit:function(e){return new Promise(function(t,n){var r,a;return r=this.options.provider,r.search(e).then(function(e){return a=e,a&&a.length>0&&this.showResult(a[0]),t()}.$asyncbind(this,n),n)}.$asyncbind(this))},showResult:function(e){var t=Object.keys(this.markers._layers);t.length>=this.options.maxMarkers&&this.markers.removeLayer(t[0]);var n=this.addMarker(e);this.centerMap(e),this.map.fireEvent("geosearch/showlocation",{location:e,marker:n})},addMarker:function(e){var t=this.options,n=t.marker,r=t.showPopup,a=new L.Marker([e.y,e.x],n);return a.bindPopup(e.label),this.markers.addLayer(a),r&&a.openPopup(),a},centerMap:function(e){var t=this.options,n=t.retainZoomLevel,r=t.animateZoom,a=new L.LatLngBounds(e.bounds),o=a.isValid()?a:this.markers.getBounds();!n&&a.isValid()?this.map.fitBounds(o,{animate:r}):this.map.setView(o.getCenter(),this.getZoom(),{animate:r})},getZoom:function(){var e=this.options,t=e.retainZoomLevel,n=e.zoomLevel;return t?this.map.getZoom():n}}},function(e,t,n){"use strict";function r(e,t){if(Function.prototype.$asyncspawn||Object.defineProperty(Function.prototype,"$asyncspawn",{value:r,enumerable:!1,configurable:!0,writable:!0}),this instanceof Function){var n=this;return new e(function(e,r){function a(t,n){var i;try{if(i=t.call(o,n),i.done){if(i.value!==e){if(i.value&&i.value===i.value.then)return i.value(e,r);e&&e(i.value),e=null}return}i.value.then?i.value.then(function(e){a(o.next,e)},function(e){a(o.throw,e)}):a(o.next,i.value)}catch(e){return r&&r(e),void(r=null)}}var o=n.call(t,e,r);a(o.next)})}}var a=function(e,t){for(var n=t.toString(),r="return "+n,a=n.match(/.*\(([^)]*)\)/)[1],o=/['"]!!!([^'"]*)['"]/g,i=[];;){var c=o.exec(r);if(!c)break;i.push(c)}return i.reverse().forEach(function(t){r=r.slice(0,t.index)+e[t[1]]+r.substr(t.index+t[0].length)}),r=r.replace(/\/\*[^*]*\*\//g," ").replace(/\s+/g," "),new Function(a,r)()}({zousan:n(7).toString(),thenable:n(11).toString()},function e(t,n){function r(){return a.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,a){return function o(i){for(;i;){if(i.then)return i=i.then(o,r),a?void 0:i;try{if(i.pop){if(i.length)return i.pop()?t.call(e):i;i=n}else i=i.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable="!!!thenable"(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory="!!!zousan")());var a=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return a.apply(t,arguments)}catch(e){return n(e)}}}});a(),r(),e.exports={$asyncbind:a,$asyncspawn:r}},function(e,t,n){(function(t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){function a(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function o(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function i(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===(void 0===t?"undefined":r(t))&&t.nextTick||"function"==typeof n&&n||function(e){setTimeout(e,0)};var c=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===a&&(n.splice(0,a),r=0)}}var n=[],r=0,a=1024;return function(a){n.push(a),n.length-r==1&&e(t)}}();return a.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":r(e))))try{var n=0,a=e.then;if("function"==typeof a)return void a.call(e,function(e){n++||t.resolve(e)},function(e){n++||t.reject(e)})}catch(e){return void(n||this.reject(e))}this.state=o,this.v=e,t.c&&c(function(){for(var n=0,r=t.c.length;n<r;n++)o(t.c[n],e)})}},reject:function(e){if(void 0===this.state){this.state=i,this.v=e;var t=this.c;t&&c(function(){for(var n=0,r=t.length;n<r;n++)i(t[n],e)})}},then:function(e,t){var n=new a,r={y:e,n:t,p:n};if(void 0===this.state)this.c?this.c.push(r):this.c=[r];else{var o=this.state,i=this.v;c(function(){o(r,i)})}return n}},a.resolve=function(e){if(e&&e instanceof a)return e;var t=new a;return t.resolve(e),t},a.reject=function(e){if(e&&e instanceof a)return e;var t=new a;return t.reject(e),t},a.version="2.3.3-nodent",a}}).call(t,n(8),n(9).setImmediate)},function(e,t){"use strict";function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(p===clearTimeout)return clearTimeout(e);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function i(){v&&d&&(v=!1,d.length?h=d.concat(h):m=-1,h.length&&c())}function c(){if(!v){var e=a(i);v=!0;for(var t=h.length;t;){for(d=h,h=[];++m<t;)d&&d[m].run();m=-1,t=h.length}d=null,v=!1,o(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var u,p,f=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(e){p=r}}();var d,h=[],v=!1,m=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new s(e,t)),1!==h.length||v||a(c)},s.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";function r(e,t){this._id=e,this._clearFn=t}var a=Function.prototype.apply;t.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(10),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){"use strict";!function(e,n){function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[s]=r,c(s),s++}function a(e){delete l[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function i(e){if(u)setTimeout(i,0,e);else{var t=l[e];if(t){u=!0;try{o(t)}finally{a(e),u=!1}}}}if(!e.setImmediate){var c,s=1,l={},u=!1,p=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){i(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},c=function(t){e.port2.postMessage(t)}}():p&&"onreadystatechange"in p.createElement("script")?function(){var e=p.documentElement;c=function(t){var n=p.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(i,0,e)}}(),f.setImmediate=r,f.clearImmediate=a}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(t,function(){return this}(),n(8))},function(e,t){"use strict";e.exports=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,a){try{var o=a?a(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));e(o)?o.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(o)}catch(e){n.reject(e)}}function n(){}function r(e){}function a(e,t){this.resolve=e,this.reject=t}function o(r,a){var o=new n;try{this._resolver(function(n){return e(n)?n.then(r,a):t(o,n,r)},function(e){t(o,e,a)})}catch(e){t(o,e,a)}return o}function i(e){this._resolver=e,this.then=o}return n.prototype={resolve:r,reject:r,then:a},i.resolve=function(e){return i.isThenable(e)?e:{then:function(t){return t(e)}}},i.isThenable=e,i}},function(e,t){(function(t){"use strict";function n(e,t,n){function a(t){var n=v,r=m;return v=m=void 0,_=t,g=e.apply(r,n)}function o(e){return _=e,b=setTimeout(u,t),S?a(e):g}function c(e){var n=e-w,r=e-_,a=t-n;return x?k(a,y-r):a}function l(e){var n=e-w,r=e-_;return void 0===w||n>=t||n<0||x&&r>=y}function u(){var e=O();if(l(e))return p(e);b=setTimeout(u,c(e))}function p(e){return b=void 0,C&&v?a(e):(v=m=void 0,g)}function f(){void 0!==b&&clearTimeout(b),_=0,v=w=m=b=void 0}function d(){return void 0===b?g:p(O())}function h(){var e=O(),n=l(e);if(v=arguments,m=this,w=e,n){if(void 0===b)return o(w);if(x)return b=setTimeout(u,t),a(w)}return void 0===b&&(b=setTimeout(u,t)),g}var v,m,y,g,b,w,_=0,S=!1,x=!1,C=!0;if("function"!=typeof e)throw new TypeError(s);return t=i(t)||0,r(n)&&(S=!!n.leading,x="maxWait"in n,y=x?E(i(n.maxWait)||0,t):y,C="trailing"in n?!!n.trailing:C),h.cancel=f,h.flush=d,h}function r(e){var t=void 0===e?"undefined":c(e);return!!e&&("object"==t||"function"==t)}function a(e){return!!e&&"object"==(void 0===e?"undefined":c(e))}function o(e){return"symbol"==(void 0===e?"undefined":c(e))||a(e)&&w.call(e)==u}function i(e){if("number"==typeof e)return e;if(o(e))return l;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(p,"");var n=d.test(e);return n||h.test(e)?v(e.slice(2),n?2:8):f.test(e)?l:+e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="Expected a function",l=NaN,u="[object Symbol]",p=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,h=/^0o[0-7]+$/i,v=parseInt,m="object"==(void 0===t?"undefined":c(t))&&t&&t.Object===Object&&t,y="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,g=m||y||Function("return this")(),b=Object.prototype,w=b.toString,E=Math.max,k=Math.min,O=function(){return g.Date.now()};e.exports=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=(function(e){e&&e.__esModule}(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=n(14),c=n(15),s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.handleSubmit,o=void 0===a?function(){}:a,c=n.searchLabel,s=void 0===c?"search":c,l=n.classNames,u=void 0===l?{}:l;r(this,e);var p=(0,i.createElement)("div",["geosearch",u.container].join(" ")),f=(0,i.createElement)("form",["",u.form].join(" "),p),d=(0,i.createElement)("input",["glass",u.input].join(" "),f);d.type="text",d.placeholder=s,d.addEventListener("input",function(e){t.onInput(e)},!1),d.addEventListener("keyup",function(e){t.onKeyUp(e)},!1),d.addEventListener("keypress",function(e){t.onKeyPress(e)},!1),d.addEventListener("focus",function(e){t.onFocus(e)},!1),d.addEventListener("blur",function(e){t.onBlur(e)},!1),this.elements={container:p,form:f,input:d},this.handleSubmit=o}return o(e,[{key:"onFocus",value:function(){(0,i.addClassName)(this.elements.form,"active")}},{key:"onBlur",value:function(){(0,i.removeClassName)(this.elements.form,"active")}},{key:"onSubmit",value:function(e){return new Promise(function(t,n){var r,a,o;return e.preventDefault(),e.stopPropagation(),r=this.elements,a=r.input,o=r.container,(0,i.removeClassName)(o,"error"),(0,i.addClassName)(o,"pending"),this.handleSubmit({query:a.value}).then(function(e){return(0,i.removeClassName)(o,"pending"),t()}.$asyncbind(this,n),n)}.$asyncbind(this))}},{key:"onInput",value:function(){var e=this.elements.container;this.hasError&&((0,i.removeClassName)(e,"error"),this.hasError=!1)}},{key:"onKeyUp",value:function(e){var t=this.elements,n=t.container,r=t.input;e.keyCode===c.ESCAPE_KEY&&((0,i.removeClassName)(n,"pending"),(0,i.removeClassName)(n,"active"),r.value="",document.body.focus(),document.body.blur())}},{key:"onKeyPress",value:function(e){e.keyCode===c.ENTER_KEY&&this.onSubmit(e)}},{key:"setQuery",value:function(e){this.elements.input.value=e}}]),e}();t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.createElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElement(e);return r.className=t,n&&n.appendChild(r),r};t.createScriptElement=function(e,t){var r=n("script",null,document.body);return r.setAttribute("type","text/javascript"),new Promise(function(n){window[t]=function(e){r.remove(),delete window[t],n(e)},r.setAttribute("src",e)})},t.addClassName=function(e,t){e&&!e.classList.contains(t)&&e.classList.add(t)},t.removeClassName=function(e,t){e&&e.classList.contains(t)&&e.classList.remove(t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.ENTER_KEY=13,r=t.ESCAPE_KEY=27,a=t.ARROW_DOWN_KEY=40,o=t.ARROW_UP_KEY=38,i=t.ARROW_LEFT_KEY=37,c=t.ARROW_RIGHT_KEY=39;t.SPECIAL_KEYS=[n,r,a,o,i,c]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(14),i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join(" ").trim()},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.handleClick,a=void 0===n?function(){}:n,c=t.classNames,l=void 0===c?{}:c;r(this,e),s.call(this),this.props={handleClick:a,classNames:l},this.selected=-1;var u=(0,o.createElement)("div",i("results",l.container)),p=(0,o.createElement)("div",i(l.item));u.addEventListener("click",this.onClick,!0),this.elements={container:u,resultItem:p}}return a(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.elements,n=t.container,r=t.resultItem;this.clear(),e.forEach(function(e,t){var a=r.cloneNode(!0);a.setAttribute("data-key",t),a.innerHTML=e.label,n.appendChild(a)}),e.length>0&&(0,o.addClassName)(n,"active"),this.results=e}},{key:"select",value:function(e){var t=this.elements.container;return Array.from(t.children).forEach(function(t,n){return n===e?(0,o.addClassName)(t,"active"):(0,o.removeClassName)(t,"active")}),this.selected=e,this.results[e]}},{key:"count",value:function(){return this.results.length}},{key:"clear",value:function(){var e=this.elements.container;for(this.selected=-1;e.lastChild;)e.removeChild(e.lastChild);(0,o.removeClassName)(e,"active")}}]),e}(),s=function(){var e=this;this.onClick=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.target,r=e.props.handleClick,a=e.elements.container;if(n.parentNode===a&&n.hasAttribute("data-key")){var o=n.getAttribute("data-key");r({result:e.results[o]})}}};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=(r(s),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(18),f=r(p),d=n(14),h=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=e.jsonp,a=this.options.params;return n+"//dev.virtualearth.net/REST/v1/Locations?"+this.getParamString(l({},a,{query:t,jsonp:r}))}},{key:"parse",value:function(e){var t=e.data;return 0===t.resourceSets.length?[]:t.resourceSets[0].resources.map(function(e){return{x:e.point.coordinates[1],y:e.point.coordinates[0],label:e.address.formattedAddress,bounds:[[e.bbox[0],e.bbox[1]],[e.bbox[2],e.bbox[3]]],raw:e}})}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o="BING_JSONP_CB_"+Date.now(),i=this.endpoint({query:r,protocol:a,jsonp:o}),(0,d.createScriptElement)(i,o).then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),t}(f.default);t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=(function(e){e&&e.__esModule}(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.options=t}return o(e,[{key:"getParamString",value:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o=this.endpoint({query:r,protocol:a}),fetch(o).then(function(e){return i=e,i.json().then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=function(e){return e&&e.__esModule?e:{default:e}}(l),p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find?"+this.getParamString(c({},r,{f:"json",text:t}))}},{key:"parse",value:function(e){return e.data.locations.map(function(e){return{x:e.feature.geometry.x,y:e.feature.geometry.y,label:e.name,bounds:[[e.extent.ymin,e.extent.xmin],[e.extent.ymax,e.extent.xmax]],raw:e}})}}]),t}(u.default);t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=function(e){return e&&e.__esModule?e:{default:e}}(l),p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params,a=this.getParamString(c({},r,{address:t}));return(r&&r.key?"https:":n)+"//maps.googleapis.com/maps/api/geocode/json?"+a}},{key:"parse",value:function(e){return e.data.results.map(function(e){return{x:e.geometry.location.lng,y:e.geometry.location.lat,label:e.formatted_address,bounds:[[e.geometry.viewport.southwest.lat,e.geometry.viewport.southwest.lng],[e.geometry.viewport.northeast.lat,e.geometry.viewport.northeast.lng]],raw:e}})}}]),t}(u.default);t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=function(e){return e&&e.__esModule?e:{default:e}}(l),p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//nominatim.openstreetmap.org/search?"+this.getParamString(c({},r,{format:"json",q:t}))}},{key:"parse",value:function(e){return e.data.map(function(e){return{x:e.lon,y:e.lat,label:e.display_name,bounds:[[parseFloat(e.boundingbox[0]),parseFloat(e.boundingbox[2])],[parseFloat(e.boundingbox[1]),parseFloat(e.boundingbox[3])]],raw:e}})}}]),t}(u.default);t.default=p},function(e,t,n){"use strict";function r(e,t){p(u(t["layer-groups-order"]),e),i(),o()}function a(){var e=window.navigator.userAgent;return e.indexOf("MSIE")>-1||e.indexOf("rv:11.0")>-1}function o(){document.getElementById("right-panel").onscroll=s}function i(){if(!a()){var e=d3.select("#right-panel-drag-overlay");e.style("cursor","ew-resize"),e.call(d3.drag().on("drag",function(){c.call(this)}))}}function c(){s(),l()}function s(){var e,t=d3.select("#right-panel"),n=t.property("offsetHeight"),r=document.getElementById("right-panel-drag-overlay"),a=document.getElementById("right-panel-header");if(t.classed("graphs-active")){var o=document.getElementById("graph-list");e=a.scrollHeight+o.scrollHeight+700}else{var i=document.getElementById("layer-list");e=a.scrollHeight+i.scrollHeight}e=e>n?e+"px":null,r.style.height=e}function l(){var e=d3.select("#right-panel"),t=+e.style("min-width").slice(0,-2),n=e.property("clientWidth"),r=document.getElementById("wrapper"),a=r.clientWidth,o=document.getElementById("map-wrapper"),i=d3.event.sourceEvent.x,c=a-i-n,s=n+c;s=s<t?t:s>a?a:s,o.style.paddingRight=s+"px",e.style("width",s+"px")}function u(e){return d3.select("#layer-list").selectAll(".layer-group-wrapper").data(e).enter().append("div").attr("class","layer-group-wrapper").attr("id",function(e){return e.id}).classed("active",function(e){return e.active}).each(function(e){d3.select(this).append("div").attr("class","layer-group-btn btn").on("click",function(e){e.active=!e.active,d3.select(this.parentNode).classed("active",function(){return e.active}),s()}).text(e.name)}).append("div").attr("class","layer-group")}function p(e,t){e.selectAll(".layer-select").data(function(e){return t[e.id]}).enter().append("div").attr("class","layer-select").each(function(e){var t=(this.parentNode.parentNode.id,d3.select(this));f(e,t),d(e,t),h(e,t),t.node().appendChild(v(e))})}function f(e,t){t.append("input").attr("type","checkbox").attr("id",function(e){return e.id}).attr("checked",function(e){return e.active?"checked":null}).on("click",function(e){(0,y.toggleLayer)(e),t.select(".layer-tools-wrapper").classed("active",e.active),e.active&&(0,g.setSliderInitialPos)(e,t)})}function d(e,t){t.append("div").attr("class","layer-label-wrapper").append("label").attr("for",function(e){return e.id}).attr("class","layer-label").html(function(e){return e.name})}function h(e,t){e.info&&""!==e.info&&(t.append("div").attr("class","layer-info-btn").text("(?)").on("click",function(){d3.select(this.parentNode).select(".layer-info-wrapper").classed("active",function(){return!d3.select(this).classed("active")})}),t.append("div").attr("class","layer-info-wrapper").text(function(e){return e.info}))}function v(e,t){var n=document.createElement("div");n.classList.add("layer-tools-wrapper"),e.active&&n.classList.add("active");var r=(0,g.makeOpacitySlider)(e),a=m(e);return n.appendChild(r),n.appendChild(a),n}function m(e,t){var n=document.createElement("div"),r=document.createElement("img");return n.classList.add("legend-wrapper"),r.setAttribute("src",e.legend),n.appendChild(r),n}Object.defineProperty(t,"__esModule",{value:!0}),t.SetupPanel=r,t.updatePanelDragOverlayHeight=s;var y=n(23),g=n(30);n(25)},function(e,t,n){"use strict";function r(){return v}function a(e,t){var n,r,a,o,c,s;if(t&&0!==t.length)for(n=0;n<t.length;n++){s=!1,c=t[n];for(a in e){if(!e.hasOwnProperty(a))return;for(o=e[a],r=0;r<o.length;r++)if(o[r].id===c){i(o[r]),s=!0;break}if(s)break}}}function o(e){e.active?l(e):i(e)}function i(e){var t=(0,d.GetMap)();e.active=!0,e.mapLayer=e.mapLayer||f(e),t.addLayer(e.mapLayer),s(e),c(),(0,h.updateShareUrl)()}function c(){var e,t,n;for(t=0,n=m.length;t<n;t++)e=m[t],"overlay"===e.type&&e.mapLayer.bringToFront()}function s(e){v.push(e.id),m.push(e)}function l(e){var t=(0,d.GetMap)();e.active=!1,e.mapLayer&&t.hasLayer(e.mapLayer)&&t.removeLayer(e.mapLayer),u(e),(0,h.updateShareUrl)()}function u(e){var t=v.indexOf(e.id);-1!==t&&(v.splice(t,1),m.splice(t,1))}function p(e,t){e.opacity=t,e.mapLayer.setOpacity(t)}function f(e){return L.tileLayer.wms(e.url,{layers:e.id,transparent:e.transparent||!0,version:e.version||"1.3.0",crs:e.crs||L.CRS.EPSG900913,format:e.format||"image/png",opacity:e.opacity||1,tileSize:e.tileSize||document.getElementById("map").clientWidth})}Object.defineProperty(t,"__esModule",{value:!0}),t.GetCurrentLayers=r,t.CreateDefaultLayers=a,t.toggleLayer=o,t.enableLayer=i,t.disableLayer=l,t.updateLayerOpacity=p;var d=n(24),h=n(25),v=[],m=[]},function(e,t){"use strict";function n(e){var t=e.id||"map",n=e.options||{scrollWheelZoom:!1},r=e.center||["38.5","-81"],o=e.zoom||6;return a=L.map(t,n).setView(r,o),L.control.attribution().addTo(a),a}function r(){return a}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateMap=n,t.GetMap=r;var a},function(e,t,n){"use strict";function r(e){e.on("moveend",a)}function a(e){var t=(0,D.GetMap)();c(i([b(t),w(t),E(t),k(t),O(),_(),S()])),s(),g()}function o(e){var t=x();t&&(t.center&&(e.map.center=t.center),t.zoom&&(e.map.zoom=t.zoom),t.layers&&N(t.layers,e),t.baselayers&&R(t.baselayers,e),t.pois&&G(t.pois,e),t.tab&&(e.tab=t.tab),t.graph&&(e.graph=t.graph))}function i(e){return"?"+e.filter(function(e){return void 0!==e}).join("&")}function c(e){window.history&&window.history.replaceState&&window.history.replaceState({},"",e)}function s(){var e=window.location.href;document.getElementById("shareurl-link-url").setAttribute("value",e)}function l(){d3.select(document).on("click",u),d3.select(".shareurl-link a").on("click",f),d3.select(".shareurl-link-url").on("click",h),d3.select(".shareurl-link-popup-remover").on("click",d)}function u(){var e=d3.event,t=[];t=e.path?e.path:p(e.srcElement);var n,r,a=!1;for(n=0,r=t.length;n<r;n++)if(t[n].className&&"string"==typeof t[n].className&&-1!==t[n].className.indexOf("shareurl-link")){a=!0;break}a||m()}function p(e){for(var t=[];e;)t.push(e),e=e.parentNode;return t}function f(){d3.select(document.getElementsByClassName("shareurl-link-popup")[0]).classed("active")?m():v()}function d(){m()}function h(){y()}function v(){d3.select(document.getElementsByClassName("shareurl-link-popup")[0]).classed("active",!0),y()}function m(){d3.select(document.getElementsByClassName("shareurl-link-popup")[0]).classed("active",!1)}function y(){var e=document.getElementById("shareurl-link-url");e.focus(),e.setSelectionRange(0,e.value.length)}function g(){var e,t,n,r,a=L(window.location.href),o=document.getElementsByClassName("shareurl-social");for(n=0,r=o.length;n<r;n++)e=o[n],t=e.getAttribute("data-baseurl")+a,e.setAttribute("href",t)}function b(e){var t=e.getCenter();return"center="+t.lat.toString()+","+t.lng.toString()}function w(e){return"zoom="+e.getZoom()}function E(e){var t=[],n={},r=(0,U.GetCurrentLayers)();e.eachLayer(function(e){var t=e.options;t&&t.layers&&(n[t.layers]=t.hasOwnProperty("opacity")?t.opacity:"1")});var a,o;for(o=0;o<r.length;o++)a=r[o],t.push(a),t.push(n[a]);return"layers="+t.join(",")}function k(e){var t=[];return e.eachLayer(function(e){e.options&&e.options.type===F.BASE_LAYER_TYPE&&t.push(e.options.id)}),"baselayers="+t.join(",")}function O(){var e=(0,Y.GetAllPointsOfInterest)();if(e.length){var t="pois=";return e.forEach(function(e){t+=e.lat+","+e.lng+";"}),t}}function _(){return"tab="+d3.select(".panel-top-btn.active").attr("data-active")}function S(){return"graph="+d3.select(".graph-type-btn.active").attr("data-type")}function x(){var e=window.location.search;if(""!==e)return e=C(e),e=j(e),A(e),e}function C(e){return e=e.substring(1),e=P(e),e.split("&")}function L(e){return e.replace(/\:/g,"%3A").replace(/\;/g,"%3B").replace(/\//g,"%2F").replace(/\,/g,"%2C").replace(/\&/g,"%26")}function P(e){return e.replace(/\%2[c|C]/g,",").replace(/\%3[b|B]/g,";")}function j(e){var t,n,r={};for(n=0;n<e.length;n++)t=e[n].split("="),r[t[0]]=t[1];return r}function A(e){e.center&&(e.center=T(e.center)),e.layers&&(e.layers=M(e.layers)),e.baselayers&&(e.baselayers=I(e.baselayers)),e.pois&&(e.pois=B(e.pois))}function T(e){return e.split(",")}function M(e){var t,n,r={enabledLayers:[],opacityVals:{}};for(e=e.split(","),n=0;n<e.length;n+=2)t=e[n],r.enabledLayers.push(t),r.opacityVals[t]=e[n+1];return r}function I(e){return e.split(",")}function B(e){return e.split(";").filter(function(e){return""!==e}).map(function(e){return e=e.split(","),{lat:e[0],lng:e[1]}})}function N(e,t){var n=e.enabledLayers;t["active-layers"]=n;var r,a,o,i,c,s,l=t.layers;for(r=0;r<n.length;r++){s=!1,c=n[r];for(o in l){if(!l.hasOwnProperty(o))return;for(i=l[o],a=0;a<i.length;a++)if(i[a].id===c){i[a].opacity=e.opacityVals[c],s=!0;break}if(s)break}}}function R(e,t){var n,r,a=t.baselayers;for(r=0;r<a.length;r++)n=a[r],n.active=-1!==e.indexOf(n.id)}function G(e,t){t.pois=e}Object.defineProperty(t,"__esModule",{value:!0}),t.BindUpdateShareUrl=r,t.updateShareUrl=a,t.AddShareSettingsToConfig=o,t.BindCopyLinkEvents=l;var D=n(24),F=n(26),U=n(23),Y=n(27)},function(e,t,n){"use strict";function r(e,t){t=t||[{id:"carto-light-default",url:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attributions">CARTO</a>'}],p=t;var n,r,o;for(n=0;n<t.length;n++)o=t[n],o.active&&(r=l(o),o.layer=r,r.addTo(e));a(t)}function a(e){var t=document.createElement("div");t.className="baselayer-ui";for(var n,r,a,i,c=0,s=e.length;c<s;c++)i=e[c],i.hasOwnProperty("image")&&(n=document.createElement("div"),n.setAttribute("data-layer",i.id),r=document.createElement("img"),r.setAttribute("src",i.image),r.setAttribute("alt",i.label),r.setAttribute("title",i.label),a=document.createElement("div"),a.textContent=i.label,n.appendChild(r),n.appendChild(a),n.addEventListener("click",o),d3.select(n).classed("base-selector",!0).classed("active",i.active),t.appendChild(n));document.getElementsByClassName("leaflet-bottom leaflet-left")[0].appendChild(t)}function o(e){e.stopPropagation();var t=this.getAttribute("data-layer");i(this),c(),s(t),(0,d.updateShareUrl)()}function i(e){d3.select(".base-selector.active").classed("active",!1),d3.select(e).classed("active",!0)}function c(){var e=(0,f.GetMap)();e.eachLayer(function(t){t.options.type===h&&e.removeLayer(t)})}function s(e){for(var t,n=(0,f.GetMap)(),r=0,a=p.length;r<a;r++)if(t=p[r],t.id===e){t.layer||(t.layer=l(t)),t.layer.addTo(n),t.layer.bringToBack();break}}function l(e){return L.tileLayer(e.url,u(e))}function u(e){var t={};return e.id&&(t.id=e.id),e.attribution&&(t.attribution=e.attribution),e.subdomains&&(t.subdomains=e.subdomains),t.type=h,t}Object.defineProperty(t,"__esModule",{value:!0}),t.BASE_LAYER_TYPE=void 0,t.CreateBaseLayers=r;var p,f=n(24),d=n(25),h=t.BASE_LAYER_TYPE="baselayer"},function(e,t,n){"use strict";function r(){return y}function a(e,t){var n={lat:e,lng:t};return y.push(n),n}function o(e,t){i(t);var n=r(),e=(0,v.GetMap)();n.forEach(function(t){s(e,t)})}function i(e){Array.prototype.push.apply(y,e)}function c(e){y=y.filter(function(t){return!(t===e)})}function s(e,t){var n=(0,d.createGraphDiv)(t),r=(0,d.createMarker)(e,t.lat,t.lng);t.graphDiv=n,t.marker=r,r.addTo(e),(0,d.createGraphRemover)(e,n,r,t),d3.select(n).on("mouseenter",function(e){r.setIcon((0,d.getIcon)("hover"))}),d3.select(n).on("mouseleave",function(){r.setIcon((0,d.getIcon)("graph"))}),r.on("click dblclick",function(e){l(e,t)}),r.on("mouseover",function(e){r.setIcon((0,d.getIcon)("hover"))}),r.on("mouseout",function(e){r.setIcon((0,d.getIcon)("graph")),t.graphDiv.getElementsByClassName("pan-to-marker-btn")[0].classList.remove("animate")})}function l(e,t){e.originalEvent.stopPropagation(),(0,m.HandleTabChange)("graphs-active"),p(t),u(t)}function u(e){e.graphDiv.getElementsByClassName("pan-to-marker-btn")[0].classList.add("animate")}function p(e){var t=document.getElementById("right-panel");document.getElementById("right-panel-header"),document.getElementById("graph-type-header");t.scrollTop=e.graphDiv.offsetTop}function f(e,t,n){document.getElementById("graph-list").removeChild(t),e.removeLayer(n),(0,h.updateShareUrl)()}Object.defineProperty(t,"__esModule",{value:!0}),t.GetAllPointsOfInterest=r,t.AddPointOfInterestToTracker=a,t.SetupPointsOfInterest=o,t.AddMultiplePointsOfInterest=i,t.RemovePointOfInterestFromTracker=c,t.SetupPointOfInterestUI=s,t.RemovePointOfInterestUI=f;var d=n(28),h=n(25),v=n(24),m=n(29),y=[]},function(e,t,n){"use strict";function r(){d3.selectAll(".graph-type-btn").on("click",v),a(),q=d3.tip().attr("class","d3-tip").html(function(e){return e})}function a(){Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100!=0||e%400==0)},Date.prototype.getDOY=function(){var e=[0,31,59,90,120,151,181,212,243,273,304,334],t=this.getMonth(),n=this.getDate(),r=e[t]+n;return t>1&&this.isLeapYear()&&r++,r}}function o(e){e.on("click",c)}function i(e){return"hover"===e?V:J}function c(e){var t=this,n=e.latlng.lat,r=e.latlng.lng,a=(0,H.AddPointOfInterestToTracker)(n,r);(0,H.SetupPointOfInterestUI)(t,a,V,J),(0,z.updateShareUrl)(),ga("send","event",{eventCategory:"map",eventAction:"click",eventLabel:"add point",nonInteraction:!1})}function s(e,t,n){return L.marker([t,n],{icon:J})}function l(e,t,n,r){var a=u();t.getElementsByClassName("graph-elem-header")[0].appendChild(a),d3.select(a).on("click",function(){(0,H.RemovePointOfInterestFromTracker)(r),(0,H.RemovePointOfInterestUI)(e,t,n),(0,$.updatePanelDragOverlayHeight)(),(0,z.updateShareUrl)()})}function u(){var e=document.createElement("button");return e.className="remove-graph",e.innerText=String.fromCharCode("10005"),e.setAttribute("title","Remove graph"),e}function p(e,t,n,r){r=r.replace(/\[|\]|\'/g,"").split(", "),O(r,e,t,n),(0,$.updatePanelDragOverlayHeight)()}function f(e,t,n){var r="https://fcav-ndvi.nemac.org/landdat_product.cgi?args="+t+","+e,a=(0,W.GetAjaxObject)(function(r){p(n,e,t,r)});a.open("GET",r),a.send()}function d(e){var t;for(t=0;t<e.length;t++)e[t]=e[t].split(",");return e}function h(e){var t,n,r,a,o={};for(o.keys=[],r=0;r<e.length;r++)t=e[r],n=t[0].substring(0,4),o.hasOwnProperty(n)||(o[n]=[],o.keys.push(n)),o[n].push(t);var i=[];for(r=0;r<o.keys.length;r++)n=o.keys[r],46!==o[n].length&&i.push(n);for(r=0;r<i.length;r++)n=i[r],delete o[n],o.keys.splice(o.keys.indexOf(n),1);var c,s;for(o.medians=[],r=0;r<46;r++){for(c=[],a=r;a<e.length;a+=46)c.push(e[a][1]);s=c.sort()[Math.floor(c.length/2)],o.medians.push(s)}return o}function v(){var e=this.getAttribute("data-type"),t=document.getElementsByClassName("graph-type-btn active")[0].getAttribute("data-type");e!==t&&m(e)}function m(e){if(!y())var t=document.getElementsByClassName("graph-elem")[0].scrollHeight,n=document.getElementsByClassName("graph-type-info active")[0].scrollHeight,r=document.getElementById("right-panel").scrollTop;b(),w(e),y()||g(n,t,r),(0,z.updateShareUrl)()}function y(){return void 0===document.getElementsByClassName("graph-elem")[0]}function g(e,t,n){var r=document.getElementsByClassName("graph-type-info active")[0].scrollHeight,a=document.getElementsByClassName("graph-elem")[0].scrollHeight,o=a/t,i=r+(n-e)*o;document.getElementById("right-panel").scrollTop=i}function b(){var e=document.getElementsByClassName("graph-type-btn active")[0],t="graph-"+e.getAttribute("data-type");e.classList.remove("active"),document.getElementById("graph-list").classList.remove(t)}function w(e){d3.select(".graph-type-btn[data-type='"+e+"']").classed("active",!0),document.getElementById("graph-list").classList.add("graph-"+e),d3.selectAll(".graph-type-info").classed("active",function(){return e===this.id.split("-")[0]})}function E(e){var t=_(e.lat,3),n=_(e.lng,3),r=document.createElement("div"),a=document.createElement("div");r.appendChild(a);var o=k(e),i=document.createTextNode("Lat: "+t+", Lon: "+n),c=document.createElement("div");return c.className="graph-lat-lon",c.appendChild(i),a.appendChild(o),a.appendChild(c),r.classList.add("graph-elem"),a.classList.add("graph-elem-header"),f(e.lat,e.lng,r),r}function k(e){var t=document.createElement("button");return t.classList.add("btn"),t.classList.add("pan-to-marker-btn"),t.textContent="Show On Map",t.onclick=function(e,t){(0,K.GetMap)().panTo([e.lat,e.lng])}.bind(t,e),t}function O(e,t,n,r){e=d(e);var a=h(e);S(e,t,a.medians),x(a,t,n,r),C(a,t,n,r),document.getElementById("graph-list").appendChild(t)}function _(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function S(e,t,n){var r={top:30,right:20,bottom:30,left:29},a=580-r.left-r.right,o=270-r.top-r.bottom,i=d3.scaleTime().range([0,a]).domain([G(e[0][0]),G(e[e.length-1][0])]),c=d3.scaleLinear().range([o,0]).domain([0,100]),s=d3.axisBottom(i).ticks(16).tickFormat(function(e){return e.getFullYear()}),l=d3.axisLeft(c).ticks(6),u=d3.line().x(function(e){return i(G(e[0]))}).y(function(e){return c(e[1])}),p=d3.select(t).append("div").classed("timeseries-graph",!0),f=p.append("svg").attr("height",o+r.top+r.bottom).attr("viewBox",function(){return"0 0 "+(a+r.left+r.right)+" "+(o+r.top+r.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+r.left+","+r.top+")");f.call(q),A(e,u,f),f.append("g").attr("class","x axis").attr("transform","translate(0,"+o+")").call(s),f.append("g").attr("class","y axis").call(l),M(e,u,f,n)}function x(e,t,n,r){function a(e){return X[(e-15)/30]}var o={},i={top:30,right:20,bottom:30,left:29},c=500-i.left-i.right,s=270-i.top-i.bottom,l=e.medians,u=d3.scaleLinear().range([0,c]).domain([0,365]),p=d3.scaleLinear().range([s,0]).domain([0,100]),f=d3.axisBottom(u).ticks(11).tickValues([15,45,75,105,135,165,195,225,255,285,315,345]).tickFormat(a),d=d3.axisLeft(p).ticks(6),h=d3.line().x(function(e,t){return u(Array.isArray(e)?D(e[0]):8*t+3)}).y(function(e){return p(Array.isArray(e)?e[1]:e)}),v=d3.select(t).append("div").classed("overlapping-graph",!0),m=v.append("svg").attr("viewBox",function(){return"0 0 "+(c+i.left+i.right)+" "+(s+i.top+i.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+i.left+","+i.top+")");m.call(q),m.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(f),m.append("g").attr("class","y axis").call(d),o.medians={path:A(e.medians,h,m)},o[2015]={path:A(e[2015],h,m)},o.medians.points=M(e.medians,h,m,l),o[2015].points=M(e[2015],h,m,l);var y=v.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){N(y,t,"timeseries","2015",o,e,h,m,l,n,r)}),N(y,"medians","timeseries","medians",o,e,h,m,l,n,r)}function C(e,t,n,r){var a=Math.min(490,490)/2-30,o=e.medians,i=P(e),c=j(o,i[1][0]),s=d3.scaleLinear().domain([0,100]).range([0,a]),l=d3.radialLine().radius(function(e){return s(Array.isArray(e)?e[1]:e)}).angle(function(e,t){return((Array.isArray(e)?D(e[0]):8*t+3)-1)%365/365*(2*Math.PI)}),u=d3.select(t).append("div").classed("polar-graph",!0),p=u.append("svg").attr("viewBox",function(){return"0 0 490 490"}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate(245,245)");p.call(q);var f=p.append("g").attr("class","r axis").selectAll("g").data(s.ticks(5).slice(1)).enter().append("g");f.append("circle").attr("r",s),f.append("text").attr("y",function(e){return-s(e)-4}).attr("transform","rotate(15)").style("text-anchor","middle").text(function(e){return e});var d=p.append("g").attr("class","a axis").selectAll("g").data(d3.range(0,360,30)).enter().append("g").attr("transform",function(e){return"rotate("+(e-90)+")"});d.append("line").attr("x2",a),d.append("text").attr("x",a+6).attr("dy",".35em").style("text-anchor",function(e){return e<360&&e>180?"end":null}).attr("transform",function(e){return e<360&&e>180?"rotate(180 "+(a+6)+",0)":null}).text(function(e){return X[e/30]});var h=p.append("g").selectAll("g").data(c).enter().append("g").attr("transform",function(e){return"rotate("+(e.data[1][0]-90)+")"});h.append("line").attr("class","line").attr("x2",a),h.append("text").attr("x",function(e){var t=e.data[1][0];return t<360&&t>180?a+30:a-30}).attr("y",function(e){return e.data[1][0]%365/365*(2*Math.PI)+6}).attr("dy",".35em").style("text-anchor",function(e){var t=e.data[1][0];return t<360&&t>180?"middle":null}).attr("transform",function(e){var t=e.data[1][0];return t<360&&t>180?"rotate(180 "+(a+6)+",0)":null}).text(function(e){return e.label});var v=i[1][0];T([[v,100],[(v+182.5)%365,100]],l,p).classed("growing-season-line","true"),T(i,l,p).classed("center-line","true"),p.selectAll("point").data([i[1]]).enter().append("circle").attr("class","point").attr("transform",function(e){return"translate("+l([e]).slice(1).slice(0,-1)+")"}).attr("r",4).attr("stroke","#000").attr("fill","#ea0c48").on("mouseover",function(e){q.show("Center: "+String(e[1]).substring(0,7)),this.setAttribute("r",5),this.setAttribute("stroke-width","2px"),d3.select(this).classed("active",!0)}).on("mouseout",function(e){q.hide(),this.setAttribute("r",4),this.setAttribute("stroke-width","1px"),d3.select(this).classed("active",!0)});var m={};m.medians={path:T(o,l,p)},m[2015]={path:T(e[2015],l,p)},m.medians.points=M(o,l,p,o),m[2015].points=M(e[2015],l,p,o);var y=u.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){var a=y.append("div");a.append("input").attr("type","checkbox").attr("id","polar-"+t+n.toString().replace(".","")+"-"+r.toString().replace(".","")).attr("value",t).property("checked","2015"===t).on("change",function(t){var n=this.value;this.checked?(m.hasOwnProperty(n)||(m[n]={}),m[n].path=T(e[n],l,p),m[n].points=M(e[n],l,p,o)):(m[n].path.remove(),m[n].points.remove())}),a.append("label").text(t).attr("for","polar-"+t+n.toString().replace(".","")+"-"+r.toString().replace(".","")),a.append("div").style("background",R("medians"!==t?t:0)).classed("graph-pip-example",!0)});var g=y.append("div");g.append("input").attr("type","checkbox").attr("id","polar-average-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")).attr("value","medians").property("checked",!0).on("change",function(t){var n=this.value;this.checked?(m.hasOwnProperty(n)||(m[n]={}),m[n].path=T(e[n],l,p),m[n].points=M(e[n],l,p,o)):(m[n].path.remove(),m[n].points.remove())}),g.append("label").text("Baseline").attr("for","polar-average-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")),g.append("div").style("background",R(0)).classed("graph-pip-example",!0);var b=y.append("div").classed("threshold-checkbox",!0);b.append("input").attr("type","checkbox").attr("id","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")).property("checked",!0).on("change",function(e){h.style("opacity",this.checked?1:0)}),b.append("label").text("Thresholds").attr("for","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".",""))}function P(e){var t,n,r,a,o,i=0,c=0;for(r=46,t=0;t<e.keys.length;t++)if(a=e[e.keys[t]],a.length===r){for(o=0,n=0;n<r/2;n++)o+=a[n][1]-a[n+23][1];o/=23,i+=o}else c++;i=Math.abs(i)/(e.keys.length-c);var s,l,u,p,f,d=1e6,h=0,v=e.medians;for(t=0;t<r/2;t++){for(l=0,u=0,f=0;f<r/2;f++)n=(t+f)%46,p=(n+23)%46,l+=parseInt(v[n],10),u+=parseInt(v[p],10);s=Math.abs(l-u),s<d&&(d=s,h=t)}var m=parseInt(v[h],10),y=parseInt(-v[h+23],10),g=Math.abs(i-m)-Math.abs(i-y);return Math.abs(-i-m)-Math.abs(-i-y)>g&&(h+=23),[[0,0],[8*h+3,i]]}function j(e,t){var n=Math.floor((t-3)/8);n>22&&(n-=23);var r,a,o,i=0;for(o=46,r=0;r<o;r++)a=(n+r)%o,i+=parseInt(e[a],10);var c,s,l=.15*i,u=.8*i,p=!1,f=!1;for(i=0,r=0;r<o;r++)a=(n+r)%o,i+=parseInt(e[a],10),!p&&i>l?(c=a,p=!0):!f&&i>u&&(s=a,f=!0);var d=[0,0];return[{label:"15%",data:[d,[8*c+3,100]]},{label:"80%",data:[d,[8*s+3,100]]}]}function A(e,t,n){return n.append("path").attr("class","line").attr("d",t(e))}function T(e,t,n){return n.append("path").datum(e).attr("class","line").attr("d",t)}function M(e,t,n,r){return n.selectAll("point").data(e).enter().append("circle").attr("class","point").attr("transform",function(e,n){var r=Array.isArray(e)?e:[8*n+3,e];return"translate("+t([r]).slice(1).slice(0,-1)+")"}).attr("r",3).attr("stroke","#000").attr("fill",function(e,t){return R(Array.isArray(e)?e[0].substring(0,4):0)}).on("mouseover",I).on("mouseout",B)}function I(e){var t=Array.isArray(e)?F(e[0])+": "+e[1]:"Average: "+e;q.show(t),this.setAttribute("r",5),this.setAttribute("stroke-width","2px")}function B(e){q.hide(),this.setAttribute("r",3),this.setAttribute("stroke-width","1px")}function N(e,t,n,r,a,o,i,c,s,l,u){var p=e.append("div");p.append("input").attr("type","checkbox").attr("id",n+"-"+t+l.toString().replace(".","")+"-"+u.toString().replace(".","")).attr("value",t).property("checked",t===r).on("change",function(e){var t=this.value;this.checked?(a.hasOwnProperty(t)||(a[t]={}),a[t].path=A(o[t],i,c),a[t].points=M(o[t],i,c,s)):(a[t].path.remove(),a[t].points.remove())}),p.append("label").text(t).attr("for",n+"-"+t+l.toString().replace(".","")+"-"+u.toString().replace(".","")),p.append("div").style("background",R("medians"!==t?t:0)).classed("graph-pip-example",!0)}function R(e){var t=["#ffe476","#036593","#116c91","#1e7390","#2c7b8e","#39828c","#4c8c8a","#5e9589","#719f87","#83a886","#95b183","#a6ba80","#b8c37c","#cacc79","#d6d279","#e2d779","#efdd78","#fbe378"];return 0===e?"#fff":t[parseInt(e,10)%t.length]}function G(e){e=e.toString();var t=e.substring(0,4),n=parseInt(e.substring(4,6),10)-1,r=e.substring(6,8);return new Date(t,n,r)}function D(e){return"string"==typeof e?(e=G(e),e.getDOY()):e}function F(e){return"Average"===e?e:(e=G(e),U(e.getMonth())+" "+Y(e.getDate())+", "+e.getFullYear())}function U(e){switch(e){case 0:return"Jan.";case 1:return"Feb.";case 2:return"Mar.";case 3:return"Apr.";case 4:return"May";case 5:return"Jun.";case 6:return"Jul.";case 7:return"Aug.";case 8:return"Sep.";case 9:return"Oct.";case 10:return"Nov.";case 11:return"Dec."}}function Y(e){var t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"}Object.defineProperty(t,"__esModule",{value:!0}),t.SetupGraphs=r,t.BindGraphEvents=o,t.getIcon=i,t.createMarker=s,t.createGraphRemover=l,t.HandleGraphTabChange=m,t.createGraphDiv=E;var H=n(27),$=n(22),z=n(25),K=n(24),W=n(2),q={},Z=L.Icon.extend({}),J=new Z({iconUrl:"imgs/blue_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),V=new Z({iconUrl:"imgs/orange_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),X={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"}},function(e,t,n){"use strict";function r(){d3.selectAll(".panel-top-btn").on("click",o)}function a(){return document.getElementsByClassName("panel-top-btn active")[0].getAttribute("data-active")}function o(){this.classList.contains("active")||i(this.getAttribute("data-active"))}function i(e){s(),c(e),(0,p.updateShareUrl)()}function c(e){d3.select(".panel-top-btn[data-active='"+e+"']").classed("active",!0),d3.selectAll("#map-wrapper, #right-panel").classed(e,!0),d3.select(".panel-section-wrapper[data-active='"+e+"']").classed("active",!0),l(),(0,u.updatePanelDragOverlayHeight)()}function s(){var e=d3.select(".panel-top-btn.active").attr("data-active");d3.selectAll("#map-wrapper, #right-panel").classed(e,!1),d3.selectAll(".panel-top-btn.active, .panel-section-wrapper.active").classed("active",!1)}function l(){var e=document.getElementById("right-panel").offsetWidth;document.getElementById("map-wrapper").style.paddingRight=e+"px"}Object.defineProperty(t,"__esModule",{value:!0}),t.BindTabEvents=r,t.GetActiveTab=a,t.HandleTabChange=i;var u=n(22),p=n(25)},function(e,t,n){"use strict";function r(e,t){var n=e.opacity||1,r=p(n);t.style.top=r+"px"}function a(e){var t=void 0!==e.opacity?e.opacity:1,n=document.createElement("div");n.classList.add("opacity-slider-wrapper");var r=o(e,t);return n.appendChild(r),n}function o(e,t){var n=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div");return n.classList.add("opacity-slider-track-overlay"),a.classList.add("opacity-slider-track"),o.classList.add("opacity-slider-handle"),n.appendChild(a),n.append(o),e.active&&r(e,o),i(n,e,t),n}function i(e,t,n){d3.select(e).call(d3.drag().on("start drag",function(){var n=s(e);(0,u.updateLayerOpacity)(t,n),c(e,n)}).on("end",function(){(0,l.updateShareUrl)()}))}function c(e,t){e.getElementsByClassName("opacity-slider-handle")[0].style.top=p(t)+"px"}function s(e){var t=d3.mouse(e)[1];return p.invert(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.setSliderInitialPos=r,t.makeOpacitySlider=a;var l=n(25),u=n(23),p=d3.scaleLinear().domain([1,0]).range([0,90]).clamp(!0)},function(e,t){"use strict";function n(e){if(e.image){var t=r(),n=a(e),i=e.link?o(e.link):null;i?(i.appendChild(n),t.appendChild(i)):t.appendChild(n);var c=document.getElementsByClassName(e.location)[0],s=c.firstChild;c.insertBefore(t,s)}}function r(){var e=document.createElement("div");return d3.select(e).classed("project-logo",!0),e}function a(e){var t=document.createElement("img");return t.setAttribute("src",e.image),e.label&&(t.setAttribute("alt",e.label),t.setAttribute("title",e.label)),t}function o(e){var t=document.createElement("a");return t.setAttribute("href",e),t.setAttribute("target","_blank"),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXhfYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAwMDdjNThkMjViODM4ZGMyZmQ3YyIsIndlYnBhY2s6Ly8vLi9qcy9iYXNlLmpzIiwid2VicGFjazovLy8uL2pzL3BhcnNlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvbGVhZmxldENvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ub2RlbnQtcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovLy8uL34vbm9kZW50LXJ1bnRpbWUvem91c2FuLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L34vc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L25vZGVudC1ydW50aW1lL3RoZW5hYmxlRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL34vbG9kYXNoLmRlYm91bmNlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3NlYXJjaEVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvZG9tVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Jlc3VsdExpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2JpbmdQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvcHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2VzcmlQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL29wZW5TdHJlZXRNYXBQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9wYW5lbC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9sYXllci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tYXAuanMiLCJ3ZWJwYWNrOi8vLy4vanMvc2hhcmUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvYmFzZWxheWVyLmpzIiwid2VicGFjazovLy8uL2pzL3BvaS5qcyIsIndlYnBhY2s6Ly8vLi9qcy9ncmFwaC5qcyIsIndlYnBhY2s6Ly8vLi9qcy90YWJzLmpzIiwid2VicGFjazovLy8uL2pzL29wYWNpdHlTbGlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vanMvbG9nby5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX3BhcnNlciIsIl9zZWFyY2giLCJfc2VhcmNoMiIsIl9wYW5lbCIsIl9iYXNlbGF5ZXIiLCJfZ3JhcGgiLCJfdGFicyIsIl9tYXAiLCJfc2hhcmUiLCJfbGF5ZXIiLCJfbG9nbyIsIl9sb2dvMiIsIl9wb2kiLCJCYXNlIiwiY29uZmlnIiwiUGFyc2VDb25maWciLCJjYWxsYmFjayIsIlNldHVwR3JhcGhzIiwiQmluZFRhYkV2ZW50cyIsIkJpbmRDb3B5TGlua0V2ZW50cyIsImRhdGEiLCJBZGRTaGFyZVNldHRpbmdzVG9Db25maWciLCJtYXAiLCJDcmVhdGVNYXAiLCJDcmVhdGVCYXNlTGF5ZXJzIiwiYmFzZWxheWVycyIsIkNyZWF0ZURlZmF1bHRMYXllcnMiLCJsYXllcnMiLCJTZXR1cFBhbmVsIiwibGF5b3V0IiwibG9nbyIsInRhYiIsIkhhbmRsZVRhYkNoYW5nZSIsImdyYXBoIiwiSGFuZGxlR3JhcGhUYWJDaGFuZ2UiLCJCaW5kR3JhcGhFdmVudHMiLCJCaW5kVXBkYXRlU2hhcmVVcmwiLCJTZXR1cFBvaW50c09mSW50ZXJlc3QiLCJwb2lzIiwidXBkYXRlU2hhcmVVcmwiLCJ3aW5kb3ciLCJjb25maWdGaWxlIiwiR2V0Q29uZmlnIiwiR2V0QWpheE9iamVjdCIsInJlc3BvbnNlSGFuZGxlciIsInhtbGh0dHAiLCJBY3RpdmVYT2JqZWN0IiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2UiLCJvcGVuIiwic2VuZCIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwicGFyc2UiLCJlcnIiLCJmb3JtYXRNYXAiLCJmb3JtYXRMYXllcnMiLCJsYXllcmdyb3VwIiwiaSIsImRlZmF1bHRNYXBzZXJ2ZXJVcmwiLCJtYXBzZXJ2ZXJVcmwiLCJwcm9wIiwiaGFzT3duUHJvcGVydHkiLCJsZW5ndGgiLCJzZXRNYXBzZXJ2ZXJVcmwiLCJsYXllciIsInVybCIsIkNyZWF0ZVNlYXJjaCIsInByb3ZpZGVyIiwiX2xlYWZsZXRHZW9zZWFyY2giLCJFc3JpUHJvdmlkZXIiLCJzZWFyY2hDb250cm9sIiwiR2VvU2VhcmNoQ29udHJvbCIsInNob3dNYXJrZXIiLCJhdXRvQ29tcGxldGUiLCJhZGRDb250cm9sIiwiTCIsIkRvbUV2ZW50Iiwib24iLCJzZWFyY2hFbGVtZW50IiwiZWxlbWVudHMiLCJjb250YWluZXIiLCJldiIsInN0b3BQcm9wYWdhdGlvbiIsIl9sZWFmbGV0Q29udHJvbCIsImVudW1lcmFibGUiLCJnZXQiLCJfc2VhcmNoRWxlbWVudCIsIl9iaW5nUHJvdmlkZXIiLCJfZXNyaVByb3ZpZGVyIiwiX2dvb2dsZVByb3ZpZGVyIiwiX29wZW5TdHJlZXRNYXBQcm92aWRlciIsIl9wcm92aWRlciIsIkxlYWZsZXRDb250cm9sIiwiQ29udHJvbCIsImV4dGVuZCIsIkVycm9yIiwiTENvbnRyb2wiLCJfbGVuIiwiYXJndW1lbnRzIiwib3B0aW9ucyIsIkFycmF5IiwiX2tleSIsIkZ1bmN0aW9uIiwicHJvdG90eXBlIiwiYmluZCIsImFwcGx5IiwiY29uY2F0IiwiX25vZGVudFJ1bnRpbWUiLCJfZXh0ZW5kcyIsImFzc2lnbiIsInRhcmdldCIsInNvdXJjZSIsImtleSIsIl9sb2Rhc2giLCJfbG9kYXNoMiIsIl9zZWFyY2hFbGVtZW50MiIsIl9yZXN1bHRMaXN0IiwiX3Jlc3VsdExpc3QyIiwiX2RvbVV0aWxzIiwiX2NvbnN0YW50cyIsImRlZmF1bHRPcHRpb25zIiwicG9zaXRpb24iLCJzdHlsZSIsInNob3dQb3B1cCIsIm1hcmtlciIsImljb24iLCJJY29uIiwiRGVmYXVsdCIsImRyYWdnYWJsZSIsIm1heE1hcmtlcnMiLCJyZXRhaW5ab29tTGV2ZWwiLCJhbmltYXRlWm9vbSIsInNlYXJjaExhYmVsIiwibm90Rm91bmRNZXNzYWdlIiwibWVzc2FnZUhpZGVEZWxheSIsInpvb21MZXZlbCIsImNsYXNzTmFtZXMiLCJidXR0b24iLCJtc2dib3giLCJmb3JtIiwiaW5wdXQiLCJhdXRvQ29tcGxldGVEZWxheSIsImluaXRpYWxpemUiLCJfdGhpcyIsInRoaXMiLCJtYXJrZXJzIiwiRmVhdHVyZUdyb3VwIiwiX29wdGlvbnMiLCJoYW5kbGVTdWJtaXQiLCJxdWVyeSIsIm9uU3VibWl0IiwiX3NlYXJjaEVsZW1lbnQkZWxlbWVuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjcmVhdGVFbGVtZW50IiwidGl0bGUiLCJocmVmIiwib25DbGljayIsInJlc3VsdExpc3QiLCJoYW5kbGVDbGljayIsIl9yZWYiLCJyZXN1bHQiLCJsYWJlbCIsImFwcGVuZENoaWxkIiwiYXV0b1NlYXJjaCIsInNlbGVjdFJlc3VsdCIsImNsZWFyUmVzdWx0cyIsIm9uQWRkIiwiX29wdGlvbnMyIiwiYWRkVG8iLCJyb290IiwiZ2V0Q29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsIm9uUmVtb3ZlIiwicmVtb3ZlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZWFyY2hFbGVtZW50JGVsZW1lbjIiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZUNsYXNzTmFtZSIsImFkZENsYXNzTmFtZSIsImZvY3VzIiwiQVJST1dfRE9XTl9LRVkiLCJBUlJPV19VUF9LRVkiLCJpbmNsdWRlcyIsImtleUNvZGUiLCJsaXN0IiwibWF4IiwiY291bnQiLCJuZXh0IiwiY29kZSIsInNlbGVjdGVkIiwiaWR4IiwiaXRlbSIsInNlbGVjdCIsIkVTQ0FQRV9LRVkiLCJjbGVhciIsIlByb21pc2UiLCIkcmV0dXJuIiwiJGVycm9yIiwicmVzdWx0cyIsIlNQRUNJQUxfS0VZUyIsInNlYXJjaCIsInRoZW4iLCIkYXdhaXRfMSIsInJlbmRlciIsIiRhc3luY2JpbmQiLCIkYXdhaXRfMiIsInNob3dSZXN1bHQiLCJrZXlzIiwiX2xheWVycyIsInJlbW92ZUxheWVyIiwiYWRkTWFya2VyIiwiY2VudGVyTWFwIiwiZmlyZUV2ZW50IiwibG9jYXRpb24iLCJfb3B0aW9uczMiLCJNYXJrZXIiLCJ5IiwieCIsImJpbmRQb3B1cCIsImFkZExheWVyIiwib3BlblBvcHVwIiwiX29wdGlvbnM0IiwicmVzdWx0Qm91bmRzIiwiTGF0TG5nQm91bmRzIiwiYm91bmRzIiwiaXNWYWxpZCIsImdldEJvdW5kcyIsImZpdEJvdW5kcyIsImFuaW1hdGUiLCJzZXRWaWV3IiwiZ2V0Q2VudGVyIiwiZ2V0Wm9vbSIsIl9vcHRpb25zNSIsIiRhc3luY3NwYXduIiwicHJvbWlzZVByb3ZpZGVyIiwic2VsZiIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZ2VuRiIsInJlc29sdmUiLCJyZWplY3QiLCJzdGVwIiwiZm4iLCJhcmciLCJnZW4iLCJkb25lIiwidiIsInRocm93Iiwic3JjIiwidG9TdHJpbmciLCJ0IiwiYXJncyIsIm1hdGNoIiwicmUiLCJteCIsImV4ZWMiLCJwdXNoIiwicmV2ZXJzZSIsImZvckVhY2giLCJzbGljZSIsImluZGV4Iiwic3Vic3RyIiwicmVwbGFjZSIsInpvdXNhbiIsInRoZW5hYmxlIiwiY2F0Y2hlciIsImJvdW5kVGhlbiIsInJlc29sdmVyIiwidHJhbXBvbGluZSIsInMiLCJ1IiwiYiIsInEiLCJ1bmRlZmluZWQiLCJwb3AiLCJyIiwiTGF6eVRoZW5hYmxlIiwiRWFnZXJUaGVuYWJsZSIsIlRoZW5hYmxlIiwiRWFnZXJUaGVuYWJsZUZhY3RvcnkiLCJleCIsInByb2Nlc3MiLCJzZXRJbW1lZGlhdGUiLCJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsInRpY2siLCJab3VzYW4iLCJmdW5jIiwibWUiLCJTVEFURV9GVUxGSUxMRUQiLCJ5cmV0IiwiU1RBVEVfUkVKRUNURUQiLCJyZWFzb24iLCJuIiwibmV4dFRpY2siLCJmIiwic2V0VGltZW91dCIsInNvb24iLCJjYWxsUXVldWUiLCJmcSIsImZxU3RhcnQiLCJidWZmZXJTaXplIiwic3BsaWNlIiwic3RhdGUiLCJUeXBlRXJyb3IiLCJmaXJzdCIsInJhIiwicnIiLCJsIiwiY2xpZW50cyIsIm9uRiIsIm9uUiIsImNsaWVudCIsImEiLCJ2YWwiLCJ6IiwidmVyc2lvbiIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImNhY2hlZFNldFRpbWVvdXQiLCJydW5DbGVhclRpbWVvdXQiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpbmluZyIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlIiwicXVldWVJbmRleCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwibGVuIiwicnVuIiwiSXRlbSIsImFycmF5Iiwibm9vcCIsImJyb3dzZXIiLCJlbnYiLCJhcmd2IiwidmVyc2lvbnMiLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJiaW5kaW5nIiwibmFtZSIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJUaW1lb3V0IiwiY2xlYXJGbiIsIl9pZCIsIl9jbGVhckZuIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiY2xvc2UiLCJ1bnJlZiIsInJlZiIsImVucm9sbCIsIm1zZWNzIiwiX2lkbGVUaW1lb3V0SWQiLCJfaWRsZVRpbWVvdXQiLCJ1bmVucm9sbCIsIl91bnJlZkFjdGl2ZSIsImFjdGl2ZSIsIl9vblRpbWVvdXQiLCJjbGVhckltbWVkaWF0ZSIsImdsb2JhbCIsInRhc2siLCJ0YXNrc0J5SGFuZGxlIiwibmV4dEhhbmRsZSIsInJlZ2lzdGVySW1tZWRpYXRlIiwiaGFuZGxlIiwicnVuSWZQcmVzZW50IiwiY3VycmVudGx5UnVubmluZ0FUYXNrIiwiZG9jIiwiZG9jdW1lbnQiLCJhdHRhY2hUbyIsImdldFByb3RvdHlwZU9mIiwicG9zdE1lc3NhZ2UiLCJpbXBvcnRTY3JpcHRzIiwicG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyIsIm9sZE9uTWVzc2FnZSIsIm9ubWVzc2FnZSIsIm1lc3NhZ2VQcmVmaXgiLCJNYXRoIiwicmFuZG9tIiwib25HbG9iYWxNZXNzYWdlIiwiaW5kZXhPZiIsImF0dGFjaEV2ZW50IiwiTWVzc2FnZUNoYW5uZWwiLCJjaGFubmVsIiwicG9ydDEiLCJwb3J0MiIsImh0bWwiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JpcHQiLCJyZW1vdmVDaGlsZCIsImlzVGhlbmFibGUiLCJyZXNvbHV0aW9uIiwiaG93IiwiQ2hhaW5lZCIsIl91bmNoYWluZWQiLCJ0aGVuQ2hhaW4iLCJyZXMiLCJyZWoiLCJjaGFpbiIsIl9yZXNvbHZlciIsImRlYm91bmNlIiwid2FpdCIsImludm9rZUZ1bmMiLCJ0aW1lIiwibGFzdEFyZ3MiLCJ0aGlzQXJnIiwibGFzdFRoaXMiLCJsYXN0SW52b2tlVGltZSIsImxlYWRpbmdFZGdlIiwidGltZXJJZCIsInRpbWVyRXhwaXJlZCIsImxlYWRpbmciLCJyZW1haW5pbmdXYWl0IiwidGltZVNpbmNlTGFzdENhbGwiLCJsYXN0Q2FsbFRpbWUiLCJ0aW1lU2luY2VMYXN0SW52b2tlIiwibWF4aW5nIiwibmF0aXZlTWluIiwibWF4V2FpdCIsInNob3VsZEludm9rZSIsIm5vdyIsInRyYWlsaW5nRWRnZSIsInRyYWlsaW5nIiwiY2FuY2VsIiwiZmx1c2giLCJkZWJvdW5jZWQiLCJpc0ludm9raW5nIiwiRlVOQ19FUlJPUl9URVhUIiwidG9OdW1iZXIiLCJpc09iamVjdCIsIm5hdGl2ZU1heCIsInR5cGUiLCJpc09iamVjdExpa2UiLCJpc1N5bWJvbCIsIm9iamVjdFRvU3RyaW5nIiwic3ltYm9sVGFnIiwiTkFOIiwib3RoZXIiLCJ2YWx1ZU9mIiwicmVUcmltIiwiaXNCaW5hcnkiLCJyZUlzQmluYXJ5IiwidGVzdCIsInJlSXNPY3RhbCIsImZyZWVQYXJzZUludCIsInJlSXNCYWRIZXgiLCJwYXJzZUludCIsImZyZWVHbG9iYWwiLCJmcmVlU2VsZiIsIm9iamVjdFByb3RvIiwibWluIiwiRGF0ZSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiU2VhcmNoRWxlbWVudCIsIl9yZWYkaGFuZGxlU3VibWl0IiwiX3JlZiRzZWFyY2hMYWJlbCIsIl9yZWYkY2xhc3NOYW1lcyIsImpvaW4iLCJwbGFjZWhvbGRlciIsIm9uSW5wdXQiLCJvbktleVVwIiwib25LZXlQcmVzcyIsIm9uRm9jdXMiLCJvbkJsdXIiLCJfZWxlbWVudHMiLCJoYXNFcnJvciIsIl9lbGVtZW50czIiLCJib2R5IiwiYmx1ciIsIkVOVEVSX0tFWSIsImVsZW1lbnQiLCJwYXJlbnQiLCJlbCIsImNsYXNzTmFtZSIsImNyZWF0ZVNjcmlwdEVsZW1lbnQiLCJjYiIsInNldEF0dHJpYnV0ZSIsImpzb24iLCJhZGQiLCJBUlJPV19MRUZUX0tFWSIsIkFSUk9XX1JJR0hUX0tFWSIsImN4IiwiY2xhc3NuYW1lcyIsInRyaW0iLCJSZXN1bHRMaXN0IiwiX3JlZiRoYW5kbGVDbGljayIsIl9pbml0aWFsaXNlUHJvcHMiLCJyZXN1bHRJdGVtIiwiY2hpbGQiLCJjbG9uZU5vZGUiLCJpbm5lckhUTUwiLCJmcm9tIiwiY2hpbGRyZW4iLCJsYXN0Q2hpbGQiLCJfcmVmMiIsInBhcmVudE5vZGUiLCJoYXNBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfcHJvdmlkZXIyIiwiUHJvdmlkZXIiLCJfQmFzZVByb3ZpZGVyIiwicHJvdG9jb2wiLCJqc29ucCIsInBhcmFtcyIsImdldFBhcmFtU3RyaW5nIiwicmVzb3VyY2VTZXRzIiwicmVzb3VyY2VzIiwicG9pbnQiLCJjb29yZGluYXRlcyIsImFkZHJlc3MiLCJmb3JtYXR0ZWRBZGRyZXNzIiwiYmJveCIsInJhdyIsIl9yZWYzIiwiZW5kcG9pbnQiLCJlbmNvZGVVUklDb21wb25lbnQiLCJyZXF1ZXN0IiwiZmV0Y2giLCJ0ZXh0IiwibG9jYXRpb25zIiwiZmVhdHVyZSIsImdlb21ldHJ5IiwiZXh0ZW50IiwieW1pbiIsInhtaW4iLCJ5bWF4IiwieG1heCIsInBhcmFtU3RyaW5nIiwibG5nIiwibGF0IiwiZm9ybWF0dGVkX2FkZHJlc3MiLCJ2aWV3cG9ydCIsInNvdXRod2VzdCIsIm5vcnRoZWFzdCIsImZvcm1hdCIsImxvbiIsImRpc3BsYXlfbmFtZSIsInBhcnNlRmxvYXQiLCJib3VuZGluZ2JveCIsIm1ha2VMYXllckVsZW1zIiwibWFrZUxheWVyR3JvdXBzIiwibWFrZVBhbmVsRHJhZ2dhYmxlIiwic2V0UGFuZWxTY3JvbGxIYW5kbGVyIiwiYnJvd3NlcklzSW50ZXJuZXRFeHBsb3JlciIsInVhIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJvbnNjcm9sbCIsInVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQiLCJvdmVybGF5IiwiZDMiLCJkcmFnIiwicGFuZWxEcmFnRXZlbnRIYW5kbGVyIiwidXBkYXRlUGFuZWxXaWR0aCIsIm5ld0hlaWdodCIsInBhbmVsIiwicGFuZWxPZmZzZXRIZWlnaHQiLCJwcm9wZXJ0eSIsInBhbmVsRHJhZ092ZXJsYXkiLCJoZWFkZXIiLCJjbGFzc2VkIiwiZ3JhcGhMaXN0Iiwic2Nyb2xsSGVpZ2h0IiwibGF5ZXJMaXN0IiwiaGVpZ2h0IiwicGFuZWxNaW5XaWR0aCIsInBhbmVsQ2xpZW50V2lkdGgiLCJ3cmFwcGVyIiwid3JhcHBlcldpZHRoIiwiY2xpZW50V2lkdGgiLCJtYXBXcmFwcGVyIiwibW91c2VYIiwic291cmNlRXZlbnQiLCJ4RGVsdGEiLCJuZXdQYW5lbFdpZHRoIiwicGFkZGluZ1JpZ2h0Iiwic2VsZWN0QWxsIiwiZW50ZXIiLCJhcHBlbmQiLCJhdHRyIiwibGF5ZXJHcm91cCIsImVhY2giLCJsYXllckdyb3VwcyIsImxheWVyRGl2IiwibWFrZUNoZWNrYm94IiwibWFrZUxhYmVsIiwibWFrZURlc2NyaXB0aW9uIiwibm9kZSIsIm1ha2VMYXllclRvb2xzIiwidG9nZ2xlTGF5ZXIiLCJfb3BhY2l0eVNsaWRlciIsInNldFNsaWRlckluaXRpYWxQb3MiLCJpbmZvIiwibGF5ZXJUb29sc0RpdiIsIm9wYWNpdHlTbGlkZXIiLCJtYWtlT3BhY2l0eVNsaWRlciIsImxlZ2VuZCIsIm1ha2VMZWdlbmQiLCJsYXllclRvb2xzV3JhcHBlciIsImxlZ2VuZFdyYXBwZXIiLCJsZWdlbmRJbWciLCJHZXRDdXJyZW50TGF5ZXJzIiwiX2N1cnJlbnRfbGF5ZXJzIiwiZGVmYXVsdExheWVycyIsImoiLCJkZWZhdWx0TGF5ZXIiLCJmb3VuZExheWVyIiwiZW5hYmxlTGF5ZXIiLCJkaXNhYmxlTGF5ZXIiLCJHZXRNYXAiLCJtYXBMYXllciIsIm1ha2VXbXNUaWxlTGF5ZXIiLCJhZGRMYXllclRvSW50ZXJuYWxUcmFja2VyIiwibW92ZU92ZXJsYXlMYXllcnNUb1RvcCIsIl9jdXJyZW50X2xheWVyc19vYmplY3RzIiwiYnJpbmdUb0Zyb250IiwiaGFzTGF5ZXIiLCJyZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIiLCJsb2MiLCJ1cGRhdGVMYXllck9wYWNpdHkiLCJuZXdPcGFjaXR5Iiwib3BhY2l0eSIsInNldE9wYWNpdHkiLCJ0aWxlTGF5ZXIiLCJ3bXMiLCJ0cmFuc3BhcmVudCIsImNycyIsIkNSUyIsIkVQU0c5MDA5MTMiLCJ0aWxlU2l6ZSIsIm1hcENvbmZpZyIsInNjcm9sbFdoZWVsWm9vbSIsImluaXRpYWxDZW50ZXIiLCJjZW50ZXIiLCJpbml0aWFsWm9vbSIsInpvb20iLCJjb250cm9sIiwiYXR0cmlidXRpb24iLCJzZXRTaGFyZVVybCIsIm1ha2VTaGFyZVVybCIsIm1ha2VDZW50ZXJTdHJpbmciLCJtYWtlWm9vbVN0cmluZyIsIm1ha2VMYXllclN0cmluZyIsIm1ha2VCYXNlTGF5ZXJTdHJpbmciLCJtYWtlUG9pbnRzT2ZJbnRlcmVzdFN0cmluZyIsIm1ha2VBY3RpdmVUYWJTdHJpbmciLCJtYWtlQWN0aXZlR3JhcGhUYWJTdHJpbmciLCJzZXRDb3B5TGlua1VybCIsInNldFNvY2lhbFVybHMiLCJzaGFyZSIsInBhcnNlU2hhcmVVcmwiLCJhZGRMYXllclNldHRpbmdzVG9Db25maWciLCJhZGRCYXNlTGF5ZXJTZXR0aW5nc1RvQ29uZmlnIiwiYWRkUG9pbnRzT2ZJbnRlcmVzdFRvQ29uZmlnIiwiZmlsdGVyIiwiaGlzdG9yeSIsInJlcGxhY2VTdGF0ZSIsImhhbmRsZUJvZHlDbGljayIsImhhbmRsZVNoYXJlTGlua0J1dHRvbkNsaWNrIiwiaGFuZGxlU2hhcmVMaW5rVXJsQ2xpY2siLCJoYW5kbGVTaGFyZUxpbmtDbG9zZUJ1dHRvbkNsaWNrIiwicGFyZW50cyIsInBhdGgiLCJnZXREb21QYXRoIiwic3JjRWxlbWVudCIsImNsaWNrZWRJblBvcHVwIiwiaGFuZGxlQ29weUxpbmtDbG9zZSIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJoYW5kbGVDb3B5TGlua09wZW4iLCJzZWxlY3RDb3B5TGlua1VybCIsInNoYXJlSW5wdXQiLCJzZXRTZWxlY3Rpb25SYW5nZSIsInNvY2lhbExpbmsiLCJuZXdVcmwiLCJtYW5nbGVQYXJhbVN0cmluZyIsInNvY2lhbExpbmtzIiwib3BhY2l0eVZhbHMiLCJjdXJyZW50TGF5ZXJzIiwiZWFjaExheWVyIiwiY3VycmVudExheWVyIiwiQkFTRV9MQVlFUl9UWVBFIiwiR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCIsInBvaVN0cmluZyIsInBvaSIsImdldFBhcmFtc0FycmF5IiwibWFrZUtleWVkUGFyYW1zT2JqZWN0IiwiZm9ybWF0UGFyYW1zIiwic3Vic3RyaW5nIiwidW5tYW5nbGVQYXJhbVN0cmluZyIsInNwbGl0IiwicGFyYW1zQXJyIiwicGFyYW1QYWlyIiwicGFyc2VkUGFyYW1zIiwiZm9ybWF0Q2VudGVyUGFyYW0iLCJmb3JtYXRMYXllclBhcmFtIiwiZm9ybWF0QmFzZUxheWVyUGFyYW0iLCJmb3JtYXRQb2ludHNPZkludGVyZXN0UGFyYW0iLCJsYXllcklkIiwiZm9ybWF0dGVkTGF5ZXJzIiwiZW5hYmxlZExheWVycyIsInN0ciIsInNoYXJlTGF5ZXJTZXR0aW5ncyIsImVuYWJsZWRMYXllciIsInNoYXJlQmFzZUxheWVyU2V0dGluZ3MiLCJiYXNlbGF5ZXIiLCJsYXllckNvbmZpZyIsIl9iYXNlbGF5ZXJzIiwiYmFzZUxheWVyIiwiY3JlYXRlQmFzZUxheWVyIiwiY3JlYXRlQmFzZUxheWVyVUkiLCJiYXNlVUkiLCJiYXNlV3JhcHBlciIsImJhc2VJbWciLCJiYXNlTGFiZWwiLCJpbWFnZSIsInRleHRDb250ZW50IiwiaGFuZGxlQmFzZUNsaWNrIiwibGF5ZXJpZCIsInRvZ2dsZUFjdGl2ZUJhc2VVSSIsInJlbW92ZUN1cnJlbnRCYXNlTGF5ZXIiLCJhZGROZXdCYXNlTGF5ZXJUb01hcCIsImJhc2VVSUVsZW0iLCJicmluZ1RvQmFjayIsIm1ha2VCYXNlTGF5ZXJPcHRpb25zIiwic3ViZG9tYWlucyIsIl9wb2ludHNfb2ZfaW50ZXJlc3QiLCJBZGRQb2ludE9mSW50ZXJlc3RUb1RyYWNrZXIiLCJuZXdQb2lzIiwiQWRkTXVsdGlwbGVQb2ludHNPZkludGVyZXN0IiwiU2V0dXBQb2ludE9mSW50ZXJlc3RVSSIsIlJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyIiwicG9pVG9SZW1vdmUiLCJkaXYiLCJjcmVhdGVHcmFwaERpdiIsImNyZWF0ZU1hcmtlciIsImdyYXBoRGl2IiwiY3JlYXRlR3JhcGhSZW1vdmVyIiwic2V0SWNvbiIsImdldEljb24iLCJoYW5kbGVNYXJrZXJNb3VzZUV2ZW50Iiwib3JpZ2luYWxFdmVudCIsInNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGgiLCJ0cmlnZ2VyR3JhcGhBbmltYXRpb24iLCJyaWdodFBhbmVsIiwic2Nyb2xsVG9wIiwib2Zmc2V0VG9wIiwiUmVtb3ZlUG9pbnRPZkludGVyZXN0VUkiLCJoYW5kbGVHcmFwaFR5cGVCdG5DbGljayIsImV4dGVuZERhdGVNb2R1bGUiLCJ0aXAiLCJkIiwiaXNMZWFwWWVhciIsInllYXIiLCJnZXRGdWxsWWVhciIsImdldERPWSIsImRheUNvdW50IiwibW4iLCJnZXRNb250aCIsImRuIiwiZ2V0RGF0ZSIsImRheU9mWWVhciIsImhhbmRsZU1hcENsaWNrIiwiaG92ZXJJY29uIiwiZ3JhcGhJY29uIiwibGF0bG5nIiwiZ2EiLCJldmVudENhdGVnb3J5IiwiZXZlbnRBY3Rpb24iLCJldmVudExhYmVsIiwibm9uSW50ZXJhY3Rpb24iLCJlbGVtIiwiY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSIsImlubmVyVGV4dCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImhhbmRsZUdyYXBoRGF0YVJlc3BvbnNlIiwiZHJhd0dyYXBoIiwiZ2V0RGF0YSIsIm9SZXEiLCJzcGxpdERhdGEiLCJyZXByb2Nlc3NEYXRhIiwib3JpZ2RhdGEiLCJrZXlzVG9CZURlbGV0ZWQiLCJkYXRhRm9yTWVkaWFucyIsIm1lZGlhbiIsInNvcnQiLCJmbG9vciIsImFjdGl2ZVR5cGUiLCJncmFwaFR5cGUiLCJpc0dyYXBoTGlzdEVtcHR5Iiwib2xkQWN0aXZlR3JhcGhFbGVtSGVpZ2h0Iiwib2xkQWN0aXZlR3JhcGhJbmZvSGVpZ2h0IiwicmlnaHRQYW5lbFNjcm9sbFRvcCIsImRpc2FibGVBY3RpdmVHcmFwaFRhYiIsImVuYWJsZUdyYXBoVGFiIiwiYWRqdXN0U2Nyb2xsUG9zaXRpb24iLCJvbGRHcmFwaEluZm9IZWlnaHQiLCJvbGRHcmFwaEVsZW1IZWlnaHQiLCJvbGRSaWdodFBhbmVsU2Nyb2xsVG9wIiwibmV3R3JhcGhJbmZvSGVpZ2h0IiwibmV3R3JhcGhFbGVtSGVpZ2h0IiwibmV3R3JhcGhFbGVtSGVpZ2h0U2NhbGUiLCJuZXdSaWdodFBhbmVsU2Nyb2xsVG9wIiwiYWN0aXZlRWxlbSIsImFjdGl2ZUNsYXNzIiwibGF0U2hvcnQiLCJyb3VuZEZsb2F0IiwibG5nU2hvcnQiLCJ6b29tVG9NYXJrZXJCdXR0b24iLCJtYWtlWm9vbVRvTWFwTWFya2VyQnV0dG9uIiwiY29udGVudCIsImNyZWF0ZVRleHROb2RlIiwiY29udGVudERpdiIsIm9uY2xpY2siLCJwYW5UbyIsInJlcHJvY2Vzc2VkRGF0YSIsIm1ha2VVcERvd25MaW5lR3JhcGgiLCJtYWtlVXBEb3duT3ZlcmxhcGluZ0xpbmVHcmFwaFdpdGhDaGVja2JveGVzIiwiZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzIiwibnVtYmVyIiwiZGVjaW1hbFBsYWNlcyIsInJvdW5kIiwicG93IiwiYXZlcmFnZXMiLCJtYXJnaW4iLCJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImxlZnQiLCJ3aWR0aCIsInNjYWxlVGltZSIsInJhbmdlIiwiZG9tYWluIiwicGFyc2VEYXRlIiwic2NhbGVMaW5lYXIiLCJ4QXhpcyIsImF4aXNCb3R0b20iLCJ0aWNrcyIsInRpY2tGb3JtYXQiLCJ5QXhpcyIsImF4aXNMZWZ0IiwidmFsdWVsaW5lIiwibGluZSIsInN2ZyIsImRyYXdMaW5lYXJQYXRoIiwiZHJhd0xpbmVhclBvaW50cyIsImZvcm1hdE1vbnRoVGljayIsIk1PTlRIX0xBQkVMUyIsImNoYXJ0cyIsIm1lZGlhbnMiLCJ0aWNrVmFsdWVzIiwiaXNBcnJheSIsInBhcnNlSnVsaWFuRGF5IiwiaW5wdXR3cmFwcGVyIiwiY3JlYXRlQ2hlY2tib3giLCJyYWRpdXMiLCJmaW5kUG9sYXJDZW50ZXIiLCJ0aHJlc2hvbGRzIiwiZmluZFBvbGFyVGhyZXNob2xkcyIsInJhZGlhbExpbmUiLCJhbmdsZSIsIlBJIiwiZ3IiLCJ0aHJlc2hvbGRFbGVtIiwiZGF5IiwiY2VudGVyRGF5IiwiZHJhd1BvbGFyUGF0aCIsInNob3ciLCJoaWRlIiwicG9pbnRzIiwiY2hlY2tib3hXcmFwcGVyIiwibmV3WWVhciIsImNoZWNrZWQiLCJwdWxsRGlzdGluY3RDb2xvciIsInRocmVzaG9sZENoZWNrYm94IiwiYXJyIiwic3VtIiwidG90YWxTdW0iLCJpbmNvbXBsZXRlWWVhcnMiLCJhYnMiLCJjaGVja0RpZmYiLCJsZWZ0QXJlYSIsInJpZ2h0QXJlYSIsImsiLCJjb3VudGVyIiwiYXJlYURpZmYiLCJhcmVhSW5kZXgiLCJhdmdzIiwiZmlyc3RSYWRpdXMiLCJzZWNvbmRSYWRpdXMiLCJmaXJzdERpZmYiLCJzdGFydERheSIsInN0YXJ0SW5kZXgiLCJmaWZ0ZWVuSW5kZXgiLCJlaWdodHlJbmRleCIsImZpZnRlZW5UaHJlc2hvbGQiLCJlaWdodHlUaHJlc2hvbGQiLCJmaWZ0ZWVuSW5kZXhGb3VuZCIsImVpZ2h0eUluZGV4Rm91bmQiLCJjaXJjbGVDZW50ZXIiLCJkYXR1bSIsImhhbmRsZVBvaW50TW91c2VvdmVyIiwiaGFuZGxlUG9pbnRNb3VzZW91dCIsInRpcFN0cmluZyIsImZvcm1hdERhdGUiLCJjb2xvclJhbXAiLCJkYXRlIiwibW9udGgiLCJmb3JtYXRNb250aCIsIm9yZGluYWxfc3VmZml4X29mIiwiYmFzZUljb24iLCJpY29uVXJsIiwic2hhZG93VXJsIiwiaWNvblNpemUiLCJpY29uQW5jaG9yIiwicG9wdXBBbmNob3IiLCJzaGFkb3dTaXplIiwiMCIsIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciLCI4IiwiOSIsIjEwIiwiMTEiLCJoYW5kbGVUYWJIZWFkZXJCdG5DbGljayIsIkdldEFjdGl2ZVRhYiIsIm5ld0NsYXNzIiwiZGlzYWJsZUFjdGl2ZVRhYiIsImVuYWJsZVRhYiIsInRvZ2dsZU1hcFBhZGRpbmciLCJvZmZzZXRXaWR0aCIsInNsaWRlckhhbmRsZSIsImxheWVyT3BhY2l0eSIsImhhbmRsZU9mZnNldCIsIm9wYWNpdHlTY2FsZSIsInNsaWRlclRyYWNrIiwibWFrZVNsaWRlclRyYWNrIiwidHJhY2siLCJzZXREcmFnRXZlbnRMaXN0ZW5lciIsImNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zIiwiYWRqdXN0U2xpZGVySGFuZGxlIiwieVBvcyIsIm1vdXNlIiwiaW52ZXJ0IiwiY2xhbXAiLCJDcmVhdGVMb2dvIiwibG9nb2RhdGEiLCJsb2dvV3JhcHBlciIsImNyZWF0ZUxvZ29XcmFwcGVyIiwibG9nb0ltYWdlIiwiY3JlYXRlTG9nb0ltYWdlIiwibG9nb0xpbmsiLCJsaW5rIiwiY3JlYXRlTG9nb0xpbmsiLCJpbnNl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R2dDemtKRzhPLEdBQ0pDLElBQUlDLEVBQVlDLEVBQ2hCSixHQUFJSyxFQUFXTCxFQUFTTSxLQUFPQyxFQUFlUCxFQUFTTSxNQUV2RCxJQUFJRCxJaEMwa0pDQSxFZ0N6a0pRM3pCLFlBQ1R5ekIsR2hDeWtKQ0YsRWdDemtKV3Z6QixZQUNmMnpCLEloQzBrSklKLEVnQ3prSld2ekIsWUFDZnl6QixFaEMya0pBLElnQ3prSkdLLEdBQWdCaG1CLFNBQVM0VCx1QkFBdUI0UixFQUFTandCLFVBQzdELEdBQUkwd0IsRUFBZ0JELEVBQ3BCRSxVaEN5a0pDRixHZ0N6a0phRyxhQUFhVixFQUM5QlEsSUFFRCxRQUFTUCxLaEMwa0pKLEdnQ3prSkdELEdBQWN6bEIsU0FBU3ZPLGNBQzNCLE1oQzBrSkMsT0FEQThhLElnQ3prSkVyWSxPQUFPdXhCLEdBQWF4WSxRQUFRLGdCQUMvQixHQUNId1ksRUFFRCxRQUFTRyxHQUFpQkosR2hDMGtKckIsR2dDemtKR0csR0FBWTNsQixTQUFTdk8sY0FDekIsTWhDOGtKQyxPQUxBazBCLEdnQ3prSlN2ZSxhQUFhLE1BQU9vZSxFQUM5QjdPLE9BQUk2TyxFQUFTdnpCLFFoQzBrSlIwekIsRWdDemtKU3ZlLGFBQWEsTUFBT29lLEVBQzlCdnpCLE9oQ3lrSkMwekIsRWdDemtKU3ZlLGFBQWEsUUFBU29lLEVBQ25DdnpCLFFBRUowekIsRUFFRCxRQUFTSSxHQUFnQkQsR2hDMGtKcEIsR2dDemtKR0QsR0FBVzdsQixTQUFTdk8sY0FDeEIsSWhDMmtKQyxPQUZBbzBCLEdnQ3prSlF6ZSxhQUFhLE9BQ3RCMGUsR2hDeWtKQ0QsRWdDemtKUXplLGFBQWEsU0FDdEIsVUFDSHllLEVoQ29oSkF0K0IsT0FBT0MsZUFBZWIsRUFBUyxjQUMzQmMsT0FBTyxJQUVYZCxFQUFRVyxRQUFVaStCLEdBc0RiLFNBQVUzK0IsRUFBUUQiLCJmaWxlIjoiaW5kZXhfYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3BhcnNlciA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX3NlYXJjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX3NlYXJjaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2gpO1xuXHRcblx0dmFyIF9wYW5lbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0dmFyIF9iYXNlbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0XG5cdHZhciBfZ3JhcGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0XG5cdHZhciBfdGFicyA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciBfbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0XG5cdHZhciBfbG9nbyA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXHRcblx0dmFyIF9sb2dvMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvZ28pO1xuXHRcblx0dmFyIF9wb2kgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIgY3NzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdFxuXHQvLyBEb2VzIG5vdCByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcblx0dmFyIEJhc2UgPSBmdW5jdGlvbiBCYXNlKGNvbmZpZykge1xuXHQgICAgKDAsIF9wYXJzZXIuUGFyc2VDb25maWcpKGNvbmZpZywgY2FsbGJhY2spO1xuXHQgICAgKDAsIF9ncmFwaC5TZXR1cEdyYXBocykoKTtcblx0ICAgICgwLCBfdGFicy5CaW5kVGFiRXZlbnRzKSgpO1xuXHQgICAgKDAsIF9zaGFyZS5CaW5kQ29weUxpbmtFdmVudHMpKCk7XG5cdH07XG5cdFxuXHQvLyBEb2VzIHJlbHkgb24gbWFwIG9iamVjdCBvciBjb25maWcgZmlsZVxuXHR2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjayhkYXRhKSB7XG5cdCAgICAoMCwgX3NoYXJlLkFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZykoZGF0YSk7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuQ3JlYXRlTWFwKShkYXRhLm1hcCk7XG5cdCAgICAoMCwgX2Jhc2VsYXllci5DcmVhdGVCYXNlTGF5ZXJzKShtYXAsIGRhdGEuYmFzZWxheWVycyk7XG5cdCAgICAoMCwgX2xheWVyLkNyZWF0ZURlZmF1bHRMYXllcnMpKGRhdGEubGF5ZXJzLCBkYXRhW1wiYWN0aXZlLWxheWVyc1wiXSk7XG5cdCAgICAoMCwgX3BhbmVsLlNldHVwUGFuZWwpKGRhdGEubGF5ZXJzLCBkYXRhLmxheW91dCk7XG5cdCAgICAoMCwgX3NlYXJjaDIuZGVmYXVsdCkobWFwKTtcblx0ICAgICgwLCBfbG9nbzIuZGVmYXVsdCkoZGF0YS5sb2dvKTtcblx0ICAgIGlmIChkYXRhLnRhYikgKDAsIF90YWJzLkhhbmRsZVRhYkNoYW5nZSkoZGF0YS50YWIpO1xuXHQgICAgaWYgKGRhdGEuZ3JhcGgpICgwLCBfZ3JhcGguSGFuZGxlR3JhcGhUYWJDaGFuZ2UpKGRhdGEuZ3JhcGgpO1xuXHQgICAgKDAsIF9ncmFwaC5CaW5kR3JhcGhFdmVudHMpKG1hcCk7XG5cdCAgICAoMCwgX3NoYXJlLkJpbmRVcGRhdGVTaGFyZVVybCkobWFwKTtcblx0ICAgICgwLCBfcG9pLlNldHVwUG9pbnRzT2ZJbnRlcmVzdCkobWFwLCBkYXRhLnBvaXMpO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fTtcblx0XG5cdHdpbmRvdy5CYXNlID0gQmFzZTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHsgQmFzZTogQmFzZSB9O1xuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuUGFyc2VDb25maWcgPSBQYXJzZUNvbmZpZztcblx0ZXhwb3J0cy5HZXRBamF4T2JqZWN0ID0gR2V0QWpheE9iamVjdDtcblx0LyoqXG5cdCAqIFBhcnNlcyBhIGNvbmZpZyBmaWxlLiBTaW5jZSB0aGUgcHJvY2VzcyB0byBnZXQgZXh0ZXJuYWwgZmlsZXNcblx0ICogdXNlcyBBSkFYIHlvdSBuZWVkIHRvIHBhc3MgYSBjYWxsYmFjayB0byBoYW5kbGUgdGhlIG5leHQgc3RlcHNcblx0ICogb2YgdXNpbmcgdGhlIGNvbmZpZyBmaWxlLCBzaW5jZSB3ZSBkbyBub3Qga25vdyBob3cgbG9uZyBpdFxuXHQgKiB3aWxsIHRha2UgdG8gZ3JhYiB0aGUgZmlsZS5cblx0ICovXG5cdGZ1bmN0aW9uIFBhcnNlQ29uZmlnKGNvbmZpZ0ZpbGUsIGNhbGxiYWNrKSB7XG5cdCAgICBHZXRDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBHZXRBamF4T2JqZWN0KHJlc3BvbnNlSGFuZGxlcikge1xuXHQgICAgdmFyIHhtbGh0dHA7XG5cdCAgICBpZiAod2luZG93LkFjdGl2ZVhPYmplY3QpIHtcblx0ICAgICAgICB4bWxodHRwID0gbmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KFwiTVNYTUwyLlhNTEhUVFAuMy4wXCIpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICB4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdCAgICB9XG5cdCAgICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoeG1saHR0cC5yZWFkeVN0YXRlID09PSA0KSB7XG5cdCAgICAgICAgICAgIHJlc3BvbnNlSGFuZGxlcih4bWxodHRwLnJlc3BvbnNlVGV4dCk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiB4bWxodHRwO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBHZXRDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcblx0ICAgIHZhciB4bWxodHRwID0gR2V0QWpheE9iamVjdChmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0ICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlSGFuZGxlcihyZXNwb25zZSk7XG5cdCAgICAgICAgY2FsbGJhY2soZGF0YSk7XG5cdCAgICB9KTtcblx0ICAgIHhtbGh0dHAub3BlbihcIkdFVFwiLCBjb25maWdGaWxlLCB0cnVlKTtcblx0ICAgIHhtbGh0dHAuc2VuZCgpO1xuXHQgICAgY29uc29sZS5sb2coXCJoaVwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVzcG9uc2VIYW5kbGVyKHJlc3BvbnNlKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XG5cdCAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SOiBNYWxmb3JtZWQgSlNPTiBpbiBjb25maWcgZmlsZS5cIik7XG5cdCAgICAgICAgY29uc29sZS5sb2coZXJyKTtcblx0ICAgIH1cblx0ICAgIGZvcm1hdE1hcChkYXRhKTtcblx0ICAgIGZvcm1hdExheWVycyhkYXRhKTtcblx0ICAgIHJldHVybiBkYXRhO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRNYXAoZGF0YSkge1xuXHQgICAgaWYgKCFkYXRhLm1hcCkgZGF0YS5tYXAgPSB7fTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0TGF5ZXJzKGRhdGEpIHtcblx0ICAgIHZhciBsYXllcnMgPSBkYXRhLmxheWVycztcblx0ICAgIHZhciBkZWZhdWx0TWFwc2VydmVyVXJsID0gZGF0YS5tYXBzZXJ2ZXJVcmw7XG5cdCAgICB2YXIgZGVmYXVsdEVuYWJsZWRMYXllcnMgPSBkYXRhW1wiYWN0aXZlLWxheWVyc1wiXTtcblx0ICAgIHZhciBsYXllcmdyb3VwO1xuXHQgICAgdmFyIGk7XG5cdFxuXHQgICAgZm9yICh2YXIgcHJvcCBpbiBsYXllcnMpIHtcblx0ICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xuXHQgICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IGxheWVyZ3JvdXAubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgc2V0TWFwc2VydmVyVXJsKGxheWVyZ3JvdXBbaV0sIGRlZmF1bHRNYXBzZXJ2ZXJVcmwpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0TWFwc2VydmVyVXJsKGxheWVyLCB1cmwpIHtcblx0ICAgIGxheWVyLnVybCA9IGxheWVyLnVybCB8fCB1cmw7XG5cdH1cblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBDcmVhdGVTZWFyY2g7XG5cdFxuXHR2YXIgX2xlYWZsZXRHZW9zZWFyY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0ZnVuY3Rpb24gQ3JlYXRlU2VhcmNoKG1hcCkge1xuXHQgICAgdmFyIHByb3ZpZGVyID0gbmV3IF9sZWFmbGV0R2Vvc2VhcmNoLkVzcmlQcm92aWRlcigpO1xuXHRcblx0ICAgIHZhciBzZWFyY2hDb250cm9sID0gbmV3IF9sZWFmbGV0R2Vvc2VhcmNoLkdlb1NlYXJjaENvbnRyb2woe1xuXHQgICAgICAgIHByb3ZpZGVyOiBwcm92aWRlcixcblx0ICAgICAgICBzaG93TWFya2VyOiBmYWxzZSxcblx0ICAgICAgICBhdXRvQ29tcGxldGU6IGZhbHNlXG5cdCAgICB9KTtcblx0XG5cdCAgICBtYXAuYWRkQ29udHJvbChzZWFyY2hDb250cm9sKTtcblx0XG5cdCAgICBMLkRvbUV2ZW50Lm9uKHNlYXJjaENvbnRyb2wuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5jb250YWluZXIsIFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2KSB7XG5cdCAgICAgICAgTC5Eb21FdmVudC5zdG9wUHJvcGFnYXRpb24oZXYpO1xuXHQgICAgfSk7XG5cdH1cblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2xlYWZsZXRDb250cm9sID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnR2VvU2VhcmNoQ29udHJvbCcsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xlYWZsZXRDb250cm9sKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX3NlYXJjaEVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnU2VhcmNoRWxlbWVudCcsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaEVsZW1lbnQpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfYmluZ1Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0JpbmdQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JpbmdQcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9lc3JpUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnRXNyaVByb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXNyaVByb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX2dvb2dsZVByb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0dvb2dsZVByb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ29vZ2xlUHJvdmlkZXIpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfb3BlblN0cmVldE1hcFByb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ09wZW5TdHJlZXRNYXBQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29wZW5TdHJlZXRNYXBQcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9wcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfXJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBMZWFmbGV0Q29udHJvbDtcblx0XG5cdHZhciBfbG9kYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHR2YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXHRcblx0dmFyIF9zZWFyY2hFbGVtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHR2YXIgX3NlYXJjaEVsZW1lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoRWxlbWVudCk7XG5cdFxuXHR2YXIgX3Jlc3VsdExpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdHZhciBfcmVzdWx0TGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZXN1bHRMaXN0KTtcblx0XG5cdHZhciBfZG9tVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdHZhciBfY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHR2YXIgZGVmYXVsdE9wdGlvbnMgPSBmdW5jdGlvbiBkZWZhdWx0T3B0aW9ucygpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcG9zaXRpb246ICd0b3BsZWZ0Jyxcblx0ICAgIHN0eWxlOiAnYnV0dG9uJyxcblx0ICAgIHNob3dNYXJrZXI6IHRydWUsXG5cdCAgICBzaG93UG9wdXA6IGZhbHNlLFxuXHQgICAgbWFya2VyOiB7XG5cdCAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpLFxuXHQgICAgICBkcmFnZ2FibGU6IGZhbHNlXG5cdCAgICB9LFxuXHQgICAgbWF4TWFya2VyczogMSxcblx0ICAgIHJldGFpblpvb21MZXZlbDogZmFsc2UsXG5cdCAgICBhbmltYXRlWm9vbTogdHJ1ZSxcblx0ICAgIHNlYXJjaExhYmVsOiAnRW50ZXIgYWRkcmVzcycsXG5cdCAgICBub3RGb3VuZE1lc3NhZ2U6ICdTb3JyeSwgdGhhdCBhZGRyZXNzIGNvdWxkIG5vdCBiZSBmb3VuZC4nLFxuXHQgICAgbWVzc2FnZUhpZGVEZWxheTogMzAwMCxcblx0ICAgIHpvb21MZXZlbDogMTgsXG5cdCAgICBjbGFzc05hbWVzOiB7XG5cdCAgICAgIGNvbnRhaW5lcjogJ2xlYWZsZXQtYmFyIGxlYWZsZXQtY29udHJvbCBsZWFmbGV0LWNvbnRyb2wtZ2Vvc2VhcmNoJyxcblx0ICAgICAgYnV0dG9uOiAnbGVhZmxldC1iYXItcGFydCBsZWFmbGV0LWJhci1wYXJ0LXNpbmdsZScsXG5cdCAgICAgIG1zZ2JveDogJ2xlYWZsZXQtYmFyIG1lc3NhZ2UnLFxuXHQgICAgICBmb3JtOiAnJyxcblx0ICAgICAgaW5wdXQ6ICcnXG5cdCAgICB9LFxuXHQgICAgYXV0b0NvbXBsZXRlOiB0cnVlLFxuXHQgICAgYXV0b0NvbXBsZXRlRGVsYXk6IDI1MFxuXHQgIH07XG5cdH07XG5cdFxuXHR2YXIgQ29udHJvbCA9IHtcblx0ICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKG9wdGlvbnMpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdGhpcy5tYXJrZXJzID0gbmV3IEwuRmVhdHVyZUdyb3VwKCk7XG5cdFxuXHQgICAgdGhpcy5vcHRpb25zID0gX2V4dGVuZHMoe30sIGRlZmF1bHRPcHRpb25zKCksIG9wdGlvbnMpO1xuXHRcblx0ICAgIHZhciBfb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICBzdHlsZSA9IF9vcHRpb25zLnN0eWxlLFxuXHQgICAgICAgIGNsYXNzTmFtZXMgPSBfb3B0aW9ucy5jbGFzc05hbWVzLFxuXHQgICAgICAgIHNlYXJjaExhYmVsID0gX29wdGlvbnMuc2VhcmNoTGFiZWwsXG5cdCAgICAgICAgYXV0b0NvbXBsZXRlID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlLFxuXHQgICAgICAgIGF1dG9Db21wbGV0ZURlbGF5ID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlRGVsYXk7XG5cdFxuXHQgICAgaWYgKHN0eWxlICE9PSAnYnV0dG9uJykge1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY2xhc3NOYW1lcy5jb250YWluZXIgKz0gJyAnICsgb3B0aW9ucy5zdHlsZTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLnNlYXJjaEVsZW1lbnQgPSBuZXcgX3NlYXJjaEVsZW1lbnQyLmRlZmF1bHQoX2V4dGVuZHMoe30sIHRoaXMub3B0aW9ucywge1xuXHQgICAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChxdWVyeSkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5vblN1Ym1pdChxdWVyeSk7XG5cdCAgICAgIH1cblx0ICAgIH0pKTtcblx0XG5cdCAgICB2YXIgX3NlYXJjaEVsZW1lbnQkZWxlbWVuID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLFxuXHQgICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5jb250YWluZXIsXG5cdCAgICAgICAgZm9ybSA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5mb3JtLFxuXHQgICAgICAgIGlucHV0ID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmlucHV0O1xuXHRcblx0ICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgYnV0dG9uID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnYScsIGNsYXNzTmFtZXMuYnV0dG9uLCBjb250YWluZXIpO1xuXHQgICAgYnV0dG9uLnRpdGxlID0gc2VhcmNoTGFiZWw7XG5cdCAgICBidXR0b24uaHJlZiA9ICcjJztcblx0XG5cdCAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbkNsaWNrKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHRcblx0ICAgIGlmIChhdXRvQ29tcGxldGUpIHtcblx0ICAgICAgdGhpcy5yZXN1bHRMaXN0ID0gbmV3IF9yZXN1bHRMaXN0Mi5kZWZhdWx0KHtcblx0ICAgICAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2soX3JlZikge1xuXHQgICAgICAgICAgdmFyIHJlc3VsdCA9IF9yZWYucmVzdWx0O1xuXHRcblx0ICAgICAgICAgIGlucHV0LnZhbHVlID0gcmVzdWx0LmxhYmVsO1xuXHQgICAgICAgICAgX3RoaXMub25TdWJtaXQoeyBxdWVyeTogcmVzdWx0LmxhYmVsIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBmb3JtLmFwcGVuZENoaWxkKHRoaXMucmVzdWx0TGlzdC5lbGVtZW50cy5jb250YWluZXIpO1xuXHRcblx0ICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoMCwgX2xvZGFzaDIuZGVmYXVsdCkoZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICByZXR1cm4gX3RoaXMuYXV0b1NlYXJjaChlKTtcblx0ICAgICAgfSwgYXV0b0NvbXBsZXRlRGVsYXkpLCB0cnVlKTtcblx0ICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgcmV0dXJuIF90aGlzLnNlbGVjdFJlc3VsdChlKTtcblx0ICAgICAgfSwgdHJ1ZSk7XG5cdCAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5jbGVhclJlc3VsdHMoZSk7XG5cdCAgICAgIH0sIHRydWUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuZWxlbWVudHMgPSB7IGJ1dHRvbjogYnV0dG9uIH07XG5cdCAgfSxcblx0ICBvbkFkZDogZnVuY3Rpb24gb25BZGQobWFwKSB7XG5cdCAgICB2YXIgX29wdGlvbnMyID0gdGhpcy5vcHRpb25zLFxuXHQgICAgICAgIHNob3dNYXJrZXIgPSBfb3B0aW9uczIuc2hvd01hcmtlcixcblx0ICAgICAgICBzdHlsZSA9IF9vcHRpb25zMi5zdHlsZTtcblx0XG5cdCAgICB0aGlzLm1hcCA9IG1hcDtcblx0ICAgIGlmIChzaG93TWFya2VyKSB7XG5cdCAgICAgIHRoaXMubWFya2Vycy5hZGRUbyhtYXApO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzdHlsZSA9PT0gJ2JhcicpIHtcblx0ICAgICAgdmFyIGZvcm0gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuZm9ybTtcblx0XG5cdCAgICAgIHZhciByb290ID0gbWFwLmdldENvbnRhaW5lcigpLnF1ZXJ5U2VsZWN0b3IoJy5sZWFmbGV0LWNvbnRyb2wtY29udGFpbmVyJyk7XG5cdFxuXHQgICAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgJ2xlYWZsZXQtY29udHJvbC1nZW9zZWFyY2ggYmFyJyk7XG5cdCAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChmb3JtKTtcblx0ICAgICAgcm9vdC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXHQgICAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0ICB9LFxuXHQgIG9uUmVtb3ZlOiBmdW5jdGlvbiBvblJlbW92ZSgpIHtcblx0ICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICBpZiAoY29udGFpbmVyKSB7XG5cdCAgICAgIGNvbnRhaW5lci5yZW1vdmUoKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9LFxuXHQgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHtcblx0ICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFxuXHQgICAgdmFyIF9zZWFyY2hFbGVtZW50JGVsZW1lbjIgPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMsXG5cdCAgICAgICAgY29udGFpbmVyID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuMi5jb250YWluZXIsXG5cdCAgICAgICAgaW5wdXQgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4yLmlucHV0O1xuXHRcblx0ICAgIGlmIChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdCAgICAgIGlucHV0LmZvY3VzKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBzZWxlY3RSZXN1bHQ6IGZ1bmN0aW9uIHNlbGVjdFJlc3VsdChldmVudCkge1xuXHQgICAgaWYgKCFbX2NvbnN0YW50cy5BUlJPV19ET1dOX0tFWSwgX2NvbnN0YW50cy5BUlJPV19VUF9LRVldLmluY2x1ZGVzKGV2ZW50LmtleUNvZGUpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgdmFyIGlucHV0ID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmlucHV0O1xuXHRcblx0ICAgIHZhciBsaXN0ID0gdGhpcy5yZXN1bHRMaXN0O1xuXHQgICAgdmFyIG1heCA9IHRoaXMucmVzdWx0TGlzdC5jb3VudCgpIC0gMTtcblx0XG5cdCAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYml0d2lzZVxuXHQgICAgdmFyIG5leHQgPSBldmVudC5jb2RlID09PSAnQXJyb3dEb3duJyA/IH5+bGlzdC5zZWxlY3RlZCArIDEgOiB+fmxpc3Quc2VsZWN0ZWQgLSAxO1xuXHQgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5lc3RlZC10ZXJuYXJ5XG5cdCAgICB2YXIgaWR4ID0gbmV4dCA8IDAgPyBtYXggOiBuZXh0ID4gbWF4ID8gMCA6IG5leHQ7XG5cdFxuXHQgICAgdmFyIGl0ZW0gPSBsaXN0LnNlbGVjdChpZHgpO1xuXHQgICAgaW5wdXQudmFsdWUgPSBpdGVtLmxhYmVsO1xuXHQgIH0sXG5cdCAgY2xlYXJSZXN1bHRzOiBmdW5jdGlvbiBjbGVhclJlc3VsdHMoZXZlbnQpIHtcblx0ICAgIGlmIChldmVudC5rZXlDb2RlICE9PSBfY29uc3RhbnRzLkVTQ0FQRV9LRVkpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMucmVzdWx0TGlzdC5jbGVhcigpO1xuXHQgIH0sXG5cdCAgYXV0b1NlYXJjaDogZnVuY3Rpb24gYXV0b1NlYXJjaChldmVudCkge1xuXHQgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgdmFyIHF1ZXJ5LCBwcm92aWRlciwgcmVzdWx0cztcblx0XG5cdCAgICAgIGlmIChfY29uc3RhbnRzLlNQRUNJQUxfS0VZUy5pbmNsdWRlcyhldmVudC5rZXlDb2RlKSkge1xuXHQgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHF1ZXJ5ID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuXHQgICAgICBwcm92aWRlciA9IHRoaXMub3B0aW9ucy5wcm92aWRlcjtcblx0ICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlYXJjaCh7IHF1ZXJ5OiBxdWVyeSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHRcblx0ICAgICAgICByZXN1bHRzID0gJGF3YWl0XzE7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRMaXN0LnJlbmRlcihyZXN1bHRzKTtcblx0ICAgICAgICByZXR1cm4gJHJldHVybigpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgfSxcblx0ICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQocXVlcnkpIHtcblx0ICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgIHZhciBwcm92aWRlciwgcmVzdWx0cztcblx0ICAgICAgcHJvdmlkZXIgPSB0aGlzLm9wdGlvbnMucHJvdmlkZXI7XG5cdCAgICAgIHJldHVybiBwcm92aWRlci5zZWFyY2gocXVlcnkpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG5cdFxuXHQgICAgICAgIHJlc3VsdHMgPSAkYXdhaXRfMjtcblx0XG5cdCAgICAgICAgaWYgKHJlc3VsdHMgJiYgcmVzdWx0cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICB0aGlzLnNob3dSZXN1bHQocmVzdWx0c1swXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICB9LFxuXHQgIHNob3dSZXN1bHQ6IGZ1bmN0aW9uIHNob3dSZXN1bHQocmVzdWx0KSB7XG5cdCAgICB2YXIgbWFya2VycyA9IE9iamVjdC5rZXlzKHRoaXMubWFya2Vycy5fbGF5ZXJzKTtcblx0ICAgIGlmIChtYXJrZXJzLmxlbmd0aCA+PSB0aGlzLm9wdGlvbnMubWF4TWFya2Vycykge1xuXHQgICAgICB0aGlzLm1hcmtlcnMucmVtb3ZlTGF5ZXIobWFya2Vyc1swXSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG1hcmtlciA9IHRoaXMuYWRkTWFya2VyKHJlc3VsdCk7XG5cdCAgICB0aGlzLmNlbnRlck1hcChyZXN1bHQpO1xuXHRcblx0ICAgIHRoaXMubWFwLmZpcmVFdmVudCgnZ2Vvc2VhcmNoL3Nob3dsb2NhdGlvbicsIHtcblx0ICAgICAgbG9jYXRpb246IHJlc3VsdCxcblx0ICAgICAgbWFya2VyOiBtYXJrZXJcblx0ICAgIH0pO1xuXHQgIH0sXG5cdCAgYWRkTWFya2VyOiBmdW5jdGlvbiBhZGRNYXJrZXIocmVzdWx0KSB7XG5cdCAgICB2YXIgX29wdGlvbnMzID0gdGhpcy5vcHRpb25zLFxuXHQgICAgICAgIG9wdGlvbnMgPSBfb3B0aW9uczMubWFya2VyLFxuXHQgICAgICAgIHNob3dQb3B1cCA9IF9vcHRpb25zMy5zaG93UG9wdXA7XG5cdFxuXHQgICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihbcmVzdWx0LnksIHJlc3VsdC54XSwgb3B0aW9ucyk7XG5cdCAgICBtYXJrZXIuYmluZFBvcHVwKHJlc3VsdC5sYWJlbCk7XG5cdFxuXHQgICAgdGhpcy5tYXJrZXJzLmFkZExheWVyKG1hcmtlcik7XG5cdFxuXHQgICAgaWYgKHNob3dQb3B1cCkge1xuXHQgICAgICBtYXJrZXIub3BlblBvcHVwKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG1hcmtlcjtcblx0ICB9LFxuXHQgIGNlbnRlck1hcDogZnVuY3Rpb24gY2VudGVyTWFwKHJlc3VsdCkge1xuXHQgICAgdmFyIF9vcHRpb25zNCA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICByZXRhaW5ab29tTGV2ZWwgPSBfb3B0aW9uczQucmV0YWluWm9vbUxldmVsLFxuXHQgICAgICAgIGFuaW1hdGVab29tID0gX29wdGlvbnM0LmFuaW1hdGVab29tO1xuXHRcblx0ICAgIHZhciByZXN1bHRCb3VuZHMgPSBuZXcgTC5MYXRMbmdCb3VuZHMocmVzdWx0LmJvdW5kcyk7XG5cdCAgICB2YXIgYm91bmRzID0gcmVzdWx0Qm91bmRzLmlzVmFsaWQoKSA/IHJlc3VsdEJvdW5kcyA6IHRoaXMubWFya2Vycy5nZXRCb3VuZHMoKTtcblx0XG5cdCAgICBpZiAoIXJldGFpblpvb21MZXZlbCAmJiByZXN1bHRCb3VuZHMuaXNWYWxpZCgpKSB7XG5cdCAgICAgIHRoaXMubWFwLmZpdEJvdW5kcyhib3VuZHMsIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLm1hcC5zZXRWaWV3KGJvdW5kcy5nZXRDZW50ZXIoKSwgdGhpcy5nZXRab29tKCksIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBnZXRab29tOiBmdW5jdGlvbiBnZXRab29tKCkge1xuXHQgICAgdmFyIF9vcHRpb25zNSA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICByZXRhaW5ab29tTGV2ZWwgPSBfb3B0aW9uczUucmV0YWluWm9vbUxldmVsLFxuXHQgICAgICAgIHpvb21MZXZlbCA9IF9vcHRpb25zNS56b29tTGV2ZWw7XG5cdFxuXHQgICAgcmV0dXJuIHJldGFpblpvb21MZXZlbCA/IHRoaXMubWFwLmdldFpvb20oKSA6IHpvb21MZXZlbDtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBMZWFmbGV0Q29udHJvbCgpIHtcblx0ICBpZiAoIUwgfHwgIUwuQ29udHJvbCB8fCAhTC5Db250cm9sLmV4dGVuZCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdMZWFmbGV0IG11c3QgYmUgbG9hZGVkIGJlZm9yZSBpbnN0YW50aWF0aW5nIHRoZSBHZW9TZWFyY2ggY29udHJvbCcpO1xuXHQgIH1cblx0XG5cdCAgdmFyIExDb250cm9sID0gTC5Db250cm9sLmV4dGVuZChDb250cm9sKTtcblx0XG5cdCAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG9wdGlvbnMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgIG9wdGlvbnNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShMQ29udHJvbCwgW251bGxdLmNvbmNhdChvcHRpb25zKSkpKCk7XG5cdH1cblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdC8qXG5cdCAqICRhc3luY2JpbmQgaGFzIG11bHRpcGxlIHVzZXMsIGRlcGVuZGluZyBvbiB0aGUgcGFyYW1ldGVyIGxpc3QuIEl0IGlzIGluIEZ1bmN0aW9uLnByb3RvdHlwZSwgc28gJ3RoaXMnIGlzIGFsd2F5cyBhIGZ1bmN0aW9uXG5cdCAqXG5cdCAqIDEpIElmIGNhbGxlZCB3aXRoIGEgc2luZ2xlIGFyZ3VtZW50ICh0aGlzKSwgaXQgaXMgdXNlZCB3aGVuIGRlZmluaW5nIGFuIGFzeW5jIGZ1bmN0aW9uIHRvIGVuc3VyZSB3aGVuXG5cdCAqICAgICAgaXQgaXMgaW52b2tlZCwgdGhlIGNvcnJlY3QgJ3RoaXMnIGlzIHByZXNlbnQsIGp1c3QgbGlrZSBcImJpbmRcIi4gRm9yIGxlZ2FjeSByZWFzb25zLCAndGhpcycgaXMgZ2l2ZW5cblx0ICogICAgICBhIG1lbWViZXIgJ3RoZW4nIHdoaWNoIHJlZmVycyB0byBpdHNlbGYuXG5cdCAqIDIpIElmIGNhbGxlZCB3aXRoIGEgc2Vjb25kIHBhcmFtZXRlciAoXCJjYXRjaGVyXCIpIGFuZCBjYXRjaGVyIT09dHJ1ZSBpdCBpcyBiZWluZyB1c2VkIHRvIGludm9rZSBhbiBhc3luY1xuXHQgKiAgICAgIGZ1bmN0aW9uIHdoZXJlIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIHRoZSBlcnJvciBjYWxsYmFjayAoZm9yIHN5bmMgZXhjZXB0aW9ucyBhbmQgdG8gYmUgcGFzc2VkIHRvXG5cdCAqICAgICAgbmVzdGVkIGFzeW5jIGNhbGxzKVxuXHQgKiAzKSBJZiBjYWxsZWQgd2l0aCB0aGUgc2Vjb25kIHBhcmFtZXRlcj09PXRydWUsIGl0IGlzIHRoZSBzYW1lIHVzZSBhcyAoMSksIGJ1dCB0aGUgZnVuY3Rpb24gaXMgd3JhcHBlZFxuXHQgKiAgICAgIGluIGFuICdQcm9taXNlJyBhcyB3ZWxsIGJvdW5kIHRvICd0aGlzJy5cblx0ICogICAgICBJdCBpcyB0aGUgc2FtZSBhcyBjYWxsaW5nICduZXcgUHJvbWlzZSh0aGlzKScsIHdoZXJlICd0aGlzJyBpcyB0aGUgZnVuY3Rpb24gYmVpbmcgYm91bmQvd3JhcHBlZFxuXHQgKiA0KSBJZiBjYWxsZWQgd2l0aCB0aGUgc2Vjb25kIHBhcmFtZXRlcj09PTAsIGl0IGlzIHRoZSBzYW1lIHVzZSBhcyAoMSksIGJ1dCB0aGUgZnVuY3Rpb24gaXMgd3JhcHBlZFxuXHQgKiAgICAgIGluIGEgJ0xhenlUaGVuYWJsZScsIHdoaWNoIGV4ZWN1dGVzIGxhemlseSBhbmQgY2FuIHJlc29sdmUgc3luY2hyb25vdXNseS5cblx0ICogICAgICBJdCBpcyB0aGUgc2FtZSBhcyBjYWxsaW5nICduZXcgTGF6eVRoZW5hYmxlKHRoaXMpJyAoaWYgc3VjaCBhIHR5cGUgd2VyZSBleHBvc2VkKSwgd2hlcmUgJ3RoaXMnIGlzXG5cdCAqICAgICAgdGhlIGZ1bmN0aW9uIGJlaW5nIGJvdW5kL3dyYXBwZWRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzSW5jbHVkZXMoaW5jbHVkZXMsIGlucHV0KSB7XG5cdCAgICB2YXIgc3JjID0gaW5wdXQudG9TdHJpbmcoKTtcblx0ICAgIHZhciB0ID0gXCJyZXR1cm4gXCIgKyBzcmM7XG5cdCAgICB2YXIgYXJncyA9IHNyYy5tYXRjaCgvLipcXCgoW14pXSopXFwpLylbMV07XG5cdCAgICB2YXIgcmUgPSAvWydcIl0hISEoW14nXCJdKilbJ1wiXS9nO1xuXHQgICAgdmFyIG0gPSBbXTtcblx0ICAgIHdoaWxlICgxKSB7XG5cdCAgICAgICAgdmFyIG14ID0gcmUuZXhlYyh0KTtcblx0ICAgICAgICBpZiAobXgpIG0ucHVzaChteCk7ZWxzZSBicmVhaztcblx0ICAgIH1cblx0ICAgIG0ucmV2ZXJzZSgpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICB0ID0gdC5zbGljZSgwLCBlLmluZGV4KSArIGluY2x1ZGVzW2VbMV1dICsgdC5zdWJzdHIoZS5pbmRleCArIGVbMF0ubGVuZ3RoKTtcblx0ICAgIH0pO1xuXHQgICAgdCA9IHQucmVwbGFjZSgvXFwvXFwqW14qXSpcXCpcXC8vZywgJyAnKS5yZXBsYWNlKC9cXHMrL2csICcgJyk7XG5cdCAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKGFyZ3MsIHQpKCk7XG5cdH1cblx0XG5cdHZhciAkYXN5bmNiaW5kID0gcHJvY2Vzc0luY2x1ZGVzKHtcblx0ICAgIHpvdXNhbjogX193ZWJwYWNrX3JlcXVpcmVfXyg3KS50b1N0cmluZygpLFxuXHQgICAgdGhlbmFibGU6IF9fd2VicGFja19yZXF1aXJlX18oMTEpLnRvU3RyaW5nKClcblx0fSwgZnVuY3Rpb24gJGFzeW5jYmluZChzZWxmLCBjYXRjaGVyKSB7XG5cdCAgICBcInVzZSBzdHJpY3RcIjtcblx0XG5cdCAgICBpZiAoIUZ1bmN0aW9uLnByb3RvdHlwZS4kYXN5bmNiaW5kKSB7XG5cdCAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSwgXCIkYXN5bmNiaW5kXCIsIHsgdmFsdWU6ICRhc3luY2JpbmQsIGVudW1lcmFibGU6IGZhbHNlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICghJGFzeW5jYmluZC50cmFtcG9saW5lKSB7XG5cdCAgICAgICAgJGFzeW5jYmluZC50cmFtcG9saW5lID0gZnVuY3Rpb24gdHJhbXBvbGluZSh0LCB4LCBzLCBlLCB1KSB7XG5cdCAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBiKHEpIHtcblx0ICAgICAgICAgICAgICAgIHdoaWxlIChxKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHEudGhlbikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBxID0gcS50aGVuKGIsIGUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSA/IHVuZGVmaW5lZCA6IHE7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxLnBvcCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEubGVuZ3RoKSByZXR1cm4gcS5wb3AoKSA/IHguY2FsbCh0KSA6IHE7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0gcztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHEgPSBxLmNhbGwodCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAocikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZShyKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0ICAgIGlmICghJGFzeW5jYmluZC5MYXp5VGhlbmFibGUpIHtcblx0ICAgICAgICAkYXN5bmNiaW5kLkxhenlUaGVuYWJsZSA9ICchISF0aGVuYWJsZScoKTtcblx0ICAgICAgICAkYXN5bmNiaW5kLkVhZ2VyVGhlbmFibGUgPSAkYXN5bmNiaW5kLlRoZW5hYmxlID0gKCRhc3luY2JpbmQuRWFnZXJUaGVuYWJsZUZhY3RvcnkgPSAnISEhem91c2FuJykoKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgcmVzb2x2ZXIgPSB0aGlzO1xuXHQgICAgc3dpdGNoIChjYXRjaGVyKSB7XG5cdCAgICAgICAgY2FzZSB0cnVlOlxuXHQgICAgICAgICAgICByZXR1cm4gbmV3ICRhc3luY2JpbmQuVGhlbmFibGUoYm91bmRUaGVuKTtcblx0ICAgICAgICBjYXNlIDA6XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgJGFzeW5jYmluZC5MYXp5VGhlbmFibGUoYm91bmRUaGVuKTtcblx0ICAgICAgICBjYXNlIHVuZGVmaW5lZDpcblx0ICAgICAgICAgICAgLyogRm9yIHJ1bnRpbWUgY29tcGF0aWJpbGl0eSB3aXRoIE5vZGVudCB2Mi54LCBwcm92aWRlIGEgdGhlbmFibGUgKi9cblx0ICAgICAgICAgICAgYm91bmRUaGVuLnRoZW4gPSBib3VuZFRoZW47XG5cdCAgICAgICAgICAgIHJldHVybiBib3VuZFRoZW47XG5cdCAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVyLmFwcGx5KHNlbGYsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXRjaGVyKGV4KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGJvdW5kVGhlbigpIHtcblx0ICAgICAgICByZXR1cm4gcmVzb2x2ZXIuYXBwbHkoc2VsZiwgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHRmdW5jdGlvbiAkYXN5bmNzcGF3bihwcm9taXNlUHJvdmlkZXIsIHNlbGYpIHtcblx0ICAgIGlmICghRnVuY3Rpb24ucHJvdG90eXBlLiRhc3luY3NwYXduKSB7XG5cdCAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSwgXCIkYXN5bmNzcGF3blwiLCB7IHZhbHVlOiAkYXN5bmNzcGF3biwgZW51bWVyYWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7XG5cdCAgICB9XG5cdCAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRnVuY3Rpb24pKSByZXR1cm47XG5cdFxuXHQgICAgdmFyIGdlbkYgPSB0aGlzO1xuXHQgICAgcmV0dXJuIG5ldyBwcm9taXNlUHJvdmlkZXIoZnVuY3Rpb24gZW5vdWdoKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgIHZhciBnZW4gPSBnZW5GLmNhbGwoc2VsZiwgcmVzb2x2ZSwgcmVqZWN0KTtcblx0ICAgICAgICBmdW5jdGlvbiBzdGVwKGZuLCBhcmcpIHtcblx0ICAgICAgICAgICAgdmFyIG5leHQ7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICBuZXh0ID0gZm4uY2FsbChnZW4sIGFyZyk7XG5cdCAgICAgICAgICAgICAgICBpZiAobmV4dC5kb25lKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUgIT09IHJlc29sdmUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUgJiYgbmV4dC52YWx1ZSA9PT0gbmV4dC52YWx1ZS50aGVuKSByZXR1cm4gbmV4dC52YWx1ZShyZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlICYmIHJlc29sdmUobmV4dC52YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUudGhlbikge1xuXHQgICAgICAgICAgICAgICAgICAgIG5leHQudmFsdWUudGhlbihmdW5jdGlvbiAodikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi5uZXh0LCB2KTtcblx0ICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi50aHJvdywgZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLm5leHQsIG5leHQudmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgICAgICByZWplY3QgJiYgcmVqZWN0KGUpO1xuXHQgICAgICAgICAgICAgICAgcmVqZWN0ID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBzdGVwKGdlbi5uZXh0KTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHQvLyBJbml0aWFsaXplIGFzeW5jIGJpbmRpbmdzXG5cdCRhc3luY2JpbmQoKTtcblx0JGFzeW5jc3Bhd24oKTtcblx0XG5cdC8vIEV4cG9ydCBhc3luYyBiaW5kaW5nc1xuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICAgICRhc3luY2JpbmQ6ICRhc3luY2JpbmQsXG5cdCAgICAkYXN5bmNzcGF3bjogJGFzeW5jc3Bhd25cblx0fTtcblxuLyoqKi8gfSksXG4vKiA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MsIHNldEltbWVkaWF0ZSkgey8qIFRoaXMgY29kZSBpcyBiYXNlZCBvbjpcblx0em91c2FuIC0gQSBMaWdodG5pbmcgRmFzdCwgWWV0IFZlcnkgU21hbGwgUHJvbWlzZSBBKyBDb21wbGlhbnQgSW1wbGVtZW50YXRpb25cblx0aHR0cHM6Ly9naXRodWIuY29tL2JsdWVqYXZhL3pvdXNhblxuXHRBdXRob3I6IEdsZW5uIENyb3dub3ZlciA8Z2xlbm5AYmx1ZWphdmEuY29tPiAoaHR0cDovL3d3dy5ibHVlamF2YS5jb20pXG5cdFZlcnNpb24gMi4zLjNcblx0TGljZW5zZTogTUlUICovXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGljaykge1xuXHQgICAgdGljayA9IHRpY2sgfHwgKHR5cGVvZiBwcm9jZXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YocHJvY2VzcykpID09PSBcIm9iamVjdFwiICYmIHByb2Nlc3MubmV4dFRpY2sgfHwgdHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gXCJmdW5jdGlvblwiICYmIHNldEltbWVkaWF0ZSB8fCBmdW5jdGlvbiAoZikge1xuXHQgICAgICAgIHNldFRpbWVvdXQoZiwgMCk7XG5cdCAgICB9O1xuXHQgICAgdmFyIHNvb24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGZxID0gW10sXG5cdCAgICAgICAgICAgIGZxU3RhcnQgPSAwLFxuXHQgICAgICAgICAgICBidWZmZXJTaXplID0gMTAyNDtcblx0ICAgICAgICBmdW5jdGlvbiBjYWxsUXVldWUoKSB7XG5cdCAgICAgICAgICAgIHdoaWxlIChmcS5sZW5ndGggLSBmcVN0YXJ0KSB7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIGZxW2ZxU3RhcnRdKCk7XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkgey8qIGNvbnNvbGUuZXJyb3IoZXgpICovfVxuXHQgICAgICAgICAgICAgICAgZnFbZnFTdGFydCsrXSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICAgICAgICAgIGlmIChmcVN0YXJ0ID09PSBidWZmZXJTaXplKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZnEuc3BsaWNlKDAsIGJ1ZmZlclNpemUpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZxU3RhcnQgPSAwO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZuKSB7XG5cdCAgICAgICAgICAgIGZxLnB1c2goZm4pO1xuXHQgICAgICAgICAgICBpZiAoZnEubGVuZ3RoIC0gZnFTdGFydCA9PT0gMSkgdGljayhjYWxsUXVldWUpO1xuXHQgICAgICAgIH07XG5cdCAgICB9KCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gWm91c2FuKGZ1bmMpIHtcblx0ICAgICAgICBpZiAoZnVuYykge1xuXHQgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXHQgICAgICAgICAgICBmdW5jKGZ1bmN0aW9uIChhcmcpIHtcblx0ICAgICAgICAgICAgICAgIG1lLnJlc29sdmUoYXJnKTtcblx0ICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgICAgICAgICAgbWUucmVqZWN0KGFyZyk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBab3VzYW4ucHJvdG90eXBlID0ge1xuXHQgICAgICAgIHJlc29sdmU6IGZ1bmN0aW9uIHJlc29sdmUodmFsdWUpIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXHQgICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMpIHJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKFwiQXR0ZW1wdCB0byByZXNvbHZlIHByb21pc2Ugd2l0aCBzZWxmXCIpKTtcblx0ICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcblx0ICAgICAgICAgICAgaWYgKHZhbHVlICYmICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiB8fCAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YodmFsdWUpKSA9PT0gXCJvYmplY3RcIikpIHtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0ID0gMDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdGhlbiA9IHZhbHVlLnRoZW47XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBmdW5jdGlvbiAocmEpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QrKykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJlc29sdmUocmEpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocnIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QrKykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJlamVjdChycik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QpIHRoaXMucmVqZWN0KGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRlVMRklMTEVEO1xuXHQgICAgICAgICAgICB0aGlzLnYgPSB2YWx1ZTtcblx0ICAgICAgICAgICAgaWYgKG1lLmMpIHNvb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIGwgPSBtZS5jLmxlbmd0aDsgbiA8IGw7IG4rKykge1xuXHQgICAgICAgICAgICAgICAgICAgIFNUQVRFX0ZVTEZJTExFRChtZS5jW25dLCB2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSB1bmRlZmluZWQpIHJldHVybjtcblx0ICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1JFSkVDVEVEO1xuXHQgICAgICAgICAgICB0aGlzLnYgPSByZWFzb247XG5cdCAgICAgICAgICAgIHZhciBjbGllbnRzID0gdGhpcy5jO1xuXHQgICAgICAgICAgICBpZiAoY2xpZW50cykgc29vbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgbCA9IGNsaWVudHMubGVuZ3RoOyBuIDwgbDsgbisrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgU1RBVEVfUkVKRUNURUQoY2xpZW50c1tuXSwgcmVhc29uKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICB0aGVuOiBmdW5jdGlvbiB0aGVuKG9uRiwgb25SKSB7XG5cdCAgICAgICAgICAgIHZhciBwID0gbmV3IFpvdXNhbigpO1xuXHQgICAgICAgICAgICB2YXIgY2xpZW50ID0ge1xuXHQgICAgICAgICAgICAgICAgeTogb25GLFxuXHQgICAgICAgICAgICAgICAgbjogb25SLFxuXHQgICAgICAgICAgICAgICAgcDogcFxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAodGhpcy5jKSB0aGlzLmMucHVzaChjbGllbnQpO2Vsc2UgdGhpcy5jID0gW2NsaWVudF07XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgcyA9IHRoaXMuc3RhdGUsXG5cdCAgICAgICAgICAgICAgICAgICAgYSA9IHRoaXMudjtcblx0ICAgICAgICAgICAgICAgIHNvb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHMoY2xpZW50LCBhKTtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBwO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgZnVuY3Rpb24gU1RBVEVfRlVMRklMTEVEKGMsIGFyZykge1xuXHQgICAgICAgIGlmICh0eXBlb2YgYy55ID09PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIHZhciB5cmV0ID0gYy55LmNhbGwodW5kZWZpbmVkLCBhcmcpO1xuXHQgICAgICAgICAgICAgICAgYy5wLnJlc29sdmUoeXJldCk7XG5cdCAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICAgICAgYy5wLnJlamVjdChlcnIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIGMucC5yZXNvbHZlKGFyZyk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gU1RBVEVfUkVKRUNURUQoYywgcmVhc29uKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjLm4gPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgdmFyIHlyZXQgPSBjLm4uY2FsbCh1bmRlZmluZWQsIHJlYXNvbik7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVzb2x2ZSh5cmV0KTtcblx0ICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVqZWN0KGVycik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgYy5wLnJlamVjdChyZWFzb24pO1xuXHQgICAgfVxuXHRcblx0ICAgIFpvdXNhbi5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgICAgIGlmICh2YWwgJiYgdmFsIGluc3RhbmNlb2YgWm91c2FuKSByZXR1cm4gdmFsO1xuXHQgICAgICAgIHZhciB6ID0gbmV3IFpvdXNhbigpO1xuXHQgICAgICAgIHoucmVzb2x2ZSh2YWwpO1xuXHQgICAgICAgIHJldHVybiB6O1xuXHQgICAgfTtcblx0ICAgIFpvdXNhbi5yZWplY3QgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgaWYgKGVyciAmJiBlcnIgaW5zdGFuY2VvZiBab3VzYW4pIHJldHVybiBlcnI7XG5cdCAgICAgICAgdmFyIHogPSBuZXcgWm91c2FuKCk7XG5cdCAgICAgICAgei5yZWplY3QoZXJyKTtcblx0ICAgICAgICByZXR1cm4gejtcblx0ICAgIH07XG5cdFxuXHQgICAgWm91c2FuLnZlcnNpb24gPSBcIjIuMy4zLW5vZGVudFwiO1xuXHQgICAgcmV0dXJuIFpvdXNhbjtcblx0fTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oOCksIF9fd2VicGFja19yZXF1aXJlX18oOSkuc2V0SW1tZWRpYXRlKSlcblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cdHZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblx0XG5cdC8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuXHQvLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcblx0Ly8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuXHQvLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXHRcblx0dmFyIGNhY2hlZFNldFRpbWVvdXQ7XG5cdHZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cdFxuXHRmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0ZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCgpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0KGZ1bmN0aW9uICgpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICB9XG5cdH0pKCk7XG5cdGZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG5cdCAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuXHQgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuXHQgICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuXHQgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0ZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuXHQgICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG5cdCAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG5cdCAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuXHQgICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG5cdCAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuXHQgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG5cdCAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgZHJhaW5pbmcgPSBmYWxzZTtcblx0dmFyIGN1cnJlbnRRdWV1ZTtcblx0dmFyIHF1ZXVlSW5kZXggPSAtMTtcblx0XG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG5cdCAgICBpZiAoZHJhaW5pbmcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcblx0ICAgIGRyYWluaW5nID0gdHJ1ZTtcblx0XG5cdCAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGxlbikge1xuXHQgICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuXHQgICAgICAgIHF1ZXVlID0gW107XG5cdCAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuXHQgICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIH1cblx0ICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHR9XG5cdFxuXHRwcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcblx0ICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG5cdCAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcblx0ICAgIH1cblx0fTtcblx0XG5cdC8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcblx0ZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG5cdCAgICB0aGlzLmZ1biA9IGZ1bjtcblx0ICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcblx0fVxuXHRJdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcblx0fTtcblx0cHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcblx0cHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcblx0cHJvY2Vzcy5lbnYgPSB7fTtcblx0cHJvY2Vzcy5hcmd2ID0gW107XG5cdHByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xuXHRwcm9jZXNzLnZlcnNpb25zID0ge307XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge31cblx0XG5cdHByb2Nlc3Mub24gPSBub29wO1xuXHRwcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5vbmNlID0gbm9vcDtcblx0cHJvY2Vzcy5vZmYgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xuXHRwcm9jZXNzLmVtaXQgPSBub29wO1xuXHRcblx0cHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0XG5cdHByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuICcvJztcblx0fTtcblx0cHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdHByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gMDtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHR2YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cdFxuXHQvLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXHRcblx0ZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcblx0fTtcblx0ZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcblx0fTtcblx0ZXhwb3J0cy5jbGVhclRpbWVvdXQgPSBleHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbiAodGltZW91dCkge1xuXHQgIGlmICh0aW1lb3V0KSB7XG5cdCAgICB0aW1lb3V0LmNsb3NlKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuXHQgIHRoaXMuX2lkID0gaWQ7XG5cdCAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG5cdH1cblx0VGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbiAoKSB7fTtcblx0VGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdywgdGhpcy5faWQpO1xuXHR9O1xuXHRcblx0Ly8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5cdGV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24gKGl0ZW0sIG1zZWNzKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHQgIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG5cdH07XG5cdFxuXHRleHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdCAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcblx0fTtcblx0XG5cdGV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbiAoaXRlbSkge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0XG5cdCAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG5cdCAgaWYgKG1zZWNzID49IDApIHtcblx0ICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcblx0ICAgICAgaWYgKGl0ZW0uX29uVGltZW91dCkgaXRlbS5fb25UaW1lb3V0KCk7XG5cdCAgICB9LCBtc2Vjcyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0ZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG5cdGV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcblxuLyoqKi8gfSksXG4vKiAxMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwsIHByb2Nlc3MpIHtcInVzZSBzdHJpY3RcIjtcblx0XG5cdChmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcblx0ICAgIFwidXNlIHN0cmljdFwiO1xuXHRcblx0ICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG5cdCAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuXHQgICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuXHQgICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcblx0ICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblx0XG5cdCAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcblx0ICAgICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcblx0ICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcblx0ICAgICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcblx0ICAgICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG5cdCAgICAgICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG5cdCAgICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG5cdCAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcblx0ICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcblx0ICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgY2FzZSAxOlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgY2FzZSAyOlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgY2FzZSAzOlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuXHQgICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcblx0ICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuXHQgICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcblx0ICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcblx0ICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cblx0ICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG5cdCAgICAgICAgICAgIGlmICh0YXNrKSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG5cdCAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcblx0ICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG5cdCAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG5cdCAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcblx0ICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuXHQgICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcblx0ICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSBmYWxzZTtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcblx0ICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcblx0ICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuXHQgICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuXHQgICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblx0XG5cdCAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSBcInNldEltbWVkaWF0ZSRcIiArIE1hdGgucmFuZG9tKCkgKyBcIiRcIjtcblx0ICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24gb25HbG9iYWxNZXNzYWdlKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJiB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJiBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcblx0ICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuXHQgICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuXHQgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcblx0ICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cblx0ICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuXHQgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG5cdCAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcblx0ICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS5cblx0ICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcblx0ICAgIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXHRcblx0ICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cblx0ICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcblx0ICAgICAgICAvLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45XG5cdCAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuXHQgICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcblx0ICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcblx0ICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuXHQgICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9IGVsc2UgaWYgKGRvYyAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpKSB7XG5cdCAgICAgICAgLy8gRm9yIElFIDbigJM4XG5cdCAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcblx0ICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuXHQgICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcblx0fSkodHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdW5kZWZpbmVkIDogZ2xvYmFsIDogc2VsZik7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpKSlcblxuLyoqKi8gfSksXG4vKiAxMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBpc1RoZW5hYmxlKG9iaikge1xuXHQgICAgICAgIHJldHVybiBvYmogJiYgb2JqIGluc3RhbmNlb2YgT2JqZWN0ICYmIHR5cGVvZiBvYmoudGhlbiA9PT0gXCJmdW5jdGlvblwiO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHJlc29sdXRpb24ocCwgciwgaG93KSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLyogMi4yLjcuMSAqL1xuXHQgICAgICAgICAgICB2YXIgeCA9IGhvdyA/IGhvdyhyKSA6IHI7XG5cdFxuXHQgICAgICAgICAgICBpZiAocCA9PT0geCkgLyogMi4zLjEgKi9cblx0ICAgICAgICAgICAgICAgIHJldHVybiBwLnJlamVjdChuZXcgVHlwZUVycm9yKFwiUHJvbWlzZSByZXNvbHV0aW9uIGxvb3BcIikpO1xuXHRcblx0ICAgICAgICAgICAgaWYgKGlzVGhlbmFibGUoeCkpIHtcblx0ICAgICAgICAgICAgICAgIC8qIDIuMy4zICovXG5cdCAgICAgICAgICAgICAgICB4LnRoZW4oZnVuY3Rpb24gKHkpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uKHAsIHkpO1xuXHQgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBwLnJlamVjdChlKTtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgcC5yZXNvbHZlKHgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBjYXRjaCAoZXgpIHtcblx0ICAgICAgICAgICAgLyogMi4yLjcuMiAqL1xuXHQgICAgICAgICAgICBwLnJlamVjdChleCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIENoYWluZWQoKSB7fTtcblx0ICAgIENoYWluZWQucHJvdG90eXBlID0ge1xuXHQgICAgICAgIHJlc29sdmU6IF91bmNoYWluZWQsXG5cdCAgICAgICAgcmVqZWN0OiBfdW5jaGFpbmVkLFxuXHQgICAgICAgIHRoZW46IHRoZW5DaGFpblxuXHQgICAgfTtcblx0ICAgIGZ1bmN0aW9uIF91bmNoYWluZWQodikge31cblx0ICAgIGZ1bmN0aW9uIHRoZW5DaGFpbihyZXMsIHJlaikge1xuXHQgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlcztcblx0ICAgICAgICB0aGlzLnJlamVjdCA9IHJlajtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiB0aGVuKHJlcywgcmVqKSB7XG5cdCAgICAgICAgdmFyIGNoYWluID0gbmV3IENoYWluZWQoKTtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB0aGlzLl9yZXNvbHZlcihmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBpc1RoZW5hYmxlKHZhbHVlKSA/IHZhbHVlLnRoZW4ocmVzLCByZWopIDogcmVzb2x1dGlvbihjaGFpbiwgdmFsdWUsIHJlcyk7XG5cdCAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChleCkge1xuXHQgICAgICAgICAgICAgICAgcmVzb2x1dGlvbihjaGFpbiwgZXgsIHJlaik7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cdCAgICAgICAgICAgIHJlc29sdXRpb24oY2hhaW4sIGV4LCByZWopO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gY2hhaW47XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gVGhlbmFibGUocmVzb2x2ZXIpIHtcblx0ICAgICAgICB0aGlzLl9yZXNvbHZlciA9IHJlc29sdmVyO1xuXHQgICAgICAgIHRoaXMudGhlbiA9IHRoZW47XG5cdCAgICB9O1xuXHRcblx0ICAgIFRoZW5hYmxlLnJlc29sdmUgPSBmdW5jdGlvbiAodikge1xuXHQgICAgICAgIHJldHVybiBUaGVuYWJsZS5pc1RoZW5hYmxlKHYpID8gdiA6IHsgdGhlbjogZnVuY3Rpb24gdGhlbihyZXNvbHZlKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh2KTtcblx0ICAgICAgICAgICAgfSB9O1xuXHQgICAgfTtcblx0XG5cdCAgICBUaGVuYWJsZS5pc1RoZW5hYmxlID0gaXNUaGVuYWJsZTtcblx0XG5cdCAgICByZXR1cm4gVGhlbmFibGU7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0LyoqXG5cdCAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cblx0ICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuXHQgKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQgKi9cblx0XG5cdC8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG5cdHZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cdFxuXHQvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cblx0dmFyIE5BTiA9IDAgLyAwO1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cdFxuXHQvKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xuXHR2YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblx0XG5cdC8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG5cdHZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblx0XG5cdC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG5cdHZhciBmcmVlR2xvYmFsID0gKHR5cGVvZiBnbG9iYWwgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGdsb2JhbCkpID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXHRcblx0LyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cblx0dmFyIGZyZWVTZWxmID0gKHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihzZWxmKSkgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cdFxuXHQvKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cblx0dmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byByZXNvbHZlIHRoZVxuXHQgKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcblx0ICogb2YgdmFsdWVzLlxuXHQgKi9cblx0dmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG5cdHZhciBuYXRpdmVNYXggPSBNYXRoLm1heCxcblx0ICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuXHQgKiB0aGUgVW5peCBlcG9jaCAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMi40LjBcblx0ICogQGNhdGVnb3J5IERhdGVcblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXN0YW1wLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7XG5cdCAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcblx0ICogfSwgXy5ub3coKSk7XG5cdCAqIC8vID0+IExvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGludm9jYXRpb24uXG5cdCAqL1xuXHR2YXIgbm93ID0gZnVuY3Rpb24gbm93KCkge1xuXHQgIHJldHVybiByb290LkRhdGUubm93KCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGRlYm91bmNlZCBmdW5jdGlvbiB0aGF0IGRlbGF5cyBpbnZva2luZyBgZnVuY2AgdW50aWwgYWZ0ZXIgYHdhaXRgXG5cdCAqIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdhc1xuXHQgKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG5cdCAqIGRlbGF5ZWQgYGZ1bmNgIGludm9jYXRpb25zIGFuZCBhIGBmbHVzaGAgbWV0aG9kIHRvIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLlxuXHQgKiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGVcblx0ICogbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZFxuXHQgKiB3aXRoIHRoZSBsYXN0IGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50XG5cdCAqIGNhbGxzIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgXG5cdCAqIGludm9jYXRpb24uXG5cdCAqXG5cdCAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcblx0ICogaW52b2tlZCBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cblx0ICogaXMgaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuXHQgKlxuXHQgKiBJZiBgd2FpdGAgaXMgYDBgIGFuZCBgbGVhZGluZ2AgaXMgYGZhbHNlYCwgYGZ1bmNgIGludm9jYXRpb24gaXMgZGVmZXJyZWRcblx0ICogdW50aWwgdG8gdGhlIG5leHQgdGljaywgc2ltaWxhciB0byBgc2V0VGltZW91dGAgd2l0aCBhIHRpbWVvdXQgb2YgYDBgLlxuXHQgKlxuXHQgKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9kZWJvdW5jaW5nLXRocm90dGxpbmctZXhwbGFpbmVkLWV4YW1wbGVzLylcblx0ICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy5kZWJvdW5jZWAgYW5kIGBfLnRocm90dGxlYC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQGNhdGVnb3J5IEZ1bmN0aW9uXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgb2JqZWN0LlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9ZmFsc2VdXG5cdCAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XVxuXHQgKiAgVGhlIG1heGltdW0gdGltZSBgZnVuY2AgaXMgYWxsb3dlZCB0byBiZSBkZWxheWVkIGJlZm9yZSBpdCdzIGludm9rZWQuXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cblx0ICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogLy8gQXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eC5cblx0ICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcblx0ICpcblx0ICogLy8gSW52b2tlIGBzZW5kTWFpbGAgd2hlbiBjbGlja2VkLCBkZWJvdW5jaW5nIHN1YnNlcXVlbnQgY2FsbHMuXG5cdCAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcblx0ICogICAnbGVhZGluZyc6IHRydWUsXG5cdCAqICAgJ3RyYWlsaW5nJzogZmFsc2Vcblx0ICogfSkpO1xuXHQgKlxuXHQgKiAvLyBFbnN1cmUgYGJhdGNoTG9nYCBpcyBpbnZva2VkIG9uY2UgYWZ0ZXIgMSBzZWNvbmQgb2YgZGVib3VuY2VkIGNhbGxzLlxuXHQgKiB2YXIgZGVib3VuY2VkID0gXy5kZWJvdW5jZShiYXRjaExvZywgMjUwLCB7ICdtYXhXYWl0JzogMTAwMCB9KTtcblx0ICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuXHQgKiBqUXVlcnkoc291cmNlKS5vbignbWVzc2FnZScsIGRlYm91bmNlZCk7XG5cdCAqXG5cdCAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgZGVib3VuY2VkIGludm9jYXRpb24uXG5cdCAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGRlYm91bmNlZC5jYW5jZWwpO1xuXHQgKi9cblx0ZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuXHQgIHZhciBsYXN0QXJncyxcblx0ICAgICAgbGFzdFRoaXMsXG5cdCAgICAgIG1heFdhaXQsXG5cdCAgICAgIHJlc3VsdCxcblx0ICAgICAgdGltZXJJZCxcblx0ICAgICAgbGFzdENhbGxUaW1lLFxuXHQgICAgICBsYXN0SW52b2tlVGltZSA9IDAsXG5cdCAgICAgIGxlYWRpbmcgPSBmYWxzZSxcblx0ICAgICAgbWF4aW5nID0gZmFsc2UsXG5cdCAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblx0XG5cdCAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcblx0ICB9XG5cdCAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG5cdCAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG5cdCAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG5cdCAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcblx0ICAgIG1heFdhaXQgPSBtYXhpbmcgPyBuYXRpdmVNYXgodG9OdW1iZXIob3B0aW9ucy5tYXhXYWl0KSB8fCAwLCB3YWl0KSA6IG1heFdhaXQ7XG5cdCAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaW52b2tlRnVuYyh0aW1lKSB7XG5cdCAgICB2YXIgYXJncyA9IGxhc3RBcmdzLFxuXHQgICAgICAgIHRoaXNBcmcgPSBsYXN0VGhpcztcblx0XG5cdCAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuXHQgICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuXHQgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG5cdCAgICAvLyBSZXNldCBhbnkgYG1heFdhaXRgIHRpbWVyLlxuXHQgICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuXHQgICAgLy8gU3RhcnQgdGhlIHRpbWVyIGZvciB0aGUgdHJhaWxpbmcgZWRnZS5cblx0ICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG5cdCAgICAvLyBJbnZva2UgdGhlIGxlYWRpbmcgZWRnZS5cblx0ICAgIHJldHVybiBsZWFkaW5nID8gaW52b2tlRnVuYyh0aW1lKSA6IHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHJlbWFpbmluZ1dhaXQodGltZSkge1xuXHQgICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcblx0ICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lLFxuXHQgICAgICAgIHJlc3VsdCA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcblx0XG5cdCAgICByZXR1cm4gbWF4aW5nID8gbmF0aXZlTWluKHJlc3VsdCwgbWF4V2FpdCAtIHRpbWVTaW5jZUxhc3RJbnZva2UpIDogcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gc2hvdWxkSW52b2tlKHRpbWUpIHtcblx0ICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG5cdCAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZTtcblx0XG5cdCAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuXHQgICAgLy8gdHJhaWxpbmcgZWRnZSwgdGhlIHN5c3RlbSB0aW1lIGhhcyBnb25lIGJhY2t3YXJkcyBhbmQgd2UncmUgdHJlYXRpbmdcblx0ICAgIC8vIGl0IGFzIHRoZSB0cmFpbGluZyBlZGdlLCBvciB3ZSd2ZSBoaXQgdGhlIGBtYXhXYWl0YCBsaW1pdC5cblx0ICAgIHJldHVybiBsYXN0Q2FsbFRpbWUgPT09IHVuZGVmaW5lZCB8fCB0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0IHx8IHRpbWVTaW5jZUxhc3RDYWxsIDwgMCB8fCBtYXhpbmcgJiYgdGltZVNpbmNlTGFzdEludm9rZSA+PSBtYXhXYWl0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuXHQgICAgdmFyIHRpbWUgPSBub3coKTtcblx0ICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcblx0ICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcblx0ICAgIH1cblx0ICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuXHQgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG5cdCAgICB0aW1lcklkID0gdW5kZWZpbmVkO1xuXHRcblx0ICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cblx0ICAgIC8vIGRlYm91bmNlZCBhdCBsZWFzdCBvbmNlLlxuXHQgICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG5cdCAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuXHQgICAgfVxuXHQgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBjYW5jZWwoKSB7XG5cdCAgICBpZiAodGltZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcblx0ICAgIH1cblx0ICAgIGxhc3RJbnZva2VUaW1lID0gMDtcblx0ICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdW5kZWZpbmVkO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZmx1c2goKSB7XG5cdCAgICByZXR1cm4gdGltZXJJZCA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogdHJhaWxpbmdFZGdlKG5vdygpKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcblx0ICAgIHZhciB0aW1lID0gbm93KCksXG5cdCAgICAgICAgaXNJbnZva2luZyA9IHNob3VsZEludm9rZSh0aW1lKTtcblx0XG5cdCAgICBsYXN0QXJncyA9IGFyZ3VtZW50cztcblx0ICAgIGxhc3RUaGlzID0gdGhpcztcblx0ICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG5cdFxuXHQgICAgaWYgKGlzSW52b2tpbmcpIHtcblx0ICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIHJldHVybiBsZWFkaW5nRWRnZShsYXN0Q2FsbFRpbWUpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChtYXhpbmcpIHtcblx0ICAgICAgICAvLyBIYW5kbGUgaW52b2NhdGlvbnMgaW4gYSB0aWdodCBsb29wLlxuXHQgICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG5cdCAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9XG5cdCAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcblx0ICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcblx0ICByZXR1cm4gZGVib3VuY2VkO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG5cdCAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcblx0ICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3Qoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChudWxsKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHZhbHVlKTtcblx0ICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG5cdCAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKHt9KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodmFsdWUpKSA9PSAnb2JqZWN0Jztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNTeW1ib2woJ2FiYycpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcblx0ICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodmFsdWUpKSA9PSAnc3ltYm9sJyB8fCBpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG51bWJlci5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy50b051bWJlcigzLjIpO1xuXHQgKiAvLyA9PiAzLjJcblx0ICpcblx0ICogXy50b051bWJlcihOdW1iZXIuTUlOX1ZBTFVFKTtcblx0ICogLy8gPT4gNWUtMzI0XG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoSW5maW5pdHkpO1xuXHQgKiAvLyA9PiBJbmZpbml0eVxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKCczLjInKTtcblx0ICogLy8gPT4gMy4yXG5cdCAqL1xuXHRmdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIE5BTjtcblx0ICB9XG5cdCAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuXHQgICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuXHQgICAgdmFsdWUgPSBpc09iamVjdChvdGhlcikgPyBvdGhlciArICcnIDogb3RoZXI7XG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuXHQgIH1cblx0ICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG5cdCAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcblx0ICByZXR1cm4gaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KSA6IHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWU7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSksXG4vKiAxMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfZG9tVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdHZhciBfY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgU2VhcmNoRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBTZWFyY2hFbGVtZW50KCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgX3JlZiRoYW5kbGVTdWJtaXQgPSBfcmVmLmhhbmRsZVN1Ym1pdCxcblx0ICAgICAgICBoYW5kbGVTdWJtaXQgPSBfcmVmJGhhbmRsZVN1Ym1pdCA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZVN1Ym1pdCxcblx0ICAgICAgICBfcmVmJHNlYXJjaExhYmVsID0gX3JlZi5zZWFyY2hMYWJlbCxcblx0ICAgICAgICBzZWFyY2hMYWJlbCA9IF9yZWYkc2VhcmNoTGFiZWwgPT09IHVuZGVmaW5lZCA/ICdzZWFyY2gnIDogX3JlZiRzZWFyY2hMYWJlbCxcblx0ICAgICAgICBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG5cdCAgICAgICAgY2xhc3NOYW1lcyA9IF9yZWYkY2xhc3NOYW1lcyA9PT0gdW5kZWZpbmVkID8ge30gOiBfcmVmJGNsYXNzTmFtZXM7XG5cdFxuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNlYXJjaEVsZW1lbnQpO1xuXHRcblx0ICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBbJ2dlb3NlYXJjaCcsIGNsYXNzTmFtZXMuY29udGFpbmVyXS5qb2luKCcgJykpO1xuXHQgICAgdmFyIGZvcm0gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdmb3JtJywgWycnLCBjbGFzc05hbWVzLmZvcm1dLmpvaW4oJyAnKSwgY29udGFpbmVyKTtcblx0ICAgIHZhciBpbnB1dCA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2lucHV0JywgWydnbGFzcycsIGNsYXNzTmFtZXMuaW5wdXRdLmpvaW4oJyAnKSwgZm9ybSk7XG5cdFxuXHQgICAgaW5wdXQudHlwZSA9ICd0ZXh0Jztcblx0ICAgIGlucHV0LnBsYWNlaG9sZGVyID0gc2VhcmNoTGFiZWw7XG5cdFxuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbklucHV0KGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbktleVVwKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbktleVByZXNzKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbkZvY3VzKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uQmx1cihlKTtcblx0ICAgIH0sIGZhbHNlKTtcblx0XG5cdCAgICB0aGlzLmVsZW1lbnRzID0geyBjb250YWluZXI6IGNvbnRhaW5lciwgZm9ybTogZm9ybSwgaW5wdXQ6IGlucHV0IH07XG5cdCAgICB0aGlzLmhhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhTZWFyY2hFbGVtZW50LCBbe1xuXHQgICAga2V5OiAnb25Gb2N1cycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25Gb2N1cygpIHtcblx0ICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKHRoaXMuZWxlbWVudHMuZm9ybSwgJ2FjdGl2ZScpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uQmx1cicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25CbHVyKCkge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkodGhpcy5lbGVtZW50cy5mb3JtLCAnYWN0aXZlJyk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb25TdWJtaXQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uU3VibWl0KGV2ZW50KSB7XG5cdCAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgICAgdmFyIF9lbGVtZW50cywgaW5wdXQsIGNvbnRhaW5lcjtcblx0XG5cdCAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XG5cdCAgICAgICAgX2VsZW1lbnRzID0gdGhpcy5lbGVtZW50cywgaW5wdXQgPSBfZWxlbWVudHMuaW5wdXQsIGNvbnRhaW5lciA9IF9lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG5cdFxuXHQgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZVN1Ym1pdCh7IHF1ZXJ5OiBpbnB1dC52YWx1ZSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHQgICAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcblx0ICAgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG5cdCAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb25JbnB1dCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25JbnB1dCgpIHtcblx0ICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnZXJyb3InKTtcblx0ICAgICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvbktleVVwJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleVVwKGV2ZW50KSB7XG5cdCAgICAgIHZhciBfZWxlbWVudHMyID0gdGhpcy5lbGVtZW50cyxcblx0ICAgICAgICAgIGNvbnRhaW5lciA9IF9lbGVtZW50czIuY29udGFpbmVyLFxuXHQgICAgICAgICAgaW5wdXQgPSBfZWxlbWVudHMyLmlucHV0O1xuXHRcblx0ICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IF9jb25zdGFudHMuRVNDQVBFX0tFWSkge1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHRcblx0ICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuXHRcblx0ICAgICAgICBkb2N1bWVudC5ib2R5LmZvY3VzKCk7XG5cdCAgICAgICAgZG9jdW1lbnQuYm9keS5ibHVyKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvbktleVByZXNzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleVByZXNzKGV2ZW50KSB7XG5cdCAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBfY29uc3RhbnRzLkVOVEVSX0tFWSkge1xuXHQgICAgICAgIHRoaXMub25TdWJtaXQoZXZlbnQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2V0UXVlcnknLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFF1ZXJ5KHF1ZXJ5KSB7XG5cdCAgICAgIHZhciBpbnB1dCA9IHRoaXMuZWxlbWVudHMuaW5wdXQ7XG5cdFxuXHQgICAgICBpbnB1dC52YWx1ZSA9IHF1ZXJ5O1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFNlYXJjaEVsZW1lbnQ7XG5cdH0oKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFNlYXJjaEVsZW1lbnQ7XG5cbi8qKiovIH0pLFxuLyogMTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0LyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xuXHR2YXIgY3JlYXRlRWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoZWxlbWVudCkge1xuXHQgIHZhciBjbGFzc05hbWVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJztcblx0ICB2YXIgcGFyZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsO1xuXHRcblx0ICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1lbnQpO1xuXHQgIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZXM7XG5cdFxuXHQgIGlmIChwYXJlbnQpIHtcblx0ICAgIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZWw7XG5cdH07XG5cdFxuXHR2YXIgY3JlYXRlU2NyaXB0RWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlU2NyaXB0RWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZVNjcmlwdEVsZW1lbnQodXJsLCBjYikge1xuXHQgIHZhciBzY3JpcHQgPSBjcmVhdGVFbGVtZW50KCdzY3JpcHQnLCBudWxsLCBkb2N1bWVudC5ib2R5KTtcblx0ICBzY3JpcHQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvamF2YXNjcmlwdCcpO1xuXHRcblx0ICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcblx0ICAgIHdpbmRvd1tjYl0gPSBmdW5jdGlvbiAoanNvbikge1xuXHQgICAgICBzY3JpcHQucmVtb3ZlKCk7XG5cdCAgICAgIGRlbGV0ZSB3aW5kb3dbY2JdO1xuXHQgICAgICByZXNvbHZlKGpzb24pO1xuXHQgICAgfTtcblx0XG5cdCAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdzcmMnLCB1cmwpO1xuXHQgIH0pO1xuXHR9O1xuXHRcblx0dmFyIGFkZENsYXNzTmFtZSA9IGV4cG9ydHMuYWRkQ2xhc3NOYW1lID0gZnVuY3Rpb24gYWRkQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuXHQgIGlmIChlbGVtZW50ICYmICFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG5cdCAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcmVtb3ZlQ2xhc3NOYW1lID0gZXhwb3J0cy5yZW1vdmVDbGFzc05hbWUgPSBmdW5jdGlvbiByZW1vdmVDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG5cdCAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuXHQgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDE1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0dmFyIEVOVEVSX0tFWSA9IGV4cG9ydHMuRU5URVJfS0VZID0gMTM7XG5cdHZhciBFU0NBUEVfS0VZID0gZXhwb3J0cy5FU0NBUEVfS0VZID0gMjc7XG5cdHZhciBBUlJPV19ET1dOX0tFWSA9IGV4cG9ydHMuQVJST1dfRE9XTl9LRVkgPSA0MDtcblx0dmFyIEFSUk9XX1VQX0tFWSA9IGV4cG9ydHMuQVJST1dfVVBfS0VZID0gMzg7XG5cdHZhciBBUlJPV19MRUZUX0tFWSA9IGV4cG9ydHMuQVJST1dfTEVGVF9LRVkgPSAzNztcblx0dmFyIEFSUk9XX1JJR0hUX0tFWSA9IGV4cG9ydHMuQVJST1dfUklHSFRfS0VZID0gMzk7XG5cdFxuXHR2YXIgU1BFQ0lBTF9LRVlTID0gZXhwb3J0cy5TUEVDSUFMX0tFWVMgPSBbRU5URVJfS0VZLCBFU0NBUEVfS0VZLCBBUlJPV19ET1dOX0tFWSwgQVJST1dfVVBfS0VZLCBBUlJPV19MRUZUX0tFWSwgQVJST1dfUklHSFRfS0VZXTtcblxuLyoqKi8gfSksXG4vKiAxNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9kb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGN4ID0gZnVuY3Rpb24gY3goKSB7XG5cdCAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGNsYXNzbmFtZXMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgIGNsYXNzbmFtZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gY2xhc3NuYW1lcy5qb2luKCcgJykudHJpbSgpO1xuXHR9O1xuXHRcblx0dmFyIFJlc3VsdExpc3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gUmVzdWx0TGlzdCgpIHtcblx0ICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICBfcmVmJGhhbmRsZUNsaWNrID0gX3JlZi5oYW5kbGVDbGljayxcblx0ICAgICAgICBoYW5kbGVDbGljayA9IF9yZWYkaGFuZGxlQ2xpY2sgPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uICgpIHt9IDogX3JlZiRoYW5kbGVDbGljayxcblx0ICAgICAgICBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG5cdCAgICAgICAgY2xhc3NOYW1lcyA9IF9yZWYkY2xhc3NOYW1lcyA9PT0gdW5kZWZpbmVkID8ge30gOiBfcmVmJGNsYXNzTmFtZXM7XG5cdFxuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlc3VsdExpc3QpO1xuXHRcblx0ICAgIF9pbml0aWFsaXNlUHJvcHMuY2FsbCh0aGlzKTtcblx0XG5cdCAgICB0aGlzLnByb3BzID0geyBoYW5kbGVDbGljazogaGFuZGxlQ2xpY2ssIGNsYXNzTmFtZXM6IGNsYXNzTmFtZXMgfTtcblx0ICAgIHRoaXMuc2VsZWN0ZWQgPSAtMTtcblx0XG5cdCAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgY3goJ3Jlc3VsdHMnLCBjbGFzc05hbWVzLmNvbnRhaW5lcikpO1xuXHQgICAgdmFyIHJlc3VsdEl0ZW0gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBjeChjbGFzc05hbWVzLml0ZW0pKTtcblx0XG5cdCAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2ssIHRydWUpO1xuXHQgICAgdGhpcy5lbGVtZW50cyA9IHsgY29udGFpbmVyOiBjb250YWluZXIsIHJlc3VsdEl0ZW06IHJlc3VsdEl0ZW0gfTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhSZXN1bHRMaXN0LCBbe1xuXHQgICAga2V5OiAncmVuZGVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgIHZhciByZXN1bHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTtcblx0ICAgICAgdmFyIF9lbGVtZW50cyA9IHRoaXMuZWxlbWVudHMsXG5cdCAgICAgICAgICBjb250YWluZXIgPSBfZWxlbWVudHMuY29udGFpbmVyLFxuXHQgICAgICAgICAgcmVzdWx0SXRlbSA9IF9lbGVtZW50cy5yZXN1bHRJdGVtO1xuXHRcblx0ICAgICAgdGhpcy5jbGVhcigpO1xuXHRcblx0ICAgICAgcmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChyZXN1bHQsIGlkeCkge1xuXHQgICAgICAgIHZhciBjaGlsZCA9IHJlc3VsdEl0ZW0uY2xvbmVOb2RlKHRydWUpO1xuXHQgICAgICAgIGNoaWxkLnNldEF0dHJpYnV0ZSgnZGF0YS1rZXknLCBpZHgpO1xuXHQgICAgICAgIGNoaWxkLmlubmVySFRNTCA9IHJlc3VsdC5sYWJlbDtcblx0ICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMucmVzdWx0cyA9IHJlc3VsdHM7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2VsZWN0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3QoaW5kZXgpIHtcblx0ICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbmZ1c2luZy1hcnJvd1xuXHRcblx0ICAgICAgQXJyYXkuZnJvbShjb250YWluZXIuY2hpbGRyZW4pLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkLCBpZHgpIHtcblx0ICAgICAgICByZXR1cm4gaWR4ID09PSBpbmRleCA/ICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjaGlsZCwgJ2FjdGl2ZScpIDogKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJyk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgdGhpcy5zZWxlY3RlZCA9IGluZGV4O1xuXHQgICAgICByZXR1cm4gdGhpcy5yZXN1bHRzW2luZGV4XTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdjb3VudCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY291bnQoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnJlc3VsdHMubGVuZ3RoO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NsZWFyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHtcblx0ICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXHRcblx0ICAgICAgd2hpbGUgKGNvbnRhaW5lci5sYXN0Q2hpbGQpIHtcblx0ICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmxhc3RDaGlsZCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBSZXN1bHRMaXN0O1xuXHR9KCk7XG5cdFxuXHR2YXIgX2luaXRpYWxpc2VQcm9wcyA9IGZ1bmN0aW9uIF9pbml0aWFsaXNlUHJvcHMoKSB7XG5cdCAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgdGhpcy5vbkNsaWNrID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICB0YXJnZXQgPSBfcmVmMi50YXJnZXQ7XG5cdFxuXHQgICAgdmFyIGhhbmRsZUNsaWNrID0gX3RoaXMucHJvcHMuaGFuZGxlQ2xpY2s7XG5cdCAgICB2YXIgY29udGFpbmVyID0gX3RoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgIGlmICh0YXJnZXQucGFyZW50Tm9kZSAhPT0gY29udGFpbmVyIHx8ICF0YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLWtleScpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaWR4ID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKTtcblx0ICAgIHZhciByZXN1bHQgPSBfdGhpcy5yZXN1bHRzW2lkeF07XG5cdCAgICBoYW5kbGVDbGljayh7IHJlc3VsdDogcmVzdWx0IH0pO1xuXHQgIH07XG5cdH07XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBSZXN1bHRMaXN0O1xuXG4vKioqLyB9KSxcbi8qIDE3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0dmFyIF9kb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG5cdCAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7XG5cdCAgfXN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7aWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuXHQgIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2VuZHBvaW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcblx0ICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuXHQgICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sLFxuXHQgICAgICAgICAganNvbnAgPSBfcmVmLmpzb25wO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcblx0ICAgICAgICBxdWVyeTogcXVlcnksXG5cdCAgICAgICAganNvbnA6IGpzb25wXG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIHJldHVybiBwcm90b2NvbCArICcvL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvTG9jYXRpb25zPycgKyBwYXJhbVN0cmluZztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcblx0ICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXHRcblx0ICAgICAgaWYgKGRhdGEucmVzb3VyY2VTZXRzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybiBbXTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIGRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcy5tYXAoZnVuY3Rpb24gKHIpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgeDogci5wb2ludC5jb29yZGluYXRlc1sxXSxcblx0ICAgICAgICAgIHk6IHIucG9pbnQuY29vcmRpbmF0ZXNbMF0sXG5cdCAgICAgICAgICBsYWJlbDogci5hZGRyZXNzLmZvcm1hdHRlZEFkZHJlc3MsXG5cdCAgICAgICAgICBib3VuZHM6IFtbci5iYm94WzBdLCByLmJib3hbMV1dLCAvLyBzLCB3XG5cdCAgICAgICAgICBbci5iYm94WzJdLCByLmJib3hbM11dXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NlYXJjaCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKF9yZWYzKSB7XG5cdCAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwganNvbnAsIHVybCwganNvbjtcblx0ICAgICAgICBxdWVyeSA9IF9yZWYzLnF1ZXJ5O1xuXHRcblx0ICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuXHRcblx0ICAgICAgICBqc29ucCA9ICdCSU5HX0pTT05QX0NCXycgKyBEYXRlLm5vdygpO1xuXHQgICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCwganNvbnA6IGpzb25wIH0pO1xuXHRcblx0ICAgICAgICByZXR1cm4gKDAsIF9kb21VdGlscy5jcmVhdGVTY3JpcHRFbGVtZW50KSh1cmwsIGpzb25wKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHQgICAgICAgICAganNvbiA9ICRhd2FpdF8xO1xuXHQgICAgICAgICAgcmV0dXJuICRyZXR1cm4odGhpcy5wYXJzZSh7IGRhdGE6IGpzb24gfSkpO1xuXHQgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSksXG4vKiAxOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBQcm92aWRlcigpIHtcblx0ICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG5cdCAgICBrZXk6ICdnZXRQYXJhbVN0cmluZycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFyYW1TdHJpbmcocGFyYW1zKSB7XG5cdCAgICAgIHJldHVybiBPYmplY3Qua2V5cyhwYXJhbXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtc1trZXldKTtcblx0ICAgICAgfSkuam9pbignJicpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NlYXJjaCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKF9yZWYpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgICB2YXIgcXVlcnksIHByb3RvY29sLCB1cmwsIHJlcXVlc3QsIGpzb247XG5cdCAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5O1xuXHRcblx0ICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuXHQgICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCB9KTtcblx0XG5cdCAgICAgICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcblx0ICAgICAgICAgIHJlcXVlc3QgPSAkYXdhaXRfMTtcblx0ICAgICAgICAgIHJldHVybiByZXF1ZXN0Lmpzb24oKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMikge1xuXHQgICAgICAgICAgICBqc29uID0gJGF3YWl0XzI7XG5cdCAgICAgICAgICAgIHJldHVybiAkcmV0dXJuKHRoaXMucGFyc2UoeyBkYXRhOiBqc29uIH0pKTtcblx0ICAgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSksXG4vKiAxOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcblx0ICB9c3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTtpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG5cdCAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblx0XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZW5kcG9pbnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG5cdCAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblx0XG5cdCAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuXHQgICAgICAgIGY6ICdqc29uJyxcblx0ICAgICAgICB0ZXh0OiBxdWVyeVxuXHQgICAgICB9KSk7XG5cdFxuXHQgICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9nZW9jb2RlLmFyY2dpcy5jb20vYXJjZ2lzL3Jlc3Qvc2VydmljZXMvV29ybGQvR2VvY29kZVNlcnZlci9maW5kPycgKyBwYXJhbVN0cmluZztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcblx0ICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXHRcblx0ICAgICAgcmV0dXJuIGRhdGEubG9jYXRpb25zLm1hcChmdW5jdGlvbiAocikge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICB4OiByLmZlYXR1cmUuZ2VvbWV0cnkueCxcblx0ICAgICAgICAgIHk6IHIuZmVhdHVyZS5nZW9tZXRyeS55LFxuXHQgICAgICAgICAgbGFiZWw6IHIubmFtZSxcblx0ICAgICAgICAgIGJvdW5kczogW1tyLmV4dGVudC55bWluLCByLmV4dGVudC54bWluXSwgLy8gcywgd1xuXHQgICAgICAgICAgW3IuZXh0ZW50LnltYXgsIHIuZXh0ZW50LnhtYXhdXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSksXG4vKiAyMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcblx0ICB9c3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTtpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG5cdCAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblx0XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZW5kcG9pbnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG5cdCAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblx0XG5cdCAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuXHQgICAgICAgIGFkZHJlc3M6IHF1ZXJ5XG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIC8vIGdvb2dsZSByZXF1aXJlcyBhIHNlY3VyZSBjb25uZWN0aW9uIHdoZW4gdXNpbmcgYXBpIGtleXNcblx0ICAgICAgdmFyIHByb3RvID0gcGFyYW1zICYmIHBhcmFtcy5rZXkgPyAnaHR0cHM6JyA6IHByb3RvY29sO1xuXHQgICAgICByZXR1cm4gcHJvdG8gKyAnLy9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbj8nICsgcGFyYW1TdHJpbmc7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncGFyc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG5cdCAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblx0XG5cdCAgICAgIHJldHVybiBkYXRhLnJlc3VsdHMubWFwKGZ1bmN0aW9uIChyKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHg6IHIuZ2VvbWV0cnkubG9jYXRpb24ubG5nLFxuXHQgICAgICAgICAgeTogci5nZW9tZXRyeS5sb2NhdGlvbi5sYXQsXG5cdCAgICAgICAgICBsYWJlbDogci5mb3JtYXR0ZWRfYWRkcmVzcyxcblx0ICAgICAgICAgIGJvdW5kczogW1tyLmdlb21ldHJ5LnZpZXdwb3J0LnNvdXRod2VzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0LmxuZ10sIC8vIHMsIHdcblx0ICAgICAgICAgIFtyLmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0LmxuZ11dLFxuXHQgICAgICAgICAgcmF3OiByXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9KSxcbi8qIDIxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcblx0ICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG5cdCAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG5cdCAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1yZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9wcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0dmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG5cdCAgaWYgKCFzZWxmKSB7XG5cdCAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG5cdCAgfXJldHVybiBjYWxsICYmICgodHlwZW9mIGNhbGwgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG5cdCAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihzdXBlckNsYXNzKSkpO1xuXHQgIH1zdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pO2lmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcblx0fVxuXHRcblx0dmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcblx0ICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXHRcblx0ICBmdW5jdGlvbiBQcm92aWRlcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG5cdCAgICBrZXk6ICdlbmRwb2ludCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG5cdCAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcblx0ICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblx0XG5cdCAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG5cdCAgICAgICAgZm9ybWF0OiAnanNvbicsXG5cdCAgICAgICAgcTogcXVlcnlcblx0ICAgICAgfSkpO1xuXHRcblx0ICAgICAgcmV0dXJuIHByb3RvY29sICsgJy8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3NlYXJjaD8nICsgcGFyYW1TdHJpbmc7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncGFyc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG5cdCAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblx0XG5cdCAgICAgIHJldHVybiBkYXRhLm1hcChmdW5jdGlvbiAocikge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICB4OiByLmxvbixcblx0ICAgICAgICAgIHk6IHIubGF0LFxuXHQgICAgICAgICAgbGFiZWw6IHIuZGlzcGxheV9uYW1lLFxuXHQgICAgICAgICAgYm91bmRzOiBbW3BhcnNlRmxvYXQoci5ib3VuZGluZ2JveFswXSksIHBhcnNlRmxvYXQoci5ib3VuZGluZ2JveFsyXSldLCAvLyBzLCB3XG5cdCAgICAgICAgICBbcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzFdKSwgcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzNdKV1dLFxuXHQgICAgICAgICAgcmF3OiByXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9KSxcbi8qIDIyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLlNldHVwUGFuZWwgPSBTZXR1cFBhbmVsO1xuXHRleHBvcnRzLnVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQgPSB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0O1xuXHRcblx0dmFyIF9sYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0dmFyIF9vcGFjaXR5U2xpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHRmdW5jdGlvbiBTZXR1cFBhbmVsKGxheWVycywgbGF5b3V0KSB7XG5cdCAgICB2YXIgbGF5ZXJHcm91cHMgPSBtYWtlTGF5ZXJHcm91cHMobGF5b3V0WydsYXllci1ncm91cHMtb3JkZXInXSk7XG5cdCAgICBtYWtlTGF5ZXJFbGVtcyhsYXllckdyb3VwcywgbGF5ZXJzKTtcblx0ICAgIG1ha2VQYW5lbERyYWdnYWJsZSgpO1xuXHQgICAgc2V0UGFuZWxTY3JvbGxIYW5kbGVyKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJyb3dzZXJJc0ludGVybmV0RXhwbG9yZXIoKSB7XG5cdCAgICB2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcblx0ICAgIHJldHVybiB1YS5pbmRleE9mKCdNU0lFJykgPiAtMSB8fCB1YS5pbmRleE9mKCdydjoxMS4wJykgPiAtMTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0UGFuZWxTY3JvbGxIYW5kbGVyKCkge1xuXHQgICAgdmFyIHBhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsJyk7XG5cdCAgICBwYW5lbC5vbnNjcm9sbCA9IHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VQYW5lbERyYWdnYWJsZSgpIHtcblx0ICAgIGlmIChicm93c2VySXNJbnRlcm5ldEV4cGxvcmVyKCkpIHJldHVybjtcblx0XG5cdCAgICB2YXIgb3ZlcmxheSA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsLWRyYWctb3ZlcmxheScpO1xuXHRcblx0ICAgIG92ZXJsYXkuc3R5bGUoJ2N1cnNvcicsICdldy1yZXNpemUnKTtcblx0XG5cdCAgICBvdmVybGF5LmNhbGwoZDMuZHJhZygpLm9uKCdkcmFnJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHBhbmVsRHJhZ0V2ZW50SGFuZGxlci5jYWxsKHRoaXMpO1xuXHQgICAgfSkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwYW5lbERyYWdFdmVudEhhbmRsZXIoKSB7XG5cdCAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KCk7XG5cdCAgICB1cGRhdGVQYW5lbFdpZHRoKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKSB7XG5cdCAgICB2YXIgcGFuZWwgPSBkMy5zZWxlY3QoJyNyaWdodC1wYW5lbCcpO1xuXHQgICAgdmFyIHBhbmVsT2Zmc2V0SGVpZ2h0ID0gcGFuZWwucHJvcGVydHkoJ29mZnNldEhlaWdodCcpO1xuXHQgICAgdmFyIHBhbmVsRHJhZ092ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwtZHJhZy1vdmVybGF5Jyk7XG5cdCAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsLWhlYWRlcicpO1xuXHRcblx0ICAgIHZhciBuZXdIZWlnaHQ7XG5cdFxuXHQgICAgaWYgKHBhbmVsLmNsYXNzZWQoJ2dyYXBocy1hY3RpdmUnKSkge1xuXHQgICAgICAgIHZhciBncmFwaExpc3RFeHRyYVNwYWNlID0gNzAwO1xuXHQgICAgICAgIHZhciBncmFwaExpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JhcGgtbGlzdCcpO1xuXHQgICAgICAgIG5ld0hlaWdodCA9IGhlYWRlci5zY3JvbGxIZWlnaHQgKyBncmFwaExpc3Quc2Nyb2xsSGVpZ2h0ICsgZ3JhcGhMaXN0RXh0cmFTcGFjZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gcGFuZWwuY2xhc3NlZCgnbGF5ZXJzLWFjdGl2ZScpXG5cdCAgICAgICAgdmFyIGxheWVyTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXllci1saXN0Jyk7XG5cdCAgICAgICAgbmV3SGVpZ2h0ID0gaGVhZGVyLnNjcm9sbEhlaWdodCArIGxheWVyTGlzdC5zY3JvbGxIZWlnaHQ7XG5cdCAgICB9XG5cdCAgICBuZXdIZWlnaHQgPSBuZXdIZWlnaHQgPiBwYW5lbE9mZnNldEhlaWdodCA/IFwiXCIgKyBuZXdIZWlnaHQgKyAncHgnIDogbnVsbDtcblx0ICAgIHBhbmVsRHJhZ092ZXJsYXkuc3R5bGUuaGVpZ2h0ID0gbmV3SGVpZ2h0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVQYW5lbFdpZHRoKCkge1xuXHQgICAgdmFyIHBhbmVsID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwnKTtcblx0ICAgIHZhciBwYW5lbE1pbldpZHRoID0gK3BhbmVsLnN0eWxlKCdtaW4td2lkdGgnKS5zbGljZSgwLCAtMik7XG5cdCAgICB2YXIgcGFuZWxDbGllbnRXaWR0aCA9IHBhbmVsLnByb3BlcnR5KCdjbGllbnRXaWR0aCcpO1xuXHRcblx0ICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyYXBwZXInKTtcblx0ICAgIHZhciB3cmFwcGVyV2lkdGggPSB3cmFwcGVyLmNsaWVudFdpZHRoO1xuXHRcblx0ICAgIHZhciBtYXBXcmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcC13cmFwcGVyJyk7XG5cdFxuXHQgICAgdmFyIG1vdXNlWCA9IGQzLmV2ZW50LnNvdXJjZUV2ZW50Lng7XG5cdCAgICB2YXIgeERlbHRhID0gd3JhcHBlcldpZHRoIC0gbW91c2VYIC0gcGFuZWxDbGllbnRXaWR0aDtcblx0XG5cdCAgICB2YXIgbmV3UGFuZWxXaWR0aCA9IHBhbmVsQ2xpZW50V2lkdGggKyB4RGVsdGE7XG5cdCAgICBuZXdQYW5lbFdpZHRoID0gbmV3UGFuZWxXaWR0aCA8IHBhbmVsTWluV2lkdGggPyBwYW5lbE1pbldpZHRoIDogbmV3UGFuZWxXaWR0aCA+IHdyYXBwZXJXaWR0aCA/IHdyYXBwZXJXaWR0aCA6IG5ld1BhbmVsV2lkdGg7XG5cdCAgICBtYXBXcmFwcGVyLnN0eWxlLnBhZGRpbmdSaWdodCA9IFwiXCIgKyBuZXdQYW5lbFdpZHRoICsgJ3B4Jztcblx0ICAgIHBhbmVsLnN0eWxlKCd3aWR0aCcsIFwiXCIgKyBuZXdQYW5lbFdpZHRoICsgJ3B4Jyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYXllckdyb3VwcyhsYXlvdXQpIHtcblx0ICAgIHJldHVybiBkMy5zZWxlY3QoJyNsYXllci1saXN0Jykuc2VsZWN0QWxsKCcubGF5ZXItZ3JvdXAtd3JhcHBlcicpLmRhdGEobGF5b3V0KS5lbnRlcigpLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAtd3JhcHBlcicpLmF0dHIoJ2lkJywgZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXJHcm91cC5pZDtcblx0ICAgIH0pLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyR3JvdXAuYWN0aXZlO1xuXHQgICAgfSkuZWFjaChmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwLWJ0biBidG4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgICAgICBsYXllckdyb3VwLmFjdGl2ZSA9ICFsYXllckdyb3VwLmFjdGl2ZTtcblx0ICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMucGFyZW50Tm9kZSkuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGxheWVyR3JvdXAuYWN0aXZlO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpO1xuXHQgICAgICAgIH0pLnRleHQobGF5ZXJHcm91cC5uYW1lKTtcblx0ICAgIH0pLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyRWxlbXMobGF5ZXJHcm91cHMsIGxheWVycykge1xuXHQgICAgbGF5ZXJHcm91cHMuc2VsZWN0QWxsKCcubGF5ZXItc2VsZWN0JykuZGF0YShmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgIHJldHVybiBsYXllcnNbbGF5ZXJHcm91cC5pZF07XG5cdCAgICB9KS5lbnRlcigpLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItc2VsZWN0JykuZWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICB2YXIgZ3JvdXBOYW1lID0gdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWQ7XG5cdCAgICAgICAgdmFyIGxheWVyRGl2ID0gZDMuc2VsZWN0KHRoaXMpO1xuXHQgICAgICAgIG1ha2VDaGVja2JveChsYXllciwgbGF5ZXJEaXYpO1xuXHQgICAgICAgIG1ha2VMYWJlbChsYXllciwgbGF5ZXJEaXYpO1xuXHQgICAgICAgIG1ha2VEZXNjcmlwdGlvbihsYXllciwgbGF5ZXJEaXYpO1xuXHQgICAgICAgIGxheWVyRGl2Lm5vZGUoKS5hcHBlbmRDaGlsZChtYWtlTGF5ZXJUb29scyhsYXllcikpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VDaGVja2JveChsYXllciwgbGF5ZXJEaXYpIHtcblx0ICAgIGxheWVyRGl2LmFwcGVuZCgnaW5wdXQnKS5hdHRyKCd0eXBlJywgJ2NoZWNrYm94JykuYXR0cignaWQnLCBmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXIuaWQ7XG5cdCAgICB9KS5hdHRyKCdjaGVja2VkJywgZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyLmFjdGl2ZSA/ICdjaGVja2VkJyA6IG51bGw7XG5cdCAgICB9KS5vbignY2xpY2snLCBmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICAoMCwgX2xheWVyLnRvZ2dsZUxheWVyKShsYXllcik7XG5cdCAgICAgICAgbGF5ZXJEaXYuc2VsZWN0KCcubGF5ZXItdG9vbHMtd3JhcHBlcicpLmNsYXNzZWQoJ2FjdGl2ZScsIGxheWVyLmFjdGl2ZSk7XG5cdCAgICAgICAgaWYgKGxheWVyLmFjdGl2ZSkgKDAsIF9vcGFjaXR5U2xpZGVyLnNldFNsaWRlckluaXRpYWxQb3MpKGxheWVyLCBsYXllckRpdik7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxhYmVsKGxheWVyLCBsYXllckRpdikge1xuXHQgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1sYWJlbC13cmFwcGVyJykuYXBwZW5kKCdsYWJlbCcpLmF0dHIoJ2ZvcicsIGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHJldHVybiBsYXllci5pZDtcblx0ICAgIH0pLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWxhYmVsJykuaHRtbChmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXIubmFtZTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlRGVzY3JpcHRpb24obGF5ZXIsIGxheWVyRGl2KSB7XG5cdCAgICBpZiAobGF5ZXIuaW5mbyAmJiBsYXllci5pbmZvICE9PSAnJykge1xuXHQgICAgICAgIGxheWVyRGl2LmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby1idG4nKS50ZXh0KCcoPyknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLnBhcmVudE5vZGUpLnNlbGVjdCgnLmxheWVyLWluZm8td3JhcHBlcicpLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiAhZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ2FjdGl2ZScpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1pbmZvLXdyYXBwZXInKS50ZXh0KGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgICAgICByZXR1cm4gbGF5ZXIuaW5mbztcblx0ICAgICAgICB9KTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyVG9vbHMobGF5ZXIsIGxheWVyRGl2KSB7XG5cdCAgICB2YXIgbGF5ZXJUb29sc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgbGF5ZXJUb29sc0Rpdi5jbGFzc0xpc3QuYWRkKCdsYXllci10b29scy13cmFwcGVyJyk7XG5cdCAgICBpZiAobGF5ZXIuYWN0aXZlKSBsYXllclRvb2xzRGl2LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXHRcblx0ICAgIHZhciBvcGFjaXR5U2xpZGVyID0gKDAsIF9vcGFjaXR5U2xpZGVyLm1ha2VPcGFjaXR5U2xpZGVyKShsYXllcik7XG5cdCAgICB2YXIgbGVnZW5kID0gbWFrZUxlZ2VuZChsYXllcik7XG5cdFxuXHQgICAgbGF5ZXJUb29sc0Rpdi5hcHBlbmRDaGlsZChvcGFjaXR5U2xpZGVyKTtcblx0ICAgIGxheWVyVG9vbHNEaXYuYXBwZW5kQ2hpbGQobGVnZW5kKTtcblx0XG5cdCAgICByZXR1cm4gbGF5ZXJUb29sc0Rpdjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxlZ2VuZChsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIpIHtcblx0ICAgIHZhciBsZWdlbmRXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICB2YXIgbGVnZW5kSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cdCAgICBsZWdlbmRXcmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2xlZ2VuZC13cmFwcGVyJyk7XG5cdCAgICBsZWdlbmRJbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBsYXllci5sZWdlbmQpO1xuXHQgICAgbGVnZW5kV3JhcHBlci5hcHBlbmRDaGlsZChsZWdlbmRJbWcpO1xuXHQgICAgcmV0dXJuIGxlZ2VuZFdyYXBwZXI7XG5cdH1cblxuLyoqKi8gfSksXG4vKiAyMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5HZXRDdXJyZW50TGF5ZXJzID0gR2V0Q3VycmVudExheWVycztcblx0ZXhwb3J0cy5DcmVhdGVEZWZhdWx0TGF5ZXJzID0gQ3JlYXRlRGVmYXVsdExheWVycztcblx0ZXhwb3J0cy50b2dnbGVMYXllciA9IHRvZ2dsZUxheWVyO1xuXHRleHBvcnRzLmVuYWJsZUxheWVyID0gZW5hYmxlTGF5ZXI7XG5cdGV4cG9ydHMuZGlzYWJsZUxheWVyID0gZGlzYWJsZUxheWVyO1xuXHRleHBvcnRzLnVwZGF0ZUxheWVyT3BhY2l0eSA9IHVwZGF0ZUxheWVyT3BhY2l0eTtcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHQvKipcblx0ICogTmVlZGVkIGZvciB0aGUgc2hhcmUgdXJsIHNpbmNlIExlYWZsZXQgZG9lcyBub3QgaGF2ZSBhIGRlZmF1bHQgd2F5IHRvIHN1cmZhY2Vcblx0ICogdGhlIG9yZGVyIG9mIGxheWVycyBpbiB0aGUgbWFwXG5cdCAqL1xuXHR2YXIgX2N1cnJlbnRfbGF5ZXJzID0gW107XG5cdHZhciBfY3VycmVudF9sYXllcnNfb2JqZWN0cyA9IFtdO1xuXHRcblx0LyoqXG5cdCAqIE5vdGU6IGxheWVyIGlzIG5vdCB0aGUgbGVhZmxldCBjb25jZXB0IG9mIGEgbGF5ZXIsIGJ1dCByYXRoZXIgdGhlIGludGVybmFsXG5cdCAqICAgICAgIG9iamVjdCB3aGljaCB0cmFja3MgdGhlbS4gbGF5ZXIubWFwTGF5ZXIgaXMgdGhlIHBvaW50ZXIgdG8gdGhlXG5cdCAqICAgICAgIGxlYWZsZXQgbGF5ZXIuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gR2V0Q3VycmVudExheWVycygpIHtcblx0ICAgIHJldHVybiBfY3VycmVudF9sYXllcnM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIENyZWF0ZURlZmF1bHRMYXllcnMobGF5ZXJzLCBkZWZhdWx0TGF5ZXJzKSB7XG5cdCAgICB2YXIgaSwgaiwgcHJvcCwgbGF5ZXJncm91cDtcblx0ICAgIHZhciBkZWZhdWx0TGF5ZXI7XG5cdCAgICB2YXIgZm91bmRMYXllcjtcblx0XG5cdCAgICBpZiAoIWRlZmF1bHRMYXllcnMgfHwgZGVmYXVsdExheWVycy5sZW5ndGggPT09IDApIHJldHVybjtcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgZGVmYXVsdExheWVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGZvdW5kTGF5ZXIgPSBmYWxzZTtcblx0ICAgICAgICBkZWZhdWx0TGF5ZXIgPSBkZWZhdWx0TGF5ZXJzW2ldO1xuXHQgICAgICAgIGZvciAocHJvcCBpbiBsYXllcnMpIHtcblx0ICAgICAgICAgICAgaWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcblx0ICAgICAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcblx0ICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGxheWVyZ3JvdXAubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgICAgICAgIGlmIChsYXllcmdyb3VwW2pdLmlkID09PSBkZWZhdWx0TGF5ZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICBlbmFibGVMYXllcihsYXllcmdyb3VwW2pdKTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3VuZExheWVyID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoZm91bmRMYXllcikgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b2dnbGVMYXllcihsYXllcikge1xuXHQgICAgaWYgKCFsYXllci5hY3RpdmUpIHtcblx0ICAgICAgICBlbmFibGVMYXllcihsYXllcik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIGRpc2FibGVMYXllcihsYXllcik7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGVuYWJsZUxheWVyKGxheWVyKSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIGxheWVyLmFjdGl2ZSA9IHRydWU7XG5cdCAgICBsYXllci5tYXBMYXllciA9IGxheWVyLm1hcExheWVyIHx8IG1ha2VXbXNUaWxlTGF5ZXIobGF5ZXIpO1xuXHQgICAgbWFwLmFkZExheWVyKGxheWVyLm1hcExheWVyKTtcblx0ICAgIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xuXHQgICAgbW92ZU92ZXJsYXlMYXllcnNUb1RvcCgpO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbW92ZU92ZXJsYXlMYXllcnNUb1RvcCgpIHtcblx0ICAgIHZhciBsYXllcjtcblx0ICAgIHZhciBpLCBsO1xuXHRcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBfY3VycmVudF9sYXllcnNfb2JqZWN0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBsYXllciA9IF9jdXJyZW50X2xheWVyc19vYmplY3RzW2ldO1xuXHQgICAgICAgIGlmIChsYXllci50eXBlID09PSBcIm92ZXJsYXlcIikgbGF5ZXIubWFwTGF5ZXIuYnJpbmdUb0Zyb250KCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIobGF5ZXIpIHtcblx0ICAgIF9jdXJyZW50X2xheWVycy5wdXNoKGxheWVyLmlkKTtcblx0ICAgIF9jdXJyZW50X2xheWVyc19vYmplY3RzLnB1c2gobGF5ZXIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkaXNhYmxlTGF5ZXIobGF5ZXIpIHtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHQgICAgbGF5ZXIuYWN0aXZlID0gZmFsc2U7XG5cdCAgICBpZiAobGF5ZXIubWFwTGF5ZXIgJiYgbWFwLmhhc0xheWVyKGxheWVyLm1hcExheWVyKSkge1xuXHQgICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllci5tYXBMYXllcik7XG5cdCAgICB9XG5cdCAgICByZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlTGF5ZXJGcm9tSW50ZXJuYWxUcmFja2VyKGxheWVyKSB7XG5cdCAgICB2YXIgbG9jID0gX2N1cnJlbnRfbGF5ZXJzLmluZGV4T2YobGF5ZXIuaWQpO1xuXHQgICAgaWYgKGxvYyA9PT0gLTEpIHJldHVybjtcblx0ICAgIF9jdXJyZW50X2xheWVycy5zcGxpY2UobG9jLCAxKTtcblx0ICAgIF9jdXJyZW50X2xheWVyc19vYmplY3RzLnNwbGljZShsb2MsIDEpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVMYXllck9wYWNpdHkobGF5ZXIsIG5ld09wYWNpdHkpIHtcblx0ICAgIGxheWVyLm9wYWNpdHkgPSBuZXdPcGFjaXR5O1xuXHQgICAgbGF5ZXIubWFwTGF5ZXIuc2V0T3BhY2l0eShuZXdPcGFjaXR5KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVdtc1RpbGVMYXllcihsYXllcikge1xuXHQgICAgcmV0dXJuIEwudGlsZUxheWVyLndtcyhsYXllci51cmwsIHtcblx0ICAgICAgICBsYXllcnM6IGxheWVyLmlkLFxuXHQgICAgICAgIHRyYW5zcGFyZW50OiBsYXllci50cmFuc3BhcmVudCB8fCB0cnVlLFxuXHQgICAgICAgIHZlcnNpb246IGxheWVyLnZlcnNpb24gfHwgJzEuMy4wJyxcblx0ICAgICAgICBjcnM6IGxheWVyLmNycyB8fCBMLkNSUy5FUFNHOTAwOTEzLFxuXHQgICAgICAgIGZvcm1hdDogbGF5ZXIuZm9ybWF0IHx8ICdpbWFnZS9wbmcnLFxuXHQgICAgICAgIG9wYWNpdHk6IGxheWVyLm9wYWNpdHkgfHwgMS4wLFxuXHQgICAgICAgIHRpbGVTaXplOiBsYXllci50aWxlU2l6ZSB8fCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcFwiKS5jbGllbnRXaWR0aFxuXHQgICAgfSk7XG5cdH1cblxuLyoqKi8gfSksXG4vKiAyNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5DcmVhdGVNYXAgPSBDcmVhdGVNYXA7XG5cdGV4cG9ydHMuR2V0TWFwID0gR2V0TWFwO1xuXHR2YXIgbWFwO1xuXHRcblx0ZnVuY3Rpb24gQ3JlYXRlTWFwKG1hcENvbmZpZykge1xuXHQgICAgdmFyIGlkID0gbWFwQ29uZmlnLmlkIHx8IFwibWFwXCI7XG5cdCAgICB2YXIgb3B0aW9ucyA9IG1hcENvbmZpZy5vcHRpb25zIHx8IHsgXCJzY3JvbGxXaGVlbFpvb21cIjogZmFsc2UgfTtcblx0ICAgIHZhciBpbml0aWFsQ2VudGVyID0gbWFwQ29uZmlnLmNlbnRlciB8fCBbXCIzOC41XCIsIFwiLTgxXCJdO1xuXHQgICAgdmFyIGluaXRpYWxab29tID0gbWFwQ29uZmlnLnpvb20gfHwgNjtcblx0XG5cdCAgICBtYXAgPSBMLm1hcChpZCwgb3B0aW9ucykuc2V0Vmlldyhpbml0aWFsQ2VudGVyLCBpbml0aWFsWm9vbSk7XG5cdCAgICBMLmNvbnRyb2wuYXR0cmlidXRpb24oKS5hZGRUbyhtYXApO1xuXHQgICAgcmV0dXJuIG1hcDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gR2V0TWFwKCkge1xuXHQgICAgcmV0dXJuIG1hcDtcblx0fVxuXG4vKioqLyB9KSxcbi8qIDI1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5CaW5kVXBkYXRlU2hhcmVVcmwgPSBCaW5kVXBkYXRlU2hhcmVVcmw7XG5cdGV4cG9ydHMudXBkYXRlU2hhcmVVcmwgPSB1cGRhdGVTaGFyZVVybDtcblx0ZXhwb3J0cy5BZGRTaGFyZVNldHRpbmdzVG9Db25maWcgPSBBZGRTaGFyZVNldHRpbmdzVG9Db25maWc7XG5cdGV4cG9ydHMuQmluZENvcHlMaW5rRXZlbnRzID0gQmluZENvcHlMaW5rRXZlbnRzO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfYmFzZWxheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdFxuXHR2YXIgX2xheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHR2YXIgX3BvaSA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHRcblx0ZnVuY3Rpb24gQmluZFVwZGF0ZVNoYXJlVXJsKG1hcCkge1xuXHQgICAgbWFwLm9uKFwibW92ZWVuZFwiLCB1cGRhdGVTaGFyZVVybCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZVNoYXJlVXJsKGUpIHtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHQgICAgdmFyIHBhcmFtcyA9IFttYWtlQ2VudGVyU3RyaW5nKG1hcCksIG1ha2Vab29tU3RyaW5nKG1hcCksIG1ha2VMYXllclN0cmluZyhtYXApLCBtYWtlQmFzZUxheWVyU3RyaW5nKG1hcCksIG1ha2VQb2ludHNPZkludGVyZXN0U3RyaW5nKCksIG1ha2VBY3RpdmVUYWJTdHJpbmcoKSwgbWFrZUFjdGl2ZUdyYXBoVGFiU3RyaW5nKCldO1xuXHRcblx0ICAgIHNldFNoYXJlVXJsKG1ha2VTaGFyZVVybChwYXJhbXMpKTtcblx0ICAgIHNldENvcHlMaW5rVXJsKCk7XG5cdCAgICBzZXRTb2NpYWxVcmxzKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZyhjb25maWcpIHtcblx0ICAgIHZhciBzaGFyZSA9IHBhcnNlU2hhcmVVcmwoKTtcblx0ICAgIGlmICghc2hhcmUpIHJldHVybjtcblx0ICAgIGlmIChzaGFyZS5jZW50ZXIpIGNvbmZpZy5tYXAuY2VudGVyID0gc2hhcmUuY2VudGVyO1xuXHQgICAgaWYgKHNoYXJlLnpvb20pIGNvbmZpZy5tYXAuem9vbSA9IHNoYXJlLnpvb207XG5cdCAgICBpZiAoc2hhcmUubGF5ZXJzKSBhZGRMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmUubGF5ZXJzLCBjb25maWcpO1xuXHQgICAgaWYgKHNoYXJlLmJhc2VsYXllcnMpIGFkZEJhc2VMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmUuYmFzZWxheWVycywgY29uZmlnKTtcblx0ICAgIGlmIChzaGFyZS5wb2lzKSBhZGRQb2ludHNPZkludGVyZXN0VG9Db25maWcoc2hhcmUucG9pcywgY29uZmlnKTtcblx0ICAgIGlmIChzaGFyZS50YWIpIGNvbmZpZy50YWIgPSBzaGFyZS50YWI7XG5cdCAgICBpZiAoc2hhcmUuZ3JhcGgpIGNvbmZpZy5ncmFwaCA9IHNoYXJlLmdyYXBoO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlU2hhcmVVcmwocGFyYW1zKSB7XG5cdCAgICByZXR1cm4gXCI/XCIgKyBwYXJhbXMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7XG5cdCAgICAgICAgcmV0dXJuIHAgIT09IHVuZGVmaW5lZDtcblx0ICAgIH0pLmpvaW4oXCImXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRTaGFyZVVybCh1cmwpIHtcblx0ICAgIGlmICh3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcblx0ICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIFwiXCIsIHVybCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldENvcHlMaW5rVXJsKCkge1xuXHQgICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCB1cmwpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBCaW5kQ29weUxpbmtFdmVudHMoKSB7XG5cdCAgICBkMy5zZWxlY3QoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgaGFuZGxlQm9keUNsaWNrKTtcblx0ICAgIGQzLnNlbGVjdChcIi5zaGFyZXVybC1saW5rIGFcIikub24oXCJjbGlja1wiLCBoYW5kbGVTaGFyZUxpbmtCdXR0b25DbGljayk7XG5cdCAgICBkMy5zZWxlY3QoXCIuc2hhcmV1cmwtbGluay11cmxcIikub24oXCJjbGlja1wiLCBoYW5kbGVTaGFyZUxpbmtVcmxDbGljayk7XG5cdCAgICBkMy5zZWxlY3QoXCIuc2hhcmV1cmwtbGluay1wb3B1cC1yZW1vdmVyXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlU2hhcmVMaW5rQ2xvc2VCdXR0b25DbGljayk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTaG91bGQgY2xvc2UgdGhlIGNvcHkgbGluayBwb3B1cCBpZiBpdCBpcyBhY3RpdmUgYW5kIGlmIHlvdSBjbGljayBvbiBhbnkgZWxlbWVudFxuXHQgKiB0aGF0IGlzIG5vdCB0aGUgcG9wdXAgb3IgaXRzIGNoaWxkcmVuLlxuXHQgKi9cblx0ZnVuY3Rpb24gaGFuZGxlQm9keUNsaWNrKCkge1xuXHQgICAgdmFyIGV2ZW50ID0gZDMuZXZlbnQ7XG5cdCAgICB2YXIgcGFyZW50cyA9IFtdO1xuXHQgICAgaWYgKGV2ZW50LnBhdGgpIHtcblx0ICAgICAgICBwYXJlbnRzID0gZXZlbnQucGF0aDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcGFyZW50cyA9IGdldERvbVBhdGgoZXZlbnQuc3JjRWxlbWVudCk7XG5cdCAgICB9XG5cdCAgICB2YXIgY2xpY2tlZEluUG9wdXAgPSBmYWxzZTtcblx0ICAgIHZhciBpLCBsO1xuXHRcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBwYXJlbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGlmIChwYXJlbnRzW2ldLmNsYXNzTmFtZSAmJiB0eXBlb2YgcGFyZW50c1tpXS5jbGFzc05hbWUgPT09IFwic3RyaW5nXCIgJiYgcGFyZW50c1tpXS5jbGFzc05hbWUuaW5kZXhPZihcInNoYXJldXJsLWxpbmtcIikgIT09IC0xKSB7XG5cdCAgICAgICAgICAgIGNsaWNrZWRJblBvcHVwID0gdHJ1ZTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmICghY2xpY2tlZEluUG9wdXApIHtcblx0ICAgICAgICBoYW5kbGVDb3B5TGlua0Nsb3NlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldERvbVBhdGgobm9kZSkge1xuXHQgICAgdmFyIHBhdGggPSBbXTtcblx0ICAgIHdoaWxlIChub2RlKSB7XG5cdCAgICAgICAgcGF0aC5wdXNoKG5vZGUpO1xuXHQgICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcGF0aDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlU2hhcmVMaW5rQnV0dG9uQ2xpY2soKSB7XG5cdCAgICBkMy5zZWxlY3QoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNoYXJldXJsLWxpbmstcG9wdXBcIilbMF0pLmNsYXNzZWQoXCJhY3RpdmVcIikgPyBoYW5kbGVDb3B5TGlua0Nsb3NlKCkgOiBoYW5kbGVDb3B5TGlua09wZW4oKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlU2hhcmVMaW5rQ2xvc2VCdXR0b25DbGljaygpIHtcblx0ICAgIGhhbmRsZUNvcHlMaW5rQ2xvc2UoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlU2hhcmVMaW5rVXJsQ2xpY2soKSB7XG5cdCAgICBzZWxlY3RDb3B5TGlua1VybCgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVDb3B5TGlua09wZW4oKSB7XG5cdCAgICBkMy5zZWxlY3QoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNoYXJldXJsLWxpbmstcG9wdXBcIilbMF0pLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cdCAgICBzZWxlY3RDb3B5TGlua1VybCgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVDb3B5TGlua0Nsb3NlKCkge1xuXHQgICAgZDMuc2VsZWN0KGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaGFyZXVybC1saW5rLXBvcHVwXCIpWzBdKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGZhbHNlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2VsZWN0Q29weUxpbmtVcmwoKSB7XG5cdCAgICB2YXIgc2hhcmVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hhcmV1cmwtbGluay11cmxcIik7XG5cdCAgICBzaGFyZUlucHV0LmZvY3VzKCk7XG5cdCAgICBzaGFyZUlucHV0LnNldFNlbGVjdGlvblJhbmdlKDAsIHNoYXJlSW5wdXQudmFsdWUubGVuZ3RoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0U29jaWFsVXJscygpIHtcblx0ICAgIHZhciB1cmwgPSBtYW5nbGVQYXJhbVN0cmluZyh3aW5kb3cubG9jYXRpb24uaHJlZik7XG5cdCAgICB2YXIgc29jaWFsTGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2hhcmV1cmwtc29jaWFsXCIpO1xuXHQgICAgdmFyIHNvY2lhbExpbms7XG5cdCAgICB2YXIgbmV3VXJsO1xuXHQgICAgdmFyIGksIGw7XG5cdFxuXHQgICAgZm9yIChpID0gMCwgbCA9IHNvY2lhbExpbmtzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHNvY2lhbExpbmsgPSBzb2NpYWxMaW5rc1tpXTtcblx0ICAgICAgICBuZXdVcmwgPSBzb2NpYWxMaW5rLmdldEF0dHJpYnV0ZShcImRhdGEtYmFzZXVybFwiKSArIHVybDtcblx0ICAgICAgICBzb2NpYWxMaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgbmV3VXJsKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUNlbnRlclN0cmluZyhtYXApIHtcblx0ICAgIHZhciBjZW50ZXIgPSBtYXAuZ2V0Q2VudGVyKCk7XG5cdCAgICByZXR1cm4gXCJjZW50ZXI9XCIgKyBjZW50ZXIubGF0LnRvU3RyaW5nKCkgKyBcIixcIiArIGNlbnRlci5sbmcudG9TdHJpbmcoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVpvb21TdHJpbmcobWFwKSB7XG5cdCAgICByZXR1cm4gXCJ6b29tPVwiICsgbWFwLmdldFpvb20oKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyU3RyaW5nKG1hcCkge1xuXHQgICAgdmFyIGxheWVycyA9IFtdO1xuXHQgICAgdmFyIG9wYWNpdHlWYWxzID0ge307XG5cdCAgICB2YXIgY3VycmVudExheWVycyA9ICgwLCBfbGF5ZXIuR2V0Q3VycmVudExheWVycykoKTtcblx0XG5cdCAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHZhciBvcHRpb25zID0gbGF5ZXIub3B0aW9ucztcblx0ICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxheWVycykge1xuXHQgICAgICAgICAgICBvcGFjaXR5VmFsc1tvcHRpb25zLmxheWVyc10gPSBvcHRpb25zLmhhc093blByb3BlcnR5KFwib3BhY2l0eVwiKSA/IG9wdGlvbnMub3BhY2l0eSA6IFwiMVwiO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciBjdXJyZW50TGF5ZXI7XG5cdCAgICB2YXIgaTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBjdXJyZW50TGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgY3VycmVudExheWVyID0gY3VycmVudExheWVyc1tpXTtcblx0ICAgICAgICBsYXllcnMucHVzaChjdXJyZW50TGF5ZXIpO1xuXHQgICAgICAgIGxheWVycy5wdXNoKG9wYWNpdHlWYWxzW2N1cnJlbnRMYXllcl0pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIFwibGF5ZXJzPVwiICsgbGF5ZXJzLmpvaW4oXCIsXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlQmFzZUxheWVyU3RyaW5nKG1hcCkge1xuXHQgICAgdmFyIGxheWVycyA9IFtdO1xuXHQgICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICBpZiAobGF5ZXIub3B0aW9ucyAmJiBsYXllci5vcHRpb25zLnR5cGUgPT09IF9iYXNlbGF5ZXIuQkFTRV9MQVlFUl9UWVBFKSB7XG5cdCAgICAgICAgICAgIGxheWVycy5wdXNoKGxheWVyLm9wdGlvbnMuaWQpO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIFwiYmFzZWxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVBvaW50c09mSW50ZXJlc3RTdHJpbmcoKSB7XG5cdCAgICB2YXIgcG9pcyA9ICgwLCBfcG9pLkdldEFsbFBvaW50c09mSW50ZXJlc3QpKCk7XG5cdCAgICBpZiAoIXBvaXMubGVuZ3RoKSByZXR1cm47XG5cdCAgICB2YXIgcG9pU3RyaW5nID0gXCJwb2lzPVwiO1xuXHQgICAgcG9pcy5mb3JFYWNoKGZ1bmN0aW9uIChwb2kpIHtcblx0ICAgICAgICBwb2lTdHJpbmcgKz0gcG9pLmxhdCArICcsJyArIHBvaS5sbmcgKyAnOyc7XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBwb2lTdHJpbmc7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VBY3RpdmVUYWJTdHJpbmcoKSB7XG5cdCAgICByZXR1cm4gXCJ0YWI9XCIgKyBkMy5zZWxlY3QoXCIucGFuZWwtdG9wLWJ0bi5hY3RpdmVcIikuYXR0cihcImRhdGEtYWN0aXZlXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlQWN0aXZlR3JhcGhUYWJTdHJpbmcoKSB7XG5cdCAgICByZXR1cm4gXCJncmFwaD1cIiArIGQzLnNlbGVjdChcIi5ncmFwaC10eXBlLWJ0bi5hY3RpdmVcIikuYXR0cihcImRhdGEtdHlwZVwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGFyc2VTaGFyZVVybCgpIHtcblx0ICAgIHZhciBwYXJhbXMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xuXHQgICAgaWYgKHBhcmFtcyA9PT0gXCJcIikgcmV0dXJuO1xuXHRcblx0ICAgIHBhcmFtcyA9IGdldFBhcmFtc0FycmF5KHBhcmFtcyk7XG5cdCAgICBwYXJhbXMgPSBtYWtlS2V5ZWRQYXJhbXNPYmplY3QocGFyYW1zKTtcblx0XG5cdCAgICBmb3JtYXRQYXJhbXMocGFyYW1zKTtcblx0ICAgIHJldHVybiBwYXJhbXM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldFBhcmFtc0FycmF5KHBhcmFtcykge1xuXHQgICAgcGFyYW1zID0gcGFyYW1zLnN1YnN0cmluZygxKTtcblx0ICAgIHBhcmFtcyA9IHVubWFuZ2xlUGFyYW1TdHJpbmcocGFyYW1zKTtcblx0ICAgIHJldHVybiBwYXJhbXMuc3BsaXQoXCImXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYW5nbGVQYXJhbVN0cmluZyh1cmwpIHtcblx0ICAgIHJldHVybiB1cmwucmVwbGFjZSgvXFw6L2csIFwiJTNBXCIpLnJlcGxhY2UoL1xcOy9nLCBcIiUzQlwiKS5yZXBsYWNlKC9cXC8vZywgXCIlMkZcIikucmVwbGFjZSgvXFwsL2csIFwiJTJDXCIpLnJlcGxhY2UoL1xcJi9nLCBcIiUyNlwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdW5tYW5nbGVQYXJhbVN0cmluZyhwYXJhbXMpIHtcblx0ICAgIHJldHVybiBwYXJhbXMucmVwbGFjZSgvXFwlMltjfENdL2csIFwiLFwiKS5yZXBsYWNlKC9cXCUzW2J8Ql0vZywgXCI7XCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlS2V5ZWRQYXJhbXNPYmplY3QocGFyYW1zQXJyKSB7XG5cdCAgICB2YXIgcGFyc2VkUGFyYW1zID0ge307XG5cdCAgICB2YXIgcGFyYW1QYWlyO1xuXHQgICAgdmFyIGk7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IHBhcmFtc0Fyci5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHBhcmFtUGFpciA9IHBhcmFtc0FycltpXS5zcGxpdChcIj1cIik7XG5cdCAgICAgICAgcGFyc2VkUGFyYW1zW3BhcmFtUGFpclswXV0gPSBwYXJhbVBhaXJbMV07XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHBhcnNlZFBhcmFtcztcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0UGFyYW1zKHBhcmFtcykge1xuXHQgICAgaWYgKHBhcmFtcy5jZW50ZXIpIHBhcmFtcy5jZW50ZXIgPSBmb3JtYXRDZW50ZXJQYXJhbShwYXJhbXMuY2VudGVyKTtcblx0ICAgIGlmIChwYXJhbXMubGF5ZXJzKSBwYXJhbXMubGF5ZXJzID0gZm9ybWF0TGF5ZXJQYXJhbShwYXJhbXMubGF5ZXJzKTtcblx0ICAgIGlmIChwYXJhbXMuYmFzZWxheWVycykgcGFyYW1zLmJhc2VsYXllcnMgPSBmb3JtYXRCYXNlTGF5ZXJQYXJhbShwYXJhbXMuYmFzZWxheWVycyk7XG5cdCAgICBpZiAocGFyYW1zLnBvaXMpIHBhcmFtcy5wb2lzID0gZm9ybWF0UG9pbnRzT2ZJbnRlcmVzdFBhcmFtKHBhcmFtcy5wb2lzKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0Q2VudGVyUGFyYW0oY2VudGVyKSB7XG5cdCAgICByZXR1cm4gY2VudGVyLnNwbGl0KFwiLFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0TGF5ZXJQYXJhbShsYXllcnMpIHtcblx0ICAgIHZhciBmb3JtYXR0ZWRMYXllcnMgPSB7XG5cdCAgICAgICAgXCJlbmFibGVkTGF5ZXJzXCI6IFtdLFxuXHQgICAgICAgIFwib3BhY2l0eVZhbHNcIjoge31cblx0ICAgIH07XG5cdCAgICB2YXIgbGF5ZXJJZDtcblx0ICAgIHZhciBpO1xuXHRcblx0ICAgIGxheWVycyA9IGxheWVycy5zcGxpdChcIixcIik7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGF5ZXJzLmxlbmd0aDsgaSA9IGkgKyAyKSB7XG5cdCAgICAgICAgbGF5ZXJJZCA9IGxheWVyc1tpXTtcblx0ICAgICAgICBmb3JtYXR0ZWRMYXllcnMuZW5hYmxlZExheWVycy5wdXNoKGxheWVySWQpO1xuXHQgICAgICAgIGZvcm1hdHRlZExheWVycy5vcGFjaXR5VmFsc1tsYXllcklkXSA9IGxheWVyc1tpICsgMV07XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGZvcm1hdHRlZExheWVycztcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0QmFzZUxheWVyUGFyYW0oYmFzZWxheWVycykge1xuXHQgICAgcmV0dXJuIGJhc2VsYXllcnMuc3BsaXQoXCIsXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRQb2ludHNPZkludGVyZXN0UGFyYW0ocG9pcykge1xuXHQgICAgcmV0dXJuIHBvaXMuc3BsaXQoJzsnKS5maWx0ZXIoZnVuY3Rpb24gKHN0cikge1xuXHQgICAgICAgIHJldHVybiBzdHIgIT09ICcnO1xuXHQgICAgfSkubWFwKGZ1bmN0aW9uIChwb2kpIHtcblx0ICAgICAgICBwb2kgPSBwb2kuc3BsaXQoJywnKTtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICBsYXQ6IHBvaVswXSxcblx0ICAgICAgICAgICAgbG5nOiBwb2lbMV1cblx0ICAgICAgICB9O1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZUxheWVyU2V0dGluZ3MsIGNvbmZpZykge1xuXHQgICAgdmFyIGVuYWJsZWRMYXllcnMgPSBzaGFyZUxheWVyU2V0dGluZ3MuZW5hYmxlZExheWVycztcblx0ICAgIGNvbmZpZ1tcImFjdGl2ZS1sYXllcnNcIl0gPSBlbmFibGVkTGF5ZXJzO1xuXHRcblx0ICAgIHZhciBpLCBqLCBwcm9wLCBsYXllcmdyb3VwO1xuXHQgICAgdmFyIGVuYWJsZWRMYXllcjtcblx0ICAgIHZhciBmb3VuZExheWVyO1xuXHQgICAgdmFyIGxheWVycyA9IGNvbmZpZy5sYXllcnM7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGVuYWJsZWRMYXllcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBmb3VuZExheWVyID0gZmFsc2U7XG5cdCAgICAgICAgZW5hYmxlZExheWVyID0gZW5hYmxlZExheWVyc1tpXTtcblx0ICAgICAgICBmb3IgKHByb3AgaW4gbGF5ZXJzKSB7XG5cdCAgICAgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG5cdCAgICAgICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XG5cdCAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsYXllcmdyb3VwLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZW5hYmxlZExheWVyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgbGF5ZXJncm91cFtqXS5vcGFjaXR5ID0gc2hhcmVMYXllclNldHRpbmdzLm9wYWNpdHlWYWxzW2VuYWJsZWRMYXllcl07XG5cdCAgICAgICAgICAgICAgICAgICAgZm91bmRMYXllciA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkQmFzZUxheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZUJhc2VMYXllclNldHRpbmdzLCBjb25maWcpIHtcblx0ICAgIHZhciBiYXNlbGF5ZXJzID0gY29uZmlnLmJhc2VsYXllcnM7XG5cdCAgICB2YXIgYmFzZWxheWVyO1xuXHQgICAgdmFyIGk7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGJhc2VsYXllcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBiYXNlbGF5ZXIgPSBiYXNlbGF5ZXJzW2ldO1xuXHQgICAgICAgIGJhc2VsYXllci5hY3RpdmUgPSBzaGFyZUJhc2VMYXllclNldHRpbmdzLmluZGV4T2YoYmFzZWxheWVyLmlkKSAhPT0gLTEgPyB0cnVlIDogZmFsc2U7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZFBvaW50c09mSW50ZXJlc3RUb0NvbmZpZyhwb2lzLCBjb25maWcpIHtcblx0ICAgIGNvbmZpZ1tcInBvaXNcIl0gPSBwb2lzO1xuXHR9XG5cbi8qKiovIH0pLFxuLyogMjYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQkFTRV9MQVlFUl9UWVBFID0gdW5kZWZpbmVkO1xuXHRleHBvcnRzLkNyZWF0ZUJhc2VMYXllcnMgPSBDcmVhdGVCYXNlTGF5ZXJzO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciBCQVNFX0xBWUVSX1RZUEUgPSBleHBvcnRzLkJBU0VfTEFZRVJfVFlQRSA9IFwiYmFzZWxheWVyXCI7XG5cdFxuXHR2YXIgX2Jhc2VsYXllcnM7XG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVCYXNlTGF5ZXJzKG1hcCwgbGF5ZXJDb25maWcpIHtcblx0ICAgIGxheWVyQ29uZmlnID0gbGF5ZXJDb25maWcgfHwgW3tcblx0ICAgICAgICBcImlkXCI6IFwiY2FydG8tbGlnaHQtZGVmYXVsdFwiLFxuXHQgICAgICAgIFwidXJsXCI6IFwiaHR0cDovL3tzfS5iYXNlbWFwcy5jYXJ0b2Nkbi5jb20vbGlnaHRfYWxsL3t6fS97eH0ve3l9LnBuZ1wiLFxuXHQgICAgICAgIFwiYXR0cmlidXRpb25cIjogJyZjb3B5OyA8YSBocmVmPVwiaHR0cDovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsICZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly9jYXJ0by5jb20vYXR0cmlidXRpb25zXCI+Q0FSVE88L2E+J1xuXHQgICAgfV07XG5cdFxuXHQgICAgX2Jhc2VsYXllcnMgPSBsYXllckNvbmZpZztcblx0ICAgIHZhciBpO1xuXHQgICAgdmFyIGJhc2VMYXllcjtcblx0ICAgIHZhciBjb25maWc7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGxheWVyQ29uZmlnLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgY29uZmlnID0gbGF5ZXJDb25maWdbaV07XG5cdFxuXHQgICAgICAgIGlmICghY29uZmlnLmFjdGl2ZSkgY29udGludWU7XG5cdCAgICAgICAgYmFzZUxheWVyID0gY3JlYXRlQmFzZUxheWVyKGNvbmZpZyk7XG5cdCAgICAgICAgY29uZmlnLmxheWVyID0gYmFzZUxheWVyO1xuXHQgICAgICAgIGJhc2VMYXllci5hZGRUbyhtYXApO1xuXHQgICAgfVxuXHRcblx0ICAgIGNyZWF0ZUJhc2VMYXllclVJKGxheWVyQ29uZmlnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQmFzZUxheWVyVUkoY29uZmlnKSB7XG5cdCAgICB2YXIgYmFzZVVJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0ICAgIGJhc2VVSS5jbGFzc05hbWUgPSBcImJhc2VsYXllci11aVwiO1xuXHQgICAgdmFyIGJhc2VXcmFwcGVyO1xuXHQgICAgdmFyIGJhc2VJbWc7XG5cdCAgICB2YXIgYmFzZUxhYmVsO1xuXHRcblx0ICAgIHZhciBsYXllcjtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gY29uZmlnLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGxheWVyID0gY29uZmlnW2ldO1xuXHQgICAgICAgIGlmICghbGF5ZXIuaGFzT3duUHJvcGVydHkoXCJpbWFnZVwiKSkgY29udGludWU7XG5cdFxuXHQgICAgICAgIGJhc2VXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0ICAgICAgICBiYXNlV3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJkYXRhLWxheWVyXCIsIGxheWVyLmlkKTtcblx0ICAgICAgICBiYXNlSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcblx0ICAgICAgICBiYXNlSW1nLnNldEF0dHJpYnV0ZShcInNyY1wiLCBsYXllci5pbWFnZSk7XG5cdCAgICAgICAgYmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgbGF5ZXIubGFiZWwpO1xuXHQgICAgICAgIGJhc2VJbWcuc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgbGF5ZXIubGFiZWwpO1xuXHQgICAgICAgIGJhc2VMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICAgICAgYmFzZUxhYmVsLnRleHRDb250ZW50ID0gbGF5ZXIubGFiZWw7XG5cdCAgICAgICAgYmFzZVdyYXBwZXIuYXBwZW5kQ2hpbGQoYmFzZUltZyk7XG5cdCAgICAgICAgYmFzZVdyYXBwZXIuYXBwZW5kQ2hpbGQoYmFzZUxhYmVsKTtcblx0ICAgICAgICBiYXNlV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQmFzZUNsaWNrKTtcblx0XG5cdCAgICAgICAgZDMuc2VsZWN0KGJhc2VXcmFwcGVyKS5jbGFzc2VkKFwiYmFzZS1zZWxlY3RvclwiLCB0cnVlKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGxheWVyLmFjdGl2ZSk7XG5cdFxuXHQgICAgICAgIGJhc2VVSS5hcHBlbmRDaGlsZChiYXNlV3JhcHBlcik7XG5cdCAgICB9XG5cdFxuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImxlYWZsZXQtYm90dG9tIGxlYWZsZXQtbGVmdFwiKVswXS5hcHBlbmRDaGlsZChiYXNlVUkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVCYXNlQ2xpY2soZSkge1xuXHQgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0ICAgIHZhciBsYXllcmlkID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWxheWVyXCIpO1xuXHQgICAgdG9nZ2xlQWN0aXZlQmFzZVVJKHRoaXMpO1xuXHQgICAgcmVtb3ZlQ3VycmVudEJhc2VMYXllcigpO1xuXHQgICAgYWRkTmV3QmFzZUxheWVyVG9NYXAobGF5ZXJpZCk7XG5cdCAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b2dnbGVBY3RpdmVCYXNlVUkoYmFzZVVJRWxlbSkge1xuXHQgICAgZDMuc2VsZWN0KFwiLmJhc2Utc2VsZWN0b3IuYWN0aXZlXCIpLmNsYXNzZWQoXCJhY3RpdmVcIiwgZmFsc2UpO1xuXHQgICAgZDMuc2VsZWN0KGJhc2VVSUVsZW0pLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZUN1cnJlbnRCYXNlTGF5ZXIoKSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMudHlwZSAhPT0gQkFTRV9MQVlFUl9UWVBFKSByZXR1cm47XG5cdCAgICAgICAgbWFwLnJlbW92ZUxheWVyKGxheWVyKTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGROZXdCYXNlTGF5ZXJUb01hcChsYXllcmlkKSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIHZhciBsYXllcjtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gX2Jhc2VsYXllcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgbGF5ZXIgPSBfYmFzZWxheWVyc1tpXTtcblx0ICAgICAgICBpZiAobGF5ZXIuaWQgIT09IGxheWVyaWQpIGNvbnRpbnVlO1xuXHQgICAgICAgIGlmICghbGF5ZXIubGF5ZXIpIGxheWVyLmxheWVyID0gY3JlYXRlQmFzZUxheWVyKGxheWVyKTtcblx0ICAgICAgICBsYXllci5sYXllci5hZGRUbyhtYXApO1xuXHQgICAgICAgIGxheWVyLmxheWVyLmJyaW5nVG9CYWNrKCk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUJhc2VMYXllcihsYXllckNvbmZpZykge1xuXHQgICAgcmV0dXJuIEwudGlsZUxheWVyKGxheWVyQ29uZmlnLnVybCwgbWFrZUJhc2VMYXllck9wdGlvbnMobGF5ZXJDb25maWcpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUJhc2VMYXllck9wdGlvbnMoY29uZmlnKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHt9O1xuXHQgICAgaWYgKGNvbmZpZy5pZCkgb3B0aW9ucy5pZCA9IGNvbmZpZy5pZDtcblx0ICAgIGlmIChjb25maWcuYXR0cmlidXRpb24pIG9wdGlvbnMuYXR0cmlidXRpb24gPSBjb25maWcuYXR0cmlidXRpb247XG5cdCAgICBpZiAoY29uZmlnLnN1YmRvbWFpbnMpIG9wdGlvbnMuc3ViZG9tYWlucyA9IGNvbmZpZy5zdWJkb21haW5zO1xuXHQgICAgb3B0aW9ucy50eXBlID0gQkFTRV9MQVlFUl9UWVBFO1xuXHRcblx0ICAgIHJldHVybiBvcHRpb25zO1xuXHR9XG5cbi8qKiovIH0pLFxuLyogMjcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkdldEFsbFBvaW50c09mSW50ZXJlc3QgPSBHZXRBbGxQb2ludHNPZkludGVyZXN0O1xuXHRleHBvcnRzLkFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlciA9IEFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlcjtcblx0ZXhwb3J0cy5TZXR1cFBvaW50c09mSW50ZXJlc3QgPSBTZXR1cFBvaW50c09mSW50ZXJlc3Q7XG5cdGV4cG9ydHMuQWRkTXVsdGlwbGVQb2ludHNPZkludGVyZXN0ID0gQWRkTXVsdGlwbGVQb2ludHNPZkludGVyZXN0O1xuXHRleHBvcnRzLlJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyID0gUmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXI7XG5cdGV4cG9ydHMuU2V0dXBQb2ludE9mSW50ZXJlc3RVSSA9IFNldHVwUG9pbnRPZkludGVyZXN0VUk7XG5cdGV4cG9ydHMuUmVtb3ZlUG9pbnRPZkludGVyZXN0VUkgPSBSZW1vdmVQb2ludE9mSW50ZXJlc3RVSTtcblx0XG5cdHZhciBfZ3JhcGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX3RhYnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0XG5cdHZhciBfcG9pbnRzX29mX2ludGVyZXN0ID0gW107XG5cdFxuXHRmdW5jdGlvbiBHZXRBbGxQb2ludHNPZkludGVyZXN0KCkge1xuXHQgICAgcmV0dXJuIF9wb2ludHNfb2ZfaW50ZXJlc3Q7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlcihsYXQsIGxuZykge1xuXHQgICAgdmFyIHBvaSA9IHtcblx0ICAgICAgICBsYXQ6IGxhdCxcblx0ICAgICAgICBsbmc6IGxuZ1xuXHQgICAgfTtcblx0ICAgIF9wb2ludHNfb2ZfaW50ZXJlc3QucHVzaChwb2kpO1xuXHQgICAgcmV0dXJuIHBvaTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gU2V0dXBQb2ludHNPZkludGVyZXN0KG1hcCwgbmV3UG9pcykge1xuXHQgICAgQWRkTXVsdGlwbGVQb2ludHNPZkludGVyZXN0KG5ld1BvaXMpO1xuXHQgICAgdmFyIHBvaXMgPSBHZXRBbGxQb2ludHNPZkludGVyZXN0KCk7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHQgICAgcG9pcy5mb3JFYWNoKGZ1bmN0aW9uIChwb2kpIHtcblx0ICAgICAgICBTZXR1cFBvaW50T2ZJbnRlcmVzdFVJKG1hcCwgcG9pKTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBBZGRNdWx0aXBsZVBvaW50c09mSW50ZXJlc3QocG9pcykge1xuXHQgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoX3BvaW50c19vZl9pbnRlcmVzdCwgcG9pcyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyKHBvaVRvUmVtb3ZlKSB7XG5cdCAgICBfcG9pbnRzX29mX2ludGVyZXN0ID0gX3BvaW50c19vZl9pbnRlcmVzdC5maWx0ZXIoZnVuY3Rpb24gKHBvaSkge1xuXHQgICAgICAgIHJldHVybiAhKHBvaSA9PT0gcG9pVG9SZW1vdmUpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFNldHVwUG9pbnRPZkludGVyZXN0VUkobWFwLCBwb2kpIHtcblx0ICAgIHZhciBkaXYgPSAoMCwgX2dyYXBoLmNyZWF0ZUdyYXBoRGl2KShwb2kpO1xuXHQgICAgdmFyIG1hcmtlciA9ICgwLCBfZ3JhcGguY3JlYXRlTWFya2VyKShtYXAsIHBvaS5sYXQsIHBvaS5sbmcpO1xuXHQgICAgcG9pLmdyYXBoRGl2ID0gZGl2O1xuXHQgICAgcG9pLm1hcmtlciA9IG1hcmtlcjtcblx0ICAgIG1hcmtlci5hZGRUbyhtYXApO1xuXHQgICAgKDAsIF9ncmFwaC5jcmVhdGVHcmFwaFJlbW92ZXIpKG1hcCwgZGl2LCBtYXJrZXIsIHBvaSk7XG5cdFxuXHQgICAgZDMuc2VsZWN0KGRpdikub24oXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgbWFya2VyLnNldEljb24oKDAsIF9ncmFwaC5nZXRJY29uKSgnaG92ZXInKSk7XG5cdCAgICB9KTtcblx0ICAgIGQzLnNlbGVjdChkaXYpLm9uKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgbWFya2VyLnNldEljb24oKDAsIF9ncmFwaC5nZXRJY29uKSgnZ3JhcGgnKSk7XG5cdCAgICB9KTtcblx0ICAgIG1hcmtlci5vbignY2xpY2sgZGJsY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIGhhbmRsZU1hcmtlck1vdXNlRXZlbnQoZSwgcG9pKTtcblx0ICAgIH0pO1xuXHQgICAgbWFya2VyLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIG1hcmtlci5zZXRJY29uKCgwLCBfZ3JhcGguZ2V0SWNvbikoJ2hvdmVyJykpO1xuXHQgICAgfSk7XG5cdCAgICBtYXJrZXIub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICBtYXJrZXIuc2V0SWNvbigoMCwgX2dyYXBoLmdldEljb24pKCdncmFwaCcpKTtcblx0ICAgICAgICBwb2kuZ3JhcGhEaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncGFuLXRvLW1hcmtlci1idG4nKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlJyk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlTWFya2VyTW91c2VFdmVudChlLCBwb2kpIHtcblx0ICAgIGUub3JpZ2luYWxFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0ICAgICgwLCBfdGFicy5IYW5kbGVUYWJDaGFuZ2UpKCdncmFwaHMtYWN0aXZlJyk7XG5cdCAgICBzY3JvbGxUb1BvaW50T2ZJbnRlcmVzdEdyYXBoKHBvaSk7XG5cdCAgICB0cmlnZ2VyR3JhcGhBbmltYXRpb24ocG9pKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdHJpZ2dlckdyYXBoQW5pbWF0aW9uKHBvaSkge1xuXHQgICAgcG9pLmdyYXBoRGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Bhbi10by1tYXJrZXItYnRuJylbMF0uY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZScpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzY3JvbGxUb1BvaW50T2ZJbnRlcmVzdEdyYXBoKHBvaSkge1xuXHQgICAgdmFyIHJpZ2h0UGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKTtcblx0ICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwtaGVhZGVyJyk7XG5cdCAgICB2YXIgZ3JhcGhUeXBlSGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyYXBoLXR5cGUtaGVhZGVyJyk7XG5cdCAgICByaWdodFBhbmVsLnNjcm9sbFRvcCA9IHBvaS5ncmFwaERpdi5vZmZzZXRUb3A7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJKG1hcCwgZGl2LCBtYXJrZXIpIHtcblx0ICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyYXBoLWxpc3QnKTtcblx0ICAgIGxpc3QucmVtb3ZlQ2hpbGQoZGl2KTtcblx0ICAgIG1hcC5yZW1vdmVMYXllcihtYXJrZXIpO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXG4vKioqLyB9KSxcbi8qIDI4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5TZXR1cEdyYXBocyA9IFNldHVwR3JhcGhzO1xuXHRleHBvcnRzLkJpbmRHcmFwaEV2ZW50cyA9IEJpbmRHcmFwaEV2ZW50cztcblx0ZXhwb3J0cy5nZXRJY29uID0gZ2V0SWNvbjtcblx0ZXhwb3J0cy5jcmVhdGVNYXJrZXIgPSBjcmVhdGVNYXJrZXI7XG5cdGV4cG9ydHMuY3JlYXRlR3JhcGhSZW1vdmVyID0gY3JlYXRlR3JhcGhSZW1vdmVyO1xuXHRleHBvcnRzLkhhbmRsZUdyYXBoVGFiQ2hhbmdlID0gSGFuZGxlR3JhcGhUYWJDaGFuZ2U7XG5cdGV4cG9ydHMuY3JlYXRlR3JhcGhEaXYgPSBjcmVhdGVHcmFwaERpdjtcblx0XG5cdHZhciBfcG9pID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdFxuXHR2YXIgX3BhbmVsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHR2YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRcblx0dmFyIF9wYXJzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIHRpcCA9IHt9O1xuXHRcblx0ZnVuY3Rpb24gZ2V0R3JhcGhUaXAoKSB7XG5cdCAgICByZXR1cm4gdGlwO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBTZXR1cEdyYXBocygpIHtcblx0ICAgIGQzLnNlbGVjdEFsbChcIi5ncmFwaC10eXBlLWJ0blwiKS5vbihcImNsaWNrXCIsIGhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrKTtcblx0ICAgIGV4dGVuZERhdGVNb2R1bGUoKTtcblx0ICAgIHRpcCA9IGQzLnRpcCgpLmF0dHIoJ2NsYXNzJywgJ2QzLXRpcCcpLmh0bWwoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZDtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBleHRlbmREYXRlTW9kdWxlKCkge1xuXHQgICAgRGF0ZS5wcm90b3R5cGUuaXNMZWFwWWVhciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgeWVhciA9IHRoaXMuZ2V0RnVsbFllYXIoKTtcblx0ICAgICAgICBpZiAoKHllYXIgJiAzKSAhPSAwKSByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgcmV0dXJuIHllYXIgJSAxMDAgIT0gMCB8fCB5ZWFyICUgNDAwID09IDA7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIEdldCBEYXkgb2YgWWVhclxuXHQgICAgRGF0ZS5wcm90b3R5cGUuZ2V0RE9ZID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBkYXlDb3VudCA9IFswLCAzMSwgNTksIDkwLCAxMjAsIDE1MSwgMTgxLCAyMTIsIDI0MywgMjczLCAzMDQsIDMzNF07XG5cdCAgICAgICAgdmFyIG1uID0gdGhpcy5nZXRNb250aCgpO1xuXHQgICAgICAgIHZhciBkbiA9IHRoaXMuZ2V0RGF0ZSgpO1xuXHQgICAgICAgIHZhciBkYXlPZlllYXIgPSBkYXlDb3VudFttbl0gKyBkbjtcblx0ICAgICAgICBpZiAobW4gPiAxICYmIHRoaXMuaXNMZWFwWWVhcigpKSBkYXlPZlllYXIrKztcblx0ICAgICAgICByZXR1cm4gZGF5T2ZZZWFyO1xuXHQgICAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gQmluZEdyYXBoRXZlbnRzKG1hcCkge1xuXHQgICAgbWFwLm9uKFwiY2xpY2tcIiwgaGFuZGxlTWFwQ2xpY2spO1xuXHR9XG5cdFxuXHR2YXIgYmFzZUljb24gPSBMLkljb24uZXh0ZW5kKHt9KTtcblx0XG5cdHZhciBncmFwaEljb24gPSBuZXcgYmFzZUljb24oe1xuXHQgICAgaWNvblVybDogJ2ltZ3MvYmx1ZV9pY29uLnBuZycsXG5cdCAgICBzaGFkb3dVcmw6ICdpbWdzL21hcmtlcl9zaGFkb3cucG5nJyxcblx0ICAgIGljb25TaXplOiBbMjUsIDQxXSxcblx0ICAgIGljb25BbmNob3I6IFsxMiwgNDFdLFxuXHQgICAgcG9wdXBBbmNob3I6IFsxLCAtMzRdLFxuXHQgICAgc2hhZG93U2l6ZTogWzQxLCA0MV1cblx0fSk7XG5cdFxuXHR2YXIgaG92ZXJJY29uID0gbmV3IGJhc2VJY29uKHtcblx0ICAgIGljb25Vcmw6ICdpbWdzL29yYW5nZV9pY29uLnBuZycsXG5cdCAgICBzaGFkb3dVcmw6ICdpbWdzL21hcmtlcl9zaGFkb3cucG5nJyxcblx0ICAgIGljb25TaXplOiBbMjUsIDQxXSxcblx0ICAgIGljb25BbmNob3I6IFsxMiwgNDFdLFxuXHQgICAgcG9wdXBBbmNob3I6IFsxLCAtMzRdLFxuXHQgICAgc2hhZG93U2l6ZTogWzQxLCA0MV1cblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBnZXRJY29uKHR5cGUpIHtcblx0ICAgIHJldHVybiB0eXBlID09PSAnaG92ZXInID8gaG92ZXJJY29uIDogZ3JhcGhJY29uO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVNYXBDbGljayhlKSB7XG5cdCAgICB2YXIgbWFwID0gdGhpcztcblx0ICAgIHZhciBsYXQgPSBlLmxhdGxuZy5sYXQ7XG5cdCAgICB2YXIgbG5nID0gZS5sYXRsbmcubG5nO1xuXHRcblx0ICAgIHZhciBwb2kgPSAoMCwgX3BvaS5BZGRQb2ludE9mSW50ZXJlc3RUb1RyYWNrZXIpKGxhdCwgbG5nKTtcblx0ICAgICgwLCBfcG9pLlNldHVwUG9pbnRPZkludGVyZXN0VUkpKG1hcCwgcG9pLCBob3Zlckljb24sIGdyYXBoSWNvbik7XG5cdCAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHRcblx0ICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGNsaWNrIG9uIG1hcFxuXHQgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdCAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdCAgICAgICAgZXZlbnRMYWJlbDogJ2FkZCBwb2ludCcsXG5cdCAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlTWFya2VyKG1hcCwgbGF0LCBsbmcpIHtcblx0ICAgIHJldHVybiBMLm1hcmtlcihbbGF0LCBsbmddLCB7IGljb246IGdyYXBoSWNvbiB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlR3JhcGhSZW1vdmVyKG1hcCwgZGl2LCBtYXJrZXIsIHBvaSkge1xuXHQgICAgdmFyIGVsZW0gPSBjcmVhdGVHcmFwaFJlbW92ZXJFbGVtKCk7XG5cdCAgICBkaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyYXBoLWVsZW0taGVhZGVyXCIpWzBdLmFwcGVuZENoaWxkKGVsZW0pO1xuXHQgICAgZDMuc2VsZWN0KGVsZW0pLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICgwLCBfcG9pLlJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyKShwb2kpO1xuXHQgICAgICAgICgwLCBfcG9pLlJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJKShtYXAsIGRpdiwgbWFya2VyKTtcblx0ICAgICAgICAoMCwgX3BhbmVsLnVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQpKCk7XG5cdCAgICAgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVHcmFwaFJlbW92ZXJFbGVtKCkge1xuXHQgICAgdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuXHQgICAgZWxlbS5jbGFzc05hbWUgPSBcInJlbW92ZS1ncmFwaFwiO1xuXHQgICAgZWxlbS5pbm5lclRleHQgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKFwiMTAwMDVcIik7XG5cdCAgICBlbGVtLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIFwiUmVtb3ZlIGdyYXBoXCIpO1xuXHQgICAgcmV0dXJuIGVsZW07XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggREFUQSBQUk9DRVNTSU5HIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIHNlbmRSZXF1ZXN0KHJlcXVlc3QsIHVybCkge1xuXHQgICAgcmVxdWVzdC5vcGVuKCdHRVQnLCB1cmwpO1xuXHQgICAgcmVxdWVzdC5zZW5kKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZUdyYXBoRGF0YVJlc3BvbnNlKGRpdiwgbGF0LCBsbmcsIHJlc3BvbnNlKSB7XG5cdCAgICByZXNwb25zZSA9IHJlc3BvbnNlLnJlcGxhY2UoL1xcW3xcXF18XFwnL2csIFwiXCIpLnNwbGl0KFwiLCBcIik7XG5cdCAgICBkcmF3R3JhcGgocmVzcG9uc2UsIGRpdiwgbGF0LCBsbmcpO1xuXHQgICAgKDAsIF9wYW5lbC51cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXREYXRhKGxhdCwgbG5nLCBkaXYpIHtcblx0ICAgIHZhciB1cmwgPSBcImh0dHBzOi8vZmNhdi1uZHZpLm5lbWFjLm9yZy9sYW5kZGF0X3Byb2R1Y3QuY2dpP2FyZ3M9XCIgKyBsbmcgKyBcIixcIiArIGxhdDtcblx0ICAgIHZhciBvUmVxID0gKDAsIF9wYXJzZXIuR2V0QWpheE9iamVjdCkoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgaGFuZGxlR3JhcGhEYXRhUmVzcG9uc2UoZGl2LCBsYXQsIGxuZywgcmVzcG9uc2UpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgb1JlcS5vcGVuKFwiR0VUXCIsIHVybCk7XG5cdCAgICBvUmVxLnNlbmQoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc3BsaXREYXRhKGRhdGEpIHtcblx0ICAgIHZhciBpO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBkYXRhW2ldID0gZGF0YVtpXS5zcGxpdChcIixcIik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZGF0YTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVwcm9jZXNzRGF0YShvcmlnZGF0YSkge1xuXHQgICAgdmFyIGV4cGVjdGVkWWVhckxlbmd0aCA9IDQ2O1xuXHQgICAgdmFyIGRhdGEgPSB7fTtcblx0ICAgIHZhciBwb2ludDtcblx0ICAgIHZhciBrZXk7XG5cdCAgICB2YXIgaSwgajtcblx0XG5cdCAgICBkYXRhW1wia2V5c1wiXSA9IFtdO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IG9yaWdkYXRhLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgcG9pbnQgPSBvcmlnZGF0YVtpXTtcblx0ICAgICAgICBrZXkgPSBwb2ludFswXS5zdWJzdHJpbmcoMCwgNCk7XG5cdCAgICAgICAgaWYgKCFkYXRhLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgICAgICAgZGF0YVtrZXldID0gW107XG5cdCAgICAgICAgICAgIGRhdGFbXCJrZXlzXCJdLnB1c2goa2V5KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZGF0YVtrZXldLnB1c2gocG9pbnQpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBrZXlzVG9CZURlbGV0ZWQgPSBbXTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmtleXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBrZXkgPSBkYXRhLmtleXNbaV07XG5cdCAgICAgICAgaWYgKGRhdGFba2V5XS5sZW5ndGggIT09IGV4cGVjdGVkWWVhckxlbmd0aCkge1xuXHQgICAgICAgICAgICBrZXlzVG9CZURlbGV0ZWQucHVzaChrZXkpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwga2V5c1RvQmVEZWxldGVkLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAga2V5ID0ga2V5c1RvQmVEZWxldGVkW2ldO1xuXHQgICAgICAgIGRlbGV0ZSBkYXRhW2tleV07XG5cdCAgICAgICAgZGF0YS5rZXlzLnNwbGljZShkYXRhLmtleXMuaW5kZXhPZihrZXkpLCAxKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZGF0YUZvck1lZGlhbnM7XG5cdCAgICB2YXIgbWVkaWFuO1xuXHQgICAgZGF0YVtcIm1lZGlhbnNcIl0gPSBbXTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBleHBlY3RlZFllYXJMZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGRhdGFGb3JNZWRpYW5zID0gW107XG5cdCAgICAgICAgZm9yIChqID0gaTsgaiA8IG9yaWdkYXRhLmxlbmd0aDsgaiArPSBleHBlY3RlZFllYXJMZW5ndGgpIHtcblx0ICAgICAgICAgICAgZGF0YUZvck1lZGlhbnMucHVzaChvcmlnZGF0YVtqXVsxXSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBtZWRpYW4gPSBkYXRhRm9yTWVkaWFucy5zb3J0KClbTWF0aC5mbG9vcihkYXRhRm9yTWVkaWFucy5sZW5ndGggLyAyKV07XG5cdCAgICAgICAgZGF0YVtcIm1lZGlhbnNcIl0ucHVzaChtZWRpYW4pO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBkYXRhO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIElOVEVSRkFDRSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrKCkge1xuXHQgICAgdmFyIHR5cGUgPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJyk7XG5cdCAgICB2YXIgYWN0aXZlVHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF0uZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKTtcblx0XG5cdCAgICBpZiAodHlwZSA9PT0gYWN0aXZlVHlwZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICBIYW5kbGVHcmFwaFRhYkNoYW5nZSh0eXBlLCBhY3RpdmVUeXBlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gSGFuZGxlR3JhcGhUYWJDaGFuZ2UoZ3JhcGhUeXBlKSB7XG5cdCAgICBpZiAoIWlzR3JhcGhMaXN0RW1wdHkoKSkge1xuXHQgICAgICAgIHZhciBvbGRBY3RpdmVHcmFwaEVsZW1IZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC1lbGVtJylbMF0uc2Nyb2xsSGVpZ2h0O1xuXHQgICAgICAgIHZhciBvbGRBY3RpdmVHcmFwaEluZm9IZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC10eXBlLWluZm8gYWN0aXZlJylbMF0uc2Nyb2xsSGVpZ2h0O1xuXHQgICAgICAgIHZhciByaWdodFBhbmVsU2Nyb2xsVG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsJykuc2Nyb2xsVG9wO1xuXHQgICAgfVxuXHQgICAgZGlzYWJsZUFjdGl2ZUdyYXBoVGFiKCk7XG5cdCAgICBlbmFibGVHcmFwaFRhYihncmFwaFR5cGUpO1xuXHQgICAgaWYgKCFpc0dyYXBoTGlzdEVtcHR5KCkpIGFkanVzdFNjcm9sbFBvc2l0aW9uKG9sZEFjdGl2ZUdyYXBoSW5mb0hlaWdodCwgb2xkQWN0aXZlR3JhcGhFbGVtSGVpZ2h0LCByaWdodFBhbmVsU2Nyb2xsVG9wKTtcblx0ICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzR3JhcGhMaXN0RW1wdHkoKSB7XG5cdCAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhcGgtZWxlbScpWzBdID09PSB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkanVzdFNjcm9sbFBvc2l0aW9uKG9sZEdyYXBoSW5mb0hlaWdodCwgb2xkR3JhcGhFbGVtSGVpZ2h0LCBvbGRSaWdodFBhbmVsU2Nyb2xsVG9wKSB7XG5cdCAgICB2YXIgbmV3R3JhcGhJbmZvSGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhcGgtdHlwZS1pbmZvIGFjdGl2ZScpWzBdLnNjcm9sbEhlaWdodDtcblx0ICAgIHZhciBuZXdHcmFwaEVsZW1IZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC1lbGVtJylbMF0uc2Nyb2xsSGVpZ2h0O1xuXHRcblx0ICAgIHZhciBuZXdHcmFwaEVsZW1IZWlnaHRTY2FsZSA9IG5ld0dyYXBoRWxlbUhlaWdodCAvIG9sZEdyYXBoRWxlbUhlaWdodDtcblx0ICAgIHZhciBuZXdSaWdodFBhbmVsU2Nyb2xsVG9wID0gbmV3R3JhcGhJbmZvSGVpZ2h0ICsgKG9sZFJpZ2h0UGFuZWxTY3JvbGxUb3AgLSBvbGRHcmFwaEluZm9IZWlnaHQpICogbmV3R3JhcGhFbGVtSGVpZ2h0U2NhbGU7XG5cdFxuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsJykuc2Nyb2xsVG9wID0gbmV3UmlnaHRQYW5lbFNjcm9sbFRvcDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZGlzYWJsZUFjdGl2ZUdyYXBoVGFiKCkge1xuXHQgICAgdmFyIGFjdGl2ZUVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZ3JhcGgtdHlwZS1idG4gYWN0aXZlXCIpWzBdO1xuXHQgICAgdmFyIGFjdGl2ZUNsYXNzID0gXCJncmFwaC1cIiArIGFjdGl2ZUVsZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS10eXBlXCIpO1xuXHRcblx0ICAgIGFjdGl2ZUVsZW0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcblx0ICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKS5jbGFzc0xpc3QucmVtb3ZlKGFjdGl2ZUNsYXNzKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZW5hYmxlR3JhcGhUYWIoZ3JhcGhUeXBlKSB7XG5cdCAgICBkMy5zZWxlY3QoXCIuZ3JhcGgtdHlwZS1idG5bZGF0YS10eXBlPSdcIiArIGdyYXBoVHlwZSArIFwiJ11cIikuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblx0ICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKS5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtXCIgKyBncmFwaFR5cGUpO1xuXHQgICAgZDMuc2VsZWN0QWxsKCcuZ3JhcGgtdHlwZS1pbmZvJykuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiBncmFwaFR5cGUgPT09IHRoaXMuaWQuc3BsaXQoJy0nKVswXTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVHcmFwaERpdihwb2kpIHtcblx0ICAgIHZhciBkZWNpbWFsUGxhY2VzID0gMztcblx0ICAgIHZhciBsYXRTaG9ydCA9IHJvdW5kRmxvYXQocG9pLmxhdCwgZGVjaW1hbFBsYWNlcyk7XG5cdCAgICB2YXIgbG5nU2hvcnQgPSByb3VuZEZsb2F0KHBvaS5sbmcsIGRlY2ltYWxQbGFjZXMpO1xuXHQgICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHQgICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGhlYWRlcik7XG5cdCAgICB2YXIgem9vbVRvTWFya2VyQnV0dG9uID0gbWFrZVpvb21Ub01hcE1hcmtlckJ1dHRvbihwb2kpO1xuXHQgICAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkxhdDogXCIgKyBsYXRTaG9ydCArIFwiLCBMb246IFwiICsgbG5nU2hvcnQpO1xuXHQgICAgdmFyIGNvbnRlbnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHQgICAgY29udGVudERpdi5jbGFzc05hbWUgPSBcImdyYXBoLWxhdC1sb25cIjtcblx0ICAgIGNvbnRlbnREaXYuYXBwZW5kQ2hpbGQoY29udGVudCk7XG5cdFxuXHQgICAgaGVhZGVyLmFwcGVuZENoaWxkKHpvb21Ub01hcmtlckJ1dHRvbik7XG5cdCAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoY29udGVudERpdik7XG5cdFxuXHQgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtZWxlbVwiKTtcblx0ICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtZWxlbS1oZWFkZXJcIik7XG5cdFxuXHQgICAgZ2V0RGF0YShwb2kubGF0LCBwb2kubG5nLCB3cmFwcGVyKTtcblx0ICAgIHJldHVybiB3cmFwcGVyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlWm9vbVRvTWFwTWFya2VyQnV0dG9uKHBvaSkge1xuXHQgICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG5cdCAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuJyk7XG5cdCAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgncGFuLXRvLW1hcmtlci1idG4nKTtcblx0ICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2hvdyBPbiBNYXBcIjtcblx0ICAgIGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKHBvaSwgZSkge1xuXHQgICAgICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdCAgICAgICAgbWFwLnBhblRvKFtwb2kubGF0LCBwb2kubG5nXSk7XG5cdCAgICB9LmJpbmQoYnV0dG9uLCBwb2kpO1xuXHQgICAgcmV0dXJuIGJ1dHRvbjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhd0dyYXBoKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcblx0ICAgIGRhdGEgPSBzcGxpdERhdGEoZGF0YSk7XG5cdCAgICB2YXIgcmVwcm9jZXNzZWREYXRhID0gcmVwcm9jZXNzRGF0YShkYXRhKTtcblx0ICAgIG1ha2VVcERvd25MaW5lR3JhcGgoZGF0YSwgZGl2LCByZXByb2Nlc3NlZERhdGFbXCJtZWRpYW5zXCJdKTtcblx0ICAgIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMocmVwcm9jZXNzZWREYXRhLCBkaXYsIGxhdCwgbG5nKTtcblx0ICAgIGRyYXdVcERvd25Qb2xhcldpdGhDaGVja2JveGVzQW5kVGhyZXNob2xkcyhyZXByb2Nlc3NlZERhdGEsIGRpdiwgbGF0LCBsbmcpO1xuXHQgICAgdmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXBoLWxpc3RcIik7XG5cdCAgICBsaXN0LmFwcGVuZENoaWxkKGRpdik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJvdW5kRmxvYXQobnVtYmVyLCBkZWNpbWFsUGxhY2VzKSB7XG5cdCAgICByZXR1cm4gTWF0aC5yb3VuZChudW1iZXIgKiBNYXRoLnBvdygxMCwgZGVjaW1hbFBsYWNlcykpIC8gTWF0aC5wb3coMTAsIGRlY2ltYWxQbGFjZXMpO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8gVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBtYWtlVXBEb3duTGluZUdyYXBoKGRhdGEsIGRpdiwgYXZlcmFnZXMpIHtcblx0ICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcblx0ICAgIHZhciBtYXJnaW4gPSB7IHRvcDogMzAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMCwgbGVmdDogMjkgfSxcblx0ICAgICAgICB3aWR0aCA9IDU4MCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxuXHQgICAgICAgIGhlaWdodCA9IDI3MCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXHRcblx0ICAgIC8vIFNldCB0aGUgcmFuZ2VzXG5cdCAgICB2YXIgeCA9IGQzLnNjYWxlVGltZSgpLnJhbmdlKFswLCB3aWR0aF0pLmRvbWFpbihbcGFyc2VEYXRlKGRhdGFbMF1bMF0pLCBwYXJzZURhdGUoZGF0YVtkYXRhLmxlbmd0aCAtIDFdWzBdKV0pO1xuXHQgICAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKS5kb21haW4oWzAsIDEwMF0pO1xuXHRcblx0ICAgIC8vIERlZmluZSB0aGUgYXhlc1xuXHQgICAgdmFyIHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4KS50aWNrcygxNikudGlja0Zvcm1hdChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkLmdldEZ1bGxZZWFyKCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KS50aWNrcyg2KTtcblx0XG5cdCAgICAvLyBEZWZpbmUgdGhlIGxpbmVcblx0ICAgIHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKCkueChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiB4KHBhcnNlRGF0ZShkWzBdKSk7XG5cdCAgICB9KS55KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIHkoZFsxXSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwidGltZXNlcmllcy1ncmFwaFwiLCB0cnVlKTtcblx0XG5cdCAgICAvLyBBZGRzIHRoZSBzdmcgY2FudmFzXG5cdCAgICB2YXIgc3ZnID0gd3JhcHBlci5hcHBlbmQoXCJzdmdcIikuYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSkuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgdyA9IHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQ7XG5cdCAgICAgICAgdmFyIGggPSBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbTtcblx0ICAgICAgICByZXR1cm4gJzAgMCAnICsgdyArICcgJyArIGg7XG5cdCAgICB9KS5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJykuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XG5cdFxuXHQgICAgc3ZnLmNhbGwodGlwKTtcblx0XG5cdCAgICAvLyBBZGQgdGhlIHZhbHVlbGluZSBwYXRoLlxuXHQgICAgZHJhd0xpbmVhclBhdGgoZGF0YSwgdmFsdWVsaW5lLCBzdmcpO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWCBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ4IGF4aXNcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpLmNhbGwoeEF4aXMpO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWSBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ5IGF4aXNcIikuY2FsbCh5QXhpcyk7XG5cdCAgICAvKipcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XG5cdCAgICAgKi9cblx0ICAgIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8gT1ZFUkxBUFBJTkcgVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMoZGF0YSwgZGl2LCBsYXQsIGxuZykge1xuXHQgICAgdmFyIHllYXIgPSBcIjIwMTVcIjtcblx0XG5cdCAgICB2YXIgY2hhcnRzID0ge307XG5cdFxuXHQgICAgLy8gU2V0IHRoZSBkaW1lbnNpb25zIG9mIHRoZSBjYW52YXMgLyBncmFwaFxuXHQgICAgdmFyIG1hcmdpbiA9IHsgdG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyOSB9LFxuXHQgICAgICAgIHdpZHRoID0gNTAwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsXG5cdCAgICAgICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cdFxuXHQgICAgdmFyIGF2ZXJhZ2VzID0gZGF0YS5tZWRpYW5zO1xuXHRcblx0ICAgIHZhciB4ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbMCwgd2lkdGhdKS5kb21haW4oWzAsIDM2NV0pO1xuXHQgICAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKS5kb21haW4oWzAsIDEwMF0pO1xuXHRcblx0ICAgIC8vIERlZmluZSB0aGUgYXhlc1xuXHQgICAgZnVuY3Rpb24gZm9ybWF0TW9udGhUaWNrKGQpIHtcblx0ICAgICAgICByZXR1cm4gTU9OVEhfTEFCRUxTWyhkIC0gMTUpIC8gMzBdO1xuXHQgICAgfVxuXHQgICAgdmFyIHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4KS50aWNrcygxMSkudGlja1ZhbHVlcyhbMTUsIDQ1LCA3NSwgMTA1LCAxMzUsIDE2NSwgMTk1LCAyMjUsIDI1NSwgMjg1LCAzMTUsIDM0NV0pLnRpY2tGb3JtYXQoZm9ybWF0TW9udGhUaWNrKTtcblx0XG5cdCAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KS50aWNrcyg2KTtcblx0XG5cdCAgICAvLyBEZWZpbmUgdGhlIGxpbmVcblx0ICAgIHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKCkueChmdW5jdGlvbiAoZCwgaSkge1xuXHQgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGQpID8geChwYXJzZUp1bGlhbkRheShkWzBdKSkgOiB4KGkgKiA4ICsgMyk7XG5cdCAgICB9KS55KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyB5KGRbMV0pIDogeShkKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KGRpdikuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJvdmVybGFwcGluZy1ncmFwaFwiLCB0cnVlKTtcblx0XG5cdCAgICAvLyBBZGRzIHRoZSBzdmcgY2FudmFzXG5cdCAgICB2YXIgc3ZnID0gd3JhcHBlci5hcHBlbmQoXCJzdmdcIikuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgdyA9IHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQ7XG5cdCAgICAgICAgdmFyIGggPSBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbTtcblx0ICAgICAgICByZXR1cm4gJzAgMCAnICsgdyArICcgJyArIGg7XG5cdCAgICB9KS5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJylcblx0ICAgIC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuXHQgICAgLy8uYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcblx0ICAgIC5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtYXJnaW4ubGVmdCArIFwiLFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKTtcblx0XG5cdCAgICBzdmcuY2FsbCh0aXApO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWCBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ4IGF4aXNcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpLmNhbGwoeEF4aXMpO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWSBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ5IGF4aXNcIikuY2FsbCh5QXhpcyk7XG5cdFxuXHQgICAgY2hhcnRzW1wibWVkaWFuc1wiXSA9IHtcblx0ICAgICAgICBcInBhdGhcIjogZHJhd0xpbmVhclBhdGgoZGF0YVtcIm1lZGlhbnNcIl0sIHZhbHVlbGluZSwgc3ZnKVxuXHQgICAgfTtcblx0XG5cdCAgICBjaGFydHNbeWVhcl0gPSB7XG5cdCAgICAgICAgXCJwYXRoXCI6IGRyYXdMaW5lYXJQYXRoKGRhdGFbeWVhcl0sIHZhbHVlbGluZSwgc3ZnKVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XG5cdCAgICAgKi9cblx0ICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl1bXCJwb2ludHNcIl0gPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbXCJtZWRpYW5zXCJdLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHQgICAgY2hhcnRzW3llYXJdW1wicG9pbnRzXCJdID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW3llYXJdLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHRcblx0ICAgIHZhciBpbnB1dHdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwiaW5wdXQtd3JhcHBlclwiLCB0cnVlKTtcblx0XG5cdCAgICBkYXRhLmtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgY3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBrZXksIFwidGltZXNlcmllc1wiLCB5ZWFyLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgY3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBcIm1lZGlhbnNcIiwgXCJ0aW1lc2VyaWVzXCIsIFwibWVkaWFuc1wiLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFBPTEFSIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMoZGF0YSwgZGl2LCBsYXQsIGxuZykge1xuXHQgICAgdmFyIHllYXIgPSBcIjIwMTVcIjtcblx0ICAgIHZhciB3aWR0aCA9IDQ5MCxcblx0ICAgICAgICBoZWlnaHQgPSA0OTAsXG5cdCAgICAgICAgcmFkaXVzID0gTWF0aC5taW4od2lkdGgsIGhlaWdodCkgLyAyIC0gMzA7XG5cdFxuXHQgICAgdmFyIGF2ZXJhZ2VzID0gZGF0YVtcIm1lZGlhbnNcIl07XG5cdCAgICB2YXIgY2VudGVyID0gZmluZFBvbGFyQ2VudGVyKGRhdGEpO1xuXHQgICAgdmFyIHRocmVzaG9sZHMgPSBmaW5kUG9sYXJUaHJlc2hvbGRzKGF2ZXJhZ2VzLCBjZW50ZXJbMV1bMF0pO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0cyB1cCBzY2FsaW5nIG9mIGRhdGEuIFdlIGtub3cgdGhhdCB0aGUgbmR2aSB2YWx1ZXMgZmFsbCBiZXR3ZWVuXG5cdCAgICAgKiAwICYgMTAwIHNvIHdlIHNldCBvdXIgZG9tYWluIHRvIHRoYXQuIFRoZSByYW5nZSBjb250cm9scyB3aGVyZSB0aGVcblx0ICAgICAqIHBvaW50cyB3aWxsIGxpZSBpbiBvdXIgZ3JhcGgsIHNvIHdlIHNldCB0aGVtIHRvIGJlIGJldHdlZW4gMCBhbmQgdGhlXG5cdCAgICAgKiByYWRpdXMuXG5cdCAgICAgKi9cblx0ICAgIHZhciByID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIDEwMF0pLnJhbmdlKFswLCByYWRpdXNdKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIGZ1bmN0aW9uIHdoaWNoIHdpbGwgZHJhdyBlYWNoIHBvaW50LiBUbyBjb21wdXRlIHRoZSBkaXN0YW5jZSBmcm9tIHRoZVxuXHQgICAgICogY2VudGVyIGVhY2ggcG9pbnQgaXMgd2UgcGFzcyB0aGUgZGF0YXBvaW50IHRvIHRoZSBmdW5jdGlvbiBkZWZpbmVkIGFib3ZlLlxuXHQgICAgICogVG8gZGV0ZXJtaW5lIHRoZSBhbmdsZSBmcm9tIHRoZSBvcmlnaW4gd2UgbmVlZCB0byBjb252ZXJ0IHRoZSBkYXkgdG9cblx0ICAgICAqIHJhZGlhbnMsIHNvIHdlIGNvbnZlcnQgdGhlIGRheSB0byBhIG51bWJlciBiZXR3ZWVuIDAgJiAxIGFuZCB0aGVuIG11bHRpcGx5XG5cdCAgICAgKiBpdCBieSAyIHBpLlxuXHQgICAgICovXG5cdCAgICB2YXIgbGluZSA9IGQzLnJhZGlhbExpbmUoKS5yYWRpdXMoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShkKSA/IHIoZFsxXSkgOiByKGQpO1xuXHQgICAgfSkuYW5nbGUoZnVuY3Rpb24gKGQsIGkpIHtcblx0ICAgICAgICB2YXIgZGF5ID0gQXJyYXkuaXNBcnJheShkKSA/IHBhcnNlSnVsaWFuRGF5KGRbMF0pIDogaSAqIDggKyAzO1xuXHQgICAgICAgIHJldHVybiAoZGF5IC0gMSkgJSAzNjUgLyAzNjUgKiAoMiAqIE1hdGguUEkpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTZXRzIHVwIHRoZSBjYW52YXMgd2hlcmUgdGhlIGNpcmNsZSB3aWxsIGJlIGRyYXduLlxuXHQgICAgICovXG5cdCAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwicG9sYXItZ3JhcGhcIiwgdHJ1ZSk7XG5cdCAgICB2YXIgc3ZnID0gd3JhcHBlci5hcHBlbmQoXCJzdmdcIilcblx0ICAgIC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcblx0ICAgIC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuXHQgICAgLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuICcwIDAgJyArIHdpZHRoICsgJyAnICsgaGVpZ2h0O1xuXHQgICAgfSkuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWlkWU1pZCcpLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHdpZHRoIC8gMiArIFwiLFwiICsgaGVpZ2h0IC8gMiArIFwiKVwiKTtcblx0XG5cdCAgICBzdmcuY2FsbCh0aXApO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBiaWcgY2lyY2xlcyBvZiB0aGUgZ3JhcGggJiB0aGVpciBsYWJlbHNcblx0ICAgICAqL1xuXHQgICAgdmFyIGdyID0gc3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwiciBheGlzXCIpLnNlbGVjdEFsbChcImdcIikuZGF0YShyLnRpY2tzKDUpLnNsaWNlKDEpKS5lbnRlcigpLmFwcGVuZChcImdcIik7XG5cdFxuXHQgICAgZ3IuYXBwZW5kKFwiY2lyY2xlXCIpLmF0dHIoXCJyXCIsIHIpO1xuXHRcblx0ICAgIGdyLmFwcGVuZChcInRleHRcIikuYXR0cihcInlcIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gLXIoZCkgLSA0O1xuXHQgICAgfSkuYXR0cihcInRyYW5zZm9ybVwiLCBcInJvdGF0ZSgxNSlcIikuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKS50ZXh0KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIGQ7XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgbGFiZWxzIGZvciBlYWNoIG1vbnRoIGFuZCB0aGUgbGluZXNcblx0ICAgICAqIHRoYXQgZ28gb3V0IHRvIHRoZW0uXG5cdCAgICAgKi9cblx0ICAgIHZhciBnYSA9IHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcImEgYXhpc1wiKS5zZWxlY3RBbGwoXCJnXCIpLmRhdGEoZDMucmFuZ2UoMCwgMzYwLCAzMCkpLmVudGVyKCkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIFwicm90YXRlKFwiICsgKGQgLSA5MCkgKyBcIilcIjtcblx0ICAgIH0pO1xuXHRcblx0ICAgIGdhLmFwcGVuZChcImxpbmVcIikuYXR0cihcIngyXCIsIHJhZGl1cyk7XG5cdFxuXHQgICAgZ2EuYXBwZW5kKFwidGV4dFwiKS5hdHRyKFwieFwiLCByYWRpdXMgKyA2KS5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKS5zdHlsZShcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIGQgPCAzNjAgJiYgZCA+IDE4MCA/IFwiZW5kXCIgOiBudWxsO1xuXHQgICAgfSkuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkIDwgMzYwICYmIGQgPiAxODAgPyBcInJvdGF0ZSgxODAgXCIgKyAocmFkaXVzICsgNikgKyBcIiwwKVwiIDogbnVsbDtcblx0ICAgIH0pLnRleHQoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gTU9OVEhfTEFCRUxTW2QgLyAzMF07XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIERyYXdzIHRoZSB0aHJlc2hvbGQgbGluZXNcblx0ICAgICAqL1xuXHQgICAgdmFyIHRocmVzaG9sZEVsZW0gPSBzdmcuYXBwZW5kKFwiZ1wiKS5zZWxlY3RBbGwoXCJnXCIpLmRhdGEodGhyZXNob2xkcykuZW50ZXIoKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gXCJyb3RhdGUoXCIgKyAoZC5kYXRhWzFdWzBdIC0gOTApICsgXCIpXCI7XG5cdCAgICB9KTtcblx0XG5cdCAgICB0aHJlc2hvbGRFbGVtLmFwcGVuZChcImxpbmVcIikuYXR0cihcImNsYXNzXCIsIFwibGluZVwiKS5hdHRyKFwieDJcIiwgcmFkaXVzKTtcblx0XG5cdCAgICB0aHJlc2hvbGRFbGVtLmFwcGVuZChcInRleHRcIikuYXR0cihcInhcIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdO3JldHVybiBkYXkgPCAzNjAgJiYgZGF5ID4gMTgwID8gcmFkaXVzICsgMzAgOiByYWRpdXMgLSAzMDtcblx0ICAgIH0pLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIGQuZGF0YVsxXVswXSAlIDM2NSAvIDM2NSAqICgyICogTWF0aC5QSSkgKyA2O1xuXHQgICAgfSkuYXR0cihcImR5XCIsIFwiLjM1ZW1cIikuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHZhciBkYXkgPSBkLmRhdGFbMV1bMF07cmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyBcIm1pZGRsZVwiIDogbnVsbDtcblx0ICAgIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdO3JldHVybiBkYXkgPCAzNjAgJiYgZGF5ID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7XG5cdCAgICB9KS50ZXh0KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIGQubGFiZWw7XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIERyYXdzIHRoZSBsaW5lIHRvIHRoZSBjZW50ZXIgb2YgdGhlIGRhdGFcblx0ICAgICAqL1xuXHQgICAgdmFyIGNlbnRlckRheSA9IGNlbnRlclsxXVswXTtcblx0ICAgIHZhciBjZW50ZXJEYXlPcHBvc2l0ZSA9IChjZW50ZXJEYXkgKyAzNjUgLyAyKSAlIDM2NTtcblx0ICAgIHZhciBjZW50ZXJEYXlEYXRhID0gW2NlbnRlckRheSwgMTAwXTtcblx0ICAgIHZhciBjZW50ZXJEYXlPcHBvc2l0ZURhdGEgPSBbY2VudGVyRGF5T3Bwb3NpdGUsIDEwMF07XG5cdCAgICB2YXIgZ3Jvd2luZ1NlYXNvbkRhdGEgPSBbY2VudGVyRGF5RGF0YSwgY2VudGVyRGF5T3Bwb3NpdGVEYXRhXTtcblx0XG5cdCAgICBkcmF3UG9sYXJQYXRoKGdyb3dpbmdTZWFzb25EYXRhLCBsaW5lLCBzdmcpLmNsYXNzZWQoXCJncm93aW5nLXNlYXNvbi1saW5lXCIsIFwidHJ1ZVwiKTtcblx0XG5cdCAgICBkcmF3UG9sYXJQYXRoKGNlbnRlciwgbGluZSwgc3ZnKS5jbGFzc2VkKFwiY2VudGVyLWxpbmVcIiwgXCJ0cnVlXCIpO1xuXHRcblx0ICAgIHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKS5kYXRhKFtjZW50ZXJbMV1dKS5lbnRlcigpLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiY2xhc3NcIiwgXCJwb2ludFwiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgdmFyIGNvb3JzID0gbGluZShbZF0pLnNsaWNlKDEpLnNsaWNlKDAsIC0xKTtcblx0ICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBjb29ycyArIFwiKVwiO1xuXHQgICAgfSkuYXR0cihcInJcIiwgNCkuYXR0cihcInN0cm9rZVwiLCBcIiMwMDBcIikuYXR0cihcImZpbGxcIiwgXCIjZWEwYzQ4XCIpLm9uKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgdGlwLnNob3coXCJDZW50ZXI6IFwiICsgU3RyaW5nKGRbMV0pLnN1YnN0cmluZygwLCA3KSk7XG5cdCAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDUpO1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMnB4XCIpO1xuXHQgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHQgICAgfSkub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHRpcC5oaWRlKCk7XG5cdCAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDQpO1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMXB4XCIpO1xuXHQgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIGNoYXJ0cyA9IHt9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBsaW5lIHRoYXQgdGhlIGRhdGEgZm9sbG93c1xuXHQgICAgICovXG5cdCAgICBjaGFydHNbXCJtZWRpYW5zXCJdID0ge1xuXHQgICAgICAgIFwicGF0aFwiOiBkcmF3UG9sYXJQYXRoKGF2ZXJhZ2VzLCBsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIGNoYXJ0c1t5ZWFyXSA9IHtcblx0ICAgICAgICBcInBhdGhcIjogZHJhd1BvbGFyUGF0aChkYXRhW3llYXJdLCBsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBwb2ludCBhdCBlYWNoIGRhdGEgcG9pbnRcblx0ICAgICAqL1xuXHQgICAgY2hhcnRzLm1lZGlhbnMucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhhdmVyYWdlcywgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdCAgICBjaGFydHNbeWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW3llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0XG5cdCAgICB2YXIgaW5wdXR3cmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcImlucHV0LXdyYXBwZXJcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgZGF0YS5rZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSBpbnB1dHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpO1xuXHRcblx0ICAgICAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgXCJwb2xhci1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSkuYXR0cihcInZhbHVlXCIsIGtleSkucHJvcGVydHkoXCJjaGVja2VkXCIsIGtleSA9PT0geWVhciA/IHRydWUgOiBmYWxzZSkub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xuXHQgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGgucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgaWYgKCFjaGFydHMuaGFzT3duUHJvcGVydHkobmV3WWVhcikpIHtcblx0ICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcblx0ICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdQb2xhclBhdGgoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnKTtcblx0ICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKS50ZXh0KGtleSkuYXR0cihcImZvclwiLCBcInBvbGFyLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblx0XG5cdCAgICAgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImRpdlwiKS5zdHlsZShcImJhY2tncm91bmRcIiwgcHVsbERpc3RpbmN0Q29sb3Ioa2V5ICE9PSBcIm1lZGlhbnNcIiA/IGtleSA6IDApKS5jbGFzc2VkKFwiZ3JhcGgtcGlwLWV4YW1wbGVcIiwgdHJ1ZSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgXCJwb2xhci1hdmVyYWdlLVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKS5hdHRyKFwidmFsdWVcIiwgXCJtZWRpYW5zXCIpLnByb3BlcnR5KFwiY2hlY2tlZFwiLCB0cnVlKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd1BvbGFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xuXHRcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdCAgICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImxhYmVsXCIpLnRleHQoXCJCYXNlbGluZVwiKS5hdHRyKFwiZm9yXCIsIFwicG9sYXItYXZlcmFnZS1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG5cdFxuXHQgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImRpdlwiKS5zdHlsZShcImJhY2tncm91bmRcIiwgcHVsbERpc3RpbmN0Q29sb3IoMCkpLmNsYXNzZWQoXCJncmFwaC1waXAtZXhhbXBsZVwiLCB0cnVlKTtcblx0XG5cdCAgICB2YXIgdGhyZXNob2xkQ2hlY2tib3ggPSBpbnB1dHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJ0aHJlc2hvbGQtY2hlY2tib3hcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgdGhyZXNob2xkQ2hlY2tib3guYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpLnByb3BlcnR5KFwiY2hlY2tlZFwiLCB0cnVlKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHRocmVzaG9sZEVsZW0uc3R5bGUoXCJvcGFjaXR5XCIsIHRoaXMuY2hlY2tlZCA/IDEgOiAwKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHRocmVzaG9sZENoZWNrYm94LmFwcGVuZChcImxhYmVsXCIpLnRleHQoXCJUaHJlc2hvbGRzXCIpLmF0dHIoXCJmb3JcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuXHR9XG5cdFxuXHQvKiBQT0xBUiBHUkFQSCBIRUxQRVJTICovXG5cdFxuXHRmdW5jdGlvbiBmaW5kUG9sYXJDZW50ZXIoZGF0YSkge1xuXHQgICAgdmFyIGksIGosIGxlbmd0aCwgYXJyO1xuXHQgICAgdmFyIHRvdGFsU3VtID0gMDtcblx0ICAgIHZhciBpbmNvbXBsZXRlWWVhcnMgPSAwO1xuXHQgICAgdmFyIHN1bTtcblx0ICAgIGxlbmd0aCA9IDQ2O1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmtleXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBhcnIgPSBkYXRhW2RhdGEua2V5c1tpXV07XG5cdCAgICAgICAgaWYgKGFyci5sZW5ndGggIT09IGxlbmd0aCkge1xuXHQgICAgICAgICAgICBpbmNvbXBsZXRlWWVhcnMrKztcblx0ICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1bSA9IDA7XG5cdCAgICAgICAgZm9yIChqID0gMDsgaiA8IGxlbmd0aCAvIDI7IGorKykge1xuXHQgICAgICAgICAgICBzdW0gKz0gYXJyW2pdWzFdIC0gYXJyW2ogKyAyM11bMV07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1bSA9IHN1bSAvIDIzO1xuXHQgICAgICAgIHRvdGFsU3VtICs9IHN1bTtcblx0ICAgIH1cblx0ICAgIHRvdGFsU3VtID0gTWF0aC5hYnModG90YWxTdW0pIC8gKGRhdGEua2V5cy5sZW5ndGggLSBpbmNvbXBsZXRlWWVhcnMpO1xuXHRcblx0ICAgIHZhciBhcmVhRGlmZiA9IDEwMDAwMDA7XG5cdCAgICB2YXIgY2hlY2tEaWZmO1xuXHQgICAgdmFyIGFyZWFJbmRleCA9IDA7XG5cdCAgICB2YXIgbGVmdEFyZWEsIHJpZ2h0QXJlYTtcblx0ICAgIHZhciBhdmdzID0gZGF0YS5tZWRpYW5zO1xuXHQgICAgdmFyIGssIGNvdW50ZXI7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aCAvIDI7IGkrKykge1xuXHQgICAgICAgIGxlZnRBcmVhID0gMDtcblx0ICAgICAgICByaWdodEFyZWEgPSAwO1xuXHQgICAgICAgIGZvciAoY291bnRlciA9IDA7IGNvdW50ZXIgPCBsZW5ndGggLyAyOyBjb3VudGVyKyspIHtcblx0ICAgICAgICAgICAgaiA9IChpICsgY291bnRlcikgJSA0Njtcblx0ICAgICAgICAgICAgayA9IChqICsgMjMpICUgNDY7XG5cdFxuXHQgICAgICAgICAgICBsZWZ0QXJlYSArPSBwYXJzZUludChhdmdzW2pdLCAxMCk7XG5cdCAgICAgICAgICAgIHJpZ2h0QXJlYSArPSBwYXJzZUludChhdmdzW2tdLCAxMCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNoZWNrRGlmZiA9IE1hdGguYWJzKGxlZnRBcmVhIC0gcmlnaHRBcmVhKTtcblx0ICAgICAgICBpZiAoY2hlY2tEaWZmIDwgYXJlYURpZmYpIHtcblx0ICAgICAgICAgICAgYXJlYURpZmYgPSBjaGVja0RpZmY7XG5cdCAgICAgICAgICAgIGFyZWFJbmRleCA9IGk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBmaXJzdFJhZGl1cyA9IHBhcnNlSW50KGF2Z3NbYXJlYUluZGV4XSwgMTApO1xuXHQgICAgdmFyIHNlY29uZFJhZGl1cyA9IHBhcnNlSW50KC1hdmdzW2FyZWFJbmRleCArIDIzXSwgMTApO1xuXHRcblx0ICAgIHZhciBmaXJzdERpZmYgPSBNYXRoLmFicyh0b3RhbFN1bSAtIGZpcnN0UmFkaXVzKSAtIE1hdGguYWJzKHRvdGFsU3VtIC0gc2Vjb25kUmFkaXVzKTtcblx0ICAgIHZhciBzZWNvbmREaWZmID0gTWF0aC5hYnMoLXRvdGFsU3VtIC0gZmlyc3RSYWRpdXMpIC0gTWF0aC5hYnMoLXRvdGFsU3VtIC0gc2Vjb25kUmFkaXVzKTtcblx0ICAgIGlmIChzZWNvbmREaWZmID4gZmlyc3REaWZmKSB7XG5cdCAgICAgICAgYXJlYUluZGV4ID0gYXJlYUluZGV4ICsgMjM7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGNpcmNsZWNlbnRlciA9IFswLCAwXTtcblx0ICAgIHZhciBkYXRhY2VudGVyID0gW2FyZWFJbmRleCAqIDggKyAzLCB0b3RhbFN1bV07XG5cdFxuXHQgICAgcmV0dXJuIFtjaXJjbGVjZW50ZXIsIGRhdGFjZW50ZXJdO1xuXHR9XG5cdFxuXHQvKipcblx0ICogc3RhcnREYXkgaXMgYWN0dWFsbHkgdGhlIHNlYXNvbmFsaXR5IGluZGV4LCBpZiBpdCBvY2N1cnMgYWZ0ZXIganVseSBpdCBzaG91bGQgYmUgZmxpcHBlZFxuXHQgKi9cblx0ZnVuY3Rpb24gZmluZFBvbGFyVGhyZXNob2xkcyhkYXRhLCBzdGFydERheSkge1xuXHQgICAgdmFyIHN0YXJ0SW5kZXggPSBNYXRoLmZsb29yKChzdGFydERheSAtIDMpIC8gOCk7XG5cdCAgICBpZiAoc3RhcnRJbmRleCA+IDIyKSB7XG5cdCAgICAgICAgc3RhcnRJbmRleCA9IHN0YXJ0SW5kZXggLSAyMztcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaSwgaiwgbGVuZ3RoLCBhcnI7XG5cdCAgICB2YXIgdG90YWxTdW0gPSAwO1xuXHQgICAgdmFyIHN1bTtcblx0ICAgIGxlbmd0aCA9IDQ2O1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGogPSAoc3RhcnRJbmRleCArIGkpICUgbGVuZ3RoO1xuXHQgICAgICAgIHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZmlmdGVlblRocmVzaG9sZCA9IHRvdGFsU3VtICogLjE1O1xuXHQgICAgdmFyIGVpZ2h0eVRocmVzaG9sZCA9IHRvdGFsU3VtICogLjgwO1xuXHQgICAgdmFyIGZpZnRlZW5JbmRleEZvdW5kID0gZmFsc2UsXG5cdCAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IGZhbHNlO1xuXHQgICAgdmFyIGZpZnRlZW5JbmRleCwgZWlnaHR5SW5kZXg7XG5cdFxuXHQgICAgdG90YWxTdW0gPSAwO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgaiA9IChzdGFydEluZGV4ICsgaSkgJSBsZW5ndGg7XG5cdCAgICAgICAgdG90YWxTdW0gKz0gcGFyc2VJbnQoZGF0YVtqXSwgMTApO1xuXHQgICAgICAgIGlmICghZmlmdGVlbkluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBmaWZ0ZWVuVGhyZXNob2xkKSB7XG5cdCAgICAgICAgICAgIGZpZnRlZW5JbmRleCA9IGo7XG5cdCAgICAgICAgICAgIGZpZnRlZW5JbmRleEZvdW5kID0gdHJ1ZTtcblx0ICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICghZWlnaHR5SW5kZXhGb3VuZCAmJiB0b3RhbFN1bSA+IGVpZ2h0eVRocmVzaG9sZCkge1xuXHQgICAgICAgICAgICBlaWdodHlJbmRleCA9IGo7XG5cdCAgICAgICAgICAgIGVpZ2h0eUluZGV4Rm91bmQgPSB0cnVlO1xuXHQgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGNpcmNsZUNlbnRlciA9IFswLCAwXTtcblx0XG5cdCAgICB2YXIgZmlmdGVlbkVuZCA9IFtmaWZ0ZWVuSW5kZXggKiA4ICsgMywgMTAwXTtcblx0ICAgIHZhciBlaWdodHlFbmQgPSBbZWlnaHR5SW5kZXggKiA4ICsgMywgMTAwXTtcblx0XG5cdCAgICByZXR1cm4gW3tcblx0ICAgICAgICBcImxhYmVsXCI6IFwiMTUlXCIsXG5cdCAgICAgICAgXCJkYXRhXCI6IFtjaXJjbGVDZW50ZXIsIGZpZnRlZW5FbmRdXG5cdCAgICB9LCB7XG5cdCAgICAgICAgXCJsYWJlbFwiOiBcIjgwJVwiLFxuXHQgICAgICAgIFwiZGF0YVwiOiBbY2lyY2xlQ2VudGVyLCBlaWdodHlFbmRdXG5cdCAgICB9XTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIEhFTFBFUlMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIGRyYXdMaW5lYXJQYXRoKGRhdGEsIGxpbmUsIHN2Zykge1xuXHQgICAgcmV0dXJuIHN2Zy5hcHBlbmQoXCJwYXRoXCIpLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIikuYXR0cihcImRcIiwgbGluZShkYXRhKSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYXdQb2xhclBhdGgoZGF0YSwgbGluZSwgc3ZnKSB7XG5cdCAgICByZXR1cm4gc3ZnLmFwcGVuZChcInBhdGhcIikuZGF0dW0oZGF0YSkuYXR0cihcImNsYXNzXCIsIFwibGluZVwiKS5hdHRyKFwiZFwiLCBsaW5lKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhd0xpbmVhclBvaW50cyhkYXRhLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKSB7XG5cdCAgICByZXR1cm4gc3ZnLnNlbGVjdEFsbChcInBvaW50XCIpLmRhdGEoZGF0YSkuZW50ZXIoKS5hcHBlbmQoXCJjaXJjbGVcIikuYXR0cihcImNsYXNzXCIsIFwicG9pbnRcIikuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCwgaSkge1xuXHQgICAgICAgIHZhciBwb2ludCA9IEFycmF5LmlzQXJyYXkoZCkgPyBkIDogW2kgKiA4ICsgMywgZF07XG5cdCAgICAgICAgdmFyIGNvb3JzID0gbGluZShbcG9pbnRdKS5zbGljZSgxKS5zbGljZSgwLCAtMSk7XG5cdCAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgY29vcnMgKyBcIilcIjtcblx0ICAgIH0pLmF0dHIoXCJyXCIsIDMpLmF0dHIoXCJzdHJva2VcIiwgXCIjMDAwXCIpLmF0dHIoXCJmaWxsXCIsIGZ1bmN0aW9uIChkLCBpKSB7XG5cdCAgICAgICAgdmFyIHZhbCA9IEFycmF5LmlzQXJyYXkoZCkgPyBkWzBdLnN1YnN0cmluZygwLCA0KSA6IDA7XG5cdCAgICAgICAgcmV0dXJuIHB1bGxEaXN0aW5jdENvbG9yKHZhbCk7XG5cdCAgICB9KS5vbihcIm1vdXNlb3ZlclwiLCBoYW5kbGVQb2ludE1vdXNlb3Zlcikub24oXCJtb3VzZW91dFwiLCBoYW5kbGVQb2ludE1vdXNlb3V0KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlUG9pbnRNb3VzZW92ZXIoZCkge1xuXHQgICAgdmFyIHRpcFN0cmluZyA9IEFycmF5LmlzQXJyYXkoZCkgPyBmb3JtYXREYXRlKGRbMF0pICsgXCI6IFwiICsgZFsxXSA6IFwiQXZlcmFnZTogXCIgKyBkO1xuXHQgICAgdGlwLnNob3codGlwU3RyaW5nKTtcblx0ICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCA1KTtcblx0ICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMnB4XCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVQb2ludE1vdXNlb3V0KGQpIHtcblx0ICAgIHRpcC5oaWRlKCk7XG5cdCAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgMyk7XG5cdCAgICB0aGlzLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjFweFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQ2hlY2tib3god3JhcHBlciwga2V5LCB0eXBlLCB5ZWFyLCBjaGFydHMsIGRhdGEsIGxpbmUsIHN2ZywgYXZlcmFnZXMsIGxhdCwgbG5nKSB7XG5cdCAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIik7XG5cdFxuXHQgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImlucHV0XCIpLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIikuYXR0cihcImlkXCIsIHR5cGUgKyBcIi1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSkuYXR0cihcInZhbHVlXCIsIGtleSkucHJvcGVydHkoXCJjaGVja2VkXCIsIGtleSA9PT0geWVhciA/IHRydWUgOiBmYWxzZSkub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICB2YXIgbmV3WWVhciA9IHRoaXMudmFsdWU7XG5cdCAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGgucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMucmVtb3ZlKCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgaWYgKCFjaGFydHMuaGFzT3duUHJvcGVydHkobmV3WWVhcikpIHtcblx0ICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXSA9IHt9O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd0xpbmVhclBhdGgoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnKTtcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdCAgICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImxhYmVsXCIpLnRleHQoa2V5KS5hdHRyKFwiZm9yXCIsIHR5cGUgKyBcIi1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG5cdFxuXHQgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImRpdlwiKS5zdHlsZShcImJhY2tncm91bmRcIiwgcHVsbERpc3RpbmN0Q29sb3Ioa2V5ICE9PSBcIm1lZGlhbnNcIiA/IGtleSA6IDApKS5jbGFzc2VkKFwiZ3JhcGgtcGlwLWV4YW1wbGVcIiwgdHJ1ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHB1bGxEaXN0aW5jdENvbG9yKHllYXIpIHtcblx0ICAgIHZhciBjb2xvclJhbXAgPSBbXCIjZmZlNDc2XCIsIFwiIzAzNjU5M1wiLCBcIiMxMTZjOTFcIiwgXCIjMWU3MzkwXCIsIFwiIzJjN2I4ZVwiLCBcIiMzOTgyOGNcIiwgXCIjNGM4YzhhXCIsIFwiIzVlOTU4OVwiLCBcIiM3MTlmODdcIiwgXCIjODNhODg2XCIsIFwiIzk1YjE4M1wiLCBcIiNhNmJhODBcIiwgXCIjYjhjMzdjXCIsIFwiI2NhY2M3OVwiLCBcIiNkNmQyNzlcIiwgXCIjZTJkNzc5XCIsIFwiI2VmZGQ3OFwiLCBcIiNmYmUzNzhcIl07XG5cdFxuXHQgICAgcmV0dXJuIHllYXIgPT09IDAgPyBcIiNmZmZcIiA6IGNvbG9yUmFtcFtwYXJzZUludCh5ZWFyLCAxMCkgJSBjb2xvclJhbXAubGVuZ3RoXTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBEQVRFIEhFTFBFUlMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBwYXJzZURhdGUoZGF0ZSkge1xuXHQgICAgZGF0ZSA9IGRhdGUudG9TdHJpbmcoKTtcblx0ICAgIHZhciB5ZWFyID0gZGF0ZS5zdWJzdHJpbmcoMCwgNCk7XG5cdCAgICB2YXIgbW9udGggPSBwYXJzZUludChkYXRlLnN1YnN0cmluZyg0LCA2KSwgMTApIC0gMTtcblx0ICAgIHZhciBkYXkgPSBkYXRlLnN1YnN0cmluZyg2LCA4KTtcblx0XG5cdCAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhcnNlSnVsaWFuRGF5KGRhdGUpIHtcblx0ICAgIGlmICh0eXBlb2YgZGF0ZSA9PT0gXCJzdHJpbmdcIikge1xuXHQgICAgICAgIGRhdGUgPSBwYXJzZURhdGUoZGF0ZSk7XG5cdCAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RE9ZKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBkYXRlO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHtcblx0ICAgIGlmIChkYXRlID09PSBcIkF2ZXJhZ2VcIikge1xuXHQgICAgICAgIHJldHVybiBkYXRlO1xuXHQgICAgfVxuXHRcblx0ICAgIGRhdGUgPSBwYXJzZURhdGUoZGF0ZSk7XG5cdCAgICByZXR1cm4gZm9ybWF0TW9udGgoZGF0ZS5nZXRNb250aCgpKSArIFwiIFwiICsgb3JkaW5hbF9zdWZmaXhfb2YoZGF0ZS5nZXREYXRlKCkpICsgXCIsIFwiICsgZGF0ZS5nZXRGdWxsWWVhcigpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRNb250aChtb250aCkge1xuXHQgICAgc3dpdGNoIChtb250aCkge1xuXHQgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiSmFuLlwiO1xuXHQgICAgICAgIGNhc2UgMTpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiRmViLlwiO1xuXHQgICAgICAgIGNhc2UgMjpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiTWFyLlwiO1xuXHQgICAgICAgIGNhc2UgMzpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiQXByLlwiO1xuXHQgICAgICAgIGNhc2UgNDpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiTWF5XCI7XG5cdCAgICAgICAgY2FzZSA1OlxuXHQgICAgICAgICAgICByZXR1cm4gXCJKdW4uXCI7XG5cdCAgICAgICAgY2FzZSA2OlxuXHQgICAgICAgICAgICByZXR1cm4gXCJKdWwuXCI7XG5cdCAgICAgICAgY2FzZSA3OlxuXHQgICAgICAgICAgICByZXR1cm4gXCJBdWcuXCI7XG5cdCAgICAgICAgY2FzZSA4OlxuXHQgICAgICAgICAgICByZXR1cm4gXCJTZXAuXCI7XG5cdCAgICAgICAgY2FzZSA5OlxuXHQgICAgICAgICAgICByZXR1cm4gXCJPY3QuXCI7XG5cdCAgICAgICAgY2FzZSAxMDpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiTm92LlwiO1xuXHQgICAgICAgIGNhc2UgMTE6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkRlYy5cIjtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gb3JkaW5hbF9zdWZmaXhfb2YoZGF5KSB7XG5cdCAgICB2YXIgaiA9IGRheSAlIDEwLFxuXHQgICAgICAgIGsgPSBkYXkgJSAxMDA7XG5cdCAgICBpZiAoaiA9PT0gMSAmJiBrICE9PSAxMSkge1xuXHQgICAgICAgIHJldHVybiBkYXkgKyBcInN0XCI7XG5cdCAgICB9XG5cdCAgICBpZiAoaiA9PT0gMiAmJiBrICE9PSAxMikge1xuXHQgICAgICAgIHJldHVybiBkYXkgKyBcIm5kXCI7XG5cdCAgICB9XG5cdCAgICBpZiAoaiA9PT0gMyAmJiBrICE9PSAxMykge1xuXHQgICAgICAgIHJldHVybiBkYXkgKyBcInJkXCI7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZGF5ICsgXCJ0aFwiO1xuXHR9XG5cdFxuXHR2YXIgTU9OVEhfTEFCRUxTID0ge1xuXHQgICAgMDogXCJKYW5cIixcblx0ICAgIDE6IFwiRmViXCIsXG5cdCAgICAyOiBcIk1hclwiLFxuXHQgICAgMzogXCJBcHJcIixcblx0ICAgIDQ6IFwiTWF5XCIsXG5cdCAgICA1OiBcIkp1blwiLFxuXHQgICAgNjogXCJKdWxcIixcblx0ICAgIDc6IFwiQXVnXCIsXG5cdCAgICA4OiBcIlNlcFwiLFxuXHQgICAgOTogXCJPY3RcIixcblx0ICAgIDEwOiBcIk5vdlwiLFxuXHQgICAgMTE6IFwiRGVjXCJcblx0fTtcblxuLyoqKi8gfSksXG4vKiAyOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5CaW5kVGFiRXZlbnRzID0gQmluZFRhYkV2ZW50cztcblx0ZXhwb3J0cy5HZXRBY3RpdmVUYWIgPSBHZXRBY3RpdmVUYWI7XG5cdGV4cG9ydHMuSGFuZGxlVGFiQ2hhbmdlID0gSGFuZGxlVGFiQ2hhbmdlO1xuXHRcblx0dmFyIF9wYW5lbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0ZnVuY3Rpb24gQmluZFRhYkV2ZW50cygpIHtcblx0ICAgIGQzLnNlbGVjdEFsbChcIi5wYW5lbC10b3AtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2spO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBHZXRBY3RpdmVUYWIoKSB7XG5cdCAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInBhbmVsLXRvcC1idG4gYWN0aXZlXCIpWzBdLmdldEF0dHJpYnV0ZShcImRhdGEtYWN0aXZlXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVUYWJIZWFkZXJCdG5DbGljaygpIHtcblx0ICAgIC8vIElmIHRoZSBzZWN0aW9uIGlzIGFscmVhZHkgYWN0aXZlLCBkbyBub3RoaW5nXG5cdCAgICBpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHJldHVybjtcblx0ICAgIEhhbmRsZVRhYkNoYW5nZSh0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtYWN0aXZlXCIpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gSGFuZGxlVGFiQ2hhbmdlKG5ld0NsYXNzKSB7XG5cdCAgICBkaXNhYmxlQWN0aXZlVGFiKCk7XG5cdCAgICBlbmFibGVUYWIobmV3Q2xhc3MpO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZW5hYmxlVGFiKG5ld0NsYXNzKSB7XG5cdCAgICBkMy5zZWxlY3QoXCIucGFuZWwtdG9wLWJ0bltkYXRhLWFjdGl2ZT0nXCIgKyBuZXdDbGFzcyArIFwiJ11cIikuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblx0XG5cdCAgICBkMy5zZWxlY3RBbGwoXCIjbWFwLXdyYXBwZXIsICNyaWdodC1wYW5lbFwiKS5jbGFzc2VkKG5ld0NsYXNzLCB0cnVlKTtcblx0XG5cdCAgICBkMy5zZWxlY3QoXCIucGFuZWwtc2VjdGlvbi13cmFwcGVyW2RhdGEtYWN0aXZlPSdcIiArIG5ld0NsYXNzICsgXCInXVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHRcblx0ICAgIHRvZ2dsZU1hcFBhZGRpbmcoKTtcblx0ICAgICgwLCBfcGFuZWwudXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZGlzYWJsZUFjdGl2ZVRhYigpIHtcblx0ICAgIHZhciBhY3RpdmVDbGFzcyA9IGQzLnNlbGVjdChcIi5wYW5lbC10b3AtYnRuLmFjdGl2ZVwiKS5hdHRyKFwiZGF0YS1hY3RpdmVcIik7XG5cdFxuXHQgICAgZDMuc2VsZWN0QWxsKCcjbWFwLXdyYXBwZXIsICNyaWdodC1wYW5lbCcpLmNsYXNzZWQoYWN0aXZlQ2xhc3MsIGZhbHNlKTtcblx0XG5cdCAgICBkMy5zZWxlY3RBbGwoJy5wYW5lbC10b3AtYnRuLmFjdGl2ZSwgLnBhbmVsLXNlY3Rpb24td3JhcHBlci5hY3RpdmUnKS5jbGFzc2VkKCdhY3RpdmUnLCBmYWxzZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvZ2dsZU1hcFBhZGRpbmcoKSB7XG5cdCAgICB2YXIgcGFkZGluZ1JpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyaWdodC1wYW5lbFwiKS5vZmZzZXRXaWR0aDtcblx0ICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwLXdyYXBwZXJcIikuc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGFkZGluZ1JpZ2h0ICsgXCJweFwiO1xuXHR9XG5cbi8qKiovIH0pLFxuLyogMzAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLnNldFNsaWRlckluaXRpYWxQb3MgPSBzZXRTbGlkZXJJbml0aWFsUG9zO1xuXHRleHBvcnRzLm1ha2VPcGFjaXR5U2xpZGVyID0gbWFrZU9wYWNpdHlTbGlkZXI7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHR2YXIgX2xheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHQvLyBzZXQgaXQgbWFudWFsbHkgZm9yIG5vd1xuXHR2YXIgT1BBQ0lUWV9SQU5HRV9NQVggPSA5MDtcblx0XG5cdHZhciBvcGFjaXR5U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMSwgMF0pLnJhbmdlKFswLCBPUEFDSVRZX1JBTkdFX01BWF0pLmNsYW1wKHRydWUpO1xuXHRcblx0ZnVuY3Rpb24gc2V0U2xpZGVySW5pdGlhbFBvcyhsYXllciwgc2xpZGVySGFuZGxlKSB7XG5cdFxuXHQgICAgdmFyIGxheWVyT3BhY2l0eSA9IGxheWVyLm9wYWNpdHkgfHwgMTtcblx0ICAgIHZhciBoYW5kbGVPZmZzZXQgPSBvcGFjaXR5U2NhbGUobGF5ZXJPcGFjaXR5KTtcblx0XG5cdCAgICBzbGlkZXJIYW5kbGUuc3R5bGUudG9wID0gJycgKyBoYW5kbGVPZmZzZXQgKyAncHgnO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlT3BhY2l0eVNsaWRlcihsYXllcikge1xuXHQgICAgdmFyIGxheWVyT3BhY2l0eSA9IGxheWVyLm9wYWNpdHkgIT09IHVuZGVmaW5lZCA/IGxheWVyLm9wYWNpdHkgOiAxO1xuXHRcblx0ICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktc2xpZGVyLXdyYXBwZXInKTtcblx0ICAgIHZhciBzbGlkZXJUcmFjayA9IG1ha2VTbGlkZXJUcmFjayhsYXllciwgbGF5ZXJPcGFjaXR5KTtcblx0XG5cdCAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNsaWRlclRyYWNrKTtcblx0ICAgIHJldHVybiB3cmFwcGVyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlU2xpZGVyVHJhY2sobGF5ZXIsIGxheWVyT3BhY2l0eSkge1xuXHRcblx0ICAgIHZhciBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICB2YXIgdHJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIHZhciBzbGlkZXJIYW5kbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1zbGlkZXItdHJhY2stb3ZlcmxheScpO1xuXHQgICAgdHJhY2suY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1zbGlkZXItdHJhY2snKTtcblx0ICAgIHNsaWRlckhhbmRsZS5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci1oYW5kbGUnKTtcblx0XG5cdCAgICBvdmVybGF5LmFwcGVuZENoaWxkKHRyYWNrKTtcblx0ICAgIG92ZXJsYXkuYXBwZW5kKHNsaWRlckhhbmRsZSk7XG5cdFxuXHQgICAgaWYgKGxheWVyLmFjdGl2ZSkgc2V0U2xpZGVySW5pdGlhbFBvcyhsYXllciwgc2xpZGVySGFuZGxlKTtcblx0ICAgIHNldERyYWdFdmVudExpc3RlbmVyKG92ZXJsYXksIGxheWVyLCBsYXllck9wYWNpdHkpO1xuXHRcblx0ICAgIHJldHVybiBvdmVybGF5O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXREcmFnRXZlbnRMaXN0ZW5lcihvdmVybGF5LCBsYXllciwgbGF5ZXJPcGFjaXR5KSB7XG5cdCAgICBkMy5zZWxlY3Qob3ZlcmxheSkuY2FsbChkMy5kcmFnKCkub24oJ3N0YXJ0IGRyYWcnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIG5ld09wYWNpdHkgPSBjYWxjT3BhY2l0eUZyb21Nb3VzZVBvcyhvdmVybGF5KTtcblx0ICAgICAgICAoMCwgX2xheWVyLnVwZGF0ZUxheWVyT3BhY2l0eSkobGF5ZXIsIG5ld09wYWNpdHkpO1xuXHQgICAgICAgIGFkanVzdFNsaWRlckhhbmRsZShvdmVybGF5LCBuZXdPcGFjaXR5KTtcblx0ICAgIH0pLm9uKCdlbmQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0ICAgIH0pKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRqdXN0U2xpZGVySGFuZGxlKG92ZXJsYXksIG5ld09wYWNpdHkpIHtcblx0ICAgIHZhciBoYW5kbGUgPSBvdmVybGF5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ29wYWNpdHktc2xpZGVyLWhhbmRsZScpWzBdO1xuXHQgICAgaGFuZGxlLnN0eWxlLnRvcCA9ICcnICsgb3BhY2l0eVNjYWxlKG5ld09wYWNpdHkpICsgJ3B4Jztcblx0fVxuXHRcblx0ZnVuY3Rpb24gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSkge1xuXHQgICAgdmFyIHlQb3MgPSBkMy5tb3VzZShvdmVybGF5KVsxXTtcblx0ICAgIHZhciBuZXdPcGFjaXR5ID0gb3BhY2l0eVNjYWxlLmludmVydCh5UG9zKTtcblx0ICAgIHJldHVybiBuZXdPcGFjaXR5O1xuXHR9XG5cbi8qKiovIH0pLFxuLyogMzEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENyZWF0ZUxvZ287XG5cdC8qXG5cdCAgXCJsb2dvXCI6IHtcblx0ICAgIFwiaW1hZ2VcIjogXCJpbWdzL2xhbmRhdF9sb2dvX2JsdWUucG5nXCIsXG5cdCAgICBcImFsdFwiOiBcIkxvZ28gZm9yIHRoZSBMYW5EYXQgcHJvamVjdFwiLFxuXHQgICAgXCJsaW5rXCI6IFwiaHR0cHM6Ly9sYW5kYXQtZGV2Lm5lbWFjLm9yZ1wiLFxuXHQgICAgXCJsb2NhdGlvblwiOiBbXCJib3R0b21cIiwgXCJyaWdodFwiXVxuXHQgIH0sXG5cdCovXG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVMb2dvKGxvZ29kYXRhKSB7XG5cdCAgICBpZiAoIWxvZ29kYXRhLmltYWdlKSByZXR1cm47XG5cdFxuXHQgICAgdmFyIGxvZ29XcmFwcGVyID0gY3JlYXRlTG9nb1dyYXBwZXIoKTtcblx0ICAgIHZhciBsb2dvSW1hZ2UgPSBjcmVhdGVMb2dvSW1hZ2UobG9nb2RhdGEpO1xuXHQgICAgdmFyIGxvZ29MaW5rID0gbG9nb2RhdGEubGluayA/IGNyZWF0ZUxvZ29MaW5rKGxvZ29kYXRhLmxpbmspIDogbnVsbDtcblx0XG5cdCAgICBpZiAobG9nb0xpbmspIHtcblx0ICAgICAgICBsb2dvTGluay5hcHBlbmRDaGlsZChsb2dvSW1hZ2UpO1xuXHQgICAgICAgIGxvZ29XcmFwcGVyLmFwcGVuZENoaWxkKGxvZ29MaW5rKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbG9nb1dyYXBwZXIuYXBwZW5kQ2hpbGQobG9nb0ltYWdlKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaW5zZXJ0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUobG9nb2RhdGEubG9jYXRpb24pWzBdO1xuXHQgICAgdmFyIGV4aXN0aW5nQ2hpbGQgPSBpbnNlcnRFbGVtZW50LmZpcnN0Q2hpbGQ7XG5cdCAgICBpbnNlcnRFbGVtZW50Lmluc2VydEJlZm9yZShsb2dvV3JhcHBlciwgZXhpc3RpbmdDaGlsZCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUxvZ29XcmFwcGVyKCkge1xuXHQgICAgdmFyIGxvZ29XcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0ICAgIGQzLnNlbGVjdChsb2dvV3JhcHBlcikuY2xhc3NlZChcInByb2plY3QtbG9nb1wiLCB0cnVlKTtcblx0ICAgIHJldHVybiBsb2dvV3JhcHBlcjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlTG9nb0ltYWdlKGxvZ29kYXRhKSB7XG5cdCAgICB2YXIgbG9nb0ltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcblx0ICAgIGxvZ29JbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbG9nb2RhdGEuaW1hZ2UpO1xuXHQgICAgaWYgKGxvZ29kYXRhLmxhYmVsKSB7XG5cdCAgICAgICAgbG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcImFsdFwiLCBsb2dvZGF0YS5sYWJlbCk7XG5cdCAgICAgICAgbG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIGxvZ29kYXRhLmxhYmVsKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBsb2dvSW1hZ2U7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUxvZ29MaW5rKGxpbmspIHtcblx0ICAgIHZhciBsb2dvTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuXHQgICAgbG9nb0xpbmsuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBsaW5rKTtcblx0ICAgIGxvZ29MaW5rLnNldEF0dHJpYnV0ZShcInRhcmdldFwiLCBcIl9ibGFua1wiKTtcblx0ICAgIHJldHVybiBsb2dvTGluaztcblx0fVxuXG4vKioqLyB9KSxcbi8qIDMyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBpbmRleF9idW5kbGUuanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCAwMDdjNThkMjViODM4ZGMyZmQ3YyIsImltcG9ydCB7UGFyc2VDb25maWd9IGZyb20gJy4vcGFyc2VyJztcbmltcG9ydCBDcmVhdGVTZWFyY2ggZnJvbSAnLi9zZWFyY2gnO1xuaW1wb3J0IHtTZXR1cFBhbmVsfSBmcm9tICcuL3BhbmVsJztcbmltcG9ydCB7Q3JlYXRlQmFzZUxheWVyc30gZnJvbSAnLi9iYXNlbGF5ZXInO1xuaW1wb3J0IHtTZXR1cEdyYXBocywgQmluZEdyYXBoRXZlbnRzLCBIYW5kbGVHcmFwaFRhYkNoYW5nZX0gZnJvbSAnLi9ncmFwaCdcbmltcG9ydCB7QmluZFRhYkV2ZW50cywgSGFuZGxlVGFiQ2hhbmdlfSBmcm9tICcuL3RhYnMnXG5pbXBvcnQge0NyZWF0ZU1hcH0gZnJvbSAnLi9tYXAnXG5pbXBvcnQge0JpbmRVcGRhdGVTaGFyZVVybCwgQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnLCBCaW5kQ29weUxpbmtFdmVudHN9IGZyb20gJy4vc2hhcmUnXG5pbXBvcnQge0NyZWF0ZURlZmF1bHRMYXllcnN9IGZyb20gJy4vbGF5ZXInXG5pbXBvcnQgQ3JlYXRlTG9nbyBmcm9tICcuL2xvZ28nO1xuaW1wb3J0IHtTZXR1cFBvaW50c09mSW50ZXJlc3R9IGZyb20gJy4vcG9pJztcbmltcG9ydCB7dXBkYXRlU2hhcmVVcmx9IGZyb20gJy4vc2hhcmUnO1xuXG52YXIgY3NzID0gcmVxdWlyZSgnLi4vY3NzL3Nhc3MvbGFuZGF0LnNjc3MnKVxuXG4vLyBEb2VzIG5vdCByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcbnZhciBCYXNlID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgIFBhcnNlQ29uZmlnKGNvbmZpZywgY2FsbGJhY2spO1xuICAgIFNldHVwR3JhcGhzKCk7XG4gICAgQmluZFRhYkV2ZW50cygpO1xuICAgIEJpbmRDb3B5TGlua0V2ZW50cygpO1xufVxuXG4vLyBEb2VzIHJlbHkgb24gbWFwIG9iamVjdCBvciBjb25maWcgZmlsZVxudmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICBBZGRTaGFyZVNldHRpbmdzVG9Db25maWcoZGF0YSlcbiAgICB2YXIgbWFwID0gQ3JlYXRlTWFwKGRhdGEubWFwKTtcbiAgICBDcmVhdGVCYXNlTGF5ZXJzKG1hcCwgZGF0YS5iYXNlbGF5ZXJzKTtcbiAgICBDcmVhdGVEZWZhdWx0TGF5ZXJzKGRhdGEubGF5ZXJzLCBkYXRhW1wiYWN0aXZlLWxheWVyc1wiXSk7XG4gICAgU2V0dXBQYW5lbChkYXRhLmxheWVycywgZGF0YS5sYXlvdXQpO1xuICAgIENyZWF0ZVNlYXJjaChtYXApO1xuICAgIENyZWF0ZUxvZ28oZGF0YS5sb2dvKTtcbiAgICBpZiAoZGF0YS50YWIpIEhhbmRsZVRhYkNoYW5nZShkYXRhLnRhYik7XG4gICAgaWYgKGRhdGEuZ3JhcGgpIEhhbmRsZUdyYXBoVGFiQ2hhbmdlKGRhdGEuZ3JhcGgpO1xuICAgIEJpbmRHcmFwaEV2ZW50cyhtYXApO1xuICAgIEJpbmRVcGRhdGVTaGFyZVVybChtYXApO1xuICAgIFNldHVwUG9pbnRzT2ZJbnRlcmVzdChtYXAsIGRhdGEucG9pcylcbiAgICB1cGRhdGVTaGFyZVVybCgpXG59XG5cbndpbmRvdy5CYXNlID0gQmFzZTtcblxuZXhwb3J0IGRlZmF1bHQge0Jhc2V9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvYmFzZS5qcyIsIi8qKlxuICogUGFyc2VzIGEgY29uZmlnIGZpbGUuIFNpbmNlIHRoZSBwcm9jZXNzIHRvIGdldCBleHRlcm5hbCBmaWxlc1xuICogdXNlcyBBSkFYIHlvdSBuZWVkIHRvIHBhc3MgYSBjYWxsYmFjayB0byBoYW5kbGUgdGhlIG5leHQgc3RlcHNcbiAqIG9mIHVzaW5nIHRoZSBjb25maWcgZmlsZSwgc2luY2Ugd2UgZG8gbm90IGtub3cgaG93IGxvbmcgaXRcbiAqIHdpbGwgdGFrZSB0byBncmFiIHRoZSBmaWxlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gUGFyc2VDb25maWcgKGNvbmZpZ0ZpbGUsIGNhbGxiYWNrKSB7XG4gICAgR2V0Q29uZmlnKGNvbmZpZ0ZpbGUsIGNhbGxiYWNrKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEdldEFqYXhPYmplY3QocmVzcG9uc2VIYW5kbGVyKSB7XG4gICAgdmFyIHhtbGh0dHBcbiAgICBpZiAod2luZG93LkFjdGl2ZVhPYmplY3QpIHtcbiAgICAgICAgeG1saHR0cCA9IG5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdChcIk1TWE1MMi5YTUxIVFRQLjMuMFwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuICAgIH1cbiAgICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHhtbGh0dHAucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgcmVzcG9uc2VIYW5kbGVyKHhtbGh0dHAucmVzcG9uc2VUZXh0KVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB4bWxodHRwXG59XG5cbmZ1bmN0aW9uIEdldENvbmZpZyAoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgeG1saHR0cCA9IEdldEFqYXhPYmplY3QoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2VIYW5kbGVyKHJlc3BvbnNlKVxuICAgICAgICBjYWxsYmFjayhkYXRhKVxuICAgIH0pXG4gICAgeG1saHR0cC5vcGVuKFwiR0VUXCIsIGNvbmZpZ0ZpbGUsIHRydWUpO1xuICAgIHhtbGh0dHAuc2VuZCgpO1xuICAgIGNvbnNvbGUubG9nKFwiaGlcIilcbn1cblxuZnVuY3Rpb24gcmVzcG9uc2VIYW5kbGVyIChyZXNwb25zZSkge1xuICAgIHRyeSB7XG4gICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XG4gICAgfSBjYXRjaChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUjogTWFsZm9ybWVkIEpTT04gaW4gY29uZmlnIGZpbGUuXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH1cbiAgICBmb3JtYXRNYXAoZGF0YSk7XG4gICAgZm9ybWF0TGF5ZXJzKGRhdGEpO1xuICAgIHJldHVybiBkYXRhXG59XG5cbmZ1bmN0aW9uIGZvcm1hdE1hcCAoZGF0YSkge1xuICAgIGlmICghZGF0YS5tYXApIGRhdGEubWFwID0ge307XG59XG5cbmZ1bmN0aW9uIGZvcm1hdExheWVycyAoZGF0YSkge1xuICAgIHZhciBsYXllcnMgPSBkYXRhLmxheWVycztcbiAgICB2YXIgZGVmYXVsdE1hcHNlcnZlclVybCA9IGRhdGEubWFwc2VydmVyVXJsO1xuICAgIHZhciBkZWZhdWx0RW5hYmxlZExheWVycyA9IGRhdGFbXCJhY3RpdmUtbGF5ZXJzXCJdO1xuICAgIHZhciBsYXllcmdyb3VwO1xuICAgIHZhciBpO1xuXG4gICAgZm9yICh2YXIgcHJvcCBpbiBsYXllcnMpIHtcbiAgICAgICAgaWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcbiAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxheWVyZ3JvdXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHNldE1hcHNlcnZlclVybChsYXllcmdyb3VwW2ldLCBkZWZhdWx0TWFwc2VydmVyVXJsKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gc2V0TWFwc2VydmVyVXJsIChsYXllciwgdXJsKSB7XG4gICAgbGF5ZXIudXJsID0gbGF5ZXIudXJsIHx8IHVybDtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3BhcnNlci5qcyIsImltcG9ydCB7IEdlb1NlYXJjaENvbnRyb2wsIEVzcmlQcm92aWRlciB9IGZyb20gJ2xlYWZsZXQtZ2Vvc2VhcmNoJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ3JlYXRlU2VhcmNoIChtYXApIHtcbiAgICBjb25zdCBwcm92aWRlciA9IG5ldyBFc3JpUHJvdmlkZXIoKTtcblxuICAgIGNvbnN0IHNlYXJjaENvbnRyb2wgPSBuZXcgR2VvU2VhcmNoQ29udHJvbCh7XG4gICAgICAgIHByb3ZpZGVyOiBwcm92aWRlcixcbiAgICAgICAgc2hvd01hcmtlcjogZmFsc2UsXG4gICAgICAgIGF1dG9Db21wbGV0ZTogZmFsc2UsXG4gICAgfSk7XG5cbiAgICBtYXAuYWRkQ29udHJvbChzZWFyY2hDb250cm9sKTtcblxuICAgIEwuRG9tRXZlbnQub24oc2VhcmNoQ29udHJvbC5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmNvbnRhaW5lciwgXCJjbGlja1wiLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgTC5Eb21FdmVudC5zdG9wUHJvcGFnYXRpb24oZXYpO1xuICAgIH0pO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvc2VhcmNoLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2xlYWZsZXRDb250cm9sID0gcmVxdWlyZSgnLi9sZWFmbGV0Q29udHJvbCcpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0dlb1NlYXJjaENvbnRyb2wnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sZWFmbGV0Q29udHJvbCkuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfc2VhcmNoRWxlbWVudCA9IHJlcXVpcmUoJy4vc2VhcmNoRWxlbWVudCcpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1NlYXJjaEVsZW1lbnQnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2hFbGVtZW50KS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9iaW5nUHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9iaW5nUHJvdmlkZXInKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdCaW5nUHJvdmlkZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iaW5nUHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX2VzcmlQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL2VzcmlQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0VzcmlQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VzcmlQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfZ29vZ2xlUHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9nb29nbGVQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0dvb2dsZVByb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ29vZ2xlUHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX29wZW5TdHJlZXRNYXBQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL29wZW5TdHJlZXRNYXBQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ09wZW5TdHJlZXRNYXBQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29wZW5TdHJlZXRNYXBQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9wcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1Byb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL2luZGV4LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX25vZGVudFJ1bnRpbWUgPSByZXF1aXJlKCdub2RlbnQtcnVudGltZScpO1xuXG52YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IExlYWZsZXRDb250cm9sO1xuXG52YXIgX2xvZGFzaCA9IHJlcXVpcmUoJ2xvZGFzaC5kZWJvdW5jZScpO1xuXG52YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXG52YXIgX3NlYXJjaEVsZW1lbnQgPSByZXF1aXJlKCcuL3NlYXJjaEVsZW1lbnQnKTtcblxudmFyIF9zZWFyY2hFbGVtZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaEVsZW1lbnQpO1xuXG52YXIgX3Jlc3VsdExpc3QgPSByZXF1aXJlKCcuL3Jlc3VsdExpc3QnKTtcblxudmFyIF9yZXN1bHRMaXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Jlc3VsdExpc3QpO1xuXG52YXIgX2RvbVV0aWxzID0gcmVxdWlyZSgnLi9kb21VdGlscycpO1xuXG52YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBkZWZhdWx0T3B0aW9ucyA9IGZ1bmN0aW9uIGRlZmF1bHRPcHRpb25zKCkge1xuICByZXR1cm4ge1xuICAgIHBvc2l0aW9uOiAndG9wbGVmdCcsXG4gICAgc3R5bGU6ICdidXR0b24nLFxuICAgIHNob3dNYXJrZXI6IHRydWUsXG4gICAgc2hvd1BvcHVwOiBmYWxzZSxcbiAgICBtYXJrZXI6IHtcbiAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpLFxuICAgICAgZHJhZ2dhYmxlOiBmYWxzZVxuICAgIH0sXG4gICAgbWF4TWFya2VyczogMSxcbiAgICByZXRhaW5ab29tTGV2ZWw6IGZhbHNlLFxuICAgIGFuaW1hdGVab29tOiB0cnVlLFxuICAgIHNlYXJjaExhYmVsOiAnRW50ZXIgYWRkcmVzcycsXG4gICAgbm90Rm91bmRNZXNzYWdlOiAnU29ycnksIHRoYXQgYWRkcmVzcyBjb3VsZCBub3QgYmUgZm91bmQuJyxcbiAgICBtZXNzYWdlSGlkZURlbGF5OiAzMDAwLFxuICAgIHpvb21MZXZlbDogMTgsXG4gICAgY2xhc3NOYW1lczoge1xuICAgICAgY29udGFpbmVyOiAnbGVhZmxldC1iYXIgbGVhZmxldC1jb250cm9sIGxlYWZsZXQtY29udHJvbC1nZW9zZWFyY2gnLFxuICAgICAgYnV0dG9uOiAnbGVhZmxldC1iYXItcGFydCBsZWFmbGV0LWJhci1wYXJ0LXNpbmdsZScsXG4gICAgICBtc2dib3g6ICdsZWFmbGV0LWJhciBtZXNzYWdlJyxcbiAgICAgIGZvcm06ICcnLFxuICAgICAgaW5wdXQ6ICcnXG4gICAgfSxcbiAgICBhdXRvQ29tcGxldGU6IHRydWUsXG4gICAgYXV0b0NvbXBsZXRlRGVsYXk6IDI1MFxuICB9O1xufTtcblxudmFyIENvbnRyb2wgPSB7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUob3B0aW9ucykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB0aGlzLm1hcmtlcnMgPSBuZXcgTC5GZWF0dXJlR3JvdXAoKTtcblxuICAgIHRoaXMub3B0aW9ucyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0T3B0aW9ucygpLCBvcHRpb25zKTtcblxuICAgIHZhciBfb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgc3R5bGUgPSBfb3B0aW9ucy5zdHlsZSxcbiAgICAgICAgY2xhc3NOYW1lcyA9IF9vcHRpb25zLmNsYXNzTmFtZXMsXG4gICAgICAgIHNlYXJjaExhYmVsID0gX29wdGlvbnMuc2VhcmNoTGFiZWwsXG4gICAgICAgIGF1dG9Db21wbGV0ZSA9IF9vcHRpb25zLmF1dG9Db21wbGV0ZSxcbiAgICAgICAgYXV0b0NvbXBsZXRlRGVsYXkgPSBfb3B0aW9ucy5hdXRvQ29tcGxldGVEZWxheTtcblxuICAgIGlmIChzdHlsZSAhPT0gJ2J1dHRvbicpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5jbGFzc05hbWVzLmNvbnRhaW5lciArPSAnICcgKyBvcHRpb25zLnN0eWxlO1xuICAgIH1cblxuICAgIHRoaXMuc2VhcmNoRWxlbWVudCA9IG5ldyBfc2VhcmNoRWxlbWVudDIuZGVmYXVsdChfZXh0ZW5kcyh7fSwgdGhpcy5vcHRpb25zLCB7XG4gICAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChxdWVyeSkge1xuICAgICAgICByZXR1cm4gX3RoaXMub25TdWJtaXQocXVlcnkpO1xuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHZhciBfc2VhcmNoRWxlbWVudCRlbGVtZW4gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMsXG4gICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5jb250YWluZXIsXG4gICAgICAgIGZvcm0gPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uZm9ybSxcbiAgICAgICAgaW5wdXQgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uaW5wdXQ7XG5cbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9KTtcblxuICAgIHZhciBidXR0b24gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdhJywgY2xhc3NOYW1lcy5idXR0b24sIGNvbnRhaW5lcik7XG4gICAgYnV0dG9uLnRpdGxlID0gc2VhcmNoTGFiZWw7XG4gICAgYnV0dG9uLmhyZWYgPSAnIyc7XG5cbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25DbGljayhlKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICBpZiAoYXV0b0NvbXBsZXRlKSB7XG4gICAgICB0aGlzLnJlc3VsdExpc3QgPSBuZXcgX3Jlc3VsdExpc3QyLmRlZmF1bHQoe1xuICAgICAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2soX3JlZikge1xuICAgICAgICAgIHZhciByZXN1bHQgPSBfcmVmLnJlc3VsdDtcblxuICAgICAgICAgIGlucHV0LnZhbHVlID0gcmVzdWx0LmxhYmVsO1xuICAgICAgICAgIF90aGlzLm9uU3VibWl0KHsgcXVlcnk6IHJlc3VsdC5sYWJlbCB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGZvcm0uYXBwZW5kQ2hpbGQodGhpcy5yZXN1bHRMaXN0LmVsZW1lbnRzLmNvbnRhaW5lcik7XG5cbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKDAsIF9sb2Rhc2gyLmRlZmF1bHQpKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5hdXRvU2VhcmNoKGUpO1xuICAgICAgfSwgYXV0b0NvbXBsZXRlRGVsYXkpLCB0cnVlKTtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2VsZWN0UmVzdWx0KGUpO1xuICAgICAgfSwgdHJ1ZSk7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmNsZWFyUmVzdWx0cyhlKTtcbiAgICAgIH0sIHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudHMgPSB7IGJ1dHRvbjogYnV0dG9uIH07XG4gIH0sXG4gIG9uQWRkOiBmdW5jdGlvbiBvbkFkZChtYXApIHtcbiAgICB2YXIgX29wdGlvbnMyID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBzaG93TWFya2VyID0gX29wdGlvbnMyLnNob3dNYXJrZXIsXG4gICAgICAgIHN0eWxlID0gX29wdGlvbnMyLnN0eWxlO1xuXG5cbiAgICB0aGlzLm1hcCA9IG1hcDtcbiAgICBpZiAoc2hvd01hcmtlcikge1xuICAgICAgdGhpcy5tYXJrZXJzLmFkZFRvKG1hcCk7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlID09PSAnYmFyJykge1xuICAgICAgdmFyIGZvcm0gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuZm9ybTtcblxuICAgICAgdmFyIHJvb3QgPSBtYXAuZ2V0Q29udGFpbmVyKCkucXVlcnlTZWxlY3RvcignLmxlYWZsZXQtY29udHJvbC1jb250YWluZXInKTtcblxuICAgICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsICdsZWFmbGV0LWNvbnRyb2wtZ2Vvc2VhcmNoIGJhcicpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZvcm0pO1xuICAgICAgcm9vdC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgICAgdGhpcy5lbGVtZW50cy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5jb250YWluZXI7XG4gIH0sXG4gIG9uUmVtb3ZlOiBmdW5jdGlvbiBvblJlbW92ZSgpIHtcbiAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cbiAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICBjb250YWluZXIucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG4gIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIF9zZWFyY2hFbGVtZW50JGVsZW1lbjIgPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMsXG4gICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbjIuY29udGFpbmVyLFxuICAgICAgICBpbnB1dCA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbjIuaW5wdXQ7XG5cblxuICAgIGlmIChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgICBpbnB1dC5mb2N1cygpO1xuICAgIH1cbiAgfSxcbiAgc2VsZWN0UmVzdWx0OiBmdW5jdGlvbiBzZWxlY3RSZXN1bHQoZXZlbnQpIHtcbiAgICBpZiAoIVtfY29uc3RhbnRzLkFSUk9XX0RPV05fS0VZLCBfY29uc3RhbnRzLkFSUk9XX1VQX0tFWV0uaW5jbHVkZXMoZXZlbnQua2V5Q29kZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBpbnB1dCA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5pbnB1dDtcblxuXG4gICAgdmFyIGxpc3QgPSB0aGlzLnJlc3VsdExpc3Q7XG4gICAgdmFyIG1heCA9IHRoaXMucmVzdWx0TGlzdC5jb3VudCgpIC0gMTtcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gICAgdmFyIG5leHQgPSBldmVudC5jb2RlID09PSAnQXJyb3dEb3duJyA/IH5+bGlzdC5zZWxlY3RlZCArIDEgOiB+fmxpc3Quc2VsZWN0ZWQgLSAxO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuICAgIHZhciBpZHggPSBuZXh0IDwgMCA/IG1heCA6IG5leHQgPiBtYXggPyAwIDogbmV4dDtcblxuICAgIHZhciBpdGVtID0gbGlzdC5zZWxlY3QoaWR4KTtcbiAgICBpbnB1dC52YWx1ZSA9IGl0ZW0ubGFiZWw7XG4gIH0sXG4gIGNsZWFyUmVzdWx0czogZnVuY3Rpb24gY2xlYXJSZXN1bHRzKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgIT09IF9jb25zdGFudHMuRVNDQVBFX0tFWSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucmVzdWx0TGlzdC5jbGVhcigpO1xuICB9LFxuICBhdXRvU2VhcmNoOiBmdW5jdGlvbiBhdXRvU2VhcmNoKGV2ZW50KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgIHZhciBxdWVyeSwgcHJvdmlkZXIsIHJlc3VsdHM7XG5cbiAgICAgIGlmIChfY29uc3RhbnRzLlNQRUNJQUxfS0VZUy5pbmNsdWRlcyhldmVudC5rZXlDb2RlKSkge1xuICAgICAgICByZXR1cm4gJHJldHVybigpO1xuICAgICAgfVxuXG4gICAgICBxdWVyeSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgIHByb3ZpZGVyID0gdGhpcy5vcHRpb25zLnByb3ZpZGVyO1xuICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlYXJjaCh7IHF1ZXJ5OiBxdWVyeSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXG4gICAgICAgIHJlc3VsdHMgPSAkYXdhaXRfMTtcbiAgICAgICAgdGhpcy5yZXN1bHRMaXN0LnJlbmRlcihyZXN1bHRzKTtcbiAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcbiAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG4gIH0sXG4gIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdChxdWVyeSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG4gICAgICB2YXIgcHJvdmlkZXIsIHJlc3VsdHM7XG4gICAgICBwcm92aWRlciA9IHRoaXMub3B0aW9ucy5wcm92aWRlcjtcbiAgICAgIHJldHVybiBwcm92aWRlci5zZWFyY2gocXVlcnkpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG5cbiAgICAgICAgcmVzdWx0cyA9ICRhd2FpdF8yO1xuXG4gICAgICAgIGlmIChyZXN1bHRzICYmIHJlc3VsdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuc2hvd1Jlc3VsdChyZXN1bHRzWzBdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJHJldHVybigpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgfSxcbiAgc2hvd1Jlc3VsdDogZnVuY3Rpb24gc2hvd1Jlc3VsdChyZXN1bHQpIHtcbiAgICB2YXIgbWFya2VycyA9IE9iamVjdC5rZXlzKHRoaXMubWFya2Vycy5fbGF5ZXJzKTtcbiAgICBpZiAobWFya2Vycy5sZW5ndGggPj0gdGhpcy5vcHRpb25zLm1heE1hcmtlcnMpIHtcbiAgICAgIHRoaXMubWFya2Vycy5yZW1vdmVMYXllcihtYXJrZXJzWzBdKTtcbiAgICB9XG5cbiAgICB2YXIgbWFya2VyID0gdGhpcy5hZGRNYXJrZXIocmVzdWx0KTtcbiAgICB0aGlzLmNlbnRlck1hcChyZXN1bHQpO1xuXG4gICAgdGhpcy5tYXAuZmlyZUV2ZW50KCdnZW9zZWFyY2gvc2hvd2xvY2F0aW9uJywge1xuICAgICAgbG9jYXRpb246IHJlc3VsdCxcbiAgICAgIG1hcmtlcjogbWFya2VyXG4gICAgfSk7XG4gIH0sXG4gIGFkZE1hcmtlcjogZnVuY3Rpb24gYWRkTWFya2VyKHJlc3VsdCkge1xuICAgIHZhciBfb3B0aW9uczMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIG9wdGlvbnMgPSBfb3B0aW9uczMubWFya2VyLFxuICAgICAgICBzaG93UG9wdXAgPSBfb3B0aW9uczMuc2hvd1BvcHVwO1xuXG4gICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihbcmVzdWx0LnksIHJlc3VsdC54XSwgb3B0aW9ucyk7XG4gICAgbWFya2VyLmJpbmRQb3B1cChyZXN1bHQubGFiZWwpO1xuXG4gICAgdGhpcy5tYXJrZXJzLmFkZExheWVyKG1hcmtlcik7XG5cbiAgICBpZiAoc2hvd1BvcHVwKSB7XG4gICAgICBtYXJrZXIub3BlblBvcHVwKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hcmtlcjtcbiAgfSxcbiAgY2VudGVyTWFwOiBmdW5jdGlvbiBjZW50ZXJNYXAocmVzdWx0KSB7XG4gICAgdmFyIF9vcHRpb25zNCA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgcmV0YWluWm9vbUxldmVsID0gX29wdGlvbnM0LnJldGFpblpvb21MZXZlbCxcbiAgICAgICAgYW5pbWF0ZVpvb20gPSBfb3B0aW9uczQuYW5pbWF0ZVpvb207XG5cblxuICAgIHZhciByZXN1bHRCb3VuZHMgPSBuZXcgTC5MYXRMbmdCb3VuZHMocmVzdWx0LmJvdW5kcyk7XG4gICAgdmFyIGJvdW5kcyA9IHJlc3VsdEJvdW5kcy5pc1ZhbGlkKCkgPyByZXN1bHRCb3VuZHMgOiB0aGlzLm1hcmtlcnMuZ2V0Qm91bmRzKCk7XG5cbiAgICBpZiAoIXJldGFpblpvb21MZXZlbCAmJiByZXN1bHRCb3VuZHMuaXNWYWxpZCgpKSB7XG4gICAgICB0aGlzLm1hcC5maXRCb3VuZHMoYm91bmRzLCB7IGFuaW1hdGU6IGFuaW1hdGVab29tIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1hcC5zZXRWaWV3KGJvdW5kcy5nZXRDZW50ZXIoKSwgdGhpcy5nZXRab29tKCksIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG4gICAgfVxuICB9LFxuICBnZXRab29tOiBmdW5jdGlvbiBnZXRab29tKCkge1xuICAgIHZhciBfb3B0aW9uczUgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHJldGFpblpvb21MZXZlbCA9IF9vcHRpb25zNS5yZXRhaW5ab29tTGV2ZWwsXG4gICAgICAgIHpvb21MZXZlbCA9IF9vcHRpb25zNS56b29tTGV2ZWw7XG5cbiAgICByZXR1cm4gcmV0YWluWm9vbUxldmVsID8gdGhpcy5tYXAuZ2V0Wm9vbSgpIDogem9vbUxldmVsO1xuICB9XG59O1xuXG5mdW5jdGlvbiBMZWFmbGV0Q29udHJvbCgpIHtcbiAgaWYgKCFMIHx8ICFMLkNvbnRyb2wgfHwgIUwuQ29udHJvbC5leHRlbmQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0xlYWZsZXQgbXVzdCBiZSBsb2FkZWQgYmVmb3JlIGluc3RhbnRpYXRpbmcgdGhlIEdlb1NlYXJjaCBjb250cm9sJyk7XG4gIH1cblxuICB2YXIgTENvbnRyb2wgPSBMLkNvbnRyb2wuZXh0ZW5kKENvbnRyb2wpO1xuXG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBvcHRpb25zID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgb3B0aW9uc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KExDb250cm9sLCBbbnVsbF0uY29uY2F0KG9wdGlvbnMpKSkoKTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9sZWFmbGV0Q29udHJvbC5qcyIsIlwidXNlIHN0cmljdFwiO1xuLypcbiAqICRhc3luY2JpbmQgaGFzIG11bHRpcGxlIHVzZXMsIGRlcGVuZGluZyBvbiB0aGUgcGFyYW1ldGVyIGxpc3QuIEl0IGlzIGluIEZ1bmN0aW9uLnByb3RvdHlwZSwgc28gJ3RoaXMnIGlzIGFsd2F5cyBhIGZ1bmN0aW9uXG4gKlxuICogMSkgSWYgY2FsbGVkIHdpdGggYSBzaW5nbGUgYXJndW1lbnQgKHRoaXMpLCBpdCBpcyB1c2VkIHdoZW4gZGVmaW5pbmcgYW4gYXN5bmMgZnVuY3Rpb24gdG8gZW5zdXJlIHdoZW5cbiAqICAgICAgaXQgaXMgaW52b2tlZCwgdGhlIGNvcnJlY3QgJ3RoaXMnIGlzIHByZXNlbnQsIGp1c3QgbGlrZSBcImJpbmRcIi4gRm9yIGxlZ2FjeSByZWFzb25zLCAndGhpcycgaXMgZ2l2ZW5cbiAqICAgICAgYSBtZW1lYmVyICd0aGVuJyB3aGljaCByZWZlcnMgdG8gaXRzZWxmLlxuICogMikgSWYgY2FsbGVkIHdpdGggYSBzZWNvbmQgcGFyYW1ldGVyIChcImNhdGNoZXJcIikgYW5kIGNhdGNoZXIhPT10cnVlIGl0IGlzIGJlaW5nIHVzZWQgdG8gaW52b2tlIGFuIGFzeW5jXG4gKiAgICAgIGZ1bmN0aW9uIHdoZXJlIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIHRoZSBlcnJvciBjYWxsYmFjayAoZm9yIHN5bmMgZXhjZXB0aW9ucyBhbmQgdG8gYmUgcGFzc2VkIHRvXG4gKiAgICAgIG5lc3RlZCBhc3luYyBjYWxscylcbiAqIDMpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09dHJ1ZSwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG4gKiAgICAgIGluIGFuICdQcm9taXNlJyBhcyB3ZWxsIGJvdW5kIHRvICd0aGlzJy5cbiAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IFByb21pc2UodGhpcyknLCB3aGVyZSAndGhpcycgaXMgdGhlIGZ1bmN0aW9uIGJlaW5nIGJvdW5kL3dyYXBwZWRcbiAqIDQpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09MCwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG4gKiAgICAgIGluIGEgJ0xhenlUaGVuYWJsZScsIHdoaWNoIGV4ZWN1dGVzIGxhemlseSBhbmQgY2FuIHJlc29sdmUgc3luY2hyb25vdXNseS5cbiAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IExhenlUaGVuYWJsZSh0aGlzKScgKGlmIHN1Y2ggYSB0eXBlIHdlcmUgZXhwb3NlZCksIHdoZXJlICd0aGlzJyBpc1xuICogICAgICB0aGUgZnVuY3Rpb24gYmVpbmcgYm91bmQvd3JhcHBlZFxuICovXG5cbmZ1bmN0aW9uIHByb2Nlc3NJbmNsdWRlcyhpbmNsdWRlcyxpbnB1dCkge1xuICAgIHZhciBzcmMgPSBpbnB1dC50b1N0cmluZygpIDtcbiAgICB2YXIgdCA9IFwicmV0dXJuIFwiK3NyYyA7XG4gICAgdmFyIGFyZ3MgPSBzcmMubWF0Y2goLy4qXFwoKFteKV0qKVxcKS8pWzFdIDtcbiAgICB2YXIgcmUgPSAvWydcIl0hISEoW14nXCJdKilbJ1wiXS9nIDtcbiAgICB2YXIgbSA9IFtdIDtcbiAgICB3aGlsZSAoMSkge1xuICAgICAgICB2YXIgbXggPSByZS5leGVjKHQpIDtcbiAgICAgICAgaWYgKG14KVxuICAgICAgICAgICAgbS5wdXNoKG14KSA7XG4gICAgICAgIGVsc2UgYnJlYWsgO1xuICAgIH1cbiAgICBtLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe1xuICAgICAgICB0ID0gdC5zbGljZSgwLGUuaW5kZXgpK2luY2x1ZGVzW2VbMV1dK3Quc3Vic3RyKGUuaW5kZXgrZVswXS5sZW5ndGgpIDtcbiAgICB9KSA7XG4gICAgdCA9IHQucmVwbGFjZSgvXFwvXFwqW14qXSpcXCpcXC8vZywnICcpLnJlcGxhY2UoL1xccysvZywnICcpIDtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKGFyZ3MsdCkoKSA7XG59XG5cbnZhciAkYXN5bmNiaW5kID0gcHJvY2Vzc0luY2x1ZGVzKHtcbiAgICB6b3VzYW46cmVxdWlyZSgnLi96b3VzYW4nKS50b1N0cmluZygpLFxuICAgIHRoZW5hYmxlOnJlcXVpcmUoJy4vdGhlbmFibGVGYWN0b3J5JykudG9TdHJpbmcoKVxufSxcbmZ1bmN0aW9uICRhc3luY2JpbmQoc2VsZixjYXRjaGVyKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jYmluZCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLFwiJGFzeW5jYmluZFwiLHt2YWx1ZTokYXN5bmNiaW5kLGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6dHJ1ZX0pIDtcbiAgICB9XG5cbiAgICBpZiAoISRhc3luY2JpbmQudHJhbXBvbGluZSkge1xuICAgICAgJGFzeW5jYmluZC50cmFtcG9saW5lID0gZnVuY3Rpb24gdHJhbXBvbGluZSh0LHgscyxlLHUpe1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gYihxKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHEudGhlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHEudGhlbihiLCBlKSA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdT91bmRlZmluZWQ6cTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEucG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHEucG9wKCkgPyB4LmNhbGwodCkgOiBxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBzO1xuICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBxLmNhbGwodClcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAocikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUocik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICghJGFzeW5jYmluZC5MYXp5VGhlbmFibGUpIHtcbiAgICAgICAgJGFzeW5jYmluZC5MYXp5VGhlbmFibGUgPSAnISEhdGhlbmFibGUnKCk7XG4gICAgICAgICRhc3luY2JpbmQuRWFnZXJUaGVuYWJsZSA9ICRhc3luY2JpbmQuVGhlbmFibGUgPSAoJGFzeW5jYmluZC5FYWdlclRoZW5hYmxlRmFjdG9yeSA9ICchISF6b3VzYW4nKSgpO1xuICAgIH1cblxuICAgIHZhciByZXNvbHZlciA9IHRoaXM7XG4gICAgc3dpdGNoIChjYXRjaGVyKSB7XG4gICAgY2FzZSB0cnVlOlxuICAgICAgICByZXR1cm4gbmV3ICgkYXN5bmNiaW5kLlRoZW5hYmxlKShib3VuZFRoZW4pO1xuICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIG5ldyAoJGFzeW5jYmluZC5MYXp5VGhlbmFibGUpKGJvdW5kVGhlbik7XG4gICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICAgIC8qIEZvciBydW50aW1lIGNvbXBhdGliaWxpdHkgd2l0aCBOb2RlbnQgdjIueCwgcHJvdmlkZSBhIHRoZW5hYmxlICovXG4gICAgICAgIGJvdW5kVGhlbi50aGVuID0gYm91bmRUaGVuIDtcbiAgICAgICAgcmV0dXJuIGJvdW5kVGhlbiA7XG4gICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlci5hcHBseShzZWxmLGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9IGNhdGNoKGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhdGNoZXIoZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJvdW5kVGhlbigpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVyLmFwcGx5KHNlbGYsYXJndW1lbnRzKTtcbiAgICB9XG59KSA7XG5cbmZ1bmN0aW9uICRhc3luY3NwYXduKHByb21pc2VQcm92aWRlcixzZWxmKSB7XG4gICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jc3Bhd24pIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSxcIiRhc3luY3NwYXduXCIse3ZhbHVlOiRhc3luY3NwYXduLGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6dHJ1ZX0pIDtcbiAgICB9XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEZ1bmN0aW9uKSkgcmV0dXJuIDtcblxuICAgIHZhciBnZW5GID0gdGhpcyA7XG4gICAgcmV0dXJuIG5ldyBwcm9taXNlUHJvdmlkZXIoZnVuY3Rpb24gZW5vdWdoKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgZ2VuID0gZ2VuRi5jYWxsKHNlbGYsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAoZm4sYXJnKSB7XG4gICAgICAgICAgICB2YXIgbmV4dDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbmV4dCA9IGZuLmNhbGwoZ2VuLGFyZyk7XG4gICAgICAgICAgICAgICAgaWYobmV4dC5kb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlICE9PSByZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZSAmJiBuZXh0LnZhbHVlPT09bmV4dC52YWx1ZS50aGVuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0LnZhbHVlKHJlc29sdmUscmVqZWN0KSA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlICYmIHJlc29sdmUobmV4dC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gbnVsbCA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlLnRoZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dC52YWx1ZS50aGVuKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLm5leHQsdik7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLnRocm93LGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi5uZXh0LG5leHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgIHJlamVjdCAmJiByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgcmVqZWN0ID0gbnVsbCA7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0ZXAoZ2VuLm5leHQpO1xuICAgIH0pO1xufVxuXG4vLyBJbml0aWFsaXplIGFzeW5jIGJpbmRpbmdzXG4kYXN5bmNiaW5kKCkgO1xuJGFzeW5jc3Bhd24oKSA7XG5cbi8vIEV4cG9ydCBhc3luYyBiaW5kaW5nc1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgJGFzeW5jYmluZDokYXN5bmNiaW5kLFxuICAgICRhc3luY3NwYXduOiRhc3luY3NwYXduXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9ub2RlbnQtcnVudGltZS9ydW50aW1lLmpzIiwiLyogVGhpcyBjb2RlIGlzIGJhc2VkIG9uOlxuem91c2FuIC0gQSBMaWdodG5pbmcgRmFzdCwgWWV0IFZlcnkgU21hbGwgUHJvbWlzZSBBKyBDb21wbGlhbnQgSW1wbGVtZW50YXRpb25cbmh0dHBzOi8vZ2l0aHViLmNvbS9ibHVlamF2YS96b3VzYW5cbkF1dGhvcjogR2xlbm4gQ3Jvd25vdmVyIDxnbGVubkBibHVlamF2YS5jb20+IChodHRwOi8vd3d3LmJsdWVqYXZhLmNvbSlcblZlcnNpb24gMi4zLjNcbkxpY2Vuc2U6IE1JVCAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRpY2spe1xuICAgIHRpY2sgPSB0aWNrIHx8ICh0eXBlb2YgcHJvY2Vzcz09PVwib2JqZWN0XCIgJiYgcHJvY2Vzcy5uZXh0VGljaykgfHwgKHR5cGVvZiBzZXRJbW1lZGlhdGU9PT1cImZ1bmN0aW9uXCIgJiYgc2V0SW1tZWRpYXRlKSB8fCBmdW5jdGlvbihmKXtzZXRUaW1lb3V0KGYsMCl9O1xuICAgIHZhciBzb29uID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZxID0gW10sIGZxU3RhcnQgPSAwLCBidWZmZXJTaXplID0gMTAyNDtcbiAgICAgICAgZnVuY3Rpb24gY2FsbFF1ZXVlKCkge1xuICAgICAgICAgICAgd2hpbGUgKGZxLmxlbmd0aCAtIGZxU3RhcnQpIHtcbiAgICAgICAgICAgICAgICB0cnkgeyBmcVtmcVN0YXJ0XSgpIH0gY2F0Y2goZXgpIHsgLyogY29uc29sZS5lcnJvcihleCkgKi8gfVxuICAgICAgICAgICAgICAgIGZxW2ZxU3RhcnQrK10gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKGZxU3RhcnQgPT09IGJ1ZmZlclNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgZnEuc3BsaWNlKDAsIGJ1ZmZlclNpemUpO1xuICAgICAgICAgICAgICAgICAgICBmcVN0YXJ0ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICBmcS5wdXNoKGZuKTtcbiAgICAgICAgICAgIGlmIChmcS5sZW5ndGggLSBmcVN0YXJ0ID09PSAxKVxuICAgICAgICAgICAgICAgIHRpY2soY2FsbFF1ZXVlKTtcbiAgICAgICAgfTtcbiAgICB9KSgpO1xuXG4gICAgZnVuY3Rpb24gWm91c2FuKGZ1bmMpIHtcbiAgICAgICAgaWYgKGZ1bmMpIHtcbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgICAgICBmdW5jKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgICAgICAgICBtZS5yZXNvbHZlKGFyZyk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgICAgICAgbWUucmVqZWN0KGFyZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIFpvdXNhbi5wcm90b3R5cGUgPSB7XG4gICAgICAgIHJlc29sdmU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJBdHRlbXB0IHRvIHJlc29sdmUgcHJvbWlzZSB3aXRoIHNlbGZcIikpO1xuICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aGVuID0gdmFsdWUudGhlbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVuY3Rpb24gKHJhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJlc29sdmUocmEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5yZWplY3QocnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRlVMRklMTEVEO1xuICAgICAgICAgICAgdGhpcy52ID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAobWUuYylcbiAgICAgICAgICAgICAgICBzb29uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIGwgPSBtZS5jLmxlbmd0aDtuIDwgbDsgbisrKVxuICAgICAgICAgICAgICAgICAgICAgICAgU1RBVEVfRlVMRklMTEVEKG1lLmNbbl0sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9SRUpFQ1RFRDtcbiAgICAgICAgICAgIHRoaXMudiA9IHJlYXNvbjtcbiAgICAgICAgICAgIHZhciBjbGllbnRzID0gdGhpcy5jO1xuICAgICAgICAgICAgaWYgKGNsaWVudHMpXG4gICAgICAgICAgICAgICAgc29vbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCBsID0gY2xpZW50cy5sZW5ndGg7biA8IGw7IG4rKylcbiAgICAgICAgICAgICAgICAgICAgICAgIFNUQVRFX1JFSkVDVEVEKGNsaWVudHNbbl0sIHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHRoZW46IGZ1bmN0aW9uIChvbkYsIG9uUikge1xuICAgICAgICAgICAgdmFyIHAgPSBuZXcgWm91c2FuKCk7XG4gICAgICAgICAgICB2YXIgY2xpZW50ID0ge1xuICAgICAgICAgICAgICAgIHk6IG9uRixcbiAgICAgICAgICAgICAgICBuOiBvblIsXG4gICAgICAgICAgICAgICAgcDogcFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmMucHVzaChjbGllbnQpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jID0gW2NsaWVudF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcy5zdGF0ZSwgYSA9IHRoaXMudjtcbiAgICAgICAgICAgICAgICBzb29uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcyhjbGllbnQsIGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gU1RBVEVfRlVMRklMTEVEKGMsIGFyZykge1xuICAgICAgICBpZiAodHlwZW9mIGMueSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciB5cmV0ID0gYy55LmNhbGwodW5kZWZpbmVkLCBhcmcpO1xuICAgICAgICAgICAgICAgIGMucC5yZXNvbHZlKHlyZXQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgYy5wLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgIGMucC5yZXNvbHZlKGFyZyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gU1RBVEVfUkVKRUNURUQoYywgcmVhc29uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYy5uID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHlyZXQgPSBjLm4uY2FsbCh1bmRlZmluZWQsIHJlYXNvbik7XG4gICAgICAgICAgICAgICAgYy5wLnJlc29sdmUoeXJldCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjLnAucmVqZWN0KGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgYy5wLnJlamVjdChyZWFzb24pO1xuICAgIH1cblxuICAgIFpvdXNhbi5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICBpZiAodmFsICYmICh2YWwgaW5zdGFuY2VvZiBab3VzYW4pKVxuICAgICAgICAgICAgcmV0dXJuIHZhbCA7XG4gICAgICAgIHZhciB6ID0gbmV3IFpvdXNhbigpO1xuICAgICAgICB6LnJlc29sdmUodmFsKTtcbiAgICAgICAgcmV0dXJuIHo7XG4gICAgfTtcbiAgICBab3VzYW4ucmVqZWN0ID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoZXJyICYmIChlcnIgaW5zdGFuY2VvZiBab3VzYW4pKVxuICAgICAgICAgICAgcmV0dXJuIGVyciA7XG4gICAgICAgIHZhciB6ID0gbmV3IFpvdXNhbigpO1xuICAgICAgICB6LnJlamVjdChlcnIpO1xuICAgICAgICByZXR1cm4gejtcbiAgICB9O1xuXG4gICAgWm91c2FuLnZlcnNpb24gPSBcIjIuMy4zLW5vZGVudFwiIDtcbiAgICByZXR1cm4gWm91c2FuIDtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L25vZGVudC1ydW50aW1lL3pvdXNhbi5qcyIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ2YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcbn07XG5leHBvcnRzLmNsZWFyVGltZW91dCA9XG5leHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7XG4gIGlmICh0aW1lb3V0KSB7XG4gICAgdGltZW91dC5jbG9zZSgpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG4gIHRoaXMuX2lkID0gaWQ7XG4gIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xufVxuVGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbigpIHt9O1xuVGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdywgdGhpcy5faWQpO1xufTtcblxuLy8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5leHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcbiAgaWYgKG1zZWNzID49IDApIHtcbiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcbiAgICB9LCBtc2Vjcyk7XG4gIH1cbn07XG5cbi8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3RcbnJlcXVpcmUoXCJzZXRpbW1lZGlhdGVcIik7XG5leHBvcnRzLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L21haW4uanMiLCIoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm9cbiAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblxuICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG4gICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcbiAgICAgIH1cbiAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuICAgICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG4gICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcbiAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuKHRhc2spIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcbiAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG4gICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uXG4gICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcbiAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG4gICAgICAgICAgICAvLyBcInRvbyBtdWNoIHJlY3Vyc2lvblwiIGVycm9yLlxuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsgcnVuSWZQcmVzZW50KGhhbmRsZSk7IH0pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG4gICAgICAgIC8vIHdoZXJlIGBnbG9iYWwucG9zdE1lc3NhZ2VgIG1lYW5zIHNvbWV0aGluZyBjb21wbGV0ZWx5IGRpZmZlcmVudCBhbmQgY2FuJ3QgYmUgdXNlZCBmb3IgdGhpcyBwdXJwb3NlLlxuICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG9sZE9uTWVzc2FnZSA9IGdsb2JhbC5vbm1lc3NhZ2U7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShcIlwiLCBcIipcIik7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG4gICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG5cbiAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSBcInNldEltbWVkaWF0ZSRcIiArIE1hdGgucmFuZG9tKCkgKyBcIiRcIjtcbiAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cbiAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS5cbiAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG4gICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cbiAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG4gICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuICAgICAgICAvLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45XG4gICAgICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGNhblVzZVBvc3RNZXNzYWdlKCkpIHtcbiAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcbiAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcbiAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcbiAgICAgICAgLy8gRm9yIElFIDbigJM4XG4gICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG4gICAgfVxuXG4gICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuICAgIGF0dGFjaFRvLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG59KHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiID8gdHlwZW9mIGdsb2JhbCA9PT0gXCJ1bmRlZmluZWRcIiA/IHRoaXMgOiBnbG9iYWwgOiBzZWxmKSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9+L3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanMiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIGlzVGhlbmFibGUob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogJiYgKG9iaiBpbnN0YW5jZW9mIE9iamVjdCkgJiYgdHlwZW9mIG9iai50aGVuPT09XCJmdW5jdGlvblwiO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc29sdXRpb24ocCxyLGhvdykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLyogMi4yLjcuMSAqL1xuICAgICAgICAgICAgdmFyIHggPSBob3cgPyBob3cocik6ciA7XG5cbiAgICAgICAgICAgIGlmIChwPT09eCkgLyogMi4zLjEgKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gcC5yZWplY3QobmV3IFR5cGVFcnJvcihcIlByb21pc2UgcmVzb2x1dGlvbiBsb29wXCIpKSA7XG5cbiAgICAgICAgICAgIGlmIChpc1RoZW5hYmxlKHgpKSB7XG4gICAgICAgICAgICAgICAgLyogMi4zLjMgKi9cbiAgICAgICAgICAgICAgICB4LnRoZW4oZnVuY3Rpb24oeSl7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb24ocCx5KTtcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgICAgICAgICBwLnJlamVjdChlKVxuICAgICAgICAgICAgICAgIH0pIDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcC5yZXNvbHZlKHgpIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIC8qIDIuMi43LjIgKi9cbiAgICAgICAgICAgIHAucmVqZWN0KGV4KSA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDaGFpbmVkKCkge307XG4gICAgQ2hhaW5lZC5wcm90b3R5cGUgPSB7XG4gICAgICAgIHJlc29sdmU6X3VuY2hhaW5lZCxcbiAgICAgICAgcmVqZWN0Ol91bmNoYWluZWQsXG4gICAgICAgIHRoZW46dGhlbkNoYWluXG4gICAgfTtcbiAgICBmdW5jdGlvbiBfdW5jaGFpbmVkKHYpe31cbiAgICBmdW5jdGlvbiB0aGVuQ2hhaW4ocmVzLHJlail7XG4gICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlcztcbiAgICAgICAgdGhpcy5yZWplY3QgPSByZWo7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHRoZW4ocmVzLHJlail7XG4gICAgICAgIHZhciBjaGFpbiA9IG5ldyBDaGFpbmVkKCkgO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZXIoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNUaGVuYWJsZSh2YWx1ZSkgPyB2YWx1ZS50aGVuKHJlcyxyZWopIDogcmVzb2x1dGlvbihjaGFpbix2YWx1ZSxyZXMpO1xuICAgICAgICAgICAgfSxmdW5jdGlvbihleCkge1xuICAgICAgICAgICAgICAgIHJlc29sdXRpb24oY2hhaW4sZXgscmVqKSA7XG4gICAgICAgICAgICB9KSA7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uKGNoYWluLGV4LHJlaik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYWluIDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBUaGVuYWJsZShyZXNvbHZlcikge1xuICAgICAgICB0aGlzLl9yZXNvbHZlciA9IHJlc29sdmVyIDtcbiAgICAgICAgdGhpcy50aGVuID0gdGhlbiA7XG4gICAgfTtcblxuICAgIFRoZW5hYmxlLnJlc29sdmUgPSBmdW5jdGlvbih2KXtcbiAgICAgICAgcmV0dXJuIFRoZW5hYmxlLmlzVGhlbmFibGUodikgPyB2IDoge3RoZW46ZnVuY3Rpb24ocmVzb2x2ZSl7cmV0dXJuIHJlc29sdmUodil9fTtcbiAgICB9O1xuXG4gICAgVGhlbmFibGUuaXNUaGVuYWJsZSA9IGlzVGhlbmFibGUgO1xuXG4gICAgcmV0dXJuIFRoZW5hYmxlIDtcbn0gO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9ub2RlbnQtcnVudGltZS90aGVuYWJsZUZhY3RvcnkuanMiLCIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE5BTiA9IDAgLyAwO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG52YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblxuLyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cbnZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXG4vKipcbiAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAyLjQuMFxuICogQGNhdGVnb3J5IERhdGVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICogfSwgXy5ub3coKSk7XG4gKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuICovXG52YXIgbm93ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiByb290LkRhdGUubm93KCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG4gKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG4gKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cbiAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZVxuICogbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZFxuICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudFxuICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2BcbiAqIGludm9jYXRpb24uXG4gKlxuICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpc1xuICogaW52b2tlZCBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cbiAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAqXG4gKiBJZiBgd2FpdGAgaXMgYDBgIGFuZCBgbGVhZGluZ2AgaXMgYGZhbHNlYCwgYGZ1bmNgIGludm9jYXRpb24gaXMgZGVmZXJyZWRcbiAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cbiAqXG4gKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9kZWJvdW5jaW5nLXRocm90dGxpbmctZXhwbGFpbmVkLWV4YW1wbGVzLylcbiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XVxuICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG4gKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuICpcbiAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuICogICAnbGVhZGluZyc6IHRydWUsXG4gKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gKiB9KSk7XG4gKlxuICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cbiAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuICpcbiAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgZGVib3VuY2VkIGludm9jYXRpb24uXG4gKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgbGFzdEFyZ3MsXG4gICAgICBsYXN0VGhpcyxcbiAgICAgIG1heFdhaXQsXG4gICAgICByZXN1bHQsXG4gICAgICB0aW1lcklkLFxuICAgICAgbGFzdENhbGxUaW1lLFxuICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuICAgICAgbGVhZGluZyA9IGZhbHNlLFxuICAgICAgbWF4aW5nID0gZmFsc2UsXG4gICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcbiAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcbiAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcbiAgICB2YXIgYXJncyA9IGxhc3RBcmdzLFxuICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG4gICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgLy8gU3RhcnQgdGhlIHRpbWVyIGZvciB0aGUgdHJhaWxpbmcgZWRnZS5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuICAgIHJldHVybiBsZWFkaW5nID8gaW52b2tlRnVuYyh0aW1lKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbWFpbmluZ1dhaXQodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG4gICAgICAgIHJlc3VsdCA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcblxuICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cbiAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG4gICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuICAgIHJldHVybiAobGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgKHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQpIHx8XG4gICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCk7XG4gICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICB9XG4gICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG4gICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cbiAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cbiAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcbiAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuICAgIH1cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgIH1cbiAgICBsYXN0SW52b2tlVGltZSA9IDA7XG4gICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICByZXR1cm4gdGltZXJJZCA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogdHJhaWxpbmdFZGdlKG5vdygpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpLFxuICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXG4gICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG4gICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG5cbiAgICBpZiAoaXNJbnZva2luZykge1xuICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXhpbmcpIHtcbiAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcbiAgcmV0dXJuIGRlYm91bmNlZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9OdW1iZXIoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcbiAqIC8vID0+IEluZmluaXR5XG4gKlxuICogXy50b051bWJlcignMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIE5BTjtcbiAgfVxuICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICB9XG4gIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcbiAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG4gICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG4gICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL34vbG9kYXNoLmRlYm91bmNlL2luZGV4LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX25vZGVudFJ1bnRpbWUgPSByZXF1aXJlKCdub2RlbnQtcnVudGltZScpO1xuXG52YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuL2RvbVV0aWxzJyk7XG5cbnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFNlYXJjaEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFNlYXJjaEVsZW1lbnQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgX3JlZiRoYW5kbGVTdWJtaXQgPSBfcmVmLmhhbmRsZVN1Ym1pdCxcbiAgICAgICAgaGFuZGxlU3VibWl0ID0gX3JlZiRoYW5kbGVTdWJtaXQgPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uICgpIHt9IDogX3JlZiRoYW5kbGVTdWJtaXQsXG4gICAgICAgIF9yZWYkc2VhcmNoTGFiZWwgPSBfcmVmLnNlYXJjaExhYmVsLFxuICAgICAgICBzZWFyY2hMYWJlbCA9IF9yZWYkc2VhcmNoTGFiZWwgPT09IHVuZGVmaW5lZCA/ICdzZWFyY2gnIDogX3JlZiRzZWFyY2hMYWJlbCxcbiAgICAgICAgX3JlZiRjbGFzc05hbWVzID0gX3JlZi5jbGFzc05hbWVzLFxuICAgICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZWFyY2hFbGVtZW50KTtcblxuICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBbJ2dlb3NlYXJjaCcsIGNsYXNzTmFtZXMuY29udGFpbmVyXS5qb2luKCcgJykpO1xuICAgIHZhciBmb3JtID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZm9ybScsIFsnJywgY2xhc3NOYW1lcy5mb3JtXS5qb2luKCcgJyksIGNvbnRhaW5lcik7XG4gICAgdmFyIGlucHV0ID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnaW5wdXQnLCBbJ2dsYXNzJywgY2xhc3NOYW1lcy5pbnB1dF0uam9pbignICcpLCBmb3JtKTtcblxuICAgIGlucHV0LnR5cGUgPSAndGV4dCc7XG4gICAgaW5wdXQucGxhY2Vob2xkZXIgPSBzZWFyY2hMYWJlbDtcblxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uSW5wdXQoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uS2V5VXAoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uS2V5UHJlc3MoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uRm9jdXMoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25CbHVyKGUpO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIHRoaXMuZWxlbWVudHMgPSB7IGNvbnRhaW5lcjogY29udGFpbmVyLCBmb3JtOiBmb3JtLCBpbnB1dDogaW5wdXQgfTtcbiAgICB0aGlzLmhhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhTZWFyY2hFbGVtZW50LCBbe1xuICAgIGtleTogJ29uRm9jdXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkZvY3VzKCkge1xuICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKHRoaXMuZWxlbWVudHMuZm9ybSwgJ2FjdGl2ZScpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uQmx1cicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQmx1cigpIHtcbiAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKSh0aGlzLmVsZW1lbnRzLmZvcm0sICdhY3RpdmUnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvblN1Ym1pdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uU3VibWl0KGV2ZW50KSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgICB2YXIgX2VsZW1lbnRzLCBpbnB1dCwgY29udGFpbmVyO1xuXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIF9lbGVtZW50cyA9IHRoaXMuZWxlbWVudHMsIGlucHV0ID0gX2VsZW1lbnRzLmlucHV0LCBjb250YWluZXIgPSBfZWxlbWVudHMuY29udGFpbmVyO1xuXG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuICAgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZVN1Ym1pdCh7IHF1ZXJ5OiBpbnB1dC52YWx1ZSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuICAgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG4gICAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcbiAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uSW5wdXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbklucHV0KCkge1xuICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXG5cbiAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuICAgICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25LZXlVcCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5VXAoZXZlbnQpIHtcbiAgICAgIHZhciBfZWxlbWVudHMyID0gdGhpcy5lbGVtZW50cyxcbiAgICAgICAgICBjb250YWluZXIgPSBfZWxlbWVudHMyLmNvbnRhaW5lcixcbiAgICAgICAgICBpbnB1dCA9IF9lbGVtZW50czIuaW5wdXQ7XG5cblxuICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IF9jb25zdGFudHMuRVNDQVBFX0tFWSkge1xuICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cbiAgICAgICAgaW5wdXQudmFsdWUgPSAnJztcblxuICAgICAgICBkb2N1bWVudC5ib2R5LmZvY3VzKCk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYmx1cigpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uS2V5UHJlc3MnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleVByZXNzKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gX2NvbnN0YW50cy5FTlRFUl9LRVkpIHtcbiAgICAgICAgdGhpcy5vblN1Ym1pdChldmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2V0UXVlcnknLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRRdWVyeShxdWVyeSkge1xuICAgICAgdmFyIGlucHV0ID0gdGhpcy5lbGVtZW50cy5pbnB1dDtcblxuICAgICAgaW5wdXQudmFsdWUgPSBxdWVyeTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU2VhcmNoRWxlbWVudDtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gU2VhcmNoRWxlbWVudDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9zZWFyY2hFbGVtZW50LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xudmFyIGNyZWF0ZUVsZW1lbnQgPSBleHBvcnRzLmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KGVsZW1lbnQpIHtcbiAgdmFyIGNsYXNzTmFtZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnO1xuICB2YXIgcGFyZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsO1xuXG4gIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudCk7XG4gIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZXM7XG5cbiAgaWYgKHBhcmVudCkge1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XG4gIH1cblxuICByZXR1cm4gZWw7XG59O1xuXG52YXIgY3JlYXRlU2NyaXB0RWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlU2NyaXB0RWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZVNjcmlwdEVsZW1lbnQodXJsLCBjYikge1xuICB2YXIgc2NyaXB0ID0gY3JlYXRlRWxlbWVudCgnc2NyaXB0JywgbnVsbCwgZG9jdW1lbnQuYm9keSk7XG4gIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9qYXZhc2NyaXB0Jyk7XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgd2luZG93W2NiXSA9IGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICBzY3JpcHQucmVtb3ZlKCk7XG4gICAgICBkZWxldGUgd2luZG93W2NiXTtcbiAgICAgIHJlc29sdmUoanNvbik7XG4gICAgfTtcblxuICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHVybCk7XG4gIH0pO1xufTtcblxudmFyIGFkZENsYXNzTmFtZSA9IGV4cG9ydHMuYWRkQ2xhc3NOYW1lID0gZnVuY3Rpb24gYWRkQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICBpZiAoZWxlbWVudCAmJiAhZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICB9XG59O1xuXG52YXIgcmVtb3ZlQ2xhc3NOYW1lID0gZXhwb3J0cy5yZW1vdmVDbGFzc05hbWUgPSBmdW5jdGlvbiByZW1vdmVDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgfVxufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9kb21VdGlscy5qcyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xudmFyIEVOVEVSX0tFWSA9IGV4cG9ydHMuRU5URVJfS0VZID0gMTM7XG52YXIgRVNDQVBFX0tFWSA9IGV4cG9ydHMuRVNDQVBFX0tFWSA9IDI3O1xudmFyIEFSUk9XX0RPV05fS0VZID0gZXhwb3J0cy5BUlJPV19ET1dOX0tFWSA9IDQwO1xudmFyIEFSUk9XX1VQX0tFWSA9IGV4cG9ydHMuQVJST1dfVVBfS0VZID0gMzg7XG52YXIgQVJST1dfTEVGVF9LRVkgPSBleHBvcnRzLkFSUk9XX0xFRlRfS0VZID0gMzc7XG52YXIgQVJST1dfUklHSFRfS0VZID0gZXhwb3J0cy5BUlJPV19SSUdIVF9LRVkgPSAzOTtcblxudmFyIFNQRUNJQUxfS0VZUyA9IGV4cG9ydHMuU1BFQ0lBTF9LRVlTID0gW0VOVEVSX0tFWSwgRVNDQVBFX0tFWSwgQVJST1dfRE9XTl9LRVksIEFSUk9XX1VQX0tFWSwgQVJST1dfTEVGVF9LRVksIEFSUk9XX1JJR0hUX0tFWV07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvY29uc3RhbnRzLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX2RvbVV0aWxzID0gcmVxdWlyZSgnLi9kb21VdGlscycpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgY3ggPSBmdW5jdGlvbiBjeCgpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGNsYXNzbmFtZXMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBjbGFzc25hbWVzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIGNsYXNzbmFtZXMuam9pbignICcpLnRyaW0oKTtcbn07XG5cbnZhciBSZXN1bHRMaXN0ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBSZXN1bHRMaXN0KCkge1xuICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgX3JlZiRoYW5kbGVDbGljayA9IF9yZWYuaGFuZGxlQ2xpY2ssXG4gICAgICAgIGhhbmRsZUNsaWNrID0gX3JlZiRoYW5kbGVDbGljayA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZUNsaWNrLFxuICAgICAgICBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG4gICAgICAgIGNsYXNzTmFtZXMgPSBfcmVmJGNsYXNzTmFtZXMgPT09IHVuZGVmaW5lZCA/IHt9IDogX3JlZiRjbGFzc05hbWVzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlc3VsdExpc3QpO1xuXG4gICAgX2luaXRpYWxpc2VQcm9wcy5jYWxsKHRoaXMpO1xuXG4gICAgdGhpcy5wcm9wcyA9IHsgaGFuZGxlQ2xpY2s6IGhhbmRsZUNsaWNrLCBjbGFzc05hbWVzOiBjbGFzc05hbWVzIH07XG4gICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXG4gICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIGN4KCdyZXN1bHRzJywgY2xhc3NOYW1lcy5jb250YWluZXIpKTtcbiAgICB2YXIgcmVzdWx0SXRlbSA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIGN4KGNsYXNzTmFtZXMuaXRlbSkpO1xuXG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrLCB0cnVlKTtcbiAgICB0aGlzLmVsZW1lbnRzID0geyBjb250YWluZXI6IGNvbnRhaW5lciwgcmVzdWx0SXRlbTogcmVzdWx0SXRlbSB9O1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFJlc3VsdExpc3QsIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIHJlc3VsdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdO1xuICAgICAgdmFyIF9lbGVtZW50cyA9IHRoaXMuZWxlbWVudHMsXG4gICAgICAgICAgY29udGFpbmVyID0gX2VsZW1lbnRzLmNvbnRhaW5lcixcbiAgICAgICAgICByZXN1bHRJdGVtID0gX2VsZW1lbnRzLnJlc3VsdEl0ZW07XG5cbiAgICAgIHRoaXMuY2xlYXIoKTtcblxuICAgICAgcmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChyZXN1bHQsIGlkeCkge1xuICAgICAgICB2YXIgY2hpbGQgPSByZXN1bHRJdGVtLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKCdkYXRhLWtleScsIGlkeCk7XG4gICAgICAgIGNoaWxkLmlubmVySFRNTCA9IHJlc3VsdC5sYWJlbDtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZXN1bHRzID0gcmVzdWx0cztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZWxlY3QnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3QoaW5kZXgpIHtcbiAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbmZ1c2luZy1hcnJvd1xuXG4gICAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQsIGlkeCkge1xuICAgICAgICByZXR1cm4gaWR4ID09PSBpbmRleCA/ICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjaGlsZCwgJ2FjdGl2ZScpIDogKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJyk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5zZWxlY3RlZCA9IGluZGV4O1xuICAgICAgcmV0dXJuIHRoaXMucmVzdWx0c1tpbmRleF07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY291bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb3VudCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlc3VsdHMubGVuZ3RoO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NsZWFyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSAtMTtcblxuICAgICAgd2hpbGUgKGNvbnRhaW5lci5sYXN0Q2hpbGQpIHtcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5sYXN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFJlc3VsdExpc3Q7XG59KCk7XG5cbnZhciBfaW5pdGlhbGlzZVByb3BzID0gZnVuY3Rpb24gX2luaXRpYWxpc2VQcm9wcygpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB0aGlzLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgdGFyZ2V0ID0gX3JlZjIudGFyZ2V0O1xuXG4gICAgdmFyIGhhbmRsZUNsaWNrID0gX3RoaXMucHJvcHMuaGFuZGxlQ2xpY2s7XG4gICAgdmFyIGNvbnRhaW5lciA9IF90aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuXG4gICAgaWYgKHRhcmdldC5wYXJlbnROb2RlICE9PSBjb250YWluZXIgfHwgIXRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEta2V5JykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaWR4ID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKTtcbiAgICB2YXIgcmVzdWx0ID0gX3RoaXMucmVzdWx0c1tpZHhdO1xuICAgIGhhbmRsZUNsaWNrKHsgcmVzdWx0OiByZXN1bHQgfSk7XG4gIH07XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBSZXN1bHRMaXN0O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Jlc3VsdExpc3QuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbm9kZW50UnVudGltZSA9IHJlcXVpcmUoJ25vZGVudC1ydW50aW1lJyk7XG5cbnZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuLi9kb21VdGlscycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbCxcbiAgICAgICAgICBqc29ucCA9IF9yZWYuanNvbnA7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXG5cbiAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuICAgICAgICBxdWVyeTogcXVlcnksXG4gICAgICAgIGpzb25wOiBqc29ucFxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9kZXYudmlydHVhbGVhcnRoLm5ldC9SRVNUL3YxL0xvY2F0aW9ucz8nICsgcGFyYW1TdHJpbmc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncGFyc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXG4gICAgICBpZiAoZGF0YS5yZXNvdXJjZVNldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcy5tYXAoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiByLnBvaW50LmNvb3JkaW5hdGVzWzFdLFxuICAgICAgICAgIHk6IHIucG9pbnQuY29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgbGFiZWw6IHIuYWRkcmVzcy5mb3JtYXR0ZWRBZGRyZXNzLFxuICAgICAgICAgIGJvdW5kczogW1tyLmJib3hbMF0sIHIuYmJveFsxXV0sIC8vIHMsIHdcbiAgICAgICAgICBbci5iYm94WzJdLCByLmJib3hbM11dXSxcbiAgICAgICAgICByYXc6IHJcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NlYXJjaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmMykge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwganNvbnAsIHVybCwganNvbjtcbiAgICAgICAgcXVlcnkgPSBfcmVmMy5xdWVyeTtcblxuICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuXG4gICAgICAgIGpzb25wID0gJ0JJTkdfSlNPTlBfQ0JfJyArIERhdGUubm93KCk7XG4gICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCwganNvbnA6IGpzb25wIH0pO1xuXG4gICAgICAgIHJldHVybiAoMCwgX2RvbVV0aWxzLmNyZWF0ZVNjcmlwdEVsZW1lbnQpKHVybCwganNvbnApLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG4gICAgICAgICAganNvbiA9ICRhd2FpdF8xO1xuICAgICAgICAgIHJldHVybiAkcmV0dXJuKHRoaXMucGFyc2UoeyBkYXRhOiBqc29uIH0pKTtcbiAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm92aWRlcjtcbn0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2JpbmdQcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9ub2RlbnRSdW50aW1lID0gcmVxdWlyZSgnbm9kZW50LXJ1bnRpbWUnKTtcblxudmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2dldFBhcmFtU3RyaW5nJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFyYW1TdHJpbmcocGFyYW1zKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pO1xuICAgICAgfSkuam9pbignJicpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NlYXJjaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgICB2YXIgcXVlcnksIHByb3RvY29sLCB1cmwsIHJlcXVlc3QsIGpzb247XG4gICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeTtcblxuICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuICAgICAgICB1cmwgPSB0aGlzLmVuZHBvaW50KHsgcXVlcnk6IHF1ZXJ5LCBwcm90b2NvbDogcHJvdG9jb2wgfSk7XG5cbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcbiAgICAgICAgICByZXF1ZXN0ID0gJGF3YWl0XzE7XG4gICAgICAgICAgcmV0dXJuIHJlcXVlc3QuanNvbigpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG4gICAgICAgICAgICBqc29uID0gJGF3YWl0XzI7XG4gICAgICAgICAgICByZXR1cm4gJHJldHVybih0aGlzLnBhcnNlKHsgZGF0YToganNvbiB9KSk7XG4gICAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9wcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcbiAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblxuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZW5kcG9pbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG4gICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblxuXG4gICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcbiAgICAgICAgZjogJ2pzb24nLFxuICAgICAgICB0ZXh0OiBxdWVyeVxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9nZW9jb2RlLmFyY2dpcy5jb20vYXJjZ2lzL3Jlc3Qvc2VydmljZXMvV29ybGQvR2VvY29kZVNlcnZlci9maW5kPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHJldHVybiBkYXRhLmxvY2F0aW9ucy5tYXAoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiByLmZlYXR1cmUuZ2VvbWV0cnkueCxcbiAgICAgICAgICB5OiByLmZlYXR1cmUuZ2VvbWV0cnkueSxcbiAgICAgICAgICBsYWJlbDogci5uYW1lLFxuICAgICAgICAgIGJvdW5kczogW1tyLmV4dGVudC55bWluLCByLmV4dGVudC54bWluXSwgLy8gcywgd1xuICAgICAgICAgIFtyLmV4dGVudC55bWF4LCByLmV4dGVudC54bWF4XV0sXG4gICAgICAgICAgcmF3OiByXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9lc3JpUHJvdmlkZXIuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVyJyk7XG5cbnZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblxuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cblxuICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG4gICAgICAgIGFkZHJlc3M6IHF1ZXJ5XG4gICAgICB9KSk7XG5cbiAgICAgIC8vIGdvb2dsZSByZXF1aXJlcyBhIHNlY3VyZSBjb25uZWN0aW9uIHdoZW4gdXNpbmcgYXBpIGtleXNcbiAgICAgIHZhciBwcm90byA9IHBhcmFtcyAmJiBwYXJhbXMua2V5ID8gJ2h0dHBzOicgOiBwcm90b2NvbDtcbiAgICAgIHJldHVybiBwcm90byArICcvL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHJldHVybiBkYXRhLnJlc3VsdHMubWFwKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgeDogci5nZW9tZXRyeS5sb2NhdGlvbi5sbmcsXG4gICAgICAgICAgeTogci5nZW9tZXRyeS5sb2NhdGlvbi5sYXQsXG4gICAgICAgICAgbGFiZWw6IHIuZm9ybWF0dGVkX2FkZHJlc3MsXG4gICAgICAgICAgYm91bmRzOiBbW3IuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0LmxhdCwgci5nZW9tZXRyeS52aWV3cG9ydC5zb3V0aHdlc3QubG5nXSwgLy8gcywgd1xuICAgICAgICAgIFtyLmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0LmxuZ11dLFxuICAgICAgICAgIHJhdzogclxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXIuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVyJyk7XG5cbnZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblxuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cblxuICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG4gICAgICAgIGZvcm1hdDogJ2pzb24nLFxuICAgICAgICBxOiBxdWVyeVxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvc2VhcmNoPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHJldHVybiBkYXRhLm1hcChmdW5jdGlvbiAocikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IHIubG9uLFxuICAgICAgICAgIHk6IHIubGF0LFxuICAgICAgICAgIGxhYmVsOiByLmRpc3BsYXlfbmFtZSxcbiAgICAgICAgICBib3VuZHM6IFtbcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzBdKSwgcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzJdKV0sIC8vIHMsIHdcbiAgICAgICAgICBbcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzFdKSwgcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzNdKV1dLFxuICAgICAgICAgIHJhdzogclxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvb3BlblN0cmVldE1hcFByb3ZpZGVyLmpzIiwiaW1wb3J0IHt0b2dnbGVMYXllcn0gZnJvbSBcIi4vbGF5ZXJcIjtcbmltcG9ydCB7bWFrZU9wYWNpdHlTbGlkZXJ9IGZyb20gXCIuL29wYWNpdHlTbGlkZXJcIlxuaW1wb3J0IHtzZXRTbGlkZXJJbml0aWFsUG9zfSBmcm9tIFwiLi9vcGFjaXR5U2xpZGVyXCJcbmltcG9ydCB7dXBkYXRlU2hhcmVVcmx9IGZyb20gXCIuL3NoYXJlXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBTZXR1cFBhbmVsIChsYXllcnMsIGxheW91dCkge1xuICAgIHZhciBsYXllckdyb3VwcyA9IG1ha2VMYXllckdyb3VwcyhsYXlvdXRbJ2xheWVyLWdyb3Vwcy1vcmRlciddKTtcbiAgICBtYWtlTGF5ZXJFbGVtcyhsYXllckdyb3VwcywgbGF5ZXJzKTtcbiAgICBtYWtlUGFuZWxEcmFnZ2FibGUoKVxuICAgIHNldFBhbmVsU2Nyb2xsSGFuZGxlcigpXG59XG5cbmZ1bmN0aW9uIGJyb3dzZXJJc0ludGVybmV0RXhwbG9yZXIoKSB7XG4gICAgdmFyIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnRcbiAgICByZXR1cm4gdWEuaW5kZXhPZignTVNJRScpID4gLTEgfHwgdWEuaW5kZXhPZigncnY6MTEuMCcpID4gLTFcbn1cblxuZnVuY3Rpb24gc2V0UGFuZWxTY3JvbGxIYW5kbGVyKCkge1xuICAgIHZhciBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpXG4gICAgcGFuZWwub25zY3JvbGwgPSB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0XG59XG5cbmZ1bmN0aW9uIG1ha2VQYW5lbERyYWdnYWJsZSgpIHtcbiAgICBpZiAoYnJvd3NlcklzSW50ZXJuZXRFeHBsb3JlcigpKSByZXR1cm5cbiAgICAgICAgXG4gICAgdmFyIG92ZXJsYXkgPSBkMy5zZWxlY3QoJyNyaWdodC1wYW5lbC1kcmFnLW92ZXJsYXknKVxuXG4gICAgb3ZlcmxheS5zdHlsZSgnY3Vyc29yJywgJ2V3LXJlc2l6ZScpXG5cbiAgICBvdmVybGF5LmNhbGwoZDMuZHJhZygpXG4gICAgICAgIC5vbignZHJhZycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcGFuZWxEcmFnRXZlbnRIYW5kbGVyLmNhbGwodGhpcylcbiAgICB9KSk7XG59XG5cbmZ1bmN0aW9uIHBhbmVsRHJhZ0V2ZW50SGFuZGxlcigpIHtcbiAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KClcbiAgICB1cGRhdGVQYW5lbFdpZHRoKClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQgKCkge1xuICAgIHZhciBwYW5lbCA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsJylcbiAgICB2YXIgcGFuZWxPZmZzZXRIZWlnaHQgPSBwYW5lbC5wcm9wZXJ0eSgnb2Zmc2V0SGVpZ2h0JylcbiAgICB2YXIgcGFuZWxEcmFnT3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbC1kcmFnLW92ZXJsYXknKVxuICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwtaGVhZGVyJylcblxuICAgIHZhciBuZXdIZWlnaHRcblxuICAgIGlmIChwYW5lbC5jbGFzc2VkKCdncmFwaHMtYWN0aXZlJykpIHtcbiAgICAgICAgdmFyIGdyYXBoTGlzdEV4dHJhU3BhY2UgPSA3MDBcbiAgICAgICAgdmFyIGdyYXBoTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaC1saXN0JylcbiAgICAgICAgbmV3SGVpZ2h0ID0gaGVhZGVyLnNjcm9sbEhlaWdodCArIGdyYXBoTGlzdC5zY3JvbGxIZWlnaHQgKyBncmFwaExpc3RFeHRyYVNwYWNlXG4gICAgfVxuICAgIGVsc2UgeyAvLyBwYW5lbC5jbGFzc2VkKCdsYXllcnMtYWN0aXZlJylcbiAgICAgICAgdmFyIGxheWVyTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXllci1saXN0JylcbiAgICAgICAgbmV3SGVpZ2h0ID0gaGVhZGVyLnNjcm9sbEhlaWdodCArIGxheWVyTGlzdC5zY3JvbGxIZWlnaHRcbiAgICB9XG4gICAgbmV3SGVpZ2h0ID0gbmV3SGVpZ2h0ID4gcGFuZWxPZmZzZXRIZWlnaHQgPyBgJHtuZXdIZWlnaHR9YCsncHgnIDogbnVsbFxuICAgIHBhbmVsRHJhZ092ZXJsYXkuc3R5bGUuaGVpZ2h0ID0gbmV3SGVpZ2h0XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVBhbmVsV2lkdGgoKSB7XG4gICAgdmFyIHBhbmVsID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwnKVxuICAgIHZhciBwYW5lbE1pbldpZHRoID0gK3BhbmVsLnN0eWxlKCdtaW4td2lkdGgnKS5zbGljZSgwLCAtMilcbiAgICB2YXIgcGFuZWxDbGllbnRXaWR0aCA9IHBhbmVsLnByb3BlcnR5KCdjbGllbnRXaWR0aCcpXG5cbiAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3cmFwcGVyJylcbiAgICB2YXIgd3JhcHBlcldpZHRoID0gd3JhcHBlci5jbGllbnRXaWR0aFxuXG4gICAgdmFyIG1hcFdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLXdyYXBwZXInKVxuXG4gICAgdmFyIG1vdXNlWCA9IGQzLmV2ZW50LnNvdXJjZUV2ZW50LnhcbiAgICB2YXIgeERlbHRhID0gKHdyYXBwZXJXaWR0aCAtIG1vdXNlWCkgLSBwYW5lbENsaWVudFdpZHRoXG5cbiAgICB2YXIgbmV3UGFuZWxXaWR0aCA9IHBhbmVsQ2xpZW50V2lkdGggKyB4RGVsdGFcbiAgICBuZXdQYW5lbFdpZHRoID0gbmV3UGFuZWxXaWR0aCA8IHBhbmVsTWluV2lkdGggP1xuICAgICAgICBwYW5lbE1pbldpZHRoXG4gICAgOiAgIG5ld1BhbmVsV2lkdGggPiB3cmFwcGVyV2lkdGggP1xuICAgICAgICB3cmFwcGVyV2lkdGhcbiAgICA6ICAgbmV3UGFuZWxXaWR0aFxuICAgIG1hcFdyYXBwZXIuc3R5bGUucGFkZGluZ1JpZ2h0ID0gYCR7bmV3UGFuZWxXaWR0aH1gKydweCdcbiAgICBwYW5lbC5zdHlsZSgnd2lkdGgnLCBgJHtuZXdQYW5lbFdpZHRofWArJ3B4Jylcbn1cblxuZnVuY3Rpb24gbWFrZUxheWVyR3JvdXBzIChsYXlvdXQpIHtcbiAgICByZXR1cm4gZDMuc2VsZWN0KCcjbGF5ZXItbGlzdCcpXG4gICAgICAgIC5zZWxlY3RBbGwoJy5sYXllci1ncm91cC13cmFwcGVyJylcbiAgICAgICAgLmRhdGEobGF5b3V0KVxuICAgICAgICAuZW50ZXIoKVxuICAgICAgICAgICAgLmFwcGVuZCgnZGl2JylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cC13cmFwcGVyJylcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIGxheWVyR3JvdXAgPT4gbGF5ZXJHcm91cC5pZClcbiAgICAgICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBsYXllckdyb3VwID0+IGxheWVyR3JvdXAuYWN0aXZlKVxuICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAtYnRuIGJ0bicpXG4gICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJHcm91cC5hY3RpdmUgPSAhbGF5ZXJHcm91cC5hY3RpdmU7XG4gICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5jbGFzc2VkKCdhY3RpdmUnLCAoKSA9PiBsYXllckdyb3VwLmFjdGl2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KClcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRleHQobGF5ZXJHcm91cC5uYW1lKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwJyk7XG59XG5cbmZ1bmN0aW9uIG1ha2VMYXllckVsZW1zIChsYXllckdyb3VwcywgbGF5ZXJzKSB7XG4gICAgbGF5ZXJHcm91cHMuc2VsZWN0QWxsKCcubGF5ZXItc2VsZWN0JylcbiAgICAgICAgLmRhdGEobGF5ZXJHcm91cCA9PiBsYXllcnNbbGF5ZXJHcm91cC5pZF0pXG4gICAgICAgIC5lbnRlcigpLmFwcGVuZCgnZGl2JylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLXNlbGVjdCcpXG4gICAgICAgIC5lYWNoKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICAgICAgdmFyIGdyb3VwTmFtZSA9IHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkO1xuICAgICAgICAgICAgdmFyIGxheWVyRGl2ID0gZDMuc2VsZWN0KHRoaXMpXG4gICAgICAgICAgICBtYWtlQ2hlY2tib3gobGF5ZXIsIGxheWVyRGl2KTtcbiAgICAgICAgICAgIG1ha2VMYWJlbChsYXllciwgbGF5ZXJEaXYpO1xuICAgICAgICAgICAgbWFrZURlc2NyaXB0aW9uKGxheWVyLCBsYXllckRpdik7XG4gICAgICAgICAgICBsYXllckRpdi5ub2RlKCkuYXBwZW5kQ2hpbGQobWFrZUxheWVyVG9vbHMobGF5ZXIpKTtcbiAgICAgICAgfSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VDaGVja2JveCAobGF5ZXIsIGxheWVyRGl2KSB7XG4gICAgbGF5ZXJEaXYuYXBwZW5kKCdpbnB1dCcpXG4gICAgICAgIC5hdHRyKCd0eXBlJywgJ2NoZWNrYm94JylcbiAgICAgICAgLmF0dHIoJ2lkJywgbGF5ZXIgPT4gbGF5ZXIuaWQpXG4gICAgICAgIC5hdHRyKCdjaGVja2VkJywgKGxheWVyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbGF5ZXIuYWN0aXZlID8gJ2NoZWNrZWQnIDogbnVsbDtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKGxheWVyKSB7XG4gICAgICAgICAgICB0b2dnbGVMYXllcihsYXllcik7XG4gICAgICAgICAgICBsYXllckRpdi5zZWxlY3QoJy5sYXllci10b29scy13cmFwcGVyJylcbiAgICAgICAgICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJywgbGF5ZXIuYWN0aXZlKTtcbiAgICAgICAgICAgIGlmIChsYXllci5hY3RpdmUpIHNldFNsaWRlckluaXRpYWxQb3MobGF5ZXIsIGxheWVyRGl2KVxuICAgICAgICB9KTtcbn1cblxuZnVuY3Rpb24gbWFrZUxhYmVsKGxheWVyLCBsYXllckRpdikge1xuICAgIGxheWVyRGl2XG4gICAgICAgIC5hcHBlbmQoJ2RpdicpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItbGFiZWwtd3JhcHBlcicpXG4gICAgICAgIC5hcHBlbmQoJ2xhYmVsJylcbiAgICAgICAgICAgIC5hdHRyKCdmb3InLCBsYXllciA9PiBsYXllci5pZClcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1sYWJlbCcpXG4gICAgICAgICAgICAuaHRtbChsYXllciA9PiBsYXllci5uYW1lKTtcbn1cblxuZnVuY3Rpb24gbWFrZURlc2NyaXB0aW9uIChsYXllciwgbGF5ZXJEaXYpIHtcbiAgICBpZiAobGF5ZXIuaW5mbyAmJiBsYXllci5pbmZvICE9PSAnJykge1xuICAgICAgICBsYXllckRpdi5hcHBlbmQoJ2RpdicpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby1idG4nKVxuICAgICAgICAgICAgLnRleHQoJyg/KScpXG4gICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLnBhcmVudE5vZGUpXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoJy5sYXllci1pbmZvLXdyYXBwZXInKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBsYXllckRpdi5hcHBlbmQoJ2RpdicpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby13cmFwcGVyJylcbiAgICAgICAgICAgIC50ZXh0KGxheWVyID0+IGxheWVyLmluZm8pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbWFrZUxheWVyVG9vbHMobGF5ZXIsIGxheWVyRGl2KSB7XG4gICAgdmFyIGxheWVyVG9vbHNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGxheWVyVG9vbHNEaXYuY2xhc3NMaXN0LmFkZCgnbGF5ZXItdG9vbHMtd3JhcHBlcicpXG4gICAgaWYgKGxheWVyLmFjdGl2ZSkgbGF5ZXJUb29sc0Rpdi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxuXG4gICAgdmFyIG9wYWNpdHlTbGlkZXIgPSBtYWtlT3BhY2l0eVNsaWRlcihsYXllcik7XG4gICAgdmFyIGxlZ2VuZCA9IG1ha2VMZWdlbmQobGF5ZXIpO1xuXG4gICAgbGF5ZXJUb29sc0Rpdi5hcHBlbmRDaGlsZChvcGFjaXR5U2xpZGVyKVxuICAgIGxheWVyVG9vbHNEaXYuYXBwZW5kQ2hpbGQobGVnZW5kKVxuXG4gICAgcmV0dXJuIGxheWVyVG9vbHNEaXZcbn1cblxuZnVuY3Rpb24gbWFrZUxlZ2VuZCAobGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyKSB7XG4gICAgdmFyIGxlZ2VuZFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHZhciBsZWdlbmRJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxuICAgIGxlZ2VuZFdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnbGVnZW5kLXdyYXBwZXInKVxuICAgIGxlZ2VuZEltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGxheWVyLmxlZ2VuZClcbiAgICBsZWdlbmRXcmFwcGVyLmFwcGVuZENoaWxkKGxlZ2VuZEltZylcbiAgICByZXR1cm4gbGVnZW5kV3JhcHBlclxufVxuXG5cblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvcGFuZWwuanMiLCJpbXBvcnQge0dldE1hcH0gZnJvbSBcIi4vbWFwXCI7XG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tIFwiLi9zaGFyZVwiO1xuXG4vKipcbiAqIE5lZWRlZCBmb3IgdGhlIHNoYXJlIHVybCBzaW5jZSBMZWFmbGV0IGRvZXMgbm90IGhhdmUgYSBkZWZhdWx0IHdheSB0byBzdXJmYWNlXG4gKiB0aGUgb3JkZXIgb2YgbGF5ZXJzIGluIHRoZSBtYXBcbiAqL1xudmFyIF9jdXJyZW50X2xheWVycyA9IFtdO1xudmFyIF9jdXJyZW50X2xheWVyc19vYmplY3RzID0gW107XG5cbi8qKlxuICogTm90ZTogbGF5ZXIgaXMgbm90IHRoZSBsZWFmbGV0IGNvbmNlcHQgb2YgYSBsYXllciwgYnV0IHJhdGhlciB0aGUgaW50ZXJuYWxcbiAqICAgICAgIG9iamVjdCB3aGljaCB0cmFja3MgdGhlbS4gbGF5ZXIubWFwTGF5ZXIgaXMgdGhlIHBvaW50ZXIgdG8gdGhlXG4gKiAgICAgICBsZWFmbGV0IGxheWVyLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBHZXRDdXJyZW50TGF5ZXJzICgpIHtcbiAgICByZXR1cm4gX2N1cnJlbnRfbGF5ZXJzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQ3JlYXRlRGVmYXVsdExheWVycyAobGF5ZXJzLCBkZWZhdWx0TGF5ZXJzKSB7XG4gICAgdmFyIGksIGosIHByb3AsIGxheWVyZ3JvdXA7XG4gICAgdmFyIGRlZmF1bHRMYXllcjtcbiAgICB2YXIgZm91bmRMYXllcjtcblxuICAgIGlmICghZGVmYXVsdExheWVycyB8fCBkZWZhdWx0TGF5ZXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGRlZmF1bHRMYXllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm91bmRMYXllciA9IGZhbHNlO1xuICAgICAgICBkZWZhdWx0TGF5ZXIgPSBkZWZhdWx0TGF5ZXJzW2ldO1xuICAgICAgICBmb3IgKHByb3AgaW4gbGF5ZXJzKSB7XG4gICAgICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xuICAgICAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsYXllcmdyb3VwLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxheWVyZ3JvdXBbal0uaWQgPT09IGRlZmF1bHRMYXllcikge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVMYXllcihsYXllcmdyb3VwW2pdKTtcbiAgICAgICAgICAgICAgICAgICAgZm91bmRMYXllciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmb3VuZExheWVyKSBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUxheWVyIChsYXllcikge1xuICAgIGlmICghbGF5ZXIuYWN0aXZlKSB7XG4gICAgICAgIGVuYWJsZUxheWVyKGxheWVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBkaXNhYmxlTGF5ZXIobGF5ZXIpO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZUxheWVyIChsYXllcikge1xuICAgIHZhciBtYXAgPSBHZXRNYXAoKTtcblxuICAgIGxheWVyLmFjdGl2ZSA9IHRydWU7XG4gICAgbGF5ZXIubWFwTGF5ZXIgPSBsYXllci5tYXBMYXllciB8fCBtYWtlV21zVGlsZUxheWVyKGxheWVyKTtcbiAgICBtYXAuYWRkTGF5ZXIobGF5ZXIubWFwTGF5ZXIpO1xuICAgIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xuICAgIG1vdmVPdmVybGF5TGF5ZXJzVG9Ub3AoKTtcbiAgICB1cGRhdGVTaGFyZVVybCgpO1xufVxuXG5mdW5jdGlvbiBtb3ZlT3ZlcmxheUxheWVyc1RvVG9wICgpIHtcbiAgICB2YXIgbGF5ZXI7XG4gICAgdmFyIGksIGw7XG5cbiAgICBmb3IgKGkgPSAwLCBsID0gX2N1cnJlbnRfbGF5ZXJzX29iamVjdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGxheWVyID0gX2N1cnJlbnRfbGF5ZXJzX29iamVjdHNbaV07XG4gICAgICAgIGlmIChsYXllci50eXBlID09PSBcIm92ZXJsYXlcIikgbGF5ZXIubWFwTGF5ZXIuYnJpbmdUb0Zyb250KCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhZGRMYXllclRvSW50ZXJuYWxUcmFja2VyIChsYXllcikge1xuICAgIF9jdXJyZW50X2xheWVycy5wdXNoKGxheWVyLmlkKTtcbiAgICBfY3VycmVudF9sYXllcnNfb2JqZWN0cy5wdXNoKGxheWVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVMYXllciAobGF5ZXIpIHtcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XG5cbiAgICBsYXllci5hY3RpdmUgPSBmYWxzZTtcbiAgICBpZiAobGF5ZXIubWFwTGF5ZXIgJiYgbWFwLmhhc0xheWVyKGxheWVyLm1hcExheWVyKSkge1xuICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobGF5ZXIubWFwTGF5ZXIpO1xuICAgIH1cbiAgICByZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xuICAgIHVwZGF0ZVNoYXJlVXJsKCk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUxheWVyRnJvbUludGVybmFsVHJhY2tlciAobGF5ZXIpIHtcbiAgICB2YXIgbG9jID0gX2N1cnJlbnRfbGF5ZXJzLmluZGV4T2YobGF5ZXIuaWQpO1xuICAgIGlmIChsb2MgPT09IC0xKSByZXR1cm47XG4gICAgX2N1cnJlbnRfbGF5ZXJzLnNwbGljZShsb2MsIDEpO1xuICAgIF9jdXJyZW50X2xheWVyc19vYmplY3RzLnNwbGljZShsb2MsIDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTGF5ZXJPcGFjaXR5IChsYXllciwgbmV3T3BhY2l0eSkge1xuICAgIGxheWVyLm9wYWNpdHkgPSBuZXdPcGFjaXR5XG4gICAgbGF5ZXIubWFwTGF5ZXIuc2V0T3BhY2l0eShuZXdPcGFjaXR5KVxufVxuXG5mdW5jdGlvbiBtYWtlV21zVGlsZUxheWVyIChsYXllcikge1xuICAgIHJldHVybiBMLnRpbGVMYXllci53bXMobGF5ZXIudXJsLCB7XG4gICAgICAgIGxheWVyczogbGF5ZXIuaWQsXG4gICAgICAgIHRyYW5zcGFyZW50OiBsYXllci50cmFuc3BhcmVudCB8fCB0cnVlLFxuICAgICAgICB2ZXJzaW9uOiBsYXllci52ZXJzaW9uIHx8ICcxLjMuMCcsXG4gICAgICAgIGNyczogbGF5ZXIuY3JzIHx8IEwuQ1JTLkVQU0c5MDA5MTMsXG4gICAgICAgIGZvcm1hdDogbGF5ZXIuZm9ybWF0IHx8ICdpbWFnZS9wbmcnLFxuICAgICAgICBvcGFjaXR5OiBsYXllci5vcGFjaXR5IHx8IDEuMCxcbiAgICAgICAgdGlsZVNpemU6IGxheWVyLnRpbGVTaXplIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwXCIpLmNsaWVudFdpZHRoXG4gICAgfSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9sYXllci5qcyIsInZhciBtYXA7XG5cbmV4cG9ydCBmdW5jdGlvbiBDcmVhdGVNYXAgKG1hcENvbmZpZykge1xuICAgIHZhciBpZCA9IG1hcENvbmZpZy5pZCB8fCBcIm1hcFwiO1xuICAgIHZhciBvcHRpb25zID0gbWFwQ29uZmlnLm9wdGlvbnMgfHwge1wic2Nyb2xsV2hlZWxab29tXCIgOiBmYWxzZX07XG4gICAgdmFyIGluaXRpYWxDZW50ZXIgPSBtYXBDb25maWcuY2VudGVyIHx8IFtcIjM4LjVcIiwgXCItODFcIl07XG4gICAgdmFyIGluaXRpYWxab29tID0gbWFwQ29uZmlnLnpvb20gfHwgNjtcblxuICAgIG1hcCA9IEwubWFwKGlkLCBvcHRpb25zKS5zZXRWaWV3KGluaXRpYWxDZW50ZXIsIGluaXRpYWxab29tKTtcbiAgICBMLmNvbnRyb2wuYXR0cmlidXRpb24oKS5hZGRUbyhtYXApXG4gICAgcmV0dXJuIG1hcDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEdldE1hcCAoKSB7XG4gICAgcmV0dXJuIG1hcDtcbn1cblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvbWFwLmpzIiwiaW1wb3J0IHtHZXRNYXB9IGZyb20gJy4vbWFwJztcbmltcG9ydCB7QkFTRV9MQVlFUl9UWVBFfSBmcm9tICcuL2Jhc2VsYXllcic7XG5pbXBvcnQge0dldEN1cnJlbnRMYXllcnN9IGZyb20gJy4vbGF5ZXInO1xuaW1wb3J0IHtHZXRBbGxQb2ludHNPZkludGVyZXN0fSBmcm9tICcuL3BvaSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBCaW5kVXBkYXRlU2hhcmVVcmwgKG1hcCkge1xuICAgIG1hcC5vbihcIm1vdmVlbmRcIiwgdXBkYXRlU2hhcmVVcmwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlU2hhcmVVcmwgKGUpIHtcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XG5cbiAgICB2YXIgcGFyYW1zID0gW1xuICAgICAgICBtYWtlQ2VudGVyU3RyaW5nKG1hcCksXG4gICAgICAgIG1ha2Vab29tU3RyaW5nKG1hcCksXG4gICAgICAgIG1ha2VMYXllclN0cmluZyhtYXApLFxuICAgICAgICBtYWtlQmFzZUxheWVyU3RyaW5nKG1hcCksXG4gICAgICAgIG1ha2VQb2ludHNPZkludGVyZXN0U3RyaW5nKCksXG4gICAgICAgIG1ha2VBY3RpdmVUYWJTdHJpbmcoKSxcbiAgICAgICAgbWFrZUFjdGl2ZUdyYXBoVGFiU3RyaW5nKClcbiAgICBdO1xuXG4gICAgc2V0U2hhcmVVcmwobWFrZVNoYXJlVXJsKHBhcmFtcykpO1xuICAgIHNldENvcHlMaW5rVXJsKCk7XG4gICAgc2V0U29jaWFsVXJscygpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnIChjb25maWcpIHtcbiAgICB2YXIgc2hhcmUgPSBwYXJzZVNoYXJlVXJsKCk7XG4gICAgaWYgKCFzaGFyZSkgcmV0dXJuO1xuICAgIGlmIChzaGFyZS5jZW50ZXIpIGNvbmZpZy5tYXAuY2VudGVyID0gc2hhcmUuY2VudGVyO1xuICAgIGlmIChzaGFyZS56b29tKSBjb25maWcubWFwLnpvb20gPSBzaGFyZS56b29tO1xuICAgIGlmIChzaGFyZS5sYXllcnMpIGFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5sYXllcnMsIGNvbmZpZyk7XG4gICAgaWYgKHNoYXJlLmJhc2VsYXllcnMpIGFkZEJhc2VMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmUuYmFzZWxheWVycywgY29uZmlnKTtcbiAgICBpZiAoc2hhcmUucG9pcykgYWRkUG9pbnRzT2ZJbnRlcmVzdFRvQ29uZmlnKHNoYXJlLnBvaXMsIGNvbmZpZylcbiAgICBpZiAoc2hhcmUudGFiKSBjb25maWcudGFiID0gc2hhcmUudGFiO1xuICAgIGlmIChzaGFyZS5ncmFwaCkgY29uZmlnLmdyYXBoID0gc2hhcmUuZ3JhcGg7XG59XG5cbmZ1bmN0aW9uIG1ha2VTaGFyZVVybCAocGFyYW1zKSB7XG4gICAgcmV0dXJuIFwiP1wiICsgcGFyYW1zLmZpbHRlcihmdW5jdGlvbiAocCkgeyByZXR1cm4gcCAhPT0gdW5kZWZpbmVkIH0pLmpvaW4oXCImXCIpO1xufVxuXG5mdW5jdGlvbiBzZXRTaGFyZVVybCAodXJsKSB7XG4gICAgaWYgKHdpbmRvdy5oaXN0b3J5ICYmIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSkge1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIFwiXCIsIHVybCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXRDb3B5TGlua1VybCAoKSB7XG4gICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hhcmV1cmwtbGluay11cmxcIikuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgdXJsKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEJpbmRDb3B5TGlua0V2ZW50cyAoKSB7XG4gICAgZDMuc2VsZWN0KGRvY3VtZW50KS5vbihcImNsaWNrXCIsIGhhbmRsZUJvZHlDbGljayk7XG4gICAgZDMuc2VsZWN0KFwiLnNoYXJldXJsLWxpbmsgYVwiKS5vbihcImNsaWNrXCIsIGhhbmRsZVNoYXJlTGlua0J1dHRvbkNsaWNrKTtcbiAgICBkMy5zZWxlY3QoXCIuc2hhcmV1cmwtbGluay11cmxcIikub24oXCJjbGlja1wiLCBoYW5kbGVTaGFyZUxpbmtVcmxDbGljayk7XG4gICAgZDMuc2VsZWN0KFwiLnNoYXJldXJsLWxpbmstcG9wdXAtcmVtb3ZlclwiKS5vbihcImNsaWNrXCIsIGhhbmRsZVNoYXJlTGlua0Nsb3NlQnV0dG9uQ2xpY2spO1xufVxuXG4vKipcbiAqIFNob3VsZCBjbG9zZSB0aGUgY29weSBsaW5rIHBvcHVwIGlmIGl0IGlzIGFjdGl2ZSBhbmQgaWYgeW91IGNsaWNrIG9uIGFueSBlbGVtZW50XG4gKiB0aGF0IGlzIG5vdCB0aGUgcG9wdXAgb3IgaXRzIGNoaWxkcmVuLlxuICovXG5mdW5jdGlvbiBoYW5kbGVCb2R5Q2xpY2sgKCkge1xuICAgIHZhciBldmVudCA9IGQzLmV2ZW50O1xuICAgIHZhciBwYXJlbnRzID0gW11cbiAgICBpZiAoZXZlbnQucGF0aCkge1xuICAgICAgICBwYXJlbnRzID0gZXZlbnQucGF0aFxuICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmVudHMgPSBnZXREb21QYXRoKGV2ZW50LnNyY0VsZW1lbnQpXG4gICAgfVxuICAgIHZhciBjbGlja2VkSW5Qb3B1cCA9IGZhbHNlO1xuICAgIHZhciBpLCBsO1xuXG4gICAgZm9yIChpID0gMCwgbCA9IHBhcmVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmIChwYXJlbnRzW2ldLmNsYXNzTmFtZSAmJiB0eXBlb2YocGFyZW50c1tpXS5jbGFzc05hbWUpID09PSBcInN0cmluZ1wiICYmIHBhcmVudHNbaV0uY2xhc3NOYW1lLmluZGV4T2YoXCJzaGFyZXVybC1saW5rXCIpICE9PSAtMSkge1xuICAgICAgICAgICAgY2xpY2tlZEluUG9wdXAgPSB0cnVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWNsaWNrZWRJblBvcHVwKSB7XG4gICAgICAgIGhhbmRsZUNvcHlMaW5rQ2xvc2UoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldERvbVBhdGgobm9kZSkge1xuICAgIHZhciBwYXRoID0gW11cbiAgICB3aGlsZSAobm9kZSkge1xuICAgICAgICBwYXRoLnB1c2gobm9kZSlcbiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZVxuICAgIH1cbiAgICByZXR1cm4gcGF0aFxufVxuXG5mdW5jdGlvbiBoYW5kbGVTaGFyZUxpbmtCdXR0b25DbGljayAoKSB7XG4gICAgZDMuc2VsZWN0KGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaGFyZXVybC1saW5rLXBvcHVwXCIpWzBdKS5jbGFzc2VkKFwiYWN0aXZlXCIpID9cbiAgICAgICAgaGFuZGxlQ29weUxpbmtDbG9zZSgpIDpcbiAgICAgICAgaGFuZGxlQ29weUxpbmtPcGVuKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVNoYXJlTGlua0Nsb3NlQnV0dG9uQ2xpY2sgKCkge1xuICAgIGhhbmRsZUNvcHlMaW5rQ2xvc2UoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlU2hhcmVMaW5rVXJsQ2xpY2sgKCkge1xuICAgIHNlbGVjdENvcHlMaW5rVXJsKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNvcHlMaW5rT3BlbiAoKSB7XG4gICAgZDMuc2VsZWN0KGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaGFyZXVybC1saW5rLXBvcHVwXCIpWzBdKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuICAgIHNlbGVjdENvcHlMaW5rVXJsKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNvcHlMaW5rQ2xvc2UgKCkge1xuICAgIGQzLnNlbGVjdChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2hhcmV1cmwtbGluay1wb3B1cFwiKVswXSkuY2xhc3NlZChcImFjdGl2ZVwiLCBmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIHNlbGVjdENvcHlMaW5rVXJsICgpIHtcbiAgICB2YXIgc2hhcmVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hhcmV1cmwtbGluay11cmxcIik7XG4gICAgc2hhcmVJbnB1dC5mb2N1cygpO1xuICAgIHNoYXJlSW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgc2hhcmVJbnB1dC52YWx1ZS5sZW5ndGgpO1xufVxuXG5mdW5jdGlvbiBzZXRTb2NpYWxVcmxzICgpIHtcbiAgICB2YXIgdXJsID0gbWFuZ2xlUGFyYW1TdHJpbmcod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgIHZhciBzb2NpYWxMaW5rcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaGFyZXVybC1zb2NpYWxcIik7XG4gICAgdmFyIHNvY2lhbExpbms7XG4gICAgdmFyIG5ld1VybDtcbiAgICB2YXIgaSwgbDtcblxuICAgIGZvciAoaSA9IDAsIGwgPSBzb2NpYWxMaW5rcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgc29jaWFsTGluayA9IHNvY2lhbExpbmtzW2ldO1xuICAgICAgICBuZXdVcmwgPSBzb2NpYWxMaW5rLmdldEF0dHJpYnV0ZShcImRhdGEtYmFzZXVybFwiKSArIHVybDtcbiAgICAgICAgc29jaWFsTGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIG5ld1VybCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBtYWtlQ2VudGVyU3RyaW5nIChtYXApIHtcbiAgICB2YXIgY2VudGVyID0gbWFwLmdldENlbnRlcigpO1xuICAgIHJldHVybiBcImNlbnRlcj1cIiArIGNlbnRlci5sYXQudG9TdHJpbmcoKSArIFwiLFwiICsgY2VudGVyLmxuZy50b1N0cmluZygpO1xufVxuXG5mdW5jdGlvbiBtYWtlWm9vbVN0cmluZyAobWFwKSB7XG4gICAgcmV0dXJuIFwiem9vbT1cIiArIG1hcC5nZXRab29tKCk7XG59XG5cbmZ1bmN0aW9uIG1ha2VMYXllclN0cmluZyAobWFwKSB7XG4gICAgdmFyIGxheWVycyA9IFtdO1xuICAgIHZhciBvcGFjaXR5VmFscyA9IHt9O1xuICAgIHZhciBjdXJyZW50TGF5ZXJzID0gR2V0Q3VycmVudExheWVycygpO1xuXG4gICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBsYXllci5vcHRpb25zO1xuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxheWVycykge1xuICAgICAgICAgICAgb3BhY2l0eVZhbHNbb3B0aW9ucy5sYXllcnNdID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShcIm9wYWNpdHlcIikgPyBvcHRpb25zLm9wYWNpdHkgOiBcIjFcIjtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIGN1cnJlbnRMYXllcjtcbiAgICB2YXIgaTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgY3VycmVudExheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjdXJyZW50TGF5ZXIgPSBjdXJyZW50TGF5ZXJzW2ldO1xuICAgICAgICBsYXllcnMucHVzaChjdXJyZW50TGF5ZXIpO1xuICAgICAgICBsYXllcnMucHVzaChvcGFjaXR5VmFsc1tjdXJyZW50TGF5ZXJdKTtcbiAgICB9XG4gICAgcmV0dXJuIFwibGF5ZXJzPVwiICsgbGF5ZXJzLmpvaW4oXCIsXCIpO1xufVxuXG5mdW5jdGlvbiBtYWtlQmFzZUxheWVyU3RyaW5nIChtYXApIHtcbiAgICB2YXIgbGF5ZXJzID0gW107XG4gICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMgJiYgbGF5ZXIub3B0aW9ucy50eXBlID09PSBCQVNFX0xBWUVSX1RZUEUpIHtcbiAgICAgICAgICAgIGxheWVycy5wdXNoKGxheWVyLm9wdGlvbnMuaWQpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFwiYmFzZWxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcbn1cblxuZnVuY3Rpb24gbWFrZVBvaW50c09mSW50ZXJlc3RTdHJpbmcgKCkge1xuICAgIHZhciBwb2lzID0gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCgpXG4gICAgaWYgKCFwb2lzLmxlbmd0aCkgcmV0dXJuXG4gICAgdmFyIHBvaVN0cmluZyA9IFwicG9pcz1cIlxuICAgIHBvaXMuZm9yRWFjaChwb2kgPT4ge1xuICAgICAgICBwb2lTdHJpbmcgKz0gcG9pLmxhdCArICcsJyArIHBvaS5sbmcgKyAnOydcbiAgICB9KVxuICAgIHJldHVybiBwb2lTdHJpbmdcbn1cblxuZnVuY3Rpb24gbWFrZUFjdGl2ZVRhYlN0cmluZyAoKSB7XG4gICAgcmV0dXJuIFwidGFiPVwiICsgZDMuc2VsZWN0KFwiLnBhbmVsLXRvcC1idG4uYWN0aXZlXCIpLmF0dHIoXCJkYXRhLWFjdGl2ZVwiKTtcbn1cblxuZnVuY3Rpb24gbWFrZUFjdGl2ZUdyYXBoVGFiU3RyaW5nICgpIHtcbiAgICByZXR1cm4gXCJncmFwaD1cIiArIGQzLnNlbGVjdChcIi5ncmFwaC10eXBlLWJ0bi5hY3RpdmVcIikuYXR0cihcImRhdGEtdHlwZVwiKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VTaGFyZVVybCAoKSB7XG4gICAgdmFyIHBhcmFtcyA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XG4gICAgaWYgKHBhcmFtcyA9PT0gXCJcIikgcmV0dXJuO1xuXG4gICAgcGFyYW1zID0gZ2V0UGFyYW1zQXJyYXkocGFyYW1zKTtcbiAgICBwYXJhbXMgPSBtYWtlS2V5ZWRQYXJhbXNPYmplY3QocGFyYW1zKTtcblxuICAgIGZvcm1hdFBhcmFtcyhwYXJhbXMpO1xuICAgIHJldHVybiBwYXJhbXM7XG59XG5cbmZ1bmN0aW9uIGdldFBhcmFtc0FycmF5IChwYXJhbXMpIHtcbiAgICBwYXJhbXMgPSBwYXJhbXMuc3Vic3RyaW5nKDEpO1xuICAgIHBhcmFtcyA9IHVubWFuZ2xlUGFyYW1TdHJpbmcocGFyYW1zKTtcbiAgICByZXR1cm4gcGFyYW1zLnNwbGl0KFwiJlwiKTtcbn1cblxuZnVuY3Rpb24gbWFuZ2xlUGFyYW1TdHJpbmcgKHVybCkge1xuICAgIHJldHVybiB1cmwucmVwbGFjZSgvXFw6L2csIFwiJTNBXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXDsvZywgXCIlM0JcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcLy9nLCBcIiUyRlwiKVxuICAgICAgICAucmVwbGFjZSgvXFwsL2csIFwiJTJDXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXCYvZywgXCIlMjZcIik7XG59XG5cbmZ1bmN0aW9uIHVubWFuZ2xlUGFyYW1TdHJpbmcgKHBhcmFtcykge1xuICAgIHJldHVybiBwYXJhbXMucmVwbGFjZSgvXFwlMltjfENdL2csIFwiLFwiKS5yZXBsYWNlKC9cXCUzW2J8Ql0vZywgXCI7XCIpXG59XG5cbmZ1bmN0aW9uIG1ha2VLZXllZFBhcmFtc09iamVjdCAocGFyYW1zQXJyKSB7XG4gICAgdmFyIHBhcnNlZFBhcmFtcyA9IHt9O1xuICAgIHZhciBwYXJhbVBhaXI7XG4gICAgdmFyIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgcGFyYW1zQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHBhcmFtUGFpciA9IHBhcmFtc0FycltpXS5zcGxpdChcIj1cIik7XG4gICAgICAgIHBhcnNlZFBhcmFtc1twYXJhbVBhaXJbMF1dID0gcGFyYW1QYWlyWzFdXG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcnNlZFBhcmFtcztcbn1cblxuZnVuY3Rpb24gZm9ybWF0UGFyYW1zIChwYXJhbXMpIHtcbiAgICBpZiAocGFyYW1zLmNlbnRlcikgcGFyYW1zLmNlbnRlciA9IGZvcm1hdENlbnRlclBhcmFtKHBhcmFtcy5jZW50ZXIpO1xuICAgIGlmIChwYXJhbXMubGF5ZXJzKSBwYXJhbXMubGF5ZXJzID0gZm9ybWF0TGF5ZXJQYXJhbShwYXJhbXMubGF5ZXJzKTtcbiAgICBpZiAocGFyYW1zLmJhc2VsYXllcnMpIHBhcmFtcy5iYXNlbGF5ZXJzID0gZm9ybWF0QmFzZUxheWVyUGFyYW0ocGFyYW1zLmJhc2VsYXllcnMpO1xuICAgIGlmIChwYXJhbXMucG9pcykgcGFyYW1zLnBvaXMgPSBmb3JtYXRQb2ludHNPZkludGVyZXN0UGFyYW0ocGFyYW1zLnBvaXMpXG59XG5cbmZ1bmN0aW9uIGZvcm1hdENlbnRlclBhcmFtIChjZW50ZXIpIHtcbiAgICByZXR1cm4gY2VudGVyLnNwbGl0KFwiLFwiKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TGF5ZXJQYXJhbSAobGF5ZXJzKSB7XG4gICAgdmFyIGZvcm1hdHRlZExheWVycyA9IHtcbiAgICAgICAgXCJlbmFibGVkTGF5ZXJzXCI6IFtdLFxuICAgICAgICBcIm9wYWNpdHlWYWxzXCI6IHt9XG4gICAgfTtcbiAgICB2YXIgbGF5ZXJJZDtcbiAgICB2YXIgaTtcblxuICAgIGxheWVycyA9IGxheWVycy5zcGxpdChcIixcIik7XG4gICAgZm9yIChpID0gMDsgaSA8IGxheWVycy5sZW5ndGg7IGkgPSBpICsgMikge1xuICAgICAgICBsYXllcklkID0gbGF5ZXJzW2ldO1xuICAgICAgICBmb3JtYXR0ZWRMYXllcnMuZW5hYmxlZExheWVycy5wdXNoKGxheWVySWQpO1xuICAgICAgICBmb3JtYXR0ZWRMYXllcnMub3BhY2l0eVZhbHNbbGF5ZXJJZF0gPSBsYXllcnNbaSsxXTtcbiAgICB9XG5cbiAgICByZXR1cm4gZm9ybWF0dGVkTGF5ZXJzO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRCYXNlTGF5ZXJQYXJhbSAoYmFzZWxheWVycykge1xuICAgIHJldHVybiBiYXNlbGF5ZXJzLnNwbGl0KFwiLFwiKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0UG9pbnRzT2ZJbnRlcmVzdFBhcmFtIChwb2lzKSB7XG4gICAgcmV0dXJuIHBvaXMuc3BsaXQoJzsnKVxuICAgICAgICAuZmlsdGVyKChzdHIpID0+IHN0ciAhPT0gJycpXG4gICAgICAgIC5tYXAoKHBvaSkgPT4ge1xuICAgICAgICAgICAgcG9pID0gcG9pLnNwbGl0KCcsJylcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbGF0OiBwb2lbMF0sXG4gICAgICAgICAgICAgICAgbG5nOiBwb2lbMV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbn1cblxuXG5mdW5jdGlvbiBhZGRMYXllclNldHRpbmdzVG9Db25maWcgKHNoYXJlTGF5ZXJTZXR0aW5ncywgY29uZmlnKSB7XG4gICAgdmFyIGVuYWJsZWRMYXllcnMgPSBzaGFyZUxheWVyU2V0dGluZ3MuZW5hYmxlZExheWVycztcbiAgICBjb25maWdbXCJhY3RpdmUtbGF5ZXJzXCJdID0gZW5hYmxlZExheWVycztcblxuICAgIHZhciBpLCBqLCBwcm9wLCBsYXllcmdyb3VwO1xuICAgIHZhciBlbmFibGVkTGF5ZXI7XG4gICAgdmFyIGZvdW5kTGF5ZXI7XG4gICAgdmFyIGxheWVycyA9IGNvbmZpZy5sYXllcnM7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgZW5hYmxlZExheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3VuZExheWVyID0gZmFsc2U7XG4gICAgICAgIGVuYWJsZWRMYXllciA9IGVuYWJsZWRMYXllcnNbaV07XG4gICAgICAgIGZvciAocHJvcCBpbiBsYXllcnMpIHtcbiAgICAgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG4gICAgICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGxheWVyZ3JvdXAubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZW5hYmxlZExheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyZ3JvdXBbal0ub3BhY2l0eSA9IHNoYXJlTGF5ZXJTZXR0aW5ncy5vcGFjaXR5VmFsc1tlbmFibGVkTGF5ZXJdO1xuICAgICAgICAgICAgICAgICAgICBmb3VuZExheWVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhZGRCYXNlTGF5ZXJTZXR0aW5nc1RvQ29uZmlnIChzaGFyZUJhc2VMYXllclNldHRpbmdzLCBjb25maWcpIHtcbiAgICB2YXIgYmFzZWxheWVycyA9IGNvbmZpZy5iYXNlbGF5ZXJzO1xuICAgIHZhciBiYXNlbGF5ZXI7XG4gICAgdmFyIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgYmFzZWxheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBiYXNlbGF5ZXIgPSBiYXNlbGF5ZXJzW2ldO1xuICAgICAgICBiYXNlbGF5ZXIuYWN0aXZlID0gKHNoYXJlQmFzZUxheWVyU2V0dGluZ3MuaW5kZXhPZihiYXNlbGF5ZXIuaWQpICE9PSAtMSkgPyB0cnVlIDogZmFsc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhZGRQb2ludHNPZkludGVyZXN0VG9Db25maWcocG9pcywgY29uZmlnKSB7XG4gICAgY29uZmlnW1wicG9pc1wiXSA9IHBvaXNcbn1cblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvc2hhcmUuanMiLCJpbXBvcnQge0dldE1hcH0gZnJvbSBcIi4vbWFwXCI7XG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tIFwiLi9zaGFyZVwiO1xuXG5leHBvcnQgY29uc3QgQkFTRV9MQVlFUl9UWVBFID0gXCJiYXNlbGF5ZXJcIjtcblxudmFyIF9iYXNlbGF5ZXJzO1xuXG5leHBvcnQgZnVuY3Rpb24gQ3JlYXRlQmFzZUxheWVycyAobWFwLCBsYXllckNvbmZpZykge1xuICAgIGxheWVyQ29uZmlnID0gbGF5ZXJDb25maWcgfHwgXG4gICAgICAgIFt7XG4gICAgICAgICAgICBcImlkXCIgOiBcImNhcnRvLWxpZ2h0LWRlZmF1bHRcIixcbiAgICAgICAgICAgIFwidXJsXCIgOiBcImh0dHA6Ly97c30uYmFzZW1hcHMuY2FydG9jZG4uY29tL2xpZ2h0X2FsbC97en0ve3h9L3t5fS5wbmdcIixcbiAgICAgICAgICAgIFwiYXR0cmlidXRpb25cIiA6ICcmY29weTsgPGEgaHJlZj1cImh0dHA6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzLCAmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vY2FydG8uY29tL2F0dHJpYnV0aW9uc1wiPkNBUlRPPC9hPidcbiAgICAgICAgfV07XG5cbiAgICBfYmFzZWxheWVycyA9IGxheWVyQ29uZmlnO1xuICAgIHZhciBpO1xuICAgIHZhciBiYXNlTGF5ZXI7XG4gICAgdmFyIGNvbmZpZztcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsYXllckNvbmZpZy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25maWcgPSBsYXllckNvbmZpZ1tpXTtcblxuICAgICAgICBpZiAoIWNvbmZpZy5hY3RpdmUpIGNvbnRpbnVlO1xuICAgICAgICBiYXNlTGF5ZXIgPSBjcmVhdGVCYXNlTGF5ZXIoY29uZmlnKTtcbiAgICAgICAgY29uZmlnLmxheWVyID0gYmFzZUxheWVyO1xuICAgICAgICBiYXNlTGF5ZXIuYWRkVG8obWFwKTtcbiAgICB9XG5cbiAgICBjcmVhdGVCYXNlTGF5ZXJVSShsYXllckNvbmZpZylcbn1cblxuZnVuY3Rpb24gY3JlYXRlQmFzZUxheWVyVUkgKGNvbmZpZykge1xuICAgIHZhciBiYXNlVUkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGJhc2VVSS5jbGFzc05hbWUgPSBcImJhc2VsYXllci11aVwiO1xuICAgIHZhciBiYXNlV3JhcHBlcjtcbiAgICB2YXIgYmFzZUltZztcbiAgICB2YXIgYmFzZUxhYmVsO1xuXG4gICAgdmFyIGxheWVyO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY29uZmlnLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBsYXllciA9IGNvbmZpZ1tpXTtcbiAgICAgICAgaWYgKCFsYXllci5oYXNPd25Qcm9wZXJ0eShcImltYWdlXCIpKSBjb250aW51ZTtcblxuICAgICAgICBiYXNlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGJhc2VXcmFwcGVyLnNldEF0dHJpYnV0ZShcImRhdGEtbGF5ZXJcIiwgbGF5ZXIuaWQpO1xuICAgICAgICBiYXNlSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgICAgYmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbGF5ZXIuaW1hZ2UpO1xuICAgICAgICBiYXNlSW1nLnNldEF0dHJpYnV0ZShcImFsdFwiLCBsYXllci5sYWJlbCk7XG4gICAgICAgIGJhc2VJbWcuc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgbGF5ZXIubGFiZWwpO1xuICAgICAgICBiYXNlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBiYXNlTGFiZWwudGV4dENvbnRlbnQgPSBsYXllci5sYWJlbDtcbiAgICAgICAgYmFzZVdyYXBwZXIuYXBwZW5kQ2hpbGQoYmFzZUltZyk7XG4gICAgICAgIGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VMYWJlbCk7XG4gICAgICAgIGJhc2VXcmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVCYXNlQ2xpY2spXG5cbiAgICAgICAgZDMuc2VsZWN0KGJhc2VXcmFwcGVyKVxuICAgICAgICAgICAgLmNsYXNzZWQoXCJiYXNlLXNlbGVjdG9yXCIsIHRydWUpXG4gICAgICAgICAgICAuY2xhc3NlZChcImFjdGl2ZVwiLCBsYXllci5hY3RpdmUpO1xuICAgICAgIFxuICAgICAgICBiYXNlVUkuYXBwZW5kQ2hpbGQoYmFzZVdyYXBwZXIpO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJsZWFmbGV0LWJvdHRvbSBsZWFmbGV0LWxlZnRcIilbMF0uYXBwZW5kQ2hpbGQoYmFzZVVJKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQmFzZUNsaWNrIChlKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB2YXIgbGF5ZXJpZCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiKTtcbiAgICB0b2dnbGVBY3RpdmVCYXNlVUkodGhpcyk7XG4gICAgcmVtb3ZlQ3VycmVudEJhc2VMYXllcigpO1xuICAgIGFkZE5ld0Jhc2VMYXllclRvTWFwKGxheWVyaWQpO1xuICAgIHVwZGF0ZVNoYXJlVXJsKCk7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZUFjdGl2ZUJhc2VVSSAoYmFzZVVJRWxlbSkge1xuICAgIGQzLnNlbGVjdChcIi5iYXNlLXNlbGVjdG9yLmFjdGl2ZVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGZhbHNlKTtcbiAgICBkMy5zZWxlY3QoYmFzZVVJRWxlbSkuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ3VycmVudEJhc2VMYXllciAoKSB7XG4gICAgdmFyIG1hcCA9IEdldE1hcCgpO1xuXG4gICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMudHlwZSAhPT0gQkFTRV9MQVlFUl9UWVBFKSByZXR1cm47XG4gICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllcik7XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gYWRkTmV3QmFzZUxheWVyVG9NYXAgKGxheWVyaWQpIHtcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XG5cbiAgICB2YXIgbGF5ZXI7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBfYmFzZWxheWVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgbGF5ZXIgPSBfYmFzZWxheWVyc1tpXTtcbiAgICAgICAgaWYgKGxheWVyLmlkICE9PSBsYXllcmlkKSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFsYXllci5sYXllcikgbGF5ZXIubGF5ZXIgPSBjcmVhdGVCYXNlTGF5ZXIobGF5ZXIpO1xuICAgICAgICBsYXllci5sYXllci5hZGRUbyhtYXApO1xuICAgICAgICBsYXllci5sYXllci5icmluZ1RvQmFjaygpO1xuICAgICAgICBicmVhaztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUJhc2VMYXllciAobGF5ZXJDb25maWcpIHtcbiAgICByZXR1cm4gTC50aWxlTGF5ZXIoXG4gICAgICAgIGxheWVyQ29uZmlnLnVybCxcbiAgICAgICAgbWFrZUJhc2VMYXllck9wdGlvbnMobGF5ZXJDb25maWcpXG4gICAgKTtcbn1cblxuZnVuY3Rpb24gbWFrZUJhc2VMYXllck9wdGlvbnMgKGNvbmZpZykge1xuICAgIHZhciBvcHRpb25zID0ge307XG4gICAgaWYgKGNvbmZpZy5pZCkgb3B0aW9ucy5pZCA9IGNvbmZpZy5pZDtcbiAgICBpZiAoY29uZmlnLmF0dHJpYnV0aW9uKSBvcHRpb25zLmF0dHJpYnV0aW9uID0gY29uZmlnLmF0dHJpYnV0aW9uO1xuICAgIGlmIChjb25maWcuc3ViZG9tYWlucykgb3B0aW9ucy5zdWJkb21haW5zID0gY29uZmlnLnN1YmRvbWFpbnM7XG4gICAgb3B0aW9ucy50eXBlID0gQkFTRV9MQVlFUl9UWVBFO1xuXG4gICAgcmV0dXJuIG9wdGlvbnM7XG59XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2Jhc2VsYXllci5qcyIsImltcG9ydCB7XG4gIGNyZWF0ZUdyYXBoRGl2LFxuICBjcmVhdGVNYXJrZXIsXG4gIGNyZWF0ZUdyYXBoUmVtb3ZlcixcbiAgZ2V0SWNvblxufSBmcm9tICcuL2dyYXBoJ1xuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSAnLi9zaGFyZSdcbmltcG9ydCB7R2V0TWFwfSBmcm9tICcuL21hcCdcbmltcG9ydCB7R2V0QWN0aXZlVGFiLCBIYW5kbGVUYWJDaGFuZ2V9IGZyb20gJy4vdGFicydcblxudmFyIF9wb2ludHNfb2ZfaW50ZXJlc3QgPSBbXVxuXG5leHBvcnQgZnVuY3Rpb24gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCAoKSB7XG4gICAgcmV0dXJuIF9wb2ludHNfb2ZfaW50ZXJlc3Rcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlciAobGF0LCBsbmcpIHtcbiAgICB2YXIgcG9pID0ge1xuICAgICAgICBsYXQ6IGxhdCxcbiAgICAgICAgbG5nOiBsbmdcbiAgICB9XG4gICAgX3BvaW50c19vZl9pbnRlcmVzdC5wdXNoKHBvaSlcbiAgICByZXR1cm4gcG9pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTZXR1cFBvaW50c09mSW50ZXJlc3QgKG1hcCwgbmV3UG9pcykge1xuICAgIEFkZE11bHRpcGxlUG9pbnRzT2ZJbnRlcmVzdChuZXdQb2lzKVxuICAgIHZhciBwb2lzID0gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCgpXG4gICAgdmFyIG1hcCA9IEdldE1hcCgpXG4gICAgcG9pcy5mb3JFYWNoKHBvaSA9PiB7XG4gICAgICAgIFNldHVwUG9pbnRPZkludGVyZXN0VUkobWFwLCBwb2kpXG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEFkZE11bHRpcGxlUG9pbnRzT2ZJbnRlcmVzdCAocG9pcykge1xuICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KF9wb2ludHNfb2ZfaW50ZXJlc3QsIHBvaXMpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZW1vdmVQb2ludE9mSW50ZXJlc3RGcm9tVHJhY2tlcihwb2lUb1JlbW92ZSkge1xuICAgIF9wb2ludHNfb2ZfaW50ZXJlc3QgPSBfcG9pbnRzX29mX2ludGVyZXN0LmZpbHRlcihwb2kgPT4ge1xuICAgICAgICByZXR1cm4gIShwb2kgPT09IHBvaVRvUmVtb3ZlKVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gU2V0dXBQb2ludE9mSW50ZXJlc3RVSSAobWFwLCBwb2kpIHtcbiAgICB2YXIgZGl2ID0gY3JlYXRlR3JhcGhEaXYocG9pKTtcbiAgICB2YXIgbWFya2VyID0gY3JlYXRlTWFya2VyKG1hcCwgcG9pLmxhdCwgcG9pLmxuZyk7XG4gICAgcG9pLmdyYXBoRGl2ID0gZGl2XG4gICAgcG9pLm1hcmtlciA9IG1hcmtlclxuICAgIG1hcmtlci5hZGRUbyhtYXApXG4gICAgY3JlYXRlR3JhcGhSZW1vdmVyKG1hcCwgZGl2LCBtYXJrZXIsIHBvaSk7XG5cbiAgICBkMy5zZWxlY3QoZGl2KS5vbihcIm1vdXNlZW50ZXJcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgbWFya2VyLnNldEljb24oZ2V0SWNvbignaG92ZXInKSk7XG4gICAgfSlcbiAgICBkMy5zZWxlY3QoZGl2KS5vbihcIm1vdXNlbGVhdmVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBtYXJrZXIuc2V0SWNvbihnZXRJY29uKCdncmFwaCcpKTtcbiAgICB9KVxuICAgIG1hcmtlci5vbignY2xpY2sgZGJsY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBoYW5kbGVNYXJrZXJNb3VzZUV2ZW50KGUsIHBvaSlcbiAgICB9KVxuICAgIG1hcmtlci5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgbWFya2VyLnNldEljb24oZ2V0SWNvbignaG92ZXInKSlcbiAgICB9KVxuICAgIG1hcmtlci5vbignbW91c2VvdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBtYXJrZXIuc2V0SWNvbihnZXRJY29uKCdncmFwaCcpKVxuICAgICAgICBwb2kuZ3JhcGhEaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncGFuLXRvLW1hcmtlci1idG4nKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlJylcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBoYW5kbGVNYXJrZXJNb3VzZUV2ZW50IChlLCBwb2kpIHtcbiAgICBlLm9yaWdpbmFsRXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBIYW5kbGVUYWJDaGFuZ2UoJ2dyYXBocy1hY3RpdmUnKVxuICAgIHNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGgocG9pKVxuICAgIHRyaWdnZXJHcmFwaEFuaW1hdGlvbihwb2kpXG59XG5cbmZ1bmN0aW9uIHRyaWdnZXJHcmFwaEFuaW1hdGlvbiAocG9pKSB7XG4gICAgcG9pLmdyYXBoRGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Bhbi10by1tYXJrZXItYnRuJylbMF0uY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZScpXG59XG5cbmZ1bmN0aW9uIHNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGggKHBvaSkge1xuICAgIHZhciByaWdodFBhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsJylcbiAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsLWhlYWRlcicpXG4gICAgdmFyIGdyYXBoVHlwZUhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaC10eXBlLWhlYWRlcicpXG4gICAgcmlnaHRQYW5lbC5zY3JvbGxUb3AgPSBwb2kuZ3JhcGhEaXYub2Zmc2V0VG9wXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZW1vdmVQb2ludE9mSW50ZXJlc3RVSSAobWFwLCBkaXYsIG1hcmtlcikge1xuICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyYXBoLWxpc3QnKTtcbiAgICBsaXN0LnJlbW92ZUNoaWxkKGRpdik7XG4gICAgbWFwLnJlbW92ZUxheWVyKG1hcmtlcik7XG4gICAgdXBkYXRlU2hhcmVVcmwoKVxufVxuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9wb2kuanMiLCJpbXBvcnQge1xuICAgIEFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlcixcbiAgICBSZW1vdmVQb2ludE9mSW50ZXJlc3RGcm9tVHJhY2tlcixcbiAgICBTZXR1cFBvaW50T2ZJbnRlcmVzdFVJLFxuICAgIFJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJLFxuICAgIEdldEFsbFBvaW50c09mSW50ZXJlc3Rcbn0gZnJvbSAnLi9wb2knXG5pbXBvcnQge3VwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHR9IGZyb20gJy4vcGFuZWwnXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tICcuL3NoYXJlJ1xuaW1wb3J0IHtHZXRNYXB9IGZyb20gJy4vbWFwJ1xuaW1wb3J0IHtHZXRBamF4T2JqZWN0fSBmcm9tICcuL3BhcnNlcidcblxudmFyIHRpcCA9IHt9O1xuXG5mdW5jdGlvbiBnZXRHcmFwaFRpcCgpIHtcbiAgICByZXR1cm4gdGlwXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTZXR1cEdyYXBocyAoKSB7XG4gICAgZDMuc2VsZWN0QWxsKFwiLmdyYXBoLXR5cGUtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2spO1xuICAgIGV4dGVuZERhdGVNb2R1bGUoKTtcbiAgICB0aXAgPSBkMy50aXAoKS5hdHRyKCdjbGFzcycsICdkMy10aXAnKS5odG1sKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkOyB9KTtcbn1cblxuZnVuY3Rpb24gZXh0ZW5kRGF0ZU1vZHVsZSAoKSB7XG4gICAgRGF0ZS5wcm90b3R5cGUuaXNMZWFwWWVhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgeWVhciA9IHRoaXMuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgaWYoKHllYXIgJiAzKSAhPSAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiAoKHllYXIgJSAxMDApICE9IDAgfHwgKHllYXIgJSA0MDApID09IDApO1xuICAgIH07XG5cbiAgICAvLyBHZXQgRGF5IG9mIFllYXJcbiAgICBEYXRlLnByb3RvdHlwZS5nZXRET1kgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRheUNvdW50ID0gWzAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0XTtcbiAgICAgICAgdmFyIG1uID0gdGhpcy5nZXRNb250aCgpO1xuICAgICAgICB2YXIgZG4gPSB0aGlzLmdldERhdGUoKTtcbiAgICAgICAgdmFyIGRheU9mWWVhciA9IGRheUNvdW50W21uXSArIGRuO1xuICAgICAgICBpZihtbiA+IDEgJiYgdGhpcy5pc0xlYXBZZWFyKCkpIGRheU9mWWVhcisrO1xuICAgICAgICByZXR1cm4gZGF5T2ZZZWFyO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBCaW5kR3JhcGhFdmVudHMgKG1hcCkge1xuICAgIG1hcC5vbihcImNsaWNrXCIsIGhhbmRsZU1hcENsaWNrKTtcbn1cblxudmFyIGJhc2VJY29uID0gTC5JY29uLmV4dGVuZCh7fSk7XG5cbnZhciBncmFwaEljb24gPSBuZXcgYmFzZUljb24oe1xuICAgIGljb25Vcmw6ICdpbWdzL2JsdWVfaWNvbi5wbmcnLFxuICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxuICAgIGljb25TaXplOiBbMjUsIDQxXSxcbiAgICBpY29uQW5jaG9yOiBbMTIsIDQxXSxcbiAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXG4gICAgc2hhZG93U2l6ZTogWzQxLCA0MV1cbn0pO1xuXG52YXIgaG92ZXJJY29uID0gbmV3IGJhc2VJY29uKHtcbiAgICBpY29uVXJsOiAnaW1ncy9vcmFuZ2VfaWNvbi5wbmcnLFxuICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxuICAgIGljb25TaXplOiBbMjUsIDQxXSxcbiAgICBpY29uQW5jaG9yOiBbMTIsIDQxXSxcbiAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXG4gICAgc2hhZG93U2l6ZTogWzQxLCA0MV1cbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SWNvbih0eXBlKSB7XG4gICAgcmV0dXJuIHR5cGUgPT09ICdob3ZlcicgPyBob3Zlckljb24gOiBncmFwaEljb25cbn1cblxuZnVuY3Rpb24gaGFuZGxlTWFwQ2xpY2sgKGUpIHtcbiAgICB2YXIgbWFwID0gdGhpcztcbiAgICB2YXIgbGF0ID0gZS5sYXRsbmcubGF0O1xuICAgIHZhciBsbmcgPSBlLmxhdGxuZy5sbmc7XG5cbiAgICB2YXIgcG9pID0gQWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyKGxhdCwgbG5nKVxuICAgIFNldHVwUG9pbnRPZkludGVyZXN0VUkobWFwLCBwb2ksIGhvdmVySWNvbiwgZ3JhcGhJY29uKVxuICAgIHVwZGF0ZVNoYXJlVXJsKClcblxuICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGNsaWNrIG9uIG1hcFxuICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG4gICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcbiAgICAgIGV2ZW50TGFiZWw6ICdhZGQgcG9pbnQnLFxuICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgfSk7XG4gICAgXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNYXJrZXIgKG1hcCwgbGF0LCBsbmcpIHtcbiAgICByZXR1cm4gTC5tYXJrZXIoW2xhdCwgbG5nXSwge2ljb246IGdyYXBoSWNvbn0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlR3JhcGhSZW1vdmVyIChtYXAsIGRpdiwgbWFya2VyLCBwb2kpIHtcbiAgICB2YXIgZWxlbSA9IGNyZWF0ZUdyYXBoUmVtb3ZlckVsZW0oKTtcbiAgICBkaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyYXBoLWVsZW0taGVhZGVyXCIpWzBdLmFwcGVuZENoaWxkKGVsZW0pO1xuICAgIGQzLnNlbGVjdChlbGVtKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgUmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXIocG9pKVxuICAgICAgICBSZW1vdmVQb2ludE9mSW50ZXJlc3RVSShtYXAsIGRpdiwgbWFya2VyKVxuICAgICAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KClcbiAgICAgICAgdXBkYXRlU2hhcmVVcmwoKVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVHcmFwaFJlbW92ZXJFbGVtICgpIHtcbiAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgZWxlbS5jbGFzc05hbWUgPSBcInJlbW92ZS1ncmFwaFwiO1xuICAgIGVsZW0uaW5uZXJUZXh0ID0gU3RyaW5nLmZyb21DaGFyQ29kZShcIjEwMDA1XCIpO1xuICAgIGVsZW0uc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgXCJSZW1vdmUgZ3JhcGhcIik7XG4gICAgcmV0dXJuIGVsZW07XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggREFUQSBQUk9DRVNTSU5HIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gc2VuZFJlcXVlc3QocmVxdWVzdCwgdXJsKSB7XG4gICAgcmVxdWVzdC5vcGVuKCdHRVQnLCB1cmwpXG4gICAgcmVxdWVzdC5zZW5kKClcbn1cblxuZnVuY3Rpb24gaGFuZGxlR3JhcGhEYXRhUmVzcG9uc2UgKGRpdiwgbGF0LCBsbmcsIHJlc3BvbnNlKSB7XG4gICAgcmVzcG9uc2UgPSByZXNwb25zZS5yZXBsYWNlKC9cXFt8XFxdfFxcJy9nLCBcIlwiKS5zcGxpdChcIiwgXCIpO1xuICAgIGRyYXdHcmFwaChyZXNwb25zZSwgZGl2LCBsYXQsIGxuZyk7XG4gICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpXG59XG5cbmZ1bmN0aW9uIGdldERhdGEobGF0LCBsbmcsIGRpdikge1xuICAgIHZhciB1cmwgPSBcImh0dHBzOi8vZmNhdi1uZHZpLm5lbWFjLm9yZy9sYW5kZGF0X3Byb2R1Y3QuY2dpP2FyZ3M9XCIgKyBsbmcgKyBcIixcIiArIGxhdDtcbiAgICB2YXIgb1JlcSA9IEdldEFqYXhPYmplY3QoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIGhhbmRsZUdyYXBoRGF0YVJlc3BvbnNlKGRpdiwgbGF0LCBsbmcsIHJlc3BvbnNlKVxuICAgIH0pXG5cbiAgICBvUmVxLm9wZW4oXCJHRVRcIiwgdXJsKTtcbiAgICBvUmVxLnNlbmQoKVxufVxuXG5mdW5jdGlvbiBzcGxpdERhdGEoZGF0YSkge1xuICAgIHZhciBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGRhdGFbaV0gPSBkYXRhW2ldLnNwbGl0KFwiLFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIHJlcHJvY2Vzc0RhdGEgKG9yaWdkYXRhKSB7XG4gICAgdmFyIGV4cGVjdGVkWWVhckxlbmd0aCA9IDQ2O1xuICAgIHZhciBkYXRhID0ge307XG4gICAgdmFyIHBvaW50O1xuICAgIHZhciBrZXk7XG4gICAgdmFyIGksIGo7XG5cbiAgICBkYXRhW1wia2V5c1wiXSA9IFtdO1xuICAgIGZvciAoaSA9IDA7IGkgPCBvcmlnZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICBwb2ludCA9IG9yaWdkYXRhW2ldO1xuICAgICAgICBrZXkgPSBwb2ludFswXS5zdWJzdHJpbmcoMCw0KTtcbiAgICAgICAgaWYgKCFkYXRhLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIGRhdGFba2V5XSA9IFtdO1xuICAgICAgICAgICAgZGF0YVtcImtleXNcIl0ucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGRhdGFba2V5XS5wdXNoKHBvaW50KTtcbiAgICB9XG5cbiAgICB2YXIga2V5c1RvQmVEZWxldGVkID0gW107XG4gICAgZm9yIChpID0gMDsgaSA8IGRhdGEua2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBrZXkgPSBkYXRhLmtleXNbaV07XG4gICAgICAgIGlmIChkYXRhW2tleV0ubGVuZ3RoICE9PSBleHBlY3RlZFllYXJMZW5ndGgpIHtcbiAgICAgICAgICAgIGtleXNUb0JlRGVsZXRlZC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwga2V5c1RvQmVEZWxldGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGtleSA9IGtleXNUb0JlRGVsZXRlZFtpXTtcbiAgICAgICAgZGVsZXRlIGRhdGFba2V5XTtcbiAgICAgICAgZGF0YS5rZXlzLnNwbGljZShkYXRhLmtleXMuaW5kZXhPZihrZXkpLCAxKTtcbiAgICB9XG5cbiAgICB2YXIgZGF0YUZvck1lZGlhbnM7XG4gICAgdmFyIG1lZGlhbjtcbiAgICBkYXRhW1wibWVkaWFuc1wiXSA9IFtdO1xuICAgIGZvciAoaSA9IDA7IGkgPCBleHBlY3RlZFllYXJMZW5ndGg7IGkrKykge1xuICAgICAgICBkYXRhRm9yTWVkaWFucyA9IFtdO1xuICAgICAgICBmb3IgKGogPSBpOyBqIDwgb3JpZ2RhdGEubGVuZ3RoOyBqICs9IGV4cGVjdGVkWWVhckxlbmd0aCkge1xuICAgICAgICAgICAgZGF0YUZvck1lZGlhbnMucHVzaChvcmlnZGF0YVtqXVsxXSk7XG4gICAgICAgIH1cblxuICAgICAgICBtZWRpYW4gPSBkYXRhRm9yTWVkaWFucy5zb3J0KClbTWF0aC5mbG9vcihkYXRhRm9yTWVkaWFucy5sZW5ndGgvMildO1xuICAgICAgICBkYXRhW1wibWVkaWFuc1wiXS5wdXNoKG1lZGlhbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGE7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSU5URVJGQUNFIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBoYW5kbGVHcmFwaFR5cGVCdG5DbGljayAoKSB7XG4gICAgdmFyIHR5cGUgPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJyk7XG4gICAgdmFyIGFjdGl2ZVR5cGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZ3JhcGgtdHlwZS1idG4gYWN0aXZlXCIpWzBdLmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJyk7XG5cbiAgICBpZiAodHlwZSA9PT0gYWN0aXZlVHlwZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgSGFuZGxlR3JhcGhUYWJDaGFuZ2UodHlwZSwgYWN0aXZlVHlwZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBIYW5kbGVHcmFwaFRhYkNoYW5nZSAoZ3JhcGhUeXBlKSB7XG4gICAgaWYgKCFpc0dyYXBoTGlzdEVtcHR5KCkpIHtcbiAgICAgICAgdmFyIG9sZEFjdGl2ZUdyYXBoRWxlbUhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLWVsZW0nKVswXS5zY3JvbGxIZWlnaHRcbiAgICAgICAgdmFyIG9sZEFjdGl2ZUdyYXBoSW5mb0hlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLXR5cGUtaW5mbyBhY3RpdmUnKVswXS5zY3JvbGxIZWlnaHRcbiAgICAgICAgdmFyIHJpZ2h0UGFuZWxTY3JvbGxUb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKS5zY3JvbGxUb3BcbiAgICB9XG4gICAgZGlzYWJsZUFjdGl2ZUdyYXBoVGFiKCk7XG4gICAgZW5hYmxlR3JhcGhUYWIoZ3JhcGhUeXBlKTtcbiAgICBpZiAoIWlzR3JhcGhMaXN0RW1wdHkoKSkgYWRqdXN0U2Nyb2xsUG9zaXRpb24ob2xkQWN0aXZlR3JhcGhJbmZvSGVpZ2h0LCBvbGRBY3RpdmVHcmFwaEVsZW1IZWlnaHQsIHJpZ2h0UGFuZWxTY3JvbGxUb3ApXG4gICAgdXBkYXRlU2hhcmVVcmwoKTtcbn1cblxuZnVuY3Rpb24gaXNHcmFwaExpc3RFbXB0eSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhcGgtZWxlbScpWzBdID09PSB1bmRlZmluZWRcbn1cblxuZnVuY3Rpb24gYWRqdXN0U2Nyb2xsUG9zaXRpb24ob2xkR3JhcGhJbmZvSGVpZ2h0LCBvbGRHcmFwaEVsZW1IZWlnaHQsIG9sZFJpZ2h0UGFuZWxTY3JvbGxUb3ApIHtcbiAgICB2YXIgbmV3R3JhcGhJbmZvSGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhcGgtdHlwZS1pbmZvIGFjdGl2ZScpWzBdLnNjcm9sbEhlaWdodFxuICAgIHZhciBuZXdHcmFwaEVsZW1IZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC1lbGVtJylbMF0uc2Nyb2xsSGVpZ2h0XG5cbiAgICB2YXIgbmV3R3JhcGhFbGVtSGVpZ2h0U2NhbGUgPSAobmV3R3JhcGhFbGVtSGVpZ2h0IC8gb2xkR3JhcGhFbGVtSGVpZ2h0KVxuICAgIHZhciBuZXdSaWdodFBhbmVsU2Nyb2xsVG9wID0gbmV3R3JhcGhJbmZvSGVpZ2h0ICsgKFxuICAgICAgICAob2xkUmlnaHRQYW5lbFNjcm9sbFRvcCAtIG9sZEdyYXBoSW5mb0hlaWdodCkgKiBuZXdHcmFwaEVsZW1IZWlnaHRTY2FsZVxuICAgIClcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpLnNjcm9sbFRvcCA9IG5ld1JpZ2h0UGFuZWxTY3JvbGxUb3Bcbn1cblxuZnVuY3Rpb24gZGlzYWJsZUFjdGl2ZUdyYXBoVGFiICgpIHtcbiAgICB2YXIgYWN0aXZlRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF07XG4gICAgdmFyIGFjdGl2ZUNsYXNzID0gXCJncmFwaC1cIiArIGFjdGl2ZUVsZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS10eXBlXCIpO1xuXG4gICAgYWN0aXZlRWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKS5jbGFzc0xpc3QucmVtb3ZlKGFjdGl2ZUNsYXNzKTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlR3JhcGhUYWIgKGdyYXBoVHlwZSkge1xuICAgIGQzLnNlbGVjdChcIi5ncmFwaC10eXBlLWJ0bltkYXRhLXR5cGU9J1wiICsgZ3JhcGhUeXBlICsgXCInXVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKS5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtXCIgKyBncmFwaFR5cGUpO1xuICAgIGQzLnNlbGVjdEFsbCgnLmdyYXBoLXR5cGUtaW5mbycpXG4gICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGdyYXBoVHlwZSA9PT0gdGhpcy5pZC5zcGxpdCgnLScpWzBdXG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdyYXBoRGl2IChwb2kpIHtcbiAgICB2YXIgZGVjaW1hbFBsYWNlcyA9IDNcbiAgICB2YXIgbGF0U2hvcnQgPSByb3VuZEZsb2F0KHBvaS5sYXQsIGRlY2ltYWxQbGFjZXMpXG4gICAgdmFyIGxuZ1Nob3J0ID0gcm91bmRGbG9hdChwb2kubG5nLCBkZWNpbWFsUGxhY2VzKVxuICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGhlYWRlcilcbiAgICB2YXIgem9vbVRvTWFya2VyQnV0dG9uID0gbWFrZVpvb21Ub01hcE1hcmtlckJ1dHRvbihwb2kpXG4gICAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkxhdDogXCIgKyBsYXRTaG9ydCArIFwiLCBMb246IFwiICsgbG5nU2hvcnQpO1xuICAgIHZhciBjb250ZW50RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb250ZW50RGl2LmNsYXNzTmFtZSA9IFwiZ3JhcGgtbGF0LWxvblwiO1xuICAgIGNvbnRlbnREaXYuYXBwZW5kQ2hpbGQoY29udGVudCk7XG5cbiAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoem9vbVRvTWFya2VyQnV0dG9uKVxuICAgIGhlYWRlci5hcHBlbmRDaGlsZChjb250ZW50RGl2KTtcblxuICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZChcImdyYXBoLWVsZW1cIilcbiAgICBoZWFkZXIuY2xhc3NMaXN0LmFkZChcImdyYXBoLWVsZW0taGVhZGVyXCIpXG5cbiAgICBnZXREYXRhKHBvaS5sYXQsIHBvaS5sbmcsIHdyYXBwZXIpO1xuICAgIHJldHVybiB3cmFwcGVyO1xufVxuXG5mdW5jdGlvbiBtYWtlWm9vbVRvTWFwTWFya2VyQnV0dG9uKHBvaSkge1xuICAgIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bicpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3Bhbi10by1tYXJrZXItYnRuJylcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSBcIlNob3cgT24gTWFwXCJcbiAgICBidXR0b24ub25jbGljayA9IGZ1bmN0aW9uIChwb2ksIGUpIHtcbiAgICAgICAgdmFyIG1hcCA9IEdldE1hcCgpXG4gICAgICAgIG1hcC5wYW5UbyhbcG9pLmxhdCwgcG9pLmxuZ10pXG4gICAgfS5iaW5kKGJ1dHRvbiwgcG9pKVxuICAgIHJldHVybiBidXR0b25cbn1cblxuZnVuY3Rpb24gZHJhd0dyYXBoKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcbiAgICBkYXRhID0gc3BsaXREYXRhKGRhdGEpO1xuICAgIHZhciByZXByb2Nlc3NlZERhdGEgPSByZXByb2Nlc3NEYXRhKGRhdGEpO1xuICAgIG1ha2VVcERvd25MaW5lR3JhcGgoZGF0YSwgZGl2LCByZXByb2Nlc3NlZERhdGFbXCJtZWRpYW5zXCJdKTtcbiAgICBtYWtlVXBEb3duT3ZlcmxhcGluZ0xpbmVHcmFwaFdpdGhDaGVja2JveGVzKHJlcHJvY2Vzc2VkRGF0YSwgZGl2LCBsYXQsIGxuZyk7XG4gICAgZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzKHJlcHJvY2Vzc2VkRGF0YSwgZGl2LCBsYXQsIGxuZyk7XG4gICAgdmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXBoLWxpc3RcIik7XG4gICAgbGlzdC5hcHBlbmRDaGlsZChkaXYpO1xufVxuXG5mdW5jdGlvbiByb3VuZEZsb2F0KG51bWJlciwgZGVjaW1hbFBsYWNlcykge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG51bWJlciAqIE1hdGgucG93KDEwLCBkZWNpbWFsUGxhY2VzKSkgLyAoTWF0aC5wb3coMTAsIGRlY2ltYWxQbGFjZXMpKVxufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8gVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIG1ha2VVcERvd25MaW5lR3JhcGggKGRhdGEsIGRpdiwgYXZlcmFnZXMpIHtcbiAgICAvLyBTZXQgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIGNhbnZhcyAvIGdyYXBoXG4gICAgdmFyIG1hcmdpbiA9IHt0b3A6IDMwLCByaWdodDogMjAsIGJvdHRvbTogMzAsIGxlZnQ6IDI5fSxcbiAgICB3aWR0aCA9IDU4MCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxuICAgIGhlaWdodCA9IDI3MCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXG4gICAgLy8gU2V0IHRoZSByYW5nZXNcbiAgICB2YXIgeCA9IGQzLnNjYWxlVGltZSgpLnJhbmdlKFswLCB3aWR0aF0pXG4gICAgICAgIC5kb21haW4oW1xuICAgICAgICAgICAgcGFyc2VEYXRlKGRhdGFbMF1bMF0pLFxuICAgICAgICAgICAgcGFyc2VEYXRlKGRhdGFbZGF0YS5sZW5ndGgtMV1bMF0pXG4gICAgICAgIF0pO1xuICAgIHZhciB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSlcbiAgICAgICAgLmRvbWFpbihbMCwgMTAwXSk7XG5cbiAgICAvLyBEZWZpbmUgdGhlIGF4ZXNcbiAgICB2YXIgeEF4aXMgPSBkMy5heGlzQm90dG9tKHgpXG4gICAgICAgIC50aWNrcygxNilcbiAgICAgICAgLnRpY2tGb3JtYXQoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBkLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIH0pO1xuXG4gICAgdmFyIHlBeGlzID0gZDMuYXhpc0xlZnQoeSlcbiAgICAgICAgLnRpY2tzKDYpO1xuXG4gICAgLy8gRGVmaW5lIHRoZSBsaW5lXG4gICAgdmFyIHZhbHVlbGluZSA9IGQzLmxpbmUoKVxuICAgICAgICAueChmdW5jdGlvbihkKSB7IHJldHVybiB4KHBhcnNlRGF0ZShkWzBdKSk7IH0pXG4gICAgICAgIC55KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHkoZFsxXSk7IH0pO1xuXG4gICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KVxuICAgICAgICAuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgIC5jbGFzc2VkKFwidGltZXNlcmllcy1ncmFwaFwiLCB0cnVlKTtcblxuICAgIC8vIEFkZHMgdGhlIHN2ZyBjYW52YXNcbiAgICB2YXIgc3ZnID0gd3JhcHBlci5hcHBlbmQoXCJzdmdcIilcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXG4gICAgICAgIC5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHcgPSB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0XG4gICAgICAgICAgICB2YXIgaCA9IGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tXG4gICAgICAgICAgICByZXR1cm4gJzAgMCAnICsgdyArICcgJyArIGhcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKVxuICAgICAgICAuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtYXJnaW4ubGVmdCArIFwiLFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKTtcblxuICAgIHN2Zy5jYWxsKHRpcCk7XG5cbiAgICAvLyBBZGQgdGhlIHZhbHVlbGluZSBwYXRoLlxuICAgIGRyYXdMaW5lYXJQYXRoKGRhdGEsIHZhbHVlbGluZSwgc3ZnKTtcblxuICAgIC8vIEFkZCB0aGUgWCBBeGlzXG4gICAgc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInggYXhpc1wiKVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpXG4gICAgICAgIC5jYWxsKHhBeGlzKTtcblxuICAgIC8vIEFkZCB0aGUgWSBBeGlzXG4gICAgc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInkgYXhpc1wiKVxuICAgICAgICAuY2FsbCh5QXhpcyk7XG4gICAgLyoqXG4gICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBwb2ludCBhdCBlYWNoIGRhdGEgcG9pbnRcbiAgICAgKi9cbiAgICBkcmF3TGluZWFyUG9pbnRzKGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vIE9WRVJMQVBQSU5HIFRJTUVTRVJJRVMgTElORSBHUkFQSCAvLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMgKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcbiAgICB2YXIgeWVhciA9IFwiMjAxNVwiO1xuXG4gICAgdmFyIGNoYXJ0cyA9IHt9O1xuXG4gICAgLy8gU2V0IHRoZSBkaW1lbnNpb25zIG9mIHRoZSBjYW52YXMgLyBncmFwaFxuICAgIHZhciBtYXJnaW4gPSB7dG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyOX0sXG4gICAgICAgIHdpZHRoID0gNTAwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsXG4gICAgICAgIGhlaWdodCA9IDI3MCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXG4gICAgdmFyIGF2ZXJhZ2VzID0gZGF0YS5tZWRpYW5zO1xuXG4gICAgdmFyIHggPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFswLCB3aWR0aF0pXG4gICAgICAgIC5kb21haW4oWzAsIDM2NV0pO1xuICAgIHZhciB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSlcbiAgICAgICAgLmRvbWFpbihbMCwgMTAwXSk7XG5cbiAgICAvLyBEZWZpbmUgdGhlIGF4ZXNcbiAgICBmdW5jdGlvbiBmb3JtYXRNb250aFRpY2sgKGQpIHtcbiAgICAgICAgcmV0dXJuIChNT05USF9MQUJFTFNbKGQtMTUpLzMwXSk7XG4gICAgfVxuICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcbiAgICAgICAgLnRpY2tzKDExKVxuICAgICAgICAudGlja1ZhbHVlcyhbMTUsIDQ1LCA3NSwgMTA1LCAxMzUsIDE2NSwgMTk1LCAyMjUsIDI1NSwgMjg1LCAzMTUsIDM0NV0pXG4gICAgICAgIC50aWNrRm9ybWF0KGZvcm1hdE1vbnRoVGljayk7XG5cbiAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KVxuICAgICAgICAudGlja3MoNik7XG5cbiAgICAvLyBEZWZpbmUgdGhlIGxpbmVcbiAgICB2YXIgdmFsdWVsaW5lID0gZDMubGluZSgpXG4gICAgICAgIC54KGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIChBcnJheS5pc0FycmF5KGQpID8geChwYXJzZUp1bGlhbkRheShkWzBdKSkgOiB4KChpICogOCkgKyAzICkpOyB9KVxuICAgICAgICAueShmdW5jdGlvbihkKSB7IHJldHVybiAoQXJyYXkuaXNBcnJheShkKSA/IHkoZFsxXSkgOiB5KGQpKTsgfSk7XG5cbiAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwib3ZlcmxhcHBpbmctZ3JhcGhcIiwgdHJ1ZSk7XG5cbiAgICAvLyBBZGRzIHRoZSBzdmcgY2FudmFzXG4gICAgdmFyIHN2ZyA9IHdyYXBwZXJcbiAgICAgICAgLmFwcGVuZChcInN2Z1wiKVxuICAgICAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHcgPSB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0XG4gICAgICAgICAgICAgICAgdmFyIGggPSBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbVxuICAgICAgICAgICAgICAgIHJldHVybiAnMCAwICcgKyB3ICsgJyAnICsgaFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJylcbiAgICAgICAgICAgIC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuICAgICAgICAgICAgLy8uYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcbiAgICAgICAgLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsXG4gICAgICAgICAgICAgICAgICBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xuXG4gICAgc3ZnLmNhbGwodGlwKTtcblxuICAgIC8vIEFkZCB0aGUgWCBBeGlzXG4gICAgc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInggYXhpc1wiKVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpXG4gICAgICAgIC5jYWxsKHhBeGlzKTtcblxuICAgIC8vIEFkZCB0aGUgWSBBeGlzXG4gICAgc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInkgYXhpc1wiKVxuICAgICAgICAuY2FsbCh5QXhpcyk7XG5cbiAgICBjaGFydHNbXCJtZWRpYW5zXCJdID0ge1xuICAgICAgICBcInBhdGhcIiA6IGRyYXdMaW5lYXJQYXRoKGRhdGFbXCJtZWRpYW5zXCJdLCB2YWx1ZWxpbmUsIHN2ZylcbiAgICB9O1xuXG4gICAgY2hhcnRzW3llYXJdID0ge1xuICAgICAgICBcInBhdGhcIiA6IGRyYXdMaW5lYXJQYXRoKGRhdGFbeWVhcl0sIHZhbHVlbGluZSwgc3ZnKVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxuICAgICAqL1xuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl1bXCJwb2ludHNcIl0gPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbXCJtZWRpYW5zXCJdLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuICAgIGNoYXJ0c1t5ZWFyXVtcInBvaW50c1wiXSA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVt5ZWFyXSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblxuICAgIHZhciBpbnB1dHdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwiaW5wdXQtd3JhcHBlclwiLCB0cnVlKTtcblxuICAgIGRhdGEua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgY3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBrZXksIFwidGltZXNlcmllc1wiLCB5ZWFyLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpO1xuICAgIH0pO1xuXG4gICAgY3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBcIm1lZGlhbnNcIiwgXCJ0aW1lc2VyaWVzXCIsIFwibWVkaWFuc1wiLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFBPTEFSIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIGRyYXdVcERvd25Qb2xhcldpdGhDaGVja2JveGVzQW5kVGhyZXNob2xkcyAoZGF0YSwgZGl2LCBsYXQsIGxuZykge1xuICAgIHZhciB5ZWFyID0gXCIyMDE1XCI7XG4gICAgdmFyIHdpZHRoID0gNDkwLFxuICAgICAgICBoZWlnaHQgPSA0OTAsXG4gICAgICAgIHJhZGl1cyA9IE1hdGgubWluKHdpZHRoLCBoZWlnaHQpIC8gMiAtIDMwO1xuXG4gICAgdmFyIGF2ZXJhZ2VzID0gZGF0YVtcIm1lZGlhbnNcIl07XG4gICAgdmFyIGNlbnRlciA9IGZpbmRQb2xhckNlbnRlcihkYXRhKTtcbiAgICB2YXIgdGhyZXNob2xkcyA9IGZpbmRQb2xhclRocmVzaG9sZHMoYXZlcmFnZXMsIGNlbnRlclsxXVswXSk7XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHVwIHNjYWxpbmcgb2YgZGF0YS4gV2Uga25vdyB0aGF0IHRoZSBuZHZpIHZhbHVlcyBmYWxsIGJldHdlZW5cbiAgICAgKiAwICYgMTAwIHNvIHdlIHNldCBvdXIgZG9tYWluIHRvIHRoYXQuIFRoZSByYW5nZSBjb250cm9scyB3aGVyZSB0aGVcbiAgICAgKiBwb2ludHMgd2lsbCBsaWUgaW4gb3VyIGdyYXBoLCBzbyB3ZSBzZXQgdGhlbSB0byBiZSBiZXR3ZWVuIDAgYW5kIHRoZVxuICAgICAqIHJhZGl1cy5cbiAgICAgKi9cbiAgICB2YXIgciA9IGQzLnNjYWxlTGluZWFyKClcbiAgICAgICAgLmRvbWFpbihbMCwgMTAwXSlcbiAgICAgICAgLnJhbmdlKFswLCByYWRpdXNdKTtcblxuICAgIC8qKlxuICAgICAqIGZ1bmN0aW9uIHdoaWNoIHdpbGwgZHJhdyBlYWNoIHBvaW50LiBUbyBjb21wdXRlIHRoZSBkaXN0YW5jZSBmcm9tIHRoZVxuICAgICAqIGNlbnRlciBlYWNoIHBvaW50IGlzIHdlIHBhc3MgdGhlIGRhdGFwb2ludCB0byB0aGUgZnVuY3Rpb24gZGVmaW5lZCBhYm92ZS5cbiAgICAgKiBUbyBkZXRlcm1pbmUgdGhlIGFuZ2xlIGZyb20gdGhlIG9yaWdpbiB3ZSBuZWVkIHRvIGNvbnZlcnQgdGhlIGRheSB0b1xuICAgICAqIHJhZGlhbnMsIHNvIHdlIGNvbnZlcnQgdGhlIGRheSB0byBhIG51bWJlciBiZXR3ZWVuIDAgJiAxIGFuZCB0aGVuIG11bHRpcGx5XG4gICAgICogaXQgYnkgMiBwaS5cbiAgICAgKi9cbiAgICB2YXIgbGluZSA9IGQzLnJhZGlhbExpbmUoKVxuICAgICAgICAucmFkaXVzKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyByKGRbMV0pIDogcihkKTsgfSlcbiAgICAgICAgLmFuZ2xlKGZ1bmN0aW9uKGQsIGkpIHtcbiAgICAgICAgICAgIHZhciBkYXkgPSBBcnJheS5pc0FycmF5KGQpID8gcGFyc2VKdWxpYW5EYXkoZFswXSkgOiAoaSAqIDgpICsgMztcbiAgICAgICAgICAgIHJldHVybiAoKCgoZGF5IC0gMSklMzY1KS8zNjUpICogKDIqTWF0aC5QSSkpO1xuICAgICAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgdGhlIGNhbnZhcyB3aGVyZSB0aGUgY2lyY2xlIHdpbGwgYmUgZHJhd24uXG4gICAgICovXG4gICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcInBvbGFyLWdyYXBoXCIsIHRydWUpO1xuICAgIHZhciBzdmcgPSB3cmFwcGVyLmFwcGVuZChcInN2Z1wiKVxuICAgICAgICAvLy5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG4gICAgICAgIC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICAuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnMCAwICcrIHdpZHRoICsgJyAnICsgaGVpZ2h0XG4gICAgICAgIH0pXG4gICAgICAgIC5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJylcbiAgICAgICAgLmFwcGVuZChcImdcIilcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB3aWR0aCAvIDIgKyBcIixcIiArIGhlaWdodCAvIDIgKyBcIilcIik7XG5cbiAgICBzdmcuY2FsbCh0aXApO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBiaWcgY2lyY2xlcyBvZiB0aGUgZ3JhcGggJiB0aGVpciBsYWJlbHNcbiAgICAgKi9cbiAgICB2YXIgZ3IgPSBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiciBheGlzXCIpXG4gICAgICAgIC5zZWxlY3RBbGwoXCJnXCIpXG4gICAgICAgIC5kYXRhKHIudGlja3MoNSkuc2xpY2UoMSkpXG4gICAgICAgIC5lbnRlcigpLmFwcGVuZChcImdcIik7XG5cbiAgICBnci5hcHBlbmQoXCJjaXJjbGVcIilcbiAgICAgICAgLmF0dHIoXCJyXCIsIHIpO1xuXG4gICAgZ3IuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gLXIoZCkgLSA0OyB9KVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInJvdGF0ZSgxNSlcIilcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZDsgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGxhYmVscyBmb3IgZWFjaCBtb250aCBhbmQgdGhlIGxpbmVzXG4gICAgICogdGhhdCBnbyBvdXQgdG8gdGhlbS5cbiAgICAgKi9cbiAgICB2YXIgZ2EgPSBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYSBheGlzXCIpXG4gICAgICAgIC5zZWxlY3RBbGwoXCJnXCIpXG4gICAgICAgIC5kYXRhKGQzLnJhbmdlKDAsIDM2MCwgMzApKVxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInJvdGF0ZShcIiArIChkIC0gOTApICsgXCIpXCI7IH0pO1xuXG4gICAgZ2EuYXBwZW5kKFwibGluZVwiKVxuICAgICAgICAuYXR0cihcIngyXCIsIHJhZGl1cyk7XG5cbiAgICBnYS5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgIC5hdHRyKFwieFwiLCByYWRpdXMgKyA2KVxuICAgICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJlbmRcIiA6IG51bGw7IH0pXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQgPCAzNjAgJiYgZCA+IDE4MCA/IFwicm90YXRlKDE4MCBcIiArIChyYWRpdXMgKyA2KSArIFwiLDApXCIgOiBudWxsOyB9KVxuICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBNT05USF9MQUJFTFNbZC8zMF07IH0pO1xuXG4gICAgLyoqXG4gICAgICogRHJhd3MgdGhlIHRocmVzaG9sZCBsaW5lc1xuICAgICAqL1xuICAgIHZhciB0aHJlc2hvbGRFbGVtID0gc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgLnNlbGVjdEFsbChcImdcIilcbiAgICAgICAgLmRhdGEodGhyZXNob2xkcylcbiAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJyb3RhdGUoXCIgKyAoZC5kYXRhWzFdWzBdIC0gOTApICsgXCIpXCI7IH0pO1xuXG4gICAgdGhyZXNob2xkRWxlbS5hcHBlbmQoXCJsaW5lXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpXG4gICAgICAgIC5hdHRyKFwieDJcIiwgcmFkaXVzKTtcblxuICAgIHRocmVzaG9sZEVsZW0uYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24gKGQpIHsgdmFyIGRheSA9IGQuZGF0YVsxXVswXTsgcmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyByYWRpdXMgKyAzMCA6IHJhZGl1cyAtIDMwfSlcbiAgICAgICAgLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiAoKCgoZC5kYXRhWzFdWzBdKSUzNjUpLzM2NSkgKiAoMipNYXRoLlBJKSkgKyA2OyB9KVxuICAgICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdOyByZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IFwibWlkZGxlXCIgOiBudWxsOyB9KVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHZhciBkYXkgPSBkLmRhdGFbMV1bMF07IHJldHVybiBkYXkgPCAzNjAgJiYgZGF5ID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7IH0pXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQubGFiZWw7IH0pO1xuXG4gICAgLyoqXG4gICAgICogRHJhd3MgdGhlIGxpbmUgdG8gdGhlIGNlbnRlciBvZiB0aGUgZGF0YVxuICAgICAqL1xuICAgIHZhciBjZW50ZXJEYXkgPSBjZW50ZXJbMV1bMF07XG4gICAgdmFyIGNlbnRlckRheU9wcG9zaXRlID0gKGNlbnRlckRheSArICgzNjUvMikpICUgMzY1O1xuICAgIHZhciBjZW50ZXJEYXlEYXRhID0gW2NlbnRlckRheSwgMTAwXTtcbiAgICB2YXIgY2VudGVyRGF5T3Bwb3NpdGVEYXRhID0gW2NlbnRlckRheU9wcG9zaXRlLCAxMDBdO1xuICAgIHZhciBncm93aW5nU2Vhc29uRGF0YSA9IFtjZW50ZXJEYXlEYXRhLCBjZW50ZXJEYXlPcHBvc2l0ZURhdGFdXG5cbiAgICBkcmF3UG9sYXJQYXRoKGdyb3dpbmdTZWFzb25EYXRhLCBsaW5lLCBzdmcpXG4gICAgICAgIC5jbGFzc2VkKFwiZ3Jvd2luZy1zZWFzb24tbGluZVwiLCBcInRydWVcIik7XG5cbiAgICBkcmF3UG9sYXJQYXRoKGNlbnRlciwgbGluZSwgc3ZnKVxuICAgICAgICAuY2xhc3NlZChcImNlbnRlci1saW5lXCIsIFwidHJ1ZVwiKTtcblxuICAgIHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKVxuICAgICAgICAuZGF0YShbY2VudGVyWzFdXSlcbiAgICAgICAgLmVudGVyKClcbiAgICAgICAgLmFwcGVuZChcImNpcmNsZVwiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwicG9pbnRcIilcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgdmFyIGNvb3JzID0gbGluZShbZF0pLnNsaWNlKDEpLnNsaWNlKDAsIC0xKTtcbiAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGNvb3JzICsgXCIpXCJcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoXCJyXCIsIDQpXG4gICAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwiIzAwMFwiKVxuICAgICAgICAuYXR0cihcImZpbGxcIiwgXCIjZWEwYzQ4XCIpXG4gICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICB0aXAuc2hvdyhcIkNlbnRlcjogXCIgICsgU3RyaW5nKGRbMV0pLnN1YnN0cmluZygwLCA3KSk7XG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgNSk7XG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjJweFwiKTtcbiAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuICAgICAgICB9KVxuICAgICAgICAub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgdGlwLmhpZGUoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCA0KTtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMXB4XCIpO1xuICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgdmFyIGNoYXJ0cyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBsaW5lIHRoYXQgdGhlIGRhdGEgZm9sbG93c1xuICAgICAqL1xuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl0gPSB7XG4gICAgICAgIFwicGF0aFwiIDogZHJhd1BvbGFyUGF0aChhdmVyYWdlcywgbGluZSwgc3ZnKVxuICAgIH07XG5cbiAgICBjaGFydHNbeWVhcl0gPSB7XG4gICAgICAgIFwicGF0aFwiIDogZHJhd1BvbGFyUGF0aChkYXRhW3llYXJdLCBsaW5lLCBzdmcpXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XG4gICAgICovXG4gICAgY2hhcnRzLm1lZGlhbnMucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhhdmVyYWdlcywgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG4gICAgY2hhcnRzW3llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cbiAgICB2YXIgaW5wdXR3cmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcImlucHV0LXdyYXBwZXJcIiwgdHJ1ZSk7XG5cbiAgICBkYXRhLmtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSBpbnB1dHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpO1xuXG4gICAgICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJpbnB1dFwiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIilcbiAgICAgICAgICAgIC5hdHRyKFwiaWRcIiwgXCJwb2xhci1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcbiAgICAgICAgICAgIC5hdHRyKFwidmFsdWVcIiwga2V5KVxuICAgICAgICAgICAgLnByb3BlcnR5KFwiY2hlY2tlZFwiLCAoa2V5ID09PSB5ZWFyKSA/IHRydWUgOiBmYWxzZSlcbiAgICAgICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdQb2xhclBhdGgoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnKTtcbiAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImxhYmVsXCIpXG4gICAgICAgICAgICAudGV4dChrZXkpXG4gICAgICAgICAgICAuYXR0cihcImZvclwiLCBcInBvbGFyLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblxuICAgICAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgICAgICAuc3R5bGUoXCJiYWNrZ3JvdW5kXCIsIHB1bGxEaXN0aW5jdENvbG9yKGtleSAhPT0gXCJtZWRpYW5zXCIgPyBrZXkgOiAwKSlcbiAgICAgICAgICAgIC5jbGFzc2VkKFwiZ3JhcGgtcGlwLWV4YW1wbGVcIiwgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblxuICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJpbnB1dFwiKVxuICAgICAgICAuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKVxuICAgICAgICAuYXR0cihcImlkXCIsIFwicG9sYXItYXZlcmFnZS1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcbiAgICAgICAgLmF0dHIoXCJ2YWx1ZVwiLCBcIm1lZGlhbnNcIilcbiAgICAgICAgLnByb3BlcnR5KFwiY2hlY2tlZFwiLCB0cnVlKVxuICAgICAgICAub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGgucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGFydHMuaGFzT3duUHJvcGVydHkobmV3WWVhcikpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3UG9sYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZylcblxuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKVxuICAgICAgICAudGV4dChcIkJhc2VsaW5lXCIpXG4gICAgICAgIC5hdHRyKFwiZm9yXCIsIFwicG9sYXItYXZlcmFnZS1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG5cbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgIC5zdHlsZShcImJhY2tncm91bmRcIiwgcHVsbERpc3RpbmN0Q29sb3IoMCkpXG4gICAgICAgIC5jbGFzc2VkKFwiZ3JhcGgtcGlwLWV4YW1wbGVcIiwgdHJ1ZSk7XG5cbiAgICB2YXIgdGhyZXNob2xkQ2hlY2tib3g9IGlucHV0d3JhcHBlci5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgLmNsYXNzZWQoXCJ0aHJlc2hvbGQtY2hlY2tib3hcIiwgdHJ1ZSk7XG5cbiAgICB0aHJlc2hvbGRDaGVja2JveC5hcHBlbmQoXCJpbnB1dFwiKVxuICAgICAgICAuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKVxuICAgICAgICAuYXR0cihcImlkXCIsIFwidGhyZXNob2xkLWNoZWNrYm94LVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKVxuICAgICAgICAucHJvcGVydHkoXCJjaGVja2VkXCIsIHRydWUpXG4gICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhyZXNob2xkRWxlbS5zdHlsZShcIm9wYWNpdHlcIiwgKHRoaXMuY2hlY2tlZCkgPyAxIDogMCk7XG4gICAgICAgIH0pO1xuXG4gICAgdGhyZXNob2xkQ2hlY2tib3guYXBwZW5kKFwibGFiZWxcIilcbiAgICAgICAgLnRleHQoXCJUaHJlc2hvbGRzXCIpXG4gICAgICAgIC5hdHRyKFwiZm9yXCIsIFwidGhyZXNob2xkLWNoZWNrYm94LVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbn1cblxuLyogUE9MQVIgR1JBUEggSEVMUEVSUyAqL1xuXG5mdW5jdGlvbiBmaW5kUG9sYXJDZW50ZXIgKGRhdGEpIHtcbiAgICB2YXIgaSwgaiwgbGVuZ3RoLCBhcnI7XG4gICAgdmFyIHRvdGFsU3VtID0gMDtcbiAgICB2YXIgaW5jb21wbGV0ZVllYXJzID0gMDtcbiAgICB2YXIgc3VtO1xuICAgIGxlbmd0aCA9IDQ2O1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGRhdGEua2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBhcnIgPSBkYXRhW2RhdGEua2V5c1tpXV07XG4gICAgICAgIGlmIChhcnIubGVuZ3RoICE9PSBsZW5ndGgpIHtcbiAgICAgICAgICAgIGluY29tcGxldGVZZWFycysrO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgc3VtID0gMDtcbiAgICAgICAgZm9yIChqID0gMDsgaiA8IGxlbmd0aC8yOyBqKyspIHtcbiAgICAgICAgICAgIHN1bSArPSAoYXJyW2pdWzFdIC0gYXJyW2orMjNdWzFdKTtcbiAgICAgICAgfVxuICAgICAgICBzdW0gPSBzdW0gLyAyMztcbiAgICAgICAgdG90YWxTdW0gKz0gc3VtO1xuICAgIH1cbiAgICB0b3RhbFN1bSA9IE1hdGguYWJzKHRvdGFsU3VtKSAvIChkYXRhLmtleXMubGVuZ3RoIC0gaW5jb21wbGV0ZVllYXJzKTtcblxuICAgIHZhciBhcmVhRGlmZiA9IDEwMDAwMDA7XG4gICAgdmFyIGNoZWNrRGlmZjtcbiAgICB2YXIgYXJlYUluZGV4ID0gMDtcbiAgICB2YXIgbGVmdEFyZWEsIHJpZ2h0QXJlYTtcbiAgICB2YXIgYXZncyA9IGRhdGEubWVkaWFucztcbiAgICB2YXIgaywgY291bnRlcjtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGgvMjsgaSsrKSB7XG4gICAgICAgIGxlZnRBcmVhID0gMDtcbiAgICAgICAgcmlnaHRBcmVhID0gMDtcbiAgICAgICAgZm9yIChjb3VudGVyID0gMDsgY291bnRlciA8IGxlbmd0aC8yOyBjb3VudGVyKyspIHtcbiAgICAgICAgICAgIGogPSAoaSArIGNvdW50ZXIpICUgNDY7XG4gICAgICAgICAgICBrID0gKGogKyAyMykgJSA0NjtcblxuICAgICAgICAgICAgbGVmdEFyZWEgKz0gcGFyc2VJbnQoYXZnc1tqXSwgMTApO1xuICAgICAgICAgICAgcmlnaHRBcmVhICs9IHBhcnNlSW50KGF2Z3Nba10sMTApO1xuICAgICAgICB9XG4gICAgICAgIGNoZWNrRGlmZiA9IE1hdGguYWJzKGxlZnRBcmVhIC0gcmlnaHRBcmVhKTtcbiAgICAgICAgaWYgKGNoZWNrRGlmZiA8IGFyZWFEaWZmKSB7XG4gICAgICAgICAgICBhcmVhRGlmZiA9IGNoZWNrRGlmZjtcbiAgICAgICAgICAgIGFyZWFJbmRleCA9IGk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZmlyc3RSYWRpdXMgPSBwYXJzZUludChhdmdzW2FyZWFJbmRleF0sIDEwKTtcbiAgICB2YXIgc2Vjb25kUmFkaXVzID0gcGFyc2VJbnQoLWF2Z3NbYXJlYUluZGV4ICsgMjNdLCAxMCk7XG5cbiAgICB2YXIgZmlyc3REaWZmID0gTWF0aC5hYnModG90YWxTdW0gLSBmaXJzdFJhZGl1cykgLSBNYXRoLmFicyh0b3RhbFN1bSAtIHNlY29uZFJhZGl1cyk7XG4gICAgdmFyIHNlY29uZERpZmYgPSBNYXRoLmFicygtdG90YWxTdW0gLSBmaXJzdFJhZGl1cykgLSBNYXRoLmFicygtdG90YWxTdW0gLSBzZWNvbmRSYWRpdXMpO1xuICAgIGlmIChzZWNvbmREaWZmID4gZmlyc3REaWZmKSB7XG4gICAgICAgIGFyZWFJbmRleCA9IGFyZWFJbmRleCArIDIzO1xuICAgIH1cblxuICAgIHZhciBjaXJjbGVjZW50ZXIgPSBbMCwgMF07XG4gICAgdmFyIGRhdGFjZW50ZXIgPSBbKGFyZWFJbmRleCAqIDgpICsgMywgdG90YWxTdW1dO1xuXG4gICAgcmV0dXJuKFtjaXJjbGVjZW50ZXIsIGRhdGFjZW50ZXJdKTtcbn1cblxuLyoqXG4gKiBzdGFydERheSBpcyBhY3R1YWxseSB0aGUgc2Vhc29uYWxpdHkgaW5kZXgsIGlmIGl0IG9jY3VycyBhZnRlciBqdWx5IGl0IHNob3VsZCBiZSBmbGlwcGVkXG4gKi9cbmZ1bmN0aW9uIGZpbmRQb2xhclRocmVzaG9sZHMgKGRhdGEsIHN0YXJ0RGF5KSB7XG4gICAgdmFyIHN0YXJ0SW5kZXggPSBNYXRoLmZsb29yKChzdGFydERheSAtIDMpIC8gOCk7XG4gICAgaWYgKHN0YXJ0SW5kZXggPiAyMikge1xuICAgICAgICBzdGFydEluZGV4ID0gc3RhcnRJbmRleCAtIDIzO1xuICAgIH1cblxuICAgIHZhciBpLCBqLCBsZW5ndGgsIGFycjtcbiAgICB2YXIgdG90YWxTdW0gPSAwO1xuICAgIHZhciBzdW07XG4gICAgbGVuZ3RoID0gNDY7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaiA9IChzdGFydEluZGV4ICsgaSkgJSBsZW5ndGg7XG4gICAgICAgIHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcbiAgICB9XG5cbiAgICB2YXIgZmlmdGVlblRocmVzaG9sZCA9IHRvdGFsU3VtICogLjE1O1xuICAgIHZhciBlaWdodHlUaHJlc2hvbGQgPSB0b3RhbFN1bSAqIC44MDtcbiAgICB2YXIgZmlmdGVlbkluZGV4Rm91bmQgPSBmYWxzZSxcbiAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IGZhbHNlO1xuICAgIHZhciBmaWZ0ZWVuSW5kZXgsIGVpZ2h0eUluZGV4O1xuXG4gICAgdG90YWxTdW0gPSAwO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBqID0gKHN0YXJ0SW5kZXggKyBpKSAlIGxlbmd0aDtcbiAgICAgICAgdG90YWxTdW0gKz0gcGFyc2VJbnQoZGF0YVtqXSwgMTApO1xuICAgICAgICBpZiAoIWZpZnRlZW5JbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZmlmdGVlblRocmVzaG9sZCkge1xuICAgICAgICAgICAgZmlmdGVlbkluZGV4ID0gajtcbiAgICAgICAgICAgIGZpZnRlZW5JbmRleEZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZWlnaHR5SW5kZXhGb3VuZCAmJiB0b3RhbFN1bSA+IGVpZ2h0eVRocmVzaG9sZCkge1xuICAgICAgICAgICAgZWlnaHR5SW5kZXggPSBqO1xuICAgICAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBjaXJjbGVDZW50ZXIgPSBbMCwgMF07XG5cbiAgICB2YXIgZmlmdGVlbkVuZCA9IFsoZmlmdGVlbkluZGV4ICogOCkgKyAzLCAxMDBdO1xuICAgIHZhciBlaWdodHlFbmQgPSBbKGVpZ2h0eUluZGV4ICogOCkgKyAzLCAxMDBdO1xuXG4gICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgICAgXCJsYWJlbFwiIDogXCIxNSVcIixcbiAgICAgICAgICAgIFwiZGF0YVwiIDogW2NpcmNsZUNlbnRlciwgZmlmdGVlbkVuZF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgXCJsYWJlbFwiIDogXCI4MCVcIixcbiAgICAgICAgICAgIFwiZGF0YVwiIDogW2NpcmNsZUNlbnRlciwgZWlnaHR5RW5kXVxuICAgICAgICB9XG4gICAgXTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIEhFTFBFUlMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gZHJhd0xpbmVhclBhdGgoZGF0YSwgbGluZSwgc3ZnKSB7XG4gICAgcmV0dXJuIHN2Zy5hcHBlbmQoXCJwYXRoXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpXG4gICAgICAgIC5hdHRyKFwiZFwiLCBsaW5lKGRhdGEpKTtcbn1cblxuZnVuY3Rpb24gZHJhd1BvbGFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcbiAgICByZXR1cm4gc3ZnLmFwcGVuZChcInBhdGhcIilcbiAgICAgICAgLmRhdHVtKGRhdGEpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpXG4gICAgICAgIC5hdHRyKFwiZFwiLCBsaW5lKTtcbn1cblxuZnVuY3Rpb24gZHJhd0xpbmVhclBvaW50cyhkYXRhLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKSB7XG4gICAgcmV0dXJuIHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKVxuICAgICAgICAuZGF0YShkYXRhKVxuICAgICAgICAuZW50ZXIoKVxuICAgICAgICAuYXBwZW5kKFwiY2lyY2xlXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJwb2ludFwiKVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICB2YXIgcG9pbnQgPSBBcnJheS5pc0FycmF5KGQpID8gZCA6IFsoaSo4KSArIDMsIGRdO1xuICAgICAgICAgICAgdmFyIGNvb3JzID0gbGluZShbcG9pbnRdKS5zbGljZSgxKS5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBjb29ycyArIFwiKVwiXG4gICAgICAgIH0pXG4gICAgICAgIC5hdHRyKFwiclwiLCAzKVxuICAgICAgICAuYXR0cihcInN0cm9rZVwiLCBcIiMwMDBcIilcbiAgICAgICAgLmF0dHIoXCJmaWxsXCIsZnVuY3Rpb24oZCxpKXtcbiAgICAgICAgICAgIHZhciB2YWwgPSBBcnJheS5pc0FycmF5KGQpID8gZFswXS5zdWJzdHJpbmcoMCwgNCkgOiAwO1xuICAgICAgICAgICAgcmV0dXJuIHB1bGxEaXN0aW5jdENvbG9yKHZhbClcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKFwibW91c2VvdmVyXCIsIGhhbmRsZVBvaW50TW91c2VvdmVyKVxuICAgICAgICAub24oXCJtb3VzZW91dFwiLCBoYW5kbGVQb2ludE1vdXNlb3V0KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUG9pbnRNb3VzZW92ZXIoZCkge1xuICAgIHZhciB0aXBTdHJpbmcgPSBBcnJheS5pc0FycmF5KGQpID8gZm9ybWF0RGF0ZShkWzBdKSArIFwiOiBcIiAgKyBkWzFdIDogXCJBdmVyYWdlOiBcIiAgKyBkO1xuICAgIHRpcC5zaG93KHRpcFN0cmluZyk7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDUpO1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMnB4XCIpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVQb2ludE1vdXNlb3V0KGQpIHtcbiAgICB0aXAuaGlkZSgpO1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCAzKTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjFweFwiKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQ2hlY2tib3god3JhcHBlciwga2V5LCB0eXBlLCB5ZWFyLCBjaGFydHMsIGRhdGEsIGxpbmUsIHN2ZywgYXZlcmFnZXMsIGxhdCwgbG5nKSB7XG4gICAgdmFyIGNoZWNrYm94V3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpO1xuXG4gICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImlucHV0XCIpXG4gICAgICAgIC5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpXG4gICAgICAgIC5hdHRyKFwiaWRcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKVxuICAgICAgICAuYXR0cihcInZhbHVlXCIsIGtleSlcbiAgICAgICAgLnByb3BlcnR5KFwiY2hlY2tlZFwiLCAoa2V5ID09PSB5ZWFyKSA/IHRydWUgOiBmYWxzZSlcbiAgICAgICAgLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgbmV3WWVhciA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMucmVtb3ZlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghY2hhcnRzLmhhc093blByb3BlcnR5KG5ld1llYXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXSA9IHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdMaW5lYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2Zyk7XG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImxhYmVsXCIpXG4gICAgICAgIC50ZXh0KGtleSlcbiAgICAgICAgLmF0dHIoXCJmb3JcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblxuICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgLnN0eWxlKFwiYmFja2dyb3VuZFwiLCBwdWxsRGlzdGluY3RDb2xvcihrZXkgIT09IFwibWVkaWFuc1wiID8ga2V5IDogMCkpXG4gICAgICAgIC5jbGFzc2VkKFwiZ3JhcGgtcGlwLWV4YW1wbGVcIiwgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIHB1bGxEaXN0aW5jdENvbG9yICh5ZWFyKSB7XG4gICAgdmFyIGNvbG9yUmFtcCA9IFtcbiAgICAgICAgXCIjZmZlNDc2XCIsXG4gICAgICAgIFwiIzAzNjU5M1wiLFxuICAgICAgICBcIiMxMTZjOTFcIixcbiAgICAgICAgXCIjMWU3MzkwXCIsXG4gICAgICAgIFwiIzJjN2I4ZVwiLFxuICAgICAgICBcIiMzOTgyOGNcIixcbiAgICAgICAgXCIjNGM4YzhhXCIsXG4gICAgICAgIFwiIzVlOTU4OVwiLFxuICAgICAgICBcIiM3MTlmODdcIixcbiAgICAgICAgXCIjODNhODg2XCIsXG4gICAgICAgIFwiIzk1YjE4M1wiLFxuICAgICAgICBcIiNhNmJhODBcIixcbiAgICAgICAgXCIjYjhjMzdjXCIsXG4gICAgICAgIFwiI2NhY2M3OVwiLFxuICAgICAgICBcIiNkNmQyNzlcIixcbiAgICAgICAgXCIjZTJkNzc5XCIsXG4gICAgICAgIFwiI2VmZGQ3OFwiLFxuICAgICAgICBcIiNmYmUzNzhcIlxuICAgIF07XG5cbiAgICByZXR1cm4gKHllYXIgPT09IDApID8gXCIjZmZmXCIgOiBjb2xvclJhbXBbcGFyc2VJbnQoeWVhciwgMTApICUgY29sb3JSYW1wLmxlbmd0aF07XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gREFURSBIRUxQRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBwYXJzZURhdGUgKGRhdGUpIHtcbiAgICBkYXRlID0gZGF0ZS50b1N0cmluZygpO1xuICAgIHZhciB5ZWFyID0gZGF0ZS5zdWJzdHJpbmcoMCwgNCk7XG4gICAgdmFyIG1vbnRoID0gcGFyc2VJbnQoZGF0ZS5zdWJzdHJpbmcoNCwgNiksIDEwKSAtIDE7XG4gICAgdmFyIGRheSA9IGRhdGUuc3Vic3RyaW5nKDYsIDgpO1xuXG4gICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUp1bGlhbkRheSAoZGF0ZSkge1xuICAgIGlmICh0eXBlb2YoZGF0ZSkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RE9ZKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBmb3JtYXREYXRlIChkYXRlKSB7XG4gICAgaWYgKGRhdGUgPT09IFwiQXZlcmFnZVwiKSB7IHJldHVybiBkYXRlOyB9XG5cbiAgICBkYXRlID0gcGFyc2VEYXRlKGRhdGUpO1xuICAgIHJldHVybiBmb3JtYXRNb250aChkYXRlLmdldE1vbnRoKCkpICsgXCIgXCIgKyBvcmRpbmFsX3N1ZmZpeF9vZihkYXRlLmdldERhdGUoKSkgKyBcIiwgXCIgKyBkYXRlLmdldEZ1bGxZZWFyKCk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdE1vbnRoIChtb250aCkge1xuICAgIHN3aXRjaCAobW9udGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuIFwiSmFuLlwiXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBcIkZlYi5cIlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gXCJNYXIuXCJcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIFwiQXByLlwiXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiBcIk1heVwiXG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHJldHVybiBcIkp1bi5cIlxuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByZXR1cm4gXCJKdWwuXCJcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuIFwiQXVnLlwiXG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiBcIlNlcC5cIlxuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gXCJPY3QuXCJcbiAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgIHJldHVybiBcIk5vdi5cIlxuICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgcmV0dXJuIFwiRGVjLlwiXG4gICAgfVxufVxuXG5mdW5jdGlvbiBvcmRpbmFsX3N1ZmZpeF9vZihkYXkpIHtcbiAgICB2YXIgaiA9IGRheSAlIDEwLFxuICAgICAgICBrID0gZGF5ICUgMTAwO1xuICAgIGlmIChqID09PSAxICYmIGsgIT09IDExKSB7XG4gICAgICAgIHJldHVybiBkYXkgKyBcInN0XCI7XG4gICAgfVxuICAgIGlmIChqID09PSAyICYmIGsgIT09IDEyKSB7XG4gICAgICAgIHJldHVybiBkYXkgKyBcIm5kXCI7XG4gICAgfVxuICAgIGlmIChqID09PSAzICYmIGsgIT09IDEzKSB7XG4gICAgICAgIHJldHVybiBkYXkgKyBcInJkXCI7XG4gICAgfVxuICAgIHJldHVybiBkYXkgKyBcInRoXCI7XG59XG5cbnZhciBNT05USF9MQUJFTFMgPSB7XG4gICAgMDogXCJKYW5cIixcbiAgICAxOiBcIkZlYlwiLFxuICAgIDI6IFwiTWFyXCIsXG4gICAgMzogXCJBcHJcIixcbiAgICA0OiBcIk1heVwiLFxuICAgIDU6IFwiSnVuXCIsXG4gICAgNjogXCJKdWxcIixcbiAgICA3OiBcIkF1Z1wiLFxuICAgIDg6IFwiU2VwXCIsXG4gICAgOTogXCJPY3RcIixcbiAgICAxMDogXCJOb3ZcIixcbiAgICAxMTogXCJEZWNcIlxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2dyYXBoLmpzIiwiaW1wb3J0IHt1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0fSBmcm9tIFwiLi9wYW5lbFwiO1xuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSBcIi4vc2hhcmVcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIEJpbmRUYWJFdmVudHMgKCkge1xuICAgIGQzLnNlbGVjdEFsbChcIi5wYW5lbC10b3AtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2spO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gR2V0QWN0aXZlVGFiICgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInBhbmVsLXRvcC1idG4gYWN0aXZlXCIpWzBdLmdldEF0dHJpYnV0ZShcImRhdGEtYWN0aXZlXCIpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVUYWJIZWFkZXJCdG5DbGljayAoKSB7XG4gICAgLy8gSWYgdGhlIHNlY3Rpb24gaXMgYWxyZWFkeSBhY3RpdmUsIGRvIG5vdGhpbmdcbiAgICBpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHJldHVybjtcbiAgICBIYW5kbGVUYWJDaGFuZ2UodGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWFjdGl2ZVwiKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBIYW5kbGVUYWJDaGFuZ2UgKG5ld0NsYXNzKSB7XG4gICAgZGlzYWJsZUFjdGl2ZVRhYigpO1xuICAgIGVuYWJsZVRhYihuZXdDbGFzcyk7XG4gICAgdXBkYXRlU2hhcmVVcmwoKTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlVGFiIChuZXdDbGFzcykge1xuICAgIGQzLnNlbGVjdChcIi5wYW5lbC10b3AtYnRuW2RhdGEtYWN0aXZlPSdcIiArIG5ld0NsYXNzICsgXCInXVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXG4gICAgZDMuc2VsZWN0QWxsKFwiI21hcC13cmFwcGVyLCAjcmlnaHQtcGFuZWxcIilcbiAgICAgICAgLmNsYXNzZWQobmV3Q2xhc3MsIHRydWUpO1xuXG4gICAgZDMuc2VsZWN0KFwiLnBhbmVsLXNlY3Rpb24td3JhcHBlcltkYXRhLWFjdGl2ZT0nXCIgKyBuZXdDbGFzcyArIFwiJ11cIikuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblxuICAgIHRvZ2dsZU1hcFBhZGRpbmcoKTtcbiAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KCk7XG59XG5cbmZ1bmN0aW9uIGRpc2FibGVBY3RpdmVUYWIgKCkge1xuICAgIHZhciBhY3RpdmVDbGFzcyA9IGQzLnNlbGVjdChcIi5wYW5lbC10b3AtYnRuLmFjdGl2ZVwiKS5hdHRyKFwiZGF0YS1hY3RpdmVcIik7XG5cbiAgICBkMy5zZWxlY3RBbGwoJyNtYXAtd3JhcHBlciwgI3JpZ2h0LXBhbmVsJylcbiAgICAgICAgLmNsYXNzZWQoYWN0aXZlQ2xhc3MsIGZhbHNlKTtcblxuICAgIGQzLnNlbGVjdEFsbCgnLnBhbmVsLXRvcC1idG4uYWN0aXZlLCAucGFuZWwtc2VjdGlvbi13cmFwcGVyLmFjdGl2ZScpXG4gICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZU1hcFBhZGRpbmcgKCkge1xuICAgIHZhciBwYWRkaW5nUmlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJpZ2h0LXBhbmVsXCIpLm9mZnNldFdpZHRoO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwLXdyYXBwZXJcIikuc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGFkZGluZ1JpZ2h0ICsgXCJweFwiO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvdGFicy5qcyIsImltcG9ydCB7dXBkYXRlU2hhcmVVcmx9IGZyb20gJy4vc2hhcmUnXG5pbXBvcnQge3VwZGF0ZUxheWVyT3BhY2l0eX0gZnJvbSBcIi4vbGF5ZXJcIjtcblxuLy8gc2V0IGl0IG1hbnVhbGx5IGZvciBub3dcbmNvbnN0IE9QQUNJVFlfUkFOR0VfTUFYID0gOTBcblxudmFyIG9wYWNpdHlTY2FsZSA9IGQzLnNjYWxlTGluZWFyKClcbiAgICAuZG9tYWluKFsxLCAwXSlcbiAgICAucmFuZ2UoWzAsIE9QQUNJVFlfUkFOR0VfTUFYXSlcbiAgICAuY2xhbXAodHJ1ZSlcblxuZXhwb3J0IGZ1bmN0aW9uIHNldFNsaWRlckluaXRpYWxQb3MgKGxheWVyLCBzbGlkZXJIYW5kbGUpIHtcblxuICAgIHZhciBsYXllck9wYWNpdHkgPSBsYXllci5vcGFjaXR5IHx8IDFcbiAgICB2YXIgaGFuZGxlT2Zmc2V0ID0gb3BhY2l0eVNjYWxlKGxheWVyT3BhY2l0eSlcblxuICAgIHNsaWRlckhhbmRsZS5zdHlsZS50b3AgPSAnJytoYW5kbGVPZmZzZXQrJ3B4J1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZU9wYWNpdHlTbGlkZXIgKGxheWVyKSB7XG4gICAgdmFyIGxheWVyT3BhY2l0eSA9IGxheWVyLm9wYWNpdHkgIT09IHVuZGVmaW5lZCA/IGxheWVyLm9wYWNpdHkgOiAxXG5cbiAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci13cmFwcGVyJylcbiAgICB2YXIgc2xpZGVyVHJhY2sgPSBtYWtlU2xpZGVyVHJhY2sobGF5ZXIsIGxheWVyT3BhY2l0eSlcblxuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2xpZGVyVHJhY2spXG4gICAgcmV0dXJuIHdyYXBwZXJcbn1cblxuZnVuY3Rpb24gbWFrZVNsaWRlclRyYWNrKGxheWVyLCBsYXllck9wYWNpdHkpIHtcblxuICAgIHZhciBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB2YXIgdHJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHZhciBzbGlkZXJIYW5kbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1zbGlkZXItdHJhY2stb3ZlcmxheScpXG4gICAgdHJhY2suY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1zbGlkZXItdHJhY2snKVxuICAgIHNsaWRlckhhbmRsZS5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci1oYW5kbGUnKVxuXG4gICAgb3ZlcmxheS5hcHBlbmRDaGlsZCh0cmFjaylcbiAgICBvdmVybGF5LmFwcGVuZChzbGlkZXJIYW5kbGUpXG5cbiAgICBpZiAobGF5ZXIuYWN0aXZlKSBzZXRTbGlkZXJJbml0aWFsUG9zKGxheWVyLCBzbGlkZXJIYW5kbGUpXG4gICAgc2V0RHJhZ0V2ZW50TGlzdGVuZXIob3ZlcmxheSwgbGF5ZXIsIGxheWVyT3BhY2l0eSlcbiAgICBcbiAgICByZXR1cm4gb3ZlcmxheVxufVxuXG5mdW5jdGlvbiBzZXREcmFnRXZlbnRMaXN0ZW5lcihvdmVybGF5LCBsYXllciwgbGF5ZXJPcGFjaXR5KSB7XG4gICAgZDMuc2VsZWN0KG92ZXJsYXkpLmNhbGwoZDMuZHJhZygpXG4gICAgICAgIC5vbignc3RhcnQgZHJhZycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBuZXdPcGFjaXR5ID0gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSlcbiAgICAgICAgICAgIHVwZGF0ZUxheWVyT3BhY2l0eShsYXllciwgbmV3T3BhY2l0eSlcbiAgICAgICAgICAgIGFkanVzdFNsaWRlckhhbmRsZShvdmVybGF5LCBuZXdPcGFjaXR5KVxuICAgICAgICB9KVxuICAgICAgICAub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHVwZGF0ZVNoYXJlVXJsKClcbiAgICAgICAgfSlcbiAgICApXG59XG5cbmZ1bmN0aW9uIGFkanVzdFNsaWRlckhhbmRsZShvdmVybGF5LCBuZXdPcGFjaXR5KSB7XG4gICAgdmFyIGhhbmRsZSA9IG92ZXJsYXkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnb3BhY2l0eS1zbGlkZXItaGFuZGxlJylbMF1cbiAgICBoYW5kbGUuc3R5bGUudG9wID0gJycrb3BhY2l0eVNjYWxlKG5ld09wYWNpdHkpKydweCdcbn1cblxuZnVuY3Rpb24gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSkge1xuICAgIHZhciB5UG9zID0gZDMubW91c2Uob3ZlcmxheSlbMV1cbiAgICB2YXIgbmV3T3BhY2l0eSA9IG9wYWNpdHlTY2FsZS5pbnZlcnQoeVBvcylcbiAgICByZXR1cm4gbmV3T3BhY2l0eVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvb3BhY2l0eVNsaWRlci5qcyIsIi8qXG4gIFwibG9nb1wiOiB7XG4gICAgXCJpbWFnZVwiOiBcImltZ3MvbGFuZGF0X2xvZ29fYmx1ZS5wbmdcIixcbiAgICBcImFsdFwiOiBcIkxvZ28gZm9yIHRoZSBMYW5EYXQgcHJvamVjdFwiLFxuICAgIFwibGlua1wiOiBcImh0dHBzOi8vbGFuZGF0LWRldi5uZW1hYy5vcmdcIixcbiAgICBcImxvY2F0aW9uXCI6IFtcImJvdHRvbVwiLCBcInJpZ2h0XCJdXG4gIH0sXG4qL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDcmVhdGVMb2dvIChsb2dvZGF0YSkge1xuICAgIGlmICghbG9nb2RhdGEuaW1hZ2UpIHJldHVybjtcblxuICAgIHZhciBsb2dvV3JhcHBlciA9IGNyZWF0ZUxvZ29XcmFwcGVyKCk7XG4gICAgdmFyIGxvZ29JbWFnZSA9IGNyZWF0ZUxvZ29JbWFnZShsb2dvZGF0YSk7XG4gICAgdmFyIGxvZ29MaW5rID0gbG9nb2RhdGEubGluayA/IGNyZWF0ZUxvZ29MaW5rKGxvZ29kYXRhLmxpbmspIDogbnVsbDtcblxuICAgIGlmIChsb2dvTGluaykge1xuICAgICAgICBsb2dvTGluay5hcHBlbmRDaGlsZChsb2dvSW1hZ2UpO1xuICAgICAgICBsb2dvV3JhcHBlci5hcHBlbmRDaGlsZChsb2dvTGluayk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbG9nb1dyYXBwZXIuYXBwZW5kQ2hpbGQobG9nb0ltYWdlKTtcbiAgICB9XG5cbiAgICB2YXIgaW5zZXJ0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUobG9nb2RhdGEubG9jYXRpb24pWzBdO1xuICAgIHZhciBleGlzdGluZ0NoaWxkID0gaW5zZXJ0RWxlbWVudC5maXJzdENoaWxkO1xuICAgIGluc2VydEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGxvZ29XcmFwcGVyLCBleGlzdGluZ0NoaWxkKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTG9nb1dyYXBwZXIgKCkge1xuICAgIHZhciBsb2dvV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZDMuc2VsZWN0KGxvZ29XcmFwcGVyKS5jbGFzc2VkKFwicHJvamVjdC1sb2dvXCIsIHRydWUpO1xuICAgIHJldHVybiBsb2dvV3JhcHBlcjtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTG9nb0ltYWdlIChsb2dvZGF0YSkge1xuICAgIHZhciBsb2dvSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgIGxvZ29JbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbG9nb2RhdGEuaW1hZ2UpO1xuICAgIGlmIChsb2dvZGF0YS5sYWJlbCkge1xuICAgICAgICBsb2dvSW1hZ2Uuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGxvZ29kYXRhLmxhYmVsKTtcbiAgICAgICAgbG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIGxvZ29kYXRhLmxhYmVsKTtcbiAgICB9XG4gICAgcmV0dXJuIGxvZ29JbWFnZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTG9nb0xpbmsgKGxpbmspIHtcbiAgICB2YXIgbG9nb0xpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcbiAgICBsb2dvTGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIGxpbmspO1xuICAgIGxvZ29MaW5rLnNldEF0dHJpYnV0ZShcInRhcmdldFwiLCBcIl9ibGFua1wiKTtcbiAgICByZXR1cm4gbG9nb0xpbms7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9sb2dvLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==