!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(3),i=r(o),c=n(22),s=n(26),l=n(28),u=n(27),d=n(30),p=n(24),f=n(25),v=n(23),h=n(32),m=r(h),y=n(33),g=r(y),b=(n(34),function(e){(0,a.ParseConfig)(e,w),(0,l.SetupGraphs)(),(0,d.BindTabEvents)(),(0,f.BindCopyLinkEvents)(),(0,g.default)()}),w=function(e){(0,f.AddShareSettingsToConfig)(e);var t=(0,p.CreateMap)(e.map);(0,s.CreateBaseLayers)(t,e.baselayers),(0,v.CreateDefaultLayers)(e.layers,e["active-layers"]),(0,c.SetupPanel)(e.layers,e.layout),(0,i.default)(t),(0,m.default)(e.logo),e.tab&&(0,d.HandleTabChange)(e.tab),e.graph&&(0,l.HandleGraphTabChange)(e.graph),(0,u.BindGraphEvents)(t),(0,f.BindUpdateShareUrl)(t),(0,u.SetupPointsOfInterest)(t,e.pois),(0,f.updateShareUrl)()};window.Base=b,t.default={Base:b}},function(e,t){"use strict";function n(e,t){a(e,t)}function r(e){var t;return t=!window.XMLHttpRequest&&window.ActiveXObject?new window.ActiveXObject("MSXML2.XMLHTTP.3.0"):new XMLHttpRequest,t.onreadystatechange=function(){4===t.readyState&&e(t.response)},t}function a(e,t){var n=r(function(e){var n=o(e);t(n)});n.open("GET",e,!0),n.send(),console.log("hi")}function o(e){return e=JSON.parse(e),i(e),c(e),e}function i(e){e.map||(e.map={})}function c(e){var t,n,r=e.layers,a=e.mapserverUrl;e["active-layers"];for(var o in r){if(!r.hasOwnProperty(o))return;for(t=r[o],n=0;n<t.length;n++)l(t[n],a),s(t[n],e.defaultLayerOpacity)}}function s(e,t){e.opacity=e.opacity||t}function l(e,t){e.url=e.url||t}Object.defineProperty(t,"__esModule",{value:!0}),t.ParseConfig=n,t.GetAjaxObject=r},function(e,t,n){"use strict";function r(e){var t=new a.OpenStreetMapProvider,n=new a.GeoSearchControl({provider:t,showMarker:!1,autoComplete:!0,showPopup:!1});e.addControl(n);var r=n.searchElement.elements;L.DomEvent.on(r.container,"click",function(e){L.DomEvent.stopPropagation(e);for(var t=r.form.getElementsByClassName("results")[0].children,n=0;n<t.length;n++)e.target===t[n]&&r.container.classList.remove("active");ga("send","event",{eventCategory:"map",eventAction:"search",eventLabel:"click",nonInteraction:!1})}),L.DomEvent.on(r.container,"keydown",function(e){L.DomEvent.stopPropagation(e),13!=e.which&&13!=e.keyCode||(r.container.classList.remove("active"),ga("send","event",{eventCategory:"map",eventAction:"search address",eventLabel:e.target.value,nonInteraction:!1}))})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(4)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5);Object.defineProperty(t,"GeoSearchControl",{enumerable:!0,get:function(){return r(a).default}});var o=n(13);Object.defineProperty(t,"SearchElement",{enumerable:!0,get:function(){return r(o).default}});var i=n(17);Object.defineProperty(t,"BingProvider",{enumerable:!0,get:function(){return r(i).default}});var c=n(19);Object.defineProperty(t,"EsriProvider",{enumerable:!0,get:function(){return r(c).default}});var s=n(20);Object.defineProperty(t,"GoogleProvider",{enumerable:!0,get:function(){return r(s).default}});var l=n(21);Object.defineProperty(t,"OpenStreetMapProvider",{enumerable:!0,get:function(){return r(l).default}});var u=n(18);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return r(u).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){if(!L||!L.Control||!L.Control.extend)throw new Error("Leaflet must be loaded before instantiating the GeoSearch control");for(var e=L.Control.extend(m),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e,[null].concat(n)))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=(r(o),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});t.default=a;var c=n(12),s=r(c),l=n(13),u=r(l),d=n(16),p=r(d),f=n(14),v=n(15),h=function(){return{position:"topleft",style:"button",showMarker:!0,showPopup:!1,marker:{icon:new L.Icon.Default,draggable:!1},maxMarkers:1,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",notFoundMessage:"Sorry, that address could not be found.",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",msgbox:"leaflet-bar message",form:"",input:""},autoComplete:!0,autoCompleteDelay:250}},m={initialize:function(e){var t=this;this.markers=new L.FeatureGroup,this.options=i({},h(),e);var n=this.options,r=n.style,a=n.classNames,o=n.searchLabel,c=n.autoComplete,l=n.autoCompleteDelay;"button"!==r&&(this.options.classNames.container+=" "+e.style),this.searchElement=new u.default(i({},this.options,{handleSubmit:function(e){return t.onSubmit(e)}}));var d=this.searchElement.elements,v=d.container,m=d.form,y=d.input;v.addEventListener("dblclick",function(e){e.stopPropagation()});var g=(0,f.createElement)("a",a.button,v);g.title=o,g.href="#",g.addEventListener("click",function(e){t.onClick(e)},!1),c&&(this.resultList=new p.default({handleClick:function(e){var n=e.result;y.value=n.label,t.onSubmit({query:n.label})}}),m.appendChild(this.resultList.elements.container),y.addEventListener("keyup",(0,s.default)(function(e){return t.autoSearch(e)},l),!0),y.addEventListener("keydown",function(e){return t.selectResult(e)},!0),y.addEventListener("keydown",function(e){return t.clearResults(e)},!0)),this.elements={button:g}},onAdd:function(e){var t=this.options,n=t.showMarker,r=t.style;if(this.map=e,n&&this.markers.addTo(e),"bar"===r){var a=this.searchElement.elements.form,o=e.getContainer().querySelector(".leaflet-control-container"),i=(0,f.createElement)("div","leaflet-control-geosearch bar");i.appendChild(a),o.appendChild(i),this.elements.container=i}return this.searchElement.elements.container},onRemove:function(){var e=this.elements.container;return e&&e.remove(),this},onClick:function(e){e.preventDefault();var t=this.searchElement.elements,n=t.container,r=t.input;n.classList.contains("active")?(0,f.removeClassName)(n,"active"):((0,f.addClassName)(n,"active"),r.focus())},selectResult:function(e){if([v.ARROW_DOWN_KEY,v.ARROW_UP_KEY].includes(e.keyCode)){e.preventDefault();var t=this.searchElement.elements.input,n=this.resultList,r=this.resultList.count()-1,a="ArrowDown"===e.code?1+~~n.selected:~~n.selected-1,o=a<0?r:a>r?0:a,i=n.select(o);t.value=i.label}},clearResults:function(e){e.keyCode===v.ESCAPE_KEY&&this.resultList.clear()},autoSearch:function(e){return new Promise(function(t,n){var r,a,o;return v.SPECIAL_KEYS.includes(e.keyCode)?t():(r=e.target.value,a=this.options.provider,a.search({query:r}).then(function(e){return o=e,this.resultList.render(o),t()}.$asyncbind(this,n),n))}.$asyncbind(this))},onSubmit:function(e){return new Promise(function(t,n){var r,a;return r=this.options.provider,r.search(e).then(function(e){return a=e,a&&a.length>0&&this.showResult(a[0]),t()}.$asyncbind(this,n),n)}.$asyncbind(this))},showResult:function(e){var t=Object.keys(this.markers._layers);t.length>=this.options.maxMarkers&&this.markers.removeLayer(t[0]);var n=this.addMarker(e);this.centerMap(e),this.map.fireEvent("geosearch/showlocation",{location:e,marker:n})},addMarker:function(e){var t=this.options,n=t.marker,r=t.showPopup,a=new L.Marker([e.y,e.x],n);return a.bindPopup(e.label),this.markers.addLayer(a),r&&a.openPopup(),a},centerMap:function(e){var t=this.options,n=t.retainZoomLevel,r=t.animateZoom,a=new L.LatLngBounds(e.bounds),o=a.isValid()?a:this.markers.getBounds();!n&&a.isValid()?this.map.fitBounds(o,{animate:r}):this.map.setView(o.getCenter(),this.getZoom(),{animate:r})},getZoom:function(){var e=this.options,t=e.retainZoomLevel,n=e.zoomLevel;return t?this.map.getZoom():n}}},function(e,t,n){"use strict";function r(e,t){if(Function.prototype.$asyncspawn||Object.defineProperty(Function.prototype,"$asyncspawn",{value:r,enumerable:!1,configurable:!0,writable:!0}),this instanceof Function){var n=this;return new e(function(e,r){function a(t,n){var i;try{if(i=t.call(o,n),i.done){if(i.value!==e){if(i.value&&i.value===i.value.then)return i.value(e,r);e&&e(i.value),e=null}return}i.value.then?i.value.then(function(e){a(o.next,e)},function(e){a(o.throw,e)}):a(o.next,i.value)}catch(e){return r&&r(e),void(r=null)}}var o=n.call(t,e,r);a(o.next)})}}var a=function(e,t){for(var n=t.toString(),r="return "+n,a=n.match(/.*\(([^)]*)\)/)[1],o=/['"]!!!([^'"]*)['"]/g,i=[];;){var c=o.exec(r);if(!c)break;i.push(c)}return i.reverse().forEach(function(t){r=r.slice(0,t.index)+e[t[1]]+r.substr(t.index+t[0].length)}),r=r.replace(/\/\*[^*]*\*\//g," ").replace(/\s+/g," "),new Function(a,r)()}({zousan:n(7).toString(),thenable:n(11).toString()},function e(t,n){function r(){return a.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,a){return function o(i){for(;i;){if(i.then)return i=i.then(o,r),a?void 0:i;try{if(i.pop){if(i.length)return i.pop()?t.call(e):i;i=n}else i=i.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable="!!!thenable"(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory="!!!zousan")());var a=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return a.apply(t,arguments)}catch(e){return n(e)}}}});a(),r(),e.exports={$asyncbind:a,$asyncspawn:r}},function(e,t,n){(function(t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){function a(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function o(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function i(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===(void 0===t?"undefined":r(t))&&t.nextTick||"function"==typeof n&&n||function(e){setTimeout(e,0)};var c=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===a&&(n.splice(0,a),r=0)}}var n=[],r=0,a=1024;return function(a){n.push(a),n.length-r==1&&e(t)}}();return a.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":r(e))))try{var n=0,a=e.then;if("function"==typeof a)return void a.call(e,function(e){n++||t.resolve(e)},function(e){n++||t.reject(e)})}catch(e){return void(n||this.reject(e))}this.state=o,this.v=e,t.c&&c(function(){for(var n=0,r=t.c.length;n<r;n++)o(t.c[n],e)})}},reject:function(e){if(void 0===this.state){this.state=i,this.v=e;var t=this.c;t&&c(function(){for(var n=0,r=t.length;n<r;n++)i(t[n],e)})}},then:function(e,t){var n=new a,r={y:e,n:t,p:n};if(void 0===this.state)this.c?this.c.push(r):this.c=[r];else{var o=this.state,i=this.v;c(function(){o(r,i)})}return n}},a.resolve=function(e){if(e&&e instanceof a)return e;var t=new a;return t.resolve(e),t},a.reject=function(e){if(e&&e instanceof a)return e;var t=new a;return t.reject(e),t},a.version="2.3.3-nodent",a}}).call(t,n(8),n(9).setImmediate)},function(e,t){"use strict";function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function i(){h&&f&&(h=!1,f.length?v=f.concat(v):m=-1,v.length&&c())}function c(){if(!h){var e=a(i);h=!0;for(var t=v.length;t;){for(f=v,v=[];++m<t;)f&&f[m].run();m=-1,t=v.length}f=null,h=!1,o(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var u,d,p=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var f,v=[],h=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new s(e,t)),1!==v.length||h||a(c)},s.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";function r(e,t){this._id=e,this._clearFn=t}var a=Function.prototype.apply;t.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(10),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){"use strict";!function(e,n){function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[s]=r,c(s),s++}function a(e){delete l[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function i(e){if(u)setTimeout(i,0,e);else{var t=l[e];if(t){u=!0;try{o(t)}finally{a(e),u=!1}}}}if(!e.setImmediate){var c,s=1,l={},u=!1,d=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){i(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},c=function(t){e.port2.postMessage(t)}}():d&&"onreadystatechange"in d.createElement("script")?function(){var e=d.documentElement;c=function(t){var n=d.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(i,0,e)}}(),p.setImmediate=r,p.clearImmediate=a}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(t,function(){return this}(),n(8))},function(e,t){"use strict";e.exports=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,a){try{var o=a?a(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));e(o)?o.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(o)}catch(e){n.reject(e)}}function n(){}function r(e){}function a(e,t){this.resolve=e,this.reject=t}function o(r,a){var o=new n;try{this._resolver(function(n){return e(n)?n.then(r,a):t(o,n,r)},function(e){t(o,e,a)})}catch(e){t(o,e,a)}return o}function i(e){this._resolver=e,this.then=o}return n.prototype={resolve:r,reject:r,then:a},i.resolve=function(e){return i.isThenable(e)?e:{then:function(t){return t(e)}}},i.isThenable=e,i}},function(e,t){(function(t){"use strict";function n(e,t,n){function a(t){var n=h,r=m;return h=m=void 0,C=t,g=e.apply(r,n)}function o(e){return C=e,b=setTimeout(u,t),O?a(e):g}function c(e){var n=e-w,r=e-C,a=t-n;return _?k(a,y-r):a}function l(e){var n=e-w,r=e-C;return void 0===w||n>=t||n<0||_&&r>=y}function u(){var e=L();if(l(e))return d(e);b=setTimeout(u,c(e))}function d(e){return b=void 0,S&&h?a(e):(h=m=void 0,g)}function p(){void 0!==b&&clearTimeout(b),C=0,h=w=m=b=void 0}function f(){return void 0===b?g:d(L())}function v(){var e=L(),n=l(e);if(h=arguments,m=this,w=e,n){if(void 0===b)return o(w);if(_)return b=setTimeout(u,t),a(w)}return void 0===b&&(b=setTimeout(u,t)),g}var h,m,y,g,b,w,C=0,O=!1,_=!1,S=!0;if("function"!=typeof e)throw new TypeError(s);return t=i(t)||0,r(n)&&(O=!!n.leading,_="maxWait"in n,y=_?E(i(n.maxWait)||0,t):y,S="trailing"in n?!!n.trailing:S),v.cancel=p,v.flush=f,v}function r(e){var t=void 0===e?"undefined":c(e);return!!e&&("object"==t||"function"==t)}function a(e){return!!e&&"object"==(void 0===e?"undefined":c(e))}function o(e){return"symbol"==(void 0===e?"undefined":c(e))||a(e)&&w.call(e)==u}function i(e){if("number"==typeof e)return e;if(o(e))return l;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(d,"");var n=f.test(e);return n||v.test(e)?h(e.slice(2),n?2:8):p.test(e)?l:+e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="Expected a function",l=NaN,u="[object Symbol]",d=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,v=/^0o[0-7]+$/i,h=parseInt,m="object"==(void 0===t?"undefined":c(t))&&t&&t.Object===Object&&t,y="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,g=m||y||Function("return this")(),b=Object.prototype,w=b.toString,E=Math.max,k=Math.min,L=function(){return g.Date.now()};e.exports=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=(function(e){e&&e.__esModule?e:{default:e}}(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=n(14),c=n(15),s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.handleSubmit,o=void 0===a?function(){}:a,c=n.searchLabel,s=void 0===c?"search":c,l=n.classNames,u=void 0===l?{}:l;r(this,e);var d=(0,i.createElement)("div",["geosearch",u.container].join(" ")),p=(0,i.createElement)("form",["",u.form].join(" "),d),f=(0,i.createElement)("input",["glass",u.input].join(" "),p);f.type="text",f.placeholder=s,f.addEventListener("input",function(e){t.onInput(e)},!1),f.addEventListener("keyup",function(e){t.onKeyUp(e)},!1),f.addEventListener("keypress",function(e){t.onKeyPress(e)},!1),f.addEventListener("focus",function(e){t.onFocus(e)},!1),f.addEventListener("blur",function(e){t.onBlur(e)},!1),this.elements={container:d,form:p,input:f},this.handleSubmit=o}return o(e,[{key:"onFocus",value:function(){(0,i.addClassName)(this.elements.form,"active")}},{key:"onBlur",value:function(){(0,i.removeClassName)(this.elements.form,"active")}},{key:"onSubmit",value:function(e){return new Promise(function(t,n){var r,a,o;return e.preventDefault(),e.stopPropagation(),r=this.elements,a=r.input,o=r.container,(0,i.removeClassName)(o,"error"),(0,i.addClassName)(o,"pending"),this.handleSubmit({query:a.value}).then(function(e){return(0,i.removeClassName)(o,"pending"),t()}.$asyncbind(this,n),n)}.$asyncbind(this))}},{key:"onInput",value:function(){var e=this.elements.container;this.hasError&&((0,i.removeClassName)(e,"error"),this.hasError=!1)}},{key:"onKeyUp",value:function(e){var t=this.elements,n=t.container,r=t.input;e.keyCode===c.ESCAPE_KEY&&((0,i.removeClassName)(n,"pending"),(0,i.removeClassName)(n,"active"),r.value="",document.body.focus(),document.body.blur())}},{key:"onKeyPress",value:function(e){e.keyCode===c.ENTER_KEY&&this.onSubmit(e)}},{key:"setQuery",value:function(e){this.elements.input.value=e}}]),e}();t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.createElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElement(e);return r.className=t,n&&n.appendChild(r),r};t.createScriptElement=function(e,t){var r=n("script",null,document.body);return r.setAttribute("type","text/javascript"),new Promise(function(n){window[t]=function(e){r.remove(),delete window[t],n(e)},r.setAttribute("src",e)})},t.addClassName=function(e,t){e&&!e.classList.contains(t)&&e.classList.add(t)},t.removeClassName=function(e,t){e&&e.classList.contains(t)&&e.classList.remove(t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.ENTER_KEY=13,r=t.ESCAPE_KEY=27,a=t.ARROW_DOWN_KEY=40,o=t.ARROW_UP_KEY=38,i=t.ARROW_LEFT_KEY=37,c=t.ARROW_RIGHT_KEY=39;t.SPECIAL_KEYS=[n,r,a,o,i,c]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(14),i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join(" ").trim()},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.handleClick,a=void 0===n?function(){}:n,c=t.classNames,l=void 0===c?{}:c;r(this,e),s.call(this),this.props={handleClick:a,classNames:l},this.selected=-1;var u=(0,o.createElement)("div",i("results",l.container)),d=(0,o.createElement)("div",i(l.item));u.addEventListener("click",this.onClick,!0),this.elements={container:u,resultItem:d}}return a(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.elements,n=t.container,r=t.resultItem;this.clear(),e.forEach(function(e,t){var a=r.cloneNode(!0);a.setAttribute("data-key",t),a.innerHTML=e.label,n.appendChild(a)}),e.length>0&&(0,o.addClassName)(n,"active"),this.results=e}},{key:"select",value:function(e){var t=this.elements.container;return Array.from(t.children).forEach(function(t,n){return n===e?(0,o.addClassName)(t,"active"):(0,o.removeClassName)(t,"active")}),this.selected=e,this.results[e]}},{key:"count",value:function(){return this.results.length}},{key:"clear",value:function(){var e=this.elements.container;for(this.selected=-1;e.lastChild;)e.removeChild(e.lastChild);(0,o.removeClassName)(e,"active")}}]),e}(),s=function(){var e=this;this.onClick=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.target,r=e.props.handleClick,a=e.elements.container;if(n.parentNode===a&&n.hasAttribute("data-key")){var o=n.getAttribute("data-key");r({result:e.results[o]})}}};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=(r(s),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(18),p=r(d),f=n(14),v=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=e.jsonp,a=this.options.params;return n+"//dev.virtualearth.net/REST/v1/Locations?"+this.getParamString(l({},a,{query:t,jsonp:r}))}},{key:"parse",value:function(e){var t=e.data;return 0===t.resourceSets.length?[]:t.resourceSets[0].resources.map(function(e){return{x:e.point.coordinates[1],y:e.point.coordinates[0],label:e.address.formattedAddress,bounds:[[e.bbox[0],e.bbox[1]],[e.bbox[2],e.bbox[3]]],raw:e}})}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o="BING_JSONP_CB_"+Date.now(),i=this.endpoint({query:r,protocol:a,jsonp:o}),(0,f.createScriptElement)(i,o).then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),t}(p.default);t.default=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=(function(e){e&&e.__esModule?e:{default:e}}(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.options=t}return o(e,[{key:"getParamString",value:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o=this.endpoint({query:r,protocol:a}),fetch(o).then(function(e){return i=e,i.json().then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=function(e){return e&&e.__esModule?e:{default:e}}(l),d=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find?"+this.getParamString(c({},r,{f:"json",text:t}))}},{key:"parse",value:function(e){return e.data.locations.map(function(e){return{x:e.feature.geometry.x,y:e.feature.geometry.y,label:e.name,bounds:[[e.extent.ymin,e.extent.xmin],[e.extent.ymax,e.extent.xmax]],raw:e}})}}]),t}(u.default);t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=function(e){return e&&e.__esModule?e:{default:e}}(l),d=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params,a=this.getParamString(c({},r,{address:t}));return(r&&r.key?"https:":n)+"//maps.googleapis.com/maps/api/geocode/json?"+a}},{key:"parse",value:function(e){return e.data.results.map(function(e){return{x:e.geometry.location.lng,y:e.geometry.location.lat,label:e.formatted_address,bounds:[[e.geometry.viewport.southwest.lat,e.geometry.viewport.southwest.lng],[e.geometry.viewport.northeast.lat,e.geometry.viewport.northeast.lng]],raw:e}})}}]),t}(u.default);t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=function(e){return e&&e.__esModule?e:{default:e}}(l),d=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//nominatim.openstreetmap.org/search?"+this.getParamString(c({},r,{format:"json",q:t}))}},{key:"parse",value:function(e){return e.data.map(function(e){return{x:e.lon,y:e.lat,label:e.display_name,bounds:[[parseFloat(e.boundingbox[0]),parseFloat(e.boundingbox[2])],[parseFloat(e.boundingbox[1]),parseFloat(e.boundingbox[3])]],raw:e}})}}]),t}(u.default);t.default=d},function(e,t,n){"use strict";function r(){return E.filter(function(e){return e.active})}function a(e,t){E=t["layer-groups-order"],p(d(t["layer-groups-order"]),e),c(),i()}function o(){var e=window.navigator.userAgent;return e.indexOf("MSIE")>-1||e.indexOf("rv:11.0")>-1}function i(){document.getElementById("right-panel").onscroll=l}function c(){if(!o()){var e=d3.select("#right-panel-drag-overlay");e.style("cursor","ew-resize"),e.call(d3.drag().on("drag",function(){s.call(this)}))}}function s(){l(),u()}function l(){var e,t=d3.select("#right-panel"),n=t.property("offsetHeight"),r=document.getElementById("right-panel-drag-overlay"),a=document.getElementById("right-panel-header");if(t.classed("graphs-active")){var o=document.getElementById("graph-list");e=a.scrollHeight+o.scrollHeight+700}else{var i=document.getElementById("layer-list");e=a.scrollHeight+i.scrollHeight}e=e>n?e+"px":null,r.style.height=e}function u(){var e=d3.select("#right-panel"),t=+e.style("min-width").slice(0,-2),n=e.property("clientWidth"),r=document.getElementById("wrapper"),a=r.clientWidth,o=document.getElementById("map-wrapper"),i=d3.event.sourceEvent.x,c=a-i-n,s=n+c;s=s<t?t:s>a?a:s,o.style.paddingRight=s+"px",e.style("width",s+"px")}function d(e){return d3.select("#layer-list").selectAll(".layer-group-wrapper").data(e).enter().append("div").attr("class","layer-group-wrapper").attr("id",function(e){return e.id}).classed("active",function(e){return e.active}).each(function(e){d3.select(this).append("div").attr("class","layer-group-btn btn").on("click",function(e){ga("send","event",{eventCategory:"layer list",eventAction:"toggle "+!e.active,eventLabel:e.name,nonInteraction:!1}),e.active=!e.active,d3.select(this.parentNode).classed("active",function(){return e.active}),l(),(0,w.updateShareUrl)()}).text(e.name)}).append("div").attr("class","layer-group")}function p(e,t){e.selectAll(".layer-select").data(function(e){return t[e.id]}).enter().append("div").attr("class","layer-select").each(function(e){var t=(this.parentNode.parentNode.id,d3.select(this));f(e,t),v(e,t),h(e,t),t.node().appendChild(m(e))})}function f(e,t){t.append("input").attr("type","checkbox").attr("id",function(e){return e.id}).attr("checked",function(e){return e.active?"checked":null}).on("click",function(e){if((0,g.toggleLayer)(e),t.select(".layer-tools-wrapper").classed("active",e.active),e.active){var n=t.select(".opacity-slider-handle").node();(0,b.setOpacitySliderPosition)(e,n,e.opacitiy)}})}function v(e,t){t.append("div").attr("class","layer-label-wrapper").append("label").attr("for",function(e){return e.id}).attr("class","layer-label").html(function(e){return e.name})}function h(e,t){e.info&&""!==e.info&&(t.append("div").attr("class","layer-info-btn-wrapper").on("click",function(){d3.select(this.parentNode).select(".layer-info-wrapper").classed("active",function(){return ga("send","event",{eventCategory:"layer info",eventAction:"clicked",eventLabel:e.name+" "+!d3.select(this).classed("active"),nonInteraction:!1}),!d3.select(this).classed("active")})}).append("img").attr("class","layer-info-icon").attr("src","imgs/more-info-icon-64x64.png").attr("alt","Read more about the "+e.name+" layer").attr("title","Read more about the "+e.name+" layer"),t.append("div").attr("class","layer-info-wrapper").text(function(e){return e.info}))}function m(e,t){var n=document.createElement("div");n.classList.add("layer-tools-wrapper"),e.active&&n.classList.add("active");var r=(0,b.makeOpacitySlider)(e),a=y(e);return n.appendChild(a),n.appendChild(r),n}function y(e,t){var n=document.createElement("div"),r=document.createElement("img");return n.classList.add("legend-wrapper"),r.setAttribute("src",e.legend),n.appendChild(r),n}Object.defineProperty(t,"__esModule",{value:!0}),t.GetActiveLayerGroups=r,t.SetupPanel=a,t.updatePanelDragOverlayHeight=l;var g=n(23),b=n(31),w=n(25),E=[]},function(e,t,n){"use strict";function r(){return h}function a(e,t){var n,r,a,o,c,s;if(t&&0!==t.length)for(n=0;n<t.length;n++){s=!1,c=t[n];for(a in e){if(!e.hasOwnProperty(a))return;for(o=e[a],r=0;r<o.length;r++)if(o[r].id===c){i(o[r]),s=!0;break}if(s)break}}}function o(e){e.active?(l(e),ga("send","event",{eventCategory:"layer",eventAction:"toggle off",eventLabel:e.name,nonInteraction:!1})):(i(e),ga("send","event",{eventCategory:"layer",eventAction:"toggle on",eventLabel:e.name,nonInteraction:!1}))}function i(e){var t=(0,f.GetMap)();e.active=!0,e.mapLayer=e.mapLayer||p(e),t.addLayer(e.mapLayer),s(e),c(),(0,v.updateShareUrl)()}function c(){var e,t,n;for(t=0,n=m.length;t<n;t++)e=m[t],"overlay"===e.type&&e.mapLayer.bringToFront()}function s(e){h.push(e.id),m.push(e)}function l(e){var t=(0,f.GetMap)();e.active=!1,e.mapLayer&&t.hasLayer(e.mapLayer)&&t.removeLayer(e.mapLayer),u(e),(0,v.updateShareUrl)()}function u(e){var t=h.indexOf(e.id);t!==-1&&(h.splice(t,1),m.splice(t,1))}function d(e,t){e.opacity=t,e.mapLayer.setOpacity(t)}function p(e){return L.tileLayer.wms(e.url,{layers:e.id,transparent:e.transparent||!0,version:e.version||"1.3.0",crs:e.crs||L.CRS.EPSG900913,format:e.format||"image/png",opacity:e.opacity||.75,tileSize:e.tileSize||document.getElementById("map").clientWidth})}Object.defineProperty(t,"__esModule",{value:!0}),t.GetCurrentLayers=r,t.CreateDefaultLayers=a,t.toggleLayer=o,t.enableLayer=i,t.disableLayer=l,t.updateLayerOpacity=d;var f=n(24),v=n(25),h=[],m=[]},function(e,t){"use strict";function n(e){var t=e.id||"map",n=e.options||{scrollWheelZoom:!1},r=e.center||["38.5","-81"],o=e.zoom||6;return a=L.map(t,n).setView(r,o),L.control.attribution().addTo(a),document.getElementsByClassName("leaflet-control-zoom-in")[0].addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click button",eventLabel:"zoom in",nonInteraction:!1})}),document.getElementsByClassName("leaflet-control-zoom-out")[0].addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click button",eventLabel:"zoom out",nonInteraction:!1})}),a.on("dragend",function(e){ga("send","event",{eventCategory:"map",eventAction:"drag",eventLabel:JSON.stringify(a.getBounds()),nonInteraction:!0})}),a.on("zoomend",function(e){ga("send","event",{eventCategory:"map",eventAction:"zoom",eventLabel:JSON.stringify(a.getBounds()),nonInteraction:!0})}),a}function r(){return a}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateMap=n,t.GetMap=r;var a},function(e,t,n){"use strict";function r(e){e.on("moveend",a)}function a(e){var t=(0,Y.GetMap)();c(i([b(t),w(t),E(t),L(),k(t),C(),O(),_()])),s(),g()}function o(e){var t=S();t&&(t.center&&(e.map.center=t.center),t.zoom&&(e.map.zoom=t.zoom),t.layers&&D(t.layers,e),t.baselayers&&F(t.baselayers,e),t.pois&&U(t.pois,e),t.tab&&(e.tab=t.tab),t.graph&&(e.graph=t.graph),t.layerGroups&&(e.layerGroups=R(t.layerGroups,e)))}function i(e){return"?"+e.filter(function(e){return void 0!==e}).join("&")}function c(e){window.history&&window.history.replaceState&&window.history.replaceState({},"",e)}function s(){var e=window.location.href;document.getElementById("shareurl-link-url").setAttribute("value",e)}function l(){d3.select(document).on("click",u),d3.select(".shareurl-link a").on("click",p),d3.select(".shareurl-link-url").on("click",v),d3.select(".shareurl-link-popup-remover").on("click",f)}function u(){var e=d3.event,t=[];t=d(e.target);var n,r,a=!0;for(n=0,r=t.length;n<r;n++)try{if(t[n].classList.contains("shareurl-link-popup")||t[n].classList.contains("shareurl-link")){a=!1;break}}catch(e){}if(a){m(document.getElementsByClassName("shareurl-link-popup").item(0))}}function d(e){for(var t=[];e&&e.parentNode;)t.push(e),e=e.parentNode;return t}function p(){var e=document.getElementsByClassName("shareurl-link-popup").item(0);d3.select(e).classed("active")?m(e):h(e)}function f(){m(document.getElementsByClassName("shareurl-link-popup").item(0))}function v(){y()}function h(e){e.classList.toggle("active"),y(),ga("send","event",{eventCategory:"shareurl",eventAction:"open",eventLabel:document.getElementById("shareurl-link-url").getAttribute("value"),nonInteraction:!1})}function m(e){ga("send","event",{eventCategory:"shareurl",eventAction:"close",eventLabel:document.getElementById("shareurl-link-url").getAttribute("value"),nonInteraction:!1}),e.classList.remove("active")}function y(){var e=document.getElementById("shareurl-link-url");e.focus(),e.setSelectionRange(0,e.value.length)}function g(){var e,t,n,r,a=j(window.location.href),o=document.getElementsByClassName("shareurl-social");for(n=0,r=o.length;n<r;n++)e=o[n],t=e.getAttribute("data-baseurl")+a,e.setAttribute("href",t),e.addEventListener("click",function(){ga("send","event",{eventCategory:"shareurl",eventAction:this.getAttribute("aria-label"),eventLabel:this.href,nonInteraction:!1})})}function b(e){var t=e.getCenter();return"center="+t.lat.toString()+","+t.lng.toString()}function w(e){return"zoom="+e.getZoom()}function E(e){var t=[],n={},r=(0,H.GetCurrentLayers)();e.eachLayer(function(e){var t=e.options;t&&t.layers&&(n[t.layers]=t.hasOwnProperty("opacity")?t.opacity:"1")});var a,o;for(o=0;o<r.length;o++)a=r[o],t.push(a),t.push(n[a]);return"layers="+t.join(",")}function k(e){var t=[];return e.eachLayer(function(e){e.options&&e.options.type===z.BASE_LAYER_TYPE&&t.push(e.options.id)}),"baselayers="+t.join(",")}function L(){return"layerGroups="+(0,K.GetActiveLayerGroups)().map(function(e){return e.id}).join(",")}function C(){var e=(0,$.GetAllPointsOfInterest)();if(e.length){var t="pois=";return e.forEach(function(e){t+=e.lat+","+e.lng,e.plots&&e.plots.length&&(t+=","+e.plots.join(",")),t+=";"}),t}}function O(){return"tab="+d3.select(".panel-top-btn.active").attr("data-active")}function _(){return"graph="+d3.select(".graph-type-btn.active").attr("data-type")}function S(){var e=window.location.search;if(""!==e)return e=A(e),e=P(e),I(e),e}function A(e){return e=e.substring(1),e=x(e),e.split("&")}function j(e){return e.replace(/\:/g,"%3A").replace(/\;/g,"%3B").replace(/\//g,"%2F").replace(/\,/g,"%2C").replace(/\&/g,"%26")}function x(e){return e.replace(/\%2[c|C]/g,",").replace(/\%3[b|B]/g,";")}function P(e){var t,n,r={};for(n=0;n<e.length;n++)t=e[n].split("="),r[t[0]]=t[1];return r}function I(e){e.center&&(e.center=T(e.center)),e.layers&&(e.layers=M(e.layers)),e.baselayers&&(e.baselayers=B(e.baselayers)),e.pois&&(e.pois=N(e.pois)),e.layerGroups&&(e.layerGroups=G(e.layerGroups))}function T(e){return e.split(",")}function M(e){var t,n,r={enabledLayers:[],opacityVals:{}};for(e=e.split(","),n=0;n<e.length;n+=2)t=e[n],r.enabledLayers.push(t),r.opacityVals[t]=e[n+1];return r}function B(e){return e.split(",")}function N(e){return e.split(";").filter(function(e){return""!==e}).map(function(e){return e=e.split(","),e.length>2?(0,$.createPOI)(e[0],e[1],e.splice(2)):(0,$.createPOI)(e[0],e[1],null)})}function G(e){return e.split(",")}function R(e,t){t.layout["layer-groups-order"].forEach(function(t){t.active=e.filter(function(e){return e===t.id}).length>0})}function D(e,t){var n=e.enabledLayers;t["active-layers"]=n;var r,a,o,i,c,s,l=t.layers;for(r=0;r<n.length;r++){s=!1,c=n[r];for(o in l){if(!l.hasOwnProperty(o))return;for(i=l[o],a=0;a<i.length;a++)if(i[a].id===c){i[a].opacity=e.opacityVals[c],s=!0;break}if(s)break}}}function F(e,t){var n,r,a=t.baselayers;for(r=0;r<a.length;r++)n=a[r],n.active=e.indexOf(n.id)!==-1}function U(e,t){t.pois=e}Object.defineProperty(t,"__esModule",{value:!0}),t.BindUpdateShareUrl=r,t.updateShareUrl=a,t.AddShareSettingsToConfig=o,t.BindCopyLinkEvents=l;var Y=n(24),z=n(26),H=n(23),$=n(27),K=n(22)},function(e,t,n){"use strict";function r(e,t){t=t||[{id:"carto-light-default",url:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attributions">CARTO</a>'}],d=t;var n,r,o;for(n=0;n<t.length;n++)o=t[n],o.active&&(r=l(o),o.layer=r,r.addTo(e));a(t)}function a(e){var t=document.createElement("div");t.className="baselayer-ui";for(var n,r,a,i,c=0,s=e.length;c<s;c++)i=e[c],i.hasOwnProperty("image")&&(n=document.createElement("div"),n.setAttribute("data-layer",i.id),r=document.createElement("img"),r.setAttribute("src",i.image),r.setAttribute("alt",i.label),r.setAttribute("title",i.label),a=document.createElement("div"),a.textContent=i.label,n.appendChild(r),n.appendChild(a),n.addEventListener("click",o),d3.select(n).classed("base-selector",!0).classed("active",i.active),t.appendChild(n));document.getElementsByClassName("leaflet-bottom leaflet-left")[0].appendChild(t)}function o(e){e.stopPropagation();var t=this.getAttribute("data-layer");i(this),c(),s(t),ga("send","event",{eventCategory:"map",eventAction:"change base layer",eventLabel:t,nonInteraction:!1}),(0,f.updateShareUrl)()}function i(e){d3.select(".base-selector.active").classed("active",!1),d3.select(e).classed("active",!0)}function c(){var e=(0,p.GetMap)();e.eachLayer(function(t){t.options.type===v&&e.removeLayer(t)})}function s(e){for(var t,n=(0,p.GetMap)(),r=0,a=d.length;r<a;r++)if(t=d[r],t.id===e){t.layer||(t.layer=l(t)),t.layer.addTo(n),t.layer.bringToBack();break}}function l(e){return L.tileLayer(e.url,u(e))}function u(e){var t={};return e.id&&(t.id=e.id),e.attribution&&(t.attribution=e.attribution),e.subdomains&&(t.subdomains=e.subdomains),t.type=v,t}Object.defineProperty(t,"__esModule",{value:!0}),t.BASE_LAYER_TYPE=void 0,t.CreateBaseLayers=r;var d,p=n(24),f=n(25),v=t.BASE_LAYER_TYPE="baselayer"},function(e,t,n){"use strict";function r(e){e.on("click",a)}function a(e){var t=this,n=e.latlng.lat,r=e.latlng.lng,a=s(n,r,null);l(a),f(t,a),(0,w.updateShareUrl)(),ga("send","event",{eventCategory:"map",eventAction:"click",eventLabel:"add point",nonInteraction:!1})}function o(e,t,n,r){var a=i();t.getElementsByClassName("graph-elem-header")[0].appendChild(a),d3.select(a).on("click",function(){ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:"remove",nonInteraction:!1}),p(r),y(e,t,n),(0,L.updatePanelDragOverlayHeight)(),(0,w.updateShareUrl)()})}function i(){var e=document.createElement("button");return e.className="remove-graph",e.innerText=String.fromCharCode("10005"),e.setAttribute("title","Remove graph"),e}function c(){return C}function s(e,t,n){return{lat:e,lng:t,plots:n||["baseline","2015","thresholds"]}}function l(e){C.push(e)}function u(e,t){d(t);var n=c(),e=(0,E.GetMap)();n.forEach(function(t){f(e,t)})}function d(e){Array.prototype.push.apply(C,e)}function p(e){C=C.filter(function(t){return!(t===e)})}function f(e,t){var n=(0,g.createGraphDiv)(t),r=(0,b.createMarker)(t.lat,t.lng);t.graphDiv=n,t.marker=r,r.addTo(e),o(e,n,r,t),d3.select(n).on("mouseenter",function(e){r.setIcon((0,b.getIcon)("hover"))}),d3.select(n).on("mouseleave",function(){r.setIcon((0,b.getIcon)("graph"))}),r.on("click dblclick",function(e){v(e,t)}),r.on("mouseover",function(e){r.setIcon((0,b.getIcon)("hover"))}),r.on("mouseout",function(e){r.setIcon((0,b.getIcon)("graph")),t.graphDiv.getElementsByClassName("pan-to-marker-btn")[0].classList.remove("animate")})}function v(e,t){e.originalEvent.stopPropagation(),(0,k.HandleTabChange)("graphs-active"),m(t),h(t)}function h(e){e.graphDiv.getElementsByClassName("pan-to-marker-btn")[0].classList.add("animate")}function m(e){document.getElementById("right-panel").scrollTop=e.graphDiv.offsetTop}function y(e,t,n){document.getElementById("graph-list").removeChild(t),e.removeLayer(n),(0,w.updateShareUrl)()}Object.defineProperty(t,"__esModule",{value:!0}),t.BindGraphEvents=r,t.GetAllPointsOfInterest=c,t.createPOI=s,t.SetupPointsOfInterest=u;var g=n(28),b=n(29),w=n(25),E=n(24),k=n(30),L=n(22),C=[]},function(e,t,n){"use strict";function r(){d3.selectAll(".graph-type-btn").on("click",u),a(),q=d3.tip().attr("class","d3-tip").html(function(e){return e})}function a(){Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100!=0||e%400==0)},Date.prototype.getDOY=function(){var e=[0,31,59,90,120,151,181,212,243,273,304,334],t=this.getMonth(),n=this.getDate(),r=e[t]+n;return t>1&&this.isLeapYear()&&r++,r}}function o(e,t,n){n=n.replace(/\[|\]|\'/g,"").split(", "),g(n,e,t),(0,z.updatePanelDragOverlayHeight)()}function i(e,t){var n="https://fcav-ndvi.nemac.org/landdat_product.cgi?args="+e.lng+","+e.lat,r=(0,K.GetAjaxObject)(function(n){o(t,e,n)});r.open("GET",n),r.send()}function c(e){var t;for(t=0;t<e.length;t++)e[t]=e[t].split(",");return e}function s(e){var t,n,r,a,o={};for(o.keys=[],r=0;r<e.length;r++)t=e[r],n=t[0].substring(0,4),o.hasOwnProperty(n)||(o[n]=[],o.keys.push(n)),o[n].push(t);var i=[];for(r=0;r<o.keys.length;r++)n=o.keys[r],46!==o[n].length&&i.push(n);for(r=0;r<i.length;r++)n=i[r],delete o[n],o.keys.splice(o.keys.indexOf(n),1);var c,s;for(o.baseline=[],r=0;r<46;r++){for(c=[],a=r;a<e.length;a+=46)c.push(parseInt(e[a][1],10));s=l(c),o.baseline.push(s)}return o}function l(e){var t,n,r=0;for(t=0,n=e.length;t<n;t++)r+=e[t];return(r/n).toString()}function u(){var e=this.getAttribute("data-type"),t=document.getElementsByClassName("graph-type-btn active")[0].getAttribute("data-type");e!==t&&(ga("send","event",{eventCategory:"graph type",eventAction:"click",eventLabel:e,nonInteraction:!1}),d(e))}function d(e){if(!p())var t=document.getElementsByClassName("graph-elem")[0].scrollHeight,n=document.getElementsByClassName("graph-type-info active")[0].scrollHeight,r=document.getElementById("right-panel").scrollTop;v(),h(e),p()||f(n,t,r),(0,H.updateShareUrl)()}function p(){return void 0===document.getElementsByClassName("graph-elem")[0]}function f(e,t,n){var r=document.getElementsByClassName("graph-type-info active")[0].scrollHeight,a=document.getElementsByClassName("graph-elem")[0].scrollHeight,o=a/t,i=r+(n-e)*o;document.getElementById("right-panel").scrollTop=i}function v(){var e=document.getElementsByClassName("graph-type-btn active")[0],t="graph-"+e.getAttribute("data-type");e.classList.remove("active"),document.getElementById("graph-list").classList.remove(t)}function h(e){d3.select(".graph-type-btn[data-type='"+e+"']").classed("active",!0),document.getElementById("graph-list").classList.add("graph-"+e),d3.selectAll(".graph-type-info").classed("active",function(){return e===this.id.split("-")[0]})}function m(e){var t=b(e.lat,3),n=b(e.lng,3),r=document.createElement("div"),a=document.createElement("div");r.appendChild(a);var o=y(e),c=document.createTextNode("Lat: "+t+", Long: "+n),s=document.createElement("div");s.className="graph-lat-lon",s.appendChild(c),a.appendChild(o),a.appendChild(s);var l=document.createElement("div");return l.classList.add("graph-loading-div"),r.appendChild(l),r.classList.add("graph-elem"),r.classList.add("graph-loading"),a.classList.add("graph-elem-header"),document.getElementById("graph-list").appendChild(r),i(e,r),r}function y(e){var t=document.createElement("button");return t.classList.add("btn"),t.classList.add("pan-to-marker-btn"),t.textContent="Show On Map",t.onclick=function(e,t){(0,$.GetMap)().panTo([e.lat,e.lng]),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:'{"show on map":{"lat":'+e.lat+',"long":'+e.lng+"}}",nonInteraction:!1})}.bind(t,e),t}function g(e,t,n){e=c(e);var r=s(e);w(e,t),E(r,t,n),k(r,t,n),t.classList.remove("graph-loading")}function b(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function w(e,t){var n={top:30,right:20,bottom:30,left:29},r=580-n.left-n.right,a=270-n.top-n.bottom,o=d3.scaleTime().range([0,r]).domain([R(e[0][0]),R(e[e.length-1][0])]),i=d3.scaleLinear().range([a,0]).domain([0,100]),c=d3.axisBottom(o).ticks(16).tickFormat(function(e){return e.getFullYear()}),s=d3.axisLeft(i).ticks(6),l=d3.line().x(function(e){return o(R(e[0]))}).y(function(e){return i(e[1])}),u=d3.select(t).append("div").classed("timeseries-graph",!0),d=u.append("svg").attr("height",a+n.top+n.bottom).attr("viewBox",function(){return"0 0 "+(r+n.left+n.right)+" "+(a+n.top+n.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+n.left+","+n.top+")");d.call(q),O(e,l,d),d.append("g").attr("class","x axis").attr("transform","translate(0,"+a+")").call(c),d.append("g").attr("class","y axis").call(s),S(e,l,d)}function E(e,t,n){function r(e){return W[(e-15)/30]}var a={},o={top:30,right:20,bottom:30,left:29},i=500-o.left-o.right,c=270-o.top-o.bottom,s=e.baseline,l=d3.scaleLinear().range([0,i]).domain([0,365]),u=d3.scaleLinear().range([c,0]).domain([0,100]),d=d3.axisBottom(l).ticks(11).tickValues([15,45,75,105,135,165,195,225,255,285,315,345]).tickFormat(r),p=d3.axisLeft(u).ticks(6),f=d3.line().x(function(e,t){return l(Array.isArray(e)?D(e[0]):8*t+3)}).y(function(e){return u(Array.isArray(e)?e[1]:e)}),v=d3.select(t).append("div").classed("overlapping-graph",!0),h=v.append("svg").attr("viewBox",function(){return"0 0 "+(i+o.left+o.right)+" "+(c+o.top+o.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+o.left+","+o.top+")");h.call(q),h.append("g").attr("class","x axis").attr("transform","translate(0,"+c+")").call(d),h.append("g").attr("class","y axis").call(p);var m,y,g;for(y=0,g=n.plots.length;y<g;y++)"thresholds"!==(m=n.plots[y])&&(a[m]={path:O(e[m],f,h)});for(y=0,g=n.plots.length;y<g;y++)"thresholds"!==(m=n.plots[y])&&(a[m].points=S(e[m],f,h));var b=v.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){x(b,t,"overlapping",n,a,e,f,h,s)}),x(b,"baseline","overlapping",n,a,e,f,h,s)}function k(e,t,n){var r=Math.min(490,490)/2-30,a=e.baseline,o=L(e),i=C(a,o[1][0]),c=d3.scaleLinear().domain([0,100]).range([0,r]),s=d3.radialLine().radius(function(e){return c(Array.isArray(e)?e[1]:e)}).angle(function(e,t){return((Array.isArray(e)?D(e[0]):8*t+3)-1)%365/365*(2*Math.PI)}),l=d3.select(t).append("div").classed("polar-graph",!0),u=l.append("svg").attr("viewBox",function(){return"0 0 490 490"}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate(245,245)");u.call(q);var d=u.append("g").attr("class","r axis").selectAll("g").data(c.ticks(5).slice(1)).enter().append("g");d.append("circle").attr("r",c),d.append("text").attr("y",function(e){return-c(e)-4}).attr("transform","rotate(15)").style("text-anchor","middle").text(function(e){return e});var p=u.append("g").attr("class","a axis").selectAll("g").data(d3.range(0,360,30)).enter().append("g").attr("transform",function(e){return"rotate("+(e-90)+")"});p.append("line").attr("x2",r),p.append("text").attr("x",r+6).attr("dy",".35em").style("text-anchor",function(e){return e<360&&e>180?"end":null}).attr("transform",function(e){return e<360&&e>180?"rotate(180 "+(r+6)+",0)":null}).text(function(e){return W[e/30]});var f=u.append("g").selectAll("g").data(i).enter().append("g").attr("transform",function(e){return"rotate("+(e.data[1][0]-90)+")"});f.append("line").attr("class","line").attr("x2",r),f.append("text").attr("x",function(e){var t=e.data[1][0];return t<360&&t>180?r+30:r-30}).attr("y",function(e){return e.data[1][0]%365/365*(2*Math.PI)+6}).attr("dy",".35em").style("text-anchor",function(e){var t=e.data[1][0];return t<360&&t>180?"middle":null}).attr("transform",function(e){var t=e.data[1][0];return t<360&&t>180?"rotate(180 "+(r+6)+",0)":null}).text(function(e){return e.label}),f.style("opacity",n.plots.indexOf("thresholds")!==-1?1:0);var v=o[1][0];_([[v,100],[(v+182.5)%365,100]],s,u).classed("growing-season-line","true"),_(o,s,u).classed("center-line","true"),u.selectAll("point").data([o[1]]).enter().append("circle").attr("class","center").attr("r",4).attr("transform",function(e){return"translate("+s([e]).slice(1).slice(0,-1)+")"}).attr("stroke","#000").attr("fill","#ea0c48").on("mouseover",function(e){q.show("Center: "+String(e[1]).substring(0,7)),this.setAttribute("r",5)}).on("mouseout",function(e){q.hide(),this.setAttribute("r",4)});var h,m,y,g={};for(m=0,y=n.plots.length;m<y;m++)"thresholds"!==(h=n.plots[m])&&(g[h]={path:_(e[h],s,u)});for(m=0,y=n.plots.length;m<y;m++)"thresholds"!==(h=n.plots[m])&&(g[h].points=S(e[h],s,u));var b=l.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){x(b,t,"polar",n,g,e,s,u,a)}),x(b,"baseline","polar",n,g,e,s,u,a);var w=b.append("div").classed("threshold-checkbox",!0);w.append("input").attr("type","checkbox").attr("id","threshold-checkbox-"+n.lat.toString().replace(".","")+"-"+n.lng.toString().replace(".","")).property("checked",n.plots.indexOf("thresholds")!==-1).on("change",function(e){f.style("opacity",this.checked?1:0);var t=this.checked?"off":"on";this.checked?B(n,"thresholds"):M(n,"thresholds"),(0,H.updateShareUrl)(),N("threshold polar timeseries "+t)}),w.append("label").text("Thresholds").attr("for","threshold-checkbox-"+n.lat.toString().replace(".","")+"-"+n.lng.toString().replace(".",""))}function L(e){var t,n,r,a,o,i=0,c=0;for(r=46,t=0;t<e.keys.length;t++)if(a=e[e.keys[t]],a.length===r){for(o=0,n=0;n<r/2;n++)o+=a[n][1]-a[n+23][1];o/=23,i+=o}else c++;i=Math.abs(i)/(e.keys.length-c);var s,l,u,d,p,f=1e6,v=0,h=e.baseline;for(t=0;t<r/2;t++){for(l=0,u=0,p=0;p<r/2;p++)n=(t+p)%46,d=(n+23)%46,l+=parseInt(h[n],10),u+=parseInt(h[d],10);s=Math.abs(l-u),s<f&&(f=s,v=t)}var m=parseInt(h[v],10),y=parseInt(-h[v+23],10),g=(m+y)/2,b=Math.abs(i-g);return Math.abs(-i-g)<b&&(v+=23),[[0,0],[8*v+3,i]]}function C(e,t){var n=Math.floor((t-3)/8);n+=n>22?-23:23;var r,a,o,i=0;for(o=46,r=0;r<o;r++)a=(n+r)%o,i+=parseInt(e[a],10);var c,s,l=.15*i,u=.8*i,d=!1,p=!1;for(i=0,r=0;r<o;r++)a=(n+r)%o,i+=parseInt(e[a],10),!d&&i>l?(c=a,d=!0):!p&&i>u&&(s=a,p=!0);var f=[0,0];return[{label:"15%",data:[f,[8*c+3,100]]},{label:"80%",data:[f,[8*s+3,100]]}]}function O(e,t,n){return n.append("path").attr("class","line").attr("d",t(e))}function _(e,t,n){return n.append("path").datum(e).attr("class","line").attr("d",t)}function S(e,t,n){return n.selectAll("point").data(e).enter().append("circle").attr("r",2).attr("class","point").attr("transform",function(e,n){var r=Array.isArray(e)?e:[8*n+3,e];return"translate("+t([r]).slice(1).slice(0,-1)+")"}).attr("stroke","#000").attr("fill",function(e,t){return G(Array.isArray(e)?e[0].substring(0,4):0)}).on("mouseover",A).on("mouseout",j)}function A(e){var t=Array.isArray(e)?F(e[0])+": "+e[1]:"Average: "+e;q.show(t),this.setAttribute("r","4")}function j(e){q.hide(),this.setAttribute("r","2");var t=document.getElementsByClassName("graph-type-btn active")[0].getAttribute("data-type");ga("send","event",{eventCategory:"graph",eventAction:"hover",eventLabel:t+" tool tip",nonInteraction:!1})}function x(e,t,n,r,a,o,i,c,s){var l=e.append("div"),u=r.lat,d=r.lng;l.append("input").attr("type","checkbox").attr("id",n+"-"+t+u.toString().replace(".","")+"-"+d.toString().replace(".","")).attr("data-link",t+u.toString().replace(".","")+"-"+d.toString().replace(".","")).attr("value",t).property("checked",r.plots.indexOf(t)!==-1).on("change",function(e){var s=this.value;this.checked?(I(a,s,o,i,c),B(r,t),N(s+" "+n+" timeseries on")):(P(a,s),M(r,t),N(s+" "+n+" timeseries off")),T(t+u.toString().replace(".","")+"-"+d.toString().replace(".",""),this.checked),(0,H.updateShareUrl)()}),l.append("label").text("baseline"!==t?t:"Baseline").attr("for",n+"-"+t+u.toString().replace(".","")+"-"+d.toString().replace(".","")),l.append("div").style("background",G("baseline"!==t?t:0)).classed("graph-pip-example",!0)}function P(e,t){e[t].path.remove(),e[t].points.remove()}function I(e,t,n,r,a){e.hasOwnProperty(t)||(e[t]={}),e[t].path=O(n[t],r,a),e[t].points=S(n[t],r,a)}function T(e,t,n){d3.selectAll("input[data-link='"+e+"']").each(function(e,n){var r=d3.select(this);r.property("checked")!==t&&(r.property("checked",t),r.dispatch("change"))})}function M(e,t){var n=e.plots.indexOf(t);n!==-1&&e.plots.splice(n,1)}function B(e,t){e.plots.indexOf(t)===-1&&e.plots.push(t)}function N(e){ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:e,nonInteraction:!1})}function G(e){var t=["#ffe476","#036593","#116c91","#1e7390","#2c7b8e","#39828c","#4c8c8a","#5e9589","#719f87","#83a886","#95b183","#a6ba80","#b8c37c","#cacc79","#d6d279","#e2d779","#efdd78","#fbe378"];return 0===e?"#fff":t[parseInt(e,10)%t.length]}function R(e){e=e.toString();var t=e.substring(0,4),n=parseInt(e.substring(4,6),10)-1,r=e.substring(6,8);return new Date(t,n,r)}function D(e){return"string"==typeof e?(e=R(e),e.getDOY()):e}function F(e){return"Average"===e?e:(e=R(e),U(e.getMonth())+" "+Y(e.getDate())+", "+e.getFullYear())}function U(e){return J[e]}function Y(e){var t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"}Object.defineProperty(t,"__esModule",{value:!0}),t.SetupGraphs=r,t.HandleGraphTabChange=d,t.createGraphDiv=m;var z=n(22),H=n(25),$=n(24),K=n(2),q={},W={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},J={0:"Jan.",1:"Feb.",2:"Mar.",3:"Apr.",4:"May",5:"Jun.",6:"Jul.",7:"Aug.",8:"Sep.",9:"Oct.",10:"Nov.",11:"Dec."}},function(e,t){"use strict";function n(e,t){return L.marker([e,t],{icon:o})}function r(e){return"hover"===e?i:o}Object.defineProperty(t,"__esModule",{value:!0}),t.createMarker=n,t.getIcon=r;var a=L.Icon.extend({}),o=new a({iconUrl:"imgs/blue_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),i=new a({iconUrl:"imgs/orange_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})},function(e,t,n){"use strict";function r(){d3.selectAll(".panel-top-btn").on("click",o)}function a(){return document.getElementsByClassName("panel-top-btn active")[0].getAttribute("data-active")}function o(){this.classList.contains("active")||(ga("send","event",{eventCategory:"tab",eventAction:"click",eventLabel:this.getAttribute("data-active"),nonInteraction:!1}),i(this.getAttribute("data-active")))}function i(e){s(),c(e),(0,p.updateShareUrl)()}function c(e){d3.select(".panel-top-btn[data-active='"+e+"']").classed("active",!0),document.getElementById("map-wrapper").classList.add(e),document.getElementById("right-panel").classList.add(e),d3.select(".panel-section-wrapper[data-active='"+e+"']").classed("active",!0),l(),u(),(0,d.updatePanelDragOverlayHeight)()}function s(){var e=d3.select(".panel-top-btn.active").attr("data-active");d3.selectAll("#map-wrapper, #right-panel").classed(e,!1),d3.selectAll(".panel-top-btn.active, .panel-section-wrapper.active").classed("active",!1)}function l(){var e=document.getElementById("right-panel").offsetWidth;document.getElementById("map-wrapper").style.paddingRight=e+"px"}function u(){var e=document.getElementById("right-panel"),t=e.style.width;if(t){var n=d3.select(e).style("min-width").slice(0,-2);parseInt(t.slice(0,-2),10)>parseInt(n,10)||(e.style.width="")}}Object.defineProperty(t,"__esModule",{value:!0}),t.BindTabEvents=r,t.GetActiveTab=a,t.HandleTabChange=i;var d=n(22),p=n(25)},function(e,t,n){"use strict";function r(e,t,n){n=n||e.opacity,t.style.top=d(n)+"px"}function a(e){var t=void 0!==e.opacity?e.opacity:1,n=document.createElement("div"),r=i(e,t),a=o("closed",e,r);return n.classList.add("opacity-slider-wrapper"),n.appendChild(r),n.appendChild(a),n}function o(e,t,n){var a=document.createElement("div"),o=document.createElement("img");return a.classList.add("opacity-icon-wrapper"),o.classList.add("opacity-icon"),o.classList.add(e),o.setAttribute("src","imgs/opacity-icon-"+e+"-64x64.png"),o.setAttribute("alt","Use this slider to adjust transparency for the "+t.name+" layer"),o.setAttribute("title","Use this slider to adjust transparency for the "+t.name+" layer"),a.appendChild(o),a.onclick=function(e){var a=n.getElementsByClassName("opacity-slider-handle")[0];(0,u.updateLayerOpacity)(t,0),r(t,a,0)},a}function i(e,t){var n=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div");return n.classList.add("opacity-slider-track-overlay"),a.classList.add("opacity-slider-track"),o.classList.add("opacity-slider-handle"),n.appendChild(a),n.appendChild(o),e.active&&r(e,o),c(n,e,t),n}function c(e,t,n){d3.select(e).call(d3.drag().on("start drag",function(){var n=e.getElementsByClassName("opacity-slider-handle")[0],a=s(e);(0,u.updateLayerOpacity)(t,a),r(t,n,a)}).on("end",function(){var n=s(e);ga("send","event",{eventCategory:"opacity slider",eventAction:"change",eventLabel:'{"'+t.name+'": "'+n+'"}',nonInteraction:!1}),(0,l.updateShareUrl)()}))}function s(e){var t=d3.mouse(e)[1];return d.invert(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.setOpacitySliderPosition=r,t.makeOpacitySlider=a;var l=n(25),u=n(23),d=d3.scaleLinear().domain([1,0]).range([0,90]).clamp(!0)},function(e,t){"use strict";function n(e){if(e.image){var t=r(),n=a(e),i=e.link?o(e.link):null;i?(i.appendChild(n),t.appendChild(i)):t.appendChild(n);var c=document.getElementsByClassName(e.location)[0],s=c.firstChild;c.insertBefore(t,s)}}function r(){var e=document.createElement("div");return d3.select(e).classed("project-logo",!0),e}function a(e){var t=document.createElement("img");return t.setAttribute("src",e.image),e.label&&(t.setAttribute("alt",e.label),t.setAttribute("title",e.label)),t}function o(e){var t=document.createElement("a");return t.setAttribute("href",e),t.setAttribute("target","_blank"),t.addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click",eventLabel:"landat logo",nonInteraction:!1})}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){d3.selectAll(".mobile-menu-button").on("click",r)}function r(){var e=d3.select("#wrapper"),t=e.classed("mobile-menu-hidden");e.classed("mobile-menu-hidden",!t),a(t?"closing":"opening")}function a(e){ga("send","event",{eventCategory:"mobile menu",eventAction:"click",eventLabel:"Mobile Menu "+e,nonInteraction:!1})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXhfYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBmMDA2ZDRlMmNiY2MxOTMyNGMwYiIsIndlYnBhY2s6Ly8vLi9qcy9iYXNlLmpzIiwid2VicGFjazovLy8uL2pzL3BhcnNlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvbGVhZmxldENvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ub2RlbnQtcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovLy8uL34vbm9kZW50LXJ1bnRpbWUvem91c2FuLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L34vc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L25vZGVudC1ydW50aW1lL3RoZW5hYmxlRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL34vbG9kYXNoLmRlYm91bmNlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3NlYXJjaEVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvZG9tVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Jlc3VsdExpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2JpbmdQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvcHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2VzcmlQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL29wZW5TdHJlZXRNYXBQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9wYW5lbC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9sYXllci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tYXAuanMiLCJ3ZWJwYWNrOi8vLy4vanMvc2hhcmUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvYmFzZWxheWVyLmpzIiwid2VicGFjazovLy8uL2pzL3BvaS5qcyIsIndlYnBhY2s6Ly8vLi9qcy9ncmFwaC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tYXJrZXIuanMiLCJ3ZWJwYWNrOi8vLy4vanMvdGFicy5qcyIsIndlYnBhY2s6Ly8vLi9qcy9vcGFjaXR5U2xpZGVyLmpzIiwid2VicGFjazovLy8uL2pzL2xvZ28uanMiLCJ3ZWJwYWNrOi8vLy4vanMvbW9iaWxlLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfcGFyc2VyIiwiX3NlYXJjaCIsIl9zZWFyY2gyIiwiX3BhbmVsIiwiX2Jhc2VsYXllciIsIl9ncmFwaCIsIl9wb2kiLCJfdGFicyIsIl9tYXAiLCJfc2hhcmUiLCJfbGF5ZXIiLCJfbG9nbyIsIl9sb2dvMiIsIl9tb2JpbGUiLCJfbW9iaWxlMiIsIkJhc2UiLCJjb25maWciLCJQYXJzZUNvbmZpZyIsImNhbGxiYWNrIiwiU2V0dXBHcmFwaHMiLCJCaW5kVGFiRXZlbnRzIiwiQmluZENvcHlMaW5rRXZlbnRzIiwiZGF0YSIsIkFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZyIsIm1hcCIsIkNyZWF0ZU1hcCIsIkNyZWF0ZUJhc2VMYXllcnMiLCJiYXNlbGF5ZXJzIiwiQ3JlYXRlRGVmYXVsdExheWVycyIsImxheWVycyIsIlNldHVwUGFuZWwiLCJsYXlvdXQiLCJsb2dvIiwidGFiIiwiSGFuZGxlVGFiQ2hhbmdlIiwiZ3JhcGgiLCJIYW5kbGVHcmFwaFRhYkNoYW5nZSIsIkJpbmRHcmFwaEV2ZW50cyIsIkJpbmRVcGRhdGVTaGFyZVVybCIsIlNldHVwUG9pbnRzT2ZJbnRlcmVzdCIsInBvaXMiLCJ1cGRhdGVTaGFyZVVybCIsIndpbmRvdyIsImNvbmZpZ0ZpbGUiLCJHZXRDb25maWciLCJHZXRBamF4T2JqZWN0IiwicmVzcG9uc2VIYW5kbGVyIiwieG1saHR0cCIsIlhNTEh0dHBSZXF1ZXN0IiwiQWN0aXZlWE9iamVjdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJyZXNwb25zZSIsIm9wZW4iLCJzZW5kIiwiY29uc29sZSIsImxvZyIsIkpTT04iLCJwYXJzZSIsImZvcm1hdE1hcCIsImZvcm1hdExheWVycyIsImxheWVyZ3JvdXAiLCJpIiwiZGVmYXVsdE1hcHNlcnZlclVybCIsIm1hcHNlcnZlclVybCIsInByb3AiLCJoYXNPd25Qcm9wZXJ0eSIsImxlbmd0aCIsInNldE1hcHNlcnZlclVybCIsInNldERlZmF1bHRMYXllck9wYWNpdHkiLCJkZWZhdWx0TGF5ZXJPcGFjaXR5IiwibGF5ZXIiLCJvcGFjaXR5IiwidXJsIiwiQ3JlYXRlU2VhcmNoIiwicHJvdmlkZXIiLCJfbGVhZmxldEdlb3NlYXJjaCIsIk9wZW5TdHJlZXRNYXBQcm92aWRlciIsInNlYXJjaENvbnRyb2wiLCJHZW9TZWFyY2hDb250cm9sIiwic2hvd01hcmtlciIsImF1dG9Db21wbGV0ZSIsInNob3dQb3B1cCIsImFkZENvbnRyb2wiLCJzZWFyY2hFbGVtZW50cyIsInNlYXJjaEVsZW1lbnQiLCJlbGVtZW50cyIsIkwiLCJEb21FdmVudCIsIm9uIiwiY29udGFpbmVyIiwiZXYiLCJzdG9wUHJvcGFnYXRpb24iLCJzZWFyY2hFbnRyaWVzIiwiZm9ybSIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJjaGlsZHJlbiIsInRhcmdldCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImdhIiwiZXZlbnRDYXRlZ29yeSIsImV2ZW50QWN0aW9uIiwiZXZlbnRMYWJlbCIsIm5vbkludGVyYWN0aW9uIiwid2hpY2giLCJrZXlDb2RlIiwiX2xlYWZsZXRDb250cm9sIiwiZW51bWVyYWJsZSIsImdldCIsIl9zZWFyY2hFbGVtZW50IiwiX2JpbmdQcm92aWRlciIsIl9lc3JpUHJvdmlkZXIiLCJfZ29vZ2xlUHJvdmlkZXIiLCJfb3BlblN0cmVldE1hcFByb3ZpZGVyIiwiX3Byb3ZpZGVyIiwiTGVhZmxldENvbnRyb2wiLCJDb250cm9sIiwiZXh0ZW5kIiwiRXJyb3IiLCJMQ29udHJvbCIsIl9sZW4iLCJhcmd1bWVudHMiLCJvcHRpb25zIiwiQXJyYXkiLCJfa2V5IiwiRnVuY3Rpb24iLCJwcm90b3R5cGUiLCJiaW5kIiwiYXBwbHkiLCJjb25jYXQiLCJfbm9kZW50UnVudGltZSIsIl9leHRlbmRzIiwiYXNzaWduIiwic291cmNlIiwia2V5IiwiX2xvZGFzaCIsIl9sb2Rhc2gyIiwiX3NlYXJjaEVsZW1lbnQyIiwiX3Jlc3VsdExpc3QiLCJfcmVzdWx0TGlzdDIiLCJfZG9tVXRpbHMiLCJfY29uc3RhbnRzIiwiZGVmYXVsdE9wdGlvbnMiLCJwb3NpdGlvbiIsInN0eWxlIiwibWFya2VyIiwiaWNvbiIsIkljb24iLCJEZWZhdWx0IiwiZHJhZ2dhYmxlIiwibWF4TWFya2VycyIsInJldGFpblpvb21MZXZlbCIsImFuaW1hdGVab29tIiwic2VhcmNoTGFiZWwiLCJub3RGb3VuZE1lc3NhZ2UiLCJtZXNzYWdlSGlkZURlbGF5Iiwiem9vbUxldmVsIiwiY2xhc3NOYW1lcyIsImJ1dHRvbiIsIm1zZ2JveCIsImlucHV0IiwiYXV0b0NvbXBsZXRlRGVsYXkiLCJpbml0aWFsaXplIiwiX3RoaXMiLCJ0aGlzIiwibWFya2VycyIsIkZlYXR1cmVHcm91cCIsIl9vcHRpb25zIiwiaGFuZGxlU3VibWl0IiwicXVlcnkiLCJvblN1Ym1pdCIsIl9zZWFyY2hFbGVtZW50JGVsZW1lbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY3JlYXRlRWxlbWVudCIsInRpdGxlIiwiaHJlZiIsIm9uQ2xpY2siLCJyZXN1bHRMaXN0IiwiaGFuZGxlQ2xpY2siLCJfcmVmIiwicmVzdWx0IiwibGFiZWwiLCJhcHBlbmRDaGlsZCIsImF1dG9TZWFyY2giLCJzZWxlY3RSZXN1bHQiLCJjbGVhclJlc3VsdHMiLCJvbkFkZCIsIl9vcHRpb25zMiIsImFkZFRvIiwicm9vdCIsImdldENvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJvblJlbW92ZSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJfc2VhcmNoRWxlbWVudCRlbGVtZW4yIiwiY29udGFpbnMiLCJyZW1vdmVDbGFzc05hbWUiLCJhZGRDbGFzc05hbWUiLCJmb2N1cyIsIkFSUk9XX0RPV05fS0VZIiwiQVJST1dfVVBfS0VZIiwiaW5jbHVkZXMiLCJsaXN0IiwibWF4IiwiY291bnQiLCJuZXh0IiwiY29kZSIsInNlbGVjdGVkIiwiaWR4IiwiaXRlbSIsInNlbGVjdCIsIkVTQ0FQRV9LRVkiLCJjbGVhciIsIlByb21pc2UiLCIkcmV0dXJuIiwiJGVycm9yIiwicmVzdWx0cyIsIlNQRUNJQUxfS0VZUyIsInNlYXJjaCIsInRoZW4iLCIkYXdhaXRfMSIsInJlbmRlciIsIiRhc3luY2JpbmQiLCIkYXdhaXRfMiIsInNob3dSZXN1bHQiLCJrZXlzIiwiX2xheWVycyIsInJlbW92ZUxheWVyIiwiYWRkTWFya2VyIiwiY2VudGVyTWFwIiwiZmlyZUV2ZW50IiwibG9jYXRpb24iLCJfb3B0aW9uczMiLCJNYXJrZXIiLCJ5IiwieCIsImJpbmRQb3B1cCIsImFkZExheWVyIiwib3BlblBvcHVwIiwiX29wdGlvbnM0IiwicmVzdWx0Qm91bmRzIiwiTGF0TG5nQm91bmRzIiwiYm91bmRzIiwiaXNWYWxpZCIsImdldEJvdW5kcyIsImZpdEJvdW5kcyIsImFuaW1hdGUiLCJzZXRWaWV3IiwiZ2V0Q2VudGVyIiwiZ2V0Wm9vbSIsIl9vcHRpb25zNSIsIiRhc3luY3NwYXduIiwicHJvbWlzZVByb3ZpZGVyIiwic2VsZiIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZ2VuRiIsInJlc29sdmUiLCJyZWplY3QiLCJzdGVwIiwiZm4iLCJhcmciLCJnZW4iLCJkb25lIiwidiIsInRocm93Iiwic3JjIiwidG9TdHJpbmciLCJ0IiwiYXJncyIsIm1hdGNoIiwicmUiLCJteCIsImV4ZWMiLCJwdXNoIiwicmV2ZXJzZSIsImZvckVhY2giLCJzbGljZSIsImluZGV4Iiwic3Vic3RyIiwicmVwbGFjZSIsInpvdXNhbiIsInRoZW5hYmxlIiwiY2F0Y2hlciIsImJvdW5kVGhlbiIsInJlc29sdmVyIiwidHJhbXBvbGluZSIsInMiLCJ1IiwiYiIsInEiLCJ1bmRlZmluZWQiLCJwb3AiLCJyIiwiTGF6eVRoZW5hYmxlIiwiRWFnZXJUaGVuYWJsZSIsIlRoZW5hYmxlIiwiRWFnZXJUaGVuYWJsZUZhY3RvcnkiLCJleCIsInByb2Nlc3MiLCJzZXRJbW1lZGlhdGUiLCJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsInRpY2siLCJab3VzYW4iLCJmdW5jIiwibWUiLCJTVEFURV9GVUxGSUxMRUQiLCJ5cmV0IiwiZXJyIiwiU1RBVEVfUkVKRUNURUQiLCJyZWFzb24iLCJuIiwibmV4dFRpY2siLCJmIiwic2V0VGltZW91dCIsInNvb24iLCJjYWxsUXVldWUiLCJmcSIsImZxU3RhcnQiLCJidWZmZXJTaXplIiwic3BsaWNlIiwic3RhdGUiLCJUeXBlRXJyb3IiLCJmaXJzdCIsInJhIiwicnIiLCJsIiwiY2xpZW50cyIsIm9uRiIsIm9uUiIsImNsaWVudCIsImEiLCJ2YWwiLCJ6IiwidmVyc2lvbiIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImNhY2hlZFNldFRpbWVvdXQiLCJydW5DbGVhclRpbWVvdXQiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpbmluZyIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlIiwicXVldWVJbmRleCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwibGVuIiwicnVuIiwiSXRlbSIsImFycmF5Iiwibm9vcCIsImJyb3dzZXIiLCJlbnYiLCJhcmd2IiwidmVyc2lvbnMiLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJiaW5kaW5nIiwibmFtZSIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJUaW1lb3V0IiwiY2xlYXJGbiIsIl9pZCIsIl9jbGVhckZuIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiY2xvc2UiLCJ1bnJlZiIsInJlZiIsImVucm9sbCIsIm1zZWNzIiwiX2lkbGVUaW1lb3V0SWQiLCJfaWRsZVRpbWVvdXQiLCJ1bmVucm9sbCIsIl91bnJlZkFjdGl2ZSIsImFjdGl2ZSIsIl9vblRpbWVvdXQiLCJjbGVhckltbWVkaWF0ZSIsImdsb2JhbCIsInRhc2siLCJ0YXNrc0J5SGFuZGxlIiwibmV4dEhhbmRsZSIsInJlZ2lzdGVySW1tZWRpYXRlIiwiaGFuZGxlIiwicnVuSWZQcmVzZW50IiwiY3VycmVudGx5UnVubmluZ0FUYXNrIiwiZG9jIiwiZG9jdW1lbnQiLCJhdHRhY2hUbyIsImdldFByb3RvdHlwZU9mIiwicG9zdE1lc3NhZ2UiLCJpbXBvcnRTY3JpcHRzIiwicG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyIsIm9sZE9uTWVzc2FnZSIsIm9ubWVzc2FnZSIsIm1lc3NhZ2VQcmVmaXgiLCJNYXRoIiwicmFuZG9tIiwib25HbG9iYWxNZXNzYWdlIiwiaW5kZXhPZiIsImF0dGFjaEV2ZW50IiwiTWVzc2FnZUNoYW5uZWwiLCJjaGFubmVsIiwicG9ydDEiLCJwb3J0MiIsImh0bWwiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JpcHQiLCJyZW1vdmVDaGlsZCIsImlzVGhlbmFibGUiLCJyZXNvbHV0aW9uIiwiaG93IiwiQ2hhaW5lZCIsIl91bmNoYWluZWQiLCJ0aGVuQ2hhaW4iLCJyZXMiLCJyZWoiLCJjaGFpbiIsIl9yZXNvbHZlciIsImRlYm91bmNlIiwid2FpdCIsImludm9rZUZ1bmMiLCJ0aW1lIiwibGFzdEFyZ3MiLCJ0aGlzQXJnIiwibGFzdFRoaXMiLCJsYXN0SW52b2tlVGltZSIsImxlYWRpbmdFZGdlIiwidGltZXJJZCIsInRpbWVyRXhwaXJlZCIsImxlYWRpbmciLCJyZW1haW5pbmdXYWl0IiwidGltZVNpbmNlTGFzdENhbGwiLCJsYXN0Q2FsbFRpbWUiLCJ0aW1lU2luY2VMYXN0SW52b2tlIiwibWF4aW5nIiwibmF0aXZlTWluIiwibWF4V2FpdCIsInNob3VsZEludm9rZSIsIm5vdyIsInRyYWlsaW5nRWRnZSIsInRyYWlsaW5nIiwiY2FuY2VsIiwiZmx1c2giLCJkZWJvdW5jZWQiLCJpc0ludm9raW5nIiwiRlVOQ19FUlJPUl9URVhUIiwidG9OdW1iZXIiLCJpc09iamVjdCIsIm5hdGl2ZU1heCIsInR5cGUiLCJpc09iamVjdExpa2UiLCJpc1N5bWJvbCIsIm9iamVjdFRvU3RyaW5nIiwic3ltYm9sVGFnIiwiTkFOIiwib3RoZXIiLCJ2YWx1ZU9mIiwicmVUcmltIiwiaXNCaW5hcnkiLCJyZUlzQmluYXJ5IiwidGVzdCIsInJlSXNPY3RhbCIsImZyZWVQYXJzZUludCIsInJlSXNCYWRIZXgiLCJwYXJzZUludCIsImZyZWVHbG9iYWwiLCJmcmVlU2VsZiIsIm9iamVjdFByb3RvIiwibWluIiwiRGF0ZSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiU2VhcmNoRWxlbWVudCIsIl9yZWYkaGFuZGxlU3VibWl0IiwiX3JlZiRzZWFyY2hMYWJlbCIsIl9yZWYkY2xhc3NOYW1lcyIsImpvaW4iLCJwbGFjZWhvbGRlciIsIm9uSW5wdXQiLCJvbktleVVwIiwib25LZXlQcmVzcyIsIm9uRm9jdXMiLCJvbkJsdXIiLCJfZWxlbWVudHMiLCJoYXNFcnJvciIsIl9lbGVtZW50czIiLCJib2R5IiwiYmx1ciIsIkVOVEVSX0tFWSIsImVsZW1lbnQiLCJwYXJlbnQiLCJlbCIsImNsYXNzTmFtZSIsImNyZWF0ZVNjcmlwdEVsZW1lbnQiLCJjYiIsInNldEF0dHJpYnV0ZSIsImpzb24iLCJhZGQiLCJBUlJPV19MRUZUX0tFWSIsIkFSUk9XX1JJR0hUX0tFWSIsImN4IiwiY2xhc3NuYW1lcyIsInRyaW0iLCJSZXN1bHRMaXN0IiwiX3JlZiRoYW5kbGVDbGljayIsIl9pbml0aWFsaXNlUHJvcHMiLCJyZXN1bHRJdGVtIiwiY2hpbGQiLCJjbG9uZU5vZGUiLCJpbm5lckhUTUwiLCJmcm9tIiwibGFzdENoaWxkIiwiX3JlZjIiLCJwYXJlbnROb2RlIiwiaGFzQXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX3Byb3ZpZGVyMiIsIlByb3ZpZGVyIiwiX0Jhc2VQcm92aWRlciIsInByb3RvY29sIiwianNvbnAiLCJwYXJhbXMiLCJnZXRQYXJhbVN0cmluZyIsInJlc291cmNlU2V0cyIsInJlc291cmNlcyIsInBvaW50IiwiY29vcmRpbmF0ZXMiLCJhZGRyZXNzIiwiZm9ybWF0dGVkQWRkcmVzcyIsImJib3giLCJyYXciLCJfcmVmMyIsImVuZHBvaW50IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVxdWVzdCIsImZldGNoIiwidGV4dCIsImxvY2F0aW9ucyIsImZlYXR1cmUiLCJnZW9tZXRyeSIsImV4dGVudCIsInltaW4iLCJ4bWluIiwieW1heCIsInhtYXgiLCJwYXJhbVN0cmluZyIsImxuZyIsImxhdCIsImZvcm1hdHRlZF9hZGRyZXNzIiwidmlld3BvcnQiLCJzb3V0aHdlc3QiLCJub3J0aGVhc3QiLCJmb3JtYXQiLCJsb24iLCJkaXNwbGF5X25hbWUiLCJwYXJzZUZsb2F0IiwiYm91bmRpbmdib3giLCJHZXRBY3RpdmVMYXllckdyb3VwcyIsImxheWVyR3JvdXBMYXlvdXQiLCJmaWx0ZXIiLCJsYXllckdyb3VwIiwibWFrZUxheWVyRWxlbXMiLCJtYWtlTGF5ZXJHcm91cHMiLCJtYWtlUGFuZWxEcmFnZ2FibGUiLCJzZXRQYW5lbFNjcm9sbEhhbmRsZXIiLCJicm93c2VySXNJbnRlcm5ldEV4cGxvcmVyIiwidWEiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJnZXRFbGVtZW50QnlJZCIsIm9uc2Nyb2xsIiwidXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCIsIm92ZXJsYXkiLCJkMyIsImRyYWciLCJwYW5lbERyYWdFdmVudEhhbmRsZXIiLCJ1cGRhdGVQYW5lbFdpZHRoIiwibmV3SGVpZ2h0IiwicGFuZWwiLCJwYW5lbE9mZnNldEhlaWdodCIsInByb3BlcnR5IiwicGFuZWxEcmFnT3ZlcmxheSIsImhlYWRlciIsImNsYXNzZWQiLCJncmFwaExpc3QiLCJzY3JvbGxIZWlnaHQiLCJsYXllckxpc3QiLCJoZWlnaHQiLCJwYW5lbE1pbldpZHRoIiwicGFuZWxDbGllbnRXaWR0aCIsIndyYXBwZXIiLCJ3cmFwcGVyV2lkdGgiLCJjbGllbnRXaWR0aCIsIm1hcFdyYXBwZXIiLCJtb3VzZVgiLCJzb3VyY2VFdmVudCIsInhEZWx0YSIsIm5ld1BhbmVsV2lkdGgiLCJwYWRkaW5nUmlnaHQiLCJzZWxlY3RBbGwiLCJlbnRlciIsImFwcGVuZCIsImF0dHIiLCJlYWNoIiwibGF5ZXJHcm91cHMiLCJsYXllckRpdiIsIm1ha2VDaGVja2JveCIsIm1ha2VMYWJlbCIsIm1ha2VEZXNjcmlwdGlvbiIsIm5vZGUiLCJtYWtlTGF5ZXJUb29scyIsInRvZ2dsZUxheWVyIiwic2xpZGVySGFuZGxlIiwiX29wYWNpdHlTbGlkZXIiLCJzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb24iLCJvcGFjaXRpeSIsImluZm8iLCJsYXllclRvb2xzRGl2Iiwib3BhY2l0eVNsaWRlciIsIm1ha2VPcGFjaXR5U2xpZGVyIiwibGVnZW5kIiwibWFrZUxlZ2VuZCIsImxheWVyVG9vbHNXcmFwcGVyIiwibGVnZW5kV3JhcHBlciIsImxlZ2VuZEltZyIsIkdldEN1cnJlbnRMYXllcnMiLCJfY3VycmVudF9sYXllcnMiLCJkZWZhdWx0TGF5ZXJzIiwiaiIsImRlZmF1bHRMYXllciIsImZvdW5kTGF5ZXIiLCJlbmFibGVMYXllciIsImRpc2FibGVMYXllciIsIkdldE1hcCIsIm1hcExheWVyIiwibWFrZVdtc1RpbGVMYXllciIsImFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIiLCJtb3ZlT3ZlcmxheUxheWVyc1RvVG9wIiwiX2N1cnJlbnRfbGF5ZXJzX29iamVjdHMiLCJicmluZ1RvRnJvbnQiLCJoYXNMYXllciIsInJlbW92ZUxheWVyRnJvbUludGVybmFsVHJhY2tlciIsImxvYyIsInVwZGF0ZUxheWVyT3BhY2l0eSIsIm5ld09wYWNpdHkiLCJzZXRPcGFjaXR5IiwidGlsZUxheWVyIiwid21zIiwidHJhbnNwYXJlbnQiLCJjcnMiLCJDUlMiLCJFUFNHOTAwOTEzIiwidGlsZVNpemUiLCJtYXBDb25maWciLCJzY3JvbGxXaGVlbFpvb20iLCJpbml0aWFsQ2VudGVyIiwiY2VudGVyIiwiaW5pdGlhbFpvb20iLCJ6b29tIiwiY29udHJvbCIsImF0dHJpYnV0aW9uIiwic3RyaW5naWZ5Iiwic2V0U2hhcmVVcmwiLCJtYWtlU2hhcmVVcmwiLCJtYWtlQ2VudGVyU3RyaW5nIiwibWFrZVpvb21TdHJpbmciLCJtYWtlTGF5ZXJTdHJpbmciLCJtYWtlTGF5ZXJHcm91cHNTdHJpbmciLCJtYWtlQmFzZUxheWVyU3RyaW5nIiwibWFrZVBvaW50c09mSW50ZXJlc3RTdHJpbmciLCJtYWtlQWN0aXZlVGFiU3RyaW5nIiwibWFrZUFjdGl2ZUdyYXBoVGFiU3RyaW5nIiwic2V0Q29weUxpbmtVcmwiLCJzZXRTb2NpYWxVcmxzIiwic2hhcmUiLCJwYXJzZVNoYXJlVXJsIiwiYWRkTGF5ZXJTZXR0aW5nc1RvQ29uZmlnIiwiYWRkQmFzZUxheWVyU2V0dGluZ3NUb0NvbmZpZyIsImFkZFBvaW50c09mSW50ZXJlc3RUb0NvbmZpZyIsImFkZExheWVyR3JvdXBTZXR0aW5nc1RvQ29uZmlnIiwiaGlzdG9yeSIsInJlcGxhY2VTdGF0ZSIsImhhbmRsZUJvZHlDbGljayIsImhhbmRsZVNoYXJlTGlua0J1dHRvbkNsaWNrIiwiaGFuZGxlU2hhcmVMaW5rVXJsQ2xpY2siLCJoYW5kbGVTaGFyZUxpbmtDbG9zZUJ1dHRvbkNsaWNrIiwibm9kZVBhdGgiLCJnZXREb21QYXRoIiwidG9DbG9zZVBvcHVwIiwiaGFuZGxlQ29weUxpbmtDbG9zZSIsInBhdGgiLCJzaGFyZVBvcHVwIiwiaGFuZGxlQ29weUxpbmtPcGVuIiwic2VsZWN0Q29weUxpbmtVcmwiLCJ0b2dnbGUiLCJzaGFyZUlucHV0Iiwic2V0U2VsZWN0aW9uUmFuZ2UiLCJzb2NpYWxMaW5rIiwibmV3VXJsIiwibWFuZ2xlUGFyYW1TdHJpbmciLCJzb2NpYWxMaW5rcyIsIm9wYWNpdHlWYWxzIiwiY3VycmVudExheWVycyIsImVhY2hMYXllciIsImN1cnJlbnRMYXllciIsIkJBU0VfTEFZRVJfVFlQRSIsImQiLCJHZXRBbGxQb2ludHNPZkludGVyZXN0IiwicG9pU3RyaW5nIiwicG9pIiwicGxvdHMiLCJnZXRQYXJhbXNBcnJheSIsIm1ha2VLZXllZFBhcmFtc09iamVjdCIsImZvcm1hdFBhcmFtcyIsInN1YnN0cmluZyIsInVubWFuZ2xlUGFyYW1TdHJpbmciLCJzcGxpdCIsInBhcmFtc0FyciIsInBhcmFtUGFpciIsInBhcnNlZFBhcmFtcyIsImZvcm1hdENlbnRlclBhcmFtIiwiZm9ybWF0TGF5ZXJQYXJhbSIsImZvcm1hdEJhc2VMYXllclBhcmFtIiwiZm9ybWF0UG9pbnRzT2ZJbnRlcmVzdFBhcmFtIiwiZm9ybWF0TGF5ZXJHcm91cHNQYXJhbSIsImxheWVySWQiLCJmb3JtYXR0ZWRMYXllcnMiLCJlbmFibGVkTGF5ZXJzIiwic3RyIiwiY3JlYXRlUE9JIiwibGF5ZXJHcm91cFNldHRpbmdzIiwiYWN0aXZlTGF5ZXJHcm91cElkcyIsInNoYXJlTGF5ZXJTZXR0aW5ncyIsImVuYWJsZWRMYXllciIsInNoYXJlQmFzZUxheWVyU2V0dGluZ3MiLCJiYXNlbGF5ZXIiLCJsYXllckNvbmZpZyIsIl9iYXNlbGF5ZXJzIiwiYmFzZUxheWVyIiwiY3JlYXRlQmFzZUxheWVyIiwiY3JlYXRlQmFzZUxheWVyVUkiLCJiYXNlVUkiLCJiYXNlV3JhcHBlciIsImJhc2VJbWciLCJiYXNlTGFiZWwiLCJpbWFnZSIsInRleHRDb250ZW50IiwiaGFuZGxlQmFzZUNsaWNrIiwibGF5ZXJpZCIsInRvZ2dsZUFjdGl2ZUJhc2VVSSIsInJlbW92ZUN1cnJlbnRCYXNlTGF5ZXIiLCJhZGROZXdCYXNlTGF5ZXJUb01hcCIsImJhc2VVSUVsZW0iLCJicmluZ1RvQmFjayIsIm1ha2VCYXNlTGF5ZXJPcHRpb25zIiwic3ViZG9tYWlucyIsImhhbmRsZU1hcENsaWNrIiwibGF0bG5nIiwiQWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyIiwiU2V0dXBQb2ludE9mSW50ZXJlc3RVSSIsImNyZWF0ZUdyYXBoUmVtb3ZlciIsImRpdiIsImVsZW0iLCJjcmVhdGVHcmFwaFJlbW92ZXJFbGVtIiwiUmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXIiLCJSZW1vdmVQb2ludE9mSW50ZXJlc3RVSSIsImlubmVyVGV4dCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsIl9wb2ludHNfb2ZfaW50ZXJlc3QiLCJuZXdQb2lzIiwiQWRkTXVsdGlwbGVQb2ludHNPZkludGVyZXN0IiwicG9pVG9SZW1vdmUiLCJjcmVhdGVHcmFwaERpdiIsIl9tYXJrZXIiLCJjcmVhdGVNYXJrZXIiLCJncmFwaERpdiIsInNldEljb24iLCJnZXRJY29uIiwiaGFuZGxlTWFya2VyTW91c2VFdmVudCIsIm9yaWdpbmFsRXZlbnQiLCJzY3JvbGxUb1BvaW50T2ZJbnRlcmVzdEdyYXBoIiwidHJpZ2dlckdyYXBoQW5pbWF0aW9uIiwic2Nyb2xsVG9wIiwib2Zmc2V0VG9wIiwiaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2siLCJleHRlbmREYXRlTW9kdWxlIiwidGlwIiwiaXNMZWFwWWVhciIsInllYXIiLCJnZXRGdWxsWWVhciIsImdldERPWSIsImRheUNvdW50IiwibW4iLCJnZXRNb250aCIsImRuIiwiZ2V0RGF0ZSIsImRheU9mWWVhciIsImhhbmRsZUdyYXBoRGF0YVJlc3BvbnNlIiwiZHJhd0dyYXBoIiwiZ2V0RGF0YSIsIm9SZXEiLCJzcGxpdERhdGEiLCJyZXByb2Nlc3NEYXRhIiwib3JpZ2RhdGEiLCJrZXlzVG9CZURlbGV0ZWQiLCJkYXRhRm9yQmFzZWxpbmUiLCJtZWFuIiwiY29tcHV0ZUF2ZXJhZ2UiLCJhcnIiLCJzdW0iLCJhY3RpdmVUeXBlIiwiZ3JhcGhUeXBlIiwiaXNHcmFwaExpc3RFbXB0eSIsIm9sZEFjdGl2ZUdyYXBoRWxlbUhlaWdodCIsIm9sZEFjdGl2ZUdyYXBoSW5mb0hlaWdodCIsInJpZ2h0UGFuZWxTY3JvbGxUb3AiLCJkaXNhYmxlQWN0aXZlR3JhcGhUYWIiLCJlbmFibGVHcmFwaFRhYiIsImFkanVzdFNjcm9sbFBvc2l0aW9uIiwib2xkR3JhcGhJbmZvSGVpZ2h0Iiwib2xkR3JhcGhFbGVtSGVpZ2h0Iiwib2xkUmlnaHRQYW5lbFNjcm9sbFRvcCIsIm5ld0dyYXBoSW5mb0hlaWdodCIsIm5ld0dyYXBoRWxlbUhlaWdodCIsIm5ld0dyYXBoRWxlbUhlaWdodFNjYWxlIiwibmV3UmlnaHRQYW5lbFNjcm9sbFRvcCIsImFjdGl2ZUVsZW0iLCJhY3RpdmVDbGFzcyIsImxhdFNob3J0Iiwicm91bmRGbG9hdCIsImxuZ1Nob3J0Iiwiem9vbVRvTWFya2VyQnV0dG9uIiwibWFrZVpvb21Ub01hcE1hcmtlckJ1dHRvbiIsImNvbnRlbnQiLCJjcmVhdGVUZXh0Tm9kZSIsImNvbnRlbnREaXYiLCJsb2FkaW5nRGl2Iiwib25jbGljayIsInBhblRvIiwicmVwcm9jZXNzZWREYXRhIiwibWFrZVVwRG93bkxpbmVHcmFwaCIsIm1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMiLCJkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMiLCJudW1iZXIiLCJkZWNpbWFsUGxhY2VzIiwicm91bmQiLCJwb3ciLCJtYXJnaW4iLCJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImxlZnQiLCJ3aWR0aCIsInNjYWxlVGltZSIsInJhbmdlIiwiZG9tYWluIiwicGFyc2VEYXRlIiwic2NhbGVMaW5lYXIiLCJ4QXhpcyIsImF4aXNCb3R0b20iLCJ0aWNrcyIsInRpY2tGb3JtYXQiLCJ5QXhpcyIsImF4aXNMZWZ0IiwidmFsdWVsaW5lIiwibGluZSIsInN2ZyIsImRyYXdMaW5lYXJQYXRoIiwiZHJhd0xpbmVhclBvaW50cyIsImZvcm1hdE1vbnRoVGljayIsIk1PTlRIX0xBQkVMUyIsImNoYXJ0cyIsImF2ZXJhZ2VzIiwiYmFzZWxpbmUiLCJ0aWNrVmFsdWVzIiwiaXNBcnJheSIsInBhcnNlSnVsaWFuRGF5IiwicGxvdCIsInBvaW50cyIsImlucHV0d3JhcHBlciIsImNyZWF0ZUNoZWNrYm94IiwicmFkaXVzIiwiZmluZFBvbGFyQ2VudGVyIiwidGhyZXNob2xkcyIsImZpbmRQb2xhclRocmVzaG9sZHMiLCJyYWRpYWxMaW5lIiwiYW5nbGUiLCJQSSIsImdyIiwiZ2FfYSIsInRocmVzaG9sZEVsZW0iLCJkYXkiLCJjZW50ZXJEYXkiLCJkcmF3UG9sYXJQYXRoIiwic2hvdyIsImhpZGUiLCJ0aHJlc2hvbGRDaGVja2JveCIsImNoZWNrZWQiLCJvZmZvbiIsImFkZEtleVRvUE9JIiwicmVtb3ZlS2V5RnJvbVBPSSIsImRpc3BhdGNoR3JhcGhDaGVja2JveENsaWNrIiwidG90YWxTdW0iLCJpbmNvbXBsZXRlWWVhcnMiLCJhYnMiLCJjaGVja0RpZmYiLCJsZWZ0QXJlYSIsInJpZ2h0QXJlYSIsImsiLCJjb3VudGVyIiwiYXJlYURpZmYiLCJhcmVhSW5kZXgiLCJhdmdzIiwiZmlyc3RSYWRpdXMiLCJzZWNvbmRSYWRpdXMiLCJtaWRwb2ludCIsImZpcnN0RGlmZiIsInN0YXJ0RGF5Iiwic3RhcnRJbmRleCIsImZsb29yIiwiZmlmdGVlbkluZGV4IiwiZWlnaHR5SW5kZXgiLCJmaWZ0ZWVuVGhyZXNob2xkIiwiZWlnaHR5VGhyZXNob2xkIiwiZmlmdGVlbkluZGV4Rm91bmQiLCJlaWdodHlJbmRleEZvdW5kIiwiY2lyY2xlQ2VudGVyIiwiZGF0dW0iLCJwdWxsRGlzdGluY3RDb2xvciIsImhhbmRsZVBvaW50TW91c2VvdmVyIiwiaGFuZGxlUG9pbnRNb3VzZW91dCIsInRpcFN0cmluZyIsImZvcm1hdERhdGUiLCJjaGVja2JveFdyYXBwZXIiLCJuZXdZZWFyIiwiaGFuZGxlQ2hlY2tib3hFbmFibGUiLCJoYW5kbGVDaGVja2JveERpc2FibGUiLCJoYW5kbGVDaGVja2JveFN5bmMiLCJjaGVja2VkU3RhdHVzIiwiZGlzcGF0Y2giLCJjb2xvclJhbXAiLCJkYXRlIiwibW9udGgiLCJmb3JtYXRNb250aCIsIm9yZGluYWxfc3VmZml4X29mIiwiRk9STUFUVEVEX01PTlRIX0xBQkVMUyIsIjAiLCIxIiwiMiIsIjMiLCI0IiwiNSIsIjYiLCI3IiwiOCIsIjkiLCIxMCIsIjExIiwiZ3JhcGhJY29uIiwiaG92ZXJJY29uIiwiYmFzZUljb24iLCJpY29uVXJsIiwic2hhZG93VXJsIiwiaWNvblNpemUiLCJpY29uQW5jaG9yIiwicG9wdXBBbmNob3IiLCJzaGFkb3dTaXplIiwiaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2siLCJHZXRBY3RpdmVUYWIiLCJuZXdDbGFzcyIsImRpc2FibGVBY3RpdmVUYWIiLCJlbmFibGVUYWIiLCJ0b2dnbGVNYXBQYWRkaW5nIiwicmVzZXRQYW5lbFdpZHRoIiwib2Zmc2V0V2lkdGgiLCJvcGFjaXR5U2NhbGUiLCJsYXllck9wYWNpdHkiLCJzbGlkZXJUcmFja092ZXJsYXkiLCJtYWtlU2xpZGVyVHJhY2siLCJpY29uV3JhcHBlckNsb3NlZCIsIm1ha2VPcGFjaXR5SWNvbldyYXBwZXIiLCJ0cmFjayIsInNldERyYWdFdmVudExpc3RlbmVyIiwiY2FsY09wYWNpdHlGcm9tTW91c2VQb3MiLCJ5UG9zIiwibW91c2UiLCJpbnZlcnQiLCJjbGFtcCIsIkNyZWF0ZUxvZ28iLCJsb2dvZGF0YSIsImxvZ29XcmFwcGVyIiwiY3JlYXRlTG9nb1dyYXBwZXIiLCJsb2dvSW1hZ2UiLCJjcmVhdGVMb2dvSW1hZ2UiLCJsb2dvTGluayIsImxpbmsiLCJjcmVhdGVMb2dvTGluayIsImluc2VydEVsZW1lbnQiLCJleGlzdGluZ0NoaWxkIiwiZmlyc3RDaGlsZCIsImluc2VydEJlZm9yZSIsIkJpbmRNb2JpbGVNZW51RXZlbnRzIiwiaGFuZGxlTW9iaWxlTWVudUJ0bkNsaWNrIiwic3RhdHVzIiwiZGlzcGF0Y2hNb2JpbGVNZW51QnRuQ2xpY2tBbmFseXRpY3MiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFG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eFEsR0FBaUIsS0FBTnlSLEVBQ0pqQixFQUNWLEtBQ01BLEVBQ1YsSzdCdTRGQWg2QixPQUFPQyxlQUFlYixFQUFTLGNBQzNCYyxPQUFPLElBRVhkLEU2Qjl5SGVrQyxjN0IreUhmbEMsRTZCOXFIZW1ELHVCN0IrcUhmbkQsRTZCbG9IZXF6QixnQkFyTDJCLElBQUFueUIsR0FBQXJCLEVBQUEsSUFDZDJCLEVBQUEzQixFQUFBLElBQ1IwQixFQUFBMUIsRUFBQSxJQUNPa0IsRUFBQWxCLEVBQUEsR0FFeEJzMEIsS0F3NkJBb0YsRzdCaXRIQzRFLEU2Qi9zSEQsTTdCZ3RIQ0MsRTZCL3NIRCxNN0JndEhDQyxFNkIvc0hELE03Qmd0SENDLEU2Qi9zSEQsTTdCZ3RIQ0MsRTZCL3NIRCxNN0JndEhDQyxFNkIvc0hELE03Qmd0SENDLEU2Qi9zSEQsTTdCZ3RIQ0MsRTZCL3NIRCxNN0JndEhDQyxFNkIvc0hELE03Qmd0SENDLEU2Qi9zSEQsTTdCZ3RIQ0MsRzZCL3NIRCxNN0JndEhDQyxHNkJodEhHLE9BR0paLEc3Qml0SENDLEU2Qi9zSEQsTzdCZ3RIQ0MsRTZCL3NIRCxPN0JndEhDQyxFNkIvc0hELE83Qmd0SENDLEU2Qi9zSEQsTzdCZ3RIQ0MsRTZCL3NIRCxNN0JndEhDQyxFNkIvc0hELE83Qmd0SENDLEU2Qi9zSEQsTzdCZ3RIQ0MsRTZCL3NIRCxPN0JndEhDQyxFNkIvc0hELE83Qmd0SENDLEU2Qi9zSEQsTzdCZ3RIQ0MsRzZCL3NIRCxPN0JndEhDQyxHNkJodEhHLFM3QnF0SEYsU0FBUzcrQixFQUFRRCxHQUV0QixZOEIvcEpNLFNBQUF1ekIsR0FBdUJwTyxFQUFLRCxHOUJ1cUo5QixNOEJ0cUpNNWUsR0FBRTJELFFBQVFrYixFQUFLRCxJQUFPaGIsS0FDaEM2MEIsSUFFTSxRQUFBckwsR0FBa0J4VixHOUJ1cUpwQixNOEJ0cUplLFVBQVRBLEVBQW1COGdCLEVBQzdCRCxFOUIycEpBbitCLE9BQU9DLGVBQWViLEVBQVMsY0FDM0JjLE9BQU8sSUFFWGQsRThCcHFKZXV6QixlOUJxcUpmdnpCLEU4Qmpx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R2lDMzRKR0QsR0FBV2huQixTQUFTck8sY0FDeEIsSWpDeTVKQyxPQWRBcTFCLEdpQzM0SlE1ZixhQUFhLE9BQ3RCNmYsR2pDMjRKQ0QsRWlDMzRKUTVmLGFBQWEsU0FFdEIsVWpDMjRKQzRmLEVpQzM0SlF2MUIsaUJBQWlCLFFBQVMsV2pDODRKOUJ6RSxHaUMzNEpBLE9BQVEsU2pDNDRKSkMsY2lDMTRKTCxNakMyNEpLQyxZaUMxNEpMLFFqQzI0SktDLFdpQzE0SkwsY2pDMjRKS0MsZ0JpQ3o0SlIsTUFHSjQ1QixFakMwMEpBdmdDLE9BQU9DLGVBQWViLEVBQVMsY0FDM0JjLE9BQU8sSUFFWGQsRUFBUVcsUUFBVWtnQyxHQWtFYixTQUFTNWdDLEVBQVFELEdBRXRCLFlrQzk4SmMsU0FBUzBoQyxLbENxOUpuQjdhLEdrQ3A5SkUwQixVQUFVLHVCQUF1Qi9oQixHQUFHLFFBQzFDbTdCLEdBRUQsUUFBU0EsS2xDcTlKSixHa0NwOUpHN1osR0FBVWpCLEdBQUd6WSxPQUNqQixZQUFJd3pCLEVBQVM5WixFQUFRUCxRQUNyQixxQmxDbzlKQ08sR2tDcDlKT1AsUUFBUSxzQkFDaEJxYSxHbENvOUpDQyxFa0NwOUpvQ0QsRUFDeEMsVUFEaUQsV0FHbEQsUUFBU0MsR0FBcUNELEdsQ3E5SnpDejZCLEdrQ3A5SkUsT0FBUSxTbENxOUpOQyxja0NuOUpELGNsQ285SkNDLFlrQ245SkQsUWxDbzlKQ0MsV2tDcDlKVyxlQUNaczZCLEVsQ285SkNyNkIsZ0JrQ2w5SlIsSWxDODdKQTNHLE9BQU9DLGVBQWViLEVBQVMsY0FDM0JjLE9BQU8sSUFFWGQsRUFBUVcsUUFBVStnQyxHQXVCYixTQUFTemhDLEVBQVFEIiwiZmlsZSI6ImluZGV4X2J1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9wYXJzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9zZWFyY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9zZWFyY2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoKTtcblx0XG5cdHZhciBfcGFuZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0XG5cdHZhciBfYmFzZWxheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdFxuXHR2YXIgX2dyYXBoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdFxuXHR2YXIgX3BvaSA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHRcblx0dmFyIF90YWJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cdFxuXHR2YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIF9sYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0dmFyIF9sb2dvID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdFxuXHR2YXIgX2xvZ28yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbG9nbyk7XG5cdFxuXHR2YXIgX21vYmlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuXHRcblx0dmFyIF9tb2JpbGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbW9iaWxlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIgY3NzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cdFxuXHQvLyBEb2VzIG5vdCByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcblx0dmFyIEJhc2UgPSBmdW5jdGlvbiBCYXNlKGNvbmZpZykge1xuXHQgICAgKDAsIF9wYXJzZXIuUGFyc2VDb25maWcpKGNvbmZpZywgY2FsbGJhY2spO1xuXHQgICAgKDAsIF9ncmFwaC5TZXR1cEdyYXBocykoKTtcblx0ICAgICgwLCBfdGFicy5CaW5kVGFiRXZlbnRzKSgpO1xuXHQgICAgKDAsIF9zaGFyZS5CaW5kQ29weUxpbmtFdmVudHMpKCk7XG5cdCAgICAoMCwgX21vYmlsZTIuZGVmYXVsdCkoKTtcblx0fTtcblx0XG5cdC8vIERvZXMgcmVseSBvbiBtYXAgb2JqZWN0IG9yIGNvbmZpZyBmaWxlXG5cdHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uIGNhbGxiYWNrKGRhdGEpIHtcblx0ICAgICgwLCBfc2hhcmUuQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnKShkYXRhKTtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5DcmVhdGVNYXApKGRhdGEubWFwKTtcblx0ICAgICgwLCBfYmFzZWxheWVyLkNyZWF0ZUJhc2VMYXllcnMpKG1hcCwgZGF0YS5iYXNlbGF5ZXJzKTtcblx0ICAgICgwLCBfbGF5ZXIuQ3JlYXRlRGVmYXVsdExheWVycykoZGF0YS5sYXllcnMsIGRhdGFbXCJhY3RpdmUtbGF5ZXJzXCJdKTtcblx0ICAgICgwLCBfcGFuZWwuU2V0dXBQYW5lbCkoZGF0YS5sYXllcnMsIGRhdGEubGF5b3V0KTtcblx0ICAgICgwLCBfc2VhcmNoMi5kZWZhdWx0KShtYXApO1xuXHQgICAgKDAsIF9sb2dvMi5kZWZhdWx0KShkYXRhLmxvZ28pO1xuXHQgICAgaWYgKGRhdGEudGFiKSAoMCwgX3RhYnMuSGFuZGxlVGFiQ2hhbmdlKShkYXRhLnRhYik7XG5cdCAgICBpZiAoZGF0YS5ncmFwaCkgKDAsIF9ncmFwaC5IYW5kbGVHcmFwaFRhYkNoYW5nZSkoZGF0YS5ncmFwaCk7XG5cdCAgICAoMCwgX3BvaS5CaW5kR3JhcGhFdmVudHMpKG1hcCk7XG5cdCAgICAoMCwgX3NoYXJlLkJpbmRVcGRhdGVTaGFyZVVybCkobWFwKTtcblx0ICAgICgwLCBfcG9pLlNldHVwUG9pbnRzT2ZJbnRlcmVzdCkobWFwLCBkYXRhLnBvaXMpO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fTtcblx0XG5cdHdpbmRvdy5CYXNlID0gQmFzZTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHsgQmFzZTogQmFzZSB9O1xuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLlBhcnNlQ29uZmlnID0gUGFyc2VDb25maWc7XG5cdGV4cG9ydHMuR2V0QWpheE9iamVjdCA9IEdldEFqYXhPYmplY3Q7XG5cdC8qKlxuXHQgKiBQYXJzZXMgYSBjb25maWcgZmlsZS4gU2luY2UgdGhlIHByb2Nlc3MgdG8gZ2V0IGV4dGVybmFsIGZpbGVzXG5cdCAqIHVzZXMgQUpBWCB5b3UgbmVlZCB0byBwYXNzIGEgY2FsbGJhY2sgdG8gaGFuZGxlIHRoZSBuZXh0IHN0ZXBzXG5cdCAqIG9mIHVzaW5nIHRoZSBjb25maWcgZmlsZSwgc2luY2Ugd2UgZG8gbm90IGtub3cgaG93IGxvbmcgaXRcblx0ICogd2lsbCB0YWtlIHRvIGdyYWIgdGhlIGZpbGUuXG5cdCAqL1xuXHRmdW5jdGlvbiBQYXJzZUNvbmZpZyhjb25maWdGaWxlLCBjYWxsYmFjaykge1xuXHQgICAgR2V0Q29uZmlnKGNvbmZpZ0ZpbGUsIGNhbGxiYWNrKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gR2V0QWpheE9iamVjdChyZXNwb25zZUhhbmRsZXIpIHtcblx0ICAgIHZhciB4bWxodHRwO1xuXHQgICAgaWYgKCF3aW5kb3cuWE1MSHR0cFJlcXVlc3QgJiYgd2luZG93LkFjdGl2ZVhPYmplY3QpIHtcblx0ICAgICAgICB4bWxodHRwID0gbmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KFwiTVNYTUwyLlhNTEhUVFAuMy4wXCIpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICB4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdCAgICB9XG5cdCAgICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoeG1saHR0cC5yZWFkeVN0YXRlID09PSA0KSB7XG5cdCAgICAgICAgICAgIHJlc3BvbnNlSGFuZGxlcih4bWxodHRwLnJlc3BvbnNlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIHhtbGh0dHA7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEdldENvbmZpZyhjb25maWdGaWxlLCBjYWxsYmFjaykge1xuXHQgICAgdmFyIHhtbGh0dHAgPSBHZXRBamF4T2JqZWN0KGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHQgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2VIYW5kbGVyKHJlc3BvbnNlKTtcblx0ICAgICAgICBjYWxsYmFjayhkYXRhKTtcblx0ICAgIH0pO1xuXHQgICAgeG1saHR0cC5vcGVuKFwiR0VUXCIsIGNvbmZpZ0ZpbGUsIHRydWUpO1xuXHQgICAgeG1saHR0cC5zZW5kKCk7XG5cdCAgICBjb25zb2xlLmxvZyhcImhpXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZXNwb25zZUhhbmRsZXIocmVzcG9uc2UpIHtcblx0ICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXNwb25zZSk7XG5cdCAgICBmb3JtYXRNYXAocmVzcG9uc2UpO1xuXHQgICAgZm9ybWF0TGF5ZXJzKHJlc3BvbnNlKTtcblx0ICAgIHJldHVybiByZXNwb25zZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0TWFwKGRhdGEpIHtcblx0ICAgIGlmICghZGF0YS5tYXApIGRhdGEubWFwID0ge307XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdExheWVycyhkYXRhKSB7XG5cdCAgICB2YXIgbGF5ZXJzID0gZGF0YS5sYXllcnM7XG5cdCAgICB2YXIgZGVmYXVsdE1hcHNlcnZlclVybCA9IGRhdGEubWFwc2VydmVyVXJsO1xuXHQgICAgdmFyIGRlZmF1bHRFbmFibGVkTGF5ZXJzID0gZGF0YVtcImFjdGl2ZS1sYXllcnNcIl07XG5cdCAgICB2YXIgbGF5ZXJncm91cDtcblx0ICAgIHZhciBpO1xuXHRcblx0ICAgIGZvciAodmFyIHByb3AgaW4gbGF5ZXJzKSB7XG5cdCAgICAgICAgaWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcblx0ICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuXHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsYXllcmdyb3VwLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIHNldE1hcHNlcnZlclVybChsYXllcmdyb3VwW2ldLCBkZWZhdWx0TWFwc2VydmVyVXJsKTtcblx0ICAgICAgICAgICAgc2V0RGVmYXVsdExheWVyT3BhY2l0eShsYXllcmdyb3VwW2ldLCBkYXRhLmRlZmF1bHRMYXllck9wYWNpdHkpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0RGVmYXVsdExheWVyT3BhY2l0eShsYXllciwgb3BhY2l0eSkge1xuXHQgICAgbGF5ZXIub3BhY2l0eSA9IGxheWVyLm9wYWNpdHkgfHwgb3BhY2l0eTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0TWFwc2VydmVyVXJsKGxheWVyLCB1cmwpIHtcblx0ICAgIGxheWVyLnVybCA9IGxheWVyLnVybCB8fCB1cmw7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENyZWF0ZVNlYXJjaDtcblx0XG5cdHZhciBfbGVhZmxldEdlb3NlYXJjaCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVTZWFyY2gobWFwKSB7XG5cdCAgICB2YXIgcHJvdmlkZXIgPSBuZXcgX2xlYWZsZXRHZW9zZWFyY2guT3BlblN0cmVldE1hcFByb3ZpZGVyKCk7XG5cdFxuXHQgICAgdmFyIHNlYXJjaENvbnRyb2wgPSBuZXcgX2xlYWZsZXRHZW9zZWFyY2guR2VvU2VhcmNoQ29udHJvbCh7XG5cdCAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLFxuXHQgICAgICAgIHNob3dNYXJrZXI6IGZhbHNlLFxuXHQgICAgICAgIGF1dG9Db21wbGV0ZTogdHJ1ZSxcblx0ICAgICAgICBzaG93UG9wdXA6IGZhbHNlXG5cdCAgICB9KTtcblx0XG5cdCAgICBtYXAuYWRkQ29udHJvbChzZWFyY2hDb250cm9sKTtcblx0XG5cdCAgICB2YXIgc2VhcmNoRWxlbWVudHMgPSBzZWFyY2hDb250cm9sLnNlYXJjaEVsZW1lbnQuZWxlbWVudHM7XG5cdFxuXHQgICAgTC5Eb21FdmVudC5vbihzZWFyY2hFbGVtZW50cy5jb250YWluZXIsIFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2KSB7XG5cdCAgICAgICAgTC5Eb21FdmVudC5zdG9wUHJvcGFnYXRpb24oZXYpO1xuXHRcblx0ICAgICAgICB2YXIgc2VhcmNoRW50cmllcyA9IHNlYXJjaEVsZW1lbnRzLmZvcm0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmVzdWx0cycpWzBdLmNoaWxkcmVuO1xuXHRcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlYXJjaEVudHJpZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgaWYgKGV2LnRhcmdldCA9PT0gc2VhcmNoRW50cmllc1tpXSkge1xuXHQgICAgICAgICAgICAgICAgc2VhcmNoRWxlbWVudHMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3Igc2VhcmNoIGJ5IGFkZHJlc3Ncblx0ICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdCAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnc2VhcmNoJyxcblx0ICAgICAgICAgICAgZXZlbnRMYWJlbDogJ2NsaWNrJyxcblx0ICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgfSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICBMLkRvbUV2ZW50Lm9uKHNlYXJjaEVsZW1lbnRzLmNvbnRhaW5lciwgXCJrZXlkb3duXCIsIGZ1bmN0aW9uIChldikge1xuXHQgICAgICAgIEwuRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKGV2KTtcblx0XG5cdCAgICAgICAgaWYgKGV2LndoaWNoID09IDEzIHx8IGV2LmtleUNvZGUgPT0gMTMpIHtcblx0ICAgICAgICAgICAgc2VhcmNoRWxlbWVudHMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHRcblx0ICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIHNlYWNyY2ggYnkgYWRkcmVzc1xuXHQgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuXHQgICAgICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdzZWFyY2ggYWRkcmVzcycsXG5cdCAgICAgICAgICAgICAgICBldmVudExhYmVsOiBldi50YXJnZXQudmFsdWUsXG5cdCAgICAgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9sZWFmbGV0Q29udHJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0dlb1NlYXJjaENvbnRyb2wnLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sZWFmbGV0Q29udHJvbCkuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9zZWFyY2hFbGVtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1NlYXJjaEVsZW1lbnQnLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2hFbGVtZW50KS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX2JpbmdQcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdCaW5nUHJvdmlkZXInLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iaW5nUHJvdmlkZXIpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfZXNyaVByb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0VzcmlQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VzcmlQcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9nb29nbGVQcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdHb29nbGVQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dvb2dsZVByb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX29wZW5TdHJlZXRNYXBQcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdPcGVuU3RyZWV0TWFwUHJvdmlkZXInLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vcGVuU3RyZWV0TWFwUHJvdmlkZXIpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnUHJvdmlkZXInLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IExlYWZsZXRDb250cm9sO1xuXHRcblx0dmFyIF9sb2Rhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdHZhciBfbG9kYXNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvZGFzaCk7XG5cdFxuXHR2YXIgX3NlYXJjaEVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdHZhciBfc2VhcmNoRWxlbWVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2hFbGVtZW50KTtcblx0XG5cdHZhciBfcmVzdWx0TGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHRcblx0dmFyIF9yZXN1bHRMaXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Jlc3VsdExpc3QpO1xuXHRcblx0dmFyIF9kb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0dmFyIF9jb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdHZhciBkZWZhdWx0T3B0aW9ucyA9IGZ1bmN0aW9uIGRlZmF1bHRPcHRpb25zKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBwb3NpdGlvbjogJ3RvcGxlZnQnLFxuXHQgICAgc3R5bGU6ICdidXR0b24nLFxuXHQgICAgc2hvd01hcmtlcjogdHJ1ZSxcblx0ICAgIHNob3dQb3B1cDogZmFsc2UsXG5cdCAgICBtYXJrZXI6IHtcblx0ICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCksXG5cdCAgICAgIGRyYWdnYWJsZTogZmFsc2Vcblx0ICAgIH0sXG5cdCAgICBtYXhNYXJrZXJzOiAxLFxuXHQgICAgcmV0YWluWm9vbUxldmVsOiBmYWxzZSxcblx0ICAgIGFuaW1hdGVab29tOiB0cnVlLFxuXHQgICAgc2VhcmNoTGFiZWw6ICdFbnRlciBhZGRyZXNzJyxcblx0ICAgIG5vdEZvdW5kTWVzc2FnZTogJ1NvcnJ5LCB0aGF0IGFkZHJlc3MgY291bGQgbm90IGJlIGZvdW5kLicsXG5cdCAgICBtZXNzYWdlSGlkZURlbGF5OiAzMDAwLFxuXHQgICAgem9vbUxldmVsOiAxOCxcblx0ICAgIGNsYXNzTmFtZXM6IHtcblx0ICAgICAgY29udGFpbmVyOiAnbGVhZmxldC1iYXIgbGVhZmxldC1jb250cm9sIGxlYWZsZXQtY29udHJvbC1nZW9zZWFyY2gnLFxuXHQgICAgICBidXR0b246ICdsZWFmbGV0LWJhci1wYXJ0IGxlYWZsZXQtYmFyLXBhcnQtc2luZ2xlJyxcblx0ICAgICAgbXNnYm94OiAnbGVhZmxldC1iYXIgbWVzc2FnZScsXG5cdCAgICAgIGZvcm06ICcnLFxuXHQgICAgICBpbnB1dDogJydcblx0ICAgIH0sXG5cdCAgICBhdXRvQ29tcGxldGU6IHRydWUsXG5cdCAgICBhdXRvQ29tcGxldGVEZWxheTogMjUwXG5cdCAgfTtcblx0fTtcblx0XG5cdHZhciBDb250cm9sID0ge1xuXHQgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUob3B0aW9ucykge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICB0aGlzLm1hcmtlcnMgPSBuZXcgTC5GZWF0dXJlR3JvdXAoKTtcblx0XG5cdCAgICB0aGlzLm9wdGlvbnMgPSBfZXh0ZW5kcyh7fSwgZGVmYXVsdE9wdGlvbnMoKSwgb3B0aW9ucyk7XG5cdFxuXHQgICAgdmFyIF9vcHRpb25zID0gdGhpcy5vcHRpb25zLFxuXHQgICAgICAgIHN0eWxlID0gX29wdGlvbnMuc3R5bGUsXG5cdCAgICAgICAgY2xhc3NOYW1lcyA9IF9vcHRpb25zLmNsYXNzTmFtZXMsXG5cdCAgICAgICAgc2VhcmNoTGFiZWwgPSBfb3B0aW9ucy5zZWFyY2hMYWJlbCxcblx0ICAgICAgICBhdXRvQ29tcGxldGUgPSBfb3B0aW9ucy5hdXRvQ29tcGxldGUsXG5cdCAgICAgICAgYXV0b0NvbXBsZXRlRGVsYXkgPSBfb3B0aW9ucy5hdXRvQ29tcGxldGVEZWxheTtcblx0XG5cdCAgICBpZiAoc3R5bGUgIT09ICdidXR0b24nKSB7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jbGFzc05hbWVzLmNvbnRhaW5lciArPSAnICcgKyBvcHRpb25zLnN0eWxlO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuc2VhcmNoRWxlbWVudCA9IG5ldyBfc2VhcmNoRWxlbWVudDIuZGVmYXVsdChfZXh0ZW5kcyh7fSwgdGhpcy5vcHRpb25zLCB7XG5cdCAgICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KHF1ZXJ5KSB7XG5cdCAgICAgICAgcmV0dXJuIF90aGlzLm9uU3VibWl0KHF1ZXJ5KTtcblx0ICAgICAgfVxuXHQgICAgfSkpO1xuXHRcblx0ICAgIHZhciBfc2VhcmNoRWxlbWVudCRlbGVtZW4gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMsXG5cdCAgICAgICAgY29udGFpbmVyID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmNvbnRhaW5lcixcblx0ICAgICAgICBmb3JtID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmZvcm0sXG5cdCAgICAgICAgaW5wdXQgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uaW5wdXQ7XG5cdFxuXHQgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciBidXR0b24gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdhJywgY2xhc3NOYW1lcy5idXR0b24sIGNvbnRhaW5lcik7XG5cdCAgICBidXR0b24udGl0bGUgPSBzZWFyY2hMYWJlbDtcblx0ICAgIGJ1dHRvbi5ocmVmID0gJyMnO1xuXHRcblx0ICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uQ2xpY2soZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdFxuXHQgICAgaWYgKGF1dG9Db21wbGV0ZSkge1xuXHQgICAgICB0aGlzLnJlc3VsdExpc3QgPSBuZXcgX3Jlc3VsdExpc3QyLmRlZmF1bHQoe1xuXHQgICAgICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVDbGljayhfcmVmKSB7XG5cdCAgICAgICAgICB2YXIgcmVzdWx0ID0gX3JlZi5yZXN1bHQ7XG5cdFxuXHQgICAgICAgICAgaW5wdXQudmFsdWUgPSByZXN1bHQubGFiZWw7XG5cdCAgICAgICAgICBfdGhpcy5vblN1Ym1pdCh7IHF1ZXJ5OiByZXN1bHQubGFiZWwgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGZvcm0uYXBwZW5kQ2hpbGQodGhpcy5yZXN1bHRMaXN0LmVsZW1lbnRzLmNvbnRhaW5lcik7XG5cdFxuXHQgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsICgwLCBfbG9kYXNoMi5kZWZhdWx0KShmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5hdXRvU2VhcmNoKGUpO1xuXHQgICAgICB9LCBhdXRvQ29tcGxldGVEZWxheSksIHRydWUpO1xuXHQgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICByZXR1cm4gX3RoaXMuc2VsZWN0UmVzdWx0KGUpO1xuXHQgICAgICB9LCB0cnVlKTtcblx0ICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgcmV0dXJuIF90aGlzLmNsZWFyUmVzdWx0cyhlKTtcblx0ICAgICAgfSwgdHJ1ZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5lbGVtZW50cyA9IHsgYnV0dG9uOiBidXR0b24gfTtcblx0ICB9LFxuXHQgIG9uQWRkOiBmdW5jdGlvbiBvbkFkZChtYXApIHtcblx0ICAgIHZhciBfb3B0aW9uczIgPSB0aGlzLm9wdGlvbnMsXG5cdCAgICAgICAgc2hvd01hcmtlciA9IF9vcHRpb25zMi5zaG93TWFya2VyLFxuXHQgICAgICAgIHN0eWxlID0gX29wdGlvbnMyLnN0eWxlO1xuXHRcblx0ICAgIHRoaXMubWFwID0gbWFwO1xuXHQgICAgaWYgKHNob3dNYXJrZXIpIHtcblx0ICAgICAgdGhpcy5tYXJrZXJzLmFkZFRvKG1hcCk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHN0eWxlID09PSAnYmFyJykge1xuXHQgICAgICB2YXIgZm9ybSA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5mb3JtO1xuXHRcblx0ICAgICAgdmFyIHJvb3QgPSBtYXAuZ2V0Q29udGFpbmVyKCkucXVlcnlTZWxlY3RvcignLmxlYWZsZXQtY29udHJvbC1jb250YWluZXInKTtcblx0XG5cdCAgICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCAnbGVhZmxldC1jb250cm9sLWdlb3NlYXJjaCBiYXInKTtcblx0ICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZvcm0pO1xuXHQgICAgICByb290LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cdCAgICAgIHRoaXMuZWxlbWVudHMuY29udGFpbmVyID0gY29udGFpbmVyO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuY29udGFpbmVyO1xuXHQgIH0sXG5cdCAgb25SZW1vdmU6IGZ1bmN0aW9uIG9uUmVtb3ZlKCkge1xuXHQgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgIGlmIChjb250YWluZXIpIHtcblx0ICAgICAgY29udGFpbmVyLnJlbW92ZSgpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH0sXG5cdCAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhldmVudCkge1xuXHQgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XG5cdCAgICB2YXIgX3NlYXJjaEVsZW1lbnQkZWxlbWVuMiA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cyxcblx0ICAgICAgICBjb250YWluZXIgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4yLmNvbnRhaW5lcixcblx0ICAgICAgICBpbnB1dCA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbjIuaW5wdXQ7XG5cdFxuXHQgICAgaWYgKGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG5cdCAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblx0ICAgICAgaW5wdXQuZm9jdXMoKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIHNlbGVjdFJlc3VsdDogZnVuY3Rpb24gc2VsZWN0UmVzdWx0KGV2ZW50KSB7XG5cdCAgICBpZiAoIVtfY29uc3RhbnRzLkFSUk9XX0RPV05fS0VZLCBfY29uc3RhbnRzLkFSUk9XX1VQX0tFWV0uaW5jbHVkZXMoZXZlbnQua2V5Q29kZSkpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICB2YXIgaW5wdXQgPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuaW5wdXQ7XG5cdFxuXHQgICAgdmFyIGxpc3QgPSB0aGlzLnJlc3VsdExpc3Q7XG5cdCAgICB2YXIgbWF4ID0gdGhpcy5yZXN1bHRMaXN0LmNvdW50KCkgLSAxO1xuXHRcblx0ICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG5cdCAgICB2YXIgbmV4dCA9IGV2ZW50LmNvZGUgPT09ICdBcnJvd0Rvd24nID8gfn5saXN0LnNlbGVjdGVkICsgMSA6IH5+bGlzdC5zZWxlY3RlZCAtIDE7XG5cdCAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmVzdGVkLXRlcm5hcnlcblx0ICAgIHZhciBpZHggPSBuZXh0IDwgMCA/IG1heCA6IG5leHQgPiBtYXggPyAwIDogbmV4dDtcblx0XG5cdCAgICB2YXIgaXRlbSA9IGxpc3Quc2VsZWN0KGlkeCk7XG5cdCAgICBpbnB1dC52YWx1ZSA9IGl0ZW0ubGFiZWw7XG5cdCAgfSxcblx0ICBjbGVhclJlc3VsdHM6IGZ1bmN0aW9uIGNsZWFyUmVzdWx0cyhldmVudCkge1xuXHQgICAgaWYgKGV2ZW50LmtleUNvZGUgIT09IF9jb25zdGFudHMuRVNDQVBFX0tFWSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5yZXN1bHRMaXN0LmNsZWFyKCk7XG5cdCAgfSxcblx0ICBhdXRvU2VhcmNoOiBmdW5jdGlvbiBhdXRvU2VhcmNoKGV2ZW50KSB7XG5cdCAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuXHQgICAgICB2YXIgcXVlcnksIHByb3ZpZGVyLCByZXN1bHRzO1xuXHRcblx0ICAgICAgaWYgKF9jb25zdGFudHMuU1BFQ0lBTF9LRVlTLmluY2x1ZGVzKGV2ZW50LmtleUNvZGUpKSB7XG5cdCAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcXVlcnkgPSBldmVudC50YXJnZXQudmFsdWU7XG5cdCAgICAgIHByb3ZpZGVyID0gdGhpcy5vcHRpb25zLnByb3ZpZGVyO1xuXHQgICAgICByZXR1cm4gcHJvdmlkZXIuc2VhcmNoKHsgcXVlcnk6IHF1ZXJ5IH0pLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG5cdFxuXHQgICAgICAgIHJlc3VsdHMgPSAkYXdhaXRfMTtcblx0ICAgICAgICB0aGlzLnJlc3VsdExpc3QucmVuZGVyKHJlc3VsdHMpO1xuXHQgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICB9LFxuXHQgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdChxdWVyeSkge1xuXHQgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgdmFyIHByb3ZpZGVyLCByZXN1bHRzO1xuXHQgICAgICBwcm92aWRlciA9IHRoaXMub3B0aW9ucy5wcm92aWRlcjtcblx0ICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlYXJjaChxdWVyeSkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzIpIHtcblx0XG5cdCAgICAgICAgcmVzdWx0cyA9ICRhd2FpdF8yO1xuXHRcblx0ICAgICAgICBpZiAocmVzdWx0cyAmJiByZXN1bHRzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgIHRoaXMuc2hvd1Jlc3VsdChyZXN1bHRzWzBdKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcblx0ICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuXHQgIH0sXG5cdCAgc2hvd1Jlc3VsdDogZnVuY3Rpb24gc2hvd1Jlc3VsdChyZXN1bHQpIHtcblx0ICAgIHZhciBtYXJrZXJzID0gT2JqZWN0LmtleXModGhpcy5tYXJrZXJzLl9sYXllcnMpO1xuXHQgICAgaWYgKG1hcmtlcnMubGVuZ3RoID49IHRoaXMub3B0aW9ucy5tYXhNYXJrZXJzKSB7XG5cdCAgICAgIHRoaXMubWFya2Vycy5yZW1vdmVMYXllcihtYXJrZXJzWzBdKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbWFya2VyID0gdGhpcy5hZGRNYXJrZXIocmVzdWx0KTtcblx0ICAgIHRoaXMuY2VudGVyTWFwKHJlc3VsdCk7XG5cdFxuXHQgICAgdGhpcy5tYXAuZmlyZUV2ZW50KCdnZW9zZWFyY2gvc2hvd2xvY2F0aW9uJywge1xuXHQgICAgICBsb2NhdGlvbjogcmVzdWx0LFxuXHQgICAgICBtYXJrZXI6IG1hcmtlclxuXHQgICAgfSk7XG5cdCAgfSxcblx0ICBhZGRNYXJrZXI6IGZ1bmN0aW9uIGFkZE1hcmtlcihyZXN1bHQpIHtcblx0ICAgIHZhciBfb3B0aW9uczMgPSB0aGlzLm9wdGlvbnMsXG5cdCAgICAgICAgb3B0aW9ucyA9IF9vcHRpb25zMy5tYXJrZXIsXG5cdCAgICAgICAgc2hvd1BvcHVwID0gX29wdGlvbnMzLnNob3dQb3B1cDtcblx0XG5cdCAgICB2YXIgbWFya2VyID0gbmV3IEwuTWFya2VyKFtyZXN1bHQueSwgcmVzdWx0LnhdLCBvcHRpb25zKTtcblx0ICAgIG1hcmtlci5iaW5kUG9wdXAocmVzdWx0LmxhYmVsKTtcblx0XG5cdCAgICB0aGlzLm1hcmtlcnMuYWRkTGF5ZXIobWFya2VyKTtcblx0XG5cdCAgICBpZiAoc2hvd1BvcHVwKSB7XG5cdCAgICAgIG1hcmtlci5vcGVuUG9wdXAoKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gbWFya2VyO1xuXHQgIH0sXG5cdCAgY2VudGVyTWFwOiBmdW5jdGlvbiBjZW50ZXJNYXAocmVzdWx0KSB7XG5cdCAgICB2YXIgX29wdGlvbnM0ID0gdGhpcy5vcHRpb25zLFxuXHQgICAgICAgIHJldGFpblpvb21MZXZlbCA9IF9vcHRpb25zNC5yZXRhaW5ab29tTGV2ZWwsXG5cdCAgICAgICAgYW5pbWF0ZVpvb20gPSBfb3B0aW9uczQuYW5pbWF0ZVpvb207XG5cdFxuXHQgICAgdmFyIHJlc3VsdEJvdW5kcyA9IG5ldyBMLkxhdExuZ0JvdW5kcyhyZXN1bHQuYm91bmRzKTtcblx0ICAgIHZhciBib3VuZHMgPSByZXN1bHRCb3VuZHMuaXNWYWxpZCgpID8gcmVzdWx0Qm91bmRzIDogdGhpcy5tYXJrZXJzLmdldEJvdW5kcygpO1xuXHRcblx0ICAgIGlmICghcmV0YWluWm9vbUxldmVsICYmIHJlc3VsdEJvdW5kcy5pc1ZhbGlkKCkpIHtcblx0ICAgICAgdGhpcy5tYXAuZml0Qm91bmRzKGJvdW5kcywgeyBhbmltYXRlOiBhbmltYXRlWm9vbSB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMubWFwLnNldFZpZXcoYm91bmRzLmdldENlbnRlcigpLCB0aGlzLmdldFpvb20oKSwgeyBhbmltYXRlOiBhbmltYXRlWm9vbSB9KTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIGdldFpvb206IGZ1bmN0aW9uIGdldFpvb20oKSB7XG5cdCAgICB2YXIgX29wdGlvbnM1ID0gdGhpcy5vcHRpb25zLFxuXHQgICAgICAgIHJldGFpblpvb21MZXZlbCA9IF9vcHRpb25zNS5yZXRhaW5ab29tTGV2ZWwsXG5cdCAgICAgICAgem9vbUxldmVsID0gX29wdGlvbnM1Lnpvb21MZXZlbDtcblx0XG5cdCAgICByZXR1cm4gcmV0YWluWm9vbUxldmVsID8gdGhpcy5tYXAuZ2V0Wm9vbSgpIDogem9vbUxldmVsO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIExlYWZsZXRDb250cm9sKCkge1xuXHQgIGlmICghTCB8fCAhTC5Db250cm9sIHx8ICFMLkNvbnRyb2wuZXh0ZW5kKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ0xlYWZsZXQgbXVzdCBiZSBsb2FkZWQgYmVmb3JlIGluc3RhbnRpYXRpbmcgdGhlIEdlb1NlYXJjaCBjb250cm9sJyk7XG5cdCAgfVxuXHRcblx0ICB2YXIgTENvbnRyb2wgPSBMLkNvbnRyb2wuZXh0ZW5kKENvbnRyb2wpO1xuXHRcblx0ICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgb3B0aW9ucyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgb3B0aW9uc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KExDb250cm9sLCBbbnVsbF0uY29uY2F0KG9wdGlvbnMpKSkoKTtcblx0fVxuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdC8qXG5cdCAqICRhc3luY2JpbmQgaGFzIG11bHRpcGxlIHVzZXMsIGRlcGVuZGluZyBvbiB0aGUgcGFyYW1ldGVyIGxpc3QuIEl0IGlzIGluIEZ1bmN0aW9uLnByb3RvdHlwZSwgc28gJ3RoaXMnIGlzIGFsd2F5cyBhIGZ1bmN0aW9uXG5cdCAqXG5cdCAqIDEpIElmIGNhbGxlZCB3aXRoIGEgc2luZ2xlIGFyZ3VtZW50ICh0aGlzKSwgaXQgaXMgdXNlZCB3aGVuIGRlZmluaW5nIGFuIGFzeW5jIGZ1bmN0aW9uIHRvIGVuc3VyZSB3aGVuXG5cdCAqICAgICAgaXQgaXMgaW52b2tlZCwgdGhlIGNvcnJlY3QgJ3RoaXMnIGlzIHByZXNlbnQsIGp1c3QgbGlrZSBcImJpbmRcIi4gRm9yIGxlZ2FjeSByZWFzb25zLCAndGhpcycgaXMgZ2l2ZW5cblx0ICogICAgICBhIG1lbWViZXIgJ3RoZW4nIHdoaWNoIHJlZmVycyB0byBpdHNlbGYuXG5cdCAqIDIpIElmIGNhbGxlZCB3aXRoIGEgc2Vjb25kIHBhcmFtZXRlciAoXCJjYXRjaGVyXCIpIGFuZCBjYXRjaGVyIT09dHJ1ZSBpdCBpcyBiZWluZyB1c2VkIHRvIGludm9rZSBhbiBhc3luY1xuXHQgKiAgICAgIGZ1bmN0aW9uIHdoZXJlIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIHRoZSBlcnJvciBjYWxsYmFjayAoZm9yIHN5bmMgZXhjZXB0aW9ucyBhbmQgdG8gYmUgcGFzc2VkIHRvXG5cdCAqICAgICAgbmVzdGVkIGFzeW5jIGNhbGxzKVxuXHQgKiAzKSBJZiBjYWxsZWQgd2l0aCB0aGUgc2Vjb25kIHBhcmFtZXRlcj09PXRydWUsIGl0IGlzIHRoZSBzYW1lIHVzZSBhcyAoMSksIGJ1dCB0aGUgZnVuY3Rpb24gaXMgd3JhcHBlZFxuXHQgKiAgICAgIGluIGFuICdQcm9taXNlJyBhcyB3ZWxsIGJvdW5kIHRvICd0aGlzJy5cblx0ICogICAgICBJdCBpcyB0aGUgc2FtZSBhcyBjYWxsaW5nICduZXcgUHJvbWlzZSh0aGlzKScsIHdoZXJlICd0aGlzJyBpcyB0aGUgZnVuY3Rpb24gYmVpbmcgYm91bmQvd3JhcHBlZFxuXHQgKiA0KSBJZiBjYWxsZWQgd2l0aCB0aGUgc2Vjb25kIHBhcmFtZXRlcj09PTAsIGl0IGlzIHRoZSBzYW1lIHVzZSBhcyAoMSksIGJ1dCB0aGUgZnVuY3Rpb24gaXMgd3JhcHBlZFxuXHQgKiAgICAgIGluIGEgJ0xhenlUaGVuYWJsZScsIHdoaWNoIGV4ZWN1dGVzIGxhemlseSBhbmQgY2FuIHJlc29sdmUgc3luY2hyb25vdXNseS5cblx0ICogICAgICBJdCBpcyB0aGUgc2FtZSBhcyBjYWxsaW5nICduZXcgTGF6eVRoZW5hYmxlKHRoaXMpJyAoaWYgc3VjaCBhIHR5cGUgd2VyZSBleHBvc2VkKSwgd2hlcmUgJ3RoaXMnIGlzXG5cdCAqICAgICAgdGhlIGZ1bmN0aW9uIGJlaW5nIGJvdW5kL3dyYXBwZWRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzSW5jbHVkZXMoaW5jbHVkZXMsIGlucHV0KSB7XG5cdCAgICB2YXIgc3JjID0gaW5wdXQudG9TdHJpbmcoKTtcblx0ICAgIHZhciB0ID0gXCJyZXR1cm4gXCIgKyBzcmM7XG5cdCAgICB2YXIgYXJncyA9IHNyYy5tYXRjaCgvLipcXCgoW14pXSopXFwpLylbMV07XG5cdCAgICB2YXIgcmUgPSAvWydcIl0hISEoW14nXCJdKilbJ1wiXS9nO1xuXHQgICAgdmFyIG0gPSBbXTtcblx0ICAgIHdoaWxlICgxKSB7XG5cdCAgICAgICAgdmFyIG14ID0gcmUuZXhlYyh0KTtcblx0ICAgICAgICBpZiAobXgpIG0ucHVzaChteCk7ZWxzZSBicmVhaztcblx0ICAgIH1cblx0ICAgIG0ucmV2ZXJzZSgpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICB0ID0gdC5zbGljZSgwLCBlLmluZGV4KSArIGluY2x1ZGVzW2VbMV1dICsgdC5zdWJzdHIoZS5pbmRleCArIGVbMF0ubGVuZ3RoKTtcblx0ICAgIH0pO1xuXHQgICAgdCA9IHQucmVwbGFjZSgvXFwvXFwqW14qXSpcXCpcXC8vZywgJyAnKS5yZXBsYWNlKC9cXHMrL2csICcgJyk7XG5cdCAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKGFyZ3MsIHQpKCk7XG5cdH1cblx0XG5cdHZhciAkYXN5bmNiaW5kID0gcHJvY2Vzc0luY2x1ZGVzKHtcblx0ICAgIHpvdXNhbjogX193ZWJwYWNrX3JlcXVpcmVfXyg3KS50b1N0cmluZygpLFxuXHQgICAgdGhlbmFibGU6IF9fd2VicGFja19yZXF1aXJlX18oMTEpLnRvU3RyaW5nKClcblx0fSwgZnVuY3Rpb24gJGFzeW5jYmluZChzZWxmLCBjYXRjaGVyKSB7XG5cdCAgICBcInVzZSBzdHJpY3RcIjtcblx0XG5cdCAgICBpZiAoIUZ1bmN0aW9uLnByb3RvdHlwZS4kYXN5bmNiaW5kKSB7XG5cdCAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSwgXCIkYXN5bmNiaW5kXCIsIHsgdmFsdWU6ICRhc3luY2JpbmQsIGVudW1lcmFibGU6IGZhbHNlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICghJGFzeW5jYmluZC50cmFtcG9saW5lKSB7XG5cdCAgICAgICAgJGFzeW5jYmluZC50cmFtcG9saW5lID0gZnVuY3Rpb24gdHJhbXBvbGluZSh0LCB4LCBzLCBlLCB1KSB7XG5cdCAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBiKHEpIHtcblx0ICAgICAgICAgICAgICAgIHdoaWxlIChxKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHEudGhlbikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBxID0gcS50aGVuKGIsIGUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSA/IHVuZGVmaW5lZCA6IHE7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxLnBvcCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEubGVuZ3RoKSByZXR1cm4gcS5wb3AoKSA/IHguY2FsbCh0KSA6IHE7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0gcztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHEgPSBxLmNhbGwodCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAocikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZShyKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0ICAgIGlmICghJGFzeW5jYmluZC5MYXp5VGhlbmFibGUpIHtcblx0ICAgICAgICAkYXN5bmNiaW5kLkxhenlUaGVuYWJsZSA9ICchISF0aGVuYWJsZScoKTtcblx0ICAgICAgICAkYXN5bmNiaW5kLkVhZ2VyVGhlbmFibGUgPSAkYXN5bmNiaW5kLlRoZW5hYmxlID0gKCRhc3luY2JpbmQuRWFnZXJUaGVuYWJsZUZhY3RvcnkgPSAnISEhem91c2FuJykoKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgcmVzb2x2ZXIgPSB0aGlzO1xuXHQgICAgc3dpdGNoIChjYXRjaGVyKSB7XG5cdCAgICAgICAgY2FzZSB0cnVlOlxuXHQgICAgICAgICAgICByZXR1cm4gbmV3ICRhc3luY2JpbmQuVGhlbmFibGUoYm91bmRUaGVuKTtcblx0ICAgICAgICBjYXNlIDA6XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgJGFzeW5jYmluZC5MYXp5VGhlbmFibGUoYm91bmRUaGVuKTtcblx0ICAgICAgICBjYXNlIHVuZGVmaW5lZDpcblx0ICAgICAgICAgICAgLyogRm9yIHJ1bnRpbWUgY29tcGF0aWJpbGl0eSB3aXRoIE5vZGVudCB2Mi54LCBwcm92aWRlIGEgdGhlbmFibGUgKi9cblx0ICAgICAgICAgICAgYm91bmRUaGVuLnRoZW4gPSBib3VuZFRoZW47XG5cdCAgICAgICAgICAgIHJldHVybiBib3VuZFRoZW47XG5cdCAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVyLmFwcGx5KHNlbGYsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXRjaGVyKGV4KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGJvdW5kVGhlbigpIHtcblx0ICAgICAgICByZXR1cm4gcmVzb2x2ZXIuYXBwbHkoc2VsZiwgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHRmdW5jdGlvbiAkYXN5bmNzcGF3bihwcm9taXNlUHJvdmlkZXIsIHNlbGYpIHtcblx0ICAgIGlmICghRnVuY3Rpb24ucHJvdG90eXBlLiRhc3luY3NwYXduKSB7XG5cdCAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSwgXCIkYXN5bmNzcGF3blwiLCB7IHZhbHVlOiAkYXN5bmNzcGF3biwgZW51bWVyYWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7XG5cdCAgICB9XG5cdCAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRnVuY3Rpb24pKSByZXR1cm47XG5cdFxuXHQgICAgdmFyIGdlbkYgPSB0aGlzO1xuXHQgICAgcmV0dXJuIG5ldyBwcm9taXNlUHJvdmlkZXIoZnVuY3Rpb24gZW5vdWdoKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgIHZhciBnZW4gPSBnZW5GLmNhbGwoc2VsZiwgcmVzb2x2ZSwgcmVqZWN0KTtcblx0ICAgICAgICBmdW5jdGlvbiBzdGVwKGZuLCBhcmcpIHtcblx0ICAgICAgICAgICAgdmFyIG5leHQ7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICBuZXh0ID0gZm4uY2FsbChnZW4sIGFyZyk7XG5cdCAgICAgICAgICAgICAgICBpZiAobmV4dC5kb25lKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUgIT09IHJlc29sdmUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUgJiYgbmV4dC52YWx1ZSA9PT0gbmV4dC52YWx1ZS50aGVuKSByZXR1cm4gbmV4dC52YWx1ZShyZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlICYmIHJlc29sdmUobmV4dC52YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUudGhlbikge1xuXHQgICAgICAgICAgICAgICAgICAgIG5leHQudmFsdWUudGhlbihmdW5jdGlvbiAodikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi5uZXh0LCB2KTtcblx0ICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi50aHJvdywgZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLm5leHQsIG5leHQudmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgICAgICByZWplY3QgJiYgcmVqZWN0KGUpO1xuXHQgICAgICAgICAgICAgICAgcmVqZWN0ID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBzdGVwKGdlbi5uZXh0KTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHQvLyBJbml0aWFsaXplIGFzeW5jIGJpbmRpbmdzXG5cdCRhc3luY2JpbmQoKTtcblx0JGFzeW5jc3Bhd24oKTtcblx0XG5cdC8vIEV4cG9ydCBhc3luYyBiaW5kaW5nc1xuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICAgICRhc3luY2JpbmQ6ICRhc3luY2JpbmQsXG5cdCAgICAkYXN5bmNzcGF3bjogJGFzeW5jc3Bhd25cblx0fTtcblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzLCBzZXRJbW1lZGlhdGUpIHsvKiBUaGlzIGNvZGUgaXMgYmFzZWQgb246XG5cdHpvdXNhbiAtIEEgTGlnaHRuaW5nIEZhc3QsIFlldCBWZXJ5IFNtYWxsIFByb21pc2UgQSsgQ29tcGxpYW50IEltcGxlbWVudGF0aW9uXG5cdGh0dHBzOi8vZ2l0aHViLmNvbS9ibHVlamF2YS96b3VzYW5cblx0QXV0aG9yOiBHbGVubiBDcm93bm92ZXIgPGdsZW5uQGJsdWVqYXZhLmNvbT4gKGh0dHA6Ly93d3cuYmx1ZWphdmEuY29tKVxuXHRWZXJzaW9uIDIuMy4zXG5cdExpY2Vuc2U6IE1JVCAqL1xuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHRpY2spIHtcblx0ICAgIHRpY2sgPSB0aWNrIHx8ICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHByb2Nlc3MpKSA9PT0gXCJvYmplY3RcIiAmJiBwcm9jZXNzLm5leHRUaWNrIHx8IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09IFwiZnVuY3Rpb25cIiAmJiBzZXRJbW1lZGlhdGUgfHwgZnVuY3Rpb24gKGYpIHtcblx0ICAgICAgICBzZXRUaW1lb3V0KGYsIDApO1xuXHQgICAgfTtcblx0ICAgIHZhciBzb29uID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBmcSA9IFtdLFxuXHQgICAgICAgICAgICBmcVN0YXJ0ID0gMCxcblx0ICAgICAgICAgICAgYnVmZmVyU2l6ZSA9IDEwMjQ7XG5cdCAgICAgICAgZnVuY3Rpb24gY2FsbFF1ZXVlKCkge1xuXHQgICAgICAgICAgICB3aGlsZSAoZnEubGVuZ3RoIC0gZnFTdGFydCkge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICBmcVtmcVN0YXJ0XSgpO1xuXHQgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHsvKiBjb25zb2xlLmVycm9yKGV4KSAqL31cblx0ICAgICAgICAgICAgICAgIGZxW2ZxU3RhcnQrK10gPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgICAgICAgICBpZiAoZnFTdGFydCA9PT0gYnVmZmVyU2l6ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGZxLnNwbGljZSgwLCBidWZmZXJTaXplKTtcblx0ICAgICAgICAgICAgICAgICAgICBmcVN0YXJ0ID0gMDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmbikge1xuXHQgICAgICAgICAgICBmcS5wdXNoKGZuKTtcblx0ICAgICAgICAgICAgaWYgKGZxLmxlbmd0aCAtIGZxU3RhcnQgPT09IDEpIHRpY2soY2FsbFF1ZXVlKTtcblx0ICAgICAgICB9O1xuXHQgICAgfSgpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIFpvdXNhbihmdW5jKSB7XG5cdCAgICAgICAgaWYgKGZ1bmMpIHtcblx0ICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcblx0ICAgICAgICAgICAgZnVuYyhmdW5jdGlvbiAoYXJnKSB7XG5cdCAgICAgICAgICAgICAgICBtZS5yZXNvbHZlKGFyZyk7XG5cdCAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChhcmcpIHtcblx0ICAgICAgICAgICAgICAgIG1lLnJlamVjdChhcmcpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgWm91c2FuLnByb3RvdHlwZSA9IHtcblx0ICAgICAgICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKHZhbHVlKSB7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSB1bmRlZmluZWQpIHJldHVybjtcblx0ICAgICAgICAgICAgaWYgKHZhbHVlID09PSB0aGlzKSByZXR1cm4gdGhpcy5yZWplY3QobmV3IFR5cGVFcnJvcihcIkF0dGVtcHQgdG8gcmVzb2x2ZSBwcm9taXNlIHdpdGggc2VsZlwiKSk7XG5cdCAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG5cdCAgICAgICAgICAgIGlmICh2YWx1ZSAmJiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgfHwgKHR5cGVvZiB2YWx1ZSA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHZhbHVlKSkgPT09IFwib2JqZWN0XCIpKSB7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdCA9IDA7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRoZW4gPSB2YWx1ZS50aGVuO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhlbiA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVuY3Rpb24gKHJhKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KyspIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5yZXNvbHZlKHJhKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KyspIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5yZWplY3QocnIpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KSB0aGlzLnJlamVjdChlKTtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZVTEZJTExFRDtcblx0ICAgICAgICAgICAgdGhpcy52ID0gdmFsdWU7XG5cdCAgICAgICAgICAgIGlmIChtZS5jKSBzb29uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCBsID0gbWUuYy5sZW5ndGg7IG4gPCBsOyBuKyspIHtcblx0ICAgICAgICAgICAgICAgICAgICBTVEFURV9GVUxGSUxMRUQobWUuY1tuXSwgdmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHJlamVjdDogZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuXHQgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gdW5kZWZpbmVkKSByZXR1cm47XG5cdCAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9SRUpFQ1RFRDtcblx0ICAgICAgICAgICAgdGhpcy52ID0gcmVhc29uO1xuXHQgICAgICAgICAgICB2YXIgY2xpZW50cyA9IHRoaXMuYztcblx0ICAgICAgICAgICAgaWYgKGNsaWVudHMpIHNvb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIGwgPSBjbGllbnRzLmxlbmd0aDsgbiA8IGw7IG4rKykge1xuXHQgICAgICAgICAgICAgICAgICAgIFNUQVRFX1JFSkVDVEVEKGNsaWVudHNbbl0sIHJlYXNvbik7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgdGhlbjogZnVuY3Rpb24gdGhlbihvbkYsIG9uUikge1xuXHQgICAgICAgICAgICB2YXIgcCA9IG5ldyBab3VzYW4oKTtcblx0ICAgICAgICAgICAgdmFyIGNsaWVudCA9IHtcblx0ICAgICAgICAgICAgICAgIHk6IG9uRixcblx0ICAgICAgICAgICAgICAgIG46IG9uUixcblx0ICAgICAgICAgICAgICAgIHA6IHBcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICAgICAgaWYgKHRoaXMuYykgdGhpcy5jLnB1c2goY2xpZW50KTtlbHNlIHRoaXMuYyA9IFtjbGllbnRdO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdmFyIHMgPSB0aGlzLnN0YXRlLFxuXHQgICAgICAgICAgICAgICAgICAgIGEgPSB0aGlzLnY7XG5cdCAgICAgICAgICAgICAgICBzb29uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICBzKGNsaWVudCwgYSk7XG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gcDtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGZ1bmN0aW9uIFNUQVRFX0ZVTEZJTExFRChjLCBhcmcpIHtcblx0ICAgICAgICBpZiAodHlwZW9mIGMueSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgeXJldCA9IGMueS5jYWxsKHVuZGVmaW5lZCwgYXJnKTtcblx0ICAgICAgICAgICAgICAgIGMucC5yZXNvbHZlKHlyZXQpO1xuXHQgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgIGMucC5yZWplY3QoZXJyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBjLnAucmVzb2x2ZShhcmcpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIFNUQVRFX1JFSkVDVEVEKGMsIHJlYXNvbikge1xuXHQgICAgICAgIGlmICh0eXBlb2YgYy5uID09PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIHZhciB5cmV0ID0gYy5uLmNhbGwodW5kZWZpbmVkLCByZWFzb24pO1xuXHQgICAgICAgICAgICAgICAgYy5wLnJlc29sdmUoeXJldCk7XG5cdCAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICAgICAgYy5wLnJlamVjdChlcnIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIGMucC5yZWplY3QocmVhc29uKTtcblx0ICAgIH1cblx0XG5cdCAgICBab3VzYW4ucmVzb2x2ZSA9IGZ1bmN0aW9uICh2YWwpIHtcblx0ICAgICAgICBpZiAodmFsICYmIHZhbCBpbnN0YW5jZW9mIFpvdXNhbikgcmV0dXJuIHZhbDtcblx0ICAgICAgICB2YXIgeiA9IG5ldyBab3VzYW4oKTtcblx0ICAgICAgICB6LnJlc29sdmUodmFsKTtcblx0ICAgICAgICByZXR1cm4gejtcblx0ICAgIH07XG5cdCAgICBab3VzYW4ucmVqZWN0ID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIGlmIChlcnIgJiYgZXJyIGluc3RhbmNlb2YgWm91c2FuKSByZXR1cm4gZXJyO1xuXHQgICAgICAgIHZhciB6ID0gbmV3IFpvdXNhbigpO1xuXHQgICAgICAgIHoucmVqZWN0KGVycik7XG5cdCAgICAgICAgcmV0dXJuIHo7XG5cdCAgICB9O1xuXHRcblx0ICAgIFpvdXNhbi52ZXJzaW9uID0gXCIyLjMuMy1ub2RlbnRcIjtcblx0ICAgIHJldHVybiBab3VzYW47XG5cdH07XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpLnNldEltbWVkaWF0ZSkpXG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblx0dmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXHRcblx0Ly8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG5cdC8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuXHQvLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG5cdC8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cdFxuXHR2YXIgY2FjaGVkU2V0VGltZW91dDtcblx0dmFyIGNhY2hlZENsZWFyVGltZW91dDtcblx0XG5cdGZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcblx0fVxuXHRmdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0KCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcblx0fVxuXHQoZnVuY3Rpb24gKCkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcblx0ICAgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcblx0ICAgIH1cblx0fSkoKTtcblx0ZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcblx0ICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG5cdCAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG5cdCAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH1cblx0ICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG5cdCAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcblx0ICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG5cdCAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3Jcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHRmdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG5cdCAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG5cdCAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG5cdCAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cblx0ICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0dmFyIHF1ZXVlID0gW107XG5cdHZhciBkcmFpbmluZyA9IGZhbHNlO1xuXHR2YXIgY3VycmVudFF1ZXVlO1xuXHR2YXIgcXVldWVJbmRleCA9IC0xO1xuXHRcblx0ZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuXHQgICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgfVxuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIGRyYWluUXVldWUoKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcblx0ICAgIGlmIChkcmFpbmluZykge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuXHQgICAgZHJhaW5pbmcgPSB0cnVlO1xuXHRcblx0ICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB3aGlsZSAobGVuKSB7XG5cdCAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG5cdCAgICAgICAgcXVldWUgPSBbXTtcblx0ICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgY3VycmVudFF1ZXVlID0gbnVsbDtcblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG5cdH1cblx0XG5cdHByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcblx0ICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0Ly8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuXHRmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcblx0ICAgIHRoaXMuZnVuID0gZnVuO1xuXHQgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHR9XG5cdEl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xuXHR9O1xuXHRwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xuXHRwcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xuXHRwcm9jZXNzLmVudiA9IHt9O1xuXHRwcm9jZXNzLmFyZ3YgPSBbXTtcblx0cHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5cdHByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0cHJvY2Vzcy5vbiA9IG5vb3A7XG5cdHByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLm9uY2UgPSBub29wO1xuXHRwcm9jZXNzLm9mZiA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5cdHByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cdFxuXHRwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRcblx0cHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gJy8nO1xuXHR9O1xuXHRwcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0cHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiAwO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHR2YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cdFxuXHQvLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXHRcblx0ZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcblx0fTtcblx0ZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcblx0fTtcblx0ZXhwb3J0cy5jbGVhclRpbWVvdXQgPSBleHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbiAodGltZW91dCkge1xuXHQgIGlmICh0aW1lb3V0KSB7XG5cdCAgICB0aW1lb3V0LmNsb3NlKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuXHQgIHRoaXMuX2lkID0gaWQ7XG5cdCAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG5cdH1cblx0VGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbiAoKSB7fTtcblx0VGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdywgdGhpcy5faWQpO1xuXHR9O1xuXHRcblx0Ly8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5cdGV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24gKGl0ZW0sIG1zZWNzKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHQgIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG5cdH07XG5cdFxuXHRleHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdCAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcblx0fTtcblx0XG5cdGV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbiAoaXRlbSkge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0XG5cdCAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG5cdCAgaWYgKG1zZWNzID49IDApIHtcblx0ICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcblx0ICAgICAgaWYgKGl0ZW0uX29uVGltZW91dCkgaXRlbS5fb25UaW1lb3V0KCk7XG5cdCAgICB9LCBtc2Vjcyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0ZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG5cdGV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsLCBwcm9jZXNzKSB7XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHQoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG5cdCAgICBcInVzZSBzdHJpY3RcIjtcblx0XG5cdCAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuXHQgICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcblx0ICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcblx0ICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG5cdCAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cdFxuXHQgICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG5cdCAgICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nXG5cdCAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKFwiXCIgKyBjYWxsYmFjayk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG5cdCAgICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrXG5cdCAgICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuXHQgICAgICAgIHRhc2tzQnlIYW5kbGVbbmV4dEhhbmRsZV0gPSB0YXNrO1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpO1xuXHQgICAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBydW4odGFzaykge1xuXHQgICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG5cdCAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG5cdCAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuXHQgICAgICAgICAgICBjYXNlIDA6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIGNhc2UgMTpcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIGNhc2UgMjpcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIGNhc2UgMzpcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcblx0ICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG5cdCAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cblx0ICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG5cdCAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG5cdCAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG5cdCAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuXHQgICAgICAgICAgICBpZiAodGFzaykge1xuXHQgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuXHQgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG5cdCAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuXHQgICAgICAgIC8vIHdoZXJlIGBnbG9iYWwucG9zdE1lc3NhZ2VgIG1lYW5zIHNvbWV0aGluZyBjb21wbGV0ZWx5IGRpZmZlcmVudCBhbmQgY2FuJ3QgYmUgdXNlZCBmb3IgdGhpcyBwdXJwb3NlLlxuXHQgICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG5cdCAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gdHJ1ZTtcblx0ICAgICAgICAgICAgdmFyIG9sZE9uTWVzc2FnZSA9IGdsb2JhbC5vbm1lc3NhZ2U7XG5cdCAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShcIlwiLCBcIipcIik7XG5cdCAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG5cdCAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcblx0ICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2Vcblx0ICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG5cdFxuXHQgICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG5cdCAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uIG9uR2xvYmFsTWVzc2FnZShldmVudCkge1xuXHQgICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiYgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiYgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG5cdCAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuXHQgICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcblx0ICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcblx0ICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG5cdCAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG5cdCAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcblx0ICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuXHQgICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG5cdCAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuXG5cdCAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG5cdCAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblx0XG5cdCAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG5cdCAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG5cdCAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuXHQgICAgICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9IGVsc2UgaWYgKGNhblVzZVBvc3RNZXNzYWdlKCkpIHtcblx0ICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG5cdCAgICAgICAgaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG5cdCAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcblx0ICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuXHQgICAgICAgIC8vIEZvciBJRSA24oCTOFxuXHQgICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG5cdCAgICAgICAgaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfVxuXHRcblx0ICAgIGF0dGFjaFRvLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcblx0ICAgIGF0dGFjaFRvLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG5cdH0pKHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiID8gdHlwZW9mIGdsb2JhbCA9PT0gXCJ1bmRlZmluZWRcIiA/IHVuZGVmaW5lZCA6IGdsb2JhbCA6IHNlbGYpO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSwgX193ZWJwYWNrX3JlcXVpcmVfXyg4KSkpXG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIGlzVGhlbmFibGUob2JqKSB7XG5cdCAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmogaW5zdGFuY2VvZiBPYmplY3QgJiYgdHlwZW9mIG9iai50aGVuID09PSBcImZ1bmN0aW9uXCI7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gcmVzb2x1dGlvbihwLCByLCBob3cpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvKiAyLjIuNy4xICovXG5cdCAgICAgICAgICAgIHZhciB4ID0gaG93ID8gaG93KHIpIDogcjtcblx0XG5cdCAgICAgICAgICAgIGlmIChwID09PSB4KSAvKiAyLjMuMSAqL1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHAucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJQcm9taXNlIHJlc29sdXRpb24gbG9vcFwiKSk7XG5cdFxuXHQgICAgICAgICAgICBpZiAoaXNUaGVuYWJsZSh4KSkge1xuXHQgICAgICAgICAgICAgICAgLyogMi4zLjMgKi9cblx0ICAgICAgICAgICAgICAgIHgudGhlbihmdW5jdGlvbiAoeSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb24ocCwgeSk7XG5cdCAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHAucmVqZWN0KGUpO1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICBwLnJlc29sdmUoeCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGNhdGNoIChleCkge1xuXHQgICAgICAgICAgICAvKiAyLjIuNy4yICovXG5cdCAgICAgICAgICAgIHAucmVqZWN0KGV4KTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gQ2hhaW5lZCgpIHt9O1xuXHQgICAgQ2hhaW5lZC5wcm90b3R5cGUgPSB7XG5cdCAgICAgICAgcmVzb2x2ZTogX3VuY2hhaW5lZCxcblx0ICAgICAgICByZWplY3Q6IF91bmNoYWluZWQsXG5cdCAgICAgICAgdGhlbjogdGhlbkNoYWluXG5cdCAgICB9O1xuXHQgICAgZnVuY3Rpb24gX3VuY2hhaW5lZCh2KSB7fVxuXHQgICAgZnVuY3Rpb24gdGhlbkNoYWluKHJlcywgcmVqKSB7XG5cdCAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzO1xuXHQgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHRoZW4ocmVzLCByZWopIHtcblx0ICAgICAgICB2YXIgY2hhaW4gPSBuZXcgQ2hhaW5lZCgpO1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVyKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGlzVGhlbmFibGUodmFsdWUpID8gdmFsdWUudGhlbihyZXMsIHJlaikgOiByZXNvbHV0aW9uKGNoYWluLCB2YWx1ZSwgcmVzKTtcblx0ICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGV4KSB7XG5cdCAgICAgICAgICAgICAgICByZXNvbHV0aW9uKGNoYWluLCBleCwgcmVqKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSBjYXRjaCAoZXgpIHtcblx0ICAgICAgICAgICAgcmVzb2x1dGlvbihjaGFpbiwgZXgsIHJlaik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBjaGFpbjtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBUaGVuYWJsZShyZXNvbHZlcikge1xuXHQgICAgICAgIHRoaXMuX3Jlc29sdmVyID0gcmVzb2x2ZXI7XG5cdCAgICAgICAgdGhpcy50aGVuID0gdGhlbjtcblx0ICAgIH07XG5cdFxuXHQgICAgVGhlbmFibGUucmVzb2x2ZSA9IGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgcmV0dXJuIFRoZW5hYmxlLmlzVGhlbmFibGUodikgPyB2IDogeyB0aGVuOiBmdW5jdGlvbiB0aGVuKHJlc29sdmUpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHYpO1xuXHQgICAgICAgICAgICB9IH07XG5cdCAgICB9O1xuXHRcblx0ICAgIFRoZW5hYmxlLmlzVGhlbmFibGUgPSBpc1RoZW5hYmxlO1xuXHRcblx0ICAgIHJldHVybiBUaGVuYWJsZTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0LyoqXG5cdCAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cblx0ICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuXHQgKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQgKi9cblx0XG5cdC8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG5cdHZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cdFxuXHQvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cblx0dmFyIE5BTiA9IDAgLyAwO1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cdFxuXHQvKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xuXHR2YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblx0XG5cdC8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG5cdHZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblx0XG5cdC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG5cdHZhciBmcmVlR2xvYmFsID0gKHR5cGVvZiBnbG9iYWwgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGdsb2JhbCkpID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXHRcblx0LyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cblx0dmFyIGZyZWVTZWxmID0gKHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihzZWxmKSkgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cdFxuXHQvKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cblx0dmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byByZXNvbHZlIHRoZVxuXHQgKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcblx0ICogb2YgdmFsdWVzLlxuXHQgKi9cblx0dmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG5cdHZhciBuYXRpdmVNYXggPSBNYXRoLm1heCxcblx0ICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuXHQgKiB0aGUgVW5peCBlcG9jaCAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMi40LjBcblx0ICogQGNhdGVnb3J5IERhdGVcblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXN0YW1wLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7XG5cdCAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcblx0ICogfSwgXy5ub3coKSk7XG5cdCAqIC8vID0+IExvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGludm9jYXRpb24uXG5cdCAqL1xuXHR2YXIgbm93ID0gZnVuY3Rpb24gbm93KCkge1xuXHQgIHJldHVybiByb290LkRhdGUubm93KCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGRlYm91bmNlZCBmdW5jdGlvbiB0aGF0IGRlbGF5cyBpbnZva2luZyBgZnVuY2AgdW50aWwgYWZ0ZXIgYHdhaXRgXG5cdCAqIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdhc1xuXHQgKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG5cdCAqIGRlbGF5ZWQgYGZ1bmNgIGludm9jYXRpb25zIGFuZCBhIGBmbHVzaGAgbWV0aG9kIHRvIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLlxuXHQgKiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGVcblx0ICogbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZFxuXHQgKiB3aXRoIHRoZSBsYXN0IGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50XG5cdCAqIGNhbGxzIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgXG5cdCAqIGludm9jYXRpb24uXG5cdCAqXG5cdCAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcblx0ICogaW52b2tlZCBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cblx0ICogaXMgaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuXHQgKlxuXHQgKiBJZiBgd2FpdGAgaXMgYDBgIGFuZCBgbGVhZGluZ2AgaXMgYGZhbHNlYCwgYGZ1bmNgIGludm9jYXRpb24gaXMgZGVmZXJyZWRcblx0ICogdW50aWwgdG8gdGhlIG5leHQgdGljaywgc2ltaWxhciB0byBgc2V0VGltZW91dGAgd2l0aCBhIHRpbWVvdXQgb2YgYDBgLlxuXHQgKlxuXHQgKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9kZWJvdW5jaW5nLXRocm90dGxpbmctZXhwbGFpbmVkLWV4YW1wbGVzLylcblx0ICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy5kZWJvdW5jZWAgYW5kIGBfLnRocm90dGxlYC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQGNhdGVnb3J5IEZ1bmN0aW9uXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgb2JqZWN0LlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9ZmFsc2VdXG5cdCAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XVxuXHQgKiAgVGhlIG1heGltdW0gdGltZSBgZnVuY2AgaXMgYWxsb3dlZCB0byBiZSBkZWxheWVkIGJlZm9yZSBpdCdzIGludm9rZWQuXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cblx0ICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogLy8gQXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eC5cblx0ICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcblx0ICpcblx0ICogLy8gSW52b2tlIGBzZW5kTWFpbGAgd2hlbiBjbGlja2VkLCBkZWJvdW5jaW5nIHN1YnNlcXVlbnQgY2FsbHMuXG5cdCAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcblx0ICogICAnbGVhZGluZyc6IHRydWUsXG5cdCAqICAgJ3RyYWlsaW5nJzogZmFsc2Vcblx0ICogfSkpO1xuXHQgKlxuXHQgKiAvLyBFbnN1cmUgYGJhdGNoTG9nYCBpcyBpbnZva2VkIG9uY2UgYWZ0ZXIgMSBzZWNvbmQgb2YgZGVib3VuY2VkIGNhbGxzLlxuXHQgKiB2YXIgZGVib3VuY2VkID0gXy5kZWJvdW5jZShiYXRjaExvZywgMjUwLCB7ICdtYXhXYWl0JzogMTAwMCB9KTtcblx0ICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuXHQgKiBqUXVlcnkoc291cmNlKS5vbignbWVzc2FnZScsIGRlYm91bmNlZCk7XG5cdCAqXG5cdCAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgZGVib3VuY2VkIGludm9jYXRpb24uXG5cdCAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGRlYm91bmNlZC5jYW5jZWwpO1xuXHQgKi9cblx0ZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuXHQgIHZhciBsYXN0QXJncyxcblx0ICAgICAgbGFzdFRoaXMsXG5cdCAgICAgIG1heFdhaXQsXG5cdCAgICAgIHJlc3VsdCxcblx0ICAgICAgdGltZXJJZCxcblx0ICAgICAgbGFzdENhbGxUaW1lLFxuXHQgICAgICBsYXN0SW52b2tlVGltZSA9IDAsXG5cdCAgICAgIGxlYWRpbmcgPSBmYWxzZSxcblx0ICAgICAgbWF4aW5nID0gZmFsc2UsXG5cdCAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblx0XG5cdCAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcblx0ICB9XG5cdCAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG5cdCAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG5cdCAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG5cdCAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcblx0ICAgIG1heFdhaXQgPSBtYXhpbmcgPyBuYXRpdmVNYXgodG9OdW1iZXIob3B0aW9ucy5tYXhXYWl0KSB8fCAwLCB3YWl0KSA6IG1heFdhaXQ7XG5cdCAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaW52b2tlRnVuYyh0aW1lKSB7XG5cdCAgICB2YXIgYXJncyA9IGxhc3RBcmdzLFxuXHQgICAgICAgIHRoaXNBcmcgPSBsYXN0VGhpcztcblx0XG5cdCAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuXHQgICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuXHQgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG5cdCAgICAvLyBSZXNldCBhbnkgYG1heFdhaXRgIHRpbWVyLlxuXHQgICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuXHQgICAgLy8gU3RhcnQgdGhlIHRpbWVyIGZvciB0aGUgdHJhaWxpbmcgZWRnZS5cblx0ICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG5cdCAgICAvLyBJbnZva2UgdGhlIGxlYWRpbmcgZWRnZS5cblx0ICAgIHJldHVybiBsZWFkaW5nID8gaW52b2tlRnVuYyh0aW1lKSA6IHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHJlbWFpbmluZ1dhaXQodGltZSkge1xuXHQgICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcblx0ICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lLFxuXHQgICAgICAgIHJlc3VsdCA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcblx0XG5cdCAgICByZXR1cm4gbWF4aW5nID8gbmF0aXZlTWluKHJlc3VsdCwgbWF4V2FpdCAtIHRpbWVTaW5jZUxhc3RJbnZva2UpIDogcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gc2hvdWxkSW52b2tlKHRpbWUpIHtcblx0ICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG5cdCAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZTtcblx0XG5cdCAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuXHQgICAgLy8gdHJhaWxpbmcgZWRnZSwgdGhlIHN5c3RlbSB0aW1lIGhhcyBnb25lIGJhY2t3YXJkcyBhbmQgd2UncmUgdHJlYXRpbmdcblx0ICAgIC8vIGl0IGFzIHRoZSB0cmFpbGluZyBlZGdlLCBvciB3ZSd2ZSBoaXQgdGhlIGBtYXhXYWl0YCBsaW1pdC5cblx0ICAgIHJldHVybiBsYXN0Q2FsbFRpbWUgPT09IHVuZGVmaW5lZCB8fCB0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0IHx8IHRpbWVTaW5jZUxhc3RDYWxsIDwgMCB8fCBtYXhpbmcgJiYgdGltZVNpbmNlTGFzdEludm9rZSA+PSBtYXhXYWl0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuXHQgICAgdmFyIHRpbWUgPSBub3coKTtcblx0ICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcblx0ICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcblx0ICAgIH1cblx0ICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuXHQgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG5cdCAgICB0aW1lcklkID0gdW5kZWZpbmVkO1xuXHRcblx0ICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cblx0ICAgIC8vIGRlYm91bmNlZCBhdCBsZWFzdCBvbmNlLlxuXHQgICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG5cdCAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuXHQgICAgfVxuXHQgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBjYW5jZWwoKSB7XG5cdCAgICBpZiAodGltZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcblx0ICAgIH1cblx0ICAgIGxhc3RJbnZva2VUaW1lID0gMDtcblx0ICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdW5kZWZpbmVkO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZmx1c2goKSB7XG5cdCAgICByZXR1cm4gdGltZXJJZCA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogdHJhaWxpbmdFZGdlKG5vdygpKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcblx0ICAgIHZhciB0aW1lID0gbm93KCksXG5cdCAgICAgICAgaXNJbnZva2luZyA9IHNob3VsZEludm9rZSh0aW1lKTtcblx0XG5cdCAgICBsYXN0QXJncyA9IGFyZ3VtZW50cztcblx0ICAgIGxhc3RUaGlzID0gdGhpcztcblx0ICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG5cdFxuXHQgICAgaWYgKGlzSW52b2tpbmcpIHtcblx0ICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIHJldHVybiBsZWFkaW5nRWRnZShsYXN0Q2FsbFRpbWUpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChtYXhpbmcpIHtcblx0ICAgICAgICAvLyBIYW5kbGUgaW52b2NhdGlvbnMgaW4gYSB0aWdodCBsb29wLlxuXHQgICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG5cdCAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9XG5cdCAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcblx0ICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcblx0ICByZXR1cm4gZGVib3VuY2VkO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG5cdCAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcblx0ICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3Qoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChudWxsKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHZhbHVlKTtcblx0ICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG5cdCAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKHt9KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodmFsdWUpKSA9PSAnb2JqZWN0Jztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNTeW1ib2woJ2FiYycpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcblx0ICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodmFsdWUpKSA9PSAnc3ltYm9sJyB8fCBpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG51bWJlci5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy50b051bWJlcigzLjIpO1xuXHQgKiAvLyA9PiAzLjJcblx0ICpcblx0ICogXy50b051bWJlcihOdW1iZXIuTUlOX1ZBTFVFKTtcblx0ICogLy8gPT4gNWUtMzI0XG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoSW5maW5pdHkpO1xuXHQgKiAvLyA9PiBJbmZpbml0eVxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKCczLjInKTtcblx0ICogLy8gPT4gMy4yXG5cdCAqL1xuXHRmdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIE5BTjtcblx0ICB9XG5cdCAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuXHQgICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuXHQgICAgdmFsdWUgPSBpc09iamVjdChvdGhlcikgPyBvdGhlciArICcnIDogb3RoZXI7XG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuXHQgIH1cblx0ICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG5cdCAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcblx0ICByZXR1cm4gaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KSA6IHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWU7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX2RvbVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHR2YXIgX2NvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIFNlYXJjaEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gU2VhcmNoRWxlbWVudCgpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgIF9yZWYkaGFuZGxlU3VibWl0ID0gX3JlZi5oYW5kbGVTdWJtaXQsXG5cdCAgICAgICAgaGFuZGxlU3VibWl0ID0gX3JlZiRoYW5kbGVTdWJtaXQgPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uICgpIHt9IDogX3JlZiRoYW5kbGVTdWJtaXQsXG5cdCAgICAgICAgX3JlZiRzZWFyY2hMYWJlbCA9IF9yZWYuc2VhcmNoTGFiZWwsXG5cdCAgICAgICAgc2VhcmNoTGFiZWwgPSBfcmVmJHNlYXJjaExhYmVsID09PSB1bmRlZmluZWQgPyAnc2VhcmNoJyA6IF9yZWYkc2VhcmNoTGFiZWwsXG5cdCAgICAgICAgX3JlZiRjbGFzc05hbWVzID0gX3JlZi5jbGFzc05hbWVzLFxuXHQgICAgICAgIGNsYXNzTmFtZXMgPSBfcmVmJGNsYXNzTmFtZXMgPT09IHVuZGVmaW5lZCA/IHt9IDogX3JlZiRjbGFzc05hbWVzO1xuXHRcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZWFyY2hFbGVtZW50KTtcblx0XG5cdCAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgWydnZW9zZWFyY2gnLCBjbGFzc05hbWVzLmNvbnRhaW5lcl0uam9pbignICcpKTtcblx0ICAgIHZhciBmb3JtID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZm9ybScsIFsnJywgY2xhc3NOYW1lcy5mb3JtXS5qb2luKCcgJyksIGNvbnRhaW5lcik7XG5cdCAgICB2YXIgaW5wdXQgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdpbnB1dCcsIFsnZ2xhc3MnLCBjbGFzc05hbWVzLmlucHV0XS5qb2luKCcgJyksIGZvcm0pO1xuXHRcblx0ICAgIGlucHV0LnR5cGUgPSAndGV4dCc7XG5cdCAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHNlYXJjaExhYmVsO1xuXHRcblx0ICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgX3RoaXMub25JbnB1dChlKTtcblx0ICAgIH0sIGZhbHNlKTtcblx0ICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgX3RoaXMub25LZXlVcChlKTtcblx0ICAgIH0sIGZhbHNlKTtcblx0ICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgX3RoaXMub25LZXlQcmVzcyhlKTtcblx0ICAgIH0sIGZhbHNlKTtcblx0ICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgX3RoaXMub25Gb2N1cyhlKTtcblx0ICAgIH0sIGZhbHNlKTtcblx0ICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbkJsdXIoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdFxuXHQgICAgdGhpcy5lbGVtZW50cyA9IHsgY29udGFpbmVyOiBjb250YWluZXIsIGZvcm06IGZvcm0sIGlucHV0OiBpbnB1dCB9O1xuXHQgICAgdGhpcy5oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoU2VhcmNoRWxlbWVudCwgW3tcblx0ICAgIGtleTogJ29uRm9jdXMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uRm9jdXMoKSB7XG5cdCAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKSh0aGlzLmVsZW1lbnRzLmZvcm0sICdhY3RpdmUnKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvbkJsdXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQmx1cigpIHtcblx0ICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKHRoaXMuZWxlbWVudHMuZm9ybSwgJ2FjdGl2ZScpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uU3VibWl0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvblN1Ym1pdChldmVudCkge1xuXHQgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuXHQgICAgICAgIHZhciBfZWxlbWVudHMsIGlucHV0LCBjb250YWluZXI7XG5cdFxuXHQgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFxuXHQgICAgICAgIF9lbGVtZW50cyA9IHRoaXMuZWxlbWVudHMsIGlucHV0ID0gX2VsZW1lbnRzLmlucHV0LCBjb250YWluZXIgPSBfZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnZXJyb3InKTtcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuXHRcblx0ICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVTdWJtaXQoeyBxdWVyeTogaW5wdXQudmFsdWUgfSkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcblx0ICAgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG5cdCAgICAgICAgICByZXR1cm4gJHJldHVybigpO1xuXHQgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uSW5wdXQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uSW5wdXQoKSB7XG5cdCAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2Vycm9yJyk7XG5cdCAgICAgICAgdGhpcy5oYXNFcnJvciA9IGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb25LZXlVcCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25LZXlVcChldmVudCkge1xuXHQgICAgICB2YXIgX2VsZW1lbnRzMiA9IHRoaXMuZWxlbWVudHMsXG5cdCAgICAgICAgICBjb250YWluZXIgPSBfZWxlbWVudHMyLmNvbnRhaW5lcixcblx0ICAgICAgICAgIGlucHV0ID0gX2VsZW1lbnRzMi5pbnB1dDtcblx0XG5cdCAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBfY29uc3RhbnRzLkVTQ0FQRV9LRVkpIHtcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblx0XG5cdCAgICAgICAgaW5wdXQudmFsdWUgPSAnJztcblx0XG5cdCAgICAgICAgZG9jdW1lbnQuYm9keS5mb2N1cygpO1xuXHQgICAgICAgIGRvY3VtZW50LmJvZHkuYmx1cigpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb25LZXlQcmVzcycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25LZXlQcmVzcyhldmVudCkge1xuXHQgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gX2NvbnN0YW50cy5FTlRFUl9LRVkpIHtcblx0ICAgICAgICB0aGlzLm9uU3VibWl0KGV2ZW50KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NldFF1ZXJ5Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRRdWVyeShxdWVyeSkge1xuXHQgICAgICB2YXIgaW5wdXQgPSB0aGlzLmVsZW1lbnRzLmlucHV0O1xuXHRcblx0ICAgICAgaW5wdXQudmFsdWUgPSBxdWVyeTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBTZWFyY2hFbGVtZW50O1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBTZWFyY2hFbGVtZW50O1xuXG4vKioqLyB9LFxuLyogMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXG5cdHZhciBjcmVhdGVFbGVtZW50ID0gZXhwb3J0cy5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlRWxlbWVudChlbGVtZW50KSB7XG5cdCAgdmFyIGNsYXNzTmFtZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnO1xuXHQgIHZhciBwYXJlbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IG51bGw7XG5cdFxuXHQgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudCk7XG5cdCAgZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lcztcblx0XG5cdCAgaWYgKHBhcmVudCkge1xuXHQgICAgcGFyZW50LmFwcGVuZENoaWxkKGVsKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBlbDtcblx0fTtcblx0XG5cdHZhciBjcmVhdGVTY3JpcHRFbGVtZW50ID0gZXhwb3J0cy5jcmVhdGVTY3JpcHRFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlU2NyaXB0RWxlbWVudCh1cmwsIGNiKSB7XG5cdCAgdmFyIHNjcmlwdCA9IGNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcsIG51bGwsIGRvY3VtZW50LmJvZHkpO1xuXHQgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9qYXZhc2NyaXB0Jyk7XG5cdFxuXHQgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuXHQgICAgd2luZG93W2NiXSA9IGZ1bmN0aW9uIChqc29uKSB7XG5cdCAgICAgIHNjcmlwdC5yZW1vdmUoKTtcblx0ICAgICAgZGVsZXRlIHdpbmRvd1tjYl07XG5cdCAgICAgIHJlc29sdmUoanNvbik7XG5cdCAgICB9O1xuXHRcblx0ICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHVybCk7XG5cdCAgfSk7XG5cdH07XG5cdFxuXHR2YXIgYWRkQ2xhc3NOYW1lID0gZXhwb3J0cy5hZGRDbGFzc05hbWUgPSBmdW5jdGlvbiBhZGRDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG5cdCAgaWYgKGVsZW1lbnQgJiYgIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcblx0ICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciByZW1vdmVDbGFzc05hbWUgPSBleHBvcnRzLnJlbW92ZUNsYXNzTmFtZSA9IGZ1bmN0aW9uIHJlbW92ZUNsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWUpIHtcblx0ICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG5cdCAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcblx0ICB9XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0dmFyIEVOVEVSX0tFWSA9IGV4cG9ydHMuRU5URVJfS0VZID0gMTM7XG5cdHZhciBFU0NBUEVfS0VZID0gZXhwb3J0cy5FU0NBUEVfS0VZID0gMjc7XG5cdHZhciBBUlJPV19ET1dOX0tFWSA9IGV4cG9ydHMuQVJST1dfRE9XTl9LRVkgPSA0MDtcblx0dmFyIEFSUk9XX1VQX0tFWSA9IGV4cG9ydHMuQVJST1dfVVBfS0VZID0gMzg7XG5cdHZhciBBUlJPV19MRUZUX0tFWSA9IGV4cG9ydHMuQVJST1dfTEVGVF9LRVkgPSAzNztcblx0dmFyIEFSUk9XX1JJR0hUX0tFWSA9IGV4cG9ydHMuQVJST1dfUklHSFRfS0VZID0gMzk7XG5cdFxuXHR2YXIgU1BFQ0lBTF9LRVlTID0gZXhwb3J0cy5TUEVDSUFMX0tFWVMgPSBbRU5URVJfS0VZLCBFU0NBUEVfS0VZLCBBUlJPV19ET1dOX0tFWSwgQVJST1dfVVBfS0VZLCBBUlJPV19MRUZUX0tFWSwgQVJST1dfUklHSFRfS0VZXTtcblxuLyoqKi8gfSxcbi8qIDE2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfZG9tVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBjeCA9IGZ1bmN0aW9uIGN4KCkge1xuXHQgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBjbGFzc25hbWVzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG5cdCAgICBjbGFzc25hbWVzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGNsYXNzbmFtZXMuam9pbignICcpLnRyaW0oKTtcblx0fTtcblx0XG5cdHZhciBSZXN1bHRMaXN0ID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIFJlc3VsdExpc3QoKSB7XG5cdCAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgX3JlZiRoYW5kbGVDbGljayA9IF9yZWYuaGFuZGxlQ2xpY2ssXG5cdCAgICAgICAgaGFuZGxlQ2xpY2sgPSBfcmVmJGhhbmRsZUNsaWNrID09PSB1bmRlZmluZWQgPyBmdW5jdGlvbiAoKSB7fSA6IF9yZWYkaGFuZGxlQ2xpY2ssXG5cdCAgICAgICAgX3JlZiRjbGFzc05hbWVzID0gX3JlZi5jbGFzc05hbWVzLFxuXHQgICAgICAgIGNsYXNzTmFtZXMgPSBfcmVmJGNsYXNzTmFtZXMgPT09IHVuZGVmaW5lZCA/IHt9IDogX3JlZiRjbGFzc05hbWVzO1xuXHRcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZXN1bHRMaXN0KTtcblx0XG5cdCAgICBfaW5pdGlhbGlzZVByb3BzLmNhbGwodGhpcyk7XG5cdFxuXHQgICAgdGhpcy5wcm9wcyA9IHsgaGFuZGxlQ2xpY2s6IGhhbmRsZUNsaWNrLCBjbGFzc05hbWVzOiBjbGFzc05hbWVzIH07XG5cdCAgICB0aGlzLnNlbGVjdGVkID0gLTE7XG5cdFxuXHQgICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIGN4KCdyZXN1bHRzJywgY2xhc3NOYW1lcy5jb250YWluZXIpKTtcblx0ICAgIHZhciByZXN1bHRJdGVtID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgY3goY2xhc3NOYW1lcy5pdGVtKSk7XG5cdFxuXHQgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrLCB0cnVlKTtcblx0ICAgIHRoaXMuZWxlbWVudHMgPSB7IGNvbnRhaW5lcjogY29udGFpbmVyLCByZXN1bHRJdGVtOiByZXN1bHRJdGVtIH07XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUmVzdWx0TGlzdCwgW3tcblx0ICAgIGtleTogJ3JlbmRlcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICB2YXIgcmVzdWx0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107XG5cdCAgICAgIHZhciBfZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzLFxuXHQgICAgICAgICAgY29udGFpbmVyID0gX2VsZW1lbnRzLmNvbnRhaW5lcixcblx0ICAgICAgICAgIHJlc3VsdEl0ZW0gPSBfZWxlbWVudHMucmVzdWx0SXRlbTtcblx0XG5cdCAgICAgIHRoaXMuY2xlYXIoKTtcblx0XG5cdCAgICAgIHJlc3VsdHMuZm9yRWFjaChmdW5jdGlvbiAocmVzdWx0LCBpZHgpIHtcblx0ICAgICAgICB2YXIgY2hpbGQgPSByZXN1bHRJdGVtLmNsb25lTm9kZSh0cnVlKTtcblx0ICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoJ2RhdGEta2V5JywgaWR4KTtcblx0ICAgICAgICBjaGlsZC5pbm5lckhUTUwgPSByZXN1bHQubGFiZWw7XG5cdCAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNoaWxkKTtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLnJlc3VsdHMgPSByZXN1bHRzO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NlbGVjdCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0KGluZGV4KSB7XG5cdCAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25mdXNpbmctYXJyb3dcblx0XG5cdCAgICAgIEFycmF5LmZyb20oY29udGFpbmVyLmNoaWxkcmVuKS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCwgaWR4KSB7XG5cdCAgICAgICAgcmV0dXJuIGlkeCA9PT0gaW5kZXggPyAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY2hpbGQsICdhY3RpdmUnKSA6ICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjaGlsZCwgJ2FjdGl2ZScpO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIHRoaXMuc2VsZWN0ZWQgPSBpbmRleDtcblx0ICAgICAgcmV0dXJuIHRoaXMucmVzdWx0c1tpbmRleF07XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnY291bnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNvdW50KCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5yZXN1bHRzLmxlbmd0aDtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdjbGVhcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7XG5cdCAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICAgIHRoaXMuc2VsZWN0ZWQgPSAtMTtcblx0XG5cdCAgICAgIHdoaWxlIChjb250YWluZXIubGFzdENoaWxkKSB7XG5cdCAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5sYXN0Q2hpbGQpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUmVzdWx0TGlzdDtcblx0fSgpO1xuXHRcblx0dmFyIF9pbml0aWFsaXNlUHJvcHMgPSBmdW5jdGlvbiBfaW5pdGlhbGlzZVByb3BzKCkge1xuXHQgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgIHRoaXMub25DbGljayA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBfcmVmMiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgdGFyZ2V0ID0gX3JlZjIudGFyZ2V0O1xuXHRcblx0ICAgIHZhciBoYW5kbGVDbGljayA9IF90aGlzLnByb3BzLmhhbmRsZUNsaWNrO1xuXHQgICAgdmFyIGNvbnRhaW5lciA9IF90aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICBpZiAodGFyZ2V0LnBhcmVudE5vZGUgIT09IGNvbnRhaW5lciB8fCAhdGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1rZXknKSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGlkeCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEta2V5Jyk7XG5cdCAgICB2YXIgcmVzdWx0ID0gX3RoaXMucmVzdWx0c1tpZHhdO1xuXHQgICAgaGFuZGxlQ2xpY2soeyByZXN1bHQ6IHJlc3VsdCB9KTtcblx0ICB9O1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUmVzdWx0TGlzdDtcblxuLyoqKi8gfSxcbi8qIDE3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcblx0ICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG5cdCAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG5cdCAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1yZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9wcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0dmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cdFxuXHR2YXIgX2RvbVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG5cdCAgaWYgKCFzZWxmKSB7XG5cdCAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG5cdCAgfXJldHVybiBjYWxsICYmICgodHlwZW9mIGNhbGwgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGNhbGwpKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcblx0ICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArICh0eXBlb2Ygc3VwZXJDbGFzcyA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcblx0ICB9c3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTtpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG5cdCAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblx0XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZW5kcG9pbnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG5cdCAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2wsXG5cdCAgICAgICAgICBqc29ucCA9IF9yZWYuanNvbnA7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblx0XG5cdCAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuXHQgICAgICAgIHF1ZXJ5OiBxdWVyeSxcblx0ICAgICAgICBqc29ucDoganNvbnBcblx0ICAgICAgfSkpO1xuXHRcblx0ICAgICAgcmV0dXJuIHByb3RvY29sICsgJy8vZGV2LnZpcnR1YWxlYXJ0aC5uZXQvUkVTVC92MS9Mb2NhdGlvbnM/JyArIHBhcmFtU3RyaW5nO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BhcnNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuXHQgICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cdFxuXHQgICAgICBpZiAoZGF0YS5yZXNvdXJjZVNldHMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuIFtdO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gZGF0YS5yZXNvdXJjZVNldHNbMF0ucmVzb3VyY2VzLm1hcChmdW5jdGlvbiAocikge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICB4OiByLnBvaW50LmNvb3JkaW5hdGVzWzFdLFxuXHQgICAgICAgICAgeTogci5wb2ludC5jb29yZGluYXRlc1swXSxcblx0ICAgICAgICAgIGxhYmVsOiByLmFkZHJlc3MuZm9ybWF0dGVkQWRkcmVzcyxcblx0ICAgICAgICAgIGJvdW5kczogW1tyLmJib3hbMF0sIHIuYmJveFsxXV0sIC8vIHMsIHdcblx0ICAgICAgICAgIFtyLmJib3hbMl0sIHIuYmJveFszXV1dLFxuXHQgICAgICAgICAgcmF3OiByXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2VhcmNoJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZWFyY2goX3JlZjMpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgICB2YXIgcXVlcnksIHByb3RvY29sLCBqc29ucCwgdXJsLCBqc29uO1xuXHQgICAgICAgIHF1ZXJ5ID0gX3JlZjMucXVlcnk7XG5cdFxuXHQgICAgICAgIHByb3RvY29sID0gfmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoJ2h0dHAnKSA/IGxvY2F0aW9uLnByb3RvY29sIDogJ2h0dHBzOic7XG5cdFxuXHQgICAgICAgIGpzb25wID0gJ0JJTkdfSlNPTlBfQ0JfJyArIERhdGUubm93KCk7XG5cdCAgICAgICAgdXJsID0gdGhpcy5lbmRwb2ludCh7IHF1ZXJ5OiBxdWVyeSwgcHJvdG9jb2w6IHByb3RvY29sLCBqc29ucDoganNvbnAgfSk7XG5cdFxuXHQgICAgICAgIHJldHVybiAoMCwgX2RvbVV0aWxzLmNyZWF0ZVNjcmlwdEVsZW1lbnQpKHVybCwganNvbnApLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG5cdCAgICAgICAgICBqc29uID0gJGF3YWl0XzE7XG5cdCAgICAgICAgICByZXR1cm4gJHJldHVybih0aGlzLnBhcnNlKHsgZGF0YToganNvbiB9KSk7XG5cdCAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9LFxuLyogMTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBQcm92aWRlcigpIHtcblx0ICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG5cdCAgICBrZXk6ICdnZXRQYXJhbVN0cmluZycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFyYW1TdHJpbmcocGFyYW1zKSB7XG5cdCAgICAgIHJldHVybiBPYmplY3Qua2V5cyhwYXJhbXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtc1trZXldKTtcblx0ICAgICAgfSkuam9pbignJicpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NlYXJjaCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKF9yZWYpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgICB2YXIgcXVlcnksIHByb3RvY29sLCB1cmwsIHJlcXVlc3QsIGpzb247XG5cdCAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5O1xuXHRcblx0ICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuXHQgICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCB9KTtcblx0XG5cdCAgICAgICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcblx0ICAgICAgICAgIHJlcXVlc3QgPSAkYXdhaXRfMTtcblx0ICAgICAgICAgIHJldHVybiByZXF1ZXN0Lmpzb24oKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMikge1xuXHQgICAgICAgICAgICBqc29uID0gJGF3YWl0XzI7XG5cdCAgICAgICAgICAgIHJldHVybiAkcmV0dXJuKHRoaXMucGFyc2UoeyBkYXRhOiBqc29uIH0pKTtcblx0ICAgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSxcbi8qIDE5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfXJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcblx0ICBpZiAoIXNlbGYpIHtcblx0ICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcblx0ICB9cmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGNhbGwpKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcblx0ICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArICh0eXBlb2Ygc3VwZXJDbGFzcyA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7XG5cdCAgfXN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7aWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuXHQgIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2VuZHBvaW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcblx0ICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuXHQgICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcblx0ICAgICAgICBmOiAnanNvbicsXG5cdCAgICAgICAgdGV4dDogcXVlcnlcblx0ICAgICAgfSkpO1xuXHRcblx0ICAgICAgcmV0dXJuIHByb3RvY29sICsgJy8vZ2VvY29kZS5hcmNnaXMuY29tL2FyY2dpcy9yZXN0L3NlcnZpY2VzL1dvcmxkL0dlb2NvZGVTZXJ2ZXIvZmluZD8nICsgcGFyYW1TdHJpbmc7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncGFyc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG5cdCAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblx0XG5cdCAgICAgIHJldHVybiBkYXRhLmxvY2F0aW9ucy5tYXAoZnVuY3Rpb24gKHIpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgeDogci5mZWF0dXJlLmdlb21ldHJ5LngsXG5cdCAgICAgICAgICB5OiByLmZlYXR1cmUuZ2VvbWV0cnkueSxcblx0ICAgICAgICAgIGxhYmVsOiByLm5hbWUsXG5cdCAgICAgICAgICBib3VuZHM6IFtbci5leHRlbnQueW1pbiwgci5leHRlbnQueG1pbl0sIC8vIHMsIHdcblx0ICAgICAgICAgIFtyLmV4dGVudC55bWF4LCByLmV4dGVudC54bWF4XV0sXG5cdCAgICAgICAgICByYXc6IHJcblx0ICAgICAgICB9O1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBQcm92aWRlcjtcblx0fShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cbi8qKiovIH0sXG4vKiAyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcblx0ICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG5cdCAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG5cdCAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1yZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9wcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0dmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG5cdCAgaWYgKCFzZWxmKSB7XG5cdCAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG5cdCAgfXJldHVybiBjYWxsICYmICgodHlwZW9mIGNhbGwgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG5cdCAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihzdXBlckNsYXNzKSkpO1xuXHQgIH1zdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pO2lmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcblx0fVxuXHRcblx0dmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcblx0ICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXHRcblx0ICBmdW5jdGlvbiBQcm92aWRlcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG5cdCAgICBrZXk6ICdlbmRwb2ludCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG5cdCAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcblx0ICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblx0XG5cdCAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG5cdCAgICAgICAgYWRkcmVzczogcXVlcnlcblx0ICAgICAgfSkpO1xuXHRcblx0ICAgICAgLy8gZ29vZ2xlIHJlcXVpcmVzIGEgc2VjdXJlIGNvbm5lY3Rpb24gd2hlbiB1c2luZyBhcGkga2V5c1xuXHQgICAgICB2YXIgcHJvdG8gPSBwYXJhbXMgJiYgcGFyYW1zLmtleSA/ICdodHRwczonIDogcHJvdG9jb2w7XG5cdCAgICAgIHJldHVybiBwcm90byArICcvL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uPycgKyBwYXJhbVN0cmluZztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcblx0ICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXHRcblx0ICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cy5tYXAoZnVuY3Rpb24gKHIpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgeDogci5nZW9tZXRyeS5sb2NhdGlvbi5sbmcsXG5cdCAgICAgICAgICB5OiByLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCxcblx0ICAgICAgICAgIGxhYmVsOiByLmZvcm1hdHRlZF9hZGRyZXNzLFxuXHQgICAgICAgICAgYm91bmRzOiBbW3IuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0LmxhdCwgci5nZW9tZXRyeS52aWV3cG9ydC5zb3V0aHdlc3QubG5nXSwgLy8gcywgd1xuXHQgICAgICAgICAgW3IuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0LmxhdCwgci5nZW9tZXRyeS52aWV3cG9ydC5ub3J0aGVhc3QubG5nXV0sXG5cdCAgICAgICAgICByYXc6IHJcblx0ICAgICAgICB9O1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBQcm92aWRlcjtcblx0fShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cbi8qKiovIH0sXG4vKiAyMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcblx0ICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG5cdCAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG5cdCAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1yZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9wcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0dmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG5cdCAgaWYgKCFzZWxmKSB7XG5cdCAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG5cdCAgfXJldHVybiBjYWxsICYmICgodHlwZW9mIGNhbGwgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG5cdCAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihzdXBlckNsYXNzKSkpO1xuXHQgIH1zdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pO2lmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcblx0fVxuXHRcblx0dmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcblx0ICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXHRcblx0ICBmdW5jdGlvbiBQcm92aWRlcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG5cdCAgICBrZXk6ICdlbmRwb2ludCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG5cdCAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcblx0ICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblx0XG5cdCAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG5cdCAgICAgICAgZm9ybWF0OiAnanNvbicsXG5cdCAgICAgICAgcTogcXVlcnlcblx0ICAgICAgfSkpO1xuXHRcblx0ICAgICAgcmV0dXJuIHByb3RvY29sICsgJy8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3NlYXJjaD8nICsgcGFyYW1TdHJpbmc7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncGFyc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG5cdCAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblx0XG5cdCAgICAgIHJldHVybiBkYXRhLm1hcChmdW5jdGlvbiAocikge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICB4OiByLmxvbixcblx0ICAgICAgICAgIHk6IHIubGF0LFxuXHQgICAgICAgICAgbGFiZWw6IHIuZGlzcGxheV9uYW1lLFxuXHQgICAgICAgICAgYm91bmRzOiBbW3BhcnNlRmxvYXQoci5ib3VuZGluZ2JveFswXSksIHBhcnNlRmxvYXQoci5ib3VuZGluZ2JveFsyXSldLCAvLyBzLCB3XG5cdCAgICAgICAgICBbcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzFdKSwgcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzNdKV1dLFxuXHQgICAgICAgICAgcmF3OiByXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9LFxuLyogMjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5HZXRBY3RpdmVMYXllckdyb3VwcyA9IEdldEFjdGl2ZUxheWVyR3JvdXBzO1xuXHRleHBvcnRzLlNldHVwUGFuZWwgPSBTZXR1cFBhbmVsO1xuXHRleHBvcnRzLnVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQgPSB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0O1xuXHRcblx0dmFyIF9sYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0dmFyIF9vcGFjaXR5U2xpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHR2YXIgbGF5ZXJHcm91cExheW91dCA9IFtdO1xuXHRcblx0ZnVuY3Rpb24gR2V0QWN0aXZlTGF5ZXJHcm91cHMoKSB7XG5cdCAgICByZXR1cm4gbGF5ZXJHcm91cExheW91dC5maWx0ZXIoZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXJHcm91cC5hY3RpdmU7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gU2V0dXBQYW5lbChsYXllcnMsIGxheW91dCkge1xuXHQgICAgbGF5ZXJHcm91cExheW91dCA9IGxheW91dFsnbGF5ZXItZ3JvdXBzLW9yZGVyJ107XG5cdCAgICB2YXIgbGF5ZXJHcm91cHMgPSBtYWtlTGF5ZXJHcm91cHMobGF5b3V0WydsYXllci1ncm91cHMtb3JkZXInXSk7XG5cdCAgICBtYWtlTGF5ZXJFbGVtcyhsYXllckdyb3VwcywgbGF5ZXJzKTtcblx0ICAgIG1ha2VQYW5lbERyYWdnYWJsZSgpO1xuXHQgICAgc2V0UGFuZWxTY3JvbGxIYW5kbGVyKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJyb3dzZXJJc0ludGVybmV0RXhwbG9yZXIoKSB7XG5cdCAgICB2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudDtcblx0ICAgIHJldHVybiB1YS5pbmRleE9mKCdNU0lFJykgPiAtMSB8fCB1YS5pbmRleE9mKCdydjoxMS4wJykgPiAtMTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0UGFuZWxTY3JvbGxIYW5kbGVyKCkge1xuXHQgICAgdmFyIHBhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsJyk7XG5cdCAgICBwYW5lbC5vbnNjcm9sbCA9IHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VQYW5lbERyYWdnYWJsZSgpIHtcblx0ICAgIGlmIChicm93c2VySXNJbnRlcm5ldEV4cGxvcmVyKCkpIHJldHVybjtcblx0XG5cdCAgICB2YXIgb3ZlcmxheSA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsLWRyYWctb3ZlcmxheScpO1xuXHRcblx0ICAgIG92ZXJsYXkuc3R5bGUoJ2N1cnNvcicsICdldy1yZXNpemUnKTtcblx0XG5cdCAgICBvdmVybGF5LmNhbGwoZDMuZHJhZygpLm9uKCdkcmFnJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHBhbmVsRHJhZ0V2ZW50SGFuZGxlci5jYWxsKHRoaXMpO1xuXHQgICAgfSkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwYW5lbERyYWdFdmVudEhhbmRsZXIoKSB7XG5cdCAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KCk7XG5cdCAgICB1cGRhdGVQYW5lbFdpZHRoKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKSB7XG5cdCAgICB2YXIgcGFuZWwgPSBkMy5zZWxlY3QoJyNyaWdodC1wYW5lbCcpO1xuXHQgICAgdmFyIHBhbmVsT2Zmc2V0SGVpZ2h0ID0gcGFuZWwucHJvcGVydHkoJ29mZnNldEhlaWdodCcpO1xuXHQgICAgdmFyIHBhbmVsRHJhZ092ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwtZHJhZy1vdmVybGF5Jyk7XG5cdCAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsLWhlYWRlcicpO1xuXHRcblx0ICAgIHZhciBuZXdIZWlnaHQ7XG5cdFxuXHQgICAgaWYgKHBhbmVsLmNsYXNzZWQoJ2dyYXBocy1hY3RpdmUnKSkge1xuXHQgICAgICAgIHZhciBncmFwaExpc3RFeHRyYVNwYWNlID0gNzAwO1xuXHQgICAgICAgIHZhciBncmFwaExpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JhcGgtbGlzdCcpO1xuXHQgICAgICAgIG5ld0hlaWdodCA9IGhlYWRlci5zY3JvbGxIZWlnaHQgKyBncmFwaExpc3Quc2Nyb2xsSGVpZ2h0ICsgZ3JhcGhMaXN0RXh0cmFTcGFjZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gcGFuZWwuY2xhc3NlZCgnbGF5ZXJzLWFjdGl2ZScpXG5cdCAgICAgICAgdmFyIGxheWVyTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXllci1saXN0Jyk7XG5cdCAgICAgICAgbmV3SGVpZ2h0ID0gaGVhZGVyLnNjcm9sbEhlaWdodCArIGxheWVyTGlzdC5zY3JvbGxIZWlnaHQ7XG5cdCAgICB9XG5cdCAgICBuZXdIZWlnaHQgPSBuZXdIZWlnaHQgPiBwYW5lbE9mZnNldEhlaWdodCA/IFwiXCIgKyBuZXdIZWlnaHQgKyAncHgnIDogbnVsbDtcblx0ICAgIHBhbmVsRHJhZ092ZXJsYXkuc3R5bGUuaGVpZ2h0ID0gbmV3SGVpZ2h0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVQYW5lbFdpZHRoKCkge1xuXHQgICAgdmFyIHBhbmVsID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwnKTtcblx0ICAgIHZhciBwYW5lbE1pbldpZHRoID0gK3BhbmVsLnN0eWxlKCdtaW4td2lkdGgnKS5zbGljZSgwLCAtMik7XG5cdCAgICB2YXIgcGFuZWxDbGllbnRXaWR0aCA9IHBhbmVsLnByb3BlcnR5KCdjbGllbnRXaWR0aCcpO1xuXHRcblx0ICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyYXBwZXInKTtcblx0ICAgIHZhciB3cmFwcGVyV2lkdGggPSB3cmFwcGVyLmNsaWVudFdpZHRoO1xuXHRcblx0ICAgIHZhciBtYXBXcmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcC13cmFwcGVyJyk7XG5cdFxuXHQgICAgdmFyIG1vdXNlWCA9IGQzLmV2ZW50LnNvdXJjZUV2ZW50Lng7XG5cdCAgICB2YXIgeERlbHRhID0gd3JhcHBlcldpZHRoIC0gbW91c2VYIC0gcGFuZWxDbGllbnRXaWR0aDtcblx0XG5cdCAgICB2YXIgbmV3UGFuZWxXaWR0aCA9IHBhbmVsQ2xpZW50V2lkdGggKyB4RGVsdGE7XG5cdCAgICBuZXdQYW5lbFdpZHRoID0gbmV3UGFuZWxXaWR0aCA8IHBhbmVsTWluV2lkdGggPyBwYW5lbE1pbldpZHRoIDogbmV3UGFuZWxXaWR0aCA+IHdyYXBwZXJXaWR0aCA/IHdyYXBwZXJXaWR0aCA6IG5ld1BhbmVsV2lkdGg7XG5cdCAgICBtYXBXcmFwcGVyLnN0eWxlLnBhZGRpbmdSaWdodCA9IFwiXCIgKyBuZXdQYW5lbFdpZHRoICsgJ3B4Jztcblx0ICAgIHBhbmVsLnN0eWxlKCd3aWR0aCcsIFwiXCIgKyBuZXdQYW5lbFdpZHRoICsgJ3B4Jyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYXllckdyb3VwcyhsYXlvdXQpIHtcblx0ICAgIHJldHVybiBkMy5zZWxlY3QoJyNsYXllci1saXN0Jykuc2VsZWN0QWxsKCcubGF5ZXItZ3JvdXAtd3JhcHBlcicpLmRhdGEobGF5b3V0KS5lbnRlcigpLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAtd3JhcHBlcicpLmF0dHIoJ2lkJywgZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXJHcm91cC5pZDtcblx0ICAgIH0pLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyR3JvdXAuYWN0aXZlO1xuXHQgICAgfSkuZWFjaChmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwLWJ0biBidG4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHRcblx0ICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgdG9nZ2xlIHRoZSBsYXllciBsaXN0IGFjY29yZGlhbnNcblx0ICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbGF5ZXIgbGlzdCcsXG5cdCAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ3RvZ2dsZSAnICsgIWxheWVyR3JvdXAuYWN0aXZlLFxuXHQgICAgICAgICAgICAgICAgZXZlbnRMYWJlbDogbGF5ZXJHcm91cC5uYW1lLFxuXHQgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAgICAgbGF5ZXJHcm91cC5hY3RpdmUgPSAhbGF5ZXJHcm91cC5hY3RpdmU7XG5cdCAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLnBhcmVudE5vZGUpLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBsYXllckdyb3VwLmFjdGl2ZTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKTtcblx0ICAgICAgICAgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0ICAgICAgICB9KS50ZXh0KGxheWVyR3JvdXAubmFtZSk7XG5cdCAgICB9KS5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYXllckVsZW1zKGxheWVyR3JvdXBzLCBsYXllcnMpIHtcblx0ICAgIGxheWVyR3JvdXBzLnNlbGVjdEFsbCgnLmxheWVyLXNlbGVjdCcpLmRhdGEoZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXJzW2xheWVyR3JvdXAuaWRdO1xuXHQgICAgfSkuZW50ZXIoKS5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLXNlbGVjdCcpLmVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgdmFyIGdyb3VwTmFtZSA9IHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkO1xuXHQgICAgICAgIHZhciBsYXllckRpdiA9IGQzLnNlbGVjdCh0aGlzKTtcblx0ICAgICAgICBtYWtlQ2hlY2tib3gobGF5ZXIsIGxheWVyRGl2KTtcblx0ICAgICAgICBtYWtlTGFiZWwobGF5ZXIsIGxheWVyRGl2KTtcblx0ICAgICAgICBtYWtlRGVzY3JpcHRpb24obGF5ZXIsIGxheWVyRGl2KTtcblx0ICAgICAgICBsYXllckRpdi5ub2RlKCkuYXBwZW5kQ2hpbGQobWFrZUxheWVyVG9vbHMobGF5ZXIpKTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlQ2hlY2tib3gobGF5ZXIsIGxheWVyRGl2KSB7XG5cdCAgICBsYXllckRpdi5hcHBlbmQoJ2lucHV0JykuYXR0cigndHlwZScsICdjaGVja2JveCcpLmF0dHIoJ2lkJywgZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyLmlkO1xuXHQgICAgfSkuYXR0cignY2hlY2tlZCcsIGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHJldHVybiBsYXllci5hY3RpdmUgPyAnY2hlY2tlZCcgOiBudWxsO1xuXHQgICAgfSkub24oJ2NsaWNrJywgZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgKDAsIF9sYXllci50b2dnbGVMYXllcikobGF5ZXIpO1xuXHQgICAgICAgIGxheWVyRGl2LnNlbGVjdCgnLmxheWVyLXRvb2xzLXdyYXBwZXInKS5jbGFzc2VkKCdhY3RpdmUnLCBsYXllci5hY3RpdmUpO1xuXHQgICAgICAgIGlmIChsYXllci5hY3RpdmUpIHtcblx0ICAgICAgICAgICAgdmFyIHNsaWRlckhhbmRsZSA9IGxheWVyRGl2LnNlbGVjdCgnLm9wYWNpdHktc2xpZGVyLWhhbmRsZScpLm5vZGUoKTtcblx0ICAgICAgICAgICAgKDAsIF9vcGFjaXR5U2xpZGVyLnNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbikobGF5ZXIsIHNsaWRlckhhbmRsZSwgbGF5ZXIub3BhY2l0aXkpO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGFiZWwobGF5ZXIsIGxheWVyRGl2KSB7XG5cdCAgICBsYXllckRpdi5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWxhYmVsLXdyYXBwZXInKS5hcHBlbmQoJ2xhYmVsJykuYXR0cignZm9yJywgZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyLmlkO1xuXHQgICAgfSkuYXR0cignY2xhc3MnLCAnbGF5ZXItbGFiZWwnKS5odG1sKGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHJldHVybiBsYXllci5uYW1lO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VEZXNjcmlwdGlvbihsYXllciwgbGF5ZXJEaXYpIHtcblx0ICAgIGlmIChsYXllci5pbmZvICYmIGxheWVyLmluZm8gIT09ICcnKSB7XG5cdCAgICAgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1pbmZvLWJ0bi13cmFwcGVyJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5zZWxlY3QoJy5sYXllci1pbmZvLXdyYXBwZXInKS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdFxuXHQgICAgICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgY2xpY2sgb24gbGF5ZXIgaW5mb1xuXHQgICAgICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2xheWVyIGluZm8nLFxuXHQgICAgICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2tlZCcsXG5cdCAgICAgICAgICAgICAgICAgICAgZXZlbnRMYWJlbDogbGF5ZXIubmFtZSArIFwiIFwiICsgIWQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdhY3RpdmUnKSxcblx0ICAgICAgICAgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAgICAgICAgIHJldHVybiAhZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ2FjdGl2ZScpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9KS5hcHBlbmQoJ2ltZycpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8taWNvbicpLmF0dHIoJ3NyYycsICdpbWdzL21vcmUtaW5mby1pY29uLTY0eDY0LnBuZycpLmF0dHIoXCJhbHRcIiwgXCJSZWFkIG1vcmUgYWJvdXQgdGhlIFwiICsgbGF5ZXIubmFtZSArIFwiIGxheWVyXCIpLmF0dHIoXCJ0aXRsZVwiLCBcIlJlYWQgbW9yZSBhYm91dCB0aGUgXCIgKyBsYXllci5uYW1lICsgXCIgbGF5ZXJcIik7XG5cdFxuXHQgICAgICAgIGxheWVyRGl2LmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby13cmFwcGVyJykudGV4dChmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGxheWVyLmluZm87XG5cdCAgICAgICAgfSk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYXllclRvb2xzKGxheWVyLCBsYXllckRpdikge1xuXHQgICAgdmFyIGxheWVyVG9vbHNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIGxheWVyVG9vbHNEaXYuY2xhc3NMaXN0LmFkZCgnbGF5ZXItdG9vbHMtd3JhcHBlcicpO1xuXHQgICAgaWYgKGxheWVyLmFjdGl2ZSkgbGF5ZXJUb29sc0Rpdi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblx0XG5cdCAgICB2YXIgb3BhY2l0eVNsaWRlciA9ICgwLCBfb3BhY2l0eVNsaWRlci5tYWtlT3BhY2l0eVNsaWRlcikobGF5ZXIpO1xuXHQgICAgdmFyIGxlZ2VuZCA9IG1ha2VMZWdlbmQobGF5ZXIpO1xuXHRcblx0ICAgIGxheWVyVG9vbHNEaXYuYXBwZW5kQ2hpbGQobGVnZW5kKTtcblx0ICAgIGxheWVyVG9vbHNEaXYuYXBwZW5kQ2hpbGQob3BhY2l0eVNsaWRlcik7XG5cdFxuXHQgICAgcmV0dXJuIGxheWVyVG9vbHNEaXY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMZWdlbmQobGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyKSB7XG5cdCAgICB2YXIgbGVnZW5kV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgdmFyIGxlZ2VuZEltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXHQgICAgbGVnZW5kV3JhcHBlci5jbGFzc0xpc3QuYWRkKCdsZWdlbmQtd3JhcHBlcicpO1xuXHQgICAgbGVnZW5kSW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgbGF5ZXIubGVnZW5kKTtcblx0ICAgIGxlZ2VuZFdyYXBwZXIuYXBwZW5kQ2hpbGQobGVnZW5kSW1nKTtcblx0ICAgIHJldHVybiBsZWdlbmRXcmFwcGVyO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkdldEN1cnJlbnRMYXllcnMgPSBHZXRDdXJyZW50TGF5ZXJzO1xuXHRleHBvcnRzLkNyZWF0ZURlZmF1bHRMYXllcnMgPSBDcmVhdGVEZWZhdWx0TGF5ZXJzO1xuXHRleHBvcnRzLnRvZ2dsZUxheWVyID0gdG9nZ2xlTGF5ZXI7XG5cdGV4cG9ydHMuZW5hYmxlTGF5ZXIgPSBlbmFibGVMYXllcjtcblx0ZXhwb3J0cy5kaXNhYmxlTGF5ZXIgPSBkaXNhYmxlTGF5ZXI7XG5cdGV4cG9ydHMudXBkYXRlTGF5ZXJPcGFjaXR5ID0gdXBkYXRlTGF5ZXJPcGFjaXR5O1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdC8qKlxuXHQgKiBOZWVkZWQgZm9yIHRoZSBzaGFyZSB1cmwgc2luY2UgTGVhZmxldCBkb2VzIG5vdCBoYXZlIGEgZGVmYXVsdCB3YXkgdG8gc3VyZmFjZVxuXHQgKiB0aGUgb3JkZXIgb2YgbGF5ZXJzIGluIHRoZSBtYXBcblx0ICovXG5cdHZhciBfY3VycmVudF9sYXllcnMgPSBbXTtcblx0dmFyIF9jdXJyZW50X2xheWVyc19vYmplY3RzID0gW107XG5cdFxuXHQvKipcblx0ICogTm90ZTogbGF5ZXIgaXMgbm90IHRoZSBsZWFmbGV0IGNvbmNlcHQgb2YgYSBsYXllciwgYnV0IHJhdGhlciB0aGUgaW50ZXJuYWxcblx0ICogICAgICAgb2JqZWN0IHdoaWNoIHRyYWNrcyB0aGVtLiBsYXllci5tYXBMYXllciBpcyB0aGUgcG9pbnRlciB0byB0aGVcblx0ICogICAgICAgbGVhZmxldCBsYXllci5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBHZXRDdXJyZW50TGF5ZXJzKCkge1xuXHQgICAgcmV0dXJuIF9jdXJyZW50X2xheWVycztcblx0fVxuXHRcblx0ZnVuY3Rpb24gQ3JlYXRlRGVmYXVsdExheWVycyhsYXllcnMsIGRlZmF1bHRMYXllcnMpIHtcblx0ICAgIHZhciBpLCBqLCBwcm9wLCBsYXllcmdyb3VwO1xuXHQgICAgdmFyIGRlZmF1bHRMYXllcjtcblx0ICAgIHZhciBmb3VuZExheWVyO1xuXHRcblx0ICAgIGlmICghZGVmYXVsdExheWVycyB8fCBkZWZhdWx0TGF5ZXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBkZWZhdWx0TGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZm91bmRMYXllciA9IGZhbHNlO1xuXHQgICAgICAgIGRlZmF1bHRMYXllciA9IGRlZmF1bHRMYXllcnNbaV07XG5cdCAgICAgICAgZm9yIChwcm9wIGluIGxheWVycykge1xuXHQgICAgICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xuXHQgICAgICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuXHQgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGF5ZXJncm91cC5sZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGxheWVyZ3JvdXBbal0uaWQgPT09IGRlZmF1bHRMYXllcikge1xuXHQgICAgICAgICAgICAgICAgICAgIGVuYWJsZUxheWVyKGxheWVyZ3JvdXBbal0pO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvdW5kTGF5ZXIgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChmb3VuZExheWVyKSBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvZ2dsZUxheWVyKGxheWVyKSB7XG5cdCAgICBpZiAoIWxheWVyLmFjdGl2ZSkge1xuXHQgICAgICAgIGVuYWJsZUxheWVyKGxheWVyKTtcblx0XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgdG9nZ2xlIHRoZSBsYXllciBvblxuXHQgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbGF5ZXInLFxuXHQgICAgICAgICAgICBldmVudEFjdGlvbjogJ3RvZ2dsZSBvbicsXG5cdCAgICAgICAgICAgIGV2ZW50TGFiZWw6IGxheWVyLm5hbWUsXG5cdCAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBkaXNhYmxlTGF5ZXIobGF5ZXIpO1xuXHRcblx0ICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyB0b2dnbGUgdGhlIGxheWVyIG9mZlxuXHQgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbGF5ZXInLFxuXHQgICAgICAgICAgICBldmVudEFjdGlvbjogJ3RvZ2dsZSBvZmYnLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiBsYXllci5uYW1lLFxuXHQgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICB9KTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZW5hYmxlTGF5ZXIobGF5ZXIpIHtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHQgICAgbGF5ZXIuYWN0aXZlID0gdHJ1ZTtcblx0ICAgIGxheWVyLm1hcExheWVyID0gbGF5ZXIubWFwTGF5ZXIgfHwgbWFrZVdtc1RpbGVMYXllcihsYXllcik7XG5cdCAgICBtYXAuYWRkTGF5ZXIobGF5ZXIubWFwTGF5ZXIpO1xuXHQgICAgYWRkTGF5ZXJUb0ludGVybmFsVHJhY2tlcihsYXllcik7XG5cdCAgICBtb3ZlT3ZlcmxheUxheWVyc1RvVG9wKCk7XG5cdCAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtb3ZlT3ZlcmxheUxheWVyc1RvVG9wKCkge1xuXHQgICAgdmFyIGxheWVyO1xuXHQgICAgdmFyIGksIGw7XG5cdFxuXHQgICAgZm9yIChpID0gMCwgbCA9IF9jdXJyZW50X2xheWVyc19vYmplY3RzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGxheWVyID0gX2N1cnJlbnRfbGF5ZXJzX29iamVjdHNbaV07XG5cdCAgICAgICAgaWYgKGxheWVyLnR5cGUgPT09IFwib3ZlcmxheVwiKSBsYXllci5tYXBMYXllci5icmluZ1RvRnJvbnQoKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkTGF5ZXJUb0ludGVybmFsVHJhY2tlcihsYXllcikge1xuXHQgICAgX2N1cnJlbnRfbGF5ZXJzLnB1c2gobGF5ZXIuaWQpO1xuXHQgICAgX2N1cnJlbnRfbGF5ZXJzX29iamVjdHMucHVzaChsYXllcik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRpc2FibGVMYXllcihsYXllcikge1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkdldE1hcCkoKTtcblx0XG5cdCAgICBsYXllci5hY3RpdmUgPSBmYWxzZTtcblx0ICAgIGlmIChsYXllci5tYXBMYXllciAmJiBtYXAuaGFzTGF5ZXIobGF5ZXIubWFwTGF5ZXIpKSB7XG5cdCAgICAgICAgbWFwLnJlbW92ZUxheWVyKGxheWVyLm1hcExheWVyKTtcblx0ICAgIH1cblx0ICAgIHJlbW92ZUxheWVyRnJvbUludGVybmFsVHJhY2tlcihsYXllcik7XG5cdCAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIobGF5ZXIpIHtcblx0ICAgIHZhciBsb2MgPSBfY3VycmVudF9sYXllcnMuaW5kZXhPZihsYXllci5pZCk7XG5cdCAgICBpZiAobG9jID09PSAtMSkgcmV0dXJuO1xuXHQgICAgX2N1cnJlbnRfbGF5ZXJzLnNwbGljZShsb2MsIDEpO1xuXHQgICAgX2N1cnJlbnRfbGF5ZXJzX29iamVjdHMuc3BsaWNlKGxvYywgMSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZUxheWVyT3BhY2l0eShsYXllciwgbmV3T3BhY2l0eSkge1xuXHQgICAgbGF5ZXIub3BhY2l0eSA9IG5ld09wYWNpdHk7XG5cdCAgICBsYXllci5tYXBMYXllci5zZXRPcGFjaXR5KG5ld09wYWNpdHkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlV21zVGlsZUxheWVyKGxheWVyKSB7XG5cdCAgICByZXR1cm4gTC50aWxlTGF5ZXIud21zKGxheWVyLnVybCwge1xuXHQgICAgICAgIGxheWVyczogbGF5ZXIuaWQsXG5cdCAgICAgICAgdHJhbnNwYXJlbnQ6IGxheWVyLnRyYW5zcGFyZW50IHx8IHRydWUsXG5cdCAgICAgICAgdmVyc2lvbjogbGF5ZXIudmVyc2lvbiB8fCAnMS4zLjAnLFxuXHQgICAgICAgIGNyczogbGF5ZXIuY3JzIHx8IEwuQ1JTLkVQU0c5MDA5MTMsXG5cdCAgICAgICAgZm9ybWF0OiBsYXllci5mb3JtYXQgfHwgJ2ltYWdlL3BuZycsXG5cdCAgICAgICAgb3BhY2l0eTogbGF5ZXIub3BhY2l0eSB8fCAuNzUsXG5cdCAgICAgICAgdGlsZVNpemU6IGxheWVyLnRpbGVTaXplIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwXCIpLmNsaWVudFdpZHRoXG5cdCAgICB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQ3JlYXRlTWFwID0gQ3JlYXRlTWFwO1xuXHRleHBvcnRzLkdldE1hcCA9IEdldE1hcDtcblx0dmFyIG1hcDtcblx0XG5cdGZ1bmN0aW9uIENyZWF0ZU1hcChtYXBDb25maWcpIHtcblx0ICB2YXIgaWQgPSBtYXBDb25maWcuaWQgfHwgXCJtYXBcIjtcblx0ICB2YXIgb3B0aW9ucyA9IG1hcENvbmZpZy5vcHRpb25zIHx8IHsgXCJzY3JvbGxXaGVlbFpvb21cIjogZmFsc2UgfTtcblx0ICB2YXIgaW5pdGlhbENlbnRlciA9IG1hcENvbmZpZy5jZW50ZXIgfHwgW1wiMzguNVwiLCBcIi04MVwiXTtcblx0ICB2YXIgaW5pdGlhbFpvb20gPSBtYXBDb25maWcuem9vbSB8fCA2O1xuXHRcblx0ICBtYXAgPSBMLm1hcChpZCwgb3B0aW9ucykuc2V0Vmlldyhpbml0aWFsQ2VudGVyLCBpbml0aWFsWm9vbSk7XG5cdCAgTC5jb250cm9sLmF0dHJpYnV0aW9uKCkuYWRkVG8obWFwKTtcblx0XG5cdCAgdmFyIGxlYWZsZXRab29tSW4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibGVhZmxldC1jb250cm9sLXpvb20taW5cIilbMF07XG5cdFxuXHQgIGxlYWZsZXRab29tSW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBzZWFjcmNoIGJ5IGFkZHJlc3Ncblx0ICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcblx0ICAgICAgZXZlbnRBY3Rpb246ICdjbGljayBidXR0b24nLFxuXHQgICAgICBldmVudExhYmVsOiAnem9vbSBpbicsXG5cdCAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgfSk7XG5cdCAgfSk7XG5cdFxuXHQgIHZhciBsZWFmbGV0Wm9vbU91dCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJsZWFmbGV0LWNvbnRyb2wtem9vbS1vdXRcIilbMF07XG5cdFxuXHQgIGxlYWZsZXRab29tT3V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3Igc2VhY3JjaCBieSBhZGRyZXNzXG5cdCAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdCAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2sgYnV0dG9uJyxcblx0ICAgICAgZXZlbnRMYWJlbDogJ3pvb20gb3V0Jyxcblx0ICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICB9KTtcblx0ICB9KTtcblx0XG5cdCAgbWFwLm9uKFwiZHJhZ2VuZFwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIGRyYWcgKHBhbikgZW5kXG5cdCAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdCAgICAgIGV2ZW50QWN0aW9uOiAnZHJhZycsXG5cdCAgICAgIGV2ZW50TGFiZWw6IEpTT04uc3RyaW5naWZ5KG1hcC5nZXRCb3VuZHMoKSksXG5cdCAgICAgIG5vbkludGVyYWN0aW9uOiB0cnVlXG5cdCAgICB9KTtcblx0ICB9KTtcblx0XG5cdCAgbWFwLm9uKFwiem9vbWVuZFwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIHpvb20gZW5kXG5cdCAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdCAgICAgIGV2ZW50QWN0aW9uOiAnem9vbScsXG5cdCAgICAgIGV2ZW50TGFiZWw6IEpTT04uc3RyaW5naWZ5KG1hcC5nZXRCb3VuZHMoKSksXG5cdCAgICAgIG5vbkludGVyYWN0aW9uOiB0cnVlXG5cdCAgICB9KTtcblx0ICB9KTtcblx0ICByZXR1cm4gbWFwO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBHZXRNYXAoKSB7XG5cdCAgcmV0dXJuIG1hcDtcblx0fVxuXG4vKioqLyB9LFxuLyogMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQmluZFVwZGF0ZVNoYXJlVXJsID0gQmluZFVwZGF0ZVNoYXJlVXJsO1xuXHRleHBvcnRzLnVwZGF0ZVNoYXJlVXJsID0gdXBkYXRlU2hhcmVVcmw7XG5cdGV4cG9ydHMuQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnID0gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnO1xuXHRleHBvcnRzLkJpbmRDb3B5TGlua0V2ZW50cyA9IEJpbmRDb3B5TGlua0V2ZW50cztcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX2Jhc2VsYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRcblx0dmFyIF9sYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0dmFyIF9wb2kgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdHZhciBfcGFuZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0XG5cdGZ1bmN0aW9uIEJpbmRVcGRhdGVTaGFyZVVybChtYXApIHtcblx0ICAgIG1hcC5vbihcIm1vdmVlbmRcIiwgdXBkYXRlU2hhcmVVcmwpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVTaGFyZVVybChlKSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIHZhciBwYXJhbXMgPSBbbWFrZUNlbnRlclN0cmluZyhtYXApLCBtYWtlWm9vbVN0cmluZyhtYXApLCBtYWtlTGF5ZXJTdHJpbmcobWFwKSwgbWFrZUxheWVyR3JvdXBzU3RyaW5nKCksIG1ha2VCYXNlTGF5ZXJTdHJpbmcobWFwKSwgbWFrZVBvaW50c09mSW50ZXJlc3RTdHJpbmcoKSwgbWFrZUFjdGl2ZVRhYlN0cmluZygpLCBtYWtlQWN0aXZlR3JhcGhUYWJTdHJpbmcoKV07XG5cdFxuXHQgICAgc2V0U2hhcmVVcmwobWFrZVNoYXJlVXJsKHBhcmFtcykpO1xuXHQgICAgc2V0Q29weUxpbmtVcmwoKTtcblx0ICAgIHNldFNvY2lhbFVybHMoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnKGNvbmZpZykge1xuXHQgICAgdmFyIHNoYXJlID0gcGFyc2VTaGFyZVVybCgpO1xuXHQgICAgaWYgKCFzaGFyZSkgcmV0dXJuO1xuXHQgICAgaWYgKHNoYXJlLmNlbnRlcikgY29uZmlnLm1hcC5jZW50ZXIgPSBzaGFyZS5jZW50ZXI7XG5cdCAgICBpZiAoc2hhcmUuem9vbSkgY29uZmlnLm1hcC56b29tID0gc2hhcmUuem9vbTtcblx0ICAgIGlmIChzaGFyZS5sYXllcnMpIGFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5sYXllcnMsIGNvbmZpZyk7XG5cdCAgICBpZiAoc2hhcmUuYmFzZWxheWVycykgYWRkQmFzZUxheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5iYXNlbGF5ZXJzLCBjb25maWcpO1xuXHQgICAgaWYgKHNoYXJlLnBvaXMpIGFkZFBvaW50c09mSW50ZXJlc3RUb0NvbmZpZyhzaGFyZS5wb2lzLCBjb25maWcpO1xuXHQgICAgaWYgKHNoYXJlLnRhYikgY29uZmlnLnRhYiA9IHNoYXJlLnRhYjtcblx0ICAgIGlmIChzaGFyZS5ncmFwaCkgY29uZmlnLmdyYXBoID0gc2hhcmUuZ3JhcGg7XG5cdCAgICBpZiAoc2hhcmUubGF5ZXJHcm91cHMpIGNvbmZpZy5sYXllckdyb3VwcyA9IGFkZExheWVyR3JvdXBTZXR0aW5nc1RvQ29uZmlnKHNoYXJlLmxheWVyR3JvdXBzLCBjb25maWcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlU2hhcmVVcmwocGFyYW1zKSB7XG5cdCAgICByZXR1cm4gXCI/XCIgKyBwYXJhbXMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7XG5cdCAgICAgICAgcmV0dXJuIHAgIT09IHVuZGVmaW5lZDtcblx0ICAgIH0pLmpvaW4oXCImXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRTaGFyZVVybCh1cmwpIHtcblx0ICAgIGlmICh3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcblx0ICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIFwiXCIsIHVybCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldENvcHlMaW5rVXJsKCkge1xuXHQgICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCB1cmwpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBCaW5kQ29weUxpbmtFdmVudHMoKSB7XG5cdCAgICBkMy5zZWxlY3QoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgaGFuZGxlQm9keUNsaWNrKTtcblx0ICAgIGQzLnNlbGVjdChcIi5zaGFyZXVybC1saW5rIGFcIikub24oXCJjbGlja1wiLCBoYW5kbGVTaGFyZUxpbmtCdXR0b25DbGljayk7XG5cdCAgICBkMy5zZWxlY3QoXCIuc2hhcmV1cmwtbGluay11cmxcIikub24oXCJjbGlja1wiLCBoYW5kbGVTaGFyZUxpbmtVcmxDbGljayk7XG5cdCAgICBkMy5zZWxlY3QoXCIuc2hhcmV1cmwtbGluay1wb3B1cC1yZW1vdmVyXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlU2hhcmVMaW5rQ2xvc2VCdXR0b25DbGljayk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTaG91bGQgY2xvc2UgdGhlIGNvcHkgbGluayBwb3B1cCBpZiBpdCBpcyBhY3RpdmUgYW5kIGlmIHlvdSBjbGljayBvbiBhbnkgZWxlbWVudFxuXHQgKiB0aGF0IGlzIG5vdCB0aGUgcG9wdXAgb3IgaXRzIGNoaWxkcmVuLlxuXHQgKi9cblx0ZnVuY3Rpb24gaGFuZGxlQm9keUNsaWNrKCkge1xuXHQgICAgdmFyIGV2ZW50ID0gZDMuZXZlbnQ7XG5cdCAgICB2YXIgbm9kZVBhdGggPSBbXTtcblx0ICAgIG5vZGVQYXRoID0gZ2V0RG9tUGF0aChldmVudC50YXJnZXQpO1xuXHRcblx0ICAgIHZhciB0b0Nsb3NlUG9wdXAgPSB0cnVlO1xuXHQgICAgdmFyIGksIGw7XG5cdFxuXHQgICAgZm9yIChpID0gMCwgbCA9IG5vZGVQYXRoLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIGlmIChub2RlUGF0aFtpXS5jbGFzc0xpc3QuY29udGFpbnMoJ3NoYXJldXJsLWxpbmstcG9wdXAnKSB8fCBub2RlUGF0aFtpXS5jbGFzc0xpc3QuY29udGFpbnMoJ3NoYXJldXJsLWxpbmsnKSkge1xuXHQgICAgICAgICAgICAgICAgdG9DbG9zZVBvcHVwID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgLy8gY2xpY2tpbmcgc3ZnIHRocm93cyBhbiBlcnJvciBpbiBJRVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAodG9DbG9zZVBvcHVwKSB7XG5cdCAgICAgICAgdmFyIHNoYXJlUG9wdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzaGFyZXVybC1saW5rLXBvcHVwJykuaXRlbSgwKTtcblx0ICAgICAgICBoYW5kbGVDb3B5TGlua0Nsb3NlKHNoYXJlUG9wdXApO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXREb21QYXRoKG5vZGUpIHtcblx0ICAgIHZhciBwYXRoID0gW107XG5cdCAgICB3aGlsZSAobm9kZSAmJiBub2RlLnBhcmVudE5vZGUpIHtcblx0ICAgICAgICBwYXRoLnB1c2gobm9kZSk7XG5cdCAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBwYXRoO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVTaGFyZUxpbmtCdXR0b25DbGljaygpIHtcblx0ICAgIHZhciBzaGFyZVBvcHVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNoYXJldXJsLWxpbmstcG9wdXBcIikuaXRlbSgwKTtcblx0ICAgIGlmIChkMy5zZWxlY3Qoc2hhcmVQb3B1cCkuY2xhc3NlZChcImFjdGl2ZVwiKSkge1xuXHQgICAgICAgIGhhbmRsZUNvcHlMaW5rQ2xvc2Uoc2hhcmVQb3B1cCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIGhhbmRsZUNvcHlMaW5rT3BlbihzaGFyZVBvcHVwKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlU2hhcmVMaW5rQ2xvc2VCdXR0b25DbGljaygpIHtcblx0ICAgIHZhciBzaGFyZVBvcHVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNoYXJldXJsLWxpbmstcG9wdXBcIikuaXRlbSgwKTtcblx0ICAgIGhhbmRsZUNvcHlMaW5rQ2xvc2Uoc2hhcmVQb3B1cCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVNoYXJlTGlua1VybENsaWNrKCkge1xuXHQgICAgc2VsZWN0Q29weUxpbmtVcmwoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlQ29weUxpbmtPcGVuKHNoYXJlUG9wdXApIHtcblx0ICAgIHNoYXJlUG9wdXAuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcblx0ICAgIHNlbGVjdENvcHlMaW5rVXJsKCk7XG5cdFxuXHQgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZXZlbnQgY2xpY2sgb24gc2hhcmUgdXJsXG5cdCAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICBldmVudENhdGVnb3J5OiAnc2hhcmV1cmwnLFxuXHQgICAgICAgIGV2ZW50QWN0aW9uOiAnb3BlbicsXG5cdCAgICAgICAgZXZlbnRMYWJlbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSxcblx0ICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVDb3B5TGlua0Nsb3NlKHNoYXJlUG9wdXApIHtcblx0XG5cdCAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBldmVudCBjbGljayBvbiBzaGFyZSB1cmwgY2xvc2Vcblx0ICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdzaGFyZXVybCcsXG5cdCAgICAgICAgZXZlbnRBY3Rpb246ICdjbG9zZScsXG5cdCAgICAgICAgZXZlbnRMYWJlbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSxcblx0ICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgIH0pO1xuXHRcblx0ICAgIHNoYXJlUG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2VsZWN0Q29weUxpbmtVcmwoKSB7XG5cdCAgICB2YXIgc2hhcmVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hhcmV1cmwtbGluay11cmxcIik7XG5cdCAgICBzaGFyZUlucHV0LmZvY3VzKCk7XG5cdCAgICBzaGFyZUlucHV0LnNldFNlbGVjdGlvblJhbmdlKDAsIHNoYXJlSW5wdXQudmFsdWUubGVuZ3RoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0U29jaWFsVXJscygpIHtcblx0ICAgIHZhciB1cmwgPSBtYW5nbGVQYXJhbVN0cmluZyh3aW5kb3cubG9jYXRpb24uaHJlZik7XG5cdCAgICB2YXIgc29jaWFsTGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2hhcmV1cmwtc29jaWFsXCIpO1xuXHQgICAgdmFyIHNvY2lhbExpbms7XG5cdCAgICB2YXIgbmV3VXJsO1xuXHQgICAgdmFyIGksIGw7XG5cdFxuXHQgICAgZm9yIChpID0gMCwgbCA9IHNvY2lhbExpbmtzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHNvY2lhbExpbmsgPSBzb2NpYWxMaW5rc1tpXTtcblx0XG5cdCAgICAgICAgbmV3VXJsID0gc29jaWFsTGluay5nZXRBdHRyaWJ1dGUoXCJkYXRhLWJhc2V1cmxcIikgKyB1cmw7XG5cdCAgICAgICAgc29jaWFsTGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIG5ld1VybCk7XG5cdFxuXHQgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGZvciBzb2NpYWwgdXJsc1xuXHQgICAgICAgIHNvY2lhbExpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdFxuXHQgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdzaGFyZXVybCcsXG5cdCAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogdGhpcy5nZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIpLFxuXHQgICAgICAgICAgICAgICAgZXZlbnRMYWJlbDogdGhpcy5ocmVmLFxuXHQgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlQ2VudGVyU3RyaW5nKG1hcCkge1xuXHQgICAgdmFyIGNlbnRlciA9IG1hcC5nZXRDZW50ZXIoKTtcblx0ICAgIHJldHVybiBcImNlbnRlcj1cIiArIGNlbnRlci5sYXQudG9TdHJpbmcoKSArIFwiLFwiICsgY2VudGVyLmxuZy50b1N0cmluZygpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlWm9vbVN0cmluZyhtYXApIHtcblx0ICAgIHJldHVybiBcInpvb209XCIgKyBtYXAuZ2V0Wm9vbSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGF5ZXJTdHJpbmcobWFwKSB7XG5cdCAgICB2YXIgbGF5ZXJzID0gW107XG5cdCAgICB2YXIgb3BhY2l0eVZhbHMgPSB7fTtcblx0ICAgIHZhciBjdXJyZW50TGF5ZXJzID0gKDAsIF9sYXllci5HZXRDdXJyZW50TGF5ZXJzKSgpO1xuXHRcblx0ICAgIG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgdmFyIG9wdGlvbnMgPSBsYXllci5vcHRpb25zO1xuXHQgICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubGF5ZXJzKSB7XG5cdCAgICAgICAgICAgIG9wYWNpdHlWYWxzW29wdGlvbnMubGF5ZXJzXSA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoXCJvcGFjaXR5XCIpID8gb3B0aW9ucy5vcGFjaXR5IDogXCIxXCI7XG5cdCAgICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIGN1cnJlbnRMYXllcjtcblx0ICAgIHZhciBpO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGN1cnJlbnRMYXllcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBjdXJyZW50TGF5ZXIgPSBjdXJyZW50TGF5ZXJzW2ldO1xuXHQgICAgICAgIGxheWVycy5wdXNoKGN1cnJlbnRMYXllcik7XG5cdCAgICAgICAgbGF5ZXJzLnB1c2gob3BhY2l0eVZhbHNbY3VycmVudExheWVyXSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gXCJsYXllcnM9XCIgKyBsYXllcnMuam9pbihcIixcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VCYXNlTGF5ZXJTdHJpbmcobWFwKSB7XG5cdCAgICB2YXIgbGF5ZXJzID0gW107XG5cdCAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIGlmIChsYXllci5vcHRpb25zICYmIGxheWVyLm9wdGlvbnMudHlwZSA9PT0gX2Jhc2VsYXllci5CQVNFX0xBWUVSX1RZUEUpIHtcblx0ICAgICAgICAgICAgbGF5ZXJzLnB1c2gobGF5ZXIub3B0aW9ucy5pZCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gXCJiYXNlbGF5ZXJzPVwiICsgbGF5ZXJzLmpvaW4oXCIsXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGF5ZXJHcm91cHNTdHJpbmcoKSB7XG5cdCAgICB2YXIgYWN0aXZlTGF5ZXJHcm91cHMgPSAoMCwgX3BhbmVsLkdldEFjdGl2ZUxheWVyR3JvdXBzKSgpO1xuXHQgICAgcmV0dXJuIFwibGF5ZXJHcm91cHM9XCIgKyBhY3RpdmVMYXllckdyb3Vwcy5tYXAoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZC5pZDtcblx0ICAgIH0pLmpvaW4oJywnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVBvaW50c09mSW50ZXJlc3RTdHJpbmcoKSB7XG5cdCAgICB2YXIgcG9pcyA9ICgwLCBfcG9pLkdldEFsbFBvaW50c09mSW50ZXJlc3QpKCk7XG5cdCAgICBpZiAoIXBvaXMubGVuZ3RoKSByZXR1cm47XG5cdCAgICB2YXIgcG9pU3RyaW5nID0gXCJwb2lzPVwiO1xuXHQgICAgcG9pcy5mb3JFYWNoKGZ1bmN0aW9uIChwb2kpIHtcblx0ICAgICAgICBwb2lTdHJpbmcgKz0gcG9pLmxhdCArICcsJyArIHBvaS5sbmc7XG5cdCAgICAgICAgaWYgKHBvaS5wbG90cyAmJiBwb2kucGxvdHMubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIHBvaVN0cmluZyArPSAnLCcgKyBwb2kucGxvdHMuam9pbignLCcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBwb2lTdHJpbmcgKz0gJzsnO1xuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gcG9pU3RyaW5nO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlQWN0aXZlVGFiU3RyaW5nKCkge1xuXHQgICAgcmV0dXJuIFwidGFiPVwiICsgZDMuc2VsZWN0KFwiLnBhbmVsLXRvcC1idG4uYWN0aXZlXCIpLmF0dHIoXCJkYXRhLWFjdGl2ZVwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUFjdGl2ZUdyYXBoVGFiU3RyaW5nKCkge1xuXHQgICAgcmV0dXJuIFwiZ3JhcGg9XCIgKyBkMy5zZWxlY3QoXCIuZ3JhcGgtdHlwZS1idG4uYWN0aXZlXCIpLmF0dHIoXCJkYXRhLXR5cGVcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhcnNlU2hhcmVVcmwoKSB7XG5cdCAgICB2YXIgcGFyYW1zID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcblx0ICAgIGlmIChwYXJhbXMgPT09IFwiXCIpIHJldHVybjtcblx0XG5cdCAgICBwYXJhbXMgPSBnZXRQYXJhbXNBcnJheShwYXJhbXMpO1xuXHQgICAgcGFyYW1zID0gbWFrZUtleWVkUGFyYW1zT2JqZWN0KHBhcmFtcyk7XG5cdFxuXHQgICAgZm9ybWF0UGFyYW1zKHBhcmFtcyk7XG5cdCAgICByZXR1cm4gcGFyYW1zO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRQYXJhbXNBcnJheShwYXJhbXMpIHtcblx0ICAgIHBhcmFtcyA9IHBhcmFtcy5zdWJzdHJpbmcoMSk7XG5cdCAgICBwYXJhbXMgPSB1bm1hbmdsZVBhcmFtU3RyaW5nKHBhcmFtcyk7XG5cdCAgICByZXR1cm4gcGFyYW1zLnNwbGl0KFwiJlwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFuZ2xlUGFyYW1TdHJpbmcodXJsKSB7XG5cdCAgICByZXR1cm4gdXJsLnJlcGxhY2UoL1xcOi9nLCBcIiUzQVwiKS5yZXBsYWNlKC9cXDsvZywgXCIlM0JcIikucmVwbGFjZSgvXFwvL2csIFwiJTJGXCIpLnJlcGxhY2UoL1xcLC9nLCBcIiUyQ1wiKS5yZXBsYWNlKC9cXCYvZywgXCIlMjZcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVubWFuZ2xlUGFyYW1TdHJpbmcocGFyYW1zKSB7XG5cdCAgICByZXR1cm4gcGFyYW1zLnJlcGxhY2UoL1xcJTJbY3xDXS9nLCBcIixcIikucmVwbGFjZSgvXFwlM1tifEJdL2csIFwiO1wiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUtleWVkUGFyYW1zT2JqZWN0KHBhcmFtc0Fycikge1xuXHQgICAgdmFyIHBhcnNlZFBhcmFtcyA9IHt9O1xuXHQgICAgdmFyIHBhcmFtUGFpcjtcblx0ICAgIHZhciBpO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBwYXJhbXNBcnIubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBwYXJhbVBhaXIgPSBwYXJhbXNBcnJbaV0uc3BsaXQoXCI9XCIpO1xuXHQgICAgICAgIHBhcnNlZFBhcmFtc1twYXJhbVBhaXJbMF1dID0gcGFyYW1QYWlyWzFdO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBwYXJzZWRQYXJhbXM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFBhcmFtcyhwYXJhbXMpIHtcblx0ICAgIGlmIChwYXJhbXMuY2VudGVyKSBwYXJhbXMuY2VudGVyID0gZm9ybWF0Q2VudGVyUGFyYW0ocGFyYW1zLmNlbnRlcik7XG5cdCAgICBpZiAocGFyYW1zLmxheWVycykgcGFyYW1zLmxheWVycyA9IGZvcm1hdExheWVyUGFyYW0ocGFyYW1zLmxheWVycyk7XG5cdCAgICBpZiAocGFyYW1zLmJhc2VsYXllcnMpIHBhcmFtcy5iYXNlbGF5ZXJzID0gZm9ybWF0QmFzZUxheWVyUGFyYW0ocGFyYW1zLmJhc2VsYXllcnMpO1xuXHQgICAgaWYgKHBhcmFtcy5wb2lzKSBwYXJhbXMucG9pcyA9IGZvcm1hdFBvaW50c09mSW50ZXJlc3RQYXJhbShwYXJhbXMucG9pcyk7XG5cdCAgICBpZiAocGFyYW1zLmxheWVyR3JvdXBzKSBwYXJhbXMubGF5ZXJHcm91cHMgPSBmb3JtYXRMYXllckdyb3Vwc1BhcmFtKHBhcmFtcy5sYXllckdyb3Vwcyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdENlbnRlclBhcmFtKGNlbnRlcikge1xuXHQgICAgcmV0dXJuIGNlbnRlci5zcGxpdChcIixcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdExheWVyUGFyYW0obGF5ZXJzKSB7XG5cdCAgICB2YXIgZm9ybWF0dGVkTGF5ZXJzID0ge1xuXHQgICAgICAgIFwiZW5hYmxlZExheWVyc1wiOiBbXSxcblx0ICAgICAgICBcIm9wYWNpdHlWYWxzXCI6IHt9XG5cdCAgICB9O1xuXHQgICAgdmFyIGxheWVySWQ7XG5cdCAgICB2YXIgaTtcblx0XG5cdCAgICBsYXllcnMgPSBsYXllcnMuc3BsaXQoXCIsXCIpO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGxheWVycy5sZW5ndGg7IGkgPSBpICsgMikge1xuXHQgICAgICAgIGxheWVySWQgPSBsYXllcnNbaV07XG5cdCAgICAgICAgZm9ybWF0dGVkTGF5ZXJzLmVuYWJsZWRMYXllcnMucHVzaChsYXllcklkKTtcblx0ICAgICAgICBmb3JtYXR0ZWRMYXllcnMub3BhY2l0eVZhbHNbbGF5ZXJJZF0gPSBsYXllcnNbaSArIDFdO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBmb3JtYXR0ZWRMYXllcnM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdEJhc2VMYXllclBhcmFtKGJhc2VsYXllcnMpIHtcblx0ICAgIHJldHVybiBiYXNlbGF5ZXJzLnNwbGl0KFwiLFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0UG9pbnRzT2ZJbnRlcmVzdFBhcmFtKHBvaXMpIHtcblx0ICAgIHJldHVybiBwb2lzLnNwbGl0KCc7JykuZmlsdGVyKGZ1bmN0aW9uIChzdHIpIHtcblx0ICAgICAgICByZXR1cm4gc3RyICE9PSAnJztcblx0ICAgIH0pLm1hcChmdW5jdGlvbiAocG9pKSB7XG5cdCAgICAgICAgcG9pID0gcG9pLnNwbGl0KCcsJyk7XG5cdCAgICAgICAgaWYgKHBvaS5sZW5ndGggPiAyKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAoMCwgX3BvaS5jcmVhdGVQT0kpKHBvaVswXSwgcG9pWzFdLCBwb2kuc3BsaWNlKDIpKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gKDAsIF9wb2kuY3JlYXRlUE9JKShwb2lbMF0sIHBvaVsxXSwgbnVsbCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdExheWVyR3JvdXBzUGFyYW0obGF5ZXJHcm91cFNldHRpbmdzKSB7XG5cdCAgICByZXR1cm4gbGF5ZXJHcm91cFNldHRpbmdzLnNwbGl0KCcsJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZExheWVyR3JvdXBTZXR0aW5nc1RvQ29uZmlnKGFjdGl2ZUxheWVyR3JvdXBJZHMsIGNvbmZpZykge1xuXHQgICAgY29uZmlnLmxheW91dFsnbGF5ZXItZ3JvdXBzLW9yZGVyJ10uZm9yRWFjaChmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgIC8vIHNldCBsYXllciBncm91cCB0byBhY3RpdmUgaWYgaXRzIGlkIGFwcGVhcnMgaW4gdGhlIHNoYXJlIHVybCBzZXR0aW5nc1xuXHQgICAgICAgIGxheWVyR3JvdXAuYWN0aXZlID0gYWN0aXZlTGF5ZXJHcm91cElkcy5maWx0ZXIoZnVuY3Rpb24gKGlkKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBpZCA9PT0gbGF5ZXJHcm91cC5pZDtcblx0ICAgICAgICB9KS5sZW5ndGggPiAwO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZUxheWVyU2V0dGluZ3MsIGNvbmZpZykge1xuXHQgICAgdmFyIGVuYWJsZWRMYXllcnMgPSBzaGFyZUxheWVyU2V0dGluZ3MuZW5hYmxlZExheWVycztcblx0ICAgIGNvbmZpZ1tcImFjdGl2ZS1sYXllcnNcIl0gPSBlbmFibGVkTGF5ZXJzO1xuXHRcblx0ICAgIHZhciBpLCBqLCBwcm9wLCBsYXllcmdyb3VwO1xuXHQgICAgdmFyIGVuYWJsZWRMYXllcjtcblx0ICAgIHZhciBmb3VuZExheWVyO1xuXHQgICAgdmFyIGxheWVycyA9IGNvbmZpZy5sYXllcnM7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGVuYWJsZWRMYXllcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBmb3VuZExheWVyID0gZmFsc2U7XG5cdCAgICAgICAgZW5hYmxlZExheWVyID0gZW5hYmxlZExheWVyc1tpXTtcblx0ICAgICAgICBmb3IgKHByb3AgaW4gbGF5ZXJzKSB7XG5cdCAgICAgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG5cdCAgICAgICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XG5cdCAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsYXllcmdyb3VwLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZW5hYmxlZExheWVyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgbGF5ZXJncm91cFtqXS5vcGFjaXR5ID0gc2hhcmVMYXllclNldHRpbmdzLm9wYWNpdHlWYWxzW2VuYWJsZWRMYXllcl07XG5cdCAgICAgICAgICAgICAgICAgICAgZm91bmRMYXllciA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkQmFzZUxheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZUJhc2VMYXllclNldHRpbmdzLCBjb25maWcpIHtcblx0ICAgIHZhciBiYXNlbGF5ZXJzID0gY29uZmlnLmJhc2VsYXllcnM7XG5cdCAgICB2YXIgYmFzZWxheWVyO1xuXHQgICAgdmFyIGk7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGJhc2VsYXllcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBiYXNlbGF5ZXIgPSBiYXNlbGF5ZXJzW2ldO1xuXHQgICAgICAgIGJhc2VsYXllci5hY3RpdmUgPSBzaGFyZUJhc2VMYXllclNldHRpbmdzLmluZGV4T2YoYmFzZWxheWVyLmlkKSAhPT0gLTEgPyB0cnVlIDogZmFsc2U7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZFBvaW50c09mSW50ZXJlc3RUb0NvbmZpZyhwb2lzLCBjb25maWcpIHtcblx0ICAgIGNvbmZpZ1tcInBvaXNcIl0gPSBwb2lzO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkJBU0VfTEFZRVJfVFlQRSA9IHVuZGVmaW5lZDtcblx0ZXhwb3J0cy5DcmVhdGVCYXNlTGF5ZXJzID0gQ3JlYXRlQmFzZUxheWVycztcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHR2YXIgQkFTRV9MQVlFUl9UWVBFID0gZXhwb3J0cy5CQVNFX0xBWUVSX1RZUEUgPSBcImJhc2VsYXllclwiO1xuXHRcblx0dmFyIF9iYXNlbGF5ZXJzO1xuXHRcblx0ZnVuY3Rpb24gQ3JlYXRlQmFzZUxheWVycyhtYXAsIGxheWVyQ29uZmlnKSB7XG5cdCAgICBsYXllckNvbmZpZyA9IGxheWVyQ29uZmlnIHx8IFt7XG5cdCAgICAgICAgXCJpZFwiOiBcImNhcnRvLWxpZ2h0LWRlZmF1bHRcIixcblx0ICAgICAgICBcInVybFwiOiBcImh0dHA6Ly97c30uYmFzZW1hcHMuY2FydG9jZG4uY29tL2xpZ2h0X2FsbC97en0ve3h9L3t5fS5wbmdcIixcblx0ICAgICAgICBcImF0dHJpYnV0aW9uXCI6ICcmY29weTsgPGEgaHJlZj1cImh0dHA6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzLCAmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vY2FydG8uY29tL2F0dHJpYnV0aW9uc1wiPkNBUlRPPC9hPidcblx0ICAgIH1dO1xuXHRcblx0ICAgIF9iYXNlbGF5ZXJzID0gbGF5ZXJDb25maWc7XG5cdCAgICB2YXIgaTtcblx0ICAgIHZhciBiYXNlTGF5ZXI7XG5cdCAgICB2YXIgY29uZmlnO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsYXllckNvbmZpZy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGNvbmZpZyA9IGxheWVyQ29uZmlnW2ldO1xuXHRcblx0ICAgICAgICBpZiAoIWNvbmZpZy5hY3RpdmUpIGNvbnRpbnVlO1xuXHQgICAgICAgIGJhc2VMYXllciA9IGNyZWF0ZUJhc2VMYXllcihjb25maWcpO1xuXHQgICAgICAgIGNvbmZpZy5sYXllciA9IGJhc2VMYXllcjtcblx0ICAgICAgICBiYXNlTGF5ZXIuYWRkVG8obWFwKTtcblx0ICAgIH1cblx0XG5cdCAgICBjcmVhdGVCYXNlTGF5ZXJVSShsYXllckNvbmZpZyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUJhc2VMYXllclVJKGNvbmZpZykge1xuXHQgICAgdmFyIGJhc2VVSSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICBiYXNlVUkuY2xhc3NOYW1lID0gXCJiYXNlbGF5ZXItdWlcIjtcblx0ICAgIHZhciBiYXNlV3JhcHBlcjtcblx0ICAgIHZhciBiYXNlSW1nO1xuXHQgICAgdmFyIGJhc2VMYWJlbDtcblx0XG5cdCAgICB2YXIgbGF5ZXI7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbmZpZy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBsYXllciA9IGNvbmZpZ1tpXTtcblx0ICAgICAgICBpZiAoIWxheWVyLmhhc093blByb3BlcnR5KFwiaW1hZ2VcIikpIGNvbnRpbnVlO1xuXHRcblx0ICAgICAgICBiYXNlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICAgICAgYmFzZVdyYXBwZXIuc2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiLCBsYXllci5pZCk7XG5cdCAgICAgICAgYmFzZUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG5cdCAgICAgICAgYmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbGF5ZXIuaW1hZ2UpO1xuXHQgICAgICAgIGJhc2VJbWcuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGxheWVyLmxhYmVsKTtcblx0ICAgICAgICBiYXNlSW1nLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIGxheWVyLmxhYmVsKTtcblx0ICAgICAgICBiYXNlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHQgICAgICAgIGJhc2VMYWJlbC50ZXh0Q29udGVudCA9IGxheWVyLmxhYmVsO1xuXHQgICAgICAgIGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VJbWcpO1xuXHQgICAgICAgIGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VMYWJlbCk7XG5cdCAgICAgICAgYmFzZVdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUJhc2VDbGljayk7XG5cdFxuXHQgICAgICAgIGQzLnNlbGVjdChiYXNlV3JhcHBlcikuY2xhc3NlZChcImJhc2Utc2VsZWN0b3JcIiwgdHJ1ZSkuY2xhc3NlZChcImFjdGl2ZVwiLCBsYXllci5hY3RpdmUpO1xuXHRcblx0ICAgICAgICBiYXNlVUkuYXBwZW5kQ2hpbGQoYmFzZVdyYXBwZXIpO1xuXHQgICAgfVxuXHRcblx0ICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJsZWFmbGV0LWJvdHRvbSBsZWFmbGV0LWxlZnRcIilbMF0uYXBwZW5kQ2hpbGQoYmFzZVVJKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlQmFzZUNsaWNrKGUpIHtcblx0ICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgICB2YXIgbGF5ZXJpZCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiKTtcblx0ICAgIHRvZ2dsZUFjdGl2ZUJhc2VVSSh0aGlzKTtcblx0ICAgIHJlbW92ZUN1cnJlbnRCYXNlTGF5ZXIoKTtcblx0ICAgIGFkZE5ld0Jhc2VMYXllclRvTWFwKGxheWVyaWQpO1xuXHRcblx0ICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBjaGFuZ2VpbmcgYmFzZSBsYXllclxuXHQgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdCAgICAgICAgZXZlbnRBY3Rpb246ICdjaGFuZ2UgYmFzZSBsYXllcicsXG5cdCAgICAgICAgZXZlbnRMYWJlbDogbGF5ZXJpZCxcblx0ICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgIH0pO1xuXHRcblx0ICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvZ2dsZUFjdGl2ZUJhc2VVSShiYXNlVUlFbGVtKSB7XG5cdCAgICBkMy5zZWxlY3QoXCIuYmFzZS1zZWxlY3Rvci5hY3RpdmVcIikuY2xhc3NlZChcImFjdGl2ZVwiLCBmYWxzZSk7XG5cdCAgICBkMy5zZWxlY3QoYmFzZVVJRWxlbSkuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlQ3VycmVudEJhc2VMYXllcigpIHtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHQgICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICBpZiAobGF5ZXIub3B0aW9ucy50eXBlICE9PSBCQVNFX0xBWUVSX1RZUEUpIHJldHVybjtcblx0ICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobGF5ZXIpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZE5ld0Jhc2VMYXllclRvTWFwKGxheWVyaWQpIHtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHQgICAgdmFyIGxheWVyO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBfYmFzZWxheWVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBsYXllciA9IF9iYXNlbGF5ZXJzW2ldO1xuXHQgICAgICAgIGlmIChsYXllci5pZCAhPT0gbGF5ZXJpZCkgY29udGludWU7XG5cdCAgICAgICAgaWYgKCFsYXllci5sYXllcikgbGF5ZXIubGF5ZXIgPSBjcmVhdGVCYXNlTGF5ZXIobGF5ZXIpO1xuXHQgICAgICAgIGxheWVyLmxheWVyLmFkZFRvKG1hcCk7XG5cdCAgICAgICAgbGF5ZXIubGF5ZXIuYnJpbmdUb0JhY2soKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQmFzZUxheWVyKGxheWVyQ29uZmlnKSB7XG5cdCAgICByZXR1cm4gTC50aWxlTGF5ZXIobGF5ZXJDb25maWcudXJsLCBtYWtlQmFzZUxheWVyT3B0aW9ucyhsYXllckNvbmZpZykpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlQmFzZUxheWVyT3B0aW9ucyhjb25maWcpIHtcblx0ICAgIHZhciBvcHRpb25zID0ge307XG5cdCAgICBpZiAoY29uZmlnLmlkKSBvcHRpb25zLmlkID0gY29uZmlnLmlkO1xuXHQgICAgaWYgKGNvbmZpZy5hdHRyaWJ1dGlvbikgb3B0aW9ucy5hdHRyaWJ1dGlvbiA9IGNvbmZpZy5hdHRyaWJ1dGlvbjtcblx0ICAgIGlmIChjb25maWcuc3ViZG9tYWlucykgb3B0aW9ucy5zdWJkb21haW5zID0gY29uZmlnLnN1YmRvbWFpbnM7XG5cdCAgICBvcHRpb25zLnR5cGUgPSBCQVNFX0xBWUVSX1RZUEU7XG5cdFxuXHQgICAgcmV0dXJuIG9wdGlvbnM7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkJpbmRHcmFwaEV2ZW50cyA9IEJpbmRHcmFwaEV2ZW50cztcblx0ZXhwb3J0cy5HZXRBbGxQb2ludHNPZkludGVyZXN0ID0gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdDtcblx0ZXhwb3J0cy5jcmVhdGVQT0kgPSBjcmVhdGVQT0k7XG5cdGV4cG9ydHMuU2V0dXBQb2ludHNPZkludGVyZXN0ID0gU2V0dXBQb2ludHNPZkludGVyZXN0O1xuXHRcblx0dmFyIF9ncmFwaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHRcblx0dmFyIF9tYXJrZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX3RhYnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0XG5cdHZhciBfcGFuZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0XG5cdHZhciBfcG9pbnRzX29mX2ludGVyZXN0ID0gW107XG5cdFxuXHRmdW5jdGlvbiBCaW5kR3JhcGhFdmVudHMobWFwKSB7XG5cdCAgICBtYXAub24oXCJjbGlja1wiLCBoYW5kbGVNYXBDbGljayk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZU1hcENsaWNrKGUpIHtcblx0ICAgIHZhciBtYXAgPSB0aGlzO1xuXHQgICAgdmFyIGxhdCA9IGUubGF0bG5nLmxhdDtcblx0ICAgIHZhciBsbmcgPSBlLmxhdGxuZy5sbmc7XG5cdFxuXHQgICAgdmFyIHBvaSA9IGNyZWF0ZVBPSShsYXQsIGxuZywgbnVsbCk7XG5cdCAgICBBZGRQb2ludE9mSW50ZXJlc3RUb1RyYWNrZXIocG9pKTtcblx0ICAgIFNldHVwUG9pbnRPZkludGVyZXN0VUkobWFwLCBwb2kpO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0XG5cdCAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBldmVudCBjbGljayBvbiBtYXBcblx0ICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuXHQgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHQgICAgICAgIGV2ZW50TGFiZWw6ICdhZGQgcG9pbnQnLFxuXHQgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUdyYXBoUmVtb3ZlcihtYXAsIGRpdiwgbWFya2VyLCBwb2kpIHtcblx0ICAgIHZhciBlbGVtID0gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSgpO1xuXHQgICAgZGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC1lbGVtLWhlYWRlclwiKVswXS5hcHBlbmRDaGlsZChlbGVtKTtcblx0ICAgIGQzLnNlbGVjdChlbGVtKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcblx0XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgcmVtb3ZlIGdyYXBoXG5cdCAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXG5cdCAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiAncmVtb3ZlJyxcblx0ICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIFJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyKHBvaSk7XG5cdCAgICAgICAgUmVtb3ZlUG9pbnRPZkludGVyZXN0VUkobWFwLCBkaXYsIG1hcmtlcik7XG5cdCAgICAgICAgKDAsIF9wYW5lbC51cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KSgpO1xuXHQgICAgICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSgpIHtcblx0ICAgIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblx0ICAgIGVsZW0uY2xhc3NOYW1lID0gXCJyZW1vdmUtZ3JhcGhcIjtcblx0ICAgIGVsZW0uaW5uZXJUZXh0ID0gU3RyaW5nLmZyb21DaGFyQ29kZShcIjEwMDA1XCIpO1xuXHQgICAgZWxlbS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBcIlJlbW92ZSBncmFwaFwiKTtcblx0ICAgIHJldHVybiBlbGVtO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBHZXRBbGxQb2ludHNPZkludGVyZXN0KCkge1xuXHQgICAgcmV0dXJuIF9wb2ludHNfb2ZfaW50ZXJlc3Q7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVBPSShsYXQsIGxuZywgcGxvdHMpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAgbGF0OiBsYXQsXG5cdCAgICAgICAgbG5nOiBsbmcsXG5cdCAgICAgICAgcGxvdHM6IHBsb3RzIHx8IFtcImJhc2VsaW5lXCIsIFwiMjAxNVwiLCBcInRocmVzaG9sZHNcIl1cblx0ICAgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlcihwb2kpIHtcblx0ICAgIF9wb2ludHNfb2ZfaW50ZXJlc3QucHVzaChwb2kpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBTZXR1cFBvaW50c09mSW50ZXJlc3QobWFwLCBuZXdQb2lzKSB7XG5cdCAgICBBZGRNdWx0aXBsZVBvaW50c09mSW50ZXJlc3QobmV3UG9pcyk7XG5cdCAgICB2YXIgcG9pcyA9IEdldEFsbFBvaW50c09mSW50ZXJlc3QoKTtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdCAgICBwb2lzLmZvckVhY2goZnVuY3Rpb24gKHBvaSkge1xuXHQgICAgICAgIFNldHVwUG9pbnRPZkludGVyZXN0VUkobWFwLCBwb2kpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEFkZE11bHRpcGxlUG9pbnRzT2ZJbnRlcmVzdChwb2lzKSB7XG5cdCAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShfcG9pbnRzX29mX2ludGVyZXN0LCBwb2lzKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gUmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXIocG9pVG9SZW1vdmUpIHtcblx0ICAgIF9wb2ludHNfb2ZfaW50ZXJlc3QgPSBfcG9pbnRzX29mX2ludGVyZXN0LmZpbHRlcihmdW5jdGlvbiAocG9pKSB7XG5cdCAgICAgICAgcmV0dXJuICEocG9pID09PSBwb2lUb1JlbW92ZSk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gU2V0dXBQb2ludE9mSW50ZXJlc3RVSShtYXAsIHBvaSkge1xuXHQgICAgdmFyIGRpdiA9ICgwLCBfZ3JhcGguY3JlYXRlR3JhcGhEaXYpKHBvaSk7XG5cdCAgICB2YXIgbWFya2VyID0gKDAsIF9tYXJrZXIuY3JlYXRlTWFya2VyKShwb2kubGF0LCBwb2kubG5nKTtcblx0ICAgIHBvaS5ncmFwaERpdiA9IGRpdjtcblx0ICAgIHBvaS5tYXJrZXIgPSBtYXJrZXI7XG5cdCAgICBtYXJrZXIuYWRkVG8obWFwKTtcblx0ICAgIGNyZWF0ZUdyYXBoUmVtb3ZlcihtYXAsIGRpdiwgbWFya2VyLCBwb2kpO1xuXHRcblx0ICAgIGQzLnNlbGVjdChkaXYpLm9uKFwibW91c2VlbnRlclwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIG1hcmtlci5zZXRJY29uKCgwLCBfbWFya2VyLmdldEljb24pKCdob3ZlcicpKTtcblx0ICAgIH0pO1xuXHQgICAgZDMuc2VsZWN0KGRpdikub24oXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBtYXJrZXIuc2V0SWNvbigoMCwgX21hcmtlci5nZXRJY29uKSgnZ3JhcGgnKSk7XG5cdCAgICB9KTtcblx0ICAgIG1hcmtlci5vbignY2xpY2sgZGJsY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIGhhbmRsZU1hcmtlck1vdXNlRXZlbnQoZSwgcG9pKTtcblx0ICAgIH0pO1xuXHQgICAgbWFya2VyLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIG1hcmtlci5zZXRJY29uKCgwLCBfbWFya2VyLmdldEljb24pKCdob3ZlcicpKTtcblx0ICAgIH0pO1xuXHQgICAgbWFya2VyLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgbWFya2VyLnNldEljb24oKDAsIF9tYXJrZXIuZ2V0SWNvbikoJ2dyYXBoJykpO1xuXHQgICAgICAgIHBvaS5ncmFwaERpdi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwYW4tdG8tbWFya2VyLWJ0bicpWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGUnKTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVNYXJrZXJNb3VzZUV2ZW50KGUsIHBvaSkge1xuXHQgICAgZS5vcmlnaW5hbEV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHQgICAgKDAsIF90YWJzLkhhbmRsZVRhYkNoYW5nZSkoJ2dyYXBocy1hY3RpdmUnKTtcblx0ICAgIHNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGgocG9pKTtcblx0ICAgIHRyaWdnZXJHcmFwaEFuaW1hdGlvbihwb2kpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0cmlnZ2VyR3JhcGhBbmltYXRpb24ocG9pKSB7XG5cdCAgICBwb2kuZ3JhcGhEaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncGFuLXRvLW1hcmtlci1idG4nKVswXS5jbGFzc0xpc3QuYWRkKCdhbmltYXRlJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGgocG9pKSB7XG5cdCAgICB2YXIgcmlnaHRQYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpO1xuXHQgICAgcmlnaHRQYW5lbC5zY3JvbGxUb3AgPSBwb2kuZ3JhcGhEaXYub2Zmc2V0VG9wO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBSZW1vdmVQb2ludE9mSW50ZXJlc3RVSShtYXAsIGRpdiwgbWFya2VyKSB7XG5cdCAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaC1saXN0Jyk7XG5cdCAgICBsaXN0LnJlbW92ZUNoaWxkKGRpdik7XG5cdCAgICBtYXAucmVtb3ZlTGF5ZXIobWFya2VyKTtcblx0ICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLlNldHVwR3JhcGhzID0gU2V0dXBHcmFwaHM7XG5cdGV4cG9ydHMuSGFuZGxlR3JhcGhUYWJDaGFuZ2UgPSBIYW5kbGVHcmFwaFRhYkNoYW5nZTtcblx0ZXhwb3J0cy5jcmVhdGVHcmFwaERpdiA9IGNyZWF0ZUdyYXBoRGl2O1xuXHRcblx0dmFyIF9wYW5lbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfcGFyc2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciB0aXAgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIFNldHVwR3JhcGhzKCkge1xuXHQgICAgZDMuc2VsZWN0QWxsKFwiLmdyYXBoLXR5cGUtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2spO1xuXHQgICAgZXh0ZW5kRGF0ZU1vZHVsZSgpO1xuXHQgICAgdGlwID0gZDMudGlwKCkuYXR0cignY2xhc3MnLCAnZDMtdGlwJykuaHRtbChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV4dGVuZERhdGVNb2R1bGUoKSB7XG5cdCAgICBEYXRlLnByb3RvdHlwZS5pc0xlYXBZZWFyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciB5ZWFyID0gdGhpcy5nZXRGdWxsWWVhcigpO1xuXHQgICAgICAgIGlmICgoeWVhciAmIDMpICE9IDApIHJldHVybiBmYWxzZTtcblx0ICAgICAgICByZXR1cm4geWVhciAlIDEwMCAhPSAwIHx8IHllYXIgJSA0MDAgPT0gMDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gR2V0IERheSBvZiBZZWFyXG5cdCAgICBEYXRlLnByb3RvdHlwZS5nZXRET1kgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGRheUNvdW50ID0gWzAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0XTtcblx0ICAgICAgICB2YXIgbW4gPSB0aGlzLmdldE1vbnRoKCk7XG5cdCAgICAgICAgdmFyIGRuID0gdGhpcy5nZXREYXRlKCk7XG5cdCAgICAgICAgdmFyIGRheU9mWWVhciA9IGRheUNvdW50W21uXSArIGRuO1xuXHQgICAgICAgIGlmIChtbiA+IDEgJiYgdGhpcy5pc0xlYXBZZWFyKCkpIGRheU9mWWVhcisrO1xuXHQgICAgICAgIHJldHVybiBkYXlPZlllYXI7XG5cdCAgICB9O1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIERBVEEgUFJPQ0VTU0lORyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVHcmFwaERhdGFSZXNwb25zZShkaXYsIHBvaSwgcmVzcG9uc2UpIHtcblx0ICAgIHJlc3BvbnNlID0gcmVzcG9uc2UucmVwbGFjZSgvXFxbfFxcXXxcXCcvZywgXCJcIikuc3BsaXQoXCIsIFwiKTtcblx0ICAgIGRyYXdHcmFwaChyZXNwb25zZSwgZGl2LCBwb2kpO1xuXHQgICAgKDAsIF9wYW5lbC51cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXREYXRhKHBvaSwgZGl2KSB7XG5cdCAgICB2YXIgdXJsID0gXCJodHRwczovL2ZjYXYtbmR2aS5uZW1hYy5vcmcvbGFuZGRhdF9wcm9kdWN0LmNnaT9hcmdzPVwiICsgcG9pLmxuZyArIFwiLFwiICsgcG9pLmxhdDtcblx0ICAgIHZhciBvUmVxID0gKDAsIF9wYXJzZXIuR2V0QWpheE9iamVjdCkoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgaGFuZGxlR3JhcGhEYXRhUmVzcG9uc2UoZGl2LCBwb2ksIHJlc3BvbnNlKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIG9SZXEub3BlbihcIkdFVFwiLCB1cmwpO1xuXHQgICAgb1JlcS5zZW5kKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNwbGl0RGF0YShkYXRhKSB7XG5cdCAgICB2YXIgaTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZGF0YVtpXSA9IGRhdGFbaV0uc3BsaXQoXCIsXCIpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGRhdGE7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlcHJvY2Vzc0RhdGEob3JpZ2RhdGEpIHtcblx0ICAgIHZhciBleHBlY3RlZFllYXJMZW5ndGggPSA0Njtcblx0ICAgIHZhciBkYXRhID0ge307XG5cdCAgICB2YXIgcG9pbnQ7XG5cdCAgICB2YXIga2V5O1xuXHQgICAgdmFyIGksIGo7XG5cdFxuXHQgICAgZGF0YVtcImtleXNcIl0gPSBbXTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBvcmlnZGF0YS5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHBvaW50ID0gb3JpZ2RhdGFbaV07XG5cdCAgICAgICAga2V5ID0gcG9pbnRbMF0uc3Vic3RyaW5nKDAsIDQpO1xuXHQgICAgICAgIGlmICghZGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdCAgICAgICAgICAgIGRhdGFba2V5XSA9IFtdO1xuXHQgICAgICAgICAgICBkYXRhW1wia2V5c1wiXS5wdXNoKGtleSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGRhdGFba2V5XS5wdXNoKHBvaW50KTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIga2V5c1RvQmVEZWxldGVkID0gW107XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5rZXlzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAga2V5ID0gZGF0YS5rZXlzW2ldO1xuXHQgICAgICAgIGlmIChkYXRhW2tleV0ubGVuZ3RoICE9PSBleHBlY3RlZFllYXJMZW5ndGgpIHtcblx0ICAgICAgICAgICAga2V5c1RvQmVEZWxldGVkLnB1c2goa2V5KTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGtleXNUb0JlRGVsZXRlZC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGtleSA9IGtleXNUb0JlRGVsZXRlZFtpXTtcblx0ICAgICAgICBkZWxldGUgZGF0YVtrZXldO1xuXHQgICAgICAgIGRhdGEua2V5cy5zcGxpY2UoZGF0YS5rZXlzLmluZGV4T2Yoa2V5KSwgMSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGRhdGFGb3JCYXNlbGluZTtcblx0ICAgIHZhciBtZWFuO1xuXHQgICAgZGF0YVtcImJhc2VsaW5lXCJdID0gW107XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgZXhwZWN0ZWRZZWFyTGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBkYXRhRm9yQmFzZWxpbmUgPSBbXTtcblx0ICAgICAgICBmb3IgKGogPSBpOyBqIDwgb3JpZ2RhdGEubGVuZ3RoOyBqICs9IGV4cGVjdGVkWWVhckxlbmd0aCkge1xuXHQgICAgICAgICAgICBkYXRhRm9yQmFzZWxpbmUucHVzaChwYXJzZUludChvcmlnZGF0YVtqXVsxXSwgMTApKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIG1lYW4gPSBjb21wdXRlQXZlcmFnZShkYXRhRm9yQmFzZWxpbmUpO1xuXHQgICAgICAgIGRhdGFbXCJiYXNlbGluZVwiXS5wdXNoKG1lYW4pO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBkYXRhO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjb21wdXRlQXZlcmFnZShhcnIpIHtcblx0ICAgIHZhciBzdW0gPSAwLFxuXHQgICAgICAgIGksXG5cdCAgICAgICAgbDtcblx0XG5cdCAgICBmb3IgKGkgPSAwLCBsID0gYXJyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHN1bSArPSBhcnJbaV07XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIChzdW0gLyBsKS50b1N0cmluZygpO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIElOVEVSRkFDRSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrKCkge1xuXHQgICAgdmFyIHR5cGUgPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJyk7XG5cdCAgICB2YXIgYWN0aXZlVHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF0uZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKTtcblx0XG5cdCAgICBpZiAodHlwZSA9PT0gYWN0aXZlVHlwZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBjbGljayBvbiBncmFwaCB0eXBlXG5cdCAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGggdHlwZScsXG5cdCAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdCAgICAgICAgZXZlbnRMYWJlbDogdHlwZSxcblx0ICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgIH0pO1xuXHRcblx0ICAgIEhhbmRsZUdyYXBoVGFiQ2hhbmdlKHR5cGUsIGFjdGl2ZVR5cGUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBIYW5kbGVHcmFwaFRhYkNoYW5nZShncmFwaFR5cGUpIHtcblx0ICAgIGlmICghaXNHcmFwaExpc3RFbXB0eSgpKSB7XG5cdCAgICAgICAgdmFyIG9sZEFjdGl2ZUdyYXBoRWxlbUhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLWVsZW0nKVswXS5zY3JvbGxIZWlnaHQ7XG5cdCAgICAgICAgdmFyIG9sZEFjdGl2ZUdyYXBoSW5mb0hlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLXR5cGUtaW5mbyBhY3RpdmUnKVswXS5zY3JvbGxIZWlnaHQ7XG5cdCAgICAgICAgdmFyIHJpZ2h0UGFuZWxTY3JvbGxUb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKS5zY3JvbGxUb3A7XG5cdCAgICB9XG5cdCAgICBkaXNhYmxlQWN0aXZlR3JhcGhUYWIoKTtcblx0ICAgIGVuYWJsZUdyYXBoVGFiKGdyYXBoVHlwZSk7XG5cdCAgICBpZiAoIWlzR3JhcGhMaXN0RW1wdHkoKSkgYWRqdXN0U2Nyb2xsUG9zaXRpb24ob2xkQWN0aXZlR3JhcGhJbmZvSGVpZ2h0LCBvbGRBY3RpdmVHcmFwaEVsZW1IZWlnaHQsIHJpZ2h0UGFuZWxTY3JvbGxUb3ApO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNHcmFwaExpc3RFbXB0eSgpIHtcblx0ICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC1lbGVtJylbMF0gPT09IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRqdXN0U2Nyb2xsUG9zaXRpb24ob2xkR3JhcGhJbmZvSGVpZ2h0LCBvbGRHcmFwaEVsZW1IZWlnaHQsIG9sZFJpZ2h0UGFuZWxTY3JvbGxUb3ApIHtcblx0ICAgIHZhciBuZXdHcmFwaEluZm9IZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC10eXBlLWluZm8gYWN0aXZlJylbMF0uc2Nyb2xsSGVpZ2h0O1xuXHQgICAgdmFyIG5ld0dyYXBoRWxlbUhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLWVsZW0nKVswXS5zY3JvbGxIZWlnaHQ7XG5cdFxuXHQgICAgdmFyIG5ld0dyYXBoRWxlbUhlaWdodFNjYWxlID0gbmV3R3JhcGhFbGVtSGVpZ2h0IC8gb2xkR3JhcGhFbGVtSGVpZ2h0O1xuXHQgICAgdmFyIG5ld1JpZ2h0UGFuZWxTY3JvbGxUb3AgPSBuZXdHcmFwaEluZm9IZWlnaHQgKyAob2xkUmlnaHRQYW5lbFNjcm9sbFRvcCAtIG9sZEdyYXBoSW5mb0hlaWdodCkgKiBuZXdHcmFwaEVsZW1IZWlnaHRTY2FsZTtcblx0XG5cdCAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKS5zY3JvbGxUb3AgPSBuZXdSaWdodFBhbmVsU2Nyb2xsVG9wO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkaXNhYmxlQWN0aXZlR3JhcGhUYWIoKSB7XG5cdCAgICB2YXIgYWN0aXZlRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF07XG5cdCAgICB2YXIgYWN0aXZlQ2xhc3MgPSBcImdyYXBoLVwiICsgYWN0aXZlRWxlbS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR5cGVcIik7XG5cdFxuXHQgICAgYWN0aXZlRWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpLmNsYXNzTGlzdC5yZW1vdmUoYWN0aXZlQ2xhc3MpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBlbmFibGVHcmFwaFRhYihncmFwaFR5cGUpIHtcblx0ICAgIGQzLnNlbGVjdChcIi5ncmFwaC10eXBlLWJ0bltkYXRhLXR5cGU9J1wiICsgZ3JhcGhUeXBlICsgXCInXVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpLmNsYXNzTGlzdC5hZGQoXCJncmFwaC1cIiArIGdyYXBoVHlwZSk7XG5cdCAgICBkMy5zZWxlY3RBbGwoJy5ncmFwaC10eXBlLWluZm8nKS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGdyYXBoVHlwZSA9PT0gdGhpcy5pZC5zcGxpdCgnLScpWzBdO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUdyYXBoRGl2KHBvaSkge1xuXHQgICAgdmFyIGRlY2ltYWxQbGFjZXMgPSAzO1xuXHQgICAgdmFyIGxhdFNob3J0ID0gcm91bmRGbG9hdChwb2kubGF0LCBkZWNpbWFsUGxhY2VzKTtcblx0ICAgIHZhciBsbmdTaG9ydCA9IHJvdW5kRmxvYXQocG9pLmxuZywgZGVjaW1hbFBsYWNlcyk7XG5cdCAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0ICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcblx0ICAgIHZhciB6b29tVG9NYXJrZXJCdXR0b24gPSBtYWtlWm9vbVRvTWFwTWFya2VyQnV0dG9uKHBvaSk7XG5cdCAgICB2YXIgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiTGF0OiBcIiArIGxhdFNob3J0ICsgXCIsIExvbmc6IFwiICsgbG5nU2hvcnQpO1xuXHQgICAgdmFyIGNvbnRlbnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHQgICAgY29udGVudERpdi5jbGFzc05hbWUgPSBcImdyYXBoLWxhdC1sb25cIjtcblx0ICAgIGNvbnRlbnREaXYuYXBwZW5kQ2hpbGQoY29udGVudCk7XG5cdFxuXHQgICAgaGVhZGVyLmFwcGVuZENoaWxkKHpvb21Ub01hcmtlckJ1dHRvbik7XG5cdCAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoY29udGVudERpdik7XG5cdFxuXHQgICAgdmFyIGxvYWRpbmdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHQgICAgbG9hZGluZ0Rpdi5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtbG9hZGluZy1kaXZcIik7XG5cdCAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGxvYWRpbmdEaXYpO1xuXHRcblx0ICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZChcImdyYXBoLWVsZW1cIik7XG5cdCAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJncmFwaC1sb2FkaW5nXCIpO1xuXHQgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJncmFwaC1lbGVtLWhlYWRlclwiKTtcblx0XG5cdCAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKTtcblx0ICAgIGxpc3QuYXBwZW5kQ2hpbGQod3JhcHBlcik7XG5cdCAgICBnZXREYXRhKHBvaSwgd3JhcHBlcik7XG5cdCAgICByZXR1cm4gd3JhcHBlcjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVpvb21Ub01hcE1hcmtlckJ1dHRvbihwb2kpIHtcblx0ICAgIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuXHQgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bicpO1xuXHQgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3Bhbi10by1tYXJrZXItYnRuJyk7XG5cdCAgICBidXR0b24udGV4dENvbnRlbnQgPSBcIlNob3cgT24gTWFwXCI7XG5cdCAgICBidXR0b24ub25jbGljayA9IGZ1bmN0aW9uIChwb2ksIGUpIHtcblx0ICAgICAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHQgICAgICAgIG1hcC5wYW5UbyhbcG9pLmxhdCwgcG9pLmxuZ10pO1xuXHRcblx0ICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBjbGljayBvbiBzaG93IG9uIG1hcFxuXHQgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxuXHQgICAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0ICAgICAgICAgICAgZXZlbnRMYWJlbDogJ3tcInNob3cgb24gbWFwXCI6e1wibGF0XCI6JyArIHBvaS5sYXQgKyAnLFwibG9uZ1wiOicgKyBwb2kubG5nICsgJ319Jyxcblx0ICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgfSk7XG5cdCAgICB9LmJpbmQoYnV0dG9uLCBwb2kpO1xuXHQgICAgcmV0dXJuIGJ1dHRvbjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhd0dyYXBoKGRhdGEsIGRpdiwgcG9pKSB7XG5cdCAgICBkYXRhID0gc3BsaXREYXRhKGRhdGEpO1xuXHQgICAgdmFyIHJlcHJvY2Vzc2VkRGF0YSA9IHJlcHJvY2Vzc0RhdGEoZGF0YSk7XG5cdCAgICBtYWtlVXBEb3duTGluZUdyYXBoKGRhdGEsIGRpdik7XG5cdCAgICBtYWtlVXBEb3duT3ZlcmxhcGluZ0xpbmVHcmFwaFdpdGhDaGVja2JveGVzKHJlcHJvY2Vzc2VkRGF0YSwgZGl2LCBwb2kpO1xuXHQgICAgZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzKHJlcHJvY2Vzc2VkRGF0YSwgZGl2LCBwb2kpO1xuXHQgICAgZGl2LmNsYXNzTGlzdC5yZW1vdmUoXCJncmFwaC1sb2FkaW5nXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByb3VuZEZsb2F0KG51bWJlciwgZGVjaW1hbFBsYWNlcykge1xuXHQgICAgcmV0dXJuIE1hdGgucm91bmQobnVtYmVyICogTWF0aC5wb3coMTAsIGRlY2ltYWxQbGFjZXMpKSAvIE1hdGgucG93KDEwLCBkZWNpbWFsUGxhY2VzKTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vIFRJTUVTRVJJRVMgTElORSBHUkFQSCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVVwRG93bkxpbmVHcmFwaChkYXRhLCBkaXYpIHtcblx0ICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcblx0ICAgIHZhciBtYXJnaW4gPSB7IHRvcDogMzAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMCwgbGVmdDogMjkgfSxcblx0ICAgICAgICB3aWR0aCA9IDU4MCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxuXHQgICAgICAgIGhlaWdodCA9IDI3MCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXHRcblx0ICAgIC8vIFNldCB0aGUgcmFuZ2VzXG5cdCAgICB2YXIgeCA9IGQzLnNjYWxlVGltZSgpLnJhbmdlKFswLCB3aWR0aF0pLmRvbWFpbihbcGFyc2VEYXRlKGRhdGFbMF1bMF0pLCBwYXJzZURhdGUoZGF0YVtkYXRhLmxlbmd0aCAtIDFdWzBdKV0pO1xuXHQgICAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKS5kb21haW4oWzAsIDEwMF0pO1xuXHRcblx0ICAgIC8vIERlZmluZSB0aGUgYXhlc1xuXHQgICAgdmFyIHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4KS50aWNrcygxNikudGlja0Zvcm1hdChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkLmdldEZ1bGxZZWFyKCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KS50aWNrcyg2KTtcblx0XG5cdCAgICAvLyBEZWZpbmUgdGhlIGxpbmVcblx0ICAgIHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKCkueChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiB4KHBhcnNlRGF0ZShkWzBdKSk7XG5cdCAgICB9KS55KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIHkoZFsxXSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwidGltZXNlcmllcy1ncmFwaFwiLCB0cnVlKTtcblx0XG5cdCAgICAvLyBBZGRzIHRoZSBzdmcgY2FudmFzXG5cdCAgICB2YXIgc3ZnID0gd3JhcHBlci5hcHBlbmQoXCJzdmdcIikuYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSkuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgdyA9IHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQ7XG5cdCAgICAgICAgdmFyIGggPSBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbTtcblx0ICAgICAgICByZXR1cm4gJzAgMCAnICsgdyArICcgJyArIGg7XG5cdCAgICB9KS5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJykuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XG5cdFxuXHQgICAgc3ZnLmNhbGwodGlwKTtcblx0XG5cdCAgICAvLyBBZGQgdGhlIHZhbHVlbGluZSBwYXRoLlxuXHQgICAgZHJhd0xpbmVhclBhdGgoZGF0YSwgdmFsdWVsaW5lLCBzdmcpO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWCBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ4IGF4aXNcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpLmNhbGwoeEF4aXMpO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWSBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ5IGF4aXNcIikuY2FsbCh5QXhpcyk7XG5cdCAgICAvKipcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XG5cdCAgICAgKi9cblx0ICAgIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgdmFsdWVsaW5lLCBzdmcpO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLyBPVkVSTEFQUElORyBUSU1FU0VSSUVTIExJTkUgR1JBUEggLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVVwRG93bk92ZXJsYXBpbmdMaW5lR3JhcGhXaXRoQ2hlY2tib3hlcyhkYXRhLCBkaXYsIHBvaSkge1xuXHQgICAgdmFyIGNoYXJ0cyA9IHt9O1xuXHRcblx0ICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcblx0ICAgIHZhciBtYXJnaW4gPSB7IHRvcDogMzAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMCwgbGVmdDogMjkgfSxcblx0ICAgICAgICB3aWR0aCA9IDUwMCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxuXHQgICAgICAgIGhlaWdodCA9IDI3MCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXHRcblx0ICAgIHZhciBhdmVyYWdlcyA9IGRhdGEuYmFzZWxpbmU7XG5cdFxuXHQgICAgdmFyIHggPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFswLCB3aWR0aF0pLmRvbWFpbihbMCwgMzY1XSk7XG5cdCAgICB2YXIgeSA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodCwgMF0pLmRvbWFpbihbMCwgMTAwXSk7XG5cdFxuXHQgICAgLy8gRGVmaW5lIHRoZSBheGVzXG5cdCAgICBmdW5jdGlvbiBmb3JtYXRNb250aFRpY2soZCkge1xuXHQgICAgICAgIHJldHVybiBNT05USF9MQUJFTFNbKGQgLSAxNSkgLyAzMF07XG5cdCAgICB9XG5cdCAgICB2YXIgeEF4aXMgPSBkMy5heGlzQm90dG9tKHgpLnRpY2tzKDExKS50aWNrVmFsdWVzKFsxNSwgNDUsIDc1LCAxMDUsIDEzNSwgMTY1LCAxOTUsIDIyNSwgMjU1LCAyODUsIDMxNSwgMzQ1XSkudGlja0Zvcm1hdChmb3JtYXRNb250aFRpY2spO1xuXHRcblx0ICAgIHZhciB5QXhpcyA9IGQzLmF4aXNMZWZ0KHkpLnRpY2tzKDYpO1xuXHRcblx0ICAgIC8vIERlZmluZSB0aGUgbGluZVxuXHQgICAgdmFyIHZhbHVlbGluZSA9IGQzLmxpbmUoKS54KGZ1bmN0aW9uIChkLCBpKSB7XG5cdCAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyB4KHBhcnNlSnVsaWFuRGF5KGRbMF0pKSA6IHgoaSAqIDggKyAzKTtcblx0ICAgIH0pLnkoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShkKSA/IHkoZFsxXSkgOiB5KGQpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcIm92ZXJsYXBwaW5nLWdyYXBoXCIsIHRydWUpO1xuXHRcblx0ICAgIC8vIEFkZHMgdGhlIHN2ZyBjYW52YXNcblx0ICAgIHZhciBzdmcgPSB3cmFwcGVyLmFwcGVuZChcInN2Z1wiKS5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciB3ID0gd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodDtcblx0ICAgICAgICB2YXIgaCA9IGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tO1xuXHQgICAgICAgIHJldHVybiAnMCAwICcgKyB3ICsgJyAnICsgaDtcblx0ICAgIH0pLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKVxuXHQgICAgLy8uYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXG5cdCAgICAvLy5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKVxuXHQgICAgLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xuXHRcblx0ICAgIHN2Zy5jYWxsKHRpcCk7XG5cdFxuXHQgICAgLy8gQWRkIHRoZSBYIEF4aXNcblx0ICAgIHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInggYXhpc1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIikuY2FsbCh4QXhpcyk7XG5cdFxuXHQgICAgLy8gQWRkIHRoZSBZIEF4aXNcblx0ICAgIHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInkgYXhpc1wiKS5jYWxsKHlBeGlzKTtcblx0XG5cdCAgICB2YXIgcGxvdCwgaSwgbDtcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBwb2kucGxvdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgcGxvdCA9IHBvaS5wbG90c1tpXTtcblx0ICAgICAgICBpZiAocGxvdCA9PT0gXCJ0aHJlc2hvbGRzXCIpIGNvbnRpbnVlO1xuXHQgICAgICAgIGNoYXJ0c1twbG90XSA9IHtcblx0ICAgICAgICAgICAgXCJwYXRoXCI6IGRyYXdMaW5lYXJQYXRoKGRhdGFbcGxvdF0sIHZhbHVlbGluZSwgc3ZnKVxuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxuXHQgICAgICovXG5cdCAgICBmb3IgKGkgPSAwLCBsID0gcG9pLnBsb3RzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHBsb3QgPSBwb2kucGxvdHNbaV07XG5cdCAgICAgICAgaWYgKHBsb3QgPT09IFwidGhyZXNob2xkc1wiKSBjb250aW51ZTtcblx0ICAgICAgICBjaGFydHNbcGxvdF0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW3Bsb3RdLCB2YWx1ZWxpbmUsIHN2Zyk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGlucHV0d3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJpbnB1dC13cmFwcGVyXCIsIHRydWUpO1xuXHRcblx0ICAgIGRhdGEua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICBjcmVhdGVDaGVja2JveChpbnB1dHdyYXBwZXIsIGtleSwgXCJvdmVybGFwcGluZ1wiLCBwb2ksIGNoYXJ0cywgZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwgXCJiYXNlbGluZVwiLCBcIm92ZXJsYXBwaW5nXCIsIHBvaSwgY2hhcnRzLCBkYXRhLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFBPTEFSIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMoZGF0YSwgZGl2LCBwb2kpIHtcblx0ICAgIHZhciB3aWR0aCA9IDQ5MCxcblx0ICAgICAgICBoZWlnaHQgPSA0OTAsXG5cdCAgICAgICAgcmFkaXVzID0gTWF0aC5taW4od2lkdGgsIGhlaWdodCkgLyAyIC0gMzA7XG5cdFxuXHQgICAgdmFyIGF2ZXJhZ2VzID0gZGF0YVtcImJhc2VsaW5lXCJdO1xuXHQgICAgdmFyIGNlbnRlciA9IGZpbmRQb2xhckNlbnRlcihkYXRhKTtcblx0ICAgIHZhciB0aHJlc2hvbGRzID0gZmluZFBvbGFyVGhyZXNob2xkcyhhdmVyYWdlcywgY2VudGVyWzFdWzBdKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFNldHMgdXAgc2NhbGluZyBvZiBkYXRhLiBXZSBrbm93IHRoYXQgdGhlIG5kdmkgdmFsdWVzIGZhbGwgYmV0d2VlblxuXHQgICAgICogMCAmIDEwMCBzbyB3ZSBzZXQgb3VyIGRvbWFpbiB0byB0aGF0LiBUaGUgcmFuZ2UgY29udHJvbHMgd2hlcmUgdGhlXG5cdCAgICAgKiBwb2ludHMgd2lsbCBsaWUgaW4gb3VyIGdyYXBoLCBzbyB3ZSBzZXQgdGhlbSB0byBiZSBiZXR3ZWVuIDAgYW5kIHRoZVxuXHQgICAgICogcmFkaXVzLlxuXHQgICAgICovXG5cdCAgICB2YXIgciA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFswLCAxMDBdKS5yYW5nZShbMCwgcmFkaXVzXSk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBmdW5jdGlvbiB3aGljaCB3aWxsIGRyYXcgZWFjaCBwb2ludC4gVG8gY29tcHV0ZSB0aGUgZGlzdGFuY2UgZnJvbSB0aGVcblx0ICAgICAqIGNlbnRlciBlYWNoIHBvaW50IGlzIHdlIHBhc3MgdGhlIGRhdGFwb2ludCB0byB0aGUgZnVuY3Rpb24gZGVmaW5lZCBhYm92ZS5cblx0ICAgICAqIFRvIGRldGVybWluZSB0aGUgYW5nbGUgZnJvbSB0aGUgb3JpZ2luIHdlIG5lZWQgdG8gY29udmVydCB0aGUgZGF5IHRvXG5cdCAgICAgKiByYWRpYW5zLCBzbyB3ZSBjb252ZXJ0IHRoZSBkYXkgdG8gYSBudW1iZXIgYmV0d2VlbiAwICYgMSBhbmQgdGhlbiBtdWx0aXBseVxuXHQgICAgICogaXQgYnkgMiBwaS5cblx0ICAgICAqL1xuXHQgICAgdmFyIGxpbmUgPSBkMy5yYWRpYWxMaW5lKCkucmFkaXVzKGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyByKGRbMV0pIDogcihkKTtcblx0ICAgIH0pLmFuZ2xlKGZ1bmN0aW9uIChkLCBpKSB7XG5cdCAgICAgICAgdmFyIGRheSA9IEFycmF5LmlzQXJyYXkoZCkgPyBwYXJzZUp1bGlhbkRheShkWzBdKSA6IGkgKiA4ICsgMztcblx0ICAgICAgICByZXR1cm4gKGRheSAtIDEpICUgMzY1IC8gMzY1ICogKDIgKiBNYXRoLlBJKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0cyB1cCB0aGUgY2FudmFzIHdoZXJlIHRoZSBjaXJjbGUgd2lsbCBiZSBkcmF3bi5cblx0ICAgICAqL1xuXHQgICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcInBvbGFyLWdyYXBoXCIsIHRydWUpO1xuXHQgICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpXG5cdCAgICAvLy5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG5cdCAgICAvLy5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodClcblx0ICAgIC5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiAnMCAwICcgKyB3aWR0aCArICcgJyArIGhlaWdodDtcblx0ICAgIH0pLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB3aWR0aCAvIDIgKyBcIixcIiArIGhlaWdodCAvIDIgKyBcIilcIik7XG5cdFxuXHQgICAgc3ZnLmNhbGwodGlwKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgYmlnIGNpcmNsZXMgb2YgdGhlIGdyYXBoICYgdGhlaXIgbGFiZWxzXG5cdCAgICAgKi9cblx0ICAgIHZhciBnciA9IHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInIgYXhpc1wiKS5zZWxlY3RBbGwoXCJnXCIpLmRhdGEoci50aWNrcyg1KS5zbGljZSgxKSkuZW50ZXIoKS5hcHBlbmQoXCJnXCIpO1xuXHRcblx0ICAgIGdyLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiclwiLCByKTtcblx0XG5cdCAgICBnci5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIC1yKGQpIC0gNDtcblx0ICAgIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJyb3RhdGUoMTUpXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIikudGV4dChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGxhYmVscyBmb3IgZWFjaCBtb250aCBhbmQgdGhlIGxpbmVzXG5cdCAgICAgKiB0aGF0IGdvIG91dCB0byB0aGVtLlxuXHQgICAgICovXG5cdCAgICB2YXIgZ2FfYSA9IHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcImEgYXhpc1wiKS5zZWxlY3RBbGwoXCJnXCIpLmRhdGEoZDMucmFuZ2UoMCwgMzYwLCAzMCkpLmVudGVyKCkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIFwicm90YXRlKFwiICsgKGQgLSA5MCkgKyBcIilcIjtcblx0ICAgIH0pO1xuXHRcblx0ICAgIGdhX2EuYXBwZW5kKFwibGluZVwiKS5hdHRyKFwieDJcIiwgcmFkaXVzKTtcblx0XG5cdCAgICBnYV9hLmFwcGVuZChcInRleHRcIikuYXR0cihcInhcIiwgcmFkaXVzICsgNikuYXR0cihcImR5XCIsIFwiLjM1ZW1cIikuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkIDwgMzYwICYmIGQgPiAxODAgPyBcImVuZFwiIDogbnVsbDtcblx0ICAgIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7XG5cdCAgICB9KS50ZXh0KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIE1PTlRIX0xBQkVMU1tkIC8gMzBdO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBEcmF3cyB0aGUgdGhyZXNob2xkIGxpbmVzXG5cdCAgICAgKi9cblx0ICAgIHZhciB0aHJlc2hvbGRFbGVtID0gc3ZnLmFwcGVuZChcImdcIikuc2VsZWN0QWxsKFwiZ1wiKS5kYXRhKHRocmVzaG9sZHMpLmVudGVyKCkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIFwicm90YXRlKFwiICsgKGQuZGF0YVsxXVswXSAtIDkwKSArIFwiKVwiO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdGhyZXNob2xkRWxlbS5hcHBlbmQoXCJsaW5lXCIpLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIikuYXR0cihcIngyXCIsIHJhZGl1cyk7XG5cdFxuXHQgICAgdGhyZXNob2xkRWxlbS5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgdmFyIGRheSA9IGQuZGF0YVsxXVswXTtyZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IHJhZGl1cyArIDMwIDogcmFkaXVzIC0gMzA7XG5cdCAgICB9KS5hdHRyKFwieVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkLmRhdGFbMV1bMF0gJSAzNjUgLyAzNjUgKiAoMiAqIE1hdGguUEkpICsgNjtcblx0ICAgIH0pLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdO3JldHVybiBkYXkgPCAzNjAgJiYgZGF5ID4gMTgwID8gXCJtaWRkbGVcIiA6IG51bGw7XG5cdCAgICB9KS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgdmFyIGRheSA9IGQuZGF0YVsxXVswXTtyZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IFwicm90YXRlKDE4MCBcIiArIChyYWRpdXMgKyA2KSArIFwiLDApXCIgOiBudWxsO1xuXHQgICAgfSkudGV4dChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkLmxhYmVsO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdGhyZXNob2xkRWxlbS5zdHlsZShcIm9wYWNpdHlcIiwgcG9pLnBsb3RzLmluZGV4T2YoXCJ0aHJlc2hvbGRzXCIpICE9PSAtMSA/IDEgOiAwKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIERyYXdzIHRoZSBsaW5lIHRvIHRoZSBjZW50ZXIgb2YgdGhlIGRhdGFcblx0ICAgICAqL1xuXHQgICAgdmFyIGNlbnRlckRheSA9IGNlbnRlclsxXVswXTtcblx0ICAgIHZhciBjZW50ZXJEYXlPcHBvc2l0ZSA9IChjZW50ZXJEYXkgKyAzNjUgLyAyKSAlIDM2NTtcblx0ICAgIHZhciBjZW50ZXJEYXlEYXRhID0gW2NlbnRlckRheSwgMTAwXTtcblx0ICAgIHZhciBjZW50ZXJEYXlPcHBvc2l0ZURhdGEgPSBbY2VudGVyRGF5T3Bwb3NpdGUsIDEwMF07XG5cdCAgICB2YXIgZ3Jvd2luZ1NlYXNvbkRhdGEgPSBbY2VudGVyRGF5RGF0YSwgY2VudGVyRGF5T3Bwb3NpdGVEYXRhXTtcblx0XG5cdCAgICBkcmF3UG9sYXJQYXRoKGdyb3dpbmdTZWFzb25EYXRhLCBsaW5lLCBzdmcpLmNsYXNzZWQoXCJncm93aW5nLXNlYXNvbi1saW5lXCIsIFwidHJ1ZVwiKTtcblx0XG5cdCAgICBkcmF3UG9sYXJQYXRoKGNlbnRlciwgbGluZSwgc3ZnKS5jbGFzc2VkKFwiY2VudGVyLWxpbmVcIiwgXCJ0cnVlXCIpO1xuXHRcblx0ICAgIHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKS5kYXRhKFtjZW50ZXJbMV1dKS5lbnRlcigpLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiY2xhc3NcIiwgXCJjZW50ZXJcIikuYXR0cihcInJcIiwgNCkuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHZhciBjb29ycyA9IGxpbmUoW2RdKS5zbGljZSgxKS5zbGljZSgwLCAtMSk7XG5cdCAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgY29vcnMgKyBcIilcIjtcblx0ICAgIH0pLmF0dHIoXCJzdHJva2VcIiwgXCIjMDAwXCIpLmF0dHIoXCJmaWxsXCIsIFwiI2VhMGM0OFwiKS5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHRpcC5zaG93KFwiQ2VudGVyOiBcIiArIFN0cmluZyhkWzFdKS5zdWJzdHJpbmcoMCwgNykpO1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCA1KTtcblx0ICAgIH0pLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB0aXAuaGlkZSgpO1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCA0KTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciBjaGFydHMgPSB7fTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgbGluZSB0aGF0IHRoZSBkYXRhIGZvbGxvd3Ncblx0ICAgICAqL1xuXHQgICAgdmFyIHBsb3QsIGksIGw7XG5cdCAgICBmb3IgKGkgPSAwLCBsID0gcG9pLnBsb3RzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHBsb3QgPSBwb2kucGxvdHNbaV07XG5cdCAgICAgICAgaWYgKHBsb3QgPT09IFwidGhyZXNob2xkc1wiKSBjb250aW51ZTtcblx0ICAgICAgICBjaGFydHNbcGxvdF0gPSB7XG5cdCAgICAgICAgICAgIFwicGF0aFwiOiBkcmF3UG9sYXJQYXRoKGRhdGFbcGxvdF0sIGxpbmUsIHN2Zylcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBwb2ludCBhdCBlYWNoIGRhdGEgcG9pbnRcblx0ICAgICAqL1xuXHQgICAgZm9yIChpID0gMCwgbCA9IHBvaS5wbG90cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBwbG90ID0gcG9pLnBsb3RzW2ldO1xuXHQgICAgICAgIGlmIChwbG90ID09PSBcInRocmVzaG9sZHNcIikgY29udGludWU7XG5cdCAgICAgICAgY2hhcnRzW3Bsb3RdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtwbG90XSwgbGluZSwgc3ZnKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaW5wdXR3cmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcImlucHV0LXdyYXBwZXJcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgZGF0YS5rZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwga2V5LCBcInBvbGFyXCIsIHBvaSwgY2hhcnRzLCBkYXRhLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwgXCJiYXNlbGluZVwiLCBcInBvbGFyXCIsIHBvaSwgY2hhcnRzLCBkYXRhLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0XG5cdCAgICB2YXIgdGhyZXNob2xkQ2hlY2tib3ggPSBpbnB1dHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJ0aHJlc2hvbGQtY2hlY2tib3hcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgdGhyZXNob2xkQ2hlY2tib3guYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBwb2kubGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIHBvaS5sbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSkucHJvcGVydHkoXCJjaGVja2VkXCIsIHBvaS5wbG90cy5pbmRleE9mKFwidGhyZXNob2xkc1wiKSAhPT0gLTEpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgdGhyZXNob2xkRWxlbS5zdHlsZShcIm9wYWNpdHlcIiwgdGhpcy5jaGVja2VkID8gMSA6IDApO1xuXHQgICAgICAgIHZhciBvZmZvbiA9IHRoaXMuY2hlY2tlZCA/ICdvZmYnIDogJ29uJztcblx0XG5cdCAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xuXHQgICAgICAgICAgICBhZGRLZXlUb1BPSShwb2ksIFwidGhyZXNob2xkc1wiKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICByZW1vdmVLZXlGcm9tUE9JKHBvaSwgXCJ0aHJlc2hvbGRzXCIpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0ICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBncmFwaCB0aHJlc2hvbGQgY2xpY2sgb2ZmXG5cdCAgICAgICAgZGlzcGF0Y2hHcmFwaENoZWNrYm94Q2xpY2soJ3RocmVzaG9sZCBwb2xhciB0aW1lc2VyaWVzICcgKyBvZmZvbik7XG5cdCAgICB9KTtcblx0XG5cdCAgICB0aHJlc2hvbGRDaGVja2JveC5hcHBlbmQoXCJsYWJlbFwiKS50ZXh0KFwiVGhyZXNob2xkc1wiKS5hdHRyKFwiZm9yXCIsIFwidGhyZXNob2xkLWNoZWNrYm94LVwiICsgcG9pLmxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBwb2kubG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuXHR9XG5cdFxuXHQvKiBQT0xBUiBHUkFQSCBIRUxQRVJTICovXG5cdFxuXHRmdW5jdGlvbiBmaW5kUG9sYXJDZW50ZXIoZGF0YSkge1xuXHQgICAgdmFyIGksIGosIGxlbmd0aCwgYXJyO1xuXHQgICAgdmFyIHRvdGFsU3VtID0gMDtcblx0ICAgIHZhciBpbmNvbXBsZXRlWWVhcnMgPSAwO1xuXHQgICAgdmFyIHN1bTtcblx0ICAgIGxlbmd0aCA9IDQ2O1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmtleXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBhcnIgPSBkYXRhW2RhdGEua2V5c1tpXV07XG5cdCAgICAgICAgaWYgKGFyci5sZW5ndGggIT09IGxlbmd0aCkge1xuXHQgICAgICAgICAgICBpbmNvbXBsZXRlWWVhcnMrKztcblx0ICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1bSA9IDA7XG5cdCAgICAgICAgZm9yIChqID0gMDsgaiA8IGxlbmd0aCAvIDI7IGorKykge1xuXHQgICAgICAgICAgICBzdW0gKz0gYXJyW2pdWzFdIC0gYXJyW2ogKyAyM11bMV07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1bSA9IHN1bSAvIDIzO1xuXHQgICAgICAgIHRvdGFsU3VtICs9IHN1bTtcblx0ICAgIH1cblx0ICAgIHRvdGFsU3VtID0gTWF0aC5hYnModG90YWxTdW0pIC8gKGRhdGEua2V5cy5sZW5ndGggLSBpbmNvbXBsZXRlWWVhcnMpO1xuXHRcblx0ICAgIHZhciBhcmVhRGlmZiA9IDEwMDAwMDA7XG5cdCAgICB2YXIgY2hlY2tEaWZmO1xuXHQgICAgdmFyIGFyZWFJbmRleCA9IDA7XG5cdCAgICB2YXIgbGVmdEFyZWEsIHJpZ2h0QXJlYTtcblx0ICAgIHZhciBhdmdzID0gZGF0YS5iYXNlbGluZTtcblx0ICAgIHZhciBrLCBjb3VudGVyO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGggLyAyOyBpKyspIHtcblx0ICAgICAgICBsZWZ0QXJlYSA9IDA7XG5cdCAgICAgICAgcmlnaHRBcmVhID0gMDtcblx0ICAgICAgICBmb3IgKGNvdW50ZXIgPSAwOyBjb3VudGVyIDwgbGVuZ3RoIC8gMjsgY291bnRlcisrKSB7XG5cdCAgICAgICAgICAgIGogPSAoaSArIGNvdW50ZXIpICUgNDY7XG5cdCAgICAgICAgICAgIGsgPSAoaiArIDIzKSAlIDQ2O1xuXHRcblx0ICAgICAgICAgICAgbGVmdEFyZWEgKz0gcGFyc2VJbnQoYXZnc1tqXSwgMTApO1xuXHQgICAgICAgICAgICByaWdodEFyZWEgKz0gcGFyc2VJbnQoYXZnc1trXSwgMTApO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjaGVja0RpZmYgPSBNYXRoLmFicyhsZWZ0QXJlYSAtIHJpZ2h0QXJlYSk7XG5cdCAgICAgICAgaWYgKGNoZWNrRGlmZiA8IGFyZWFEaWZmKSB7XG5cdCAgICAgICAgICAgIGFyZWFEaWZmID0gY2hlY2tEaWZmO1xuXHQgICAgICAgICAgICBhcmVhSW5kZXggPSBpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZmlyc3RSYWRpdXMgPSBwYXJzZUludChhdmdzW2FyZWFJbmRleF0sIDEwKTtcblx0ICAgIHZhciBzZWNvbmRSYWRpdXMgPSBwYXJzZUludCgtYXZnc1thcmVhSW5kZXggKyAyM10sIDEwKTtcblx0XG5cdCAgICB2YXIgbWlkcG9pbnQgPSAoZmlyc3RSYWRpdXMgKyBzZWNvbmRSYWRpdXMpIC8gMjtcblx0ICAgIHZhciBmaXJzdERpZmYgPSBNYXRoLmFicyh0b3RhbFN1bSAtIG1pZHBvaW50KTtcblx0ICAgIHZhciBzZWNvbmREaWZmID0gTWF0aC5hYnMoLXRvdGFsU3VtIC0gbWlkcG9pbnQpO1xuXHQgICAgaWYgKHNlY29uZERpZmYgPCBmaXJzdERpZmYpIHtcblx0ICAgICAgICBhcmVhSW5kZXggPSBhcmVhSW5kZXggKyAyMztcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgY2lyY2xlY2VudGVyID0gWzAsIDBdO1xuXHQgICAgdmFyIGRhdGFjZW50ZXIgPSBbYXJlYUluZGV4ICogOCArIDMsIHRvdGFsU3VtXTtcblx0XG5cdCAgICByZXR1cm4gW2NpcmNsZWNlbnRlciwgZGF0YWNlbnRlcl07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBzdGFydERheSBpcyBhY3R1YWxseSB0aGUgc2Vhc29uYWxpdHkgaW5kZXgsIGl0IHNob3VsZCBiZSBmbGlwcGVkXG5cdCAqL1xuXHRmdW5jdGlvbiBmaW5kUG9sYXJUaHJlc2hvbGRzKGRhdGEsIHN0YXJ0RGF5KSB7XG5cdCAgICB2YXIgc3RhcnRJbmRleCA9IE1hdGguZmxvb3IoKHN0YXJ0RGF5IC0gMykgLyA4KTtcblx0ICAgIHN0YXJ0SW5kZXggKz0gc3RhcnRJbmRleCA+IDIyID8gLTIzIDogMjM7XG5cdCAgICB2YXIgaSwgaiwgbGVuZ3RoLCBhcnI7XG5cdCAgICB2YXIgdG90YWxTdW0gPSAwO1xuXHQgICAgdmFyIHN1bTtcblx0ICAgIGxlbmd0aCA9IDQ2O1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGogPSAoc3RhcnRJbmRleCArIGkpICUgbGVuZ3RoO1xuXHQgICAgICAgIHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZmlmdGVlblRocmVzaG9sZCA9IHRvdGFsU3VtICogLjE1O1xuXHQgICAgdmFyIGVpZ2h0eVRocmVzaG9sZCA9IHRvdGFsU3VtICogLjgwO1xuXHQgICAgdmFyIGZpZnRlZW5JbmRleEZvdW5kID0gZmFsc2UsXG5cdCAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IGZhbHNlO1xuXHQgICAgdmFyIGZpZnRlZW5JbmRleCwgZWlnaHR5SW5kZXg7XG5cdFxuXHQgICAgdG90YWxTdW0gPSAwO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgaiA9IChzdGFydEluZGV4ICsgaSkgJSBsZW5ndGg7XG5cdCAgICAgICAgdG90YWxTdW0gKz0gcGFyc2VJbnQoZGF0YVtqXSwgMTApO1xuXHQgICAgICAgIGlmICghZmlmdGVlbkluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBmaWZ0ZWVuVGhyZXNob2xkKSB7XG5cdCAgICAgICAgICAgIGZpZnRlZW5JbmRleCA9IGo7XG5cdCAgICAgICAgICAgIGZpZnRlZW5JbmRleEZvdW5kID0gdHJ1ZTtcblx0ICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICghZWlnaHR5SW5kZXhGb3VuZCAmJiB0b3RhbFN1bSA+IGVpZ2h0eVRocmVzaG9sZCkge1xuXHQgICAgICAgICAgICBlaWdodHlJbmRleCA9IGo7XG5cdCAgICAgICAgICAgIGVpZ2h0eUluZGV4Rm91bmQgPSB0cnVlO1xuXHQgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGNpcmNsZUNlbnRlciA9IFswLCAwXTtcblx0XG5cdCAgICB2YXIgZmlmdGVlbkVuZCA9IFtmaWZ0ZWVuSW5kZXggKiA4ICsgMywgMTAwXTtcblx0ICAgIHZhciBlaWdodHlFbmQgPSBbZWlnaHR5SW5kZXggKiA4ICsgMywgMTAwXTtcblx0XG5cdCAgICByZXR1cm4gW3tcblx0ICAgICAgICBcImxhYmVsXCI6IFwiMTUlXCIsXG5cdCAgICAgICAgXCJkYXRhXCI6IFtjaXJjbGVDZW50ZXIsIGZpZnRlZW5FbmRdXG5cdCAgICB9LCB7XG5cdCAgICAgICAgXCJsYWJlbFwiOiBcIjgwJVwiLFxuXHQgICAgICAgIFwiZGF0YVwiOiBbY2lyY2xlQ2VudGVyLCBlaWdodHlFbmRdXG5cdCAgICB9XTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIEhFTFBFUlMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIGRyYXdMaW5lYXJQYXRoKGRhdGEsIGxpbmUsIHN2Zykge1xuXHQgICAgcmV0dXJuIHN2Zy5hcHBlbmQoXCJwYXRoXCIpLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIikuYXR0cihcImRcIiwgbGluZShkYXRhKSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYXdQb2xhclBhdGgoZGF0YSwgbGluZSwgc3ZnKSB7XG5cdCAgICByZXR1cm4gc3ZnLmFwcGVuZChcInBhdGhcIikuZGF0dW0oZGF0YSkuYXR0cihcImNsYXNzXCIsIFwibGluZVwiKS5hdHRyKFwiZFwiLCBsaW5lKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhd0xpbmVhclBvaW50cyhkYXRhLCBsaW5lLCBzdmcpIHtcblx0ICAgIHJldHVybiBzdmcuc2VsZWN0QWxsKFwicG9pbnRcIikuZGF0YShkYXRhKS5lbnRlcigpLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiclwiLCAyKS5hdHRyKFwiY2xhc3NcIiwgXCJwb2ludFwiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkLCBpKSB7XG5cdCAgICAgICAgdmFyIHBvaW50ID0gQXJyYXkuaXNBcnJheShkKSA/IGQgOiBbaSAqIDggKyAzLCBkXTtcblx0ICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtwb2ludF0pLnNsaWNlKDEpLnNsaWNlKDAsIC0xKTtcblx0ICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBjb29ycyArIFwiKVwiO1xuXHQgICAgfSlcblx0ICAgIC8vLmF0dHIoXCJyXCIsIDMpXG5cdCAgICAuYXR0cihcInN0cm9rZVwiLCBcIiMwMDBcIikuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24gKGQsIGkpIHtcblx0ICAgICAgICB2YXIgdmFsID0gQXJyYXkuaXNBcnJheShkKSA/IGRbMF0uc3Vic3RyaW5nKDAsIDQpIDogMDtcblx0ICAgICAgICByZXR1cm4gcHVsbERpc3RpbmN0Q29sb3IodmFsKTtcblx0ICAgIH0pLm9uKFwibW91c2VvdmVyXCIsIGhhbmRsZVBvaW50TW91c2VvdmVyKS5vbihcIm1vdXNlb3V0XCIsIGhhbmRsZVBvaW50TW91c2VvdXQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVQb2ludE1vdXNlb3ZlcihkKSB7XG5cdCAgICB2YXIgdGlwU3RyaW5nID0gQXJyYXkuaXNBcnJheShkKSA/IGZvcm1hdERhdGUoZFswXSkgKyBcIjogXCIgKyBkWzFdIDogXCJBdmVyYWdlOiBcIiArIGQ7XG5cdCAgICB0aXAuc2hvdyh0aXBTdHJpbmcpO1xuXHQgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIFwiNFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlUG9pbnRNb3VzZW91dChkKSB7XG5cdCAgICB0aXAuaGlkZSgpO1xuXHQgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIFwiMlwiKTtcblx0XG5cdCAgICB2YXIgYWN0aXZlVHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF0uZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKTtcblx0XG5cdCAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyB0b29sIHRpcCBvbiBncmFwaCBkbyB0aGlzIG9uIHRoZSBtb3VzZW91dCBzbyBtb3VzZW92ZXIgZG9zZSBub3QgZG8gYSBsb3Qgb2YgZXZlbnRzLi4uLlxuXHQgICAgLy8gd2UgbWlzcyBhIGZldyBidXQgdGhhdCBpcyBiZXR0ZXIgdGhhbiBvdmVyIGNvdW50aW5nLlxuXHQgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcblx0ICAgICAgICBldmVudEFjdGlvbjogJ2hvdmVyJyxcblx0ICAgICAgICBldmVudExhYmVsOiBhY3RpdmVUeXBlICsgJyB0b29sIHRpcCcsXG5cdCAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQ2hlY2tib3god3JhcHBlciwga2V5LCB0eXBlLCBwb2ksIGNoYXJ0cywgZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcykge1xuXHQgICAgdmFyIGNoZWNrYm94V3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpO1xuXHQgICAgdmFyIGxhdCA9IHBvaS5sYXQ7XG5cdCAgICB2YXIgbG5nID0gcG9pLmxuZztcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKS5hdHRyKFwiZGF0YS1saW5rXCIsIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSkuYXR0cihcInZhbHVlXCIsIGtleSkucHJvcGVydHkoXCJjaGVja2VkXCIsIHBvaS5wbG90cy5pbmRleE9mKGtleSkgIT09IC0xID8gdHJ1ZSA6IGZhbHNlKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuXHQgICAgICAgICAgICBoYW5kbGVDaGVja2JveERpc2FibGUoY2hhcnRzLCBuZXdZZWFyKTtcblx0ICAgICAgICAgICAgcmVtb3ZlS2V5RnJvbVBPSShwb2ksIGtleSk7XG5cdCAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGdyYXBoIHllYXIgY2xpY2sgb2ZmXG5cdCAgICAgICAgICAgIGRpc3BhdGNoR3JhcGhDaGVja2JveENsaWNrKG5ld1llYXIgKyAnICcgKyB0eXBlICsgJyB0aW1lc2VyaWVzIG9mZicpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGhhbmRsZUNoZWNrYm94RW5hYmxlKGNoYXJ0cywgbmV3WWVhciwgZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdCAgICAgICAgICAgIGFkZEtleVRvUE9JKHBvaSwga2V5KTtcblx0ICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZ3JhcGggeWVhciBjbGljayBvblxuXHQgICAgICAgICAgICBkaXNwYXRjaEdyYXBoQ2hlY2tib3hDbGljayhuZXdZZWFyICsgJyAnICsgdHlwZSArICcgdGltZXNlcmllcyBvbicpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBoYW5kbGVDaGVja2JveFN5bmMoa2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpLCB0aGlzLmNoZWNrZWQpO1xuXHQgICAgICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwibGFiZWxcIikudGV4dChrZXkgIT09IFwiYmFzZWxpbmVcIiA/IGtleSA6IFwiQmFzZWxpbmVcIikuYXR0cihcImZvclwiLCB0eXBlICsgXCItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuXHRcblx0ICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJkaXZcIikuc3R5bGUoXCJiYWNrZ3JvdW5kXCIsIHB1bGxEaXN0aW5jdENvbG9yKGtleSAhPT0gXCJiYXNlbGluZVwiID8ga2V5IDogMCkpLmNsYXNzZWQoXCJncmFwaC1waXAtZXhhbXBsZVwiLCB0cnVlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlQ2hlY2tib3hEaXNhYmxlKGNoYXJ0cywgbmV3WWVhcikge1xuXHQgICAgY2hhcnRzW25ld1llYXJdLnBhdGgucmVtb3ZlKCk7XG5cdCAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVDaGVja2JveEVuYWJsZShjaGFydHMsIG5ld1llYXIsIGRhdGEsIGxpbmUsIHN2Zykge1xuXHQgICAgaWYgKCFjaGFydHMuaGFzT3duUHJvcGVydHkobmV3WWVhcikpIHtcblx0ICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcblx0ICAgIH1cblx0ICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd0xpbmVhclBhdGgoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnKTtcblx0ICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2Zyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZUNoZWNrYm94U3luYyhrZXksIGNoZWNrZWRTdGF0dXMsIHdyYXBwZXIpIHtcblx0ICAgIGQzLnNlbGVjdEFsbChcImlucHV0W2RhdGEtbGluaz0nXCIgKyBrZXkgKyBcIiddXCIpLmVhY2goZnVuY3Rpb24gKHAsIGopIHtcblx0ICAgICAgICB2YXIgZWxlbSA9IGQzLnNlbGVjdCh0aGlzKTtcblx0ICAgICAgICBpZiAoZWxlbS5wcm9wZXJ0eShcImNoZWNrZWRcIikgIT09IGNoZWNrZWRTdGF0dXMpIHtcblx0ICAgICAgICAgICAgZWxlbS5wcm9wZXJ0eShcImNoZWNrZWRcIiwgY2hlY2tlZFN0YXR1cyk7XG5cdCAgICAgICAgICAgIGVsZW0uZGlzcGF0Y2goXCJjaGFuZ2VcIik7XG5cdCAgICAgICAgfVxuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZUtleUZyb21QT0kocG9pLCBrZXkpIHtcblx0ICAgIHZhciBpbmRleCA9IHBvaS5wbG90cy5pbmRleE9mKGtleSk7XG5cdCAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm47XG5cdCAgICBwb2kucGxvdHMuc3BsaWNlKGluZGV4LCAxKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkS2V5VG9QT0kocG9pLCBrZXkpIHtcblx0ICAgIGlmIChwb2kucGxvdHMuaW5kZXhPZihrZXkpICE9PSAtMSkgcmV0dXJuO1xuXHQgICAgcG9pLnBsb3RzLnB1c2goa2V5KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZGlzcGF0Y2hHcmFwaENoZWNrYm94Q2xpY2sobGFiZWwpIHtcblx0ICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXG5cdCAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdCAgICAgICAgZXZlbnRMYWJlbDogbGFiZWwsXG5cdCAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcHVsbERpc3RpbmN0Q29sb3IoeWVhcikge1xuXHQgICAgdmFyIGNvbG9yUmFtcCA9IFtcIiNmZmU0NzZcIiwgXCIjMDM2NTkzXCIsIFwiIzExNmM5MVwiLCBcIiMxZTczOTBcIiwgXCIjMmM3YjhlXCIsIFwiIzM5ODI4Y1wiLCBcIiM0YzhjOGFcIiwgXCIjNWU5NTg5XCIsIFwiIzcxOWY4N1wiLCBcIiM4M2E4ODZcIiwgXCIjOTViMTgzXCIsIFwiI2E2YmE4MFwiLCBcIiNiOGMzN2NcIiwgXCIjY2FjYzc5XCIsIFwiI2Q2ZDI3OVwiLCBcIiNlMmQ3NzlcIiwgXCIjZWZkZDc4XCIsIFwiI2ZiZTM3OFwiXTtcblx0XG5cdCAgICByZXR1cm4geWVhciA9PT0gMCA/IFwiI2ZmZlwiIDogY29sb3JSYW1wW3BhcnNlSW50KHllYXIsIDEwKSAlIGNvbG9yUmFtcC5sZW5ndGhdO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIERBVEUgSEVMUEVSUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlRGF0ZShkYXRlKSB7XG5cdCAgICBkYXRlID0gZGF0ZS50b1N0cmluZygpO1xuXHQgICAgdmFyIHllYXIgPSBkYXRlLnN1YnN0cmluZygwLCA0KTtcblx0ICAgIHZhciBtb250aCA9IHBhcnNlSW50KGRhdGUuc3Vic3RyaW5nKDQsIDYpLCAxMCkgLSAxO1xuXHQgICAgdmFyIGRheSA9IGRhdGUuc3Vic3RyaW5nKDYsIDgpO1xuXHRcblx0ICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGFyc2VKdWxpYW5EYXkoZGF0ZSkge1xuXHQgICAgaWYgKHR5cGVvZiBkYXRlID09PSBcInN0cmluZ1wiKSB7XG5cdCAgICAgICAgZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcblx0ICAgICAgICByZXR1cm4gZGF0ZS5nZXRET1koKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGRhdGU7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZSkge1xuXHQgICAgaWYgKGRhdGUgPT09IFwiQXZlcmFnZVwiKSB7XG5cdCAgICAgICAgcmV0dXJuIGRhdGU7XG5cdCAgICB9XG5cdFxuXHQgICAgZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcblx0ICAgIHJldHVybiBmb3JtYXRNb250aChkYXRlLmdldE1vbnRoKCkpICsgXCIgXCIgKyBvcmRpbmFsX3N1ZmZpeF9vZihkYXRlLmdldERhdGUoKSkgKyBcIiwgXCIgKyBkYXRlLmdldEZ1bGxZZWFyKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdE1vbnRoKG1vbnRoKSB7XG5cdCAgICByZXR1cm4gRk9STUFUVEVEX01PTlRIX0xBQkVMU1ttb250aF07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9yZGluYWxfc3VmZml4X29mKGRheSkge1xuXHQgICAgdmFyIGogPSBkYXkgJSAxMCxcblx0ICAgICAgICBrID0gZGF5ICUgMTAwO1xuXHQgICAgaWYgKGogPT09IDEgJiYgayAhPT0gMTEpIHtcblx0ICAgICAgICByZXR1cm4gZGF5ICsgXCJzdFwiO1xuXHQgICAgfVxuXHQgICAgaWYgKGogPT09IDIgJiYgayAhPT0gMTIpIHtcblx0ICAgICAgICByZXR1cm4gZGF5ICsgXCJuZFwiO1xuXHQgICAgfVxuXHQgICAgaWYgKGogPT09IDMgJiYgayAhPT0gMTMpIHtcblx0ICAgICAgICByZXR1cm4gZGF5ICsgXCJyZFwiO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGRheSArIFwidGhcIjtcblx0fVxuXHRcblx0dmFyIE1PTlRIX0xBQkVMUyA9IHtcblx0ICAgIDA6IFwiSmFuXCIsXG5cdCAgICAxOiBcIkZlYlwiLFxuXHQgICAgMjogXCJNYXJcIixcblx0ICAgIDM6IFwiQXByXCIsXG5cdCAgICA0OiBcIk1heVwiLFxuXHQgICAgNTogXCJKdW5cIixcblx0ICAgIDY6IFwiSnVsXCIsXG5cdCAgICA3OiBcIkF1Z1wiLFxuXHQgICAgODogXCJTZXBcIixcblx0ICAgIDk6IFwiT2N0XCIsXG5cdCAgICAxMDogXCJOb3ZcIixcblx0ICAgIDExOiBcIkRlY1wiXG5cdH07XG5cdFxuXHR2YXIgRk9STUFUVEVEX01PTlRIX0xBQkVMUyA9IHtcblx0ICAgIDA6IFwiSmFuLlwiLFxuXHQgICAgMTogXCJGZWIuXCIsXG5cdCAgICAyOiBcIk1hci5cIixcblx0ICAgIDM6IFwiQXByLlwiLFxuXHQgICAgNDogXCJNYXlcIixcblx0ICAgIDU6IFwiSnVuLlwiLFxuXHQgICAgNjogXCJKdWwuXCIsXG5cdCAgICA3OiBcIkF1Zy5cIixcblx0ICAgIDg6IFwiU2VwLlwiLFxuXHQgICAgOTogXCJPY3QuXCIsXG5cdCAgICAxMDogXCJOb3YuXCIsXG5cdCAgICAxMTogXCJEZWMuXCJcblx0fTtcblxuLyoqKi8gfSxcbi8qIDI5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmNyZWF0ZU1hcmtlciA9IGNyZWF0ZU1hcmtlcjtcblx0ZXhwb3J0cy5nZXRJY29uID0gZ2V0SWNvbjtcblx0ZnVuY3Rpb24gY3JlYXRlTWFya2VyKGxhdCwgbG5nKSB7XG5cdCAgICByZXR1cm4gTC5tYXJrZXIoW2xhdCwgbG5nXSwgeyBpY29uOiBncmFwaEljb24gfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldEljb24odHlwZSkge1xuXHQgICAgcmV0dXJuIHR5cGUgPT09ICdob3ZlcicgPyBob3Zlckljb24gOiBncmFwaEljb247XG5cdH1cblx0XG5cdHZhciBiYXNlSWNvbiA9IEwuSWNvbi5leHRlbmQoe30pO1xuXHRcblx0dmFyIGdyYXBoSWNvbiA9IG5ldyBiYXNlSWNvbih7XG5cdCAgICBpY29uVXJsOiAnaW1ncy9ibHVlX2ljb24ucG5nJyxcblx0ICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxuXHQgICAgaWNvblNpemU6IFsyNSwgNDFdLFxuXHQgICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sXG5cdCAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXG5cdCAgICBzaGFkb3dTaXplOiBbNDEsIDQxXVxuXHR9KTtcblx0XG5cdHZhciBob3Zlckljb24gPSBuZXcgYmFzZUljb24oe1xuXHQgICAgaWNvblVybDogJ2ltZ3Mvb3JhbmdlX2ljb24ucG5nJyxcblx0ICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxuXHQgICAgaWNvblNpemU6IFsyNSwgNDFdLFxuXHQgICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sXG5cdCAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXG5cdCAgICBzaGFkb3dTaXplOiBbNDEsIDQxXVxuXHR9KTtcblxuLyoqKi8gfSxcbi8qIDMwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQmluZFRhYkV2ZW50cyA9IEJpbmRUYWJFdmVudHM7XG5cdGV4cG9ydHMuR2V0QWN0aXZlVGFiID0gR2V0QWN0aXZlVGFiO1xuXHRleHBvcnRzLkhhbmRsZVRhYkNoYW5nZSA9IEhhbmRsZVRhYkNoYW5nZTtcblx0XG5cdHZhciBfcGFuZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdGZ1bmN0aW9uIEJpbmRUYWJFdmVudHMoKSB7XG5cdCAgICBkMy5zZWxlY3RBbGwoXCIucGFuZWwtdG9wLWJ0blwiKS5vbihcImNsaWNrXCIsIGhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gR2V0QWN0aXZlVGFiKCkge1xuXHQgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJwYW5lbC10b3AtYnRuIGFjdGl2ZVwiKVswXS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWFjdGl2ZVwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2soKSB7XG5cdCAgICAvLyBJZiB0aGUgc2VjdGlvbiBpcyBhbHJlYWR5IGFjdGl2ZSwgZG8gbm90aGluZ1xuXHQgICAgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSByZXR1cm47XG5cdFxuXHQgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgY2xpY2sgb24gZ3JhcGggdHlwZVxuXHQgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgZXZlbnRDYXRlZ29yeTogJ3RhYicsXG5cdCAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdCAgICAgICAgZXZlbnRMYWJlbDogdGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWFjdGl2ZVwiKSxcblx0ICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgIH0pO1xuXHRcblx0ICAgIEhhbmRsZVRhYkNoYW5nZSh0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtYWN0aXZlXCIpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gSGFuZGxlVGFiQ2hhbmdlKG5ld0NsYXNzKSB7XG5cdCAgICBkaXNhYmxlQWN0aXZlVGFiKCk7XG5cdCAgICBlbmFibGVUYWIobmV3Q2xhc3MpO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZW5hYmxlVGFiKG5ld0NsYXNzKSB7XG5cdCAgICBkMy5zZWxlY3QoXCIucGFuZWwtdG9wLWJ0bltkYXRhLWFjdGl2ZT0nXCIgKyBuZXdDbGFzcyArIFwiJ11cIikuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblx0XG5cdCAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcC13cmFwcGVyXCIpLmNsYXNzTGlzdC5hZGQobmV3Q2xhc3MpO1xuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyaWdodC1wYW5lbFwiKS5jbGFzc0xpc3QuYWRkKG5ld0NsYXNzKTtcblx0XG5cdCAgICBkMy5zZWxlY3QoXCIucGFuZWwtc2VjdGlvbi13cmFwcGVyW2RhdGEtYWN0aXZlPSdcIiArIG5ld0NsYXNzICsgXCInXVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHRcblx0ICAgIHRvZ2dsZU1hcFBhZGRpbmcoKTtcblx0ICAgIHJlc2V0UGFuZWxXaWR0aCgpO1xuXHQgICAgKDAsIF9wYW5lbC51cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkaXNhYmxlQWN0aXZlVGFiKCkge1xuXHQgICAgdmFyIGFjdGl2ZUNsYXNzID0gZDMuc2VsZWN0KFwiLnBhbmVsLXRvcC1idG4uYWN0aXZlXCIpLmF0dHIoXCJkYXRhLWFjdGl2ZVwiKTtcblx0XG5cdCAgICBkMy5zZWxlY3RBbGwoJyNtYXAtd3JhcHBlciwgI3JpZ2h0LXBhbmVsJykuY2xhc3NlZChhY3RpdmVDbGFzcywgZmFsc2UpO1xuXHRcblx0ICAgIGQzLnNlbGVjdEFsbCgnLnBhbmVsLXRvcC1idG4uYWN0aXZlLCAucGFuZWwtc2VjdGlvbi13cmFwcGVyLmFjdGl2ZScpLmNsYXNzZWQoJ2FjdGl2ZScsIGZhbHNlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9nZ2xlTWFwUGFkZGluZygpIHtcblx0ICAgIHZhciBwYWRkaW5nUmlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJpZ2h0LXBhbmVsXCIpLm9mZnNldFdpZHRoO1xuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXAtd3JhcHBlclwiKS5zdHlsZS5wYWRkaW5nUmlnaHQgPSBwYWRkaW5nUmlnaHQgKyBcInB4XCI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTaW5jZSB0aGUgcGFuZWwgaGFzIGNoaWxkIGVsZW1lbnRzIHdpdGggcG9zaXRpb24gZml4ZWQgYW5kIHdpZHRoIGluaGVyaXRcblx0ICogd2UgbmVlZCB0byBjbGVhciB0aGUgaW5saW5lIHdpZHRoIHByb3BlcnR5IGlmIGFuZCBvbmx5IGlmIHRoZSBpbmxpbmVcblx0ICogd2lkdGggaXMgbGVzcyB0aGFuIHRoZSBtaW4gd2lkdGhcblx0ICovXG5cdGZ1bmN0aW9uIHJlc2V0UGFuZWxXaWR0aCgpIHtcblx0ICAgIHZhciBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmlnaHQtcGFuZWxcIik7XG5cdCAgICB2YXIgd2lkdGggPSBwYW5lbC5zdHlsZS53aWR0aDtcblx0ICAgIGlmICghd2lkdGgpIHJldHVybjtcblx0XG5cdCAgICB2YXIgcGFuZWxNaW5XaWR0aCA9IGQzLnNlbGVjdChwYW5lbCkuc3R5bGUoJ21pbi13aWR0aCcpLnNsaWNlKDAsIC0yKTtcblx0ICAgIGlmIChwYXJzZUludCh3aWR0aC5zbGljZSgwLCAtMiksIDEwKSA+IHBhcnNlSW50KHBhbmVsTWluV2lkdGgsIDEwKSkgcmV0dXJuO1xuXHRcblx0ICAgIHBhbmVsLnN0eWxlLndpZHRoID0gXCJcIjtcblx0fVxuXG4vKioqLyB9LFxuLyogMzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uID0gc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uO1xuXHRleHBvcnRzLm1ha2VPcGFjaXR5U2xpZGVyID0gbWFrZU9wYWNpdHlTbGlkZXI7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHR2YXIgX2xheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHQvLyBzZXQgaXQgbWFudWFsbHkgZm9yIG5vd1xuXHR2YXIgT1BBQ0lUWV9SQU5HRV9NQVggPSA5MDtcblx0XG5cdHZhciBvcGFjaXR5U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMSwgMF0pLnJhbmdlKFswLCBPUEFDSVRZX1JBTkdFX01BWF0pLmNsYW1wKHRydWUpO1xuXHRcblx0ZnVuY3Rpb24gc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uKGxheWVyLCBzbGlkZXJIYW5kbGUsIG9wYWNpdHkpIHtcblx0ICAgIG9wYWNpdHkgPSBvcGFjaXR5IHx8IGxheWVyLm9wYWNpdHk7XG5cdCAgICBzbGlkZXJIYW5kbGUuc3R5bGUudG9wID0gJycgKyBvcGFjaXR5U2NhbGUob3BhY2l0eSkgKyAncHgnO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlT3BhY2l0eVNsaWRlcihsYXllcikge1xuXHQgICAgdmFyIGxheWVyT3BhY2l0eSA9IGxheWVyLm9wYWNpdHkgIT09IHVuZGVmaW5lZCA/IGxheWVyLm9wYWNpdHkgOiAxO1xuXHQgICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIHZhciBzbGlkZXJUcmFja092ZXJsYXkgPSBtYWtlU2xpZGVyVHJhY2sobGF5ZXIsIGxheWVyT3BhY2l0eSk7XG5cdCAgICB2YXIgaWNvbldyYXBwZXJDbG9zZWQgPSBtYWtlT3BhY2l0eUljb25XcmFwcGVyKCdjbG9zZWQnLCBsYXllciwgc2xpZGVyVHJhY2tPdmVybGF5KTtcblx0XG5cdCAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktc2xpZGVyLXdyYXBwZXInKTtcblx0ICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2xpZGVyVHJhY2tPdmVybGF5KTtcblx0ICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaWNvbldyYXBwZXJDbG9zZWQpO1xuXHQgICAgcmV0dXJuIHdyYXBwZXI7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VPcGFjaXR5SWNvbldyYXBwZXIoc3RhdGUsIGxheWVyLCBzbGlkZXJUcmFja092ZXJsYXkpIHtcblx0ICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICB2YXIgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXHQgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LWljb24td3JhcHBlcicpO1xuXHQgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LWljb24nKTtcblx0ICAgIGljb24uY2xhc3NMaXN0LmFkZChzdGF0ZSk7XG5cdCAgICBpY29uLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZ3Mvb3BhY2l0eS1pY29uLScgKyBzdGF0ZSArICctNjR4NjQucG5nJyk7XG5cdCAgICBpY29uLnNldEF0dHJpYnV0ZSgnYWx0JywgJ1VzZSB0aGlzIHNsaWRlciB0byBhZGp1c3QgdHJhbnNwYXJlbmN5IGZvciB0aGUgJyArIGxheWVyLm5hbWUgKyAnIGxheWVyJyk7XG5cdCAgICBpY29uLnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnVXNlIHRoaXMgc2xpZGVyIHRvIGFkanVzdCB0cmFuc3BhcmVuY3kgZm9yIHRoZSAnICsgbGF5ZXIubmFtZSArICcgbGF5ZXInKTtcblx0ICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaWNvbik7XG5cdCAgICB3cmFwcGVyLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHZhciBzbGlkZXJIYW5kbGUgPSBzbGlkZXJUcmFja092ZXJsYXkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnb3BhY2l0eS1zbGlkZXItaGFuZGxlJylbMF07XG5cdCAgICAgICAgKDAsIF9sYXllci51cGRhdGVMYXllck9wYWNpdHkpKGxheWVyLCAwKTtcblx0ICAgICAgICBzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb24obGF5ZXIsIHNsaWRlckhhbmRsZSwgMCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIHdyYXBwZXI7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VTbGlkZXJUcmFjayhsYXllciwgbGF5ZXJPcGFjaXR5KSB7XG5cdFxuXHQgICAgdmFyIG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIHZhciB0cmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgdmFyIHNsaWRlckhhbmRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcblx0ICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1zbGlkZXItdHJhY2stb3ZlcmxheScpO1xuXHQgICAgdHJhY2suY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1zbGlkZXItdHJhY2snKTtcblx0ICAgIHNsaWRlckhhbmRsZS5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci1oYW5kbGUnKTtcblx0XG5cdCAgICBvdmVybGF5LmFwcGVuZENoaWxkKHRyYWNrKTtcblx0ICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQoc2xpZGVySGFuZGxlKTtcblx0XG5cdCAgICBpZiAobGF5ZXIuYWN0aXZlKSBzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb24obGF5ZXIsIHNsaWRlckhhbmRsZSk7XG5cdCAgICBzZXREcmFnRXZlbnRMaXN0ZW5lcihvdmVybGF5LCBsYXllciwgbGF5ZXJPcGFjaXR5KTtcblx0XG5cdCAgICByZXR1cm4gb3ZlcmxheTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0RHJhZ0V2ZW50TGlzdGVuZXIob3ZlcmxheSwgbGF5ZXIsIGxheWVyT3BhY2l0eSkge1xuXHQgICAgZDMuc2VsZWN0KG92ZXJsYXkpLmNhbGwoZDMuZHJhZygpLm9uKCdzdGFydCBkcmFnJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBzbGlkZXJIYW5kbGUgPSBvdmVybGF5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ29wYWNpdHktc2xpZGVyLWhhbmRsZScpWzBdO1xuXHQgICAgICAgIHZhciBuZXdPcGFjaXR5ID0gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSk7XG5cdCAgICAgICAgKDAsIF9sYXllci51cGRhdGVMYXllck9wYWNpdHkpKGxheWVyLCBuZXdPcGFjaXR5KTtcblx0ICAgICAgICBzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb24obGF5ZXIsIHNsaWRlckhhbmRsZSwgbmV3T3BhY2l0eSk7XG5cdCAgICB9KS5vbignZW5kJywgZnVuY3Rpb24gKCkge1xuXHRcblx0ICAgICAgICB2YXIgbmV3T3BhY2l0eSA9IGNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zKG92ZXJsYXkpO1xuXHRcblx0ICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBvcGFjaXR5IHNsaWRlciBjaGFuZ2Vcblx0ICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ29wYWNpdHkgc2xpZGVyJyxcblx0ICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjaGFuZ2UnLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiAne1wiJyArIGxheWVyLm5hbWUgKyAnXCI6IFwiJyArIG5ld09wYWNpdHkgKyAnXCJ9Jyxcblx0ICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdCAgICB9KSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zKG92ZXJsYXkpIHtcblx0ICAgIHZhciB5UG9zID0gZDMubW91c2Uob3ZlcmxheSlbMV07XG5cdCAgICB2YXIgbmV3T3BhY2l0eSA9IG9wYWNpdHlTY2FsZS5pbnZlcnQoeVBvcyk7XG5cdCAgICByZXR1cm4gbmV3T3BhY2l0eTtcblx0fVxuXG4vKioqLyB9LFxuLyogMzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ3JlYXRlTG9nbztcblx0Lypcblx0ICBcImxvZ29cIjoge1xuXHQgICAgXCJpbWFnZVwiOiBcImltZ3MvbGFuZGF0X2xvZ29fYmx1ZS5wbmdcIixcblx0ICAgIFwiYWx0XCI6IFwiTG9nbyBmb3IgdGhlIExhbkRhdCBwcm9qZWN0XCIsXG5cdCAgICBcImxpbmtcIjogXCJodHRwczovL2xhbmRhdC1kZXYubmVtYWMub3JnXCIsXG5cdCAgICBcImxvY2F0aW9uXCI6IFtcImJvdHRvbVwiLCBcInJpZ2h0XCJdXG5cdCAgfSxcblx0Ki9cblx0XG5cdGZ1bmN0aW9uIENyZWF0ZUxvZ28obG9nb2RhdGEpIHtcblx0ICAgIGlmICghbG9nb2RhdGEuaW1hZ2UpIHJldHVybjtcblx0XG5cdCAgICB2YXIgbG9nb1dyYXBwZXIgPSBjcmVhdGVMb2dvV3JhcHBlcigpO1xuXHQgICAgdmFyIGxvZ29JbWFnZSA9IGNyZWF0ZUxvZ29JbWFnZShsb2dvZGF0YSk7XG5cdCAgICB2YXIgbG9nb0xpbmsgPSBsb2dvZGF0YS5saW5rID8gY3JlYXRlTG9nb0xpbmsobG9nb2RhdGEubGluaykgOiBudWxsO1xuXHRcblx0ICAgIGlmIChsb2dvTGluaykge1xuXHQgICAgICAgIGxvZ29MaW5rLmFwcGVuZENoaWxkKGxvZ29JbWFnZSk7XG5cdCAgICAgICAgbG9nb1dyYXBwZXIuYXBwZW5kQ2hpbGQobG9nb0xpbmspO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBsb2dvV3JhcHBlci5hcHBlbmRDaGlsZChsb2dvSW1hZ2UpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpbnNlcnRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShsb2dvZGF0YS5sb2NhdGlvbilbMF07XG5cdCAgICB2YXIgZXhpc3RpbmdDaGlsZCA9IGluc2VydEVsZW1lbnQuZmlyc3RDaGlsZDtcblx0ICAgIGluc2VydEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGxvZ29XcmFwcGVyLCBleGlzdGluZ0NoaWxkKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlTG9nb1dyYXBwZXIoKSB7XG5cdCAgICB2YXIgbG9nb1dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHQgICAgZDMuc2VsZWN0KGxvZ29XcmFwcGVyKS5jbGFzc2VkKFwicHJvamVjdC1sb2dvXCIsIHRydWUpO1xuXHQgICAgcmV0dXJuIGxvZ29XcmFwcGVyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVMb2dvSW1hZ2UobG9nb2RhdGEpIHtcblx0ICAgIHZhciBsb2dvSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuXHQgICAgbG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBsb2dvZGF0YS5pbWFnZSk7XG5cdCAgICBpZiAobG9nb2RhdGEubGFiZWwpIHtcblx0ICAgICAgICBsb2dvSW1hZ2Uuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGxvZ29kYXRhLmxhYmVsKTtcblx0ICAgICAgICBsb2dvSW1hZ2Uuc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgbG9nb2RhdGEubGFiZWwpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGxvZ29JbWFnZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlTG9nb0xpbmsobGluaykge1xuXHQgICAgdmFyIGxvZ29MaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG5cdCAgICBsb2dvTGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIGxpbmspO1xuXHQgICAgbG9nb0xpbmsuc2V0QXR0cmlidXRlKFwidGFyZ2V0XCIsIFwiX2JsYW5rXCIpO1xuXHRcblx0ICAgIGxvZ29MaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRcblx0ICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3IgY2xpY2tpbmcgbG9nb1xuXHQgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcblx0ICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdCAgICAgICAgICAgIGV2ZW50TGFiZWw6ICdsYW5kYXQgbG9nbycsXG5cdCAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgIH0pO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgcmV0dXJuIGxvZ29MaW5rO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAzMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBCaW5kTW9iaWxlTWVudUV2ZW50cztcblx0ZnVuY3Rpb24gQmluZE1vYmlsZU1lbnVFdmVudHMoKSB7XG5cdCAgICBkMy5zZWxlY3RBbGwoXCIubW9iaWxlLW1lbnUtYnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlTW9iaWxlTWVudUJ0bkNsaWNrKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlTW9iaWxlTWVudUJ0bkNsaWNrKCkge1xuXHQgICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoXCIjd3JhcHBlclwiKTtcblx0ICAgIHZhciBzdGF0dXMgPSB3cmFwcGVyLmNsYXNzZWQoXCJtb2JpbGUtbWVudS1oaWRkZW5cIik7XG5cdCAgICB3cmFwcGVyLmNsYXNzZWQoXCJtb2JpbGUtbWVudS1oaWRkZW5cIiwgIXN0YXR1cyk7XG5cdCAgICBkaXNwYXRjaE1vYmlsZU1lbnVCdG5DbGlja0FuYWx5dGljcyghc3RhdHVzID8gXCJvcGVuaW5nXCIgOiBcImNsb3NpbmdcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRpc3BhdGNoTW9iaWxlTWVudUJ0bkNsaWNrQW5hbHl0aWNzKHN0YXR1cykge1xuXHQgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21vYmlsZSBtZW51Jyxcblx0ICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0ICAgICAgICBldmVudExhYmVsOiAnTW9iaWxlIE1lbnUgJyArIHN0YXR1cyxcblx0ICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgIH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAzNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGluZGV4X2J1bmRsZS5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGYwMDZkNGUyY2JjYzE5MzI0YzBiIiwiaW1wb3J0IHtQYXJzZUNvbmZpZ30gZnJvbSAnLi9wYXJzZXInO1xuaW1wb3J0IENyZWF0ZVNlYXJjaCBmcm9tICcuL3NlYXJjaCc7XG5pbXBvcnQge1NldHVwUGFuZWx9IGZyb20gJy4vcGFuZWwnO1xuaW1wb3J0IHtDcmVhdGVCYXNlTGF5ZXJzfSBmcm9tICcuL2Jhc2VsYXllcic7XG5pbXBvcnQge1NldHVwR3JhcGhzLCBIYW5kbGVHcmFwaFRhYkNoYW5nZX0gZnJvbSAnLi9ncmFwaCdcbmltcG9ydCB7QmluZEdyYXBoRXZlbnRzfSBmcm9tICcuL3BvaSc7XG5pbXBvcnQge0JpbmRUYWJFdmVudHMsIEhhbmRsZVRhYkNoYW5nZX0gZnJvbSAnLi90YWJzJ1xuaW1wb3J0IHtDcmVhdGVNYXB9IGZyb20gJy4vbWFwJ1xuaW1wb3J0IHtCaW5kVXBkYXRlU2hhcmVVcmwsIEFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZywgQmluZENvcHlMaW5rRXZlbnRzfSBmcm9tICcuL3NoYXJlJ1xuaW1wb3J0IHtDcmVhdGVEZWZhdWx0TGF5ZXJzfSBmcm9tICcuL2xheWVyJ1xuaW1wb3J0IENyZWF0ZUxvZ28gZnJvbSAnLi9sb2dvJztcbmltcG9ydCB7U2V0dXBQb2ludHNPZkludGVyZXN0fSBmcm9tICcuL3BvaSc7XG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tICcuL3NoYXJlJztcbmltcG9ydCBCaW5kTW9iaWxlTWVudUV2ZW50cyBmcm9tICcuL21vYmlsZSc7XG5cbnZhciBjc3MgPSByZXF1aXJlKCcuLi9jc3Mvc2Fzcy9sYW5kYXQuc2NzcycpXG5cbi8vIERvZXMgbm90IHJlbHkgb24gbWFwIG9iamVjdCBvciBjb25maWcgZmlsZVxudmFyIEJhc2UgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgUGFyc2VDb25maWcoY29uZmlnLCBjYWxsYmFjayk7XG4gICAgU2V0dXBHcmFwaHMoKTtcbiAgICBCaW5kVGFiRXZlbnRzKCk7XG4gICAgQmluZENvcHlMaW5rRXZlbnRzKCk7XG4gICAgQmluZE1vYmlsZU1lbnVFdmVudHMoKTtcbn1cblxuLy8gRG9lcyByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcbnZhciBjYWxsYmFjayA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnKGRhdGEpXG4gICAgdmFyIG1hcCA9IENyZWF0ZU1hcChkYXRhLm1hcCk7XG4gICAgQ3JlYXRlQmFzZUxheWVycyhtYXAsIGRhdGEuYmFzZWxheWVycyk7XG4gICAgQ3JlYXRlRGVmYXVsdExheWVycyhkYXRhLmxheWVycywgZGF0YVtcImFjdGl2ZS1sYXllcnNcIl0pO1xuICAgIFNldHVwUGFuZWwoZGF0YS5sYXllcnMsIGRhdGEubGF5b3V0KTtcbiAgICBDcmVhdGVTZWFyY2gobWFwKTtcbiAgICBDcmVhdGVMb2dvKGRhdGEubG9nbyk7XG4gICAgaWYgKGRhdGEudGFiKSBIYW5kbGVUYWJDaGFuZ2UoZGF0YS50YWIpO1xuICAgIGlmIChkYXRhLmdyYXBoKSBIYW5kbGVHcmFwaFRhYkNoYW5nZShkYXRhLmdyYXBoKTtcbiAgICBCaW5kR3JhcGhFdmVudHMobWFwKTtcbiAgICBCaW5kVXBkYXRlU2hhcmVVcmwobWFwKTtcbiAgICBTZXR1cFBvaW50c09mSW50ZXJlc3QobWFwLCBkYXRhLnBvaXMpXG4gICAgdXBkYXRlU2hhcmVVcmwoKVxufVxuXG53aW5kb3cuQmFzZSA9IEJhc2U7XG5cbmV4cG9ydCBkZWZhdWx0IHtCYXNlfTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2Jhc2UuanMiLCIvKipcbiAqIFBhcnNlcyBhIGNvbmZpZyBmaWxlLiBTaW5jZSB0aGUgcHJvY2VzcyB0byBnZXQgZXh0ZXJuYWwgZmlsZXNcbiAqIHVzZXMgQUpBWCB5b3UgbmVlZCB0byBwYXNzIGEgY2FsbGJhY2sgdG8gaGFuZGxlIHRoZSBuZXh0IHN0ZXBzXG4gKiBvZiB1c2luZyB0aGUgY29uZmlnIGZpbGUsIHNpbmNlIHdlIGRvIG5vdCBrbm93IGhvdyBsb25nIGl0XG4gKiB3aWxsIHRha2UgdG8gZ3JhYiB0aGUgZmlsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFBhcnNlQ29uZmlnIChjb25maWdGaWxlLCBjYWxsYmFjaykge1xuICAgIEdldENvbmZpZyhjb25maWdGaWxlLCBjYWxsYmFjayk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBHZXRBamF4T2JqZWN0KHJlc3BvbnNlSGFuZGxlcikge1xuICAgIHZhciB4bWxodHRwXG4gICAgaWYgKCF3aW5kb3cuWE1MSHR0cFJlcXVlc3QgJiYgd2luZG93LkFjdGl2ZVhPYmplY3QpIHtcbiAgICAgICAgeG1saHR0cCA9IG5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdChcIk1TWE1MMi5YTUxIVFRQLjMuMFwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuICAgIH1cbiAgICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHhtbGh0dHAucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgcmVzcG9uc2VIYW5kbGVyKHhtbGh0dHAucmVzcG9uc2UpXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHhtbGh0dHBcbn1cblxuZnVuY3Rpb24gR2V0Q29uZmlnIChjb25maWdGaWxlLCBjYWxsYmFjaykge1xuICAgIHZhciB4bWxodHRwID0gR2V0QWpheE9iamVjdChmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZUhhbmRsZXIocmVzcG9uc2UpXG4gICAgICAgIGNhbGxiYWNrKGRhdGEpXG4gICAgfSlcbiAgICB4bWxodHRwLm9wZW4oXCJHRVRcIiwgY29uZmlnRmlsZSwgdHJ1ZSk7XG4gICAgeG1saHR0cC5zZW5kKCk7XG4gICAgY29uc29sZS5sb2coXCJoaVwiKVxufVxuXG5mdW5jdGlvbiByZXNwb25zZUhhbmRsZXIgKHJlc3BvbnNlKSB7XG4gICAgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3BvbnNlKVxuICAgIGZvcm1hdE1hcChyZXNwb25zZSk7XG4gICAgZm9ybWF0TGF5ZXJzKHJlc3BvbnNlKTtcbiAgICByZXR1cm4gcmVzcG9uc2Vcbn1cblxuZnVuY3Rpb24gZm9ybWF0TWFwIChkYXRhKSB7XG4gICAgaWYgKCFkYXRhLm1hcCkgZGF0YS5tYXAgPSB7fTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TGF5ZXJzIChkYXRhKSB7XG4gICAgdmFyIGxheWVycyA9IGRhdGEubGF5ZXJzO1xuICAgIHZhciBkZWZhdWx0TWFwc2VydmVyVXJsID0gZGF0YS5tYXBzZXJ2ZXJVcmw7XG4gICAgdmFyIGRlZmF1bHRFbmFibGVkTGF5ZXJzID0gZGF0YVtcImFjdGl2ZS1sYXllcnNcIl07XG4gICAgdmFyIGxheWVyZ3JvdXA7XG4gICAgdmFyIGk7XG5cbiAgICBmb3IgKHZhciBwcm9wIGluIGxheWVycykge1xuICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xuICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGF5ZXJncm91cC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc2V0TWFwc2VydmVyVXJsKGxheWVyZ3JvdXBbaV0sIGRlZmF1bHRNYXBzZXJ2ZXJVcmwpO1xuICAgICAgICAgICAgc2V0RGVmYXVsdExheWVyT3BhY2l0eShsYXllcmdyb3VwW2ldLCBkYXRhLmRlZmF1bHRMYXllck9wYWNpdHkpXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNldERlZmF1bHRMYXllck9wYWNpdHkgKGxheWVyLCBvcGFjaXR5KSB7XG4gICAgbGF5ZXIub3BhY2l0eSA9IGxheWVyLm9wYWNpdHkgfHwgb3BhY2l0eVxufVxuXG5mdW5jdGlvbiBzZXRNYXBzZXJ2ZXJVcmwgKGxheWVyLCB1cmwpIHtcbiAgICBsYXllci51cmwgPSBsYXllci51cmwgfHwgdXJsO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvcGFyc2VyLmpzIiwiaW1wb3J0IHsgR2VvU2VhcmNoQ29udHJvbCwgT3BlblN0cmVldE1hcFByb3ZpZGVyIH0gZnJvbSAnbGVhZmxldC1nZW9zZWFyY2gnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDcmVhdGVTZWFyY2ggKG1hcCkge1xuICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IE9wZW5TdHJlZXRNYXBQcm92aWRlcigpO1xuXG4gICAgY29uc3Qgc2VhcmNoQ29udHJvbCA9IG5ldyBHZW9TZWFyY2hDb250cm9sKHtcbiAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLFxuICAgICAgICBzaG93TWFya2VyOiBmYWxzZSxcbiAgICAgICAgYXV0b0NvbXBsZXRlOiB0cnVlLFxuICAgICAgICBzaG93UG9wdXA6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgbWFwLmFkZENvbnRyb2woc2VhcmNoQ29udHJvbCk7XG5cbiAgICB2YXIgc2VhcmNoRWxlbWVudHMgPSBzZWFyY2hDb250cm9sLnNlYXJjaEVsZW1lbnQuZWxlbWVudHNcblxuICAgIEwuRG9tRXZlbnQub24oc2VhcmNoRWxlbWVudHMuY29udGFpbmVyLCBcImNsaWNrXCIsIGZ1bmN0aW9uIChldikge1xuICAgICAgICBMLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbihldik7XG5cbiAgICAgICAgdmFyIHNlYXJjaEVudHJpZXMgPSBzZWFyY2hFbGVtZW50cy5mb3JtXG4gICAgICAgICAgICAuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmVzdWx0cycpWzBdLmNoaWxkcmVuXG5cbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlYXJjaEVudHJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChldi50YXJnZXQgPT09IHNlYXJjaEVudHJpZXNbaV0pIHtcbiAgICAgICAgICAgICAgICBzZWFyY2hFbGVtZW50cy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBzZWFyY2ggYnkgYWRkcmVzc1xuICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdzZWFyY2gnLFxuICAgICAgICAgICAgZXZlbnRMYWJlbDogJ2NsaWNrJyxcbiAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgTC5Eb21FdmVudC5vbihzZWFyY2hFbGVtZW50cy5jb250YWluZXIsIFwia2V5ZG93blwiLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgTC5Eb21FdmVudC5zdG9wUHJvcGFnYXRpb24oZXYpO1xuXG4gICAgICAgIGlmIChldi53aGljaCA9PSAxMyB8fCBldi5rZXlDb2RlID09IDEzKSB7XG4gICAgICAgICAgICBzZWFyY2hFbGVtZW50cy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcblxuICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIHNlYWNyY2ggYnkgYWRkcmVzc1xuICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG4gICAgICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdzZWFyY2ggYWRkcmVzcycsXG4gICAgICAgICAgICAgICAgZXZlbnRMYWJlbDogZXYudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvc2VhcmNoLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2xlYWZsZXRDb250cm9sID0gcmVxdWlyZSgnLi9sZWFmbGV0Q29udHJvbCcpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0dlb1NlYXJjaENvbnRyb2wnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sZWFmbGV0Q29udHJvbCkuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfc2VhcmNoRWxlbWVudCA9IHJlcXVpcmUoJy4vc2VhcmNoRWxlbWVudCcpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1NlYXJjaEVsZW1lbnQnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2hFbGVtZW50KS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9iaW5nUHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9iaW5nUHJvdmlkZXInKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdCaW5nUHJvdmlkZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iaW5nUHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX2VzcmlQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL2VzcmlQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0VzcmlQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VzcmlQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfZ29vZ2xlUHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9nb29nbGVQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0dvb2dsZVByb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ29vZ2xlUHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX29wZW5TdHJlZXRNYXBQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL29wZW5TdHJlZXRNYXBQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ09wZW5TdHJlZXRNYXBQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29wZW5TdHJlZXRNYXBQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9wcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1Byb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL2luZGV4LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX25vZGVudFJ1bnRpbWUgPSByZXF1aXJlKCdub2RlbnQtcnVudGltZScpO1xuXG52YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IExlYWZsZXRDb250cm9sO1xuXG52YXIgX2xvZGFzaCA9IHJlcXVpcmUoJ2xvZGFzaC5kZWJvdW5jZScpO1xuXG52YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXG52YXIgX3NlYXJjaEVsZW1lbnQgPSByZXF1aXJlKCcuL3NlYXJjaEVsZW1lbnQnKTtcblxudmFyIF9zZWFyY2hFbGVtZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaEVsZW1lbnQpO1xuXG52YXIgX3Jlc3VsdExpc3QgPSByZXF1aXJlKCcuL3Jlc3VsdExpc3QnKTtcblxudmFyIF9yZXN1bHRMaXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Jlc3VsdExpc3QpO1xuXG52YXIgX2RvbVV0aWxzID0gcmVxdWlyZSgnLi9kb21VdGlscycpO1xuXG52YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBkZWZhdWx0T3B0aW9ucyA9IGZ1bmN0aW9uIGRlZmF1bHRPcHRpb25zKCkge1xuICByZXR1cm4ge1xuICAgIHBvc2l0aW9uOiAndG9wbGVmdCcsXG4gICAgc3R5bGU6ICdidXR0b24nLFxuICAgIHNob3dNYXJrZXI6IHRydWUsXG4gICAgc2hvd1BvcHVwOiBmYWxzZSxcbiAgICBtYXJrZXI6IHtcbiAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpLFxuICAgICAgZHJhZ2dhYmxlOiBmYWxzZVxuICAgIH0sXG4gICAgbWF4TWFya2VyczogMSxcbiAgICByZXRhaW5ab29tTGV2ZWw6IGZhbHNlLFxuICAgIGFuaW1hdGVab29tOiB0cnVlLFxuICAgIHNlYXJjaExhYmVsOiAnRW50ZXIgYWRkcmVzcycsXG4gICAgbm90Rm91bmRNZXNzYWdlOiAnU29ycnksIHRoYXQgYWRkcmVzcyBjb3VsZCBub3QgYmUgZm91bmQuJyxcbiAgICBtZXNzYWdlSGlkZURlbGF5OiAzMDAwLFxuICAgIHpvb21MZXZlbDogMTgsXG4gICAgY2xhc3NOYW1lczoge1xuICAgICAgY29udGFpbmVyOiAnbGVhZmxldC1iYXIgbGVhZmxldC1jb250cm9sIGxlYWZsZXQtY29udHJvbC1nZW9zZWFyY2gnLFxuICAgICAgYnV0dG9uOiAnbGVhZmxldC1iYXItcGFydCBsZWFmbGV0LWJhci1wYXJ0LXNpbmdsZScsXG4gICAgICBtc2dib3g6ICdsZWFmbGV0LWJhciBtZXNzYWdlJyxcbiAgICAgIGZvcm06ICcnLFxuICAgICAgaW5wdXQ6ICcnXG4gICAgfSxcbiAgICBhdXRvQ29tcGxldGU6IHRydWUsXG4gICAgYXV0b0NvbXBsZXRlRGVsYXk6IDI1MFxuICB9O1xufTtcblxudmFyIENvbnRyb2wgPSB7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUob3B0aW9ucykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB0aGlzLm1hcmtlcnMgPSBuZXcgTC5GZWF0dXJlR3JvdXAoKTtcblxuICAgIHRoaXMub3B0aW9ucyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0T3B0aW9ucygpLCBvcHRpb25zKTtcblxuICAgIHZhciBfb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgc3R5bGUgPSBfb3B0aW9ucy5zdHlsZSxcbiAgICAgICAgY2xhc3NOYW1lcyA9IF9vcHRpb25zLmNsYXNzTmFtZXMsXG4gICAgICAgIHNlYXJjaExhYmVsID0gX29wdGlvbnMuc2VhcmNoTGFiZWwsXG4gICAgICAgIGF1dG9Db21wbGV0ZSA9IF9vcHRpb25zLmF1dG9Db21wbGV0ZSxcbiAgICAgICAgYXV0b0NvbXBsZXRlRGVsYXkgPSBfb3B0aW9ucy5hdXRvQ29tcGxldGVEZWxheTtcblxuICAgIGlmIChzdHlsZSAhPT0gJ2J1dHRvbicpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5jbGFzc05hbWVzLmNvbnRhaW5lciArPSAnICcgKyBvcHRpb25zLnN0eWxlO1xuICAgIH1cblxuICAgIHRoaXMuc2VhcmNoRWxlbWVudCA9IG5ldyBfc2VhcmNoRWxlbWVudDIuZGVmYXVsdChfZXh0ZW5kcyh7fSwgdGhpcy5vcHRpb25zLCB7XG4gICAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChxdWVyeSkge1xuICAgICAgICByZXR1cm4gX3RoaXMub25TdWJtaXQocXVlcnkpO1xuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHZhciBfc2VhcmNoRWxlbWVudCRlbGVtZW4gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMsXG4gICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5jb250YWluZXIsXG4gICAgICAgIGZvcm0gPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uZm9ybSxcbiAgICAgICAgaW5wdXQgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uaW5wdXQ7XG5cbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9KTtcblxuICAgIHZhciBidXR0b24gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdhJywgY2xhc3NOYW1lcy5idXR0b24sIGNvbnRhaW5lcik7XG4gICAgYnV0dG9uLnRpdGxlID0gc2VhcmNoTGFiZWw7XG4gICAgYnV0dG9uLmhyZWYgPSAnIyc7XG5cbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25DbGljayhlKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICBpZiAoYXV0b0NvbXBsZXRlKSB7XG4gICAgICB0aGlzLnJlc3VsdExpc3QgPSBuZXcgX3Jlc3VsdExpc3QyLmRlZmF1bHQoe1xuICAgICAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2soX3JlZikge1xuICAgICAgICAgIHZhciByZXN1bHQgPSBfcmVmLnJlc3VsdDtcblxuICAgICAgICAgIGlucHV0LnZhbHVlID0gcmVzdWx0LmxhYmVsO1xuICAgICAgICAgIF90aGlzLm9uU3VibWl0KHsgcXVlcnk6IHJlc3VsdC5sYWJlbCB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGZvcm0uYXBwZW5kQ2hpbGQodGhpcy5yZXN1bHRMaXN0LmVsZW1lbnRzLmNvbnRhaW5lcik7XG5cbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKDAsIF9sb2Rhc2gyLmRlZmF1bHQpKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5hdXRvU2VhcmNoKGUpO1xuICAgICAgfSwgYXV0b0NvbXBsZXRlRGVsYXkpLCB0cnVlKTtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2VsZWN0UmVzdWx0KGUpO1xuICAgICAgfSwgdHJ1ZSk7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmNsZWFyUmVzdWx0cyhlKTtcbiAgICAgIH0sIHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudHMgPSB7IGJ1dHRvbjogYnV0dG9uIH07XG4gIH0sXG4gIG9uQWRkOiBmdW5jdGlvbiBvbkFkZChtYXApIHtcbiAgICB2YXIgX29wdGlvbnMyID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBzaG93TWFya2VyID0gX29wdGlvbnMyLnNob3dNYXJrZXIsXG4gICAgICAgIHN0eWxlID0gX29wdGlvbnMyLnN0eWxlO1xuXG5cbiAgICB0aGlzLm1hcCA9IG1hcDtcbiAgICBpZiAoc2hvd01hcmtlcikge1xuICAgICAgdGhpcy5tYXJrZXJzLmFkZFRvKG1hcCk7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlID09PSAnYmFyJykge1xuICAgICAgdmFyIGZvcm0gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuZm9ybTtcblxuICAgICAgdmFyIHJvb3QgPSBtYXAuZ2V0Q29udGFpbmVyKCkucXVlcnlTZWxlY3RvcignLmxlYWZsZXQtY29udHJvbC1jb250YWluZXInKTtcblxuICAgICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsICdsZWFmbGV0LWNvbnRyb2wtZ2Vvc2VhcmNoIGJhcicpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZvcm0pO1xuICAgICAgcm9vdC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgICAgdGhpcy5lbGVtZW50cy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5jb250YWluZXI7XG4gIH0sXG4gIG9uUmVtb3ZlOiBmdW5jdGlvbiBvblJlbW92ZSgpIHtcbiAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cbiAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICBjb250YWluZXIucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG4gIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIF9zZWFyY2hFbGVtZW50JGVsZW1lbjIgPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMsXG4gICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbjIuY29udGFpbmVyLFxuICAgICAgICBpbnB1dCA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbjIuaW5wdXQ7XG5cblxuICAgIGlmIChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgICBpbnB1dC5mb2N1cygpO1xuICAgIH1cbiAgfSxcbiAgc2VsZWN0UmVzdWx0OiBmdW5jdGlvbiBzZWxlY3RSZXN1bHQoZXZlbnQpIHtcbiAgICBpZiAoIVtfY29uc3RhbnRzLkFSUk9XX0RPV05fS0VZLCBfY29uc3RhbnRzLkFSUk9XX1VQX0tFWV0uaW5jbHVkZXMoZXZlbnQua2V5Q29kZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBpbnB1dCA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5pbnB1dDtcblxuXG4gICAgdmFyIGxpc3QgPSB0aGlzLnJlc3VsdExpc3Q7XG4gICAgdmFyIG1heCA9IHRoaXMucmVzdWx0TGlzdC5jb3VudCgpIC0gMTtcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gICAgdmFyIG5leHQgPSBldmVudC5jb2RlID09PSAnQXJyb3dEb3duJyA/IH5+bGlzdC5zZWxlY3RlZCArIDEgOiB+fmxpc3Quc2VsZWN0ZWQgLSAxO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuICAgIHZhciBpZHggPSBuZXh0IDwgMCA/IG1heCA6IG5leHQgPiBtYXggPyAwIDogbmV4dDtcblxuICAgIHZhciBpdGVtID0gbGlzdC5zZWxlY3QoaWR4KTtcbiAgICBpbnB1dC52YWx1ZSA9IGl0ZW0ubGFiZWw7XG4gIH0sXG4gIGNsZWFyUmVzdWx0czogZnVuY3Rpb24gY2xlYXJSZXN1bHRzKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgIT09IF9jb25zdGFudHMuRVNDQVBFX0tFWSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucmVzdWx0TGlzdC5jbGVhcigpO1xuICB9LFxuICBhdXRvU2VhcmNoOiBmdW5jdGlvbiBhdXRvU2VhcmNoKGV2ZW50KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgIHZhciBxdWVyeSwgcHJvdmlkZXIsIHJlc3VsdHM7XG5cbiAgICAgIGlmIChfY29uc3RhbnRzLlNQRUNJQUxfS0VZUy5pbmNsdWRlcyhldmVudC5rZXlDb2RlKSkge1xuICAgICAgICByZXR1cm4gJHJldHVybigpO1xuICAgICAgfVxuXG4gICAgICBxdWVyeSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgIHByb3ZpZGVyID0gdGhpcy5vcHRpb25zLnByb3ZpZGVyO1xuICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlYXJjaCh7IHF1ZXJ5OiBxdWVyeSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXG4gICAgICAgIHJlc3VsdHMgPSAkYXdhaXRfMTtcbiAgICAgICAgdGhpcy5yZXN1bHRMaXN0LnJlbmRlcihyZXN1bHRzKTtcbiAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcbiAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG4gIH0sXG4gIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdChxdWVyeSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG4gICAgICB2YXIgcHJvdmlkZXIsIHJlc3VsdHM7XG4gICAgICBwcm92aWRlciA9IHRoaXMub3B0aW9ucy5wcm92aWRlcjtcbiAgICAgIHJldHVybiBwcm92aWRlci5zZWFyY2gocXVlcnkpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG5cbiAgICAgICAgcmVzdWx0cyA9ICRhd2FpdF8yO1xuXG4gICAgICAgIGlmIChyZXN1bHRzICYmIHJlc3VsdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuc2hvd1Jlc3VsdChyZXN1bHRzWzBdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJHJldHVybigpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgfSxcbiAgc2hvd1Jlc3VsdDogZnVuY3Rpb24gc2hvd1Jlc3VsdChyZXN1bHQpIHtcbiAgICB2YXIgbWFya2VycyA9IE9iamVjdC5rZXlzKHRoaXMubWFya2Vycy5fbGF5ZXJzKTtcbiAgICBpZiAobWFya2Vycy5sZW5ndGggPj0gdGhpcy5vcHRpb25zLm1heE1hcmtlcnMpIHtcbiAgICAgIHRoaXMubWFya2Vycy5yZW1vdmVMYXllcihtYXJrZXJzWzBdKTtcbiAgICB9XG5cbiAgICB2YXIgbWFya2VyID0gdGhpcy5hZGRNYXJrZXIocmVzdWx0KTtcbiAgICB0aGlzLmNlbnRlck1hcChyZXN1bHQpO1xuXG4gICAgdGhpcy5tYXAuZmlyZUV2ZW50KCdnZW9zZWFyY2gvc2hvd2xvY2F0aW9uJywge1xuICAgICAgbG9jYXRpb246IHJlc3VsdCxcbiAgICAgIG1hcmtlcjogbWFya2VyXG4gICAgfSk7XG4gIH0sXG4gIGFkZE1hcmtlcjogZnVuY3Rpb24gYWRkTWFya2VyKHJlc3VsdCkge1xuICAgIHZhciBfb3B0aW9uczMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIG9wdGlvbnMgPSBfb3B0aW9uczMubWFya2VyLFxuICAgICAgICBzaG93UG9wdXAgPSBfb3B0aW9uczMuc2hvd1BvcHVwO1xuXG4gICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihbcmVzdWx0LnksIHJlc3VsdC54XSwgb3B0aW9ucyk7XG4gICAgbWFya2VyLmJpbmRQb3B1cChyZXN1bHQubGFiZWwpO1xuXG4gICAgdGhpcy5tYXJrZXJzLmFkZExheWVyKG1hcmtlcik7XG5cbiAgICBpZiAoc2hvd1BvcHVwKSB7XG4gICAgICBtYXJrZXIub3BlblBvcHVwKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hcmtlcjtcbiAgfSxcbiAgY2VudGVyTWFwOiBmdW5jdGlvbiBjZW50ZXJNYXAocmVzdWx0KSB7XG4gICAgdmFyIF9vcHRpb25zNCA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgcmV0YWluWm9vbUxldmVsID0gX29wdGlvbnM0LnJldGFpblpvb21MZXZlbCxcbiAgICAgICAgYW5pbWF0ZVpvb20gPSBfb3B0aW9uczQuYW5pbWF0ZVpvb207XG5cblxuICAgIHZhciByZXN1bHRCb3VuZHMgPSBuZXcgTC5MYXRMbmdCb3VuZHMocmVzdWx0LmJvdW5kcyk7XG4gICAgdmFyIGJvdW5kcyA9IHJlc3VsdEJvdW5kcy5pc1ZhbGlkKCkgPyByZXN1bHRCb3VuZHMgOiB0aGlzLm1hcmtlcnMuZ2V0Qm91bmRzKCk7XG5cbiAgICBpZiAoIXJldGFpblpvb21MZXZlbCAmJiByZXN1bHRCb3VuZHMuaXNWYWxpZCgpKSB7XG4gICAgICB0aGlzLm1hcC5maXRCb3VuZHMoYm91bmRzLCB7IGFuaW1hdGU6IGFuaW1hdGVab29tIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1hcC5zZXRWaWV3KGJvdW5kcy5nZXRDZW50ZXIoKSwgdGhpcy5nZXRab29tKCksIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG4gICAgfVxuICB9LFxuICBnZXRab29tOiBmdW5jdGlvbiBnZXRab29tKCkge1xuICAgIHZhciBfb3B0aW9uczUgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHJldGFpblpvb21MZXZlbCA9IF9vcHRpb25zNS5yZXRhaW5ab29tTGV2ZWwsXG4gICAgICAgIHpvb21MZXZlbCA9IF9vcHRpb25zNS56b29tTGV2ZWw7XG5cbiAgICByZXR1cm4gcmV0YWluWm9vbUxldmVsID8gdGhpcy5tYXAuZ2V0Wm9vbSgpIDogem9vbUxldmVsO1xuICB9XG59O1xuXG5mdW5jdGlvbiBMZWFmbGV0Q29udHJvbCgpIHtcbiAgaWYgKCFMIHx8ICFMLkNvbnRyb2wgfHwgIUwuQ29udHJvbC5leHRlbmQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0xlYWZsZXQgbXVzdCBiZSBsb2FkZWQgYmVmb3JlIGluc3RhbnRpYXRpbmcgdGhlIEdlb1NlYXJjaCBjb250cm9sJyk7XG4gIH1cblxuICB2YXIgTENvbnRyb2wgPSBMLkNvbnRyb2wuZXh0ZW5kKENvbnRyb2wpO1xuXG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBvcHRpb25zID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgb3B0aW9uc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KExDb250cm9sLCBbbnVsbF0uY29uY2F0KG9wdGlvbnMpKSkoKTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9sZWFmbGV0Q29udHJvbC5qcyIsIlwidXNlIHN0cmljdFwiO1xuLypcbiAqICRhc3luY2JpbmQgaGFzIG11bHRpcGxlIHVzZXMsIGRlcGVuZGluZyBvbiB0aGUgcGFyYW1ldGVyIGxpc3QuIEl0IGlzIGluIEZ1bmN0aW9uLnByb3RvdHlwZSwgc28gJ3RoaXMnIGlzIGFsd2F5cyBhIGZ1bmN0aW9uXG4gKlxuICogMSkgSWYgY2FsbGVkIHdpdGggYSBzaW5nbGUgYXJndW1lbnQgKHRoaXMpLCBpdCBpcyB1c2VkIHdoZW4gZGVmaW5pbmcgYW4gYXN5bmMgZnVuY3Rpb24gdG8gZW5zdXJlIHdoZW5cbiAqICAgICAgaXQgaXMgaW52b2tlZCwgdGhlIGNvcnJlY3QgJ3RoaXMnIGlzIHByZXNlbnQsIGp1c3QgbGlrZSBcImJpbmRcIi4gRm9yIGxlZ2FjeSByZWFzb25zLCAndGhpcycgaXMgZ2l2ZW5cbiAqICAgICAgYSBtZW1lYmVyICd0aGVuJyB3aGljaCByZWZlcnMgdG8gaXRzZWxmLlxuICogMikgSWYgY2FsbGVkIHdpdGggYSBzZWNvbmQgcGFyYW1ldGVyIChcImNhdGNoZXJcIikgYW5kIGNhdGNoZXIhPT10cnVlIGl0IGlzIGJlaW5nIHVzZWQgdG8gaW52b2tlIGFuIGFzeW5jXG4gKiAgICAgIGZ1bmN0aW9uIHdoZXJlIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIHRoZSBlcnJvciBjYWxsYmFjayAoZm9yIHN5bmMgZXhjZXB0aW9ucyBhbmQgdG8gYmUgcGFzc2VkIHRvXG4gKiAgICAgIG5lc3RlZCBhc3luYyBjYWxscylcbiAqIDMpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09dHJ1ZSwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG4gKiAgICAgIGluIGFuICdQcm9taXNlJyBhcyB3ZWxsIGJvdW5kIHRvICd0aGlzJy5cbiAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IFByb21pc2UodGhpcyknLCB3aGVyZSAndGhpcycgaXMgdGhlIGZ1bmN0aW9uIGJlaW5nIGJvdW5kL3dyYXBwZWRcbiAqIDQpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09MCwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG4gKiAgICAgIGluIGEgJ0xhenlUaGVuYWJsZScsIHdoaWNoIGV4ZWN1dGVzIGxhemlseSBhbmQgY2FuIHJlc29sdmUgc3luY2hyb25vdXNseS5cbiAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IExhenlUaGVuYWJsZSh0aGlzKScgKGlmIHN1Y2ggYSB0eXBlIHdlcmUgZXhwb3NlZCksIHdoZXJlICd0aGlzJyBpc1xuICogICAgICB0aGUgZnVuY3Rpb24gYmVpbmcgYm91bmQvd3JhcHBlZFxuICovXG5cbmZ1bmN0aW9uIHByb2Nlc3NJbmNsdWRlcyhpbmNsdWRlcyxpbnB1dCkge1xuICAgIHZhciBzcmMgPSBpbnB1dC50b1N0cmluZygpIDtcbiAgICB2YXIgdCA9IFwicmV0dXJuIFwiK3NyYyA7XG4gICAgdmFyIGFyZ3MgPSBzcmMubWF0Y2goLy4qXFwoKFteKV0qKVxcKS8pWzFdIDtcbiAgICB2YXIgcmUgPSAvWydcIl0hISEoW14nXCJdKilbJ1wiXS9nIDtcbiAgICB2YXIgbSA9IFtdIDtcbiAgICB3aGlsZSAoMSkge1xuICAgICAgICB2YXIgbXggPSByZS5leGVjKHQpIDtcbiAgICAgICAgaWYgKG14KVxuICAgICAgICAgICAgbS5wdXNoKG14KSA7XG4gICAgICAgIGVsc2UgYnJlYWsgO1xuICAgIH1cbiAgICBtLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe1xuICAgICAgICB0ID0gdC5zbGljZSgwLGUuaW5kZXgpK2luY2x1ZGVzW2VbMV1dK3Quc3Vic3RyKGUuaW5kZXgrZVswXS5sZW5ndGgpIDtcbiAgICB9KSA7XG4gICAgdCA9IHQucmVwbGFjZSgvXFwvXFwqW14qXSpcXCpcXC8vZywnICcpLnJlcGxhY2UoL1xccysvZywnICcpIDtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKGFyZ3MsdCkoKSA7XG59XG5cbnZhciAkYXN5bmNiaW5kID0gcHJvY2Vzc0luY2x1ZGVzKHtcbiAgICB6b3VzYW46cmVxdWlyZSgnLi96b3VzYW4nKS50b1N0cmluZygpLFxuICAgIHRoZW5hYmxlOnJlcXVpcmUoJy4vdGhlbmFibGVGYWN0b3J5JykudG9TdHJpbmcoKVxufSxcbmZ1bmN0aW9uICRhc3luY2JpbmQoc2VsZixjYXRjaGVyKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jYmluZCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLFwiJGFzeW5jYmluZFwiLHt2YWx1ZTokYXN5bmNiaW5kLGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6dHJ1ZX0pIDtcbiAgICB9XG5cbiAgICBpZiAoISRhc3luY2JpbmQudHJhbXBvbGluZSkge1xuICAgICAgJGFzeW5jYmluZC50cmFtcG9saW5lID0gZnVuY3Rpb24gdHJhbXBvbGluZSh0LHgscyxlLHUpe1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gYihxKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHEudGhlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHEudGhlbihiLCBlKSA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdT91bmRlZmluZWQ6cTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEucG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHEucG9wKCkgPyB4LmNhbGwodCkgOiBxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBzO1xuICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBxLmNhbGwodClcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAocikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUocik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICghJGFzeW5jYmluZC5MYXp5VGhlbmFibGUpIHtcbiAgICAgICAgJGFzeW5jYmluZC5MYXp5VGhlbmFibGUgPSAnISEhdGhlbmFibGUnKCk7XG4gICAgICAgICRhc3luY2JpbmQuRWFnZXJUaGVuYWJsZSA9ICRhc3luY2JpbmQuVGhlbmFibGUgPSAoJGFzeW5jYmluZC5FYWdlclRoZW5hYmxlRmFjdG9yeSA9ICchISF6b3VzYW4nKSgpO1xuICAgIH1cblxuICAgIHZhciByZXNvbHZlciA9IHRoaXM7XG4gICAgc3dpdGNoIChjYXRjaGVyKSB7XG4gICAgY2FzZSB0cnVlOlxuICAgICAgICByZXR1cm4gbmV3ICgkYXN5bmNiaW5kLlRoZW5hYmxlKShib3VuZFRoZW4pO1xuICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIG5ldyAoJGFzeW5jYmluZC5MYXp5VGhlbmFibGUpKGJvdW5kVGhlbik7XG4gICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICAgIC8qIEZvciBydW50aW1lIGNvbXBhdGliaWxpdHkgd2l0aCBOb2RlbnQgdjIueCwgcHJvdmlkZSBhIHRoZW5hYmxlICovXG4gICAgICAgIGJvdW5kVGhlbi50aGVuID0gYm91bmRUaGVuIDtcbiAgICAgICAgcmV0dXJuIGJvdW5kVGhlbiA7XG4gICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlci5hcHBseShzZWxmLGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9IGNhdGNoKGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhdGNoZXIoZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJvdW5kVGhlbigpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVyLmFwcGx5KHNlbGYsYXJndW1lbnRzKTtcbiAgICB9XG59KSA7XG5cbmZ1bmN0aW9uICRhc3luY3NwYXduKHByb21pc2VQcm92aWRlcixzZWxmKSB7XG4gICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jc3Bhd24pIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSxcIiRhc3luY3NwYXduXCIse3ZhbHVlOiRhc3luY3NwYXduLGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6dHJ1ZX0pIDtcbiAgICB9XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEZ1bmN0aW9uKSkgcmV0dXJuIDtcblxuICAgIHZhciBnZW5GID0gdGhpcyA7XG4gICAgcmV0dXJuIG5ldyBwcm9taXNlUHJvdmlkZXIoZnVuY3Rpb24gZW5vdWdoKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgZ2VuID0gZ2VuRi5jYWxsKHNlbGYsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAoZm4sYXJnKSB7XG4gICAgICAgICAgICB2YXIgbmV4dDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbmV4dCA9IGZuLmNhbGwoZ2VuLGFyZyk7XG4gICAgICAgICAgICAgICAgaWYobmV4dC5kb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlICE9PSByZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZSAmJiBuZXh0LnZhbHVlPT09bmV4dC52YWx1ZS50aGVuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0LnZhbHVlKHJlc29sdmUscmVqZWN0KSA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlICYmIHJlc29sdmUobmV4dC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gbnVsbCA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlLnRoZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dC52YWx1ZS50aGVuKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLm5leHQsdik7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLnRocm93LGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi5uZXh0LG5leHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgIHJlamVjdCAmJiByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgcmVqZWN0ID0gbnVsbCA7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0ZXAoZ2VuLm5leHQpO1xuICAgIH0pO1xufVxuXG4vLyBJbml0aWFsaXplIGFzeW5jIGJpbmRpbmdzXG4kYXN5bmNiaW5kKCkgO1xuJGFzeW5jc3Bhd24oKSA7XG5cbi8vIEV4cG9ydCBhc3luYyBiaW5kaW5nc1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgJGFzeW5jYmluZDokYXN5bmNiaW5kLFxuICAgICRhc3luY3NwYXduOiRhc3luY3NwYXduXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9ub2RlbnQtcnVudGltZS9ydW50aW1lLmpzIiwiLyogVGhpcyBjb2RlIGlzIGJhc2VkIG9uOlxuem91c2FuIC0gQSBMaWdodG5pbmcgRmFzdCwgWWV0IFZlcnkgU21hbGwgUHJvbWlzZSBBKyBDb21wbGlhbnQgSW1wbGVtZW50YXRpb25cbmh0dHBzOi8vZ2l0aHViLmNvbS9ibHVlamF2YS96b3VzYW5cbkF1dGhvcjogR2xlbm4gQ3Jvd25vdmVyIDxnbGVubkBibHVlamF2YS5jb20+IChodHRwOi8vd3d3LmJsdWVqYXZhLmNvbSlcblZlcnNpb24gMi4zLjNcbkxpY2Vuc2U6IE1JVCAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRpY2spe1xuICAgIHRpY2sgPSB0aWNrIHx8ICh0eXBlb2YgcHJvY2Vzcz09PVwib2JqZWN0XCIgJiYgcHJvY2Vzcy5uZXh0VGljaykgfHwgKHR5cGVvZiBzZXRJbW1lZGlhdGU9PT1cImZ1bmN0aW9uXCIgJiYgc2V0SW1tZWRpYXRlKSB8fCBmdW5jdGlvbihmKXtzZXRUaW1lb3V0KGYsMCl9O1xuICAgIHZhciBzb29uID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZxID0gW10sIGZxU3RhcnQgPSAwLCBidWZmZXJTaXplID0gMTAyNDtcbiAgICAgICAgZnVuY3Rpb24gY2FsbFF1ZXVlKCkge1xuICAgICAgICAgICAgd2hpbGUgKGZxLmxlbmd0aCAtIGZxU3RhcnQpIHtcbiAgICAgICAgICAgICAgICB0cnkgeyBmcVtmcVN0YXJ0XSgpIH0gY2F0Y2goZXgpIHsgLyogY29uc29sZS5lcnJvcihleCkgKi8gfVxuICAgICAgICAgICAgICAgIGZxW2ZxU3RhcnQrK10gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKGZxU3RhcnQgPT09IGJ1ZmZlclNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgZnEuc3BsaWNlKDAsIGJ1ZmZlclNpemUpO1xuICAgICAgICAgICAgICAgICAgICBmcVN0YXJ0ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICBmcS5wdXNoKGZuKTtcbiAgICAgICAgICAgIGlmIChmcS5sZW5ndGggLSBmcVN0YXJ0ID09PSAxKVxuICAgICAgICAgICAgICAgIHRpY2soY2FsbFF1ZXVlKTtcbiAgICAgICAgfTtcbiAgICB9KSgpO1xuXG4gICAgZnVuY3Rpb24gWm91c2FuKGZ1bmMpIHtcbiAgICAgICAgaWYgKGZ1bmMpIHtcbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgICAgICBmdW5jKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgICAgICAgICBtZS5yZXNvbHZlKGFyZyk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgICAgICAgbWUucmVqZWN0KGFyZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIFpvdXNhbi5wcm90b3R5cGUgPSB7XG4gICAgICAgIHJlc29sdmU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJBdHRlbXB0IHRvIHJlc29sdmUgcHJvbWlzZSB3aXRoIHNlbGZcIikpO1xuICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aGVuID0gdmFsdWUudGhlbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVuY3Rpb24gKHJhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJlc29sdmUocmEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5yZWplY3QocnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRlVMRklMTEVEO1xuICAgICAgICAgICAgdGhpcy52ID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAobWUuYylcbiAgICAgICAgICAgICAgICBzb29uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIGwgPSBtZS5jLmxlbmd0aDtuIDwgbDsgbisrKVxuICAgICAgICAgICAgICAgICAgICAgICAgU1RBVEVfRlVMRklMTEVEKG1lLmNbbl0sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9SRUpFQ1RFRDtcbiAgICAgICAgICAgIHRoaXMudiA9IHJlYXNvbjtcbiAgICAgICAgICAgIHZhciBjbGllbnRzID0gdGhpcy5jO1xuICAgICAgICAgICAgaWYgKGNsaWVudHMpXG4gICAgICAgICAgICAgICAgc29vbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCBsID0gY2xpZW50cy5sZW5ndGg7biA8IGw7IG4rKylcbiAgICAgICAgICAgICAgICAgICAgICAgIFNUQVRFX1JFSkVDVEVEKGNsaWVudHNbbl0sIHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHRoZW46IGZ1bmN0aW9uIChvbkYsIG9uUikge1xuICAgICAgICAgICAgdmFyIHAgPSBuZXcgWm91c2FuKCk7XG4gICAgICAgICAgICB2YXIgY2xpZW50ID0ge1xuICAgICAgICAgICAgICAgIHk6IG9uRixcbiAgICAgICAgICAgICAgICBuOiBvblIsXG4gICAgICAgICAgICAgICAgcDogcFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmMucHVzaChjbGllbnQpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jID0gW2NsaWVudF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcy5zdGF0ZSwgYSA9IHRoaXMudjtcbiAgICAgICAgICAgICAgICBzb29uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcyhjbGllbnQsIGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gU1RBVEVfRlVMRklMTEVEKGMsIGFyZykge1xuICAgICAgICBpZiAodHlwZW9mIGMueSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciB5cmV0ID0gYy55LmNhbGwodW5kZWZpbmVkLCBhcmcpO1xuICAgICAgICAgICAgICAgIGMucC5yZXNvbHZlKHlyZXQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgYy5wLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgIGMucC5yZXNvbHZlKGFyZyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gU1RBVEVfUkVKRUNURUQoYywgcmVhc29uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYy5uID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHlyZXQgPSBjLm4uY2FsbCh1bmRlZmluZWQsIHJlYXNvbik7XG4gICAgICAgICAgICAgICAgYy5wLnJlc29sdmUoeXJldCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjLnAucmVqZWN0KGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgYy5wLnJlamVjdChyZWFzb24pO1xuICAgIH1cblxuICAgIFpvdXNhbi5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICBpZiAodmFsICYmICh2YWwgaW5zdGFuY2VvZiBab3VzYW4pKVxuICAgICAgICAgICAgcmV0dXJuIHZhbCA7XG4gICAgICAgIHZhciB6ID0gbmV3IFpvdXNhbigpO1xuICAgICAgICB6LnJlc29sdmUodmFsKTtcbiAgICAgICAgcmV0dXJuIHo7XG4gICAgfTtcbiAgICBab3VzYW4ucmVqZWN0ID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoZXJyICYmIChlcnIgaW5zdGFuY2VvZiBab3VzYW4pKVxuICAgICAgICAgICAgcmV0dXJuIGVyciA7XG4gICAgICAgIHZhciB6ID0gbmV3IFpvdXNhbigpO1xuICAgICAgICB6LnJlamVjdChlcnIpO1xuICAgICAgICByZXR1cm4gejtcbiAgICB9O1xuXG4gICAgWm91c2FuLnZlcnNpb24gPSBcIjIuMy4zLW5vZGVudFwiIDtcbiAgICByZXR1cm4gWm91c2FuIDtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L25vZGVudC1ydW50aW1lL3pvdXNhbi5qcyIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ2YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcbn07XG5leHBvcnRzLmNsZWFyVGltZW91dCA9XG5leHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7XG4gIGlmICh0aW1lb3V0KSB7XG4gICAgdGltZW91dC5jbG9zZSgpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG4gIHRoaXMuX2lkID0gaWQ7XG4gIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xufVxuVGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbigpIHt9O1xuVGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdywgdGhpcy5faWQpO1xufTtcblxuLy8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5leHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcbiAgaWYgKG1zZWNzID49IDApIHtcbiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcbiAgICB9LCBtc2Vjcyk7XG4gIH1cbn07XG5cbi8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3RcbnJlcXVpcmUoXCJzZXRpbW1lZGlhdGVcIik7XG5leHBvcnRzLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L21haW4uanMiLCIoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm9cbiAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblxuICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG4gICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcbiAgICAgIH1cbiAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuICAgICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG4gICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcbiAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuKHRhc2spIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcbiAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG4gICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uXG4gICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcbiAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG4gICAgICAgICAgICAvLyBcInRvbyBtdWNoIHJlY3Vyc2lvblwiIGVycm9yLlxuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsgcnVuSWZQcmVzZW50KGhhbmRsZSk7IH0pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG4gICAgICAgIC8vIHdoZXJlIGBnbG9iYWwucG9zdE1lc3NhZ2VgIG1lYW5zIHNvbWV0aGluZyBjb21wbGV0ZWx5IGRpZmZlcmVudCBhbmQgY2FuJ3QgYmUgdXNlZCBmb3IgdGhpcyBwdXJwb3NlLlxuICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG9sZE9uTWVzc2FnZSA9IGdsb2JhbC5vbm1lc3NhZ2U7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShcIlwiLCBcIipcIik7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG4gICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG5cbiAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSBcInNldEltbWVkaWF0ZSRcIiArIE1hdGgucmFuZG9tKCkgKyBcIiRcIjtcbiAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cbiAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS5cbiAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG4gICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cbiAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG4gICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuICAgICAgICAvLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45XG4gICAgICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGNhblVzZVBvc3RNZXNzYWdlKCkpIHtcbiAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcbiAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcbiAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcbiAgICAgICAgLy8gRm9yIElFIDbigJM4XG4gICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG4gICAgfVxuXG4gICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuICAgIGF0dGFjaFRvLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG59KHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiID8gdHlwZW9mIGdsb2JhbCA9PT0gXCJ1bmRlZmluZWRcIiA/IHRoaXMgOiBnbG9iYWwgOiBzZWxmKSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9+L3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanMiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIGlzVGhlbmFibGUob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogJiYgKG9iaiBpbnN0YW5jZW9mIE9iamVjdCkgJiYgdHlwZW9mIG9iai50aGVuPT09XCJmdW5jdGlvblwiO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc29sdXRpb24ocCxyLGhvdykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLyogMi4yLjcuMSAqL1xuICAgICAgICAgICAgdmFyIHggPSBob3cgPyBob3cocik6ciA7XG5cbiAgICAgICAgICAgIGlmIChwPT09eCkgLyogMi4zLjEgKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gcC5yZWplY3QobmV3IFR5cGVFcnJvcihcIlByb21pc2UgcmVzb2x1dGlvbiBsb29wXCIpKSA7XG5cbiAgICAgICAgICAgIGlmIChpc1RoZW5hYmxlKHgpKSB7XG4gICAgICAgICAgICAgICAgLyogMi4zLjMgKi9cbiAgICAgICAgICAgICAgICB4LnRoZW4oZnVuY3Rpb24oeSl7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb24ocCx5KTtcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgICAgICAgICBwLnJlamVjdChlKVxuICAgICAgICAgICAgICAgIH0pIDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcC5yZXNvbHZlKHgpIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIC8qIDIuMi43LjIgKi9cbiAgICAgICAgICAgIHAucmVqZWN0KGV4KSA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDaGFpbmVkKCkge307XG4gICAgQ2hhaW5lZC5wcm90b3R5cGUgPSB7XG4gICAgICAgIHJlc29sdmU6X3VuY2hhaW5lZCxcbiAgICAgICAgcmVqZWN0Ol91bmNoYWluZWQsXG4gICAgICAgIHRoZW46dGhlbkNoYWluXG4gICAgfTtcbiAgICBmdW5jdGlvbiBfdW5jaGFpbmVkKHYpe31cbiAgICBmdW5jdGlvbiB0aGVuQ2hhaW4ocmVzLHJlail7XG4gICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlcztcbiAgICAgICAgdGhpcy5yZWplY3QgPSByZWo7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHRoZW4ocmVzLHJlail7XG4gICAgICAgIHZhciBjaGFpbiA9IG5ldyBDaGFpbmVkKCkgO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZXIoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNUaGVuYWJsZSh2YWx1ZSkgPyB2YWx1ZS50aGVuKHJlcyxyZWopIDogcmVzb2x1dGlvbihjaGFpbix2YWx1ZSxyZXMpO1xuICAgICAgICAgICAgfSxmdW5jdGlvbihleCkge1xuICAgICAgICAgICAgICAgIHJlc29sdXRpb24oY2hhaW4sZXgscmVqKSA7XG4gICAgICAgICAgICB9KSA7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uKGNoYWluLGV4LHJlaik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYWluIDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBUaGVuYWJsZShyZXNvbHZlcikge1xuICAgICAgICB0aGlzLl9yZXNvbHZlciA9IHJlc29sdmVyIDtcbiAgICAgICAgdGhpcy50aGVuID0gdGhlbiA7XG4gICAgfTtcblxuICAgIFRoZW5hYmxlLnJlc29sdmUgPSBmdW5jdGlvbih2KXtcbiAgICAgICAgcmV0dXJuIFRoZW5hYmxlLmlzVGhlbmFibGUodikgPyB2IDoge3RoZW46ZnVuY3Rpb24ocmVzb2x2ZSl7cmV0dXJuIHJlc29sdmUodil9fTtcbiAgICB9O1xuXG4gICAgVGhlbmFibGUuaXNUaGVuYWJsZSA9IGlzVGhlbmFibGUgO1xuXG4gICAgcmV0dXJuIFRoZW5hYmxlIDtcbn0gO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9ub2RlbnQtcnVudGltZS90aGVuYWJsZUZhY3RvcnkuanMiLCIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE5BTiA9IDAgLyAwO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG52YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblxuLyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cbnZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXG4vKipcbiAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAyLjQuMFxuICogQGNhdGVnb3J5IERhdGVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICogfSwgXy5ub3coKSk7XG4gKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuICovXG52YXIgbm93ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiByb290LkRhdGUubm93KCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG4gKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG4gKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cbiAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZVxuICogbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZFxuICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudFxuICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2BcbiAqIGludm9jYXRpb24uXG4gKlxuICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpc1xuICogaW52b2tlZCBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cbiAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAqXG4gKiBJZiBgd2FpdGAgaXMgYDBgIGFuZCBgbGVhZGluZ2AgaXMgYGZhbHNlYCwgYGZ1bmNgIGludm9jYXRpb24gaXMgZGVmZXJyZWRcbiAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cbiAqXG4gKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9kZWJvdW5jaW5nLXRocm90dGxpbmctZXhwbGFpbmVkLWV4YW1wbGVzLylcbiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XVxuICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG4gKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuICpcbiAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuICogICAnbGVhZGluZyc6IHRydWUsXG4gKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gKiB9KSk7XG4gKlxuICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cbiAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuICpcbiAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgZGVib3VuY2VkIGludm9jYXRpb24uXG4gKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgbGFzdEFyZ3MsXG4gICAgICBsYXN0VGhpcyxcbiAgICAgIG1heFdhaXQsXG4gICAgICByZXN1bHQsXG4gICAgICB0aW1lcklkLFxuICAgICAgbGFzdENhbGxUaW1lLFxuICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuICAgICAgbGVhZGluZyA9IGZhbHNlLFxuICAgICAgbWF4aW5nID0gZmFsc2UsXG4gICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcbiAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcbiAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcbiAgICB2YXIgYXJncyA9IGxhc3RBcmdzLFxuICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG4gICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgLy8gU3RhcnQgdGhlIHRpbWVyIGZvciB0aGUgdHJhaWxpbmcgZWRnZS5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuICAgIHJldHVybiBsZWFkaW5nID8gaW52b2tlRnVuYyh0aW1lKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbWFpbmluZ1dhaXQodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG4gICAgICAgIHJlc3VsdCA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcblxuICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cbiAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG4gICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuICAgIHJldHVybiAobGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgKHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQpIHx8XG4gICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCk7XG4gICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICB9XG4gICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG4gICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cbiAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cbiAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcbiAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuICAgIH1cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgIH1cbiAgICBsYXN0SW52b2tlVGltZSA9IDA7XG4gICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICByZXR1cm4gdGltZXJJZCA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogdHJhaWxpbmdFZGdlKG5vdygpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpLFxuICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXG4gICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG4gICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG5cbiAgICBpZiAoaXNJbnZva2luZykge1xuICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXhpbmcpIHtcbiAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcbiAgcmV0dXJuIGRlYm91bmNlZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9OdW1iZXIoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcbiAqIC8vID0+IEluZmluaXR5XG4gKlxuICogXy50b051bWJlcignMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIE5BTjtcbiAgfVxuICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICB9XG4gIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcbiAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG4gICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG4gICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL34vbG9kYXNoLmRlYm91bmNlL2luZGV4LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX25vZGVudFJ1bnRpbWUgPSByZXF1aXJlKCdub2RlbnQtcnVudGltZScpO1xuXG52YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuL2RvbVV0aWxzJyk7XG5cbnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFNlYXJjaEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFNlYXJjaEVsZW1lbnQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgX3JlZiRoYW5kbGVTdWJtaXQgPSBfcmVmLmhhbmRsZVN1Ym1pdCxcbiAgICAgICAgaGFuZGxlU3VibWl0ID0gX3JlZiRoYW5kbGVTdWJtaXQgPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uICgpIHt9IDogX3JlZiRoYW5kbGVTdWJtaXQsXG4gICAgICAgIF9yZWYkc2VhcmNoTGFiZWwgPSBfcmVmLnNlYXJjaExhYmVsLFxuICAgICAgICBzZWFyY2hMYWJlbCA9IF9yZWYkc2VhcmNoTGFiZWwgPT09IHVuZGVmaW5lZCA/ICdzZWFyY2gnIDogX3JlZiRzZWFyY2hMYWJlbCxcbiAgICAgICAgX3JlZiRjbGFzc05hbWVzID0gX3JlZi5jbGFzc05hbWVzLFxuICAgICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZWFyY2hFbGVtZW50KTtcblxuICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBbJ2dlb3NlYXJjaCcsIGNsYXNzTmFtZXMuY29udGFpbmVyXS5qb2luKCcgJykpO1xuICAgIHZhciBmb3JtID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZm9ybScsIFsnJywgY2xhc3NOYW1lcy5mb3JtXS5qb2luKCcgJyksIGNvbnRhaW5lcik7XG4gICAgdmFyIGlucHV0ID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnaW5wdXQnLCBbJ2dsYXNzJywgY2xhc3NOYW1lcy5pbnB1dF0uam9pbignICcpLCBmb3JtKTtcblxuICAgIGlucHV0LnR5cGUgPSAndGV4dCc7XG4gICAgaW5wdXQucGxhY2Vob2xkZXIgPSBzZWFyY2hMYWJlbDtcblxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uSW5wdXQoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uS2V5VXAoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uS2V5UHJlc3MoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uRm9jdXMoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25CbHVyKGUpO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIHRoaXMuZWxlbWVudHMgPSB7IGNvbnRhaW5lcjogY29udGFpbmVyLCBmb3JtOiBmb3JtLCBpbnB1dDogaW5wdXQgfTtcbiAgICB0aGlzLmhhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhTZWFyY2hFbGVtZW50LCBbe1xuICAgIGtleTogJ29uRm9jdXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkZvY3VzKCkge1xuICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKHRoaXMuZWxlbWVudHMuZm9ybSwgJ2FjdGl2ZScpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uQmx1cicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQmx1cigpIHtcbiAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKSh0aGlzLmVsZW1lbnRzLmZvcm0sICdhY3RpdmUnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvblN1Ym1pdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uU3VibWl0KGV2ZW50KSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgICB2YXIgX2VsZW1lbnRzLCBpbnB1dCwgY29udGFpbmVyO1xuXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIF9lbGVtZW50cyA9IHRoaXMuZWxlbWVudHMsIGlucHV0ID0gX2VsZW1lbnRzLmlucHV0LCBjb250YWluZXIgPSBfZWxlbWVudHMuY29udGFpbmVyO1xuXG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuICAgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZVN1Ym1pdCh7IHF1ZXJ5OiBpbnB1dC52YWx1ZSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuICAgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG4gICAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcbiAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uSW5wdXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbklucHV0KCkge1xuICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXG5cbiAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuICAgICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25LZXlVcCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5VXAoZXZlbnQpIHtcbiAgICAgIHZhciBfZWxlbWVudHMyID0gdGhpcy5lbGVtZW50cyxcbiAgICAgICAgICBjb250YWluZXIgPSBfZWxlbWVudHMyLmNvbnRhaW5lcixcbiAgICAgICAgICBpbnB1dCA9IF9lbGVtZW50czIuaW5wdXQ7XG5cblxuICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IF9jb25zdGFudHMuRVNDQVBFX0tFWSkge1xuICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cbiAgICAgICAgaW5wdXQudmFsdWUgPSAnJztcblxuICAgICAgICBkb2N1bWVudC5ib2R5LmZvY3VzKCk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYmx1cigpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uS2V5UHJlc3MnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleVByZXNzKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gX2NvbnN0YW50cy5FTlRFUl9LRVkpIHtcbiAgICAgICAgdGhpcy5vblN1Ym1pdChldmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2V0UXVlcnknLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRRdWVyeShxdWVyeSkge1xuICAgICAgdmFyIGlucHV0ID0gdGhpcy5lbGVtZW50cy5pbnB1dDtcblxuICAgICAgaW5wdXQudmFsdWUgPSBxdWVyeTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU2VhcmNoRWxlbWVudDtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gU2VhcmNoRWxlbWVudDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9zZWFyY2hFbGVtZW50LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xudmFyIGNyZWF0ZUVsZW1lbnQgPSBleHBvcnRzLmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KGVsZW1lbnQpIHtcbiAgdmFyIGNsYXNzTmFtZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnO1xuICB2YXIgcGFyZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsO1xuXG4gIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudCk7XG4gIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZXM7XG5cbiAgaWYgKHBhcmVudCkge1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XG4gIH1cblxuICByZXR1cm4gZWw7XG59O1xuXG52YXIgY3JlYXRlU2NyaXB0RWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlU2NyaXB0RWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZVNjcmlwdEVsZW1lbnQodXJsLCBjYikge1xuICB2YXIgc2NyaXB0ID0gY3JlYXRlRWxlbWVudCgnc2NyaXB0JywgbnVsbCwgZG9jdW1lbnQuYm9keSk7XG4gIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9qYXZhc2NyaXB0Jyk7XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgd2luZG93W2NiXSA9IGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICBzY3JpcHQucmVtb3ZlKCk7XG4gICAgICBkZWxldGUgd2luZG93W2NiXTtcbiAgICAgIHJlc29sdmUoanNvbik7XG4gICAgfTtcblxuICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHVybCk7XG4gIH0pO1xufTtcblxudmFyIGFkZENsYXNzTmFtZSA9IGV4cG9ydHMuYWRkQ2xhc3NOYW1lID0gZnVuY3Rpb24gYWRkQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICBpZiAoZWxlbWVudCAmJiAhZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICB9XG59O1xuXG52YXIgcmVtb3ZlQ2xhc3NOYW1lID0gZXhwb3J0cy5yZW1vdmVDbGFzc05hbWUgPSBmdW5jdGlvbiByZW1vdmVDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgfVxufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9kb21VdGlscy5qcyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xudmFyIEVOVEVSX0tFWSA9IGV4cG9ydHMuRU5URVJfS0VZID0gMTM7XG52YXIgRVNDQVBFX0tFWSA9IGV4cG9ydHMuRVNDQVBFX0tFWSA9IDI3O1xudmFyIEFSUk9XX0RPV05fS0VZID0gZXhwb3J0cy5BUlJPV19ET1dOX0tFWSA9IDQwO1xudmFyIEFSUk9XX1VQX0tFWSA9IGV4cG9ydHMuQVJST1dfVVBfS0VZID0gMzg7XG52YXIgQVJST1dfTEVGVF9LRVkgPSBleHBvcnRzLkFSUk9XX0xFRlRfS0VZID0gMzc7XG52YXIgQVJST1dfUklHSFRfS0VZID0gZXhwb3J0cy5BUlJPV19SSUdIVF9LRVkgPSAzOTtcblxudmFyIFNQRUNJQUxfS0VZUyA9IGV4cG9ydHMuU1BFQ0lBTF9LRVlTID0gW0VOVEVSX0tFWSwgRVNDQVBFX0tFWSwgQVJST1dfRE9XTl9LRVksIEFSUk9XX1VQX0tFWSwgQVJST1dfTEVGVF9LRVksIEFSUk9XX1JJR0hUX0tFWV07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvY29uc3RhbnRzLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX2RvbVV0aWxzID0gcmVxdWlyZSgnLi9kb21VdGlscycpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgY3ggPSBmdW5jdGlvbiBjeCgpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGNsYXNzbmFtZXMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBjbGFzc25hbWVzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIGNsYXNzbmFtZXMuam9pbignICcpLnRyaW0oKTtcbn07XG5cbnZhciBSZXN1bHRMaXN0ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBSZXN1bHRMaXN0KCkge1xuICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgX3JlZiRoYW5kbGVDbGljayA9IF9yZWYuaGFuZGxlQ2xpY2ssXG4gICAgICAgIGhhbmRsZUNsaWNrID0gX3JlZiRoYW5kbGVDbGljayA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZUNsaWNrLFxuICAgICAgICBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG4gICAgICAgIGNsYXNzTmFtZXMgPSBfcmVmJGNsYXNzTmFtZXMgPT09IHVuZGVmaW5lZCA/IHt9IDogX3JlZiRjbGFzc05hbWVzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlc3VsdExpc3QpO1xuXG4gICAgX2luaXRpYWxpc2VQcm9wcy5jYWxsKHRoaXMpO1xuXG4gICAgdGhpcy5wcm9wcyA9IHsgaGFuZGxlQ2xpY2s6IGhhbmRsZUNsaWNrLCBjbGFzc05hbWVzOiBjbGFzc05hbWVzIH07XG4gICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXG4gICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIGN4KCdyZXN1bHRzJywgY2xhc3NOYW1lcy5jb250YWluZXIpKTtcbiAgICB2YXIgcmVzdWx0SXRlbSA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIGN4KGNsYXNzTmFtZXMuaXRlbSkpO1xuXG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrLCB0cnVlKTtcbiAgICB0aGlzLmVsZW1lbnRzID0geyBjb250YWluZXI6IGNvbnRhaW5lciwgcmVzdWx0SXRlbTogcmVzdWx0SXRlbSB9O1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFJlc3VsdExpc3QsIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIHJlc3VsdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdO1xuICAgICAgdmFyIF9lbGVtZW50cyA9IHRoaXMuZWxlbWVudHMsXG4gICAgICAgICAgY29udGFpbmVyID0gX2VsZW1lbnRzLmNvbnRhaW5lcixcbiAgICAgICAgICByZXN1bHRJdGVtID0gX2VsZW1lbnRzLnJlc3VsdEl0ZW07XG5cbiAgICAgIHRoaXMuY2xlYXIoKTtcblxuICAgICAgcmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChyZXN1bHQsIGlkeCkge1xuICAgICAgICB2YXIgY2hpbGQgPSByZXN1bHRJdGVtLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKCdkYXRhLWtleScsIGlkeCk7XG4gICAgICAgIGNoaWxkLmlubmVySFRNTCA9IHJlc3VsdC5sYWJlbDtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZXN1bHRzID0gcmVzdWx0cztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZWxlY3QnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3QoaW5kZXgpIHtcbiAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbmZ1c2luZy1hcnJvd1xuXG4gICAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQsIGlkeCkge1xuICAgICAgICByZXR1cm4gaWR4ID09PSBpbmRleCA/ICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjaGlsZCwgJ2FjdGl2ZScpIDogKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJyk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5zZWxlY3RlZCA9IGluZGV4O1xuICAgICAgcmV0dXJuIHRoaXMucmVzdWx0c1tpbmRleF07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY291bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb3VudCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlc3VsdHMubGVuZ3RoO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NsZWFyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSAtMTtcblxuICAgICAgd2hpbGUgKGNvbnRhaW5lci5sYXN0Q2hpbGQpIHtcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5sYXN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFJlc3VsdExpc3Q7XG59KCk7XG5cbnZhciBfaW5pdGlhbGlzZVByb3BzID0gZnVuY3Rpb24gX2luaXRpYWxpc2VQcm9wcygpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB0aGlzLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgdGFyZ2V0ID0gX3JlZjIudGFyZ2V0O1xuXG4gICAgdmFyIGhhbmRsZUNsaWNrID0gX3RoaXMucHJvcHMuaGFuZGxlQ2xpY2s7XG4gICAgdmFyIGNvbnRhaW5lciA9IF90aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuXG4gICAgaWYgKHRhcmdldC5wYXJlbnROb2RlICE9PSBjb250YWluZXIgfHwgIXRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEta2V5JykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaWR4ID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKTtcbiAgICB2YXIgcmVzdWx0ID0gX3RoaXMucmVzdWx0c1tpZHhdO1xuICAgIGhhbmRsZUNsaWNrKHsgcmVzdWx0OiByZXN1bHQgfSk7XG4gIH07XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBSZXN1bHRMaXN0O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Jlc3VsdExpc3QuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbm9kZW50UnVudGltZSA9IHJlcXVpcmUoJ25vZGVudC1ydW50aW1lJyk7XG5cbnZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuLi9kb21VdGlscycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbCxcbiAgICAgICAgICBqc29ucCA9IF9yZWYuanNvbnA7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXG5cbiAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuICAgICAgICBxdWVyeTogcXVlcnksXG4gICAgICAgIGpzb25wOiBqc29ucFxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9kZXYudmlydHVhbGVhcnRoLm5ldC9SRVNUL3YxL0xvY2F0aW9ucz8nICsgcGFyYW1TdHJpbmc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncGFyc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXG4gICAgICBpZiAoZGF0YS5yZXNvdXJjZVNldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcy5tYXAoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiByLnBvaW50LmNvb3JkaW5hdGVzWzFdLFxuICAgICAgICAgIHk6IHIucG9pbnQuY29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgbGFiZWw6IHIuYWRkcmVzcy5mb3JtYXR0ZWRBZGRyZXNzLFxuICAgICAgICAgIGJvdW5kczogW1tyLmJib3hbMF0sIHIuYmJveFsxXV0sIC8vIHMsIHdcbiAgICAgICAgICBbci5iYm94WzJdLCByLmJib3hbM11dXSxcbiAgICAgICAgICByYXc6IHJcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NlYXJjaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmMykge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwganNvbnAsIHVybCwganNvbjtcbiAgICAgICAgcXVlcnkgPSBfcmVmMy5xdWVyeTtcblxuICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuXG4gICAgICAgIGpzb25wID0gJ0JJTkdfSlNPTlBfQ0JfJyArIERhdGUubm93KCk7XG4gICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCwganNvbnA6IGpzb25wIH0pO1xuXG4gICAgICAgIHJldHVybiAoMCwgX2RvbVV0aWxzLmNyZWF0ZVNjcmlwdEVsZW1lbnQpKHVybCwganNvbnApLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG4gICAgICAgICAganNvbiA9ICRhd2FpdF8xO1xuICAgICAgICAgIHJldHVybiAkcmV0dXJuKHRoaXMucGFyc2UoeyBkYXRhOiBqc29uIH0pKTtcbiAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm92aWRlcjtcbn0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2JpbmdQcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9ub2RlbnRSdW50aW1lID0gcmVxdWlyZSgnbm9kZW50LXJ1bnRpbWUnKTtcblxudmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2dldFBhcmFtU3RyaW5nJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFyYW1TdHJpbmcocGFyYW1zKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pO1xuICAgICAgfSkuam9pbignJicpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NlYXJjaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgICB2YXIgcXVlcnksIHByb3RvY29sLCB1cmwsIHJlcXVlc3QsIGpzb247XG4gICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeTtcblxuICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuICAgICAgICB1cmwgPSB0aGlzLmVuZHBvaW50KHsgcXVlcnk6IHF1ZXJ5LCBwcm90b2NvbDogcHJvdG9jb2wgfSk7XG5cbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcbiAgICAgICAgICByZXF1ZXN0ID0gJGF3YWl0XzE7XG4gICAgICAgICAgcmV0dXJuIHJlcXVlc3QuanNvbigpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG4gICAgICAgICAgICBqc29uID0gJGF3YWl0XzI7XG4gICAgICAgICAgICByZXR1cm4gJHJldHVybih0aGlzLnBhcnNlKHsgZGF0YToganNvbiB9KSk7XG4gICAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9wcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcbiAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblxuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZW5kcG9pbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG4gICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblxuXG4gICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcbiAgICAgICAgZjogJ2pzb24nLFxuICAgICAgICB0ZXh0OiBxdWVyeVxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9nZW9jb2RlLmFyY2dpcy5jb20vYXJjZ2lzL3Jlc3Qvc2VydmljZXMvV29ybGQvR2VvY29kZVNlcnZlci9maW5kPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHJldHVybiBkYXRhLmxvY2F0aW9ucy5tYXAoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiByLmZlYXR1cmUuZ2VvbWV0cnkueCxcbiAgICAgICAgICB5OiByLmZlYXR1cmUuZ2VvbWV0cnkueSxcbiAgICAgICAgICBsYWJlbDogci5uYW1lLFxuICAgICAgICAgIGJvdW5kczogW1tyLmV4dGVudC55bWluLCByLmV4dGVudC54bWluXSwgLy8gcywgd1xuICAgICAgICAgIFtyLmV4dGVudC55bWF4LCByLmV4dGVudC54bWF4XV0sXG4gICAgICAgICAgcmF3OiByXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9lc3JpUHJvdmlkZXIuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVyJyk7XG5cbnZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblxuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cblxuICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG4gICAgICAgIGFkZHJlc3M6IHF1ZXJ5XG4gICAgICB9KSk7XG5cbiAgICAgIC8vIGdvb2dsZSByZXF1aXJlcyBhIHNlY3VyZSBjb25uZWN0aW9uIHdoZW4gdXNpbmcgYXBpIGtleXNcbiAgICAgIHZhciBwcm90byA9IHBhcmFtcyAmJiBwYXJhbXMua2V5ID8gJ2h0dHBzOicgOiBwcm90b2NvbDtcbiAgICAgIHJldHVybiBwcm90byArICcvL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHJldHVybiBkYXRhLnJlc3VsdHMubWFwKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgeDogci5nZW9tZXRyeS5sb2NhdGlvbi5sbmcsXG4gICAgICAgICAgeTogci5nZW9tZXRyeS5sb2NhdGlvbi5sYXQsXG4gICAgICAgICAgbGFiZWw6IHIuZm9ybWF0dGVkX2FkZHJlc3MsXG4gICAgICAgICAgYm91bmRzOiBbW3IuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0LmxhdCwgci5nZW9tZXRyeS52aWV3cG9ydC5zb3V0aHdlc3QubG5nXSwgLy8gcywgd1xuICAgICAgICAgIFtyLmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0LmxuZ11dLFxuICAgICAgICAgIHJhdzogclxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXIuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVyJyk7XG5cbnZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblxuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cblxuICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG4gICAgICAgIGZvcm1hdDogJ2pzb24nLFxuICAgICAgICBxOiBxdWVyeVxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvc2VhcmNoPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHJldHVybiBkYXRhLm1hcChmdW5jdGlvbiAocikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IHIubG9uLFxuICAgICAgICAgIHk6IHIubGF0LFxuICAgICAgICAgIGxhYmVsOiByLmRpc3BsYXlfbmFtZSxcbiAgICAgICAgICBib3VuZHM6IFtbcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzBdKSwgcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzJdKV0sIC8vIHMsIHdcbiAgICAgICAgICBbcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzFdKSwgcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzNdKV1dLFxuICAgICAgICAgIHJhdzogclxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvb3BlblN0cmVldE1hcFByb3ZpZGVyLmpzIiwiaW1wb3J0IHt0b2dnbGVMYXllcn0gZnJvbSBcIi4vbGF5ZXJcIjtcbmltcG9ydCB7bWFrZU9wYWNpdHlTbGlkZXJ9IGZyb20gXCIuL29wYWNpdHlTbGlkZXJcIlxuaW1wb3J0IHtzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb259IGZyb20gXCIuL29wYWNpdHlTbGlkZXJcIlxuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSBcIi4vc2hhcmVcIjtcblxudmFyIGxheWVyR3JvdXBMYXlvdXQgPSBbXVxuXG5leHBvcnQgZnVuY3Rpb24gR2V0QWN0aXZlTGF5ZXJHcm91cHMgKCkge1xuICAgIHJldHVybiBsYXllckdyb3VwTGF5b3V0LmZpbHRlcihsYXllckdyb3VwID0+IHtcbiAgICAgICAgcmV0dXJuIGxheWVyR3JvdXAuYWN0aXZlXG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFNldHVwUGFuZWwgKGxheWVycywgbGF5b3V0KSB7XG4gICAgbGF5ZXJHcm91cExheW91dCA9IGxheW91dFsnbGF5ZXItZ3JvdXBzLW9yZGVyJ11cbiAgICB2YXIgbGF5ZXJHcm91cHMgPSBtYWtlTGF5ZXJHcm91cHMobGF5b3V0WydsYXllci1ncm91cHMtb3JkZXInXSk7XG4gICAgbWFrZUxheWVyRWxlbXMobGF5ZXJHcm91cHMsIGxheWVycyk7XG4gICAgbWFrZVBhbmVsRHJhZ2dhYmxlKClcbiAgICBzZXRQYW5lbFNjcm9sbEhhbmRsZXIoKVxufVxuXG5mdW5jdGlvbiBicm93c2VySXNJbnRlcm5ldEV4cGxvcmVyKCkge1xuICAgIHZhciB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50XG4gICAgcmV0dXJuIHVhLmluZGV4T2YoJ01TSUUnKSA+IC0xIHx8IHVhLmluZGV4T2YoJ3J2OjExLjAnKSA+IC0xXG59XG5cbmZ1bmN0aW9uIHNldFBhbmVsU2Nyb2xsSGFuZGxlcigpIHtcbiAgICB2YXIgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKVxuICAgIHBhbmVsLm9uc2Nyb2xsID0gdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodFxufVxuXG5mdW5jdGlvbiBtYWtlUGFuZWxEcmFnZ2FibGUoKSB7XG4gICAgaWYgKGJyb3dzZXJJc0ludGVybmV0RXhwbG9yZXIoKSkgcmV0dXJuXG5cbiAgICB2YXIgb3ZlcmxheSA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsLWRyYWctb3ZlcmxheScpXG5cbiAgICBvdmVybGF5LnN0eWxlKCdjdXJzb3InLCAnZXctcmVzaXplJylcblxuICAgIG92ZXJsYXkuY2FsbChkMy5kcmFnKClcbiAgICAgICAgLm9uKCdkcmFnJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBwYW5lbERyYWdFdmVudEhhbmRsZXIuY2FsbCh0aGlzKVxuICAgIH0pKTtcbn1cblxuZnVuY3Rpb24gcGFuZWxEcmFnRXZlbnRIYW5kbGVyKCkge1xuICAgIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKVxuICAgIHVwZGF0ZVBhbmVsV2lkdGgoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCAoKSB7XG4gICAgdmFyIHBhbmVsID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwnKVxuICAgIHZhciBwYW5lbE9mZnNldEhlaWdodCA9IHBhbmVsLnByb3BlcnR5KCdvZmZzZXRIZWlnaHQnKVxuICAgIHZhciBwYW5lbERyYWdPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsLWRyYWctb3ZlcmxheScpXG4gICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbC1oZWFkZXInKVxuXG4gICAgdmFyIG5ld0hlaWdodFxuXG4gICAgaWYgKHBhbmVsLmNsYXNzZWQoJ2dyYXBocy1hY3RpdmUnKSkge1xuICAgICAgICB2YXIgZ3JhcGhMaXN0RXh0cmFTcGFjZSA9IDcwMFxuICAgICAgICB2YXIgZ3JhcGhMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyYXBoLWxpc3QnKVxuICAgICAgICBuZXdIZWlnaHQgPSBoZWFkZXIuc2Nyb2xsSGVpZ2h0ICsgZ3JhcGhMaXN0LnNjcm9sbEhlaWdodCArIGdyYXBoTGlzdEV4dHJhU3BhY2VcbiAgICB9XG4gICAgZWxzZSB7IC8vIHBhbmVsLmNsYXNzZWQoJ2xheWVycy1hY3RpdmUnKVxuICAgICAgICB2YXIgbGF5ZXJMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheWVyLWxpc3QnKVxuICAgICAgICBuZXdIZWlnaHQgPSBoZWFkZXIuc2Nyb2xsSGVpZ2h0ICsgbGF5ZXJMaXN0LnNjcm9sbEhlaWdodFxuICAgIH1cbiAgICBuZXdIZWlnaHQgPSBuZXdIZWlnaHQgPiBwYW5lbE9mZnNldEhlaWdodCA/IGAke25ld0hlaWdodH1gKydweCcgOiBudWxsXG4gICAgcGFuZWxEcmFnT3ZlcmxheS5zdHlsZS5oZWlnaHQgPSBuZXdIZWlnaHRcbn1cblxuZnVuY3Rpb24gdXBkYXRlUGFuZWxXaWR0aCgpIHtcbiAgICB2YXIgcGFuZWwgPSBkMy5zZWxlY3QoJyNyaWdodC1wYW5lbCcpXG4gICAgdmFyIHBhbmVsTWluV2lkdGggPSArcGFuZWwuc3R5bGUoJ21pbi13aWR0aCcpLnNsaWNlKDAsIC0yKVxuICAgIHZhciBwYW5lbENsaWVudFdpZHRoID0gcGFuZWwucHJvcGVydHkoJ2NsaWVudFdpZHRoJylcblxuICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyYXBwZXInKVxuICAgIHZhciB3cmFwcGVyV2lkdGggPSB3cmFwcGVyLmNsaWVudFdpZHRoXG5cbiAgICB2YXIgbWFwV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtd3JhcHBlcicpXG5cbiAgICB2YXIgbW91c2VYID0gZDMuZXZlbnQuc291cmNlRXZlbnQueFxuICAgIHZhciB4RGVsdGEgPSAod3JhcHBlcldpZHRoIC0gbW91c2VYKSAtIHBhbmVsQ2xpZW50V2lkdGhcblxuICAgIHZhciBuZXdQYW5lbFdpZHRoID0gcGFuZWxDbGllbnRXaWR0aCArIHhEZWx0YVxuICAgIG5ld1BhbmVsV2lkdGggPSBuZXdQYW5lbFdpZHRoIDwgcGFuZWxNaW5XaWR0aCA/XG4gICAgICAgIHBhbmVsTWluV2lkdGhcbiAgICA6ICAgbmV3UGFuZWxXaWR0aCA+IHdyYXBwZXJXaWR0aCA/XG4gICAgICAgIHdyYXBwZXJXaWR0aFxuICAgIDogICBuZXdQYW5lbFdpZHRoXG4gICAgbWFwV3JhcHBlci5zdHlsZS5wYWRkaW5nUmlnaHQgPSBgJHtuZXdQYW5lbFdpZHRofWArJ3B4J1xuICAgIHBhbmVsLnN0eWxlKCd3aWR0aCcsIGAke25ld1BhbmVsV2lkdGh9YCsncHgnKVxufVxuXG5mdW5jdGlvbiBtYWtlTGF5ZXJHcm91cHMgKGxheW91dCkge1xuICAgIHJldHVybiBkMy5zZWxlY3QoJyNsYXllci1saXN0JylcbiAgICAgICAgLnNlbGVjdEFsbCgnLmxheWVyLWdyb3VwLXdyYXBwZXInKVxuICAgICAgICAuZGF0YShsYXlvdXQpXG4gICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwLXdyYXBwZXInKVxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgbGF5ZXJHcm91cCA9PiBsYXllckdyb3VwLmlkKVxuICAgICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGxheWVyR3JvdXAgPT4gbGF5ZXJHcm91cC5hY3RpdmUpXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoJ2RpdicpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cC1idG4gYnRuJylcbiAgICAgICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvZ2dsZSB0aGUgbGF5ZXIgbGlzdCBhY2NvcmRpYW5zXG4gICAgICAgICAgICAgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2xheWVyIGxpc3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ3RvZ2dsZSAnICsgIWxheWVyR3JvdXAuYWN0aXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudExhYmVsOiBsYXllckdyb3VwLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyR3JvdXAuYWN0aXZlID0gIWxheWVyR3JvdXAuYWN0aXZlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMucGFyZW50Tm9kZSkuY2xhc3NlZCgnYWN0aXZlJywgKCkgPT4gbGF5ZXJHcm91cC5hY3RpdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVTaGFyZVVybCgpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KGxheWVyR3JvdXAubmFtZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cCcpO1xufVxuXG5mdW5jdGlvbiBtYWtlTGF5ZXJFbGVtcyAobGF5ZXJHcm91cHMsIGxheWVycykge1xuICAgIGxheWVyR3JvdXBzLnNlbGVjdEFsbCgnLmxheWVyLXNlbGVjdCcpXG4gICAgICAgIC5kYXRhKGxheWVyR3JvdXAgPT4gbGF5ZXJzW2xheWVyR3JvdXAuaWRdKVxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2RpdicpXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1zZWxlY3QnKVxuICAgICAgICAuZWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIHZhciBncm91cE5hbWUgPSB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZDtcbiAgICAgICAgICAgIHZhciBsYXllckRpdiA9IGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAgICAgbWFrZUNoZWNrYm94KGxheWVyLCBsYXllckRpdik7XG4gICAgICAgICAgICBtYWtlTGFiZWwobGF5ZXIsIGxheWVyRGl2KTtcbiAgICAgICAgICAgIG1ha2VEZXNjcmlwdGlvbihsYXllciwgbGF5ZXJEaXYpO1xuICAgICAgICAgICAgbGF5ZXJEaXYubm9kZSgpLmFwcGVuZENoaWxkKG1ha2VMYXllclRvb2xzKGxheWVyKSk7XG4gICAgICAgIH0pO1xufVxuXG5mdW5jdGlvbiBtYWtlQ2hlY2tib3ggKGxheWVyLCBsYXllckRpdikge1xuICAgIGxheWVyRGl2LmFwcGVuZCgnaW5wdXQnKVxuICAgICAgICAuYXR0cigndHlwZScsICdjaGVja2JveCcpXG4gICAgICAgIC5hdHRyKCdpZCcsIGxheWVyID0+IGxheWVyLmlkKVxuICAgICAgICAuYXR0cignY2hlY2tlZCcsIChsYXllcikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGxheWVyLmFjdGl2ZSA/ICdjaGVja2VkJyA6IG51bGw7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbihsYXllcikge1xuICAgICAgICAgICAgdG9nZ2xlTGF5ZXIobGF5ZXIpO1xuICAgICAgICAgICAgbGF5ZXJEaXYuc2VsZWN0KCcubGF5ZXItdG9vbHMtd3JhcHBlcicpXG4gICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGxheWVyLmFjdGl2ZSk7XG4gICAgICAgICAgICBpZiAobGF5ZXIuYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlckhhbmRsZSA9IGxheWVyRGl2LnNlbGVjdCgnLm9wYWNpdHktc2xpZGVyLWhhbmRsZScpLm5vZGUoKVxuICAgICAgICAgICAgICAgIHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbihsYXllciwgc2xpZGVySGFuZGxlLCBsYXllci5vcGFjaXRpeSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VMYWJlbChsYXllciwgbGF5ZXJEaXYpIHtcbiAgICBsYXllckRpdlxuICAgICAgICAuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWxhYmVsLXdyYXBwZXInKVxuICAgICAgICAuYXBwZW5kKCdsYWJlbCcpXG4gICAgICAgICAgICAuYXR0cignZm9yJywgbGF5ZXIgPT4gbGF5ZXIuaWQpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItbGFiZWwnKVxuICAgICAgICAgICAgLmh0bWwobGF5ZXIgPT4gbGF5ZXIubmFtZSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VEZXNjcmlwdGlvbiAobGF5ZXIsIGxheWVyRGl2KSB7XG4gICAgaWYgKGxheWVyLmluZm8gJiYgbGF5ZXIuaW5mbyAhPT0gJycpIHtcbiAgICAgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8tYnRuLXdyYXBwZXInKVxuICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKVxuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCcubGF5ZXItaW5mby13cmFwcGVyJylcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIGxheWVyIGluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbGF5ZXIgaW5mbycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2tlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6IGxheWVyLm5hbWUgKyBcIiBcIiArICFkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnYWN0aXZlJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFwcGVuZCgnaW1nJylcbiAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby1pY29uJylcbiAgICAgICAgICAgICAgICAuYXR0cignc3JjJywgJ2ltZ3MvbW9yZS1pbmZvLWljb24tNjR4NjQucG5nJylcbiAgICAgICAgICAgICAgICAuYXR0cihcImFsdFwiLCBcIlJlYWQgbW9yZSBhYm91dCB0aGUgXCIgKyBsYXllci5uYW1lICsgXCIgbGF5ZXJcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInRpdGxlXCIsIFwiUmVhZCBtb3JlIGFib3V0IHRoZSBcIiArIGxheWVyLm5hbWUgKyBcIiBsYXllclwiKVxuXG4gICAgICAgIGxheWVyRGl2LmFwcGVuZCgnZGl2JylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1pbmZvLXdyYXBwZXInKVxuICAgICAgICAgICAgLnRleHQobGF5ZXIgPT4gbGF5ZXIuaW5mbyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBtYWtlTGF5ZXJUb29scyhsYXllciwgbGF5ZXJEaXYpIHtcbiAgICB2YXIgbGF5ZXJUb29sc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgbGF5ZXJUb29sc0Rpdi5jbGFzc0xpc3QuYWRkKCdsYXllci10b29scy13cmFwcGVyJylcbiAgICBpZiAobGF5ZXIuYWN0aXZlKSBsYXllclRvb2xzRGl2LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG5cbiAgICB2YXIgb3BhY2l0eVNsaWRlciA9IG1ha2VPcGFjaXR5U2xpZGVyKGxheWVyKTtcbiAgICB2YXIgbGVnZW5kID0gbWFrZUxlZ2VuZChsYXllcik7XG5cbiAgICBsYXllclRvb2xzRGl2LmFwcGVuZENoaWxkKGxlZ2VuZClcbiAgICBsYXllclRvb2xzRGl2LmFwcGVuZENoaWxkKG9wYWNpdHlTbGlkZXIpXG5cbiAgICByZXR1cm4gbGF5ZXJUb29sc0RpdlxufVxuXG5mdW5jdGlvbiBtYWtlTGVnZW5kIChsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIpIHtcbiAgICB2YXIgbGVnZW5kV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdmFyIGxlZ2VuZEltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXG4gICAgbGVnZW5kV3JhcHBlci5jbGFzc0xpc3QuYWRkKCdsZWdlbmQtd3JhcHBlcicpXG4gICAgbGVnZW5kSW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgbGF5ZXIubGVnZW5kKVxuICAgIGxlZ2VuZFdyYXBwZXIuYXBwZW5kQ2hpbGQobGVnZW5kSW1nKVxuICAgIHJldHVybiBsZWdlbmRXcmFwcGVyXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9wYW5lbC5qcyIsImltcG9ydCB7R2V0TWFwfSBmcm9tIFwiLi9tYXBcIjtcbmltcG9ydCB7dXBkYXRlU2hhcmVVcmx9IGZyb20gXCIuL3NoYXJlXCI7XG5cbi8qKlxuICogTmVlZGVkIGZvciB0aGUgc2hhcmUgdXJsIHNpbmNlIExlYWZsZXQgZG9lcyBub3QgaGF2ZSBhIGRlZmF1bHQgd2F5IHRvIHN1cmZhY2VcbiAqIHRoZSBvcmRlciBvZiBsYXllcnMgaW4gdGhlIG1hcFxuICovXG52YXIgX2N1cnJlbnRfbGF5ZXJzID0gW107XG52YXIgX2N1cnJlbnRfbGF5ZXJzX29iamVjdHMgPSBbXTtcblxuLyoqXG4gKiBOb3RlOiBsYXllciBpcyBub3QgdGhlIGxlYWZsZXQgY29uY2VwdCBvZiBhIGxheWVyLCBidXQgcmF0aGVyIHRoZSBpbnRlcm5hbFxuICogICAgICAgb2JqZWN0IHdoaWNoIHRyYWNrcyB0aGVtLiBsYXllci5tYXBMYXllciBpcyB0aGUgcG9pbnRlciB0byB0aGVcbiAqICAgICAgIGxlYWZsZXQgbGF5ZXIuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIEdldEN1cnJlbnRMYXllcnMgKCkge1xuICAgIHJldHVybiBfY3VycmVudF9sYXllcnM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDcmVhdGVEZWZhdWx0TGF5ZXJzIChsYXllcnMsIGRlZmF1bHRMYXllcnMpIHtcbiAgICB2YXIgaSwgaiwgcHJvcCwgbGF5ZXJncm91cDtcbiAgICB2YXIgZGVmYXVsdExheWVyO1xuICAgIHZhciBmb3VuZExheWVyO1xuXG4gICAgaWYgKCFkZWZhdWx0TGF5ZXJzIHx8IGRlZmF1bHRMYXllcnMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgZGVmYXVsdExheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3VuZExheWVyID0gZmFsc2U7XG4gICAgICAgIGRlZmF1bHRMYXllciA9IGRlZmF1bHRMYXllcnNbaV07XG4gICAgICAgIGZvciAocHJvcCBpbiBsYXllcnMpIHtcbiAgICAgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG4gICAgICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGxheWVyZ3JvdXAubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZGVmYXVsdExheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZUxheWVyKGxheWVyZ3JvdXBbal0pO1xuICAgICAgICAgICAgICAgICAgICBmb3VuZExheWVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlTGF5ZXIgKGxheWVyKSB7XG4gICAgaWYgKCFsYXllci5hY3RpdmUpIHtcbiAgICAgICAgZW5hYmxlTGF5ZXIobGF5ZXIpO1xuXG4gICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvZ2dsZSB0aGUgbGF5ZXIgb25cbiAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG4gICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2xheWVyJyxcbiAgICAgICAgICBldmVudEFjdGlvbjogJ3RvZ2dsZSBvbicsXG4gICAgICAgICAgZXZlbnRMYWJlbDogbGF5ZXIubmFtZSxcbiAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcbiAgICAgICAgfSk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICBkaXNhYmxlTGF5ZXIobGF5ZXIpO1xuXG4gICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvZ2dsZSB0aGUgbGF5ZXIgb2ZmXG4gICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdsYXllcicsXG4gICAgICAgICAgZXZlbnRBY3Rpb246ICd0b2dnbGUgb2ZmJyxcbiAgICAgICAgICBldmVudExhYmVsOiBsYXllci5uYW1lLFxuICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgICB9KTtcblxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZUxheWVyIChsYXllcikge1xuICAgIHZhciBtYXAgPSBHZXRNYXAoKTtcblxuICAgIGxheWVyLmFjdGl2ZSA9IHRydWU7XG4gICAgbGF5ZXIubWFwTGF5ZXIgPSBsYXllci5tYXBMYXllciB8fCBtYWtlV21zVGlsZUxheWVyKGxheWVyKTtcbiAgICBtYXAuYWRkTGF5ZXIobGF5ZXIubWFwTGF5ZXIpO1xuICAgIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xuICAgIG1vdmVPdmVybGF5TGF5ZXJzVG9Ub3AoKTtcbiAgICB1cGRhdGVTaGFyZVVybCgpO1xufVxuXG5mdW5jdGlvbiBtb3ZlT3ZlcmxheUxheWVyc1RvVG9wICgpIHtcbiAgICB2YXIgbGF5ZXI7XG4gICAgdmFyIGksIGw7XG5cbiAgICBmb3IgKGkgPSAwLCBsID0gX2N1cnJlbnRfbGF5ZXJzX29iamVjdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGxheWVyID0gX2N1cnJlbnRfbGF5ZXJzX29iamVjdHNbaV07XG4gICAgICAgIGlmIChsYXllci50eXBlID09PSBcIm92ZXJsYXlcIikgbGF5ZXIubWFwTGF5ZXIuYnJpbmdUb0Zyb250KCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhZGRMYXllclRvSW50ZXJuYWxUcmFja2VyIChsYXllcikge1xuICAgIF9jdXJyZW50X2xheWVycy5wdXNoKGxheWVyLmlkKTtcbiAgICBfY3VycmVudF9sYXllcnNfb2JqZWN0cy5wdXNoKGxheWVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVMYXllciAobGF5ZXIpIHtcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XG5cbiAgICBsYXllci5hY3RpdmUgPSBmYWxzZTtcbiAgICBpZiAobGF5ZXIubWFwTGF5ZXIgJiYgbWFwLmhhc0xheWVyKGxheWVyLm1hcExheWVyKSkge1xuICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobGF5ZXIubWFwTGF5ZXIpO1xuICAgIH1cbiAgICByZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xuICAgIHVwZGF0ZVNoYXJlVXJsKCk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUxheWVyRnJvbUludGVybmFsVHJhY2tlciAobGF5ZXIpIHtcbiAgICB2YXIgbG9jID0gX2N1cnJlbnRfbGF5ZXJzLmluZGV4T2YobGF5ZXIuaWQpO1xuICAgIGlmIChsb2MgPT09IC0xKSByZXR1cm47XG4gICAgX2N1cnJlbnRfbGF5ZXJzLnNwbGljZShsb2MsIDEpO1xuICAgIF9jdXJyZW50X2xheWVyc19vYmplY3RzLnNwbGljZShsb2MsIDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTGF5ZXJPcGFjaXR5IChsYXllciwgbmV3T3BhY2l0eSkge1xuICAgIGxheWVyLm9wYWNpdHkgPSBuZXdPcGFjaXR5XG4gICAgbGF5ZXIubWFwTGF5ZXIuc2V0T3BhY2l0eShuZXdPcGFjaXR5KVxufVxuXG5mdW5jdGlvbiBtYWtlV21zVGlsZUxheWVyIChsYXllcikge1xuICAgIHJldHVybiBMLnRpbGVMYXllci53bXMobGF5ZXIudXJsLCB7XG4gICAgICAgIGxheWVyczogbGF5ZXIuaWQsXG4gICAgICAgIHRyYW5zcGFyZW50OiBsYXllci50cmFuc3BhcmVudCB8fCB0cnVlLFxuICAgICAgICB2ZXJzaW9uOiBsYXllci52ZXJzaW9uIHx8ICcxLjMuMCcsXG4gICAgICAgIGNyczogbGF5ZXIuY3JzIHx8IEwuQ1JTLkVQU0c5MDA5MTMsXG4gICAgICAgIGZvcm1hdDogbGF5ZXIuZm9ybWF0IHx8ICdpbWFnZS9wbmcnLFxuICAgICAgICBvcGFjaXR5OiBsYXllci5vcGFjaXR5IHx8IC43NSxcbiAgICAgICAgdGlsZVNpemU6IGxheWVyLnRpbGVTaXplIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwXCIpLmNsaWVudFdpZHRoXG4gICAgfSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9sYXllci5qcyIsInZhciBtYXA7XG5cbmV4cG9ydCBmdW5jdGlvbiBDcmVhdGVNYXAgKG1hcENvbmZpZykge1xuICAgIHZhciBpZCA9IG1hcENvbmZpZy5pZCB8fCBcIm1hcFwiO1xuICAgIHZhciBvcHRpb25zID0gbWFwQ29uZmlnLm9wdGlvbnMgfHwge1wic2Nyb2xsV2hlZWxab29tXCIgOiBmYWxzZX07XG4gICAgdmFyIGluaXRpYWxDZW50ZXIgPSBtYXBDb25maWcuY2VudGVyIHx8IFtcIjM4LjVcIiwgXCItODFcIl07XG4gICAgdmFyIGluaXRpYWxab29tID0gbWFwQ29uZmlnLnpvb20gfHwgNjtcblxuICAgIG1hcCA9IEwubWFwKGlkLCBvcHRpb25zKS5zZXRWaWV3KGluaXRpYWxDZW50ZXIsIGluaXRpYWxab29tKTtcbiAgICBMLmNvbnRyb2wuYXR0cmlidXRpb24oKS5hZGRUbyhtYXApXG5cbiAgICB2YXIgbGVhZmxldFpvb21JbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJsZWFmbGV0LWNvbnRyb2wtem9vbS1pblwiKVswXTtcblxuICAgIGxlYWZsZXRab29tSW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG4gICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3Igc2VhY3JjaCBieSBhZGRyZXNzXG4gICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG4gICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2sgYnV0dG9uJyxcbiAgICAgICAgZXZlbnRMYWJlbDogJ3pvb20gaW4nLFxuICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcbiAgICAgIH0pO1xuICAgIH0pXG5cbiAgICB2YXIgbGVhZmxldFpvb21PdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibGVhZmxldC1jb250cm9sLXpvb20tb3V0XCIpWzBdO1xuXG4gICAgbGVhZmxldFpvb21PdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG4gICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3Igc2VhY3JjaCBieSBhZGRyZXNzXG4gICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG4gICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2sgYnV0dG9uJyxcbiAgICAgICAgZXZlbnRMYWJlbDogJ3pvb20gb3V0JyxcbiAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgICB9KTtcbiAgICB9KVxuXG4gICAgbWFwLm9uKFwiZHJhZ2VuZFwiLCBmdW5jdGlvbihlKXtcbiAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBkcmFnIChwYW4pIGVuZFxuICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG4gICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuICAgICAgICBldmVudEFjdGlvbjogJ2RyYWcnLFxuICAgICAgICBldmVudExhYmVsOiBKU09OLnN0cmluZ2lmeShtYXAuZ2V0Qm91bmRzKCkpLFxuICAgICAgICBub25JbnRlcmFjdGlvbjogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSlcblxuICAgIG1hcC5vbihcInpvb21lbmRcIiwgZnVuY3Rpb24oZSl7XG4gICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3Igem9vbSBlbmRcbiAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcbiAgICAgICAgZXZlbnRBY3Rpb246ICd6b29tJyxcbiAgICAgICAgZXZlbnRMYWJlbDogSlNPTi5zdHJpbmdpZnkobWFwLmdldEJvdW5kcygpKSxcbiAgICAgICAgbm9uSW50ZXJhY3Rpb246IHRydWVcbiAgICAgIH0pO1xuICAgIH0pXG4gICAgcmV0dXJuIG1hcDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEdldE1hcCAoKSB7XG4gICAgcmV0dXJuIG1hcDtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL21hcC5qcyIsImltcG9ydCB7R2V0TWFwfSBmcm9tICcuL21hcCc7XG5pbXBvcnQge0JBU0VfTEFZRVJfVFlQRX0gZnJvbSAnLi9iYXNlbGF5ZXInO1xuaW1wb3J0IHtHZXRDdXJyZW50TGF5ZXJzfSBmcm9tICcuL2xheWVyJztcbmltcG9ydCB7R2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCwgY3JlYXRlUE9JfSBmcm9tICcuL3BvaSc7XG5pbXBvcnQge0dldEFjdGl2ZUxheWVyR3JvdXBzfSBmcm9tICcuL3BhbmVsJztcblxuZXhwb3J0IGZ1bmN0aW9uIEJpbmRVcGRhdGVTaGFyZVVybCAobWFwKSB7XG4gICAgbWFwLm9uKFwibW92ZWVuZFwiLCB1cGRhdGVTaGFyZVVybCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVTaGFyZVVybCAoZSkge1xuICAgIHZhciBtYXAgPSBHZXRNYXAoKTtcblxuICAgIHZhciBwYXJhbXMgPSBbXG4gICAgICAgIG1ha2VDZW50ZXJTdHJpbmcobWFwKSxcbiAgICAgICAgbWFrZVpvb21TdHJpbmcobWFwKSxcbiAgICAgICAgbWFrZUxheWVyU3RyaW5nKG1hcCksXG4gICAgICAgIG1ha2VMYXllckdyb3Vwc1N0cmluZygpLFxuICAgICAgICBtYWtlQmFzZUxheWVyU3RyaW5nKG1hcCksXG4gICAgICAgIG1ha2VQb2ludHNPZkludGVyZXN0U3RyaW5nKCksXG4gICAgICAgIG1ha2VBY3RpdmVUYWJTdHJpbmcoKSxcbiAgICAgICAgbWFrZUFjdGl2ZUdyYXBoVGFiU3RyaW5nKClcbiAgICBdO1xuXG4gICAgc2V0U2hhcmVVcmwobWFrZVNoYXJlVXJsKHBhcmFtcykpO1xuICAgIHNldENvcHlMaW5rVXJsKCk7XG4gICAgc2V0U29jaWFsVXJscygpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnIChjb25maWcpIHtcbiAgICB2YXIgc2hhcmUgPSBwYXJzZVNoYXJlVXJsKCk7XG4gICAgaWYgKCFzaGFyZSkgcmV0dXJuO1xuICAgIGlmIChzaGFyZS5jZW50ZXIpIGNvbmZpZy5tYXAuY2VudGVyID0gc2hhcmUuY2VudGVyO1xuICAgIGlmIChzaGFyZS56b29tKSBjb25maWcubWFwLnpvb20gPSBzaGFyZS56b29tO1xuICAgIGlmIChzaGFyZS5sYXllcnMpIGFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5sYXllcnMsIGNvbmZpZyk7XG4gICAgaWYgKHNoYXJlLmJhc2VsYXllcnMpIGFkZEJhc2VMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmUuYmFzZWxheWVycywgY29uZmlnKTtcbiAgICBpZiAoc2hhcmUucG9pcykgYWRkUG9pbnRzT2ZJbnRlcmVzdFRvQ29uZmlnKHNoYXJlLnBvaXMsIGNvbmZpZylcbiAgICBpZiAoc2hhcmUudGFiKSBjb25maWcudGFiID0gc2hhcmUudGFiO1xuICAgIGlmIChzaGFyZS5ncmFwaCkgY29uZmlnLmdyYXBoID0gc2hhcmUuZ3JhcGg7XG4gICAgaWYgKHNoYXJlLmxheWVyR3JvdXBzKSBjb25maWcubGF5ZXJHcm91cHMgPSBhZGRMYXllckdyb3VwU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5sYXllckdyb3VwcywgY29uZmlnKVxufVxuXG5mdW5jdGlvbiBtYWtlU2hhcmVVcmwgKHBhcmFtcykge1xuICAgIHJldHVybiBcIj9cIiArIHBhcmFtcy5maWx0ZXIoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAgIT09IHVuZGVmaW5lZCB9KS5qb2luKFwiJlwiKTtcbn1cblxuZnVuY3Rpb24gc2V0U2hhcmVVcmwgKHVybCkge1xuICAgIGlmICh3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcbiAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBcIlwiLCB1cmwpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2V0Q29weUxpbmtVcmwgKCkge1xuICAgIHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNoYXJldXJsLWxpbmstdXJsXCIpLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIHVybCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBCaW5kQ29weUxpbmtFdmVudHMgKCkge1xuICAgIGQzLnNlbGVjdChkb2N1bWVudCkub24oXCJjbGlja1wiLCBoYW5kbGVCb2R5Q2xpY2spO1xuICAgIGQzLnNlbGVjdChcIi5zaGFyZXVybC1saW5rIGFcIikub24oXCJjbGlja1wiLCBoYW5kbGVTaGFyZUxpbmtCdXR0b25DbGljayk7XG4gICAgZDMuc2VsZWN0KFwiLnNoYXJldXJsLWxpbmstdXJsXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlU2hhcmVMaW5rVXJsQ2xpY2spO1xuICAgIGQzLnNlbGVjdChcIi5zaGFyZXVybC1saW5rLXBvcHVwLXJlbW92ZXJcIikub24oXCJjbGlja1wiLCBoYW5kbGVTaGFyZUxpbmtDbG9zZUJ1dHRvbkNsaWNrKTtcbn1cblxuLyoqXG4gKiBTaG91bGQgY2xvc2UgdGhlIGNvcHkgbGluayBwb3B1cCBpZiBpdCBpcyBhY3RpdmUgYW5kIGlmIHlvdSBjbGljayBvbiBhbnkgZWxlbWVudFxuICogdGhhdCBpcyBub3QgdGhlIHBvcHVwIG9yIGl0cyBjaGlsZHJlbi5cbiAqL1xuZnVuY3Rpb24gaGFuZGxlQm9keUNsaWNrICgpIHtcbiAgICB2YXIgZXZlbnQgPSBkMy5ldmVudDtcbiAgICB2YXIgbm9kZVBhdGggPSBbXVxuICAgIG5vZGVQYXRoID0gZ2V0RG9tUGF0aChldmVudC50YXJnZXQpXG5cbiAgICB2YXIgdG9DbG9zZVBvcHVwID0gdHJ1ZTtcbiAgICB2YXIgaSwgbDtcblxuICAgIGZvciAoaSA9IDAsIGwgPSBub2RlUGF0aC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChub2RlUGF0aFtpXS5jbGFzc0xpc3QuY29udGFpbnMoJ3NoYXJldXJsLWxpbmstcG9wdXAnKSB8fFxuICAgICAgICAgICAgICAgICAgICBub2RlUGF0aFtpXS5jbGFzc0xpc3QuY29udGFpbnMoJ3NoYXJldXJsLWxpbmsnKSkge1xuICAgICAgICAgICAgICAgIHRvQ2xvc2VQb3B1cCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfSAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIC8vIGNsaWNraW5nIHN2ZyB0aHJvd3MgYW4gZXJyb3IgaW4gSUVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0b0Nsb3NlUG9wdXApIHtcbiAgICAgICAgdmFyIHNoYXJlUG9wdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzaGFyZXVybC1saW5rLXBvcHVwJykuaXRlbSgwKVxuICAgICAgICBoYW5kbGVDb3B5TGlua0Nsb3NlKHNoYXJlUG9wdXApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0RG9tUGF0aChub2RlKSB7XG4gICAgdmFyIHBhdGggPSBbXVxuICAgIHdoaWxlIChub2RlICYmIG5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgICBwYXRoLnB1c2gobm9kZSlcbiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZVxuICAgIH1cbiAgICByZXR1cm4gcGF0aFxufVxuXG5mdW5jdGlvbiBoYW5kbGVTaGFyZUxpbmtCdXR0b25DbGljayAoKSB7XG4gICAgdmFyIHNoYXJlUG9wdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2hhcmV1cmwtbGluay1wb3B1cFwiKS5pdGVtKDApXG4gICAgaWYgKGQzLnNlbGVjdChzaGFyZVBvcHVwKS5jbGFzc2VkKFwiYWN0aXZlXCIpKSB7XG4gICAgICAgIGhhbmRsZUNvcHlMaW5rQ2xvc2Uoc2hhcmVQb3B1cClcbiAgICB9IGVsc2Uge1xuICAgICAgICBoYW5kbGVDb3B5TGlua09wZW4oc2hhcmVQb3B1cCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVTaGFyZUxpbmtDbG9zZUJ1dHRvbkNsaWNrICgpIHtcbiAgICB2YXIgc2hhcmVQb3B1cCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaGFyZXVybC1saW5rLXBvcHVwXCIpLml0ZW0oMClcbiAgICBoYW5kbGVDb3B5TGlua0Nsb3NlKHNoYXJlUG9wdXApO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVTaGFyZUxpbmtVcmxDbGljayAoKSB7XG4gICAgc2VsZWN0Q29weUxpbmtVcmwoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ29weUxpbmtPcGVuIChzaGFyZVBvcHVwKSB7XG4gICAgc2hhcmVQb3B1cC5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpXG4gICAgc2VsZWN0Q29weUxpbmtVcmwoKTtcblxuICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGNsaWNrIG9uIHNoYXJlIHVybFxuICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgZXZlbnRDYXRlZ29yeTogJ3NoYXJldXJsJyxcbiAgICAgIGV2ZW50QWN0aW9uOiAnb3BlbicsXG4gICAgICBldmVudExhYmVsOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNoYXJldXJsLWxpbmstdXJsXCIpLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpLFxuICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgfSk7XG5cbn1cblxuZnVuY3Rpb24gaGFuZGxlQ29weUxpbmtDbG9zZSAoc2hhcmVQb3B1cCkge1xuXG4gICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZXZlbnQgY2xpY2sgb24gc2hhcmUgdXJsIGNsb3NlXG4gICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG4gICAgICBldmVudENhdGVnb3J5OiAnc2hhcmV1cmwnLFxuICAgICAgZXZlbnRBY3Rpb246ICdjbG9zZScsXG4gICAgICBldmVudExhYmVsOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNoYXJldXJsLWxpbmstdXJsXCIpLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpLFxuICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgfSk7XG5cbiAgICBzaGFyZVBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcbn1cblxuZnVuY3Rpb24gc2VsZWN0Q29weUxpbmtVcmwgKCkge1xuICAgIHZhciBzaGFyZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKTtcbiAgICBzaGFyZUlucHV0LmZvY3VzKCk7XG4gICAgc2hhcmVJbnB1dC5zZXRTZWxlY3Rpb25SYW5nZSgwLCBzaGFyZUlucHV0LnZhbHVlLmxlbmd0aCk7XG59XG5cbmZ1bmN0aW9uIHNldFNvY2lhbFVybHMgKCkge1xuICAgIHZhciB1cmwgPSBtYW5nbGVQYXJhbVN0cmluZyh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgdmFyIHNvY2lhbExpbmtzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNoYXJldXJsLXNvY2lhbFwiKTtcbiAgICB2YXIgc29jaWFsTGluaztcbiAgICB2YXIgbmV3VXJsO1xuICAgIHZhciBpLCBsO1xuXG4gICAgZm9yIChpID0gMCwgbCA9IHNvY2lhbExpbmtzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBzb2NpYWxMaW5rID0gc29jaWFsTGlua3NbaV07XG5cbiAgICAgICAgbmV3VXJsID0gc29jaWFsTGluay5nZXRBdHRyaWJ1dGUoXCJkYXRhLWJhc2V1cmxcIikgKyB1cmw7XG4gICAgICAgIHNvY2lhbExpbmsuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBuZXdVcmwpO1xuXG4gICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGZvciBzb2NpYWwgdXJsc1xuICAgICAgICBzb2NpYWxMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdzaGFyZXVybCcsXG4gICAgICAgICAgICBldmVudEFjdGlvbjogdGhpcy5nZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIpLFxuICAgICAgICAgICAgZXZlbnRMYWJlbDogdGhpcy5ocmVmLFxuICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICB9XG59XG5cbmZ1bmN0aW9uIG1ha2VDZW50ZXJTdHJpbmcgKG1hcCkge1xuICAgIHZhciBjZW50ZXIgPSBtYXAuZ2V0Q2VudGVyKCk7XG4gICAgcmV0dXJuIFwiY2VudGVyPVwiICsgY2VudGVyLmxhdC50b1N0cmluZygpICsgXCIsXCIgKyBjZW50ZXIubG5nLnRvU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIG1ha2Vab29tU3RyaW5nIChtYXApIHtcbiAgICByZXR1cm4gXCJ6b29tPVwiICsgbWFwLmdldFpvb20oKTtcbn1cblxuZnVuY3Rpb24gbWFrZUxheWVyU3RyaW5nIChtYXApIHtcbiAgICB2YXIgbGF5ZXJzID0gW107XG4gICAgdmFyIG9wYWNpdHlWYWxzID0ge307XG4gICAgdmFyIGN1cnJlbnRMYXllcnMgPSBHZXRDdXJyZW50TGF5ZXJzKCk7XG5cbiAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGxheWVyLm9wdGlvbnM7XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubGF5ZXJzKSB7XG4gICAgICAgICAgICBvcGFjaXR5VmFsc1tvcHRpb25zLmxheWVyc10gPSBvcHRpb25zLmhhc093blByb3BlcnR5KFwib3BhY2l0eVwiKSA/IG9wdGlvbnMub3BhY2l0eSA6IFwiMVwiO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgY3VycmVudExheWVyO1xuICAgIHZhciBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBjdXJyZW50TGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGN1cnJlbnRMYXllciA9IGN1cnJlbnRMYXllcnNbaV07XG4gICAgICAgIGxheWVycy5wdXNoKGN1cnJlbnRMYXllcik7XG4gICAgICAgIGxheWVycy5wdXNoKG9wYWNpdHlWYWxzW2N1cnJlbnRMYXllcl0pO1xuICAgIH1cbiAgICByZXR1cm4gXCJsYXllcnM9XCIgKyBsYXllcnMuam9pbihcIixcIik7XG59XG5cbmZ1bmN0aW9uIG1ha2VCYXNlTGF5ZXJTdHJpbmcgKG1hcCkge1xuICAgIHZhciBsYXllcnMgPSBbXTtcbiAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICBpZiAobGF5ZXIub3B0aW9ucyAmJiBsYXllci5vcHRpb25zLnR5cGUgPT09IEJBU0VfTEFZRVJfVFlQRSkge1xuICAgICAgICAgICAgbGF5ZXJzLnB1c2gobGF5ZXIub3B0aW9ucy5pZCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gXCJiYXNlbGF5ZXJzPVwiICsgbGF5ZXJzLmpvaW4oXCIsXCIpO1xufVxuXG5mdW5jdGlvbiBtYWtlTGF5ZXJHcm91cHNTdHJpbmcgKCkge1xuICAgIHZhciBhY3RpdmVMYXllckdyb3VwcyA9IEdldEFjdGl2ZUxheWVyR3JvdXBzKClcbiAgICByZXR1cm4gXCJsYXllckdyb3Vwcz1cIithY3RpdmVMYXllckdyb3Vwcy5tYXAoZCA9PiBkLmlkKS5qb2luKCcsJylcbn1cblxuZnVuY3Rpb24gbWFrZVBvaW50c09mSW50ZXJlc3RTdHJpbmcgKCkge1xuICAgIHZhciBwb2lzID0gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCgpXG4gICAgaWYgKCFwb2lzLmxlbmd0aCkgcmV0dXJuO1xuICAgIHZhciBwb2lTdHJpbmcgPSBcInBvaXM9XCI7XG4gICAgcG9pcy5mb3JFYWNoKHBvaSA9PiB7XG4gICAgICAgIHBvaVN0cmluZyArPSBwb2kubGF0ICsgJywnICsgcG9pLmxuZztcbiAgICAgICAgaWYgKHBvaS5wbG90cyAmJiBwb2kucGxvdHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBwb2lTdHJpbmcgKz0gJywnICsgcG9pLnBsb3RzLmpvaW4oJywnKTtcbiAgICAgICAgfVxuICAgICAgICBwb2lTdHJpbmcgKz0gJzsnO1xuICAgIH0pXG4gICAgcmV0dXJuIHBvaVN0cmluZztcbn1cblxuZnVuY3Rpb24gbWFrZUFjdGl2ZVRhYlN0cmluZyAoKSB7XG4gICAgcmV0dXJuIFwidGFiPVwiICsgZDMuc2VsZWN0KFwiLnBhbmVsLXRvcC1idG4uYWN0aXZlXCIpLmF0dHIoXCJkYXRhLWFjdGl2ZVwiKTtcbn1cblxuZnVuY3Rpb24gbWFrZUFjdGl2ZUdyYXBoVGFiU3RyaW5nICgpIHtcbiAgICByZXR1cm4gXCJncmFwaD1cIiArIGQzLnNlbGVjdChcIi5ncmFwaC10eXBlLWJ0bi5hY3RpdmVcIikuYXR0cihcImRhdGEtdHlwZVwiKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VTaGFyZVVybCAoKSB7XG4gICAgdmFyIHBhcmFtcyA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XG4gICAgaWYgKHBhcmFtcyA9PT0gXCJcIikgcmV0dXJuO1xuXG4gICAgcGFyYW1zID0gZ2V0UGFyYW1zQXJyYXkocGFyYW1zKTtcbiAgICBwYXJhbXMgPSBtYWtlS2V5ZWRQYXJhbXNPYmplY3QocGFyYW1zKTtcblxuICAgIGZvcm1hdFBhcmFtcyhwYXJhbXMpO1xuICAgIHJldHVybiBwYXJhbXM7XG59XG5cbmZ1bmN0aW9uIGdldFBhcmFtc0FycmF5IChwYXJhbXMpIHtcbiAgICBwYXJhbXMgPSBwYXJhbXMuc3Vic3RyaW5nKDEpO1xuICAgIHBhcmFtcyA9IHVubWFuZ2xlUGFyYW1TdHJpbmcocGFyYW1zKTtcbiAgICByZXR1cm4gcGFyYW1zLnNwbGl0KFwiJlwiKTtcbn1cblxuZnVuY3Rpb24gbWFuZ2xlUGFyYW1TdHJpbmcgKHVybCkge1xuICAgIHJldHVybiB1cmwucmVwbGFjZSgvXFw6L2csIFwiJTNBXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXDsvZywgXCIlM0JcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcLy9nLCBcIiUyRlwiKVxuICAgICAgICAucmVwbGFjZSgvXFwsL2csIFwiJTJDXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXCYvZywgXCIlMjZcIik7XG59XG5cbmZ1bmN0aW9uIHVubWFuZ2xlUGFyYW1TdHJpbmcgKHBhcmFtcykge1xuICAgIHJldHVybiBwYXJhbXMucmVwbGFjZSgvXFwlMltjfENdL2csIFwiLFwiKS5yZXBsYWNlKC9cXCUzW2J8Ql0vZywgXCI7XCIpXG59XG5cbmZ1bmN0aW9uIG1ha2VLZXllZFBhcmFtc09iamVjdCAocGFyYW1zQXJyKSB7XG4gICAgdmFyIHBhcnNlZFBhcmFtcyA9IHt9O1xuICAgIHZhciBwYXJhbVBhaXI7XG4gICAgdmFyIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgcGFyYW1zQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHBhcmFtUGFpciA9IHBhcmFtc0FycltpXS5zcGxpdChcIj1cIik7XG4gICAgICAgIHBhcnNlZFBhcmFtc1twYXJhbVBhaXJbMF1dID0gcGFyYW1QYWlyWzFdXG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcnNlZFBhcmFtcztcbn1cblxuZnVuY3Rpb24gZm9ybWF0UGFyYW1zIChwYXJhbXMpIHtcbiAgICBpZiAocGFyYW1zLmNlbnRlcikgcGFyYW1zLmNlbnRlciA9IGZvcm1hdENlbnRlclBhcmFtKHBhcmFtcy5jZW50ZXIpO1xuICAgIGlmIChwYXJhbXMubGF5ZXJzKSBwYXJhbXMubGF5ZXJzID0gZm9ybWF0TGF5ZXJQYXJhbShwYXJhbXMubGF5ZXJzKTtcbiAgICBpZiAocGFyYW1zLmJhc2VsYXllcnMpIHBhcmFtcy5iYXNlbGF5ZXJzID0gZm9ybWF0QmFzZUxheWVyUGFyYW0ocGFyYW1zLmJhc2VsYXllcnMpO1xuICAgIGlmIChwYXJhbXMucG9pcykgcGFyYW1zLnBvaXMgPSBmb3JtYXRQb2ludHNPZkludGVyZXN0UGFyYW0ocGFyYW1zLnBvaXMpXG4gICAgaWYgKHBhcmFtcy5sYXllckdyb3VwcykgcGFyYW1zLmxheWVyR3JvdXBzID0gZm9ybWF0TGF5ZXJHcm91cHNQYXJhbShwYXJhbXMubGF5ZXJHcm91cHMpXG59XG5cbmZ1bmN0aW9uIGZvcm1hdENlbnRlclBhcmFtIChjZW50ZXIpIHtcbiAgICByZXR1cm4gY2VudGVyLnNwbGl0KFwiLFwiKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TGF5ZXJQYXJhbSAobGF5ZXJzKSB7XG4gICAgdmFyIGZvcm1hdHRlZExheWVycyA9IHtcbiAgICAgICAgXCJlbmFibGVkTGF5ZXJzXCI6IFtdLFxuICAgICAgICBcIm9wYWNpdHlWYWxzXCI6IHt9XG4gICAgfTtcbiAgICB2YXIgbGF5ZXJJZDtcbiAgICB2YXIgaTtcblxuICAgIGxheWVycyA9IGxheWVycy5zcGxpdChcIixcIik7XG4gICAgZm9yIChpID0gMDsgaSA8IGxheWVycy5sZW5ndGg7IGkgPSBpICsgMikge1xuICAgICAgICBsYXllcklkID0gbGF5ZXJzW2ldO1xuICAgICAgICBmb3JtYXR0ZWRMYXllcnMuZW5hYmxlZExheWVycy5wdXNoKGxheWVySWQpO1xuICAgICAgICBmb3JtYXR0ZWRMYXllcnMub3BhY2l0eVZhbHNbbGF5ZXJJZF0gPSBsYXllcnNbaSsxXTtcbiAgICB9XG5cbiAgICByZXR1cm4gZm9ybWF0dGVkTGF5ZXJzO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRCYXNlTGF5ZXJQYXJhbSAoYmFzZWxheWVycykge1xuICAgIHJldHVybiBiYXNlbGF5ZXJzLnNwbGl0KFwiLFwiKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0UG9pbnRzT2ZJbnRlcmVzdFBhcmFtIChwb2lzKSB7XG4gICAgcmV0dXJuIHBvaXMuc3BsaXQoJzsnKVxuICAgICAgICAuZmlsdGVyKChzdHIpID0+IHN0ciAhPT0gJycpXG4gICAgICAgIC5tYXAoKHBvaSkgPT4ge1xuICAgICAgICAgICAgcG9pID0gcG9pLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICBpZiAocG9pLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlUE9JKHBvaVswXSwgcG9pWzFdLCBwb2kuc3BsaWNlKDIpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVBPSShwb2lbMF0sIHBvaVsxXSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRMYXllckdyb3Vwc1BhcmFtIChsYXllckdyb3VwU2V0dGluZ3MpIHtcbiAgICByZXR1cm4gbGF5ZXJHcm91cFNldHRpbmdzLnNwbGl0KCcsJylcbn1cblxuZnVuY3Rpb24gYWRkTGF5ZXJHcm91cFNldHRpbmdzVG9Db25maWcoYWN0aXZlTGF5ZXJHcm91cElkcywgY29uZmlnKSB7XG4gICAgY29uZmlnLmxheW91dFsnbGF5ZXItZ3JvdXBzLW9yZGVyJ10uZm9yRWFjaChsYXllckdyb3VwID0+IHtcbiAgICAgICAgLy8gc2V0IGxheWVyIGdyb3VwIHRvIGFjdGl2ZSBpZiBpdHMgaWQgYXBwZWFycyBpbiB0aGUgc2hhcmUgdXJsIHNldHRpbmdzXG4gICAgICAgIGxheWVyR3JvdXAuYWN0aXZlID0gYWN0aXZlTGF5ZXJHcm91cElkcy5maWx0ZXIoaWQgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGlkID09PSBsYXllckdyb3VwLmlkXG4gICAgICAgIH0pLmxlbmd0aCA+IDBcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBhZGRMYXllclNldHRpbmdzVG9Db25maWcgKHNoYXJlTGF5ZXJTZXR0aW5ncywgY29uZmlnKSB7XG4gICAgdmFyIGVuYWJsZWRMYXllcnMgPSBzaGFyZUxheWVyU2V0dGluZ3MuZW5hYmxlZExheWVycztcbiAgICBjb25maWdbXCJhY3RpdmUtbGF5ZXJzXCJdID0gZW5hYmxlZExheWVycztcblxuICAgIHZhciBpLCBqLCBwcm9wLCBsYXllcmdyb3VwO1xuICAgIHZhciBlbmFibGVkTGF5ZXI7XG4gICAgdmFyIGZvdW5kTGF5ZXI7XG4gICAgdmFyIGxheWVycyA9IGNvbmZpZy5sYXllcnM7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgZW5hYmxlZExheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3VuZExheWVyID0gZmFsc2U7XG4gICAgICAgIGVuYWJsZWRMYXllciA9IGVuYWJsZWRMYXllcnNbaV07XG4gICAgICAgIGZvciAocHJvcCBpbiBsYXllcnMpIHtcbiAgICAgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG4gICAgICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGxheWVyZ3JvdXAubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZW5hYmxlZExheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyZ3JvdXBbal0ub3BhY2l0eSA9IHNoYXJlTGF5ZXJTZXR0aW5ncy5vcGFjaXR5VmFsc1tlbmFibGVkTGF5ZXJdO1xuICAgICAgICAgICAgICAgICAgICBmb3VuZExheWVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhZGRCYXNlTGF5ZXJTZXR0aW5nc1RvQ29uZmlnIChzaGFyZUJhc2VMYXllclNldHRpbmdzLCBjb25maWcpIHtcbiAgICB2YXIgYmFzZWxheWVycyA9IGNvbmZpZy5iYXNlbGF5ZXJzO1xuICAgIHZhciBiYXNlbGF5ZXI7XG4gICAgdmFyIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgYmFzZWxheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBiYXNlbGF5ZXIgPSBiYXNlbGF5ZXJzW2ldO1xuICAgICAgICBiYXNlbGF5ZXIuYWN0aXZlID0gKHNoYXJlQmFzZUxheWVyU2V0dGluZ3MuaW5kZXhPZihiYXNlbGF5ZXIuaWQpICE9PSAtMSkgPyB0cnVlIDogZmFsc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhZGRQb2ludHNPZkludGVyZXN0VG9Db25maWcocG9pcywgY29uZmlnKSB7XG4gICAgY29uZmlnW1wicG9pc1wiXSA9IHBvaXNcbn1cblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvc2hhcmUuanMiLCJpbXBvcnQge0dldE1hcH0gZnJvbSBcIi4vbWFwXCI7XG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tIFwiLi9zaGFyZVwiO1xuXG5leHBvcnQgY29uc3QgQkFTRV9MQVlFUl9UWVBFID0gXCJiYXNlbGF5ZXJcIjtcblxudmFyIF9iYXNlbGF5ZXJzO1xuXG5leHBvcnQgZnVuY3Rpb24gQ3JlYXRlQmFzZUxheWVycyAobWFwLCBsYXllckNvbmZpZykge1xuICAgIGxheWVyQ29uZmlnID0gbGF5ZXJDb25maWcgfHxcbiAgICAgICAgW3tcbiAgICAgICAgICAgIFwiaWRcIiA6IFwiY2FydG8tbGlnaHQtZGVmYXVsdFwiLFxuICAgICAgICAgICAgXCJ1cmxcIiA6IFwiaHR0cDovL3tzfS5iYXNlbWFwcy5jYXJ0b2Nkbi5jb20vbGlnaHRfYWxsL3t6fS97eH0ve3l9LnBuZ1wiLFxuICAgICAgICAgICAgXCJhdHRyaWJ1dGlvblwiIDogJyZjb3B5OyA8YSBocmVmPVwiaHR0cDovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsICZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly9jYXJ0by5jb20vYXR0cmlidXRpb25zXCI+Q0FSVE88L2E+J1xuICAgICAgICB9XTtcblxuICAgIF9iYXNlbGF5ZXJzID0gbGF5ZXJDb25maWc7XG4gICAgdmFyIGk7XG4gICAgdmFyIGJhc2VMYXllcjtcbiAgICB2YXIgY29uZmlnO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxheWVyQ29uZmlnLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbmZpZyA9IGxheWVyQ29uZmlnW2ldO1xuXG4gICAgICAgIGlmICghY29uZmlnLmFjdGl2ZSkgY29udGludWU7XG4gICAgICAgIGJhc2VMYXllciA9IGNyZWF0ZUJhc2VMYXllcihjb25maWcpO1xuICAgICAgICBjb25maWcubGF5ZXIgPSBiYXNlTGF5ZXI7XG4gICAgICAgIGJhc2VMYXllci5hZGRUbyhtYXApO1xuICAgIH1cblxuICAgIGNyZWF0ZUJhc2VMYXllclVJKGxheWVyQ29uZmlnKVxufVxuXG5mdW5jdGlvbiBjcmVhdGVCYXNlTGF5ZXJVSSAoY29uZmlnKSB7XG4gICAgdmFyIGJhc2VVSSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgYmFzZVVJLmNsYXNzTmFtZSA9IFwiYmFzZWxheWVyLXVpXCI7XG4gICAgdmFyIGJhc2VXcmFwcGVyO1xuICAgIHZhciBiYXNlSW1nO1xuICAgIHZhciBiYXNlTGFiZWw7XG5cbiAgICB2YXIgbGF5ZXI7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb25maWcubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGxheWVyID0gY29uZmlnW2ldO1xuICAgICAgICBpZiAoIWxheWVyLmhhc093blByb3BlcnR5KFwiaW1hZ2VcIikpIGNvbnRpbnVlO1xuXG4gICAgICAgIGJhc2VXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgYmFzZVdyYXBwZXIuc2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiLCBsYXllci5pZCk7XG4gICAgICAgIGJhc2VJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICBiYXNlSW1nLnNldEF0dHJpYnV0ZShcInNyY1wiLCBsYXllci5pbWFnZSk7XG4gICAgICAgIGJhc2VJbWcuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGxheWVyLmxhYmVsKTtcbiAgICAgICAgYmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBsYXllci5sYWJlbCk7XG4gICAgICAgIGJhc2VMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGJhc2VMYWJlbC50ZXh0Q29udGVudCA9IGxheWVyLmxhYmVsO1xuICAgICAgICBiYXNlV3JhcHBlci5hcHBlbmRDaGlsZChiYXNlSW1nKTtcbiAgICAgICAgYmFzZVdyYXBwZXIuYXBwZW5kQ2hpbGQoYmFzZUxhYmVsKTtcbiAgICAgICAgYmFzZVdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUJhc2VDbGljaylcblxuICAgICAgICBkMy5zZWxlY3QoYmFzZVdyYXBwZXIpXG4gICAgICAgICAgICAuY2xhc3NlZChcImJhc2Utc2VsZWN0b3JcIiwgdHJ1ZSlcbiAgICAgICAgICAgIC5jbGFzc2VkKFwiYWN0aXZlXCIsIGxheWVyLmFjdGl2ZSk7XG5cbiAgICAgICAgYmFzZVVJLmFwcGVuZENoaWxkKGJhc2VXcmFwcGVyKTtcbiAgICB9XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibGVhZmxldC1ib3R0b20gbGVhZmxldC1sZWZ0XCIpWzBdLmFwcGVuZENoaWxkKGJhc2VVSSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUJhc2VDbGljayAoZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdmFyIGxheWVyaWQgPSB0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtbGF5ZXJcIik7XG4gICAgdG9nZ2xlQWN0aXZlQmFzZVVJKHRoaXMpO1xuICAgIHJlbW92ZUN1cnJlbnRCYXNlTGF5ZXIoKTtcbiAgICBhZGROZXdCYXNlTGF5ZXJUb01hcChsYXllcmlkKTtcblxuICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBjaGFuZ2VpbmcgYmFzZSBsYXllclxuICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG4gICAgICBldmVudEFjdGlvbjogJ2NoYW5nZSBiYXNlIGxheWVyJyxcbiAgICAgIGV2ZW50TGFiZWw6IGxheWVyaWQsXG4gICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcbiAgICB9KTtcblxuICAgIHVwZGF0ZVNoYXJlVXJsKCk7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZUFjdGl2ZUJhc2VVSSAoYmFzZVVJRWxlbSkge1xuICAgIGQzLnNlbGVjdChcIi5iYXNlLXNlbGVjdG9yLmFjdGl2ZVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGZhbHNlKTtcbiAgICBkMy5zZWxlY3QoYmFzZVVJRWxlbSkuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ3VycmVudEJhc2VMYXllciAoKSB7XG4gICAgdmFyIG1hcCA9IEdldE1hcCgpO1xuXG4gICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMudHlwZSAhPT0gQkFTRV9MQVlFUl9UWVBFKSByZXR1cm47XG4gICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllcik7XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gYWRkTmV3QmFzZUxheWVyVG9NYXAgKGxheWVyaWQpIHtcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XG5cbiAgICB2YXIgbGF5ZXI7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBfYmFzZWxheWVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgbGF5ZXIgPSBfYmFzZWxheWVyc1tpXTtcbiAgICAgICAgaWYgKGxheWVyLmlkICE9PSBsYXllcmlkKSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFsYXllci5sYXllcikgbGF5ZXIubGF5ZXIgPSBjcmVhdGVCYXNlTGF5ZXIobGF5ZXIpO1xuICAgICAgICBsYXllci5sYXllci5hZGRUbyhtYXApO1xuICAgICAgICBsYXllci5sYXllci5icmluZ1RvQmFjaygpO1xuICAgICAgICBicmVhaztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUJhc2VMYXllciAobGF5ZXJDb25maWcpIHtcbiAgICByZXR1cm4gTC50aWxlTGF5ZXIoXG4gICAgICAgIGxheWVyQ29uZmlnLnVybCxcbiAgICAgICAgbWFrZUJhc2VMYXllck9wdGlvbnMobGF5ZXJDb25maWcpXG4gICAgKTtcbn1cblxuZnVuY3Rpb24gbWFrZUJhc2VMYXllck9wdGlvbnMgKGNvbmZpZykge1xuICAgIHZhciBvcHRpb25zID0ge307XG4gICAgaWYgKGNvbmZpZy5pZCkgb3B0aW9ucy5pZCA9IGNvbmZpZy5pZDtcbiAgICBpZiAoY29uZmlnLmF0dHJpYnV0aW9uKSBvcHRpb25zLmF0dHJpYnV0aW9uID0gY29uZmlnLmF0dHJpYnV0aW9uO1xuICAgIGlmIChjb25maWcuc3ViZG9tYWlucykgb3B0aW9ucy5zdWJkb21haW5zID0gY29uZmlnLnN1YmRvbWFpbnM7XG4gICAgb3B0aW9ucy50eXBlID0gQkFTRV9MQVlFUl9UWVBFO1xuXG4gICAgcmV0dXJuIG9wdGlvbnM7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9iYXNlbGF5ZXIuanMiLCJpbXBvcnQge2NyZWF0ZUdyYXBoRGl2fSBmcm9tICcuL2dyYXBoJztcbmltcG9ydCB7Y3JlYXRlTWFya2VyLCBnZXRJY29ufSBmcm9tICcuL21hcmtlcic7XG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tICcuL3NoYXJlJztcbmltcG9ydCB7R2V0TWFwfSBmcm9tICcuL21hcCc7XG5pbXBvcnQge0dldEFjdGl2ZVRhYiwgSGFuZGxlVGFiQ2hhbmdlfSBmcm9tICcuL3RhYnMnO1xuaW1wb3J0IHt1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0fSBmcm9tICcuL3BhbmVsJztcblxudmFyIF9wb2ludHNfb2ZfaW50ZXJlc3QgPSBbXVxuXG5leHBvcnQgZnVuY3Rpb24gQmluZEdyYXBoRXZlbnRzIChtYXApIHtcbiAgICBtYXAub24oXCJjbGlja1wiLCBoYW5kbGVNYXBDbGljayk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU1hcENsaWNrIChlKSB7XG4gICAgdmFyIG1hcCA9IHRoaXM7XG4gICAgdmFyIGxhdCA9IGUubGF0bG5nLmxhdDtcbiAgICB2YXIgbG5nID0gZS5sYXRsbmcubG5nO1xuXG4gICAgdmFyIHBvaSA9IGNyZWF0ZVBPSShsYXQsIGxuZywgbnVsbCk7XG4gICAgQWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyKHBvaSk7XG4gICAgU2V0dXBQb2ludE9mSW50ZXJlc3RVSShtYXAsIHBvaSk7XG4gICAgdXBkYXRlU2hhcmVVcmwoKTtcblxuICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGNsaWNrIG9uIG1hcFxuICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG4gICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcbiAgICAgIGV2ZW50TGFiZWw6ICdhZGQgcG9pbnQnLFxuICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUdyYXBoUmVtb3ZlciAobWFwLCBkaXYsIG1hcmtlciwgcG9pKSB7XG4gICAgdmFyIGVsZW0gPSBjcmVhdGVHcmFwaFJlbW92ZXJFbGVtKCk7XG4gICAgZGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC1lbGVtLWhlYWRlclwiKVswXS5hcHBlbmRDaGlsZChlbGVtKTtcbiAgICBkMy5zZWxlY3QoZWxlbSkub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgcmVtb3ZlIGdyYXBoXG4gICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXG4gICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG4gICAgICAgICAgZXZlbnRMYWJlbDogJ3JlbW92ZScsXG4gICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIFJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyKHBvaSlcbiAgICAgICAgUmVtb3ZlUG9pbnRPZkludGVyZXN0VUkobWFwLCBkaXYsIG1hcmtlcilcbiAgICAgICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpXG4gICAgICAgIHVwZGF0ZVNoYXJlVXJsKClcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSAoKSB7XG4gICAgdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGVsZW0uY2xhc3NOYW1lID0gXCJyZW1vdmUtZ3JhcGhcIjtcbiAgICBlbGVtLmlubmVyVGV4dCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoXCIxMDAwNVwiKTtcbiAgICBlbGVtLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIFwiUmVtb3ZlIGdyYXBoXCIpO1xuICAgIHJldHVybiBlbGVtO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCAoKSB7XG4gICAgcmV0dXJuIF9wb2ludHNfb2ZfaW50ZXJlc3Q7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQT0kgKGxhdCwgbG5nLCBwbG90cykge1xuICAgIHJldHVybiB7XG4gICAgICAgIGxhdDogbGF0LFxuICAgICAgICBsbmc6IGxuZyxcbiAgICAgICAgcGxvdHM6IHBsb3RzIHx8IFtcImJhc2VsaW5lXCIsIFwiMjAxNVwiLCBcInRocmVzaG9sZHNcIl1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIEFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlciAocG9pKSB7XG4gICAgX3BvaW50c19vZl9pbnRlcmVzdC5wdXNoKHBvaSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTZXR1cFBvaW50c09mSW50ZXJlc3QgKG1hcCwgbmV3UG9pcykge1xuICAgIEFkZE11bHRpcGxlUG9pbnRzT2ZJbnRlcmVzdChuZXdQb2lzKVxuICAgIHZhciBwb2lzID0gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCgpXG4gICAgdmFyIG1hcCA9IEdldE1hcCgpXG4gICAgcG9pcy5mb3JFYWNoKHBvaSA9PiB7XG4gICAgICAgIFNldHVwUG9pbnRPZkludGVyZXN0VUkobWFwLCBwb2kpXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gQWRkTXVsdGlwbGVQb2ludHNPZkludGVyZXN0IChwb2lzKSB7XG4gICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoX3BvaW50c19vZl9pbnRlcmVzdCwgcG9pcyk7XG59XG5cbmZ1bmN0aW9uIFJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyKHBvaVRvUmVtb3ZlKSB7XG4gICAgX3BvaW50c19vZl9pbnRlcmVzdCA9IF9wb2ludHNfb2ZfaW50ZXJlc3QuZmlsdGVyKHBvaSA9PiB7XG4gICAgICAgIHJldHVybiAhKHBvaSA9PT0gcG9pVG9SZW1vdmUpXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIFNldHVwUG9pbnRPZkludGVyZXN0VUkgKG1hcCwgcG9pKSB7XG4gICAgdmFyIGRpdiA9IGNyZWF0ZUdyYXBoRGl2KHBvaSk7XG4gICAgdmFyIG1hcmtlciA9IGNyZWF0ZU1hcmtlcihwb2kubGF0LCBwb2kubG5nKTtcbiAgICBwb2kuZ3JhcGhEaXYgPSBkaXZcbiAgICBwb2kubWFya2VyID0gbWFya2VyXG4gICAgbWFya2VyLmFkZFRvKG1hcClcbiAgICBjcmVhdGVHcmFwaFJlbW92ZXIobWFwLCBkaXYsIG1hcmtlciwgcG9pKTtcblxuICAgIGQzLnNlbGVjdChkaXYpLm9uKFwibW91c2VlbnRlclwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBtYXJrZXIuc2V0SWNvbihnZXRJY29uKCdob3ZlcicpKTtcbiAgICB9KVxuICAgIGQzLnNlbGVjdChkaXYpLm9uKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG1hcmtlci5zZXRJY29uKGdldEljb24oJ2dyYXBoJykpO1xuICAgIH0pXG4gICAgbWFya2VyLm9uKCdjbGljayBkYmxjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGhhbmRsZU1hcmtlck1vdXNlRXZlbnQoZSwgcG9pKVxuICAgIH0pXG4gICAgbWFya2VyLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBtYXJrZXIuc2V0SWNvbihnZXRJY29uKCdob3ZlcicpKVxuICAgIH0pXG4gICAgbWFya2VyLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIG1hcmtlci5zZXRJY29uKGdldEljb24oJ2dyYXBoJykpXG4gICAgICAgIHBvaS5ncmFwaERpdi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwYW4tdG8tbWFya2VyLWJ0bicpWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGUnKVxuICAgIH0pXG59XG5cbmZ1bmN0aW9uIGhhbmRsZU1hcmtlck1vdXNlRXZlbnQgKGUsIHBvaSkge1xuICAgIGUub3JpZ2luYWxFdmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIEhhbmRsZVRhYkNoYW5nZSgnZ3JhcGhzLWFjdGl2ZScpXG4gICAgc2Nyb2xsVG9Qb2ludE9mSW50ZXJlc3RHcmFwaChwb2kpXG4gICAgdHJpZ2dlckdyYXBoQW5pbWF0aW9uKHBvaSlcbn1cblxuZnVuY3Rpb24gdHJpZ2dlckdyYXBoQW5pbWF0aW9uIChwb2kpIHtcbiAgICBwb2kuZ3JhcGhEaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncGFuLXRvLW1hcmtlci1idG4nKVswXS5jbGFzc0xpc3QuYWRkKCdhbmltYXRlJylcbn1cblxuZnVuY3Rpb24gc2Nyb2xsVG9Qb2ludE9mSW50ZXJlc3RHcmFwaCAocG9pKSB7XG4gICAgdmFyIHJpZ2h0UGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKTtcbiAgICByaWdodFBhbmVsLnNjcm9sbFRvcCA9IHBvaS5ncmFwaERpdi5vZmZzZXRUb3A7XG59XG5cbmZ1bmN0aW9uIFJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJIChtYXAsIGRpdiwgbWFya2VyKSB7XG4gICAgdmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JhcGgtbGlzdCcpO1xuICAgIGxpc3QucmVtb3ZlQ2hpbGQoZGl2KTtcbiAgICBtYXAucmVtb3ZlTGF5ZXIobWFya2VyKTtcbiAgICB1cGRhdGVTaGFyZVVybCgpXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9wb2kuanMiLCJpbXBvcnQge3VwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHR9IGZyb20gJy4vcGFuZWwnXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tICcuL3NoYXJlJ1xuaW1wb3J0IHtHZXRNYXB9IGZyb20gJy4vbWFwJ1xuaW1wb3J0IHtHZXRBamF4T2JqZWN0fSBmcm9tICcuL3BhcnNlcidcblxudmFyIHRpcCA9IHt9O1xuXG5leHBvcnQgZnVuY3Rpb24gU2V0dXBHcmFwaHMgKCkge1xuICAgIGQzLnNlbGVjdEFsbChcIi5ncmFwaC10eXBlLWJ0blwiKS5vbihcImNsaWNrXCIsIGhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrKTtcbiAgICBleHRlbmREYXRlTW9kdWxlKCk7XG4gICAgdGlwID0gZDMudGlwKCkuYXR0cignY2xhc3MnLCAnZDMtdGlwJykuaHRtbChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZDsgfSk7XG59XG5cbmZ1bmN0aW9uIGV4dGVuZERhdGVNb2R1bGUgKCkge1xuICAgIERhdGUucHJvdG90eXBlLmlzTGVhcFllYXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHllYXIgPSB0aGlzLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIGlmICgoeWVhciAmIDMpICE9IDApIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuICgoeWVhciAlIDEwMCkgIT0gMCB8fCAoeWVhciAlIDQwMCkgPT0gMCk7XG4gICAgfTtcblxuICAgIC8vIEdldCBEYXkgb2YgWWVhclxuICAgIERhdGUucHJvdG90eXBlLmdldERPWSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZGF5Q291bnQgPSBbMCwgMzEsIDU5LCA5MCwgMTIwLCAxNTEsIDE4MSwgMjEyLCAyNDMsIDI3MywgMzA0LCAzMzRdO1xuICAgICAgICB2YXIgbW4gPSB0aGlzLmdldE1vbnRoKCk7XG4gICAgICAgIHZhciBkbiA9IHRoaXMuZ2V0RGF0ZSgpO1xuICAgICAgICB2YXIgZGF5T2ZZZWFyID0gZGF5Q291bnRbbW5dICsgZG47XG4gICAgICAgIGlmIChtbiA+IDEgJiYgdGhpcy5pc0xlYXBZZWFyKCkpIGRheU9mWWVhcisrO1xuICAgICAgICByZXR1cm4gZGF5T2ZZZWFyO1xuICAgIH07XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggREFUQSBQUk9DRVNTSU5HIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gaGFuZGxlR3JhcGhEYXRhUmVzcG9uc2UgKGRpdiwgcG9pLCByZXNwb25zZSkge1xuICAgIHJlc3BvbnNlID0gcmVzcG9uc2UucmVwbGFjZSgvXFxbfFxcXXxcXCcvZywgXCJcIikuc3BsaXQoXCIsIFwiKTtcbiAgICBkcmF3R3JhcGgocmVzcG9uc2UsIGRpdiwgcG9pKTtcbiAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KClcbn1cblxuZnVuY3Rpb24gZ2V0RGF0YShwb2ksIGRpdikge1xuICAgIHZhciB1cmwgPSBcImh0dHBzOi8vZmNhdi1uZHZpLm5lbWFjLm9yZy9sYW5kZGF0X3Byb2R1Y3QuY2dpP2FyZ3M9XCIgKyBwb2kubG5nICsgXCIsXCIgKyBwb2kubGF0O1xuICAgIHZhciBvUmVxID0gR2V0QWpheE9iamVjdChmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaGFuZGxlR3JhcGhEYXRhUmVzcG9uc2UoZGl2LCBwb2ksIHJlc3BvbnNlKVxuICAgIH0pXG5cbiAgICBvUmVxLm9wZW4oXCJHRVRcIiwgdXJsKTtcbiAgICBvUmVxLnNlbmQoKVxufVxuXG5mdW5jdGlvbiBzcGxpdERhdGEoZGF0YSkge1xuICAgIHZhciBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGRhdGFbaV0gPSBkYXRhW2ldLnNwbGl0KFwiLFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIHJlcHJvY2Vzc0RhdGEgKG9yaWdkYXRhKSB7XG4gICAgdmFyIGV4cGVjdGVkWWVhckxlbmd0aCA9IDQ2O1xuICAgIHZhciBkYXRhID0ge307XG4gICAgdmFyIHBvaW50O1xuICAgIHZhciBrZXk7XG4gICAgdmFyIGksIGo7XG5cbiAgICBkYXRhW1wia2V5c1wiXSA9IFtdO1xuICAgIGZvciAoaSA9IDA7IGkgPCBvcmlnZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICBwb2ludCA9IG9yaWdkYXRhW2ldO1xuICAgICAgICBrZXkgPSBwb2ludFswXS5zdWJzdHJpbmcoMCw0KTtcbiAgICAgICAgaWYgKCFkYXRhLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIGRhdGFba2V5XSA9IFtdO1xuICAgICAgICAgICAgZGF0YVtcImtleXNcIl0ucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGRhdGFba2V5XS5wdXNoKHBvaW50KTtcbiAgICB9XG5cbiAgICB2YXIga2V5c1RvQmVEZWxldGVkID0gW107XG4gICAgZm9yIChpID0gMDsgaSA8IGRhdGEua2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBrZXkgPSBkYXRhLmtleXNbaV07XG4gICAgICAgIGlmIChkYXRhW2tleV0ubGVuZ3RoICE9PSBleHBlY3RlZFllYXJMZW5ndGgpIHtcbiAgICAgICAgICAgIGtleXNUb0JlRGVsZXRlZC5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwga2V5c1RvQmVEZWxldGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGtleSA9IGtleXNUb0JlRGVsZXRlZFtpXTtcbiAgICAgICAgZGVsZXRlIGRhdGFba2V5XTtcbiAgICAgICAgZGF0YS5rZXlzLnNwbGljZShkYXRhLmtleXMuaW5kZXhPZihrZXkpLCAxKTtcbiAgICB9XG5cbiAgICB2YXIgZGF0YUZvckJhc2VsaW5lO1xuICAgIHZhciBtZWFuO1xuICAgIGRhdGFbXCJiYXNlbGluZVwiXSA9IFtdO1xuICAgIGZvciAoaSA9IDA7IGkgPCBleHBlY3RlZFllYXJMZW5ndGg7IGkrKykge1xuICAgICAgICBkYXRhRm9yQmFzZWxpbmUgPSBbXTtcbiAgICAgICAgZm9yIChqID0gaTsgaiA8IG9yaWdkYXRhLmxlbmd0aDsgaiArPSBleHBlY3RlZFllYXJMZW5ndGgpIHtcbiAgICAgICAgICAgIGRhdGFGb3JCYXNlbGluZS5wdXNoKHBhcnNlSW50KG9yaWdkYXRhW2pdWzFdLCAxMCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbWVhbiA9IGNvbXB1dGVBdmVyYWdlKGRhdGFGb3JCYXNlbGluZSk7XG4gICAgICAgIGRhdGFbXCJiYXNlbGluZVwiXS5wdXNoKG1lYW4pO1xuICAgIH1cblxuICAgIHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlQXZlcmFnZSAoYXJyKSB7XG4gICAgdmFyIHN1bSA9IDAsIGksIGw7XG5cbiAgICBmb3IgKGkgPSAwLCBsID0gYXJyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBzdW0gKz0gYXJyW2ldO1xuICAgIH1cblxuICAgIHJldHVybiAoc3VtIC8gbCkudG9TdHJpbmcoKTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBHUkFQSCBJTlRFUkZBQ0UgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIGhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrICgpIHtcbiAgICB2YXIgdHlwZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKTtcbiAgICB2YXIgYWN0aXZlVHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF0uZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKTtcblxuICAgIGlmICh0eXBlID09PSBhY3RpdmVUeXBlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBjbGljayBvbiBncmFwaCB0eXBlXG4gICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG4gICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGggdHlwZScsXG4gICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcbiAgICAgIGV2ZW50TGFiZWw6IHR5cGUsXG4gICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcbiAgICB9KTtcblxuICAgIEhhbmRsZUdyYXBoVGFiQ2hhbmdlKHR5cGUsIGFjdGl2ZVR5cGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSGFuZGxlR3JhcGhUYWJDaGFuZ2UgKGdyYXBoVHlwZSkge1xuICAgIGlmICghaXNHcmFwaExpc3RFbXB0eSgpKSB7XG4gICAgICAgIHZhciBvbGRBY3RpdmVHcmFwaEVsZW1IZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC1lbGVtJylbMF0uc2Nyb2xsSGVpZ2h0XG4gICAgICAgIHZhciBvbGRBY3RpdmVHcmFwaEluZm9IZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC10eXBlLWluZm8gYWN0aXZlJylbMF0uc2Nyb2xsSGVpZ2h0XG4gICAgICAgIHZhciByaWdodFBhbmVsU2Nyb2xsVG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsJykuc2Nyb2xsVG9wXG4gICAgfVxuICAgIGRpc2FibGVBY3RpdmVHcmFwaFRhYigpO1xuICAgIGVuYWJsZUdyYXBoVGFiKGdyYXBoVHlwZSk7XG4gICAgaWYgKCFpc0dyYXBoTGlzdEVtcHR5KCkpIGFkanVzdFNjcm9sbFBvc2l0aW9uKG9sZEFjdGl2ZUdyYXBoSW5mb0hlaWdodCwgb2xkQWN0aXZlR3JhcGhFbGVtSGVpZ2h0LCByaWdodFBhbmVsU2Nyb2xsVG9wKVxuICAgIHVwZGF0ZVNoYXJlVXJsKCk7XG59XG5cbmZ1bmN0aW9uIGlzR3JhcGhMaXN0RW1wdHkoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLWVsZW0nKVswXSA9PT0gdW5kZWZpbmVkXG59XG5cbmZ1bmN0aW9uIGFkanVzdFNjcm9sbFBvc2l0aW9uKG9sZEdyYXBoSW5mb0hlaWdodCwgb2xkR3JhcGhFbGVtSGVpZ2h0LCBvbGRSaWdodFBhbmVsU2Nyb2xsVG9wKSB7XG4gICAgdmFyIG5ld0dyYXBoSW5mb0hlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLXR5cGUtaW5mbyBhY3RpdmUnKVswXS5zY3JvbGxIZWlnaHRcbiAgICB2YXIgbmV3R3JhcGhFbGVtSGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhcGgtZWxlbScpWzBdLnNjcm9sbEhlaWdodFxuXG4gICAgdmFyIG5ld0dyYXBoRWxlbUhlaWdodFNjYWxlID0gKG5ld0dyYXBoRWxlbUhlaWdodCAvIG9sZEdyYXBoRWxlbUhlaWdodClcbiAgICB2YXIgbmV3UmlnaHRQYW5lbFNjcm9sbFRvcCA9IG5ld0dyYXBoSW5mb0hlaWdodCArIChcbiAgICAgICAgKG9sZFJpZ2h0UGFuZWxTY3JvbGxUb3AgLSBvbGRHcmFwaEluZm9IZWlnaHQpICogbmV3R3JhcGhFbGVtSGVpZ2h0U2NhbGVcbiAgICApXG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKS5zY3JvbGxUb3AgPSBuZXdSaWdodFBhbmVsU2Nyb2xsVG9wXG59XG5cbmZ1bmN0aW9uIGRpc2FibGVBY3RpdmVHcmFwaFRhYiAoKSB7XG4gICAgdmFyIGFjdGl2ZUVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZ3JhcGgtdHlwZS1idG4gYWN0aXZlXCIpWzBdO1xuICAgIHZhciBhY3RpdmVDbGFzcyA9IFwiZ3JhcGgtXCIgKyBhY3RpdmVFbGVtLmdldEF0dHJpYnV0ZShcImRhdGEtdHlwZVwiKTtcblxuICAgIGFjdGl2ZUVsZW0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXBoLWxpc3RcIikuY2xhc3NMaXN0LnJlbW92ZShhY3RpdmVDbGFzcyk7XG59XG5cbmZ1bmN0aW9uIGVuYWJsZUdyYXBoVGFiIChncmFwaFR5cGUpIHtcbiAgICBkMy5zZWxlY3QoXCIuZ3JhcGgtdHlwZS1idG5bZGF0YS10eXBlPSdcIiArIGdyYXBoVHlwZSArIFwiJ11cIikuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXBoLWxpc3RcIikuY2xhc3NMaXN0LmFkZChcImdyYXBoLVwiICsgZ3JhcGhUeXBlKTtcbiAgICBkMy5zZWxlY3RBbGwoJy5ncmFwaC10eXBlLWluZm8nKVxuICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBncmFwaFR5cGUgPT09IHRoaXMuaWQuc3BsaXQoJy0nKVswXVxuICAgIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHcmFwaERpdiAocG9pKSB7XG4gICAgdmFyIGRlY2ltYWxQbGFjZXMgPSAzXG4gICAgdmFyIGxhdFNob3J0ID0gcm91bmRGbG9hdChwb2kubGF0LCBkZWNpbWFsUGxhY2VzKVxuICAgIHZhciBsbmdTaG9ydCA9IHJvdW5kRmxvYXQocG9pLmxuZywgZGVjaW1hbFBsYWNlcylcbiAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChoZWFkZXIpXG4gICAgdmFyIHpvb21Ub01hcmtlckJ1dHRvbiA9IG1ha2Vab29tVG9NYXBNYXJrZXJCdXR0b24ocG9pKVxuICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJMYXQ6IFwiICsgbGF0U2hvcnQgKyBcIiwgTG9uZzogXCIgKyBsbmdTaG9ydCk7XG4gICAgdmFyIGNvbnRlbnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNvbnRlbnREaXYuY2xhc3NOYW1lID0gXCJncmFwaC1sYXQtbG9uXCI7XG4gICAgY29udGVudERpdi5hcHBlbmRDaGlsZChjb250ZW50KTtcblxuICAgIGhlYWRlci5hcHBlbmRDaGlsZCh6b29tVG9NYXJrZXJCdXR0b24pXG4gICAgaGVhZGVyLmFwcGVuZENoaWxkKGNvbnRlbnREaXYpO1xuXG4gICAgdmFyIGxvYWRpbmdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGxvYWRpbmdEaXYuY2xhc3NMaXN0LmFkZChcImdyYXBoLWxvYWRpbmctZGl2XCIpO1xuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQobG9hZGluZ0Rpdik7XG5cbiAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJncmFwaC1lbGVtXCIpO1xuICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZChcImdyYXBoLWxvYWRpbmdcIik7XG4gICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJncmFwaC1lbGVtLWhlYWRlclwiKTtcblxuICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpO1xuICAgIGxpc3QuYXBwZW5kQ2hpbGQod3JhcHBlcik7XG4gICAgZ2V0RGF0YShwb2ksIHdyYXBwZXIpO1xuICAgIHJldHVybiB3cmFwcGVyO1xufVxuXG5mdW5jdGlvbiBtYWtlWm9vbVRvTWFwTWFya2VyQnV0dG9uKHBvaSkge1xuICAgIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bicpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3Bhbi10by1tYXJrZXItYnRuJylcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSBcIlNob3cgT24gTWFwXCJcbiAgICBidXR0b24ub25jbGljayA9IGZ1bmN0aW9uIChwb2ksIGUpIHtcbiAgICAgICAgdmFyIG1hcCA9IEdldE1hcCgpXG4gICAgICAgIG1hcC5wYW5UbyhbcG9pLmxhdCwgcG9pLmxuZ10pXG5cbiAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgY2xpY2sgb24gc2hvdyBvbiBtYXBcbiAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG4gICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcbiAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcbiAgICAgICAgICBldmVudExhYmVsOiAne1wic2hvdyBvbiBtYXBcIjp7XCJsYXRcIjonICsgcG9pLmxhdCArICcsXCJsb25nXCI6JysgIHBvaS5sbmcrICd9fScsXG4gICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgICAgIH0pO1xuXG4gICAgfS5iaW5kKGJ1dHRvbiwgcG9pKVxuICAgIHJldHVybiBidXR0b25cbn1cblxuZnVuY3Rpb24gZHJhd0dyYXBoKGRhdGEsIGRpdiwgcG9pKSB7XG4gICAgZGF0YSA9IHNwbGl0RGF0YShkYXRhKTtcbiAgICB2YXIgcmVwcm9jZXNzZWREYXRhID0gcmVwcm9jZXNzRGF0YShkYXRhKTtcbiAgICBtYWtlVXBEb3duTGluZUdyYXBoKGRhdGEsIGRpdik7XG4gICAgbWFrZVVwRG93bk92ZXJsYXBpbmdMaW5lR3JhcGhXaXRoQ2hlY2tib3hlcyhyZXByb2Nlc3NlZERhdGEsIGRpdiwgcG9pKTtcbiAgICBkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMocmVwcm9jZXNzZWREYXRhLCBkaXYsIHBvaSk7XG4gICAgZGl2LmNsYXNzTGlzdC5yZW1vdmUoXCJncmFwaC1sb2FkaW5nXCIpO1xufVxuXG5mdW5jdGlvbiByb3VuZEZsb2F0KG51bWJlciwgZGVjaW1hbFBsYWNlcykge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG51bWJlciAqIE1hdGgucG93KDEwLCBkZWNpbWFsUGxhY2VzKSkgLyAoTWF0aC5wb3coMTAsIGRlY2ltYWxQbGFjZXMpKVxufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8gVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIG1ha2VVcERvd25MaW5lR3JhcGggKGRhdGEsIGRpdikge1xuICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcbiAgICB2YXIgbWFyZ2luID0ge3RvcDogMzAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMCwgbGVmdDogMjl9LFxuICAgIHdpZHRoID0gNTgwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsXG4gICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cbiAgICAvLyBTZXQgdGhlIHJhbmdlc1xuICAgIHZhciB4ID0gZDMuc2NhbGVUaW1lKCkucmFuZ2UoWzAsIHdpZHRoXSlcbiAgICAgICAgLmRvbWFpbihbXG4gICAgICAgICAgICBwYXJzZURhdGUoZGF0YVswXVswXSksXG4gICAgICAgICAgICBwYXJzZURhdGUoZGF0YVtkYXRhLmxlbmd0aC0xXVswXSlcbiAgICAgICAgXSk7XG4gICAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKVxuICAgICAgICAuZG9tYWluKFswLCAxMDBdKTtcblxuICAgIC8vIERlZmluZSB0aGUgYXhlc1xuICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcbiAgICAgICAgLnRpY2tzKDE2KVxuICAgICAgICAudGlja0Zvcm1hdChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgcmV0dXJuIGQuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgfSk7XG5cbiAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KVxuICAgICAgICAudGlja3MoNik7XG5cbiAgICAvLyBEZWZpbmUgdGhlIGxpbmVcbiAgICB2YXIgdmFsdWVsaW5lID0gZDMubGluZSgpXG4gICAgICAgIC54KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHgocGFyc2VEYXRlKGRbMF0pKTsgfSlcbiAgICAgICAgLnkoZnVuY3Rpb24oZCkgeyByZXR1cm4geShkWzFdKTsgfSk7XG5cbiAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpXG4gICAgICAgIC5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgLmNsYXNzZWQoXCJ0aW1lc2VyaWVzLWdyYXBoXCIsIHRydWUpO1xuXG4gICAgLy8gQWRkcyB0aGUgc3ZnIGNhbnZhc1xuICAgIHZhciBzdmcgPSB3cmFwcGVyLmFwcGVuZChcInN2Z1wiKVxuICAgICAgICAuYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcbiAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdyA9IHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHRcbiAgICAgICAgICAgIHZhciBoID0gaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b21cbiAgICAgICAgICAgIHJldHVybiAnMCAwICcgKyB3ICsgJyAnICsgaFxuICAgICAgICB9KVxuICAgICAgICAuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWlkWU1pZCcpXG4gICAgICAgIC5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xuXG4gICAgc3ZnLmNhbGwodGlwKTtcblxuICAgIC8vIEFkZCB0aGUgdmFsdWVsaW5lIHBhdGguXG4gICAgZHJhd0xpbmVhclBhdGgoZGF0YSwgdmFsdWVsaW5lLCBzdmcpO1xuXG4gICAgLy8gQWRkIHRoZSBYIEF4aXNcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieCBheGlzXCIpXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIilcbiAgICAgICAgLmNhbGwoeEF4aXMpO1xuXG4gICAgLy8gQWRkIHRoZSBZIEF4aXNcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpXG4gICAgICAgIC5jYWxsKHlBeGlzKTtcbiAgICAvKipcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxuICAgICAqL1xuICAgIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgdmFsdWVsaW5lLCBzdmcpO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLyBPVkVSTEFQUElORyBUSU1FU0VSSUVTIExJTkUgR1JBUEggLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBtYWtlVXBEb3duT3ZlcmxhcGluZ0xpbmVHcmFwaFdpdGhDaGVja2JveGVzIChkYXRhLCBkaXYsIHBvaSkge1xuICAgIHZhciBjaGFydHMgPSB7fTtcblxuICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcbiAgICB2YXIgbWFyZ2luID0ge3RvcDogMzAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMCwgbGVmdDogMjl9LFxuICAgICAgICB3aWR0aCA9IDUwMCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxuICAgICAgICBoZWlnaHQgPSAyNzAgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcblxuICAgIHZhciBhdmVyYWdlcyA9IGRhdGEuYmFzZWxpbmU7XG5cbiAgICB2YXIgeCA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoWzAsIHdpZHRoXSlcbiAgICAgICAgLmRvbWFpbihbMCwgMzY1XSk7XG4gICAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKVxuICAgICAgICAuZG9tYWluKFswLCAxMDBdKTtcblxuICAgIC8vIERlZmluZSB0aGUgYXhlc1xuICAgIGZ1bmN0aW9uIGZvcm1hdE1vbnRoVGljayAoZCkge1xuICAgICAgICByZXR1cm4gKE1PTlRIX0xBQkVMU1soZC0xNSkvMzBdKTtcbiAgICB9XG4gICAgdmFyIHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4KVxuICAgICAgICAudGlja3MoMTEpXG4gICAgICAgIC50aWNrVmFsdWVzKFsxNSwgNDUsIDc1LCAxMDUsIDEzNSwgMTY1LCAxOTUsIDIyNSwgMjU1LCAyODUsIDMxNSwgMzQ1XSlcbiAgICAgICAgLnRpY2tGb3JtYXQoZm9ybWF0TW9udGhUaWNrKTtcblxuICAgIHZhciB5QXhpcyA9IGQzLmF4aXNMZWZ0KHkpXG4gICAgICAgIC50aWNrcyg2KTtcblxuICAgIC8vIERlZmluZSB0aGUgbGluZVxuICAgIHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKClcbiAgICAgICAgLngoZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4gKEFycmF5LmlzQXJyYXkoZCkgPyB4KHBhcnNlSnVsaWFuRGF5KGRbMF0pKSA6IHgoKGkgKiA4KSArIDMgKSk7IH0pXG4gICAgICAgIC55KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIChBcnJheS5pc0FycmF5KGQpID8geShkWzFdKSA6IHkoZCkpOyB9KTtcblxuICAgIHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KGRpdikuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJvdmVybGFwcGluZy1ncmFwaFwiLCB0cnVlKTtcblxuICAgIC8vIEFkZHMgdGhlIHN2ZyBjYW52YXNcbiAgICB2YXIgc3ZnID0gd3JhcHBlclxuICAgICAgICAuYXBwZW5kKFwic3ZnXCIpXG4gICAgICAgICAgICAuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdyA9IHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHRcbiAgICAgICAgICAgICAgICB2YXIgaCA9IGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tXG4gICAgICAgICAgICAgICAgcmV0dXJuICcwIDAgJyArIHcgKyAnICcgKyBoXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKVxuICAgICAgICAgICAgLy8uYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXG4gICAgICAgICAgICAvLy5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKVxuICAgICAgICAuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIixcbiAgICAgICAgICAgICAgICAgIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XG5cbiAgICBzdmcuY2FsbCh0aXApO1xuXG4gICAgLy8gQWRkIHRoZSBYIEF4aXNcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieCBheGlzXCIpXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIilcbiAgICAgICAgLmNhbGwoeEF4aXMpO1xuXG4gICAgLy8gQWRkIHRoZSBZIEF4aXNcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpXG4gICAgICAgIC5jYWxsKHlBeGlzKTtcblxuICAgIHZhciBwbG90LCBpLCBsO1xuICAgIGZvciAoaSA9IDAsIGwgPSBwb2kucGxvdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHBsb3QgPSBwb2kucGxvdHNbaV07XG4gICAgICAgIGlmIChwbG90ID09PSBcInRocmVzaG9sZHNcIikgY29udGludWU7XG4gICAgICAgIGNoYXJ0c1twbG90XSA9IHtcbiAgICAgICAgICAgIFwicGF0aFwiIDogZHJhd0xpbmVhclBhdGgoZGF0YVtwbG90XSwgdmFsdWVsaW5lLCBzdmcpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxuICAgICAqL1xuICAgIGZvciAoaSA9IDAsIGwgPSBwb2kucGxvdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHBsb3QgPSBwb2kucGxvdHNbaV07XG4gICAgICAgIGlmIChwbG90ID09PSBcInRocmVzaG9sZHNcIikgY29udGludWU7XG4gICAgICAgIGNoYXJ0c1twbG90XS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbcGxvdF0sIHZhbHVlbGluZSwgc3ZnKTtcbiAgICB9XG5cbiAgICB2YXIgaW5wdXR3cmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcImlucHV0LXdyYXBwZXJcIiwgdHJ1ZSk7XG5cbiAgICBkYXRhLmtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwga2V5LCBcIm92ZXJsYXBwaW5nXCIsIHBvaSwgY2hhcnRzLCBkYXRhLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuICAgIH0pO1xuXG4gICAgY3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBcImJhc2VsaW5lXCIsIFwib3ZlcmxhcHBpbmdcIiwgcG9pLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gUE9MQVIgR1JBUEggLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzIChkYXRhLCBkaXYsIHBvaSkge1xuICAgIHZhciB3aWR0aCA9IDQ5MCxcbiAgICAgICAgaGVpZ2h0ID0gNDkwLFxuICAgICAgICByYWRpdXMgPSBNYXRoLm1pbih3aWR0aCwgaGVpZ2h0KSAvIDIgLSAzMDtcblxuICAgIHZhciBhdmVyYWdlcyA9IGRhdGFbXCJiYXNlbGluZVwiXTtcbiAgICB2YXIgY2VudGVyID0gZmluZFBvbGFyQ2VudGVyKGRhdGEpO1xuICAgIHZhciB0aHJlc2hvbGRzID0gZmluZFBvbGFyVGhyZXNob2xkcyhhdmVyYWdlcywgY2VudGVyWzFdWzBdKTtcblxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgc2NhbGluZyBvZiBkYXRhLiBXZSBrbm93IHRoYXQgdGhlIG5kdmkgdmFsdWVzIGZhbGwgYmV0d2VlblxuICAgICAqIDAgJiAxMDAgc28gd2Ugc2V0IG91ciBkb21haW4gdG8gdGhhdC4gVGhlIHJhbmdlIGNvbnRyb2xzIHdoZXJlIHRoZVxuICAgICAqIHBvaW50cyB3aWxsIGxpZSBpbiBvdXIgZ3JhcGgsIHNvIHdlIHNldCB0aGVtIHRvIGJlIGJldHdlZW4gMCBhbmQgdGhlXG4gICAgICogcmFkaXVzLlxuICAgICAqL1xuICAgIHZhciByID0gZDMuc2NhbGVMaW5lYXIoKVxuICAgICAgICAuZG9tYWluKFswLCAxMDBdKVxuICAgICAgICAucmFuZ2UoWzAsIHJhZGl1c10pO1xuXG4gICAgLyoqXG4gICAgICogZnVuY3Rpb24gd2hpY2ggd2lsbCBkcmF3IGVhY2ggcG9pbnQuIFRvIGNvbXB1dGUgdGhlIGRpc3RhbmNlIGZyb20gdGhlXG4gICAgICogY2VudGVyIGVhY2ggcG9pbnQgaXMgd2UgcGFzcyB0aGUgZGF0YXBvaW50IHRvIHRoZSBmdW5jdGlvbiBkZWZpbmVkIGFib3ZlLlxuICAgICAqIFRvIGRldGVybWluZSB0aGUgYW5nbGUgZnJvbSB0aGUgb3JpZ2luIHdlIG5lZWQgdG8gY29udmVydCB0aGUgZGF5IHRvXG4gICAgICogcmFkaWFucywgc28gd2UgY29udmVydCB0aGUgZGF5IHRvIGEgbnVtYmVyIGJldHdlZW4gMCAmIDEgYW5kIHRoZW4gbXVsdGlwbHlcbiAgICAgKiBpdCBieSAyIHBpLlxuICAgICAqL1xuICAgIHZhciBsaW5lID0gZDMucmFkaWFsTGluZSgpXG4gICAgICAgIC5yYWRpdXMoZnVuY3Rpb24oZCkgeyByZXR1cm4gQXJyYXkuaXNBcnJheShkKSA/IHIoZFsxXSkgOiByKGQpOyB9KVxuICAgICAgICAuYW5nbGUoZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgdmFyIGRheSA9IEFycmF5LmlzQXJyYXkoZCkgPyBwYXJzZUp1bGlhbkRheShkWzBdKSA6IChpICogOCkgKyAzO1xuICAgICAgICAgICAgcmV0dXJuICgoKChkYXkgLSAxKSUzNjUpLzM2NSkgKiAoMipNYXRoLlBJKSk7XG4gICAgICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogU2V0cyB1cCB0aGUgY2FudmFzIHdoZXJlIHRoZSBjaXJjbGUgd2lsbCBiZSBkcmF3bi5cbiAgICAgKi9cbiAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwicG9sYXItZ3JhcGhcIiwgdHJ1ZSk7XG4gICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpXG4gICAgICAgIC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAgLy8uYXR0cihcImhlaWdodFwiLCBoZWlnaHQpXG4gICAgICAgIC5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICcwIDAgJysgd2lkdGggKyAnICcgKyBoZWlnaHRcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKVxuICAgICAgICAuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHdpZHRoIC8gMiArIFwiLFwiICsgaGVpZ2h0IC8gMiArIFwiKVwiKTtcblxuICAgIHN2Zy5jYWxsKHRpcCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGJpZyBjaXJjbGVzIG9mIHRoZSBncmFwaCAmIHRoZWlyIGxhYmVsc1xuICAgICAqL1xuICAgIHZhciBnciA9IHN2Zy5hcHBlbmQoXCJnXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJyIGF4aXNcIilcbiAgICAgICAgLnNlbGVjdEFsbChcImdcIilcbiAgICAgICAgLmRhdGEoci50aWNrcyg1KS5zbGljZSgxKSlcbiAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwiZ1wiKTtcblxuICAgIGdyLmFwcGVuZChcImNpcmNsZVwiKVxuICAgICAgICAuYXR0cihcInJcIiwgcik7XG5cbiAgICBnci5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgIC5hdHRyKFwieVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiAtcihkKSAtIDQ7IH0pXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwicm90YXRlKDE1KVwiKVxuICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxuICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBkOyB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgbGFiZWxzIGZvciBlYWNoIG1vbnRoIGFuZCB0aGUgbGluZXNcbiAgICAgKiB0aGF0IGdvIG91dCB0byB0aGVtLlxuICAgICAqL1xuICAgIHZhciBnYV9hID0gc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImEgYXhpc1wiKVxuICAgICAgICAuc2VsZWN0QWxsKFwiZ1wiKVxuICAgICAgICAuZGF0YShkMy5yYW5nZSgwLCAzNjAsIDMwKSlcbiAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJyb3RhdGUoXCIgKyAoZCAtIDkwKSArIFwiKVwiOyB9KTtcblxuICAgIGdhX2EuYXBwZW5kKFwibGluZVwiKVxuICAgICAgICAuYXR0cihcIngyXCIsIHJhZGl1cyk7XG5cbiAgICBnYV9hLmFwcGVuZChcInRleHRcIilcbiAgICAgICAgLmF0dHIoXCJ4XCIsIHJhZGl1cyArIDYpXG4gICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKVxuICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkIDwgMzYwICYmIGQgPiAxODAgPyBcImVuZFwiIDogbnVsbDsgfSlcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7IH0pXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIE1PTlRIX0xBQkVMU1tkLzMwXTsgfSk7XG5cbiAgICAvKipcbiAgICAgKiBEcmF3cyB0aGUgdGhyZXNob2xkIGxpbmVzXG4gICAgICovXG4gICAgdmFyIHRocmVzaG9sZEVsZW0gPSBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuc2VsZWN0QWxsKFwiZ1wiKVxuICAgICAgICAuZGF0YSh0aHJlc2hvbGRzKVxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInJvdGF0ZShcIiArIChkLmRhdGFbMV1bMF0gLSA5MCkgKyBcIilcIjsgfSk7XG5cbiAgICB0aHJlc2hvbGRFbGVtLmFwcGVuZChcImxpbmVcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIilcbiAgICAgICAgLmF0dHIoXCJ4MlwiLCByYWRpdXMpO1xuXG4gICAgdGhyZXNob2xkRWxlbS5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgIC5hdHRyKFwieFwiLCBmdW5jdGlvbiAoZCkgeyB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdOyByZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IHJhZGl1cyArIDMwIDogcmFkaXVzIC0gMzB9KVxuICAgICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuICgoKChkLmRhdGFbMV1bMF0pJTM2NSkvMzY1KSAqICgyKk1hdGguUEkpKSArIDY7IH0pXG4gICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKVxuICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbihkKSB7IHZhciBkYXkgPSBkLmRhdGFbMV1bMF07IHJldHVybiBkYXkgPCAzNjAgJiYgZGF5ID4gMTgwID8gXCJtaWRkbGVcIiA6IG51bGw7IH0pXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgdmFyIGRheSA9IGQuZGF0YVsxXVswXTsgcmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyBcInJvdGF0ZSgxODAgXCIgKyAocmFkaXVzICsgNikgKyBcIiwwKVwiIDogbnVsbDsgfSlcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5sYWJlbDsgfSk7XG5cbiAgICB0aHJlc2hvbGRFbGVtLnN0eWxlKFwib3BhY2l0eVwiLCAocG9pLnBsb3RzLmluZGV4T2YoXCJ0aHJlc2hvbGRzXCIpICE9PSAtMSkgPyAxIDogMCk7XG5cbiAgICAvKipcbiAgICAgKiBEcmF3cyB0aGUgbGluZSB0byB0aGUgY2VudGVyIG9mIHRoZSBkYXRhXG4gICAgICovXG4gICAgdmFyIGNlbnRlckRheSA9IGNlbnRlclsxXVswXTtcbiAgICB2YXIgY2VudGVyRGF5T3Bwb3NpdGUgPSAoY2VudGVyRGF5ICsgKDM2NS8yKSkgJSAzNjU7XG4gICAgdmFyIGNlbnRlckRheURhdGEgPSBbY2VudGVyRGF5LCAxMDBdO1xuICAgIHZhciBjZW50ZXJEYXlPcHBvc2l0ZURhdGEgPSBbY2VudGVyRGF5T3Bwb3NpdGUsIDEwMF07XG4gICAgdmFyIGdyb3dpbmdTZWFzb25EYXRhID0gW2NlbnRlckRheURhdGEsIGNlbnRlckRheU9wcG9zaXRlRGF0YV1cblxuICAgIGRyYXdQb2xhclBhdGgoZ3Jvd2luZ1NlYXNvbkRhdGEsIGxpbmUsIHN2ZylcbiAgICAgICAgLmNsYXNzZWQoXCJncm93aW5nLXNlYXNvbi1saW5lXCIsIFwidHJ1ZVwiKTtcblxuICAgIGRyYXdQb2xhclBhdGgoY2VudGVyLCBsaW5lLCBzdmcpXG4gICAgICAgIC5jbGFzc2VkKFwiY2VudGVyLWxpbmVcIiwgXCJ0cnVlXCIpO1xuXG4gICAgc3ZnLnNlbGVjdEFsbChcInBvaW50XCIpXG4gICAgICAgIC5kYXRhKFtjZW50ZXJbMV1dKVxuICAgICAgICAuZW50ZXIoKVxuICAgICAgICAuYXBwZW5kKFwiY2lyY2xlXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJjZW50ZXJcIilcbiAgICAgICAgLmF0dHIoXCJyXCIsIDQpXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHZhciBjb29ycyA9IGxpbmUoW2RdKS5zbGljZSgxKS5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBjb29ycyArIFwiKVwiXG4gICAgICAgIH0pXG4gICAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwiIzAwMFwiKVxuICAgICAgICAuYXR0cihcImZpbGxcIiwgXCIjZWEwYzQ4XCIpXG4gICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICB0aXAuc2hvdyhcIkNlbnRlcjogXCIgICsgU3RyaW5nKGRbMV0pLnN1YnN0cmluZygwLCA3KSk7XG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgNSlcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIHRpcC5oaWRlKCk7XG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgNClcbiAgICAgICAgfSk7XG5cbiAgICB2YXIgY2hhcnRzID0ge307XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGxpbmUgdGhhdCB0aGUgZGF0YSBmb2xsb3dzXG4gICAgICovXG4gICAgdmFyIHBsb3QsIGksIGw7XG4gICAgZm9yIChpID0gMCwgbCA9IHBvaS5wbG90cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgcGxvdCA9IHBvaS5wbG90c1tpXTtcbiAgICAgICAgaWYgKHBsb3QgPT09IFwidGhyZXNob2xkc1wiKSBjb250aW51ZTtcbiAgICAgICAgY2hhcnRzW3Bsb3RdID0ge1xuICAgICAgICAgICAgXCJwYXRoXCIgOiBkcmF3UG9sYXJQYXRoKGRhdGFbcGxvdF0sIGxpbmUsIHN2ZylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XG4gICAgICovXG4gICAgZm9yIChpID0gMCwgbCA9IHBvaS5wbG90cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgcGxvdCA9IHBvaS5wbG90c1tpXTtcbiAgICAgICAgaWYgKHBsb3QgPT09IFwidGhyZXNob2xkc1wiKSBjb250aW51ZTtcbiAgICAgICAgY2hhcnRzW3Bsb3RdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtwbG90XSwgbGluZSwgc3ZnKTtcbiAgICB9XG5cbiAgICB2YXIgaW5wdXR3cmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcImlucHV0LXdyYXBwZXJcIiwgdHJ1ZSk7XG5cbiAgICBkYXRhLmtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwga2V5LCBcInBvbGFyXCIsIHBvaSwgY2hhcnRzLCBkYXRhLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcbiAgICB9KTtcblxuICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwgXCJiYXNlbGluZVwiLCBcInBvbGFyXCIsIHBvaSwgY2hhcnRzLCBkYXRhLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblxuICAgIHZhciB0aHJlc2hvbGRDaGVja2JveD0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKVxuICAgICAgICAuY2xhc3NlZChcInRocmVzaG9sZC1jaGVja2JveFwiLCB0cnVlKTtcblxuICAgIHRocmVzaG9sZENoZWNrYm94LmFwcGVuZChcImlucHV0XCIpXG4gICAgICAgIC5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpXG4gICAgICAgIC5hdHRyKFwiaWRcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBwb2kubGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIHBvaS5sbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcbiAgICAgICAgLnByb3BlcnR5KFwiY2hlY2tlZFwiLCBwb2kucGxvdHMuaW5kZXhPZihcInRocmVzaG9sZHNcIikgIT09IC0xKVxuICAgICAgICAub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRocmVzaG9sZEVsZW0uc3R5bGUoXCJvcGFjaXR5XCIsICh0aGlzLmNoZWNrZWQpID8gMSA6IDApO1xuICAgICAgICAgICAgdmFyIG9mZm9uID0gdGhpcy5jaGVja2VkID8gJ29mZicgOiAnb24nO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgYWRkS2V5VG9QT0kocG9pLCBcInRocmVzaG9sZHNcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlbW92ZUtleUZyb21QT0kocG9pLCBcInRocmVzaG9sZHNcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHVwZGF0ZVNoYXJlVXJsKCk7XG4gICAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBncmFwaCB0aHJlc2hvbGQgY2xpY2sgb2ZmXG4gICAgICAgICAgICBkaXNwYXRjaEdyYXBoQ2hlY2tib3hDbGljaygndGhyZXNob2xkIHBvbGFyIHRpbWVzZXJpZXMgJyArIG9mZm9uKTtcbiAgICAgICAgfSk7XG5cbiAgICB0aHJlc2hvbGRDaGVja2JveC5hcHBlbmQoXCJsYWJlbFwiKVxuICAgICAgICAudGV4dChcIlRocmVzaG9sZHNcIilcbiAgICAgICAgLmF0dHIoXCJmb3JcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBwb2kubGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIHBvaS5sbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG59XG5cbi8qIFBPTEFSIEdSQVBIIEhFTFBFUlMgKi9cblxuZnVuY3Rpb24gZmluZFBvbGFyQ2VudGVyIChkYXRhKSB7XG4gICAgdmFyIGksIGosIGxlbmd0aCwgYXJyO1xuICAgIHZhciB0b3RhbFN1bSA9IDA7XG4gICAgdmFyIGluY29tcGxldGVZZWFycyA9IDA7XG4gICAgdmFyIHN1bTtcbiAgICBsZW5ndGggPSA0NjtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJyID0gZGF0YVtkYXRhLmtleXNbaV1dO1xuICAgICAgICBpZiAoYXJyLmxlbmd0aCAhPT0gbGVuZ3RoKSB7XG4gICAgICAgICAgICBpbmNvbXBsZXRlWWVhcnMrKztcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHN1bSA9IDA7XG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBsZW5ndGgvMjsgaisrKSB7XG4gICAgICAgICAgICBzdW0gKz0gKGFycltqXVsxXSAtIGFycltqKzIzXVsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgc3VtID0gc3VtIC8gMjM7XG4gICAgICAgIHRvdGFsU3VtICs9IHN1bTtcbiAgICB9XG4gICAgdG90YWxTdW0gPSBNYXRoLmFicyh0b3RhbFN1bSkgLyAoZGF0YS5rZXlzLmxlbmd0aCAtIGluY29tcGxldGVZZWFycyk7XG5cbiAgICB2YXIgYXJlYURpZmYgPSAxMDAwMDAwO1xuICAgIHZhciBjaGVja0RpZmY7XG4gICAgdmFyIGFyZWFJbmRleCA9IDA7XG4gICAgdmFyIGxlZnRBcmVhLCByaWdodEFyZWE7XG4gICAgdmFyIGF2Z3MgPSBkYXRhLmJhc2VsaW5lO1xuICAgIHZhciBrLCBjb3VudGVyO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aC8yOyBpKyspIHtcbiAgICAgICAgbGVmdEFyZWEgPSAwO1xuICAgICAgICByaWdodEFyZWEgPSAwO1xuICAgICAgICBmb3IgKGNvdW50ZXIgPSAwOyBjb3VudGVyIDwgbGVuZ3RoLzI7IGNvdW50ZXIrKykge1xuICAgICAgICAgICAgaiA9IChpICsgY291bnRlcikgJSA0NjtcbiAgICAgICAgICAgIGsgPSAoaiArIDIzKSAlIDQ2O1xuXG4gICAgICAgICAgICBsZWZ0QXJlYSArPSBwYXJzZUludChhdmdzW2pdLCAxMCk7XG4gICAgICAgICAgICByaWdodEFyZWEgKz0gcGFyc2VJbnQoYXZnc1trXSwxMCk7XG4gICAgICAgIH1cbiAgICAgICAgY2hlY2tEaWZmID0gTWF0aC5hYnMobGVmdEFyZWEgLSByaWdodEFyZWEpO1xuICAgICAgICBpZiAoY2hlY2tEaWZmIDwgYXJlYURpZmYpIHtcbiAgICAgICAgICAgIGFyZWFEaWZmID0gY2hlY2tEaWZmO1xuICAgICAgICAgICAgYXJlYUluZGV4ID0gaTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBmaXJzdFJhZGl1cyA9IHBhcnNlSW50KGF2Z3NbYXJlYUluZGV4XSwgMTApO1xuICAgIHZhciBzZWNvbmRSYWRpdXMgPSBwYXJzZUludCgtYXZnc1thcmVhSW5kZXggKyAyM10sIDEwKTtcblxuICAgIHZhciBtaWRwb2ludCA9IChmaXJzdFJhZGl1cyArIHNlY29uZFJhZGl1cykgLyAyO1xuICAgIHZhciBmaXJzdERpZmYgPSBNYXRoLmFicyh0b3RhbFN1bSAtIG1pZHBvaW50KTtcbiAgICB2YXIgc2Vjb25kRGlmZiA9IE1hdGguYWJzKC10b3RhbFN1bSAtIG1pZHBvaW50KTtcbiAgICBpZiAoc2Vjb25kRGlmZiA8IGZpcnN0RGlmZikge1xuICAgICAgICBhcmVhSW5kZXggPSBhcmVhSW5kZXggKyAyMztcbiAgICB9XG5cbiAgICB2YXIgY2lyY2xlY2VudGVyID0gWzAsIDBdO1xuICAgIHZhciBkYXRhY2VudGVyID0gWyhhcmVhSW5kZXggKiA4KSArIDMsIHRvdGFsU3VtXTtcblxuICAgIHJldHVybihbY2lyY2xlY2VudGVyLCBkYXRhY2VudGVyXSk7XG59XG5cbi8qKlxuICogc3RhcnREYXkgaXMgYWN0dWFsbHkgdGhlIHNlYXNvbmFsaXR5IGluZGV4LCBpdCBzaG91bGQgYmUgZmxpcHBlZFxuICovXG5mdW5jdGlvbiBmaW5kUG9sYXJUaHJlc2hvbGRzIChkYXRhLCBzdGFydERheSkge1xuICAgIHZhciBzdGFydEluZGV4ID0gTWF0aC5mbG9vcigoc3RhcnREYXkgLSAzKSAvIDgpO1xuICAgIHN0YXJ0SW5kZXggKz0gKHN0YXJ0SW5kZXggPiAyMikgPyAoLTIzKSA6IDIzO1xuICAgIHZhciBpLCBqLCBsZW5ndGgsIGFycjtcbiAgICB2YXIgdG90YWxTdW0gPSAwO1xuICAgIHZhciBzdW07XG4gICAgbGVuZ3RoID0gNDY7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaiA9IChzdGFydEluZGV4ICsgaSkgJSBsZW5ndGg7XG4gICAgICAgIHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcbiAgICB9XG5cbiAgICB2YXIgZmlmdGVlblRocmVzaG9sZCA9IHRvdGFsU3VtICogLjE1O1xuICAgIHZhciBlaWdodHlUaHJlc2hvbGQgPSB0b3RhbFN1bSAqIC44MDtcbiAgICB2YXIgZmlmdGVlbkluZGV4Rm91bmQgPSBmYWxzZSxcbiAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IGZhbHNlO1xuICAgIHZhciBmaWZ0ZWVuSW5kZXgsIGVpZ2h0eUluZGV4O1xuXG4gICAgdG90YWxTdW0gPSAwO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBqID0gKHN0YXJ0SW5kZXggKyBpKSAlIGxlbmd0aDtcbiAgICAgICAgdG90YWxTdW0gKz0gcGFyc2VJbnQoZGF0YVtqXSwgMTApO1xuICAgICAgICBpZiAoIWZpZnRlZW5JbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZmlmdGVlblRocmVzaG9sZCkge1xuICAgICAgICAgICAgZmlmdGVlbkluZGV4ID0gajtcbiAgICAgICAgICAgIGZpZnRlZW5JbmRleEZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZWlnaHR5SW5kZXhGb3VuZCAmJiB0b3RhbFN1bSA+IGVpZ2h0eVRocmVzaG9sZCkge1xuICAgICAgICAgICAgZWlnaHR5SW5kZXggPSBqO1xuICAgICAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBjaXJjbGVDZW50ZXIgPSBbMCwgMF07XG5cbiAgICB2YXIgZmlmdGVlbkVuZCA9IFsoZmlmdGVlbkluZGV4ICogOCkgKyAzLCAxMDBdO1xuICAgIHZhciBlaWdodHlFbmQgPSBbKGVpZ2h0eUluZGV4ICogOCkgKyAzLCAxMDBdO1xuXG4gICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgICAgXCJsYWJlbFwiIDogXCIxNSVcIixcbiAgICAgICAgICAgIFwiZGF0YVwiIDogW2NpcmNsZUNlbnRlciwgZmlmdGVlbkVuZF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgXCJsYWJlbFwiIDogXCI4MCVcIixcbiAgICAgICAgICAgIFwiZGF0YVwiIDogW2NpcmNsZUNlbnRlciwgZWlnaHR5RW5kXVxuICAgICAgICB9XG4gICAgXTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIEhFTFBFUlMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gZHJhd0xpbmVhclBhdGgoZGF0YSwgbGluZSwgc3ZnKSB7XG4gICAgcmV0dXJuIHN2Zy5hcHBlbmQoXCJwYXRoXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpXG4gICAgICAgIC5hdHRyKFwiZFwiLCBsaW5lKGRhdGEpKTtcbn1cblxuZnVuY3Rpb24gZHJhd1BvbGFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcbiAgICByZXR1cm4gc3ZnLmFwcGVuZChcInBhdGhcIilcbiAgICAgICAgLmRhdHVtKGRhdGEpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpXG4gICAgICAgIC5hdHRyKFwiZFwiLCBsaW5lKTtcbn1cblxuZnVuY3Rpb24gZHJhd0xpbmVhclBvaW50cyhkYXRhLCBsaW5lLCBzdmcpIHtcbiAgICByZXR1cm4gc3ZnLnNlbGVjdEFsbChcInBvaW50XCIpXG4gICAgICAgIC5kYXRhKGRhdGEpXG4gICAgICAgIC5lbnRlcigpXG4gICAgICAgIC5hcHBlbmQoXCJjaXJjbGVcIilcbiAgICAgICAgLmF0dHIoXCJyXCIsIDIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJwb2ludFwiKVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICB2YXIgcG9pbnQgPSBBcnJheS5pc0FycmF5KGQpID8gZCA6IFsoaSo4KSArIDMsIGRdO1xuICAgICAgICAgICAgdmFyIGNvb3JzID0gbGluZShbcG9pbnRdKS5zbGljZSgxKS5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBjb29ycyArIFwiKVwiXG4gICAgICAgIH0pXG4gICAgICAgIC8vLmF0dHIoXCJyXCIsIDMpXG4gICAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwiIzAwMFwiKVxuICAgICAgICAuYXR0cihcImZpbGxcIixmdW5jdGlvbihkLGkpe1xuICAgICAgICAgICAgdmFyIHZhbCA9IEFycmF5LmlzQXJyYXkoZCkgPyBkWzBdLnN1YnN0cmluZygwLCA0KSA6IDA7XG4gICAgICAgICAgICByZXR1cm4gcHVsbERpc3RpbmN0Q29sb3IodmFsKVxuICAgICAgICB9KVxuICAgICAgICAub24oXCJtb3VzZW92ZXJcIiwgaGFuZGxlUG9pbnRNb3VzZW92ZXIpXG4gICAgICAgIC5vbihcIm1vdXNlb3V0XCIsIGhhbmRsZVBvaW50TW91c2VvdXQpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVQb2ludE1vdXNlb3ZlcihkKSB7XG4gICAgdmFyIHRpcFN0cmluZyA9IEFycmF5LmlzQXJyYXkoZCkgPyBmb3JtYXREYXRlKGRbMF0pICsgXCI6IFwiICArIGRbMV0gOiBcIkF2ZXJhZ2U6IFwiICArIGQ7XG4gICAgdGlwLnNob3codGlwU3RyaW5nKTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgXCI0XCIpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVQb2ludE1vdXNlb3V0KGQpIHtcbiAgICB0aXAuaGlkZSgpO1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCBcIjJcIik7XG5cbiAgICB2YXIgYWN0aXZlVHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF0uZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKTtcblxuICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvb2wgdGlwIG9uIGdyYXBoIGRvIHRoaXMgb24gdGhlIG1vdXNlb3V0IHNvIG1vdXNlb3ZlciBkb3NlIG5vdCBkbyBhIGxvdCBvZiBldmVudHMuLi4uXG4gICAgLy8gd2UgbWlzcyBhIGZldyBidXQgdGhhdCBpcyBiZXR0ZXIgdGhhbiBvdmVyIGNvdW50aW5nLlxuICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcbiAgICAgIGV2ZW50QWN0aW9uOiAnaG92ZXInLFxuICAgICAgZXZlbnRMYWJlbDogYWN0aXZlVHlwZSArICcgdG9vbCB0aXAnLFxuICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNoZWNrYm94KHdyYXBwZXIsIGtleSwgdHlwZSwgcG9pLCBjaGFydHMsIGRhdGEsIGxpbmUsIHN2ZywgYXZlcmFnZXMpIHtcbiAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIik7XG4gICAgdmFyIGxhdCA9IHBvaS5sYXQ7XG4gICAgdmFyIGxuZyA9IHBvaS5sbmc7XG5cbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIilcbiAgICAgICAgLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIilcbiAgICAgICAgLmF0dHIoXCJpZFwiLCB0eXBlICsgXCItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpXG4gICAgICAgIC5hdHRyKFwiZGF0YS1saW5rXCIsIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcbiAgICAgICAgLmF0dHIoXCJ2YWx1ZVwiLCBrZXkpXG4gICAgICAgIC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgKHBvaS5wbG90cy5pbmRleE9mKGtleSkgIT09IC0xKSA/IHRydWUgOiBmYWxzZSlcbiAgICAgICAgLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgbmV3WWVhciA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIGhhbmRsZUNoZWNrYm94RGlzYWJsZShjaGFydHMsIG5ld1llYXIpO1xuICAgICAgICAgICAgICAgIHJlbW92ZUtleUZyb21QT0kocG9pLCBrZXkpO1xuICAgICAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGdyYXBoIHllYXIgY2xpY2sgb2ZmXG4gICAgICAgICAgICAgICAgZGlzcGF0Y2hHcmFwaENoZWNrYm94Q2xpY2sobmV3WWVhciArICcgJyArIHR5cGUgKyAnIHRpbWVzZXJpZXMgb2ZmJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGhhbmRsZUNoZWNrYm94RW5hYmxlKGNoYXJ0cywgbmV3WWVhciwgZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG4gICAgICAgICAgICAgICAgYWRkS2V5VG9QT0kocG9pLCBrZXkpO1xuICAgICAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGdyYXBoIHllYXIgY2xpY2sgb25cbiAgICAgICAgICAgICAgICBkaXNwYXRjaEdyYXBoQ2hlY2tib3hDbGljayhuZXdZZWFyICsgJyAnICsgdHlwZSArICcgdGltZXNlcmllcyBvbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGFuZGxlQ2hlY2tib3hTeW5jKGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSwgdGhpcy5jaGVja2VkKTtcbiAgICAgICAgICAgIHVwZGF0ZVNoYXJlVXJsKCk7XG4gICAgICAgIH0pO1xuXG4gICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImxhYmVsXCIpXG4gICAgICAgIC50ZXh0KGtleSAhPT0gXCJiYXNlbGluZVwiID8ga2V5IDogXCJCYXNlbGluZVwiKVxuICAgICAgICAuYXR0cihcImZvclwiLCB0eXBlICsgXCItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuXG4gICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImRpdlwiKVxuICAgICAgICAuc3R5bGUoXCJiYWNrZ3JvdW5kXCIsIHB1bGxEaXN0aW5jdENvbG9yKGtleSAhPT0gXCJiYXNlbGluZVwiID8ga2V5IDogMCkpXG4gICAgICAgIC5jbGFzc2VkKFwiZ3JhcGgtcGlwLWV4YW1wbGVcIiwgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNoZWNrYm94RGlzYWJsZSAoY2hhcnRzLCBuZXdZZWFyKSB7XG4gICAgY2hhcnRzW25ld1llYXJdLnBhdGgucmVtb3ZlKCk7XG4gICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2hlY2tib3hFbmFibGUgKGNoYXJ0cywgbmV3WWVhciwgZGF0YSwgbGluZSwgc3ZnKSB7XG4gICAgaWYgKCFjaGFydHMuaGFzT3duUHJvcGVydHkobmV3WWVhcikpIHtcbiAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG4gICAgfVxuICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd0xpbmVhclBhdGgoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnKTtcbiAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDaGVja2JveFN5bmMgKGtleSwgY2hlY2tlZFN0YXR1cywgd3JhcHBlcikge1xuICAgIGQzLnNlbGVjdEFsbChcImlucHV0W2RhdGEtbGluaz0nXCIgKyBrZXkgKyBcIiddXCIpLmVhY2goZnVuY3Rpb24gKHAsIGopIHtcbiAgICAgICAgdmFyIGVsZW0gPSBkMy5zZWxlY3QodGhpcyk7XG4gICAgICAgIGlmIChlbGVtLnByb3BlcnR5KFwiY2hlY2tlZFwiKSAhPT0gY2hlY2tlZFN0YXR1cykge1xuICAgICAgICAgICAgZWxlbS5wcm9wZXJ0eShcImNoZWNrZWRcIiwgY2hlY2tlZFN0YXR1cyk7XG4gICAgICAgICAgICBlbGVtLmRpc3BhdGNoKFwiY2hhbmdlXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUtleUZyb21QT0kgKHBvaSwga2V5KSB7XG4gICAgdmFyIGluZGV4ID0gcG9pLnBsb3RzLmluZGV4T2Yoa2V5KTtcbiAgICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm47XG4gICAgcG9pLnBsb3RzLnNwbGljZShpbmRleCwgMSk7XG59XG5cbmZ1bmN0aW9uIGFkZEtleVRvUE9JIChwb2ksIGtleSkge1xuICAgIGlmIChwb2kucGxvdHMuaW5kZXhPZihrZXkpICE9PSAtMSkgcmV0dXJuO1xuICAgIHBvaS5wbG90cy5wdXNoKGtleSk7XG59XG5cbmZ1bmN0aW9uIGRpc3BhdGNoR3JhcGhDaGVja2JveENsaWNrIChsYWJlbCkge1xuICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxuICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcbiAgICAgICAgZXZlbnRMYWJlbDogIGxhYmVsLFxuICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gcHVsbERpc3RpbmN0Q29sb3IgKHllYXIpIHtcbiAgICB2YXIgY29sb3JSYW1wID0gW1xuICAgICAgICBcIiNmZmU0NzZcIixcbiAgICAgICAgXCIjMDM2NTkzXCIsXG4gICAgICAgIFwiIzExNmM5MVwiLFxuICAgICAgICBcIiMxZTczOTBcIixcbiAgICAgICAgXCIjMmM3YjhlXCIsXG4gICAgICAgIFwiIzM5ODI4Y1wiLFxuICAgICAgICBcIiM0YzhjOGFcIixcbiAgICAgICAgXCIjNWU5NTg5XCIsXG4gICAgICAgIFwiIzcxOWY4N1wiLFxuICAgICAgICBcIiM4M2E4ODZcIixcbiAgICAgICAgXCIjOTViMTgzXCIsXG4gICAgICAgIFwiI2E2YmE4MFwiLFxuICAgICAgICBcIiNiOGMzN2NcIixcbiAgICAgICAgXCIjY2FjYzc5XCIsXG4gICAgICAgIFwiI2Q2ZDI3OVwiLFxuICAgICAgICBcIiNlMmQ3NzlcIixcbiAgICAgICAgXCIjZWZkZDc4XCIsXG4gICAgICAgIFwiI2ZiZTM3OFwiXG4gICAgXTtcblxuICAgIHJldHVybiAoeWVhciA9PT0gMCkgPyBcIiNmZmZcIiA6IGNvbG9yUmFtcFtwYXJzZUludCh5ZWFyLCAxMCkgJSBjb2xvclJhbXAubGVuZ3RoXTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBEQVRFIEhFTFBFUlMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIHBhcnNlRGF0ZSAoZGF0ZSkge1xuICAgIGRhdGUgPSBkYXRlLnRvU3RyaW5nKCk7XG4gICAgdmFyIHllYXIgPSBkYXRlLnN1YnN0cmluZygwLCA0KTtcbiAgICB2YXIgbW9udGggPSBwYXJzZUludChkYXRlLnN1YnN0cmluZyg0LCA2KSwgMTApIC0gMTtcbiAgICB2YXIgZGF5ID0gZGF0ZS5zdWJzdHJpbmcoNiwgOCk7XG5cbiAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlSnVsaWFuRGF5IChkYXRlKSB7XG4gICAgaWYgKHR5cGVvZihkYXRlKSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBkYXRlID0gcGFyc2VEYXRlKGRhdGUpO1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXRET1koKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdERhdGUgKGRhdGUpIHtcbiAgICBpZiAoZGF0ZSA9PT0gXCJBdmVyYWdlXCIpIHsgcmV0dXJuIGRhdGU7IH1cblxuICAgIGRhdGUgPSBwYXJzZURhdGUoZGF0ZSk7XG4gICAgcmV0dXJuIGZvcm1hdE1vbnRoKGRhdGUuZ2V0TW9udGgoKSkgKyBcIiBcIiArIG9yZGluYWxfc3VmZml4X29mKGRhdGUuZ2V0RGF0ZSgpKSArIFwiLCBcIiArIGRhdGUuZ2V0RnVsbFllYXIoKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TW9udGggKG1vbnRoKSB7XG4gICAgcmV0dXJuIEZPUk1BVFRFRF9NT05USF9MQUJFTFNbbW9udGhdO1xufVxuXG5mdW5jdGlvbiBvcmRpbmFsX3N1ZmZpeF9vZihkYXkpIHtcbiAgICB2YXIgaiA9IGRheSAlIDEwLFxuICAgICAgICBrID0gZGF5ICUgMTAwO1xuICAgIGlmIChqID09PSAxICYmIGsgIT09IDExKSB7XG4gICAgICAgIHJldHVybiBkYXkgKyBcInN0XCI7XG4gICAgfVxuICAgIGlmIChqID09PSAyICYmIGsgIT09IDEyKSB7XG4gICAgICAgIHJldHVybiBkYXkgKyBcIm5kXCI7XG4gICAgfVxuICAgIGlmIChqID09PSAzICYmIGsgIT09IDEzKSB7XG4gICAgICAgIHJldHVybiBkYXkgKyBcInJkXCI7XG4gICAgfVxuICAgIHJldHVybiBkYXkgKyBcInRoXCI7XG59XG5cbnZhciBNT05USF9MQUJFTFMgPSB7XG4gICAgMDogXCJKYW5cIixcbiAgICAxOiBcIkZlYlwiLFxuICAgIDI6IFwiTWFyXCIsXG4gICAgMzogXCJBcHJcIixcbiAgICA0OiBcIk1heVwiLFxuICAgIDU6IFwiSnVuXCIsXG4gICAgNjogXCJKdWxcIixcbiAgICA3OiBcIkF1Z1wiLFxuICAgIDg6IFwiU2VwXCIsXG4gICAgOTogXCJPY3RcIixcbiAgICAxMDogXCJOb3ZcIixcbiAgICAxMTogXCJEZWNcIlxufTtcblxudmFyIEZPUk1BVFRFRF9NT05USF9MQUJFTFMgPSB7XG4gICAgMDogXCJKYW4uXCIsXG4gICAgMTogXCJGZWIuXCIsXG4gICAgMjogXCJNYXIuXCIsXG4gICAgMzogXCJBcHIuXCIsXG4gICAgNDogXCJNYXlcIixcbiAgICA1OiBcIkp1bi5cIixcbiAgICA2OiBcIkp1bC5cIixcbiAgICA3OiBcIkF1Zy5cIixcbiAgICA4OiBcIlNlcC5cIixcbiAgICA5OiBcIk9jdC5cIixcbiAgICAxMDogXCJOb3YuXCIsXG4gICAgMTE6IFwiRGVjLlwiXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvZ3JhcGguanMiLCJleHBvcnQgZnVuY3Rpb24gY3JlYXRlTWFya2VyIChsYXQsIGxuZykge1xuICAgIHJldHVybiBMLm1hcmtlcihbbGF0LCBsbmddLCB7aWNvbjogZ3JhcGhJY29ufSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRJY29uICh0eXBlKSB7XG4gICAgcmV0dXJuIHR5cGUgPT09ICdob3ZlcicgPyBob3Zlckljb24gOiBncmFwaEljb247XG59XG5cbnZhciBiYXNlSWNvbiA9IEwuSWNvbi5leHRlbmQoe30pO1xuXG52YXIgZ3JhcGhJY29uID0gbmV3IGJhc2VJY29uKHtcbiAgICBpY29uVXJsOiAnaW1ncy9ibHVlX2ljb24ucG5nJyxcbiAgICBzaGFkb3dVcmw6ICdpbWdzL21hcmtlcl9zaGFkb3cucG5nJyxcbiAgICBpY29uU2l6ZTogWzI1LCA0MV0sXG4gICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sXG4gICAgcG9wdXBBbmNob3I6IFsxLCAtMzRdLFxuICAgIHNoYWRvd1NpemU6IFs0MSwgNDFdXG59KTtcblxudmFyIGhvdmVySWNvbiA9IG5ldyBiYXNlSWNvbih7XG4gICAgaWNvblVybDogJ2ltZ3Mvb3JhbmdlX2ljb24ucG5nJyxcbiAgICBzaGFkb3dVcmw6ICdpbWdzL21hcmtlcl9zaGFkb3cucG5nJyxcbiAgICBpY29uU2l6ZTogWzI1LCA0MV0sXG4gICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sXG4gICAgcG9wdXBBbmNob3I6IFsxLCAtMzRdLFxuICAgIHNoYWRvd1NpemU6IFs0MSwgNDFdXG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL21hcmtlci5qcyIsImltcG9ydCB7dXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodH0gZnJvbSBcIi4vcGFuZWxcIjtcbmltcG9ydCB7dXBkYXRlU2hhcmVVcmx9IGZyb20gXCIuL3NoYXJlXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBCaW5kVGFiRXZlbnRzICgpIHtcbiAgICBkMy5zZWxlY3RBbGwoXCIucGFuZWwtdG9wLWJ0blwiKS5vbihcImNsaWNrXCIsIGhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEdldEFjdGl2ZVRhYiAoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJwYW5lbC10b3AtYnRuIGFjdGl2ZVwiKVswXS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWFjdGl2ZVwiKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2sgKCkge1xuICAgIC8vIElmIHRoZSBzZWN0aW9uIGlzIGFscmVhZHkgYWN0aXZlLCBkbyBub3RoaW5nXG4gICAgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSByZXR1cm47XG4gICAgXG4gICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgY2xpY2sgb24gZ3JhcGggdHlwZVxuICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgZXZlbnRDYXRlZ29yeTogJ3RhYicsXG4gICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcbiAgICAgIGV2ZW50TGFiZWw6IHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1hY3RpdmVcIiksXG4gICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcbiAgICB9KTtcblxuICAgIEhhbmRsZVRhYkNoYW5nZSh0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtYWN0aXZlXCIpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEhhbmRsZVRhYkNoYW5nZSAobmV3Q2xhc3MpIHtcbiAgICBkaXNhYmxlQWN0aXZlVGFiKCk7XG4gICAgZW5hYmxlVGFiKG5ld0NsYXNzKTtcbiAgICB1cGRhdGVTaGFyZVVybCgpO1xufVxuXG5mdW5jdGlvbiBlbmFibGVUYWIgKG5ld0NsYXNzKSB7XG4gICAgZDMuc2VsZWN0KFwiLnBhbmVsLXRvcC1idG5bZGF0YS1hY3RpdmU9J1wiICsgbmV3Q2xhc3MgKyBcIiddXCIpLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcC13cmFwcGVyXCIpLmNsYXNzTGlzdC5hZGQobmV3Q2xhc3MpXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyaWdodC1wYW5lbFwiKS5jbGFzc0xpc3QuYWRkKG5ld0NsYXNzKVxuXG4gICAgZDMuc2VsZWN0KFwiLnBhbmVsLXNlY3Rpb24td3JhcHBlcltkYXRhLWFjdGl2ZT0nXCIgKyBuZXdDbGFzcyArIFwiJ11cIikuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblxuICAgIHRvZ2dsZU1hcFBhZGRpbmcoKTtcbiAgICByZXNldFBhbmVsV2lkdGgoKTtcbiAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KCk7XG59XG5cbmZ1bmN0aW9uIGRpc2FibGVBY3RpdmVUYWIgKCkge1xuICAgIHZhciBhY3RpdmVDbGFzcyA9IGQzLnNlbGVjdChcIi5wYW5lbC10b3AtYnRuLmFjdGl2ZVwiKS5hdHRyKFwiZGF0YS1hY3RpdmVcIik7XG5cbiAgICBkMy5zZWxlY3RBbGwoJyNtYXAtd3JhcHBlciwgI3JpZ2h0LXBhbmVsJylcbiAgICAgICAgLmNsYXNzZWQoYWN0aXZlQ2xhc3MsIGZhbHNlKTtcblxuICAgIGQzLnNlbGVjdEFsbCgnLnBhbmVsLXRvcC1idG4uYWN0aXZlLCAucGFuZWwtc2VjdGlvbi13cmFwcGVyLmFjdGl2ZScpXG4gICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZU1hcFBhZGRpbmcgKCkge1xuICAgIHZhciBwYWRkaW5nUmlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJpZ2h0LXBhbmVsXCIpLm9mZnNldFdpZHRoO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwLXdyYXBwZXJcIikuc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGFkZGluZ1JpZ2h0ICsgXCJweFwiO1xufVxuXG4vKipcbiAqIFNpbmNlIHRoZSBwYW5lbCBoYXMgY2hpbGQgZWxlbWVudHMgd2l0aCBwb3NpdGlvbiBmaXhlZCBhbmQgd2lkdGggaW5oZXJpdFxuICogd2UgbmVlZCB0byBjbGVhciB0aGUgaW5saW5lIHdpZHRoIHByb3BlcnR5IGlmIGFuZCBvbmx5IGlmIHRoZSBpbmxpbmVcbiAqIHdpZHRoIGlzIGxlc3MgdGhhbiB0aGUgbWluIHdpZHRoXG4gKi9cbmZ1bmN0aW9uIHJlc2V0UGFuZWxXaWR0aCAoKSB7XG4gICAgdmFyIHBhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyaWdodC1wYW5lbFwiKTtcbiAgICB2YXIgd2lkdGggPSBwYW5lbC5zdHlsZS53aWR0aDtcbiAgICBpZiAoIXdpZHRoKSByZXR1cm47XG5cbiAgICB2YXIgcGFuZWxNaW5XaWR0aCA9IGQzLnNlbGVjdChwYW5lbCkuc3R5bGUoJ21pbi13aWR0aCcpLnNsaWNlKDAsIC0yKTtcbiAgICBpZiAocGFyc2VJbnQod2lkdGguc2xpY2UoMCwgLTIpLCAxMCkgPiBwYXJzZUludChwYW5lbE1pbldpZHRoLCAxMCkpIHJldHVybjtcblxuICAgIHBhbmVsLnN0eWxlLndpZHRoID0gXCJcIjtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3RhYnMuanMiLCJpbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tICcuL3NoYXJlJ1xuaW1wb3J0IHt1cGRhdGVMYXllck9wYWNpdHl9IGZyb20gXCIuL2xheWVyXCI7XG5cbi8vIHNldCBpdCBtYW51YWxseSBmb3Igbm93XG5jb25zdCBPUEFDSVRZX1JBTkdFX01BWCA9IDkwXG5cbnZhciBvcGFjaXR5U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpXG4gICAgLmRvbWFpbihbMSwgMF0pXG4gICAgLnJhbmdlKFswLCBPUEFDSVRZX1JBTkdFX01BWF0pXG4gICAgLmNsYW1wKHRydWUpXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb24gKGxheWVyLCBzbGlkZXJIYW5kbGUsIG9wYWNpdHkpIHtcbiAgICBvcGFjaXR5ID0gb3BhY2l0eSB8fCBsYXllci5vcGFjaXR5XG4gICAgc2xpZGVySGFuZGxlLnN0eWxlLnRvcCA9ICcnK29wYWNpdHlTY2FsZShvcGFjaXR5KSsncHgnXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlT3BhY2l0eVNsaWRlciAobGF5ZXIpIHtcbiAgICB2YXIgbGF5ZXJPcGFjaXR5ID0gbGF5ZXIub3BhY2l0eSAhPT0gdW5kZWZpbmVkID8gbGF5ZXIub3BhY2l0eSA6IDFcbiAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdmFyIHNsaWRlclRyYWNrT3ZlcmxheSA9IG1ha2VTbGlkZXJUcmFjayhsYXllciwgbGF5ZXJPcGFjaXR5KVxuICAgIHZhciBpY29uV3JhcHBlckNsb3NlZCA9IG1ha2VPcGFjaXR5SWNvbldyYXBwZXIoJ2Nsb3NlZCcsIGxheWVyLCBzbGlkZXJUcmFja092ZXJsYXkpXG5cbiAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktc2xpZGVyLXdyYXBwZXInKVxuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2xpZGVyVHJhY2tPdmVybGF5KVxuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaWNvbldyYXBwZXJDbG9zZWQpXG4gICAgcmV0dXJuIHdyYXBwZXJcbn1cblxuZnVuY3Rpb24gbWFrZU9wYWNpdHlJY29uV3JhcHBlcihzdGF0ZSwgbGF5ZXIsIHNsaWRlclRyYWNrT3ZlcmxheSkge1xuICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB2YXIgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXG4gICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LWljb24td3JhcHBlcicpXG4gICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LWljb24nKVxuICAgIGljb24uY2xhc3NMaXN0LmFkZChzdGF0ZSlcbiAgICBpY29uLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZ3Mvb3BhY2l0eS1pY29uLScrc3RhdGUrJy02NHg2NC5wbmcnKVxuICAgIGljb24uc2V0QXR0cmlidXRlKCdhbHQnLCAnVXNlIHRoaXMgc2xpZGVyIHRvIGFkanVzdCB0cmFuc3BhcmVuY3kgZm9yIHRoZSAnICsgbGF5ZXIubmFtZSArICcgbGF5ZXInKVxuICAgIGljb24uc2V0QXR0cmlidXRlKCd0aXRsZScsICdVc2UgdGhpcyBzbGlkZXIgdG8gYWRqdXN0IHRyYW5zcGFyZW5jeSBmb3IgdGhlICcgKyBsYXllci5uYW1lICsgJyBsYXllcicpXG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChpY29uKVxuICAgIHdyYXBwZXIub25jbGljayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBzbGlkZXJIYW5kbGUgPSBzbGlkZXJUcmFja092ZXJsYXkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnb3BhY2l0eS1zbGlkZXItaGFuZGxlJylbMF1cbiAgICAgICAgdXBkYXRlTGF5ZXJPcGFjaXR5KGxheWVyLCAwKVxuICAgICAgICBzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb24obGF5ZXIsIHNsaWRlckhhbmRsZSwgMClcbiAgICB9XG4gICAgcmV0dXJuIHdyYXBwZXJcbn1cblxuZnVuY3Rpb24gbWFrZVNsaWRlclRyYWNrKGxheWVyLCBsYXllck9wYWNpdHkpIHtcblxuICAgIHZhciBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB2YXIgdHJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHZhciBzbGlkZXJIYW5kbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuXG4gICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci10cmFjay1vdmVybGF5JylcbiAgICB0cmFjay5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci10cmFjaycpXG4gICAgc2xpZGVySGFuZGxlLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktc2xpZGVyLWhhbmRsZScpXG5cbiAgICBvdmVybGF5LmFwcGVuZENoaWxkKHRyYWNrKVxuICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQoc2xpZGVySGFuZGxlKVxuXG4gICAgaWYgKGxheWVyLmFjdGl2ZSkgc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uKGxheWVyLCBzbGlkZXJIYW5kbGUpXG4gICAgc2V0RHJhZ0V2ZW50TGlzdGVuZXIob3ZlcmxheSwgbGF5ZXIsIGxheWVyT3BhY2l0eSlcblxuICAgIHJldHVybiBvdmVybGF5XG59XG5cbmZ1bmN0aW9uIHNldERyYWdFdmVudExpc3RlbmVyKG92ZXJsYXksIGxheWVyLCBsYXllck9wYWNpdHkpIHtcbiAgICBkMy5zZWxlY3Qob3ZlcmxheSkuY2FsbChkMy5kcmFnKClcbiAgICAgICAgLm9uKCdzdGFydCBkcmFnJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHNsaWRlckhhbmRsZSA9IG92ZXJsYXkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnb3BhY2l0eS1zbGlkZXItaGFuZGxlJylbMF1cbiAgICAgICAgICAgIHZhciBuZXdPcGFjaXR5ID0gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSlcbiAgICAgICAgICAgIHVwZGF0ZUxheWVyT3BhY2l0eShsYXllciwgbmV3T3BhY2l0eSlcbiAgICAgICAgICAgIHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbihsYXllciwgc2xpZGVySGFuZGxlLCBuZXdPcGFjaXR5KVxuICAgICAgICB9KVxuICAgICAgICAub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgIHZhciBuZXdPcGFjaXR5ID0gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSlcblxuICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIG9wYWNpdHkgc2xpZGVyIGNoYW5nZVxuICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ29wYWNpdHkgc2xpZGVyJyxcbiAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2hhbmdlJyxcbiAgICAgICAgICAgIGV2ZW50TGFiZWw6ICd7XCInICsgbGF5ZXIubmFtZSArICdcIjogXCInICsgbmV3T3BhY2l0eSArICdcIn0nLFxuICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHVwZGF0ZVNoYXJlVXJsKClcbiAgICAgICAgfSlcbiAgICApXG59XG5cbmZ1bmN0aW9uIGNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zKG92ZXJsYXkpIHtcbiAgICB2YXIgeVBvcyA9IGQzLm1vdXNlKG92ZXJsYXkpWzFdXG4gICAgdmFyIG5ld09wYWNpdHkgPSBvcGFjaXR5U2NhbGUuaW52ZXJ0KHlQb3MpXG4gICAgcmV0dXJuIG5ld09wYWNpdHlcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL29wYWNpdHlTbGlkZXIuanMiLCIvKlxuICBcImxvZ29cIjoge1xuICAgIFwiaW1hZ2VcIjogXCJpbWdzL2xhbmRhdF9sb2dvX2JsdWUucG5nXCIsXG4gICAgXCJhbHRcIjogXCJMb2dvIGZvciB0aGUgTGFuRGF0IHByb2plY3RcIixcbiAgICBcImxpbmtcIjogXCJodHRwczovL2xhbmRhdC1kZXYubmVtYWMub3JnXCIsXG4gICAgXCJsb2NhdGlvblwiOiBbXCJib3R0b21cIiwgXCJyaWdodFwiXVxuICB9LFxuKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ3JlYXRlTG9nbyAobG9nb2RhdGEpIHtcbiAgICBpZiAoIWxvZ29kYXRhLmltYWdlKSByZXR1cm47XG5cbiAgICB2YXIgbG9nb1dyYXBwZXIgPSBjcmVhdGVMb2dvV3JhcHBlcigpO1xuICAgIHZhciBsb2dvSW1hZ2UgPSBjcmVhdGVMb2dvSW1hZ2UobG9nb2RhdGEpO1xuICAgIHZhciBsb2dvTGluayA9IGxvZ29kYXRhLmxpbmsgPyBjcmVhdGVMb2dvTGluayhsb2dvZGF0YS5saW5rKSA6IG51bGw7XG5cbiAgICBpZiAobG9nb0xpbmspIHtcbiAgICAgICAgbG9nb0xpbmsuYXBwZW5kQ2hpbGQobG9nb0ltYWdlKTtcbiAgICAgICAgbG9nb1dyYXBwZXIuYXBwZW5kQ2hpbGQobG9nb0xpbmspO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZ29XcmFwcGVyLmFwcGVuZENoaWxkKGxvZ29JbWFnZSk7XG4gICAgfVxuXG4gICAgdmFyIGluc2VydEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGxvZ29kYXRhLmxvY2F0aW9uKVswXTtcbiAgICB2YXIgZXhpc3RpbmdDaGlsZCA9IGluc2VydEVsZW1lbnQuZmlyc3RDaGlsZDtcbiAgICBpbnNlcnRFbGVtZW50Lmluc2VydEJlZm9yZShsb2dvV3JhcHBlciwgZXhpc3RpbmdDaGlsZCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxvZ29XcmFwcGVyICgpIHtcbiAgICB2YXIgbG9nb1dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGQzLnNlbGVjdChsb2dvV3JhcHBlcikuY2xhc3NlZChcInByb2plY3QtbG9nb1wiLCB0cnVlKTtcbiAgICByZXR1cm4gbG9nb1dyYXBwZXI7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxvZ29JbWFnZSAobG9nb2RhdGEpIHtcbiAgICB2YXIgbG9nb0ltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICBsb2dvSW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIGxvZ29kYXRhLmltYWdlKTtcbiAgICBpZiAobG9nb2RhdGEubGFiZWwpIHtcbiAgICAgICAgbG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcImFsdFwiLCBsb2dvZGF0YS5sYWJlbCk7XG4gICAgICAgIGxvZ29JbWFnZS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBsb2dvZGF0YS5sYWJlbCk7XG4gICAgfVxuICAgIHJldHVybiBsb2dvSW1hZ2U7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxvZ29MaW5rIChsaW5rKSB7XG4gICAgdmFyIGxvZ29MaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG4gICAgbG9nb0xpbmsuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBsaW5rKTtcbiAgICBsb2dvTGluay5zZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIiwgXCJfYmxhbmtcIik7XG5cbiAgICBsb2dvTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblxuICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIGNsaWNraW5nIGxvZ29cbiAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcbiAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG4gICAgICAgIGV2ZW50TGFiZWw6ICdsYW5kYXQgbG9nbycsXG4gICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbG9nb0xpbms7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9sb2dvLmpzIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQmluZE1vYmlsZU1lbnVFdmVudHMgKCkge1xuICAgIGQzLnNlbGVjdEFsbChcIi5tb2JpbGUtbWVudS1idXR0b25cIikub24oXCJjbGlja1wiLCBoYW5kbGVNb2JpbGVNZW51QnRuQ2xpY2spO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVNb2JpbGVNZW51QnRuQ2xpY2sgKCkge1xuICAgIHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KFwiI3dyYXBwZXJcIik7XG4gICAgdmFyIHN0YXR1cyA9IHdyYXBwZXIuY2xhc3NlZChcIm1vYmlsZS1tZW51LWhpZGRlblwiKTtcbiAgICB3cmFwcGVyLmNsYXNzZWQoXCJtb2JpbGUtbWVudS1oaWRkZW5cIiwgIXN0YXR1cyk7XG4gICAgZGlzcGF0Y2hNb2JpbGVNZW51QnRuQ2xpY2tBbmFseXRpY3MoIXN0YXR1cyA/IFwib3BlbmluZ1wiIDogXCJjbG9zaW5nXCIpO1xufVxuXG5mdW5jdGlvbiBkaXNwYXRjaE1vYmlsZU1lbnVCdG5DbGlja0FuYWx5dGljcyAoc3RhdHVzKSB7XG4gICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG4gICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtb2JpbGUgbWVudScsXG4gICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuICAgICAgICBldmVudExhYmVsOiAnTW9iaWxlIE1lbnUgJyArIHN0YXR1cyxcbiAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgfSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9tb2JpbGUuanMiXSwic291cmNlUm9vdCI6IiJ9