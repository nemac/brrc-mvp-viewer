!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(3),i=r(o),c=n(22),s=n(26),l=n(28),u=n(29),d=n(24),p=n(25),f=n(23),v=n(31),h=r(v),m=n(27),y=n(40),g=r(y),b=(n(39),function(e){(0,a.ParseConfig)(e,w),(0,l.SetupGraphs)(),(0,u.BindTabEvents)(),(0,p.BindCopyLinkEvents)(),(0,g.default)()}),w=function(e){(0,p.AddShareSettingsToConfig)(e);var t=(0,d.CreateMap)(e.map);(0,s.CreateBaseLayers)(t,e.baselayers),(0,f.CreateDefaultLayers)(e.layers,e["active-layers"]),(0,c.SetupPanel)(e.layers,e.layout),(0,i.default)(t),(0,h.default)(e.logo),e.tab&&(0,u.HandleTabChange)(e.tab),e.graph&&(0,l.HandleGraphTabChange)(e.graph),(0,l.BindGraphEvents)(t),(0,p.BindUpdateShareUrl)(t),(0,m.SetupPointsOfInterest)(t,e.pois),(0,p.updateShareUrl)()};window.Base=b,t.default={Base:b}},function(e,t){"use strict";function n(e,t){a(e,t)}function r(e){var t;return t=!window.XMLHttpRequest&&window.ActiveXObject?new window.ActiveXObject("MSXML2.XMLHTTP.3.0"):new XMLHttpRequest,t.onreadystatechange=function(){4===t.readyState&&e(t.response)},t}function a(e,t){var n=r(function(e){var n=o(e);t(n)});n.open("GET",e,!0),n.send(),console.log("hi")}function o(e){return e=JSON.parse(e),i(e),c(e),e}function i(e){e.map||(e.map={})}function c(e){var t,n,r=e.layers,a=e.mapserverUrl;e["active-layers"];for(var o in r){if(!r.hasOwnProperty(o))return;for(t=r[o],n=0;n<t.length;n++)l(t[n],a),s(t[n],e.defaultLayerOpacity)}}function s(e,t){e.opacity=e.opacity||t}function l(e,t){e.url=e.url||t}Object.defineProperty(t,"__esModule",{value:!0}),t.ParseConfig=n,t.GetAjaxObject=r},function(e,t,n){"use strict";function r(e){var t=new a.OpenStreetMapProvider,n=new a.GeoSearchControl({provider:t,showMarker:!1,autoComplete:!0,showPopup:!1});e.addControl(n);var r=n.searchElement.elements;L.DomEvent.on(r.container,"click",function(e){L.DomEvent.stopPropagation(e);for(var t=r.form.getElementsByClassName("results")[0].children,n=0;n<t.length;n++)e.target===t[n]&&r.container.classList.remove("active");ga("send","event",{eventCategory:"map",eventAction:"search",eventLabel:"click",nonInteraction:!1})}),L.DomEvent.on(r.container,"keydown",function(e){L.DomEvent.stopPropagation(e),13!=e.which&&13!=e.keyCode||(r.container.classList.remove("active"),ga("send","event",{eventCategory:"map",eventAction:"search address",eventLabel:e.target.value,nonInteraction:!1}))})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(4)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5);Object.defineProperty(t,"GeoSearchControl",{enumerable:!0,get:function(){return r(a).default}});var o=n(13);Object.defineProperty(t,"SearchElement",{enumerable:!0,get:function(){return r(o).default}});var i=n(17);Object.defineProperty(t,"BingProvider",{enumerable:!0,get:function(){return r(i).default}});var c=n(19);Object.defineProperty(t,"EsriProvider",{enumerable:!0,get:function(){return r(c).default}});var s=n(20);Object.defineProperty(t,"GoogleProvider",{enumerable:!0,get:function(){return r(s).default}});var l=n(21);Object.defineProperty(t,"OpenStreetMapProvider",{enumerable:!0,get:function(){return r(l).default}});var u=n(18);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return r(u).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){if(!L||!L.Control||!L.Control.extend)throw new Error("Leaflet must be loaded before instantiating the GeoSearch control");for(var e=L.Control.extend(m),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e,[null].concat(n)))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=(r(o),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});t.default=a;var c=n(12),s=r(c),l=n(13),u=r(l),d=n(16),p=r(d),f=n(14),v=n(15),h=function(){return{position:"topleft",style:"button",showMarker:!0,showPopup:!1,marker:{icon:new L.Icon.Default,draggable:!1},maxMarkers:1,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",notFoundMessage:"Sorry, that address could not be found.",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",msgbox:"leaflet-bar message",form:"",input:""},autoComplete:!0,autoCompleteDelay:250}},m={initialize:function(e){var t=this;this.markers=new L.FeatureGroup,this.options=i({},h(),e);var n=this.options,r=n.style,a=n.classNames,o=n.searchLabel,c=n.autoComplete,l=n.autoCompleteDelay;"button"!==r&&(this.options.classNames.container+=" "+e.style),this.searchElement=new u.default(i({},this.options,{handleSubmit:function(e){return t.onSubmit(e)}}));var d=this.searchElement.elements,v=d.container,m=d.form,y=d.input;v.addEventListener("dblclick",function(e){e.stopPropagation()});var g=(0,f.createElement)("a",a.button,v);g.title=o,g.href="#",g.addEventListener("click",function(e){t.onClick(e)},!1),c&&(this.resultList=new p.default({handleClick:function(e){var n=e.result;y.value=n.label,t.onSubmit({query:n.label})}}),m.appendChild(this.resultList.elements.container),y.addEventListener("keyup",(0,s.default)(function(e){return t.autoSearch(e)},l),!0),y.addEventListener("keydown",function(e){return t.selectResult(e)},!0),y.addEventListener("keydown",function(e){return t.clearResults(e)},!0)),this.elements={button:g}},onAdd:function(e){var t=this.options,n=t.showMarker,r=t.style;if(this.map=e,n&&this.markers.addTo(e),"bar"===r){var a=this.searchElement.elements.form,o=e.getContainer().querySelector(".leaflet-control-container"),i=(0,f.createElement)("div","leaflet-control-geosearch bar");i.appendChild(a),o.appendChild(i),this.elements.container=i}return this.searchElement.elements.container},onRemove:function(){var e=this.elements.container;return e&&e.remove(),this},onClick:function(e){e.preventDefault();var t=this.searchElement.elements,n=t.container,r=t.input;n.classList.contains("active")?(0,f.removeClassName)(n,"active"):((0,f.addClassName)(n,"active"),r.focus())},selectResult:function(e){if([v.ARROW_DOWN_KEY,v.ARROW_UP_KEY].includes(e.keyCode)){e.preventDefault();var t=this.searchElement.elements.input,n=this.resultList,r=this.resultList.count()-1,a="ArrowDown"===e.code?1+~~n.selected:~~n.selected-1,o=a<0?r:a>r?0:a,i=n.select(o);t.value=i.label}},clearResults:function(e){e.keyCode===v.ESCAPE_KEY&&this.resultList.clear()},autoSearch:function(e){return new Promise(function(t,n){var r,a,o;return v.SPECIAL_KEYS.includes(e.keyCode)?t():(r=e.target.value,a=this.options.provider,a.search({query:r}).then(function(e){return o=e,this.resultList.render(o),t()}.$asyncbind(this,n),n))}.$asyncbind(this))},onSubmit:function(e){return new Promise(function(t,n){var r,a;return r=this.options.provider,r.search(e).then(function(e){return a=e,a&&a.length>0&&this.showResult(a[0]),t()}.$asyncbind(this,n),n)}.$asyncbind(this))},showResult:function(e){var t=Object.keys(this.markers._layers);t.length>=this.options.maxMarkers&&this.markers.removeLayer(t[0]);var n=this.addMarker(e);this.centerMap(e),this.map.fireEvent("geosearch/showlocation",{location:e,marker:n})},addMarker:function(e){var t=this.options,n=t.marker,r=t.showPopup,a=new L.Marker([e.y,e.x],n);return a.bindPopup(e.label),this.markers.addLayer(a),r&&a.openPopup(),a},centerMap:function(e){var t=this.options,n=t.retainZoomLevel,r=t.animateZoom,a=new L.LatLngBounds(e.bounds),o=a.isValid()?a:this.markers.getBounds();!n&&a.isValid()?this.map.fitBounds(o,{animate:r}):this.map.setView(o.getCenter(),this.getZoom(),{animate:r})},getZoom:function(){var e=this.options,t=e.retainZoomLevel,n=e.zoomLevel;return t?this.map.getZoom():n}}},function(e,t,n){"use strict";function r(e,t){if(Function.prototype.$asyncspawn||Object.defineProperty(Function.prototype,"$asyncspawn",{value:r,enumerable:!1,configurable:!0,writable:!0}),this instanceof Function){var n=this;return new e(function(e,r){function a(t,n){var i;try{if(i=t.call(o,n),i.done){if(i.value!==e){if(i.value&&i.value===i.value.then)return i.value(e,r);e&&e(i.value),e=null}return}i.value.then?i.value.then(function(e){a(o.next,e)},function(e){a(o.throw,e)}):a(o.next,i.value)}catch(e){return r&&r(e),void(r=null)}}var o=n.call(t,e,r);a(o.next)})}}var a=function(e,t){for(var n=t.toString(),r="return "+n,a=n.match(/.*\(([^)]*)\)/)[1],o=/['"]!!!([^'"]*)['"]/g,i=[];;){var c=o.exec(r);if(!c)break;i.push(c)}return i.reverse().forEach(function(t){r=r.slice(0,t.index)+e[t[1]]+r.substr(t.index+t[0].length)}),r=r.replace(/\/\*[^*]*\*\//g," ").replace(/\s+/g," "),new Function(a,r)()}({zousan:n(7).toString(),thenable:n(11).toString()},function e(t,n){function r(){return a.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,a){return function o(i){for(;i;){if(i.then)return i=i.then(o,r),a?void 0:i;try{if(i.pop){if(i.length)return i.pop()?t.call(e):i;i=n}else i=i.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable="!!!thenable"(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory="!!!zousan")());var a=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return a.apply(t,arguments)}catch(e){return n(e)}}}});a(),r(),e.exports={$asyncbind:a,$asyncspawn:r}},function(e,t,n){(function(t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){function a(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function o(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function i(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===(void 0===t?"undefined":r(t))&&t.nextTick||"function"==typeof n&&n||function(e){setTimeout(e,0)};var c=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===a&&(n.splice(0,a),r=0)}}var n=[],r=0,a=1024;return function(a){n.push(a),n.length-r==1&&e(t)}}();return a.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":r(e))))try{var n=0,a=e.then;if("function"==typeof a)return void a.call(e,function(e){n++||t.resolve(e)},function(e){n++||t.reject(e)})}catch(e){return void(n||this.reject(e))}this.state=o,this.v=e,t.c&&c(function(){for(var n=0,r=t.c.length;n<r;n++)o(t.c[n],e)})}},reject:function(e){if(void 0===this.state){this.state=i,this.v=e;var t=this.c;t&&c(function(){for(var n=0,r=t.length;n<r;n++)i(t[n],e)})}},then:function(e,t){var n=new a,r={y:e,n:t,p:n};if(void 0===this.state)this.c?this.c.push(r):this.c=[r];else{var o=this.state,i=this.v;c(function(){o(r,i)})}return n}},a.resolve=function(e){if(e&&e instanceof a)return e;var t=new a;return t.resolve(e),t},a.reject=function(e){if(e&&e instanceof a)return e;var t=new a;return t.reject(e),t},a.version="2.3.3-nodent",a}}).call(t,n(8),n(9).setImmediate)},function(e,t){"use strict";function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function i(){h&&f&&(h=!1,f.length?v=f.concat(v):m=-1,v.length&&c())}function c(){if(!h){var e=a(i);h=!0;for(var t=v.length;t;){for(f=v,v=[];++m<t;)f&&f[m].run();m=-1,t=v.length}f=null,h=!1,o(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var u,d,p=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var f,v=[],h=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new s(e,t)),1!==v.length||h||a(c)},s.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";function r(e,t){this._id=e,this._clearFn=t}var a=Function.prototype.apply;t.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(10),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){"use strict";!function(e,n){function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[s]=r,c(s),s++}function a(e){delete l[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function i(e){if(u)setTimeout(i,0,e);else{var t=l[e];if(t){u=!0;try{o(t)}finally{a(e),u=!1}}}}if(!e.setImmediate){var c,s=1,l={},u=!1,d=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){i(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},c=function(t){e.port2.postMessage(t)}}():d&&"onreadystatechange"in d.createElement("script")?function(){var e=d.documentElement;c=function(t){var n=d.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(i,0,e)}}(),p.setImmediate=r,p.clearImmediate=a}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(t,function(){return this}(),n(8))},function(e,t){"use strict";e.exports=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,a){try{var o=a?a(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));e(o)?o.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(o)}catch(e){n.reject(e)}}function n(){}function r(e){}function a(e,t){this.resolve=e,this.reject=t}function o(r,a){var o=new n;try{this._resolver(function(n){return e(n)?n.then(r,a):t(o,n,r)},function(e){t(o,e,a)})}catch(e){t(o,e,a)}return o}function i(e){this._resolver=e,this.then=o}return n.prototype={resolve:r,reject:r,then:a},i.resolve=function(e){return i.isThenable(e)?e:{then:function(t){return t(e)}}},i.isThenable=e,i}},function(e,t){(function(t){"use strict";function n(e,t,n){function a(t){var n=h,r=m;return h=m=void 0,C=t,g=e.apply(r,n)}function o(e){return C=e,b=setTimeout(u,t),O?a(e):g}function c(e){var n=e-w,r=e-C,a=t-n;return _?k(a,y-r):a}function l(e){var n=e-w,r=e-C;return void 0===w||n>=t||n<0||_&&r>=y}function u(){var e=L();if(l(e))return d(e);b=setTimeout(u,c(e))}function d(e){return b=void 0,A&&h?a(e):(h=m=void 0,g)}function p(){void 0!==b&&clearTimeout(b),C=0,h=w=m=b=void 0}function f(){return void 0===b?g:d(L())}function v(){var e=L(),n=l(e);if(h=arguments,m=this,w=e,n){if(void 0===b)return o(w);if(_)return b=setTimeout(u,t),a(w)}return void 0===b&&(b=setTimeout(u,t)),g}var h,m,y,g,b,w,C=0,O=!1,_=!1,A=!0;if("function"!=typeof e)throw new TypeError(s);return t=i(t)||0,r(n)&&(O=!!n.leading,_="maxWait"in n,y=_?E(i(n.maxWait)||0,t):y,A="trailing"in n?!!n.trailing:A),v.cancel=p,v.flush=f,v}function r(e){var t=void 0===e?"undefined":c(e);return!!e&&("object"==t||"function"==t)}function a(e){return!!e&&"object"==(void 0===e?"undefined":c(e))}function o(e){return"symbol"==(void 0===e?"undefined":c(e))||a(e)&&w.call(e)==u}function i(e){if("number"==typeof e)return e;if(o(e))return l;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(d,"");var n=f.test(e);return n||v.test(e)?h(e.slice(2),n?2:8):p.test(e)?l:+e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="Expected a function",l=NaN,u="[object Symbol]",d=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,v=/^0o[0-7]+$/i,h=parseInt,m="object"==(void 0===t?"undefined":c(t))&&t&&t.Object===Object&&t,y="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,g=m||y||Function("return this")(),b=Object.prototype,w=b.toString,E=Math.max,k=Math.min,L=function(){return g.Date.now()};e.exports=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=(function(e){e&&e.__esModule?e:{default:e}}(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=n(14),c=n(15),s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.handleSubmit,o=void 0===a?function(){}:a,c=n.searchLabel,s=void 0===c?"search":c,l=n.classNames,u=void 0===l?{}:l;r(this,e);var d=(0,i.createElement)("div",["geosearch",u.container].join(" ")),p=(0,i.createElement)("form",["",u.form].join(" "),d),f=(0,i.createElement)("input",["glass",u.input].join(" "),p);f.type="text",f.placeholder=s,f.addEventListener("input",function(e){t.onInput(e)},!1),f.addEventListener("keyup",function(e){t.onKeyUp(e)},!1),f.addEventListener("keypress",function(e){t.onKeyPress(e)},!1),f.addEventListener("focus",function(e){t.onFocus(e)},!1),f.addEventListener("blur",function(e){t.onBlur(e)},!1),this.elements={container:d,form:p,input:f},this.handleSubmit=o}return o(e,[{key:"onFocus",value:function(){(0,i.addClassName)(this.elements.form,"active")}},{key:"onBlur",value:function(){(0,i.removeClassName)(this.elements.form,"active")}},{key:"onSubmit",value:function(e){return new Promise(function(t,n){var r,a,o;return e.preventDefault(),e.stopPropagation(),r=this.elements,a=r.input,o=r.container,(0,i.removeClassName)(o,"error"),(0,i.addClassName)(o,"pending"),this.handleSubmit({query:a.value}).then(function(e){return(0,i.removeClassName)(o,"pending"),t()}.$asyncbind(this,n),n)}.$asyncbind(this))}},{key:"onInput",value:function(){var e=this.elements.container;this.hasError&&((0,i.removeClassName)(e,"error"),this.hasError=!1)}},{key:"onKeyUp",value:function(e){var t=this.elements,n=t.container,r=t.input;e.keyCode===c.ESCAPE_KEY&&((0,i.removeClassName)(n,"pending"),(0,i.removeClassName)(n,"active"),r.value="",document.body.focus(),document.body.blur())}},{key:"onKeyPress",value:function(e){e.keyCode===c.ENTER_KEY&&this.onSubmit(e)}},{key:"setQuery",value:function(e){this.elements.input.value=e}}]),e}();t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.createElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElement(e);return r.className=t,n&&n.appendChild(r),r};t.createScriptElement=function(e,t){var r=n("script",null,document.body);return r.setAttribute("type","text/javascript"),new Promise(function(n){window[t]=function(e){r.remove(),delete window[t],n(e)},r.setAttribute("src",e)})},t.addClassName=function(e,t){e&&!e.classList.contains(t)&&e.classList.add(t)},t.removeClassName=function(e,t){e&&e.classList.contains(t)&&e.classList.remove(t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.ENTER_KEY=13,r=t.ESCAPE_KEY=27,a=t.ARROW_DOWN_KEY=40,o=t.ARROW_UP_KEY=38,i=t.ARROW_LEFT_KEY=37,c=t.ARROW_RIGHT_KEY=39;t.SPECIAL_KEYS=[n,r,a,o,i,c]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(14),i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join(" ").trim()},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.handleClick,a=void 0===n?function(){}:n,c=t.classNames,l=void 0===c?{}:c;r(this,e),s.call(this),this.props={handleClick:a,classNames:l},this.selected=-1;var u=(0,o.createElement)("div",i("results",l.container)),d=(0,o.createElement)("div",i(l.item));u.addEventListener("click",this.onClick,!0),this.elements={container:u,resultItem:d}}return a(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.elements,n=t.container,r=t.resultItem;this.clear(),e.forEach(function(e,t){var a=r.cloneNode(!0);a.setAttribute("data-key",t),a.innerHTML=e.label,n.appendChild(a)}),e.length>0&&(0,o.addClassName)(n,"active"),this.results=e}},{key:"select",value:function(e){var t=this.elements.container;return Array.from(t.children).forEach(function(t,n){return n===e?(0,o.addClassName)(t,"active"):(0,o.removeClassName)(t,"active")}),this.selected=e,this.results[e]}},{key:"count",value:function(){return this.results.length}},{key:"clear",value:function(){var e=this.elements.container;for(this.selected=-1;e.lastChild;)e.removeChild(e.lastChild);(0,o.removeClassName)(e,"active")}}]),e}(),s=function(){var e=this;this.onClick=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.target,r=e.props.handleClick,a=e.elements.container;if(n.parentNode===a&&n.hasAttribute("data-key")){var o=n.getAttribute("data-key");r({result:e.results[o]})}}};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=(r(s),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(18),p=r(d),f=n(14),v=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=e.jsonp,a=this.options.params;return n+"//dev.virtualearth.net/REST/v1/Locations?"+this.getParamString(l({},a,{query:t,jsonp:r}))}},{key:"parse",value:function(e){var t=e.data;return 0===t.resourceSets.length?[]:t.resourceSets[0].resources.map(function(e){return{x:e.point.coordinates[1],y:e.point.coordinates[0],label:e.address.formattedAddress,bounds:[[e.bbox[0],e.bbox[1]],[e.bbox[2],e.bbox[3]]],raw:e}})}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o="BING_JSONP_CB_"+Date.now(),i=this.endpoint({query:r,protocol:a,jsonp:o}),(0,f.createScriptElement)(i,o).then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),t}(p.default);t.default=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=(function(e){e&&e.__esModule?e:{default:e}}(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.options=t}return o(e,[{key:"getParamString",value:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o=this.endpoint({query:r,protocol:a}),fetch(o).then(function(e){return i=e,i.json().then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=function(e){return e&&e.__esModule?e:{default:e}}(l),d=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find?"+this.getParamString(c({},r,{f:"json",text:t}))}},{key:"parse",value:function(e){return e.data.locations.map(function(e){return{x:e.feature.geometry.x,y:e.feature.geometry.y,label:e.name,bounds:[[e.extent.ymin,e.extent.xmin],[e.extent.ymax,e.extent.xmax]],raw:e}})}}]),t}(u.default);t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=function(e){return e&&e.__esModule?e:{default:e}}(l),d=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params,a=this.getParamString(c({},r,{address:t}));return(r&&r.key?"https:":n)+"//maps.googleapis.com/maps/api/geocode/json?"+a}},{key:"parse",value:function(e){return e.data.results.map(function(e){return{x:e.geometry.location.lng,y:e.geometry.location.lat,label:e.formatted_address,bounds:[[e.geometry.viewport.southwest.lat,e.geometry.viewport.southwest.lng],[e.geometry.viewport.northeast.lat,e.geometry.viewport.northeast.lng]],raw:e}})}}]),t}(u.default);t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=function(e){return e&&e.__esModule?e:{default:e}}(l),d=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//nominatim.openstreetmap.org/search?"+this.getParamString(c({},r,{format:"json",q:t}))}},{key:"parse",value:function(e){return e.data.map(function(e){return{x:e.lon,y:e.lat,label:e.display_name,bounds:[[parseFloat(e.boundingbox[0]),parseFloat(e.boundingbox[2])],[parseFloat(e.boundingbox[1]),parseFloat(e.boundingbox[3])]],raw:e}})}}]),t}(u.default);t.default=d},function(e,t,n){"use strict";function r(){return E.filter(function(e){return e.active})}function a(e,t){E=t["layer-groups-order"],p(d(t["layer-groups-order"]),e),c(),i()}function o(){var e=window.navigator.userAgent;return e.indexOf("MSIE")>-1||e.indexOf("rv:11.0")>-1}function i(){document.getElementById("right-panel").onscroll=l}function c(){if(!o()){var e=d3.select("#right-panel-drag-overlay");e.style("cursor","ew-resize"),e.call(d3.drag().on("drag",function(){s.call(this)}))}}function s(){l(),u()}function l(){var e,t=d3.select("#right-panel"),n=t.property("offsetHeight"),r=document.getElementById("right-panel-drag-overlay"),a=document.getElementById("right-panel-header");if(t.classed("graphs-active")){var o=document.getElementById("graph-list");e=a.scrollHeight+o.scrollHeight+700}else{var i=document.getElementById("layer-list");e=a.scrollHeight+i.scrollHeight}e=e>n?e+"px":null,r.style.height=e}function u(){var e=d3.select("#right-panel"),t=+e.style("min-width").slice(0,-2),n=e.property("clientWidth"),r=document.getElementById("wrapper"),a=r.clientWidth,o=document.getElementById("map-wrapper"),i=d3.event.sourceEvent.x,c=a-i-n,s=n+c;s=s<t?t:s>a?a:s,o.style.paddingRight=s+"px",e.style("width",s+"px")}function d(e){return d3.select("#layer-list").selectAll(".layer-group-wrapper").data(e).enter().append("div").attr("class","layer-group-wrapper").attr("id",function(e){return e.id}).classed("active",function(e){return e.active}).each(function(e){d3.select(this).append("div").attr("class","layer-group-btn btn").on("click",function(e){ga("send","event",{eventCategory:"layer list",eventAction:"toggle "+!e.active,eventLabel:e.name,nonInteraction:!1}),e.active=!e.active,d3.select(this.parentNode).classed("active",function(){return e.active}),l(),(0,w.updateShareUrl)()}).text(e.name)}).append("div").attr("class","layer-group")}function p(e,t){e.selectAll(".layer-select").data(function(e){return t[e.id]}).enter().append("div").attr("class","layer-select").each(function(e){var t=(this.parentNode.parentNode.id,d3.select(this));f(e,t),v(e,t),h(e,t),t.node().appendChild(m(e))})}function f(e,t){t.append("input").attr("type","checkbox").attr("id",function(e){return e.id}).attr("checked",function(e){return e.active?"checked":null}).on("click",function(e){if((0,g.toggleLayer)(e),t.select(".layer-tools-wrapper").classed("active",e.active),e.active){var n=t.select(".opacity-slider-handle").node();(0,b.setOpacitySliderPosition)(e,n,e.opacitiy)}})}function v(e,t){t.append("div").attr("class","layer-label-wrapper").append("label").attr("for",function(e){return e.id}).attr("class","layer-label").html(function(e){return e.name})}function h(e,t){e.info&&""!==e.info&&(t.append("div").attr("class","layer-info-btn-wrapper").on("click",function(){d3.select(this.parentNode).select(".layer-info-wrapper").classed("active",function(){return ga("send","event",{eventCategory:"layer info",eventAction:"clicked",eventLabel:e.name+" "+!d3.select(this).classed("active"),nonInteraction:!1}),!d3.select(this).classed("active")})}).append("img").attr("class","layer-info-icon").attr("src","imgs/more-info-icon-64x64.png").attr("alt","Read more about the "+e.name+" layer").attr("title","Read more about the "+e.name+" layer"),t.append("div").attr("class","layer-info-wrapper").text(function(e){return e.info}))}function m(e,t){var n=document.createElement("div");n.classList.add("layer-tools-wrapper"),e.active&&n.classList.add("active");var r=(0,b.makeOpacitySlider)(e),a=y(e);return n.appendChild(a),n.appendChild(r),n}function y(e,t){var n=document.createElement("div"),r=document.createElement("img");return n.classList.add("legend-wrapper"),r.setAttribute("src",e.legend),n.appendChild(r),n}Object.defineProperty(t,"__esModule",{value:!0}),t.GetActiveLayerGroups=r,t.SetupPanel=a,t.updatePanelDragOverlayHeight=l;var g=n(23),b=n(30),w=n(25),E=[]},function(e,t,n){"use strict";function r(){return h}function a(e,t){var n,r,a,o,c,s;if(t&&0!==t.length)for(n=0;n<t.length;n++){s=!1,c=t[n];for(a in e){if(!e.hasOwnProperty(a))return;for(o=e[a],r=0;r<o.length;r++)if(o[r].id===c){i(o[r]),s=!0;break}if(s)break}}}function o(e){e.active?(l(e),ga("send","event",{eventCategory:"layer",eventAction:"toggle off",eventLabel:e.name,nonInteraction:!1})):(i(e),ga("send","event",{eventCategory:"layer",eventAction:"toggle on",eventLabel:e.name,nonInteraction:!1}))}function i(e){var t=(0,f.GetMap)();e.active=!0,e.mapLayer=e.mapLayer||p(e),t.addLayer(e.mapLayer),s(e),c(),(0,v.updateShareUrl)()}function c(){var e,t,n;for(t=0,n=m.length;t<n;t++)e=m[t],"overlay"===e.type&&e.mapLayer.bringToFront()}function s(e){h.push(e.id),m.push(e)}function l(e){var t=(0,f.GetMap)();e.active=!1,e.mapLayer&&t.hasLayer(e.mapLayer)&&t.removeLayer(e.mapLayer),u(e),(0,v.updateShareUrl)()}function u(e){var t=h.indexOf(e.id);t!==-1&&(h.splice(t,1),m.splice(t,1))}function d(e,t){e.opacity=t,e.mapLayer.setOpacity(t)}function p(e){return L.tileLayer.wms(e.url,{layers:e.id,transparent:e.transparent||!0,version:e.version||"1.3.0",crs:e.crs||L.CRS.EPSG900913,format:e.format||"image/png",opacity:e.opacity||.75,tileSize:e.tileSize||document.getElementById("map").clientWidth})}Object.defineProperty(t,"__esModule",{value:!0}),t.GetCurrentLayers=r,t.CreateDefaultLayers=a,t.toggleLayer=o,t.enableLayer=i,t.disableLayer=l,t.updateLayerOpacity=d;var f=n(24),v=n(25),h=[],m=[]},function(e,t){"use strict";function n(e){var t=e.id||"map",n=e.options||{scrollWheelZoom:!1},r=e.center||["38.5","-81"],o=e.zoom||6;return a=L.map(t,n).setView(r,o),L.control.attribution().addTo(a),document.getElementsByClassName("leaflet-control-zoom-in")[0].addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click button",eventLabel:"zoom in",nonInteraction:!1})}),document.getElementsByClassName("leaflet-control-zoom-out")[0].addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click button",eventLabel:"zoom out",nonInteraction:!1})}),a.on("dragend",function(e){ga("send","event",{eventCategory:"map",eventAction:"drag",eventLabel:JSON.stringify(a.getBounds()),nonInteraction:!0})}),a.on("zoomend",function(e){ga("send","event",{eventCategory:"map",eventAction:"zoom",eventLabel:JSON.stringify(a.getBounds()),nonInteraction:!0})}),a}function r(){return a}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateMap=n,t.GetMap=r;var a},function(e,t,n){"use strict";function r(e){e.on("moveend",a)}function a(e){var t=(0,Y.GetMap)();c(i([b(t),w(t),E(t),L(),k(t),C(),O(),_()])),s(),g()}function o(e){var t=A();t&&(t.center&&(e.map.center=t.center),t.zoom&&(e.map.zoom=t.zoom),t.layers&&D(t.layers,e),t.baselayers&&F(t.baselayers,e),t.pois&&U(t.pois,e),t.tab&&(e.tab=t.tab),t.graph&&(e.graph=t.graph),t.layerGroups&&(e.layerGroups=G(t.layerGroups,e)))}function i(e){return"?"+e.filter(function(e){return void 0!==e}).join("&")}function c(e){window.history&&window.history.replaceState&&window.history.replaceState({},"",e)}function s(){var e=window.location.href;document.getElementById("shareurl-link-url").setAttribute("value",e)}function l(){d3.select(document).on("click",u),d3.select(".shareurl-link a").on("click",p),d3.select(".shareurl-link-url").on("click",v),d3.select(".shareurl-link-popup-remover").on("click",f)}function u(){var e=d3.event,t=[];t=d(e.target);var n,r,a=!0;for(n=0,r=t.length;n<r;n++)try{if(t[n].classList.contains("shareurl-link-popup")||t[n].classList.contains("shareurl-link")){a=!1;break}}catch(e){}if(a){m(document.getElementsByClassName("shareurl-link-popup").item(0))}}function d(e){for(var t=[];e&&e.parentNode;)t.push(e),e=e.parentNode;return t}function p(){var e=document.getElementsByClassName("shareurl-link-popup").item(0);d3.select(e).classed("active")?m(e):h(e)}function f(){m(document.getElementsByClassName("shareurl-link-popup").item(0))}function v(){y()}function h(e){e.classList.toggle("active"),y(),ga("send","event",{eventCategory:"shareurl",eventAction:"open",eventLabel:document.getElementById("shareurl-link-url").getAttribute("value"),nonInteraction:!1})}function m(e){ga("send","event",{eventCategory:"shareurl",eventAction:"close",eventLabel:document.getElementById("shareurl-link-url").getAttribute("value"),nonInteraction:!1}),e.classList.remove("active")}function y(){var e=document.getElementById("shareurl-link-url");e.focus(),e.setSelectionRange(0,e.value.length)}function g(){var e,t,n,r,a=P(window.location.href),o=document.getElementsByClassName("shareurl-social");for(n=0,r=o.length;n<r;n++)e=o[n],t=e.getAttribute("data-baseurl")+a,e.setAttribute("href",t),e.addEventListener("click",function(){ga("send","event",{eventCategory:"shareurl",eventAction:this.getAttribute("aria-label"),eventLabel:this.href,nonInteraction:!1})})}function b(e){var t=e.getCenter();return"center="+t.lat.toString()+","+t.lng.toString()}function w(e){return"zoom="+e.getZoom()}function E(e){var t=[],n={},r=(0,H.GetCurrentLayers)();e.eachLayer(function(e){var t=e.options;t&&t.layers&&(n[t.layers]=t.hasOwnProperty("opacity")?t.opacity:"1")});var a,o;for(o=0;o<r.length;o++)a=r[o],t.push(a),t.push(n[a]);return"layers="+t.join(",")}function k(e){var t=[];return e.eachLayer(function(e){e.options&&e.options.type===z.BASE_LAYER_TYPE&&t.push(e.options.id)}),"baselayers="+t.join(",")}function L(){return"layerGroups="+(0,K.GetActiveLayerGroups)().map(function(e){return e.id}).join(",")}function C(){var e=(0,$.GetAllPointsOfInterest)();if(e.length){var t="pois=";return e.forEach(function(e){t+=e.lat+","+e.lng+";"}),t}}function O(){return"tab="+d3.select(".panel-top-btn.active").attr("data-active")}function _(){return"graph="+d3.select(".graph-type-btn.active").attr("data-type")}function A(){var e=window.location.search;if(""!==e)return e=S(e),e=x(e),I(e),e}function S(e){return e=e.substring(1),e=j(e),e.split("&")}function P(e){return e.replace(/\:/g,"%3A").replace(/\;/g,"%3B").replace(/\//g,"%2F").replace(/\,/g,"%2C").replace(/\&/g,"%26")}function j(e){return e.replace(/\%2[c|C]/g,",").replace(/\%3[b|B]/g,";")}function x(e){var t,n,r={};for(n=0;n<e.length;n++)t=e[n].split("="),r[t[0]]=t[1];return r}function I(e){e.center&&(e.center=T(e.center)),e.layers&&(e.layers=M(e.layers)),e.baselayers&&(e.baselayers=B(e.baselayers)),e.pois&&(e.pois=N(e.pois)),e.layerGroups&&(e.layerGroups=R(e.layerGroups))}function T(e){return e.split(",")}function M(e){var t,n,r={enabledLayers:[],opacityVals:{}};for(e=e.split(","),n=0;n<e.length;n+=2)t=e[n],r.enabledLayers.push(t),r.opacityVals[t]=e[n+1];return r}function B(e){return e.split(",")}function N(e){return e.split(";").filter(function(e){return""!==e}).map(function(e){return e=e.split(","),{lat:e[0],lng:e[1]}})}function R(e){return e.split(",")}function G(e,t){t.layout["layer-groups-order"].forEach(function(t){t.active=e.filter(function(e){return e===t.id}).length>0})}function D(e,t){var n=e.enabledLayers;t["active-layers"]=n;var r,a,o,i,c,s,l=t.layers;for(r=0;r<n.length;r++){s=!1,c=n[r];for(o in l){if(!l.hasOwnProperty(o))return;for(i=l[o],a=0;a<i.length;a++)if(i[a].id===c){i[a].opacity=e.opacityVals[c],s=!0;break}if(s)break}}}function F(e,t){var n,r,a=t.baselayers;for(r=0;r<a.length;r++)n=a[r],n.active=e.indexOf(n.id)!==-1}function U(e,t){t.pois=e}Object.defineProperty(t,"__esModule",{value:!0}),t.BindUpdateShareUrl=r,t.updateShareUrl=a,t.AddShareSettingsToConfig=o,t.BindCopyLinkEvents=l;var Y=n(24),z=n(26),H=n(23),$=n(27),K=n(22)},function(e,t,n){"use strict";function r(e,t){t=t||[{id:"carto-light-default",url:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attributions">CARTO</a>'}],d=t;var n,r,o;for(n=0;n<t.length;n++)o=t[n],o.active&&(r=l(o),o.layer=r,r.addTo(e));a(t)}function a(e){var t=document.createElement("div");t.className="baselayer-ui";for(var n,r,a,i,c=0,s=e.length;c<s;c++)i=e[c],i.hasOwnProperty("image")&&(n=document.createElement("div"),n.setAttribute("data-layer",i.id),r=document.createElement("img"),r.setAttribute("src",i.image),r.setAttribute("alt",i.label),r.setAttribute("title",i.label),a=document.createElement("div"),a.textContent=i.label,n.appendChild(r),n.appendChild(a),n.addEventListener("click",o),d3.select(n).classed("base-selector",!0).classed("active",i.active),t.appendChild(n));document.getElementsByClassName("leaflet-bottom leaflet-left")[0].appendChild(t)}function o(e){e.stopPropagation();var t=this.getAttribute("data-layer");i(this),c(),s(t),ga("send","event",{eventCategory:"map",eventAction:"change base layer",eventLabel:t,nonInteraction:!1}),(0,f.updateShareUrl)()}function i(e){d3.select(".base-selector.active").classed("active",!1),d3.select(e).classed("active",!0)}function c(){var e=(0,p.GetMap)();e.eachLayer(function(t){t.options.type===v&&e.removeLayer(t)})}function s(e){for(var t,n=(0,p.GetMap)(),r=0,a=d.length;r<a;r++)if(t=d[r],t.id===e){t.layer||(t.layer=l(t)),t.layer.addTo(n),t.layer.bringToBack();break}}function l(e){return L.tileLayer(e.url,u(e))}function u(e){var t={};return e.id&&(t.id=e.id),e.attribution&&(t.attribution=e.attribution),e.subdomains&&(t.subdomains=e.subdomains),t.type=v,t}Object.defineProperty(t,"__esModule",{value:!0}),t.BASE_LAYER_TYPE=void 0,t.CreateBaseLayers=r;var d,p=n(24),f=n(25),v=t.BASE_LAYER_TYPE="baselayer"},function(e,t,n){"use strict";function r(){return y}function a(e,t){var n={lat:e,lng:t};return y.push(n),n}function o(e,t){i(t);var n=r(),e=(0,h.GetMap)();n.forEach(function(t){s(e,t)})}function i(e){Array.prototype.push.apply(y,e)}function c(e){y=y.filter(function(t){return!(t===e)})}function s(e,t){var n=(0,f.createGraphDiv)(t),r=(0,f.createMarker)(e,t.lat,t.lng);t.graphDiv=n,t.marker=r,r.addTo(e),(0,f.createGraphRemover)(e,n,r,t),d3.select(n).on("mouseenter",function(e){r.setIcon((0,f.getIcon)("hover"))}),d3.select(n).on("mouseleave",function(){r.setIcon((0,f.getIcon)("graph"))}),r.on("click dblclick",function(e){l(e,t)}),r.on("mouseover",function(e){r.setIcon((0,f.getIcon)("hover"))}),r.on("mouseout",function(e){r.setIcon((0,f.getIcon)("graph")),t.graphDiv.getElementsByClassName("pan-to-marker-btn")[0].classList.remove("animate")})}function l(e,t){e.originalEvent.stopPropagation(),(0,m.HandleTabChange)("graphs-active"),d(t),u(t)}function u(e){e.graphDiv.getElementsByClassName("pan-to-marker-btn")[0].classList.add("animate")}function d(e){var t=document.getElementById("right-panel");document.getElementById("right-panel-header"),document.getElementById("graph-type-header");t.scrollTop=e.graphDiv.offsetTop}function p(e,t,n){document.getElementById("graph-list").removeChild(t),e.removeLayer(n),(0,v.updateShareUrl)()}Object.defineProperty(t,"__esModule",{value:!0}),t.GetAllPointsOfInterest=r,t.AddPointOfInterestToTracker=a,t.SetupPointsOfInterest=o,t.AddMultiplePointsOfInterest=i,t.RemovePointOfInterestFromTracker=c,t.SetupPointOfInterestUI=s,t.RemovePointOfInterestUI=p;var f=n(28),v=n(25),h=n(24),m=n(29),y=[]},function(e,t,n){"use strict";function r(){d3.selectAll(".graph-type-btn").on("click",m),a(),J=d3.tip().attr("class","d3-tip").html(function(e){return e})}function a(){Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100!=0||e%400==0)},Date.prototype.getDOY=function(){var e=[0,31,59,90,120,151,181,212,243,273,304,334],t=this.getMonth(),n=this.getDate(),r=e[t]+n;return t>1&&this.isLeapYear()&&r++,r}}function o(e){e.on("click",c)}function i(e){return"hover"===e?X:V}function c(e){var t=this,n=e.latlng.lat,r=e.latlng.lng,a=(0,H.AddPointOfInterestToTracker)(n,r);(0,H.SetupPointOfInterestUI)(t,a,X,V),(0,K.updateShareUrl)(),ga("send","event",{eventCategory:"map",eventAction:"click",eventLabel:"add point",nonInteraction:!1})}function s(e,t,n){return L.marker([t,n],{icon:V})}function l(e,t,n,r){var a=u();t.getElementsByClassName("graph-elem-header")[0].appendChild(a),d3.select(a).on("click",function(){ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:"remove",nonInteraction:!1}),(0,H.RemovePointOfInterestFromTracker)(r),(0,H.RemovePointOfInterestUI)(e,t,n),(0,$.updatePanelDragOverlayHeight)(),(0,K.updateShareUrl)()})}function u(){var e=document.createElement("button");return e.className="remove-graph",e.innerText=String.fromCharCode("10005"),e.setAttribute("title","Remove graph"),e}function d(e,t,n,r){r=r.replace(/\[|\]|\'/g,"").split(", "),O(r,e,t,n),(0,$.updatePanelDragOverlayHeight)()}function p(e,t,n){var r="https://fcav-ndvi.nemac.org/landdat_product.cgi?args="+t+","+e,a=(0,W.GetAjaxObject)(function(r){d(n,e,t,r)});a.open("GET",r),a.send()}function f(e){var t;for(t=0;t<e.length;t++)e[t]=e[t].split(",");return e}function v(e){var t,n,r,a,o={};for(o.keys=[],r=0;r<e.length;r++)t=e[r],n=t[0].substring(0,4),o.hasOwnProperty(n)||(o[n]=[],o.keys.push(n)),o[n].push(t);var i=[];for(r=0;r<o.keys.length;r++)n=o.keys[r],46!==o[n].length&&i.push(n);for(r=0;r<i.length;r++)n=i[r],delete o[n],o.keys.splice(o.keys.indexOf(n),1);var c,s;for(o.means=[],r=0;r<46;r++){for(c=[],a=r;a<e.length;a+=46)c.push(parseInt(e[a][1],10));s=h(c),o.means.push(s)}return o}function h(e){var t,n,r=0;for(t=0,n=e.length;t<n;t++)r+=e[t];return(r/n).toString()}function m(){var e=this.getAttribute("data-type"),t=document.getElementsByClassName("graph-type-btn active")[0].getAttribute("data-type");e!==t&&(ga("send","event",{eventCategory:"graph type",eventAction:"click",eventLabel:e,nonInteraction:!1}),y(e))}function y(e){if(!g())var t=document.getElementsByClassName("graph-elem")[0].scrollHeight,n=document.getElementsByClassName("graph-type-info active")[0].scrollHeight,r=document.getElementById("right-panel").scrollTop;w(),E(e),g()||b(n,t,r),(0,K.updateShareUrl)()}function g(){return void 0===document.getElementsByClassName("graph-elem")[0]}function b(e,t,n){var r=document.getElementsByClassName("graph-type-info active")[0].scrollHeight,a=document.getElementsByClassName("graph-elem")[0].scrollHeight,o=a/t,i=r+(n-e)*o;document.getElementById("right-panel").scrollTop=i}function w(){var e=document.getElementsByClassName("graph-type-btn active")[0],t="graph-"+e.getAttribute("data-type");e.classList.remove("active"),document.getElementById("graph-list").classList.remove(t)}function E(e){d3.select(".graph-type-btn[data-type='"+e+"']").classed("active",!0),document.getElementById("graph-list").classList.add("graph-"+e),d3.selectAll(".graph-type-info").classed("active",function(){return e===this.id.split("-")[0]})}function k(e){var t=_(e.lat,3),n=_(e.lng,3),r=document.createElement("div"),a=document.createElement("div");r.appendChild(a);var o=C(e),i=document.createTextNode("Lat: "+t+", Long: "+n),c=document.createElement("div");return c.className="graph-lat-lon",c.appendChild(i),a.appendChild(o),a.appendChild(c),r.classList.add("graph-elem"),a.classList.add("graph-elem-header"),p(e.lat,e.lng,r),r}function C(e){var t=document.createElement("button");return t.classList.add("btn"),t.classList.add("pan-to-marker-btn"),t.textContent="Show On Map",t.onclick=function(e,t){(0,q.GetMap)().panTo([e.lat,e.lng]),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:'{"show on map":{"lat":'+e.lat+',"long":'+e.lng+"}}",nonInteraction:!1})}.bind(t,e),t}function O(e,t,n,r){e=f(e);var a=v(e);A(e,t,a.means),S(a,t,n,r),P(a,t,n,r),document.getElementById("graph-list").appendChild(t)}function _(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function A(e,t,n){var r={top:30,right:20,bottom:30,left:29},a=580-r.left-r.right,o=270-r.top-r.bottom,i=d3.scaleTime().range([0,a]).domain([D(e[0][0]),D(e[e.length-1][0])]),c=d3.scaleLinear().range([o,0]).domain([0,100]),s=d3.axisBottom(i).ticks(16).tickFormat(function(e){return e.getFullYear()}),l=d3.axisLeft(c).ticks(6),u=d3.line().x(function(e){return i(D(e[0]))}).y(function(e){return c(e[1])}),d=d3.select(t).append("div").classed("timeseries-graph",!0),p=d.append("svg").attr("height",o+r.top+r.bottom).attr("viewBox",function(){return"0 0 "+(a+r.left+r.right)+" "+(o+r.top+r.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+r.left+","+r.top+")");p.call(J),I(e,u,p),p.append("g").attr("class","x axis").attr("transform","translate(0,"+o+")").call(s),p.append("g").attr("class","y axis").call(l),M(e,u,p,n)}function S(e,t,n,r){function a(e){return Q[(e-15)/30]}var o={},i={top:30,right:20,bottom:30,left:29},c=500-i.left-i.right,s=270-i.top-i.bottom,l=e.means,u=d3.scaleLinear().range([0,c]).domain([0,365]),d=d3.scaleLinear().range([s,0]).domain([0,100]),p=d3.axisBottom(u).ticks(11).tickValues([15,45,75,105,135,165,195,225,255,285,315,345]).tickFormat(a),f=d3.axisLeft(d).ticks(6),v=d3.line().x(function(e,t){return u(Array.isArray(e)?F(e[0]):8*t+3)}).y(function(e){return d(Array.isArray(e)?e[1]:e)}),h=d3.select(t).append("div").classed("overlapping-graph",!0),m=h.append("svg").attr("viewBox",function(){return"0 0 "+(c+i.left+i.right)+" "+(s+i.top+i.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+i.left+","+i.top+")");m.call(J),m.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(p),m.append("g").attr("class","y axis").call(f),o.means={path:I(e.means,v,m)},o[2015]={path:I(e[2015],v,m)},o.means.points=M(e.means,v,m,l),o[2015].points=M(e[2015],v,m,l);var y=h.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){R(y,t,"overlapping","2015",o,e,v,m,l,n,r)}),R(y,"means","overlapping","means",o,e,v,m,l,n,r)}function P(e,t,n,r){var a=Math.min(490,490)/2-30,o=e.means,i=j(e),c=x(o,i[1][0]),s=d3.scaleLinear().domain([0,100]).range([0,a]),l=d3.radialLine().radius(function(e){return s(Array.isArray(e)?e[1]:e)}).angle(function(e,t){return((Array.isArray(e)?F(e[0]):8*t+3)-1)%365/365*(2*Math.PI)}),u=d3.select(t).append("div").classed("polar-graph",!0),d=u.append("svg").attr("viewBox",function(){return"0 0 490 490"}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate(245,245)");d.call(J);var p=d.append("g").attr("class","r axis").selectAll("g").data(s.ticks(5).slice(1)).enter().append("g");p.append("circle").attr("r",s),p.append("text").attr("y",function(e){return-s(e)-4}).attr("transform","rotate(15)").style("text-anchor","middle").text(function(e){return e});var f=d.append("g").attr("class","a axis").selectAll("g").data(d3.range(0,360,30)).enter().append("g").attr("transform",function(e){return"rotate("+(e-90)+")"});f.append("line").attr("x2",a),f.append("text").attr("x",a+6).attr("dy",".35em").style("text-anchor",function(e){return e<360&&e>180?"end":null}).attr("transform",function(e){return e<360&&e>180?"rotate(180 "+(a+6)+",0)":null}).text(function(e){return Q[e/30]});var v=d.append("g").selectAll("g").data(c).enter().append("g").attr("transform",function(e){return"rotate("+(e.data[1][0]-90)+")"});v.append("line").attr("class","line").attr("x2",a),v.append("text").attr("x",function(e){var t=e.data[1][0];return t<360&&t>180?a+30:a-30}).attr("y",function(e){return e.data[1][0]%365/365*(2*Math.PI)+6}).attr("dy",".35em").style("text-anchor",function(e){var t=e.data[1][0];return t<360&&t>180?"middle":null}).attr("transform",function(e){var t=e.data[1][0];return t<360&&t>180?"rotate(180 "+(a+6)+",0)":null}).text(function(e){return e.label});var h=i[1][0];T([[h,100],[(h+182.5)%365,100]],l,d).classed("growing-season-line","true"),T(i,l,d).classed("center-line","true"),d.selectAll("point").data([i[1]]).enter().append("circle").attr("class","center").attr("r",4).attr("transform",function(e){return"translate("+l([e]).slice(1).slice(0,-1)+")"}).attr("stroke","#000").attr("fill","#ea0c48").on("mouseover",function(e){J.show("Center: "+String(e[1]).substring(0,7)),this.setAttribute("r",5)}).on("mouseout",function(e){J.hide(),this.setAttribute("r",4)});var m={};m.means={path:T(o,l,d)},m[2015]={path:T(e[2015],l,d)},m.means.points=M(o,l,d,o),m[2015].points=M(e[2015],l,d,o);var y=u.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){R(y,t,"polar","2015",m,e,l,d,o,n,r)}),R(y,"means","polar","means",m,e,l,d,o,n,r);var g=y.append("div").classed("threshold-checkbox",!0);g.append("input").attr("type","checkbox").attr("id","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")).property("checked",!0).on("change",function(e){v.style("opacity",this.checked?1:0);var t=this.checked?"off":"on";ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:"threshold polar timeseries "+t,nonInteraction:!1})}),g.append("label").text("Thresholds").attr("for","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".",""))}function j(e){var t,n,r,a,o,i=0,c=0;for(r=46,t=0;t<e.keys.length;t++)if(a=e[e.keys[t]],a.length===r){for(o=0,n=0;n<r/2;n++)o+=a[n][1]-a[n+23][1];o/=23,i+=o}else c++;i=Math.abs(i)/(e.keys.length-c);var s,l,u,d,p,f=1e6,v=0,h=e.means;for(t=0;t<r/2;t++){for(l=0,u=0,p=0;p<r/2;p++)n=(t+p)%46,d=(n+23)%46,l+=parseInt(h[n],10),u+=parseInt(h[d],10);s=Math.abs(l-u),s<f&&(f=s,v=t)}var m=parseInt(h[v],10),y=parseInt(-h[v+23],10),g=Math.abs(i-m)-Math.abs(i-y);return Math.abs(-i-m)-Math.abs(-i-y)>g&&(v+=23),[[0,0],[8*v+3,i]]}function x(e,t){var n=Math.floor((t-3)/8);n>22&&(n-=23);var r,a,o,i=0;for(o=46,r=0;r<o;r++)a=(n+r)%o,i+=parseInt(e[a],10);var c,s,l=.15*i,u=.8*i,d=!1,p=!1;for(i=0,r=0;r<o;r++)a=(n+r)%o,i+=parseInt(e[a],10),!d&&i>l?(c=a,d=!0):!p&&i>u&&(s=a,p=!0);var f=[0,0];return[{label:"15%",data:[f,[8*c+3,100]]},{label:"80%",data:[f,[8*s+3,100]]}]}function I(e,t,n){return n.append("path").attr("class","line").attr("d",t(e))}function T(e,t,n){return n.append("path").datum(e).attr("class","line").attr("d",t)}function M(e,t,n,r){return n.selectAll("point").data(e).enter().append("circle").attr("r",2).attr("class","point").attr("transform",function(e,n){var r=Array.isArray(e)?e:[8*n+3,e];return"translate("+t([r]).slice(1).slice(0,-1)+")"}).attr("stroke","#000").attr("fill",function(e,t){return G(Array.isArray(e)?e[0].substring(0,4):0)}).on("mouseover",B).on("mouseout",N)}function B(e){var t=Array.isArray(e)?U(e[0])+": "+e[1]:"Average: "+e;J.show(t),this.setAttribute("r","4")}function N(e){J.hide(),this.setAttribute("r","2");var t=document.getElementsByClassName("graph-type-btn active")[0].getAttribute("data-type");ga("send","event",{eventCategory:"graph",eventAction:"hover",eventLabel:t+" tool tip",nonInteraction:!1})}function R(e,t,n,r,a,o,i,c,s,l,u){var d=e.append("div");d.append("input").attr("type","checkbox").attr("id",n+"-"+t+l.toString().replace(".","")+"-"+u.toString().replace(".","")).attr("value",t).property("checked",t===r).on("change",function(e){var t=this.value;this.checked?(a.hasOwnProperty(t)||(a[t]={}),a[t].path=I(o[t],i,c),a[t].points=M(o[t],i,c,s),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:t+" "+n+" timeseries on",nonInteraction:!1})):(a[t].path.remove(),a[t].points.remove(),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:t+" "+n+" timeseries off",nonInteraction:!1}))}),d.append("label").text("means"!==t?t:"Baseline").attr("for",n+"-"+t+l.toString().replace(".","")+"-"+u.toString().replace(".","")),d.append("div").style("background",G("means"!==t?t:0)).classed("graph-pip-example",!0)}function G(e){var t=["#ffe476","#036593","#116c91","#1e7390","#2c7b8e","#39828c","#4c8c8a","#5e9589","#719f87","#83a886","#95b183","#a6ba80","#b8c37c","#cacc79","#d6d279","#e2d779","#efdd78","#fbe378"];return 0===e?"#fff":t[parseInt(e,10)%t.length]}function D(e){e=e.toString();var t=e.substring(0,4),n=parseInt(e.substring(4,6),10)-1,r=e.substring(6,8);return new Date(t,n,r)}function F(e){return"string"==typeof e?(e=D(e),e.getDOY()):e}function U(e){return"Average"===e?e:(e=D(e),Y(e.getMonth())+" "+z(e.getDate())+", "+e.getFullYear())}function Y(e){return ee[e]}function z(e){var t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"}Object.defineProperty(t,"__esModule",{value:!0}),t.SetupGraphs=r,t.BindGraphEvents=o,t.getIcon=i,t.createMarker=s,t.createGraphRemover=l,t.HandleGraphTabChange=y,t.createGraphDiv=k;var H=n(27),$=n(22),K=n(25),q=n(24),W=n(2),J={},Z=L.Icon.extend({}),V=new Z({iconUrl:"imgs/blue_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),X=new Z({iconUrl:"imgs/orange_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),Q={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},ee={0:"Jan.",1:"Feb.",2:"Mar.",3:"Apr.",4:"May",5:"Jun.",6:"Jul.",7:"Aug.",8:"Sep.",9:"Oct.",10:"Nov.",11:"Dec."}},function(e,t,n){"use strict";function r(){d3.selectAll(".panel-top-btn").on("click",o)}function a(){return document.getElementsByClassName("panel-top-btn active")[0].getAttribute("data-active")}function o(){this.classList.contains("active")||(ga("send","event",{eventCategory:"tab",eventAction:"click",eventLabel:this.getAttribute("data-active"),nonInteraction:!1}),i(this.getAttribute("data-active")))}function i(e){s(),c(e),(0,p.updateShareUrl)()}function c(e){d3.select(".panel-top-btn[data-active='"+e+"']").classed("active",!0),document.getElementById("map-wrapper").classList.add(e),document.getElementById("right-panel").classList.add(e),d3.select(".panel-section-wrapper[data-active='"+e+"']").classed("active",!0),l(),u(),(0,d.updatePanelDragOverlayHeight)()}function s(){var e=d3.select(".panel-top-btn.active").attr("data-active");d3.selectAll("#map-wrapper, #right-panel").classed(e,!1),d3.selectAll(".panel-top-btn.active, .panel-section-wrapper.active").classed("active",!1)}function l(){var e=document.getElementById("right-panel").offsetWidth;document.getElementById("map-wrapper").style.paddingRight=e+"px"}function u(){var e=document.getElementById("right-panel"),t=e.style.width;if(t){var n=d3.select(e).style("min-width").slice(0,-2);parseInt(t.slice(0,-2),10)>parseInt(n,10)||(e.style.width="")}}Object.defineProperty(t,"__esModule",{value:!0}),t.BindTabEvents=r,t.GetActiveTab=a,t.HandleTabChange=i;var d=n(22),p=n(25)},function(e,t,n){"use strict";function r(e,t,n){n=n||e.opacity,t.style.top=d(n)+"px"}function a(e){var t=void 0!==e.opacity?e.opacity:1,n=document.createElement("div"),r=i(e,t),a=o("closed",e,r);return n.classList.add("opacity-slider-wrapper"),n.appendChild(r),n.appendChild(a),n}function o(e,t,n){var a=document.createElement("div"),o=document.createElement("img");return a.classList.add("opacity-icon-wrapper"),o.classList.add("opacity-icon"),o.classList.add(e),o.setAttribute("src","imgs/opacity-icon-"+e+"-64x64.png"),o.setAttribute("alt","Use this slider to adjust transparency for the "+t.name+" layer"),o.setAttribute("title","Use this slider to adjust transparency for the "+t.name+" layer"),a.appendChild(o),a.onclick=function(e){var a=n.getElementsByClassName("opacity-slider-handle")[0];(0,u.updateLayerOpacity)(t,0),r(t,a,0)},a}function i(e,t){var n=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div");return n.classList.add("opacity-slider-track-overlay"),a.classList.add("opacity-slider-track"),o.classList.add("opacity-slider-handle"),n.appendChild(a),n.appendChild(o),e.active&&r(e,o),c(n,e,t),n}function c(e,t,n){d3.select(e).call(d3.drag().on("start drag",function(){var n=e.getElementsByClassName("opacity-slider-handle")[0],a=s(e);(0,u.updateLayerOpacity)(t,a),r(t,n,a)}).on("end",function(){var n=s(e);ga("send","event",{eventCategory:"opacity slider",eventAction:"change",eventLabel:'{"'+t.name+'": "'+n+'"}',nonInteraction:!1}),(0,l.updateShareUrl)()}))}function s(e){var t=d3.mouse(e)[1];return d.invert(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.setOpacitySliderPosition=r,t.makeOpacitySlider=a;var l=n(25),u=n(23),d=d3.scaleLinear().domain([1,0]).range([0,90]).clamp(!0)},function(e,t){"use strict";function n(e){if(e.image){var t=r(),n=a(e),i=e.link?o(e.link):null;i?(i.appendChild(n),t.appendChild(i)):t.appendChild(n);var c=document.getElementsByClassName(e.location)[0],s=c.firstChild;c.insertBefore(t,s)}}function r(){var e=document.createElement("div");return d3.select(e).classed("project-logo",!0),e}function a(e){var t=document.createElement("img");return t.setAttribute("src",e.image),e.label&&(t.setAttribute("alt",e.label),t.setAttribute("title",e.label)),t}function o(e){var t=document.createElement("a");return t.setAttribute("href",e),t.setAttribute("target","_blank"),t.addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click",eventLabel:"landat logo",nonInteraction:!1})}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},,,,,,,,function(e,t){},function(e,t){"use strict";function n(){d3.selectAll(".mobile-menu-button").on("click",r)}function r(){var e=d3.select("#wrapper"),t=e.classed("mobile-menu-hidden");e.classed("mobile-menu-hidden",!t),a(t?"closing":"opening")}function a(e){ga("send","event",{eventCategory:"mobile menu",eventAction:"click",eventLabel:"Mobile Menu "+!e,nonInteraction:!1})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXhfYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA0ZjVlNGU5MzMwYmIyM2FlZTBjMSIsIndlYnBhY2s6Ly8vLi9qcy9iYXNlLmpzIiwid2VicGFjazovLy8uL2pzL3BhcnNlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvbGVhZmxldENvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ub2RlbnQtcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovLy8uL34vbm9kZW50LXJ1bnRpbWUvem91c2FuLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L34vc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L25vZGVudC1ydW50aW1lL3RoZW5hYmxlRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL34vbG9kYXNoLmRlYm91bmNlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3NlYXJjaEVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvZG9tVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Jlc3VsdExpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2JpbmdQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvcHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2VzcmlQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL29wZW5TdHJlZXRNYXBQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9wYW5lbC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9sYXllci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tYXAuanMiLCJ3ZWJwYWNrOi8vLy4vanMvc2hhcmUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvYmFzZWxheWVyLmpzIiwid2VicGFjazovLy8uL2pzL3BvaS5qcyIsIndlYnBhY2s6Ly8vLi9qcy9ncmFwaC5qcyIsIndlYnBhY2s6Ly8vLi9qcy90YWJzLmpzIiwid2VicGFjazovLy8uL2pzL29wYWNpdHlTbGlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vanMvbG9nby5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tb2JpbGUuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIl9wYXJzZXIiLCJfc2VhcmNoIiwiX3NlYXJjaDIiLCJfcGFuZWwiLCJfYmFzZWxheWVyIiwiX2dyYXBoIiwiX3RhYnMiLCJfbWFwIiwiX3NoYXJlIiwiX2xheWVyIiwiX2xvZ28iLCJfbG9nbzIiLCJfcG9pIiwiX21vYmlsZSIsIl9tb2JpbGUyIiwiQmFzZSIsImNvbmZpZyIsIlBhcnNlQ29uZmlnIiwiY2FsbGJhY2siLCJTZXR1cEdyYXBocyIsIkJpbmRUYWJFdmVudHMiLCJCaW5kQ29weUxpbmtFdmVudHMiLCJkYXRhIiwiQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnIiwibWFwIiwiQ3JlYXRlTWFwIiwiQ3JlYXRlQmFzZUxheWVycyIsImJhc2VsYXllcnMiLCJDcmVhdGVEZWZhdWx0TGF5ZXJzIiwibGF5ZXJzIiwiU2V0dXBQYW5lbCIsImxheW91dCIsImxvZ28iLCJ0YWIiLCJIYW5kbGVUYWJDaGFuZ2UiLCJncmFwaCIsIkhhbmRsZUdyYXBoVGFiQ2hhbmdlIiwiQmluZEdyYXBoRXZlbnRzIiwiQmluZFVwZGF0ZVNoYXJlVXJsIiwiU2V0dXBQb2ludHNPZkludGVyZXN0IiwicG9pcyIsInVwZGF0ZVNoYXJlVXJsIiwid2luZG93IiwiY29uZmlnRmlsZSIsIkdldENvbmZpZyIsIkdldEFqYXhPYmplY3QiLCJyZXNwb25zZUhhbmRsZXIiLCJ4bWxodHRwIiwiWE1MSHR0cFJlcXVlc3QiLCJBY3RpdmVYT2JqZWN0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInJlc3BvbnNlIiwib3BlbiIsInNlbmQiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInBhcnNlIiwiZm9ybWF0TWFwIiwiZm9ybWF0TGF5ZXJzIiwibGF5ZXJncm91cCIsImkiLCJkZWZhdWx0TWFwc2VydmVyVXJsIiwibWFwc2VydmVyVXJsIiwicHJvcCIsImhhc093blByb3BlcnR5IiwibGVuZ3RoIiwic2V0TWFwc2VydmVyVXJsIiwic2V0RGVmYXVsdExheWVyT3BhY2l0eSIsImRlZmF1bHRMYXllck9wYWNpdHkiLCJsYXllciIsIm9wYWNpdHkiLCJ1cmwiLCJDcmVhdGVTZWFyY2giLCJwcm92aWRlciIsIl9sZWFmbGV0R2Vvc2VhcmNoIiwiT3BlblN0cmVldE1hcFByb3ZpZGVyIiwic2VhcmNoQ29udHJvbCIsIkdlb1NlYXJjaENvbnRyb2wiLCJzaG93TWFya2VyIiwiYXV0b0NvbXBsZXRlIiwic2hvd1BvcHVwIiwiYWRkQ29udHJvbCIsInNlYXJjaEVsZW1lbnRzIiwic2VhcmNoRWxlbWVudCIsImVsZW1lbnRzIiwiTCIsIkRvbUV2ZW50Iiwib24iLCJjb250YWluZXIiLCJldiIsInN0b3BQcm9wYWdhdGlvbiIsInNlYXJjaEVudHJpZXMiLCJmb3JtIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImNoaWxkcmVuIiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiZ2EiLCJldmVudENhdGVnb3J5IiwiZXZlbnRBY3Rpb24iLCJldmVudExhYmVsIiwibm9uSW50ZXJhY3Rpb24iLCJ3aGljaCIsImtleUNvZGUiLCJfbGVhZmxldENvbnRyb2wiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiX3NlYXJjaEVsZW1lbnQiLCJfYmluZ1Byb3ZpZGVyIiwiX2VzcmlQcm92aWRlciIsIl9nb29nbGVQcm92aWRlciIsIl9vcGVuU3RyZWV0TWFwUHJvdmlkZXIiLCJfcHJvdmlkZXIiLCJMZWFmbGV0Q29udHJvbCIsIkNvbnRyb2wiLCJleHRlbmQiLCJFcnJvciIsIkxDb250cm9sIiwiX2xlbiIsImFyZ3VtZW50cyIsIm9wdGlvbnMiLCJBcnJheSIsIl9rZXkiLCJGdW5jdGlvbiIsInByb3RvdHlwZSIsImJpbmQiLCJhcHBseSIsImNvbmNhdCIsIl9ub2RlbnRSdW50aW1lIiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJzb3VyY2UiLCJrZXkiLCJfbG9kYXNoIiwiX2xvZGFzaDIiLCJfc2VhcmNoRWxlbWVudDIiLCJfcmVzdWx0TGlzdCIsIl9yZXN1bHRMaXN0MiIsIl9kb21VdGlscyIsIl9jb25zdGFudHMiLCJkZWZhdWx0T3B0aW9ucyIsInBvc2l0aW9uIiwic3R5bGUiLCJtYXJrZXIiLCJpY29uIiwiSWNvbiIsIkRlZmF1bHQiLCJkcmFnZ2FibGUiLCJtYXhNYXJrZXJzIiwicmV0YWluWm9vbUxldmVsIiwiYW5pbWF0ZVpvb20iLCJzZWFyY2hMYWJlbCIsIm5vdEZvdW5kTWVzc2FnZSIsIm1lc3NhZ2VIaWRlRGVsYXkiLCJ6b29tTGV2ZWwiLCJjbGFzc05hbWVzIiwiYnV0dG9uIiwibXNnYm94IiwiaW5wdXQiLCJhdXRvQ29tcGxldGVEZWxheSIsImluaXRpYWxpemUiLCJfdGhpcyIsInRoaXMiLCJtYXJrZXJzIiwiRmVhdHVyZUdyb3VwIiwiX29wdGlvbnMiLCJoYW5kbGVTdWJtaXQiLCJxdWVyeSIsIm9uU3VibWl0IiwiX3NlYXJjaEVsZW1lbnQkZWxlbWVuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjcmVhdGVFbGVtZW50IiwidGl0bGUiLCJocmVmIiwib25DbGljayIsInJlc3VsdExpc3QiLCJoYW5kbGVDbGljayIsIl9yZWYiLCJyZXN1bHQiLCJsYWJlbCIsImFwcGVuZENoaWxkIiwiYXV0b1NlYXJjaCIsInNlbGVjdFJlc3VsdCIsImNsZWFyUmVzdWx0cyIsIm9uQWRkIiwiX29wdGlvbnMyIiwiYWRkVG8iLCJyb290IiwiZ2V0Q29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsIm9uUmVtb3ZlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZWFyY2hFbGVtZW50JGVsZW1lbjIiLCJjb250YWlucyIsInJlbW92ZUNsYXNzTmFtZSIsImFkZENsYXNzTmFtZSIsImZvY3VzIiwiQVJST1dfRE9XTl9LRVkiLCJBUlJPV19VUF9LRVkiLCJpbmNsdWRlcyIsImxpc3QiLCJtYXgiLCJjb3VudCIsIm5leHQiLCJjb2RlIiwic2VsZWN0ZWQiLCJpZHgiLCJpdGVtIiwic2VsZWN0IiwiRVNDQVBFX0tFWSIsImNsZWFyIiwiUHJvbWlzZSIsIiRyZXR1cm4iLCIkZXJyb3IiLCJyZXN1bHRzIiwiU1BFQ0lBTF9LRVlTIiwic2VhcmNoIiwidGhlbiIsIiRhd2FpdF8xIiwicmVuZGVyIiwiJGFzeW5jYmluZCIsIiRhd2FpdF8yIiwic2hvd1Jlc3VsdCIsImtleXMiLCJfbGF5ZXJzIiwicmVtb3ZlTGF5ZXIiLCJhZGRNYXJrZXIiLCJjZW50ZXJNYXAiLCJmaXJlRXZlbnQiLCJsb2NhdGlvbiIsIl9vcHRpb25zMyIsIk1hcmtlciIsInkiLCJ4IiwiYmluZFBvcHVwIiwiYWRkTGF5ZXIiLCJvcGVuUG9wdXAiLCJfb3B0aW9uczQiLCJyZXN1bHRCb3VuZHMiLCJMYXRMbmdCb3VuZHMiLCJib3VuZHMiLCJpc1ZhbGlkIiwiZ2V0Qm91bmRzIiwiZml0Qm91bmRzIiwiYW5pbWF0ZSIsInNldFZpZXciLCJnZXRDZW50ZXIiLCJnZXRab29tIiwiX29wdGlvbnM1IiwiJGFzeW5jc3Bhd24iLCJwcm9taXNlUHJvdmlkZXIiLCJzZWxmIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJnZW5GIiwicmVzb2x2ZSIsInJlamVjdCIsInN0ZXAiLCJmbiIsImFyZyIsImdlbiIsImRvbmUiLCJ2IiwidGhyb3ciLCJzcmMiLCJ0b1N0cmluZyIsInQiLCJhcmdzIiwibWF0Y2giLCJyZSIsIm14IiwiZXhlYyIsInB1c2giLCJyZXZlcnNlIiwiZm9yRWFjaCIsInNsaWNlIiwiaW5kZXgiLCJzdWJzdHIiLCJyZXBsYWNlIiwiem91c2FuIiwidGhlbmFibGUiLCJjYXRjaGVyIiwiYm91bmRUaGVuIiwicmVzb2x2ZXIiLCJ0cmFtcG9saW5lIiwicyIsInUiLCJiIiwicSIsInVuZGVmaW5lZCIsInBvcCIsInIiLCJMYXp5VGhlbmFibGUiLCJFYWdlclRoZW5hYmxlIiwiVGhlbmFibGUiLCJFYWdlclRoZW5hYmxlRmFjdG9yeSIsImV4IiwicHJvY2VzcyIsInNldEltbWVkaWF0ZSIsIl90eXBlb2YiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwidGljayIsIlpvdXNhbiIsImZ1bmMiLCJtZSIsIlNUQVRFX0ZVTEZJTExFRCIsInlyZXQiLCJlcnIiLCJTVEFURV9SRUpFQ1RFRCIsInJlYXNvbiIsIm4iLCJuZXh0VGljayIsImYiLCJzZXRUaW1lb3V0Iiwic29vbiIsImNhbGxRdWV1ZSIsImZxIiwiZnFTdGFydCIsImJ1ZmZlclNpemUiLCJzcGxpY2UiLCJzdGF0ZSIsIlR5cGVFcnJvciIsImZpcnN0IiwicmEiLCJyciIsImwiLCJjbGllbnRzIiwib25GIiwib25SIiwiY2xpZW50IiwiYSIsInZhbCIsInoiLCJ2ZXJzaW9uIiwiZGVmYXVsdFNldFRpbW91dCIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwiY2FjaGVkU2V0VGltZW91dCIsInJ1bkNsZWFyVGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsImNsZWFyVGltZW91dCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluaW5nIiwiY3VycmVudFF1ZXVlIiwicXVldWUiLCJxdWV1ZUluZGV4IiwiZHJhaW5RdWV1ZSIsInRpbWVvdXQiLCJsZW4iLCJydW4iLCJJdGVtIiwiYXJyYXkiLCJub29wIiwiYnJvd3NlciIsImVudiIsImFyZ3YiLCJ2ZXJzaW9ucyIsImFkZExpc3RlbmVyIiwib25jZSIsIm9mZiIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsImJpbmRpbmciLCJuYW1lIiwiY3dkIiwiY2hkaXIiLCJkaXIiLCJ1bWFzayIsIlRpbWVvdXQiLCJjbGVhckZuIiwiX2lkIiwiX2NsZWFyRm4iLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJjbG9zZSIsInVucmVmIiwicmVmIiwiZW5yb2xsIiwibXNlY3MiLCJfaWRsZVRpbWVvdXRJZCIsIl9pZGxlVGltZW91dCIsInVuZW5yb2xsIiwiX3VucmVmQWN0aXZlIiwiYWN0aXZlIiwiX29uVGltZW91dCIsImNsZWFySW1tZWRpYXRlIiwiZ2xvYmFsIiwidGFzayIsInRhc2tzQnlIYW5kbGUiLCJuZXh0SGFuZGxlIiwicmVnaXN0ZXJJbW1lZGlhdGUiLCJoYW5kbGUiLCJydW5JZlByZXNlbnQiLCJjdXJyZW50bHlSdW5uaW5nQVRhc2siLCJkb2MiLCJkb2N1bWVudCIsImF0dGFjaFRvIiwiZ2V0UHJvdG90eXBlT2YiLCJwb3N0TWVzc2FnZSIsImltcG9ydFNjcmlwdHMiLCJwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzIiwib2xkT25NZXNzYWdlIiwib25tZXNzYWdlIiwibWVzc2FnZVByZWZpeCIsIk1hdGgiLCJyYW5kb20iLCJvbkdsb2JhbE1lc3NhZ2UiLCJpbmRleE9mIiwiYXR0YWNoRXZlbnQiLCJNZXNzYWdlQ2hhbm5lbCIsImNoYW5uZWwiLCJwb3J0MSIsInBvcnQyIiwiaHRtbCIsImRvY3VtZW50RWxlbWVudCIsInNjcmlwdCIsInJlbW92ZUNoaWxkIiwiaXNUaGVuYWJsZSIsInJlc29sdXRpb24iLCJob3ciLCJDaGFpbmVkIiwiX3VuY2hhaW5lZCIsInRoZW5DaGFpbiIsInJlcyIsInJlaiIsImNoYWluIiwiX3Jlc29sdmVyIiwiZGVib3VuY2UiLCJ3YWl0IiwiaW52b2tlRnVuYyIsInRpbWUiLCJsYXN0QXJncyIsInRoaXNBcmciLCJsYXN0VGhpcyIsImxhc3RJbnZva2VUaW1lIiwibGVhZGluZ0VkZ2UiLCJ0aW1lcklkIiwidGltZXJFeHBpcmVkIiwibGVhZGluZyIsInJlbWFpbmluZ1dhaXQiLCJ0aW1lU2luY2VMYXN0Q2FsbCIsImxhc3RDYWxsVGltZSIsInRpbWVTaW5jZUxhc3RJbnZva2UiLCJtYXhpbmciLCJuYXRpdmVNaW4iLCJtYXhXYWl0Iiwic2hvdWxkSW52b2tlIiwibm93IiwidHJhaWxpbmdFZGdlIiwidHJhaWxpbmciLCJjYW5jZWwiLCJmbHVzaCIsImRlYm91bmNlZCIsImlzSW52b2tpbmciLCJGVU5DX0VSUk9SX1RFWFQiLCJ0b051bWJlciIsImlzT2JqZWN0IiwibmF0aXZlTWF4IiwidHlwZSIsImlzT2JqZWN0TGlrZSIsImlzU3ltYm9sIiwib2JqZWN0VG9TdHJpbmciLCJzeW1ib2xUYWciLCJOQU4iLCJvdGhlciIsInZhbHVlT2YiLCJyZVRyaW0iLCJpc0JpbmFyeSIsInJlSXNCaW5hcnkiLCJ0ZXN0IiwicmVJc09jdGFsIiwiZnJlZVBhcnNlSW50IiwicmVJc0JhZEhleCIsInBhcnNlSW50IiwiZnJlZUdsb2JhbCIsImZyZWVTZWxmIiwib2JqZWN0UHJvdG8iLCJtaW4iLCJEYXRlIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJTZWFyY2hFbGVtZW50IiwiX3JlZiRoYW5kbGVTdWJtaXQiLCJfcmVmJHNlYXJjaExhYmVsIiwiX3JlZiRjbGFzc05hbWVzIiwiam9pbiIsInBsYWNlaG9sZGVyIiwib25JbnB1dCIsIm9uS2V5VXAiLCJvbktleVByZXNzIiwib25Gb2N1cyIsIm9uQmx1ciIsIl9lbGVtZW50cyIsImhhc0Vycm9yIiwiX2VsZW1lbnRzMiIsImJvZHkiLCJibHVyIiwiRU5URVJfS0VZIiwiZWxlbWVudCIsInBhcmVudCIsImVsIiwiY2xhc3NOYW1lIiwiY3JlYXRlU2NyaXB0RWxlbWVudCIsImNiIiwic2V0QXR0cmlidXRlIiwianNvbiIsImFkZCIsIkFSUk9XX0xFRlRfS0VZIiwiQVJST1dfUklHSFRfS0VZIiwiY3giLCJjbGFzc25hbWVzIiwidHJpbSIsIlJlc3VsdExpc3QiLCJfcmVmJGhhbmRsZUNsaWNrIiwiX2luaXRpYWxpc2VQcm9wcyIsInJlc3VsdEl0ZW0iLCJjaGlsZCIsImNsb25lTm9kZSIsImlubmVySFRNTCIsImZyb20iLCJsYXN0Q2hpbGQiLCJfcmVmMiIsInBhcmVudE5vZGUiLCJoYXNBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfcHJvdmlkZXIyIiwiUHJvdmlkZXIiLCJfQmFzZVByb3ZpZGVyIiwicHJvdG9jb2wiLCJqc29ucCIsInBhcmFtcyIsImdldFBhcmFtU3RyaW5nIiwicmVzb3VyY2VTZXRzIiwicmVzb3VyY2VzIiwicG9pbnQiLCJjb29yZGluYXRlcyIsImFkZHJlc3MiLCJmb3JtYXR0ZWRBZGRyZXNzIiwiYmJveCIsInJhdyIsIl9yZWYzIiwiZW5kcG9pbnQiLCJlbmNvZGVVUklDb21wb25lbnQiLCJyZXF1ZXN0IiwiZmV0Y2giLCJ0ZXh0IiwibG9jYXRpb25zIiwiZmVhdHVyZSIsImdlb21ldHJ5IiwiZXh0ZW50IiwieW1pbiIsInhtaW4iLCJ5bWF4IiwieG1heCIsInBhcmFtU3RyaW5nIiwibG5nIiwibGF0IiwiZm9ybWF0dGVkX2FkZHJlc3MiLCJ2aWV3cG9ydCIsInNvdXRod2VzdCIsIm5vcnRoZWFzdCIsImZvcm1hdCIsImxvbiIsImRpc3BsYXlfbmFtZSIsInBhcnNlRmxvYXQiLCJib3VuZGluZ2JveCIsIkdldEFjdGl2ZUxheWVyR3JvdXBzIiwibGF5ZXJHcm91cExheW91dCIsImZpbHRlciIsImxheWVyR3JvdXAiLCJtYWtlTGF5ZXJFbGVtcyIsIm1ha2VMYXllckdyb3VwcyIsIm1ha2VQYW5lbERyYWdnYWJsZSIsInNldFBhbmVsU2Nyb2xsSGFuZGxlciIsImJyb3dzZXJJc0ludGVybmV0RXhwbG9yZXIiLCJ1YSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImdldEVsZW1lbnRCeUlkIiwib25zY3JvbGwiLCJ1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0Iiwib3ZlcmxheSIsImQzIiwiZHJhZyIsInBhbmVsRHJhZ0V2ZW50SGFuZGxlciIsInVwZGF0ZVBhbmVsV2lkdGgiLCJuZXdIZWlnaHQiLCJwYW5lbCIsInBhbmVsT2Zmc2V0SGVpZ2h0IiwicHJvcGVydHkiLCJwYW5lbERyYWdPdmVybGF5IiwiaGVhZGVyIiwiY2xhc3NlZCIsImdyYXBoTGlzdCIsInNjcm9sbEhlaWdodCIsImxheWVyTGlzdCIsImhlaWdodCIsInBhbmVsTWluV2lkdGgiLCJwYW5lbENsaWVudFdpZHRoIiwid3JhcHBlciIsIndyYXBwZXJXaWR0aCIsImNsaWVudFdpZHRoIiwibWFwV3JhcHBlciIsIm1vdXNlWCIsInNvdXJjZUV2ZW50IiwieERlbHRhIiwibmV3UGFuZWxXaWR0aCIsInBhZGRpbmdSaWdodCIsInNlbGVjdEFsbCIsImVudGVyIiwiYXBwZW5kIiwiYXR0ciIsImVhY2giLCJsYXllckdyb3VwcyIsImxheWVyRGl2IiwibWFrZUNoZWNrYm94IiwibWFrZUxhYmVsIiwibWFrZURlc2NyaXB0aW9uIiwibm9kZSIsIm1ha2VMYXllclRvb2xzIiwidG9nZ2xlTGF5ZXIiLCJzbGlkZXJIYW5kbGUiLCJfb3BhY2l0eVNsaWRlciIsInNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbiIsIm9wYWNpdGl5IiwiaW5mbyIsImxheWVyVG9vbHNEaXYiLCJvcGFjaXR5U2xpZGVyIiwibWFrZU9wYWNpdHlTbGlkZXIiLCJsZWdlbmQiLCJtYWtlTGVnZW5kIiwibGF5ZXJUb29sc1dyYXBwZXIiLCJsZWdlbmRXcmFwcGVyIiwibGVnZW5kSW1nIiwiR2V0Q3VycmVudExheWVycyIsIl9jdXJyZW50X2xheWVycyIsImRlZmF1bHRMYXllcnMiLCJqIiwiZGVmYXVsdExheWVyIiwiZm91bmRMYXllciIsImVuYWJsZUxheWVyIiwiZGlzYWJsZUxheWVyIiwiR2V0TWFwIiwibWFwTGF5ZXIiLCJtYWtlV21zVGlsZUxheWVyIiwiYWRkTGF5ZXJUb0ludGVybmFsVHJhY2tlciIsIm1vdmVPdmVybGF5TGF5ZXJzVG9Ub3AiLCJfY3VycmVudF9sYXllcnNfb2JqZWN0cyIsImJyaW5nVG9Gcm9udCIsImhhc0xheWVyIiwicmVtb3ZlTGF5ZXJGcm9tSW50ZXJuYWxUcmFja2VyIiwibG9jIiwidXBkYXRlTGF5ZXJPcGFjaXR5IiwibmV3T3BhY2l0eSIsInNldE9wYWNpdHkiLCJ0aWxlTGF5ZXIiLCJ3bXMiLCJ0cmFuc3BhcmVudCIsImNycyIsIkNSUyIsIkVQU0c5MDA5MTMiLCJ0aWxlU2l6ZSIsIm1hcENvbmZpZyIsInNjcm9sbFdoZWVsWm9vbSIsImluaXRpYWxDZW50ZXIiLCJjZW50ZXIiLCJpbml0aWFsWm9vbSIsInpvb20iLCJjb250cm9sIiwiYXR0cmlidXRpb24iLCJzdHJpbmdpZnkiLCJzZXRTaGFyZVVybCIsIm1ha2VTaGFyZVVybCIsIm1ha2VDZW50ZXJTdHJpbmciLCJtYWtlWm9vbVN0cmluZyIsIm1ha2VMYXllclN0cmluZyIsIm1ha2VMYXllckdyb3Vwc1N0cmluZyIsIm1ha2VCYXNlTGF5ZXJTdHJpbmciLCJtYWtlUG9pbnRzT2ZJbnRlcmVzdFN0cmluZyIsIm1ha2VBY3RpdmVUYWJTdHJpbmciLCJtYWtlQWN0aXZlR3JhcGhUYWJTdHJpbmciLCJzZXRDb3B5TGlua1VybCIsInNldFNvY2lhbFVybHMiLCJzaGFyZSIsInBhcnNlU2hhcmVVcmwiLCJhZGRMYXllclNldHRpbmdzVG9Db25maWciLCJhZGRCYXNlTGF5ZXJTZXR0aW5nc1RvQ29uZmlnIiwiYWRkUG9pbnRzT2ZJbnRlcmVzdFRvQ29uZmlnIiwiYWRkTGF5ZXJHcm91cFNldHRpbmdzVG9Db25maWciLCJoaXN0b3J5IiwicmVwbGFjZVN0YXRlIiwiaGFuZGxlQm9keUNsaWNrIiwiaGFuZGxlU2hhcmVMaW5rQnV0dG9uQ2xpY2siLCJoYW5kbGVTaGFyZUxpbmtVcmxDbGljayIsImhhbmRsZVNoYXJlTGlua0Nsb3NlQnV0dG9uQ2xpY2siLCJub2RlUGF0aCIsImdldERvbVBhdGgiLCJ0b0Nsb3NlUG9wdXAiLCJoYW5kbGVDb3B5TGlua0Nsb3NlIiwicGF0aCIsInNoYXJlUG9wdXAiLCJoYW5kbGVDb3B5TGlua09wZW4iLCJzZWxlY3RDb3B5TGlua1VybCIsInRvZ2dsZSIsInNoYXJlSW5wdXQiLCJzZXRTZWxlY3Rpb25SYW5nZSIsInNvY2lhbExpbmsiLCJuZXdVcmwiLCJtYW5nbGVQYXJhbVN0cmluZyIsInNvY2lhbExpbmtzIiwib3BhY2l0eVZhbHMiLCJjdXJyZW50TGF5ZXJzIiwiZWFjaExheWVyIiwiY3VycmVudExheWVyIiwiQkFTRV9MQVlFUl9UWVBFIiwiZCIsIkdldEFsbFBvaW50c09mSW50ZXJlc3QiLCJwb2lTdHJpbmciLCJwb2kiLCJnZXRQYXJhbXNBcnJheSIsIm1ha2VLZXllZFBhcmFtc09iamVjdCIsImZvcm1hdFBhcmFtcyIsInN1YnN0cmluZyIsInVubWFuZ2xlUGFyYW1TdHJpbmciLCJzcGxpdCIsInBhcmFtc0FyciIsInBhcmFtUGFpciIsInBhcnNlZFBhcmFtcyIsImZvcm1hdENlbnRlclBhcmFtIiwiZm9ybWF0TGF5ZXJQYXJhbSIsImZvcm1hdEJhc2VMYXllclBhcmFtIiwiZm9ybWF0UG9pbnRzT2ZJbnRlcmVzdFBhcmFtIiwiZm9ybWF0TGF5ZXJHcm91cHNQYXJhbSIsImxheWVySWQiLCJmb3JtYXR0ZWRMYXllcnMiLCJlbmFibGVkTGF5ZXJzIiwic3RyIiwibGF5ZXJHcm91cFNldHRpbmdzIiwiYWN0aXZlTGF5ZXJHcm91cElkcyIsInNoYXJlTGF5ZXJTZXR0aW5ncyIsImVuYWJsZWRMYXllciIsInNoYXJlQmFzZUxheWVyU2V0dGluZ3MiLCJiYXNlbGF5ZXIiLCJsYXllckNvbmZpZyIsIl9iYXNlbGF5ZXJzIiwiYmFzZUxheWVyIiwiY3JlYXRlQmFzZUxheWVyIiwiY3JlYXRlQmFzZUxheWVyVUkiLCJiYXNlVUkiLCJiYXNlV3JhcHBlciIsImJhc2VJbWciLCJiYXNlTGFiZWwiLCJpbWFnZSIsInRleHRDb250ZW50IiwiaGFuZGxlQmFzZUNsaWNrIiwibGF5ZXJpZCIsInRvZ2dsZUFjdGl2ZUJhc2VVSSIsInJlbW92ZUN1cnJlbnRCYXNlTGF5ZXIiLCJhZGROZXdCYXNlTGF5ZXJUb01hcCIsImJhc2VVSUVsZW0iLCJicmluZ1RvQmFjayIsIm1ha2VCYXNlTGF5ZXJPcHRpb25zIiwic3ViZG9tYWlucyIsIl9wb2ludHNfb2ZfaW50ZXJlc3QiLCJBZGRQb2ludE9mSW50ZXJlc3RUb1RyYWNrZXIiLCJuZXdQb2lzIiwiQWRkTXVsdGlwbGVQb2ludHNPZkludGVyZXN0IiwiU2V0dXBQb2ludE9mSW50ZXJlc3RVSSIsIlJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyIiwicG9pVG9SZW1vdmUiLCJkaXYiLCJjcmVhdGVHcmFwaERpdiIsImNyZWF0ZU1hcmtlciIsImdyYXBoRGl2IiwiY3JlYXRlR3JhcGhSZW1vdmVyIiwic2V0SWNvbiIsImdldEljb24iLCJoYW5kbGVNYXJrZXJNb3VzZUV2ZW50Iiwib3JpZ2luYWxFdmVudCIsInNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGgiLCJ0cmlnZ2VyR3JhcGhBbmltYXRpb24iLCJyaWdodFBhbmVsIiwic2Nyb2xsVG9wIiwib2Zmc2V0VG9wIiwiUmVtb3ZlUG9pbnRPZkludGVyZXN0VUkiLCJoYW5kbGVHcmFwaFR5cGVCdG5DbGljayIsImV4dGVuZERhdGVNb2R1bGUiLCJ0aXAiLCJpc0xlYXBZZWFyIiwieWVhciIsImdldEZ1bGxZZWFyIiwiZ2V0RE9ZIiwiZGF5Q291bnQiLCJtbiIsImdldE1vbnRoIiwiZG4iLCJnZXREYXRlIiwiZGF5T2ZZZWFyIiwiaGFuZGxlTWFwQ2xpY2siLCJob3Zlckljb24iLCJncmFwaEljb24iLCJsYXRsbmciLCJlbGVtIiwiY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSIsImlubmVyVGV4dCIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImhhbmRsZUdyYXBoRGF0YVJlc3BvbnNlIiwiZHJhd0dyYXBoIiwiZ2V0RGF0YSIsIm9SZXEiLCJzcGxpdERhdGEiLCJyZXByb2Nlc3NEYXRhIiwib3JpZ2RhdGEiLCJrZXlzVG9CZURlbGV0ZWQiLCJkYXRhRm9yTWVhbnMiLCJtZWFuIiwiY29tcHV0ZUF2ZXJhZ2UiLCJhcnIiLCJzdW0iLCJhY3RpdmVUeXBlIiwiZ3JhcGhUeXBlIiwiaXNHcmFwaExpc3RFbXB0eSIsIm9sZEFjdGl2ZUdyYXBoRWxlbUhlaWdodCIsIm9sZEFjdGl2ZUdyYXBoSW5mb0hlaWdodCIsInJpZ2h0UGFuZWxTY3JvbGxUb3AiLCJkaXNhYmxlQWN0aXZlR3JhcGhUYWIiLCJlbmFibGVHcmFwaFRhYiIsImFkanVzdFNjcm9sbFBvc2l0aW9uIiwib2xkR3JhcGhJbmZvSGVpZ2h0Iiwib2xkR3JhcGhFbGVtSGVpZ2h0Iiwib2xkUmlnaHRQYW5lbFNjcm9sbFRvcCIsIm5ld0dyYXBoSW5mb0hlaWdodCIsIm5ld0dyYXBoRWxlbUhlaWdodCIsIm5ld0dyYXBoRWxlbUhlaWdodFNjYWxlIiwibmV3UmlnaHRQYW5lbFNjcm9sbFRvcCIsImFjdGl2ZUVsZW0iLCJhY3RpdmVDbGFzcyIsImxhdFNob3J0Iiwicm91bmRGbG9hdCIsImxuZ1Nob3J0Iiwiem9vbVRvTWFya2VyQnV0dG9uIiwibWFrZVpvb21Ub01hcE1hcmtlckJ1dHRvbiIsImNvbnRlbnQiLCJjcmVhdGVUZXh0Tm9kZSIsImNvbnRlbnREaXYiLCJvbmNsaWNrIiwicGFuVG8iLCJyZXByb2Nlc3NlZERhdGEiLCJtYWtlVXBEb3duTGluZUdyYXBoIiwibWFrZVVwRG93bk92ZXJsYXBpbmdMaW5lR3JhcGhXaXRoQ2hlY2tib3hlcyIsImRyYXdVcERvd25Qb2xhcldpdGhDaGVja2JveGVzQW5kVGhyZXNob2xkcyIsIm51bWJlciIsImRlY2ltYWxQbGFjZXMiLCJyb3VuZCIsInBvdyIsImF2ZXJhZ2VzIiwibWFyZ2luIiwidG9wIiwicmlnaHQiLCJib3R0b20iLCJsZWZ0Iiwid2lkdGgiLCJzY2FsZVRpbWUiLCJyYW5nZSIsImRvbWFpbiIsInBhcnNlRGF0ZSIsInNjYWxlTGluZWFyIiwieEF4aXMiLCJheGlzQm90dG9tIiwidGlja3MiLCJ0aWNrRm9ybWF0IiwieUF4aXMiLCJheGlzTGVmdCIsInZhbHVlbGluZSIsImxpbmUiLCJzdmciLCJkcmF3TGluZWFyUGF0aCIsImRyYXdMaW5lYXJQb2ludHMiLCJmb3JtYXRNb250aFRpY2siLCJNT05USF9MQUJFTFMiLCJjaGFydHMiLCJtZWFucyIsInRpY2tWYWx1ZXMiLCJpc0FycmF5IiwicGFyc2VKdWxpYW5EYXkiLCJpbnB1dHdyYXBwZXIiLCJjcmVhdGVDaGVja2JveCIsInJhZGl1cyIsImZpbmRQb2xhckNlbnRlciIsInRocmVzaG9sZHMiLCJmaW5kUG9sYXJUaHJlc2hvbGRzIiwicmFkaWFsTGluZSIsImFuZ2xlIiwiUEkiLCJnciIsImdhX2EiLCJ0aHJlc2hvbGRFbGVtIiwiZGF5IiwiY2VudGVyRGF5IiwiZHJhd1BvbGFyUGF0aCIsInNob3ciLCJoaWRlIiwicG9pbnRzIiwidGhyZXNob2xkQ2hlY2tib3giLCJjaGVja2VkIiwib2Zmb24iLCJ0b3RhbFN1bSIsImluY29tcGxldGVZZWFycyIsImFicyIsImNoZWNrRGlmZiIsImxlZnRBcmVhIiwicmlnaHRBcmVhIiwiayIsImNvdW50ZXIiLCJhcmVhRGlmZiIsImFyZWFJbmRleCIsImF2Z3MiLCJmaXJzdFJhZGl1cyIsInNlY29uZFJhZGl1cyIsImZpcnN0RGlmZiIsInN0YXJ0RGF5Iiwic3RhcnRJbmRleCIsImZsb29yIiwiZmlmdGVlbkluZGV4IiwiZWlnaHR5SW5kZXgiLCJmaWZ0ZWVuVGhyZXNob2xkIiwiZWlnaHR5VGhyZXNob2xkIiwiZmlmdGVlbkluZGV4Rm91bmQiLCJlaWdodHlJbmRleEZvdW5kIiwiY2lyY2xlQ2VudGVyIiwiZGF0dW0iLCJwdWxsRGlzdGluY3RDb2xvciIsImhhbmRsZVBvaW50TW91c2VvdmVyIiwiaGFuZGxlUG9pbnRNb3VzZW91dCIsInRpcFN0cmluZyIsImZvcm1hdERhdGUiLCJjaGVja2JveFdyYXBwZXIiLCJuZXdZZWFyIiwiY29sb3JSYW1wIiwiZGF0ZSIsIm1vbnRoIiwiZm9ybWF0TW9udGgiLCJvcmRpbmFsX3N1ZmZpeF9vZiIsIkZPUk1BVFRFRF9NT05USF9MQUJFTFMiLCJiYXNlSWNvbiIsImljb25VcmwiLCJzaGFkb3dVcmwiLCJpY29uU2l6ZSIsImljb25BbmNob3IiLCJwb3B1cEFuY2hvciIsInNoYWRvd1NpemUiLCIwIiwiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5IiwiMTAiLCIxMSIsImhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrIiwiR2V0QWN0aXZlVGFiIiwibmV3Q2xhc3MiLCJkaXNhYmxlQWN0aXZlVGFiIiwiZW5hYmxlVGFiIiwidG9nZ2xlTWFwUGFkZGluZyIsInJlc2V0UGFuZWxXaWR0aCIsIm9mZnNldFdpZHRoIiwib3BhY2l0eVNjYWxlIiwibGF5ZXJPcGFjaXR5Iiwic2xpZGVyVHJhY2tPdmVybGF5IiwibWFrZVNsaWRlclRyYWNrIiwiaWNvbldyYXBwZXJDbG9zZWQiLCJtYWtlT3BhY2l0eUljb25XcmFwcGVyIiwidHJhY2siLCJzZXREcmFnRXZlbnRMaXN0ZW5lciIsImNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zIiwieVBvcyIsIm1vdXNlIiwiaW52ZXJ0IiwiY2xhbXAiLCJDcmVhdGVMb2dvIiwibG9nb2RhdGEiLCJsb2dvV3JhcHBlciIsImNyZWF0ZUxvZ29XcmFwcGVyIiwibG9nb0ltYWdlIiwiY3JlYXRlTG9nb0ltYWdlIiwibG9nb0xpbmsiLCJsaW5rIiwiY3JlYXRlTG9nb0xpbmsiLCJpbnNlcnRFbGVtZW50IiwiZXhpc3RpbmdDaGlsZCIsImZpcnN0Q2hpbGQiLCJpbnNlcnRCZWZvcmUiLCJCaW5kTW9iaWxlTWVudUV2ZW50cyIsImhhbmRsZU1vYmlsZU1lbnVCdG5DbGljayIsInN0YXR1cyIsImRpc3BhY3RNb2JpbGVNZW51QnRuQ2xpY2tBbmFseXRpY3MiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FFLFdBQ0FFLEdBQUFKLEVBQ0FLLFFBQUEsRUFVQSxPQU5BUCxHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBNEJBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLEdBR0FWLEVBQUEsS0RNTSxTQUFTSSxFQUFRRCxFQUFTSCxHQUUvQkksRUFBT0QsUUFBVUgsRUFB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bXdIQ0MsYTZCbndIYSxHQUNkLEk3Qm13SENDLFk2Qm53SFksR0FBSSxNQUdqQnhKLEVBQUEsR0FBZ0JrSixJN0Jvd0hmQyxRNkJsd0hELHVCN0Jtd0hDQyxVNkJsd0hELHlCN0Jtd0hDQyxVNkJud0hVLEdBQ1gsSTdCbXdIQ0MsWTZCbndIWSxHQUNiLEk3Qm13SENDLGE2Qm53SGEsR0FDZCxJN0Jtd0hDQyxZNkJud0hZLEdBR2pCLE1BNjVCSXZFLEc3QnFwSEN3RSxFNkJucEhELE03Qm9wSENDLEU2Qm5wSEQsTTdCb3BIQ0MsRTZCbnBIRCxNN0JvcEhDQyxFNkJucEhELE03Qm9wSENDLEU2Qm5wSEQsTTdCb3BIQ0MsRTZCbnBIRCxNN0JvcEhDQyxFNkJucEhELE03Qm9wSENDLEU2Qm5wSEQsTTdCb3BIQ0MsRTZCbnBIRCxNN0JvcEhDQyxFNkJucEhELE03Qm9wSENDLEc2Qm5wSEQsTTdCb3BIQ0MsRzZCcHBIRyxPQUdKbkIsSTdCcXBIQ1EsRTZCbnBIRCxPN0JvcEhDQyxFNkJucEhELE83Qm9wSENDLEU2Qm5wSEQsTzdCb3BIQ0MsRTZCbnBIRCxPN0JvcEhDQyxFNkJucEhELE03Qm9wSENDLEU2Qm5wSEQsTzdCb3BIQ0MsRTZCbnBIRCxPN0JvcEhDQyxFNkJucEhELE83Qm9wSENDLEU2Qm5wSEQsTzdCb3BIQ0MsRTZCbnBIRCxPN0JvcEhDQyxHNkJucEhELE83Qm9wSENDLEc2QnBwSEcsUzdCeXBIRixTQUFTeitCLEVBQVFELEVBQVNILEdBRS9CLFk4QmxwSk0sU0FBQXNDLEs5QmdxSkYwa0IsRzhCL3BKRTBCLFVBQVUsa0JBQWtCL2hCLEdBQUcsUUFDckNtNEIsR0FFTSxRQUFBQyxLOUJncUpGLE04Qi9wSk16a0IsVUFBU3JULHVCQUF1Qix3QkFBd0IsR0FBRzZiLGFBQ3JFLGVBRUQsUUFBU2djLEtBRUR2ekIsS0FBS25FLFVBQVVvRyxTQUFTLFk5QmtxSjNCbEcsRzhCL3BKRSxPQUFRLFM5QmdxSk5DLGM4QjlwSkgsTTlCK3BKR0MsWThCOXBKSCxROUIrcEpHQyxXOEIvcEpTOEQsS0FBS3VYLGFB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T0FBUSxTakNpN0pOQyxjaUMvNkpELGNqQ2c3SkNDLFlpQy82SkQsUWpDZzdKQ0MsV2lDaDdKVyxnQkFDWnk1QixFakNnN0pDeDVCLGdCaUM5NkpSLElqQzA1SkEzRyxPQUFPQyxlQUFlYixFQUFTLGNBQzNCYyxPQUFPLElBRVhkLEVBQVFXLFFBQVVrZ0MiLCJmaWxlIjoiaW5kZXhfYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3BhcnNlciA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX3NlYXJjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX3NlYXJjaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2gpO1xuXHRcblx0dmFyIF9wYW5lbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0dmFyIF9iYXNlbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0XG5cdHZhciBfZ3JhcGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0XG5cdHZhciBfdGFicyA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciBfbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0XG5cdHZhciBfbG9nbyA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXHRcblx0dmFyIF9sb2dvMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvZ28pO1xuXHRcblx0dmFyIF9wb2kgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdHZhciBfbW9iaWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdFxuXHR2YXIgX21vYmlsZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tb2JpbGUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBjc3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KTtcblx0XG5cdC8vIERvZXMgbm90IHJlbHkgb24gbWFwIG9iamVjdCBvciBjb25maWcgZmlsZVxuXHR2YXIgQmFzZSA9IGZ1bmN0aW9uIEJhc2UoY29uZmlnKSB7XG5cdCAgICAoMCwgX3BhcnNlci5QYXJzZUNvbmZpZykoY29uZmlnLCBjYWxsYmFjayk7XG5cdCAgICAoMCwgX2dyYXBoLlNldHVwR3JhcGhzKSgpO1xuXHQgICAgKDAsIF90YWJzLkJpbmRUYWJFdmVudHMpKCk7XG5cdCAgICAoMCwgX3NoYXJlLkJpbmRDb3B5TGlua0V2ZW50cykoKTtcblx0ICAgICgwLCBfbW9iaWxlMi5kZWZhdWx0KSgpO1xuXHR9O1xuXHRcblx0Ly8gRG9lcyByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcblx0dmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2soZGF0YSkge1xuXHQgICAgKDAsIF9zaGFyZS5BZGRTaGFyZVNldHRpbmdzVG9Db25maWcpKGRhdGEpO1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkNyZWF0ZU1hcCkoZGF0YS5tYXApO1xuXHQgICAgKDAsIF9iYXNlbGF5ZXIuQ3JlYXRlQmFzZUxheWVycykobWFwLCBkYXRhLmJhc2VsYXllcnMpO1xuXHQgICAgKDAsIF9sYXllci5DcmVhdGVEZWZhdWx0TGF5ZXJzKShkYXRhLmxheWVycywgZGF0YVtcImFjdGl2ZS1sYXllcnNcIl0pO1xuXHQgICAgKDAsIF9wYW5lbC5TZXR1cFBhbmVsKShkYXRhLmxheWVycywgZGF0YS5sYXlvdXQpO1xuXHQgICAgKDAsIF9zZWFyY2gyLmRlZmF1bHQpKG1hcCk7XG5cdCAgICAoMCwgX2xvZ28yLmRlZmF1bHQpKGRhdGEubG9nbyk7XG5cdCAgICBpZiAoZGF0YS50YWIpICgwLCBfdGFicy5IYW5kbGVUYWJDaGFuZ2UpKGRhdGEudGFiKTtcblx0ICAgIGlmIChkYXRhLmdyYXBoKSAoMCwgX2dyYXBoLkhhbmRsZUdyYXBoVGFiQ2hhbmdlKShkYXRhLmdyYXBoKTtcblx0ICAgICgwLCBfZ3JhcGguQmluZEdyYXBoRXZlbnRzKShtYXApO1xuXHQgICAgKDAsIF9zaGFyZS5CaW5kVXBkYXRlU2hhcmVVcmwpKG1hcCk7XG5cdCAgICAoMCwgX3BvaS5TZXR1cFBvaW50c09mSW50ZXJlc3QpKG1hcCwgZGF0YS5wb2lzKTtcblx0ICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH07XG5cdFxuXHR3aW5kb3cuQmFzZSA9IEJhc2U7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7IEJhc2U6IEJhc2UgfTtcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5QYXJzZUNvbmZpZyA9IFBhcnNlQ29uZmlnO1xuXHRleHBvcnRzLkdldEFqYXhPYmplY3QgPSBHZXRBamF4T2JqZWN0O1xuXHQvKipcblx0ICogUGFyc2VzIGEgY29uZmlnIGZpbGUuIFNpbmNlIHRoZSBwcm9jZXNzIHRvIGdldCBleHRlcm5hbCBmaWxlc1xuXHQgKiB1c2VzIEFKQVggeW91IG5lZWQgdG8gcGFzcyBhIGNhbGxiYWNrIHRvIGhhbmRsZSB0aGUgbmV4dCBzdGVwc1xuXHQgKiBvZiB1c2luZyB0aGUgY29uZmlnIGZpbGUsIHNpbmNlIHdlIGRvIG5vdCBrbm93IGhvdyBsb25nIGl0XG5cdCAqIHdpbGwgdGFrZSB0byBncmFiIHRoZSBmaWxlLlxuXHQgKi9cblx0ZnVuY3Rpb24gUGFyc2VDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcblx0ICAgIEdldENvbmZpZyhjb25maWdGaWxlLCBjYWxsYmFjayk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEdldEFqYXhPYmplY3QocmVzcG9uc2VIYW5kbGVyKSB7XG5cdCAgICB2YXIgeG1saHR0cDtcblx0ICAgIGlmICghd2luZG93LlhNTEh0dHBSZXF1ZXN0ICYmIHdpbmRvdy5BY3RpdmVYT2JqZWN0KSB7XG5cdCAgICAgICAgeG1saHR0cCA9IG5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdChcIk1TWE1MMi5YTUxIVFRQLjMuMFwiKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHQgICAgfVxuXHQgICAgeG1saHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHhtbGh0dHAucmVhZHlTdGF0ZSA9PT0gNCkge1xuXHQgICAgICAgICAgICByZXNwb25zZUhhbmRsZXIoeG1saHR0cC5yZXNwb25zZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiB4bWxodHRwO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBHZXRDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcblx0ICAgIHZhciB4bWxodHRwID0gR2V0QWpheE9iamVjdChmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0ICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlSGFuZGxlcihyZXNwb25zZSk7XG5cdCAgICAgICAgY2FsbGJhY2soZGF0YSk7XG5cdCAgICB9KTtcblx0ICAgIHhtbGh0dHAub3BlbihcIkdFVFwiLCBjb25maWdGaWxlLCB0cnVlKTtcblx0ICAgIHhtbGh0dHAuc2VuZCgpO1xuXHQgICAgY29uc29sZS5sb2coXCJoaVwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVzcG9uc2VIYW5kbGVyKHJlc3BvbnNlKSB7XG5cdCAgICByZXNwb25zZSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xuXHQgICAgZm9ybWF0TWFwKHJlc3BvbnNlKTtcblx0ICAgIGZvcm1hdExheWVycyhyZXNwb25zZSk7XG5cdCAgICByZXR1cm4gcmVzcG9uc2U7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdE1hcChkYXRhKSB7XG5cdCAgICBpZiAoIWRhdGEubWFwKSBkYXRhLm1hcCA9IHt9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRMYXllcnMoZGF0YSkge1xuXHQgICAgdmFyIGxheWVycyA9IGRhdGEubGF5ZXJzO1xuXHQgICAgdmFyIGRlZmF1bHRNYXBzZXJ2ZXJVcmwgPSBkYXRhLm1hcHNlcnZlclVybDtcblx0ICAgIHZhciBkZWZhdWx0RW5hYmxlZExheWVycyA9IGRhdGFbXCJhY3RpdmUtbGF5ZXJzXCJdO1xuXHQgICAgdmFyIGxheWVyZ3JvdXA7XG5cdCAgICB2YXIgaTtcblx0XG5cdCAgICBmb3IgKHZhciBwcm9wIGluIGxheWVycykge1xuXHQgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG5cdCAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGF5ZXJncm91cC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBzZXRNYXBzZXJ2ZXJVcmwobGF5ZXJncm91cFtpXSwgZGVmYXVsdE1hcHNlcnZlclVybCk7XG5cdCAgICAgICAgICAgIHNldERlZmF1bHRMYXllck9wYWNpdHkobGF5ZXJncm91cFtpXSwgZGF0YS5kZWZhdWx0TGF5ZXJPcGFjaXR5KTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldERlZmF1bHRMYXllck9wYWNpdHkobGF5ZXIsIG9wYWNpdHkpIHtcblx0ICAgIGxheWVyLm9wYWNpdHkgPSBsYXllci5vcGFjaXR5IHx8IG9wYWNpdHk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldE1hcHNlcnZlclVybChsYXllciwgdXJsKSB7XG5cdCAgICBsYXllci51cmwgPSBsYXllci51cmwgfHwgdXJsO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBDcmVhdGVTZWFyY2g7XG5cdFxuXHR2YXIgX2xlYWZsZXRHZW9zZWFyY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0ZnVuY3Rpb24gQ3JlYXRlU2VhcmNoKG1hcCkge1xuXHQgICAgdmFyIHByb3ZpZGVyID0gbmV3IF9sZWFmbGV0R2Vvc2VhcmNoLk9wZW5TdHJlZXRNYXBQcm92aWRlcigpO1xuXHRcblx0ICAgIHZhciBzZWFyY2hDb250cm9sID0gbmV3IF9sZWFmbGV0R2Vvc2VhcmNoLkdlb1NlYXJjaENvbnRyb2woe1xuXHQgICAgICAgIHByb3ZpZGVyOiBwcm92aWRlcixcblx0ICAgICAgICBzaG93TWFya2VyOiBmYWxzZSxcblx0ICAgICAgICBhdXRvQ29tcGxldGU6IHRydWUsXG5cdCAgICAgICAgc2hvd1BvcHVwOiBmYWxzZVxuXHQgICAgfSk7XG5cdFxuXHQgICAgbWFwLmFkZENvbnRyb2woc2VhcmNoQ29udHJvbCk7XG5cdFxuXHQgICAgdmFyIHNlYXJjaEVsZW1lbnRzID0gc2VhcmNoQ29udHJvbC5zZWFyY2hFbGVtZW50LmVsZW1lbnRzO1xuXHRcblx0ICAgIEwuRG9tRXZlbnQub24oc2VhcmNoRWxlbWVudHMuY29udGFpbmVyLCBcImNsaWNrXCIsIGZ1bmN0aW9uIChldikge1xuXHQgICAgICAgIEwuRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKGV2KTtcblx0XG5cdCAgICAgICAgdmFyIHNlYXJjaEVudHJpZXMgPSBzZWFyY2hFbGVtZW50cy5mb3JtLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Jlc3VsdHMnKVswXS5jaGlsZHJlbjtcblx0XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWFyY2hFbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGlmIChldi50YXJnZXQgPT09IHNlYXJjaEVudHJpZXNbaV0pIHtcblx0ICAgICAgICAgICAgICAgIHNlYXJjaEVsZW1lbnRzLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIHNlYXJjaCBieSBhZGRyZXNzXG5cdCAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuXHQgICAgICAgICAgICBldmVudEFjdGlvbjogJ3NlYXJjaCcsXG5cdCAgICAgICAgICAgIGV2ZW50TGFiZWw6ICdjbGljaycsXG5cdCAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgIH0pO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgTC5Eb21FdmVudC5vbihzZWFyY2hFbGVtZW50cy5jb250YWluZXIsIFwia2V5ZG93blwiLCBmdW5jdGlvbiAoZXYpIHtcblx0ICAgICAgICBMLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbihldik7XG5cdFxuXHQgICAgICAgIGlmIChldi53aGljaCA9PSAxMyB8fCBldi5rZXlDb2RlID09IDEzKSB7XG5cdCAgICAgICAgICAgIHNlYXJjaEVsZW1lbnRzLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblx0XG5cdCAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBzZWFjcmNoIGJ5IGFkZHJlc3Ncblx0ICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcblx0ICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnc2VhcmNoIGFkZHJlc3MnLFxuXHQgICAgICAgICAgICAgICAgZXZlbnRMYWJlbDogZXYudGFyZ2V0LnZhbHVlLFxuXHQgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbGVhZmxldENvbnRyb2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdHZW9TZWFyY2hDb250cm9sJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGVhZmxldENvbnRyb2wpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfc2VhcmNoRWxlbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdTZWFyY2hFbGVtZW50Jywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoRWxlbWVudCkuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9iaW5nUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnQmluZ1Byb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmluZ1Byb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX2VzcmlQcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdFc3JpUHJvdmlkZXInLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lc3JpUHJvdmlkZXIpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfZ29vZ2xlUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnR29vZ2xlUHJvdmlkZXInLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nb29nbGVQcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9vcGVuU3RyZWV0TWFwUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnT3BlblN0cmVldE1hcFByb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb3BlblN0cmVldE1hcFByb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1Byb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfXJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBMZWFmbGV0Q29udHJvbDtcblx0XG5cdHZhciBfbG9kYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHR2YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXHRcblx0dmFyIF9zZWFyY2hFbGVtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHR2YXIgX3NlYXJjaEVsZW1lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoRWxlbWVudCk7XG5cdFxuXHR2YXIgX3Jlc3VsdExpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdHZhciBfcmVzdWx0TGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZXN1bHRMaXN0KTtcblx0XG5cdHZhciBfZG9tVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdHZhciBfY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHR2YXIgZGVmYXVsdE9wdGlvbnMgPSBmdW5jdGlvbiBkZWZhdWx0T3B0aW9ucygpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcG9zaXRpb246ICd0b3BsZWZ0Jyxcblx0ICAgIHN0eWxlOiAnYnV0dG9uJyxcblx0ICAgIHNob3dNYXJrZXI6IHRydWUsXG5cdCAgICBzaG93UG9wdXA6IGZhbHNlLFxuXHQgICAgbWFya2VyOiB7XG5cdCAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpLFxuXHQgICAgICBkcmFnZ2FibGU6IGZhbHNlXG5cdCAgICB9LFxuXHQgICAgbWF4TWFya2VyczogMSxcblx0ICAgIHJldGFpblpvb21MZXZlbDogZmFsc2UsXG5cdCAgICBhbmltYXRlWm9vbTogdHJ1ZSxcblx0ICAgIHNlYXJjaExhYmVsOiAnRW50ZXIgYWRkcmVzcycsXG5cdCAgICBub3RGb3VuZE1lc3NhZ2U6ICdTb3JyeSwgdGhhdCBhZGRyZXNzIGNvdWxkIG5vdCBiZSBmb3VuZC4nLFxuXHQgICAgbWVzc2FnZUhpZGVEZWxheTogMzAwMCxcblx0ICAgIHpvb21MZXZlbDogMTgsXG5cdCAgICBjbGFzc05hbWVzOiB7XG5cdCAgICAgIGNvbnRhaW5lcjogJ2xlYWZsZXQtYmFyIGxlYWZsZXQtY29udHJvbCBsZWFmbGV0LWNvbnRyb2wtZ2Vvc2VhcmNoJyxcblx0ICAgICAgYnV0dG9uOiAnbGVhZmxldC1iYXItcGFydCBsZWFmbGV0LWJhci1wYXJ0LXNpbmdsZScsXG5cdCAgICAgIG1zZ2JveDogJ2xlYWZsZXQtYmFyIG1lc3NhZ2UnLFxuXHQgICAgICBmb3JtOiAnJyxcblx0ICAgICAgaW5wdXQ6ICcnXG5cdCAgICB9LFxuXHQgICAgYXV0b0NvbXBsZXRlOiB0cnVlLFxuXHQgICAgYXV0b0NvbXBsZXRlRGVsYXk6IDI1MFxuXHQgIH07XG5cdH07XG5cdFxuXHR2YXIgQ29udHJvbCA9IHtcblx0ICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKG9wdGlvbnMpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdGhpcy5tYXJrZXJzID0gbmV3IEwuRmVhdHVyZUdyb3VwKCk7XG5cdFxuXHQgICAgdGhpcy5vcHRpb25zID0gX2V4dGVuZHMoe30sIGRlZmF1bHRPcHRpb25zKCksIG9wdGlvbnMpO1xuXHRcblx0ICAgIHZhciBfb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICBzdHlsZSA9IF9vcHRpb25zLnN0eWxlLFxuXHQgICAgICAgIGNsYXNzTmFtZXMgPSBfb3B0aW9ucy5jbGFzc05hbWVzLFxuXHQgICAgICAgIHNlYXJjaExhYmVsID0gX29wdGlvbnMuc2VhcmNoTGFiZWwsXG5cdCAgICAgICAgYXV0b0NvbXBsZXRlID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlLFxuXHQgICAgICAgIGF1dG9Db21wbGV0ZURlbGF5ID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlRGVsYXk7XG5cdFxuXHQgICAgaWYgKHN0eWxlICE9PSAnYnV0dG9uJykge1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY2xhc3NOYW1lcy5jb250YWluZXIgKz0gJyAnICsgb3B0aW9ucy5zdHlsZTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLnNlYXJjaEVsZW1lbnQgPSBuZXcgX3NlYXJjaEVsZW1lbnQyLmRlZmF1bHQoX2V4dGVuZHMoe30sIHRoaXMub3B0aW9ucywge1xuXHQgICAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChxdWVyeSkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5vblN1Ym1pdChxdWVyeSk7XG5cdCAgICAgIH1cblx0ICAgIH0pKTtcblx0XG5cdCAgICB2YXIgX3NlYXJjaEVsZW1lbnQkZWxlbWVuID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLFxuXHQgICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5jb250YWluZXIsXG5cdCAgICAgICAgZm9ybSA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5mb3JtLFxuXHQgICAgICAgIGlucHV0ID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmlucHV0O1xuXHRcblx0ICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgYnV0dG9uID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnYScsIGNsYXNzTmFtZXMuYnV0dG9uLCBjb250YWluZXIpO1xuXHQgICAgYnV0dG9uLnRpdGxlID0gc2VhcmNoTGFiZWw7XG5cdCAgICBidXR0b24uaHJlZiA9ICcjJztcblx0XG5cdCAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbkNsaWNrKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHRcblx0ICAgIGlmIChhdXRvQ29tcGxldGUpIHtcblx0ICAgICAgdGhpcy5yZXN1bHRMaXN0ID0gbmV3IF9yZXN1bHRMaXN0Mi5kZWZhdWx0KHtcblx0ICAgICAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2soX3JlZikge1xuXHQgICAgICAgICAgdmFyIHJlc3VsdCA9IF9yZWYucmVzdWx0O1xuXHRcblx0ICAgICAgICAgIGlucHV0LnZhbHVlID0gcmVzdWx0LmxhYmVsO1xuXHQgICAgICAgICAgX3RoaXMub25TdWJtaXQoeyBxdWVyeTogcmVzdWx0LmxhYmVsIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBmb3JtLmFwcGVuZENoaWxkKHRoaXMucmVzdWx0TGlzdC5lbGVtZW50cy5jb250YWluZXIpO1xuXHRcblx0ICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoMCwgX2xvZGFzaDIuZGVmYXVsdCkoZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICByZXR1cm4gX3RoaXMuYXV0b1NlYXJjaChlKTtcblx0ICAgICAgfSwgYXV0b0NvbXBsZXRlRGVsYXkpLCB0cnVlKTtcblx0ICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgcmV0dXJuIF90aGlzLnNlbGVjdFJlc3VsdChlKTtcblx0ICAgICAgfSwgdHJ1ZSk7XG5cdCAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5jbGVhclJlc3VsdHMoZSk7XG5cdCAgICAgIH0sIHRydWUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuZWxlbWVudHMgPSB7IGJ1dHRvbjogYnV0dG9uIH07XG5cdCAgfSxcblx0ICBvbkFkZDogZnVuY3Rpb24gb25BZGQobWFwKSB7XG5cdCAgICB2YXIgX29wdGlvbnMyID0gdGhpcy5vcHRpb25zLFxuXHQgICAgICAgIHNob3dNYXJrZXIgPSBfb3B0aW9uczIuc2hvd01hcmtlcixcblx0ICAgICAgICBzdHlsZSA9IF9vcHRpb25zMi5zdHlsZTtcblx0XG5cdCAgICB0aGlzLm1hcCA9IG1hcDtcblx0ICAgIGlmIChzaG93TWFya2VyKSB7XG5cdCAgICAgIHRoaXMubWFya2Vycy5hZGRUbyhtYXApO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzdHlsZSA9PT0gJ2JhcicpIHtcblx0ICAgICAgdmFyIGZvcm0gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuZm9ybTtcblx0XG5cdCAgICAgIHZhciByb290ID0gbWFwLmdldENvbnRhaW5lcigpLnF1ZXJ5U2VsZWN0b3IoJy5sZWFmbGV0LWNvbnRyb2wtY29udGFpbmVyJyk7XG5cdFxuXHQgICAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgJ2xlYWZsZXQtY29udHJvbC1nZW9zZWFyY2ggYmFyJyk7XG5cdCAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChmb3JtKTtcblx0ICAgICAgcm9vdC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXHQgICAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0ICB9LFxuXHQgIG9uUmVtb3ZlOiBmdW5jdGlvbiBvblJlbW92ZSgpIHtcblx0ICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICBpZiAoY29udGFpbmVyKSB7XG5cdCAgICAgIGNvbnRhaW5lci5yZW1vdmUoKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9LFxuXHQgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHtcblx0ICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFxuXHQgICAgdmFyIF9zZWFyY2hFbGVtZW50JGVsZW1lbjIgPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMsXG5cdCAgICAgICAgY29udGFpbmVyID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuMi5jb250YWluZXIsXG5cdCAgICAgICAgaW5wdXQgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4yLmlucHV0O1xuXHRcblx0ICAgIGlmIChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdCAgICAgIGlucHV0LmZvY3VzKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBzZWxlY3RSZXN1bHQ6IGZ1bmN0aW9uIHNlbGVjdFJlc3VsdChldmVudCkge1xuXHQgICAgaWYgKCFbX2NvbnN0YW50cy5BUlJPV19ET1dOX0tFWSwgX2NvbnN0YW50cy5BUlJPV19VUF9LRVldLmluY2x1ZGVzKGV2ZW50LmtleUNvZGUpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgdmFyIGlucHV0ID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmlucHV0O1xuXHRcblx0ICAgIHZhciBsaXN0ID0gdGhpcy5yZXN1bHRMaXN0O1xuXHQgICAgdmFyIG1heCA9IHRoaXMucmVzdWx0TGlzdC5jb3VudCgpIC0gMTtcblx0XG5cdCAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYml0d2lzZVxuXHQgICAgdmFyIG5leHQgPSBldmVudC5jb2RlID09PSAnQXJyb3dEb3duJyA/IH5+bGlzdC5zZWxlY3RlZCArIDEgOiB+fmxpc3Quc2VsZWN0ZWQgLSAxO1xuXHQgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5lc3RlZC10ZXJuYXJ5XG5cdCAgICB2YXIgaWR4ID0gbmV4dCA8IDAgPyBtYXggOiBuZXh0ID4gbWF4ID8gMCA6IG5leHQ7XG5cdFxuXHQgICAgdmFyIGl0ZW0gPSBsaXN0LnNlbGVjdChpZHgpO1xuXHQgICAgaW5wdXQudmFsdWUgPSBpdGVtLmxhYmVsO1xuXHQgIH0sXG5cdCAgY2xlYXJSZXN1bHRzOiBmdW5jdGlvbiBjbGVhclJlc3VsdHMoZXZlbnQpIHtcblx0ICAgIGlmIChldmVudC5rZXlDb2RlICE9PSBfY29uc3RhbnRzLkVTQ0FQRV9LRVkpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMucmVzdWx0TGlzdC5jbGVhcigpO1xuXHQgIH0sXG5cdCAgYXV0b1NlYXJjaDogZnVuY3Rpb24gYXV0b1NlYXJjaChldmVudCkge1xuXHQgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgdmFyIHF1ZXJ5LCBwcm92aWRlciwgcmVzdWx0cztcblx0XG5cdCAgICAgIGlmIChfY29uc3RhbnRzLlNQRUNJQUxfS0VZUy5pbmNsdWRlcyhldmVudC5rZXlDb2RlKSkge1xuXHQgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHF1ZXJ5ID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuXHQgICAgICBwcm92aWRlciA9IHRoaXMub3B0aW9ucy5wcm92aWRlcjtcblx0ICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlYXJjaCh7IHF1ZXJ5OiBxdWVyeSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHRcblx0ICAgICAgICByZXN1bHRzID0gJGF3YWl0XzE7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRMaXN0LnJlbmRlcihyZXN1bHRzKTtcblx0ICAgICAgICByZXR1cm4gJHJldHVybigpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgfSxcblx0ICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQocXVlcnkpIHtcblx0ICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgIHZhciBwcm92aWRlciwgcmVzdWx0cztcblx0ICAgICAgcHJvdmlkZXIgPSB0aGlzLm9wdGlvbnMucHJvdmlkZXI7XG5cdCAgICAgIHJldHVybiBwcm92aWRlci5zZWFyY2gocXVlcnkpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG5cdFxuXHQgICAgICAgIHJlc3VsdHMgPSAkYXdhaXRfMjtcblx0XG5cdCAgICAgICAgaWYgKHJlc3VsdHMgJiYgcmVzdWx0cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICB0aGlzLnNob3dSZXN1bHQocmVzdWx0c1swXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICB9LFxuXHQgIHNob3dSZXN1bHQ6IGZ1bmN0aW9uIHNob3dSZXN1bHQocmVzdWx0KSB7XG5cdCAgICB2YXIgbWFya2VycyA9IE9iamVjdC5rZXlzKHRoaXMubWFya2Vycy5fbGF5ZXJzKTtcblx0ICAgIGlmIChtYXJrZXJzLmxlbmd0aCA+PSB0aGlzLm9wdGlvbnMubWF4TWFya2Vycykge1xuXHQgICAgICB0aGlzLm1hcmtlcnMucmVtb3ZlTGF5ZXIobWFya2Vyc1swXSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG1hcmtlciA9IHRoaXMuYWRkTWFya2VyKHJlc3VsdCk7XG5cdCAgICB0aGlzLmNlbnRlck1hcChyZXN1bHQpO1xuXHRcblx0ICAgIHRoaXMubWFwLmZpcmVFdmVudCgnZ2Vvc2VhcmNoL3Nob3dsb2NhdGlvbicsIHtcblx0ICAgICAgbG9jYXRpb246IHJlc3VsdCxcblx0ICAgICAgbWFya2VyOiBtYXJrZXJcblx0ICAgIH0pO1xuXHQgIH0sXG5cdCAgYWRkTWFya2VyOiBmdW5jdGlvbiBhZGRNYXJrZXIocmVzdWx0KSB7XG5cdCAgICB2YXIgX29wdGlvbnMzID0gdGhpcy5vcHRpb25zLFxuXHQgICAgICAgIG9wdGlvbnMgPSBfb3B0aW9uczMubWFya2VyLFxuXHQgICAgICAgIHNob3dQb3B1cCA9IF9vcHRpb25zMy5zaG93UG9wdXA7XG5cdFxuXHQgICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihbcmVzdWx0LnksIHJlc3VsdC54XSwgb3B0aW9ucyk7XG5cdCAgICBtYXJrZXIuYmluZFBvcHVwKHJlc3VsdC5sYWJlbCk7XG5cdFxuXHQgICAgdGhpcy5tYXJrZXJzLmFkZExheWVyKG1hcmtlcik7XG5cdFxuXHQgICAgaWYgKHNob3dQb3B1cCkge1xuXHQgICAgICBtYXJrZXIub3BlblBvcHVwKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG1hcmtlcjtcblx0ICB9LFxuXHQgIGNlbnRlck1hcDogZnVuY3Rpb24gY2VudGVyTWFwKHJlc3VsdCkge1xuXHQgICAgdmFyIF9vcHRpb25zNCA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICByZXRhaW5ab29tTGV2ZWwgPSBfb3B0aW9uczQucmV0YWluWm9vbUxldmVsLFxuXHQgICAgICAgIGFuaW1hdGVab29tID0gX29wdGlvbnM0LmFuaW1hdGVab29tO1xuXHRcblx0ICAgIHZhciByZXN1bHRCb3VuZHMgPSBuZXcgTC5MYXRMbmdCb3VuZHMocmVzdWx0LmJvdW5kcyk7XG5cdCAgICB2YXIgYm91bmRzID0gcmVzdWx0Qm91bmRzLmlzVmFsaWQoKSA/IHJlc3VsdEJvdW5kcyA6IHRoaXMubWFya2Vycy5nZXRCb3VuZHMoKTtcblx0XG5cdCAgICBpZiAoIXJldGFpblpvb21MZXZlbCAmJiByZXN1bHRCb3VuZHMuaXNWYWxpZCgpKSB7XG5cdCAgICAgIHRoaXMubWFwLmZpdEJvdW5kcyhib3VuZHMsIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLm1hcC5zZXRWaWV3KGJvdW5kcy5nZXRDZW50ZXIoKSwgdGhpcy5nZXRab29tKCksIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBnZXRab29tOiBmdW5jdGlvbiBnZXRab29tKCkge1xuXHQgICAgdmFyIF9vcHRpb25zNSA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICByZXRhaW5ab29tTGV2ZWwgPSBfb3B0aW9uczUucmV0YWluWm9vbUxldmVsLFxuXHQgICAgICAgIHpvb21MZXZlbCA9IF9vcHRpb25zNS56b29tTGV2ZWw7XG5cdFxuXHQgICAgcmV0dXJuIHJldGFpblpvb21MZXZlbCA/IHRoaXMubWFwLmdldFpvb20oKSA6IHpvb21MZXZlbDtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBMZWFmbGV0Q29udHJvbCgpIHtcblx0ICBpZiAoIUwgfHwgIUwuQ29udHJvbCB8fCAhTC5Db250cm9sLmV4dGVuZCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdMZWFmbGV0IG11c3QgYmUgbG9hZGVkIGJlZm9yZSBpbnN0YW50aWF0aW5nIHRoZSBHZW9TZWFyY2ggY29udHJvbCcpO1xuXHQgIH1cblx0XG5cdCAgdmFyIExDb250cm9sID0gTC5Db250cm9sLmV4dGVuZChDb250cm9sKTtcblx0XG5cdCAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG9wdGlvbnMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgIG9wdGlvbnNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShMQ29udHJvbCwgW251bGxdLmNvbmNhdChvcHRpb25zKSkpKCk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHQvKlxuXHQgKiAkYXN5bmNiaW5kIGhhcyBtdWx0aXBsZSB1c2VzLCBkZXBlbmRpbmcgb24gdGhlIHBhcmFtZXRlciBsaXN0LiBJdCBpcyBpbiBGdW5jdGlvbi5wcm90b3R5cGUsIHNvICd0aGlzJyBpcyBhbHdheXMgYSBmdW5jdGlvblxuXHQgKlxuXHQgKiAxKSBJZiBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudCAodGhpcyksIGl0IGlzIHVzZWQgd2hlbiBkZWZpbmluZyBhbiBhc3luYyBmdW5jdGlvbiB0byBlbnN1cmUgd2hlblxuXHQgKiAgICAgIGl0IGlzIGludm9rZWQsIHRoZSBjb3JyZWN0ICd0aGlzJyBpcyBwcmVzZW50LCBqdXN0IGxpa2UgXCJiaW5kXCIuIEZvciBsZWdhY3kgcmVhc29ucywgJ3RoaXMnIGlzIGdpdmVuXG5cdCAqICAgICAgYSBtZW1lYmVyICd0aGVuJyB3aGljaCByZWZlcnMgdG8gaXRzZWxmLlxuXHQgKiAyKSBJZiBjYWxsZWQgd2l0aCBhIHNlY29uZCBwYXJhbWV0ZXIgKFwiY2F0Y2hlclwiKSBhbmQgY2F0Y2hlciE9PXRydWUgaXQgaXMgYmVpbmcgdXNlZCB0byBpbnZva2UgYW4gYXN5bmNcblx0ICogICAgICBmdW5jdGlvbiB3aGVyZSB0aGUgc2Vjb25kIHBhcmFtZXRlciBpcyB0aGUgZXJyb3IgY2FsbGJhY2sgKGZvciBzeW5jIGV4Y2VwdGlvbnMgYW5kIHRvIGJlIHBhc3NlZCB0b1xuXHQgKiAgICAgIG5lc3RlZCBhc3luYyBjYWxscylcblx0ICogMykgSWYgY2FsbGVkIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXI9PT10cnVlLCBpdCBpcyB0aGUgc2FtZSB1c2UgYXMgKDEpLCBidXQgdGhlIGZ1bmN0aW9uIGlzIHdyYXBwZWRcblx0ICogICAgICBpbiBhbiAnUHJvbWlzZScgYXMgd2VsbCBib3VuZCB0byAndGhpcycuXG5cdCAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IFByb21pc2UodGhpcyknLCB3aGVyZSAndGhpcycgaXMgdGhlIGZ1bmN0aW9uIGJlaW5nIGJvdW5kL3dyYXBwZWRcblx0ICogNCkgSWYgY2FsbGVkIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXI9PT0wLCBpdCBpcyB0aGUgc2FtZSB1c2UgYXMgKDEpLCBidXQgdGhlIGZ1bmN0aW9uIGlzIHdyYXBwZWRcblx0ICogICAgICBpbiBhICdMYXp5VGhlbmFibGUnLCB3aGljaCBleGVjdXRlcyBsYXppbHkgYW5kIGNhbiByZXNvbHZlIHN5bmNocm9ub3VzbHkuXG5cdCAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IExhenlUaGVuYWJsZSh0aGlzKScgKGlmIHN1Y2ggYSB0eXBlIHdlcmUgZXhwb3NlZCksIHdoZXJlICd0aGlzJyBpc1xuXHQgKiAgICAgIHRoZSBmdW5jdGlvbiBiZWluZyBib3VuZC93cmFwcGVkXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc0luY2x1ZGVzKGluY2x1ZGVzLCBpbnB1dCkge1xuXHQgICAgdmFyIHNyYyA9IGlucHV0LnRvU3RyaW5nKCk7XG5cdCAgICB2YXIgdCA9IFwicmV0dXJuIFwiICsgc3JjO1xuXHQgICAgdmFyIGFyZ3MgPSBzcmMubWF0Y2goLy4qXFwoKFteKV0qKVxcKS8pWzFdO1xuXHQgICAgdmFyIHJlID0gL1snXCJdISEhKFteJ1wiXSopWydcIl0vZztcblx0ICAgIHZhciBtID0gW107XG5cdCAgICB3aGlsZSAoMSkge1xuXHQgICAgICAgIHZhciBteCA9IHJlLmV4ZWModCk7XG5cdCAgICAgICAgaWYgKG14KSBtLnB1c2gobXgpO2Vsc2UgYnJlYWs7XG5cdCAgICB9XG5cdCAgICBtLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgdCA9IHQuc2xpY2UoMCwgZS5pbmRleCkgKyBpbmNsdWRlc1tlWzFdXSArIHQuc3Vic3RyKGUuaW5kZXggKyBlWzBdLmxlbmd0aCk7XG5cdCAgICB9KTtcblx0ICAgIHQgPSB0LnJlcGxhY2UoL1xcL1xcKlteKl0qXFwqXFwvL2csICcgJykucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuXHQgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihhcmdzLCB0KSgpO1xuXHR9XG5cdFxuXHR2YXIgJGFzeW5jYmluZCA9IHByb2Nlc3NJbmNsdWRlcyh7XG5cdCAgICB6b3VzYW46IF9fd2VicGFja19yZXF1aXJlX18oNykudG9TdHJpbmcoKSxcblx0ICAgIHRoZW5hYmxlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKS50b1N0cmluZygpXG5cdH0sIGZ1bmN0aW9uICRhc3luY2JpbmQoc2VsZiwgY2F0Y2hlcikge1xuXHQgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHQgICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jYmluZCkge1xuXHQgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsIFwiJGFzeW5jYmluZFwiLCB7IHZhbHVlOiAkYXN5bmNiaW5kLCBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoISRhc3luY2JpbmQudHJhbXBvbGluZSkge1xuXHQgICAgICAgICRhc3luY2JpbmQudHJhbXBvbGluZSA9IGZ1bmN0aW9uIHRyYW1wb2xpbmUodCwgeCwgcywgZSwgdSkge1xuXHQgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gYihxKSB7XG5cdCAgICAgICAgICAgICAgICB3aGlsZSAocSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChxLnRoZW4pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHEudGhlbihiLCBlKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUgPyB1bmRlZmluZWQgOiBxO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAocS5wb3ApIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxLmxlbmd0aCkgcmV0dXJuIHEucG9wKCkgPyB4LmNhbGwodCkgOiBxO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHM7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBxID0gcS5jYWxsKHQpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUocik7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdCAgICBpZiAoISRhc3luY2JpbmQuTGF6eVRoZW5hYmxlKSB7XG5cdCAgICAgICAgJGFzeW5jYmluZC5MYXp5VGhlbmFibGUgPSAnISEhdGhlbmFibGUnKCk7XG5cdCAgICAgICAgJGFzeW5jYmluZC5FYWdlclRoZW5hYmxlID0gJGFzeW5jYmluZC5UaGVuYWJsZSA9ICgkYXN5bmNiaW5kLkVhZ2VyVGhlbmFibGVGYWN0b3J5ID0gJyEhIXpvdXNhbicpKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHJlc29sdmVyID0gdGhpcztcblx0ICAgIHN3aXRjaCAoY2F0Y2hlcikge1xuXHQgICAgICAgIGNhc2UgdHJ1ZTpcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyAkYXN5bmNiaW5kLlRoZW5hYmxlKGJvdW5kVGhlbik7XG5cdCAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICByZXR1cm4gbmV3ICRhc3luY2JpbmQuTGF6eVRoZW5hYmxlKGJvdW5kVGhlbik7XG5cdCAgICAgICAgY2FzZSB1bmRlZmluZWQ6XG5cdCAgICAgICAgICAgIC8qIEZvciBydW50aW1lIGNvbXBhdGliaWxpdHkgd2l0aCBOb2RlbnQgdjIueCwgcHJvdmlkZSBhIHRoZW5hYmxlICovXG5cdCAgICAgICAgICAgIGJvdW5kVGhlbi50aGVuID0gYm91bmRUaGVuO1xuXHQgICAgICAgICAgICByZXR1cm4gYm91bmRUaGVuO1xuXHQgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlci5hcHBseShzZWxmLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2F0Y2hlcihleCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH07XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBib3VuZFRoZW4oKSB7XG5cdCAgICAgICAgcmV0dXJuIHJlc29sdmVyLmFwcGx5KHNlbGYsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gJGFzeW5jc3Bhd24ocHJvbWlzZVByb3ZpZGVyLCBzZWxmKSB7XG5cdCAgICBpZiAoIUZ1bmN0aW9uLnByb3RvdHlwZS4kYXN5bmNzcGF3bikge1xuXHQgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsIFwiJGFzeW5jc3Bhd25cIiwgeyB2YWx1ZTogJGFzeW5jc3Bhd24sIGVudW1lcmFibGU6IGZhbHNlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pO1xuXHQgICAgfVxuXHQgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEZ1bmN0aW9uKSkgcmV0dXJuO1xuXHRcblx0ICAgIHZhciBnZW5GID0gdGhpcztcblx0ICAgIHJldHVybiBuZXcgcHJvbWlzZVByb3ZpZGVyKGZ1bmN0aW9uIGVub3VnaChyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICB2YXIgZ2VuID0gZ2VuRi5jYWxsKHNlbGYsIHJlc29sdmUsIHJlamVjdCk7XG5cdCAgICAgICAgZnVuY3Rpb24gc3RlcChmbiwgYXJnKSB7XG5cdCAgICAgICAgICAgIHZhciBuZXh0O1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgbmV4dCA9IGZuLmNhbGwoZ2VuLCBhcmcpO1xuXHQgICAgICAgICAgICAgICAgaWYgKG5leHQuZG9uZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlICE9PSByZXNvbHZlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlICYmIG5leHQudmFsdWUgPT09IG5leHQudmFsdWUudGhlbikgcmV0dXJuIG5leHQudmFsdWUocmVzb2x2ZSwgcmVqZWN0KTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSAmJiByZXNvbHZlKG5leHQudmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlLnRoZW4pIHtcblx0ICAgICAgICAgICAgICAgICAgICBuZXh0LnZhbHVlLnRoZW4oZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4ubmV4dCwgdik7XG5cdCAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4udGhyb3csIGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi5uZXh0LCBuZXh0LnZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgICAgcmVqZWN0ICYmIHJlamVjdChlKTtcblx0ICAgICAgICAgICAgICAgIHJlamVjdCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgc3RlcChnZW4ubmV4dCk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0Ly8gSW5pdGlhbGl6ZSBhc3luYyBiaW5kaW5nc1xuXHQkYXN5bmNiaW5kKCk7XG5cdCRhc3luY3NwYXduKCk7XG5cdFxuXHQvLyBFeHBvcnQgYXN5bmMgYmluZGluZ3Ncblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgICAkYXN5bmNiaW5kOiAkYXN5bmNiaW5kLFxuXHQgICAgJGFzeW5jc3Bhd246ICRhc3luY3NwYXduXG5cdH07XG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcywgc2V0SW1tZWRpYXRlKSB7LyogVGhpcyBjb2RlIGlzIGJhc2VkIG9uOlxuXHR6b3VzYW4gLSBBIExpZ2h0bmluZyBGYXN0LCBZZXQgVmVyeSBTbWFsbCBQcm9taXNlIEErIENvbXBsaWFudCBJbXBsZW1lbnRhdGlvblxuXHRodHRwczovL2dpdGh1Yi5jb20vYmx1ZWphdmEvem91c2FuXG5cdEF1dGhvcjogR2xlbm4gQ3Jvd25vdmVyIDxnbGVubkBibHVlamF2YS5jb20+IChodHRwOi8vd3d3LmJsdWVqYXZhLmNvbSlcblx0VmVyc2lvbiAyLjMuM1xuXHRMaWNlbnNlOiBNSVQgKi9cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0aWNrKSB7XG5cdCAgICB0aWNrID0gdGljayB8fCAodHlwZW9mIHByb2Nlc3MgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihwcm9jZXNzKSkgPT09IFwib2JqZWN0XCIgJiYgcHJvY2Vzcy5uZXh0VGljayB8fCB0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSBcImZ1bmN0aW9uXCIgJiYgc2V0SW1tZWRpYXRlIHx8IGZ1bmN0aW9uIChmKSB7XG5cdCAgICAgICAgc2V0VGltZW91dChmLCAwKTtcblx0ICAgIH07XG5cdCAgICB2YXIgc29vbiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZnEgPSBbXSxcblx0ICAgICAgICAgICAgZnFTdGFydCA9IDAsXG5cdCAgICAgICAgICAgIGJ1ZmZlclNpemUgPSAxMDI0O1xuXHQgICAgICAgIGZ1bmN0aW9uIGNhbGxRdWV1ZSgpIHtcblx0ICAgICAgICAgICAgd2hpbGUgKGZxLmxlbmd0aCAtIGZxU3RhcnQpIHtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZnFbZnFTdGFydF0oKTtcblx0ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7LyogY29uc29sZS5lcnJvcihleCkgKi99XG5cdCAgICAgICAgICAgICAgICBmcVtmcVN0YXJ0KytdID0gdW5kZWZpbmVkO1xuXHQgICAgICAgICAgICAgICAgaWYgKGZxU3RhcnQgPT09IGJ1ZmZlclNpemUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBmcS5zcGxpY2UoMCwgYnVmZmVyU2l6ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgZnFTdGFydCA9IDA7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZm4pIHtcblx0ICAgICAgICAgICAgZnEucHVzaChmbik7XG5cdCAgICAgICAgICAgIGlmIChmcS5sZW5ndGggLSBmcVN0YXJ0ID09PSAxKSB0aWNrKGNhbGxRdWV1ZSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH0oKTtcblx0XG5cdCAgICBmdW5jdGlvbiBab3VzYW4oZnVuYykge1xuXHQgICAgICAgIGlmIChmdW5jKSB7XG5cdCAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG5cdCAgICAgICAgICAgIGZ1bmMoZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgICAgICAgICAgbWUucmVzb2x2ZShhcmcpO1xuXHQgICAgICAgICAgICB9LCBmdW5jdGlvbiAoYXJnKSB7XG5cdCAgICAgICAgICAgICAgICBtZS5yZWplY3QoYXJnKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIFpvdXNhbi5wcm90b3R5cGUgPSB7XG5cdCAgICAgICAgcmVzb2x2ZTogZnVuY3Rpb24gcmVzb2x2ZSh2YWx1ZSkge1xuXHQgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gdW5kZWZpbmVkKSByZXR1cm47XG5cdCAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcykgcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJBdHRlbXB0IHRvIHJlc29sdmUgcHJvbWlzZSB3aXRoIHNlbGZcIikpO1xuXHQgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXHQgICAgICAgICAgICBpZiAodmFsdWUgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiIHx8ICh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZih2YWx1ZSkpID09PSBcIm9iamVjdFwiKSkge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3QgPSAwO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciB0aGVuID0gdmFsdWUudGhlbjtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoZW4gPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bmN0aW9uIChyYSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVzb2x2ZShyYSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChycikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVqZWN0KHJyKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCkgdGhpcy5yZWplY3QoZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GVUxGSUxMRUQ7XG5cdCAgICAgICAgICAgIHRoaXMudiA9IHZhbHVlO1xuXHQgICAgICAgICAgICBpZiAobWUuYykgc29vbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgbCA9IG1lLmMubGVuZ3RoOyBuIDwgbDsgbisrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgU1RBVEVfRlVMRklMTEVEKG1lLmNbbl0sIHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXHQgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUkVKRUNURUQ7XG5cdCAgICAgICAgICAgIHRoaXMudiA9IHJlYXNvbjtcblx0ICAgICAgICAgICAgdmFyIGNsaWVudHMgPSB0aGlzLmM7XG5cdCAgICAgICAgICAgIGlmIChjbGllbnRzKSBzb29uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCBsID0gY2xpZW50cy5sZW5ndGg7IG4gPCBsOyBuKyspIHtcblx0ICAgICAgICAgICAgICAgICAgICBTVEFURV9SRUpFQ1RFRChjbGllbnRzW25dLCByZWFzb24pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHRoZW46IGZ1bmN0aW9uIHRoZW4ob25GLCBvblIpIHtcblx0ICAgICAgICAgICAgdmFyIHAgPSBuZXcgWm91c2FuKCk7XG5cdCAgICAgICAgICAgIHZhciBjbGllbnQgPSB7XG5cdCAgICAgICAgICAgICAgICB5OiBvbkYsXG5cdCAgICAgICAgICAgICAgICBuOiBvblIsXG5cdCAgICAgICAgICAgICAgICBwOiBwXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgICAgIGlmICh0aGlzLmMpIHRoaXMuYy5wdXNoKGNsaWVudCk7ZWxzZSB0aGlzLmMgPSBbY2xpZW50XTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcy5zdGF0ZSxcblx0ICAgICAgICAgICAgICAgICAgICBhID0gdGhpcy52O1xuXHQgICAgICAgICAgICAgICAgc29vbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcyhjbGllbnQsIGEpO1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIHA7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBmdW5jdGlvbiBTVEFURV9GVUxGSUxMRUQoYywgYXJnKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjLnkgPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgdmFyIHlyZXQgPSBjLnkuY2FsbCh1bmRlZmluZWQsIGFyZyk7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVzb2x2ZSh5cmV0KTtcblx0ICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVqZWN0KGVycik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgYy5wLnJlc29sdmUoYXJnKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBTVEFURV9SRUpFQ1RFRChjLCByZWFzb24pIHtcblx0ICAgICAgICBpZiAodHlwZW9mIGMubiA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgeXJldCA9IGMubi5jYWxsKHVuZGVmaW5lZCwgcmVhc29uKTtcblx0ICAgICAgICAgICAgICAgIGMucC5yZXNvbHZlKHlyZXQpO1xuXHQgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgIGMucC5yZWplY3QoZXJyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBjLnAucmVqZWN0KHJlYXNvbik7XG5cdCAgICB9XG5cdFxuXHQgICAgWm91c2FuLnJlc29sdmUgPSBmdW5jdGlvbiAodmFsKSB7XG5cdCAgICAgICAgaWYgKHZhbCAmJiB2YWwgaW5zdGFuY2VvZiBab3VzYW4pIHJldHVybiB2YWw7XG5cdCAgICAgICAgdmFyIHogPSBuZXcgWm91c2FuKCk7XG5cdCAgICAgICAgei5yZXNvbHZlKHZhbCk7XG5cdCAgICAgICAgcmV0dXJuIHo7XG5cdCAgICB9O1xuXHQgICAgWm91c2FuLnJlamVjdCA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICBpZiAoZXJyICYmIGVyciBpbnN0YW5jZW9mIFpvdXNhbikgcmV0dXJuIGVycjtcblx0ICAgICAgICB2YXIgeiA9IG5ldyBab3VzYW4oKTtcblx0ICAgICAgICB6LnJlamVjdChlcnIpO1xuXHQgICAgICAgIHJldHVybiB6O1xuXHQgICAgfTtcblx0XG5cdCAgICBab3VzYW4udmVyc2lvbiA9IFwiMi4zLjMtbm9kZW50XCI7XG5cdCAgICByZXR1cm4gWm91c2FuO1xuXHR9O1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg4KSwgX193ZWJwYWNrX3JlcXVpcmVfXyg5KS5zZXRJbW1lZGlhdGUpKVxuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cdHZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblx0XG5cdC8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuXHQvLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcblx0Ly8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuXHQvLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXHRcblx0dmFyIGNhY2hlZFNldFRpbWVvdXQ7XG5cdHZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cdFxuXHRmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0ZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCgpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0KGZ1bmN0aW9uICgpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICB9XG5cdH0pKCk7XG5cdGZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG5cdCAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuXHQgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuXHQgICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuXHQgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0ZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuXHQgICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG5cdCAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG5cdCAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuXHQgICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG5cdCAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuXHQgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG5cdCAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgZHJhaW5pbmcgPSBmYWxzZTtcblx0dmFyIGN1cnJlbnRRdWV1ZTtcblx0dmFyIHF1ZXVlSW5kZXggPSAtMTtcblx0XG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG5cdCAgICBpZiAoZHJhaW5pbmcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcblx0ICAgIGRyYWluaW5nID0gdHJ1ZTtcblx0XG5cdCAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGxlbikge1xuXHQgICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuXHQgICAgICAgIHF1ZXVlID0gW107XG5cdCAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuXHQgICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIH1cblx0ICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHR9XG5cdFxuXHRwcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcblx0ICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG5cdCAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcblx0ICAgIH1cblx0fTtcblx0XG5cdC8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcblx0ZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG5cdCAgICB0aGlzLmZ1biA9IGZ1bjtcblx0ICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcblx0fVxuXHRJdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcblx0fTtcblx0cHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcblx0cHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcblx0cHJvY2Vzcy5lbnYgPSB7fTtcblx0cHJvY2Vzcy5hcmd2ID0gW107XG5cdHByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xuXHRwcm9jZXNzLnZlcnNpb25zID0ge307XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge31cblx0XG5cdHByb2Nlc3Mub24gPSBub29wO1xuXHRwcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5vbmNlID0gbm9vcDtcblx0cHJvY2Vzcy5vZmYgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xuXHRwcm9jZXNzLmVtaXQgPSBub29wO1xuXHRcblx0cHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0XG5cdHByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuICcvJztcblx0fTtcblx0cHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdHByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gMDtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0dmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXHRcblx0Ly8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3Ncblx0XG5cdGV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG5cdH07XG5cdGV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG5cdH07XG5cdGV4cG9ydHMuY2xlYXJUaW1lb3V0ID0gZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24gKHRpbWVvdXQpIHtcblx0ICBpZiAodGltZW91dCkge1xuXHQgICAgdGltZW91dC5jbG9zZSgpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcblx0ICB0aGlzLl9pZCA9IGlkO1xuXHQgIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xuXHR9XG5cdFRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24gKCkge307XG5cdFRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csIHRoaXMuX2lkKTtcblx0fTtcblx0XG5cdC8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuXHRleHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uIChpdGVtLCBtc2Vjcykge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0ICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHQgIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG5cdH07XG5cdFxuXHRleHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdFxuXHQgIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuXHQgIGlmIChtc2VjcyA+PSAwKSB7XG5cdCAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG5cdCAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpIGl0ZW0uX29uVGltZW91dCgpO1xuXHQgICAgfSwgbXNlY3MpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3Rcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdGV4cG9ydHMuc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuXHRleHBvcnRzLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG5cbi8qKiovIH0sXG4vKiAxMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCwgcHJvY2Vzcykge1widXNlIHN0cmljdFwiO1xuXHRcblx0KGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuXHQgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHQgICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm9cblx0ICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG5cdCAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG5cdCAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuXHQgICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXHRcblx0ICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuXHQgICAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuXHQgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBDb3B5IGZ1bmN0aW9uIGFyZ3VtZW50c1xuXHQgICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuXHQgICAgICAgIHZhciB0YXNrID0geyBjYWxsYmFjazogY2FsbGJhY2ssIGFyZ3M6IGFyZ3MgfTtcblx0ICAgICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcblx0ICAgICAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gcnVuKHRhc2spIHtcblx0ICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuXHQgICAgICAgIHZhciBhcmdzID0gdGFzay5hcmdzO1xuXHQgICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBjYXNlIDE6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBjYXNlIDI6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBjYXNlIDM6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBkZWZhdWx0OlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG5cdCAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogXCJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC5cIlxuXHQgICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uXG5cdCAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuXHQgICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuXHQgICAgICAgICAgICAvLyBcInRvbyBtdWNoIHJlY3Vyc2lvblwiIGVycm9yLlxuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcblx0ICAgICAgICAgICAgaWYgKHRhc2spIHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcblx0ICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICAgICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcblx0ICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuXHQgICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcblx0ICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cblx0ICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuXHQgICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG5cdCAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuXHQgICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuXHQgICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuXHQgICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG5cdCAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG5cdCAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXHRcblx0ICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuXHQgICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbiBvbkdsb2JhbE1lc3NhZ2UoZXZlbnQpIHtcblx0ICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuXHQgICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0ICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG5cdCAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG5cdCAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuXHQgICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuXHQgICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG5cdCAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcblx0ICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuXHQgICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuXHQgICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cdFxuXHQgICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuXHQgICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuXHQgICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcblx0ICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG5cdCAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuXHQgICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuXHQgICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG5cdCAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcblx0ICAgICAgICAvLyBGb3IgSUUgNuKAkzhcblx0ICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuXHQgICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH1cblx0XG5cdCAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG5cdCAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xuXHR9KSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB1bmRlZmluZWQgOiBnbG9iYWwgOiBzZWxmKTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSksIF9fd2VicGFja19yZXF1aXJlX18oOCkpKVxuXG4vKioqLyB9LFxuLyogMTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBpc1RoZW5hYmxlKG9iaikge1xuXHQgICAgICAgIHJldHVybiBvYmogJiYgb2JqIGluc3RhbmNlb2YgT2JqZWN0ICYmIHR5cGVvZiBvYmoudGhlbiA9PT0gXCJmdW5jdGlvblwiO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHJlc29sdXRpb24ocCwgciwgaG93KSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLyogMi4yLjcuMSAqL1xuXHQgICAgICAgICAgICB2YXIgeCA9IGhvdyA/IGhvdyhyKSA6IHI7XG5cdFxuXHQgICAgICAgICAgICBpZiAocCA9PT0geCkgLyogMi4zLjEgKi9cblx0ICAgICAgICAgICAgICAgIHJldHVybiBwLnJlamVjdChuZXcgVHlwZUVycm9yKFwiUHJvbWlzZSByZXNvbHV0aW9uIGxvb3BcIikpO1xuXHRcblx0ICAgICAgICAgICAgaWYgKGlzVGhlbmFibGUoeCkpIHtcblx0ICAgICAgICAgICAgICAgIC8qIDIuMy4zICovXG5cdCAgICAgICAgICAgICAgICB4LnRoZW4oZnVuY3Rpb24gKHkpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uKHAsIHkpO1xuXHQgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBwLnJlamVjdChlKTtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgcC5yZXNvbHZlKHgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBjYXRjaCAoZXgpIHtcblx0ICAgICAgICAgICAgLyogMi4yLjcuMiAqL1xuXHQgICAgICAgICAgICBwLnJlamVjdChleCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIENoYWluZWQoKSB7fTtcblx0ICAgIENoYWluZWQucHJvdG90eXBlID0ge1xuXHQgICAgICAgIHJlc29sdmU6IF91bmNoYWluZWQsXG5cdCAgICAgICAgcmVqZWN0OiBfdW5jaGFpbmVkLFxuXHQgICAgICAgIHRoZW46IHRoZW5DaGFpblxuXHQgICAgfTtcblx0ICAgIGZ1bmN0aW9uIF91bmNoYWluZWQodikge31cblx0ICAgIGZ1bmN0aW9uIHRoZW5DaGFpbihyZXMsIHJlaikge1xuXHQgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlcztcblx0ICAgICAgICB0aGlzLnJlamVjdCA9IHJlajtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiB0aGVuKHJlcywgcmVqKSB7XG5cdCAgICAgICAgdmFyIGNoYWluID0gbmV3IENoYWluZWQoKTtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB0aGlzLl9yZXNvbHZlcihmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBpc1RoZW5hYmxlKHZhbHVlKSA/IHZhbHVlLnRoZW4ocmVzLCByZWopIDogcmVzb2x1dGlvbihjaGFpbiwgdmFsdWUsIHJlcyk7XG5cdCAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChleCkge1xuXHQgICAgICAgICAgICAgICAgcmVzb2x1dGlvbihjaGFpbiwgZXgsIHJlaik7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cdCAgICAgICAgICAgIHJlc29sdXRpb24oY2hhaW4sIGV4LCByZWopO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gY2hhaW47XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gVGhlbmFibGUocmVzb2x2ZXIpIHtcblx0ICAgICAgICB0aGlzLl9yZXNvbHZlciA9IHJlc29sdmVyO1xuXHQgICAgICAgIHRoaXMudGhlbiA9IHRoZW47XG5cdCAgICB9O1xuXHRcblx0ICAgIFRoZW5hYmxlLnJlc29sdmUgPSBmdW5jdGlvbiAodikge1xuXHQgICAgICAgIHJldHVybiBUaGVuYWJsZS5pc1RoZW5hYmxlKHYpID8gdiA6IHsgdGhlbjogZnVuY3Rpb24gdGhlbihyZXNvbHZlKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh2KTtcblx0ICAgICAgICAgICAgfSB9O1xuXHQgICAgfTtcblx0XG5cdCAgICBUaGVuYWJsZS5pc1RoZW5hYmxlID0gaXNUaGVuYWJsZTtcblx0XG5cdCAgICByZXR1cm4gVGhlbmFibGU7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdC8qKlxuXHQgKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuXHQgKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cblx0ICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuXHQgKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICovXG5cdFxuXHQvKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xuXHR2YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXHRcblx0LyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG5cdHZhciBOQU4gPSAwIC8gMDtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXHRcblx0LyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi9cblx0dmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cdFxuXHQvKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xuXHR2YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cdFxuXHQvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xuXHR2YXIgZnJlZUdsb2JhbCA9ICh0eXBlb2YgZ2xvYmFsID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihnbG9iYWwpKSA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblx0XG5cdC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG5cdHZhciBmcmVlU2VsZiA9ICh0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2Yoc2VsZikpID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXHRcblx0LyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG5cdHZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcblx0ICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG5cdCAqIG9mIHZhbHVlcy5cblx0ICovXG5cdHZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXHRcblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuXHR2YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG5cdCAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2Vcblx0ICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDIuNC4wXG5cdCAqIEBjYXRlZ29yeSBEYXRlXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuXHQgKiAgIGNvbnNvbGUubG9nKF8ubm93KCkgLSBzdGFtcCk7XG5cdCAqIH0sIF8ubm93KCkpO1xuXHQgKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuXHQgKi9cblx0dmFyIG5vdyA9IGZ1bmN0aW9uIG5vdygpIHtcblx0ICByZXR1cm4gcm9vdC5EYXRlLm5vdygpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuXHQgKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcblx0ICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuXHQgKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cblx0ICogUHJvdmlkZSBgb3B0aW9uc2AgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb24gdGhlXG5cdCAqIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcblx0ICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudFxuXHQgKiBjYWxscyB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYFxuXHQgKiBpbnZvY2F0aW9uLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzXG5cdCAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG5cdCAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cblx0ICpcblx0ICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG5cdCAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cblx0ICpcblx0ICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG5cdCAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBGdW5jdGlvblxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cblx0ICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuXHQgKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cblx0ICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG5cdCAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG5cdCAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG5cdCAqXG5cdCAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuXHQgKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG5cdCAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuXHQgKiAgICd0cmFpbGluZyc6IGZhbHNlXG5cdCAqIH0pKTtcblx0ICpcblx0ICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cblx0ICogdmFyIGRlYm91bmNlZCA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwgeyAnbWF4V2FpdCc6IDEwMDAgfSk7XG5cdCAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcblx0ICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuXHQgKlxuXHQgKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuXHQgKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcblx0ICovXG5cdGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcblx0ICB2YXIgbGFzdEFyZ3MsXG5cdCAgICAgIGxhc3RUaGlzLFxuXHQgICAgICBtYXhXYWl0LFxuXHQgICAgICByZXN1bHQsXG5cdCAgICAgIHRpbWVySWQsXG5cdCAgICAgIGxhc3RDYWxsVGltZSxcblx0ICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuXHQgICAgICBsZWFkaW5nID0gZmFsc2UsXG5cdCAgICAgIG1heGluZyA9IGZhbHNlLFxuXHQgICAgICB0cmFpbGluZyA9IHRydWU7XG5cdFxuXHQgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG5cdCAgfVxuXHQgIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuXHQgIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuXHQgICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuXHQgICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG5cdCAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuXHQgICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuXHQgICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcblx0ICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cdFxuXHQgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcblx0ICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcblx0ICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuXHQgICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cblx0ICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcblx0ICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG5cdCAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG5cdCAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcblx0ICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG5cdCAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSxcblx0ICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cdFxuXHQgICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQsIG1heFdhaXQgLSB0aW1lU2luY2VMYXN0SW52b2tlKSA6IHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG5cdCAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuXHQgICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cdFxuXHQgICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcblx0ICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG5cdCAgICAvLyBpdCBhcyB0aGUgdHJhaWxpbmcgZWRnZSwgb3Igd2UndmUgaGl0IHRoZSBgbWF4V2FpdGAgbGltaXQuXG5cdCAgICByZXR1cm4gbGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgdGltZVNpbmNlTGFzdENhbGwgPj0gd2FpdCB8fCB0aW1lU2luY2VMYXN0Q2FsbCA8IDAgfHwgbWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHtcblx0ICAgIHZhciB0aW1lID0gbm93KCk7XG5cdCAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG5cdCAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7XG5cdCAgICB9XG5cdCAgICAvLyBSZXN0YXJ0IHRoZSB0aW1lci5cblx0ICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuXHQgICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblx0XG5cdCAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG5cdCAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cblx0ICAgIGlmICh0cmFpbGluZyAmJiBsYXN0QXJncykge1xuXHQgICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcblx0ICAgIH1cblx0ICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gY2FuY2VsKCkge1xuXHQgICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7XG5cdCAgICB9XG5cdCAgICBsYXN0SW52b2tlVGltZSA9IDA7XG5cdCAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGZsdXNoKCkge1xuXHQgICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG5cdCAgICB2YXIgdGltZSA9IG5vdygpLFxuXHQgICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG5cdFxuXHQgICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG5cdCAgICBsYXN0VGhpcyA9IHRoaXM7XG5cdCAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXHRcblx0ICAgIGlmIChpc0ludm9raW5nKSB7XG5cdCAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAobWF4aW5nKSB7XG5cdCAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cblx0ICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHQgIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG5cdCAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG5cdCAgcmV0dXJuIGRlYm91bmNlZDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuXHQgKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG5cdCAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KHt9KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChfLm5vb3ApO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QobnVsbCk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuXHQgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih2YWx1ZSk7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuXHQgKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuXHQgIHJldHVybiAhIXZhbHVlICYmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHZhbHVlKSkgPT0gJ29iamVjdCc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzU3ltYm9sKCdhYmMnKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG5cdCAgcmV0dXJuICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHZhbHVlKSkgPT0gJ3N5bWJvbCcgfHwgaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoMy4yKTtcblx0ICogLy8gPT4gMy4yXG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG5cdCAqIC8vID0+IDVlLTMyNFxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcblx0ICogLy8gPT4gSW5maW5pdHlcblx0ICpcblx0ICogXy50b051bWJlcignMy4yJyk7XG5cdCAqIC8vID0+IDMuMlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcblx0ICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHQgIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBOQU47XG5cdCAgfVxuXHQgIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcblx0ICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcblx0ICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gb3RoZXIgKyAnJyA6IG90aGVyO1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcblx0ICB9XG5cdCAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpO1xuXHQgIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG5cdCAgcmV0dXJuIGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOCkgOiByZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGRlYm91bmNlO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiAxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9kb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0dmFyIF9jb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBTZWFyY2hFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIFNlYXJjaEVsZW1lbnQoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICBfcmVmJGhhbmRsZVN1Ym1pdCA9IF9yZWYuaGFuZGxlU3VibWl0LFxuXHQgICAgICAgIGhhbmRsZVN1Ym1pdCA9IF9yZWYkaGFuZGxlU3VibWl0ID09PSB1bmRlZmluZWQgPyBmdW5jdGlvbiAoKSB7fSA6IF9yZWYkaGFuZGxlU3VibWl0LFxuXHQgICAgICAgIF9yZWYkc2VhcmNoTGFiZWwgPSBfcmVmLnNlYXJjaExhYmVsLFxuXHQgICAgICAgIHNlYXJjaExhYmVsID0gX3JlZiRzZWFyY2hMYWJlbCA9PT0gdW5kZWZpbmVkID8gJ3NlYXJjaCcgOiBfcmVmJHNlYXJjaExhYmVsLFxuXHQgICAgICAgIF9yZWYkY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcblx0ICAgICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcztcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2VhcmNoRWxlbWVudCk7XG5cdFxuXHQgICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIFsnZ2Vvc2VhcmNoJywgY2xhc3NOYW1lcy5jb250YWluZXJdLmpvaW4oJyAnKSk7XG5cdCAgICB2YXIgZm9ybSA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2Zvcm0nLCBbJycsIGNsYXNzTmFtZXMuZm9ybV0uam9pbignICcpLCBjb250YWluZXIpO1xuXHQgICAgdmFyIGlucHV0ID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnaW5wdXQnLCBbJ2dsYXNzJywgY2xhc3NOYW1lcy5pbnB1dF0uam9pbignICcpLCBmb3JtKTtcblx0XG5cdCAgICBpbnB1dC50eXBlID0gJ3RleHQnO1xuXHQgICAgaW5wdXQucGxhY2Vob2xkZXIgPSBzZWFyY2hMYWJlbDtcblx0XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uSW5wdXQoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uS2V5VXAoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uS2V5UHJlc3MoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uRm9jdXMoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgX3RoaXMub25CbHVyKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHRcblx0ICAgIHRoaXMuZWxlbWVudHMgPSB7IGNvbnRhaW5lcjogY29udGFpbmVyLCBmb3JtOiBmb3JtLCBpbnB1dDogaW5wdXQgfTtcblx0ICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFNlYXJjaEVsZW1lbnQsIFt7XG5cdCAgICBrZXk6ICdvbkZvY3VzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbkZvY3VzKCkge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkodGhpcy5lbGVtZW50cy5mb3JtLCAnYWN0aXZlJyk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb25CbHVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbkJsdXIoKSB7XG5cdCAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKSh0aGlzLmVsZW1lbnRzLmZvcm0sICdhY3RpdmUnKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvblN1Ym1pdCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWJtaXQoZXZlbnQpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgICB2YXIgX2VsZW1lbnRzLCBpbnB1dCwgY29udGFpbmVyO1xuXHRcblx0ICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcblx0ICAgICAgICBfZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzLCBpbnB1dCA9IF9lbGVtZW50cy5pbnB1dCwgY29udGFpbmVyID0gX2VsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2Vycm9yJyk7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlU3VibWl0KHsgcXVlcnk6IGlucHV0LnZhbHVlIH0pLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG5cdCAgICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuXHQgICAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcblx0ICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvbklucHV0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbklucHV0KCkge1xuXHQgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICBpZiAodGhpcy5oYXNFcnJvcikge1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuXHQgICAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uS2V5VXAnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5VXAoZXZlbnQpIHtcblx0ICAgICAgdmFyIF9lbGVtZW50czIgPSB0aGlzLmVsZW1lbnRzLFxuXHQgICAgICAgICAgY29udGFpbmVyID0gX2VsZW1lbnRzMi5jb250YWluZXIsXG5cdCAgICAgICAgICBpbnB1dCA9IF9lbGVtZW50czIuaW5wdXQ7XG5cdFxuXHQgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gX2NvbnN0YW50cy5FU0NBUEVfS0VZKSB7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdFxuXHQgICAgICAgIGlucHV0LnZhbHVlID0gJyc7XG5cdFxuXHQgICAgICAgIGRvY3VtZW50LmJvZHkuZm9jdXMoKTtcblx0ICAgICAgICBkb2N1bWVudC5ib2R5LmJsdXIoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uS2V5UHJlc3MnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5UHJlc3MoZXZlbnQpIHtcblx0ICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IF9jb25zdGFudHMuRU5URVJfS0VZKSB7XG5cdCAgICAgICAgdGhpcy5vblN1Ym1pdChldmVudCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZXRRdWVyeScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UXVlcnkocXVlcnkpIHtcblx0ICAgICAgdmFyIGlucHV0ID0gdGhpcy5lbGVtZW50cy5pbnB1dDtcblx0XG5cdCAgICAgIGlucHV0LnZhbHVlID0gcXVlcnk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gU2VhcmNoRWxlbWVudDtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gU2VhcmNoRWxlbWVudDtcblxuLyoqKi8gfSxcbi8qIDE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0LyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xuXHR2YXIgY3JlYXRlRWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoZWxlbWVudCkge1xuXHQgIHZhciBjbGFzc05hbWVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJztcblx0ICB2YXIgcGFyZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsO1xuXHRcblx0ICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1lbnQpO1xuXHQgIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZXM7XG5cdFxuXHQgIGlmIChwYXJlbnQpIHtcblx0ICAgIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZWw7XG5cdH07XG5cdFxuXHR2YXIgY3JlYXRlU2NyaXB0RWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlU2NyaXB0RWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZVNjcmlwdEVsZW1lbnQodXJsLCBjYikge1xuXHQgIHZhciBzY3JpcHQgPSBjcmVhdGVFbGVtZW50KCdzY3JpcHQnLCBudWxsLCBkb2N1bWVudC5ib2R5KTtcblx0ICBzY3JpcHQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvamF2YXNjcmlwdCcpO1xuXHRcblx0ICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcblx0ICAgIHdpbmRvd1tjYl0gPSBmdW5jdGlvbiAoanNvbikge1xuXHQgICAgICBzY3JpcHQucmVtb3ZlKCk7XG5cdCAgICAgIGRlbGV0ZSB3aW5kb3dbY2JdO1xuXHQgICAgICByZXNvbHZlKGpzb24pO1xuXHQgICAgfTtcblx0XG5cdCAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdzcmMnLCB1cmwpO1xuXHQgIH0pO1xuXHR9O1xuXHRcblx0dmFyIGFkZENsYXNzTmFtZSA9IGV4cG9ydHMuYWRkQ2xhc3NOYW1lID0gZnVuY3Rpb24gYWRkQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuXHQgIGlmIChlbGVtZW50ICYmICFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG5cdCAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcmVtb3ZlQ2xhc3NOYW1lID0gZXhwb3J0cy5yZW1vdmVDbGFzc05hbWUgPSBmdW5jdGlvbiByZW1vdmVDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG5cdCAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuXHQgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9LFxuLyogMTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdHZhciBFTlRFUl9LRVkgPSBleHBvcnRzLkVOVEVSX0tFWSA9IDEzO1xuXHR2YXIgRVNDQVBFX0tFWSA9IGV4cG9ydHMuRVNDQVBFX0tFWSA9IDI3O1xuXHR2YXIgQVJST1dfRE9XTl9LRVkgPSBleHBvcnRzLkFSUk9XX0RPV05fS0VZID0gNDA7XG5cdHZhciBBUlJPV19VUF9LRVkgPSBleHBvcnRzLkFSUk9XX1VQX0tFWSA9IDM4O1xuXHR2YXIgQVJST1dfTEVGVF9LRVkgPSBleHBvcnRzLkFSUk9XX0xFRlRfS0VZID0gMzc7XG5cdHZhciBBUlJPV19SSUdIVF9LRVkgPSBleHBvcnRzLkFSUk9XX1JJR0hUX0tFWSA9IDM5O1xuXHRcblx0dmFyIFNQRUNJQUxfS0VZUyA9IGV4cG9ydHMuU1BFQ0lBTF9LRVlTID0gW0VOVEVSX0tFWSwgRVNDQVBFX0tFWSwgQVJST1dfRE9XTl9LRVksIEFSUk9XX1VQX0tFWSwgQVJST1dfTEVGVF9LRVksIEFSUk9XX1JJR0hUX0tFWV07XG5cbi8qKiovIH0sXG4vKiAxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX2RvbVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgY3ggPSBmdW5jdGlvbiBjeCgpIHtcblx0ICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgY2xhc3NuYW1lcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgY2xhc3NuYW1lc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBjbGFzc25hbWVzLmpvaW4oJyAnKS50cmltKCk7XG5cdH07XG5cdFxuXHR2YXIgUmVzdWx0TGlzdCA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBSZXN1bHRMaXN0KCkge1xuXHQgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgIF9yZWYkaGFuZGxlQ2xpY2sgPSBfcmVmLmhhbmRsZUNsaWNrLFxuXHQgICAgICAgIGhhbmRsZUNsaWNrID0gX3JlZiRoYW5kbGVDbGljayA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZUNsaWNrLFxuXHQgICAgICAgIF9yZWYkY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcblx0ICAgICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcztcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVzdWx0TGlzdCk7XG5cdFxuXHQgICAgX2luaXRpYWxpc2VQcm9wcy5jYWxsKHRoaXMpO1xuXHRcblx0ICAgIHRoaXMucHJvcHMgPSB7IGhhbmRsZUNsaWNrOiBoYW5kbGVDbGljaywgY2xhc3NOYW1lczogY2xhc3NOYW1lcyB9O1xuXHQgICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXHRcblx0ICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBjeCgncmVzdWx0cycsIGNsYXNzTmFtZXMuY29udGFpbmVyKSk7XG5cdCAgICB2YXIgcmVzdWx0SXRlbSA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIGN4KGNsYXNzTmFtZXMuaXRlbSkpO1xuXHRcblx0ICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbGljaywgdHJ1ZSk7XG5cdCAgICB0aGlzLmVsZW1lbnRzID0geyBjb250YWluZXI6IGNvbnRhaW5lciwgcmVzdWx0SXRlbTogcmVzdWx0SXRlbSB9O1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFJlc3VsdExpc3QsIFt7XG5cdCAgICBrZXk6ICdyZW5kZXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgdmFyIHJlc3VsdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdO1xuXHQgICAgICB2YXIgX2VsZW1lbnRzID0gdGhpcy5lbGVtZW50cyxcblx0ICAgICAgICAgIGNvbnRhaW5lciA9IF9lbGVtZW50cy5jb250YWluZXIsXG5cdCAgICAgICAgICByZXN1bHRJdGVtID0gX2VsZW1lbnRzLnJlc3VsdEl0ZW07XG5cdFxuXHQgICAgICB0aGlzLmNsZWFyKCk7XG5cdFxuXHQgICAgICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKHJlc3VsdCwgaWR4KSB7XG5cdCAgICAgICAgdmFyIGNoaWxkID0gcmVzdWx0SXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG5cdCAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKCdkYXRhLWtleScsIGlkeCk7XG5cdCAgICAgICAgY2hpbGQuaW5uZXJIVE1MID0gcmVzdWx0LmxhYmVsO1xuXHQgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5yZXN1bHRzID0gcmVzdWx0cztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZWxlY3QnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdChpbmRleCkge1xuXHQgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZnVzaW5nLWFycm93XG5cdFxuXHQgICAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQsIGlkeCkge1xuXHQgICAgICAgIHJldHVybiBpZHggPT09IGluZGV4ID8gKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJykgOiAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY2hpbGQsICdhY3RpdmUnKTtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICB0aGlzLnNlbGVjdGVkID0gaW5kZXg7XG5cdCAgICAgIHJldHVybiB0aGlzLnJlc3VsdHNbaW5kZXhdO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NvdW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjb3VudCgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMucmVzdWx0cy5sZW5ndGg7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnY2xlYXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkge1xuXHQgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICB0aGlzLnNlbGVjdGVkID0gLTE7XG5cdFxuXHQgICAgICB3aGlsZSAoY29udGFpbmVyLmxhc3RDaGlsZCkge1xuXHQgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIubGFzdENoaWxkKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFJlc3VsdExpc3Q7XG5cdH0oKTtcblx0XG5cdHZhciBfaW5pdGlhbGlzZVByb3BzID0gZnVuY3Rpb24gX2luaXRpYWxpc2VQcm9wcygpIHtcblx0ICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICB0aGlzLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgX3JlZjIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgIHRhcmdldCA9IF9yZWYyLnRhcmdldDtcblx0XG5cdCAgICB2YXIgaGFuZGxlQ2xpY2sgPSBfdGhpcy5wcm9wcy5oYW5kbGVDbGljaztcblx0ICAgIHZhciBjb250YWluZXIgPSBfdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgaWYgKHRhcmdldC5wYXJlbnROb2RlICE9PSBjb250YWluZXIgfHwgIXRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEta2V5JykpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpZHggPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWtleScpO1xuXHQgICAgdmFyIHJlc3VsdCA9IF90aGlzLnJlc3VsdHNbaWR4XTtcblx0ICAgIGhhbmRsZUNsaWNrKHsgcmVzdWx0OiByZXN1bHQgfSk7XG5cdCAgfTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFJlc3VsdExpc3Q7XG5cbi8qKiovIH0sXG4vKiAxNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0dmFyIF9kb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG5cdCAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7XG5cdCAgfXN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7aWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuXHQgIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2VuZHBvaW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcblx0ICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuXHQgICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sLFxuXHQgICAgICAgICAganNvbnAgPSBfcmVmLmpzb25wO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcblx0ICAgICAgICBxdWVyeTogcXVlcnksXG5cdCAgICAgICAganNvbnA6IGpzb25wXG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIHJldHVybiBwcm90b2NvbCArICcvL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvTG9jYXRpb25zPycgKyBwYXJhbVN0cmluZztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcblx0ICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXHRcblx0ICAgICAgaWYgKGRhdGEucmVzb3VyY2VTZXRzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybiBbXTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIGRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcy5tYXAoZnVuY3Rpb24gKHIpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgeDogci5wb2ludC5jb29yZGluYXRlc1sxXSxcblx0ICAgICAgICAgIHk6IHIucG9pbnQuY29vcmRpbmF0ZXNbMF0sXG5cdCAgICAgICAgICBsYWJlbDogci5hZGRyZXNzLmZvcm1hdHRlZEFkZHJlc3MsXG5cdCAgICAgICAgICBib3VuZHM6IFtbci5iYm94WzBdLCByLmJib3hbMV1dLCAvLyBzLCB3XG5cdCAgICAgICAgICBbci5iYm94WzJdLCByLmJib3hbM11dXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NlYXJjaCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKF9yZWYzKSB7XG5cdCAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwganNvbnAsIHVybCwganNvbjtcblx0ICAgICAgICBxdWVyeSA9IF9yZWYzLnF1ZXJ5O1xuXHRcblx0ICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuXHRcblx0ICAgICAgICBqc29ucCA9ICdCSU5HX0pTT05QX0NCXycgKyBEYXRlLm5vdygpO1xuXHQgICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCwganNvbnA6IGpzb25wIH0pO1xuXHRcblx0ICAgICAgICByZXR1cm4gKDAsIF9kb21VdGlscy5jcmVhdGVTY3JpcHRFbGVtZW50KSh1cmwsIGpzb25wKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHQgICAgICAgICAganNvbiA9ICRhd2FpdF8xO1xuXHQgICAgICAgICAgcmV0dXJuICRyZXR1cm4odGhpcy5wYXJzZSh7IGRhdGE6IGpzb24gfSkpO1xuXHQgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSxcbi8qIDE4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cdFxuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZ2V0UGFyYW1TdHJpbmcnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhcmFtU3RyaW5nKHBhcmFtcykge1xuXHQgICAgICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbXNba2V5XSk7XG5cdCAgICAgIH0pLmpvaW4oJyYnKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZWFyY2gnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmKSB7XG5cdCAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwgdXJsLCByZXF1ZXN0LCBqc29uO1xuXHQgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeTtcblx0XG5cdCAgICAgICAgcHJvdG9jb2wgPSB+bG9jYXRpb24ucHJvdG9jb2wuaW5kZXhPZignaHR0cCcpID8gbG9jYXRpb24ucHJvdG9jb2wgOiAnaHR0cHM6Jztcblx0ICAgICAgICB1cmwgPSB0aGlzLmVuZHBvaW50KHsgcXVlcnk6IHF1ZXJ5LCBwcm90b2NvbDogcHJvdG9jb2wgfSk7XG5cdFxuXHQgICAgICAgIHJldHVybiBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG5cdCAgICAgICAgICByZXF1ZXN0ID0gJGF3YWl0XzE7XG5cdCAgICAgICAgICByZXR1cm4gcmVxdWVzdC5qc29uKCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzIpIHtcblx0ICAgICAgICAgICAganNvbiA9ICRhd2FpdF8yO1xuXHQgICAgICAgICAgICByZXR1cm4gJHJldHVybih0aGlzLnBhcnNlKHsgZGF0YToganNvbiB9KSk7XG5cdCAgICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBQcm92aWRlcjtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cbi8qKiovIH0sXG4vKiAxOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcblx0ICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG5cdCAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG5cdCAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1yZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9wcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0dmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG5cdCAgaWYgKCFzZWxmKSB7XG5cdCAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG5cdCAgfXJldHVybiBjYWxsICYmICgodHlwZW9mIGNhbGwgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG5cdCAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihzdXBlckNsYXNzKSkpO1xuXHQgIH1zdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pO2lmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcblx0fVxuXHRcblx0dmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcblx0ICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXHRcblx0ICBmdW5jdGlvbiBQcm92aWRlcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG5cdCAgICBrZXk6ICdlbmRwb2ludCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG5cdCAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcblx0ICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblx0XG5cdCAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG5cdCAgICAgICAgZjogJ2pzb24nLFxuXHQgICAgICAgIHRleHQ6IHF1ZXJ5XG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIHJldHVybiBwcm90b2NvbCArICcvL2dlb2NvZGUuYXJjZ2lzLmNvbS9hcmNnaXMvcmVzdC9zZXJ2aWNlcy9Xb3JsZC9HZW9jb2RlU2VydmVyL2ZpbmQ/JyArIHBhcmFtU3RyaW5nO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BhcnNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuXHQgICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cdFxuXHQgICAgICByZXR1cm4gZGF0YS5sb2NhdGlvbnMubWFwKGZ1bmN0aW9uIChyKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHg6IHIuZmVhdHVyZS5nZW9tZXRyeS54LFxuXHQgICAgICAgICAgeTogci5mZWF0dXJlLmdlb21ldHJ5LnksXG5cdCAgICAgICAgICBsYWJlbDogci5uYW1lLFxuXHQgICAgICAgICAgYm91bmRzOiBbW3IuZXh0ZW50LnltaW4sIHIuZXh0ZW50LnhtaW5dLCAvLyBzLCB3XG5cdCAgICAgICAgICBbci5leHRlbnQueW1heCwgci5leHRlbnQueG1heF1dLFxuXHQgICAgICAgICAgcmF3OiByXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9LFxuLyogMjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcblx0ICB9c3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTtpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG5cdCAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblx0XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZW5kcG9pbnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG5cdCAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblx0XG5cdCAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuXHQgICAgICAgIGFkZHJlc3M6IHF1ZXJ5XG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIC8vIGdvb2dsZSByZXF1aXJlcyBhIHNlY3VyZSBjb25uZWN0aW9uIHdoZW4gdXNpbmcgYXBpIGtleXNcblx0ICAgICAgdmFyIHByb3RvID0gcGFyYW1zICYmIHBhcmFtcy5rZXkgPyAnaHR0cHM6JyA6IHByb3RvY29sO1xuXHQgICAgICByZXR1cm4gcHJvdG8gKyAnLy9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbj8nICsgcGFyYW1TdHJpbmc7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncGFyc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG5cdCAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblx0XG5cdCAgICAgIHJldHVybiBkYXRhLnJlc3VsdHMubWFwKGZ1bmN0aW9uIChyKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHg6IHIuZ2VvbWV0cnkubG9jYXRpb24ubG5nLFxuXHQgICAgICAgICAgeTogci5nZW9tZXRyeS5sb2NhdGlvbi5sYXQsXG5cdCAgICAgICAgICBsYWJlbDogci5mb3JtYXR0ZWRfYWRkcmVzcyxcblx0ICAgICAgICAgIGJvdW5kczogW1tyLmdlb21ldHJ5LnZpZXdwb3J0LnNvdXRod2VzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0LmxuZ10sIC8vIHMsIHdcblx0ICAgICAgICAgIFtyLmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0LmxuZ11dLFxuXHQgICAgICAgICAgcmF3OiByXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9LFxuLyogMjEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcblx0ICB9c3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTtpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG5cdCAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblx0XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZW5kcG9pbnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG5cdCAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblx0XG5cdCAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuXHQgICAgICAgIGZvcm1hdDogJ2pzb24nLFxuXHQgICAgICAgIHE6IHF1ZXJ5XG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIHJldHVybiBwcm90b2NvbCArICcvL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2g/JyArIHBhcmFtU3RyaW5nO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BhcnNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuXHQgICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cdFxuXHQgICAgICByZXR1cm4gZGF0YS5tYXAoZnVuY3Rpb24gKHIpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgeDogci5sb24sXG5cdCAgICAgICAgICB5OiByLmxhdCxcblx0ICAgICAgICAgIGxhYmVsOiByLmRpc3BsYXlfbmFtZSxcblx0ICAgICAgICAgIGJvdW5kczogW1twYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMF0pLCBwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMl0pXSwgLy8gcywgd1xuXHQgICAgICAgICAgW3BhcnNlRmxvYXQoci5ib3VuZGluZ2JveFsxXSksIHBhcnNlRmxvYXQoci5ib3VuZGluZ2JveFszXSldXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSxcbi8qIDIyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuR2V0QWN0aXZlTGF5ZXJHcm91cHMgPSBHZXRBY3RpdmVMYXllckdyb3Vwcztcblx0ZXhwb3J0cy5TZXR1cFBhbmVsID0gU2V0dXBQYW5lbDtcblx0ZXhwb3J0cy51cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0ID0gdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodDtcblx0XG5cdHZhciBfbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0XG5cdHZhciBfb3BhY2l0eVNsaWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIGxheWVyR3JvdXBMYXlvdXQgPSBbXTtcblx0XG5cdGZ1bmN0aW9uIEdldEFjdGl2ZUxheWVyR3JvdXBzKCkge1xuXHQgICAgcmV0dXJuIGxheWVyR3JvdXBMYXlvdXQuZmlsdGVyKGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyR3JvdXAuYWN0aXZlO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFNldHVwUGFuZWwobGF5ZXJzLCBsYXlvdXQpIHtcblx0ICAgIGxheWVyR3JvdXBMYXlvdXQgPSBsYXlvdXRbJ2xheWVyLWdyb3Vwcy1vcmRlciddO1xuXHQgICAgdmFyIGxheWVyR3JvdXBzID0gbWFrZUxheWVyR3JvdXBzKGxheW91dFsnbGF5ZXItZ3JvdXBzLW9yZGVyJ10pO1xuXHQgICAgbWFrZUxheWVyRWxlbXMobGF5ZXJHcm91cHMsIGxheWVycyk7XG5cdCAgICBtYWtlUGFuZWxEcmFnZ2FibGUoKTtcblx0ICAgIHNldFBhbmVsU2Nyb2xsSGFuZGxlcigpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBicm93c2VySXNJbnRlcm5ldEV4cGxvcmVyKCkge1xuXHQgICAgdmFyIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7XG5cdCAgICByZXR1cm4gdWEuaW5kZXhPZignTVNJRScpID4gLTEgfHwgdWEuaW5kZXhPZigncnY6MTEuMCcpID4gLTE7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldFBhbmVsU2Nyb2xsSGFuZGxlcigpIHtcblx0ICAgIHZhciBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpO1xuXHQgICAgcGFuZWwub25zY3JvbGwgPSB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlUGFuZWxEcmFnZ2FibGUoKSB7XG5cdCAgICBpZiAoYnJvd3NlcklzSW50ZXJuZXRFeHBsb3JlcigpKSByZXR1cm47XG5cdFxuXHQgICAgdmFyIG92ZXJsYXkgPSBkMy5zZWxlY3QoJyNyaWdodC1wYW5lbC1kcmFnLW92ZXJsYXknKTtcblx0XG5cdCAgICBvdmVybGF5LnN0eWxlKCdjdXJzb3InLCAnZXctcmVzaXplJyk7XG5cdFxuXHQgICAgb3ZlcmxheS5jYWxsKGQzLmRyYWcoKS5vbignZHJhZycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBwYW5lbERyYWdFdmVudEhhbmRsZXIuY2FsbCh0aGlzKTtcblx0ICAgIH0pKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGFuZWxEcmFnRXZlbnRIYW5kbGVyKCkge1xuXHQgICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpO1xuXHQgICAgdXBkYXRlUGFuZWxXaWR0aCgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KCkge1xuXHQgICAgdmFyIHBhbmVsID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwnKTtcblx0ICAgIHZhciBwYW5lbE9mZnNldEhlaWdodCA9IHBhbmVsLnByb3BlcnR5KCdvZmZzZXRIZWlnaHQnKTtcblx0ICAgIHZhciBwYW5lbERyYWdPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsLWRyYWctb3ZlcmxheScpO1xuXHQgICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbC1oZWFkZXInKTtcblx0XG5cdCAgICB2YXIgbmV3SGVpZ2h0O1xuXHRcblx0ICAgIGlmIChwYW5lbC5jbGFzc2VkKCdncmFwaHMtYWN0aXZlJykpIHtcblx0ICAgICAgICB2YXIgZ3JhcGhMaXN0RXh0cmFTcGFjZSA9IDcwMDtcblx0ICAgICAgICB2YXIgZ3JhcGhMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyYXBoLWxpc3QnKTtcblx0ICAgICAgICBuZXdIZWlnaHQgPSBoZWFkZXIuc2Nyb2xsSGVpZ2h0ICsgZ3JhcGhMaXN0LnNjcm9sbEhlaWdodCArIGdyYXBoTGlzdEV4dHJhU3BhY2U7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIHBhbmVsLmNsYXNzZWQoJ2xheWVycy1hY3RpdmUnKVxuXHQgICAgICAgIHZhciBsYXllckxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGF5ZXItbGlzdCcpO1xuXHQgICAgICAgIG5ld0hlaWdodCA9IGhlYWRlci5zY3JvbGxIZWlnaHQgKyBsYXllckxpc3Quc2Nyb2xsSGVpZ2h0O1xuXHQgICAgfVxuXHQgICAgbmV3SGVpZ2h0ID0gbmV3SGVpZ2h0ID4gcGFuZWxPZmZzZXRIZWlnaHQgPyBcIlwiICsgbmV3SGVpZ2h0ICsgJ3B4JyA6IG51bGw7XG5cdCAgICBwYW5lbERyYWdPdmVybGF5LnN0eWxlLmhlaWdodCA9IG5ld0hlaWdodDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlUGFuZWxXaWR0aCgpIHtcblx0ICAgIHZhciBwYW5lbCA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsJyk7XG5cdCAgICB2YXIgcGFuZWxNaW5XaWR0aCA9ICtwYW5lbC5zdHlsZSgnbWluLXdpZHRoJykuc2xpY2UoMCwgLTIpO1xuXHQgICAgdmFyIHBhbmVsQ2xpZW50V2lkdGggPSBwYW5lbC5wcm9wZXJ0eSgnY2xpZW50V2lkdGgnKTtcblx0XG5cdCAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3cmFwcGVyJyk7XG5cdCAgICB2YXIgd3JhcHBlcldpZHRoID0gd3JhcHBlci5jbGllbnRXaWR0aDtcblx0XG5cdCAgICB2YXIgbWFwV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtd3JhcHBlcicpO1xuXHRcblx0ICAgIHZhciBtb3VzZVggPSBkMy5ldmVudC5zb3VyY2VFdmVudC54O1xuXHQgICAgdmFyIHhEZWx0YSA9IHdyYXBwZXJXaWR0aCAtIG1vdXNlWCAtIHBhbmVsQ2xpZW50V2lkdGg7XG5cdFxuXHQgICAgdmFyIG5ld1BhbmVsV2lkdGggPSBwYW5lbENsaWVudFdpZHRoICsgeERlbHRhO1xuXHQgICAgbmV3UGFuZWxXaWR0aCA9IG5ld1BhbmVsV2lkdGggPCBwYW5lbE1pbldpZHRoID8gcGFuZWxNaW5XaWR0aCA6IG5ld1BhbmVsV2lkdGggPiB3cmFwcGVyV2lkdGggPyB3cmFwcGVyV2lkdGggOiBuZXdQYW5lbFdpZHRoO1xuXHQgICAgbWFwV3JhcHBlci5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIlwiICsgbmV3UGFuZWxXaWR0aCArICdweCc7XG5cdCAgICBwYW5lbC5zdHlsZSgnd2lkdGgnLCBcIlwiICsgbmV3UGFuZWxXaWR0aCArICdweCcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGF5ZXJHcm91cHMobGF5b3V0KSB7XG5cdCAgICByZXR1cm4gZDMuc2VsZWN0KCcjbGF5ZXItbGlzdCcpLnNlbGVjdEFsbCgnLmxheWVyLWdyb3VwLXdyYXBwZXInKS5kYXRhKGxheW91dCkuZW50ZXIoKS5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwLXdyYXBwZXInKS5hdHRyKCdpZCcsIGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyR3JvdXAuaWQ7XG5cdCAgICB9KS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgIHJldHVybiBsYXllckdyb3VwLmFjdGl2ZTtcblx0ICAgIH0pLmVhY2goZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0ICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cC1idG4gYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0XG5cdCAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvZ2dsZSB0aGUgbGF5ZXIgbGlzdCBhY2NvcmRpYW5zXG5cdCAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2xheWVyIGxpc3QnLFxuXHQgICAgICAgICAgICAgICAgZXZlbnRBY3Rpb246ICd0b2dnbGUgJyArICFsYXllckdyb3VwLmFjdGl2ZSxcblx0ICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6IGxheWVyR3JvdXAubmFtZSxcblx0ICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICAgIGxheWVyR3JvdXAuYWN0aXZlID0gIWxheWVyR3JvdXAuYWN0aXZlO1xuXHQgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gbGF5ZXJHcm91cC5hY3RpdmU7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KCk7XG5cdCAgICAgICAgICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdCAgICAgICAgfSkudGV4dChsYXllckdyb3VwLm5hbWUpO1xuXHQgICAgfSkuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cCcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGF5ZXJFbGVtcyhsYXllckdyb3VwcywgbGF5ZXJzKSB7XG5cdCAgICBsYXllckdyb3Vwcy5zZWxlY3RBbGwoJy5sYXllci1zZWxlY3QnKS5kYXRhKGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyc1tsYXllckdyb3VwLmlkXTtcblx0ICAgIH0pLmVudGVyKCkuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1zZWxlY3QnKS5lYWNoKGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHZhciBncm91cE5hbWUgPSB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZDtcblx0ICAgICAgICB2YXIgbGF5ZXJEaXYgPSBkMy5zZWxlY3QodGhpcyk7XG5cdCAgICAgICAgbWFrZUNoZWNrYm94KGxheWVyLCBsYXllckRpdik7XG5cdCAgICAgICAgbWFrZUxhYmVsKGxheWVyLCBsYXllckRpdik7XG5cdCAgICAgICAgbWFrZURlc2NyaXB0aW9uKGxheWVyLCBsYXllckRpdik7XG5cdCAgICAgICAgbGF5ZXJEaXYubm9kZSgpLmFwcGVuZENoaWxkKG1ha2VMYXllclRvb2xzKGxheWVyKSk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUNoZWNrYm94KGxheWVyLCBsYXllckRpdikge1xuXHQgICAgbGF5ZXJEaXYuYXBwZW5kKCdpbnB1dCcpLmF0dHIoJ3R5cGUnLCAnY2hlY2tib3gnKS5hdHRyKCdpZCcsIGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHJldHVybiBsYXllci5pZDtcblx0ICAgIH0pLmF0dHIoJ2NoZWNrZWQnLCBmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXIuYWN0aXZlID8gJ2NoZWNrZWQnIDogbnVsbDtcblx0ICAgIH0pLm9uKCdjbGljaycsIGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgICgwLCBfbGF5ZXIudG9nZ2xlTGF5ZXIpKGxheWVyKTtcblx0ICAgICAgICBsYXllckRpdi5zZWxlY3QoJy5sYXllci10b29scy13cmFwcGVyJykuY2xhc3NlZCgnYWN0aXZlJywgbGF5ZXIuYWN0aXZlKTtcblx0ICAgICAgICBpZiAobGF5ZXIuYWN0aXZlKSB7XG5cdCAgICAgICAgICAgIHZhciBzbGlkZXJIYW5kbGUgPSBsYXllckRpdi5zZWxlY3QoJy5vcGFjaXR5LXNsaWRlci1oYW5kbGUnKS5ub2RlKCk7XG5cdCAgICAgICAgICAgICgwLCBfb3BhY2l0eVNsaWRlci5zZXRPcGFjaXR5U2xpZGVyUG9zaXRpb24pKGxheWVyLCBzbGlkZXJIYW5kbGUsIGxheWVyLm9wYWNpdGl5KTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxhYmVsKGxheWVyLCBsYXllckRpdikge1xuXHQgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1sYWJlbC13cmFwcGVyJykuYXBwZW5kKCdsYWJlbCcpLmF0dHIoJ2ZvcicsIGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHJldHVybiBsYXllci5pZDtcblx0ICAgIH0pLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWxhYmVsJykuaHRtbChmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXIubmFtZTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlRGVzY3JpcHRpb24obGF5ZXIsIGxheWVyRGl2KSB7XG5cdCAgICBpZiAobGF5ZXIuaW5mbyAmJiBsYXllci5pbmZvICE9PSAnJykge1xuXHQgICAgICAgIGxheWVyRGl2LmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby1idG4td3JhcHBlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMucGFyZW50Tm9kZSkuc2VsZWN0KCcubGF5ZXItaW5mby13cmFwcGVyJykuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKCkge1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIGxheWVyIGluZm9cblx0ICAgICAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdsYXllciBpbmZvJyxcblx0ICAgICAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrZWQnLFxuXHQgICAgICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6IGxheWVyLm5hbWUgKyBcIiBcIiArICFkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnYWN0aXZlJyksXG5cdCAgICAgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gIWQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdhY3RpdmUnKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSkuYXBwZW5kKCdpbWcnKS5hdHRyKCdjbGFzcycsICdsYXllci1pbmZvLWljb24nKS5hdHRyKCdzcmMnLCAnaW1ncy9tb3JlLWluZm8taWNvbi02NHg2NC5wbmcnKS5hdHRyKFwiYWx0XCIsIFwiUmVhZCBtb3JlIGFib3V0IHRoZSBcIiArIGxheWVyLm5hbWUgKyBcIiBsYXllclwiKS5hdHRyKFwidGl0bGVcIiwgXCJSZWFkIG1vcmUgYWJvdXQgdGhlIFwiICsgbGF5ZXIubmFtZSArIFwiIGxheWVyXCIpO1xuXHRcblx0ICAgICAgICBsYXllckRpdi5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8td3JhcHBlcicpLnRleHQoZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBsYXllci5pbmZvO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGF5ZXJUb29scyhsYXllciwgbGF5ZXJEaXYpIHtcblx0ICAgIHZhciBsYXllclRvb2xzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICBsYXllclRvb2xzRGl2LmNsYXNzTGlzdC5hZGQoJ2xheWVyLXRvb2xzLXdyYXBwZXInKTtcblx0ICAgIGlmIChsYXllci5hY3RpdmUpIGxheWVyVG9vbHNEaXYuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cdFxuXHQgICAgdmFyIG9wYWNpdHlTbGlkZXIgPSAoMCwgX29wYWNpdHlTbGlkZXIubWFrZU9wYWNpdHlTbGlkZXIpKGxheWVyKTtcblx0ICAgIHZhciBsZWdlbmQgPSBtYWtlTGVnZW5kKGxheWVyKTtcblx0XG5cdCAgICBsYXllclRvb2xzRGl2LmFwcGVuZENoaWxkKGxlZ2VuZCk7XG5cdCAgICBsYXllclRvb2xzRGl2LmFwcGVuZENoaWxkKG9wYWNpdHlTbGlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBsYXllclRvb2xzRGl2O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGVnZW5kKGxheWVyLCBsYXllclRvb2xzV3JhcHBlcikge1xuXHQgICAgdmFyIGxlZ2VuZFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIHZhciBsZWdlbmRJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblx0ICAgIGxlZ2VuZFdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnbGVnZW5kLXdyYXBwZXInKTtcblx0ICAgIGxlZ2VuZEltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGxheWVyLmxlZ2VuZCk7XG5cdCAgICBsZWdlbmRXcmFwcGVyLmFwcGVuZENoaWxkKGxlZ2VuZEltZyk7XG5cdCAgICByZXR1cm4gbGVnZW5kV3JhcHBlcjtcblx0fVxuXG4vKioqLyB9LFxuLyogMjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5HZXRDdXJyZW50TGF5ZXJzID0gR2V0Q3VycmVudExheWVycztcblx0ZXhwb3J0cy5DcmVhdGVEZWZhdWx0TGF5ZXJzID0gQ3JlYXRlRGVmYXVsdExheWVycztcblx0ZXhwb3J0cy50b2dnbGVMYXllciA9IHRvZ2dsZUxheWVyO1xuXHRleHBvcnRzLmVuYWJsZUxheWVyID0gZW5hYmxlTGF5ZXI7XG5cdGV4cG9ydHMuZGlzYWJsZUxheWVyID0gZGlzYWJsZUxheWVyO1xuXHRleHBvcnRzLnVwZGF0ZUxheWVyT3BhY2l0eSA9IHVwZGF0ZUxheWVyT3BhY2l0eTtcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHQvKipcblx0ICogTmVlZGVkIGZvciB0aGUgc2hhcmUgdXJsIHNpbmNlIExlYWZsZXQgZG9lcyBub3QgaGF2ZSBhIGRlZmF1bHQgd2F5IHRvIHN1cmZhY2Vcblx0ICogdGhlIG9yZGVyIG9mIGxheWVycyBpbiB0aGUgbWFwXG5cdCAqL1xuXHR2YXIgX2N1cnJlbnRfbGF5ZXJzID0gW107XG5cdHZhciBfY3VycmVudF9sYXllcnNfb2JqZWN0cyA9IFtdO1xuXHRcblx0LyoqXG5cdCAqIE5vdGU6IGxheWVyIGlzIG5vdCB0aGUgbGVhZmxldCBjb25jZXB0IG9mIGEgbGF5ZXIsIGJ1dCByYXRoZXIgdGhlIGludGVybmFsXG5cdCAqICAgICAgIG9iamVjdCB3aGljaCB0cmFja3MgdGhlbS4gbGF5ZXIubWFwTGF5ZXIgaXMgdGhlIHBvaW50ZXIgdG8gdGhlXG5cdCAqICAgICAgIGxlYWZsZXQgbGF5ZXIuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gR2V0Q3VycmVudExheWVycygpIHtcblx0ICAgIHJldHVybiBfY3VycmVudF9sYXllcnM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIENyZWF0ZURlZmF1bHRMYXllcnMobGF5ZXJzLCBkZWZhdWx0TGF5ZXJzKSB7XG5cdCAgICB2YXIgaSwgaiwgcHJvcCwgbGF5ZXJncm91cDtcblx0ICAgIHZhciBkZWZhdWx0TGF5ZXI7XG5cdCAgICB2YXIgZm91bmRMYXllcjtcblx0XG5cdCAgICBpZiAoIWRlZmF1bHRMYXllcnMgfHwgZGVmYXVsdExheWVycy5sZW5ndGggPT09IDApIHJldHVybjtcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgZGVmYXVsdExheWVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGZvdW5kTGF5ZXIgPSBmYWxzZTtcblx0ICAgICAgICBkZWZhdWx0TGF5ZXIgPSBkZWZhdWx0TGF5ZXJzW2ldO1xuXHQgICAgICAgIGZvciAocHJvcCBpbiBsYXllcnMpIHtcblx0ICAgICAgICAgICAgaWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcblx0ICAgICAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcblx0ICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGxheWVyZ3JvdXAubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgICAgICAgIGlmIChsYXllcmdyb3VwW2pdLmlkID09PSBkZWZhdWx0TGF5ZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICBlbmFibGVMYXllcihsYXllcmdyb3VwW2pdKTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3VuZExheWVyID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoZm91bmRMYXllcikgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b2dnbGVMYXllcihsYXllcikge1xuXHQgICAgaWYgKCFsYXllci5hY3RpdmUpIHtcblx0ICAgICAgICBlbmFibGVMYXllcihsYXllcik7XG5cdFxuXHQgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvZ2dsZSB0aGUgbGF5ZXIgb25cblx0ICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2xheWVyJyxcblx0ICAgICAgICAgICAgZXZlbnRBY3Rpb246ICd0b2dnbGUgb24nLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiBsYXllci5uYW1lLFxuXHQgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZGlzYWJsZUxheWVyKGxheWVyKTtcblx0XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgdG9nZ2xlIHRoZSBsYXllciBvZmZcblx0ICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2xheWVyJyxcblx0ICAgICAgICAgICAgZXZlbnRBY3Rpb246ICd0b2dnbGUgb2ZmJyxcblx0ICAgICAgICAgICAgZXZlbnRMYWJlbDogbGF5ZXIubmFtZSxcblx0ICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgfSk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGVuYWJsZUxheWVyKGxheWVyKSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIGxheWVyLmFjdGl2ZSA9IHRydWU7XG5cdCAgICBsYXllci5tYXBMYXllciA9IGxheWVyLm1hcExheWVyIHx8IG1ha2VXbXNUaWxlTGF5ZXIobGF5ZXIpO1xuXHQgICAgbWFwLmFkZExheWVyKGxheWVyLm1hcExheWVyKTtcblx0ICAgIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xuXHQgICAgbW92ZU92ZXJsYXlMYXllcnNUb1RvcCgpO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbW92ZU92ZXJsYXlMYXllcnNUb1RvcCgpIHtcblx0ICAgIHZhciBsYXllcjtcblx0ICAgIHZhciBpLCBsO1xuXHRcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBfY3VycmVudF9sYXllcnNfb2JqZWN0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBsYXllciA9IF9jdXJyZW50X2xheWVyc19vYmplY3RzW2ldO1xuXHQgICAgICAgIGlmIChsYXllci50eXBlID09PSBcIm92ZXJsYXlcIikgbGF5ZXIubWFwTGF5ZXIuYnJpbmdUb0Zyb250KCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIobGF5ZXIpIHtcblx0ICAgIF9jdXJyZW50X2xheWVycy5wdXNoKGxheWVyLmlkKTtcblx0ICAgIF9jdXJyZW50X2xheWVyc19vYmplY3RzLnB1c2gobGF5ZXIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkaXNhYmxlTGF5ZXIobGF5ZXIpIHtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHQgICAgbGF5ZXIuYWN0aXZlID0gZmFsc2U7XG5cdCAgICBpZiAobGF5ZXIubWFwTGF5ZXIgJiYgbWFwLmhhc0xheWVyKGxheWVyLm1hcExheWVyKSkge1xuXHQgICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllci5tYXBMYXllcik7XG5cdCAgICB9XG5cdCAgICByZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlTGF5ZXJGcm9tSW50ZXJuYWxUcmFja2VyKGxheWVyKSB7XG5cdCAgICB2YXIgbG9jID0gX2N1cnJlbnRfbGF5ZXJzLmluZGV4T2YobGF5ZXIuaWQpO1xuXHQgICAgaWYgKGxvYyA9PT0gLTEpIHJldHVybjtcblx0ICAgIF9jdXJyZW50X2xheWVycy5zcGxpY2UobG9jLCAxKTtcblx0ICAgIF9jdXJyZW50X2xheWVyc19vYmplY3RzLnNwbGljZShsb2MsIDEpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVMYXllck9wYWNpdHkobGF5ZXIsIG5ld09wYWNpdHkpIHtcblx0ICAgIGxheWVyLm9wYWNpdHkgPSBuZXdPcGFjaXR5O1xuXHQgICAgbGF5ZXIubWFwTGF5ZXIuc2V0T3BhY2l0eShuZXdPcGFjaXR5KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVdtc1RpbGVMYXllcihsYXllcikge1xuXHQgICAgcmV0dXJuIEwudGlsZUxheWVyLndtcyhsYXllci51cmwsIHtcblx0ICAgICAgICBsYXllcnM6IGxheWVyLmlkLFxuXHQgICAgICAgIHRyYW5zcGFyZW50OiBsYXllci50cmFuc3BhcmVudCB8fCB0cnVlLFxuXHQgICAgICAgIHZlcnNpb246IGxheWVyLnZlcnNpb24gfHwgJzEuMy4wJyxcblx0ICAgICAgICBjcnM6IGxheWVyLmNycyB8fCBMLkNSUy5FUFNHOTAwOTEzLFxuXHQgICAgICAgIGZvcm1hdDogbGF5ZXIuZm9ybWF0IHx8ICdpbWFnZS9wbmcnLFxuXHQgICAgICAgIG9wYWNpdHk6IGxheWVyLm9wYWNpdHkgfHwgLjc1LFxuXHQgICAgICAgIHRpbGVTaXplOiBsYXllci50aWxlU2l6ZSB8fCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcFwiKS5jbGllbnRXaWR0aFxuXHQgICAgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkNyZWF0ZU1hcCA9IENyZWF0ZU1hcDtcblx0ZXhwb3J0cy5HZXRNYXAgPSBHZXRNYXA7XG5cdHZhciBtYXA7XG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVNYXAobWFwQ29uZmlnKSB7XG5cdCAgdmFyIGlkID0gbWFwQ29uZmlnLmlkIHx8IFwibWFwXCI7XG5cdCAgdmFyIG9wdGlvbnMgPSBtYXBDb25maWcub3B0aW9ucyB8fCB7IFwic2Nyb2xsV2hlZWxab29tXCI6IGZhbHNlIH07XG5cdCAgdmFyIGluaXRpYWxDZW50ZXIgPSBtYXBDb25maWcuY2VudGVyIHx8IFtcIjM4LjVcIiwgXCItODFcIl07XG5cdCAgdmFyIGluaXRpYWxab29tID0gbWFwQ29uZmlnLnpvb20gfHwgNjtcblx0XG5cdCAgbWFwID0gTC5tYXAoaWQsIG9wdGlvbnMpLnNldFZpZXcoaW5pdGlhbENlbnRlciwgaW5pdGlhbFpvb20pO1xuXHQgIEwuY29udHJvbC5hdHRyaWJ1dGlvbigpLmFkZFRvKG1hcCk7XG5cdFxuXHQgIHZhciBsZWFmbGV0Wm9vbUluID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImxlYWZsZXQtY29udHJvbC16b29tLWluXCIpWzBdO1xuXHRcblx0ICBsZWFmbGV0Wm9vbUluLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3Igc2VhY3JjaCBieSBhZGRyZXNzXG5cdCAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdCAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2sgYnV0dG9uJyxcblx0ICAgICAgZXZlbnRMYWJlbDogJ3pvb20gaW4nLFxuXHQgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgIH0pO1xuXHQgIH0pO1xuXHRcblx0ICB2YXIgbGVhZmxldFpvb21PdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibGVhZmxldC1jb250cm9sLXpvb20tb3V0XCIpWzBdO1xuXHRcblx0ICBsZWFmbGV0Wm9vbU91dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIHNlYWNyY2ggYnkgYWRkcmVzc1xuXHQgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuXHQgICAgICBldmVudEFjdGlvbjogJ2NsaWNrIGJ1dHRvbicsXG5cdCAgICAgIGV2ZW50TGFiZWw6ICd6b29tIG91dCcsXG5cdCAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgfSk7XG5cdCAgfSk7XG5cdFxuXHQgIG1hcC5vbihcImRyYWdlbmRcIiwgZnVuY3Rpb24gKGUpIHtcblx0ICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBkcmFnIChwYW4pIGVuZFxuXHQgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuXHQgICAgICBldmVudEFjdGlvbjogJ2RyYWcnLFxuXHQgICAgICBldmVudExhYmVsOiBKU09OLnN0cmluZ2lmeShtYXAuZ2V0Qm91bmRzKCkpLFxuXHQgICAgICBub25JbnRlcmFjdGlvbjogdHJ1ZVxuXHQgICAgfSk7XG5cdCAgfSk7XG5cdFxuXHQgIG1hcC5vbihcInpvb21lbmRcIiwgZnVuY3Rpb24gKGUpIHtcblx0ICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciB6b29tIGVuZFxuXHQgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuXHQgICAgICBldmVudEFjdGlvbjogJ3pvb20nLFxuXHQgICAgICBldmVudExhYmVsOiBKU09OLnN0cmluZ2lmeShtYXAuZ2V0Qm91bmRzKCkpLFxuXHQgICAgICBub25JbnRlcmFjdGlvbjogdHJ1ZVxuXHQgICAgfSk7XG5cdCAgfSk7XG5cdCAgcmV0dXJuIG1hcDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gR2V0TWFwKCkge1xuXHQgIHJldHVybiBtYXA7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkJpbmRVcGRhdGVTaGFyZVVybCA9IEJpbmRVcGRhdGVTaGFyZVVybDtcblx0ZXhwb3J0cy51cGRhdGVTaGFyZVVybCA9IHVwZGF0ZVNoYXJlVXJsO1xuXHRleHBvcnRzLkFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZyA9IEFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZztcblx0ZXhwb3J0cy5CaW5kQ29weUxpbmtFdmVudHMgPSBCaW5kQ29weUxpbmtFdmVudHM7XG5cdFxuXHR2YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRcblx0dmFyIF9iYXNlbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0XG5cdHZhciBfbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0XG5cdHZhciBfcG9pID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdFxuXHR2YXIgX3BhbmVsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdFxuXHRmdW5jdGlvbiBCaW5kVXBkYXRlU2hhcmVVcmwobWFwKSB7XG5cdCAgICBtYXAub24oXCJtb3ZlZW5kXCIsIHVwZGF0ZVNoYXJlVXJsKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlU2hhcmVVcmwoZSkge1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkdldE1hcCkoKTtcblx0XG5cdCAgICB2YXIgcGFyYW1zID0gW21ha2VDZW50ZXJTdHJpbmcobWFwKSwgbWFrZVpvb21TdHJpbmcobWFwKSwgbWFrZUxheWVyU3RyaW5nKG1hcCksIG1ha2VMYXllckdyb3Vwc1N0cmluZygpLCBtYWtlQmFzZUxheWVyU3RyaW5nKG1hcCksIG1ha2VQb2ludHNPZkludGVyZXN0U3RyaW5nKCksIG1ha2VBY3RpdmVUYWJTdHJpbmcoKSwgbWFrZUFjdGl2ZUdyYXBoVGFiU3RyaW5nKCldO1xuXHRcblx0ICAgIHNldFNoYXJlVXJsKG1ha2VTaGFyZVVybChwYXJhbXMpKTtcblx0ICAgIHNldENvcHlMaW5rVXJsKCk7XG5cdCAgICBzZXRTb2NpYWxVcmxzKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZyhjb25maWcpIHtcblx0ICAgIHZhciBzaGFyZSA9IHBhcnNlU2hhcmVVcmwoKTtcblx0ICAgIGlmICghc2hhcmUpIHJldHVybjtcblx0ICAgIGlmIChzaGFyZS5jZW50ZXIpIGNvbmZpZy5tYXAuY2VudGVyID0gc2hhcmUuY2VudGVyO1xuXHQgICAgaWYgKHNoYXJlLnpvb20pIGNvbmZpZy5tYXAuem9vbSA9IHNoYXJlLnpvb207XG5cdCAgICBpZiAoc2hhcmUubGF5ZXJzKSBhZGRMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmUubGF5ZXJzLCBjb25maWcpO1xuXHQgICAgaWYgKHNoYXJlLmJhc2VsYXllcnMpIGFkZEJhc2VMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmUuYmFzZWxheWVycywgY29uZmlnKTtcblx0ICAgIGlmIChzaGFyZS5wb2lzKSBhZGRQb2ludHNPZkludGVyZXN0VG9Db25maWcoc2hhcmUucG9pcywgY29uZmlnKTtcblx0ICAgIGlmIChzaGFyZS50YWIpIGNvbmZpZy50YWIgPSBzaGFyZS50YWI7XG5cdCAgICBpZiAoc2hhcmUuZ3JhcGgpIGNvbmZpZy5ncmFwaCA9IHNoYXJlLmdyYXBoO1xuXHQgICAgaWYgKHNoYXJlLmxheWVyR3JvdXBzKSBjb25maWcubGF5ZXJHcm91cHMgPSBhZGRMYXllckdyb3VwU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5sYXllckdyb3VwcywgY29uZmlnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVNoYXJlVXJsKHBhcmFtcykge1xuXHQgICAgcmV0dXJuIFwiP1wiICsgcGFyYW1zLmZpbHRlcihmdW5jdGlvbiAocCkge1xuXHQgICAgICAgIHJldHVybiBwICE9PSB1bmRlZmluZWQ7XG5cdCAgICB9KS5qb2luKFwiJlwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0U2hhcmVVcmwodXJsKSB7XG5cdCAgICBpZiAod2luZG93Lmhpc3RvcnkgJiYgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKSB7XG5cdCAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBcIlwiLCB1cmwpO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRDb3B5TGlua1VybCgpIHtcblx0ICAgIHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcblx0ICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hhcmV1cmwtbGluay11cmxcIikuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgdXJsKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gQmluZENvcHlMaW5rRXZlbnRzKCkge1xuXHQgICAgZDMuc2VsZWN0KGRvY3VtZW50KS5vbihcImNsaWNrXCIsIGhhbmRsZUJvZHlDbGljayk7XG5cdCAgICBkMy5zZWxlY3QoXCIuc2hhcmV1cmwtbGluayBhXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlU2hhcmVMaW5rQnV0dG9uQ2xpY2spO1xuXHQgICAgZDMuc2VsZWN0KFwiLnNoYXJldXJsLWxpbmstdXJsXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlU2hhcmVMaW5rVXJsQ2xpY2spO1xuXHQgICAgZDMuc2VsZWN0KFwiLnNoYXJldXJsLWxpbmstcG9wdXAtcmVtb3ZlclwiKS5vbihcImNsaWNrXCIsIGhhbmRsZVNoYXJlTGlua0Nsb3NlQnV0dG9uQ2xpY2spO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU2hvdWxkIGNsb3NlIHRoZSBjb3B5IGxpbmsgcG9wdXAgaWYgaXQgaXMgYWN0aXZlIGFuZCBpZiB5b3UgY2xpY2sgb24gYW55IGVsZW1lbnRcblx0ICogdGhhdCBpcyBub3QgdGhlIHBvcHVwIG9yIGl0cyBjaGlsZHJlbi5cblx0ICovXG5cdGZ1bmN0aW9uIGhhbmRsZUJvZHlDbGljaygpIHtcblx0ICAgIHZhciBldmVudCA9IGQzLmV2ZW50O1xuXHQgICAgdmFyIG5vZGVQYXRoID0gW107XG5cdCAgICBub2RlUGF0aCA9IGdldERvbVBhdGgoZXZlbnQudGFyZ2V0KTtcblx0XG5cdCAgICB2YXIgdG9DbG9zZVBvcHVwID0gdHJ1ZTtcblx0ICAgIHZhciBpLCBsO1xuXHRcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBub2RlUGF0aC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICBpZiAobm9kZVBhdGhbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaGFyZXVybC1saW5rLXBvcHVwJykgfHwgbm9kZVBhdGhbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaGFyZXVybC1saW5rJykpIHtcblx0ICAgICAgICAgICAgICAgIHRvQ2xvc2VQb3B1cCA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIC8vIGNsaWNraW5nIHN2ZyB0aHJvd3MgYW4gZXJyb3IgaW4gSUVcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHRvQ2xvc2VQb3B1cCkge1xuXHQgICAgICAgIHZhciBzaGFyZVBvcHVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2hhcmV1cmwtbGluay1wb3B1cCcpLml0ZW0oMCk7XG5cdCAgICAgICAgaGFuZGxlQ29weUxpbmtDbG9zZShzaGFyZVBvcHVwKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0RG9tUGF0aChub2RlKSB7XG5cdCAgICB2YXIgcGF0aCA9IFtdO1xuXHQgICAgd2hpbGUgKG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlKSB7XG5cdCAgICAgICAgcGF0aC5wdXNoKG5vZGUpO1xuXHQgICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcGF0aDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlU2hhcmVMaW5rQnV0dG9uQ2xpY2soKSB7XG5cdCAgICB2YXIgc2hhcmVQb3B1cCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaGFyZXVybC1saW5rLXBvcHVwXCIpLml0ZW0oMCk7XG5cdCAgICBpZiAoZDMuc2VsZWN0KHNoYXJlUG9wdXApLmNsYXNzZWQoXCJhY3RpdmVcIikpIHtcblx0ICAgICAgICBoYW5kbGVDb3B5TGlua0Nsb3NlKHNoYXJlUG9wdXApO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBoYW5kbGVDb3B5TGlua09wZW4oc2hhcmVQb3B1cCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVNoYXJlTGlua0Nsb3NlQnV0dG9uQ2xpY2soKSB7XG5cdCAgICB2YXIgc2hhcmVQb3B1cCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaGFyZXVybC1saW5rLXBvcHVwXCIpLml0ZW0oMCk7XG5cdCAgICBoYW5kbGVDb3B5TGlua0Nsb3NlKHNoYXJlUG9wdXApO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVTaGFyZUxpbmtVcmxDbGljaygpIHtcblx0ICAgIHNlbGVjdENvcHlMaW5rVXJsKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZUNvcHlMaW5rT3BlbihzaGFyZVBvcHVwKSB7XG5cdCAgICBzaGFyZVBvcHVwLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XG5cdCAgICBzZWxlY3RDb3B5TGlua1VybCgpO1xuXHRcblx0ICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGNsaWNrIG9uIHNoYXJlIHVybFxuXHQgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgZXZlbnRDYXRlZ29yeTogJ3NoYXJldXJsJyxcblx0ICAgICAgICBldmVudEFjdGlvbjogJ29wZW4nLFxuXHQgICAgICAgIGV2ZW50TGFiZWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hhcmV1cmwtbGluay11cmxcIikuZ2V0QXR0cmlidXRlKFwidmFsdWVcIiksXG5cdCAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlQ29weUxpbmtDbG9zZShzaGFyZVBvcHVwKSB7XG5cdFxuXHQgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZXZlbnQgY2xpY2sgb24gc2hhcmUgdXJsIGNsb3NlXG5cdCAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICBldmVudENhdGVnb3J5OiAnc2hhcmV1cmwnLFxuXHQgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xvc2UnLFxuXHQgICAgICAgIGV2ZW50TGFiZWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hhcmV1cmwtbGluay11cmxcIikuZ2V0QXR0cmlidXRlKFwidmFsdWVcIiksXG5cdCAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICB9KTtcblx0XG5cdCAgICBzaGFyZVBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNlbGVjdENvcHlMaW5rVXJsKCkge1xuXHQgICAgdmFyIHNoYXJlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNoYXJldXJsLWxpbmstdXJsXCIpO1xuXHQgICAgc2hhcmVJbnB1dC5mb2N1cygpO1xuXHQgICAgc2hhcmVJbnB1dC5zZXRTZWxlY3Rpb25SYW5nZSgwLCBzaGFyZUlucHV0LnZhbHVlLmxlbmd0aCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldFNvY2lhbFVybHMoKSB7XG5cdCAgICB2YXIgdXJsID0gbWFuZ2xlUGFyYW1TdHJpbmcod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXHQgICAgdmFyIHNvY2lhbExpbmtzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNoYXJldXJsLXNvY2lhbFwiKTtcblx0ICAgIHZhciBzb2NpYWxMaW5rO1xuXHQgICAgdmFyIG5ld1VybDtcblx0ICAgIHZhciBpLCBsO1xuXHRcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBzb2NpYWxMaW5rcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBzb2NpYWxMaW5rID0gc29jaWFsTGlua3NbaV07XG5cdFxuXHQgICAgICAgIG5ld1VybCA9IHNvY2lhbExpbmsuZ2V0QXR0cmlidXRlKFwiZGF0YS1iYXNldXJsXCIpICsgdXJsO1xuXHQgICAgICAgIHNvY2lhbExpbmsuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBuZXdVcmwpO1xuXHRcblx0ICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBldmVudCBmb3Igc29jaWFsIHVybHNcblx0ICAgICAgICBzb2NpYWxMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRcblx0ICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnc2hhcmV1cmwnLFxuXHQgICAgICAgICAgICAgICAgZXZlbnRBY3Rpb246IHRoaXMuZ2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiKSxcblx0ICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6IHRoaXMuaHJlZixcblx0ICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9KTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUNlbnRlclN0cmluZyhtYXApIHtcblx0ICAgIHZhciBjZW50ZXIgPSBtYXAuZ2V0Q2VudGVyKCk7XG5cdCAgICByZXR1cm4gXCJjZW50ZXI9XCIgKyBjZW50ZXIubGF0LnRvU3RyaW5nKCkgKyBcIixcIiArIGNlbnRlci5sbmcudG9TdHJpbmcoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVpvb21TdHJpbmcobWFwKSB7XG5cdCAgICByZXR1cm4gXCJ6b29tPVwiICsgbWFwLmdldFpvb20oKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyU3RyaW5nKG1hcCkge1xuXHQgICAgdmFyIGxheWVycyA9IFtdO1xuXHQgICAgdmFyIG9wYWNpdHlWYWxzID0ge307XG5cdCAgICB2YXIgY3VycmVudExheWVycyA9ICgwLCBfbGF5ZXIuR2V0Q3VycmVudExheWVycykoKTtcblx0XG5cdCAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHZhciBvcHRpb25zID0gbGF5ZXIub3B0aW9ucztcblx0ICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxheWVycykge1xuXHQgICAgICAgICAgICBvcGFjaXR5VmFsc1tvcHRpb25zLmxheWVyc10gPSBvcHRpb25zLmhhc093blByb3BlcnR5KFwib3BhY2l0eVwiKSA/IG9wdGlvbnMub3BhY2l0eSA6IFwiMVwiO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciBjdXJyZW50TGF5ZXI7XG5cdCAgICB2YXIgaTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBjdXJyZW50TGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgY3VycmVudExheWVyID0gY3VycmVudExheWVyc1tpXTtcblx0ICAgICAgICBsYXllcnMucHVzaChjdXJyZW50TGF5ZXIpO1xuXHQgICAgICAgIGxheWVycy5wdXNoKG9wYWNpdHlWYWxzW2N1cnJlbnRMYXllcl0pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIFwibGF5ZXJzPVwiICsgbGF5ZXJzLmpvaW4oXCIsXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlQmFzZUxheWVyU3RyaW5nKG1hcCkge1xuXHQgICAgdmFyIGxheWVycyA9IFtdO1xuXHQgICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICBpZiAobGF5ZXIub3B0aW9ucyAmJiBsYXllci5vcHRpb25zLnR5cGUgPT09IF9iYXNlbGF5ZXIuQkFTRV9MQVlFUl9UWVBFKSB7XG5cdCAgICAgICAgICAgIGxheWVycy5wdXNoKGxheWVyLm9wdGlvbnMuaWQpO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIFwiYmFzZWxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyR3JvdXBzU3RyaW5nKCkge1xuXHQgICAgdmFyIGFjdGl2ZUxheWVyR3JvdXBzID0gKDAsIF9wYW5lbC5HZXRBY3RpdmVMYXllckdyb3VwcykoKTtcblx0ICAgIHJldHVybiBcImxheWVyR3JvdXBzPVwiICsgYWN0aXZlTGF5ZXJHcm91cHMubWFwKGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIGQuaWQ7XG5cdCAgICB9KS5qb2luKCcsJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VQb2ludHNPZkludGVyZXN0U3RyaW5nKCkge1xuXHQgICAgdmFyIHBvaXMgPSAoMCwgX3BvaS5HZXRBbGxQb2ludHNPZkludGVyZXN0KSgpO1xuXHQgICAgaWYgKCFwb2lzLmxlbmd0aCkgcmV0dXJuO1xuXHQgICAgdmFyIHBvaVN0cmluZyA9IFwicG9pcz1cIjtcblx0ICAgIHBvaXMuZm9yRWFjaChmdW5jdGlvbiAocG9pKSB7XG5cdCAgICAgICAgcG9pU3RyaW5nICs9IHBvaS5sYXQgKyAnLCcgKyBwb2kubG5nICsgJzsnO1xuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gcG9pU3RyaW5nO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlQWN0aXZlVGFiU3RyaW5nKCkge1xuXHQgICAgcmV0dXJuIFwidGFiPVwiICsgZDMuc2VsZWN0KFwiLnBhbmVsLXRvcC1idG4uYWN0aXZlXCIpLmF0dHIoXCJkYXRhLWFjdGl2ZVwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUFjdGl2ZUdyYXBoVGFiU3RyaW5nKCkge1xuXHQgICAgcmV0dXJuIFwiZ3JhcGg9XCIgKyBkMy5zZWxlY3QoXCIuZ3JhcGgtdHlwZS1idG4uYWN0aXZlXCIpLmF0dHIoXCJkYXRhLXR5cGVcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhcnNlU2hhcmVVcmwoKSB7XG5cdCAgICB2YXIgcGFyYW1zID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcblx0ICAgIGlmIChwYXJhbXMgPT09IFwiXCIpIHJldHVybjtcblx0XG5cdCAgICBwYXJhbXMgPSBnZXRQYXJhbXNBcnJheShwYXJhbXMpO1xuXHQgICAgcGFyYW1zID0gbWFrZUtleWVkUGFyYW1zT2JqZWN0KHBhcmFtcyk7XG5cdFxuXHQgICAgZm9ybWF0UGFyYW1zKHBhcmFtcyk7XG5cdCAgICByZXR1cm4gcGFyYW1zO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRQYXJhbXNBcnJheShwYXJhbXMpIHtcblx0ICAgIHBhcmFtcyA9IHBhcmFtcy5zdWJzdHJpbmcoMSk7XG5cdCAgICBwYXJhbXMgPSB1bm1hbmdsZVBhcmFtU3RyaW5nKHBhcmFtcyk7XG5cdCAgICByZXR1cm4gcGFyYW1zLnNwbGl0KFwiJlwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFuZ2xlUGFyYW1TdHJpbmcodXJsKSB7XG5cdCAgICByZXR1cm4gdXJsLnJlcGxhY2UoL1xcOi9nLCBcIiUzQVwiKS5yZXBsYWNlKC9cXDsvZywgXCIlM0JcIikucmVwbGFjZSgvXFwvL2csIFwiJTJGXCIpLnJlcGxhY2UoL1xcLC9nLCBcIiUyQ1wiKS5yZXBsYWNlKC9cXCYvZywgXCIlMjZcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVubWFuZ2xlUGFyYW1TdHJpbmcocGFyYW1zKSB7XG5cdCAgICByZXR1cm4gcGFyYW1zLnJlcGxhY2UoL1xcJTJbY3xDXS9nLCBcIixcIikucmVwbGFjZSgvXFwlM1tifEJdL2csIFwiO1wiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUtleWVkUGFyYW1zT2JqZWN0KHBhcmFtc0Fycikge1xuXHQgICAgdmFyIHBhcnNlZFBhcmFtcyA9IHt9O1xuXHQgICAgdmFyIHBhcmFtUGFpcjtcblx0ICAgIHZhciBpO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBwYXJhbXNBcnIubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBwYXJhbVBhaXIgPSBwYXJhbXNBcnJbaV0uc3BsaXQoXCI9XCIpO1xuXHQgICAgICAgIHBhcnNlZFBhcmFtc1twYXJhbVBhaXJbMF1dID0gcGFyYW1QYWlyWzFdO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBwYXJzZWRQYXJhbXM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFBhcmFtcyhwYXJhbXMpIHtcblx0ICAgIGlmIChwYXJhbXMuY2VudGVyKSBwYXJhbXMuY2VudGVyID0gZm9ybWF0Q2VudGVyUGFyYW0ocGFyYW1zLmNlbnRlcik7XG5cdCAgICBpZiAocGFyYW1zLmxheWVycykgcGFyYW1zLmxheWVycyA9IGZvcm1hdExheWVyUGFyYW0ocGFyYW1zLmxheWVycyk7XG5cdCAgICBpZiAocGFyYW1zLmJhc2VsYXllcnMpIHBhcmFtcy5iYXNlbGF5ZXJzID0gZm9ybWF0QmFzZUxheWVyUGFyYW0ocGFyYW1zLmJhc2VsYXllcnMpO1xuXHQgICAgaWYgKHBhcmFtcy5wb2lzKSBwYXJhbXMucG9pcyA9IGZvcm1hdFBvaW50c09mSW50ZXJlc3RQYXJhbShwYXJhbXMucG9pcyk7XG5cdCAgICBpZiAocGFyYW1zLmxheWVyR3JvdXBzKSBwYXJhbXMubGF5ZXJHcm91cHMgPSBmb3JtYXRMYXllckdyb3Vwc1BhcmFtKHBhcmFtcy5sYXllckdyb3Vwcyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdENlbnRlclBhcmFtKGNlbnRlcikge1xuXHQgICAgcmV0dXJuIGNlbnRlci5zcGxpdChcIixcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdExheWVyUGFyYW0obGF5ZXJzKSB7XG5cdCAgICB2YXIgZm9ybWF0dGVkTGF5ZXJzID0ge1xuXHQgICAgICAgIFwiZW5hYmxlZExheWVyc1wiOiBbXSxcblx0ICAgICAgICBcIm9wYWNpdHlWYWxzXCI6IHt9XG5cdCAgICB9O1xuXHQgICAgdmFyIGxheWVySWQ7XG5cdCAgICB2YXIgaTtcblx0XG5cdCAgICBsYXllcnMgPSBsYXllcnMuc3BsaXQoXCIsXCIpO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGxheWVycy5sZW5ndGg7IGkgPSBpICsgMikge1xuXHQgICAgICAgIGxheWVySWQgPSBsYXllcnNbaV07XG5cdCAgICAgICAgZm9ybWF0dGVkTGF5ZXJzLmVuYWJsZWRMYXllcnMucHVzaChsYXllcklkKTtcblx0ICAgICAgICBmb3JtYXR0ZWRMYXllcnMub3BhY2l0eVZhbHNbbGF5ZXJJZF0gPSBsYXllcnNbaSArIDFdO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBmb3JtYXR0ZWRMYXllcnM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdEJhc2VMYXllclBhcmFtKGJhc2VsYXllcnMpIHtcblx0ICAgIHJldHVybiBiYXNlbGF5ZXJzLnNwbGl0KFwiLFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0UG9pbnRzT2ZJbnRlcmVzdFBhcmFtKHBvaXMpIHtcblx0ICAgIHJldHVybiBwb2lzLnNwbGl0KCc7JykuZmlsdGVyKGZ1bmN0aW9uIChzdHIpIHtcblx0ICAgICAgICByZXR1cm4gc3RyICE9PSAnJztcblx0ICAgIH0pLm1hcChmdW5jdGlvbiAocG9pKSB7XG5cdCAgICAgICAgcG9pID0gcG9pLnNwbGl0KCcsJyk7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgbGF0OiBwb2lbMF0sXG5cdCAgICAgICAgICAgIGxuZzogcG9pWzFdXG5cdCAgICAgICAgfTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRMYXllckdyb3Vwc1BhcmFtKGxheWVyR3JvdXBTZXR0aW5ncykge1xuXHQgICAgcmV0dXJuIGxheWVyR3JvdXBTZXR0aW5ncy5zcGxpdCgnLCcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRMYXllckdyb3VwU2V0dGluZ3NUb0NvbmZpZyhhY3RpdmVMYXllckdyb3VwSWRzLCBjb25maWcpIHtcblx0ICAgIGNvbmZpZy5sYXlvdXRbJ2xheWVyLWdyb3Vwcy1vcmRlciddLmZvckVhY2goZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0ICAgICAgICAvLyBzZXQgbGF5ZXIgZ3JvdXAgdG8gYWN0aXZlIGlmIGl0cyBpZCBhcHBlYXJzIGluIHRoZSBzaGFyZSB1cmwgc2V0dGluZ3Ncblx0ICAgICAgICBsYXllckdyb3VwLmFjdGl2ZSA9IGFjdGl2ZUxheWVyR3JvdXBJZHMuZmlsdGVyKGZ1bmN0aW9uIChpZCkge1xuXHQgICAgICAgICAgICByZXR1cm4gaWQgPT09IGxheWVyR3JvdXAuaWQ7XG5cdCAgICAgICAgfSkubGVuZ3RoID4gMDtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmVMYXllclNldHRpbmdzLCBjb25maWcpIHtcblx0ICAgIHZhciBlbmFibGVkTGF5ZXJzID0gc2hhcmVMYXllclNldHRpbmdzLmVuYWJsZWRMYXllcnM7XG5cdCAgICBjb25maWdbXCJhY3RpdmUtbGF5ZXJzXCJdID0gZW5hYmxlZExheWVycztcblx0XG5cdCAgICB2YXIgaSwgaiwgcHJvcCwgbGF5ZXJncm91cDtcblx0ICAgIHZhciBlbmFibGVkTGF5ZXI7XG5cdCAgICB2YXIgZm91bmRMYXllcjtcblx0ICAgIHZhciBsYXllcnMgPSBjb25maWcubGF5ZXJzO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBlbmFibGVkTGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZm91bmRMYXllciA9IGZhbHNlO1xuXHQgICAgICAgIGVuYWJsZWRMYXllciA9IGVuYWJsZWRMYXllcnNbaV07XG5cdCAgICAgICAgZm9yIChwcm9wIGluIGxheWVycykge1xuXHQgICAgICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xuXHQgICAgICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuXHQgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGF5ZXJncm91cC5sZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGxheWVyZ3JvdXBbal0uaWQgPT09IGVuYWJsZWRMYXllcikge1xuXHQgICAgICAgICAgICAgICAgICAgIGxheWVyZ3JvdXBbal0ub3BhY2l0eSA9IHNoYXJlTGF5ZXJTZXR0aW5ncy5vcGFjaXR5VmFsc1tlbmFibGVkTGF5ZXJdO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvdW5kTGF5ZXIgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChmb3VuZExheWVyKSBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZEJhc2VMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmVCYXNlTGF5ZXJTZXR0aW5ncywgY29uZmlnKSB7XG5cdCAgICB2YXIgYmFzZWxheWVycyA9IGNvbmZpZy5iYXNlbGF5ZXJzO1xuXHQgICAgdmFyIGJhc2VsYXllcjtcblx0ICAgIHZhciBpO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBiYXNlbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgYmFzZWxheWVyID0gYmFzZWxheWVyc1tpXTtcblx0ICAgICAgICBiYXNlbGF5ZXIuYWN0aXZlID0gc2hhcmVCYXNlTGF5ZXJTZXR0aW5ncy5pbmRleE9mKGJhc2VsYXllci5pZCkgIT09IC0xID8gdHJ1ZSA6IGZhbHNlO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRQb2ludHNPZkludGVyZXN0VG9Db25maWcocG9pcywgY29uZmlnKSB7XG5cdCAgICBjb25maWdbXCJwb2lzXCJdID0gcG9pcztcblx0fVxuXG4vKioqLyB9LFxuLyogMjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5CQVNFX0xBWUVSX1RZUEUgPSB1bmRlZmluZWQ7XG5cdGV4cG9ydHMuQ3JlYXRlQmFzZUxheWVycyA9IENyZWF0ZUJhc2VMYXllcnM7XG5cdFxuXHR2YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIEJBU0VfTEFZRVJfVFlQRSA9IGV4cG9ydHMuQkFTRV9MQVlFUl9UWVBFID0gXCJiYXNlbGF5ZXJcIjtcblx0XG5cdHZhciBfYmFzZWxheWVycztcblx0XG5cdGZ1bmN0aW9uIENyZWF0ZUJhc2VMYXllcnMobWFwLCBsYXllckNvbmZpZykge1xuXHQgICAgbGF5ZXJDb25maWcgPSBsYXllckNvbmZpZyB8fCBbe1xuXHQgICAgICAgIFwiaWRcIjogXCJjYXJ0by1saWdodC1kZWZhdWx0XCIsXG5cdCAgICAgICAgXCJ1cmxcIjogXCJodHRwOi8ve3N9LmJhc2VtYXBzLmNhcnRvY2RuLmNvbS9saWdodF9hbGwve3p9L3t4fS97eX0ucG5nXCIsXG5cdCAgICAgICAgXCJhdHRyaWJ1dGlvblwiOiAnJmNvcHk7IDxhIGhyZWY9XCJodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodFwiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgJmNvcHk7IDxhIGhyZWY9XCJodHRwczovL2NhcnRvLmNvbS9hdHRyaWJ1dGlvbnNcIj5DQVJUTzwvYT4nXG5cdCAgICB9XTtcblx0XG5cdCAgICBfYmFzZWxheWVycyA9IGxheWVyQ29uZmlnO1xuXHQgICAgdmFyIGk7XG5cdCAgICB2YXIgYmFzZUxheWVyO1xuXHQgICAgdmFyIGNvbmZpZztcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGF5ZXJDb25maWcubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBjb25maWcgPSBsYXllckNvbmZpZ1tpXTtcblx0XG5cdCAgICAgICAgaWYgKCFjb25maWcuYWN0aXZlKSBjb250aW51ZTtcblx0ICAgICAgICBiYXNlTGF5ZXIgPSBjcmVhdGVCYXNlTGF5ZXIoY29uZmlnKTtcblx0ICAgICAgICBjb25maWcubGF5ZXIgPSBiYXNlTGF5ZXI7XG5cdCAgICAgICAgYmFzZUxheWVyLmFkZFRvKG1hcCk7XG5cdCAgICB9XG5cdFxuXHQgICAgY3JlYXRlQmFzZUxheWVyVUkobGF5ZXJDb25maWcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVCYXNlTGF5ZXJVSShjb25maWcpIHtcblx0ICAgIHZhciBiYXNlVUkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHQgICAgYmFzZVVJLmNsYXNzTmFtZSA9IFwiYmFzZWxheWVyLXVpXCI7XG5cdCAgICB2YXIgYmFzZVdyYXBwZXI7XG5cdCAgICB2YXIgYmFzZUltZztcblx0ICAgIHZhciBiYXNlTGFiZWw7XG5cdFxuXHQgICAgdmFyIGxheWVyO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb25maWcubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgbGF5ZXIgPSBjb25maWdbaV07XG5cdCAgICAgICAgaWYgKCFsYXllci5oYXNPd25Qcm9wZXJ0eShcImltYWdlXCIpKSBjb250aW51ZTtcblx0XG5cdCAgICAgICAgYmFzZVdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHQgICAgICAgIGJhc2VXcmFwcGVyLnNldEF0dHJpYnV0ZShcImRhdGEtbGF5ZXJcIiwgbGF5ZXIuaWQpO1xuXHQgICAgICAgIGJhc2VJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuXHQgICAgICAgIGJhc2VJbWcuc2V0QXR0cmlidXRlKFwic3JjXCIsIGxheWVyLmltYWdlKTtcblx0ICAgICAgICBiYXNlSW1nLnNldEF0dHJpYnV0ZShcImFsdFwiLCBsYXllci5sYWJlbCk7XG5cdCAgICAgICAgYmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBsYXllci5sYWJlbCk7XG5cdCAgICAgICAgYmFzZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0ICAgICAgICBiYXNlTGFiZWwudGV4dENvbnRlbnQgPSBsYXllci5sYWJlbDtcblx0ICAgICAgICBiYXNlV3JhcHBlci5hcHBlbmRDaGlsZChiYXNlSW1nKTtcblx0ICAgICAgICBiYXNlV3JhcHBlci5hcHBlbmRDaGlsZChiYXNlTGFiZWwpO1xuXHQgICAgICAgIGJhc2VXcmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVCYXNlQ2xpY2spO1xuXHRcblx0ICAgICAgICBkMy5zZWxlY3QoYmFzZVdyYXBwZXIpLmNsYXNzZWQoXCJiYXNlLXNlbGVjdG9yXCIsIHRydWUpLmNsYXNzZWQoXCJhY3RpdmVcIiwgbGF5ZXIuYWN0aXZlKTtcblx0XG5cdCAgICAgICAgYmFzZVVJLmFwcGVuZENoaWxkKGJhc2VXcmFwcGVyKTtcblx0ICAgIH1cblx0XG5cdCAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibGVhZmxldC1ib3R0b20gbGVhZmxldC1sZWZ0XCIpWzBdLmFwcGVuZENoaWxkKGJhc2VVSSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZUJhc2VDbGljayhlKSB7XG5cdCAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHQgICAgdmFyIGxheWVyaWQgPSB0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtbGF5ZXJcIik7XG5cdCAgICB0b2dnbGVBY3RpdmVCYXNlVUkodGhpcyk7XG5cdCAgICByZW1vdmVDdXJyZW50QmFzZUxheWVyKCk7XG5cdCAgICBhZGROZXdCYXNlTGF5ZXJUb01hcChsYXllcmlkKTtcblx0XG5cdCAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3IgY2hhbmdlaW5nIGJhc2UgbGF5ZXJcblx0ICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuXHQgICAgICAgIGV2ZW50QWN0aW9uOiAnY2hhbmdlIGJhc2UgbGF5ZXInLFxuXHQgICAgICAgIGV2ZW50TGFiZWw6IGxheWVyaWQsXG5cdCAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICB9KTtcblx0XG5cdCAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b2dnbGVBY3RpdmVCYXNlVUkoYmFzZVVJRWxlbSkge1xuXHQgICAgZDMuc2VsZWN0KFwiLmJhc2Utc2VsZWN0b3IuYWN0aXZlXCIpLmNsYXNzZWQoXCJhY3RpdmVcIiwgZmFsc2UpO1xuXHQgICAgZDMuc2VsZWN0KGJhc2VVSUVsZW0pLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZUN1cnJlbnRCYXNlTGF5ZXIoKSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMudHlwZSAhPT0gQkFTRV9MQVlFUl9UWVBFKSByZXR1cm47XG5cdCAgICAgICAgbWFwLnJlbW92ZUxheWVyKGxheWVyKTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGROZXdCYXNlTGF5ZXJUb01hcChsYXllcmlkKSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIHZhciBsYXllcjtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gX2Jhc2VsYXllcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgbGF5ZXIgPSBfYmFzZWxheWVyc1tpXTtcblx0ICAgICAgICBpZiAobGF5ZXIuaWQgIT09IGxheWVyaWQpIGNvbnRpbnVlO1xuXHQgICAgICAgIGlmICghbGF5ZXIubGF5ZXIpIGxheWVyLmxheWVyID0gY3JlYXRlQmFzZUxheWVyKGxheWVyKTtcblx0ICAgICAgICBsYXllci5sYXllci5hZGRUbyhtYXApO1xuXHQgICAgICAgIGxheWVyLmxheWVyLmJyaW5nVG9CYWNrKCk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUJhc2VMYXllcihsYXllckNvbmZpZykge1xuXHQgICAgcmV0dXJuIEwudGlsZUxheWVyKGxheWVyQ29uZmlnLnVybCwgbWFrZUJhc2VMYXllck9wdGlvbnMobGF5ZXJDb25maWcpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUJhc2VMYXllck9wdGlvbnMoY29uZmlnKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHt9O1xuXHQgICAgaWYgKGNvbmZpZy5pZCkgb3B0aW9ucy5pZCA9IGNvbmZpZy5pZDtcblx0ICAgIGlmIChjb25maWcuYXR0cmlidXRpb24pIG9wdGlvbnMuYXR0cmlidXRpb24gPSBjb25maWcuYXR0cmlidXRpb247XG5cdCAgICBpZiAoY29uZmlnLnN1YmRvbWFpbnMpIG9wdGlvbnMuc3ViZG9tYWlucyA9IGNvbmZpZy5zdWJkb21haW5zO1xuXHQgICAgb3B0aW9ucy50eXBlID0gQkFTRV9MQVlFUl9UWVBFO1xuXHRcblx0ICAgIHJldHVybiBvcHRpb25zO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5HZXRBbGxQb2ludHNPZkludGVyZXN0ID0gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdDtcblx0ZXhwb3J0cy5BZGRQb2ludE9mSW50ZXJlc3RUb1RyYWNrZXIgPSBBZGRQb2ludE9mSW50ZXJlc3RUb1RyYWNrZXI7XG5cdGV4cG9ydHMuU2V0dXBQb2ludHNPZkludGVyZXN0ID0gU2V0dXBQb2ludHNPZkludGVyZXN0O1xuXHRleHBvcnRzLkFkZE11bHRpcGxlUG9pbnRzT2ZJbnRlcmVzdCA9IEFkZE11bHRpcGxlUG9pbnRzT2ZJbnRlcmVzdDtcblx0ZXhwb3J0cy5SZW1vdmVQb2ludE9mSW50ZXJlc3RGcm9tVHJhY2tlciA9IFJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyO1xuXHRleHBvcnRzLlNldHVwUG9pbnRPZkludGVyZXN0VUkgPSBTZXR1cFBvaW50T2ZJbnRlcmVzdFVJO1xuXHRleHBvcnRzLlJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJID0gUmVtb3ZlUG9pbnRPZkludGVyZXN0VUk7XG5cdFxuXHR2YXIgX2dyYXBoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHR2YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRcblx0dmFyIF90YWJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cdFxuXHR2YXIgX3BvaW50c19vZl9pbnRlcmVzdCA9IFtdO1xuXHRcblx0ZnVuY3Rpb24gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCgpIHtcblx0ICAgIHJldHVybiBfcG9pbnRzX29mX2ludGVyZXN0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBBZGRQb2ludE9mSW50ZXJlc3RUb1RyYWNrZXIobGF0LCBsbmcpIHtcblx0ICAgIHZhciBwb2kgPSB7XG5cdCAgICAgICAgbGF0OiBsYXQsXG5cdCAgICAgICAgbG5nOiBsbmdcblx0ICAgIH07XG5cdCAgICBfcG9pbnRzX29mX2ludGVyZXN0LnB1c2gocG9pKTtcblx0ICAgIHJldHVybiBwb2k7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFNldHVwUG9pbnRzT2ZJbnRlcmVzdChtYXAsIG5ld1BvaXMpIHtcblx0ICAgIEFkZE11bHRpcGxlUG9pbnRzT2ZJbnRlcmVzdChuZXdQb2lzKTtcblx0ICAgIHZhciBwb2lzID0gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCgpO1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkdldE1hcCkoKTtcblx0ICAgIHBvaXMuZm9yRWFjaChmdW5jdGlvbiAocG9pKSB7XG5cdCAgICAgICAgU2V0dXBQb2ludE9mSW50ZXJlc3RVSShtYXAsIHBvaSk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gQWRkTXVsdGlwbGVQb2ludHNPZkludGVyZXN0KHBvaXMpIHtcblx0ICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KF9wb2ludHNfb2ZfaW50ZXJlc3QsIHBvaXMpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBSZW1vdmVQb2ludE9mSW50ZXJlc3RGcm9tVHJhY2tlcihwb2lUb1JlbW92ZSkge1xuXHQgICAgX3BvaW50c19vZl9pbnRlcmVzdCA9IF9wb2ludHNfb2ZfaW50ZXJlc3QuZmlsdGVyKGZ1bmN0aW9uIChwb2kpIHtcblx0ICAgICAgICByZXR1cm4gIShwb2kgPT09IHBvaVRvUmVtb3ZlKTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBTZXR1cFBvaW50T2ZJbnRlcmVzdFVJKG1hcCwgcG9pKSB7XG5cdCAgICB2YXIgZGl2ID0gKDAsIF9ncmFwaC5jcmVhdGVHcmFwaERpdikocG9pKTtcblx0ICAgIHZhciBtYXJrZXIgPSAoMCwgX2dyYXBoLmNyZWF0ZU1hcmtlcikobWFwLCBwb2kubGF0LCBwb2kubG5nKTtcblx0ICAgIHBvaS5ncmFwaERpdiA9IGRpdjtcblx0ICAgIHBvaS5tYXJrZXIgPSBtYXJrZXI7XG5cdCAgICBtYXJrZXIuYWRkVG8obWFwKTtcblx0ICAgICgwLCBfZ3JhcGguY3JlYXRlR3JhcGhSZW1vdmVyKShtYXAsIGRpdiwgbWFya2VyLCBwb2kpO1xuXHRcblx0ICAgIGQzLnNlbGVjdChkaXYpLm9uKFwibW91c2VlbnRlclwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIG1hcmtlci5zZXRJY29uKCgwLCBfZ3JhcGguZ2V0SWNvbikoJ2hvdmVyJykpO1xuXHQgICAgfSk7XG5cdCAgICBkMy5zZWxlY3QoZGl2KS5vbihcIm1vdXNlbGVhdmVcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIG1hcmtlci5zZXRJY29uKCgwLCBfZ3JhcGguZ2V0SWNvbikoJ2dyYXBoJykpO1xuXHQgICAgfSk7XG5cdCAgICBtYXJrZXIub24oJ2NsaWNrIGRibGNsaWNrJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICBoYW5kbGVNYXJrZXJNb3VzZUV2ZW50KGUsIHBvaSk7XG5cdCAgICB9KTtcblx0ICAgIG1hcmtlci5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICBtYXJrZXIuc2V0SWNvbigoMCwgX2dyYXBoLmdldEljb24pKCdob3ZlcicpKTtcblx0ICAgIH0pO1xuXHQgICAgbWFya2VyLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgbWFya2VyLnNldEljb24oKDAsIF9ncmFwaC5nZXRJY29uKSgnZ3JhcGgnKSk7XG5cdCAgICAgICAgcG9pLmdyYXBoRGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Bhbi10by1tYXJrZXItYnRuJylbMF0uY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0ZScpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZU1hcmtlck1vdXNlRXZlbnQoZSwgcG9pKSB7XG5cdCAgICBlLm9yaWdpbmFsRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgICAoMCwgX3RhYnMuSGFuZGxlVGFiQ2hhbmdlKSgnZ3JhcGhzLWFjdGl2ZScpO1xuXHQgICAgc2Nyb2xsVG9Qb2ludE9mSW50ZXJlc3RHcmFwaChwb2kpO1xuXHQgICAgdHJpZ2dlckdyYXBoQW5pbWF0aW9uKHBvaSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRyaWdnZXJHcmFwaEFuaW1hdGlvbihwb2kpIHtcblx0ICAgIHBvaS5ncmFwaERpdi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwYW4tdG8tbWFya2VyLWJ0bicpWzBdLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGUnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2Nyb2xsVG9Qb2ludE9mSW50ZXJlc3RHcmFwaChwb2kpIHtcblx0ICAgIHZhciByaWdodFBhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsJyk7XG5cdCAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsLWhlYWRlcicpO1xuXHQgICAgdmFyIGdyYXBoVHlwZUhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaC10eXBlLWhlYWRlcicpO1xuXHQgICAgcmlnaHRQYW5lbC5zY3JvbGxUb3AgPSBwb2kuZ3JhcGhEaXYub2Zmc2V0VG9wO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBSZW1vdmVQb2ludE9mSW50ZXJlc3RVSShtYXAsIGRpdiwgbWFya2VyKSB7XG5cdCAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaC1saXN0Jyk7XG5cdCAgICBsaXN0LnJlbW92ZUNoaWxkKGRpdik7XG5cdCAgICBtYXAucmVtb3ZlTGF5ZXIobWFya2VyKTtcblx0ICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLlNldHVwR3JhcGhzID0gU2V0dXBHcmFwaHM7XG5cdGV4cG9ydHMuQmluZEdyYXBoRXZlbnRzID0gQmluZEdyYXBoRXZlbnRzO1xuXHRleHBvcnRzLmdldEljb24gPSBnZXRJY29uO1xuXHRleHBvcnRzLmNyZWF0ZU1hcmtlciA9IGNyZWF0ZU1hcmtlcjtcblx0ZXhwb3J0cy5jcmVhdGVHcmFwaFJlbW92ZXIgPSBjcmVhdGVHcmFwaFJlbW92ZXI7XG5cdGV4cG9ydHMuSGFuZGxlR3JhcGhUYWJDaGFuZ2UgPSBIYW5kbGVHcmFwaFRhYkNoYW5nZTtcblx0ZXhwb3J0cy5jcmVhdGVHcmFwaERpdiA9IGNyZWF0ZUdyYXBoRGl2O1xuXHRcblx0dmFyIF9wb2kgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdHZhciBfcGFuZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX3BhcnNlciA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgdGlwID0ge307XG5cdFxuXHRmdW5jdGlvbiBnZXRHcmFwaFRpcCgpIHtcblx0ICAgIHJldHVybiB0aXA7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFNldHVwR3JhcGhzKCkge1xuXHQgICAgZDMuc2VsZWN0QWxsKFwiLmdyYXBoLXR5cGUtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2spO1xuXHQgICAgZXh0ZW5kRGF0ZU1vZHVsZSgpO1xuXHQgICAgdGlwID0gZDMudGlwKCkuYXR0cignY2xhc3MnLCAnZDMtdGlwJykuaHRtbChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV4dGVuZERhdGVNb2R1bGUoKSB7XG5cdCAgICBEYXRlLnByb3RvdHlwZS5pc0xlYXBZZWFyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciB5ZWFyID0gdGhpcy5nZXRGdWxsWWVhcigpO1xuXHQgICAgICAgIGlmICgoeWVhciAmIDMpICE9IDApIHJldHVybiBmYWxzZTtcblx0ICAgICAgICByZXR1cm4geWVhciAlIDEwMCAhPSAwIHx8IHllYXIgJSA0MDAgPT0gMDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gR2V0IERheSBvZiBZZWFyXG5cdCAgICBEYXRlLnByb3RvdHlwZS5nZXRET1kgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGRheUNvdW50ID0gWzAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0XTtcblx0ICAgICAgICB2YXIgbW4gPSB0aGlzLmdldE1vbnRoKCk7XG5cdCAgICAgICAgdmFyIGRuID0gdGhpcy5nZXREYXRlKCk7XG5cdCAgICAgICAgdmFyIGRheU9mWWVhciA9IGRheUNvdW50W21uXSArIGRuO1xuXHQgICAgICAgIGlmIChtbiA+IDEgJiYgdGhpcy5pc0xlYXBZZWFyKCkpIGRheU9mWWVhcisrO1xuXHQgICAgICAgIHJldHVybiBkYXlPZlllYXI7XG5cdCAgICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBCaW5kR3JhcGhFdmVudHMobWFwKSB7XG5cdCAgICBtYXAub24oXCJjbGlja1wiLCBoYW5kbGVNYXBDbGljayk7XG5cdH1cblx0XG5cdHZhciBiYXNlSWNvbiA9IEwuSWNvbi5leHRlbmQoe30pO1xuXHRcblx0dmFyIGdyYXBoSWNvbiA9IG5ldyBiYXNlSWNvbih7XG5cdCAgICBpY29uVXJsOiAnaW1ncy9ibHVlX2ljb24ucG5nJyxcblx0ICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxuXHQgICAgaWNvblNpemU6IFsyNSwgNDFdLFxuXHQgICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sXG5cdCAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXG5cdCAgICBzaGFkb3dTaXplOiBbNDEsIDQxXVxuXHR9KTtcblx0XG5cdHZhciBob3Zlckljb24gPSBuZXcgYmFzZUljb24oe1xuXHQgICAgaWNvblVybDogJ2ltZ3Mvb3JhbmdlX2ljb24ucG5nJyxcblx0ICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxuXHQgICAgaWNvblNpemU6IFsyNSwgNDFdLFxuXHQgICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sXG5cdCAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXG5cdCAgICBzaGFkb3dTaXplOiBbNDEsIDQxXVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIGdldEljb24odHlwZSkge1xuXHQgICAgcmV0dXJuIHR5cGUgPT09ICdob3ZlcicgPyBob3Zlckljb24gOiBncmFwaEljb247XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZU1hcENsaWNrKGUpIHtcblx0ICAgIHZhciBtYXAgPSB0aGlzO1xuXHQgICAgdmFyIGxhdCA9IGUubGF0bG5nLmxhdDtcblx0ICAgIHZhciBsbmcgPSBlLmxhdGxuZy5sbmc7XG5cdFxuXHQgICAgdmFyIHBvaSA9ICgwLCBfcG9pLkFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlcikobGF0LCBsbmcpO1xuXHQgICAgKDAsIF9wb2kuU2V0dXBQb2ludE9mSW50ZXJlc3RVSSkobWFwLCBwb2ksIGhvdmVySWNvbiwgZ3JhcGhJY29uKTtcblx0ICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdFxuXHQgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZXZlbnQgY2xpY2sgb24gbWFwXG5cdCAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcblx0ICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0ICAgICAgICBldmVudExhYmVsOiAnYWRkIHBvaW50Jyxcblx0ICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVNYXJrZXIobWFwLCBsYXQsIGxuZykge1xuXHQgICAgcmV0dXJuIEwubWFya2VyKFtsYXQsIGxuZ10sIHsgaWNvbjogZ3JhcGhJY29uIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVHcmFwaFJlbW92ZXIobWFwLCBkaXYsIG1hcmtlciwgcG9pKSB7XG5cdCAgICB2YXIgZWxlbSA9IGNyZWF0ZUdyYXBoUmVtb3ZlckVsZW0oKTtcblx0ICAgIGRpdi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZ3JhcGgtZWxlbS1oZWFkZXJcIilbMF0uYXBwZW5kQ2hpbGQoZWxlbSk7XG5cdCAgICBkMy5zZWxlY3QoZWxlbSkub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG5cdFxuXHQgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHJlbW92ZSBncmFwaFxuXHQgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxuXHQgICAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0ICAgICAgICAgICAgZXZlbnRMYWJlbDogJ3JlbW92ZScsXG5cdCAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAoMCwgX3BvaS5SZW1vdmVQb2ludE9mSW50ZXJlc3RGcm9tVHJhY2tlcikocG9pKTtcblx0ICAgICAgICAoMCwgX3BvaS5SZW1vdmVQb2ludE9mSW50ZXJlc3RVSSkobWFwLCBkaXYsIG1hcmtlcik7XG5cdCAgICAgICAgKDAsIF9wYW5lbC51cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KSgpO1xuXHQgICAgICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSgpIHtcblx0ICAgIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblx0ICAgIGVsZW0uY2xhc3NOYW1lID0gXCJyZW1vdmUtZ3JhcGhcIjtcblx0ICAgIGVsZW0uaW5uZXJUZXh0ID0gU3RyaW5nLmZyb21DaGFyQ29kZShcIjEwMDA1XCIpO1xuXHQgICAgZWxlbS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBcIlJlbW92ZSBncmFwaFwiKTtcblx0ICAgIHJldHVybiBlbGVtO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIERBVEEgUFJPQ0VTU0lORyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBzZW5kUmVxdWVzdChyZXF1ZXN0LCB1cmwpIHtcblx0ICAgIHJlcXVlc3Qub3BlbignR0VUJywgdXJsKTtcblx0ICAgIHJlcXVlc3Quc2VuZCgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVHcmFwaERhdGFSZXNwb25zZShkaXYsIGxhdCwgbG5nLCByZXNwb25zZSkge1xuXHQgICAgcmVzcG9uc2UgPSByZXNwb25zZS5yZXBsYWNlKC9cXFt8XFxdfFxcJy9nLCBcIlwiKS5zcGxpdChcIiwgXCIpO1xuXHQgICAgZHJhd0dyYXBoKHJlc3BvbnNlLCBkaXYsIGxhdCwgbG5nKTtcblx0ICAgICgwLCBfcGFuZWwudXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0RGF0YShsYXQsIGxuZywgZGl2KSB7XG5cdCAgICB2YXIgdXJsID0gXCJodHRwczovL2ZjYXYtbmR2aS5uZW1hYy5vcmcvbGFuZGRhdF9wcm9kdWN0LmNnaT9hcmdzPVwiICsgbG5nICsgXCIsXCIgKyBsYXQ7XG5cdCAgICB2YXIgb1JlcSA9ICgwLCBfcGFyc2VyLkdldEFqYXhPYmplY3QpKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHQgICAgICAgIGhhbmRsZUdyYXBoRGF0YVJlc3BvbnNlKGRpdiwgbGF0LCBsbmcsIHJlc3BvbnNlKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIG9SZXEub3BlbihcIkdFVFwiLCB1cmwpO1xuXHQgICAgb1JlcS5zZW5kKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNwbGl0RGF0YShkYXRhKSB7XG5cdCAgICB2YXIgaTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZGF0YVtpXSA9IGRhdGFbaV0uc3BsaXQoXCIsXCIpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGRhdGE7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlcHJvY2Vzc0RhdGEob3JpZ2RhdGEpIHtcblx0ICAgIHZhciBleHBlY3RlZFllYXJMZW5ndGggPSA0Njtcblx0ICAgIHZhciBkYXRhID0ge307XG5cdCAgICB2YXIgcG9pbnQ7XG5cdCAgICB2YXIga2V5O1xuXHQgICAgdmFyIGksIGo7XG5cdFxuXHQgICAgZGF0YVtcImtleXNcIl0gPSBbXTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBvcmlnZGF0YS5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHBvaW50ID0gb3JpZ2RhdGFbaV07XG5cdCAgICAgICAga2V5ID0gcG9pbnRbMF0uc3Vic3RyaW5nKDAsIDQpO1xuXHQgICAgICAgIGlmICghZGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdCAgICAgICAgICAgIGRhdGFba2V5XSA9IFtdO1xuXHQgICAgICAgICAgICBkYXRhW1wia2V5c1wiXS5wdXNoKGtleSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGRhdGFba2V5XS5wdXNoKHBvaW50KTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIga2V5c1RvQmVEZWxldGVkID0gW107XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5rZXlzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAga2V5ID0gZGF0YS5rZXlzW2ldO1xuXHQgICAgICAgIGlmIChkYXRhW2tleV0ubGVuZ3RoICE9PSBleHBlY3RlZFllYXJMZW5ndGgpIHtcblx0ICAgICAgICAgICAga2V5c1RvQmVEZWxldGVkLnB1c2goa2V5KTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGtleXNUb0JlRGVsZXRlZC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGtleSA9IGtleXNUb0JlRGVsZXRlZFtpXTtcblx0ICAgICAgICBkZWxldGUgZGF0YVtrZXldO1xuXHQgICAgICAgIGRhdGEua2V5cy5zcGxpY2UoZGF0YS5rZXlzLmluZGV4T2Yoa2V5KSwgMSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGRhdGFGb3JNZWFucztcblx0ICAgIHZhciBtZWFuO1xuXHQgICAgZGF0YVtcIm1lYW5zXCJdID0gW107XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgZXhwZWN0ZWRZZWFyTGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBkYXRhRm9yTWVhbnMgPSBbXTtcblx0ICAgICAgICBmb3IgKGogPSBpOyBqIDwgb3JpZ2RhdGEubGVuZ3RoOyBqICs9IGV4cGVjdGVkWWVhckxlbmd0aCkge1xuXHQgICAgICAgICAgICBkYXRhRm9yTWVhbnMucHVzaChwYXJzZUludChvcmlnZGF0YVtqXVsxXSwgMTApKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIG1lYW4gPSBjb21wdXRlQXZlcmFnZShkYXRhRm9yTWVhbnMpO1xuXHQgICAgICAgIGRhdGFbXCJtZWFuc1wiXS5wdXNoKG1lYW4pO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBkYXRhO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjb21wdXRlQXZlcmFnZShhcnIpIHtcblx0ICAgIHZhciBzdW0gPSAwLFxuXHQgICAgICAgIGksXG5cdCAgICAgICAgbDtcblx0XG5cdCAgICBmb3IgKGkgPSAwLCBsID0gYXJyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHN1bSArPSBhcnJbaV07XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIChzdW0gLyBsKS50b1N0cmluZygpO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIElOVEVSRkFDRSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrKCkge1xuXHQgICAgdmFyIHR5cGUgPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJyk7XG5cdCAgICB2YXIgYWN0aXZlVHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF0uZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKTtcblx0XG5cdCAgICBpZiAodHlwZSA9PT0gYWN0aXZlVHlwZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBjbGljayBvbiBncmFwaCB0eXBlXG5cdCAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGggdHlwZScsXG5cdCAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdCAgICAgICAgZXZlbnRMYWJlbDogdHlwZSxcblx0ICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgIH0pO1xuXHRcblx0ICAgIEhhbmRsZUdyYXBoVGFiQ2hhbmdlKHR5cGUsIGFjdGl2ZVR5cGUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBIYW5kbGVHcmFwaFRhYkNoYW5nZShncmFwaFR5cGUpIHtcblx0ICAgIGlmICghaXNHcmFwaExpc3RFbXB0eSgpKSB7XG5cdCAgICAgICAgdmFyIG9sZEFjdGl2ZUdyYXBoRWxlbUhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLWVsZW0nKVswXS5zY3JvbGxIZWlnaHQ7XG5cdCAgICAgICAgdmFyIG9sZEFjdGl2ZUdyYXBoSW5mb0hlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLXR5cGUtaW5mbyBhY3RpdmUnKVswXS5zY3JvbGxIZWlnaHQ7XG5cdCAgICAgICAgdmFyIHJpZ2h0UGFuZWxTY3JvbGxUb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKS5zY3JvbGxUb3A7XG5cdCAgICB9XG5cdCAgICBkaXNhYmxlQWN0aXZlR3JhcGhUYWIoKTtcblx0ICAgIGVuYWJsZUdyYXBoVGFiKGdyYXBoVHlwZSk7XG5cdCAgICBpZiAoIWlzR3JhcGhMaXN0RW1wdHkoKSkgYWRqdXN0U2Nyb2xsUG9zaXRpb24ob2xkQWN0aXZlR3JhcGhJbmZvSGVpZ2h0LCBvbGRBY3RpdmVHcmFwaEVsZW1IZWlnaHQsIHJpZ2h0UGFuZWxTY3JvbGxUb3ApO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNHcmFwaExpc3RFbXB0eSgpIHtcblx0ICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC1lbGVtJylbMF0gPT09IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRqdXN0U2Nyb2xsUG9zaXRpb24ob2xkR3JhcGhJbmZvSGVpZ2h0LCBvbGRHcmFwaEVsZW1IZWlnaHQsIG9sZFJpZ2h0UGFuZWxTY3JvbGxUb3ApIHtcblx0ICAgIHZhciBuZXdHcmFwaEluZm9IZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC10eXBlLWluZm8gYWN0aXZlJylbMF0uc2Nyb2xsSGVpZ2h0O1xuXHQgICAgdmFyIG5ld0dyYXBoRWxlbUhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLWVsZW0nKVswXS5zY3JvbGxIZWlnaHQ7XG5cdFxuXHQgICAgdmFyIG5ld0dyYXBoRWxlbUhlaWdodFNjYWxlID0gbmV3R3JhcGhFbGVtSGVpZ2h0IC8gb2xkR3JhcGhFbGVtSGVpZ2h0O1xuXHQgICAgdmFyIG5ld1JpZ2h0UGFuZWxTY3JvbGxUb3AgPSBuZXdHcmFwaEluZm9IZWlnaHQgKyAob2xkUmlnaHRQYW5lbFNjcm9sbFRvcCAtIG9sZEdyYXBoSW5mb0hlaWdodCkgKiBuZXdHcmFwaEVsZW1IZWlnaHRTY2FsZTtcblx0XG5cdCAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKS5zY3JvbGxUb3AgPSBuZXdSaWdodFBhbmVsU2Nyb2xsVG9wO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkaXNhYmxlQWN0aXZlR3JhcGhUYWIoKSB7XG5cdCAgICB2YXIgYWN0aXZlRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF07XG5cdCAgICB2YXIgYWN0aXZlQ2xhc3MgPSBcImdyYXBoLVwiICsgYWN0aXZlRWxlbS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR5cGVcIik7XG5cdFxuXHQgICAgYWN0aXZlRWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpLmNsYXNzTGlzdC5yZW1vdmUoYWN0aXZlQ2xhc3MpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBlbmFibGVHcmFwaFRhYihncmFwaFR5cGUpIHtcblx0ICAgIGQzLnNlbGVjdChcIi5ncmFwaC10eXBlLWJ0bltkYXRhLXR5cGU9J1wiICsgZ3JhcGhUeXBlICsgXCInXVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpLmNsYXNzTGlzdC5hZGQoXCJncmFwaC1cIiArIGdyYXBoVHlwZSk7XG5cdCAgICBkMy5zZWxlY3RBbGwoJy5ncmFwaC10eXBlLWluZm8nKS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGdyYXBoVHlwZSA9PT0gdGhpcy5pZC5zcGxpdCgnLScpWzBdO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUdyYXBoRGl2KHBvaSkge1xuXHQgICAgdmFyIGRlY2ltYWxQbGFjZXMgPSAzO1xuXHQgICAgdmFyIGxhdFNob3J0ID0gcm91bmRGbG9hdChwb2kubGF0LCBkZWNpbWFsUGxhY2VzKTtcblx0ICAgIHZhciBsbmdTaG9ydCA9IHJvdW5kRmxvYXQocG9pLmxuZywgZGVjaW1hbFBsYWNlcyk7XG5cdCAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0ICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcblx0ICAgIHZhciB6b29tVG9NYXJrZXJCdXR0b24gPSBtYWtlWm9vbVRvTWFwTWFya2VyQnV0dG9uKHBvaSk7XG5cdCAgICB2YXIgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiTGF0OiBcIiArIGxhdFNob3J0ICsgXCIsIExvbmc6IFwiICsgbG5nU2hvcnQpO1xuXHQgICAgdmFyIGNvbnRlbnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHQgICAgY29udGVudERpdi5jbGFzc05hbWUgPSBcImdyYXBoLWxhdC1sb25cIjtcblx0ICAgIGNvbnRlbnREaXYuYXBwZW5kQ2hpbGQoY29udGVudCk7XG5cdFxuXHQgICAgaGVhZGVyLmFwcGVuZENoaWxkKHpvb21Ub01hcmtlckJ1dHRvbik7XG5cdCAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoY29udGVudERpdik7XG5cdFxuXHQgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtZWxlbVwiKTtcblx0ICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtZWxlbS1oZWFkZXJcIik7XG5cdFxuXHQgICAgZ2V0RGF0YShwb2kubGF0LCBwb2kubG5nLCB3cmFwcGVyKTtcblx0ICAgIHJldHVybiB3cmFwcGVyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlWm9vbVRvTWFwTWFya2VyQnV0dG9uKHBvaSkge1xuXHQgICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG5cdCAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuJyk7XG5cdCAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgncGFuLXRvLW1hcmtlci1idG4nKTtcblx0ICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2hvdyBPbiBNYXBcIjtcblx0ICAgIGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKHBvaSwgZSkge1xuXHQgICAgICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdCAgICAgICAgbWFwLnBhblRvKFtwb2kubGF0LCBwb2kubG5nXSk7XG5cdFxuXHQgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIHNob3cgb24gbWFwXG5cdCAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXG5cdCAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiAne1wic2hvdyBvbiBtYXBcIjp7XCJsYXRcIjonICsgcG9pLmxhdCArICcsXCJsb25nXCI6JyArIHBvaS5sbmcgKyAnfX0nLFxuXHQgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICB9KTtcblx0ICAgIH0uYmluZChidXR0b24sIHBvaSk7XG5cdCAgICByZXR1cm4gYnV0dG9uO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmF3R3JhcGgoZGF0YSwgZGl2LCBsYXQsIGxuZykge1xuXHQgICAgZGF0YSA9IHNwbGl0RGF0YShkYXRhKTtcblx0ICAgIHZhciByZXByb2Nlc3NlZERhdGEgPSByZXByb2Nlc3NEYXRhKGRhdGEpO1xuXHQgICAgbWFrZVVwRG93bkxpbmVHcmFwaChkYXRhLCBkaXYsIHJlcHJvY2Vzc2VkRGF0YVtcIm1lYW5zXCJdKTtcblx0ICAgIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMocmVwcm9jZXNzZWREYXRhLCBkaXYsIGxhdCwgbG5nKTtcblx0ICAgIGRyYXdVcERvd25Qb2xhcldpdGhDaGVja2JveGVzQW5kVGhyZXNob2xkcyhyZXByb2Nlc3NlZERhdGEsIGRpdiwgbGF0LCBsbmcpO1xuXHQgICAgdmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXBoLWxpc3RcIik7XG5cdCAgICBsaXN0LmFwcGVuZENoaWxkKGRpdik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJvdW5kRmxvYXQobnVtYmVyLCBkZWNpbWFsUGxhY2VzKSB7XG5cdCAgICByZXR1cm4gTWF0aC5yb3VuZChudW1iZXIgKiBNYXRoLnBvdygxMCwgZGVjaW1hbFBsYWNlcykpIC8gTWF0aC5wb3coMTAsIGRlY2ltYWxQbGFjZXMpO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8gVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBtYWtlVXBEb3duTGluZUdyYXBoKGRhdGEsIGRpdiwgYXZlcmFnZXMpIHtcblx0ICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcblx0ICAgIHZhciBtYXJnaW4gPSB7IHRvcDogMzAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMCwgbGVmdDogMjkgfSxcblx0ICAgICAgICB3aWR0aCA9IDU4MCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxuXHQgICAgICAgIGhlaWdodCA9IDI3MCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXHRcblx0ICAgIC8vIFNldCB0aGUgcmFuZ2VzXG5cdCAgICB2YXIgeCA9IGQzLnNjYWxlVGltZSgpLnJhbmdlKFswLCB3aWR0aF0pLmRvbWFpbihbcGFyc2VEYXRlKGRhdGFbMF1bMF0pLCBwYXJzZURhdGUoZGF0YVtkYXRhLmxlbmd0aCAtIDFdWzBdKV0pO1xuXHQgICAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKS5kb21haW4oWzAsIDEwMF0pO1xuXHRcblx0ICAgIC8vIERlZmluZSB0aGUgYXhlc1xuXHQgICAgdmFyIHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4KS50aWNrcygxNikudGlja0Zvcm1hdChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkLmdldEZ1bGxZZWFyKCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KS50aWNrcyg2KTtcblx0XG5cdCAgICAvLyBEZWZpbmUgdGhlIGxpbmVcblx0ICAgIHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKCkueChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiB4KHBhcnNlRGF0ZShkWzBdKSk7XG5cdCAgICB9KS55KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIHkoZFsxXSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwidGltZXNlcmllcy1ncmFwaFwiLCB0cnVlKTtcblx0XG5cdCAgICAvLyBBZGRzIHRoZSBzdmcgY2FudmFzXG5cdCAgICB2YXIgc3ZnID0gd3JhcHBlci5hcHBlbmQoXCJzdmdcIikuYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSkuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgdyA9IHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQ7XG5cdCAgICAgICAgdmFyIGggPSBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbTtcblx0ICAgICAgICByZXR1cm4gJzAgMCAnICsgdyArICcgJyArIGg7XG5cdCAgICB9KS5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJykuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XG5cdFxuXHQgICAgc3ZnLmNhbGwodGlwKTtcblx0XG5cdCAgICAvLyBBZGQgdGhlIHZhbHVlbGluZSBwYXRoLlxuXHQgICAgZHJhd0xpbmVhclBhdGgoZGF0YSwgdmFsdWVsaW5lLCBzdmcpO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWCBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ4IGF4aXNcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpLmNhbGwoeEF4aXMpO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWSBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ5IGF4aXNcIikuY2FsbCh5QXhpcyk7XG5cdCAgICAvKipcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XG5cdCAgICAgKi9cblx0ICAgIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8gT1ZFUkxBUFBJTkcgVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMoZGF0YSwgZGl2LCBsYXQsIGxuZykge1xuXHQgICAgdmFyIHllYXIgPSBcIjIwMTVcIjtcblx0XG5cdCAgICB2YXIgY2hhcnRzID0ge307XG5cdFxuXHQgICAgLy8gU2V0IHRoZSBkaW1lbnNpb25zIG9mIHRoZSBjYW52YXMgLyBncmFwaFxuXHQgICAgdmFyIG1hcmdpbiA9IHsgdG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyOSB9LFxuXHQgICAgICAgIHdpZHRoID0gNTAwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsXG5cdCAgICAgICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cdFxuXHQgICAgdmFyIGF2ZXJhZ2VzID0gZGF0YS5tZWFucztcblx0XG5cdCAgICB2YXIgeCA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoWzAsIHdpZHRoXSkuZG9tYWluKFswLCAzNjVdKTtcblx0ICAgIHZhciB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSkuZG9tYWluKFswLCAxMDBdKTtcblx0XG5cdCAgICAvLyBEZWZpbmUgdGhlIGF4ZXNcblx0ICAgIGZ1bmN0aW9uIGZvcm1hdE1vbnRoVGljayhkKSB7XG5cdCAgICAgICAgcmV0dXJuIE1PTlRIX0xBQkVMU1soZCAtIDE1KSAvIDMwXTtcblx0ICAgIH1cblx0ICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeCkudGlja3MoMTEpLnRpY2tWYWx1ZXMoWzE1LCA0NSwgNzUsIDEwNSwgMTM1LCAxNjUsIDE5NSwgMjI1LCAyNTUsIDI4NSwgMzE1LCAzNDVdKS50aWNrRm9ybWF0KGZvcm1hdE1vbnRoVGljayk7XG5cdFxuXHQgICAgdmFyIHlBeGlzID0gZDMuYXhpc0xlZnQoeSkudGlja3MoNik7XG5cdFxuXHQgICAgLy8gRGVmaW5lIHRoZSBsaW5lXG5cdCAgICB2YXIgdmFsdWVsaW5lID0gZDMubGluZSgpLngoZnVuY3Rpb24gKGQsIGkpIHtcblx0ICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShkKSA/IHgocGFyc2VKdWxpYW5EYXkoZFswXSkpIDogeChpICogOCArIDMpO1xuXHQgICAgfSkueShmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGQpID8geShkWzFdKSA6IHkoZCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwib3ZlcmxhcHBpbmctZ3JhcGhcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgLy8gQWRkcyB0aGUgc3ZnIGNhbnZhc1xuXHQgICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHcgPSB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0O1xuXHQgICAgICAgIHZhciBoID0gaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b207XG5cdCAgICAgICAgcmV0dXJuICcwIDAgJyArIHcgKyAnICcgKyBoO1xuXHQgICAgfSkuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWlkWU1pZCcpXG5cdCAgICAvLy5hdHRyKFwid2lkdGhcIiwgd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodClcblx0ICAgIC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXG5cdCAgICAuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XG5cdFxuXHQgICAgc3ZnLmNhbGwodGlwKTtcblx0XG5cdCAgICAvLyBBZGQgdGhlIFggQXhpc1xuXHQgICAgc3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwieCBheGlzXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGhlaWdodCArIFwiKVwiKS5jYWxsKHhBeGlzKTtcblx0XG5cdCAgICAvLyBBZGQgdGhlIFkgQXhpc1xuXHQgICAgc3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpLmNhbGwoeUF4aXMpO1xuXHRcblx0ICAgIGNoYXJ0c1tcIm1lYW5zXCJdID0ge1xuXHQgICAgICAgIFwicGF0aFwiOiBkcmF3TGluZWFyUGF0aChkYXRhW1wibWVhbnNcIl0sIHZhbHVlbGluZSwgc3ZnKVxuXHQgICAgfTtcblx0XG5cdCAgICBjaGFydHNbeWVhcl0gPSB7XG5cdCAgICAgICAgXCJwYXRoXCI6IGRyYXdMaW5lYXJQYXRoKGRhdGFbeWVhcl0sIHZhbHVlbGluZSwgc3ZnKVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XG5cdCAgICAgKi9cblx0ICAgIGNoYXJ0c1tcIm1lYW5zXCJdW1wicG9pbnRzXCJdID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW1wibWVhbnNcIl0sIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdCAgICBjaGFydHNbeWVhcl1bXCJwb2ludHNcIl0gPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbeWVhcl0sIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdFxuXHQgICAgdmFyIGlucHV0d3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJpbnB1dC13cmFwcGVyXCIsIHRydWUpO1xuXHRcblx0ICAgIGRhdGEua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICBjcmVhdGVDaGVja2JveChpbnB1dHdyYXBwZXIsIGtleSwgXCJvdmVybGFwcGluZ1wiLCB5ZWFyLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgY3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBcIm1lYW5zXCIsIFwib3ZlcmxhcHBpbmdcIiwgXCJtZWFuc1wiLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFBPTEFSIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMoZGF0YSwgZGl2LCBsYXQsIGxuZykge1xuXHQgICAgdmFyIHllYXIgPSBcIjIwMTVcIjtcblx0ICAgIHZhciB3aWR0aCA9IDQ5MCxcblx0ICAgICAgICBoZWlnaHQgPSA0OTAsXG5cdCAgICAgICAgcmFkaXVzID0gTWF0aC5taW4od2lkdGgsIGhlaWdodCkgLyAyIC0gMzA7XG5cdFxuXHQgICAgdmFyIGF2ZXJhZ2VzID0gZGF0YVtcIm1lYW5zXCJdO1xuXHQgICAgdmFyIGNlbnRlciA9IGZpbmRQb2xhckNlbnRlcihkYXRhKTtcblx0ICAgIHZhciB0aHJlc2hvbGRzID0gZmluZFBvbGFyVGhyZXNob2xkcyhhdmVyYWdlcywgY2VudGVyWzFdWzBdKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFNldHMgdXAgc2NhbGluZyBvZiBkYXRhLiBXZSBrbm93IHRoYXQgdGhlIG5kdmkgdmFsdWVzIGZhbGwgYmV0d2VlblxuXHQgICAgICogMCAmIDEwMCBzbyB3ZSBzZXQgb3VyIGRvbWFpbiB0byB0aGF0LiBUaGUgcmFuZ2UgY29udHJvbHMgd2hlcmUgdGhlXG5cdCAgICAgKiBwb2ludHMgd2lsbCBsaWUgaW4gb3VyIGdyYXBoLCBzbyB3ZSBzZXQgdGhlbSB0byBiZSBiZXR3ZWVuIDAgYW5kIHRoZVxuXHQgICAgICogcmFkaXVzLlxuXHQgICAgICovXG5cdCAgICB2YXIgciA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFswLCAxMDBdKS5yYW5nZShbMCwgcmFkaXVzXSk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBmdW5jdGlvbiB3aGljaCB3aWxsIGRyYXcgZWFjaCBwb2ludC4gVG8gY29tcHV0ZSB0aGUgZGlzdGFuY2UgZnJvbSB0aGVcblx0ICAgICAqIGNlbnRlciBlYWNoIHBvaW50IGlzIHdlIHBhc3MgdGhlIGRhdGFwb2ludCB0byB0aGUgZnVuY3Rpb24gZGVmaW5lZCBhYm92ZS5cblx0ICAgICAqIFRvIGRldGVybWluZSB0aGUgYW5nbGUgZnJvbSB0aGUgb3JpZ2luIHdlIG5lZWQgdG8gY29udmVydCB0aGUgZGF5IHRvXG5cdCAgICAgKiByYWRpYW5zLCBzbyB3ZSBjb252ZXJ0IHRoZSBkYXkgdG8gYSBudW1iZXIgYmV0d2VlbiAwICYgMSBhbmQgdGhlbiBtdWx0aXBseVxuXHQgICAgICogaXQgYnkgMiBwaS5cblx0ICAgICAqL1xuXHQgICAgdmFyIGxpbmUgPSBkMy5yYWRpYWxMaW5lKCkucmFkaXVzKGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyByKGRbMV0pIDogcihkKTtcblx0ICAgIH0pLmFuZ2xlKGZ1bmN0aW9uIChkLCBpKSB7XG5cdCAgICAgICAgdmFyIGRheSA9IEFycmF5LmlzQXJyYXkoZCkgPyBwYXJzZUp1bGlhbkRheShkWzBdKSA6IGkgKiA4ICsgMztcblx0ICAgICAgICByZXR1cm4gKGRheSAtIDEpICUgMzY1IC8gMzY1ICogKDIgKiBNYXRoLlBJKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0cyB1cCB0aGUgY2FudmFzIHdoZXJlIHRoZSBjaXJjbGUgd2lsbCBiZSBkcmF3bi5cblx0ICAgICAqL1xuXHQgICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcInBvbGFyLWdyYXBoXCIsIHRydWUpO1xuXHQgICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpXG5cdCAgICAvLy5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG5cdCAgICAvLy5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodClcblx0ICAgIC5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiAnMCAwICcgKyB3aWR0aCArICcgJyArIGhlaWdodDtcblx0ICAgIH0pLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB3aWR0aCAvIDIgKyBcIixcIiArIGhlaWdodCAvIDIgKyBcIilcIik7XG5cdFxuXHQgICAgc3ZnLmNhbGwodGlwKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgYmlnIGNpcmNsZXMgb2YgdGhlIGdyYXBoICYgdGhlaXIgbGFiZWxzXG5cdCAgICAgKi9cblx0ICAgIHZhciBnciA9IHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInIgYXhpc1wiKS5zZWxlY3RBbGwoXCJnXCIpLmRhdGEoci50aWNrcyg1KS5zbGljZSgxKSkuZW50ZXIoKS5hcHBlbmQoXCJnXCIpO1xuXHRcblx0ICAgIGdyLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiclwiLCByKTtcblx0XG5cdCAgICBnci5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIC1yKGQpIC0gNDtcblx0ICAgIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJyb3RhdGUoMTUpXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIikudGV4dChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGxhYmVscyBmb3IgZWFjaCBtb250aCBhbmQgdGhlIGxpbmVzXG5cdCAgICAgKiB0aGF0IGdvIG91dCB0byB0aGVtLlxuXHQgICAgICovXG5cdCAgICB2YXIgZ2FfYSA9IHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcImEgYXhpc1wiKS5zZWxlY3RBbGwoXCJnXCIpLmRhdGEoZDMucmFuZ2UoMCwgMzYwLCAzMCkpLmVudGVyKCkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIFwicm90YXRlKFwiICsgKGQgLSA5MCkgKyBcIilcIjtcblx0ICAgIH0pO1xuXHRcblx0ICAgIGdhX2EuYXBwZW5kKFwibGluZVwiKS5hdHRyKFwieDJcIiwgcmFkaXVzKTtcblx0XG5cdCAgICBnYV9hLmFwcGVuZChcInRleHRcIikuYXR0cihcInhcIiwgcmFkaXVzICsgNikuYXR0cihcImR5XCIsIFwiLjM1ZW1cIikuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkIDwgMzYwICYmIGQgPiAxODAgPyBcImVuZFwiIDogbnVsbDtcblx0ICAgIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7XG5cdCAgICB9KS50ZXh0KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIE1PTlRIX0xBQkVMU1tkIC8gMzBdO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBEcmF3cyB0aGUgdGhyZXNob2xkIGxpbmVzXG5cdCAgICAgKi9cblx0ICAgIHZhciB0aHJlc2hvbGRFbGVtID0gc3ZnLmFwcGVuZChcImdcIikuc2VsZWN0QWxsKFwiZ1wiKS5kYXRhKHRocmVzaG9sZHMpLmVudGVyKCkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIFwicm90YXRlKFwiICsgKGQuZGF0YVsxXVswXSAtIDkwKSArIFwiKVwiO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdGhyZXNob2xkRWxlbS5hcHBlbmQoXCJsaW5lXCIpLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIikuYXR0cihcIngyXCIsIHJhZGl1cyk7XG5cdFxuXHQgICAgdGhyZXNob2xkRWxlbS5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgdmFyIGRheSA9IGQuZGF0YVsxXVswXTtyZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IHJhZGl1cyArIDMwIDogcmFkaXVzIC0gMzA7XG5cdCAgICB9KS5hdHRyKFwieVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkLmRhdGFbMV1bMF0gJSAzNjUgLyAzNjUgKiAoMiAqIE1hdGguUEkpICsgNjtcblx0ICAgIH0pLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdO3JldHVybiBkYXkgPCAzNjAgJiYgZGF5ID4gMTgwID8gXCJtaWRkbGVcIiA6IG51bGw7XG5cdCAgICB9KS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgdmFyIGRheSA9IGQuZGF0YVsxXVswXTtyZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IFwicm90YXRlKDE4MCBcIiArIChyYWRpdXMgKyA2KSArIFwiLDApXCIgOiBudWxsO1xuXHQgICAgfSkudGV4dChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkLmxhYmVsO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBEcmF3cyB0aGUgbGluZSB0byB0aGUgY2VudGVyIG9mIHRoZSBkYXRhXG5cdCAgICAgKi9cblx0ICAgIHZhciBjZW50ZXJEYXkgPSBjZW50ZXJbMV1bMF07XG5cdCAgICB2YXIgY2VudGVyRGF5T3Bwb3NpdGUgPSAoY2VudGVyRGF5ICsgMzY1IC8gMikgJSAzNjU7XG5cdCAgICB2YXIgY2VudGVyRGF5RGF0YSA9IFtjZW50ZXJEYXksIDEwMF07XG5cdCAgICB2YXIgY2VudGVyRGF5T3Bwb3NpdGVEYXRhID0gW2NlbnRlckRheU9wcG9zaXRlLCAxMDBdO1xuXHQgICAgdmFyIGdyb3dpbmdTZWFzb25EYXRhID0gW2NlbnRlckRheURhdGEsIGNlbnRlckRheU9wcG9zaXRlRGF0YV07XG5cdFxuXHQgICAgZHJhd1BvbGFyUGF0aChncm93aW5nU2Vhc29uRGF0YSwgbGluZSwgc3ZnKS5jbGFzc2VkKFwiZ3Jvd2luZy1zZWFzb24tbGluZVwiLCBcInRydWVcIik7XG5cdFxuXHQgICAgZHJhd1BvbGFyUGF0aChjZW50ZXIsIGxpbmUsIHN2ZykuY2xhc3NlZChcImNlbnRlci1saW5lXCIsIFwidHJ1ZVwiKTtcblx0XG5cdCAgICBzdmcuc2VsZWN0QWxsKFwicG9pbnRcIikuZGF0YShbY2VudGVyWzFdXSkuZW50ZXIoKS5hcHBlbmQoXCJjaXJjbGVcIikuYXR0cihcImNsYXNzXCIsIFwiY2VudGVyXCIpLmF0dHIoXCJyXCIsIDQpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtkXSkuc2xpY2UoMSkuc2xpY2UoMCwgLTEpO1xuXHQgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGNvb3JzICsgXCIpXCI7XG5cdCAgICB9KS5hdHRyKFwic3Ryb2tlXCIsIFwiIzAwMFwiKS5hdHRyKFwiZmlsbFwiLCBcIiNlYTBjNDhcIikub24oXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB0aXAuc2hvdyhcIkNlbnRlcjogXCIgKyBTdHJpbmcoZFsxXSkuc3Vic3RyaW5nKDAsIDcpKTtcblx0ICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgNSk7XG5cdCAgICB9KS5vbihcIm1vdXNlb3V0XCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgdGlwLmhpZGUoKTtcblx0ICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgNCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgY2hhcnRzID0ge307XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGxpbmUgdGhhdCB0aGUgZGF0YSBmb2xsb3dzXG5cdCAgICAgKi9cblx0ICAgIGNoYXJ0c1tcIm1lYW5zXCJdID0ge1xuXHQgICAgICAgIFwicGF0aFwiOiBkcmF3UG9sYXJQYXRoKGF2ZXJhZ2VzLCBsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIGNoYXJ0c1t5ZWFyXSA9IHtcblx0ICAgICAgICBcInBhdGhcIjogZHJhd1BvbGFyUGF0aChkYXRhW3llYXJdLCBsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBwb2ludCBhdCBlYWNoIGRhdGEgcG9pbnRcblx0ICAgICAqL1xuXHQgICAgY2hhcnRzLm1lYW5zLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoYXZlcmFnZXMsIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHQgICAgY2hhcnRzW3llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdFxuXHQgICAgdmFyIGlucHV0d3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJpbnB1dC13cmFwcGVyXCIsIHRydWUpO1xuXHRcblx0ICAgIGRhdGEua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICBjcmVhdGVDaGVja2JveChpbnB1dHdyYXBwZXIsIGtleSwgXCJwb2xhclwiLCB5ZWFyLCBjaGFydHMsIGRhdGEsIGxpbmUsIHN2ZywgYXZlcmFnZXMsIGxhdCwgbG5nKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwgXCJtZWFuc1wiLCBcInBvbGFyXCIsIFwibWVhbnNcIiwgY2hhcnRzLCBkYXRhLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzLCBsYXQsIGxuZyk7XG5cdFxuXHQgICAgdmFyIHRocmVzaG9sZENoZWNrYm94ID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwidGhyZXNob2xkLWNoZWNrYm94XCIsIHRydWUpO1xuXHRcblx0ICAgIHRocmVzaG9sZENoZWNrYm94LmFwcGVuZChcImlucHV0XCIpLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIikuYXR0cihcImlkXCIsIFwidGhyZXNob2xkLWNoZWNrYm94LVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKS5wcm9wZXJ0eShcImNoZWNrZWRcIiwgdHJ1ZSkub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICB0aHJlc2hvbGRFbGVtLnN0eWxlKFwib3BhY2l0eVwiLCB0aGlzLmNoZWNrZWQgPyAxIDogMCk7XG5cdCAgICAgICAgdmFyIG9mZm9uID0gdGhpcy5jaGVja2VkID8gJ29mZicgOiAnb24nO1xuXHRcblx0ICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBncmFwaCB0aHJlc2hvbGQgY2xpY2sgb2ZmXG5cdCAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXG5cdCAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiAndGhyZXNob2xkIHBvbGFyIHRpbWVzZXJpZXMgJyArIG9mZm9uLFxuXHQgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICB9KTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHRocmVzaG9sZENoZWNrYm94LmFwcGVuZChcImxhYmVsXCIpLnRleHQoXCJUaHJlc2hvbGRzXCIpLmF0dHIoXCJmb3JcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuXHR9XG5cdFxuXHQvKiBQT0xBUiBHUkFQSCBIRUxQRVJTICovXG5cdFxuXHRmdW5jdGlvbiBmaW5kUG9sYXJDZW50ZXIoZGF0YSkge1xuXHQgICAgdmFyIGksIGosIGxlbmd0aCwgYXJyO1xuXHQgICAgdmFyIHRvdGFsU3VtID0gMDtcblx0ICAgIHZhciBpbmNvbXBsZXRlWWVhcnMgPSAwO1xuXHQgICAgdmFyIHN1bTtcblx0ICAgIGxlbmd0aCA9IDQ2O1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmtleXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBhcnIgPSBkYXRhW2RhdGEua2V5c1tpXV07XG5cdCAgICAgICAgaWYgKGFyci5sZW5ndGggIT09IGxlbmd0aCkge1xuXHQgICAgICAgICAgICBpbmNvbXBsZXRlWWVhcnMrKztcblx0ICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1bSA9IDA7XG5cdCAgICAgICAgZm9yIChqID0gMDsgaiA8IGxlbmd0aCAvIDI7IGorKykge1xuXHQgICAgICAgICAgICBzdW0gKz0gYXJyW2pdWzFdIC0gYXJyW2ogKyAyM11bMV07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1bSA9IHN1bSAvIDIzO1xuXHQgICAgICAgIHRvdGFsU3VtICs9IHN1bTtcblx0ICAgIH1cblx0ICAgIHRvdGFsU3VtID0gTWF0aC5hYnModG90YWxTdW0pIC8gKGRhdGEua2V5cy5sZW5ndGggLSBpbmNvbXBsZXRlWWVhcnMpO1xuXHRcblx0ICAgIHZhciBhcmVhRGlmZiA9IDEwMDAwMDA7XG5cdCAgICB2YXIgY2hlY2tEaWZmO1xuXHQgICAgdmFyIGFyZWFJbmRleCA9IDA7XG5cdCAgICB2YXIgbGVmdEFyZWEsIHJpZ2h0QXJlYTtcblx0ICAgIHZhciBhdmdzID0gZGF0YS5tZWFucztcblx0ICAgIHZhciBrLCBjb3VudGVyO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGggLyAyOyBpKyspIHtcblx0ICAgICAgICBsZWZ0QXJlYSA9IDA7XG5cdCAgICAgICAgcmlnaHRBcmVhID0gMDtcblx0ICAgICAgICBmb3IgKGNvdW50ZXIgPSAwOyBjb3VudGVyIDwgbGVuZ3RoIC8gMjsgY291bnRlcisrKSB7XG5cdCAgICAgICAgICAgIGogPSAoaSArIGNvdW50ZXIpICUgNDY7XG5cdCAgICAgICAgICAgIGsgPSAoaiArIDIzKSAlIDQ2O1xuXHRcblx0ICAgICAgICAgICAgbGVmdEFyZWEgKz0gcGFyc2VJbnQoYXZnc1tqXSwgMTApO1xuXHQgICAgICAgICAgICByaWdodEFyZWEgKz0gcGFyc2VJbnQoYXZnc1trXSwgMTApO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjaGVja0RpZmYgPSBNYXRoLmFicyhsZWZ0QXJlYSAtIHJpZ2h0QXJlYSk7XG5cdCAgICAgICAgaWYgKGNoZWNrRGlmZiA8IGFyZWFEaWZmKSB7XG5cdCAgICAgICAgICAgIGFyZWFEaWZmID0gY2hlY2tEaWZmO1xuXHQgICAgICAgICAgICBhcmVhSW5kZXggPSBpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZmlyc3RSYWRpdXMgPSBwYXJzZUludChhdmdzW2FyZWFJbmRleF0sIDEwKTtcblx0ICAgIHZhciBzZWNvbmRSYWRpdXMgPSBwYXJzZUludCgtYXZnc1thcmVhSW5kZXggKyAyM10sIDEwKTtcblx0XG5cdCAgICB2YXIgZmlyc3REaWZmID0gTWF0aC5hYnModG90YWxTdW0gLSBmaXJzdFJhZGl1cykgLSBNYXRoLmFicyh0b3RhbFN1bSAtIHNlY29uZFJhZGl1cyk7XG5cdCAgICB2YXIgc2Vjb25kRGlmZiA9IE1hdGguYWJzKC10b3RhbFN1bSAtIGZpcnN0UmFkaXVzKSAtIE1hdGguYWJzKC10b3RhbFN1bSAtIHNlY29uZFJhZGl1cyk7XG5cdCAgICBpZiAoc2Vjb25kRGlmZiA+IGZpcnN0RGlmZikge1xuXHQgICAgICAgIGFyZWFJbmRleCA9IGFyZWFJbmRleCArIDIzO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjaXJjbGVjZW50ZXIgPSBbMCwgMF07XG5cdCAgICB2YXIgZGF0YWNlbnRlciA9IFthcmVhSW5kZXggKiA4ICsgMywgdG90YWxTdW1dO1xuXHRcblx0ICAgIHJldHVybiBbY2lyY2xlY2VudGVyLCBkYXRhY2VudGVyXTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIHN0YXJ0RGF5IGlzIGFjdHVhbGx5IHRoZSBzZWFzb25hbGl0eSBpbmRleCwgaWYgaXQgb2NjdXJzIGFmdGVyIGp1bHkgaXQgc2hvdWxkIGJlIGZsaXBwZWRcblx0ICovXG5cdGZ1bmN0aW9uIGZpbmRQb2xhclRocmVzaG9sZHMoZGF0YSwgc3RhcnREYXkpIHtcblx0ICAgIHZhciBzdGFydEluZGV4ID0gTWF0aC5mbG9vcigoc3RhcnREYXkgLSAzKSAvIDgpO1xuXHQgICAgaWYgKHN0YXJ0SW5kZXggPiAyMikge1xuXHQgICAgICAgIHN0YXJ0SW5kZXggPSBzdGFydEluZGV4IC0gMjM7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGksIGosIGxlbmd0aCwgYXJyO1xuXHQgICAgdmFyIHRvdGFsU3VtID0gMDtcblx0ICAgIHZhciBzdW07XG5cdCAgICBsZW5ndGggPSA0Njtcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBqID0gKHN0YXJ0SW5kZXggKyBpKSAlIGxlbmd0aDtcblx0ICAgICAgICB0b3RhbFN1bSArPSBwYXJzZUludChkYXRhW2pdLCAxMCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGZpZnRlZW5UaHJlc2hvbGQgPSB0b3RhbFN1bSAqIC4xNTtcblx0ICAgIHZhciBlaWdodHlUaHJlc2hvbGQgPSB0b3RhbFN1bSAqIC44MDtcblx0ICAgIHZhciBmaWZ0ZWVuSW5kZXhGb3VuZCA9IGZhbHNlLFxuXHQgICAgICAgIGVpZ2h0eUluZGV4Rm91bmQgPSBmYWxzZTtcblx0ICAgIHZhciBmaWZ0ZWVuSW5kZXgsIGVpZ2h0eUluZGV4O1xuXHRcblx0ICAgIHRvdGFsU3VtID0gMDtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGogPSAoc3RhcnRJbmRleCArIGkpICUgbGVuZ3RoO1xuXHQgICAgICAgIHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcblx0ICAgICAgICBpZiAoIWZpZnRlZW5JbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZmlmdGVlblRocmVzaG9sZCkge1xuXHQgICAgICAgICAgICBmaWZ0ZWVuSW5kZXggPSBqO1xuXHQgICAgICAgICAgICBmaWZ0ZWVuSW5kZXhGb3VuZCA9IHRydWU7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIWVpZ2h0eUluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBlaWdodHlUaHJlc2hvbGQpIHtcblx0ICAgICAgICAgICAgZWlnaHR5SW5kZXggPSBqO1xuXHQgICAgICAgICAgICBlaWdodHlJbmRleEZvdW5kID0gdHJ1ZTtcblx0ICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjaXJjbGVDZW50ZXIgPSBbMCwgMF07XG5cdFxuXHQgICAgdmFyIGZpZnRlZW5FbmQgPSBbZmlmdGVlbkluZGV4ICogOCArIDMsIDEwMF07XG5cdCAgICB2YXIgZWlnaHR5RW5kID0gW2VpZ2h0eUluZGV4ICogOCArIDMsIDEwMF07XG5cdFxuXHQgICAgcmV0dXJuIFt7XG5cdCAgICAgICAgXCJsYWJlbFwiOiBcIjE1JVwiLFxuXHQgICAgICAgIFwiZGF0YVwiOiBbY2lyY2xlQ2VudGVyLCBmaWZ0ZWVuRW5kXVxuXHQgICAgfSwge1xuXHQgICAgICAgIFwibGFiZWxcIjogXCI4MCVcIixcblx0ICAgICAgICBcImRhdGFcIjogW2NpcmNsZUNlbnRlciwgZWlnaHR5RW5kXVxuXHQgICAgfV07XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBHUkFQSCBIRUxQRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBkcmF3TGluZWFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcblx0ICAgIHJldHVybiBzdmcuYXBwZW5kKFwicGF0aFwiKS5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpLmF0dHIoXCJkXCIsIGxpbmUoZGF0YSkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmF3UG9sYXJQYXRoKGRhdGEsIGxpbmUsIHN2Zykge1xuXHQgICAgcmV0dXJuIHN2Zy5hcHBlbmQoXCJwYXRoXCIpLmRhdHVtKGRhdGEpLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIikuYXR0cihcImRcIiwgbGluZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcykge1xuXHQgICAgcmV0dXJuIHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKS5kYXRhKGRhdGEpLmVudGVyKCkuYXBwZW5kKFwiY2lyY2xlXCIpLmF0dHIoXCJyXCIsIDIpLmF0dHIoXCJjbGFzc1wiLCBcInBvaW50XCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQsIGkpIHtcblx0ICAgICAgICB2YXIgcG9pbnQgPSBBcnJheS5pc0FycmF5KGQpID8gZCA6IFtpICogOCArIDMsIGRdO1xuXHQgICAgICAgIHZhciBjb29ycyA9IGxpbmUoW3BvaW50XSkuc2xpY2UoMSkuc2xpY2UoMCwgLTEpO1xuXHQgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGNvb3JzICsgXCIpXCI7XG5cdCAgICB9KVxuXHQgICAgLy8uYXR0cihcInJcIiwgMylcblx0ICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwiIzAwMFwiKS5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbiAoZCwgaSkge1xuXHQgICAgICAgIHZhciB2YWwgPSBBcnJheS5pc0FycmF5KGQpID8gZFswXS5zdWJzdHJpbmcoMCwgNCkgOiAwO1xuXHQgICAgICAgIHJldHVybiBwdWxsRGlzdGluY3RDb2xvcih2YWwpO1xuXHQgICAgfSkub24oXCJtb3VzZW92ZXJcIiwgaGFuZGxlUG9pbnRNb3VzZW92ZXIpLm9uKFwibW91c2VvdXRcIiwgaGFuZGxlUG9pbnRNb3VzZW91dCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdmVyKGQpIHtcblx0ICAgIHZhciB0aXBTdHJpbmcgPSBBcnJheS5pc0FycmF5KGQpID8gZm9ybWF0RGF0ZShkWzBdKSArIFwiOiBcIiArIGRbMV0gOiBcIkF2ZXJhZ2U6IFwiICsgZDtcblx0ICAgIHRpcC5zaG93KHRpcFN0cmluZyk7XG5cdCAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgXCI0XCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVQb2ludE1vdXNlb3V0KGQpIHtcblx0ICAgIHRpcC5oaWRlKCk7XG5cdCAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgXCIyXCIpO1xuXHRcblx0ICAgIHZhciBhY3RpdmVUeXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyYXBoLXR5cGUtYnRuIGFjdGl2ZVwiKVswXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpO1xuXHRcblx0ICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvb2wgdGlwIG9uIGdyYXBoIGRvIHRoaXMgb24gdGhlIG1vdXNlb3V0IHNvIG1vdXNlb3ZlciBkb3NlIG5vdCBkbyBhIGxvdCBvZiBldmVudHMuLi4uXG5cdCAgICAvLyB3ZSBtaXNzIGEgZmV3IGJ1dCB0aGF0IGlzIGJldHRlciB0aGFuIG92ZXIgY291bnRpbmcuXG5cdCAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxuXHQgICAgICAgIGV2ZW50QWN0aW9uOiAnaG92ZXInLFxuXHQgICAgICAgIGV2ZW50TGFiZWw6IGFjdGl2ZVR5cGUgKyAnIHRvb2wgdGlwJyxcblx0ICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVDaGVja2JveCh3cmFwcGVyLCBrZXksIHR5cGUsIHllYXIsIGNoYXJ0cywgZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpIHtcblx0ICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKS5hdHRyKFwidmFsdWVcIiwga2V5KS5wcm9wZXJ0eShcImNoZWNrZWRcIiwga2V5ID09PSB5ZWFyID8gdHJ1ZSA6IGZhbHNlKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcblx0XG5cdCAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGdyYXBoIHllYXIgY2xpY2sgb2ZmXG5cdCAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcblx0ICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHQgICAgICAgICAgICAgICAgZXZlbnRMYWJlbDogbmV3WWVhciArICcgJyArIHR5cGUgKyAnIHRpbWVzZXJpZXMgb2ZmJyxcblx0ICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3TGluZWFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0XG5cdCAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGdyYXBoIHllYXIgY2xpY2sgb25cblx0ICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxuXHQgICAgICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdCAgICAgICAgICAgICAgICBldmVudExhYmVsOiBuZXdZZWFyICsgJyAnICsgdHlwZSArICcgdGltZXNlcmllcyBvbicsXG5cdCAgICAgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImxhYmVsXCIpLnRleHQoa2V5ICE9PSBcIm1lYW5zXCIgPyBrZXkgOiBcIkJhc2VsaW5lXCIpLmF0dHIoXCJmb3JcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLnN0eWxlKFwiYmFja2dyb3VuZFwiLCBwdWxsRGlzdGluY3RDb2xvcihrZXkgIT09IFwibWVhbnNcIiA/IGtleSA6IDApKS5jbGFzc2VkKFwiZ3JhcGgtcGlwLWV4YW1wbGVcIiwgdHJ1ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHB1bGxEaXN0aW5jdENvbG9yKHllYXIpIHtcblx0ICAgIHZhciBjb2xvclJhbXAgPSBbXCIjZmZlNDc2XCIsIFwiIzAzNjU5M1wiLCBcIiMxMTZjOTFcIiwgXCIjMWU3MzkwXCIsIFwiIzJjN2I4ZVwiLCBcIiMzOTgyOGNcIiwgXCIjNGM4YzhhXCIsIFwiIzVlOTU4OVwiLCBcIiM3MTlmODdcIiwgXCIjODNhODg2XCIsIFwiIzk1YjE4M1wiLCBcIiNhNmJhODBcIiwgXCIjYjhjMzdjXCIsIFwiI2NhY2M3OVwiLCBcIiNkNmQyNzlcIiwgXCIjZTJkNzc5XCIsIFwiI2VmZGQ3OFwiLCBcIiNmYmUzNzhcIl07XG5cdFxuXHQgICAgcmV0dXJuIHllYXIgPT09IDAgPyBcIiNmZmZcIiA6IGNvbG9yUmFtcFtwYXJzZUludCh5ZWFyLCAxMCkgJSBjb2xvclJhbXAubGVuZ3RoXTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBEQVRFIEhFTFBFUlMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBwYXJzZURhdGUoZGF0ZSkge1xuXHQgICAgZGF0ZSA9IGRhdGUudG9TdHJpbmcoKTtcblx0ICAgIHZhciB5ZWFyID0gZGF0ZS5zdWJzdHJpbmcoMCwgNCk7XG5cdCAgICB2YXIgbW9udGggPSBwYXJzZUludChkYXRlLnN1YnN0cmluZyg0LCA2KSwgMTApIC0gMTtcblx0ICAgIHZhciBkYXkgPSBkYXRlLnN1YnN0cmluZyg2LCA4KTtcblx0XG5cdCAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhcnNlSnVsaWFuRGF5KGRhdGUpIHtcblx0ICAgIGlmICh0eXBlb2YgZGF0ZSA9PT0gXCJzdHJpbmdcIikge1xuXHQgICAgICAgIGRhdGUgPSBwYXJzZURhdGUoZGF0ZSk7XG5cdCAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RE9ZKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBkYXRlO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGUpIHtcblx0ICAgIGlmIChkYXRlID09PSBcIkF2ZXJhZ2VcIikge1xuXHQgICAgICAgIHJldHVybiBkYXRlO1xuXHQgICAgfVxuXHRcblx0ICAgIGRhdGUgPSBwYXJzZURhdGUoZGF0ZSk7XG5cdCAgICByZXR1cm4gZm9ybWF0TW9udGgoZGF0ZS5nZXRNb250aCgpKSArIFwiIFwiICsgb3JkaW5hbF9zdWZmaXhfb2YoZGF0ZS5nZXREYXRlKCkpICsgXCIsIFwiICsgZGF0ZS5nZXRGdWxsWWVhcigpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRNb250aChtb250aCkge1xuXHQgICAgcmV0dXJuIEZPUk1BVFRFRF9NT05USF9MQUJFTFNbbW9udGhdO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBvcmRpbmFsX3N1ZmZpeF9vZihkYXkpIHtcblx0ICAgIHZhciBqID0gZGF5ICUgMTAsXG5cdCAgICAgICAgayA9IGRheSAlIDEwMDtcblx0ICAgIGlmIChqID09PSAxICYmIGsgIT09IDExKSB7XG5cdCAgICAgICAgcmV0dXJuIGRheSArIFwic3RcIjtcblx0ICAgIH1cblx0ICAgIGlmIChqID09PSAyICYmIGsgIT09IDEyKSB7XG5cdCAgICAgICAgcmV0dXJuIGRheSArIFwibmRcIjtcblx0ICAgIH1cblx0ICAgIGlmIChqID09PSAzICYmIGsgIT09IDEzKSB7XG5cdCAgICAgICAgcmV0dXJuIGRheSArIFwicmRcIjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBkYXkgKyBcInRoXCI7XG5cdH1cblx0XG5cdHZhciBNT05USF9MQUJFTFMgPSB7XG5cdCAgICAwOiBcIkphblwiLFxuXHQgICAgMTogXCJGZWJcIixcblx0ICAgIDI6IFwiTWFyXCIsXG5cdCAgICAzOiBcIkFwclwiLFxuXHQgICAgNDogXCJNYXlcIixcblx0ICAgIDU6IFwiSnVuXCIsXG5cdCAgICA2OiBcIkp1bFwiLFxuXHQgICAgNzogXCJBdWdcIixcblx0ICAgIDg6IFwiU2VwXCIsXG5cdCAgICA5OiBcIk9jdFwiLFxuXHQgICAgMTA6IFwiTm92XCIsXG5cdCAgICAxMTogXCJEZWNcIlxuXHR9O1xuXHRcblx0dmFyIEZPUk1BVFRFRF9NT05USF9MQUJFTFMgPSB7XG5cdCAgICAwOiBcIkphbi5cIixcblx0ICAgIDE6IFwiRmViLlwiLFxuXHQgICAgMjogXCJNYXIuXCIsXG5cdCAgICAzOiBcIkFwci5cIixcblx0ICAgIDQ6IFwiTWF5XCIsXG5cdCAgICA1OiBcIkp1bi5cIixcblx0ICAgIDY6IFwiSnVsLlwiLFxuXHQgICAgNzogXCJBdWcuXCIsXG5cdCAgICA4OiBcIlNlcC5cIixcblx0ICAgIDk6IFwiT2N0LlwiLFxuXHQgICAgMTA6IFwiTm92LlwiLFxuXHQgICAgMTE6IFwiRGVjLlwiXG5cdH07XG5cbi8qKiovIH0sXG4vKiAyOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkJpbmRUYWJFdmVudHMgPSBCaW5kVGFiRXZlbnRzO1xuXHRleHBvcnRzLkdldEFjdGl2ZVRhYiA9IEdldEFjdGl2ZVRhYjtcblx0ZXhwb3J0cy5IYW5kbGVUYWJDaGFuZ2UgPSBIYW5kbGVUYWJDaGFuZ2U7XG5cdFxuXHR2YXIgX3BhbmVsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHRmdW5jdGlvbiBCaW5kVGFiRXZlbnRzKCkge1xuXHQgICAgZDMuc2VsZWN0QWxsKFwiLnBhbmVsLXRvcC1idG5cIikub24oXCJjbGlja1wiLCBoYW5kbGVUYWJIZWFkZXJCdG5DbGljayk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEdldEFjdGl2ZVRhYigpIHtcblx0ICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicGFuZWwtdG9wLWJ0biBhY3RpdmVcIilbMF0uZ2V0QXR0cmlidXRlKFwiZGF0YS1hY3RpdmVcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrKCkge1xuXHQgICAgLy8gSWYgdGhlIHNlY3Rpb24gaXMgYWxyZWFkeSBhY3RpdmUsIGRvIG5vdGhpbmdcblx0ICAgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkgcmV0dXJuO1xuXHRcblx0ICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIGdyYXBoIHR5cGVcblx0ICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICd0YWInLFxuXHQgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHQgICAgICAgIGV2ZW50TGFiZWw6IHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1hY3RpdmVcIiksXG5cdCAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICB9KTtcblx0XG5cdCAgICBIYW5kbGVUYWJDaGFuZ2UodGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWFjdGl2ZVwiKSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEhhbmRsZVRhYkNoYW5nZShuZXdDbGFzcykge1xuXHQgICAgZGlzYWJsZUFjdGl2ZVRhYigpO1xuXHQgICAgZW5hYmxlVGFiKG5ld0NsYXNzKTtcblx0ICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGVuYWJsZVRhYihuZXdDbGFzcykge1xuXHQgICAgZDMuc2VsZWN0KFwiLnBhbmVsLXRvcC1idG5bZGF0YS1hY3RpdmU9J1wiICsgbmV3Q2xhc3MgKyBcIiddXCIpLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXAtd3JhcHBlclwiKS5jbGFzc0xpc3QuYWRkKG5ld0NsYXNzKTtcblx0ICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmlnaHQtcGFuZWxcIikuY2xhc3NMaXN0LmFkZChuZXdDbGFzcyk7XG5cdFxuXHQgICAgZDMuc2VsZWN0KFwiLnBhbmVsLXNlY3Rpb24td3JhcHBlcltkYXRhLWFjdGl2ZT0nXCIgKyBuZXdDbGFzcyArIFwiJ11cIikuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblx0XG5cdCAgICB0b2dnbGVNYXBQYWRkaW5nKCk7XG5cdCAgICByZXNldFBhbmVsV2lkdGgoKTtcblx0ICAgICgwLCBfcGFuZWwudXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZGlzYWJsZUFjdGl2ZVRhYigpIHtcblx0ICAgIHZhciBhY3RpdmVDbGFzcyA9IGQzLnNlbGVjdChcIi5wYW5lbC10b3AtYnRuLmFjdGl2ZVwiKS5hdHRyKFwiZGF0YS1hY3RpdmVcIik7XG5cdFxuXHQgICAgZDMuc2VsZWN0QWxsKCcjbWFwLXdyYXBwZXIsICNyaWdodC1wYW5lbCcpLmNsYXNzZWQoYWN0aXZlQ2xhc3MsIGZhbHNlKTtcblx0XG5cdCAgICBkMy5zZWxlY3RBbGwoJy5wYW5lbC10b3AtYnRuLmFjdGl2ZSwgLnBhbmVsLXNlY3Rpb24td3JhcHBlci5hY3RpdmUnKS5jbGFzc2VkKCdhY3RpdmUnLCBmYWxzZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvZ2dsZU1hcFBhZGRpbmcoKSB7XG5cdCAgICB2YXIgcGFkZGluZ1JpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyaWdodC1wYW5lbFwiKS5vZmZzZXRXaWR0aDtcblx0ICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwLXdyYXBwZXJcIikuc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGFkZGluZ1JpZ2h0ICsgXCJweFwiO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU2luY2UgdGhlIHBhbmVsIGhhcyBjaGlsZCBlbGVtZW50cyB3aXRoIHBvc2l0aW9uIGZpeGVkIGFuZCB3aWR0aCBpbmhlcml0XG5cdCAqIHdlIG5lZWQgdG8gY2xlYXIgdGhlIGlubGluZSB3aWR0aCBwcm9wZXJ0eSBpZiBhbmQgb25seSBpZiB0aGUgaW5saW5lXG5cdCAqIHdpZHRoIGlzIGxlc3MgdGhhbiB0aGUgbWluIHdpZHRoXG5cdCAqL1xuXHRmdW5jdGlvbiByZXNldFBhbmVsV2lkdGgoKSB7XG5cdCAgICB2YXIgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJpZ2h0LXBhbmVsXCIpO1xuXHQgICAgdmFyIHdpZHRoID0gcGFuZWwuc3R5bGUud2lkdGg7XG5cdCAgICBpZiAoIXdpZHRoKSByZXR1cm47XG5cdFxuXHQgICAgdmFyIHBhbmVsTWluV2lkdGggPSBkMy5zZWxlY3QocGFuZWwpLnN0eWxlKCdtaW4td2lkdGgnKS5zbGljZSgwLCAtMik7XG5cdCAgICBpZiAocGFyc2VJbnQod2lkdGguc2xpY2UoMCwgLTIpLCAxMCkgPiBwYXJzZUludChwYW5lbE1pbldpZHRoLCAxMCkpIHJldHVybjtcblx0XG5cdCAgICBwYW5lbC5zdHlsZS53aWR0aCA9IFwiXCI7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDMwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLnNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbiA9IHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbjtcblx0ZXhwb3J0cy5tYWtlT3BhY2l0eVNsaWRlciA9IG1ha2VPcGFjaXR5U2xpZGVyO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIF9sYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0Ly8gc2V0IGl0IG1hbnVhbGx5IGZvciBub3dcblx0dmFyIE9QQUNJVFlfUkFOR0VfTUFYID0gOTA7XG5cdFxuXHR2YXIgb3BhY2l0eVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzEsIDBdKS5yYW5nZShbMCwgT1BBQ0lUWV9SQU5HRV9NQVhdKS5jbGFtcCh0cnVlKTtcblx0XG5cdGZ1bmN0aW9uIHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbihsYXllciwgc2xpZGVySGFuZGxlLCBvcGFjaXR5KSB7XG5cdCAgICBvcGFjaXR5ID0gb3BhY2l0eSB8fCBsYXllci5vcGFjaXR5O1xuXHQgICAgc2xpZGVySGFuZGxlLnN0eWxlLnRvcCA9ICcnICsgb3BhY2l0eVNjYWxlKG9wYWNpdHkpICsgJ3B4Jztcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZU9wYWNpdHlTbGlkZXIobGF5ZXIpIHtcblx0ICAgIHZhciBsYXllck9wYWNpdHkgPSBsYXllci5vcGFjaXR5ICE9PSB1bmRlZmluZWQgPyBsYXllci5vcGFjaXR5IDogMTtcblx0ICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICB2YXIgc2xpZGVyVHJhY2tPdmVybGF5ID0gbWFrZVNsaWRlclRyYWNrKGxheWVyLCBsYXllck9wYWNpdHkpO1xuXHQgICAgdmFyIGljb25XcmFwcGVyQ2xvc2VkID0gbWFrZU9wYWNpdHlJY29uV3JhcHBlcignY2xvc2VkJywgbGF5ZXIsIHNsaWRlclRyYWNrT3ZlcmxheSk7XG5cdFxuXHQgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci13cmFwcGVyJyk7XG5cdCAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNsaWRlclRyYWNrT3ZlcmxheSk7XG5cdCAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGljb25XcmFwcGVyQ2xvc2VkKTtcblx0ICAgIHJldHVybiB3cmFwcGVyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlT3BhY2l0eUljb25XcmFwcGVyKHN0YXRlLCBsYXllciwgc2xpZGVyVHJhY2tPdmVybGF5KSB7XG5cdCAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgdmFyIGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblx0ICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1pY29uLXdyYXBwZXInKTtcblx0ICAgIGljb24uY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1pY29uJyk7XG5cdCAgICBpY29uLmNsYXNzTGlzdC5hZGQoc3RhdGUpO1xuXHQgICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWdzL29wYWNpdHktaWNvbi0nICsgc3RhdGUgKyAnLTY0eDY0LnBuZycpO1xuXHQgICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ2FsdCcsICdVc2UgdGhpcyBzbGlkZXIgdG8gYWRqdXN0IHRyYW5zcGFyZW5jeSBmb3IgdGhlICcgKyBsYXllci5uYW1lICsgJyBsYXllcicpO1xuXHQgICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgJ1VzZSB0aGlzIHNsaWRlciB0byBhZGp1c3QgdHJhbnNwYXJlbmN5IGZvciB0aGUgJyArIGxheWVyLm5hbWUgKyAnIGxheWVyJyk7XG5cdCAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGljb24pO1xuXHQgICAgd3JhcHBlci5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICB2YXIgc2xpZGVySGFuZGxlID0gc2xpZGVyVHJhY2tPdmVybGF5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ29wYWNpdHktc2xpZGVyLWhhbmRsZScpWzBdO1xuXHQgICAgICAgICgwLCBfbGF5ZXIudXBkYXRlTGF5ZXJPcGFjaXR5KShsYXllciwgMCk7XG5cdCAgICAgICAgc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uKGxheWVyLCBzbGlkZXJIYW5kbGUsIDApO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiB3cmFwcGVyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlU2xpZGVyVHJhY2sobGF5ZXIsIGxheWVyT3BhY2l0eSkge1xuXHRcblx0ICAgIHZhciBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICB2YXIgdHJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIHZhciBzbGlkZXJIYW5kbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XG5cdCAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktc2xpZGVyLXRyYWNrLW92ZXJsYXknKTtcblx0ICAgIHRyYWNrLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktc2xpZGVyLXRyYWNrJyk7XG5cdCAgICBzbGlkZXJIYW5kbGUuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1zbGlkZXItaGFuZGxlJyk7XG5cdFxuXHQgICAgb3ZlcmxheS5hcHBlbmRDaGlsZCh0cmFjayk7XG5cdCAgICBvdmVybGF5LmFwcGVuZENoaWxkKHNsaWRlckhhbmRsZSk7XG5cdFxuXHQgICAgaWYgKGxheWVyLmFjdGl2ZSkgc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uKGxheWVyLCBzbGlkZXJIYW5kbGUpO1xuXHQgICAgc2V0RHJhZ0V2ZW50TGlzdGVuZXIob3ZlcmxheSwgbGF5ZXIsIGxheWVyT3BhY2l0eSk7XG5cdFxuXHQgICAgcmV0dXJuIG92ZXJsYXk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldERyYWdFdmVudExpc3RlbmVyKG92ZXJsYXksIGxheWVyLCBsYXllck9wYWNpdHkpIHtcblx0ICAgIGQzLnNlbGVjdChvdmVybGF5KS5jYWxsKGQzLmRyYWcoKS5vbignc3RhcnQgZHJhZycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgc2xpZGVySGFuZGxlID0gb3ZlcmxheS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdvcGFjaXR5LXNsaWRlci1oYW5kbGUnKVswXTtcblx0ICAgICAgICB2YXIgbmV3T3BhY2l0eSA9IGNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zKG92ZXJsYXkpO1xuXHQgICAgICAgICgwLCBfbGF5ZXIudXBkYXRlTGF5ZXJPcGFjaXR5KShsYXllciwgbmV3T3BhY2l0eSk7XG5cdCAgICAgICAgc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uKGxheWVyLCBzbGlkZXJIYW5kbGUsIG5ld09wYWNpdHkpO1xuXHQgICAgfSkub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHtcblx0XG5cdCAgICAgICAgdmFyIG5ld09wYWNpdHkgPSBjYWxjT3BhY2l0eUZyb21Nb3VzZVBvcyhvdmVybGF5KTtcblx0XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3Mgb3BhY2l0eSBzbGlkZXIgY2hhbmdlXG5cdCAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdvcGFjaXR5IHNsaWRlcicsXG5cdCAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2hhbmdlJyxcblx0ICAgICAgICAgICAgZXZlbnRMYWJlbDogJ3tcIicgKyBsYXllci5uYW1lICsgJ1wiOiBcIicgKyBuZXdPcGFjaXR5ICsgJ1wifScsXG5cdCAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHQgICAgfSkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjYWxjT3BhY2l0eUZyb21Nb3VzZVBvcyhvdmVybGF5KSB7XG5cdCAgICB2YXIgeVBvcyA9IGQzLm1vdXNlKG92ZXJsYXkpWzFdO1xuXHQgICAgdmFyIG5ld09wYWNpdHkgPSBvcGFjaXR5U2NhbGUuaW52ZXJ0KHlQb3MpO1xuXHQgICAgcmV0dXJuIG5ld09wYWNpdHk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDMxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENyZWF0ZUxvZ287XG5cdC8qXG5cdCAgXCJsb2dvXCI6IHtcblx0ICAgIFwiaW1hZ2VcIjogXCJpbWdzL2xhbmRhdF9sb2dvX2JsdWUucG5nXCIsXG5cdCAgICBcImFsdFwiOiBcIkxvZ28gZm9yIHRoZSBMYW5EYXQgcHJvamVjdFwiLFxuXHQgICAgXCJsaW5rXCI6IFwiaHR0cHM6Ly9sYW5kYXQtZGV2Lm5lbWFjLm9yZ1wiLFxuXHQgICAgXCJsb2NhdGlvblwiOiBbXCJib3R0b21cIiwgXCJyaWdodFwiXVxuXHQgIH0sXG5cdCovXG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVMb2dvKGxvZ29kYXRhKSB7XG5cdCAgICBpZiAoIWxvZ29kYXRhLmltYWdlKSByZXR1cm47XG5cdFxuXHQgICAgdmFyIGxvZ29XcmFwcGVyID0gY3JlYXRlTG9nb1dyYXBwZXIoKTtcblx0ICAgIHZhciBsb2dvSW1hZ2UgPSBjcmVhdGVMb2dvSW1hZ2UobG9nb2RhdGEpO1xuXHQgICAgdmFyIGxvZ29MaW5rID0gbG9nb2RhdGEubGluayA/IGNyZWF0ZUxvZ29MaW5rKGxvZ29kYXRhLmxpbmspIDogbnVsbDtcblx0XG5cdCAgICBpZiAobG9nb0xpbmspIHtcblx0ICAgICAgICBsb2dvTGluay5hcHBlbmRDaGlsZChsb2dvSW1hZ2UpO1xuXHQgICAgICAgIGxvZ29XcmFwcGVyLmFwcGVuZENoaWxkKGxvZ29MaW5rKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbG9nb1dyYXBwZXIuYXBwZW5kQ2hpbGQobG9nb0ltYWdlKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaW5zZXJ0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUobG9nb2RhdGEubG9jYXRpb24pWzBdO1xuXHQgICAgdmFyIGV4aXN0aW5nQ2hpbGQgPSBpbnNlcnRFbGVtZW50LmZpcnN0Q2hpbGQ7XG5cdCAgICBpbnNlcnRFbGVtZW50Lmluc2VydEJlZm9yZShsb2dvV3JhcHBlciwgZXhpc3RpbmdDaGlsZCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUxvZ29XcmFwcGVyKCkge1xuXHQgICAgdmFyIGxvZ29XcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0ICAgIGQzLnNlbGVjdChsb2dvV3JhcHBlcikuY2xhc3NlZChcInByb2plY3QtbG9nb1wiLCB0cnVlKTtcblx0ICAgIHJldHVybiBsb2dvV3JhcHBlcjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlTG9nb0ltYWdlKGxvZ29kYXRhKSB7XG5cdCAgICB2YXIgbG9nb0ltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcblx0ICAgIGxvZ29JbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbG9nb2RhdGEuaW1hZ2UpO1xuXHQgICAgaWYgKGxvZ29kYXRhLmxhYmVsKSB7XG5cdCAgICAgICAgbG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcImFsdFwiLCBsb2dvZGF0YS5sYWJlbCk7XG5cdCAgICAgICAgbG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIGxvZ29kYXRhLmxhYmVsKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBsb2dvSW1hZ2U7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUxvZ29MaW5rKGxpbmspIHtcblx0ICAgIHZhciBsb2dvTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuXHQgICAgbG9nb0xpbmsuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBsaW5rKTtcblx0ICAgIGxvZ29MaW5rLnNldEF0dHJpYnV0ZShcInRhcmdldFwiLCBcIl9ibGFua1wiKTtcblx0XG5cdCAgICBsb2dvTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIGNsaWNraW5nIGxvZ29cblx0ICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdCAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiAnbGFuZGF0IGxvZ28nLFxuXHQgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICB9KTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHJldHVybiBsb2dvTGluaztcblx0fVxuXG4vKioqLyB9LFxuLyogMzIgKi8sXG4vKiAzMyAqLyxcbi8qIDM0ICovLFxuLyogMzUgKi8sXG4vKiAzNiAqLyxcbi8qIDM3ICovLFxuLyogMzggKi8sXG4vKiAzOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSxcbi8qIDQwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEJpbmRNb2JpbGVNZW51RXZlbnRzO1xuXHRmdW5jdGlvbiBCaW5kTW9iaWxlTWVudUV2ZW50cygpIHtcblx0ICAgIGQzLnNlbGVjdEFsbChcIi5tb2JpbGUtbWVudS1idXR0b25cIikub24oXCJjbGlja1wiLCBoYW5kbGVNb2JpbGVNZW51QnRuQ2xpY2spO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVNb2JpbGVNZW51QnRuQ2xpY2soKSB7XG5cdCAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChcIiN3cmFwcGVyXCIpO1xuXHQgICAgdmFyIHN0YXR1cyA9IHdyYXBwZXIuY2xhc3NlZChcIm1vYmlsZS1tZW51LWhpZGRlblwiKTtcblx0ICAgIHdyYXBwZXIuY2xhc3NlZChcIm1vYmlsZS1tZW51LWhpZGRlblwiLCAhc3RhdHVzKTtcblx0ICAgIGRpc3BhY3RNb2JpbGVNZW51QnRuQ2xpY2tBbmFseXRpY3MoIXN0YXR1cyA/IFwib3BlbmluZ1wiIDogXCJjbG9zaW5nXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkaXNwYWN0TW9iaWxlTWVudUJ0bkNsaWNrQW5hbHl0aWNzKHN0YXR1cykge1xuXHQgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21vYmlsZSBtZW51Jyxcblx0ICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0ICAgICAgICBldmVudExhYmVsOiAnTW9iaWxlIE1lbnUgJyArICFzdGF0dXMsXG5cdCAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICB9KTtcblx0fVxuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gaW5kZXhfYnVuZGxlLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgNGY1ZTRlOTMzMGJiMjNhZWUwYzEiLCJpbXBvcnQge1BhcnNlQ29uZmlnfSBmcm9tICcuL3BhcnNlcic7XG5pbXBvcnQgQ3JlYXRlU2VhcmNoIGZyb20gJy4vc2VhcmNoJztcbmltcG9ydCB7U2V0dXBQYW5lbH0gZnJvbSAnLi9wYW5lbCc7XG5pbXBvcnQge0NyZWF0ZUJhc2VMYXllcnN9IGZyb20gJy4vYmFzZWxheWVyJztcbmltcG9ydCB7U2V0dXBHcmFwaHMsIEJpbmRHcmFwaEV2ZW50cywgSGFuZGxlR3JhcGhUYWJDaGFuZ2V9IGZyb20gJy4vZ3JhcGgnXG5pbXBvcnQge0JpbmRUYWJFdmVudHMsIEhhbmRsZVRhYkNoYW5nZX0gZnJvbSAnLi90YWJzJ1xuaW1wb3J0IHtDcmVhdGVNYXB9IGZyb20gJy4vbWFwJ1xuaW1wb3J0IHtCaW5kVXBkYXRlU2hhcmVVcmwsIEFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZywgQmluZENvcHlMaW5rRXZlbnRzfSBmcm9tICcuL3NoYXJlJ1xuaW1wb3J0IHtDcmVhdGVEZWZhdWx0TGF5ZXJzfSBmcm9tICcuL2xheWVyJ1xuaW1wb3J0IENyZWF0ZUxvZ28gZnJvbSAnLi9sb2dvJztcbmltcG9ydCB7U2V0dXBQb2ludHNPZkludGVyZXN0fSBmcm9tICcuL3BvaSc7XG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tICcuL3NoYXJlJztcbmltcG9ydCBCaW5kTW9iaWxlTWVudUV2ZW50cyBmcm9tICcuL21vYmlsZSc7XG5cbnZhciBjc3MgPSByZXF1aXJlKCcuLi9jc3Mvc2Fzcy9sYW5kYXQuc2NzcycpXG5cbi8vIERvZXMgbm90IHJlbHkgb24gbWFwIG9iamVjdCBvciBjb25maWcgZmlsZVxudmFyIEJhc2UgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgUGFyc2VDb25maWcoY29uZmlnLCBjYWxsYmFjayk7XG4gICAgU2V0dXBHcmFwaHMoKTtcbiAgICBCaW5kVGFiRXZlbnRzKCk7XG4gICAgQmluZENvcHlMaW5rRXZlbnRzKCk7XG4gICAgQmluZE1vYmlsZU1lbnVFdmVudHMoKTtcbn1cblxuLy8gRG9lcyByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcbnZhciBjYWxsYmFjayA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnKGRhdGEpXG4gICAgdmFyIG1hcCA9IENyZWF0ZU1hcChkYXRhLm1hcCk7XG4gICAgQ3JlYXRlQmFzZUxheWVycyhtYXAsIGRhdGEuYmFzZWxheWVycyk7XG4gICAgQ3JlYXRlRGVmYXVsdExheWVycyhkYXRhLmxheWVycywgZGF0YVtcImFjdGl2ZS1sYXllcnNcIl0pO1xuICAgIFNldHVwUGFuZWwoZGF0YS5sYXllcnMsIGRhdGEubGF5b3V0KTtcbiAgICBDcmVhdGVTZWFyY2gobWFwKTtcbiAgICBDcmVhdGVMb2dvKGRhdGEubG9nbyk7XG4gICAgaWYgKGRhdGEudGFiKSBIYW5kbGVUYWJDaGFuZ2UoZGF0YS50YWIpO1xuICAgIGlmIChkYXRhLmdyYXBoKSBIYW5kbGVHcmFwaFRhYkNoYW5nZShkYXRhLmdyYXBoKTtcbiAgICBCaW5kR3JhcGhFdmVudHMobWFwKTtcbiAgICBCaW5kVXBkYXRlU2hhcmVVcmwobWFwKTtcbiAgICBTZXR1cFBvaW50c09mSW50ZXJlc3QobWFwLCBkYXRhLnBvaXMpXG4gICAgdXBkYXRlU2hhcmVVcmwoKVxufVxuXG53aW5kb3cuQmFzZSA9IEJhc2U7XG5cbmV4cG9ydCBkZWZhdWx0IHtCYXNlfTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2Jhc2UuanMiLCIvKipcbiAqIFBhcnNlcyBhIGNvbmZpZyBmaWxlLiBTaW5jZSB0aGUgcHJvY2VzcyB0byBnZXQgZXh0ZXJuYWwgZmlsZXNcbiAqIHVzZXMgQUpBWCB5b3UgbmVlZCB0byBwYXNzIGEgY2FsbGJhY2sgdG8gaGFuZGxlIHRoZSBuZXh0IHN0ZXBzXG4gKiBvZiB1c2luZyB0aGUgY29uZmlnIGZpbGUsIHNpbmNlIHdlIGRvIG5vdCBrbm93IGhvdyBsb25nIGl0XG4gKiB3aWxsIHRha2UgdG8gZ3JhYiB0aGUgZmlsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFBhcnNlQ29uZmlnIChjb25maWdGaWxlLCBjYWxsYmFjaykge1xuICAgIEdldENvbmZpZyhjb25maWdGaWxlLCBjYWxsYmFjayk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBHZXRBamF4T2JqZWN0KHJlc3BvbnNlSGFuZGxlcikge1xuICAgIHZhciB4bWxodHRwXG4gICAgaWYgKCF3aW5kb3cuWE1MSHR0cFJlcXVlc3QgJiYgd2luZG93LkFjdGl2ZVhPYmplY3QpIHtcbiAgICAgICAgeG1saHR0cCA9IG5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdChcIk1TWE1MMi5YTUxIVFRQLjMuMFwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuICAgIH1cbiAgICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHhtbGh0dHAucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgcmVzcG9uc2VIYW5kbGVyKHhtbGh0dHAucmVzcG9uc2UpXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHhtbGh0dHBcbn1cblxuZnVuY3Rpb24gR2V0Q29uZmlnIChjb25maWdGaWxlLCBjYWxsYmFjaykge1xuICAgIHZhciB4bWxodHRwID0gR2V0QWpheE9iamVjdChmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZUhhbmRsZXIocmVzcG9uc2UpXG4gICAgICAgIGNhbGxiYWNrKGRhdGEpXG4gICAgfSlcbiAgICB4bWxodHRwLm9wZW4oXCJHRVRcIiwgY29uZmlnRmlsZSwgdHJ1ZSk7XG4gICAgeG1saHR0cC5zZW5kKCk7XG4gICAgY29uc29sZS5sb2coXCJoaVwiKVxufVxuXG5mdW5jdGlvbiByZXNwb25zZUhhbmRsZXIgKHJlc3BvbnNlKSB7XG4gICAgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3BvbnNlKVxuICAgIGZvcm1hdE1hcChyZXNwb25zZSk7XG4gICAgZm9ybWF0TGF5ZXJzKHJlc3BvbnNlKTtcbiAgICByZXR1cm4gcmVzcG9uc2Vcbn1cblxuZnVuY3Rpb24gZm9ybWF0TWFwIChkYXRhKSB7XG4gICAgaWYgKCFkYXRhLm1hcCkgZGF0YS5tYXAgPSB7fTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TGF5ZXJzIChkYXRhKSB7XG4gICAgdmFyIGxheWVycyA9IGRhdGEubGF5ZXJzO1xuICAgIHZhciBkZWZhdWx0TWFwc2VydmVyVXJsID0gZGF0YS5tYXBzZXJ2ZXJVcmw7XG4gICAgdmFyIGRlZmF1bHRFbmFibGVkTGF5ZXJzID0gZGF0YVtcImFjdGl2ZS1sYXllcnNcIl07XG4gICAgdmFyIGxheWVyZ3JvdXA7XG4gICAgdmFyIGk7XG5cbiAgICBmb3IgKHZhciBwcm9wIGluIGxheWVycykge1xuICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xuICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGF5ZXJncm91cC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc2V0TWFwc2VydmVyVXJsKGxheWVyZ3JvdXBbaV0sIGRlZmF1bHRNYXBzZXJ2ZXJVcmwpO1xuICAgICAgICAgICAgc2V0RGVmYXVsdExheWVyT3BhY2l0eShsYXllcmdyb3VwW2ldLCBkYXRhLmRlZmF1bHRMYXllck9wYWNpdHkpXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNldERlZmF1bHRMYXllck9wYWNpdHkgKGxheWVyLCBvcGFjaXR5KSB7XG4gICAgbGF5ZXIub3BhY2l0eSA9IGxheWVyLm9wYWNpdHkgfHwgb3BhY2l0eVxufVxuXG5mdW5jdGlvbiBzZXRNYXBzZXJ2ZXJVcmwgKGxheWVyLCB1cmwpIHtcbiAgICBsYXllci51cmwgPSBsYXllci51cmwgfHwgdXJsO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvcGFyc2VyLmpzIiwiaW1wb3J0IHsgR2VvU2VhcmNoQ29udHJvbCwgT3BlblN0cmVldE1hcFByb3ZpZGVyIH0gZnJvbSAnbGVhZmxldC1nZW9zZWFyY2gnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDcmVhdGVTZWFyY2ggKG1hcCkge1xuICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IE9wZW5TdHJlZXRNYXBQcm92aWRlcigpO1xuXG4gICAgY29uc3Qgc2VhcmNoQ29udHJvbCA9IG5ldyBHZW9TZWFyY2hDb250cm9sKHtcbiAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLFxuICAgICAgICBzaG93TWFya2VyOiBmYWxzZSxcbiAgICAgICAgYXV0b0NvbXBsZXRlOiB0cnVlLFxuICAgICAgICBzaG93UG9wdXA6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgbWFwLmFkZENvbnRyb2woc2VhcmNoQ29udHJvbCk7XG5cbiAgICB2YXIgc2VhcmNoRWxlbWVudHMgPSBzZWFyY2hDb250cm9sLnNlYXJjaEVsZW1lbnQuZWxlbWVudHNcblxuICAgIEwuRG9tRXZlbnQub24oc2VhcmNoRWxlbWVudHMuY29udGFpbmVyLCBcImNsaWNrXCIsIGZ1bmN0aW9uIChldikge1xuICAgICAgICBMLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbihldik7XG5cbiAgICAgICAgdmFyIHNlYXJjaEVudHJpZXMgPSBzZWFyY2hFbGVtZW50cy5mb3JtXG4gICAgICAgICAgICAuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmVzdWx0cycpWzBdLmNoaWxkcmVuXG5cbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlYXJjaEVudHJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChldi50YXJnZXQgPT09IHNlYXJjaEVudHJpZXNbaV0pIHtcbiAgICAgICAgICAgICAgICBzZWFyY2hFbGVtZW50cy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBzZWFyY2ggYnkgYWRkcmVzc1xuICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdzZWFyY2gnLFxuICAgICAgICAgICAgZXZlbnRMYWJlbDogJ2NsaWNrJyxcbiAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgTC5Eb21FdmVudC5vbihzZWFyY2hFbGVtZW50cy5jb250YWluZXIsIFwia2V5ZG93blwiLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgTC5Eb21FdmVudC5zdG9wUHJvcGFnYXRpb24oZXYpO1xuXG4gICAgICAgIGlmIChldi53aGljaCA9PSAxMyB8fCBldi5rZXlDb2RlID09IDEzKSB7XG4gICAgICAgICAgICBzZWFyY2hFbGVtZW50cy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcblxuICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIHNlYWNyY2ggYnkgYWRkcmVzc1xuICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG4gICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG4gICAgICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdzZWFyY2ggYWRkcmVzcycsXG4gICAgICAgICAgICAgICAgZXZlbnRMYWJlbDogZXYudGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvc2VhcmNoLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2xlYWZsZXRDb250cm9sID0gcmVxdWlyZSgnLi9sZWFmbGV0Q29udHJvbCcpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0dlb1NlYXJjaENvbnRyb2wnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sZWFmbGV0Q29udHJvbCkuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfc2VhcmNoRWxlbWVudCA9IHJlcXVpcmUoJy4vc2VhcmNoRWxlbWVudCcpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1NlYXJjaEVsZW1lbnQnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2hFbGVtZW50KS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9iaW5nUHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9iaW5nUHJvdmlkZXInKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdCaW5nUHJvdmlkZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iaW5nUHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX2VzcmlQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL2VzcmlQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0VzcmlQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VzcmlQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfZ29vZ2xlUHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9nb29nbGVQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0dvb2dsZVByb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ29vZ2xlUHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX29wZW5TdHJlZXRNYXBQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL29wZW5TdHJlZXRNYXBQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ09wZW5TdHJlZXRNYXBQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29wZW5TdHJlZXRNYXBQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9wcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1Byb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL2luZGV4LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX25vZGVudFJ1bnRpbWUgPSByZXF1aXJlKCdub2RlbnQtcnVudGltZScpO1xuXG52YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IExlYWZsZXRDb250cm9sO1xuXG52YXIgX2xvZGFzaCA9IHJlcXVpcmUoJ2xvZGFzaC5kZWJvdW5jZScpO1xuXG52YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXG52YXIgX3NlYXJjaEVsZW1lbnQgPSByZXF1aXJlKCcuL3NlYXJjaEVsZW1lbnQnKTtcblxudmFyIF9zZWFyY2hFbGVtZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaEVsZW1lbnQpO1xuXG52YXIgX3Jlc3VsdExpc3QgPSByZXF1aXJlKCcuL3Jlc3VsdExpc3QnKTtcblxudmFyIF9yZXN1bHRMaXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Jlc3VsdExpc3QpO1xuXG52YXIgX2RvbVV0aWxzID0gcmVxdWlyZSgnLi9kb21VdGlscycpO1xuXG52YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBkZWZhdWx0T3B0aW9ucyA9IGZ1bmN0aW9uIGRlZmF1bHRPcHRpb25zKCkge1xuICByZXR1cm4ge1xuICAgIHBvc2l0aW9uOiAndG9wbGVmdCcsXG4gICAgc3R5bGU6ICdidXR0b24nLFxuICAgIHNob3dNYXJrZXI6IHRydWUsXG4gICAgc2hvd1BvcHVwOiBmYWxzZSxcbiAgICBtYXJrZXI6IHtcbiAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpLFxuICAgICAgZHJhZ2dhYmxlOiBmYWxzZVxuICAgIH0sXG4gICAgbWF4TWFya2VyczogMSxcbiAgICByZXRhaW5ab29tTGV2ZWw6IGZhbHNlLFxuICAgIGFuaW1hdGVab29tOiB0cnVlLFxuICAgIHNlYXJjaExhYmVsOiAnRW50ZXIgYWRkcmVzcycsXG4gICAgbm90Rm91bmRNZXNzYWdlOiAnU29ycnksIHRoYXQgYWRkcmVzcyBjb3VsZCBub3QgYmUgZm91bmQuJyxcbiAgICBtZXNzYWdlSGlkZURlbGF5OiAzMDAwLFxuICAgIHpvb21MZXZlbDogMTgsXG4gICAgY2xhc3NOYW1lczoge1xuICAgICAgY29udGFpbmVyOiAnbGVhZmxldC1iYXIgbGVhZmxldC1jb250cm9sIGxlYWZsZXQtY29udHJvbC1nZW9zZWFyY2gnLFxuICAgICAgYnV0dG9uOiAnbGVhZmxldC1iYXItcGFydCBsZWFmbGV0LWJhci1wYXJ0LXNpbmdsZScsXG4gICAgICBtc2dib3g6ICdsZWFmbGV0LWJhciBtZXNzYWdlJyxcbiAgICAgIGZvcm06ICcnLFxuICAgICAgaW5wdXQ6ICcnXG4gICAgfSxcbiAgICBhdXRvQ29tcGxldGU6IHRydWUsXG4gICAgYXV0b0NvbXBsZXRlRGVsYXk6IDI1MFxuICB9O1xufTtcblxudmFyIENvbnRyb2wgPSB7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUob3B0aW9ucykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB0aGlzLm1hcmtlcnMgPSBuZXcgTC5GZWF0dXJlR3JvdXAoKTtcblxuICAgIHRoaXMub3B0aW9ucyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0T3B0aW9ucygpLCBvcHRpb25zKTtcblxuICAgIHZhciBfb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgc3R5bGUgPSBfb3B0aW9ucy5zdHlsZSxcbiAgICAgICAgY2xhc3NOYW1lcyA9IF9vcHRpb25zLmNsYXNzTmFtZXMsXG4gICAgICAgIHNlYXJjaExhYmVsID0gX29wdGlvbnMuc2VhcmNoTGFiZWwsXG4gICAgICAgIGF1dG9Db21wbGV0ZSA9IF9vcHRpb25zLmF1dG9Db21wbGV0ZSxcbiAgICAgICAgYXV0b0NvbXBsZXRlRGVsYXkgPSBfb3B0aW9ucy5hdXRvQ29tcGxldGVEZWxheTtcblxuICAgIGlmIChzdHlsZSAhPT0gJ2J1dHRvbicpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5jbGFzc05hbWVzLmNvbnRhaW5lciArPSAnICcgKyBvcHRpb25zLnN0eWxlO1xuICAgIH1cblxuICAgIHRoaXMuc2VhcmNoRWxlbWVudCA9IG5ldyBfc2VhcmNoRWxlbWVudDIuZGVmYXVsdChfZXh0ZW5kcyh7fSwgdGhpcy5vcHRpb25zLCB7XG4gICAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChxdWVyeSkge1xuICAgICAgICByZXR1cm4gX3RoaXMub25TdWJtaXQocXVlcnkpO1xuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHZhciBfc2VhcmNoRWxlbWVudCRlbGVtZW4gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMsXG4gICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5jb250YWluZXIsXG4gICAgICAgIGZvcm0gPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uZm9ybSxcbiAgICAgICAgaW5wdXQgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uaW5wdXQ7XG5cbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9KTtcblxuICAgIHZhciBidXR0b24gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdhJywgY2xhc3NOYW1lcy5idXR0b24sIGNvbnRhaW5lcik7XG4gICAgYnV0dG9uLnRpdGxlID0gc2VhcmNoTGFiZWw7XG4gICAgYnV0dG9uLmhyZWYgPSAnIyc7XG5cbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25DbGljayhlKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICBpZiAoYXV0b0NvbXBsZXRlKSB7XG4gICAgICB0aGlzLnJlc3VsdExpc3QgPSBuZXcgX3Jlc3VsdExpc3QyLmRlZmF1bHQoe1xuICAgICAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2soX3JlZikge1xuICAgICAgICAgIHZhciByZXN1bHQgPSBfcmVmLnJlc3VsdDtcblxuICAgICAgICAgIGlucHV0LnZhbHVlID0gcmVzdWx0LmxhYmVsO1xuICAgICAgICAgIF90aGlzLm9uU3VibWl0KHsgcXVlcnk6IHJlc3VsdC5sYWJlbCB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGZvcm0uYXBwZW5kQ2hpbGQodGhpcy5yZXN1bHRMaXN0LmVsZW1lbnRzLmNvbnRhaW5lcik7XG5cbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKDAsIF9sb2Rhc2gyLmRlZmF1bHQpKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5hdXRvU2VhcmNoKGUpO1xuICAgICAgfSwgYXV0b0NvbXBsZXRlRGVsYXkpLCB0cnVlKTtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2VsZWN0UmVzdWx0KGUpO1xuICAgICAgfSwgdHJ1ZSk7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmNsZWFyUmVzdWx0cyhlKTtcbiAgICAgIH0sIHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudHMgPSB7IGJ1dHRvbjogYnV0dG9uIH07XG4gIH0sXG4gIG9uQWRkOiBmdW5jdGlvbiBvbkFkZChtYXApIHtcbiAgICB2YXIgX29wdGlvbnMyID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBzaG93TWFya2VyID0gX29wdGlvbnMyLnNob3dNYXJrZXIsXG4gICAgICAgIHN0eWxlID0gX29wdGlvbnMyLnN0eWxlO1xuXG5cbiAgICB0aGlzLm1hcCA9IG1hcDtcbiAgICBpZiAoc2hvd01hcmtlcikge1xuICAgICAgdGhpcy5tYXJrZXJzLmFkZFRvKG1hcCk7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlID09PSAnYmFyJykge1xuICAgICAgdmFyIGZvcm0gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuZm9ybTtcblxuICAgICAgdmFyIHJvb3QgPSBtYXAuZ2V0Q29udGFpbmVyKCkucXVlcnlTZWxlY3RvcignLmxlYWZsZXQtY29udHJvbC1jb250YWluZXInKTtcblxuICAgICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsICdsZWFmbGV0LWNvbnRyb2wtZ2Vvc2VhcmNoIGJhcicpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZvcm0pO1xuICAgICAgcm9vdC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgICAgdGhpcy5lbGVtZW50cy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5jb250YWluZXI7XG4gIH0sXG4gIG9uUmVtb3ZlOiBmdW5jdGlvbiBvblJlbW92ZSgpIHtcbiAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cbiAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICBjb250YWluZXIucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG4gIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIF9zZWFyY2hFbGVtZW50JGVsZW1lbjIgPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMsXG4gICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbjIuY29udGFpbmVyLFxuICAgICAgICBpbnB1dCA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbjIuaW5wdXQ7XG5cblxuICAgIGlmIChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgICBpbnB1dC5mb2N1cygpO1xuICAgIH1cbiAgfSxcbiAgc2VsZWN0UmVzdWx0OiBmdW5jdGlvbiBzZWxlY3RSZXN1bHQoZXZlbnQpIHtcbiAgICBpZiAoIVtfY29uc3RhbnRzLkFSUk9XX0RPV05fS0VZLCBfY29uc3RhbnRzLkFSUk9XX1VQX0tFWV0uaW5jbHVkZXMoZXZlbnQua2V5Q29kZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBpbnB1dCA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5pbnB1dDtcblxuXG4gICAgdmFyIGxpc3QgPSB0aGlzLnJlc3VsdExpc3Q7XG4gICAgdmFyIG1heCA9IHRoaXMucmVzdWx0TGlzdC5jb3VudCgpIC0gMTtcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gICAgdmFyIG5leHQgPSBldmVudC5jb2RlID09PSAnQXJyb3dEb3duJyA/IH5+bGlzdC5zZWxlY3RlZCArIDEgOiB+fmxpc3Quc2VsZWN0ZWQgLSAxO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuICAgIHZhciBpZHggPSBuZXh0IDwgMCA/IG1heCA6IG5leHQgPiBtYXggPyAwIDogbmV4dDtcblxuICAgIHZhciBpdGVtID0gbGlzdC5zZWxlY3QoaWR4KTtcbiAgICBpbnB1dC52YWx1ZSA9IGl0ZW0ubGFiZWw7XG4gIH0sXG4gIGNsZWFyUmVzdWx0czogZnVuY3Rpb24gY2xlYXJSZXN1bHRzKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgIT09IF9jb25zdGFudHMuRVNDQVBFX0tFWSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucmVzdWx0TGlzdC5jbGVhcigpO1xuICB9LFxuICBhdXRvU2VhcmNoOiBmdW5jdGlvbiBhdXRvU2VhcmNoKGV2ZW50KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgIHZhciBxdWVyeSwgcHJvdmlkZXIsIHJlc3VsdHM7XG5cbiAgICAgIGlmIChfY29uc3RhbnRzLlNQRUNJQUxfS0VZUy5pbmNsdWRlcyhldmVudC5rZXlDb2RlKSkge1xuICAgICAgICByZXR1cm4gJHJldHVybigpO1xuICAgICAgfVxuXG4gICAgICBxdWVyeSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgIHByb3ZpZGVyID0gdGhpcy5vcHRpb25zLnByb3ZpZGVyO1xuICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlYXJjaCh7IHF1ZXJ5OiBxdWVyeSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXG4gICAgICAgIHJlc3VsdHMgPSAkYXdhaXRfMTtcbiAgICAgICAgdGhpcy5yZXN1bHRMaXN0LnJlbmRlcihyZXN1bHRzKTtcbiAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcbiAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG4gIH0sXG4gIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdChxdWVyeSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG4gICAgICB2YXIgcHJvdmlkZXIsIHJlc3VsdHM7XG4gICAgICBwcm92aWRlciA9IHRoaXMub3B0aW9ucy5wcm92aWRlcjtcbiAgICAgIHJldHVybiBwcm92aWRlci5zZWFyY2gocXVlcnkpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG5cbiAgICAgICAgcmVzdWx0cyA9ICRhd2FpdF8yO1xuXG4gICAgICAgIGlmIChyZXN1bHRzICYmIHJlc3VsdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuc2hvd1Jlc3VsdChyZXN1bHRzWzBdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJHJldHVybigpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgfSxcbiAgc2hvd1Jlc3VsdDogZnVuY3Rpb24gc2hvd1Jlc3VsdChyZXN1bHQpIHtcbiAgICB2YXIgbWFya2VycyA9IE9iamVjdC5rZXlzKHRoaXMubWFya2Vycy5fbGF5ZXJzKTtcbiAgICBpZiAobWFya2Vycy5sZW5ndGggPj0gdGhpcy5vcHRpb25zLm1heE1hcmtlcnMpIHtcbiAgICAgIHRoaXMubWFya2Vycy5yZW1vdmVMYXllcihtYXJrZXJzWzBdKTtcbiAgICB9XG5cbiAgICB2YXIgbWFya2VyID0gdGhpcy5hZGRNYXJrZXIocmVzdWx0KTtcbiAgICB0aGlzLmNlbnRlck1hcChyZXN1bHQpO1xuXG4gICAgdGhpcy5tYXAuZmlyZUV2ZW50KCdnZW9zZWFyY2gvc2hvd2xvY2F0aW9uJywge1xuICAgICAgbG9jYXRpb246IHJlc3VsdCxcbiAgICAgIG1hcmtlcjogbWFya2VyXG4gICAgfSk7XG4gIH0sXG4gIGFkZE1hcmtlcjogZnVuY3Rpb24gYWRkTWFya2VyKHJlc3VsdCkge1xuICAgIHZhciBfb3B0aW9uczMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIG9wdGlvbnMgPSBfb3B0aW9uczMubWFya2VyLFxuICAgICAgICBzaG93UG9wdXAgPSBfb3B0aW9uczMuc2hvd1BvcHVwO1xuXG4gICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihbcmVzdWx0LnksIHJlc3VsdC54XSwgb3B0aW9ucyk7XG4gICAgbWFya2VyLmJpbmRQb3B1cChyZXN1bHQubGFiZWwpO1xuXG4gICAgdGhpcy5tYXJrZXJzLmFkZExheWVyKG1hcmtlcik7XG5cbiAgICBpZiAoc2hvd1BvcHVwKSB7XG4gICAgICBtYXJrZXIub3BlblBvcHVwKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hcmtlcjtcbiAgfSxcbiAgY2VudGVyTWFwOiBmdW5jdGlvbiBjZW50ZXJNYXAocmVzdWx0KSB7XG4gICAgdmFyIF9vcHRpb25zNCA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgcmV0YWluWm9vbUxldmVsID0gX29wdGlvbnM0LnJldGFpblpvb21MZXZlbCxcbiAgICAgICAgYW5pbWF0ZVpvb20gPSBfb3B0aW9uczQuYW5pbWF0ZVpvb207XG5cblxuICAgIHZhciByZXN1bHRCb3VuZHMgPSBuZXcgTC5MYXRMbmdCb3VuZHMocmVzdWx0LmJvdW5kcyk7XG4gICAgdmFyIGJvdW5kcyA9IHJlc3VsdEJvdW5kcy5pc1ZhbGlkKCkgPyByZXN1bHRCb3VuZHMgOiB0aGlzLm1hcmtlcnMuZ2V0Qm91bmRzKCk7XG5cbiAgICBpZiAoIXJldGFpblpvb21MZXZlbCAmJiByZXN1bHRCb3VuZHMuaXNWYWxpZCgpKSB7XG4gICAgICB0aGlzLm1hcC5maXRCb3VuZHMoYm91bmRzLCB7IGFuaW1hdGU6IGFuaW1hdGVab29tIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1hcC5zZXRWaWV3KGJvdW5kcy5nZXRDZW50ZXIoKSwgdGhpcy5nZXRab29tKCksIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG4gICAgfVxuICB9LFxuICBnZXRab29tOiBmdW5jdGlvbiBnZXRab29tKCkge1xuICAgIHZhciBfb3B0aW9uczUgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHJldGFpblpvb21MZXZlbCA9IF9vcHRpb25zNS5yZXRhaW5ab29tTGV2ZWwsXG4gICAgICAgIHpvb21MZXZlbCA9IF9vcHRpb25zNS56b29tTGV2ZWw7XG5cbiAgICByZXR1cm4gcmV0YWluWm9vbUxldmVsID8gdGhpcy5tYXAuZ2V0Wm9vbSgpIDogem9vbUxldmVsO1xuICB9XG59O1xuXG5mdW5jdGlvbiBMZWFmbGV0Q29udHJvbCgpIHtcbiAgaWYgKCFMIHx8ICFMLkNvbnRyb2wgfHwgIUwuQ29udHJvbC5leHRlbmQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0xlYWZsZXQgbXVzdCBiZSBsb2FkZWQgYmVmb3JlIGluc3RhbnRpYXRpbmcgdGhlIEdlb1NlYXJjaCBjb250cm9sJyk7XG4gIH1cblxuICB2YXIgTENvbnRyb2wgPSBMLkNvbnRyb2wuZXh0ZW5kKENvbnRyb2wpO1xuXG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBvcHRpb25zID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgb3B0aW9uc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KExDb250cm9sLCBbbnVsbF0uY29uY2F0KG9wdGlvbnMpKSkoKTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9sZWFmbGV0Q29udHJvbC5qcyIsIlwidXNlIHN0cmljdFwiO1xuLypcbiAqICRhc3luY2JpbmQgaGFzIG11bHRpcGxlIHVzZXMsIGRlcGVuZGluZyBvbiB0aGUgcGFyYW1ldGVyIGxpc3QuIEl0IGlzIGluIEZ1bmN0aW9uLnByb3RvdHlwZSwgc28gJ3RoaXMnIGlzIGFsd2F5cyBhIGZ1bmN0aW9uXG4gKlxuICogMSkgSWYgY2FsbGVkIHdpdGggYSBzaW5nbGUgYXJndW1lbnQgKHRoaXMpLCBpdCBpcyB1c2VkIHdoZW4gZGVmaW5pbmcgYW4gYXN5bmMgZnVuY3Rpb24gdG8gZW5zdXJlIHdoZW5cbiAqICAgICAgaXQgaXMgaW52b2tlZCwgdGhlIGNvcnJlY3QgJ3RoaXMnIGlzIHByZXNlbnQsIGp1c3QgbGlrZSBcImJpbmRcIi4gRm9yIGxlZ2FjeSByZWFzb25zLCAndGhpcycgaXMgZ2l2ZW5cbiAqICAgICAgYSBtZW1lYmVyICd0aGVuJyB3aGljaCByZWZlcnMgdG8gaXRzZWxmLlxuICogMikgSWYgY2FsbGVkIHdpdGggYSBzZWNvbmQgcGFyYW1ldGVyIChcImNhdGNoZXJcIikgYW5kIGNhdGNoZXIhPT10cnVlIGl0IGlzIGJlaW5nIHVzZWQgdG8gaW52b2tlIGFuIGFzeW5jXG4gKiAgICAgIGZ1bmN0aW9uIHdoZXJlIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIHRoZSBlcnJvciBjYWxsYmFjayAoZm9yIHN5bmMgZXhjZXB0aW9ucyBhbmQgdG8gYmUgcGFzc2VkIHRvXG4gKiAgICAgIG5lc3RlZCBhc3luYyBjYWxscylcbiAqIDMpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09dHJ1ZSwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG4gKiAgICAgIGluIGFuICdQcm9taXNlJyBhcyB3ZWxsIGJvdW5kIHRvICd0aGlzJy5cbiAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IFByb21pc2UodGhpcyknLCB3aGVyZSAndGhpcycgaXMgdGhlIGZ1bmN0aW9uIGJlaW5nIGJvdW5kL3dyYXBwZWRcbiAqIDQpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09MCwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG4gKiAgICAgIGluIGEgJ0xhenlUaGVuYWJsZScsIHdoaWNoIGV4ZWN1dGVzIGxhemlseSBhbmQgY2FuIHJlc29sdmUgc3luY2hyb25vdXNseS5cbiAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IExhenlUaGVuYWJsZSh0aGlzKScgKGlmIHN1Y2ggYSB0eXBlIHdlcmUgZXhwb3NlZCksIHdoZXJlICd0aGlzJyBpc1xuICogICAgICB0aGUgZnVuY3Rpb24gYmVpbmcgYm91bmQvd3JhcHBlZFxuICovXG5cbmZ1bmN0aW9uIHByb2Nlc3NJbmNsdWRlcyhpbmNsdWRlcyxpbnB1dCkge1xuICAgIHZhciBzcmMgPSBpbnB1dC50b1N0cmluZygpIDtcbiAgICB2YXIgdCA9IFwicmV0dXJuIFwiK3NyYyA7XG4gICAgdmFyIGFyZ3MgPSBzcmMubWF0Y2goLy4qXFwoKFteKV0qKVxcKS8pWzFdIDtcbiAgICB2YXIgcmUgPSAvWydcIl0hISEoW14nXCJdKilbJ1wiXS9nIDtcbiAgICB2YXIgbSA9IFtdIDtcbiAgICB3aGlsZSAoMSkge1xuICAgICAgICB2YXIgbXggPSByZS5leGVjKHQpIDtcbiAgICAgICAgaWYgKG14KVxuICAgICAgICAgICAgbS5wdXNoKG14KSA7XG4gICAgICAgIGVsc2UgYnJlYWsgO1xuICAgIH1cbiAgICBtLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe1xuICAgICAgICB0ID0gdC5zbGljZSgwLGUuaW5kZXgpK2luY2x1ZGVzW2VbMV1dK3Quc3Vic3RyKGUuaW5kZXgrZVswXS5sZW5ndGgpIDtcbiAgICB9KSA7XG4gICAgdCA9IHQucmVwbGFjZSgvXFwvXFwqW14qXSpcXCpcXC8vZywnICcpLnJlcGxhY2UoL1xccysvZywnICcpIDtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKGFyZ3MsdCkoKSA7XG59XG5cbnZhciAkYXN5bmNiaW5kID0gcHJvY2Vzc0luY2x1ZGVzKHtcbiAgICB6b3VzYW46cmVxdWlyZSgnLi96b3VzYW4nKS50b1N0cmluZygpLFxuICAgIHRoZW5hYmxlOnJlcXVpcmUoJy4vdGhlbmFibGVGYWN0b3J5JykudG9TdHJpbmcoKVxufSxcbmZ1bmN0aW9uICRhc3luY2JpbmQoc2VsZixjYXRjaGVyKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jYmluZCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLFwiJGFzeW5jYmluZFwiLHt2YWx1ZTokYXN5bmNiaW5kLGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6dHJ1ZX0pIDtcbiAgICB9XG5cbiAgICBpZiAoISRhc3luY2JpbmQudHJhbXBvbGluZSkge1xuICAgICAgJGFzeW5jYmluZC50cmFtcG9saW5lID0gZnVuY3Rpb24gdHJhbXBvbGluZSh0LHgscyxlLHUpe1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gYihxKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHEudGhlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHEudGhlbihiLCBlKSA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdT91bmRlZmluZWQ6cTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEucG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHEucG9wKCkgPyB4LmNhbGwodCkgOiBxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBzO1xuICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBxLmNhbGwodClcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAocikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUocik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICghJGFzeW5jYmluZC5MYXp5VGhlbmFibGUpIHtcbiAgICAgICAgJGFzeW5jYmluZC5MYXp5VGhlbmFibGUgPSAnISEhdGhlbmFibGUnKCk7XG4gICAgICAgICRhc3luY2JpbmQuRWFnZXJUaGVuYWJsZSA9ICRhc3luY2JpbmQuVGhlbmFibGUgPSAoJGFzeW5jYmluZC5FYWdlclRoZW5hYmxlRmFjdG9yeSA9ICchISF6b3VzYW4nKSgpO1xuICAgIH1cblxuICAgIHZhciByZXNvbHZlciA9IHRoaXM7XG4gICAgc3dpdGNoIChjYXRjaGVyKSB7XG4gICAgY2FzZSB0cnVlOlxuICAgICAgICByZXR1cm4gbmV3ICgkYXN5bmNiaW5kLlRoZW5hYmxlKShib3VuZFRoZW4pO1xuICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIG5ldyAoJGFzeW5jYmluZC5MYXp5VGhlbmFibGUpKGJvdW5kVGhlbik7XG4gICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICAgIC8qIEZvciBydW50aW1lIGNvbXBhdGliaWxpdHkgd2l0aCBOb2RlbnQgdjIueCwgcHJvdmlkZSBhIHRoZW5hYmxlICovXG4gICAgICAgIGJvdW5kVGhlbi50aGVuID0gYm91bmRUaGVuIDtcbiAgICAgICAgcmV0dXJuIGJvdW5kVGhlbiA7XG4gICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlci5hcHBseShzZWxmLGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9IGNhdGNoKGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhdGNoZXIoZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJvdW5kVGhlbigpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVyLmFwcGx5KHNlbGYsYXJndW1lbnRzKTtcbiAgICB9XG59KSA7XG5cbmZ1bmN0aW9uICRhc3luY3NwYXduKHByb21pc2VQcm92aWRlcixzZWxmKSB7XG4gICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jc3Bhd24pIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSxcIiRhc3luY3NwYXduXCIse3ZhbHVlOiRhc3luY3NwYXduLGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6dHJ1ZX0pIDtcbiAgICB9XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEZ1bmN0aW9uKSkgcmV0dXJuIDtcblxuICAgIHZhciBnZW5GID0gdGhpcyA7XG4gICAgcmV0dXJuIG5ldyBwcm9taXNlUHJvdmlkZXIoZnVuY3Rpb24gZW5vdWdoKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgZ2VuID0gZ2VuRi5jYWxsKHNlbGYsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAoZm4sYXJnKSB7XG4gICAgICAgICAgICB2YXIgbmV4dDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbmV4dCA9IGZuLmNhbGwoZ2VuLGFyZyk7XG4gICAgICAgICAgICAgICAgaWYobmV4dC5kb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlICE9PSByZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZSAmJiBuZXh0LnZhbHVlPT09bmV4dC52YWx1ZS50aGVuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0LnZhbHVlKHJlc29sdmUscmVqZWN0KSA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlICYmIHJlc29sdmUobmV4dC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gbnVsbCA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlLnRoZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dC52YWx1ZS50aGVuKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLm5leHQsdik7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLnRocm93LGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi5uZXh0LG5leHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgIHJlamVjdCAmJiByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgcmVqZWN0ID0gbnVsbCA7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0ZXAoZ2VuLm5leHQpO1xuICAgIH0pO1xufVxuXG4vLyBJbml0aWFsaXplIGFzeW5jIGJpbmRpbmdzXG4kYXN5bmNiaW5kKCkgO1xuJGFzeW5jc3Bhd24oKSA7XG5cbi8vIEV4cG9ydCBhc3luYyBiaW5kaW5nc1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgJGFzeW5jYmluZDokYXN5bmNiaW5kLFxuICAgICRhc3luY3NwYXduOiRhc3luY3NwYXduXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9ub2RlbnQtcnVudGltZS9ydW50aW1lLmpzIiwiLyogVGhpcyBjb2RlIGlzIGJhc2VkIG9uOlxuem91c2FuIC0gQSBMaWdodG5pbmcgRmFzdCwgWWV0IFZlcnkgU21hbGwgUHJvbWlzZSBBKyBDb21wbGlhbnQgSW1wbGVtZW50YXRpb25cbmh0dHBzOi8vZ2l0aHViLmNvbS9ibHVlamF2YS96b3VzYW5cbkF1dGhvcjogR2xlbm4gQ3Jvd25vdmVyIDxnbGVubkBibHVlamF2YS5jb20+IChodHRwOi8vd3d3LmJsdWVqYXZhLmNvbSlcblZlcnNpb24gMi4zLjNcbkxpY2Vuc2U6IE1JVCAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRpY2spe1xuICAgIHRpY2sgPSB0aWNrIHx8ICh0eXBlb2YgcHJvY2Vzcz09PVwib2JqZWN0XCIgJiYgcHJvY2Vzcy5uZXh0VGljaykgfHwgKHR5cGVvZiBzZXRJbW1lZGlhdGU9PT1cImZ1bmN0aW9uXCIgJiYgc2V0SW1tZWRpYXRlKSB8fCBmdW5jdGlvbihmKXtzZXRUaW1lb3V0KGYsMCl9O1xuICAgIHZhciBzb29uID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZxID0gW10sIGZxU3RhcnQgPSAwLCBidWZmZXJTaXplID0gMTAyNDtcbiAgICAgICAgZnVuY3Rpb24gY2FsbFF1ZXVlKCkge1xuICAgICAgICAgICAgd2hpbGUgKGZxLmxlbmd0aCAtIGZxU3RhcnQpIHtcbiAgICAgICAgICAgICAgICB0cnkgeyBmcVtmcVN0YXJ0XSgpIH0gY2F0Y2goZXgpIHsgLyogY29uc29sZS5lcnJvcihleCkgKi8gfVxuICAgICAgICAgICAgICAgIGZxW2ZxU3RhcnQrK10gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKGZxU3RhcnQgPT09IGJ1ZmZlclNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgZnEuc3BsaWNlKDAsIGJ1ZmZlclNpemUpO1xuICAgICAgICAgICAgICAgICAgICBmcVN0YXJ0ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICBmcS5wdXNoKGZuKTtcbiAgICAgICAgICAgIGlmIChmcS5sZW5ndGggLSBmcVN0YXJ0ID09PSAxKVxuICAgICAgICAgICAgICAgIHRpY2soY2FsbFF1ZXVlKTtcbiAgICAgICAgfTtcbiAgICB9KSgpO1xuXG4gICAgZnVuY3Rpb24gWm91c2FuKGZ1bmMpIHtcbiAgICAgICAgaWYgKGZ1bmMpIHtcbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgICAgICBmdW5jKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgICAgICAgICBtZS5yZXNvbHZlKGFyZyk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgICAgICAgbWUucmVqZWN0KGFyZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIFpvdXNhbi5wcm90b3R5cGUgPSB7XG4gICAgICAgIHJlc29sdmU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJBdHRlbXB0IHRvIHJlc29sdmUgcHJvbWlzZSB3aXRoIHNlbGZcIikpO1xuICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aGVuID0gdmFsdWUudGhlbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVuY3Rpb24gKHJhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJlc29sdmUocmEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5yZWplY3QocnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRlVMRklMTEVEO1xuICAgICAgICAgICAgdGhpcy52ID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAobWUuYylcbiAgICAgICAgICAgICAgICBzb29uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIGwgPSBtZS5jLmxlbmd0aDtuIDwgbDsgbisrKVxuICAgICAgICAgICAgICAgICAgICAgICAgU1RBVEVfRlVMRklMTEVEKG1lLmNbbl0sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9SRUpFQ1RFRDtcbiAgICAgICAgICAgIHRoaXMudiA9IHJlYXNvbjtcbiAgICAgICAgICAgIHZhciBjbGllbnRzID0gdGhpcy5jO1xuICAgICAgICAgICAgaWYgKGNsaWVudHMpXG4gICAgICAgICAgICAgICAgc29vbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCBsID0gY2xpZW50cy5sZW5ndGg7biA8IGw7IG4rKylcbiAgICAgICAgICAgICAgICAgICAgICAgIFNUQVRFX1JFSkVDVEVEKGNsaWVudHNbbl0sIHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHRoZW46IGZ1bmN0aW9uIChvbkYsIG9uUikge1xuICAgICAgICAgICAgdmFyIHAgPSBuZXcgWm91c2FuKCk7XG4gICAgICAgICAgICB2YXIgY2xpZW50ID0ge1xuICAgICAgICAgICAgICAgIHk6IG9uRixcbiAgICAgICAgICAgICAgICBuOiBvblIsXG4gICAgICAgICAgICAgICAgcDogcFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmMucHVzaChjbGllbnQpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jID0gW2NsaWVudF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcy5zdGF0ZSwgYSA9IHRoaXMudjtcbiAgICAgICAgICAgICAgICBzb29uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcyhjbGllbnQsIGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gU1RBVEVfRlVMRklMTEVEKGMsIGFyZykge1xuICAgICAgICBpZiAodHlwZW9mIGMueSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciB5cmV0ID0gYy55LmNhbGwodW5kZWZpbmVkLCBhcmcpO1xuICAgICAgICAgICAgICAgIGMucC5yZXNvbHZlKHlyZXQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgYy5wLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgIGMucC5yZXNvbHZlKGFyZyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gU1RBVEVfUkVKRUNURUQoYywgcmVhc29uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYy5uID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHlyZXQgPSBjLm4uY2FsbCh1bmRlZmluZWQsIHJlYXNvbik7XG4gICAgICAgICAgICAgICAgYy5wLnJlc29sdmUoeXJldCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjLnAucmVqZWN0KGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgYy5wLnJlamVjdChyZWFzb24pO1xuICAgIH1cblxuICAgIFpvdXNhbi5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICBpZiAodmFsICYmICh2YWwgaW5zdGFuY2VvZiBab3VzYW4pKVxuICAgICAgICAgICAgcmV0dXJuIHZhbCA7XG4gICAgICAgIHZhciB6ID0gbmV3IFpvdXNhbigpO1xuICAgICAgICB6LnJlc29sdmUodmFsKTtcbiAgICAgICAgcmV0dXJuIHo7XG4gICAgfTtcbiAgICBab3VzYW4ucmVqZWN0ID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoZXJyICYmIChlcnIgaW5zdGFuY2VvZiBab3VzYW4pKVxuICAgICAgICAgICAgcmV0dXJuIGVyciA7XG4gICAgICAgIHZhciB6ID0gbmV3IFpvdXNhbigpO1xuICAgICAgICB6LnJlamVjdChlcnIpO1xuICAgICAgICByZXR1cm4gejtcbiAgICB9O1xuXG4gICAgWm91c2FuLnZlcnNpb24gPSBcIjIuMy4zLW5vZGVudFwiIDtcbiAgICByZXR1cm4gWm91c2FuIDtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L25vZGVudC1ydW50aW1lL3pvdXNhbi5qcyIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ2YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcbn07XG5leHBvcnRzLmNsZWFyVGltZW91dCA9XG5leHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7XG4gIGlmICh0aW1lb3V0KSB7XG4gICAgdGltZW91dC5jbG9zZSgpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG4gIHRoaXMuX2lkID0gaWQ7XG4gIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xufVxuVGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbigpIHt9O1xuVGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdywgdGhpcy5faWQpO1xufTtcblxuLy8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5leHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcbiAgaWYgKG1zZWNzID49IDApIHtcbiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcbiAgICB9LCBtc2Vjcyk7XG4gIH1cbn07XG5cbi8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3RcbnJlcXVpcmUoXCJzZXRpbW1lZGlhdGVcIik7XG5leHBvcnRzLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L21haW4uanMiLCIoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm9cbiAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblxuICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG4gICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcbiAgICAgIH1cbiAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuICAgICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG4gICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcbiAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuKHRhc2spIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcbiAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG4gICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uXG4gICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcbiAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG4gICAgICAgICAgICAvLyBcInRvbyBtdWNoIHJlY3Vyc2lvblwiIGVycm9yLlxuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsgcnVuSWZQcmVzZW50KGhhbmRsZSk7IH0pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG4gICAgICAgIC8vIHdoZXJlIGBnbG9iYWwucG9zdE1lc3NhZ2VgIG1lYW5zIHNvbWV0aGluZyBjb21wbGV0ZWx5IGRpZmZlcmVudCBhbmQgY2FuJ3QgYmUgdXNlZCBmb3IgdGhpcyBwdXJwb3NlLlxuICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG9sZE9uTWVzc2FnZSA9IGdsb2JhbC5vbm1lc3NhZ2U7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShcIlwiLCBcIipcIik7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG4gICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG5cbiAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSBcInNldEltbWVkaWF0ZSRcIiArIE1hdGgucmFuZG9tKCkgKyBcIiRcIjtcbiAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cbiAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS5cbiAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG4gICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cbiAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG4gICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuICAgICAgICAvLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45XG4gICAgICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGNhblVzZVBvc3RNZXNzYWdlKCkpIHtcbiAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcbiAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcbiAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcbiAgICAgICAgLy8gRm9yIElFIDbigJM4XG4gICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG4gICAgfVxuXG4gICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuICAgIGF0dGFjaFRvLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG59KHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiID8gdHlwZW9mIGdsb2JhbCA9PT0gXCJ1bmRlZmluZWRcIiA/IHRoaXMgOiBnbG9iYWwgOiBzZWxmKSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9+L3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanMiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIGlzVGhlbmFibGUob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogJiYgKG9iaiBpbnN0YW5jZW9mIE9iamVjdCkgJiYgdHlwZW9mIG9iai50aGVuPT09XCJmdW5jdGlvblwiO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc29sdXRpb24ocCxyLGhvdykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLyogMi4yLjcuMSAqL1xuICAgICAgICAgICAgdmFyIHggPSBob3cgPyBob3cocik6ciA7XG5cbiAgICAgICAgICAgIGlmIChwPT09eCkgLyogMi4zLjEgKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gcC5yZWplY3QobmV3IFR5cGVFcnJvcihcIlByb21pc2UgcmVzb2x1dGlvbiBsb29wXCIpKSA7XG5cbiAgICAgICAgICAgIGlmIChpc1RoZW5hYmxlKHgpKSB7XG4gICAgICAgICAgICAgICAgLyogMi4zLjMgKi9cbiAgICAgICAgICAgICAgICB4LnRoZW4oZnVuY3Rpb24oeSl7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb24ocCx5KTtcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgICAgICAgICBwLnJlamVjdChlKVxuICAgICAgICAgICAgICAgIH0pIDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcC5yZXNvbHZlKHgpIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIC8qIDIuMi43LjIgKi9cbiAgICAgICAgICAgIHAucmVqZWN0KGV4KSA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDaGFpbmVkKCkge307XG4gICAgQ2hhaW5lZC5wcm90b3R5cGUgPSB7XG4gICAgICAgIHJlc29sdmU6X3VuY2hhaW5lZCxcbiAgICAgICAgcmVqZWN0Ol91bmNoYWluZWQsXG4gICAgICAgIHRoZW46dGhlbkNoYWluXG4gICAgfTtcbiAgICBmdW5jdGlvbiBfdW5jaGFpbmVkKHYpe31cbiAgICBmdW5jdGlvbiB0aGVuQ2hhaW4ocmVzLHJlail7XG4gICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlcztcbiAgICAgICAgdGhpcy5yZWplY3QgPSByZWo7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHRoZW4ocmVzLHJlail7XG4gICAgICAgIHZhciBjaGFpbiA9IG5ldyBDaGFpbmVkKCkgO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZXIoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNUaGVuYWJsZSh2YWx1ZSkgPyB2YWx1ZS50aGVuKHJlcyxyZWopIDogcmVzb2x1dGlvbihjaGFpbix2YWx1ZSxyZXMpO1xuICAgICAgICAgICAgfSxmdW5jdGlvbihleCkge1xuICAgICAgICAgICAgICAgIHJlc29sdXRpb24oY2hhaW4sZXgscmVqKSA7XG4gICAgICAgICAgICB9KSA7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uKGNoYWluLGV4LHJlaik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYWluIDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBUaGVuYWJsZShyZXNvbHZlcikge1xuICAgICAgICB0aGlzLl9yZXNvbHZlciA9IHJlc29sdmVyIDtcbiAgICAgICAgdGhpcy50aGVuID0gdGhlbiA7XG4gICAgfTtcblxuICAgIFRoZW5hYmxlLnJlc29sdmUgPSBmdW5jdGlvbih2KXtcbiAgICAgICAgcmV0dXJuIFRoZW5hYmxlLmlzVGhlbmFibGUodikgPyB2IDoge3RoZW46ZnVuY3Rpb24ocmVzb2x2ZSl7cmV0dXJuIHJlc29sdmUodil9fTtcbiAgICB9O1xuXG4gICAgVGhlbmFibGUuaXNUaGVuYWJsZSA9IGlzVGhlbmFibGUgO1xuXG4gICAgcmV0dXJuIFRoZW5hYmxlIDtcbn0gO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9ub2RlbnQtcnVudGltZS90aGVuYWJsZUZhY3RvcnkuanMiLCIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE5BTiA9IDAgLyAwO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG52YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblxuLyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cbnZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXG4vKipcbiAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAyLjQuMFxuICogQGNhdGVnb3J5IERhdGVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICogfSwgXy5ub3coKSk7XG4gKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuICovXG52YXIgbm93ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiByb290LkRhdGUubm93KCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG4gKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG4gKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cbiAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZVxuICogbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZFxuICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudFxuICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2BcbiAqIGludm9jYXRpb24uXG4gKlxuICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpc1xuICogaW52b2tlZCBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cbiAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAqXG4gKiBJZiBgd2FpdGAgaXMgYDBgIGFuZCBgbGVhZGluZ2AgaXMgYGZhbHNlYCwgYGZ1bmNgIGludm9jYXRpb24gaXMgZGVmZXJyZWRcbiAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cbiAqXG4gKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9kZWJvdW5jaW5nLXRocm90dGxpbmctZXhwbGFpbmVkLWV4YW1wbGVzLylcbiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XVxuICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG4gKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuICpcbiAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuICogICAnbGVhZGluZyc6IHRydWUsXG4gKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gKiB9KSk7XG4gKlxuICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cbiAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuICpcbiAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgZGVib3VuY2VkIGludm9jYXRpb24uXG4gKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgbGFzdEFyZ3MsXG4gICAgICBsYXN0VGhpcyxcbiAgICAgIG1heFdhaXQsXG4gICAgICByZXN1bHQsXG4gICAgICB0aW1lcklkLFxuICAgICAgbGFzdENhbGxUaW1lLFxuICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuICAgICAgbGVhZGluZyA9IGZhbHNlLFxuICAgICAgbWF4aW5nID0gZmFsc2UsXG4gICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcbiAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcbiAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcbiAgICB2YXIgYXJncyA9IGxhc3RBcmdzLFxuICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG4gICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgLy8gU3RhcnQgdGhlIHRpbWVyIGZvciB0aGUgdHJhaWxpbmcgZWRnZS5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuICAgIHJldHVybiBsZWFkaW5nID8gaW52b2tlRnVuYyh0aW1lKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbWFpbmluZ1dhaXQodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG4gICAgICAgIHJlc3VsdCA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcblxuICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cbiAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG4gICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuICAgIHJldHVybiAobGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgKHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQpIHx8XG4gICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCk7XG4gICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICB9XG4gICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG4gICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cbiAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cbiAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcbiAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuICAgIH1cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgIH1cbiAgICBsYXN0SW52b2tlVGltZSA9IDA7XG4gICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICByZXR1cm4gdGltZXJJZCA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogdHJhaWxpbmdFZGdlKG5vdygpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpLFxuICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXG4gICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG4gICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG5cbiAgICBpZiAoaXNJbnZva2luZykge1xuICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXhpbmcpIHtcbiAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcbiAgcmV0dXJuIGRlYm91bmNlZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9OdW1iZXIoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcbiAqIC8vID0+IEluZmluaXR5XG4gKlxuICogXy50b051bWJlcignMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIE5BTjtcbiAgfVxuICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICB9XG4gIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcbiAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG4gICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG4gICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL34vbG9kYXNoLmRlYm91bmNlL2luZGV4LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX25vZGVudFJ1bnRpbWUgPSByZXF1aXJlKCdub2RlbnQtcnVudGltZScpO1xuXG52YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuL2RvbVV0aWxzJyk7XG5cbnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFNlYXJjaEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFNlYXJjaEVsZW1lbnQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgX3JlZiRoYW5kbGVTdWJtaXQgPSBfcmVmLmhhbmRsZVN1Ym1pdCxcbiAgICAgICAgaGFuZGxlU3VibWl0ID0gX3JlZiRoYW5kbGVTdWJtaXQgPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uICgpIHt9IDogX3JlZiRoYW5kbGVTdWJtaXQsXG4gICAgICAgIF9yZWYkc2VhcmNoTGFiZWwgPSBfcmVmLnNlYXJjaExhYmVsLFxuICAgICAgICBzZWFyY2hMYWJlbCA9IF9yZWYkc2VhcmNoTGFiZWwgPT09IHVuZGVmaW5lZCA/ICdzZWFyY2gnIDogX3JlZiRzZWFyY2hMYWJlbCxcbiAgICAgICAgX3JlZiRjbGFzc05hbWVzID0gX3JlZi5jbGFzc05hbWVzLFxuICAgICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZWFyY2hFbGVtZW50KTtcblxuICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBbJ2dlb3NlYXJjaCcsIGNsYXNzTmFtZXMuY29udGFpbmVyXS5qb2luKCcgJykpO1xuICAgIHZhciBmb3JtID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZm9ybScsIFsnJywgY2xhc3NOYW1lcy5mb3JtXS5qb2luKCcgJyksIGNvbnRhaW5lcik7XG4gICAgdmFyIGlucHV0ID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnaW5wdXQnLCBbJ2dsYXNzJywgY2xhc3NOYW1lcy5pbnB1dF0uam9pbignICcpLCBmb3JtKTtcblxuICAgIGlucHV0LnR5cGUgPSAndGV4dCc7XG4gICAgaW5wdXQucGxhY2Vob2xkZXIgPSBzZWFyY2hMYWJlbDtcblxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uSW5wdXQoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uS2V5VXAoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uS2V5UHJlc3MoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uRm9jdXMoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25CbHVyKGUpO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIHRoaXMuZWxlbWVudHMgPSB7IGNvbnRhaW5lcjogY29udGFpbmVyLCBmb3JtOiBmb3JtLCBpbnB1dDogaW5wdXQgfTtcbiAgICB0aGlzLmhhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhTZWFyY2hFbGVtZW50LCBbe1xuICAgIGtleTogJ29uRm9jdXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkZvY3VzKCkge1xuICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKHRoaXMuZWxlbWVudHMuZm9ybSwgJ2FjdGl2ZScpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uQmx1cicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQmx1cigpIHtcbiAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKSh0aGlzLmVsZW1lbnRzLmZvcm0sICdhY3RpdmUnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvblN1Ym1pdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uU3VibWl0KGV2ZW50KSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgICB2YXIgX2VsZW1lbnRzLCBpbnB1dCwgY29udGFpbmVyO1xuXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIF9lbGVtZW50cyA9IHRoaXMuZWxlbWVudHMsIGlucHV0ID0gX2VsZW1lbnRzLmlucHV0LCBjb250YWluZXIgPSBfZWxlbWVudHMuY29udGFpbmVyO1xuXG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuICAgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZVN1Ym1pdCh7IHF1ZXJ5OiBpbnB1dC52YWx1ZSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuICAgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG4gICAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcbiAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uSW5wdXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbklucHV0KCkge1xuICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXG5cbiAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuICAgICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25LZXlVcCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5VXAoZXZlbnQpIHtcbiAgICAgIHZhciBfZWxlbWVudHMyID0gdGhpcy5lbGVtZW50cyxcbiAgICAgICAgICBjb250YWluZXIgPSBfZWxlbWVudHMyLmNvbnRhaW5lcixcbiAgICAgICAgICBpbnB1dCA9IF9lbGVtZW50czIuaW5wdXQ7XG5cblxuICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IF9jb25zdGFudHMuRVNDQVBFX0tFWSkge1xuICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cbiAgICAgICAgaW5wdXQudmFsdWUgPSAnJztcblxuICAgICAgICBkb2N1bWVudC5ib2R5LmZvY3VzKCk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYmx1cigpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uS2V5UHJlc3MnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleVByZXNzKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gX2NvbnN0YW50cy5FTlRFUl9LRVkpIHtcbiAgICAgICAgdGhpcy5vblN1Ym1pdChldmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2V0UXVlcnknLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRRdWVyeShxdWVyeSkge1xuICAgICAgdmFyIGlucHV0ID0gdGhpcy5lbGVtZW50cy5pbnB1dDtcblxuICAgICAgaW5wdXQudmFsdWUgPSBxdWVyeTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU2VhcmNoRWxlbWVudDtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gU2VhcmNoRWxlbWVudDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9zZWFyY2hFbGVtZW50LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xudmFyIGNyZWF0ZUVsZW1lbnQgPSBleHBvcnRzLmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KGVsZW1lbnQpIHtcbiAgdmFyIGNsYXNzTmFtZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnO1xuICB2YXIgcGFyZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsO1xuXG4gIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudCk7XG4gIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZXM7XG5cbiAgaWYgKHBhcmVudCkge1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XG4gIH1cblxuICByZXR1cm4gZWw7XG59O1xuXG52YXIgY3JlYXRlU2NyaXB0RWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlU2NyaXB0RWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZVNjcmlwdEVsZW1lbnQodXJsLCBjYikge1xuICB2YXIgc2NyaXB0ID0gY3JlYXRlRWxlbWVudCgnc2NyaXB0JywgbnVsbCwgZG9jdW1lbnQuYm9keSk7XG4gIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9qYXZhc2NyaXB0Jyk7XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgd2luZG93W2NiXSA9IGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICBzY3JpcHQucmVtb3ZlKCk7XG4gICAgICBkZWxldGUgd2luZG93W2NiXTtcbiAgICAgIHJlc29sdmUoanNvbik7XG4gICAgfTtcblxuICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHVybCk7XG4gIH0pO1xufTtcblxudmFyIGFkZENsYXNzTmFtZSA9IGV4cG9ydHMuYWRkQ2xhc3NOYW1lID0gZnVuY3Rpb24gYWRkQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICBpZiAoZWxlbWVudCAmJiAhZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICB9XG59O1xuXG52YXIgcmVtb3ZlQ2xhc3NOYW1lID0gZXhwb3J0cy5yZW1vdmVDbGFzc05hbWUgPSBmdW5jdGlvbiByZW1vdmVDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgfVxufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9kb21VdGlscy5qcyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xudmFyIEVOVEVSX0tFWSA9IGV4cG9ydHMuRU5URVJfS0VZID0gMTM7XG52YXIgRVNDQVBFX0tFWSA9IGV4cG9ydHMuRVNDQVBFX0tFWSA9IDI3O1xudmFyIEFSUk9XX0RPV05fS0VZID0gZXhwb3J0cy5BUlJPV19ET1dOX0tFWSA9IDQwO1xudmFyIEFSUk9XX1VQX0tFWSA9IGV4cG9ydHMuQVJST1dfVVBfS0VZID0gMzg7XG52YXIgQVJST1dfTEVGVF9LRVkgPSBleHBvcnRzLkFSUk9XX0xFRlRfS0VZID0gMzc7XG52YXIgQVJST1dfUklHSFRfS0VZID0gZXhwb3J0cy5BUlJPV19SSUdIVF9LRVkgPSAzOTtcblxudmFyIFNQRUNJQUxfS0VZUyA9IGV4cG9ydHMuU1BFQ0lBTF9LRVlTID0gW0VOVEVSX0tFWSwgRVNDQVBFX0tFWSwgQVJST1dfRE9XTl9LRVksIEFSUk9XX1VQX0tFWSwgQVJST1dfTEVGVF9LRVksIEFSUk9XX1JJR0hUX0tFWV07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvY29uc3RhbnRzLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX2RvbVV0aWxzID0gcmVxdWlyZSgnLi9kb21VdGlscycpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgY3ggPSBmdW5jdGlvbiBjeCgpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGNsYXNzbmFtZXMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBjbGFzc25hbWVzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIGNsYXNzbmFtZXMuam9pbignICcpLnRyaW0oKTtcbn07XG5cbnZhciBSZXN1bHRMaXN0ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBSZXN1bHRMaXN0KCkge1xuICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgX3JlZiRoYW5kbGVDbGljayA9IF9yZWYuaGFuZGxlQ2xpY2ssXG4gICAgICAgIGhhbmRsZUNsaWNrID0gX3JlZiRoYW5kbGVDbGljayA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZUNsaWNrLFxuICAgICAgICBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG4gICAgICAgIGNsYXNzTmFtZXMgPSBfcmVmJGNsYXNzTmFtZXMgPT09IHVuZGVmaW5lZCA/IHt9IDogX3JlZiRjbGFzc05hbWVzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlc3VsdExpc3QpO1xuXG4gICAgX2luaXRpYWxpc2VQcm9wcy5jYWxsKHRoaXMpO1xuXG4gICAgdGhpcy5wcm9wcyA9IHsgaGFuZGxlQ2xpY2s6IGhhbmRsZUNsaWNrLCBjbGFzc05hbWVzOiBjbGFzc05hbWVzIH07XG4gICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXG4gICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIGN4KCdyZXN1bHRzJywgY2xhc3NOYW1lcy5jb250YWluZXIpKTtcbiAgICB2YXIgcmVzdWx0SXRlbSA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIGN4KGNsYXNzTmFtZXMuaXRlbSkpO1xuXG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrLCB0cnVlKTtcbiAgICB0aGlzLmVsZW1lbnRzID0geyBjb250YWluZXI6IGNvbnRhaW5lciwgcmVzdWx0SXRlbTogcmVzdWx0SXRlbSB9O1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFJlc3VsdExpc3QsIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIHJlc3VsdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdO1xuICAgICAgdmFyIF9lbGVtZW50cyA9IHRoaXMuZWxlbWVudHMsXG4gICAgICAgICAgY29udGFpbmVyID0gX2VsZW1lbnRzLmNvbnRhaW5lcixcbiAgICAgICAgICByZXN1bHRJdGVtID0gX2VsZW1lbnRzLnJlc3VsdEl0ZW07XG5cbiAgICAgIHRoaXMuY2xlYXIoKTtcblxuICAgICAgcmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChyZXN1bHQsIGlkeCkge1xuICAgICAgICB2YXIgY2hpbGQgPSByZXN1bHRJdGVtLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKCdkYXRhLWtleScsIGlkeCk7XG4gICAgICAgIGNoaWxkLmlubmVySFRNTCA9IHJlc3VsdC5sYWJlbDtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZXN1bHRzID0gcmVzdWx0cztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZWxlY3QnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3QoaW5kZXgpIHtcbiAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbmZ1c2luZy1hcnJvd1xuXG4gICAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQsIGlkeCkge1xuICAgICAgICByZXR1cm4gaWR4ID09PSBpbmRleCA/ICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjaGlsZCwgJ2FjdGl2ZScpIDogKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJyk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5zZWxlY3RlZCA9IGluZGV4O1xuICAgICAgcmV0dXJuIHRoaXMucmVzdWx0c1tpbmRleF07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY291bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb3VudCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlc3VsdHMubGVuZ3RoO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NsZWFyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSAtMTtcblxuICAgICAgd2hpbGUgKGNvbnRhaW5lci5sYXN0Q2hpbGQpIHtcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5sYXN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFJlc3VsdExpc3Q7XG59KCk7XG5cbnZhciBfaW5pdGlhbGlzZVByb3BzID0gZnVuY3Rpb24gX2luaXRpYWxpc2VQcm9wcygpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB0aGlzLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgdGFyZ2V0ID0gX3JlZjIudGFyZ2V0O1xuXG4gICAgdmFyIGhhbmRsZUNsaWNrID0gX3RoaXMucHJvcHMuaGFuZGxlQ2xpY2s7XG4gICAgdmFyIGNvbnRhaW5lciA9IF90aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuXG4gICAgaWYgKHRhcmdldC5wYXJlbnROb2RlICE9PSBjb250YWluZXIgfHwgIXRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEta2V5JykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaWR4ID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKTtcbiAgICB2YXIgcmVzdWx0ID0gX3RoaXMucmVzdWx0c1tpZHhdO1xuICAgIGhhbmRsZUNsaWNrKHsgcmVzdWx0OiByZXN1bHQgfSk7XG4gIH07XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBSZXN1bHRMaXN0O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Jlc3VsdExpc3QuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbm9kZW50UnVudGltZSA9IHJlcXVpcmUoJ25vZGVudC1ydW50aW1lJyk7XG5cbnZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuLi9kb21VdGlscycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbCxcbiAgICAgICAgICBqc29ucCA9IF9yZWYuanNvbnA7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXG5cbiAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuICAgICAgICBxdWVyeTogcXVlcnksXG4gICAgICAgIGpzb25wOiBqc29ucFxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9kZXYudmlydHVhbGVhcnRoLm5ldC9SRVNUL3YxL0xvY2F0aW9ucz8nICsgcGFyYW1TdHJpbmc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncGFyc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXG4gICAgICBpZiAoZGF0YS5yZXNvdXJjZVNldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcy5tYXAoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiByLnBvaW50LmNvb3JkaW5hdGVzWzFdLFxuICAgICAgICAgIHk6IHIucG9pbnQuY29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgbGFiZWw6IHIuYWRkcmVzcy5mb3JtYXR0ZWRBZGRyZXNzLFxuICAgICAgICAgIGJvdW5kczogW1tyLmJib3hbMF0sIHIuYmJveFsxXV0sIC8vIHMsIHdcbiAgICAgICAgICBbci5iYm94WzJdLCByLmJib3hbM11dXSxcbiAgICAgICAgICByYXc6IHJcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NlYXJjaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmMykge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwganNvbnAsIHVybCwganNvbjtcbiAgICAgICAgcXVlcnkgPSBfcmVmMy5xdWVyeTtcblxuICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuXG4gICAgICAgIGpzb25wID0gJ0JJTkdfSlNPTlBfQ0JfJyArIERhdGUubm93KCk7XG4gICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCwganNvbnA6IGpzb25wIH0pO1xuXG4gICAgICAgIHJldHVybiAoMCwgX2RvbVV0aWxzLmNyZWF0ZVNjcmlwdEVsZW1lbnQpKHVybCwganNvbnApLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG4gICAgICAgICAganNvbiA9ICRhd2FpdF8xO1xuICAgICAgICAgIHJldHVybiAkcmV0dXJuKHRoaXMucGFyc2UoeyBkYXRhOiBqc29uIH0pKTtcbiAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm92aWRlcjtcbn0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2JpbmdQcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9ub2RlbnRSdW50aW1lID0gcmVxdWlyZSgnbm9kZW50LXJ1bnRpbWUnKTtcblxudmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2dldFBhcmFtU3RyaW5nJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFyYW1TdHJpbmcocGFyYW1zKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pO1xuICAgICAgfSkuam9pbignJicpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NlYXJjaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgICB2YXIgcXVlcnksIHByb3RvY29sLCB1cmwsIHJlcXVlc3QsIGpzb247XG4gICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeTtcblxuICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuICAgICAgICB1cmwgPSB0aGlzLmVuZHBvaW50KHsgcXVlcnk6IHF1ZXJ5LCBwcm90b2NvbDogcHJvdG9jb2wgfSk7XG5cbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcbiAgICAgICAgICByZXF1ZXN0ID0gJGF3YWl0XzE7XG4gICAgICAgICAgcmV0dXJuIHJlcXVlc3QuanNvbigpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG4gICAgICAgICAgICBqc29uID0gJGF3YWl0XzI7XG4gICAgICAgICAgICByZXR1cm4gJHJldHVybih0aGlzLnBhcnNlKHsgZGF0YToganNvbiB9KSk7XG4gICAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9wcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcbiAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblxuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZW5kcG9pbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG4gICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblxuXG4gICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcbiAgICAgICAgZjogJ2pzb24nLFxuICAgICAgICB0ZXh0OiBxdWVyeVxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9nZW9jb2RlLmFyY2dpcy5jb20vYXJjZ2lzL3Jlc3Qvc2VydmljZXMvV29ybGQvR2VvY29kZVNlcnZlci9maW5kPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHJldHVybiBkYXRhLmxvY2F0aW9ucy5tYXAoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiByLmZlYXR1cmUuZ2VvbWV0cnkueCxcbiAgICAgICAgICB5OiByLmZlYXR1cmUuZ2VvbWV0cnkueSxcbiAgICAgICAgICBsYWJlbDogci5uYW1lLFxuICAgICAgICAgIGJvdW5kczogW1tyLmV4dGVudC55bWluLCByLmV4dGVudC54bWluXSwgLy8gcywgd1xuICAgICAgICAgIFtyLmV4dGVudC55bWF4LCByLmV4dGVudC54bWF4XV0sXG4gICAgICAgICAgcmF3OiByXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9lc3JpUHJvdmlkZXIuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVyJyk7XG5cbnZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblxuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cblxuICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG4gICAgICAgIGFkZHJlc3M6IHF1ZXJ5XG4gICAgICB9KSk7XG5cbiAgICAgIC8vIGdvb2dsZSByZXF1aXJlcyBhIHNlY3VyZSBjb25uZWN0aW9uIHdoZW4gdXNpbmcgYXBpIGtleXNcbiAgICAgIHZhciBwcm90byA9IHBhcmFtcyAmJiBwYXJhbXMua2V5ID8gJ2h0dHBzOicgOiBwcm90b2NvbDtcbiAgICAgIHJldHVybiBwcm90byArICcvL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHJldHVybiBkYXRhLnJlc3VsdHMubWFwKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgeDogci5nZW9tZXRyeS5sb2NhdGlvbi5sbmcsXG4gICAgICAgICAgeTogci5nZW9tZXRyeS5sb2NhdGlvbi5sYXQsXG4gICAgICAgICAgbGFiZWw6IHIuZm9ybWF0dGVkX2FkZHJlc3MsXG4gICAgICAgICAgYm91bmRzOiBbW3IuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0LmxhdCwgci5nZW9tZXRyeS52aWV3cG9ydC5zb3V0aHdlc3QubG5nXSwgLy8gcywgd1xuICAgICAgICAgIFtyLmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0LmxuZ11dLFxuICAgICAgICAgIHJhdzogclxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXIuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVyJyk7XG5cbnZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblxuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cblxuICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG4gICAgICAgIGZvcm1hdDogJ2pzb24nLFxuICAgICAgICBxOiBxdWVyeVxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvc2VhcmNoPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHJldHVybiBkYXRhLm1hcChmdW5jdGlvbiAocikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IHIubG9uLFxuICAgICAgICAgIHk6IHIubGF0LFxuICAgICAgICAgIGxhYmVsOiByLmRpc3BsYXlfbmFtZSxcbiAgICAgICAgICBib3VuZHM6IFtbcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzBdKSwgcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzJdKV0sIC8vIHMsIHdcbiAgICAgICAgICBbcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzFdKSwgcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzNdKV1dLFxuICAgICAgICAgIHJhdzogclxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvb3BlblN0cmVldE1hcFByb3ZpZGVyLmpzIiwiaW1wb3J0IHt0b2dnbGVMYXllcn0gZnJvbSBcIi4vbGF5ZXJcIjtcbmltcG9ydCB7bWFrZU9wYWNpdHlTbGlkZXJ9IGZyb20gXCIuL29wYWNpdHlTbGlkZXJcIlxuaW1wb3J0IHtzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb259IGZyb20gXCIuL29wYWNpdHlTbGlkZXJcIlxuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSBcIi4vc2hhcmVcIjtcblxudmFyIGxheWVyR3JvdXBMYXlvdXQgPSBbXVxuXG5leHBvcnQgZnVuY3Rpb24gR2V0QWN0aXZlTGF5ZXJHcm91cHMgKCkge1xuICAgIHJldHVybiBsYXllckdyb3VwTGF5b3V0LmZpbHRlcihsYXllckdyb3VwID0+IHtcbiAgICAgICAgcmV0dXJuIGxheWVyR3JvdXAuYWN0aXZlXG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFNldHVwUGFuZWwgKGxheWVycywgbGF5b3V0KSB7XG4gICAgbGF5ZXJHcm91cExheW91dCA9IGxheW91dFsnbGF5ZXItZ3JvdXBzLW9yZGVyJ11cbiAgICB2YXIgbGF5ZXJHcm91cHMgPSBtYWtlTGF5ZXJHcm91cHMobGF5b3V0WydsYXllci1ncm91cHMtb3JkZXInXSk7XG4gICAgbWFrZUxheWVyRWxlbXMobGF5ZXJHcm91cHMsIGxheWVycyk7XG4gICAgbWFrZVBhbmVsRHJhZ2dhYmxlKClcbiAgICBzZXRQYW5lbFNjcm9sbEhhbmRsZXIoKVxufVxuXG5mdW5jdGlvbiBicm93c2VySXNJbnRlcm5ldEV4cGxvcmVyKCkge1xuICAgIHZhciB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50XG4gICAgcmV0dXJuIHVhLmluZGV4T2YoJ01TSUUnKSA+IC0xIHx8IHVhLmluZGV4T2YoJ3J2OjExLjAnKSA+IC0xXG59XG5cbmZ1bmN0aW9uIHNldFBhbmVsU2Nyb2xsSGFuZGxlcigpIHtcbiAgICB2YXIgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKVxuICAgIHBhbmVsLm9uc2Nyb2xsID0gdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodFxufVxuXG5mdW5jdGlvbiBtYWtlUGFuZWxEcmFnZ2FibGUoKSB7XG4gICAgaWYgKGJyb3dzZXJJc0ludGVybmV0RXhwbG9yZXIoKSkgcmV0dXJuXG5cbiAgICB2YXIgb3ZlcmxheSA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsLWRyYWctb3ZlcmxheScpXG5cbiAgICBvdmVybGF5LnN0eWxlKCdjdXJzb3InLCAnZXctcmVzaXplJylcblxuICAgIG92ZXJsYXkuY2FsbChkMy5kcmFnKClcbiAgICAgICAgLm9uKCdkcmFnJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBwYW5lbERyYWdFdmVudEhhbmRsZXIuY2FsbCh0aGlzKVxuICAgIH0pKTtcbn1cblxuZnVuY3Rpb24gcGFuZWxEcmFnRXZlbnRIYW5kbGVyKCkge1xuICAgIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKVxuICAgIHVwZGF0ZVBhbmVsV2lkdGgoKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCAoKSB7XG4gICAgdmFyIHBhbmVsID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwnKVxuICAgIHZhciBwYW5lbE9mZnNldEhlaWdodCA9IHBhbmVsLnByb3BlcnR5KCdvZmZzZXRIZWlnaHQnKVxuICAgIHZhciBwYW5lbERyYWdPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsLWRyYWctb3ZlcmxheScpXG4gICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbC1oZWFkZXInKVxuXG4gICAgdmFyIG5ld0hlaWdodFxuXG4gICAgaWYgKHBhbmVsLmNsYXNzZWQoJ2dyYXBocy1hY3RpdmUnKSkge1xuICAgICAgICB2YXIgZ3JhcGhMaXN0RXh0cmFTcGFjZSA9IDcwMFxuICAgICAgICB2YXIgZ3JhcGhMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyYXBoLWxpc3QnKVxuICAgICAgICBuZXdIZWlnaHQgPSBoZWFkZXIuc2Nyb2xsSGVpZ2h0ICsgZ3JhcGhMaXN0LnNjcm9sbEhlaWdodCArIGdyYXBoTGlzdEV4dHJhU3BhY2VcbiAgICB9XG4gICAgZWxzZSB7IC8vIHBhbmVsLmNsYXNzZWQoJ2xheWVycy1hY3RpdmUnKVxuICAgICAgICB2YXIgbGF5ZXJMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheWVyLWxpc3QnKVxuICAgICAgICBuZXdIZWlnaHQgPSBoZWFkZXIuc2Nyb2xsSGVpZ2h0ICsgbGF5ZXJMaXN0LnNjcm9sbEhlaWdodFxuICAgIH1cbiAgICBuZXdIZWlnaHQgPSBuZXdIZWlnaHQgPiBwYW5lbE9mZnNldEhlaWdodCA/IGAke25ld0hlaWdodH1gKydweCcgOiBudWxsXG4gICAgcGFuZWxEcmFnT3ZlcmxheS5zdHlsZS5oZWlnaHQgPSBuZXdIZWlnaHRcbn1cblxuZnVuY3Rpb24gdXBkYXRlUGFuZWxXaWR0aCgpIHtcbiAgICB2YXIgcGFuZWwgPSBkMy5zZWxlY3QoJyNyaWdodC1wYW5lbCcpXG4gICAgdmFyIHBhbmVsTWluV2lkdGggPSArcGFuZWwuc3R5bGUoJ21pbi13aWR0aCcpLnNsaWNlKDAsIC0yKVxuICAgIHZhciBwYW5lbENsaWVudFdpZHRoID0gcGFuZWwucHJvcGVydHkoJ2NsaWVudFdpZHRoJylcblxuICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyYXBwZXInKVxuICAgIHZhciB3cmFwcGVyV2lkdGggPSB3cmFwcGVyLmNsaWVudFdpZHRoXG5cbiAgICB2YXIgbWFwV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtd3JhcHBlcicpXG5cbiAgICB2YXIgbW91c2VYID0gZDMuZXZlbnQuc291cmNlRXZlbnQueFxuICAgIHZhciB4RGVsdGEgPSAod3JhcHBlcldpZHRoIC0gbW91c2VYKSAtIHBhbmVsQ2xpZW50V2lkdGhcblxuICAgIHZhciBuZXdQYW5lbFdpZHRoID0gcGFuZWxDbGllbnRXaWR0aCArIHhEZWx0YVxuICAgIG5ld1BhbmVsV2lkdGggPSBuZXdQYW5lbFdpZHRoIDwgcGFuZWxNaW5XaWR0aCA/XG4gICAgICAgIHBhbmVsTWluV2lkdGhcbiAgICA6ICAgbmV3UGFuZWxXaWR0aCA+IHdyYXBwZXJXaWR0aCA/XG4gICAgICAgIHdyYXBwZXJXaWR0aFxuICAgIDogICBuZXdQYW5lbFdpZHRoXG4gICAgbWFwV3JhcHBlci5zdHlsZS5wYWRkaW5nUmlnaHQgPSBgJHtuZXdQYW5lbFdpZHRofWArJ3B4J1xuICAgIHBhbmVsLnN0eWxlKCd3aWR0aCcsIGAke25ld1BhbmVsV2lkdGh9YCsncHgnKVxufVxuXG5mdW5jdGlvbiBtYWtlTGF5ZXJHcm91cHMgKGxheW91dCkge1xuICAgIHJldHVybiBkMy5zZWxlY3QoJyNsYXllci1saXN0JylcbiAgICAgICAgLnNlbGVjdEFsbCgnLmxheWVyLWdyb3VwLXdyYXBwZXInKVxuICAgICAgICAuZGF0YShsYXlvdXQpXG4gICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwLXdyYXBwZXInKVxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgbGF5ZXJHcm91cCA9PiBsYXllckdyb3VwLmlkKVxuICAgICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGxheWVyR3JvdXAgPT4gbGF5ZXJHcm91cC5hY3RpdmUpXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoJ2RpdicpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cC1idG4gYnRuJylcbiAgICAgICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvZ2dsZSB0aGUgbGF5ZXIgbGlzdCBhY2NvcmRpYW5zXG4gICAgICAgICAgICAgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2xheWVyIGxpc3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ3RvZ2dsZSAnICsgIWxheWVyR3JvdXAuYWN0aXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudExhYmVsOiBsYXllckdyb3VwLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyR3JvdXAuYWN0aXZlID0gIWxheWVyR3JvdXAuYWN0aXZlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMucGFyZW50Tm9kZSkuY2xhc3NlZCgnYWN0aXZlJywgKCkgPT4gbGF5ZXJHcm91cC5hY3RpdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVTaGFyZVVybCgpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KGxheWVyR3JvdXAubmFtZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cCcpO1xufVxuXG5mdW5jdGlvbiBtYWtlTGF5ZXJFbGVtcyAobGF5ZXJHcm91cHMsIGxheWVycykge1xuICAgIGxheWVyR3JvdXBzLnNlbGVjdEFsbCgnLmxheWVyLXNlbGVjdCcpXG4gICAgICAgIC5kYXRhKGxheWVyR3JvdXAgPT4gbGF5ZXJzW2xheWVyR3JvdXAuaWRdKVxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2RpdicpXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1zZWxlY3QnKVxuICAgICAgICAuZWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIHZhciBncm91cE5hbWUgPSB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZDtcbiAgICAgICAgICAgIHZhciBsYXllckRpdiA9IGQzLnNlbGVjdCh0aGlzKVxuICAgICAgICAgICAgbWFrZUNoZWNrYm94KGxheWVyLCBsYXllckRpdik7XG4gICAgICAgICAgICBtYWtlTGFiZWwobGF5ZXIsIGxheWVyRGl2KTtcbiAgICAgICAgICAgIG1ha2VEZXNjcmlwdGlvbihsYXllciwgbGF5ZXJEaXYpO1xuICAgICAgICAgICAgbGF5ZXJEaXYubm9kZSgpLmFwcGVuZENoaWxkKG1ha2VMYXllclRvb2xzKGxheWVyKSk7XG4gICAgICAgIH0pO1xufVxuXG5mdW5jdGlvbiBtYWtlQ2hlY2tib3ggKGxheWVyLCBsYXllckRpdikge1xuICAgIGxheWVyRGl2LmFwcGVuZCgnaW5wdXQnKVxuICAgICAgICAuYXR0cigndHlwZScsICdjaGVja2JveCcpXG4gICAgICAgIC5hdHRyKCdpZCcsIGxheWVyID0+IGxheWVyLmlkKVxuICAgICAgICAuYXR0cignY2hlY2tlZCcsIChsYXllcikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGxheWVyLmFjdGl2ZSA/ICdjaGVja2VkJyA6IG51bGw7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbihsYXllcikge1xuICAgICAgICAgICAgdG9nZ2xlTGF5ZXIobGF5ZXIpO1xuICAgICAgICAgICAgbGF5ZXJEaXYuc2VsZWN0KCcubGF5ZXItdG9vbHMtd3JhcHBlcicpXG4gICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGxheWVyLmFjdGl2ZSk7XG4gICAgICAgICAgICBpZiAobGF5ZXIuYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlckhhbmRsZSA9IGxheWVyRGl2LnNlbGVjdCgnLm9wYWNpdHktc2xpZGVyLWhhbmRsZScpLm5vZGUoKVxuICAgICAgICAgICAgICAgIHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbihsYXllciwgc2xpZGVySGFuZGxlLCBsYXllci5vcGFjaXRpeSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VMYWJlbChsYXllciwgbGF5ZXJEaXYpIHtcbiAgICBsYXllckRpdlxuICAgICAgICAuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWxhYmVsLXdyYXBwZXInKVxuICAgICAgICAuYXBwZW5kKCdsYWJlbCcpXG4gICAgICAgICAgICAuYXR0cignZm9yJywgbGF5ZXIgPT4gbGF5ZXIuaWQpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItbGFiZWwnKVxuICAgICAgICAgICAgLmh0bWwobGF5ZXIgPT4gbGF5ZXIubmFtZSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VEZXNjcmlwdGlvbiAobGF5ZXIsIGxheWVyRGl2KSB7XG4gICAgaWYgKGxheWVyLmluZm8gJiYgbGF5ZXIuaW5mbyAhPT0gJycpIHtcbiAgICAgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8tYnRuLXdyYXBwZXInKVxuICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKVxuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCcubGF5ZXItaW5mby13cmFwcGVyJylcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIGxheWVyIGluZm9cbiAgICAgICAgICAgICAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbGF5ZXIgaW5mbycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2tlZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6IGxheWVyLm5hbWUgKyBcIiBcIiArICFkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnYWN0aXZlJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFwcGVuZCgnaW1nJylcbiAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby1pY29uJylcbiAgICAgICAgICAgICAgICAuYXR0cignc3JjJywgJ2ltZ3MvbW9yZS1pbmZvLWljb24tNjR4NjQucG5nJylcbiAgICAgICAgICAgICAgICAuYXR0cihcImFsdFwiLCBcIlJlYWQgbW9yZSBhYm91dCB0aGUgXCIgKyBsYXllci5uYW1lICsgXCIgbGF5ZXJcIilcbiAgICAgICAgICAgICAgICAuYXR0cihcInRpdGxlXCIsIFwiUmVhZCBtb3JlIGFib3V0IHRoZSBcIiArIGxheWVyLm5hbWUgKyBcIiBsYXllclwiKVxuXG4gICAgICAgIGxheWVyRGl2LmFwcGVuZCgnZGl2JylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1pbmZvLXdyYXBwZXInKVxuICAgICAgICAgICAgLnRleHQobGF5ZXIgPT4gbGF5ZXIuaW5mbyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBtYWtlTGF5ZXJUb29scyhsYXllciwgbGF5ZXJEaXYpIHtcbiAgICB2YXIgbGF5ZXJUb29sc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgbGF5ZXJUb29sc0Rpdi5jbGFzc0xpc3QuYWRkKCdsYXllci10b29scy13cmFwcGVyJylcbiAgICBpZiAobGF5ZXIuYWN0aXZlKSBsYXllclRvb2xzRGl2LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG5cbiAgICB2YXIgb3BhY2l0eVNsaWRlciA9IG1ha2VPcGFjaXR5U2xpZGVyKGxheWVyKTtcbiAgICB2YXIgbGVnZW5kID0gbWFrZUxlZ2VuZChsYXllcik7XG5cbiAgICBsYXllclRvb2xzRGl2LmFwcGVuZENoaWxkKGxlZ2VuZClcbiAgICBsYXllclRvb2xzRGl2LmFwcGVuZENoaWxkKG9wYWNpdHlTbGlkZXIpXG5cbiAgICByZXR1cm4gbGF5ZXJUb29sc0RpdlxufVxuXG5mdW5jdGlvbiBtYWtlTGVnZW5kIChsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIpIHtcbiAgICB2YXIgbGVnZW5kV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdmFyIGxlZ2VuZEltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpXG4gICAgbGVnZW5kV3JhcHBlci5jbGFzc0xpc3QuYWRkKCdsZWdlbmQtd3JhcHBlcicpXG4gICAgbGVnZW5kSW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgbGF5ZXIubGVnZW5kKVxuICAgIGxlZ2VuZFdyYXBwZXIuYXBwZW5kQ2hpbGQobGVnZW5kSW1nKVxuICAgIHJldHVybiBsZWdlbmRXcmFwcGVyXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9wYW5lbC5qcyIsImltcG9ydCB7R2V0TWFwfSBmcm9tIFwiLi9tYXBcIjtcbmltcG9ydCB7dXBkYXRlU2hhcmVVcmx9IGZyb20gXCIuL3NoYXJlXCI7XG5cbi8qKlxuICogTmVlZGVkIGZvciB0aGUgc2hhcmUgdXJsIHNpbmNlIExlYWZsZXQgZG9lcyBub3QgaGF2ZSBhIGRlZmF1bHQgd2F5IHRvIHN1cmZhY2VcbiAqIHRoZSBvcmRlciBvZiBsYXllcnMgaW4gdGhlIG1hcFxuICovXG52YXIgX2N1cnJlbnRfbGF5ZXJzID0gW107XG52YXIgX2N1cnJlbnRfbGF5ZXJzX29iamVjdHMgPSBbXTtcblxuLyoqXG4gKiBOb3RlOiBsYXllciBpcyBub3QgdGhlIGxlYWZsZXQgY29uY2VwdCBvZiBhIGxheWVyLCBidXQgcmF0aGVyIHRoZSBpbnRlcm5hbFxuICogICAgICAgb2JqZWN0IHdoaWNoIHRyYWNrcyB0aGVtLiBsYXllci5tYXBMYXllciBpcyB0aGUgcG9pbnRlciB0byB0aGVcbiAqICAgICAgIGxlYWZsZXQgbGF5ZXIuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIEdldEN1cnJlbnRMYXllcnMgKCkge1xuICAgIHJldHVybiBfY3VycmVudF9sYXllcnM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDcmVhdGVEZWZhdWx0TGF5ZXJzIChsYXllcnMsIGRlZmF1bHRMYXllcnMpIHtcbiAgICB2YXIgaSwgaiwgcHJvcCwgbGF5ZXJncm91cDtcbiAgICB2YXIgZGVmYXVsdExheWVyO1xuICAgIHZhciBmb3VuZExheWVyO1xuXG4gICAgaWYgKCFkZWZhdWx0TGF5ZXJzIHx8IGRlZmF1bHRMYXllcnMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgZGVmYXVsdExheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3VuZExheWVyID0gZmFsc2U7XG4gICAgICAgIGRlZmF1bHRMYXllciA9IGRlZmF1bHRMYXllcnNbaV07XG4gICAgICAgIGZvciAocHJvcCBpbiBsYXllcnMpIHtcbiAgICAgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG4gICAgICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGxheWVyZ3JvdXAubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZGVmYXVsdExheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZUxheWVyKGxheWVyZ3JvdXBbal0pO1xuICAgICAgICAgICAgICAgICAgICBmb3VuZExheWVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlTGF5ZXIgKGxheWVyKSB7XG4gICAgaWYgKCFsYXllci5hY3RpdmUpIHtcbiAgICAgICAgZW5hYmxlTGF5ZXIobGF5ZXIpO1xuXG4gICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvZ2dsZSB0aGUgbGF5ZXIgb25cbiAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG4gICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2xheWVyJyxcbiAgICAgICAgICBldmVudEFjdGlvbjogJ3RvZ2dsZSBvbicsXG4gICAgICAgICAgZXZlbnRMYWJlbDogbGF5ZXIubmFtZSxcbiAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcbiAgICAgICAgfSk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICBkaXNhYmxlTGF5ZXIobGF5ZXIpO1xuXG4gICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvZ2dsZSB0aGUgbGF5ZXIgb2ZmXG4gICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdsYXllcicsXG4gICAgICAgICAgZXZlbnRBY3Rpb246ICd0b2dnbGUgb2ZmJyxcbiAgICAgICAgICBldmVudExhYmVsOiBsYXllci5uYW1lLFxuICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgICB9KTtcblxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZUxheWVyIChsYXllcikge1xuICAgIHZhciBtYXAgPSBHZXRNYXAoKTtcblxuICAgIGxheWVyLmFjdGl2ZSA9IHRydWU7XG4gICAgbGF5ZXIubWFwTGF5ZXIgPSBsYXllci5tYXBMYXllciB8fCBtYWtlV21zVGlsZUxheWVyKGxheWVyKTtcbiAgICBtYXAuYWRkTGF5ZXIobGF5ZXIubWFwTGF5ZXIpO1xuICAgIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xuICAgIG1vdmVPdmVybGF5TGF5ZXJzVG9Ub3AoKTtcbiAgICB1cGRhdGVTaGFyZVVybCgpO1xufVxuXG5mdW5jdGlvbiBtb3ZlT3ZlcmxheUxheWVyc1RvVG9wICgpIHtcbiAgICB2YXIgbGF5ZXI7XG4gICAgdmFyIGksIGw7XG5cbiAgICBmb3IgKGkgPSAwLCBsID0gX2N1cnJlbnRfbGF5ZXJzX29iamVjdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGxheWVyID0gX2N1cnJlbnRfbGF5ZXJzX29iamVjdHNbaV07XG4gICAgICAgIGlmIChsYXllci50eXBlID09PSBcIm92ZXJsYXlcIikgbGF5ZXIubWFwTGF5ZXIuYnJpbmdUb0Zyb250KCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhZGRMYXllclRvSW50ZXJuYWxUcmFja2VyIChsYXllcikge1xuICAgIF9jdXJyZW50X2xheWVycy5wdXNoKGxheWVyLmlkKTtcbiAgICBfY3VycmVudF9sYXllcnNfb2JqZWN0cy5wdXNoKGxheWVyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVMYXllciAobGF5ZXIpIHtcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XG5cbiAgICBsYXllci5hY3RpdmUgPSBmYWxzZTtcbiAgICBpZiAobGF5ZXIubWFwTGF5ZXIgJiYgbWFwLmhhc0xheWVyKGxheWVyLm1hcExheWVyKSkge1xuICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobGF5ZXIubWFwTGF5ZXIpO1xuICAgIH1cbiAgICByZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xuICAgIHVwZGF0ZVNoYXJlVXJsKCk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUxheWVyRnJvbUludGVybmFsVHJhY2tlciAobGF5ZXIpIHtcbiAgICB2YXIgbG9jID0gX2N1cnJlbnRfbGF5ZXJzLmluZGV4T2YobGF5ZXIuaWQpO1xuICAgIGlmIChsb2MgPT09IC0xKSByZXR1cm47XG4gICAgX2N1cnJlbnRfbGF5ZXJzLnNwbGljZShsb2MsIDEpO1xuICAgIF9jdXJyZW50X2xheWVyc19vYmplY3RzLnNwbGljZShsb2MsIDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTGF5ZXJPcGFjaXR5IChsYXllciwgbmV3T3BhY2l0eSkge1xuICAgIGxheWVyLm9wYWNpdHkgPSBuZXdPcGFjaXR5XG4gICAgbGF5ZXIubWFwTGF5ZXIuc2V0T3BhY2l0eShuZXdPcGFjaXR5KVxufVxuXG5mdW5jdGlvbiBtYWtlV21zVGlsZUxheWVyIChsYXllcikge1xuICAgIHJldHVybiBMLnRpbGVMYXllci53bXMobGF5ZXIudXJsLCB7XG4gICAgICAgIGxheWVyczogbGF5ZXIuaWQsXG4gICAgICAgIHRyYW5zcGFyZW50OiBsYXllci50cmFuc3BhcmVudCB8fCB0cnVlLFxuICAgICAgICB2ZXJzaW9uOiBsYXllci52ZXJzaW9uIHx8ICcxLjMuMCcsXG4gICAgICAgIGNyczogbGF5ZXIuY3JzIHx8IEwuQ1JTLkVQU0c5MDA5MTMsXG4gICAgICAgIGZvcm1hdDogbGF5ZXIuZm9ybWF0IHx8ICdpbWFnZS9wbmcnLFxuICAgICAgICBvcGFjaXR5OiBsYXllci5vcGFjaXR5IHx8IC43NSxcbiAgICAgICAgdGlsZVNpemU6IGxheWVyLnRpbGVTaXplIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwXCIpLmNsaWVudFdpZHRoXG4gICAgfSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9sYXllci5qcyIsInZhciBtYXA7XG5cbmV4cG9ydCBmdW5jdGlvbiBDcmVhdGVNYXAgKG1hcENvbmZpZykge1xuICAgIHZhciBpZCA9IG1hcENvbmZpZy5pZCB8fCBcIm1hcFwiO1xuICAgIHZhciBvcHRpb25zID0gbWFwQ29uZmlnLm9wdGlvbnMgfHwge1wic2Nyb2xsV2hlZWxab29tXCIgOiBmYWxzZX07XG4gICAgdmFyIGluaXRpYWxDZW50ZXIgPSBtYXBDb25maWcuY2VudGVyIHx8IFtcIjM4LjVcIiwgXCItODFcIl07XG4gICAgdmFyIGluaXRpYWxab29tID0gbWFwQ29uZmlnLnpvb20gfHwgNjtcblxuICAgIG1hcCA9IEwubWFwKGlkLCBvcHRpb25zKS5zZXRWaWV3KGluaXRpYWxDZW50ZXIsIGluaXRpYWxab29tKTtcbiAgICBMLmNvbnRyb2wuYXR0cmlidXRpb24oKS5hZGRUbyhtYXApXG5cbiAgICB2YXIgbGVhZmxldFpvb21JbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJsZWFmbGV0LWNvbnRyb2wtem9vbS1pblwiKVswXTtcblxuICAgIGxlYWZsZXRab29tSW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG4gICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3Igc2VhY3JjaCBieSBhZGRyZXNzXG4gICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG4gICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2sgYnV0dG9uJyxcbiAgICAgICAgZXZlbnRMYWJlbDogJ3pvb20gaW4nLFxuICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcbiAgICAgIH0pO1xuICAgIH0pXG5cbiAgICB2YXIgbGVhZmxldFpvb21PdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibGVhZmxldC1jb250cm9sLXpvb20tb3V0XCIpWzBdO1xuXG4gICAgbGVhZmxldFpvb21PdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG4gICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3Igc2VhY3JjaCBieSBhZGRyZXNzXG4gICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG4gICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2sgYnV0dG9uJyxcbiAgICAgICAgZXZlbnRMYWJlbDogJ3pvb20gb3V0JyxcbiAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgICB9KTtcbiAgICB9KVxuXG4gICAgbWFwLm9uKFwiZHJhZ2VuZFwiLCBmdW5jdGlvbihlKXtcbiAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBkcmFnIChwYW4pIGVuZFxuICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG4gICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuICAgICAgICBldmVudEFjdGlvbjogJ2RyYWcnLFxuICAgICAgICBldmVudExhYmVsOiBKU09OLnN0cmluZ2lmeShtYXAuZ2V0Qm91bmRzKCkpLFxuICAgICAgICBub25JbnRlcmFjdGlvbjogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSlcblxuICAgIG1hcC5vbihcInpvb21lbmRcIiwgZnVuY3Rpb24oZSl7XG4gICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3Igem9vbSBlbmRcbiAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcbiAgICAgICAgZXZlbnRBY3Rpb246ICd6b29tJyxcbiAgICAgICAgZXZlbnRMYWJlbDogSlNPTi5zdHJpbmdpZnkobWFwLmdldEJvdW5kcygpKSxcbiAgICAgICAgbm9uSW50ZXJhY3Rpb246IHRydWVcbiAgICAgIH0pO1xuICAgIH0pXG4gICAgcmV0dXJuIG1hcDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEdldE1hcCAoKSB7XG4gICAgcmV0dXJuIG1hcDtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL21hcC5qcyIsImltcG9ydCB7R2V0TWFwfSBmcm9tICcuL21hcCc7XG5pbXBvcnQge0JBU0VfTEFZRVJfVFlQRX0gZnJvbSAnLi9iYXNlbGF5ZXInO1xuaW1wb3J0IHtHZXRDdXJyZW50TGF5ZXJzfSBmcm9tICcuL2xheWVyJztcbmltcG9ydCB7R2V0QWxsUG9pbnRzT2ZJbnRlcmVzdH0gZnJvbSAnLi9wb2knO1xuaW1wb3J0IHtHZXRBY3RpdmVMYXllckdyb3Vwc30gZnJvbSAnLi9wYW5lbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBCaW5kVXBkYXRlU2hhcmVVcmwgKG1hcCkge1xuICAgIG1hcC5vbihcIm1vdmVlbmRcIiwgdXBkYXRlU2hhcmVVcmwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlU2hhcmVVcmwgKGUpIHtcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XG5cbiAgICB2YXIgcGFyYW1zID0gW1xuICAgICAgICBtYWtlQ2VudGVyU3RyaW5nKG1hcCksXG4gICAgICAgIG1ha2Vab29tU3RyaW5nKG1hcCksXG4gICAgICAgIG1ha2VMYXllclN0cmluZyhtYXApLFxuICAgICAgICBtYWtlTGF5ZXJHcm91cHNTdHJpbmcoKSxcbiAgICAgICAgbWFrZUJhc2VMYXllclN0cmluZyhtYXApLFxuICAgICAgICBtYWtlUG9pbnRzT2ZJbnRlcmVzdFN0cmluZygpLFxuICAgICAgICBtYWtlQWN0aXZlVGFiU3RyaW5nKCksXG4gICAgICAgIG1ha2VBY3RpdmVHcmFwaFRhYlN0cmluZygpXG4gICAgXTtcblxuICAgIHNldFNoYXJlVXJsKG1ha2VTaGFyZVVybChwYXJhbXMpKTtcbiAgICBzZXRDb3B5TGlua1VybCgpO1xuICAgIHNldFNvY2lhbFVybHMoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZyAoY29uZmlnKSB7XG4gICAgdmFyIHNoYXJlID0gcGFyc2VTaGFyZVVybCgpO1xuICAgIGlmICghc2hhcmUpIHJldHVybjtcbiAgICBpZiAoc2hhcmUuY2VudGVyKSBjb25maWcubWFwLmNlbnRlciA9IHNoYXJlLmNlbnRlcjtcbiAgICBpZiAoc2hhcmUuem9vbSkgY29uZmlnLm1hcC56b29tID0gc2hhcmUuem9vbTtcbiAgICBpZiAoc2hhcmUubGF5ZXJzKSBhZGRMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmUubGF5ZXJzLCBjb25maWcpO1xuICAgIGlmIChzaGFyZS5iYXNlbGF5ZXJzKSBhZGRCYXNlTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlLmJhc2VsYXllcnMsIGNvbmZpZyk7XG4gICAgaWYgKHNoYXJlLnBvaXMpIGFkZFBvaW50c09mSW50ZXJlc3RUb0NvbmZpZyhzaGFyZS5wb2lzLCBjb25maWcpXG4gICAgaWYgKHNoYXJlLnRhYikgY29uZmlnLnRhYiA9IHNoYXJlLnRhYjtcbiAgICBpZiAoc2hhcmUuZ3JhcGgpIGNvbmZpZy5ncmFwaCA9IHNoYXJlLmdyYXBoO1xuICAgIGlmIChzaGFyZS5sYXllckdyb3VwcykgY29uZmlnLmxheWVyR3JvdXBzID0gYWRkTGF5ZXJHcm91cFNldHRpbmdzVG9Db25maWcoc2hhcmUubGF5ZXJHcm91cHMsIGNvbmZpZylcbn1cblxuZnVuY3Rpb24gbWFrZVNoYXJlVXJsIChwYXJhbXMpIHtcbiAgICByZXR1cm4gXCI/XCIgKyBwYXJhbXMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwICE9PSB1bmRlZmluZWQgfSkuam9pbihcIiZcIik7XG59XG5cbmZ1bmN0aW9uIHNldFNoYXJlVXJsICh1cmwpIHtcbiAgICBpZiAod2luZG93Lmhpc3RvcnkgJiYgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKSB7XG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgXCJcIiwgdXJsKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNldENvcHlMaW5rVXJsICgpIHtcbiAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCB1cmwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQmluZENvcHlMaW5rRXZlbnRzICgpIHtcbiAgICBkMy5zZWxlY3QoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgaGFuZGxlQm9keUNsaWNrKTtcbiAgICBkMy5zZWxlY3QoXCIuc2hhcmV1cmwtbGluayBhXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlU2hhcmVMaW5rQnV0dG9uQ2xpY2spO1xuICAgIGQzLnNlbGVjdChcIi5zaGFyZXVybC1saW5rLXVybFwiKS5vbihcImNsaWNrXCIsIGhhbmRsZVNoYXJlTGlua1VybENsaWNrKTtcbiAgICBkMy5zZWxlY3QoXCIuc2hhcmV1cmwtbGluay1wb3B1cC1yZW1vdmVyXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlU2hhcmVMaW5rQ2xvc2VCdXR0b25DbGljayk7XG59XG5cbi8qKlxuICogU2hvdWxkIGNsb3NlIHRoZSBjb3B5IGxpbmsgcG9wdXAgaWYgaXQgaXMgYWN0aXZlIGFuZCBpZiB5b3UgY2xpY2sgb24gYW55IGVsZW1lbnRcbiAqIHRoYXQgaXMgbm90IHRoZSBwb3B1cCBvciBpdHMgY2hpbGRyZW4uXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZUJvZHlDbGljayAoKSB7XG4gICAgdmFyIGV2ZW50ID0gZDMuZXZlbnQ7XG4gICAgdmFyIG5vZGVQYXRoID0gW11cbiAgICBub2RlUGF0aCA9IGdldERvbVBhdGgoZXZlbnQudGFyZ2V0KVxuXG4gICAgdmFyIHRvQ2xvc2VQb3B1cCA9IHRydWU7XG4gICAgdmFyIGksIGw7XG5cbiAgICBmb3IgKGkgPSAwLCBsID0gbm9kZVBhdGgubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAobm9kZVBhdGhbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaGFyZXVybC1saW5rLXBvcHVwJykgfHxcbiAgICAgICAgICAgICAgICAgICAgbm9kZVBhdGhbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaGFyZXVybC1saW5rJykpIHtcbiAgICAgICAgICAgICAgICB0b0Nsb3NlUG9wdXAgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH0gICAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAvLyBjbGlja2luZyBzdmcgdGhyb3dzIGFuIGVycm9yIGluIElFXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodG9DbG9zZVBvcHVwKSB7XG4gICAgICAgIHZhciBzaGFyZVBvcHVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnc2hhcmV1cmwtbGluay1wb3B1cCcpLml0ZW0oMClcbiAgICAgICAgaGFuZGxlQ29weUxpbmtDbG9zZShzaGFyZVBvcHVwKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldERvbVBhdGgobm9kZSkge1xuICAgIHZhciBwYXRoID0gW11cbiAgICB3aGlsZSAobm9kZSAmJiBub2RlLnBhcmVudE5vZGUpIHtcbiAgICAgICAgcGF0aC5wdXNoKG5vZGUpXG4gICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGVcbiAgICB9XG4gICAgcmV0dXJuIHBhdGhcbn1cblxuZnVuY3Rpb24gaGFuZGxlU2hhcmVMaW5rQnV0dG9uQ2xpY2sgKCkge1xuICAgIHZhciBzaGFyZVBvcHVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNoYXJldXJsLWxpbmstcG9wdXBcIikuaXRlbSgwKVxuICAgIGlmIChkMy5zZWxlY3Qoc2hhcmVQb3B1cCkuY2xhc3NlZChcImFjdGl2ZVwiKSkge1xuICAgICAgICBoYW5kbGVDb3B5TGlua0Nsb3NlKHNoYXJlUG9wdXApXG4gICAgfSBlbHNlIHtcbiAgICAgICAgaGFuZGxlQ29weUxpbmtPcGVuKHNoYXJlUG9wdXApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlU2hhcmVMaW5rQ2xvc2VCdXR0b25DbGljayAoKSB7XG4gICAgdmFyIHNoYXJlUG9wdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2hhcmV1cmwtbGluay1wb3B1cFwiKS5pdGVtKDApXG4gICAgaGFuZGxlQ29weUxpbmtDbG9zZShzaGFyZVBvcHVwKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlU2hhcmVMaW5rVXJsQ2xpY2sgKCkge1xuICAgIHNlbGVjdENvcHlMaW5rVXJsKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNvcHlMaW5rT3BlbiAoc2hhcmVQb3B1cCkge1xuICAgIHNoYXJlUG9wdXAuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKVxuICAgIHNlbGVjdENvcHlMaW5rVXJsKCk7XG5cbiAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBldmVudCBjbGljayBvbiBzaGFyZSB1cmxcbiAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdzaGFyZXVybCcsXG4gICAgICBldmVudEFjdGlvbjogJ29wZW4nLFxuICAgICAgZXZlbnRMYWJlbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSxcbiAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgIH0pO1xuXG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNvcHlMaW5rQ2xvc2UgKHNoYXJlUG9wdXApIHtcblxuICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGNsaWNrIG9uIHNoYXJlIHVybCBjbG9zZVxuICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgZXZlbnRDYXRlZ29yeTogJ3NoYXJldXJsJyxcbiAgICAgIGV2ZW50QWN0aW9uOiAnY2xvc2UnLFxuICAgICAgZXZlbnRMYWJlbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSxcbiAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgIH0pO1xuXG4gICAgc2hhcmVQb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXG59XG5cbmZ1bmN0aW9uIHNlbGVjdENvcHlMaW5rVXJsICgpIHtcbiAgICB2YXIgc2hhcmVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hhcmV1cmwtbGluay11cmxcIik7XG4gICAgc2hhcmVJbnB1dC5mb2N1cygpO1xuICAgIHNoYXJlSW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgc2hhcmVJbnB1dC52YWx1ZS5sZW5ndGgpO1xufVxuXG5mdW5jdGlvbiBzZXRTb2NpYWxVcmxzICgpIHtcbiAgICB2YXIgdXJsID0gbWFuZ2xlUGFyYW1TdHJpbmcod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgIHZhciBzb2NpYWxMaW5rcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaGFyZXVybC1zb2NpYWxcIik7XG4gICAgdmFyIHNvY2lhbExpbms7XG4gICAgdmFyIG5ld1VybDtcbiAgICB2YXIgaSwgbDtcblxuICAgIGZvciAoaSA9IDAsIGwgPSBzb2NpYWxMaW5rcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgc29jaWFsTGluayA9IHNvY2lhbExpbmtzW2ldO1xuXG4gICAgICAgIG5ld1VybCA9IHNvY2lhbExpbmsuZ2V0QXR0cmlidXRlKFwiZGF0YS1iYXNldXJsXCIpICsgdXJsO1xuICAgICAgICBzb2NpYWxMaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgbmV3VXJsKTtcblxuICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBldmVudCBmb3Igc29jaWFsIHVybHNcbiAgICAgICAgc29jaWFsTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG4gICAgICAgICAgICBldmVudENhdGVnb3J5OiAnc2hhcmV1cmwnLFxuICAgICAgICAgICAgZXZlbnRBY3Rpb246IHRoaXMuZ2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiKSxcbiAgICAgICAgICAgIGV2ZW50TGFiZWw6IHRoaXMuaHJlZixcbiAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuXG4gICAgfVxufVxuXG5mdW5jdGlvbiBtYWtlQ2VudGVyU3RyaW5nIChtYXApIHtcbiAgICB2YXIgY2VudGVyID0gbWFwLmdldENlbnRlcigpO1xuICAgIHJldHVybiBcImNlbnRlcj1cIiArIGNlbnRlci5sYXQudG9TdHJpbmcoKSArIFwiLFwiICsgY2VudGVyLmxuZy50b1N0cmluZygpO1xufVxuXG5mdW5jdGlvbiBtYWtlWm9vbVN0cmluZyAobWFwKSB7XG4gICAgcmV0dXJuIFwiem9vbT1cIiArIG1hcC5nZXRab29tKCk7XG59XG5cbmZ1bmN0aW9uIG1ha2VMYXllclN0cmluZyAobWFwKSB7XG4gICAgdmFyIGxheWVycyA9IFtdO1xuICAgIHZhciBvcGFjaXR5VmFscyA9IHt9O1xuICAgIHZhciBjdXJyZW50TGF5ZXJzID0gR2V0Q3VycmVudExheWVycygpO1xuXG4gICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBsYXllci5vcHRpb25zO1xuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxheWVycykge1xuICAgICAgICAgICAgb3BhY2l0eVZhbHNbb3B0aW9ucy5sYXllcnNdID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShcIm9wYWNpdHlcIikgPyBvcHRpb25zLm9wYWNpdHkgOiBcIjFcIjtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIGN1cnJlbnRMYXllcjtcbiAgICB2YXIgaTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgY3VycmVudExheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjdXJyZW50TGF5ZXIgPSBjdXJyZW50TGF5ZXJzW2ldO1xuICAgICAgICBsYXllcnMucHVzaChjdXJyZW50TGF5ZXIpO1xuICAgICAgICBsYXllcnMucHVzaChvcGFjaXR5VmFsc1tjdXJyZW50TGF5ZXJdKTtcbiAgICB9XG4gICAgcmV0dXJuIFwibGF5ZXJzPVwiICsgbGF5ZXJzLmpvaW4oXCIsXCIpO1xufVxuXG5mdW5jdGlvbiBtYWtlQmFzZUxheWVyU3RyaW5nIChtYXApIHtcbiAgICB2YXIgbGF5ZXJzID0gW107XG4gICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMgJiYgbGF5ZXIub3B0aW9ucy50eXBlID09PSBCQVNFX0xBWUVSX1RZUEUpIHtcbiAgICAgICAgICAgIGxheWVycy5wdXNoKGxheWVyLm9wdGlvbnMuaWQpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIFwiYmFzZWxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcbn1cblxuZnVuY3Rpb24gbWFrZUxheWVyR3JvdXBzU3RyaW5nICgpIHtcbiAgICB2YXIgYWN0aXZlTGF5ZXJHcm91cHMgPSBHZXRBY3RpdmVMYXllckdyb3VwcygpXG4gICAgcmV0dXJuIFwibGF5ZXJHcm91cHM9XCIrYWN0aXZlTGF5ZXJHcm91cHMubWFwKGQgPT4gZC5pZCkuam9pbignLCcpXG59XG5cbmZ1bmN0aW9uIG1ha2VQb2ludHNPZkludGVyZXN0U3RyaW5nICgpIHtcbiAgICB2YXIgcG9pcyA9IEdldEFsbFBvaW50c09mSW50ZXJlc3QoKVxuICAgIGlmICghcG9pcy5sZW5ndGgpIHJldHVyblxuICAgIHZhciBwb2lTdHJpbmcgPSBcInBvaXM9XCJcbiAgICBwb2lzLmZvckVhY2gocG9pID0+IHtcbiAgICAgICAgcG9pU3RyaW5nICs9IHBvaS5sYXQgKyAnLCcgKyBwb2kubG5nICsgJzsnXG4gICAgfSlcbiAgICByZXR1cm4gcG9pU3RyaW5nXG59XG5cbmZ1bmN0aW9uIG1ha2VBY3RpdmVUYWJTdHJpbmcgKCkge1xuICAgIHJldHVybiBcInRhYj1cIiArIGQzLnNlbGVjdChcIi5wYW5lbC10b3AtYnRuLmFjdGl2ZVwiKS5hdHRyKFwiZGF0YS1hY3RpdmVcIik7XG59XG5cbmZ1bmN0aW9uIG1ha2VBY3RpdmVHcmFwaFRhYlN0cmluZyAoKSB7XG4gICAgcmV0dXJuIFwiZ3JhcGg9XCIgKyBkMy5zZWxlY3QoXCIuZ3JhcGgtdHlwZS1idG4uYWN0aXZlXCIpLmF0dHIoXCJkYXRhLXR5cGVcIik7XG59XG5cbmZ1bmN0aW9uIHBhcnNlU2hhcmVVcmwgKCkge1xuICAgIHZhciBwYXJhbXMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xuICAgIGlmIChwYXJhbXMgPT09IFwiXCIpIHJldHVybjtcblxuICAgIHBhcmFtcyA9IGdldFBhcmFtc0FycmF5KHBhcmFtcyk7XG4gICAgcGFyYW1zID0gbWFrZUtleWVkUGFyYW1zT2JqZWN0KHBhcmFtcyk7XG5cbiAgICBmb3JtYXRQYXJhbXMocGFyYW1zKTtcbiAgICByZXR1cm4gcGFyYW1zO1xufVxuXG5mdW5jdGlvbiBnZXRQYXJhbXNBcnJheSAocGFyYW1zKSB7XG4gICAgcGFyYW1zID0gcGFyYW1zLnN1YnN0cmluZygxKTtcbiAgICBwYXJhbXMgPSB1bm1hbmdsZVBhcmFtU3RyaW5nKHBhcmFtcyk7XG4gICAgcmV0dXJuIHBhcmFtcy5zcGxpdChcIiZcIik7XG59XG5cbmZ1bmN0aW9uIG1hbmdsZVBhcmFtU3RyaW5nICh1cmwpIHtcbiAgICByZXR1cm4gdXJsLnJlcGxhY2UoL1xcOi9nLCBcIiUzQVwiKVxuICAgICAgICAucmVwbGFjZSgvXFw7L2csIFwiJTNCXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXC8vZywgXCIlMkZcIilcbiAgICAgICAgLnJlcGxhY2UoL1xcLC9nLCBcIiUyQ1wiKVxuICAgICAgICAucmVwbGFjZSgvXFwmL2csIFwiJTI2XCIpO1xufVxuXG5mdW5jdGlvbiB1bm1hbmdsZVBhcmFtU3RyaW5nIChwYXJhbXMpIHtcbiAgICByZXR1cm4gcGFyYW1zLnJlcGxhY2UoL1xcJTJbY3xDXS9nLCBcIixcIikucmVwbGFjZSgvXFwlM1tifEJdL2csIFwiO1wiKVxufVxuXG5mdW5jdGlvbiBtYWtlS2V5ZWRQYXJhbXNPYmplY3QgKHBhcmFtc0Fycikge1xuICAgIHZhciBwYXJzZWRQYXJhbXMgPSB7fTtcbiAgICB2YXIgcGFyYW1QYWlyO1xuICAgIHZhciBpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHBhcmFtc0Fyci5sZW5ndGg7IGkrKykge1xuICAgICAgICBwYXJhbVBhaXIgPSBwYXJhbXNBcnJbaV0uc3BsaXQoXCI9XCIpO1xuICAgICAgICBwYXJzZWRQYXJhbXNbcGFyYW1QYWlyWzBdXSA9IHBhcmFtUGFpclsxXVxuICAgIH1cblxuICAgIHJldHVybiBwYXJzZWRQYXJhbXM7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFBhcmFtcyAocGFyYW1zKSB7XG4gICAgaWYgKHBhcmFtcy5jZW50ZXIpIHBhcmFtcy5jZW50ZXIgPSBmb3JtYXRDZW50ZXJQYXJhbShwYXJhbXMuY2VudGVyKTtcbiAgICBpZiAocGFyYW1zLmxheWVycykgcGFyYW1zLmxheWVycyA9IGZvcm1hdExheWVyUGFyYW0ocGFyYW1zLmxheWVycyk7XG4gICAgaWYgKHBhcmFtcy5iYXNlbGF5ZXJzKSBwYXJhbXMuYmFzZWxheWVycyA9IGZvcm1hdEJhc2VMYXllclBhcmFtKHBhcmFtcy5iYXNlbGF5ZXJzKTtcbiAgICBpZiAocGFyYW1zLnBvaXMpIHBhcmFtcy5wb2lzID0gZm9ybWF0UG9pbnRzT2ZJbnRlcmVzdFBhcmFtKHBhcmFtcy5wb2lzKVxuICAgIGlmIChwYXJhbXMubGF5ZXJHcm91cHMpIHBhcmFtcy5sYXllckdyb3VwcyA9IGZvcm1hdExheWVyR3JvdXBzUGFyYW0ocGFyYW1zLmxheWVyR3JvdXBzKVxufVxuXG5mdW5jdGlvbiBmb3JtYXRDZW50ZXJQYXJhbSAoY2VudGVyKSB7XG4gICAgcmV0dXJuIGNlbnRlci5zcGxpdChcIixcIik7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdExheWVyUGFyYW0gKGxheWVycykge1xuICAgIHZhciBmb3JtYXR0ZWRMYXllcnMgPSB7XG4gICAgICAgIFwiZW5hYmxlZExheWVyc1wiOiBbXSxcbiAgICAgICAgXCJvcGFjaXR5VmFsc1wiOiB7fVxuICAgIH07XG4gICAgdmFyIGxheWVySWQ7XG4gICAgdmFyIGk7XG5cbiAgICBsYXllcnMgPSBsYXllcnMuc3BsaXQoXCIsXCIpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpID0gaSArIDIpIHtcbiAgICAgICAgbGF5ZXJJZCA9IGxheWVyc1tpXTtcbiAgICAgICAgZm9ybWF0dGVkTGF5ZXJzLmVuYWJsZWRMYXllcnMucHVzaChsYXllcklkKTtcbiAgICAgICAgZm9ybWF0dGVkTGF5ZXJzLm9wYWNpdHlWYWxzW2xheWVySWRdID0gbGF5ZXJzW2krMV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvcm1hdHRlZExheWVycztcbn1cblxuZnVuY3Rpb24gZm9ybWF0QmFzZUxheWVyUGFyYW0gKGJhc2VsYXllcnMpIHtcbiAgICByZXR1cm4gYmFzZWxheWVycy5zcGxpdChcIixcIik7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFBvaW50c09mSW50ZXJlc3RQYXJhbSAocG9pcykge1xuICAgIHJldHVybiBwb2lzLnNwbGl0KCc7JylcbiAgICAgICAgLmZpbHRlcigoc3RyKSA9PiBzdHIgIT09ICcnKVxuICAgICAgICAubWFwKChwb2kpID0+IHtcbiAgICAgICAgICAgIHBvaSA9IHBvaS5zcGxpdCgnLCcpXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGxhdDogcG9pWzBdLFxuICAgICAgICAgICAgICAgIGxuZzogcG9pWzFdXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG59XG5cbmZ1bmN0aW9uIGZvcm1hdExheWVyR3JvdXBzUGFyYW0gKGxheWVyR3JvdXBTZXR0aW5ncykge1xuICAgIHJldHVybiBsYXllckdyb3VwU2V0dGluZ3Muc3BsaXQoJywnKVxufVxuXG5mdW5jdGlvbiBhZGRMYXllckdyb3VwU2V0dGluZ3NUb0NvbmZpZyhhY3RpdmVMYXllckdyb3VwSWRzLCBjb25maWcpIHtcbiAgICBjb25maWcubGF5b3V0WydsYXllci1ncm91cHMtb3JkZXInXS5mb3JFYWNoKGxheWVyR3JvdXAgPT4ge1xuICAgICAgICAvLyBzZXQgbGF5ZXIgZ3JvdXAgdG8gYWN0aXZlIGlmIGl0cyBpZCBhcHBlYXJzIGluIHRoZSBzaGFyZSB1cmwgc2V0dGluZ3NcbiAgICAgICAgbGF5ZXJHcm91cC5hY3RpdmUgPSBhY3RpdmVMYXllckdyb3VwSWRzLmZpbHRlcihpZCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gaWQgPT09IGxheWVyR3JvdXAuaWRcbiAgICAgICAgfSkubGVuZ3RoID4gMFxuICAgIH0pXG59XG5cbmZ1bmN0aW9uIGFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyAoc2hhcmVMYXllclNldHRpbmdzLCBjb25maWcpIHtcbiAgICB2YXIgZW5hYmxlZExheWVycyA9IHNoYXJlTGF5ZXJTZXR0aW5ncy5lbmFibGVkTGF5ZXJzO1xuICAgIGNvbmZpZ1tcImFjdGl2ZS1sYXllcnNcIl0gPSBlbmFibGVkTGF5ZXJzO1xuXG4gICAgdmFyIGksIGosIHByb3AsIGxheWVyZ3JvdXA7XG4gICAgdmFyIGVuYWJsZWRMYXllcjtcbiAgICB2YXIgZm91bmRMYXllcjtcbiAgICB2YXIgbGF5ZXJzID0gY29uZmlnLmxheWVycztcblxuICAgIGZvciAoaSA9IDA7IGkgPCBlbmFibGVkTGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvdW5kTGF5ZXIgPSBmYWxzZTtcbiAgICAgICAgZW5hYmxlZExheWVyID0gZW5hYmxlZExheWVyc1tpXTtcbiAgICAgICAgZm9yIChwcm9wIGluIGxheWVycykge1xuICAgICAgICAgICAgaWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcbiAgICAgICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XG4gICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGF5ZXJncm91cC5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChsYXllcmdyb3VwW2pdLmlkID09PSBlbmFibGVkTGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJncm91cFtqXS5vcGFjaXR5ID0gc2hhcmVMYXllclNldHRpbmdzLm9wYWNpdHlWYWxzW2VuYWJsZWRMYXllcl07XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kTGF5ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZm91bmRMYXllcikgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFkZEJhc2VMYXllclNldHRpbmdzVG9Db25maWcgKHNoYXJlQmFzZUxheWVyU2V0dGluZ3MsIGNvbmZpZykge1xuICAgIHZhciBiYXNlbGF5ZXJzID0gY29uZmlnLmJhc2VsYXllcnM7XG4gICAgdmFyIGJhc2VsYXllcjtcbiAgICB2YXIgaTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBiYXNlbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJhc2VsYXllciA9IGJhc2VsYXllcnNbaV07XG4gICAgICAgIGJhc2VsYXllci5hY3RpdmUgPSAoc2hhcmVCYXNlTGF5ZXJTZXR0aW5ncy5pbmRleE9mKGJhc2VsYXllci5pZCkgIT09IC0xKSA/IHRydWUgOiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFkZFBvaW50c09mSW50ZXJlc3RUb0NvbmZpZyhwb2lzLCBjb25maWcpIHtcbiAgICBjb25maWdbXCJwb2lzXCJdID0gcG9pc1xufVxuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9zaGFyZS5qcyIsImltcG9ydCB7R2V0TWFwfSBmcm9tIFwiLi9tYXBcIjtcbmltcG9ydCB7dXBkYXRlU2hhcmVVcmx9IGZyb20gXCIuL3NoYXJlXCI7XG5cbmV4cG9ydCBjb25zdCBCQVNFX0xBWUVSX1RZUEUgPSBcImJhc2VsYXllclwiO1xuXG52YXIgX2Jhc2VsYXllcnM7XG5cbmV4cG9ydCBmdW5jdGlvbiBDcmVhdGVCYXNlTGF5ZXJzIChtYXAsIGxheWVyQ29uZmlnKSB7XG4gICAgbGF5ZXJDb25maWcgPSBsYXllckNvbmZpZyB8fFxuICAgICAgICBbe1xuICAgICAgICAgICAgXCJpZFwiIDogXCJjYXJ0by1saWdodC1kZWZhdWx0XCIsXG4gICAgICAgICAgICBcInVybFwiIDogXCJodHRwOi8ve3N9LmJhc2VtYXBzLmNhcnRvY2RuLmNvbS9saWdodF9hbGwve3p9L3t4fS97eX0ucG5nXCIsXG4gICAgICAgICAgICBcImF0dHJpYnV0aW9uXCIgOiAnJmNvcHk7IDxhIGhyZWY9XCJodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodFwiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgJmNvcHk7IDxhIGhyZWY9XCJodHRwczovL2NhcnRvLmNvbS9hdHRyaWJ1dGlvbnNcIj5DQVJUTzwvYT4nXG4gICAgICAgIH1dO1xuXG4gICAgX2Jhc2VsYXllcnMgPSBsYXllckNvbmZpZztcbiAgICB2YXIgaTtcbiAgICB2YXIgYmFzZUxheWVyO1xuICAgIHZhciBjb25maWc7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGF5ZXJDb25maWcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uZmlnID0gbGF5ZXJDb25maWdbaV07XG5cbiAgICAgICAgaWYgKCFjb25maWcuYWN0aXZlKSBjb250aW51ZTtcbiAgICAgICAgYmFzZUxheWVyID0gY3JlYXRlQmFzZUxheWVyKGNvbmZpZyk7XG4gICAgICAgIGNvbmZpZy5sYXllciA9IGJhc2VMYXllcjtcbiAgICAgICAgYmFzZUxheWVyLmFkZFRvKG1hcCk7XG4gICAgfVxuXG4gICAgY3JlYXRlQmFzZUxheWVyVUkobGF5ZXJDb25maWcpXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUJhc2VMYXllclVJIChjb25maWcpIHtcbiAgICB2YXIgYmFzZVVJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBiYXNlVUkuY2xhc3NOYW1lID0gXCJiYXNlbGF5ZXItdWlcIjtcbiAgICB2YXIgYmFzZVdyYXBwZXI7XG4gICAgdmFyIGJhc2VJbWc7XG4gICAgdmFyIGJhc2VMYWJlbDtcblxuICAgIHZhciBsYXllcjtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbmZpZy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgbGF5ZXIgPSBjb25maWdbaV07XG4gICAgICAgIGlmICghbGF5ZXIuaGFzT3duUHJvcGVydHkoXCJpbWFnZVwiKSkgY29udGludWU7XG5cbiAgICAgICAgYmFzZVdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBiYXNlV3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJkYXRhLWxheWVyXCIsIGxheWVyLmlkKTtcbiAgICAgICAgYmFzZUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgIGJhc2VJbWcuc2V0QXR0cmlidXRlKFwic3JjXCIsIGxheWVyLmltYWdlKTtcbiAgICAgICAgYmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgbGF5ZXIubGFiZWwpO1xuICAgICAgICBiYXNlSW1nLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIGxheWVyLmxhYmVsKTtcbiAgICAgICAgYmFzZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgYmFzZUxhYmVsLnRleHRDb250ZW50ID0gbGF5ZXIubGFiZWw7XG4gICAgICAgIGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VJbWcpO1xuICAgICAgICBiYXNlV3JhcHBlci5hcHBlbmRDaGlsZChiYXNlTGFiZWwpO1xuICAgICAgICBiYXNlV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQmFzZUNsaWNrKVxuXG4gICAgICAgIGQzLnNlbGVjdChiYXNlV3JhcHBlcilcbiAgICAgICAgICAgIC5jbGFzc2VkKFwiYmFzZS1zZWxlY3RvclwiLCB0cnVlKVxuICAgICAgICAgICAgLmNsYXNzZWQoXCJhY3RpdmVcIiwgbGF5ZXIuYWN0aXZlKTtcblxuICAgICAgICBiYXNlVUkuYXBwZW5kQ2hpbGQoYmFzZVdyYXBwZXIpO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJsZWFmbGV0LWJvdHRvbSBsZWFmbGV0LWxlZnRcIilbMF0uYXBwZW5kQ2hpbGQoYmFzZVVJKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQmFzZUNsaWNrIChlKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB2YXIgbGF5ZXJpZCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiKTtcbiAgICB0b2dnbGVBY3RpdmVCYXNlVUkodGhpcyk7XG4gICAgcmVtb3ZlQ3VycmVudEJhc2VMYXllcigpO1xuICAgIGFkZE5ld0Jhc2VMYXllclRvTWFwKGxheWVyaWQpO1xuXG4gICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIGNoYW5nZWluZyBiYXNlIGxheWVyXG4gICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG4gICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcbiAgICAgIGV2ZW50QWN0aW9uOiAnY2hhbmdlIGJhc2UgbGF5ZXInLFxuICAgICAgZXZlbnRMYWJlbDogbGF5ZXJpZCxcbiAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgIH0pO1xuXG4gICAgdXBkYXRlU2hhcmVVcmwoKTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlQWN0aXZlQmFzZVVJIChiYXNlVUlFbGVtKSB7XG4gICAgZDMuc2VsZWN0KFwiLmJhc2Utc2VsZWN0b3IuYWN0aXZlXCIpLmNsYXNzZWQoXCJhY3RpdmVcIiwgZmFsc2UpO1xuICAgIGQzLnNlbGVjdChiYXNlVUlFbGVtKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVDdXJyZW50QmFzZUxheWVyICgpIHtcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XG5cbiAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICBpZiAobGF5ZXIub3B0aW9ucy50eXBlICE9PSBCQVNFX0xBWUVSX1RZUEUpIHJldHVybjtcbiAgICAgICAgbWFwLnJlbW92ZUxheWVyKGxheWVyKTtcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBhZGROZXdCYXNlTGF5ZXJUb01hcCAobGF5ZXJpZCkge1xuICAgIHZhciBtYXAgPSBHZXRNYXAoKTtcblxuICAgIHZhciBsYXllcjtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IF9iYXNlbGF5ZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBsYXllciA9IF9iYXNlbGF5ZXJzW2ldO1xuICAgICAgICBpZiAobGF5ZXIuaWQgIT09IGxheWVyaWQpIGNvbnRpbnVlO1xuICAgICAgICBpZiAoIWxheWVyLmxheWVyKSBsYXllci5sYXllciA9IGNyZWF0ZUJhc2VMYXllcihsYXllcik7XG4gICAgICAgIGxheWVyLmxheWVyLmFkZFRvKG1hcCk7XG4gICAgICAgIGxheWVyLmxheWVyLmJyaW5nVG9CYWNrKCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlQmFzZUxheWVyIChsYXllckNvbmZpZykge1xuICAgIHJldHVybiBMLnRpbGVMYXllcihcbiAgICAgICAgbGF5ZXJDb25maWcudXJsLFxuICAgICAgICBtYWtlQmFzZUxheWVyT3B0aW9ucyhsYXllckNvbmZpZylcbiAgICApO1xufVxuXG5mdW5jdGlvbiBtYWtlQmFzZUxheWVyT3B0aW9ucyAoY29uZmlnKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgICBpZiAoY29uZmlnLmlkKSBvcHRpb25zLmlkID0gY29uZmlnLmlkO1xuICAgIGlmIChjb25maWcuYXR0cmlidXRpb24pIG9wdGlvbnMuYXR0cmlidXRpb24gPSBjb25maWcuYXR0cmlidXRpb247XG4gICAgaWYgKGNvbmZpZy5zdWJkb21haW5zKSBvcHRpb25zLnN1YmRvbWFpbnMgPSBjb25maWcuc3ViZG9tYWlucztcbiAgICBvcHRpb25zLnR5cGUgPSBCQVNFX0xBWUVSX1RZUEU7XG5cbiAgICByZXR1cm4gb3B0aW9ucztcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2Jhc2VsYXllci5qcyIsImltcG9ydCB7XG4gIGNyZWF0ZUdyYXBoRGl2LFxuICBjcmVhdGVNYXJrZXIsXG4gIGNyZWF0ZUdyYXBoUmVtb3ZlcixcbiAgZ2V0SWNvblxufSBmcm9tICcuL2dyYXBoJ1xuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSAnLi9zaGFyZSdcbmltcG9ydCB7R2V0TWFwfSBmcm9tICcuL21hcCdcbmltcG9ydCB7R2V0QWN0aXZlVGFiLCBIYW5kbGVUYWJDaGFuZ2V9IGZyb20gJy4vdGFicydcblxudmFyIF9wb2ludHNfb2ZfaW50ZXJlc3QgPSBbXVxuXG5leHBvcnQgZnVuY3Rpb24gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCAoKSB7XG4gICAgcmV0dXJuIF9wb2ludHNfb2ZfaW50ZXJlc3Rcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlciAobGF0LCBsbmcpIHtcbiAgICB2YXIgcG9pID0ge1xuICAgICAgICBsYXQ6IGxhdCxcbiAgICAgICAgbG5nOiBsbmdcbiAgICB9XG4gICAgX3BvaW50c19vZl9pbnRlcmVzdC5wdXNoKHBvaSlcbiAgICByZXR1cm4gcG9pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTZXR1cFBvaW50c09mSW50ZXJlc3QgKG1hcCwgbmV3UG9pcykge1xuICAgIEFkZE11bHRpcGxlUG9pbnRzT2ZJbnRlcmVzdChuZXdQb2lzKVxuICAgIHZhciBwb2lzID0gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCgpXG4gICAgdmFyIG1hcCA9IEdldE1hcCgpXG4gICAgcG9pcy5mb3JFYWNoKHBvaSA9PiB7XG4gICAgICAgIFNldHVwUG9pbnRPZkludGVyZXN0VUkobWFwLCBwb2kpXG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEFkZE11bHRpcGxlUG9pbnRzT2ZJbnRlcmVzdCAocG9pcykge1xuICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KF9wb2ludHNfb2ZfaW50ZXJlc3QsIHBvaXMpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZW1vdmVQb2ludE9mSW50ZXJlc3RGcm9tVHJhY2tlcihwb2lUb1JlbW92ZSkge1xuICAgIF9wb2ludHNfb2ZfaW50ZXJlc3QgPSBfcG9pbnRzX29mX2ludGVyZXN0LmZpbHRlcihwb2kgPT4ge1xuICAgICAgICByZXR1cm4gIShwb2kgPT09IHBvaVRvUmVtb3ZlKVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gU2V0dXBQb2ludE9mSW50ZXJlc3RVSSAobWFwLCBwb2kpIHtcbiAgICB2YXIgZGl2ID0gY3JlYXRlR3JhcGhEaXYocG9pKTtcbiAgICB2YXIgbWFya2VyID0gY3JlYXRlTWFya2VyKG1hcCwgcG9pLmxhdCwgcG9pLmxuZyk7XG4gICAgcG9pLmdyYXBoRGl2ID0gZGl2XG4gICAgcG9pLm1hcmtlciA9IG1hcmtlclxuICAgIG1hcmtlci5hZGRUbyhtYXApXG4gICAgY3JlYXRlR3JhcGhSZW1vdmVyKG1hcCwgZGl2LCBtYXJrZXIsIHBvaSk7XG5cbiAgICBkMy5zZWxlY3QoZGl2KS5vbihcIm1vdXNlZW50ZXJcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgbWFya2VyLnNldEljb24oZ2V0SWNvbignaG92ZXInKSk7XG4gICAgfSlcbiAgICBkMy5zZWxlY3QoZGl2KS5vbihcIm1vdXNlbGVhdmVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBtYXJrZXIuc2V0SWNvbihnZXRJY29uKCdncmFwaCcpKTtcbiAgICB9KVxuICAgIG1hcmtlci5vbignY2xpY2sgZGJsY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBoYW5kbGVNYXJrZXJNb3VzZUV2ZW50KGUsIHBvaSlcbiAgICB9KVxuICAgIG1hcmtlci5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgbWFya2VyLnNldEljb24oZ2V0SWNvbignaG92ZXInKSlcbiAgICB9KVxuICAgIG1hcmtlci5vbignbW91c2VvdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBtYXJrZXIuc2V0SWNvbihnZXRJY29uKCdncmFwaCcpKVxuICAgICAgICBwb2kuZ3JhcGhEaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncGFuLXRvLW1hcmtlci1idG4nKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlJylcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBoYW5kbGVNYXJrZXJNb3VzZUV2ZW50IChlLCBwb2kpIHtcbiAgICBlLm9yaWdpbmFsRXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBIYW5kbGVUYWJDaGFuZ2UoJ2dyYXBocy1hY3RpdmUnKVxuICAgIHNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGgocG9pKVxuICAgIHRyaWdnZXJHcmFwaEFuaW1hdGlvbihwb2kpXG59XG5cbmZ1bmN0aW9uIHRyaWdnZXJHcmFwaEFuaW1hdGlvbiAocG9pKSB7XG4gICAgcG9pLmdyYXBoRGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Bhbi10by1tYXJrZXItYnRuJylbMF0uY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZScpXG59XG5cbmZ1bmN0aW9uIHNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGggKHBvaSkge1xuICAgIHZhciByaWdodFBhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsJylcbiAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsLWhlYWRlcicpXG4gICAgdmFyIGdyYXBoVHlwZUhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaC10eXBlLWhlYWRlcicpXG4gICAgcmlnaHRQYW5lbC5zY3JvbGxUb3AgPSBwb2kuZ3JhcGhEaXYub2Zmc2V0VG9wXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZW1vdmVQb2ludE9mSW50ZXJlc3RVSSAobWFwLCBkaXYsIG1hcmtlcikge1xuICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyYXBoLWxpc3QnKTtcbiAgICBsaXN0LnJlbW92ZUNoaWxkKGRpdik7XG4gICAgbWFwLnJlbW92ZUxheWVyKG1hcmtlcik7XG4gICAgdXBkYXRlU2hhcmVVcmwoKVxufVxuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9wb2kuanMiLCJpbXBvcnQge1xuICAgIEFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlcixcbiAgICBSZW1vdmVQb2ludE9mSW50ZXJlc3RGcm9tVHJhY2tlcixcbiAgICBTZXR1cFBvaW50T2ZJbnRlcmVzdFVJLFxuICAgIFJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJLFxuICAgIEdldEFsbFBvaW50c09mSW50ZXJlc3Rcbn0gZnJvbSAnLi9wb2knXG5pbXBvcnQge3VwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHR9IGZyb20gJy4vcGFuZWwnXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tICcuL3NoYXJlJ1xuaW1wb3J0IHtHZXRNYXB9IGZyb20gJy4vbWFwJ1xuaW1wb3J0IHtHZXRBamF4T2JqZWN0fSBmcm9tICcuL3BhcnNlcidcblxudmFyIHRpcCA9IHt9O1xuXG5mdW5jdGlvbiBnZXRHcmFwaFRpcCgpIHtcbiAgICByZXR1cm4gdGlwXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBTZXR1cEdyYXBocyAoKSB7XG4gICAgZDMuc2VsZWN0QWxsKFwiLmdyYXBoLXR5cGUtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2spO1xuICAgIGV4dGVuZERhdGVNb2R1bGUoKTtcbiAgICB0aXAgPSBkMy50aXAoKS5hdHRyKCdjbGFzcycsICdkMy10aXAnKS5odG1sKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkOyB9KTtcbn1cblxuZnVuY3Rpb24gZXh0ZW5kRGF0ZU1vZHVsZSAoKSB7XG4gICAgRGF0ZS5wcm90b3R5cGUuaXNMZWFwWWVhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgeWVhciA9IHRoaXMuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgaWYoKHllYXIgJiAzKSAhPSAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiAoKHllYXIgJSAxMDApICE9IDAgfHwgKHllYXIgJSA0MDApID09IDApO1xuICAgIH07XG5cbiAgICAvLyBHZXQgRGF5IG9mIFllYXJcbiAgICBEYXRlLnByb3RvdHlwZS5nZXRET1kgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRheUNvdW50ID0gWzAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0XTtcbiAgICAgICAgdmFyIG1uID0gdGhpcy5nZXRNb250aCgpO1xuICAgICAgICB2YXIgZG4gPSB0aGlzLmdldERhdGUoKTtcbiAgICAgICAgdmFyIGRheU9mWWVhciA9IGRheUNvdW50W21uXSArIGRuO1xuICAgICAgICBpZihtbiA+IDEgJiYgdGhpcy5pc0xlYXBZZWFyKCkpIGRheU9mWWVhcisrO1xuICAgICAgICByZXR1cm4gZGF5T2ZZZWFyO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBCaW5kR3JhcGhFdmVudHMgKG1hcCkge1xuICAgIG1hcC5vbihcImNsaWNrXCIsIGhhbmRsZU1hcENsaWNrKTtcbn1cblxudmFyIGJhc2VJY29uID0gTC5JY29uLmV4dGVuZCh7fSk7XG5cbnZhciBncmFwaEljb24gPSBuZXcgYmFzZUljb24oe1xuICAgIGljb25Vcmw6ICdpbWdzL2JsdWVfaWNvbi5wbmcnLFxuICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxuICAgIGljb25TaXplOiBbMjUsIDQxXSxcbiAgICBpY29uQW5jaG9yOiBbMTIsIDQxXSxcbiAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXG4gICAgc2hhZG93U2l6ZTogWzQxLCA0MV1cbn0pO1xuXG52YXIgaG92ZXJJY29uID0gbmV3IGJhc2VJY29uKHtcbiAgICBpY29uVXJsOiAnaW1ncy9vcmFuZ2VfaWNvbi5wbmcnLFxuICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxuICAgIGljb25TaXplOiBbMjUsIDQxXSxcbiAgICBpY29uQW5jaG9yOiBbMTIsIDQxXSxcbiAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXG4gICAgc2hhZG93U2l6ZTogWzQxLCA0MV1cbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SWNvbih0eXBlKSB7XG4gICAgcmV0dXJuIHR5cGUgPT09ICdob3ZlcicgPyBob3Zlckljb24gOiBncmFwaEljb25cbn1cblxuZnVuY3Rpb24gaGFuZGxlTWFwQ2xpY2sgKGUpIHtcbiAgICB2YXIgbWFwID0gdGhpcztcbiAgICB2YXIgbGF0ID0gZS5sYXRsbmcubGF0O1xuICAgIHZhciBsbmcgPSBlLmxhdGxuZy5sbmc7XG5cbiAgICB2YXIgcG9pID0gQWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyKGxhdCwgbG5nKVxuICAgIFNldHVwUG9pbnRPZkludGVyZXN0VUkobWFwLCBwb2ksIGhvdmVySWNvbiwgZ3JhcGhJY29uKVxuICAgIHVwZGF0ZVNoYXJlVXJsKClcblxuICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGNsaWNrIG9uIG1hcFxuICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG4gICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcbiAgICAgIGV2ZW50TGFiZWw6ICdhZGQgcG9pbnQnLFxuICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgfSk7XG5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1hcmtlciAobWFwLCBsYXQsIGxuZykge1xuICAgIHJldHVybiBMLm1hcmtlcihbbGF0LCBsbmddLCB7aWNvbjogZ3JhcGhJY29ufSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHcmFwaFJlbW92ZXIgKG1hcCwgZGl2LCBtYXJrZXIsIHBvaSkge1xuICAgIHZhciBlbGVtID0gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSgpO1xuICAgIGRpdi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZ3JhcGgtZWxlbS1oZWFkZXJcIilbMF0uYXBwZW5kQ2hpbGQoZWxlbSk7XG4gICAgZDMuc2VsZWN0KGVsZW0pLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHJlbW92ZSBncmFwaFxuICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxuICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuICAgICAgICAgIGV2ZW50TGFiZWw6ICdyZW1vdmUnLFxuICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgICB9KTtcblxuICAgICAgICBSZW1vdmVQb2ludE9mSW50ZXJlc3RGcm9tVHJhY2tlcihwb2kpXG4gICAgICAgIFJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJKG1hcCwgZGl2LCBtYXJrZXIpXG4gICAgICAgIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKVxuICAgICAgICB1cGRhdGVTaGFyZVVybCgpXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUdyYXBoUmVtb3ZlckVsZW0gKCkge1xuICAgIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBlbGVtLmNsYXNzTmFtZSA9IFwicmVtb3ZlLWdyYXBoXCI7XG4gICAgZWxlbS5pbm5lclRleHQgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKFwiMTAwMDVcIik7XG4gICAgZWxlbS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBcIlJlbW92ZSBncmFwaFwiKTtcbiAgICByZXR1cm4gZWxlbTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBHUkFQSCBEQVRBIFBST0NFU1NJTkcgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBzZW5kUmVxdWVzdChyZXF1ZXN0LCB1cmwpIHtcbiAgICByZXF1ZXN0Lm9wZW4oJ0dFVCcsIHVybClcbiAgICByZXF1ZXN0LnNlbmQoKVxufVxuXG5mdW5jdGlvbiBoYW5kbGVHcmFwaERhdGFSZXNwb25zZSAoZGl2LCBsYXQsIGxuZywgcmVzcG9uc2UpIHtcbiAgICByZXNwb25zZSA9IHJlc3BvbnNlLnJlcGxhY2UoL1xcW3xcXF18XFwnL2csIFwiXCIpLnNwbGl0KFwiLCBcIik7XG4gICAgZHJhd0dyYXBoKHJlc3BvbnNlLCBkaXYsIGxhdCwgbG5nKTtcbiAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KClcbn1cblxuZnVuY3Rpb24gZ2V0RGF0YShsYXQsIGxuZywgZGl2KSB7XG4gICAgdmFyIHVybCA9IFwiaHR0cHM6Ly9mY2F2LW5kdmkubmVtYWMub3JnL2xhbmRkYXRfcHJvZHVjdC5jZ2k/YXJncz1cIiArIGxuZyArIFwiLFwiICsgbGF0O1xuICAgIHZhciBvUmVxID0gR2V0QWpheE9iamVjdChmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaGFuZGxlR3JhcGhEYXRhUmVzcG9uc2UoZGl2LCBsYXQsIGxuZywgcmVzcG9uc2UpXG4gICAgfSlcblxuICAgIG9SZXEub3BlbihcIkdFVFwiLCB1cmwpO1xuICAgIG9SZXEuc2VuZCgpXG59XG5cbmZ1bmN0aW9uIHNwbGl0RGF0YShkYXRhKSB7XG4gICAgdmFyIGk7XG4gICAgZm9yIChpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGF0YVtpXSA9IGRhdGFbaV0uc3BsaXQoXCIsXCIpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbn1cblxuZnVuY3Rpb24gcmVwcm9jZXNzRGF0YSAob3JpZ2RhdGEpIHtcbiAgICB2YXIgZXhwZWN0ZWRZZWFyTGVuZ3RoID0gNDY7XG4gICAgdmFyIGRhdGEgPSB7fTtcbiAgICB2YXIgcG9pbnQ7XG4gICAgdmFyIGtleTtcbiAgICB2YXIgaSwgajtcblxuICAgIGRhdGFbXCJrZXlzXCJdID0gW107XG4gICAgZm9yIChpID0gMDsgaSA8IG9yaWdkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHBvaW50ID0gb3JpZ2RhdGFbaV07XG4gICAgICAgIGtleSA9IHBvaW50WzBdLnN1YnN0cmluZygwLDQpO1xuICAgICAgICBpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgZGF0YVtrZXldID0gW107XG4gICAgICAgICAgICBkYXRhW1wia2V5c1wiXS5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZGF0YVtrZXldLnB1c2gocG9pbnQpO1xuICAgIH1cblxuICAgIHZhciBrZXlzVG9CZURlbGV0ZWQgPSBbXTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5rZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGtleSA9IGRhdGEua2V5c1tpXTtcbiAgICAgICAgaWYgKGRhdGFba2V5XS5sZW5ndGggIT09IGV4cGVjdGVkWWVhckxlbmd0aCkge1xuICAgICAgICAgICAga2V5c1RvQmVEZWxldGVkLnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoaSA9IDA7IGkgPCBrZXlzVG9CZURlbGV0ZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAga2V5ID0ga2V5c1RvQmVEZWxldGVkW2ldO1xuICAgICAgICBkZWxldGUgZGF0YVtrZXldO1xuICAgICAgICBkYXRhLmtleXMuc3BsaWNlKGRhdGEua2V5cy5pbmRleE9mKGtleSksIDEpO1xuICAgIH1cblxuICAgIHZhciBkYXRhRm9yTWVhbnM7XG4gICAgdmFyIG1lYW47XG4gICAgZGF0YVtcIm1lYW5zXCJdID0gW107XG4gICAgZm9yIChpID0gMDsgaSA8IGV4cGVjdGVkWWVhckxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGRhdGFGb3JNZWFucyA9IFtdO1xuICAgICAgICBmb3IgKGogPSBpOyBqIDwgb3JpZ2RhdGEubGVuZ3RoOyBqICs9IGV4cGVjdGVkWWVhckxlbmd0aCkge1xuICAgICAgICAgICAgZGF0YUZvck1lYW5zLnB1c2gocGFyc2VJbnQob3JpZ2RhdGFbal1bMV0sIDEwKSk7XG4gICAgICAgIH1cblxuICAgICAgICBtZWFuID0gY29tcHV0ZUF2ZXJhZ2UoZGF0YUZvck1lYW5zKTtcbiAgICAgICAgZGF0YVtcIm1lYW5zXCJdLnB1c2gobWVhbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVBdmVyYWdlIChhcnIpIHtcbiAgICB2YXIgc3VtID0gMCwgaSwgbDtcblxuICAgIGZvciAoaSA9IDAsIGwgPSBhcnIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHN1bSArPSBhcnJbaV07XG4gICAgfVxuXG4gICAgcmV0dXJuIChzdW0gLyBsKS50b1N0cmluZygpO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIElOVEVSRkFDRSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2sgKCkge1xuICAgIHZhciB0eXBlID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpO1xuICAgIHZhciBhY3RpdmVUeXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyYXBoLXR5cGUtYnRuIGFjdGl2ZVwiKVswXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpO1xuXG4gICAgaWYgKHR5cGUgPT09IGFjdGl2ZVR5cGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIGdyYXBoIHR5cGVcbiAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCB0eXBlJyxcbiAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuICAgICAgZXZlbnRMYWJlbDogdHlwZSxcbiAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgIH0pO1xuXG4gICAgSGFuZGxlR3JhcGhUYWJDaGFuZ2UodHlwZSwgYWN0aXZlVHlwZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBIYW5kbGVHcmFwaFRhYkNoYW5nZSAoZ3JhcGhUeXBlKSB7XG4gICAgaWYgKCFpc0dyYXBoTGlzdEVtcHR5KCkpIHtcbiAgICAgICAgdmFyIG9sZEFjdGl2ZUdyYXBoRWxlbUhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLWVsZW0nKVswXS5zY3JvbGxIZWlnaHRcbiAgICAgICAgdmFyIG9sZEFjdGl2ZUdyYXBoSW5mb0hlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLXR5cGUtaW5mbyBhY3RpdmUnKVswXS5zY3JvbGxIZWlnaHRcbiAgICAgICAgdmFyIHJpZ2h0UGFuZWxTY3JvbGxUb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKS5zY3JvbGxUb3BcbiAgICB9XG4gICAgZGlzYWJsZUFjdGl2ZUdyYXBoVGFiKCk7XG4gICAgZW5hYmxlR3JhcGhUYWIoZ3JhcGhUeXBlKTtcbiAgICBpZiAoIWlzR3JhcGhMaXN0RW1wdHkoKSkgYWRqdXN0U2Nyb2xsUG9zaXRpb24ob2xkQWN0aXZlR3JhcGhJbmZvSGVpZ2h0LCBvbGRBY3RpdmVHcmFwaEVsZW1IZWlnaHQsIHJpZ2h0UGFuZWxTY3JvbGxUb3ApXG4gICAgdXBkYXRlU2hhcmVVcmwoKTtcbn1cblxuZnVuY3Rpb24gaXNHcmFwaExpc3RFbXB0eSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhcGgtZWxlbScpWzBdID09PSB1bmRlZmluZWRcbn1cblxuZnVuY3Rpb24gYWRqdXN0U2Nyb2xsUG9zaXRpb24ob2xkR3JhcGhJbmZvSGVpZ2h0LCBvbGRHcmFwaEVsZW1IZWlnaHQsIG9sZFJpZ2h0UGFuZWxTY3JvbGxUb3ApIHtcbiAgICB2YXIgbmV3R3JhcGhJbmZvSGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhcGgtdHlwZS1pbmZvIGFjdGl2ZScpWzBdLnNjcm9sbEhlaWdodFxuICAgIHZhciBuZXdHcmFwaEVsZW1IZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC1lbGVtJylbMF0uc2Nyb2xsSGVpZ2h0XG5cbiAgICB2YXIgbmV3R3JhcGhFbGVtSGVpZ2h0U2NhbGUgPSAobmV3R3JhcGhFbGVtSGVpZ2h0IC8gb2xkR3JhcGhFbGVtSGVpZ2h0KVxuICAgIHZhciBuZXdSaWdodFBhbmVsU2Nyb2xsVG9wID0gbmV3R3JhcGhJbmZvSGVpZ2h0ICsgKFxuICAgICAgICAob2xkUmlnaHRQYW5lbFNjcm9sbFRvcCAtIG9sZEdyYXBoSW5mb0hlaWdodCkgKiBuZXdHcmFwaEVsZW1IZWlnaHRTY2FsZVxuICAgIClcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpLnNjcm9sbFRvcCA9IG5ld1JpZ2h0UGFuZWxTY3JvbGxUb3Bcbn1cblxuZnVuY3Rpb24gZGlzYWJsZUFjdGl2ZUdyYXBoVGFiICgpIHtcbiAgICB2YXIgYWN0aXZlRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF07XG4gICAgdmFyIGFjdGl2ZUNsYXNzID0gXCJncmFwaC1cIiArIGFjdGl2ZUVsZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS10eXBlXCIpO1xuXG4gICAgYWN0aXZlRWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKS5jbGFzc0xpc3QucmVtb3ZlKGFjdGl2ZUNsYXNzKTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlR3JhcGhUYWIgKGdyYXBoVHlwZSkge1xuICAgIGQzLnNlbGVjdChcIi5ncmFwaC10eXBlLWJ0bltkYXRhLXR5cGU9J1wiICsgZ3JhcGhUeXBlICsgXCInXVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKS5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtXCIgKyBncmFwaFR5cGUpO1xuICAgIGQzLnNlbGVjdEFsbCgnLmdyYXBoLXR5cGUtaW5mbycpXG4gICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGdyYXBoVHlwZSA9PT0gdGhpcy5pZC5zcGxpdCgnLScpWzBdXG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdyYXBoRGl2IChwb2kpIHtcbiAgICB2YXIgZGVjaW1hbFBsYWNlcyA9IDNcbiAgICB2YXIgbGF0U2hvcnQgPSByb3VuZEZsb2F0KHBvaS5sYXQsIGRlY2ltYWxQbGFjZXMpXG4gICAgdmFyIGxuZ1Nob3J0ID0gcm91bmRGbG9hdChwb2kubG5nLCBkZWNpbWFsUGxhY2VzKVxuICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGhlYWRlcilcbiAgICB2YXIgem9vbVRvTWFya2VyQnV0dG9uID0gbWFrZVpvb21Ub01hcE1hcmtlckJ1dHRvbihwb2kpXG4gICAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkxhdDogXCIgKyBsYXRTaG9ydCArIFwiLCBMb25nOiBcIiArIGxuZ1Nob3J0KTtcbiAgICB2YXIgY29udGVudERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29udGVudERpdi5jbGFzc05hbWUgPSBcImdyYXBoLWxhdC1sb25cIjtcbiAgICBjb250ZW50RGl2LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuXG4gICAgaGVhZGVyLmFwcGVuZENoaWxkKHpvb21Ub01hcmtlckJ1dHRvbilcbiAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoY29udGVudERpdik7XG5cbiAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJncmFwaC1lbGVtXCIpXG4gICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJncmFwaC1lbGVtLWhlYWRlclwiKVxuXG4gICAgZ2V0RGF0YShwb2kubGF0LCBwb2kubG5nLCB3cmFwcGVyKTtcbiAgICByZXR1cm4gd3JhcHBlcjtcbn1cblxuZnVuY3Rpb24gbWFrZVpvb21Ub01hcE1hcmtlckJ1dHRvbihwb2kpIHtcbiAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4nKVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwYW4tdG8tbWFya2VyLWJ0bicpXG4gICAgYnV0dG9uLnRleHRDb250ZW50ID0gXCJTaG93IE9uIE1hcFwiXG4gICAgYnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAocG9pLCBlKSB7XG4gICAgICAgIHZhciBtYXAgPSBHZXRNYXAoKVxuICAgICAgICBtYXAucGFuVG8oW3BvaS5sYXQsIHBvaS5sbmddKVxuXG4gICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIHNob3cgb24gbWFwXG4gICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXG4gICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG4gICAgICAgICAgZXZlbnRMYWJlbDogJ3tcInNob3cgb24gbWFwXCI6e1wibGF0XCI6JyArIHBvaS5sYXQgKyAnLFwibG9uZ1wiOicrICBwb2kubG5nKyAnfX0nLFxuICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgICB9KTtcblxuICAgIH0uYmluZChidXR0b24sIHBvaSlcbiAgICByZXR1cm4gYnV0dG9uXG59XG5cbmZ1bmN0aW9uIGRyYXdHcmFwaChkYXRhLCBkaXYsIGxhdCwgbG5nKSB7XG4gICAgZGF0YSA9IHNwbGl0RGF0YShkYXRhKTtcbiAgICB2YXIgcmVwcm9jZXNzZWREYXRhID0gcmVwcm9jZXNzRGF0YShkYXRhKTtcbiAgICBtYWtlVXBEb3duTGluZUdyYXBoKGRhdGEsIGRpdiwgcmVwcm9jZXNzZWREYXRhW1wibWVhbnNcIl0pO1xuICAgIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMocmVwcm9jZXNzZWREYXRhLCBkaXYsIGxhdCwgbG5nKTtcbiAgICBkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMocmVwcm9jZXNzZWREYXRhLCBkaXYsIGxhdCwgbG5nKTtcbiAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKTtcbiAgICBsaXN0LmFwcGVuZENoaWxkKGRpdik7XG59XG5cbmZ1bmN0aW9uIHJvdW5kRmxvYXQobnVtYmVyLCBkZWNpbWFsUGxhY2VzKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobnVtYmVyICogTWF0aC5wb3coMTAsIGRlY2ltYWxQbGFjZXMpKSAvIChNYXRoLnBvdygxMCwgZGVjaW1hbFBsYWNlcykpXG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLyBUSU1FU0VSSUVTIExJTkUgR1JBUEggLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gbWFrZVVwRG93bkxpbmVHcmFwaCAoZGF0YSwgZGl2LCBhdmVyYWdlcykge1xuICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcbiAgICB2YXIgbWFyZ2luID0ge3RvcDogMzAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMCwgbGVmdDogMjl9LFxuICAgIHdpZHRoID0gNTgwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsXG4gICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cbiAgICAvLyBTZXQgdGhlIHJhbmdlc1xuICAgIHZhciB4ID0gZDMuc2NhbGVUaW1lKCkucmFuZ2UoWzAsIHdpZHRoXSlcbiAgICAgICAgLmRvbWFpbihbXG4gICAgICAgICAgICBwYXJzZURhdGUoZGF0YVswXVswXSksXG4gICAgICAgICAgICBwYXJzZURhdGUoZGF0YVtkYXRhLmxlbmd0aC0xXVswXSlcbiAgICAgICAgXSk7XG4gICAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKVxuICAgICAgICAuZG9tYWluKFswLCAxMDBdKTtcblxuICAgIC8vIERlZmluZSB0aGUgYXhlc1xuICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcbiAgICAgICAgLnRpY2tzKDE2KVxuICAgICAgICAudGlja0Zvcm1hdChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgcmV0dXJuIGQuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgfSk7XG5cbiAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KVxuICAgICAgICAudGlja3MoNik7XG5cbiAgICAvLyBEZWZpbmUgdGhlIGxpbmVcbiAgICB2YXIgdmFsdWVsaW5lID0gZDMubGluZSgpXG4gICAgICAgIC54KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHgocGFyc2VEYXRlKGRbMF0pKTsgfSlcbiAgICAgICAgLnkoZnVuY3Rpb24oZCkgeyByZXR1cm4geShkWzFdKTsgfSk7XG5cbiAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpXG4gICAgICAgIC5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgLmNsYXNzZWQoXCJ0aW1lc2VyaWVzLWdyYXBoXCIsIHRydWUpO1xuXG4gICAgLy8gQWRkcyB0aGUgc3ZnIGNhbnZhc1xuICAgIHZhciBzdmcgPSB3cmFwcGVyLmFwcGVuZChcInN2Z1wiKVxuICAgICAgICAuYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcbiAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdyA9IHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHRcbiAgICAgICAgICAgIHZhciBoID0gaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b21cbiAgICAgICAgICAgIHJldHVybiAnMCAwICcgKyB3ICsgJyAnICsgaFxuICAgICAgICB9KVxuICAgICAgICAuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWlkWU1pZCcpXG4gICAgICAgIC5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xuXG4gICAgc3ZnLmNhbGwodGlwKTtcblxuICAgIC8vIEFkZCB0aGUgdmFsdWVsaW5lIHBhdGguXG4gICAgZHJhd0xpbmVhclBhdGgoZGF0YSwgdmFsdWVsaW5lLCBzdmcpO1xuXG4gICAgLy8gQWRkIHRoZSBYIEF4aXNcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieCBheGlzXCIpXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIilcbiAgICAgICAgLmNhbGwoeEF4aXMpO1xuXG4gICAgLy8gQWRkIHRoZSBZIEF4aXNcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpXG4gICAgICAgIC5jYWxsKHlBeGlzKTtcbiAgICAvKipcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxuICAgICAqL1xuICAgIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8gT1ZFUkxBUFBJTkcgVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gbWFrZVVwRG93bk92ZXJsYXBpbmdMaW5lR3JhcGhXaXRoQ2hlY2tib3hlcyAoZGF0YSwgZGl2LCBsYXQsIGxuZykge1xuICAgIHZhciB5ZWFyID0gXCIyMDE1XCI7XG5cbiAgICB2YXIgY2hhcnRzID0ge307XG5cbiAgICAvLyBTZXQgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIGNhbnZhcyAvIGdyYXBoXG4gICAgdmFyIG1hcmdpbiA9IHt0b3A6IDMwLCByaWdodDogMjAsIGJvdHRvbTogMzAsIGxlZnQ6IDI5fSxcbiAgICAgICAgd2lkdGggPSA1MDAgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCxcbiAgICAgICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cbiAgICB2YXIgYXZlcmFnZXMgPSBkYXRhLm1lYW5zO1xuXG4gICAgdmFyIHggPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFswLCB3aWR0aF0pXG4gICAgICAgIC5kb21haW4oWzAsIDM2NV0pO1xuICAgIHZhciB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSlcbiAgICAgICAgLmRvbWFpbihbMCwgMTAwXSk7XG5cbiAgICAvLyBEZWZpbmUgdGhlIGF4ZXNcbiAgICBmdW5jdGlvbiBmb3JtYXRNb250aFRpY2sgKGQpIHtcbiAgICAgICAgcmV0dXJuIChNT05USF9MQUJFTFNbKGQtMTUpLzMwXSk7XG4gICAgfVxuICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcbiAgICAgICAgLnRpY2tzKDExKVxuICAgICAgICAudGlja1ZhbHVlcyhbMTUsIDQ1LCA3NSwgMTA1LCAxMzUsIDE2NSwgMTk1LCAyMjUsIDI1NSwgMjg1LCAzMTUsIDM0NV0pXG4gICAgICAgIC50aWNrRm9ybWF0KGZvcm1hdE1vbnRoVGljayk7XG5cbiAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KVxuICAgICAgICAudGlja3MoNik7XG5cbiAgICAvLyBEZWZpbmUgdGhlIGxpbmVcbiAgICB2YXIgdmFsdWVsaW5lID0gZDMubGluZSgpXG4gICAgICAgIC54KGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIChBcnJheS5pc0FycmF5KGQpID8geChwYXJzZUp1bGlhbkRheShkWzBdKSkgOiB4KChpICogOCkgKyAzICkpOyB9KVxuICAgICAgICAueShmdW5jdGlvbihkKSB7IHJldHVybiAoQXJyYXkuaXNBcnJheShkKSA/IHkoZFsxXSkgOiB5KGQpKTsgfSk7XG5cbiAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwib3ZlcmxhcHBpbmctZ3JhcGhcIiwgdHJ1ZSk7XG5cbiAgICAvLyBBZGRzIHRoZSBzdmcgY2FudmFzXG4gICAgdmFyIHN2ZyA9IHdyYXBwZXJcbiAgICAgICAgLmFwcGVuZChcInN2Z1wiKVxuICAgICAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHcgPSB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0XG4gICAgICAgICAgICAgICAgdmFyIGggPSBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbVxuICAgICAgICAgICAgICAgIHJldHVybiAnMCAwICcgKyB3ICsgJyAnICsgaFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJylcbiAgICAgICAgICAgIC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuICAgICAgICAgICAgLy8uYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcbiAgICAgICAgLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsXG4gICAgICAgICAgICAgICAgICBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xuXG4gICAgc3ZnLmNhbGwodGlwKTtcblxuICAgIC8vIEFkZCB0aGUgWCBBeGlzXG4gICAgc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInggYXhpc1wiKVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpXG4gICAgICAgIC5jYWxsKHhBeGlzKTtcblxuICAgIC8vIEFkZCB0aGUgWSBBeGlzXG4gICAgc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInkgYXhpc1wiKVxuICAgICAgICAuY2FsbCh5QXhpcyk7XG5cbiAgICBjaGFydHNbXCJtZWFuc1wiXSA9IHtcbiAgICAgICAgXCJwYXRoXCIgOiBkcmF3TGluZWFyUGF0aChkYXRhW1wibWVhbnNcIl0sIHZhbHVlbGluZSwgc3ZnKVxuICAgIH07XG5cbiAgICBjaGFydHNbeWVhcl0gPSB7XG4gICAgICAgIFwicGF0aFwiIDogZHJhd0xpbmVhclBhdGgoZGF0YVt5ZWFyXSwgdmFsdWVsaW5lLCBzdmcpXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XG4gICAgICovXG4gICAgY2hhcnRzW1wibWVhbnNcIl1bXCJwb2ludHNcIl0gPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbXCJtZWFuc1wiXSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcbiAgICBjaGFydHNbeWVhcl1bXCJwb2ludHNcIl0gPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbeWVhcl0sIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cbiAgICB2YXIgaW5wdXR3cmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcImlucHV0LXdyYXBwZXJcIiwgdHJ1ZSk7XG5cbiAgICBkYXRhLmtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwga2V5LCBcIm92ZXJsYXBwaW5nXCIsIHllYXIsIGNoYXJ0cywgZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzLCBsYXQsIGxuZyk7XG4gICAgfSk7XG5cbiAgICBjcmVhdGVDaGVja2JveChpbnB1dHdyYXBwZXIsIFwibWVhbnNcIiwgXCJvdmVybGFwcGluZ1wiLCBcIm1lYW5zXCIsIGNoYXJ0cywgZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzLCBsYXQsIGxuZyk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gUE9MQVIgR1JBUEggLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzIChkYXRhLCBkaXYsIGxhdCwgbG5nKSB7XG4gICAgdmFyIHllYXIgPSBcIjIwMTVcIjtcbiAgICB2YXIgd2lkdGggPSA0OTAsXG4gICAgICAgIGhlaWdodCA9IDQ5MCxcbiAgICAgICAgcmFkaXVzID0gTWF0aC5taW4od2lkdGgsIGhlaWdodCkgLyAyIC0gMzA7XG5cbiAgICB2YXIgYXZlcmFnZXMgPSBkYXRhW1wibWVhbnNcIl07XG4gICAgdmFyIGNlbnRlciA9IGZpbmRQb2xhckNlbnRlcihkYXRhKTtcbiAgICB2YXIgdGhyZXNob2xkcyA9IGZpbmRQb2xhclRocmVzaG9sZHMoYXZlcmFnZXMsIGNlbnRlclsxXVswXSk7XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHVwIHNjYWxpbmcgb2YgZGF0YS4gV2Uga25vdyB0aGF0IHRoZSBuZHZpIHZhbHVlcyBmYWxsIGJldHdlZW5cbiAgICAgKiAwICYgMTAwIHNvIHdlIHNldCBvdXIgZG9tYWluIHRvIHRoYXQuIFRoZSByYW5nZSBjb250cm9scyB3aGVyZSB0aGVcbiAgICAgKiBwb2ludHMgd2lsbCBsaWUgaW4gb3VyIGdyYXBoLCBzbyB3ZSBzZXQgdGhlbSB0byBiZSBiZXR3ZWVuIDAgYW5kIHRoZVxuICAgICAqIHJhZGl1cy5cbiAgICAgKi9cbiAgICB2YXIgciA9IGQzLnNjYWxlTGluZWFyKClcbiAgICAgICAgLmRvbWFpbihbMCwgMTAwXSlcbiAgICAgICAgLnJhbmdlKFswLCByYWRpdXNdKTtcblxuICAgIC8qKlxuICAgICAqIGZ1bmN0aW9uIHdoaWNoIHdpbGwgZHJhdyBlYWNoIHBvaW50LiBUbyBjb21wdXRlIHRoZSBkaXN0YW5jZSBmcm9tIHRoZVxuICAgICAqIGNlbnRlciBlYWNoIHBvaW50IGlzIHdlIHBhc3MgdGhlIGRhdGFwb2ludCB0byB0aGUgZnVuY3Rpb24gZGVmaW5lZCBhYm92ZS5cbiAgICAgKiBUbyBkZXRlcm1pbmUgdGhlIGFuZ2xlIGZyb20gdGhlIG9yaWdpbiB3ZSBuZWVkIHRvIGNvbnZlcnQgdGhlIGRheSB0b1xuICAgICAqIHJhZGlhbnMsIHNvIHdlIGNvbnZlcnQgdGhlIGRheSB0byBhIG51bWJlciBiZXR3ZWVuIDAgJiAxIGFuZCB0aGVuIG11bHRpcGx5XG4gICAgICogaXQgYnkgMiBwaS5cbiAgICAgKi9cbiAgICB2YXIgbGluZSA9IGQzLnJhZGlhbExpbmUoKVxuICAgICAgICAucmFkaXVzKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyByKGRbMV0pIDogcihkKTsgfSlcbiAgICAgICAgLmFuZ2xlKGZ1bmN0aW9uKGQsIGkpIHtcbiAgICAgICAgICAgIHZhciBkYXkgPSBBcnJheS5pc0FycmF5KGQpID8gcGFyc2VKdWxpYW5EYXkoZFswXSkgOiAoaSAqIDgpICsgMztcbiAgICAgICAgICAgIHJldHVybiAoKCgoZGF5IC0gMSklMzY1KS8zNjUpICogKDIqTWF0aC5QSSkpO1xuICAgICAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgdGhlIGNhbnZhcyB3aGVyZSB0aGUgY2lyY2xlIHdpbGwgYmUgZHJhd24uXG4gICAgICovXG4gICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcInBvbGFyLWdyYXBoXCIsIHRydWUpO1xuICAgIHZhciBzdmcgPSB3cmFwcGVyLmFwcGVuZChcInN2Z1wiKVxuICAgICAgICAvLy5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG4gICAgICAgIC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICAuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAnMCAwICcrIHdpZHRoICsgJyAnICsgaGVpZ2h0XG4gICAgICAgIH0pXG4gICAgICAgIC5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJylcbiAgICAgICAgLmFwcGVuZChcImdcIilcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB3aWR0aCAvIDIgKyBcIixcIiArIGhlaWdodCAvIDIgKyBcIilcIik7XG5cbiAgICBzdmcuY2FsbCh0aXApO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBiaWcgY2lyY2xlcyBvZiB0aGUgZ3JhcGggJiB0aGVpciBsYWJlbHNcbiAgICAgKi9cbiAgICB2YXIgZ3IgPSBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiciBheGlzXCIpXG4gICAgICAgIC5zZWxlY3RBbGwoXCJnXCIpXG4gICAgICAgIC5kYXRhKHIudGlja3MoNSkuc2xpY2UoMSkpXG4gICAgICAgIC5lbnRlcigpLmFwcGVuZChcImdcIik7XG5cbiAgICBnci5hcHBlbmQoXCJjaXJjbGVcIilcbiAgICAgICAgLmF0dHIoXCJyXCIsIHIpO1xuXG4gICAgZ3IuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gLXIoZCkgLSA0OyB9KVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInJvdGF0ZSgxNSlcIilcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZDsgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGxhYmVscyBmb3IgZWFjaCBtb250aCBhbmQgdGhlIGxpbmVzXG4gICAgICogdGhhdCBnbyBvdXQgdG8gdGhlbS5cbiAgICAgKi9cbiAgICB2YXIgZ2FfYSA9IHN2Zy5hcHBlbmQoXCJnXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJhIGF4aXNcIilcbiAgICAgICAgLnNlbGVjdEFsbChcImdcIilcbiAgICAgICAgLmRhdGEoZDMucmFuZ2UoMCwgMzYwLCAzMCkpXG4gICAgICAgIC5lbnRlcigpLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwicm90YXRlKFwiICsgKGQgLSA5MCkgKyBcIilcIjsgfSk7XG5cbiAgICBnYV9hLmFwcGVuZChcImxpbmVcIilcbiAgICAgICAgLmF0dHIoXCJ4MlwiLCByYWRpdXMpO1xuXG4gICAgZ2FfYS5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgIC5hdHRyKFwieFwiLCByYWRpdXMgKyA2KVxuICAgICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJlbmRcIiA6IG51bGw7IH0pXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQgPCAzNjAgJiYgZCA+IDE4MCA/IFwicm90YXRlKDE4MCBcIiArIChyYWRpdXMgKyA2KSArIFwiLDApXCIgOiBudWxsOyB9KVxuICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBNT05USF9MQUJFTFNbZC8zMF07IH0pO1xuXG4gICAgLyoqXG4gICAgICogRHJhd3MgdGhlIHRocmVzaG9sZCBsaW5lc1xuICAgICAqL1xuICAgIHZhciB0aHJlc2hvbGRFbGVtID0gc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgLnNlbGVjdEFsbChcImdcIilcbiAgICAgICAgLmRhdGEodGhyZXNob2xkcylcbiAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJyb3RhdGUoXCIgKyAoZC5kYXRhWzFdWzBdIC0gOTApICsgXCIpXCI7IH0pO1xuXG4gICAgdGhyZXNob2xkRWxlbS5hcHBlbmQoXCJsaW5lXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpXG4gICAgICAgIC5hdHRyKFwieDJcIiwgcmFkaXVzKTtcblxuICAgIHRocmVzaG9sZEVsZW0uYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24gKGQpIHsgdmFyIGRheSA9IGQuZGF0YVsxXVswXTsgcmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyByYWRpdXMgKyAzMCA6IHJhZGl1cyAtIDMwfSlcbiAgICAgICAgLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiAoKCgoZC5kYXRhWzFdWzBdKSUzNjUpLzM2NSkgKiAoMipNYXRoLlBJKSkgKyA2OyB9KVxuICAgICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdOyByZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IFwibWlkZGxlXCIgOiBudWxsOyB9KVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHZhciBkYXkgPSBkLmRhdGFbMV1bMF07IHJldHVybiBkYXkgPCAzNjAgJiYgZGF5ID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7IH0pXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQubGFiZWw7IH0pO1xuXG4gICAgLyoqXG4gICAgICogRHJhd3MgdGhlIGxpbmUgdG8gdGhlIGNlbnRlciBvZiB0aGUgZGF0YVxuICAgICAqL1xuICAgIHZhciBjZW50ZXJEYXkgPSBjZW50ZXJbMV1bMF07XG4gICAgdmFyIGNlbnRlckRheU9wcG9zaXRlID0gKGNlbnRlckRheSArICgzNjUvMikpICUgMzY1O1xuICAgIHZhciBjZW50ZXJEYXlEYXRhID0gW2NlbnRlckRheSwgMTAwXTtcbiAgICB2YXIgY2VudGVyRGF5T3Bwb3NpdGVEYXRhID0gW2NlbnRlckRheU9wcG9zaXRlLCAxMDBdO1xuICAgIHZhciBncm93aW5nU2Vhc29uRGF0YSA9IFtjZW50ZXJEYXlEYXRhLCBjZW50ZXJEYXlPcHBvc2l0ZURhdGFdXG5cbiAgICBkcmF3UG9sYXJQYXRoKGdyb3dpbmdTZWFzb25EYXRhLCBsaW5lLCBzdmcpXG4gICAgICAgIC5jbGFzc2VkKFwiZ3Jvd2luZy1zZWFzb24tbGluZVwiLCBcInRydWVcIik7XG5cbiAgICBkcmF3UG9sYXJQYXRoKGNlbnRlciwgbGluZSwgc3ZnKVxuICAgICAgICAuY2xhc3NlZChcImNlbnRlci1saW5lXCIsIFwidHJ1ZVwiKTtcblxuICAgIHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKVxuICAgICAgICAuZGF0YShbY2VudGVyWzFdXSlcbiAgICAgICAgLmVudGVyKClcbiAgICAgICAgLmFwcGVuZChcImNpcmNsZVwiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiY2VudGVyXCIpXG4gICAgICAgIC5hdHRyKFwiclwiLCA0KVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtkXSkuc2xpY2UoMSkuc2xpY2UoMCwgLTEpO1xuICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgY29vcnMgKyBcIilcIlxuICAgICAgICB9KVxuICAgICAgICAuYXR0cihcInN0cm9rZVwiLCBcIiMwMDBcIilcbiAgICAgICAgLmF0dHIoXCJmaWxsXCIsIFwiI2VhMGM0OFwiKVxuICAgICAgICAub24oXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgdGlwLnNob3coXCJDZW50ZXI6IFwiICArIFN0cmluZyhkWzFdKS5zdWJzdHJpbmcoMCwgNykpO1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDUpXG4gICAgICAgIH0pXG4gICAgICAgIC5vbihcIm1vdXNlb3V0XCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICB0aXAuaGlkZSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDQpXG4gICAgICAgIH0pO1xuXG4gICAgdmFyIGNoYXJ0cyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBsaW5lIHRoYXQgdGhlIGRhdGEgZm9sbG93c1xuICAgICAqL1xuICAgIGNoYXJ0c1tcIm1lYW5zXCJdID0ge1xuICAgICAgICBcInBhdGhcIiA6IGRyYXdQb2xhclBhdGgoYXZlcmFnZXMsIGxpbmUsIHN2ZylcbiAgICB9O1xuXG4gICAgY2hhcnRzW3llYXJdID0ge1xuICAgICAgICBcInBhdGhcIiA6IGRyYXdQb2xhclBhdGgoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnKVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxuICAgICAqL1xuICAgIGNoYXJ0cy5tZWFucy5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGF2ZXJhZ2VzLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcbiAgICBjaGFydHNbeWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW3llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblxuICAgIHZhciBpbnB1dHdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwiaW5wdXQtd3JhcHBlclwiLCB0cnVlKTtcblxuICAgIGRhdGEua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgY3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBrZXksIFwicG9sYXJcIiwgeWVhciwgY2hhcnRzLCBkYXRhLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzLCBsYXQsIGxuZyk7XG4gICAgfSk7XG5cbiAgICBjcmVhdGVDaGVja2JveChpbnB1dHdyYXBwZXIsIFwibWVhbnNcIiwgXCJwb2xhclwiLCBcIm1lYW5zXCIsIGNoYXJ0cywgZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpO1xuXG4gICAgdmFyIHRocmVzaG9sZENoZWNrYm94PSBpbnB1dHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgIC5jbGFzc2VkKFwidGhyZXNob2xkLWNoZWNrYm94XCIsIHRydWUpO1xuXG4gICAgdGhyZXNob2xkQ2hlY2tib3guYXBwZW5kKFwiaW5wdXRcIilcbiAgICAgICAgLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIilcbiAgICAgICAgLmF0dHIoXCJpZFwiLCBcInRocmVzaG9sZC1jaGVja2JveC1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcbiAgICAgICAgLnByb3BlcnR5KFwiY2hlY2tlZFwiLCB0cnVlKVxuICAgICAgICAub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRocmVzaG9sZEVsZW0uc3R5bGUoXCJvcGFjaXR5XCIsICh0aGlzLmNoZWNrZWQpID8gMSA6IDApO1xuICAgICAgICAgICAgdmFyIG9mZm9uID0gdGhpcy5jaGVja2VkID8gJ29mZicgOiAnb24nO1xuXG4gICAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBncmFwaCB0aHJlc2hvbGQgY2xpY2sgb2ZmXG4gICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcbiAgICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG4gICAgICAgICAgICAgIGV2ZW50TGFiZWw6ICAndGhyZXNob2xkIHBvbGFyIHRpbWVzZXJpZXMgJyArIG9mZm9uLFxuICAgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgIHRocmVzaG9sZENoZWNrYm94LmFwcGVuZChcImxhYmVsXCIpXG4gICAgICAgIC50ZXh0KFwiVGhyZXNob2xkc1wiKVxuICAgICAgICAuYXR0cihcImZvclwiLCBcInRocmVzaG9sZC1jaGVja2JveC1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG59XG5cbi8qIFBPTEFSIEdSQVBIIEhFTFBFUlMgKi9cblxuZnVuY3Rpb24gZmluZFBvbGFyQ2VudGVyIChkYXRhKSB7XG4gICAgdmFyIGksIGosIGxlbmd0aCwgYXJyO1xuICAgIHZhciB0b3RhbFN1bSA9IDA7XG4gICAgdmFyIGluY29tcGxldGVZZWFycyA9IDA7XG4gICAgdmFyIHN1bTtcbiAgICBsZW5ndGggPSA0NjtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJyID0gZGF0YVtkYXRhLmtleXNbaV1dO1xuICAgICAgICBpZiAoYXJyLmxlbmd0aCAhPT0gbGVuZ3RoKSB7XG4gICAgICAgICAgICBpbmNvbXBsZXRlWWVhcnMrKztcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHN1bSA9IDA7XG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBsZW5ndGgvMjsgaisrKSB7XG4gICAgICAgICAgICBzdW0gKz0gKGFycltqXVsxXSAtIGFycltqKzIzXVsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgc3VtID0gc3VtIC8gMjM7XG4gICAgICAgIHRvdGFsU3VtICs9IHN1bTtcbiAgICB9XG4gICAgdG90YWxTdW0gPSBNYXRoLmFicyh0b3RhbFN1bSkgLyAoZGF0YS5rZXlzLmxlbmd0aCAtIGluY29tcGxldGVZZWFycyk7XG5cbiAgICB2YXIgYXJlYURpZmYgPSAxMDAwMDAwO1xuICAgIHZhciBjaGVja0RpZmY7XG4gICAgdmFyIGFyZWFJbmRleCA9IDA7XG4gICAgdmFyIGxlZnRBcmVhLCByaWdodEFyZWE7XG4gICAgdmFyIGF2Z3MgPSBkYXRhLm1lYW5zO1xuICAgIHZhciBrLCBjb3VudGVyO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aC8yOyBpKyspIHtcbiAgICAgICAgbGVmdEFyZWEgPSAwO1xuICAgICAgICByaWdodEFyZWEgPSAwO1xuICAgICAgICBmb3IgKGNvdW50ZXIgPSAwOyBjb3VudGVyIDwgbGVuZ3RoLzI7IGNvdW50ZXIrKykge1xuICAgICAgICAgICAgaiA9IChpICsgY291bnRlcikgJSA0NjtcbiAgICAgICAgICAgIGsgPSAoaiArIDIzKSAlIDQ2O1xuXG4gICAgICAgICAgICBsZWZ0QXJlYSArPSBwYXJzZUludChhdmdzW2pdLCAxMCk7XG4gICAgICAgICAgICByaWdodEFyZWEgKz0gcGFyc2VJbnQoYXZnc1trXSwxMCk7XG4gICAgICAgIH1cbiAgICAgICAgY2hlY2tEaWZmID0gTWF0aC5hYnMobGVmdEFyZWEgLSByaWdodEFyZWEpO1xuICAgICAgICBpZiAoY2hlY2tEaWZmIDwgYXJlYURpZmYpIHtcbiAgICAgICAgICAgIGFyZWFEaWZmID0gY2hlY2tEaWZmO1xuICAgICAgICAgICAgYXJlYUluZGV4ID0gaTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBmaXJzdFJhZGl1cyA9IHBhcnNlSW50KGF2Z3NbYXJlYUluZGV4XSwgMTApO1xuICAgIHZhciBzZWNvbmRSYWRpdXMgPSBwYXJzZUludCgtYXZnc1thcmVhSW5kZXggKyAyM10sIDEwKTtcblxuICAgIHZhciBmaXJzdERpZmYgPSBNYXRoLmFicyh0b3RhbFN1bSAtIGZpcnN0UmFkaXVzKSAtIE1hdGguYWJzKHRvdGFsU3VtIC0gc2Vjb25kUmFkaXVzKTtcbiAgICB2YXIgc2Vjb25kRGlmZiA9IE1hdGguYWJzKC10b3RhbFN1bSAtIGZpcnN0UmFkaXVzKSAtIE1hdGguYWJzKC10b3RhbFN1bSAtIHNlY29uZFJhZGl1cyk7XG4gICAgaWYgKHNlY29uZERpZmYgPiBmaXJzdERpZmYpIHtcbiAgICAgICAgYXJlYUluZGV4ID0gYXJlYUluZGV4ICsgMjM7XG4gICAgfVxuXG4gICAgdmFyIGNpcmNsZWNlbnRlciA9IFswLCAwXTtcbiAgICB2YXIgZGF0YWNlbnRlciA9IFsoYXJlYUluZGV4ICogOCkgKyAzLCB0b3RhbFN1bV07XG5cbiAgICByZXR1cm4oW2NpcmNsZWNlbnRlciwgZGF0YWNlbnRlcl0pO1xufVxuXG4vKipcbiAqIHN0YXJ0RGF5IGlzIGFjdHVhbGx5IHRoZSBzZWFzb25hbGl0eSBpbmRleCwgaWYgaXQgb2NjdXJzIGFmdGVyIGp1bHkgaXQgc2hvdWxkIGJlIGZsaXBwZWRcbiAqL1xuZnVuY3Rpb24gZmluZFBvbGFyVGhyZXNob2xkcyAoZGF0YSwgc3RhcnREYXkpIHtcbiAgICB2YXIgc3RhcnRJbmRleCA9IE1hdGguZmxvb3IoKHN0YXJ0RGF5IC0gMykgLyA4KTtcbiAgICBpZiAoc3RhcnRJbmRleCA+IDIyKSB7XG4gICAgICAgIHN0YXJ0SW5kZXggPSBzdGFydEluZGV4IC0gMjM7XG4gICAgfVxuXG4gICAgdmFyIGksIGosIGxlbmd0aCwgYXJyO1xuICAgIHZhciB0b3RhbFN1bSA9IDA7XG4gICAgdmFyIHN1bTtcbiAgICBsZW5ndGggPSA0NjtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBqID0gKHN0YXJ0SW5kZXggKyBpKSAlIGxlbmd0aDtcbiAgICAgICAgdG90YWxTdW0gKz0gcGFyc2VJbnQoZGF0YVtqXSwgMTApO1xuICAgIH1cblxuICAgIHZhciBmaWZ0ZWVuVGhyZXNob2xkID0gdG90YWxTdW0gKiAuMTU7XG4gICAgdmFyIGVpZ2h0eVRocmVzaG9sZCA9IHRvdGFsU3VtICogLjgwO1xuICAgIHZhciBmaWZ0ZWVuSW5kZXhGb3VuZCA9IGZhbHNlLFxuICAgICAgICBlaWdodHlJbmRleEZvdW5kID0gZmFsc2U7XG4gICAgdmFyIGZpZnRlZW5JbmRleCwgZWlnaHR5SW5kZXg7XG5cbiAgICB0b3RhbFN1bSA9IDA7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGogPSAoc3RhcnRJbmRleCArIGkpICUgbGVuZ3RoO1xuICAgICAgICB0b3RhbFN1bSArPSBwYXJzZUludChkYXRhW2pdLCAxMCk7XG4gICAgICAgIGlmICghZmlmdGVlbkluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBmaWZ0ZWVuVGhyZXNob2xkKSB7XG4gICAgICAgICAgICBmaWZ0ZWVuSW5kZXggPSBqO1xuICAgICAgICAgICAgZmlmdGVlbkluZGV4Rm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlaWdodHlJbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZWlnaHR5VGhyZXNob2xkKSB7XG4gICAgICAgICAgICBlaWdodHlJbmRleCA9IGo7XG4gICAgICAgICAgICBlaWdodHlJbmRleEZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGNpcmNsZUNlbnRlciA9IFswLCAwXTtcblxuICAgIHZhciBmaWZ0ZWVuRW5kID0gWyhmaWZ0ZWVuSW5kZXggKiA4KSArIDMsIDEwMF07XG4gICAgdmFyIGVpZ2h0eUVuZCA9IFsoZWlnaHR5SW5kZXggKiA4KSArIDMsIDEwMF07XG5cbiAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgICBcImxhYmVsXCIgOiBcIjE1JVwiLFxuICAgICAgICAgICAgXCJkYXRhXCIgOiBbY2lyY2xlQ2VudGVyLCBmaWZ0ZWVuRW5kXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBcImxhYmVsXCIgOiBcIjgwJVwiLFxuICAgICAgICAgICAgXCJkYXRhXCIgOiBbY2lyY2xlQ2VudGVyLCBlaWdodHlFbmRdXG4gICAgICAgIH1cbiAgICBdO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSEVMUEVSUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBkcmF3TGluZWFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcbiAgICByZXR1cm4gc3ZnLmFwcGVuZChcInBhdGhcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIilcbiAgICAgICAgLmF0dHIoXCJkXCIsIGxpbmUoZGF0YSkpO1xufVxuXG5mdW5jdGlvbiBkcmF3UG9sYXJQYXRoKGRhdGEsIGxpbmUsIHN2Zykge1xuICAgIHJldHVybiBzdmcuYXBwZW5kKFwicGF0aFwiKVxuICAgICAgICAuZGF0dW0oZGF0YSlcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIilcbiAgICAgICAgLmF0dHIoXCJkXCIsIGxpbmUpO1xufVxuXG5mdW5jdGlvbiBkcmF3TGluZWFyUG9pbnRzKGRhdGEsIGxpbmUsIHN2ZywgYXZlcmFnZXMpIHtcbiAgICByZXR1cm4gc3ZnLnNlbGVjdEFsbChcInBvaW50XCIpXG4gICAgICAgIC5kYXRhKGRhdGEpXG4gICAgICAgIC5lbnRlcigpXG4gICAgICAgIC5hcHBlbmQoXCJjaXJjbGVcIilcbiAgICAgICAgLmF0dHIoXCJyXCIsIDIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJwb2ludFwiKVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICB2YXIgcG9pbnQgPSBBcnJheS5pc0FycmF5KGQpID8gZCA6IFsoaSo4KSArIDMsIGRdO1xuICAgICAgICAgICAgdmFyIGNvb3JzID0gbGluZShbcG9pbnRdKS5zbGljZSgxKS5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBjb29ycyArIFwiKVwiXG4gICAgICAgIH0pXG4gICAgICAgIC8vLmF0dHIoXCJyXCIsIDMpXG4gICAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwiIzAwMFwiKVxuICAgICAgICAuYXR0cihcImZpbGxcIixmdW5jdGlvbihkLGkpe1xuICAgICAgICAgICAgdmFyIHZhbCA9IEFycmF5LmlzQXJyYXkoZCkgPyBkWzBdLnN1YnN0cmluZygwLCA0KSA6IDA7XG4gICAgICAgICAgICByZXR1cm4gcHVsbERpc3RpbmN0Q29sb3IodmFsKVxuICAgICAgICB9KVxuICAgICAgICAub24oXCJtb3VzZW92ZXJcIiwgaGFuZGxlUG9pbnRNb3VzZW92ZXIpXG4gICAgICAgIC5vbihcIm1vdXNlb3V0XCIsIGhhbmRsZVBvaW50TW91c2VvdXQpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVQb2ludE1vdXNlb3ZlcihkKSB7XG4gICAgdmFyIHRpcFN0cmluZyA9IEFycmF5LmlzQXJyYXkoZCkgPyBmb3JtYXREYXRlKGRbMF0pICsgXCI6IFwiICArIGRbMV0gOiBcIkF2ZXJhZ2U6IFwiICArIGQ7XG4gICAgdGlwLnNob3codGlwU3RyaW5nKTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgXCI0XCIpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVQb2ludE1vdXNlb3V0KGQpIHtcbiAgICB0aXAuaGlkZSgpO1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCBcIjJcIik7XG5cbiAgICB2YXIgYWN0aXZlVHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF0uZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKTtcblxuICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvb2wgdGlwIG9uIGdyYXBoIGRvIHRoaXMgb24gdGhlIG1vdXNlb3V0IHNvIG1vdXNlb3ZlciBkb3NlIG5vdCBkbyBhIGxvdCBvZiBldmVudHMuLi4uXG4gICAgLy8gd2UgbWlzcyBhIGZldyBidXQgdGhhdCBpcyBiZXR0ZXIgdGhhbiBvdmVyIGNvdW50aW5nLlxuICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcbiAgICAgIGV2ZW50QWN0aW9uOiAnaG92ZXInLFxuICAgICAgZXZlbnRMYWJlbDogYWN0aXZlVHlwZSArICcgdG9vbCB0aXAnLFxuICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNoZWNrYm94KHdyYXBwZXIsIGtleSwgdHlwZSwgeWVhciwgY2hhcnRzLCBkYXRhLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzLCBsYXQsIGxuZykge1xuICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblxuICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJpbnB1dFwiKVxuICAgICAgICAuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKVxuICAgICAgICAuYXR0cihcImlkXCIsIHR5cGUgKyBcIi1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcbiAgICAgICAgLmF0dHIoXCJ2YWx1ZVwiLCBrZXkpXG4gICAgICAgIC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgKGtleSA9PT0geWVhcikgPyB0cnVlIDogZmFsc2UpXG4gICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZ3JhcGggeWVhciBjbGljayBvZmZcbiAgICAgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXG4gICAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcbiAgICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6ICBuZXdZZWFyICsgJyAnICsgdHlwZSArICcgdGltZXNlcmllcyBvZmYnLFxuICAgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGFydHMuaGFzT3duUHJvcGVydHkobmV3WWVhcikpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd0xpbmVhclBhdGgoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnKTtcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblxuICAgICAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGdyYXBoIHllYXIgY2xpY2sgb25cbiAgICAgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXG4gICAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcbiAgICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6ICBuZXdZZWFyICsgJyAnICsgdHlwZSArICcgdGltZXNlcmllcyBvbicsXG4gICAgICAgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwibGFiZWxcIilcbiAgICAgICAgLnRleHQoa2V5ICE9PSBcIm1lYW5zXCIgPyBrZXkgOiBcIkJhc2VsaW5lXCIpXG4gICAgICAgIC5hdHRyKFwiZm9yXCIsIHR5cGUgKyBcIi1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG5cbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgIC5zdHlsZShcImJhY2tncm91bmRcIiwgcHVsbERpc3RpbmN0Q29sb3Ioa2V5ICE9PSBcIm1lYW5zXCIgPyBrZXkgOiAwKSlcbiAgICAgICAgLmNsYXNzZWQoXCJncmFwaC1waXAtZXhhbXBsZVwiLCB0cnVlKTtcbn1cblxuZnVuY3Rpb24gcHVsbERpc3RpbmN0Q29sb3IgKHllYXIpIHtcbiAgICB2YXIgY29sb3JSYW1wID0gW1xuICAgICAgICBcIiNmZmU0NzZcIixcbiAgICAgICAgXCIjMDM2NTkzXCIsXG4gICAgICAgIFwiIzExNmM5MVwiLFxuICAgICAgICBcIiMxZTczOTBcIixcbiAgICAgICAgXCIjMmM3YjhlXCIsXG4gICAgICAgIFwiIzM5ODI4Y1wiLFxuICAgICAgICBcIiM0YzhjOGFcIixcbiAgICAgICAgXCIjNWU5NTg5XCIsXG4gICAgICAgIFwiIzcxOWY4N1wiLFxuICAgICAgICBcIiM4M2E4ODZcIixcbiAgICAgICAgXCIjOTViMTgzXCIsXG4gICAgICAgIFwiI2E2YmE4MFwiLFxuICAgICAgICBcIiNiOGMzN2NcIixcbiAgICAgICAgXCIjY2FjYzc5XCIsXG4gICAgICAgIFwiI2Q2ZDI3OVwiLFxuICAgICAgICBcIiNlMmQ3NzlcIixcbiAgICAgICAgXCIjZWZkZDc4XCIsXG4gICAgICAgIFwiI2ZiZTM3OFwiXG4gICAgXTtcblxuICAgIHJldHVybiAoeWVhciA9PT0gMCkgPyBcIiNmZmZcIiA6IGNvbG9yUmFtcFtwYXJzZUludCh5ZWFyLCAxMCkgJSBjb2xvclJhbXAubGVuZ3RoXTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBEQVRFIEhFTFBFUlMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIHBhcnNlRGF0ZSAoZGF0ZSkge1xuICAgIGRhdGUgPSBkYXRlLnRvU3RyaW5nKCk7XG4gICAgdmFyIHllYXIgPSBkYXRlLnN1YnN0cmluZygwLCA0KTtcbiAgICB2YXIgbW9udGggPSBwYXJzZUludChkYXRlLnN1YnN0cmluZyg0LCA2KSwgMTApIC0gMTtcbiAgICB2YXIgZGF5ID0gZGF0ZS5zdWJzdHJpbmcoNiwgOCk7XG5cbiAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlSnVsaWFuRGF5IChkYXRlKSB7XG4gICAgaWYgKHR5cGVvZihkYXRlKSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBkYXRlID0gcGFyc2VEYXRlKGRhdGUpO1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXRET1koKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdERhdGUgKGRhdGUpIHtcbiAgICBpZiAoZGF0ZSA9PT0gXCJBdmVyYWdlXCIpIHsgcmV0dXJuIGRhdGU7IH1cblxuICAgIGRhdGUgPSBwYXJzZURhdGUoZGF0ZSk7XG4gICAgcmV0dXJuIGZvcm1hdE1vbnRoKGRhdGUuZ2V0TW9udGgoKSkgKyBcIiBcIiArIG9yZGluYWxfc3VmZml4X29mKGRhdGUuZ2V0RGF0ZSgpKSArIFwiLCBcIiArIGRhdGUuZ2V0RnVsbFllYXIoKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TW9udGggKG1vbnRoKSB7XG4gICAgcmV0dXJuIEZPUk1BVFRFRF9NT05USF9MQUJFTFNbbW9udGhdO1xufVxuXG5mdW5jdGlvbiBvcmRpbmFsX3N1ZmZpeF9vZihkYXkpIHtcbiAgICB2YXIgaiA9IGRheSAlIDEwLFxuICAgICAgICBrID0gZGF5ICUgMTAwO1xuICAgIGlmIChqID09PSAxICYmIGsgIT09IDExKSB7XG4gICAgICAgIHJldHVybiBkYXkgKyBcInN0XCI7XG4gICAgfVxuICAgIGlmIChqID09PSAyICYmIGsgIT09IDEyKSB7XG4gICAgICAgIHJldHVybiBkYXkgKyBcIm5kXCI7XG4gICAgfVxuICAgIGlmIChqID09PSAzICYmIGsgIT09IDEzKSB7XG4gICAgICAgIHJldHVybiBkYXkgKyBcInJkXCI7XG4gICAgfVxuICAgIHJldHVybiBkYXkgKyBcInRoXCI7XG59XG5cbnZhciBNT05USF9MQUJFTFMgPSB7XG4gICAgMDogXCJKYW5cIixcbiAgICAxOiBcIkZlYlwiLFxuICAgIDI6IFwiTWFyXCIsXG4gICAgMzogXCJBcHJcIixcbiAgICA0OiBcIk1heVwiLFxuICAgIDU6IFwiSnVuXCIsXG4gICAgNjogXCJKdWxcIixcbiAgICA3OiBcIkF1Z1wiLFxuICAgIDg6IFwiU2VwXCIsXG4gICAgOTogXCJPY3RcIixcbiAgICAxMDogXCJOb3ZcIixcbiAgICAxMTogXCJEZWNcIlxufTtcblxudmFyIEZPUk1BVFRFRF9NT05USF9MQUJFTFMgPSB7XG4gICAgMDogXCJKYW4uXCIsXG4gICAgMTogXCJGZWIuXCIsXG4gICAgMjogXCJNYXIuXCIsXG4gICAgMzogXCJBcHIuXCIsXG4gICAgNDogXCJNYXlcIixcbiAgICA1OiBcIkp1bi5cIixcbiAgICA2OiBcIkp1bC5cIixcbiAgICA3OiBcIkF1Zy5cIixcbiAgICA4OiBcIlNlcC5cIixcbiAgICA5OiBcIk9jdC5cIixcbiAgICAxMDogXCJOb3YuXCIsXG4gICAgMTE6IFwiRGVjLlwiXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvZ3JhcGguanMiLCJpbXBvcnQge3VwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHR9IGZyb20gXCIuL3BhbmVsXCI7XG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tIFwiLi9zaGFyZVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gQmluZFRhYkV2ZW50cyAoKSB7XG4gICAgZDMuc2VsZWN0QWxsKFwiLnBhbmVsLXRvcC1idG5cIikub24oXCJjbGlja1wiLCBoYW5kbGVUYWJIZWFkZXJCdG5DbGljayk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBHZXRBY3RpdmVUYWIgKCkge1xuICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicGFuZWwtdG9wLWJ0biBhY3RpdmVcIilbMF0uZ2V0QXR0cmlidXRlKFwiZGF0YS1hY3RpdmVcIik7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrICgpIHtcbiAgICAvLyBJZiB0aGUgc2VjdGlvbiBpcyBhbHJlYWR5IGFjdGl2ZSwgZG8gbm90aGluZ1xuICAgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkgcmV0dXJuO1xuICAgIFxuICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIGdyYXBoIHR5cGVcbiAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgIGV2ZW50Q2F0ZWdvcnk6ICd0YWInLFxuICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG4gICAgICBldmVudExhYmVsOiB0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtYWN0aXZlXCIpLFxuICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgfSk7XG5cbiAgICBIYW5kbGVUYWJDaGFuZ2UodGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWFjdGl2ZVwiKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBIYW5kbGVUYWJDaGFuZ2UgKG5ld0NsYXNzKSB7XG4gICAgZGlzYWJsZUFjdGl2ZVRhYigpO1xuICAgIGVuYWJsZVRhYihuZXdDbGFzcyk7XG4gICAgdXBkYXRlU2hhcmVVcmwoKTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlVGFiIChuZXdDbGFzcykge1xuICAgIGQzLnNlbGVjdChcIi5wYW5lbC10b3AtYnRuW2RhdGEtYWN0aXZlPSdcIiArIG5ld0NsYXNzICsgXCInXVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXAtd3JhcHBlclwiKS5jbGFzc0xpc3QuYWRkKG5ld0NsYXNzKVxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmlnaHQtcGFuZWxcIikuY2xhc3NMaXN0LmFkZChuZXdDbGFzcylcblxuICAgIGQzLnNlbGVjdChcIi5wYW5lbC1zZWN0aW9uLXdyYXBwZXJbZGF0YS1hY3RpdmU9J1wiICsgbmV3Q2xhc3MgKyBcIiddXCIpLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cbiAgICB0b2dnbGVNYXBQYWRkaW5nKCk7XG4gICAgcmVzZXRQYW5lbFdpZHRoKCk7XG4gICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpO1xufVxuXG5mdW5jdGlvbiBkaXNhYmxlQWN0aXZlVGFiICgpIHtcbiAgICB2YXIgYWN0aXZlQ2xhc3MgPSBkMy5zZWxlY3QoXCIucGFuZWwtdG9wLWJ0bi5hY3RpdmVcIikuYXR0cihcImRhdGEtYWN0aXZlXCIpO1xuXG4gICAgZDMuc2VsZWN0QWxsKCcjbWFwLXdyYXBwZXIsICNyaWdodC1wYW5lbCcpXG4gICAgICAgIC5jbGFzc2VkKGFjdGl2ZUNsYXNzLCBmYWxzZSk7XG5cbiAgICBkMy5zZWxlY3RBbGwoJy5wYW5lbC10b3AtYnRuLmFjdGl2ZSwgLnBhbmVsLXNlY3Rpb24td3JhcHBlci5hY3RpdmUnKVxuICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJywgZmFsc2UpO1xufVxuXG5mdW5jdGlvbiB0b2dnbGVNYXBQYWRkaW5nICgpIHtcbiAgICB2YXIgcGFkZGluZ1JpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyaWdodC1wYW5lbFwiKS5vZmZzZXRXaWR0aDtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcC13cmFwcGVyXCIpLnN0eWxlLnBhZGRpbmdSaWdodCA9IHBhZGRpbmdSaWdodCArIFwicHhcIjtcbn1cblxuLyoqXG4gKiBTaW5jZSB0aGUgcGFuZWwgaGFzIGNoaWxkIGVsZW1lbnRzIHdpdGggcG9zaXRpb24gZml4ZWQgYW5kIHdpZHRoIGluaGVyaXRcbiAqIHdlIG5lZWQgdG8gY2xlYXIgdGhlIGlubGluZSB3aWR0aCBwcm9wZXJ0eSBpZiBhbmQgb25seSBpZiB0aGUgaW5saW5lXG4gKiB3aWR0aCBpcyBsZXNzIHRoYW4gdGhlIG1pbiB3aWR0aFxuICovXG5mdW5jdGlvbiByZXNldFBhbmVsV2lkdGggKCkge1xuICAgIHZhciBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmlnaHQtcGFuZWxcIik7XG4gICAgdmFyIHdpZHRoID0gcGFuZWwuc3R5bGUud2lkdGg7XG4gICAgaWYgKCF3aWR0aCkgcmV0dXJuO1xuXG4gICAgdmFyIHBhbmVsTWluV2lkdGggPSBkMy5zZWxlY3QocGFuZWwpLnN0eWxlKCdtaW4td2lkdGgnKS5zbGljZSgwLCAtMik7XG4gICAgaWYgKHBhcnNlSW50KHdpZHRoLnNsaWNlKDAsIC0yKSwgMTApID4gcGFyc2VJbnQocGFuZWxNaW5XaWR0aCwgMTApKSByZXR1cm47XG5cbiAgICBwYW5lbC5zdHlsZS53aWR0aCA9IFwiXCI7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy90YWJzLmpzIiwiaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSAnLi9zaGFyZSdcbmltcG9ydCB7dXBkYXRlTGF5ZXJPcGFjaXR5fSBmcm9tIFwiLi9sYXllclwiO1xuXG4vLyBzZXQgaXQgbWFudWFsbHkgZm9yIG5vd1xuY29uc3QgT1BBQ0lUWV9SQU5HRV9NQVggPSA5MFxuXG52YXIgb3BhY2l0eVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuICAgIC5kb21haW4oWzEsIDBdKVxuICAgIC5yYW5nZShbMCwgT1BBQ0lUWV9SQU5HRV9NQVhdKVxuICAgIC5jbGFtcCh0cnVlKVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uIChsYXllciwgc2xpZGVySGFuZGxlLCBvcGFjaXR5KSB7XG4gICAgb3BhY2l0eSA9IG9wYWNpdHkgfHwgbGF5ZXIub3BhY2l0eVxuICAgIHNsaWRlckhhbmRsZS5zdHlsZS50b3AgPSAnJytvcGFjaXR5U2NhbGUob3BhY2l0eSkrJ3B4J1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZU9wYWNpdHlTbGlkZXIgKGxheWVyKSB7XG4gICAgdmFyIGxheWVyT3BhY2l0eSA9IGxheWVyLm9wYWNpdHkgIT09IHVuZGVmaW5lZCA/IGxheWVyLm9wYWNpdHkgOiAxXG4gICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHZhciBzbGlkZXJUcmFja092ZXJsYXkgPSBtYWtlU2xpZGVyVHJhY2sobGF5ZXIsIGxheWVyT3BhY2l0eSlcbiAgICB2YXIgaWNvbldyYXBwZXJDbG9zZWQgPSBtYWtlT3BhY2l0eUljb25XcmFwcGVyKCdjbG9zZWQnLCBsYXllciwgc2xpZGVyVHJhY2tPdmVybGF5KVxuXG4gICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci13cmFwcGVyJylcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNsaWRlclRyYWNrT3ZlcmxheSlcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGljb25XcmFwcGVyQ2xvc2VkKVxuICAgIHJldHVybiB3cmFwcGVyXG59XG5cbmZ1bmN0aW9uIG1ha2VPcGFjaXR5SWNvbldyYXBwZXIoc3RhdGUsIGxheWVyLCBzbGlkZXJUcmFja092ZXJsYXkpIHtcbiAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdmFyIGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxuICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1pY29uLXdyYXBwZXInKVxuICAgIGljb24uY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1pY29uJylcbiAgICBpY29uLmNsYXNzTGlzdC5hZGQoc3RhdGUpXG4gICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWdzL29wYWNpdHktaWNvbi0nK3N0YXRlKyctNjR4NjQucG5nJylcbiAgICBpY29uLnNldEF0dHJpYnV0ZSgnYWx0JywgJ1VzZSB0aGlzIHNsaWRlciB0byBhZGp1c3QgdHJhbnNwYXJlbmN5IGZvciB0aGUgJyArIGxheWVyLm5hbWUgKyAnIGxheWVyJylcbiAgICBpY29uLnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnVXNlIHRoaXMgc2xpZGVyIHRvIGFkanVzdCB0cmFuc3BhcmVuY3kgZm9yIHRoZSAnICsgbGF5ZXIubmFtZSArICcgbGF5ZXInKVxuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaWNvbilcbiAgICB3cmFwcGVyLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgc2xpZGVySGFuZGxlID0gc2xpZGVyVHJhY2tPdmVybGF5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ29wYWNpdHktc2xpZGVyLWhhbmRsZScpWzBdXG4gICAgICAgIHVwZGF0ZUxheWVyT3BhY2l0eShsYXllciwgMClcbiAgICAgICAgc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uKGxheWVyLCBzbGlkZXJIYW5kbGUsIDApXG4gICAgfVxuICAgIHJldHVybiB3cmFwcGVyXG59XG5cbmZ1bmN0aW9uIG1ha2VTbGlkZXJUcmFjayhsYXllciwgbGF5ZXJPcGFjaXR5KSB7XG5cbiAgICB2YXIgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdmFyIHRyYWNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB2YXIgc2xpZGVySGFuZGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcblxuICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1zbGlkZXItdHJhY2stb3ZlcmxheScpXG4gICAgdHJhY2suY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1zbGlkZXItdHJhY2snKVxuICAgIHNsaWRlckhhbmRsZS5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci1oYW5kbGUnKVxuXG4gICAgb3ZlcmxheS5hcHBlbmRDaGlsZCh0cmFjaylcbiAgICBvdmVybGF5LmFwcGVuZENoaWxkKHNsaWRlckhhbmRsZSlcblxuICAgIGlmIChsYXllci5hY3RpdmUpIHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbihsYXllciwgc2xpZGVySGFuZGxlKVxuICAgIHNldERyYWdFdmVudExpc3RlbmVyKG92ZXJsYXksIGxheWVyLCBsYXllck9wYWNpdHkpXG5cbiAgICByZXR1cm4gb3ZlcmxheVxufVxuXG5mdW5jdGlvbiBzZXREcmFnRXZlbnRMaXN0ZW5lcihvdmVybGF5LCBsYXllciwgbGF5ZXJPcGFjaXR5KSB7XG4gICAgZDMuc2VsZWN0KG92ZXJsYXkpLmNhbGwoZDMuZHJhZygpXG4gICAgICAgIC5vbignc3RhcnQgZHJhZycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzbGlkZXJIYW5kbGUgPSBvdmVybGF5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ29wYWNpdHktc2xpZGVyLWhhbmRsZScpWzBdXG4gICAgICAgICAgICB2YXIgbmV3T3BhY2l0eSA9IGNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zKG92ZXJsYXkpXG4gICAgICAgICAgICB1cGRhdGVMYXllck9wYWNpdHkobGF5ZXIsIG5ld09wYWNpdHkpXG4gICAgICAgICAgICBzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb24obGF5ZXIsIHNsaWRlckhhbmRsZSwgbmV3T3BhY2l0eSlcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdlbmQnLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICB2YXIgbmV3T3BhY2l0eSA9IGNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zKG92ZXJsYXkpXG5cbiAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBvcGFjaXR5IHNsaWRlciBjaGFuZ2VcbiAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdvcGFjaXR5IHNsaWRlcicsXG4gICAgICAgICAgICBldmVudEFjdGlvbjogJ2NoYW5nZScsXG4gICAgICAgICAgICBldmVudExhYmVsOiAne1wiJyArIGxheWVyLm5hbWUgKyAnXCI6IFwiJyArIG5ld09wYWNpdHkgKyAnXCJ9JyxcbiAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB1cGRhdGVTaGFyZVVybCgpXG4gICAgICAgIH0pXG4gICAgKVxufVxuXG5mdW5jdGlvbiBjYWxjT3BhY2l0eUZyb21Nb3VzZVBvcyhvdmVybGF5KSB7XG4gICAgdmFyIHlQb3MgPSBkMy5tb3VzZShvdmVybGF5KVsxXVxuICAgIHZhciBuZXdPcGFjaXR5ID0gb3BhY2l0eVNjYWxlLmludmVydCh5UG9zKVxuICAgIHJldHVybiBuZXdPcGFjaXR5XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9vcGFjaXR5U2xpZGVyLmpzIiwiLypcbiAgXCJsb2dvXCI6IHtcbiAgICBcImltYWdlXCI6IFwiaW1ncy9sYW5kYXRfbG9nb19ibHVlLnBuZ1wiLFxuICAgIFwiYWx0XCI6IFwiTG9nbyBmb3IgdGhlIExhbkRhdCBwcm9qZWN0XCIsXG4gICAgXCJsaW5rXCI6IFwiaHR0cHM6Ly9sYW5kYXQtZGV2Lm5lbWFjLm9yZ1wiLFxuICAgIFwibG9jYXRpb25cIjogW1wiYm90dG9tXCIsIFwicmlnaHRcIl1cbiAgfSxcbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENyZWF0ZUxvZ28gKGxvZ29kYXRhKSB7XG4gICAgaWYgKCFsb2dvZGF0YS5pbWFnZSkgcmV0dXJuO1xuXG4gICAgdmFyIGxvZ29XcmFwcGVyID0gY3JlYXRlTG9nb1dyYXBwZXIoKTtcbiAgICB2YXIgbG9nb0ltYWdlID0gY3JlYXRlTG9nb0ltYWdlKGxvZ29kYXRhKTtcbiAgICB2YXIgbG9nb0xpbmsgPSBsb2dvZGF0YS5saW5rID8gY3JlYXRlTG9nb0xpbmsobG9nb2RhdGEubGluaykgOiBudWxsO1xuXG4gICAgaWYgKGxvZ29MaW5rKSB7XG4gICAgICAgIGxvZ29MaW5rLmFwcGVuZENoaWxkKGxvZ29JbWFnZSk7XG4gICAgICAgIGxvZ29XcmFwcGVyLmFwcGVuZENoaWxkKGxvZ29MaW5rKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBsb2dvV3JhcHBlci5hcHBlbmRDaGlsZChsb2dvSW1hZ2UpO1xuICAgIH1cblxuICAgIHZhciBpbnNlcnRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShsb2dvZGF0YS5sb2NhdGlvbilbMF07XG4gICAgdmFyIGV4aXN0aW5nQ2hpbGQgPSBpbnNlcnRFbGVtZW50LmZpcnN0Q2hpbGQ7XG4gICAgaW5zZXJ0RWxlbWVudC5pbnNlcnRCZWZvcmUobG9nb1dyYXBwZXIsIGV4aXN0aW5nQ2hpbGQpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMb2dvV3JhcHBlciAoKSB7XG4gICAgdmFyIGxvZ29XcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBkMy5zZWxlY3QobG9nb1dyYXBwZXIpLmNsYXNzZWQoXCJwcm9qZWN0LWxvZ29cIiwgdHJ1ZSk7XG4gICAgcmV0dXJuIGxvZ29XcmFwcGVyO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMb2dvSW1hZ2UgKGxvZ29kYXRhKSB7XG4gICAgdmFyIGxvZ29JbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgbG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBsb2dvZGF0YS5pbWFnZSk7XG4gICAgaWYgKGxvZ29kYXRhLmxhYmVsKSB7XG4gICAgICAgIGxvZ29JbWFnZS5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgbG9nb2RhdGEubGFiZWwpO1xuICAgICAgICBsb2dvSW1hZ2Uuc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgbG9nb2RhdGEubGFiZWwpO1xuICAgIH1cbiAgICByZXR1cm4gbG9nb0ltYWdlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMb2dvTGluayAobGluaykge1xuICAgIHZhciBsb2dvTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgIGxvZ29MaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgbGluayk7XG4gICAgbG9nb0xpbmsuc2V0QXR0cmlidXRlKFwidGFyZ2V0XCIsIFwiX2JsYW5rXCIpO1xuXG4gICAgbG9nb0xpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBjbGlja2luZyBsb2dvXG4gICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG4gICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuICAgICAgICBldmVudExhYmVsOiAnbGFuZGF0IGxvZ28nLFxuICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGxvZ29MaW5rO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvbG9nby5qcyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEJpbmRNb2JpbGVNZW51RXZlbnRzICgpIHtcbiAgICBkMy5zZWxlY3RBbGwoXCIubW9iaWxlLW1lbnUtYnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlTW9iaWxlTWVudUJ0bkNsaWNrKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlTW9iaWxlTWVudUJ0bkNsaWNrICgpIHtcbiAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChcIiN3cmFwcGVyXCIpO1xuICAgIHZhciBzdGF0dXMgPSB3cmFwcGVyLmNsYXNzZWQoXCJtb2JpbGUtbWVudS1oaWRkZW5cIik7XG4gICAgd3JhcHBlci5jbGFzc2VkKFwibW9iaWxlLW1lbnUtaGlkZGVuXCIsICFzdGF0dXMpO1xuICAgIGRpc3BhY3RNb2JpbGVNZW51QnRuQ2xpY2tBbmFseXRpY3MoIXN0YXR1cyA/IFwib3BlbmluZ1wiIDogXCJjbG9zaW5nXCIpO1xufVxuXG5mdW5jdGlvbiBkaXNwYWN0TW9iaWxlTWVudUJ0bkNsaWNrQW5hbHl0aWNzIChzdGF0dXMpIHtcbiAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcbiAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21vYmlsZSBtZW51JyxcbiAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG4gICAgICAgIGV2ZW50TGFiZWw6ICdNb2JpbGUgTWVudSAnICsgIXN0YXR1cyxcbiAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG4gICAgfSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9tb2JpbGUuanMiXSwic291cmNlUm9vdCI6IiJ9