!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=r(o),i=n(3),c=r(i),s=n(22),u=r(s),l=n(23),f=r(l),p=n(24),d=n(25),h=r(d),v=n(26),y=n(33),m=n(34),b=(n(27),function(e){(0,a.default)(e,g),(0,p.SetupGraphs)(),(0,h.default)()}),g=function(e){(0,y.AddShareSettingsToConfig)(e);var t=(0,v.CreateMap)(e.map);(0,f.default)(t,e.baselayers),(0,m.CreateDefaultLayers)(e.layers,e["active-layers"]),(0,u.default)(e.layers,e.layout),(0,c.default)(t),(0,p.BindGraphEvents)(t),(0,y.BindUpdateShareUrl)(t)};window.Base=b,t.default={Base:b}},function(e,t){"use strict";function n(e,t){r(e,t)}function r(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState){try{var e=JSON.parse(n.responseText)}catch(e){console.log("ERROR: Malformed JSON in config file."),console.log(e)}o(e),a(e),t(e)}},n.open("GET",e,!0),n.send(),console.log("hi")}function o(e){e.map||(e.map={})}function a(e){var t,n,r=e.layers,o=e.mapserverUrl;e["active-layers"];for(var a in r){if(!r.hasOwnProperty(a))return;for(t=r[a],n=0;n<t.length;n++)i(t[n],o)}}function i(e,t){e.url=e.url||t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){var t=new o.EsriProvider,n=new o.GeoSearchControl({provider:t,showMarker:!1});e.addControl(n),L.DomEvent.on(n.searchElement.elements.container,"click",function(e){L.DomEvent.stopPropagation(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(4)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5);Object.defineProperty(t,"GeoSearchControl",{enumerable:!0,get:function(){return r(o).default}});var a=n(13);Object.defineProperty(t,"SearchElement",{enumerable:!0,get:function(){return r(a).default}});var i=n(17);Object.defineProperty(t,"BingProvider",{enumerable:!0,get:function(){return r(i).default}});var c=n(19);Object.defineProperty(t,"EsriProvider",{enumerable:!0,get:function(){return r(c).default}});var s=n(20);Object.defineProperty(t,"GoogleProvider",{enumerable:!0,get:function(){return r(s).default}});var u=n(21);Object.defineProperty(t,"OpenStreetMapProvider",{enumerable:!0,get:function(){return r(u).default}});var l=n(18);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return r(l).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){if(!L||!L.Control||!L.Control.extend)throw new Error("Leaflet must be loaded before instantiating the GeoSearch control");for(var e=L.Control.extend(y),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e,[null].concat(n)))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),i=(r(a),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});t.default=o;var c=n(12),s=r(c),u=n(13),l=r(u),f=n(16),p=r(f),d=n(14),h=n(15),v=function(){return{position:"topleft",style:"button",showMarker:!0,showPopup:!1,marker:{icon:new L.Icon.Default,draggable:!1},maxMarkers:1,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",notFoundMessage:"Sorry, that address could not be found.",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",msgbox:"leaflet-bar message",form:"",input:""},autoComplete:!0,autoCompleteDelay:250}},y={initialize:function(e){var t=this;this.markers=new L.FeatureGroup,this.options=i({},v(),e);var n=this.options,r=n.style,o=n.classNames,a=n.searchLabel,c=n.autoComplete,u=n.autoCompleteDelay;"button"!==r&&(this.options.classNames.container+=" "+e.style),this.searchElement=new l.default(i({},this.options,{handleSubmit:function(e){return t.onSubmit(e)}}));var f=this.searchElement.elements,h=f.container,y=f.form,m=f.input;h.addEventListener("dblclick",function(e){e.stopPropagation()});var b=(0,d.createElement)("a",o.button,h);b.title=a,b.href="#",b.addEventListener("click",function(e){t.onClick(e)},!1),c&&(this.resultList=new p.default({handleClick:function(e){var n=e.result;m.value=n.label,t.onSubmit({query:n.label})}}),y.appendChild(this.resultList.elements.container),m.addEventListener("keyup",(0,s.default)(function(e){return t.autoSearch(e)},u),!0),m.addEventListener("keydown",function(e){return t.selectResult(e)},!0),m.addEventListener("keydown",function(e){return t.clearResults(e)},!0)),this.elements={button:b}},onAdd:function(e){var t=this.options,n=t.showMarker,r=t.style;if(this.map=e,n&&this.markers.addTo(e),"bar"===r){var o=this.searchElement.elements.form,a=e.getContainer().querySelector(".leaflet-control-container"),i=(0,d.createElement)("div","leaflet-control-geosearch bar");i.appendChild(o),a.appendChild(i),this.elements.container=i}return this.searchElement.elements.container},onRemove:function(){var e=this.elements.container;return e&&e.remove(),this},onClick:function(e){e.preventDefault();var t=this.searchElement.elements,n=t.container,r=t.input;n.classList.contains("active")?(0,d.removeClassName)(n,"active"):((0,d.addClassName)(n,"active"),r.focus())},selectResult:function(e){if([h.ARROW_DOWN_KEY,h.ARROW_UP_KEY].includes(e.keyCode)){e.preventDefault();var t=this.searchElement.elements.input,n=this.resultList,r=this.resultList.count()-1,o="ArrowDown"===e.code?1+~~n.selected:~~n.selected-1,a=o<0?r:o>r?0:o,i=n.select(a);t.value=i.label}},clearResults:function(e){e.keyCode===h.ESCAPE_KEY&&this.resultList.clear()},autoSearch:function(e){return new Promise(function(t,n){var r,o,a;return h.SPECIAL_KEYS.includes(e.keyCode)?t():(r=e.target.value,o=this.options.provider,o.search({query:r}).then(function(e){return a=e,this.resultList.render(a),t()}.$asyncbind(this,n),n))}.$asyncbind(this))},onSubmit:function(e){return new Promise(function(t,n){var r,o;return r=this.options.provider,r.search(e).then(function(e){return o=e,o&&o.length>0&&this.showResult(o[0]),t()}.$asyncbind(this,n),n)}.$asyncbind(this))},showResult:function(e){var t=Object.keys(this.markers._layers);t.length>=this.options.maxMarkers&&this.markers.removeLayer(t[0]);var n=this.addMarker(e);this.centerMap(e),this.map.fireEvent("geosearch/showlocation",{location:e,marker:n})},addMarker:function(e){var t=this.options,n=t.marker,r=t.showPopup,o=new L.Marker([e.y,e.x],n);return o.bindPopup(e.label),this.markers.addLayer(o),r&&o.openPopup(),o},centerMap:function(e){var t=this.options,n=t.retainZoomLevel,r=t.animateZoom,o=new L.LatLngBounds(e.bounds),a=o.isValid()?o:this.markers.getBounds();!n&&o.isValid()?this.map.fitBounds(a,{animate:r}):this.map.setView(a.getCenter(),this.getZoom(),{animate:r})},getZoom:function(){var e=this.options,t=e.retainZoomLevel,n=e.zoomLevel;return t?this.map.getZoom():n}}},function(e,t,n){"use strict";function r(e,t){if(Function.prototype.$asyncspawn||Object.defineProperty(Function.prototype,"$asyncspawn",{value:r,enumerable:!1,configurable:!0,writable:!0}),this instanceof Function){var n=this;return new e(function(e,r){function o(t,n){var i;try{if(i=t.call(a,n),i.done){if(i.value!==e){if(i.value&&i.value===i.value.then)return i.value(e,r);e&&e(i.value),e=null}return}i.value.then?i.value.then(function(e){o(a.next,e)},function(e){o(a.throw,e)}):o(a.next,i.value)}catch(e){return r&&r(e),void(r=null)}}var a=n.call(t,e,r);o(a.next)})}}var o=function(e,t){for(var n=t.toString(),r="return "+n,o=n.match(/.*\(([^)]*)\)/)[1],a=/['"]!!!([^'"]*)['"]/g,i=[];;){var c=a.exec(r);if(!c)break;i.push(c)}return i.reverse().forEach(function(t){r=r.slice(0,t.index)+e[t[1]]+r.substr(t.index+t[0].length)}),r=r.replace(/\/\*[^*]*\*\//g," ").replace(/\s+/g," "),new Function(o,r)()}({zousan:n(7).toString(),thenable:n(11).toString()},function e(t,n){function r(){return o.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,o){return function a(i){for(;i;){if(i.then)return i=i.then(a,r),o?void 0:i;try{if(i.pop){if(i.length)return i.pop()?t.call(e):i;i=n}else i=i.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable="!!!thenable"(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory="!!!zousan")());var o=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return o.apply(t,arguments)}catch(e){return n(e)}}}});o(),r(),e.exports={$asyncbind:o,$asyncspawn:r}},function(e,t,n){(function(t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){function o(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function a(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function i(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===(void 0===t?"undefined":r(t))&&t.nextTick||"function"==typeof n&&n||function(e){setTimeout(e,0)};var c=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===o&&(n.splice(0,o),r=0)}}var n=[],r=0,o=1024;return function(o){n.push(o),n.length-r==1&&e(t)}}();return o.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":r(e))))try{var n=0,o=e.then;if("function"==typeof o)return void o.call(e,function(e){n++||t.resolve(e)},function(e){n++||t.reject(e)})}catch(e){return void(n||this.reject(e))}this.state=a,this.v=e,t.c&&c(function(){for(var n=0,r=t.c.length;n<r;n++)a(t.c[n],e)})}},reject:function(e){if(void 0===this.state){this.state=i,this.v=e;var t=this.c;t&&c(function(){for(var n=0,r=t.length;n<r;n++)i(t[n],e)})}},then:function(e,t){var n=new o,r={y:e,n:t,p:n};if(void 0===this.state)this.c?this.c.push(r):this.c=[r];else{var a=this.state,i=this.v;c(function(){a(r,i)})}return n}},o.resolve=function(e){if(e&&e instanceof o)return e;var t=new o;return t.resolve(e),t},o.reject=function(e){if(e&&e instanceof o)return e;var t=new o;return t.reject(e),t},o.version="2.3.3-nodent",o}}).call(t,n(8),n(9).setImmediate)},function(e,t){"use strict";function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function i(){v&&d&&(v=!1,d.length?h=d.concat(h):y=-1,h.length&&c())}function c(){if(!v){var e=o(i);v=!0;for(var t=h.length;t;){for(d=h,h=[];++y<t;)d&&d[y].run();y=-1,t=h.length}d=null,v=!1,a(e)}}function s(e,t){this.fun=e,this.array=t}function u(){}var l,f,p=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,h=[],v=!1,y=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new s(e,t)),1!==h.length||v||o(c)},s.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";function r(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(10),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){"use strict";!function(e,n){function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[s]=r,c(s),s++}function o(e){delete u[e]}function a(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function i(e){if(l)setTimeout(i,0,e);else{var t=u[e];if(t){l=!0;try{a(t)}finally{o(e),l=!1}}}}if(!e.setImmediate){var c,s=1,u={},l=!1,f=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){i(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},c=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;c=function(t){var n=f.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(i,0,e)}}(),p.setImmediate=r,p.clearImmediate=o}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(t,function(){return this}(),n(8))},function(e,t){"use strict";e.exports=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,o){try{var a=o?o(r):r;if(n===a)return n.reject(new TypeError("Promise resolution loop"));e(a)?a.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(a)}catch(e){n.reject(e)}}function n(){}function r(e){}function o(e,t){this.resolve=e,this.reject=t}function a(r,o){var a=new n;try{this._resolver(function(n){return e(n)?n.then(r,o):t(a,n,r)},function(e){t(a,e,o)})}catch(e){t(a,e,o)}return a}function i(e){this._resolver=e,this.then=a}return n.prototype={resolve:r,reject:r,then:o},i.resolve=function(e){return i.isThenable(e)?e:{then:function(t){return t(e)}}},i.isThenable=e,i}},function(e,t){(function(t){"use strict";function n(e,t,n){function o(t){var n=v,r=y;return v=y=void 0,O=t,b=e.apply(r,n)}function a(e){return O=e,g=setTimeout(l,t),S?o(e):b}function c(e){var n=e-w,r=e-O,o=t-n;return j?_(o,m-r):o}function u(e){var n=e-w,r=e-O;return void 0===w||n>=t||n<0||j&&r>=m}function l(){var e=x();if(u(e))return f(e);g=setTimeout(l,c(e))}function f(e){return g=void 0,E&&v?o(e):(v=y=void 0,b)}function p(){void 0!==g&&clearTimeout(g),O=0,v=w=y=g=void 0}function d(){return void 0===g?b:f(x())}function h(){var e=x(),n=u(e);if(v=arguments,y=this,w=e,n){if(void 0===g)return a(w);if(j)return g=setTimeout(l,t),o(w)}return void 0===g&&(g=setTimeout(l,t)),b}var v,y,m,b,g,w,O=0,S=!1,j=!1,E=!0;if("function"!=typeof e)throw new TypeError(s);return t=i(t)||0,r(n)&&(S=!!n.leading,j="maxWait"in n,m=j?k(i(n.maxWait)||0,t):m,E="trailing"in n?!!n.trailing:E),h.cancel=p,h.flush=d,h}function r(e){var t=void 0===e?"undefined":c(e);return!!e&&("object"==t||"function"==t)}function o(e){return!!e&&"object"==(void 0===e?"undefined":c(e))}function a(e){return"symbol"==(void 0===e?"undefined":c(e))||o(e)&&w.call(e)==l}function i(e){if("number"==typeof e)return e;if(a(e))return u;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(f,"");var n=d.test(e);return n||h.test(e)?v(e.slice(2),n?2:8):p.test(e)?u:+e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="Expected a function",u=NaN,l="[object Symbol]",f=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,h=/^0o[0-7]+$/i,v=parseInt,y="object"==(void 0===t?"undefined":c(t))&&t&&t.Object===Object&&t,m="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,b=y||m||Function("return this")(),g=Object.prototype,w=g.toString,k=Math.max,_=Math.min,x=function(){return b.Date.now()};e.exports=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),a=(function(e){e&&e.__esModule?e:{default:e}}(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=n(14),c=n(15),s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.handleSubmit,a=void 0===o?function(){}:o,c=n.searchLabel,s=void 0===c?"search":c,u=n.classNames,l=void 0===u?{}:u;r(this,e);var f=(0,i.createElement)("div",["geosearch",l.container].join(" ")),p=(0,i.createElement)("form",["",l.form].join(" "),f),d=(0,i.createElement)("input",["glass",l.input].join(" "),p);d.type="text",d.placeholder=s,d.addEventListener("input",function(e){t.onInput(e)},!1),d.addEventListener("keyup",function(e){t.onKeyUp(e)},!1),d.addEventListener("keypress",function(e){t.onKeyPress(e)},!1),d.addEventListener("focus",function(e){t.onFocus(e)},!1),d.addEventListener("blur",function(e){t.onBlur(e)},!1),this.elements={container:f,form:p,input:d},this.handleSubmit=a}return a(e,[{key:"onFocus",value:function(){(0,i.addClassName)(this.elements.form,"active")}},{key:"onBlur",value:function(){(0,i.removeClassName)(this.elements.form,"active")}},{key:"onSubmit",value:function(e){return new Promise(function(t,n){var r,o,a;return e.preventDefault(),e.stopPropagation(),r=this.elements,o=r.input,a=r.container,(0,i.removeClassName)(a,"error"),(0,i.addClassName)(a,"pending"),this.handleSubmit({query:o.value}).then(function(e){return(0,i.removeClassName)(a,"pending"),t()}.$asyncbind(this,n),n)}.$asyncbind(this))}},{key:"onInput",value:function(){var e=this.elements.container;this.hasError&&((0,i.removeClassName)(e,"error"),this.hasError=!1)}},{key:"onKeyUp",value:function(e){var t=this.elements,n=t.container,r=t.input;e.keyCode===c.ESCAPE_KEY&&((0,i.removeClassName)(n,"pending"),(0,i.removeClassName)(n,"active"),r.value="",document.body.focus(),document.body.blur())}},{key:"onKeyPress",value:function(e){e.keyCode===c.ENTER_KEY&&this.onSubmit(e)}},{key:"setQuery",value:function(e){this.elements.input.value=e}}]),e}();t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.createElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElement(e);return r.className=t,n&&n.appendChild(r),r};t.createScriptElement=function(e,t){var r=n("script",null,document.body);return r.setAttribute("type","text/javascript"),new Promise(function(n){window[t]=function(e){r.remove(),delete window[t],n(e)},r.setAttribute("src",e)})},t.addClassName=function(e,t){e&&!e.classList.contains(t)&&e.classList.add(t)},t.removeClassName=function(e,t){e&&e.classList.contains(t)&&e.classList.remove(t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.ENTER_KEY=13,r=t.ESCAPE_KEY=27,o=t.ARROW_DOWN_KEY=40,a=t.ARROW_UP_KEY=38,i=t.ARROW_LEFT_KEY=37,c=t.ARROW_RIGHT_KEY=39;t.SPECIAL_KEYS=[n,r,o,a,i,c]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(14),i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join(" ").trim()},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.handleClick,o=void 0===n?function(){}:n,c=t.classNames,u=void 0===c?{}:c;r(this,e),s.call(this),this.props={handleClick:o,classNames:u},this.selected=-1;var l=(0,a.createElement)("div",i("results",u.container)),f=(0,a.createElement)("div",i(u.item));l.addEventListener("click",this.onClick,!0),this.elements={container:l,resultItem:f}}return o(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.elements,n=t.container,r=t.resultItem;this.clear(),e.forEach(function(e,t){var o=r.cloneNode(!0);o.setAttribute("data-key",t),o.innerHTML=e.label,n.appendChild(o)}),e.length>0&&(0,a.addClassName)(n,"active"),this.results=e}},{key:"select",value:function(e){var t=this.elements.container;return Array.from(t.children).forEach(function(t,n){return n===e?(0,a.addClassName)(t,"active"):(0,a.removeClassName)(t,"active")}),this.selected=e,this.results[e]}},{key:"count",value:function(){return this.results.length}},{key:"clear",value:function(){var e=this.elements.container;for(this.selected=-1;e.lastChild;)e.removeChild(e.lastChild);(0,a.removeClassName)(e,"active")}}]),e}(),s=function(){var e=this;this.onClick=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.target,r=e.props.handleClick,o=e.elements.container;if(n.parentNode===o&&n.hasAttribute("data-key")){var a=n.getAttribute("data-key");r({result:e.results[a]})}}};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),u=(r(s),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(18),p=r(f),d=n(14),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=e.jsonp,o=this.options.params;return n+"//dev.virtualearth.net/REST/v1/Locations?"+this.getParamString(u({},o,{query:t,jsonp:r}))}},{key:"parse",value:function(e){var t=e.data;return 0===t.resourceSets.length?[]:t.resourceSets[0].resources.map(function(e){return{x:e.point.coordinates[1],y:e.point.coordinates[0],label:e.address.formattedAddress,bounds:[[e.bbox[0],e.bbox[1]],[e.bbox[2],e.bbox[3]]],raw:e}})}},{key:"search",value:function(e){return new Promise(function(t,n){var r,o,a,i,c;return r=e.query,o=~location.protocol.indexOf("http")?location.protocol:"https:",a="BING_JSONP_CB_"+Date.now(),i=this.endpoint({query:r,protocol:o,jsonp:a}),(0,d.createScriptElement)(i,a).then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),t}(p.default);t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),a=(function(e){e&&e.__esModule?e:{default:e}}(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.options=t}return a(e,[{key:"getParamString",value:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},{key:"search",value:function(e){return new Promise(function(t,n){var r,o,a,i,c;return r=e.query,o=~location.protocol.indexOf("http")?location.protocol:"https:",a=this.endpoint({query:r,protocol:o}),fetch(a).then(function(e){return i=e,i.json().then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),l=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find?"+this.getParamString(c({},r,{f:"json",text:t}))}},{key:"parse",value:function(e){return e.data.locations.map(function(e){return{x:e.feature.geometry.x,y:e.feature.geometry.y,label:e.name,bounds:[[e.extent.ymin,e.extent.xmin],[e.extent.ymax,e.extent.xmax]],raw:e}})}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),l=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params,o=this.getParamString(c({},r,{address:t}));return(r&&r.key?"https:":n)+"//maps.googleapis.com/maps/api/geocode/json?"+o}},{key:"parse",value:function(e){return e.data.results.map(function(e){return{x:e.geometry.location.lng,y:e.geometry.location.lat,label:e.formatted_address,bounds:[[e.geometry.viewport.southwest.lat,e.geometry.viewport.southwest.lng],[e.geometry.viewport.northeast.lat,e.geometry.viewport.northeast.lng]],raw:e}})}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),l=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//nominatim.openstreetmap.org/search?"+this.getParamString(c({},r,{format:"json",q:t}))}},{key:"parse",value:function(e){return e.data.map(function(e){return{x:e.lon,y:e.lat,label:e.display_name,bounds:[[parseFloat(e.boundingbox[0]),parseFloat(e.boundingbox[2])],[parseFloat(e.boundingbox[1]),parseFloat(e.boundingbox[3])]],raw:e}})}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e,t){a(o(t["layer-groups-order"]),e)}function o(e){return d3.select(".layer-list").selectAll(".layer-group-wrapper").data(e).enter().append("div").attr("class","layer-group-wrapper").attr("id",function(e){return e.id}).classed("active",function(e){return e.active}).each(function(e){d3.select(this).append("div").attr("class","layer-group-btn btn").on("click",function(e){e.active=!e.active,d3.select(this.parentNode).classed("active",function(){return e.active})}).text(e.name)}).append("div").attr("class","layer-group")}function a(e,t){e.selectAll(".layer-select").data(function(e){return t[e.id]}).enter().append("div").attr("class","layer-select").each(function(e){var t=(this.parentNode.parentNode.id,d3.select(this));i(e,t),c(e,t),s(e,t),u(e,t),l(e,t)})}function i(e,t){t.append("input").attr("type","checkbox").attr("id",function(e){return e.id}).attr("checked",function(e){return e.active?"checked":null}).on("click",function(e){(0,p.toggleLayer)(e),t.selectAll(".legend-wrapper, .opacity-slider-wrapper").classed("active",e.active)})}function c(e,t){t.append("label").attr("for",function(e){return e.id}).attr("class","layer-label").html(function(e){return e.name})}function s(e,t){e.info&&""!==e.info&&(t.append("div").attr("class","layer-info-btn").text("(?)").on("click",function(){d3.select(this.parentNode).select(".layer-info-wrapper").classed("active",function(){return!d3.select(this).classed("active")})}),t.append("div").attr("class","layer-info-wrapper").text(function(e){return"("+e.info+")"}))}function u(e,t){t.append("div").attr("class","legend-wrapper").classed("active",e.active).append("img").attr("src",e.legend||"mean_ndvi_legend.jpg")}function l(e,t){var n=d3.scaleLinear().domain([0,300]).range([0,1]).clamp(!0),r=t.append("div").attr("class","opacity-slider-wrapper").classed("active",e.active),o=r.append("svg").append("g").attr("class","opacity-slider").attr("transform","translate(20, 20)");o.append("circle").attr("r",6).attr("cx",300).attr("class","opacity-slider-circle"),o.append("line").attr("class","opacity-slider-track-overlay").attr("x1",0).attr("x2",315).attr("stroke","#000000").attr("stroke-width","20px").attr("stroke-opacity","0.0").call(d3.drag().on("start drag",function(){f(e,this.parentNode,n,d3.event.x)})),o.append("line").attr("class","opacity-slider-track").attr("x1",0).attr("x2",300).attr("stroke-width","20px").attr("stroke","#666").attr("stroke-width","2px"),o.append("text").attr("class","opacity-indicator").attr("x",315).attr("y",5).text(100*n(300)+"%")}function f(e,t,n,r){var r=n.invert(n(r));t=d3.select(t),t.select("circle").attr("cx",r),t.select("text").text(parseInt(100*n(r))+"%"),e.mapLayer.setOpacity(n(d3.event.x))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var p=n(34)},function(e,t){"use strict";function n(e,t){t=t||[{url:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attributions">CARTO</a>'}];var n,o;for(n=0;n<t.length;n++)o=r(t[n]),o.addTo(e)}function r(e){return L.tileLayer(e.url,{attribution:e.attribution})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){d3.selectAll(".graph-type-btn").on("click",p),r(),A=d3.tip().attr("class","d3-tip").html(function(e){return e})}function r(){Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100!=0||e%400==0)},Date.prototype.getDOY=function(){var e=[0,31,59,90,120,151,181,212,243,273,304,334],t=this.getMonth(),n=this.getDate(),r=e[t]+n;return t>1&&this.isLeapYear()&&r++,r}}function o(e){e.on("click",a)}function a(e){var t=this,n=e.latlng.lat,r=e.latlng.lng,o=d(n,r),a=i(t,n,r);d3.select(o).on("mouseenter",function(){a.setIcon(R)}),d3.select(o).on("mouseleave",function(){a.setIcon(I)}),c(t,o,a)}function i(e,t,n){return L.marker([t,n],{icon:I}).addTo(e)}function c(e,t,n){var r=s();t.appendChild(r),d3.select(r).on("click",function(){document.getElementById("graph-list").removeChild(t),e.removeLayer(n)})}function s(){var e=document.createElement("button");return e.className="remove-graph",e.innerText=String.fromCharCode("10005"),e.setAttribute("title","Remove graph"),e}function u(e,t,n){var r="https://fcav-ndvi.nemac.org/landdat_product.cgi?args="+t+","+e,o=new XMLHttpRequest;o.addEventListener("load",function(){var r=this.responseText;r=r.replace(/\[|\]|\'/g,"").split(", "),h(r,n,e,t)}),o.open("GET",r),o.send()}function l(e){var t;for(t=0;t<e.length;t++)e[t]=e[t].split(",");return e}function f(e){var t,n,r,o,a={};for(a.keys=[],r=0;r<e.length;r++)t=e[r],n=t[0].substring(0,4),a.hasOwnProperty(n)||(a[n]=[],a.keys.push(n)),a[n].push(t);var i,c;for(a.medians=[],r=0;r<46;r++){for(i=[],o=r;o<e.length;o+=46)i.push(e[o][1]);c=i.sort()[Math.floor(i.length/2)],a.medians.push(c)}return a}function p(){var e=this.dataset.type,t=document.getElementsByClassName("graph-type-btn active")[0],n=t.dataset.type;e!==n&&(d3.select("#graph-list").classed("graph-"+n,!1).classed("graph-"+e,!0),d3.select(t).classed("active",!1),d3.select(this).classed("active",!0))}function d(e,t){var n=document.createElement("div"),r=document.createTextNode("Lat: "+e+", Lon: "+t);return n.appendChild(r),n.classList.add("graph-elem"),u(e,t,n),n}function h(e,t,n,r){e=l(e);var o=f(e);v(e,t,o.medians),y(o,t,n,r),m(o,t,n,r),document.getElementById("graph-list").appendChild(t)}function v(e,t,n){var r={top:30,right:20,bottom:30,left:25},o=580-r.left-r.right,a=270-r.top-r.bottom,i=d3.scaleTime().range([0,o]).domain([E(e[0][0]),E(e[e.length-1][0])]),c=d3.scaleLinear().range([a,0]).domain([0,100]),s=d3.axisBottom(i).ticks(16).tickFormat(function(e){return e.getFullYear()}),u=d3.axisLeft(c).ticks(6),l=d3.line().x(function(e){return i(E(e[0]))}).y(function(e){return c(e[1])}),f=d3.select(t).append("div").classed("timeseries-graph",!0),p=f.append("svg").attr("width",o+r.left+r.right).attr("height",a+r.top+r.bottom).append("g").attr("transform","translate("+r.left+","+r.top+")");p.call(A),w(e,l,p),p.append("g").attr("class","x axis").attr("transform","translate(0,"+a+")").call(s),p.append("g").attr("class","y axis").call(u),_(e,l,p,n)}function y(e,t,n,r){function o(e){return F[(e-15)/30]}var a={},i={top:30,right:20,bottom:30,left:25},c=500-i.left-i.right,s=270-i.top-i.bottom,u=e.medians,l=d3.scaleLinear().range([0,c]).domain([0,365]),f=d3.scaleLinear().range([s,0]).domain([0,100]),p=d3.axisBottom(l).ticks(11).tickValues([15,45,75,105,135,165,195,225,255,285,315,345]).tickFormat(o),d=d3.axisLeft(f).ticks(6),h=d3.line().x(function(e,t){return l(Array.isArray(e)?P(e[0]):8*t+3)}).y(function(e){return f(Array.isArray(e)?e[1]:e)}),v=d3.select(t).append("div").classed("overlapping-graph",!0),y=v.append("svg").attr("width",c+i.left+i.right).attr("height",s+i.top+i.bottom).append("g").attr("transform","translate("+i.left+","+i.top+")");y.call(A),y.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(p),y.append("g").attr("class","y axis").call(d),a.medians={path:w(e.medians,h,y)},a[2015]={path:w(e[2015],h,y)},a.medians.points=_(e.medians,h,y,u),a[2015].points=_(e[2015],h,y,u);var m=v.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){S(m,t,"timeseries","2015",a,e,h,y,u,n,r)}),S(m,"medians","timeseries","medians",a,e,h,y,u,n,r)}function m(e,t,n,r){var o=Math.min(490,490)/2-30,a=e.medians,i=b(e),c=g(a,i[1][0]),s=d3.scaleLinear().domain([0,100]).range([0,o]),u=d3.radialLine().radius(function(e){return s(Array.isArray(e)?e[1]:e)}).angle(function(e,t){return((Array.isArray(e)?P(e[0]):8*t+3)-1)%365/365*(2*Math.PI)}),l=d3.select(t).append("div").classed("polar-graph",!0),f=l.append("svg").attr("width",490).attr("height",490).append("g").attr("transform","translate(245,245)");f.call(A);var p=f.append("g").attr("class","r axis").selectAll("g").data(s.ticks(5).slice(1)).enter().append("g");p.append("circle").attr("r",s),p.append("text").attr("y",function(e){return-s(e)-4}).attr("transform","rotate(15)").style("text-anchor","middle").text(function(e){return e});var d=f.append("g").attr("class","a axis").selectAll("g").data(d3.range(0,360,30)).enter().append("g").attr("transform",function(e){return"rotate("+(e-90)+")"});d.append("line").attr("x2",o),d.append("text").attr("x",o+6).attr("dy",".35em").style("text-anchor",function(e){return e<360&&e>180?"end":null}).attr("transform",function(e){return e<360&&e>180?"rotate(180 "+(o+6)+",0)":null}).text(function(e){return F[e/30]});var h=f.append("g").selectAll("g").data(c).enter().append("g").attr("transform",function(e){return"rotate("+(e.data[1][0]-90)+")"});h.append("line").attr("class","line").attr("x2",o),h.append("text").attr("x",o+6).attr("y",function(e){return(e.data[1][0]-1)%365/365*(2*Math.PI)}).attr("dy",".35em").style("text-anchor",function(e){var t=e.data[1][0];return t<360&&t>180?"end":null}).attr("transform",function(e){var t=e.data[1][0];return t<360&&t>180?"rotate(180 "+(o+6)+",0)":null}).text(function(e){return e.label});var v=i[1][0];k([[v,100],[(v+182.5)%365,100]],u,f).classed("growing-season-line","true"),k(i,u,f).classed("center-line","true"),f.selectAll("point").data([i[1]]).enter().append("circle").attr("class","point").attr("transform",function(e){return"translate("+u([e]).slice(1).slice(0,-1)+")"}).attr("r",2.5).attr("stroke","#000").attr("fill","#dd82d2").on("mouseover",function(e){A.show("Center: "+String(e[1]).substring(0,7)),this.setAttribute("r",5),this.setAttribute("stroke-width","2px"),d3.select(this).classed("active",!0)}).on("mouseout",function(e){A.hide(),this.setAttribute("r",2.5),this.setAttribute("stroke-width","1px"),d3.select(this).classed("active",!0)});var y={};y.medians={path:k(a,u,f)},y[2015]={path:k(e[2015],u,f)},y.medians.points=_(a,u,f,a),y[2015].points=_(e[2015],u,f,a);var m=l.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){var o=m.append("div");o.append("input").attr("type","checkbox").attr("id","polar-"+t+n.toString().replace(".","")+"-"+r.toString().replace(".","")).attr("value",t).property("checked","2015"===t).on("change",function(t){var n=this.value;this.checked?(y.hasOwnProperty(n)||(y[n]={}),y[n].path=k(e[n],u,f),y[n].points=_(e[n],u,f,a)):(y[n].path.remove(),y[n].points.remove())}),o.append("label").text(t).attr("for","polar-"+t+n.toString().replace(".","")+"-"+r.toString().replace(".",""))});var w=m.append("div");w.append("input").attr("type","checkbox").attr("id","polar-average-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")).attr("value","medians").property("checked",!0).on("change",function(t){var n=this.value;this.checked?(y.hasOwnProperty(n)||(y[n]={}),y[n].path=k(e[n],u,f),y[n].points=_(e[n],u,f,a)):(y[n].path.remove(),y[n].points.remove())}),w.append("label").text("Baseline").attr("for","polar-average-"+n.toString().replace(".","")+"-"+r.toString().replace(".",""));var x=m.append("div").classed("threshold-checkbox",!0);x.append("input").attr("type","checkbox").attr("id","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")).property("checked",!0).on("change",function(e){h.style("opacity",this.checked?1:0)}),x.append("label").text("Thresholds").attr("for","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".",""))}function b(e){var t,n,r,o,a,i=0,c=0;for(r=46,t=0;t<e.keys.length;t++)if(o=e[e.keys[t]],o.length===r){for(a=0,n=0;n<r/2;n++)a+=o[n][1]-o[n+23][1];a/=23,i+=a}else c++;i=Math.abs(i)/(e.keys.length-c);var s,u,l,f,p,d=1e6,h=0,v=e.medians;for(t=0;t<r/2;t++){for(u=0,l=0,p=0;p<r/2;p++)n=(t+p)%46,f=(n+23)%46,u+=parseInt(v[n],10),l+=parseInt(v[f],10);s=Math.abs(u-l),s<d&&(d=s,h=t)}var y=parseInt(v[h],10),m=parseInt(-v[h+23],10),b=Math.abs(i-y)-Math.abs(i-m);return Math.abs(-i-y)-Math.abs(-i-m)>b&&(h+=23),[[0,0],[8*h+3,i]]}function g(e,t){var n=Math.floor((t-3)/8);n>22&&(n-=23);var r,o,a,i=0;for(a=46,r=0;r<a;r++)o=(n+r)%a,i+=parseInt(e[o],10);var c,s,u,l=.15*i,f=.8*i,p=.85*i,d=!1,h=!1,v=!1;for(i=0,r=0;r<a;r++)if(o=(n+r)%a,i+=parseInt(e[o],10),!d&&i>l)c=o,d=!0;else if(!h&&i>f)s=o,h=!0;else if(!v&&i>p){u=o,v=!0;break}var y=[0,0];return[{label:"15%",data:[y,[8*c+3,100]]},{label:"80%",data:[y,[8*s+3,100]]},{label:"85%",data:[y,[8*u+3,100]]}]}function w(e,t,n){return n.append("path").attr("class","line").attr("d",t(e))}function k(e,t,n){return n.append("path").datum(e).attr("class","line").attr("d",t)}function _(e,t,n,r){return n.selectAll("point").data(e).enter().append("circle").attr("class","point").attr("transform",function(e,n){var r=Array.isArray(e)?e:[8*n+3,e];return"translate("+t([r]).slice(1).slice(0,-1)+")"}).attr("r",3).attr("stroke","#000").attr("fill",function(e,t){return j(Array.isArray(e)?e[1]:e,r[t%46],3)}).on("mouseover",x).on("mouseout",O)}function x(e){var t=Array.isArray(e)?C(e[0])+": "+e[1]:"Average: "+e;A.show(t),this.setAttribute("r",5),this.setAttribute("stroke-width","2px")}function O(e){A.hide(),this.setAttribute("r",3),this.setAttribute("stroke-width","1px")}function S(e,t,n,r,o,a,i,c,s,u,l){var f=e.append("div");f.append("input").attr("type","checkbox").attr("id",n+"-"+t+u.toString().replace(".","")+"-"+l.toString().replace(".","")).attr("value",t).property("checked",t===r).on("change",function(e){var t=this.value;this.checked?(o.hasOwnProperty(t)||(o[t]={}),o[t].path=w(a[t],i,c),o[t].points=_(a[t],i,c,s)):(o[t].path.remove(),o[t].points.remove())}),f.append("label").text(t).attr("for",n+"-"+t+u.toString().replace(".","")+"-"+l.toString().replace(".",""))}function j(e,t,n){var r=e-t,o=Math.abs(r)/t*100*n,a=100-o+"%";return r>0?"hsl(8, 79%, "+a+")":"hsl(219, 79%, "+a+")"}function E(e){e=e.toString();var t=e.substring(0,4),n=parseInt(e.substring(4,6),10)-1,r=e.substring(6,8);return new Date(t,n,r)}function P(e){return"string"==typeof e?(e=E(e),e.getDOY()):e}function C(e){return"Average"===e?e:(e=E(e),T(e.getMonth())+" "+M(e.getDate())+", "+e.getFullYear())}function T(e){switch(e){case 0:return"Jan.";case 1:return"Feb.";case 2:return"Mar.";case 3:return"Apr.";case 4:return"May";case 5:return"Jun.";case 6:return"Jul.";case 7:return"Aug.";case 8:return"Sep.";case 9:return"Oct.";case 10:return"Nov.";case 11:return"Dec."}}function M(e){var t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"}Object.defineProperty(t,"__esModule",{value:!0}),t.SetupGraphs=n,t.BindGraphEvents=o;var A,N=L.Icon.extend({}),I=new N({iconUrl:"imgs/blue_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),R=new N({iconUrl:"imgs/orange_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),F={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"}},function(e,t){"use strict";function n(){d3.selectAll(".panel-top-btn").on("click",r)}function r(){this.classList.contains("active")||[d3.selectAll(".panel-top-btn"),d3.selectAll(".panel-section-wrapper")].forEach(function(e){e.classed("active",function(){return!d3.select(this).classed("active")})})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){var t=e.id||"map",n=e.options||{scrollWheelZoom:!1},r=e.initialCenter||["38.5","-81"],a=e.initialZoom||6;return o=L.map(t,n).setView(r,a)}function r(){return o}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateMap=n,t.GetMap=r;var o},function(e,t){},,,,,,function(e,t,n){"use strict";function r(e){e.on("moveend",o)}function o(e){var t=(0,g.GetMap)();i(a([c(t),s(t),u(t)]))}function a(e){return"?"+e.filter(function(e){return void 0!==e}).join("&")}function i(e){window.history&&window.history.replaceState&&window.history.replaceState({},"",e)}function c(e){var t=e.getCenter();return"center="+t.lat.toString()+","+t.lng.toString()}function s(e){return"zoom="+e.getZoom()}function u(e){var t=[];return e.eachLayer(function(e){e.options&&e.options.layers&&(t.push(e.options.layers),t.push(e.options.hasOwnProperty("opacity")?e.options.opacity:"1"))}),"layers="+t.join(",")}function l(){var e=window.location.search;if(""!==e)return e=f(e),e=d(e),h(e),e}function f(e){return e=e.substring(1),e=p(e),e.split("&")}function p(e){return e.replace(/\%2[c|C]/g,",")}function d(e){var t,n,r={};for(n=0;n<e.length;n++)t=e[n].split("="),r[t[0]]=t[1];return r}function h(e){e.center&&(e.center=v(e.center)),e.layers&&(e.layers=y(e.layers))}function v(e){return e.split(",")}function y(e){var t,n,r={enabledLayers:[],opacityVals:{}};for(e=e.split(","),n=0;n<e.length;n+=2)t=e[n],r.enabledLayers.push(t),r.opacityVals[t]=e[n+1];return r}function m(e){var t=l();t&&(t.center&&(e.map.initialCenter=t.center),t.zoom&&(e.map.initialZoom=t.zoom),t.layers&&b(t.layers,e))}function b(e,t){var n=e.enabledLayers;t["active-layers"]=n;var r,o,a,i,c,s,u=t.layers;for(r=0;r<n.length;r++){s=!1,c=n[r];for(a in u){if(!u.hasOwnProperty(a))return;for(i=u[a],o=0;o<i.length;o++)if(i[o].id===c){i[o].opacity=e.opacityVals[c],s=!0;break}if(s)break}}}Object.defineProperty(t,"__esModule",{value:!0}),t.BindUpdateShareUrl=r,t.AddShareSettingsToConfig=m;var g=n(26)},function(e,t,n){"use strict";function r(e,t){var n,r,o,i,c,s;if(t&&0!==t.length)for(n=0;n<t.length;n++){s=!1,c=t[n];for(o in e){if(!e.hasOwnProperty(o))return;for(i=e[o],r=0;r<i.length;r++)if(i[r].id===c){a(i[r]),s=!0;break}if(s)break}}}function o(e,t){e.active?i(e):a(e)}function a(e){var t=(0,s.GetMap)();e.active=!0,e.mapLayer=e.mapLayer||c(e),t.addLayer(e.mapLayer)}function i(e){var t=(0,s.GetMap)();e.active=!1,e.mapLayer&&t.hasLayer(e.mapLayer)&&t.removeLayer(e.mapLayer)}function c(e){return L.tileLayer.wms(e.url,{layers:e.id,transparent:e.transparent||!0,version:e.version||"1.3.0",crs:e.crs||L.CRS.EPSG4326,format:e.format||"image/png",opacity:e.opacity||"1"})}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateDefaultLayers=r,t.toggleLayer=o,t.enableLayer=a,t.disableLayer=i;var s=n(26)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXhfYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBlOWU4MDJmN2IyYmUwOTg2MGQxNCIsIndlYnBhY2s6Ly8vLi9qcy9iYXNlLmpzIiwid2VicGFjazovLy8uL2pzL3BhcnNlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvbGVhZmxldENvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ub2RlbnQtcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovLy8uL34vbm9kZW50LXJ1bnRpbWUvem91c2FuLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L34vc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L25vZGVudC1ydW50aW1lL3RoZW5hYmxlRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL34vbG9kYXNoLmRlYm91bmNlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3NlYXJjaEVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvZG9tVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Jlc3VsdExpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2JpbmdQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvcHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2VzcmlQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL29wZW5TdHJlZXRNYXBQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9yZW5kZXJMYXllckxpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vanMvYmFzZWxheWVyLmpzIiwid2VicGFjazovLy8uL2pzL2dyYXBoLmpzIiwid2VicGFjazovLy8uL2pzL3RhYnMuanMiLCJ3ZWJwYWNrOi8vLy4vanMvbWFwLmpzIiwid2VicGFjazovLy8uL2pzL3NoYXJlLmpzIiwid2VicGFjazovLy8uL2pzL3RvZ2dsZUxheWVyLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfcGFyc2VyIiwiX3BhcnNlcjIiLCJfc2VhcmNoIiwiX3NlYXJjaDIiLCJfcmVuZGVyTGF5ZXJMaXN0IiwiX3JlbmRlckxheWVyTGlzdDIiLCJfYmFzZWxheWVyIiwiX2Jhc2VsYXllcjIiLCJfZ3JhcGgiLCJfdGFicyIsIl90YWJzMiIsIl9tYXAiLCJfc2hhcmUiLCJfdG9nZ2xlTGF5ZXIiLCJCYXNlIiwiY29uZmlnIiwiY2FsbGJhY2siLCJTZXR1cEdyYXBocyIsImRhdGEiLCJBZGRTaGFyZVNldHRpbmdzVG9Db25maWciLCJtYXAiLCJDcmVhdGVNYXAiLCJiYXNlbGF5ZXJzIiwiQ3JlYXRlRGVmYXVsdExheWVycyIsImxheWVycyIsImxheW91dCIsIkJpbmRHcmFwaEV2ZW50cyIsIkJpbmRVcGRhdGVTaGFyZVVybCIsIndpbmRvdyIsIlBhcnNlQ29uZmlnIiwiY29uZmlnRmlsZSIsIkdldENvbmZpZyIsInhtbGh0dHAiLCJYTUxIdHRwUmVxdWVzdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZm9ybWF0TWFwIiwiZm9ybWF0TGF5ZXJzIiwib3BlbiIsInNlbmQiLCJsYXllcmdyb3VwIiwiaSIsImRlZmF1bHRNYXBzZXJ2ZXJVcmwiLCJtYXBzZXJ2ZXJVcmwiLCJwcm9wIiwiaGFzT3duUHJvcGVydHkiLCJsZW5ndGgiLCJzZXRNYXBzZXJ2ZXJVcmwiLCJsYXllciIsInVybCIsIkNyZWF0ZVNlYXJjaCIsInByb3ZpZGVyIiwiX2xlYWZsZXRHZW9zZWFyY2giLCJFc3JpUHJvdmlkZXIiLCJzZWFyY2hDb250cm9sIiwiR2VvU2VhcmNoQ29udHJvbCIsInNob3dNYXJrZXIiLCJhZGRDb250cm9sIiwiTCIsIkRvbUV2ZW50Iiwib24iLCJzZWFyY2hFbGVtZW50IiwiZWxlbWVudHMiLCJjb250YWluZXIiLCJldiIsInN0b3BQcm9wYWdhdGlvbiIsIl9sZWFmbGV0Q29udHJvbCIsImVudW1lcmFibGUiLCJnZXQiLCJfc2VhcmNoRWxlbWVudCIsIl9iaW5nUHJvdmlkZXIiLCJfZXNyaVByb3ZpZGVyIiwiX2dvb2dsZVByb3ZpZGVyIiwiX29wZW5TdHJlZXRNYXBQcm92aWRlciIsIl9wcm92aWRlciIsIkxlYWZsZXRDb250cm9sIiwiQ29udHJvbCIsImV4dGVuZCIsIkVycm9yIiwiTENvbnRyb2wiLCJfbGVuIiwiYXJndW1lbnRzIiwib3B0aW9ucyIsIkFycmF5IiwiX2tleSIsIkZ1bmN0aW9uIiwicHJvdG90eXBlIiwiYmluZCIsImFwcGx5IiwiY29uY2F0IiwiX25vZGVudFJ1bnRpbWUiLCJfZXh0ZW5kcyIsImFzc2lnbiIsInRhcmdldCIsInNvdXJjZSIsImtleSIsIl9sb2Rhc2giLCJfbG9kYXNoMiIsIl9zZWFyY2hFbGVtZW50MiIsIl9yZXN1bHRMaXN0IiwiX3Jlc3VsdExpc3QyIiwiX2RvbVV0aWxzIiwiX2NvbnN0YW50cyIsImRlZmF1bHRPcHRpb25zIiwicG9zaXRpb24iLCJzdHlsZSIsInNob3dQb3B1cCIsIm1hcmtlciIsImljb24iLCJJY29uIiwiRGVmYXVsdCIsImRyYWdnYWJsZSIsIm1heE1hcmtlcnMiLCJyZXRhaW5ab29tTGV2ZWwiLCJhbmltYXRlWm9vbSIsInNlYXJjaExhYmVsIiwibm90Rm91bmRNZXNzYWdlIiwibWVzc2FnZUhpZGVEZWxheSIsInpvb21MZXZlbCIsImNsYXNzTmFtZXMiLCJidXR0b24iLCJtc2dib3giLCJmb3JtIiwiaW5wdXQiLCJhdXRvQ29tcGxldGUiLCJhdXRvQ29tcGxldGVEZWxheSIsImluaXRpYWxpemUiLCJfdGhpcyIsInRoaXMiLCJtYXJrZXJzIiwiRmVhdHVyZUdyb3VwIiwiX29wdGlvbnMiLCJoYW5kbGVTdWJtaXQiLCJxdWVyeSIsIm9uU3VibWl0IiwiX3NlYXJjaEVsZW1lbnQkZWxlbWVuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjcmVhdGVFbGVtZW50IiwidGl0bGUiLCJocmVmIiwib25DbGljayIsInJlc3VsdExpc3QiLCJoYW5kbGVDbGljayIsIl9yZWYiLCJyZXN1bHQiLCJsYWJlbCIsImFwcGVuZENoaWxkIiwiYXV0b1NlYXJjaCIsInNlbGVjdFJlc3VsdCIsImNsZWFyUmVzdWx0cyIsIm9uQWRkIiwiX29wdGlvbnMyIiwiYWRkVG8iLCJyb290IiwiZ2V0Q29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsIm9uUmVtb3ZlIiwicmVtb3ZlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZWFyY2hFbGVtZW50JGVsZW1lbjIiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZUNsYXNzTmFtZSIsImFkZENsYXNzTmFtZSIsImZvY3VzIiwiQVJST1dfRE9XTl9LRVkiLCJBUlJPV19VUF9LRVkiLCJpbmNsdWRlcyIsImtleUNvZGUiLCJsaXN0IiwibWF4IiwiY291bnQiLCJuZXh0IiwiY29kZSIsInNlbGVjdGVkIiwiaWR4IiwiaXRlbSIsInNlbGVjdCIsIkVTQ0FQRV9LRVkiLCJjbGVhciIsIlByb21pc2UiLCIkcmV0dXJuIiwiJGVycm9yIiwicmVzdWx0cyIsIlNQRUNJQUxfS0VZUyIsInNlYXJjaCIsInRoZW4iLCIkYXdhaXRfMSIsInJlbmRlciIsIiRhc3luY2JpbmQiLCIkYXdhaXRfMiIsInNob3dSZXN1bHQiLCJrZXlzIiwiX2xheWVycyIsInJlbW92ZUxheWVyIiwiYWRkTWFya2VyIiwiY2VudGVyTWFwIiwiZmlyZUV2ZW50IiwibG9jYXRpb24iLCJfb3B0aW9uczMiLCJNYXJrZXIiLCJ5IiwieCIsImJpbmRQb3B1cCIsImFkZExheWVyIiwib3BlblBvcHVwIiwiX29wdGlvbnM0IiwicmVzdWx0Qm91bmRzIiwiTGF0TG5nQm91bmRzIiwiYm91bmRzIiwiaXNWYWxpZCIsImdldEJvdW5kcyIsImZpdEJvdW5kcyIsImFuaW1hdGUiLCJzZXRWaWV3IiwiZ2V0Q2VudGVyIiwiZ2V0Wm9vbSIsIl9vcHRpb25zNSIsIiRhc3luY3NwYXduIiwicHJvbWlzZVByb3ZpZGVyIiwic2VsZiIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZ2VuRiIsInJlc29sdmUiLCJyZWplY3QiLCJzdGVwIiwiZm4iLCJhcmciLCJnZW4iLCJkb25lIiwidiIsInRocm93Iiwic3JjIiwidG9TdHJpbmciLCJ0IiwiYXJncyIsIm1hdGNoIiwicmUiLCJteCIsImV4ZWMiLCJwdXNoIiwicmV2ZXJzZSIsImZvckVhY2giLCJzbGljZSIsImluZGV4Iiwic3Vic3RyIiwicmVwbGFjZSIsInpvdXNhbiIsInRoZW5hYmxlIiwiY2F0Y2hlciIsImJvdW5kVGhlbiIsInJlc29sdmVyIiwidHJhbXBvbGluZSIsInMiLCJ1IiwiYiIsInEiLCJ1bmRlZmluZWQiLCJwb3AiLCJyIiwiTGF6eVRoZW5hYmxlIiwiRWFnZXJUaGVuYWJsZSIsIlRoZW5hYmxlIiwiRWFnZXJUaGVuYWJsZUZhY3RvcnkiLCJleCIsInByb2Nlc3MiLCJzZXRJbW1lZGlhdGUiLCJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsInRpY2siLCJab3VzYW4iLCJmdW5jIiwibWUiLCJTVEFURV9GVUxGSUxMRUQiLCJ5cmV0IiwiU1RBVEVfUkVKRUNURUQiLCJyZWFzb24iLCJuIiwibmV4dFRpY2siLCJmIiwic2V0VGltZW91dCIsInNvb24iLCJjYWxsUXVldWUiLCJmcSIsImZxU3RhcnQiLCJidWZmZXJTaXplIiwic3BsaWNlIiwic3RhdGUiLCJUeXBlRXJyb3IiLCJmaXJzdCIsInJhIiwicnIiLCJsIiwiY2xpZW50cyIsIm9uRiIsIm9uUiIsImNsaWVudCIsImEiLCJ2YWwiLCJ6IiwidmVyc2lvbiIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImNhY2hlZFNldFRpbWVvdXQiLCJydW5DbGVhclRpbWVvdXQiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpbmluZyIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlIiwicXVldWVJbmRleCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwibGVuIiwicnVuIiwiSXRlbSIsImFycmF5Iiwibm9vcCIsImJyb3dzZXIiLCJlbnYiLCJhcmd2IiwidmVyc2lvbnMiLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJiaW5kaW5nIiwibmFtZSIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJUaW1lb3V0IiwiY2xlYXJGbiIsIl9pZCIsIl9jbGVhckZuIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiY2xvc2UiLCJ1bnJlZiIsInJlZiIsImVucm9sbCIsIm1zZWNzIiwiX2lkbGVUaW1lb3V0SWQiLCJfaWRsZVRpbWVvdXQiLCJ1bmVucm9sbCIsIl91bnJlZkFjdGl2ZSIsImFjdGl2ZSIsIl9vblRpbWVvdXQiLCJjbGVhckltbWVkaWF0ZSIsImdsb2JhbCIsInRhc2siLCJ0YXNrc0J5SGFuZGxlIiwibmV4dEhhbmRsZSIsInJlZ2lzdGVySW1tZWRpYXRlIiwiaGFuZGxlIiwicnVuSWZQcmVzZW50IiwiY3VycmVudGx5UnVubmluZ0FUYXNrIiwiZG9jIiwiZG9jdW1lbnQiLCJhdHRhY2hUbyIsImdldFByb3RvdHlwZU9mIiwicG9zdE1lc3NhZ2UiLCJpbXBvcnRTY3JpcHRzIiwicG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyIsIm9sZE9uTWVzc2FnZSIsIm9ubWVzc2FnZSIsIm1lc3NhZ2VQcmVmaXgiLCJNYXRoIiwicmFuZG9tIiwib25HbG9iYWxNZXNzYWdlIiwiaW5kZXhPZiIsImF0dGFjaEV2ZW50IiwiTWVzc2FnZUNoYW5uZWwiLCJjaGFubmVsIiwicG9ydDEiLCJwb3J0MiIsImh0bWwiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JpcHQiLCJyZW1vdmVDaGlsZCIsImlzVGhlbmFibGUiLCJyZXNvbHV0aW9uIiwiaG93IiwiQ2hhaW5lZCIsIl91bmNoYWluZWQiLCJ0aGVuQ2hhaW4iLCJyZXMiLCJyZWoiLCJjaGFpbiIsIl9yZXNvbHZlciIsImRlYm91bmNlIiwid2FpdCIsImludm9rZUZ1bmMiLCJ0aW1lIiwibGFzdEFyZ3MiLCJ0aGlzQXJnIiwibGFzdFRoaXMiLCJsYXN0SW52b2tlVGltZSIsImxlYWRpbmdFZGdlIiwidGltZXJJZCIsInRpbWVyRXhwaXJlZCIsImxlYWRpbmciLCJyZW1haW5pbmdXYWl0IiwidGltZVNpbmNlTGFzdENhbGwiLCJsYXN0Q2FsbFRpbWUiLCJ0aW1lU2luY2VMYXN0SW52b2tlIiwibWF4aW5nIiwibmF0aXZlTWluIiwibWF4V2FpdCIsInNob3VsZEludm9rZSIsIm5vdyIsInRyYWlsaW5nRWRnZSIsInRyYWlsaW5nIiwiY2FuY2VsIiwiZmx1c2giLCJkZWJvdW5jZWQiLCJpc0ludm9raW5nIiwiRlVOQ19FUlJPUl9URVhUIiwidG9OdW1iZXIiLCJpc09iamVjdCIsIm5hdGl2ZU1heCIsInR5cGUiLCJpc09iamVjdExpa2UiLCJpc1N5bWJvbCIsIm9iamVjdFRvU3RyaW5nIiwic3ltYm9sVGFnIiwiTkFOIiwib3RoZXIiLCJ2YWx1ZU9mIiwicmVUcmltIiwiaXNCaW5hcnkiLCJyZUlzQmluYXJ5IiwidGVzdCIsInJlSXNPY3RhbCIsImZyZWVQYXJzZUludCIsInJlSXNCYWRIZXgiLCJwYXJzZUludCIsImZyZWVHbG9iYWwiLCJmcmVlU2VsZiIsIm9iamVjdFByb3RvIiwibWluIiwiRGF0ZSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiU2VhcmNoRWxlbWVudCIsIl9yZWYkaGFuZGxlU3VibWl0IiwiX3JlZiRzZWFyY2hMYWJlbCIsIl9yZWYkY2xhc3NOYW1lcyIsImpvaW4iLCJwbGFjZWhvbGRlciIsIm9uSW5wdXQiLCJvbktleVVwIiwib25LZXlQcmVzcyIsIm9uRm9jdXMiLCJvbkJsdXIiLCJfZWxlbWVudHMiLCJoYXNFcnJvciIsIl9lbGVtZW50czIiLCJib2R5IiwiYmx1ciIsIkVOVEVSX0tFWSIsImVsZW1lbnQiLCJwYXJlbnQiLCJlbCIsImNsYXNzTmFtZSIsImNyZWF0ZVNjcmlwdEVsZW1lbnQiLCJjYiIsInNldEF0dHJpYnV0ZSIsImpzb24iLCJhZGQiLCJBUlJPV19MRUZUX0tFWSIsIkFSUk9XX1JJR0hUX0tFWSIsImN4IiwiY2xhc3NuYW1lcyIsInRyaW0iLCJSZXN1bHRMaXN0IiwiX3JlZiRoYW5kbGVDbGljayIsIl9pbml0aWFsaXNlUHJvcHMiLCJyZXN1bHRJdGVtIiwiY2hpbGQiLCJjbG9uZU5vZGUiLCJpbm5lckhUTUwiLCJmcm9tIiwiY2hpbGRyZW4iLCJsYXN0Q2hpbGQiLCJfcmVmMiIsInBhcmVudE5vZGUiLCJoYXNBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfcHJvdmlkZXIyIiwiUHJvdmlkZXIiLCJfQmFzZVByb3ZpZGVyIiwicHJvdG9jb2wiLCJqc29ucCIsInBhcmFtcyIsImdldFBhcmFtU3RyaW5nIiwicmVzb3VyY2VTZXRzIiwicmVzb3VyY2VzIiwicG9pbnQiLCJjb29yZGluYXRlcyIsImFkZHJlc3MiLCJmb3JtYXR0ZWRBZGRyZXNzIiwiYmJveCIsInJhdyIsIl9yZWYzIiwiZW5kcG9pbnQiLCJlbmNvZGVVUklDb21wb25lbnQiLCJyZXF1ZXN0IiwiZmV0Y2giLCJ0ZXh0IiwibG9jYXRpb25zIiwiZmVhdHVyZSIsImdlb21ldHJ5IiwiZXh0ZW50IiwieW1pbiIsInhtaW4iLCJ5bWF4IiwieG1heCIsInBhcmFtU3RyaW5nIiwibG5nIiwibGF0IiwiZm9ybWF0dGVkX2FkZHJlc3MiLCJ2aWV3cG9ydCIsInNvdXRod2VzdCIsIm5vcnRoZWFzdCIsImZvcm1hdCIsImxvbiIsImRpc3BsYXlfbmFtZSIsInBhcnNlRmxvYXQiLCJib3VuZGluZ2JveCIsInJlbmRlckxheWVyTGlzdCIsIm1ha2VMYXllckVsZW1zIiwibWFrZUxheWVyR3JvdXBzIiwiZDMiLCJzZWxlY3RBbGwiLCJlbnRlciIsImFwcGVuZCIsImF0dHIiLCJsYXllckdyb3VwIiwiY2xhc3NlZCIsImVhY2giLCJsYXllckdyb3VwcyIsImxheWVyRGl2IiwibWFrZUNoZWNrYm94IiwibWFrZUxhYmVsIiwibWFrZURlc2NyaXB0aW9uIiwibWFrZUxlZ2VuZCIsIm1ha2VPcGFjaXR5U2xpZGVyIiwidG9nZ2xlTGF5ZXIiLCJpbmZvIiwibGVnZW5kIiwib3BhY2l0eVNjYWxlIiwic2NhbGVMaW5lYXIiLCJkb21haW4iLCJyYW5nZSIsImNsYW1wIiwib3BhY2l0eVNsaWRlcldyYXBwZXIiLCJvcGFjaXR5U2xpZGVyU3ZnIiwiZHJhZyIsInVwZGF0ZU9wYWNpdHkiLCJzbGlkZXIiLCJzY2FsZSIsInhQb3MiLCJpbnZlcnQiLCJtYXBMYXllciIsInNldE9wYWNpdHkiLCJDcmVhdGVCYXNlTGF5ZXJzIiwibGF5ZXJDb25maWciLCJhdHRyaWJ1dGlvbiIsImJhc2VMYXllciIsImNyZWF0ZUJhc2VMYXllciIsInRpbGVMYXllciIsImhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrIiwiZXh0ZW5kRGF0ZU1vZHVsZSIsInRpcCIsImQiLCJpc0xlYXBZZWFyIiwieWVhciIsImdldEZ1bGxZZWFyIiwiZ2V0RE9ZIiwiZGF5Q291bnQiLCJtbiIsImdldE1vbnRoIiwiZG4iLCJnZXREYXRlIiwiZGF5T2ZZZWFyIiwiaGFuZGxlTWFwQ2xpY2siLCJsYXRsbmciLCJkaXYiLCJjcmVhdGVHcmFwaERpdiIsImNyZWF0ZU1hcmtlciIsInNldEljb24iLCJob3Zlckljb24iLCJncmFwaEljb24iLCJjcmVhdGVHcmFwaFJlbW92ZXIiLCJlbGVtIiwiY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJUZXh0IiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiZ2V0RGF0YSIsIm9SZXEiLCJyZXNwb25zZSIsInNwbGl0IiwiZHJhd0dyYXBoIiwic3BsaXREYXRhIiwicmVwcm9jZXNzRGF0YSIsIm9yaWdkYXRhIiwiaiIsInN1YnN0cmluZyIsImRhdGFGb3JNZWRpYW5zIiwibWVkaWFuIiwic29ydCIsImZsb29yIiwiZGF0YXNldCIsImFjdGl2ZUVsZW0iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiYWN0aXZlVHlwZSIsImNvbnRlbnQiLCJjcmVhdGVUZXh0Tm9kZSIsInJlcHJvY2Vzc2VkRGF0YSIsIm1ha2VVcERvd25MaW5lR3JhcGgiLCJtYWtlVXBEb3duT3ZlcmxhcGluZ0xpbmVHcmFwaFdpdGhDaGVja2JveGVzIiwiZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzIiwiYXZlcmFnZXMiLCJtYXJnaW4iLCJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImxlZnQiLCJ3aWR0aCIsImhlaWdodCIsInNjYWxlVGltZSIsInBhcnNlRGF0ZSIsInhBeGlzIiwiYXhpc0JvdHRvbSIsInRpY2tzIiwidGlja0Zvcm1hdCIsInlBeGlzIiwiYXhpc0xlZnQiLCJ2YWx1ZWxpbmUiLCJsaW5lIiwid3JhcHBlciIsInN2ZyIsImRyYXdMaW5lYXJQYXRoIiwiZHJhd0xpbmVhclBvaW50cyIsImZvcm1hdE1vbnRoVGljayIsIk1PTlRIX0xBQkVMUyIsImNoYXJ0cyIsIm1lZGlhbnMiLCJ0aWNrVmFsdWVzIiwiaXNBcnJheSIsInBhcnNlSnVsaWFuRGF5IiwicGF0aCIsImlucHV0d3JhcHBlciIsImNyZWF0ZUNoZWNrYm94IiwicmFkaXVzIiwiY2VudGVyIiwiZmluZFBvbGFyQ2VudGVyIiwidGhyZXNob2xkcyIsImZpbmRQb2xhclRocmVzaG9sZHMiLCJyYWRpYWxMaW5lIiwiYW5nbGUiLCJQSSIsImdyIiwiZ2EiLCJ0aHJlc2hvbGRFbGVtIiwiZGF5IiwiY2VudGVyRGF5IiwiZHJhd1BvbGFyUGF0aCIsInNob3ciLCJoaWRlIiwicG9pbnRzIiwiY2hlY2tib3hXcmFwcGVyIiwicHJvcGVydHkiLCJuZXdZZWFyIiwiY2hlY2tlZCIsInRocmVzaG9sZENoZWNrYm94IiwiYXJyIiwic3VtIiwidG90YWxTdW0iLCJpbmNvbXBsZXRlWWVhcnMiLCJhYnMiLCJjaGVja0RpZmYiLCJsZWZ0QXJlYSIsInJpZ2h0QXJlYSIsImsiLCJjb3VudGVyIiwiYXJlYURpZmYiLCJhcmVhSW5kZXgiLCJhdmdzIiwiZmlyc3RSYWRpdXMiLCJzZWNvbmRSYWRpdXMiLCJmaXJzdERpZmYiLCJzdGFydERheSIsInN0YXJ0SW5kZXgiLCJmaWZ0ZWVuSW5kZXgiLCJlaWdodHlJbmRleCIsImVpZ2h0eWZpdmVJbmRleCIsImZpZnRlZW5UaHJlc2hvbGQiLCJlaWdodHlUaHJlc2hvbGQiLCJlaWdodHlmaXZlVGhyZXNob2xkIiwiZmlmdGVlbkluZGV4Rm91bmQiLCJlaWdodHlJbmRleEZvdW5kIiwiZWlnaHR5Zml2ZUluZGV4Rm91bmQiLCJjaXJjbGVDZW50ZXIiLCJkYXR1bSIsImNvbXB1dGVDb2xvciIsImhhbmRsZVBvaW50TW91c2VvdmVyIiwiaGFuZGxlUG9pbnRNb3VzZW91dCIsInRpcFN0cmluZyIsImZvcm1hdERhdGUiLCJkaWZmIiwicGVyY2VudF9kaWZmIiwibGlnaHRuZXNzIiwiZGF0ZSIsIm1vbnRoIiwiZm9ybWF0TW9udGgiLCJvcmRpbmFsX3N1ZmZpeF9vZiIsImJhc2VJY29uIiwiaWNvblVybCIsInNoYWRvd1VybCIsImljb25TaXplIiwiaWNvbkFuY2hvciIsInBvcHVwQW5jaG9yIiwic2hhZG93U2l6ZSIsIjAiLCIxIiwiMiIsIjMiLCI0IiwiNSIsIjYiLCI3IiwiOCIsIjkiLCIxMCIsIjExIiwiQmluZFRhYkV2ZW50cyIsImhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrIiwic2VsZWN0aW9uIiwibWFwQ29uZmlnIiwic2Nyb2xsV2hlZWxab29tIiwiaW5pdGlhbENlbnRlciIsImluaXRpYWxab29tIiwiR2V0TWFwIiwidXBkYXRlU2hhcmVVcmwiLCJzZXRTaGFyZVVybCIsIm1ha2VTaGFyZVVybCIsIm1ha2VDZW50ZXJTdHJpbmciLCJtYWtlWm9vbVN0cmluZyIsIm1ha2VMYXllclN0cmluZyIsImZpbHRlciIsImhpc3RvcnkiLCJyZXBsYWNlU3RhdGUiLCJlYWNoTGF5ZXIiLCJvcGFjaXR5IiwicGFyc2VTaGFyZVVybCIsImdldFBhcmFtc0FycmF5IiwibWFrZUtleWVkUGFyYW1zT2JqZWN0IiwiZm9ybWF0UGFyYW1zIiwidW5tYW5nbGVQYXJhbVN0cmluZyIsInBhcmFtc0FyciIsInBhcmFtUGFpciIsInBhcnNlZFBhcmFtcyIsImZvcm1hdENlbnRlclBhcmFtIiwiZm9ybWF0TGF5ZXJQYXJhbSIsImxheWVySWQiLCJmb3JtYXR0ZWRMYXllcnMiLCJlbmFibGVkTGF5ZXJzIiwib3BhY2l0eVZhbHMiLCJzaGFyZSIsInpvb20iLCJhZGRMYXllclNldHRpbmdzVG9Db25maWciLCJzaGFyZUxheWVyU2V0dGluZ3MiLCJlbmFibGVkTGF5ZXIiLCJmb3VuZExheWVyIiwiZGVmYXVsdExheWVycyIsImRlZmF1bHRMYXllciIsImVuYWJsZUxheWVyIiwiZGlzYWJsZUxheWVyIiwibWFrZVdtc1RpbGVMYXllciIsImhhc0xheWVyIiwid21zIiwidHJhbnNwYXJlbnQiLCJjcnMiLCJDUlMiLCJFUFNHNDMyNiJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0E0QkFGLEdBQUFRLEVBQUFULEVBR0FDLEVBQUFTLEVBQUFQLEVBR0FGLEVBQUFVLEVBQUEsR0FHQVYsRUFBQSxLRE1NLFNBQVNJLEVBQVFELEVBQVNILEdBRS9CSSxFQUFPRCxRQUFVSCxFQUFvQixJQUtoQyxTQUFTSSxFQUFRRCxFQUFTSCxHQUUvQixZQWtDQSxTQUFTVyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFP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R3pCdXJGQyxNeUJ0ckZMLE16QnVyRkMsS3lCdHJGRyxJekJ1ckZDLE15QnRyRkwsTXpCdXJGQyxLeUJ0ckZHLEl6QnVyRkMsTXlCcnJGWixRQUVELFFBQVNFLEdBQWtCbkQsR3pCd3JGdEIsR3lCdnJGRzNELEdBQUkyRCxFQUFNLEdBQ1ZtQixFQUFJbkIsRUFDUixHekJ1ckZDLE95QnZyRlMsS0FBTjNELEdBQWlCLEtBQU44RSxFQUNKbkIsRUFDVixLQUNTLElBQU4zRCxHQUFpQixLQUFOOEUsRUFDSm5CLEVBQ1YsS0FDUyxJQUFOM0QsR0FBaUIsS0FBTjhFLEVBQ0puQixFQUNWLEtBQ01BLEVBQ1YsS3pCaThEQS9yQixPQUFPQyxlQUFlYixFQUFTLGNBQzNCYyxPQUFPLElBRVhkLEV5QjV4RmVnQyxjekI2eEZmaEMsRXlCcndGZXlDLGlCQTFCaEIsSUFFQW9rQixHQTRCSWtKLEVBQVdockIsRUFBRW1ELEtBQUtoQyxXQUVsQjhoQixFQUFBLEdBQWdCK0gsSXpCbXlGZkMsUXlCanlGRCxxQnpCa3lGQ0MsVXlCanlGRCx5QnpCa3lGQ0MsVXlCbHlGVSxHQUNYLEl6Qmt5RkNDLFl5Qmx5RlksR0FDYixJekJreUZDQyxheUJseUZhLEdBQ2QsSXpCa3lGQ0MsWXlCbHlGWSxHQUFJLE1BR2pCdEksRUFBQSxHQUFnQmdJLEl6Qm15RmZDLFF5Qmp5RkQsdUJ6Qmt5RkNDLFV5Qmp5RkQseUJ6Qmt5RkNDLFV5Qmx5RlUsR0FDWCxJekJreUZDQyxZeUJseUZZLEdBQ2IsSXpCa3lGQ0MsYXlCbHlGYSxHQUNkLEl6Qmt5RkNDLFl5Qmx5RlksR0FBSSxNQTZ5QmpCOUUsR3pCd3JGQytFLEV5QnRyRkQsTXpCdXJGQ0MsRXlCdHJGRCxNekJ1ckZDQyxFeUJ0ckZELE16QnVyRkNDLEV5QnRyRkQsTXpCdXJGQ0MsRXlCdHJGRCxNekJ1ckZDQyxFeUJ0ckZELE16QnVyRkNDLEV5QnRyRkQsTXpCdXJGQ0MsRXlCdHJGRCxNekJ1ckZDQyxFeUJ0ckZELE16QnVyRkNDLEV5QnRyRkQsTXpCdXJGQ0MsR3lCdHJGRCxNekJ1ckZD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N0J5d0hDMWYsUTZCendIUWpRLEVBQU1pUSxTQUNmLFE3Qnl3SEMyZixJNkJ6d0hJNXZCLEVBQU00dkIsS0FBT2x2QixFQUFFbXZCLElBQ3BCQyxTN0J5d0hDdlEsTzZCendIT3ZmLEVBQU11ZixRQUNkLFk3Qnl3SEN3TyxRNkJ6d0hRL3RCLEVBQU0rdEIsU0FFdEIsTTdCOHJIQXh4QixPQUFPQyxlQUFlYixFQUFTLGNBQzNCYyxPQUFPLElBRVhkLEU2QjV2SGVzQyxzQjdCNnZIZnRDLEU2QnB1SGVtbEIsYzdCcXVIZm5sQixFNkI3dEhlMnpCLGM3Qjh0SGYzekIsRTZCdHRIZTR6QixjQWpESyxJQUFBbHlCLEdBQUE3QixFQUFBIiwiZmlsZSI6ImluZGV4X2J1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9wYXJzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9wYXJzZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGFyc2VyKTtcblx0XG5cdHZhciBfc2VhcmNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfc2VhcmNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaCk7XG5cdFxuXHR2YXIgX3JlbmRlckxheWVyTGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0dmFyIF9yZW5kZXJMYXllckxpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVuZGVyTGF5ZXJMaXN0KTtcblx0XG5cdHZhciBfYmFzZWxheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHR2YXIgX2Jhc2VsYXllcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iYXNlbGF5ZXIpO1xuXHRcblx0dmFyIF9ncmFwaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRcblx0dmFyIF90YWJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHR2YXIgX3RhYnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGFicyk7XG5cdFxuXHR2YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuXHRcblx0dmFyIF90b2dnbGVMYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBjc3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdC8vIERvZXMgbm90IHJlbHkgb24gbWFwIG9iamVjdCBvciBjb25maWcgZmlsZVxuXHR2YXIgQmFzZSA9IGZ1bmN0aW9uIEJhc2UoY29uZmlnKSB7XG5cdCAgICAoMCwgX3BhcnNlcjIuZGVmYXVsdCkoY29uZmlnLCBjYWxsYmFjayk7XG5cdCAgICAoMCwgX2dyYXBoLlNldHVwR3JhcGhzKSgpO1xuXHQgICAgKDAsIF90YWJzMi5kZWZhdWx0KSgpO1xuXHR9O1xuXHRcblx0Ly8gRG9lcyByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcblx0dmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2soZGF0YSkge1xuXHQgICAgKDAsIF9zaGFyZS5BZGRTaGFyZVNldHRpbmdzVG9Db25maWcpKGRhdGEpO1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkNyZWF0ZU1hcCkoZGF0YS5tYXApO1xuXHQgICAgKDAsIF9iYXNlbGF5ZXIyLmRlZmF1bHQpKG1hcCwgZGF0YS5iYXNlbGF5ZXJzKTtcblx0ICAgICgwLCBfdG9nZ2xlTGF5ZXIuQ3JlYXRlRGVmYXVsdExheWVycykoZGF0YS5sYXllcnMsIGRhdGFbXCJhY3RpdmUtbGF5ZXJzXCJdKTtcblx0ICAgICgwLCBfcmVuZGVyTGF5ZXJMaXN0Mi5kZWZhdWx0KShkYXRhLmxheWVycywgZGF0YS5sYXlvdXQpO1xuXHQgICAgKDAsIF9zZWFyY2gyLmRlZmF1bHQpKG1hcCk7XG5cdCAgICAoMCwgX2dyYXBoLkJpbmRHcmFwaEV2ZW50cykobWFwKTtcblx0ICAgICgwLCBfc2hhcmUuQmluZFVwZGF0ZVNoYXJlVXJsKShtYXApO1xuXHR9O1xuXHRcblx0d2luZG93LkJhc2UgPSBCYXNlO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0geyBCYXNlOiBCYXNlIH07XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFBhcnNlQ29uZmlnO1xuXHQvKipcblx0ICogUGFyc2VzIGEgY29uZmlnIGZpbGUuIFNpbmNlIHRoZSBwcm9jZXNzIHRvIGdldCBleHRlcm5hbCBmaWxlc1xuXHQgKiB1c2VzIEFKQVggeW91IG5lZWQgdG8gcGFzcyBhIGNhbGxiYWNrIHRvIGhhbmRsZSB0aGUgbmV4dCBzdGVwc1xuXHQgKiBvZiB1c2luZyB0aGUgY29uZmlnIGZpbGUsIHNpbmNlIHdlIGRvIG5vdCBrbm93IGhvdyBsb25nIGl0XG5cdCAqIHdpbGwgdGFrZSB0byBncmFiIHRoZSBmaWxlLlxuXHQgKi9cblx0ZnVuY3Rpb24gUGFyc2VDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcblx0ICAgIEdldENvbmZpZyhjb25maWdGaWxlLCBjYWxsYmFjayk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEdldENvbmZpZyhjb25maWdGaWxlLCBjYWxsYmFjaykge1xuXHQgICAgdmFyIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0ICAgIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh4bWxodHRwLnJlYWR5U3RhdGUgPT0gNCkge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhtbGh0dHAucmVzcG9uc2VUZXh0KTtcblx0ICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SOiBNYWxmb3JtZWQgSlNPTiBpbiBjb25maWcgZmlsZS5cIik7XG5cdCAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGZvcm1hdE1hcChkYXRhKTtcblx0ICAgICAgICAgICAgZm9ybWF0TGF5ZXJzKGRhdGEpO1xuXHQgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHhtbGh0dHAub3BlbihcIkdFVFwiLCBjb25maWdGaWxlLCB0cnVlKTtcblx0ICAgIHhtbGh0dHAuc2VuZCgpO1xuXHQgICAgY29uc29sZS5sb2coXCJoaVwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0TWFwKGRhdGEpIHtcblx0ICAgIGlmICghZGF0YS5tYXApIGRhdGEubWFwID0ge307XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdExheWVycyhkYXRhKSB7XG5cdCAgICB2YXIgbGF5ZXJzID0gZGF0YS5sYXllcnM7XG5cdCAgICB2YXIgZGVmYXVsdE1hcHNlcnZlclVybCA9IGRhdGEubWFwc2VydmVyVXJsO1xuXHQgICAgdmFyIGRlZmF1bHRFbmFibGVkTGF5ZXJzID0gZGF0YVtcImFjdGl2ZS1sYXllcnNcIl07XG5cdCAgICB2YXIgbGF5ZXJncm91cDtcblx0ICAgIHZhciBpO1xuXHRcblx0ICAgIGZvciAodmFyIHByb3AgaW4gbGF5ZXJzKSB7XG5cdCAgICAgICAgaWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcblx0ICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuXHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsYXllcmdyb3VwLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIHNldE1hcHNlcnZlclVybChsYXllcmdyb3VwW2ldLCBkZWZhdWx0TWFwc2VydmVyVXJsKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldE1hcHNlcnZlclVybChsYXllciwgdXJsKSB7XG5cdCAgICBsYXllci51cmwgPSBsYXllci51cmwgfHwgdXJsO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENyZWF0ZVNlYXJjaDtcblx0XG5cdHZhciBfbGVhZmxldEdlb3NlYXJjaCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVTZWFyY2gobWFwKSB7XG5cdCAgICB2YXIgcHJvdmlkZXIgPSBuZXcgX2xlYWZsZXRHZW9zZWFyY2guRXNyaVByb3ZpZGVyKCk7XG5cdFxuXHQgICAgdmFyIHNlYXJjaENvbnRyb2wgPSBuZXcgX2xlYWZsZXRHZW9zZWFyY2guR2VvU2VhcmNoQ29udHJvbCh7XG5cdCAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLFxuXHQgICAgICAgIHNob3dNYXJrZXI6IGZhbHNlXG5cdCAgICB9KTtcblx0XG5cdCAgICBtYXAuYWRkQ29udHJvbChzZWFyY2hDb250cm9sKTtcblx0XG5cdCAgICBMLkRvbUV2ZW50Lm9uKHNlYXJjaENvbnRyb2wuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5jb250YWluZXIsIFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2KSB7XG5cdCAgICAgICAgTC5Eb21FdmVudC5zdG9wUHJvcGFnYXRpb24oZXYpO1xuXHQgICAgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9sZWFmbGV0Q29udHJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0dlb1NlYXJjaENvbnRyb2wnLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sZWFmbGV0Q29udHJvbCkuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9zZWFyY2hFbGVtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1NlYXJjaEVsZW1lbnQnLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2hFbGVtZW50KS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX2JpbmdQcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdCaW5nUHJvdmlkZXInLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iaW5nUHJvdmlkZXIpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfZXNyaVByb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0VzcmlQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VzcmlQcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9nb29nbGVQcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdHb29nbGVQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dvb2dsZVByb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX29wZW5TdHJlZXRNYXBQcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjEpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdPcGVuU3RyZWV0TWFwUHJvdmlkZXInLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vcGVuU3RyZWV0TWFwUHJvdmlkZXIpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnUHJvdmlkZXInLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IExlYWZsZXRDb250cm9sO1xuXHRcblx0dmFyIF9sb2Rhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdHZhciBfbG9kYXNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvZGFzaCk7XG5cdFxuXHR2YXIgX3NlYXJjaEVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdHZhciBfc2VhcmNoRWxlbWVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2hFbGVtZW50KTtcblx0XG5cdHZhciBfcmVzdWx0TGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHRcblx0dmFyIF9yZXN1bHRMaXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Jlc3VsdExpc3QpO1xuXHRcblx0dmFyIF9kb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0dmFyIF9jb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdHZhciBkZWZhdWx0T3B0aW9ucyA9IGZ1bmN0aW9uIGRlZmF1bHRPcHRpb25zKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBwb3NpdGlvbjogJ3RvcGxlZnQnLFxuXHQgICAgc3R5bGU6ICdidXR0b24nLFxuXHQgICAgc2hvd01hcmtlcjogdHJ1ZSxcblx0ICAgIHNob3dQb3B1cDogZmFsc2UsXG5cdCAgICBtYXJrZXI6IHtcblx0ICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCksXG5cdCAgICAgIGRyYWdnYWJsZTogZmFsc2Vcblx0ICAgIH0sXG5cdCAgICBtYXhNYXJrZXJzOiAxLFxuXHQgICAgcmV0YWluWm9vbUxldmVsOiBmYWxzZSxcblx0ICAgIGFuaW1hdGVab29tOiB0cnVlLFxuXHQgICAgc2VhcmNoTGFiZWw6ICdFbnRlciBhZGRyZXNzJyxcblx0ICAgIG5vdEZvdW5kTWVzc2FnZTogJ1NvcnJ5LCB0aGF0IGFkZHJlc3MgY291bGQgbm90IGJlIGZvdW5kLicsXG5cdCAgICBtZXNzYWdlSGlkZURlbGF5OiAzMDAwLFxuXHQgICAgem9vbUxldmVsOiAxOCxcblx0ICAgIGNsYXNzTmFtZXM6IHtcblx0ICAgICAgY29udGFpbmVyOiAnbGVhZmxldC1iYXIgbGVhZmxldC1jb250cm9sIGxlYWZsZXQtY29udHJvbC1nZW9zZWFyY2gnLFxuXHQgICAgICBidXR0b246ICdsZWFmbGV0LWJhci1wYXJ0IGxlYWZsZXQtYmFyLXBhcnQtc2luZ2xlJyxcblx0ICAgICAgbXNnYm94OiAnbGVhZmxldC1iYXIgbWVzc2FnZScsXG5cdCAgICAgIGZvcm06ICcnLFxuXHQgICAgICBpbnB1dDogJydcblx0ICAgIH0sXG5cdCAgICBhdXRvQ29tcGxldGU6IHRydWUsXG5cdCAgICBhdXRvQ29tcGxldGVEZWxheTogMjUwXG5cdCAgfTtcblx0fTtcblx0XG5cdHZhciBDb250cm9sID0ge1xuXHQgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUob3B0aW9ucykge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICB0aGlzLm1hcmtlcnMgPSBuZXcgTC5GZWF0dXJlR3JvdXAoKTtcblx0XG5cdCAgICB0aGlzLm9wdGlvbnMgPSBfZXh0ZW5kcyh7fSwgZGVmYXVsdE9wdGlvbnMoKSwgb3B0aW9ucyk7XG5cdFxuXHQgICAgdmFyIF9vcHRpb25zID0gdGhpcy5vcHRpb25zLFxuXHQgICAgICAgIHN0eWxlID0gX29wdGlvbnMuc3R5bGUsXG5cdCAgICAgICAgY2xhc3NOYW1lcyA9IF9vcHRpb25zLmNsYXNzTmFtZXMsXG5cdCAgICAgICAgc2VhcmNoTGFiZWwgPSBfb3B0aW9ucy5zZWFyY2hMYWJlbCxcblx0ICAgICAgICBhdXRvQ29tcGxldGUgPSBfb3B0aW9ucy5hdXRvQ29tcGxldGUsXG5cdCAgICAgICAgYXV0b0NvbXBsZXRlRGVsYXkgPSBfb3B0aW9ucy5hdXRvQ29tcGxldGVEZWxheTtcblx0XG5cdCAgICBpZiAoc3R5bGUgIT09ICdidXR0b24nKSB7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jbGFzc05hbWVzLmNvbnRhaW5lciArPSAnICcgKyBvcHRpb25zLnN0eWxlO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuc2VhcmNoRWxlbWVudCA9IG5ldyBfc2VhcmNoRWxlbWVudDIuZGVmYXVsdChfZXh0ZW5kcyh7fSwgdGhpcy5vcHRpb25zLCB7XG5cdCAgICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KHF1ZXJ5KSB7XG5cdCAgICAgICAgcmV0dXJuIF90aGlzLm9uU3VibWl0KHF1ZXJ5KTtcblx0ICAgICAgfVxuXHQgICAgfSkpO1xuXHRcblx0ICAgIHZhciBfc2VhcmNoRWxlbWVudCRlbGVtZW4gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMsXG5cdCAgICAgICAgY29udGFpbmVyID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmNvbnRhaW5lcixcblx0ICAgICAgICBmb3JtID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmZvcm0sXG5cdCAgICAgICAgaW5wdXQgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uaW5wdXQ7XG5cdFxuXHQgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciBidXR0b24gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdhJywgY2xhc3NOYW1lcy5idXR0b24sIGNvbnRhaW5lcik7XG5cdCAgICBidXR0b24udGl0bGUgPSBzZWFyY2hMYWJlbDtcblx0ICAgIGJ1dHRvbi5ocmVmID0gJyMnO1xuXHRcblx0ICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uQ2xpY2soZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdFxuXHQgICAgaWYgKGF1dG9Db21wbGV0ZSkge1xuXHQgICAgICB0aGlzLnJlc3VsdExpc3QgPSBuZXcgX3Jlc3VsdExpc3QyLmRlZmF1bHQoe1xuXHQgICAgICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVDbGljayhfcmVmKSB7XG5cdCAgICAgICAgICB2YXIgcmVzdWx0ID0gX3JlZi5yZXN1bHQ7XG5cdFxuXHQgICAgICAgICAgaW5wdXQudmFsdWUgPSByZXN1bHQubGFiZWw7XG5cdCAgICAgICAgICBfdGhpcy5vblN1Ym1pdCh7IHF1ZXJ5OiByZXN1bHQubGFiZWwgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGZvcm0uYXBwZW5kQ2hpbGQodGhpcy5yZXN1bHRMaXN0LmVsZW1lbnRzLmNvbnRhaW5lcik7XG5cdFxuXHQgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsICgwLCBfbG9kYXNoMi5kZWZhdWx0KShmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5hdXRvU2VhcmNoKGUpO1xuXHQgICAgICB9LCBhdXRvQ29tcGxldGVEZWxheSksIHRydWUpO1xuXHQgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICByZXR1cm4gX3RoaXMuc2VsZWN0UmVzdWx0KGUpO1xuXHQgICAgICB9LCB0cnVlKTtcblx0ICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgcmV0dXJuIF90aGlzLmNsZWFyUmVzdWx0cyhlKTtcblx0ICAgICAgfSwgdHJ1ZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5lbGVtZW50cyA9IHsgYnV0dG9uOiBidXR0b24gfTtcblx0ICB9LFxuXHQgIG9uQWRkOiBmdW5jdGlvbiBvbkFkZChtYXApIHtcblx0ICAgIHZhciBfb3B0aW9uczIgPSB0aGlzLm9wdGlvbnMsXG5cdCAgICAgICAgc2hvd01hcmtlciA9IF9vcHRpb25zMi5zaG93TWFya2VyLFxuXHQgICAgICAgIHN0eWxlID0gX29wdGlvbnMyLnN0eWxlO1xuXHRcblx0ICAgIHRoaXMubWFwID0gbWFwO1xuXHQgICAgaWYgKHNob3dNYXJrZXIpIHtcblx0ICAgICAgdGhpcy5tYXJrZXJzLmFkZFRvKG1hcCk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHN0eWxlID09PSAnYmFyJykge1xuXHQgICAgICB2YXIgZm9ybSA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5mb3JtO1xuXHRcblx0ICAgICAgdmFyIHJvb3QgPSBtYXAuZ2V0Q29udGFpbmVyKCkucXVlcnlTZWxlY3RvcignLmxlYWZsZXQtY29udHJvbC1jb250YWluZXInKTtcblx0XG5cdCAgICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCAnbGVhZmxldC1jb250cm9sLWdlb3NlYXJjaCBiYXInKTtcblx0ICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZvcm0pO1xuXHQgICAgICByb290LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cdCAgICAgIHRoaXMuZWxlbWVudHMuY29udGFpbmVyID0gY29udGFpbmVyO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuY29udGFpbmVyO1xuXHQgIH0sXG5cdCAgb25SZW1vdmU6IGZ1bmN0aW9uIG9uUmVtb3ZlKCkge1xuXHQgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgIGlmIChjb250YWluZXIpIHtcblx0ICAgICAgY29udGFpbmVyLnJlbW92ZSgpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH0sXG5cdCAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhldmVudCkge1xuXHQgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XG5cdCAgICB2YXIgX3NlYXJjaEVsZW1lbnQkZWxlbWVuMiA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cyxcblx0ICAgICAgICBjb250YWluZXIgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4yLmNvbnRhaW5lcixcblx0ICAgICAgICBpbnB1dCA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbjIuaW5wdXQ7XG5cdFxuXHQgICAgaWYgKGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG5cdCAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblx0ICAgICAgaW5wdXQuZm9jdXMoKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIHNlbGVjdFJlc3VsdDogZnVuY3Rpb24gc2VsZWN0UmVzdWx0KGV2ZW50KSB7XG5cdCAgICBpZiAoIVtfY29uc3RhbnRzLkFSUk9XX0RPV05fS0VZLCBfY29uc3RhbnRzLkFSUk9XX1VQX0tFWV0uaW5jbHVkZXMoZXZlbnQua2V5Q29kZSkpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICB2YXIgaW5wdXQgPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuaW5wdXQ7XG5cdFxuXHQgICAgdmFyIGxpc3QgPSB0aGlzLnJlc3VsdExpc3Q7XG5cdCAgICB2YXIgbWF4ID0gdGhpcy5yZXN1bHRMaXN0LmNvdW50KCkgLSAxO1xuXHRcblx0ICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG5cdCAgICB2YXIgbmV4dCA9IGV2ZW50LmNvZGUgPT09ICdBcnJvd0Rvd24nID8gfn5saXN0LnNlbGVjdGVkICsgMSA6IH5+bGlzdC5zZWxlY3RlZCAtIDE7XG5cdCAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmVzdGVkLXRlcm5hcnlcblx0ICAgIHZhciBpZHggPSBuZXh0IDwgMCA/IG1heCA6IG5leHQgPiBtYXggPyAwIDogbmV4dDtcblx0XG5cdCAgICB2YXIgaXRlbSA9IGxpc3Quc2VsZWN0KGlkeCk7XG5cdCAgICBpbnB1dC52YWx1ZSA9IGl0ZW0ubGFiZWw7XG5cdCAgfSxcblx0ICBjbGVhclJlc3VsdHM6IGZ1bmN0aW9uIGNsZWFyUmVzdWx0cyhldmVudCkge1xuXHQgICAgaWYgKGV2ZW50LmtleUNvZGUgIT09IF9jb25zdGFudHMuRVNDQVBFX0tFWSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5yZXN1bHRMaXN0LmNsZWFyKCk7XG5cdCAgfSxcblx0ICBhdXRvU2VhcmNoOiBmdW5jdGlvbiBhdXRvU2VhcmNoKGV2ZW50KSB7XG5cdCAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuXHQgICAgICB2YXIgcXVlcnksIHByb3ZpZGVyLCByZXN1bHRzO1xuXHRcblx0ICAgICAgaWYgKF9jb25zdGFudHMuU1BFQ0lBTF9LRVlTLmluY2x1ZGVzKGV2ZW50LmtleUNvZGUpKSB7XG5cdCAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcXVlcnkgPSBldmVudC50YXJnZXQudmFsdWU7XG5cdCAgICAgIHByb3ZpZGVyID0gdGhpcy5vcHRpb25zLnByb3ZpZGVyO1xuXHQgICAgICByZXR1cm4gcHJvdmlkZXIuc2VhcmNoKHsgcXVlcnk6IHF1ZXJ5IH0pLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG5cdFxuXHQgICAgICAgIHJlc3VsdHMgPSAkYXdhaXRfMTtcblx0ICAgICAgICB0aGlzLnJlc3VsdExpc3QucmVuZGVyKHJlc3VsdHMpO1xuXHQgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICB9LFxuXHQgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdChxdWVyeSkge1xuXHQgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgdmFyIHByb3ZpZGVyLCByZXN1bHRzO1xuXHQgICAgICBwcm92aWRlciA9IHRoaXMub3B0aW9ucy5wcm92aWRlcjtcblx0ICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlYXJjaChxdWVyeSkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzIpIHtcblx0XG5cdCAgICAgICAgcmVzdWx0cyA9ICRhd2FpdF8yO1xuXHRcblx0ICAgICAgICBpZiAocmVzdWx0cyAmJiByZXN1bHRzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgIHRoaXMuc2hvd1Jlc3VsdChyZXN1bHRzWzBdKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcblx0ICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuXHQgIH0sXG5cdCAgc2hvd1Jlc3VsdDogZnVuY3Rpb24gc2hvd1Jlc3VsdChyZXN1bHQpIHtcblx0ICAgIHZhciBtYXJrZXJzID0gT2JqZWN0LmtleXModGhpcy5tYXJrZXJzLl9sYXllcnMpO1xuXHQgICAgaWYgKG1hcmtlcnMubGVuZ3RoID49IHRoaXMub3B0aW9ucy5tYXhNYXJrZXJzKSB7XG5cdCAgICAgIHRoaXMubWFya2Vycy5yZW1vdmVMYXllcihtYXJrZXJzWzBdKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbWFya2VyID0gdGhpcy5hZGRNYXJrZXIocmVzdWx0KTtcblx0ICAgIHRoaXMuY2VudGVyTWFwKHJlc3VsdCk7XG5cdFxuXHQgICAgdGhpcy5tYXAuZmlyZUV2ZW50KCdnZW9zZWFyY2gvc2hvd2xvY2F0aW9uJywge1xuXHQgICAgICBsb2NhdGlvbjogcmVzdWx0LFxuXHQgICAgICBtYXJrZXI6IG1hcmtlclxuXHQgICAgfSk7XG5cdCAgfSxcblx0ICBhZGRNYXJrZXI6IGZ1bmN0aW9uIGFkZE1hcmtlcihyZXN1bHQpIHtcblx0ICAgIHZhciBfb3B0aW9uczMgPSB0aGlzLm9wdGlvbnMsXG5cdCAgICAgICAgb3B0aW9ucyA9IF9vcHRpb25zMy5tYXJrZXIsXG5cdCAgICAgICAgc2hvd1BvcHVwID0gX29wdGlvbnMzLnNob3dQb3B1cDtcblx0XG5cdCAgICB2YXIgbWFya2VyID0gbmV3IEwuTWFya2VyKFtyZXN1bHQueSwgcmVzdWx0LnhdLCBvcHRpb25zKTtcblx0ICAgIG1hcmtlci5iaW5kUG9wdXAocmVzdWx0LmxhYmVsKTtcblx0XG5cdCAgICB0aGlzLm1hcmtlcnMuYWRkTGF5ZXIobWFya2VyKTtcblx0XG5cdCAgICBpZiAoc2hvd1BvcHVwKSB7XG5cdCAgICAgIG1hcmtlci5vcGVuUG9wdXAoKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gbWFya2VyO1xuXHQgIH0sXG5cdCAgY2VudGVyTWFwOiBmdW5jdGlvbiBjZW50ZXJNYXAocmVzdWx0KSB7XG5cdCAgICB2YXIgX29wdGlvbnM0ID0gdGhpcy5vcHRpb25zLFxuXHQgICAgICAgIHJldGFpblpvb21MZXZlbCA9IF9vcHRpb25zNC5yZXRhaW5ab29tTGV2ZWwsXG5cdCAgICAgICAgYW5pbWF0ZVpvb20gPSBfb3B0aW9uczQuYW5pbWF0ZVpvb207XG5cdFxuXHQgICAgdmFyIHJlc3VsdEJvdW5kcyA9IG5ldyBMLkxhdExuZ0JvdW5kcyhyZXN1bHQuYm91bmRzKTtcblx0ICAgIHZhciBib3VuZHMgPSByZXN1bHRCb3VuZHMuaXNWYWxpZCgpID8gcmVzdWx0Qm91bmRzIDogdGhpcy5tYXJrZXJzLmdldEJvdW5kcygpO1xuXHRcblx0ICAgIGlmICghcmV0YWluWm9vbUxldmVsICYmIHJlc3VsdEJvdW5kcy5pc1ZhbGlkKCkpIHtcblx0ICAgICAgdGhpcy5tYXAuZml0Qm91bmRzKGJvdW5kcywgeyBhbmltYXRlOiBhbmltYXRlWm9vbSB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMubWFwLnNldFZpZXcoYm91bmRzLmdldENlbnRlcigpLCB0aGlzLmdldFpvb20oKSwgeyBhbmltYXRlOiBhbmltYXRlWm9vbSB9KTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIGdldFpvb206IGZ1bmN0aW9uIGdldFpvb20oKSB7XG5cdCAgICB2YXIgX29wdGlvbnM1ID0gdGhpcy5vcHRpb25zLFxuXHQgICAgICAgIHJldGFpblpvb21MZXZlbCA9IF9vcHRpb25zNS5yZXRhaW5ab29tTGV2ZWwsXG5cdCAgICAgICAgem9vbUxldmVsID0gX29wdGlvbnM1Lnpvb21MZXZlbDtcblx0XG5cdCAgICByZXR1cm4gcmV0YWluWm9vbUxldmVsID8gdGhpcy5tYXAuZ2V0Wm9vbSgpIDogem9vbUxldmVsO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIExlYWZsZXRDb250cm9sKCkge1xuXHQgIGlmICghTCB8fCAhTC5Db250cm9sIHx8ICFMLkNvbnRyb2wuZXh0ZW5kKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ0xlYWZsZXQgbXVzdCBiZSBsb2FkZWQgYmVmb3JlIGluc3RhbnRpYXRpbmcgdGhlIEdlb1NlYXJjaCBjb250cm9sJyk7XG5cdCAgfVxuXHRcblx0ICB2YXIgTENvbnRyb2wgPSBMLkNvbnRyb2wuZXh0ZW5kKENvbnRyb2wpO1xuXHRcblx0ICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgb3B0aW9ucyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgb3B0aW9uc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KExDb250cm9sLCBbbnVsbF0uY29uY2F0KG9wdGlvbnMpKSkoKTtcblx0fVxuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdC8qXG5cdCAqICRhc3luY2JpbmQgaGFzIG11bHRpcGxlIHVzZXMsIGRlcGVuZGluZyBvbiB0aGUgcGFyYW1ldGVyIGxpc3QuIEl0IGlzIGluIEZ1bmN0aW9uLnByb3RvdHlwZSwgc28gJ3RoaXMnIGlzIGFsd2F5cyBhIGZ1bmN0aW9uXG5cdCAqXG5cdCAqIDEpIElmIGNhbGxlZCB3aXRoIGEgc2luZ2xlIGFyZ3VtZW50ICh0aGlzKSwgaXQgaXMgdXNlZCB3aGVuIGRlZmluaW5nIGFuIGFzeW5jIGZ1bmN0aW9uIHRvIGVuc3VyZSB3aGVuXG5cdCAqICAgICAgaXQgaXMgaW52b2tlZCwgdGhlIGNvcnJlY3QgJ3RoaXMnIGlzIHByZXNlbnQsIGp1c3QgbGlrZSBcImJpbmRcIi4gRm9yIGxlZ2FjeSByZWFzb25zLCAndGhpcycgaXMgZ2l2ZW5cblx0ICogICAgICBhIG1lbWViZXIgJ3RoZW4nIHdoaWNoIHJlZmVycyB0byBpdHNlbGYuXG5cdCAqIDIpIElmIGNhbGxlZCB3aXRoIGEgc2Vjb25kIHBhcmFtZXRlciAoXCJjYXRjaGVyXCIpIGFuZCBjYXRjaGVyIT09dHJ1ZSBpdCBpcyBiZWluZyB1c2VkIHRvIGludm9rZSBhbiBhc3luY1xuXHQgKiAgICAgIGZ1bmN0aW9uIHdoZXJlIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIHRoZSBlcnJvciBjYWxsYmFjayAoZm9yIHN5bmMgZXhjZXB0aW9ucyBhbmQgdG8gYmUgcGFzc2VkIHRvXG5cdCAqICAgICAgbmVzdGVkIGFzeW5jIGNhbGxzKVxuXHQgKiAzKSBJZiBjYWxsZWQgd2l0aCB0aGUgc2Vjb25kIHBhcmFtZXRlcj09PXRydWUsIGl0IGlzIHRoZSBzYW1lIHVzZSBhcyAoMSksIGJ1dCB0aGUgZnVuY3Rpb24gaXMgd3JhcHBlZFxuXHQgKiAgICAgIGluIGFuICdQcm9taXNlJyBhcyB3ZWxsIGJvdW5kIHRvICd0aGlzJy5cblx0ICogICAgICBJdCBpcyB0aGUgc2FtZSBhcyBjYWxsaW5nICduZXcgUHJvbWlzZSh0aGlzKScsIHdoZXJlICd0aGlzJyBpcyB0aGUgZnVuY3Rpb24gYmVpbmcgYm91bmQvd3JhcHBlZFxuXHQgKiA0KSBJZiBjYWxsZWQgd2l0aCB0aGUgc2Vjb25kIHBhcmFtZXRlcj09PTAsIGl0IGlzIHRoZSBzYW1lIHVzZSBhcyAoMSksIGJ1dCB0aGUgZnVuY3Rpb24gaXMgd3JhcHBlZFxuXHQgKiAgICAgIGluIGEgJ0xhenlUaGVuYWJsZScsIHdoaWNoIGV4ZWN1dGVzIGxhemlseSBhbmQgY2FuIHJlc29sdmUgc3luY2hyb25vdXNseS5cblx0ICogICAgICBJdCBpcyB0aGUgc2FtZSBhcyBjYWxsaW5nICduZXcgTGF6eVRoZW5hYmxlKHRoaXMpJyAoaWYgc3VjaCBhIHR5cGUgd2VyZSBleHBvc2VkKSwgd2hlcmUgJ3RoaXMnIGlzXG5cdCAqICAgICAgdGhlIGZ1bmN0aW9uIGJlaW5nIGJvdW5kL3dyYXBwZWRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzSW5jbHVkZXMoaW5jbHVkZXMsIGlucHV0KSB7XG5cdCAgICB2YXIgc3JjID0gaW5wdXQudG9TdHJpbmcoKTtcblx0ICAgIHZhciB0ID0gXCJyZXR1cm4gXCIgKyBzcmM7XG5cdCAgICB2YXIgYXJncyA9IHNyYy5tYXRjaCgvLipcXCgoW14pXSopXFwpLylbMV07XG5cdCAgICB2YXIgcmUgPSAvWydcIl0hISEoW14nXCJdKilbJ1wiXS9nO1xuXHQgICAgdmFyIG0gPSBbXTtcblx0ICAgIHdoaWxlICgxKSB7XG5cdCAgICAgICAgdmFyIG14ID0gcmUuZXhlYyh0KTtcblx0ICAgICAgICBpZiAobXgpIG0ucHVzaChteCk7ZWxzZSBicmVhaztcblx0ICAgIH1cblx0ICAgIG0ucmV2ZXJzZSgpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICB0ID0gdC5zbGljZSgwLCBlLmluZGV4KSArIGluY2x1ZGVzW2VbMV1dICsgdC5zdWJzdHIoZS5pbmRleCArIGVbMF0ubGVuZ3RoKTtcblx0ICAgIH0pO1xuXHQgICAgdCA9IHQucmVwbGFjZSgvXFwvXFwqW14qXSpcXCpcXC8vZywgJyAnKS5yZXBsYWNlKC9cXHMrL2csICcgJyk7XG5cdCAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKGFyZ3MsIHQpKCk7XG5cdH1cblx0XG5cdHZhciAkYXN5bmNiaW5kID0gcHJvY2Vzc0luY2x1ZGVzKHtcblx0ICAgIHpvdXNhbjogX193ZWJwYWNrX3JlcXVpcmVfXyg3KS50b1N0cmluZygpLFxuXHQgICAgdGhlbmFibGU6IF9fd2VicGFja19yZXF1aXJlX18oMTEpLnRvU3RyaW5nKClcblx0fSwgZnVuY3Rpb24gJGFzeW5jYmluZChzZWxmLCBjYXRjaGVyKSB7XG5cdCAgICBcInVzZSBzdHJpY3RcIjtcblx0XG5cdCAgICBpZiAoIUZ1bmN0aW9uLnByb3RvdHlwZS4kYXN5bmNiaW5kKSB7XG5cdCAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSwgXCIkYXN5bmNiaW5kXCIsIHsgdmFsdWU6ICRhc3luY2JpbmQsIGVudW1lcmFibGU6IGZhbHNlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICghJGFzeW5jYmluZC50cmFtcG9saW5lKSB7XG5cdCAgICAgICAgJGFzeW5jYmluZC50cmFtcG9saW5lID0gZnVuY3Rpb24gdHJhbXBvbGluZSh0LCB4LCBzLCBlLCB1KSB7XG5cdCAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBiKHEpIHtcblx0ICAgICAgICAgICAgICAgIHdoaWxlIChxKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHEudGhlbikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBxID0gcS50aGVuKGIsIGUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdSA/IHVuZGVmaW5lZCA6IHE7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxLnBvcCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEubGVuZ3RoKSByZXR1cm4gcS5wb3AoKSA/IHguY2FsbCh0KSA6IHE7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0gcztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHEgPSBxLmNhbGwodCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAocikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZShyKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0ICAgIGlmICghJGFzeW5jYmluZC5MYXp5VGhlbmFibGUpIHtcblx0ICAgICAgICAkYXN5bmNiaW5kLkxhenlUaGVuYWJsZSA9ICchISF0aGVuYWJsZScoKTtcblx0ICAgICAgICAkYXN5bmNiaW5kLkVhZ2VyVGhlbmFibGUgPSAkYXN5bmNiaW5kLlRoZW5hYmxlID0gKCRhc3luY2JpbmQuRWFnZXJUaGVuYWJsZUZhY3RvcnkgPSAnISEhem91c2FuJykoKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgcmVzb2x2ZXIgPSB0aGlzO1xuXHQgICAgc3dpdGNoIChjYXRjaGVyKSB7XG5cdCAgICAgICAgY2FzZSB0cnVlOlxuXHQgICAgICAgICAgICByZXR1cm4gbmV3ICRhc3luY2JpbmQuVGhlbmFibGUoYm91bmRUaGVuKTtcblx0ICAgICAgICBjYXNlIDA6XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgJGFzeW5jYmluZC5MYXp5VGhlbmFibGUoYm91bmRUaGVuKTtcblx0ICAgICAgICBjYXNlIHVuZGVmaW5lZDpcblx0ICAgICAgICAgICAgLyogRm9yIHJ1bnRpbWUgY29tcGF0aWJpbGl0eSB3aXRoIE5vZGVudCB2Mi54LCBwcm92aWRlIGEgdGhlbmFibGUgKi9cblx0ICAgICAgICAgICAgYm91bmRUaGVuLnRoZW4gPSBib3VuZFRoZW47XG5cdCAgICAgICAgICAgIHJldHVybiBib3VuZFRoZW47XG5cdCAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVyLmFwcGx5KHNlbGYsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXRjaGVyKGV4KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGJvdW5kVGhlbigpIHtcblx0ICAgICAgICByZXR1cm4gcmVzb2x2ZXIuYXBwbHkoc2VsZiwgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0fSk7XG5cdFxuXHRmdW5jdGlvbiAkYXN5bmNzcGF3bihwcm9taXNlUHJvdmlkZXIsIHNlbGYpIHtcblx0ICAgIGlmICghRnVuY3Rpb24ucHJvdG90eXBlLiRhc3luY3NwYXduKSB7XG5cdCAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSwgXCIkYXN5bmNzcGF3blwiLCB7IHZhbHVlOiAkYXN5bmNzcGF3biwgZW51bWVyYWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7XG5cdCAgICB9XG5cdCAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRnVuY3Rpb24pKSByZXR1cm47XG5cdFxuXHQgICAgdmFyIGdlbkYgPSB0aGlzO1xuXHQgICAgcmV0dXJuIG5ldyBwcm9taXNlUHJvdmlkZXIoZnVuY3Rpb24gZW5vdWdoKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgIHZhciBnZW4gPSBnZW5GLmNhbGwoc2VsZiwgcmVzb2x2ZSwgcmVqZWN0KTtcblx0ICAgICAgICBmdW5jdGlvbiBzdGVwKGZuLCBhcmcpIHtcblx0ICAgICAgICAgICAgdmFyIG5leHQ7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICBuZXh0ID0gZm4uY2FsbChnZW4sIGFyZyk7XG5cdCAgICAgICAgICAgICAgICBpZiAobmV4dC5kb25lKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUgIT09IHJlc29sdmUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUgJiYgbmV4dC52YWx1ZSA9PT0gbmV4dC52YWx1ZS50aGVuKSByZXR1cm4gbmV4dC52YWx1ZShyZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlICYmIHJlc29sdmUobmV4dC52YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUudGhlbikge1xuXHQgICAgICAgICAgICAgICAgICAgIG5leHQudmFsdWUudGhlbihmdW5jdGlvbiAodikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi5uZXh0LCB2KTtcblx0ICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi50aHJvdywgZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLm5leHQsIG5leHQudmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgICAgICByZWplY3QgJiYgcmVqZWN0KGUpO1xuXHQgICAgICAgICAgICAgICAgcmVqZWN0ID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBzdGVwKGdlbi5uZXh0KTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHQvLyBJbml0aWFsaXplIGFzeW5jIGJpbmRpbmdzXG5cdCRhc3luY2JpbmQoKTtcblx0JGFzeW5jc3Bhd24oKTtcblx0XG5cdC8vIEV4cG9ydCBhc3luYyBiaW5kaW5nc1xuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICAgICRhc3luY2JpbmQ6ICRhc3luY2JpbmQsXG5cdCAgICAkYXN5bmNzcGF3bjogJGFzeW5jc3Bhd25cblx0fTtcblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzLCBzZXRJbW1lZGlhdGUpIHsvKiBUaGlzIGNvZGUgaXMgYmFzZWQgb246XG5cdHpvdXNhbiAtIEEgTGlnaHRuaW5nIEZhc3QsIFlldCBWZXJ5IFNtYWxsIFByb21pc2UgQSsgQ29tcGxpYW50IEltcGxlbWVudGF0aW9uXG5cdGh0dHBzOi8vZ2l0aHViLmNvbS9ibHVlamF2YS96b3VzYW5cblx0QXV0aG9yOiBHbGVubiBDcm93bm92ZXIgPGdsZW5uQGJsdWVqYXZhLmNvbT4gKGh0dHA6Ly93d3cuYmx1ZWphdmEuY29tKVxuXHRWZXJzaW9uIDIuMy4zXG5cdExpY2Vuc2U6IE1JVCAqL1xuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHRpY2spIHtcblx0ICAgIHRpY2sgPSB0aWNrIHx8ICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHByb2Nlc3MpKSA9PT0gXCJvYmplY3RcIiAmJiBwcm9jZXNzLm5leHRUaWNrIHx8IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09IFwiZnVuY3Rpb25cIiAmJiBzZXRJbW1lZGlhdGUgfHwgZnVuY3Rpb24gKGYpIHtcblx0ICAgICAgICBzZXRUaW1lb3V0KGYsIDApO1xuXHQgICAgfTtcblx0ICAgIHZhciBzb29uID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBmcSA9IFtdLFxuXHQgICAgICAgICAgICBmcVN0YXJ0ID0gMCxcblx0ICAgICAgICAgICAgYnVmZmVyU2l6ZSA9IDEwMjQ7XG5cdCAgICAgICAgZnVuY3Rpb24gY2FsbFF1ZXVlKCkge1xuXHQgICAgICAgICAgICB3aGlsZSAoZnEubGVuZ3RoIC0gZnFTdGFydCkge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICBmcVtmcVN0YXJ0XSgpO1xuXHQgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHsvKiBjb25zb2xlLmVycm9yKGV4KSAqL31cblx0ICAgICAgICAgICAgICAgIGZxW2ZxU3RhcnQrK10gPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgICAgICAgICBpZiAoZnFTdGFydCA9PT0gYnVmZmVyU2l6ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGZxLnNwbGljZSgwLCBidWZmZXJTaXplKTtcblx0ICAgICAgICAgICAgICAgICAgICBmcVN0YXJ0ID0gMDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmbikge1xuXHQgICAgICAgICAgICBmcS5wdXNoKGZuKTtcblx0ICAgICAgICAgICAgaWYgKGZxLmxlbmd0aCAtIGZxU3RhcnQgPT09IDEpIHRpY2soY2FsbFF1ZXVlKTtcblx0ICAgICAgICB9O1xuXHQgICAgfSgpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIFpvdXNhbihmdW5jKSB7XG5cdCAgICAgICAgaWYgKGZ1bmMpIHtcblx0ICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcblx0ICAgICAgICAgICAgZnVuYyhmdW5jdGlvbiAoYXJnKSB7XG5cdCAgICAgICAgICAgICAgICBtZS5yZXNvbHZlKGFyZyk7XG5cdCAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChhcmcpIHtcblx0ICAgICAgICAgICAgICAgIG1lLnJlamVjdChhcmcpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgWm91c2FuLnByb3RvdHlwZSA9IHtcblx0ICAgICAgICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKHZhbHVlKSB7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSB1bmRlZmluZWQpIHJldHVybjtcblx0ICAgICAgICAgICAgaWYgKHZhbHVlID09PSB0aGlzKSByZXR1cm4gdGhpcy5yZWplY3QobmV3IFR5cGVFcnJvcihcIkF0dGVtcHQgdG8gcmVzb2x2ZSBwcm9taXNlIHdpdGggc2VsZlwiKSk7XG5cdCAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG5cdCAgICAgICAgICAgIGlmICh2YWx1ZSAmJiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgfHwgKHR5cGVvZiB2YWx1ZSA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHZhbHVlKSkgPT09IFwib2JqZWN0XCIpKSB7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdCA9IDA7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRoZW4gPSB2YWx1ZS50aGVuO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhlbiA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVuY3Rpb24gKHJhKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KyspIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5yZXNvbHZlKHJhKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KyspIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5yZWplY3QocnIpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KSB0aGlzLnJlamVjdChlKTtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZVTEZJTExFRDtcblx0ICAgICAgICAgICAgdGhpcy52ID0gdmFsdWU7XG5cdCAgICAgICAgICAgIGlmIChtZS5jKSBzb29uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCBsID0gbWUuYy5sZW5ndGg7IG4gPCBsOyBuKyspIHtcblx0ICAgICAgICAgICAgICAgICAgICBTVEFURV9GVUxGSUxMRUQobWUuY1tuXSwgdmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHJlamVjdDogZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuXHQgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gdW5kZWZpbmVkKSByZXR1cm47XG5cdCAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9SRUpFQ1RFRDtcblx0ICAgICAgICAgICAgdGhpcy52ID0gcmVhc29uO1xuXHQgICAgICAgICAgICB2YXIgY2xpZW50cyA9IHRoaXMuYztcblx0ICAgICAgICAgICAgaWYgKGNsaWVudHMpIHNvb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIGwgPSBjbGllbnRzLmxlbmd0aDsgbiA8IGw7IG4rKykge1xuXHQgICAgICAgICAgICAgICAgICAgIFNUQVRFX1JFSkVDVEVEKGNsaWVudHNbbl0sIHJlYXNvbik7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgdGhlbjogZnVuY3Rpb24gdGhlbihvbkYsIG9uUikge1xuXHQgICAgICAgICAgICB2YXIgcCA9IG5ldyBab3VzYW4oKTtcblx0ICAgICAgICAgICAgdmFyIGNsaWVudCA9IHtcblx0ICAgICAgICAgICAgICAgIHk6IG9uRixcblx0ICAgICAgICAgICAgICAgIG46IG9uUixcblx0ICAgICAgICAgICAgICAgIHA6IHBcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgICAgICAgaWYgKHRoaXMuYykgdGhpcy5jLnB1c2goY2xpZW50KTtlbHNlIHRoaXMuYyA9IFtjbGllbnRdO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdmFyIHMgPSB0aGlzLnN0YXRlLFxuXHQgICAgICAgICAgICAgICAgICAgIGEgPSB0aGlzLnY7XG5cdCAgICAgICAgICAgICAgICBzb29uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICBzKGNsaWVudCwgYSk7XG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gcDtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGZ1bmN0aW9uIFNUQVRFX0ZVTEZJTExFRChjLCBhcmcpIHtcblx0ICAgICAgICBpZiAodHlwZW9mIGMueSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgeXJldCA9IGMueS5jYWxsKHVuZGVmaW5lZCwgYXJnKTtcblx0ICAgICAgICAgICAgICAgIGMucC5yZXNvbHZlKHlyZXQpO1xuXHQgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgIGMucC5yZWplY3QoZXJyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBjLnAucmVzb2x2ZShhcmcpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIFNUQVRFX1JFSkVDVEVEKGMsIHJlYXNvbikge1xuXHQgICAgICAgIGlmICh0eXBlb2YgYy5uID09PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIHZhciB5cmV0ID0gYy5uLmNhbGwodW5kZWZpbmVkLCByZWFzb24pO1xuXHQgICAgICAgICAgICAgICAgYy5wLnJlc29sdmUoeXJldCk7XG5cdCAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICAgICAgYy5wLnJlamVjdChlcnIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIGMucC5yZWplY3QocmVhc29uKTtcblx0ICAgIH1cblx0XG5cdCAgICBab3VzYW4ucmVzb2x2ZSA9IGZ1bmN0aW9uICh2YWwpIHtcblx0ICAgICAgICBpZiAodmFsICYmIHZhbCBpbnN0YW5jZW9mIFpvdXNhbikgcmV0dXJuIHZhbDtcblx0ICAgICAgICB2YXIgeiA9IG5ldyBab3VzYW4oKTtcblx0ICAgICAgICB6LnJlc29sdmUodmFsKTtcblx0ICAgICAgICByZXR1cm4gejtcblx0ICAgIH07XG5cdCAgICBab3VzYW4ucmVqZWN0ID0gZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgIGlmIChlcnIgJiYgZXJyIGluc3RhbmNlb2YgWm91c2FuKSByZXR1cm4gZXJyO1xuXHQgICAgICAgIHZhciB6ID0gbmV3IFpvdXNhbigpO1xuXHQgICAgICAgIHoucmVqZWN0KGVycik7XG5cdCAgICAgICAgcmV0dXJuIHo7XG5cdCAgICB9O1xuXHRcblx0ICAgIFpvdXNhbi52ZXJzaW9uID0gXCIyLjMuMy1ub2RlbnRcIjtcblx0ICAgIHJldHVybiBab3VzYW47XG5cdH07XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpLnNldEltbWVkaWF0ZSkpXG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblx0dmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXHRcblx0Ly8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG5cdC8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuXHQvLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG5cdC8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cdFxuXHR2YXIgY2FjaGVkU2V0VGltZW91dDtcblx0dmFyIGNhY2hlZENsZWFyVGltZW91dDtcblx0XG5cdGZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcblx0fVxuXHRmdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0KCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcblx0fVxuXHQoZnVuY3Rpb24gKCkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcblx0ICAgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcblx0ICAgIH1cblx0fSkoKTtcblx0ZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcblx0ICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG5cdCAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG5cdCAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH1cblx0ICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG5cdCAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcblx0ICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG5cdCAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3Jcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHRmdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG5cdCAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG5cdCAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG5cdCAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cblx0ICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0dmFyIHF1ZXVlID0gW107XG5cdHZhciBkcmFpbmluZyA9IGZhbHNlO1xuXHR2YXIgY3VycmVudFF1ZXVlO1xuXHR2YXIgcXVldWVJbmRleCA9IC0xO1xuXHRcblx0ZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuXHQgICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgfVxuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIGRyYWluUXVldWUoKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcblx0ICAgIGlmIChkcmFpbmluZykge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuXHQgICAgZHJhaW5pbmcgPSB0cnVlO1xuXHRcblx0ICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB3aGlsZSAobGVuKSB7XG5cdCAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG5cdCAgICAgICAgcXVldWUgPSBbXTtcblx0ICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgY3VycmVudFF1ZXVlID0gbnVsbDtcblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG5cdH1cblx0XG5cdHByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcblx0ICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0Ly8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuXHRmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcblx0ICAgIHRoaXMuZnVuID0gZnVuO1xuXHQgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHR9XG5cdEl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xuXHR9O1xuXHRwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xuXHRwcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xuXHRwcm9jZXNzLmVudiA9IHt9O1xuXHRwcm9jZXNzLmFyZ3YgPSBbXTtcblx0cHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5cdHByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0cHJvY2Vzcy5vbiA9IG5vb3A7XG5cdHByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLm9uY2UgPSBub29wO1xuXHRwcm9jZXNzLm9mZiA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5cdHByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cdFxuXHRwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRcblx0cHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gJy8nO1xuXHR9O1xuXHRwcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0cHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiAwO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHR2YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cdFxuXHQvLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXHRcblx0ZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcblx0fTtcblx0ZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcblx0fTtcblx0ZXhwb3J0cy5jbGVhclRpbWVvdXQgPSBleHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbiAodGltZW91dCkge1xuXHQgIGlmICh0aW1lb3V0KSB7XG5cdCAgICB0aW1lb3V0LmNsb3NlKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuXHQgIHRoaXMuX2lkID0gaWQ7XG5cdCAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG5cdH1cblx0VGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbiAoKSB7fTtcblx0VGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdywgdGhpcy5faWQpO1xuXHR9O1xuXHRcblx0Ly8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5cdGV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24gKGl0ZW0sIG1zZWNzKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHQgIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG5cdH07XG5cdFxuXHRleHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdCAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcblx0fTtcblx0XG5cdGV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbiAoaXRlbSkge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0XG5cdCAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG5cdCAgaWYgKG1zZWNzID49IDApIHtcblx0ICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcblx0ICAgICAgaWYgKGl0ZW0uX29uVGltZW91dCkgaXRlbS5fb25UaW1lb3V0KCk7XG5cdCAgICB9LCBtc2Vjcyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdFxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0ZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG5cdGV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsLCBwcm9jZXNzKSB7XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHQoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG5cdCAgICBcInVzZSBzdHJpY3RcIjtcblx0XG5cdCAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuXHQgICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcblx0ICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcblx0ICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG5cdCAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cdFxuXHQgICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG5cdCAgICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nXG5cdCAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKFwiXCIgKyBjYWxsYmFjayk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG5cdCAgICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrXG5cdCAgICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuXHQgICAgICAgIHRhc2tzQnlIYW5kbGVbbmV4dEhhbmRsZV0gPSB0YXNrO1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpO1xuXHQgICAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBydW4odGFzaykge1xuXHQgICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG5cdCAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG5cdCAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuXHQgICAgICAgICAgICBjYXNlIDA6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIGNhc2UgMTpcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIGNhc2UgMjpcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIGNhc2UgMzpcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcblx0ICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG5cdCAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cblx0ICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG5cdCAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG5cdCAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG5cdCAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuXHQgICAgICAgICAgICBpZiAodGFzaykge1xuXHQgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuXHQgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcblx0ICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG5cdCAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuXHQgICAgICAgIC8vIHdoZXJlIGBnbG9iYWwucG9zdE1lc3NhZ2VgIG1lYW5zIHNvbWV0aGluZyBjb21wbGV0ZWx5IGRpZmZlcmVudCBhbmQgY2FuJ3QgYmUgdXNlZCBmb3IgdGhpcyBwdXJwb3NlLlxuXHQgICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG5cdCAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gdHJ1ZTtcblx0ICAgICAgICAgICAgdmFyIG9sZE9uTWVzc2FnZSA9IGdsb2JhbC5vbm1lc3NhZ2U7XG5cdCAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShcIlwiLCBcIipcIik7XG5cdCAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG5cdCAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcblx0ICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2Vcblx0ICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG5cdFxuXHQgICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG5cdCAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uIG9uR2xvYmFsTWVzc2FnZShldmVudCkge1xuXHQgICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiYgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiYgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG5cdCAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuXHQgICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcblx0ICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcblx0ICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG5cdCAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG5cdCAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcblx0ICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuXHQgICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG5cdCAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuXG5cdCAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG5cdCAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblx0XG5cdCAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG5cdCAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG5cdCAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuXHQgICAgICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9IGVsc2UgaWYgKGNhblVzZVBvc3RNZXNzYWdlKCkpIHtcblx0ICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG5cdCAgICAgICAgaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG5cdCAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcblx0ICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuXHQgICAgICAgIC8vIEZvciBJRSA24oCTOFxuXHQgICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG5cdCAgICAgICAgaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfVxuXHRcblx0ICAgIGF0dGFjaFRvLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcblx0ICAgIGF0dGFjaFRvLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG5cdH0pKHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiID8gdHlwZW9mIGdsb2JhbCA9PT0gXCJ1bmRlZmluZWRcIiA/IHVuZGVmaW5lZCA6IGdsb2JhbCA6IHNlbGYpO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSwgX193ZWJwYWNrX3JlcXVpcmVfXyg4KSkpXG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIGlzVGhlbmFibGUob2JqKSB7XG5cdCAgICAgICAgcmV0dXJuIG9iaiAmJiBvYmogaW5zdGFuY2VvZiBPYmplY3QgJiYgdHlwZW9mIG9iai50aGVuID09PSBcImZ1bmN0aW9uXCI7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gcmVzb2x1dGlvbihwLCByLCBob3cpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvKiAyLjIuNy4xICovXG5cdCAgICAgICAgICAgIHZhciB4ID0gaG93ID8gaG93KHIpIDogcjtcblx0XG5cdCAgICAgICAgICAgIGlmIChwID09PSB4KSAvKiAyLjMuMSAqL1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHAucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJQcm9taXNlIHJlc29sdXRpb24gbG9vcFwiKSk7XG5cdFxuXHQgICAgICAgICAgICBpZiAoaXNUaGVuYWJsZSh4KSkge1xuXHQgICAgICAgICAgICAgICAgLyogMi4zLjMgKi9cblx0ICAgICAgICAgICAgICAgIHgudGhlbihmdW5jdGlvbiAoeSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb24ocCwgeSk7XG5cdCAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHAucmVqZWN0KGUpO1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICBwLnJlc29sdmUoeCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGNhdGNoIChleCkge1xuXHQgICAgICAgICAgICAvKiAyLjIuNy4yICovXG5cdCAgICAgICAgICAgIHAucmVqZWN0KGV4KTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gQ2hhaW5lZCgpIHt9O1xuXHQgICAgQ2hhaW5lZC5wcm90b3R5cGUgPSB7XG5cdCAgICAgICAgcmVzb2x2ZTogX3VuY2hhaW5lZCxcblx0ICAgICAgICByZWplY3Q6IF91bmNoYWluZWQsXG5cdCAgICAgICAgdGhlbjogdGhlbkNoYWluXG5cdCAgICB9O1xuXHQgICAgZnVuY3Rpb24gX3VuY2hhaW5lZCh2KSB7fVxuXHQgICAgZnVuY3Rpb24gdGhlbkNoYWluKHJlcywgcmVqKSB7XG5cdCAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzO1xuXHQgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHRoZW4ocmVzLCByZWopIHtcblx0ICAgICAgICB2YXIgY2hhaW4gPSBuZXcgQ2hhaW5lZCgpO1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVyKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGlzVGhlbmFibGUodmFsdWUpID8gdmFsdWUudGhlbihyZXMsIHJlaikgOiByZXNvbHV0aW9uKGNoYWluLCB2YWx1ZSwgcmVzKTtcblx0ICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGV4KSB7XG5cdCAgICAgICAgICAgICAgICByZXNvbHV0aW9uKGNoYWluLCBleCwgcmVqKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSBjYXRjaCAoZXgpIHtcblx0ICAgICAgICAgICAgcmVzb2x1dGlvbihjaGFpbiwgZXgsIHJlaik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBjaGFpbjtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBUaGVuYWJsZShyZXNvbHZlcikge1xuXHQgICAgICAgIHRoaXMuX3Jlc29sdmVyID0gcmVzb2x2ZXI7XG5cdCAgICAgICAgdGhpcy50aGVuID0gdGhlbjtcblx0ICAgIH07XG5cdFxuXHQgICAgVGhlbmFibGUucmVzb2x2ZSA9IGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgcmV0dXJuIFRoZW5hYmxlLmlzVGhlbmFibGUodikgPyB2IDogeyB0aGVuOiBmdW5jdGlvbiB0aGVuKHJlc29sdmUpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHYpO1xuXHQgICAgICAgICAgICB9IH07XG5cdCAgICB9O1xuXHRcblx0ICAgIFRoZW5hYmxlLmlzVGhlbmFibGUgPSBpc1RoZW5hYmxlO1xuXHRcblx0ICAgIHJldHVybiBUaGVuYWJsZTtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0LyoqXG5cdCAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cblx0ICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuXHQgKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQgKi9cblx0XG5cdC8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG5cdHZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cdFxuXHQvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cblx0dmFyIE5BTiA9IDAgLyAwO1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cdFxuXHQvKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xuXHR2YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblx0XG5cdC8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG5cdHZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblx0XG5cdC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG5cdHZhciBmcmVlR2xvYmFsID0gKHR5cGVvZiBnbG9iYWwgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGdsb2JhbCkpID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXHRcblx0LyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cblx0dmFyIGZyZWVTZWxmID0gKHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihzZWxmKSkgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cdFxuXHQvKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cblx0dmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byByZXNvbHZlIHRoZVxuXHQgKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcblx0ICogb2YgdmFsdWVzLlxuXHQgKi9cblx0dmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG5cdHZhciBuYXRpdmVNYXggPSBNYXRoLm1heCxcblx0ICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuXHQgKiB0aGUgVW5peCBlcG9jaCAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMi40LjBcblx0ICogQGNhdGVnb3J5IERhdGVcblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXN0YW1wLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7XG5cdCAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcblx0ICogfSwgXy5ub3coKSk7XG5cdCAqIC8vID0+IExvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGludm9jYXRpb24uXG5cdCAqL1xuXHR2YXIgbm93ID0gZnVuY3Rpb24gbm93KCkge1xuXHQgIHJldHVybiByb290LkRhdGUubm93KCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGRlYm91bmNlZCBmdW5jdGlvbiB0aGF0IGRlbGF5cyBpbnZva2luZyBgZnVuY2AgdW50aWwgYWZ0ZXIgYHdhaXRgXG5cdCAqIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdhc1xuXHQgKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG5cdCAqIGRlbGF5ZWQgYGZ1bmNgIGludm9jYXRpb25zIGFuZCBhIGBmbHVzaGAgbWV0aG9kIHRvIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLlxuXHQgKiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGVcblx0ICogbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZFxuXHQgKiB3aXRoIHRoZSBsYXN0IGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50XG5cdCAqIGNhbGxzIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgXG5cdCAqIGludm9jYXRpb24uXG5cdCAqXG5cdCAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcblx0ICogaW52b2tlZCBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cblx0ICogaXMgaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuXHQgKlxuXHQgKiBJZiBgd2FpdGAgaXMgYDBgIGFuZCBgbGVhZGluZ2AgaXMgYGZhbHNlYCwgYGZ1bmNgIGludm9jYXRpb24gaXMgZGVmZXJyZWRcblx0ICogdW50aWwgdG8gdGhlIG5leHQgdGljaywgc2ltaWxhciB0byBgc2V0VGltZW91dGAgd2l0aCBhIHRpbWVvdXQgb2YgYDBgLlxuXHQgKlxuXHQgKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9kZWJvdW5jaW5nLXRocm90dGxpbmctZXhwbGFpbmVkLWV4YW1wbGVzLylcblx0ICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy5kZWJvdW5jZWAgYW5kIGBfLnRocm90dGxlYC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQGNhdGVnb3J5IEZ1bmN0aW9uXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgb2JqZWN0LlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9ZmFsc2VdXG5cdCAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XVxuXHQgKiAgVGhlIG1heGltdW0gdGltZSBgZnVuY2AgaXMgYWxsb3dlZCB0byBiZSBkZWxheWVkIGJlZm9yZSBpdCdzIGludm9rZWQuXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cblx0ICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogLy8gQXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eC5cblx0ICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcblx0ICpcblx0ICogLy8gSW52b2tlIGBzZW5kTWFpbGAgd2hlbiBjbGlja2VkLCBkZWJvdW5jaW5nIHN1YnNlcXVlbnQgY2FsbHMuXG5cdCAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcblx0ICogICAnbGVhZGluZyc6IHRydWUsXG5cdCAqICAgJ3RyYWlsaW5nJzogZmFsc2Vcblx0ICogfSkpO1xuXHQgKlxuXHQgKiAvLyBFbnN1cmUgYGJhdGNoTG9nYCBpcyBpbnZva2VkIG9uY2UgYWZ0ZXIgMSBzZWNvbmQgb2YgZGVib3VuY2VkIGNhbGxzLlxuXHQgKiB2YXIgZGVib3VuY2VkID0gXy5kZWJvdW5jZShiYXRjaExvZywgMjUwLCB7ICdtYXhXYWl0JzogMTAwMCB9KTtcblx0ICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuXHQgKiBqUXVlcnkoc291cmNlKS5vbignbWVzc2FnZScsIGRlYm91bmNlZCk7XG5cdCAqXG5cdCAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgZGVib3VuY2VkIGludm9jYXRpb24uXG5cdCAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGRlYm91bmNlZC5jYW5jZWwpO1xuXHQgKi9cblx0ZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuXHQgIHZhciBsYXN0QXJncyxcblx0ICAgICAgbGFzdFRoaXMsXG5cdCAgICAgIG1heFdhaXQsXG5cdCAgICAgIHJlc3VsdCxcblx0ICAgICAgdGltZXJJZCxcblx0ICAgICAgbGFzdENhbGxUaW1lLFxuXHQgICAgICBsYXN0SW52b2tlVGltZSA9IDAsXG5cdCAgICAgIGxlYWRpbmcgPSBmYWxzZSxcblx0ICAgICAgbWF4aW5nID0gZmFsc2UsXG5cdCAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblx0XG5cdCAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcblx0ICB9XG5cdCAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG5cdCAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG5cdCAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG5cdCAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcblx0ICAgIG1heFdhaXQgPSBtYXhpbmcgPyBuYXRpdmVNYXgodG9OdW1iZXIob3B0aW9ucy5tYXhXYWl0KSB8fCAwLCB3YWl0KSA6IG1heFdhaXQ7XG5cdCAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaW52b2tlRnVuYyh0aW1lKSB7XG5cdCAgICB2YXIgYXJncyA9IGxhc3RBcmdzLFxuXHQgICAgICAgIHRoaXNBcmcgPSBsYXN0VGhpcztcblx0XG5cdCAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuXHQgICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuXHQgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG5cdCAgICAvLyBSZXNldCBhbnkgYG1heFdhaXRgIHRpbWVyLlxuXHQgICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuXHQgICAgLy8gU3RhcnQgdGhlIHRpbWVyIGZvciB0aGUgdHJhaWxpbmcgZWRnZS5cblx0ICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG5cdCAgICAvLyBJbnZva2UgdGhlIGxlYWRpbmcgZWRnZS5cblx0ICAgIHJldHVybiBsZWFkaW5nID8gaW52b2tlRnVuYyh0aW1lKSA6IHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHJlbWFpbmluZ1dhaXQodGltZSkge1xuXHQgICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcblx0ICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lLFxuXHQgICAgICAgIHJlc3VsdCA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcblx0XG5cdCAgICByZXR1cm4gbWF4aW5nID8gbmF0aXZlTWluKHJlc3VsdCwgbWF4V2FpdCAtIHRpbWVTaW5jZUxhc3RJbnZva2UpIDogcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gc2hvdWxkSW52b2tlKHRpbWUpIHtcblx0ICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG5cdCAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZTtcblx0XG5cdCAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuXHQgICAgLy8gdHJhaWxpbmcgZWRnZSwgdGhlIHN5c3RlbSB0aW1lIGhhcyBnb25lIGJhY2t3YXJkcyBhbmQgd2UncmUgdHJlYXRpbmdcblx0ICAgIC8vIGl0IGFzIHRoZSB0cmFpbGluZyBlZGdlLCBvciB3ZSd2ZSBoaXQgdGhlIGBtYXhXYWl0YCBsaW1pdC5cblx0ICAgIHJldHVybiBsYXN0Q2FsbFRpbWUgPT09IHVuZGVmaW5lZCB8fCB0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0IHx8IHRpbWVTaW5jZUxhc3RDYWxsIDwgMCB8fCBtYXhpbmcgJiYgdGltZVNpbmNlTGFzdEludm9rZSA+PSBtYXhXYWl0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuXHQgICAgdmFyIHRpbWUgPSBub3coKTtcblx0ICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcblx0ICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcblx0ICAgIH1cblx0ICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuXHQgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG5cdCAgICB0aW1lcklkID0gdW5kZWZpbmVkO1xuXHRcblx0ICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cblx0ICAgIC8vIGRlYm91bmNlZCBhdCBsZWFzdCBvbmNlLlxuXHQgICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG5cdCAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuXHQgICAgfVxuXHQgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBjYW5jZWwoKSB7XG5cdCAgICBpZiAodGltZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcblx0ICAgIH1cblx0ICAgIGxhc3RJbnZva2VUaW1lID0gMDtcblx0ICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdW5kZWZpbmVkO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZmx1c2goKSB7XG5cdCAgICByZXR1cm4gdGltZXJJZCA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogdHJhaWxpbmdFZGdlKG5vdygpKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcblx0ICAgIHZhciB0aW1lID0gbm93KCksXG5cdCAgICAgICAgaXNJbnZva2luZyA9IHNob3VsZEludm9rZSh0aW1lKTtcblx0XG5cdCAgICBsYXN0QXJncyA9IGFyZ3VtZW50cztcblx0ICAgIGxhc3RUaGlzID0gdGhpcztcblx0ICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG5cdFxuXHQgICAgaWYgKGlzSW52b2tpbmcpIHtcblx0ICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIHJldHVybiBsZWFkaW5nRWRnZShsYXN0Q2FsbFRpbWUpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChtYXhpbmcpIHtcblx0ICAgICAgICAvLyBIYW5kbGUgaW52b2NhdGlvbnMgaW4gYSB0aWdodCBsb29wLlxuXHQgICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG5cdCAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9XG5cdCAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcblx0ICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcblx0ICByZXR1cm4gZGVib3VuY2VkO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG5cdCAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcblx0ICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3Qoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChudWxsKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHZhbHVlKTtcblx0ICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG5cdCAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKHt9KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodmFsdWUpKSA9PSAnb2JqZWN0Jztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNTeW1ib2woJ2FiYycpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcblx0ICByZXR1cm4gKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodmFsdWUpKSA9PSAnc3ltYm9sJyB8fCBpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG51bWJlci5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy50b051bWJlcigzLjIpO1xuXHQgKiAvLyA9PiAzLjJcblx0ICpcblx0ICogXy50b051bWJlcihOdW1iZXIuTUlOX1ZBTFVFKTtcblx0ICogLy8gPT4gNWUtMzI0XG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoSW5maW5pdHkpO1xuXHQgKiAvLyA9PiBJbmZpbml0eVxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKCczLjInKTtcblx0ICogLy8gPT4gMy4yXG5cdCAqL1xuXHRmdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIE5BTjtcblx0ICB9XG5cdCAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuXHQgICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuXHQgICAgdmFsdWUgPSBpc09iamVjdChvdGhlcikgPyBvdGhlciArICcnIDogb3RoZXI7XG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuXHQgIH1cblx0ICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG5cdCAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcblx0ICByZXR1cm4gaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KSA6IHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWU7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX2RvbVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHR2YXIgX2NvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIFNlYXJjaEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gU2VhcmNoRWxlbWVudCgpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgIF9yZWYkaGFuZGxlU3VibWl0ID0gX3JlZi5oYW5kbGVTdWJtaXQsXG5cdCAgICAgICAgaGFuZGxlU3VibWl0ID0gX3JlZiRoYW5kbGVTdWJtaXQgPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uICgpIHt9IDogX3JlZiRoYW5kbGVTdWJtaXQsXG5cdCAgICAgICAgX3JlZiRzZWFyY2hMYWJlbCA9IF9yZWYuc2VhcmNoTGFiZWwsXG5cdCAgICAgICAgc2VhcmNoTGFiZWwgPSBfcmVmJHNlYXJjaExhYmVsID09PSB1bmRlZmluZWQgPyAnc2VhcmNoJyA6IF9yZWYkc2VhcmNoTGFiZWwsXG5cdCAgICAgICAgX3JlZiRjbGFzc05hbWVzID0gX3JlZi5jbGFzc05hbWVzLFxuXHQgICAgICAgIGNsYXNzTmFtZXMgPSBfcmVmJGNsYXNzTmFtZXMgPT09IHVuZGVmaW5lZCA/IHt9IDogX3JlZiRjbGFzc05hbWVzO1xuXHRcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZWFyY2hFbGVtZW50KTtcblx0XG5cdCAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgWydnZW9zZWFyY2gnLCBjbGFzc05hbWVzLmNvbnRhaW5lcl0uam9pbignICcpKTtcblx0ICAgIHZhciBmb3JtID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZm9ybScsIFsnJywgY2xhc3NOYW1lcy5mb3JtXS5qb2luKCcgJyksIGNvbnRhaW5lcik7XG5cdCAgICB2YXIgaW5wdXQgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdpbnB1dCcsIFsnZ2xhc3MnLCBjbGFzc05hbWVzLmlucHV0XS5qb2luKCcgJyksIGZvcm0pO1xuXHRcblx0ICAgIGlucHV0LnR5cGUgPSAndGV4dCc7XG5cdCAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHNlYXJjaExhYmVsO1xuXHRcblx0ICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgX3RoaXMub25JbnB1dChlKTtcblx0ICAgIH0sIGZhbHNlKTtcblx0ICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgX3RoaXMub25LZXlVcChlKTtcblx0ICAgIH0sIGZhbHNlKTtcblx0ICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgX3RoaXMub25LZXlQcmVzcyhlKTtcblx0ICAgIH0sIGZhbHNlKTtcblx0ICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgX3RoaXMub25Gb2N1cyhlKTtcblx0ICAgIH0sIGZhbHNlKTtcblx0ICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbkJsdXIoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdFxuXHQgICAgdGhpcy5lbGVtZW50cyA9IHsgY29udGFpbmVyOiBjb250YWluZXIsIGZvcm06IGZvcm0sIGlucHV0OiBpbnB1dCB9O1xuXHQgICAgdGhpcy5oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoU2VhcmNoRWxlbWVudCwgW3tcblx0ICAgIGtleTogJ29uRm9jdXMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uRm9jdXMoKSB7XG5cdCAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKSh0aGlzLmVsZW1lbnRzLmZvcm0sICdhY3RpdmUnKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvbkJsdXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQmx1cigpIHtcblx0ICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKHRoaXMuZWxlbWVudHMuZm9ybSwgJ2FjdGl2ZScpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uU3VibWl0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvblN1Ym1pdChldmVudCkge1xuXHQgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuXHQgICAgICAgIHZhciBfZWxlbWVudHMsIGlucHV0LCBjb250YWluZXI7XG5cdFxuXHQgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFxuXHQgICAgICAgIF9lbGVtZW50cyA9IHRoaXMuZWxlbWVudHMsIGlucHV0ID0gX2VsZW1lbnRzLmlucHV0LCBjb250YWluZXIgPSBfZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnZXJyb3InKTtcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuXHRcblx0ICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVTdWJtaXQoeyBxdWVyeTogaW5wdXQudmFsdWUgfSkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcblx0ICAgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG5cdCAgICAgICAgICByZXR1cm4gJHJldHVybigpO1xuXHQgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uSW5wdXQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uSW5wdXQoKSB7XG5cdCAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2Vycm9yJyk7XG5cdCAgICAgICAgdGhpcy5oYXNFcnJvciA9IGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb25LZXlVcCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25LZXlVcChldmVudCkge1xuXHQgICAgICB2YXIgX2VsZW1lbnRzMiA9IHRoaXMuZWxlbWVudHMsXG5cdCAgICAgICAgICBjb250YWluZXIgPSBfZWxlbWVudHMyLmNvbnRhaW5lcixcblx0ICAgICAgICAgIGlucHV0ID0gX2VsZW1lbnRzMi5pbnB1dDtcblx0XG5cdCAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBfY29uc3RhbnRzLkVTQ0FQRV9LRVkpIHtcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblx0XG5cdCAgICAgICAgaW5wdXQudmFsdWUgPSAnJztcblx0XG5cdCAgICAgICAgZG9jdW1lbnQuYm9keS5mb2N1cygpO1xuXHQgICAgICAgIGRvY3VtZW50LmJvZHkuYmx1cigpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb25LZXlQcmVzcycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25LZXlQcmVzcyhldmVudCkge1xuXHQgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gX2NvbnN0YW50cy5FTlRFUl9LRVkpIHtcblx0ICAgICAgICB0aGlzLm9uU3VibWl0KGV2ZW50KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NldFF1ZXJ5Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRRdWVyeShxdWVyeSkge1xuXHQgICAgICB2YXIgaW5wdXQgPSB0aGlzLmVsZW1lbnRzLmlucHV0O1xuXHRcblx0ICAgICAgaW5wdXQudmFsdWUgPSBxdWVyeTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBTZWFyY2hFbGVtZW50O1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBTZWFyY2hFbGVtZW50O1xuXG4vKioqLyB9LFxuLyogMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXG5cdHZhciBjcmVhdGVFbGVtZW50ID0gZXhwb3J0cy5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlRWxlbWVudChlbGVtZW50KSB7XG5cdCAgdmFyIGNsYXNzTmFtZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnO1xuXHQgIHZhciBwYXJlbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IG51bGw7XG5cdFxuXHQgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudCk7XG5cdCAgZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lcztcblx0XG5cdCAgaWYgKHBhcmVudCkge1xuXHQgICAgcGFyZW50LmFwcGVuZENoaWxkKGVsKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBlbDtcblx0fTtcblx0XG5cdHZhciBjcmVhdGVTY3JpcHRFbGVtZW50ID0gZXhwb3J0cy5jcmVhdGVTY3JpcHRFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlU2NyaXB0RWxlbWVudCh1cmwsIGNiKSB7XG5cdCAgdmFyIHNjcmlwdCA9IGNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcsIG51bGwsIGRvY3VtZW50LmJvZHkpO1xuXHQgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9qYXZhc2NyaXB0Jyk7XG5cdFxuXHQgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuXHQgICAgd2luZG93W2NiXSA9IGZ1bmN0aW9uIChqc29uKSB7XG5cdCAgICAgIHNjcmlwdC5yZW1vdmUoKTtcblx0ICAgICAgZGVsZXRlIHdpbmRvd1tjYl07XG5cdCAgICAgIHJlc29sdmUoanNvbik7XG5cdCAgICB9O1xuXHRcblx0ICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHVybCk7XG5cdCAgfSk7XG5cdH07XG5cdFxuXHR2YXIgYWRkQ2xhc3NOYW1lID0gZXhwb3J0cy5hZGRDbGFzc05hbWUgPSBmdW5jdGlvbiBhZGRDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG5cdCAgaWYgKGVsZW1lbnQgJiYgIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcblx0ICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciByZW1vdmVDbGFzc05hbWUgPSBleHBvcnRzLnJlbW92ZUNsYXNzTmFtZSA9IGZ1bmN0aW9uIHJlbW92ZUNsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWUpIHtcblx0ICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG5cdCAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcblx0ICB9XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0dmFyIEVOVEVSX0tFWSA9IGV4cG9ydHMuRU5URVJfS0VZID0gMTM7XG5cdHZhciBFU0NBUEVfS0VZID0gZXhwb3J0cy5FU0NBUEVfS0VZID0gMjc7XG5cdHZhciBBUlJPV19ET1dOX0tFWSA9IGV4cG9ydHMuQVJST1dfRE9XTl9LRVkgPSA0MDtcblx0dmFyIEFSUk9XX1VQX0tFWSA9IGV4cG9ydHMuQVJST1dfVVBfS0VZID0gMzg7XG5cdHZhciBBUlJPV19MRUZUX0tFWSA9IGV4cG9ydHMuQVJST1dfTEVGVF9LRVkgPSAzNztcblx0dmFyIEFSUk9XX1JJR0hUX0tFWSA9IGV4cG9ydHMuQVJST1dfUklHSFRfS0VZID0gMzk7XG5cdFxuXHR2YXIgU1BFQ0lBTF9LRVlTID0gZXhwb3J0cy5TUEVDSUFMX0tFWVMgPSBbRU5URVJfS0VZLCBFU0NBUEVfS0VZLCBBUlJPV19ET1dOX0tFWSwgQVJST1dfVVBfS0VZLCBBUlJPV19MRUZUX0tFWSwgQVJST1dfUklHSFRfS0VZXTtcblxuLyoqKi8gfSxcbi8qIDE2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfZG9tVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBjeCA9IGZ1bmN0aW9uIGN4KCkge1xuXHQgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBjbGFzc25hbWVzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG5cdCAgICBjbGFzc25hbWVzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGNsYXNzbmFtZXMuam9pbignICcpLnRyaW0oKTtcblx0fTtcblx0XG5cdHZhciBSZXN1bHRMaXN0ID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIFJlc3VsdExpc3QoKSB7XG5cdCAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgX3JlZiRoYW5kbGVDbGljayA9IF9yZWYuaGFuZGxlQ2xpY2ssXG5cdCAgICAgICAgaGFuZGxlQ2xpY2sgPSBfcmVmJGhhbmRsZUNsaWNrID09PSB1bmRlZmluZWQgPyBmdW5jdGlvbiAoKSB7fSA6IF9yZWYkaGFuZGxlQ2xpY2ssXG5cdCAgICAgICAgX3JlZiRjbGFzc05hbWVzID0gX3JlZi5jbGFzc05hbWVzLFxuXHQgICAgICAgIGNsYXNzTmFtZXMgPSBfcmVmJGNsYXNzTmFtZXMgPT09IHVuZGVmaW5lZCA/IHt9IDogX3JlZiRjbGFzc05hbWVzO1xuXHRcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZXN1bHRMaXN0KTtcblx0XG5cdCAgICBfaW5pdGlhbGlzZVByb3BzLmNhbGwodGhpcyk7XG5cdFxuXHQgICAgdGhpcy5wcm9wcyA9IHsgaGFuZGxlQ2xpY2s6IGhhbmRsZUNsaWNrLCBjbGFzc05hbWVzOiBjbGFzc05hbWVzIH07XG5cdCAgICB0aGlzLnNlbGVjdGVkID0gLTE7XG5cdFxuXHQgICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIGN4KCdyZXN1bHRzJywgY2xhc3NOYW1lcy5jb250YWluZXIpKTtcblx0ICAgIHZhciByZXN1bHRJdGVtID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgY3goY2xhc3NOYW1lcy5pdGVtKSk7XG5cdFxuXHQgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrLCB0cnVlKTtcblx0ICAgIHRoaXMuZWxlbWVudHMgPSB7IGNvbnRhaW5lcjogY29udGFpbmVyLCByZXN1bHRJdGVtOiByZXN1bHRJdGVtIH07XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUmVzdWx0TGlzdCwgW3tcblx0ICAgIGtleTogJ3JlbmRlcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuXHQgICAgICB2YXIgcmVzdWx0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107XG5cdCAgICAgIHZhciBfZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzLFxuXHQgICAgICAgICAgY29udGFpbmVyID0gX2VsZW1lbnRzLmNvbnRhaW5lcixcblx0ICAgICAgICAgIHJlc3VsdEl0ZW0gPSBfZWxlbWVudHMucmVzdWx0SXRlbTtcblx0XG5cdCAgICAgIHRoaXMuY2xlYXIoKTtcblx0XG5cdCAgICAgIHJlc3VsdHMuZm9yRWFjaChmdW5jdGlvbiAocmVzdWx0LCBpZHgpIHtcblx0ICAgICAgICB2YXIgY2hpbGQgPSByZXN1bHRJdGVtLmNsb25lTm9kZSh0cnVlKTtcblx0ICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoJ2RhdGEta2V5JywgaWR4KTtcblx0ICAgICAgICBjaGlsZC5pbm5lckhUTUwgPSByZXN1bHQubGFiZWw7XG5cdCAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNoaWxkKTtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLnJlc3VsdHMgPSByZXN1bHRzO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NlbGVjdCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0KGluZGV4KSB7XG5cdCAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25mdXNpbmctYXJyb3dcblx0XG5cdCAgICAgIEFycmF5LmZyb20oY29udGFpbmVyLmNoaWxkcmVuKS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCwgaWR4KSB7XG5cdCAgICAgICAgcmV0dXJuIGlkeCA9PT0gaW5kZXggPyAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY2hpbGQsICdhY3RpdmUnKSA6ICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjaGlsZCwgJ2FjdGl2ZScpO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIHRoaXMuc2VsZWN0ZWQgPSBpbmRleDtcblx0ICAgICAgcmV0dXJuIHRoaXMucmVzdWx0c1tpbmRleF07XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnY291bnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNvdW50KCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5yZXN1bHRzLmxlbmd0aDtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdjbGVhcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7XG5cdCAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICAgIHRoaXMuc2VsZWN0ZWQgPSAtMTtcblx0XG5cdCAgICAgIHdoaWxlIChjb250YWluZXIubGFzdENoaWxkKSB7XG5cdCAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5sYXN0Q2hpbGQpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUmVzdWx0TGlzdDtcblx0fSgpO1xuXHRcblx0dmFyIF9pbml0aWFsaXNlUHJvcHMgPSBmdW5jdGlvbiBfaW5pdGlhbGlzZVByb3BzKCkge1xuXHQgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgIHRoaXMub25DbGljayA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBfcmVmMiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgdGFyZ2V0ID0gX3JlZjIudGFyZ2V0O1xuXHRcblx0ICAgIHZhciBoYW5kbGVDbGljayA9IF90aGlzLnByb3BzLmhhbmRsZUNsaWNrO1xuXHQgICAgdmFyIGNvbnRhaW5lciA9IF90aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICBpZiAodGFyZ2V0LnBhcmVudE5vZGUgIT09IGNvbnRhaW5lciB8fCAhdGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1rZXknKSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGlkeCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEta2V5Jyk7XG5cdCAgICB2YXIgcmVzdWx0ID0gX3RoaXMucmVzdWx0c1tpZHhdO1xuXHQgICAgaGFuZGxlQ2xpY2soeyByZXN1bHQ6IHJlc3VsdCB9KTtcblx0ICB9O1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUmVzdWx0TGlzdDtcblxuLyoqKi8gfSxcbi8qIDE3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcblx0ICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG5cdCAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG5cdCAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1yZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9wcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0dmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cdFxuXHR2YXIgX2RvbVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG5cdCAgaWYgKCFzZWxmKSB7XG5cdCAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG5cdCAgfXJldHVybiBjYWxsICYmICgodHlwZW9mIGNhbGwgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGNhbGwpKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcblx0ICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArICh0eXBlb2Ygc3VwZXJDbGFzcyA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcblx0ICB9c3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTtpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG5cdCAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblx0XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZW5kcG9pbnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG5cdCAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2wsXG5cdCAgICAgICAgICBqc29ucCA9IF9yZWYuanNvbnA7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblx0XG5cdCAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuXHQgICAgICAgIHF1ZXJ5OiBxdWVyeSxcblx0ICAgICAgICBqc29ucDoganNvbnBcblx0ICAgICAgfSkpO1xuXHRcblx0ICAgICAgcmV0dXJuIHByb3RvY29sICsgJy8vZGV2LnZpcnR1YWxlYXJ0aC5uZXQvUkVTVC92MS9Mb2NhdGlvbnM/JyArIHBhcmFtU3RyaW5nO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BhcnNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuXHQgICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cdFxuXHQgICAgICBpZiAoZGF0YS5yZXNvdXJjZVNldHMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuIFtdO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gZGF0YS5yZXNvdXJjZVNldHNbMF0ucmVzb3VyY2VzLm1hcChmdW5jdGlvbiAocikge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICB4OiByLnBvaW50LmNvb3JkaW5hdGVzWzFdLFxuXHQgICAgICAgICAgeTogci5wb2ludC5jb29yZGluYXRlc1swXSxcblx0ICAgICAgICAgIGxhYmVsOiByLmFkZHJlc3MuZm9ybWF0dGVkQWRkcmVzcyxcblx0ICAgICAgICAgIGJvdW5kczogW1tyLmJib3hbMF0sIHIuYmJveFsxXV0sIC8vIHMsIHdcblx0ICAgICAgICAgIFtyLmJib3hbMl0sIHIuYmJveFszXV1dLFxuXHQgICAgICAgICAgcmF3OiByXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2VhcmNoJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZWFyY2goX3JlZjMpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgICB2YXIgcXVlcnksIHByb3RvY29sLCBqc29ucCwgdXJsLCBqc29uO1xuXHQgICAgICAgIHF1ZXJ5ID0gX3JlZjMucXVlcnk7XG5cdFxuXHQgICAgICAgIHByb3RvY29sID0gfmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoJ2h0dHAnKSA/IGxvY2F0aW9uLnByb3RvY29sIDogJ2h0dHBzOic7XG5cdFxuXHQgICAgICAgIGpzb25wID0gJ0JJTkdfSlNPTlBfQ0JfJyArIERhdGUubm93KCk7XG5cdCAgICAgICAgdXJsID0gdGhpcy5lbmRwb2ludCh7IHF1ZXJ5OiBxdWVyeSwgcHJvdG9jb2w6IHByb3RvY29sLCBqc29ucDoganNvbnAgfSk7XG5cdFxuXHQgICAgICAgIHJldHVybiAoMCwgX2RvbVV0aWxzLmNyZWF0ZVNjcmlwdEVsZW1lbnQpKHVybCwganNvbnApLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG5cdCAgICAgICAgICBqc29uID0gJGF3YWl0XzE7XG5cdCAgICAgICAgICByZXR1cm4gJHJldHVybih0aGlzLnBhcnNlKHsgZGF0YToganNvbiB9KSk7XG5cdCAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9LFxuLyogMTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBQcm92aWRlcigpIHtcblx0ICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG5cdCAgICBrZXk6ICdnZXRQYXJhbVN0cmluZycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFyYW1TdHJpbmcocGFyYW1zKSB7XG5cdCAgICAgIHJldHVybiBPYmplY3Qua2V5cyhwYXJhbXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtc1trZXldKTtcblx0ICAgICAgfSkuam9pbignJicpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NlYXJjaCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKF9yZWYpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgICB2YXIgcXVlcnksIHByb3RvY29sLCB1cmwsIHJlcXVlc3QsIGpzb247XG5cdCAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5O1xuXHRcblx0ICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuXHQgICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCB9KTtcblx0XG5cdCAgICAgICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcblx0ICAgICAgICAgIHJlcXVlc3QgPSAkYXdhaXRfMTtcblx0ICAgICAgICAgIHJldHVybiByZXF1ZXN0Lmpzb24oKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMikge1xuXHQgICAgICAgICAgICBqc29uID0gJGF3YWl0XzI7XG5cdCAgICAgICAgICAgIHJldHVybiAkcmV0dXJuKHRoaXMucGFyc2UoeyBkYXRhOiBqc29uIH0pKTtcblx0ICAgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSxcbi8qIDE5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfXJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcblx0ICBpZiAoIXNlbGYpIHtcblx0ICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcblx0ICB9cmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGNhbGwpKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcblx0ICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArICh0eXBlb2Ygc3VwZXJDbGFzcyA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7XG5cdCAgfXN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7aWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuXHQgIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2VuZHBvaW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcblx0ICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuXHQgICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcblx0ICAgICAgICBmOiAnanNvbicsXG5cdCAgICAgICAgdGV4dDogcXVlcnlcblx0ICAgICAgfSkpO1xuXHRcblx0ICAgICAgcmV0dXJuIHByb3RvY29sICsgJy8vZ2VvY29kZS5hcmNnaXMuY29tL2FyY2dpcy9yZXN0L3NlcnZpY2VzL1dvcmxkL0dlb2NvZGVTZXJ2ZXIvZmluZD8nICsgcGFyYW1TdHJpbmc7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncGFyc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG5cdCAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblx0XG5cdCAgICAgIHJldHVybiBkYXRhLmxvY2F0aW9ucy5tYXAoZnVuY3Rpb24gKHIpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgeDogci5mZWF0dXJlLmdlb21ldHJ5LngsXG5cdCAgICAgICAgICB5OiByLmZlYXR1cmUuZ2VvbWV0cnkueSxcblx0ICAgICAgICAgIGxhYmVsOiByLm5hbWUsXG5cdCAgICAgICAgICBib3VuZHM6IFtbci5leHRlbnQueW1pbiwgci5leHRlbnQueG1pbl0sIC8vIHMsIHdcblx0ICAgICAgICAgIFtyLmV4dGVudC55bWF4LCByLmV4dGVudC54bWF4XV0sXG5cdCAgICAgICAgICByYXc6IHJcblx0ICAgICAgICB9O1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBQcm92aWRlcjtcblx0fShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cbi8qKiovIH0sXG4vKiAyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcblx0ICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG5cdCAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG5cdCAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1yZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9wcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0dmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG5cdCAgaWYgKCFzZWxmKSB7XG5cdCAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG5cdCAgfXJldHVybiBjYWxsICYmICgodHlwZW9mIGNhbGwgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG5cdCAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihzdXBlckNsYXNzKSkpO1xuXHQgIH1zdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pO2lmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcblx0fVxuXHRcblx0dmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcblx0ICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXHRcblx0ICBmdW5jdGlvbiBQcm92aWRlcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG5cdCAgICBrZXk6ICdlbmRwb2ludCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG5cdCAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcblx0ICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblx0XG5cdCAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG5cdCAgICAgICAgYWRkcmVzczogcXVlcnlcblx0ICAgICAgfSkpO1xuXHRcblx0ICAgICAgLy8gZ29vZ2xlIHJlcXVpcmVzIGEgc2VjdXJlIGNvbm5lY3Rpb24gd2hlbiB1c2luZyBhcGkga2V5c1xuXHQgICAgICB2YXIgcHJvdG8gPSBwYXJhbXMgJiYgcGFyYW1zLmtleSA/ICdodHRwczonIDogcHJvdG9jb2w7XG5cdCAgICAgIHJldHVybiBwcm90byArICcvL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uPycgKyBwYXJhbVN0cmluZztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcblx0ICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXHRcblx0ICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cy5tYXAoZnVuY3Rpb24gKHIpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgeDogci5nZW9tZXRyeS5sb2NhdGlvbi5sbmcsXG5cdCAgICAgICAgICB5OiByLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCxcblx0ICAgICAgICAgIGxhYmVsOiByLmZvcm1hdHRlZF9hZGRyZXNzLFxuXHQgICAgICAgICAgYm91bmRzOiBbW3IuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0LmxhdCwgci5nZW9tZXRyeS52aWV3cG9ydC5zb3V0aHdlc3QubG5nXSwgLy8gcywgd1xuXHQgICAgICAgICAgW3IuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0LmxhdCwgci5nZW9tZXRyeS52aWV3cG9ydC5ub3J0aGVhc3QubG5nXV0sXG5cdCAgICAgICAgICByYXc6IHJcblx0ICAgICAgICB9O1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBQcm92aWRlcjtcblx0fShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cbi8qKiovIH0sXG4vKiAyMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcblx0ICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG5cdCAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG5cdCAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1yZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9wcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0dmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG5cdCAgaWYgKCFzZWxmKSB7XG5cdCAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG5cdCAgfXJldHVybiBjYWxsICYmICgodHlwZW9mIGNhbGwgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG5cdCAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihzdXBlckNsYXNzKSkpO1xuXHQgIH1zdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pO2lmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcblx0fVxuXHRcblx0dmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcblx0ICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXHRcblx0ICBmdW5jdGlvbiBQcm92aWRlcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG5cdCAgICBrZXk6ICdlbmRwb2ludCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG5cdCAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcblx0ICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblx0XG5cdCAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG5cdCAgICAgICAgZm9ybWF0OiAnanNvbicsXG5cdCAgICAgICAgcTogcXVlcnlcblx0ICAgICAgfSkpO1xuXHRcblx0ICAgICAgcmV0dXJuIHByb3RvY29sICsgJy8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3NlYXJjaD8nICsgcGFyYW1TdHJpbmc7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncGFyc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG5cdCAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblx0XG5cdCAgICAgIHJldHVybiBkYXRhLm1hcChmdW5jdGlvbiAocikge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICB4OiByLmxvbixcblx0ICAgICAgICAgIHk6IHIubGF0LFxuXHQgICAgICAgICAgbGFiZWw6IHIuZGlzcGxheV9uYW1lLFxuXHQgICAgICAgICAgYm91bmRzOiBbW3BhcnNlRmxvYXQoci5ib3VuZGluZ2JveFswXSksIHBhcnNlRmxvYXQoci5ib3VuZGluZ2JveFsyXSldLCAvLyBzLCB3XG5cdCAgICAgICAgICBbcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzFdKSwgcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzNdKV1dLFxuXHQgICAgICAgICAgcmF3OiByXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9LFxuLyogMjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHJlbmRlckxheWVyTGlzdDtcblx0XG5cdHZhciBfdG9nZ2xlTGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblx0XG5cdGZ1bmN0aW9uIHJlbmRlckxheWVyTGlzdChsYXllcnMsIGxheW91dCkge1xuXHQgICAgdmFyIGxheWVyR3JvdXBzID0gbWFrZUxheWVyR3JvdXBzKGxheW91dFsnbGF5ZXItZ3JvdXBzLW9yZGVyJ10pO1xuXHQgICAgbWFrZUxheWVyRWxlbXMobGF5ZXJHcm91cHMsIGxheWVycyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYXllckdyb3VwcyhsYXlvdXQpIHtcblx0ICAgIHJldHVybiBkMy5zZWxlY3QoJy5sYXllci1saXN0Jykuc2VsZWN0QWxsKCcubGF5ZXItZ3JvdXAtd3JhcHBlcicpLmRhdGEobGF5b3V0KS5lbnRlcigpLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAtd3JhcHBlcicpLmF0dHIoJ2lkJywgZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXJHcm91cC5pZDtcblx0ICAgIH0pLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyR3JvdXAuYWN0aXZlO1xuXHQgICAgfSkuZWFjaChmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwLWJ0biBidG4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgICAgICBsYXllckdyb3VwLmFjdGl2ZSA9ICFsYXllckdyb3VwLmFjdGl2ZTtcblx0ICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMucGFyZW50Tm9kZSkuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGxheWVyR3JvdXAuYWN0aXZlO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9KS50ZXh0KGxheWVyR3JvdXAubmFtZSk7XG5cdCAgICB9KS5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYXllckVsZW1zKGxheWVyR3JvdXBzLCBsYXllcnMpIHtcblx0ICAgIGxheWVyR3JvdXBzLnNlbGVjdEFsbCgnLmxheWVyLXNlbGVjdCcpLmRhdGEoZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXJzW2xheWVyR3JvdXAuaWRdO1xuXHQgICAgfSkuZW50ZXIoKS5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLXNlbGVjdCcpLmVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgdmFyIGdyb3VwTmFtZSA9IHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkO1xuXHQgICAgICAgIHZhciBsYXllckRpdiA9IGQzLnNlbGVjdCh0aGlzKTtcblx0XG5cdCAgICAgICAgbWFrZUNoZWNrYm94KGxheWVyLCBsYXllckRpdik7XG5cdCAgICAgICAgbWFrZUxhYmVsKGxheWVyLCBsYXllckRpdik7XG5cdCAgICAgICAgbWFrZURlc2NyaXB0aW9uKGxheWVyLCBsYXllckRpdik7XG5cdCAgICAgICAgbWFrZUxlZ2VuZChsYXllciwgbGF5ZXJEaXYpO1xuXHQgICAgICAgIG1ha2VPcGFjaXR5U2xpZGVyKGxheWVyLCBsYXllckRpdik7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUNoZWNrYm94KGxheWVyLCBsYXllckRpdikge1xuXHQgICAgbGF5ZXJEaXYuYXBwZW5kKCdpbnB1dCcpLmF0dHIoJ3R5cGUnLCAnY2hlY2tib3gnKS5hdHRyKCdpZCcsIGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHJldHVybiBsYXllci5pZDtcblx0ICAgIH0pLmF0dHIoJ2NoZWNrZWQnLCBmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXIuYWN0aXZlID8gJ2NoZWNrZWQnIDogbnVsbDtcblx0ICAgIH0pLm9uKCdjbGljaycsIGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgICgwLCBfdG9nZ2xlTGF5ZXIudG9nZ2xlTGF5ZXIpKGxheWVyKTtcblx0ICAgICAgICBsYXllckRpdi5zZWxlY3RBbGwoJy5sZWdlbmQtd3JhcHBlciwgLm9wYWNpdHktc2xpZGVyLXdyYXBwZXInKS5jbGFzc2VkKCdhY3RpdmUnLCBsYXllci5hY3RpdmUpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYWJlbChsYXllciwgbGF5ZXJEaXYpIHtcblx0ICAgIGxheWVyRGl2LmFwcGVuZCgnbGFiZWwnKS5hdHRyKCdmb3InLCBmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXIuaWQ7XG5cdCAgICB9KS5hdHRyKCdjbGFzcycsICdsYXllci1sYWJlbCcpLmh0bWwoZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyLm5hbWU7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZURlc2NyaXB0aW9uKGxheWVyLCBsYXllckRpdikge1xuXHQgICAgaWYgKGxheWVyLmluZm8gJiYgbGF5ZXIuaW5mbyAhPT0gJycpIHtcblx0ICAgICAgICBsYXllckRpdi5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8tYnRuJykudGV4dCgnKD8pJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5zZWxlY3QoJy5sYXllci1pbmZvLXdyYXBwZXInKS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gIWQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdhY3RpdmUnKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIGxheWVyRGl2LmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby13cmFwcGVyJykudGV4dChmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICAgICAgcmV0dXJuICcoJyArIGxheWVyLmluZm8gKyAnKSc7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMZWdlbmQobGF5ZXIsIGxheWVyRGl2KSB7XG5cdCAgICBsYXllckRpdi5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZC13cmFwcGVyJykuY2xhc3NlZCgnYWN0aXZlJywgbGF5ZXIuYWN0aXZlKS5hcHBlbmQoJ2ltZycpLmF0dHIoJ3NyYycsIGxheWVyLmxlZ2VuZCB8fCAnbWVhbl9uZHZpX2xlZ2VuZC5qcGcnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZU9wYWNpdHlTbGlkZXIobGF5ZXIsIGxheWVyRGl2KSB7XG5cdCAgICB2YXIgb3BhY2l0eVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIDMwMF0pLnJhbmdlKFswLCAxXSkuY2xhbXAodHJ1ZSk7XG5cdFxuXHQgICAgdmFyIG9wYWNpdHlTbGlkZXJXcmFwcGVyID0gbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdvcGFjaXR5LXNsaWRlci13cmFwcGVyJykuY2xhc3NlZCgnYWN0aXZlJywgbGF5ZXIuYWN0aXZlKTtcblx0XG5cdCAgICB2YXIgb3BhY2l0eVNsaWRlclN2ZyA9IG9wYWNpdHlTbGlkZXJXcmFwcGVyLmFwcGVuZCgnc3ZnJykuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXInKS5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDIwLCAyMCknKTtcblx0XG5cdCAgICBvcGFjaXR5U2xpZGVyU3ZnLmFwcGVuZCgnY2lyY2xlJykuYXR0cigncicsIDYpLmF0dHIoJ2N4JywgMzAwKS5hdHRyKCdjbGFzcycsICdvcGFjaXR5LXNsaWRlci1jaXJjbGUnKTtcblx0XG5cdCAgICBvcGFjaXR5U2xpZGVyU3ZnLmFwcGVuZCgnbGluZScpLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktc2xpZGVyLXRyYWNrLW92ZXJsYXknKS5hdHRyKCd4MScsIDApLmF0dHIoJ3gyJywgMzE1KS5hdHRyKCdzdHJva2UnLCAnIzAwMDAwMCcpLmF0dHIoJ3N0cm9rZS13aWR0aCcsICcyMHB4JykuYXR0cignc3Ryb2tlLW9wYWNpdHknLCAnMC4wJykuY2FsbChkMy5kcmFnKCkub24oJ3N0YXJ0IGRyYWcnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdXBkYXRlT3BhY2l0eShsYXllciwgdGhpcy5wYXJlbnROb2RlLCBvcGFjaXR5U2NhbGUsIGQzLmV2ZW50LngpO1xuXHQgICAgfSkpO1xuXHRcblx0ICAgIG9wYWNpdHlTbGlkZXJTdmcuYXBwZW5kKCdsaW5lJykuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXItdHJhY2snKS5hdHRyKCd4MScsIDApLmF0dHIoJ3gyJywgMzAwKS5hdHRyKCdzdHJva2Utd2lkdGgnLCAnMjBweCcpLmF0dHIoJ3N0cm9rZScsICcjNjY2JykuYXR0cignc3Ryb2tlLXdpZHRoJywgJzJweCcpO1xuXHRcblx0ICAgIG9wYWNpdHlTbGlkZXJTdmcuYXBwZW5kKCd0ZXh0JykuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1pbmRpY2F0b3InKS5hdHRyKCd4JywgMzE1KS5hdHRyKCd5JywgNSkudGV4dChvcGFjaXR5U2NhbGUoMzAwKSAqIDEwMCArICclJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZU9wYWNpdHkobGF5ZXIsIHNsaWRlciwgc2NhbGUsIHhQb3MpIHtcblx0ICAgIC8vIGNsYW1wIHRoZSB4IHBvc2l0aW9uIHRvIGJlIHdpdGhpbiB0aGUgc2NhbGUncyBkb21haW5cblx0ICAgIHZhciB4UG9zID0gc2NhbGUuaW52ZXJ0KHNjYWxlKHhQb3MpKTtcblx0ICAgIHNsaWRlciA9IGQzLnNlbGVjdChzbGlkZXIpO1xuXHRcblx0ICAgIHNsaWRlci5zZWxlY3QoJ2NpcmNsZScpLmF0dHIoJ2N4JywgeFBvcyk7XG5cdCAgICBzbGlkZXIuc2VsZWN0KCd0ZXh0JykudGV4dChwYXJzZUludChzY2FsZSh4UG9zKSAqIDEwMCkgKyAnJScpO1xuXHQgICAgbGF5ZXIubWFwTGF5ZXIuc2V0T3BhY2l0eShzY2FsZShkMy5ldmVudC54KSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENyZWF0ZUJhc2VMYXllcnM7XG5cdGZ1bmN0aW9uIENyZWF0ZUJhc2VMYXllcnMobWFwLCBsYXllckNvbmZpZykge1xuXHQgICAgbGF5ZXJDb25maWcgPSBsYXllckNvbmZpZyB8fCBbe1xuXHQgICAgICAgIFwidXJsXCI6IFwiaHR0cDovL3tzfS5iYXNlbWFwcy5jYXJ0b2Nkbi5jb20vbGlnaHRfYWxsL3t6fS97eH0ve3l9LnBuZ1wiLFxuXHQgICAgICAgIFwiYXR0cmlidXRpb25cIjogJyZjb3B5OyA8YSBocmVmPVwiaHR0cDovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsICZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly9jYXJ0by5jb20vYXR0cmlidXRpb25zXCI+Q0FSVE88L2E+J1xuXHQgICAgfV07XG5cdFxuXHQgICAgdmFyIGk7XG5cdCAgICB2YXIgYmFzZUxheWVyO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsYXllckNvbmZpZy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGJhc2VMYXllciA9IGNyZWF0ZUJhc2VMYXllcihsYXllckNvbmZpZ1tpXSk7XG5cdCAgICAgICAgYmFzZUxheWVyLmFkZFRvKG1hcCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUJhc2VMYXllcihsYXllckNvbmZpZykge1xuXHQgICAgcmV0dXJuIEwudGlsZUxheWVyKGxheWVyQ29uZmlnLnVybCwgeyBhdHRyaWJ1dGlvbjogbGF5ZXJDb25maWcuYXR0cmlidXRpb24gfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuU2V0dXBHcmFwaHMgPSBTZXR1cEdyYXBocztcblx0ZXhwb3J0cy5CaW5kR3JhcGhFdmVudHMgPSBCaW5kR3JhcGhFdmVudHM7XG5cdHZhciB0aXA7XG5cdFxuXHRmdW5jdGlvbiBTZXR1cEdyYXBocygpIHtcblx0ICAgIGQzLnNlbGVjdEFsbChcIi5ncmFwaC10eXBlLWJ0blwiKS5vbihcImNsaWNrXCIsIGhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrKTtcblx0ICAgIGV4dGVuZERhdGVNb2R1bGUoKTtcblx0ICAgIHRpcCA9IGQzLnRpcCgpLmF0dHIoJ2NsYXNzJywgJ2QzLXRpcCcpLmh0bWwoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZDtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBleHRlbmREYXRlTW9kdWxlKCkge1xuXHQgICAgRGF0ZS5wcm90b3R5cGUuaXNMZWFwWWVhciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgeWVhciA9IHRoaXMuZ2V0RnVsbFllYXIoKTtcblx0ICAgICAgICBpZiAoKHllYXIgJiAzKSAhPSAwKSByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgcmV0dXJuIHllYXIgJSAxMDAgIT0gMCB8fCB5ZWFyICUgNDAwID09IDA7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIEdldCBEYXkgb2YgWWVhclxuXHQgICAgRGF0ZS5wcm90b3R5cGUuZ2V0RE9ZID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBkYXlDb3VudCA9IFswLCAzMSwgNTksIDkwLCAxMjAsIDE1MSwgMTgxLCAyMTIsIDI0MywgMjczLCAzMDQsIDMzNF07XG5cdCAgICAgICAgdmFyIG1uID0gdGhpcy5nZXRNb250aCgpO1xuXHQgICAgICAgIHZhciBkbiA9IHRoaXMuZ2V0RGF0ZSgpO1xuXHQgICAgICAgIHZhciBkYXlPZlllYXIgPSBkYXlDb3VudFttbl0gKyBkbjtcblx0ICAgICAgICBpZiAobW4gPiAxICYmIHRoaXMuaXNMZWFwWWVhcigpKSBkYXlPZlllYXIrKztcblx0ICAgICAgICByZXR1cm4gZGF5T2ZZZWFyO1xuXHQgICAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gQmluZEdyYXBoRXZlbnRzKG1hcCkge1xuXHQgICAgbWFwLm9uKFwiY2xpY2tcIiwgaGFuZGxlTWFwQ2xpY2spO1xuXHR9XG5cdFxuXHR2YXIgYmFzZUljb24gPSBMLkljb24uZXh0ZW5kKHt9KTtcblx0XG5cdHZhciBncmFwaEljb24gPSBuZXcgYmFzZUljb24oe1xuXHQgICAgaWNvblVybDogJ2ltZ3MvYmx1ZV9pY29uLnBuZycsXG5cdCAgICBzaGFkb3dVcmw6ICdpbWdzL21hcmtlcl9zaGFkb3cucG5nJyxcblx0ICAgIGljb25TaXplOiBbMjUsIDQxXSxcblx0ICAgIGljb25BbmNob3I6IFsxMiwgNDFdLFxuXHQgICAgcG9wdXBBbmNob3I6IFsxLCAtMzRdLFxuXHQgICAgc2hhZG93U2l6ZTogWzQxLCA0MV1cblx0fSk7XG5cdFxuXHR2YXIgaG92ZXJJY29uID0gbmV3IGJhc2VJY29uKHtcblx0ICAgIGljb25Vcmw6ICdpbWdzL29yYW5nZV9pY29uLnBuZycsXG5cdCAgICBzaGFkb3dVcmw6ICdpbWdzL21hcmtlcl9zaGFkb3cucG5nJyxcblx0ICAgIGljb25TaXplOiBbMjUsIDQxXSxcblx0ICAgIGljb25BbmNob3I6IFsxMiwgNDFdLFxuXHQgICAgcG9wdXBBbmNob3I6IFsxLCAtMzRdLFxuXHQgICAgc2hhZG93U2l6ZTogWzQxLCA0MV1cblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVNYXBDbGljayhlKSB7XG5cdCAgICB2YXIgbWFwID0gdGhpcztcblx0ICAgIHZhciBsYXQgPSBlLmxhdGxuZy5sYXQ7XG5cdCAgICB2YXIgbG5nID0gZS5sYXRsbmcubG5nO1xuXHRcblx0ICAgIHZhciBkaXYgPSBjcmVhdGVHcmFwaERpdihsYXQsIGxuZyk7XG5cdCAgICB2YXIgbWFya2VyID0gY3JlYXRlTWFya2VyKG1hcCwgbGF0LCBsbmcpO1xuXHQgICAgZDMuc2VsZWN0KGRpdikub24oXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBtYXJrZXIuc2V0SWNvbihob3Zlckljb24pO1xuXHQgICAgfSk7XG5cdCAgICBkMy5zZWxlY3QoZGl2KS5vbihcIm1vdXNlbGVhdmVcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIG1hcmtlci5zZXRJY29uKGdyYXBoSWNvbik7XG5cdCAgICB9KTtcblx0ICAgIGNyZWF0ZUdyYXBoUmVtb3ZlcihtYXAsIGRpdiwgbWFya2VyKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlTWFya2VyKG1hcCwgbGF0LCBsbmcpIHtcblx0ICAgIHJldHVybiBMLm1hcmtlcihbbGF0LCBsbmddLCB7IGljb246IGdyYXBoSWNvbiB9KS5hZGRUbyhtYXApO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVHcmFwaFJlbW92ZXIobWFwLCBkaXYsIG1hcmtlcikge1xuXHQgICAgdmFyIGVsZW0gPSBjcmVhdGVHcmFwaFJlbW92ZXJFbGVtKCk7XG5cdCAgICBkaXYuYXBwZW5kQ2hpbGQoZWxlbSk7XG5cdCAgICBkMy5zZWxlY3QoZWxlbSkub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXBoLWxpc3RcIik7XG5cdCAgICAgICAgbGlzdC5yZW1vdmVDaGlsZChkaXYpO1xuXHQgICAgICAgIG1hcC5yZW1vdmVMYXllcihtYXJrZXIpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUdyYXBoUmVtb3ZlckVsZW0oKSB7XG5cdCAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG5cdCAgICBlbGVtLmNsYXNzTmFtZSA9IFwicmVtb3ZlLWdyYXBoXCI7XG5cdCAgICBlbGVtLmlubmVyVGV4dCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoXCIxMDAwNVwiKTtcblx0ICAgIGVsZW0uc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgXCJSZW1vdmUgZ3JhcGhcIik7XG5cdCAgICByZXR1cm4gZWxlbTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLyBHUkFQSCBEQVRBIFBST0NFU1NJTkcgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gZ2V0RGF0YShsYXQsIGxuZywgZGl2KSB7XG5cdCAgICB2YXIgdXJsID0gXCJodHRwczovL2ZjYXYtbmR2aS5uZW1hYy5vcmcvbGFuZGRhdF9wcm9kdWN0LmNnaT9hcmdzPVwiICsgbG5nICsgXCIsXCIgKyBsYXQ7XG5cdCAgICB2YXIgb1JlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHQgICAgb1JlcS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHJlc3BvbnNlID0gdGhpcy5yZXNwb25zZVRleHQ7XG5cdCAgICAgICAgcmVzcG9uc2UgPSByZXNwb25zZS5yZXBsYWNlKC9cXFt8XFxdfFxcJy9nLCBcIlwiKS5zcGxpdChcIiwgXCIpO1xuXHQgICAgICAgIGRyYXdHcmFwaChyZXNwb25zZSwgZGl2LCBsYXQsIGxuZyk7XG5cdCAgICB9KTtcblx0ICAgIG9SZXEub3BlbihcIkdFVFwiLCB1cmwpO1xuXHQgICAgb1JlcS5zZW5kKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNwbGl0RGF0YShkYXRhKSB7XG5cdCAgICB2YXIgaTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZGF0YVtpXSA9IGRhdGFbaV0uc3BsaXQoXCIsXCIpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGRhdGE7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlcHJvY2Vzc0RhdGEob3JpZ2RhdGEpIHtcblx0ICAgIHZhciBkYXRhID0ge307XG5cdCAgICB2YXIgcG9pbnQ7XG5cdCAgICB2YXIga2V5O1xuXHQgICAgdmFyIGksIGo7XG5cdFxuXHQgICAgZGF0YVtcImtleXNcIl0gPSBbXTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBvcmlnZGF0YS5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHBvaW50ID0gb3JpZ2RhdGFbaV07XG5cdCAgICAgICAga2V5ID0gcG9pbnRbMF0uc3Vic3RyaW5nKDAsIDQpO1xuXHQgICAgICAgIGlmICghZGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdCAgICAgICAgICAgIGRhdGFba2V5XSA9IFtdO1xuXHQgICAgICAgICAgICBkYXRhW1wia2V5c1wiXS5wdXNoKGtleSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGRhdGFba2V5XS5wdXNoKHBvaW50KTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZGF0YUZvck1lZGlhbnM7XG5cdCAgICB2YXIgbWVkaWFuO1xuXHQgICAgZGF0YVtcIm1lZGlhbnNcIl0gPSBbXTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCA0NjsgaSsrKSB7XG5cdCAgICAgICAgZGF0YUZvck1lZGlhbnMgPSBbXTtcblx0ICAgICAgICBmb3IgKGogPSBpOyBqIDwgb3JpZ2RhdGEubGVuZ3RoOyBqICs9IDQ2KSB7XG5cdCAgICAgICAgICAgIGRhdGFGb3JNZWRpYW5zLnB1c2gob3JpZ2RhdGFbal1bMV0pO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgbWVkaWFuID0gZGF0YUZvck1lZGlhbnMuc29ydCgpW01hdGguZmxvb3IoZGF0YUZvck1lZGlhbnMubGVuZ3RoIC8gMildO1xuXHQgICAgICAgIGRhdGFbXCJtZWRpYW5zXCJdLnB1c2gobWVkaWFuKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gZGF0YTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLyBHUkFQSCBJTlRFUkZBQ0UgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVHcmFwaFR5cGVCdG5DbGljaygpIHtcblx0ICAgIHZhciB0eXBlID0gdGhpcy5kYXRhc2V0LnR5cGU7XG5cdCAgICB2YXIgYWN0aXZlRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF07XG5cdCAgICB2YXIgYWN0aXZlVHlwZSA9IGFjdGl2ZUVsZW0uZGF0YXNldC50eXBlO1xuXHRcblx0ICAgIGlmICh0eXBlID09PSBhY3RpdmVUeXBlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIGQzLnNlbGVjdChcIiNncmFwaC1saXN0XCIpLmNsYXNzZWQoXCJncmFwaC1cIiArIGFjdGl2ZVR5cGUsIGZhbHNlKS5jbGFzc2VkKFwiZ3JhcGgtXCIgKyB0eXBlLCB0cnVlKTtcblx0XG5cdCAgICBkMy5zZWxlY3QoYWN0aXZlRWxlbSkuY2xhc3NlZChcImFjdGl2ZVwiLCBmYWxzZSk7XG5cdCAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlR3JhcGhEaXYobGF0LCBsbmcpIHtcblx0ICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHQgICAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkxhdDogXCIgKyBsYXQgKyBcIiwgTG9uOiBcIiArIGxuZyk7XG5cdCAgICBkaXYuYXBwZW5kQ2hpbGQoY29udGVudCk7XG5cdCAgICBkaXYuY2xhc3NMaXN0LmFkZChcImdyYXBoLWVsZW1cIik7XG5cdCAgICBnZXREYXRhKGxhdCwgbG5nLCBkaXYpO1xuXHQgICAgcmV0dXJuIGRpdjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhd0dyYXBoKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcblx0ICAgIGRhdGEgPSBzcGxpdERhdGEoZGF0YSk7XG5cdCAgICB2YXIgcmVwcm9jZXNzZWREYXRhID0gcmVwcm9jZXNzRGF0YShkYXRhKTtcblx0ICAgIG1ha2VVcERvd25MaW5lR3JhcGgoZGF0YSwgZGl2LCByZXByb2Nlc3NlZERhdGFbXCJtZWRpYW5zXCJdKTtcblx0ICAgIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMocmVwcm9jZXNzZWREYXRhLCBkaXYsIGxhdCwgbG5nKTtcblx0ICAgIGRyYXdVcERvd25Qb2xhcldpdGhDaGVja2JveGVzQW5kVGhyZXNob2xkcyhyZXByb2Nlc3NlZERhdGEsIGRpdiwgbGF0LCBsbmcpO1xuXHQgICAgdmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXBoLWxpc3RcIik7XG5cdCAgICBsaXN0LmFwcGVuZENoaWxkKGRpdik7XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLyBUSU1FU0VSSUVTIExJTkUgR1JBUEggLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIG1ha2VVcERvd25MaW5lR3JhcGgoZGF0YSwgZGl2LCBhdmVyYWdlcykge1xuXHQgICAgLy8gU2V0IHRoZSBkaW1lbnNpb25zIG9mIHRoZSBjYW52YXMgLyBncmFwaFxuXHQgICAgdmFyIG1hcmdpbiA9IHsgdG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyNSB9LFxuXHQgICAgICAgIHdpZHRoID0gNTgwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsXG5cdCAgICAgICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cdFxuXHQgICAgLy8gU2V0IHRoZSByYW5nZXNcblx0ICAgIHZhciB4ID0gZDMuc2NhbGVUaW1lKCkucmFuZ2UoWzAsIHdpZHRoXSkuZG9tYWluKFtwYXJzZURhdGUoZGF0YVswXVswXSksIHBhcnNlRGF0ZShkYXRhW2RhdGEubGVuZ3RoIC0gMV1bMF0pXSk7XG5cdCAgICB2YXIgeSA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodCwgMF0pLmRvbWFpbihbMCwgMTAwXSk7XG5cdFxuXHQgICAgLy8gRGVmaW5lIHRoZSBheGVzXG5cdCAgICB2YXIgeEF4aXMgPSBkMy5heGlzQm90dG9tKHgpLnRpY2tzKDE2KS50aWNrRm9ybWF0KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIGQuZ2V0RnVsbFllYXIoKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciB5QXhpcyA9IGQzLmF4aXNMZWZ0KHkpLnRpY2tzKDYpO1xuXHRcblx0ICAgIC8vIERlZmluZSB0aGUgbGluZVxuXHQgICAgdmFyIHZhbHVlbGluZSA9IGQzLmxpbmUoKS54KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIHgocGFyc2VEYXRlKGRbMF0pKTtcblx0ICAgIH0pLnkoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4geShkWzFdKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KGRpdikuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJ0aW1lc2VyaWVzLWdyYXBoXCIsIHRydWUpO1xuXHRcblx0ICAgIC8vIEFkZHMgdGhlIHN2ZyBjYW52YXNcblx0ICAgIHZhciBzdmcgPSB3cmFwcGVyLmFwcGVuZChcInN2Z1wiKS5hdHRyKFwid2lkdGhcIiwgd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodCkuYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XG5cdFxuXHQgICAgc3ZnLmNhbGwodGlwKTtcblx0XG5cdCAgICAvLyBBZGQgdGhlIHZhbHVlbGluZSBwYXRoLlxuXHQgICAgZHJhd0xpbmVhclBhdGgoZGF0YSwgdmFsdWVsaW5lLCBzdmcpO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWCBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ4IGF4aXNcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpLmNhbGwoeEF4aXMpO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWSBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ5IGF4aXNcIikuY2FsbCh5QXhpcyk7XG5cdCAgICAvKipcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XG5cdCAgICAgKi9cblx0ICAgIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8gT1ZFUkxBUFBJTkcgVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMoZGF0YSwgZGl2LCBsYXQsIGxuZykge1xuXHQgICAgdmFyIHllYXIgPSBcIjIwMTVcIjtcblx0XG5cdCAgICB2YXIgY2hhcnRzID0ge307XG5cdFxuXHQgICAgLy8gU2V0IHRoZSBkaW1lbnNpb25zIG9mIHRoZSBjYW52YXMgLyBncmFwaFxuXHQgICAgdmFyIG1hcmdpbiA9IHsgdG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyNSB9LFxuXHQgICAgICAgIHdpZHRoID0gNTAwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsXG5cdCAgICAgICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cdFxuXHQgICAgdmFyIGF2ZXJhZ2VzID0gZGF0YS5tZWRpYW5zO1xuXHRcblx0ICAgIHZhciB4ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbMCwgd2lkdGhdKS5kb21haW4oWzAsIDM2NV0pO1xuXHQgICAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKS5kb21haW4oWzAsIDEwMF0pO1xuXHRcblx0ICAgIC8vIERlZmluZSB0aGUgYXhlc1xuXHQgICAgZnVuY3Rpb24gZm9ybWF0TW9udGhUaWNrKGQpIHtcblx0ICAgICAgICByZXR1cm4gTU9OVEhfTEFCRUxTWyhkIC0gMTUpIC8gMzBdO1xuXHQgICAgfVxuXHQgICAgdmFyIHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4KS50aWNrcygxMSkudGlja1ZhbHVlcyhbMTUsIDQ1LCA3NSwgMTA1LCAxMzUsIDE2NSwgMTk1LCAyMjUsIDI1NSwgMjg1LCAzMTUsIDM0NV0pLnRpY2tGb3JtYXQoZm9ybWF0TW9udGhUaWNrKTtcblx0XG5cdCAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KS50aWNrcyg2KTtcblx0XG5cdCAgICAvLyBEZWZpbmUgdGhlIGxpbmVcblx0ICAgIHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKCkueChmdW5jdGlvbiAoZCwgaSkge1xuXHQgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGQpID8geChwYXJzZUp1bGlhbkRheShkWzBdKSkgOiB4KGkgKiA4ICsgMyk7XG5cdCAgICB9KS55KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyB5KGRbMV0pIDogeShkKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KGRpdikuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJvdmVybGFwcGluZy1ncmFwaFwiLCB0cnVlKTtcblx0XG5cdCAgICAvLyBBZGRzIHRoZSBzdmcgY2FudmFzXG5cdCAgICB2YXIgc3ZnID0gd3JhcHBlci5hcHBlbmQoXCJzdmdcIikuYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xuXHRcblx0ICAgIHN2Zy5jYWxsKHRpcCk7XG5cdFxuXHQgICAgLy8gQWRkIHRoZSBYIEF4aXNcblx0ICAgIHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInggYXhpc1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIikuY2FsbCh4QXhpcyk7XG5cdFxuXHQgICAgLy8gQWRkIHRoZSBZIEF4aXNcblx0ICAgIHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInkgYXhpc1wiKS5jYWxsKHlBeGlzKTtcblx0XG5cdCAgICBjaGFydHNbXCJtZWRpYW5zXCJdID0ge1xuXHQgICAgICAgIFwicGF0aFwiOiBkcmF3TGluZWFyUGF0aChkYXRhW1wibWVkaWFuc1wiXSwgdmFsdWVsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIGNoYXJ0c1t5ZWFyXSA9IHtcblx0ICAgICAgICBcInBhdGhcIjogZHJhd0xpbmVhclBhdGgoZGF0YVt5ZWFyXSwgdmFsdWVsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBwb2ludCBhdCBlYWNoIGRhdGEgcG9pbnRcblx0ICAgICAqL1xuXHQgICAgY2hhcnRzW1wibWVkaWFuc1wiXVtcInBvaW50c1wiXSA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtcIm1lZGlhbnNcIl0sIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdCAgICBjaGFydHNbeWVhcl1bXCJwb2ludHNcIl0gPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbeWVhcl0sIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdFxuXHQgICAgdmFyIGlucHV0d3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJpbnB1dC13cmFwcGVyXCIsIHRydWUpO1xuXHRcblx0ICAgIGRhdGEua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICBjcmVhdGVDaGVja2JveChpbnB1dHdyYXBwZXIsIGtleSwgXCJ0aW1lc2VyaWVzXCIsIHllYXIsIGNoYXJ0cywgZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzLCBsYXQsIGxuZyk7XG5cdCAgICB9KTtcblx0XG5cdCAgICBjcmVhdGVDaGVja2JveChpbnB1dHdyYXBwZXIsIFwibWVkaWFuc1wiLCBcInRpbWVzZXJpZXNcIiwgXCJtZWRpYW5zXCIsIGNoYXJ0cywgZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzLCBsYXQsIGxuZyk7XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gUE9MQVIgR1JBUEggLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIGRyYXdVcERvd25Qb2xhcldpdGhDaGVja2JveGVzQW5kVGhyZXNob2xkcyhkYXRhLCBkaXYsIGxhdCwgbG5nKSB7XG5cdCAgICB2YXIgeWVhciA9IFwiMjAxNVwiO1xuXHQgICAgdmFyIHdpZHRoID0gNDkwLFxuXHQgICAgICAgIGhlaWdodCA9IDQ5MCxcblx0ICAgICAgICByYWRpdXMgPSBNYXRoLm1pbih3aWR0aCwgaGVpZ2h0KSAvIDIgLSAzMDtcblx0XG5cdCAgICB2YXIgYXZlcmFnZXMgPSBkYXRhW1wibWVkaWFuc1wiXTtcblx0ICAgIHZhciBjZW50ZXIgPSBmaW5kUG9sYXJDZW50ZXIoZGF0YSk7XG5cdCAgICB2YXIgdGhyZXNob2xkcyA9IGZpbmRQb2xhclRocmVzaG9sZHMoYXZlcmFnZXMsIGNlbnRlclsxXVswXSk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTZXRzIHVwIHNjYWxpbmcgb2YgZGF0YS4gV2Uga25vdyB0aGF0IHRoZSBuZHZpIHZhbHVlcyBmYWxsIGJldHdlZW5cblx0ICAgICAqIDAgJiAxMDAgc28gd2Ugc2V0IG91ciBkb21haW4gdG8gdGhhdC4gVGhlIHJhbmdlIGNvbnRyb2xzIHdoZXJlIHRoZVxuXHQgICAgICogcG9pbnRzIHdpbGwgbGllIGluIG91ciBncmFwaCwgc28gd2Ugc2V0IHRoZW0gdG8gYmUgYmV0d2VlbiAwIGFuZCB0aGVcblx0ICAgICAqIHJhZGl1cy5cblx0ICAgICAqL1xuXHQgICAgdmFyIHIgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgMTAwXSkucmFuZ2UoWzAsIHJhZGl1c10pO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogZnVuY3Rpb24gd2hpY2ggd2lsbCBkcmF3IGVhY2ggcG9pbnQuIFRvIGNvbXB1dGUgdGhlIGRpc3RhbmNlIGZyb20gdGhlXG5cdCAgICAgKiBjZW50ZXIgZWFjaCBwb2ludCBpcyB3ZSBwYXNzIHRoZSBkYXRhcG9pbnQgdG8gdGhlIGZ1bmN0aW9uIGRlZmluZWQgYWJvdmUuXG5cdCAgICAgKiBUbyBkZXRlcm1pbmUgdGhlIGFuZ2xlIGZyb20gdGhlIG9yaWdpbiB3ZSBuZWVkIHRvIGNvbnZlcnQgdGhlIGRheSB0b1xuXHQgICAgICogcmFkaWFucywgc28gd2UgY29udmVydCB0aGUgZGF5IHRvIGEgbnVtYmVyIGJldHdlZW4gMCAmIDEgYW5kIHRoZW4gbXVsdGlwbHlcblx0ICAgICAqIGl0IGJ5IDIgcGkuXG5cdCAgICAgKi9cblx0ICAgIHZhciBsaW5lID0gZDMucmFkaWFsTGluZSgpLnJhZGl1cyhmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGQpID8gcihkWzFdKSA6IHIoZCk7XG5cdCAgICB9KS5hbmdsZShmdW5jdGlvbiAoZCwgaSkge1xuXHQgICAgICAgIHZhciBkYXkgPSBBcnJheS5pc0FycmF5KGQpID8gcGFyc2VKdWxpYW5EYXkoZFswXSkgOiBpICogOCArIDM7XG5cdCAgICAgICAgcmV0dXJuIChkYXkgLSAxKSAlIDM2NSAvIDM2NSAqICgyICogTWF0aC5QSSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFNldHMgdXAgdGhlIGNhbnZhcyB3aGVyZSB0aGUgY2lyY2xlIHdpbGwgYmUgZHJhd24uXG5cdCAgICAgKi9cblx0ICAgIHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KGRpdikuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJwb2xhci1ncmFwaFwiLCB0cnVlKTtcblx0ICAgIHZhciBzdmcgPSB3cmFwcGVyLmFwcGVuZChcInN2Z1wiKS5hdHRyKFwid2lkdGhcIiwgd2lkdGgpLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB3aWR0aCAvIDIgKyBcIixcIiArIGhlaWdodCAvIDIgKyBcIilcIik7XG5cdFxuXHQgICAgc3ZnLmNhbGwodGlwKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgYmlnIGNpcmNsZXMgb2YgdGhlIGdyYXBoICYgdGhlaXIgbGFiZWxzXG5cdCAgICAgKi9cblx0ICAgIHZhciBnciA9IHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInIgYXhpc1wiKS5zZWxlY3RBbGwoXCJnXCIpLmRhdGEoci50aWNrcyg1KS5zbGljZSgxKSkuZW50ZXIoKS5hcHBlbmQoXCJnXCIpO1xuXHRcblx0ICAgIGdyLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiclwiLCByKTtcblx0XG5cdCAgICBnci5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIC1yKGQpIC0gNDtcblx0ICAgIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJyb3RhdGUoMTUpXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIikudGV4dChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGxhYmVscyBmb3IgZWFjaCBtb250aCBhbmQgdGhlIGxpbmVzXG5cdCAgICAgKiB0aGF0IGdvIG91dCB0byB0aGVtLlxuXHQgICAgICovXG5cdCAgICB2YXIgZ2EgPSBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJhIGF4aXNcIikuc2VsZWN0QWxsKFwiZ1wiKS5kYXRhKGQzLnJhbmdlKDAsIDM2MCwgMzApKS5lbnRlcigpLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBcInJvdGF0ZShcIiArIChkIC0gOTApICsgXCIpXCI7XG5cdCAgICB9KTtcblx0XG5cdCAgICBnYS5hcHBlbmQoXCJsaW5lXCIpLmF0dHIoXCJ4MlwiLCByYWRpdXMpO1xuXHRcblx0ICAgIGdhLmFwcGVuZChcInRleHRcIikuYXR0cihcInhcIiwgcmFkaXVzICsgNikuYXR0cihcImR5XCIsIFwiLjM1ZW1cIikuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkIDwgMzYwICYmIGQgPiAxODAgPyBcImVuZFwiIDogbnVsbDtcblx0ICAgIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7XG5cdCAgICB9KS50ZXh0KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIE1PTlRIX0xBQkVMU1tkIC8gMzBdO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBEcmF3cyB0aGUgdGhyZXNob2xkIGxpbmVzXG5cdCAgICAgKi9cblx0ICAgIHZhciB0aHJlc2hvbGRFbGVtID0gc3ZnLmFwcGVuZChcImdcIikuc2VsZWN0QWxsKFwiZ1wiKS5kYXRhKHRocmVzaG9sZHMpLmVudGVyKCkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIFwicm90YXRlKFwiICsgKGQuZGF0YVsxXVswXSAtIDkwKSArIFwiKVwiO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdGhyZXNob2xkRWxlbS5hcHBlbmQoXCJsaW5lXCIpLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIikuYXR0cihcIngyXCIsIHJhZGl1cyk7XG5cdFxuXHQgICAgdGhyZXNob2xkRWxlbS5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ4XCIsIHJhZGl1cyArIDYpLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIChkLmRhdGFbMV1bMF0gLSAxKSAlIDM2NSAvIDM2NSAqICgyICogTWF0aC5QSSk7XG5cdCAgICB9KS5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKS5zdHlsZShcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgdmFyIGRheSA9IGQuZGF0YVsxXVswXTtyZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IFwiZW5kXCIgOiBudWxsO1xuXHQgICAgfSkuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHZhciBkYXkgPSBkLmRhdGFbMV1bMF07cmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyBcInJvdGF0ZSgxODAgXCIgKyAocmFkaXVzICsgNikgKyBcIiwwKVwiIDogbnVsbDtcblx0ICAgIH0pLnRleHQoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZC5sYWJlbDtcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogRHJhd3MgdGhlIGxpbmUgdG8gdGhlIGNlbnRlciBvZiB0aGUgZGF0YVxuXHQgICAgICovXG5cdCAgICB2YXIgY2VudGVyRGF5ID0gY2VudGVyWzFdWzBdO1xuXHQgICAgdmFyIGNlbnRlckRheU9wcG9zaXRlID0gKGNlbnRlckRheSArIDM2NSAvIDIpICUgMzY1O1xuXHQgICAgdmFyIGNlbnRlckRheURhdGEgPSBbY2VudGVyRGF5LCAxMDBdO1xuXHQgICAgdmFyIGNlbnRlckRheU9wcG9zaXRlRGF0YSA9IFtjZW50ZXJEYXlPcHBvc2l0ZSwgMTAwXTtcblx0ICAgIHZhciBncm93aW5nU2Vhc29uRGF0YSA9IFtjZW50ZXJEYXlEYXRhLCBjZW50ZXJEYXlPcHBvc2l0ZURhdGFdO1xuXHRcblx0ICAgIGRyYXdQb2xhclBhdGgoZ3Jvd2luZ1NlYXNvbkRhdGEsIGxpbmUsIHN2ZykuY2xhc3NlZChcImdyb3dpbmctc2Vhc29uLWxpbmVcIiwgXCJ0cnVlXCIpO1xuXHRcblx0ICAgIGRyYXdQb2xhclBhdGgoY2VudGVyLCBsaW5lLCBzdmcpLmNsYXNzZWQoXCJjZW50ZXItbGluZVwiLCBcInRydWVcIik7XG5cdFxuXHQgICAgc3ZnLnNlbGVjdEFsbChcInBvaW50XCIpLmRhdGEoW2NlbnRlclsxXV0pLmVudGVyKCkuYXBwZW5kKFwiY2lyY2xlXCIpLmF0dHIoXCJjbGFzc1wiLCBcInBvaW50XCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtkXSkuc2xpY2UoMSkuc2xpY2UoMCwgLTEpO1xuXHQgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGNvb3JzICsgXCIpXCI7XG5cdCAgICB9KS5hdHRyKFwiclwiLCAyLjUpLmF0dHIoXCJzdHJva2VcIiwgXCIjMDAwXCIpLmF0dHIoXCJmaWxsXCIsIFwiI2RkODJkMlwiKS5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHRpcC5zaG93KFwiQ2VudGVyOiBcIiArIFN0cmluZyhkWzFdKS5zdWJzdHJpbmcoMCwgNykpO1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCA1KTtcblx0ICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjJweFwiKTtcblx0ICAgICAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblx0ICAgIH0pLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB0aXAuaGlkZSgpO1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCAyLjUpO1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMXB4XCIpO1xuXHQgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIGNoYXJ0cyA9IHt9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBsaW5lIHRoYXQgdGhlIGRhdGEgZm9sbG93c1xuXHQgICAgICovXG5cdCAgICBjaGFydHNbXCJtZWRpYW5zXCJdID0ge1xuXHQgICAgICAgIFwicGF0aFwiOiBkcmF3UG9sYXJQYXRoKGF2ZXJhZ2VzLCBsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIGNoYXJ0c1t5ZWFyXSA9IHtcblx0ICAgICAgICBcInBhdGhcIjogZHJhd1BvbGFyUGF0aChkYXRhW3llYXJdLCBsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBwb2ludCBhdCBlYWNoIGRhdGEgcG9pbnRcblx0ICAgICAqL1xuXHQgICAgY2hhcnRzLm1lZGlhbnMucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhhdmVyYWdlcywgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdCAgICBjaGFydHNbeWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW3llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0XG5cdCAgICB2YXIgaW5wdXR3cmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcImlucHV0LXdyYXBwZXJcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgZGF0YS5rZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSBpbnB1dHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpO1xuXHRcblx0ICAgICAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgXCJwb2xhci1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSkuYXR0cihcInZhbHVlXCIsIGtleSkucHJvcGVydHkoXCJjaGVja2VkXCIsIGtleSA9PT0geWVhciA/IHRydWUgOiBmYWxzZSkub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xuXHQgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGgucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgaWYgKCFjaGFydHMuaGFzT3duUHJvcGVydHkobmV3WWVhcikpIHtcblx0ICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcblx0ICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdQb2xhclBhdGgoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnKTtcblx0ICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKS50ZXh0KGtleSkuYXR0cihcImZvclwiLCBcInBvbGFyLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSBpbnB1dHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpO1xuXHRcblx0ICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJpbnB1dFwiKS5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpLmF0dHIoXCJpZFwiLCBcInBvbGFyLWF2ZXJhZ2UtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpLmF0dHIoXCJ2YWx1ZVwiLCBcIm1lZGlhbnNcIikucHJvcGVydHkoXCJjaGVja2VkXCIsIHRydWUpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xuXHQgICAgICAgIGlmICghdGhpcy5jaGVja2VkKSB7XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoLnJlbW92ZSgpO1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGlmICghY2hhcnRzLmhhc093blByb3BlcnR5KG5ld1llYXIpKSB7XG5cdCAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3UG9sYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2Zyk7XG5cdFxuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwibGFiZWxcIikudGV4dChcIkJhc2VsaW5lXCIpLmF0dHIoXCJmb3JcIiwgXCJwb2xhci1hdmVyYWdlLVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblx0XG5cdCAgICB2YXIgdGhyZXNob2xkQ2hlY2tib3ggPSBpbnB1dHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJ0aHJlc2hvbGQtY2hlY2tib3hcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgdGhyZXNob2xkQ2hlY2tib3guYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpLnByb3BlcnR5KFwiY2hlY2tlZFwiLCB0cnVlKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHRocmVzaG9sZEVsZW0uc3R5bGUoXCJvcGFjaXR5XCIsIHRoaXMuY2hlY2tlZCA/IDEgOiAwKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHRocmVzaG9sZENoZWNrYm94LmFwcGVuZChcImxhYmVsXCIpLnRleHQoXCJUaHJlc2hvbGRzXCIpLmF0dHIoXCJmb3JcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuXHR9XG5cdFxuXHQvKiBQT0xBUiBHUkFQSCBIRUxQRVJTICovXG5cdFxuXHRmdW5jdGlvbiBmaW5kUG9sYXJDZW50ZXIoZGF0YSkge1xuXHQgICAgdmFyIGksIGosIGxlbmd0aCwgYXJyO1xuXHQgICAgdmFyIHRvdGFsU3VtID0gMDtcblx0ICAgIHZhciBpbmNvbXBsZXRlWWVhcnMgPSAwO1xuXHQgICAgdmFyIHN1bTtcblx0ICAgIGxlbmd0aCA9IDQ2O1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmtleXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBhcnIgPSBkYXRhW2RhdGEua2V5c1tpXV07XG5cdCAgICAgICAgaWYgKGFyci5sZW5ndGggIT09IGxlbmd0aCkge1xuXHQgICAgICAgICAgICBpbmNvbXBsZXRlWWVhcnMrKztcblx0ICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1bSA9IDA7XG5cdCAgICAgICAgZm9yIChqID0gMDsgaiA8IGxlbmd0aCAvIDI7IGorKykge1xuXHQgICAgICAgICAgICBzdW0gKz0gYXJyW2pdWzFdIC0gYXJyW2ogKyAyM11bMV07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1bSA9IHN1bSAvIDIzO1xuXHQgICAgICAgIHRvdGFsU3VtICs9IHN1bTtcblx0ICAgIH1cblx0ICAgIHRvdGFsU3VtID0gTWF0aC5hYnModG90YWxTdW0pIC8gKGRhdGEua2V5cy5sZW5ndGggLSBpbmNvbXBsZXRlWWVhcnMpO1xuXHRcblx0ICAgIHZhciBhcmVhRGlmZiA9IDEwMDAwMDA7XG5cdCAgICB2YXIgY2hlY2tEaWZmO1xuXHQgICAgdmFyIGFyZWFJbmRleCA9IDA7XG5cdCAgICB2YXIgbGVmdEFyZWEsIHJpZ2h0QXJlYTtcblx0ICAgIHZhciBhdmdzID0gZGF0YS5tZWRpYW5zO1xuXHQgICAgdmFyIGssIGNvdW50ZXI7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aCAvIDI7IGkrKykge1xuXHQgICAgICAgIGxlZnRBcmVhID0gMDtcblx0ICAgICAgICByaWdodEFyZWEgPSAwO1xuXHQgICAgICAgIGZvciAoY291bnRlciA9IDA7IGNvdW50ZXIgPCBsZW5ndGggLyAyOyBjb3VudGVyKyspIHtcblx0ICAgICAgICAgICAgaiA9IChpICsgY291bnRlcikgJSA0Njtcblx0ICAgICAgICAgICAgayA9IChqICsgMjMpICUgNDY7XG5cdFxuXHQgICAgICAgICAgICBsZWZ0QXJlYSArPSBwYXJzZUludChhdmdzW2pdLCAxMCk7XG5cdCAgICAgICAgICAgIHJpZ2h0QXJlYSArPSBwYXJzZUludChhdmdzW2tdLCAxMCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNoZWNrRGlmZiA9IE1hdGguYWJzKGxlZnRBcmVhIC0gcmlnaHRBcmVhKTtcblx0ICAgICAgICBpZiAoY2hlY2tEaWZmIDwgYXJlYURpZmYpIHtcblx0ICAgICAgICAgICAgYXJlYURpZmYgPSBjaGVja0RpZmY7XG5cdCAgICAgICAgICAgIGFyZWFJbmRleCA9IGk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBmaXJzdFJhZGl1cyA9IHBhcnNlSW50KGF2Z3NbYXJlYUluZGV4XSwgMTApO1xuXHQgICAgdmFyIHNlY29uZFJhZGl1cyA9IHBhcnNlSW50KC1hdmdzW2FyZWFJbmRleCArIDIzXSwgMTApO1xuXHRcblx0ICAgIHZhciBmaXJzdERpZmYgPSBNYXRoLmFicyh0b3RhbFN1bSAtIGZpcnN0UmFkaXVzKSAtIE1hdGguYWJzKHRvdGFsU3VtIC0gc2Vjb25kUmFkaXVzKTtcblx0ICAgIHZhciBzZWNvbmREaWZmID0gTWF0aC5hYnMoLXRvdGFsU3VtIC0gZmlyc3RSYWRpdXMpIC0gTWF0aC5hYnMoLXRvdGFsU3VtIC0gc2Vjb25kUmFkaXVzKTtcblx0ICAgIGlmIChzZWNvbmREaWZmID4gZmlyc3REaWZmKSB7XG5cdCAgICAgICAgYXJlYUluZGV4ID0gYXJlYUluZGV4ICsgMjM7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGNpcmNsZWNlbnRlciA9IFswLCAwXTtcblx0ICAgIHZhciBkYXRhY2VudGVyID0gW2FyZWFJbmRleCAqIDggKyAzLCB0b3RhbFN1bV07XG5cdFxuXHQgICAgcmV0dXJuIFtjaXJjbGVjZW50ZXIsIGRhdGFjZW50ZXJdO1xuXHR9XG5cdFxuXHQvKipcblx0ICogc3RhcnREYXkgaXMgYWN0dWFsbHkgdGhlIHNlYXNvbmFsaXR5IGluZGV4LCBpZiBpdCBvY2N1cnMgYWZ0ZXIganVseSBpdCBzaG91bGQgYmUgZmxpcHBlZFxuXHQgKi9cblx0ZnVuY3Rpb24gZmluZFBvbGFyVGhyZXNob2xkcyhkYXRhLCBzdGFydERheSkge1xuXHQgICAgdmFyIHN0YXJ0SW5kZXggPSBNYXRoLmZsb29yKChzdGFydERheSAtIDMpIC8gOCk7XG5cdCAgICBpZiAoc3RhcnRJbmRleCA+IDIyKSB7XG5cdCAgICAgICAgc3RhcnRJbmRleCA9IHN0YXJ0SW5kZXggLSAyMztcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaSwgaiwgbGVuZ3RoLCBhcnI7XG5cdCAgICB2YXIgdG90YWxTdW0gPSAwO1xuXHQgICAgdmFyIHN1bTtcblx0ICAgIGxlbmd0aCA9IDQ2O1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGogPSAoc3RhcnRJbmRleCArIGkpICUgbGVuZ3RoO1xuXHQgICAgICAgIHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZmlmdGVlblRocmVzaG9sZCA9IHRvdGFsU3VtICogLjE1O1xuXHQgICAgdmFyIGVpZ2h0eVRocmVzaG9sZCA9IHRvdGFsU3VtICogLjgwO1xuXHQgICAgdmFyIGVpZ2h0eWZpdmVUaHJlc2hvbGQgPSB0b3RhbFN1bSAqIC44NTtcblx0ICAgIHZhciBmaWZ0ZWVuSW5kZXhGb3VuZCA9IGZhbHNlLFxuXHQgICAgICAgIGVpZ2h0eUluZGV4Rm91bmQgPSBmYWxzZSxcblx0ICAgICAgICBlaWdodHlmaXZlSW5kZXhGb3VuZCA9IGZhbHNlO1xuXHQgICAgdmFyIGZpZnRlZW5JbmRleCwgZWlnaHR5SW5kZXgsIGVpZ2h0eWZpdmVJbmRleDtcblx0XG5cdCAgICB0b3RhbFN1bSA9IDA7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBqID0gKHN0YXJ0SW5kZXggKyBpKSAlIGxlbmd0aDtcblx0ICAgICAgICB0b3RhbFN1bSArPSBwYXJzZUludChkYXRhW2pdLCAxMCk7XG5cdCAgICAgICAgaWYgKCFmaWZ0ZWVuSW5kZXhGb3VuZCAmJiB0b3RhbFN1bSA+IGZpZnRlZW5UaHJlc2hvbGQpIHtcblx0ICAgICAgICAgICAgZmlmdGVlbkluZGV4ID0gajtcblx0ICAgICAgICAgICAgZmlmdGVlbkluZGV4Rm91bmQgPSB0cnVlO1xuXHQgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFlaWdodHlJbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZWlnaHR5VGhyZXNob2xkKSB7XG5cdCAgICAgICAgICAgIGVpZ2h0eUluZGV4ID0gajtcblx0ICAgICAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IHRydWU7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIWVpZ2h0eWZpdmVJbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZWlnaHR5Zml2ZVRocmVzaG9sZCkge1xuXHQgICAgICAgICAgICBlaWdodHlmaXZlSW5kZXggPSBqO1xuXHQgICAgICAgICAgICBlaWdodHlmaXZlSW5kZXhGb3VuZCA9IHRydWU7XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgY2lyY2xlQ2VudGVyID0gWzAsIDBdO1xuXHRcblx0ICAgIHZhciBmaWZ0ZWVuRW5kID0gW2ZpZnRlZW5JbmRleCAqIDggKyAzLCAxMDBdO1xuXHQgICAgdmFyIGVpZ2h0eUVuZCA9IFtlaWdodHlJbmRleCAqIDggKyAzLCAxMDBdO1xuXHQgICAgdmFyIGVpZ2h0eWZpdmVFbmQgPSBbZWlnaHR5Zml2ZUluZGV4ICogOCArIDMsIDEwMF07XG5cdFxuXHQgICAgcmV0dXJuIFt7XG5cdCAgICAgICAgXCJsYWJlbFwiOiBcIjE1JVwiLFxuXHQgICAgICAgIFwiZGF0YVwiOiBbY2lyY2xlQ2VudGVyLCBmaWZ0ZWVuRW5kXVxuXHQgICAgfSwge1xuXHQgICAgICAgIFwibGFiZWxcIjogXCI4MCVcIixcblx0ICAgICAgICBcImRhdGFcIjogW2NpcmNsZUNlbnRlciwgZWlnaHR5RW5kXVxuXHQgICAgfSwge1xuXHQgICAgICAgIFwibGFiZWxcIjogXCI4NSVcIixcblx0ICAgICAgICBcImRhdGFcIjogW2NpcmNsZUNlbnRlciwgZWlnaHR5Zml2ZUVuZF1cblx0ICAgIH1dO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSEVMUEVSUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gZHJhd0xpbmVhclBhdGgoZGF0YSwgbGluZSwgc3ZnKSB7XG5cdCAgICByZXR1cm4gc3ZnLmFwcGVuZChcInBhdGhcIikuYXR0cihcImNsYXNzXCIsIFwibGluZVwiKS5hdHRyKFwiZFwiLCBsaW5lKGRhdGEpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhd1BvbGFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcblx0ICAgIHJldHVybiBzdmcuYXBwZW5kKFwicGF0aFwiKS5kYXR1bShkYXRhKS5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpLmF0dHIoXCJkXCIsIGxpbmUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmF3TGluZWFyUG9pbnRzKGRhdGEsIGxpbmUsIHN2ZywgYXZlcmFnZXMpIHtcblx0ICAgIHJldHVybiBzdmcuc2VsZWN0QWxsKFwicG9pbnRcIikuZGF0YShkYXRhKS5lbnRlcigpLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiY2xhc3NcIiwgXCJwb2ludFwiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkLCBpKSB7XG5cdCAgICAgICAgdmFyIHBvaW50ID0gQXJyYXkuaXNBcnJheShkKSA/IGQgOiBbaSAqIDggKyAzLCBkXTtcblx0ICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtwb2ludF0pLnNsaWNlKDEpLnNsaWNlKDAsIC0xKTtcblx0ICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBjb29ycyArIFwiKVwiO1xuXHQgICAgfSkuYXR0cihcInJcIiwgMykuYXR0cihcInN0cm9rZVwiLCBcIiMwMDBcIikuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24gKGQsIGkpIHtcblx0ICAgICAgICB2YXIgdmFsID0gQXJyYXkuaXNBcnJheShkKSA/IGRbMV0gOiBkO1xuXHQgICAgICAgIHJldHVybiBjb21wdXRlQ29sb3IodmFsLCBhdmVyYWdlc1tpICUgNDZdLCAzKTtcblx0ICAgIH0pLm9uKFwibW91c2VvdmVyXCIsIGhhbmRsZVBvaW50TW91c2VvdmVyKS5vbihcIm1vdXNlb3V0XCIsIGhhbmRsZVBvaW50TW91c2VvdXQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVQb2ludE1vdXNlb3ZlcihkKSB7XG5cdCAgICB2YXIgdGlwU3RyaW5nID0gQXJyYXkuaXNBcnJheShkKSA/IGZvcm1hdERhdGUoZFswXSkgKyBcIjogXCIgKyBkWzFdIDogXCJBdmVyYWdlOiBcIiArIGQ7XG5cdCAgICB0aXAuc2hvdyh0aXBTdHJpbmcpO1xuXHQgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDUpO1xuXHQgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIycHhcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdXQoZCkge1xuXHQgICAgdGlwLmhpZGUoKTtcblx0ICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCAzKTtcblx0ICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMXB4XCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVDaGVja2JveCh3cmFwcGVyLCBrZXksIHR5cGUsIHllYXIsIGNoYXJ0cywgZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpIHtcblx0ICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKS5hdHRyKFwidmFsdWVcIiwga2V5KS5wcm9wZXJ0eShcImNoZWNrZWRcIiwga2V5ID09PSB5ZWFyID8gdHJ1ZSA6IGZhbHNlKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3TGluZWFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwibGFiZWxcIikudGV4dChrZXkpLmF0dHIoXCJmb3JcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY29tcHV0ZUNvbG9yKHZhbHVlLCBtZWRpYW4sIHNjYWxlKSB7XG5cdCAgICB2YXIgZGlmZiA9IHZhbHVlIC0gbWVkaWFuO1xuXHQgICAgdmFyIHBlcmNlbnRfZGlmZiA9IE1hdGguYWJzKGRpZmYpIC8gbWVkaWFuICogMTAwICogc2NhbGU7XG5cdCAgICB2YXIgbGlnaHRuZXNzID0gMTAwIC0gcGVyY2VudF9kaWZmICsgXCIlXCI7XG5cdFxuXHQgICAgaWYgKGRpZmYgPiAwKSB7XG5cdCAgICAgICAgcmV0dXJuIFwiaHNsKDgsIDc5JSwgXCIgKyBsaWdodG5lc3MgKyBcIilcIjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIFwiaHNsKDIxOSwgNzklLCBcIiArIGxpZ2h0bmVzcyArIFwiKVwiO1xuXHQgICAgfVxuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIERBVEUgSEVMUEVSUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlRGF0ZShkYXRlKSB7XG5cdCAgICBkYXRlID0gZGF0ZS50b1N0cmluZygpO1xuXHQgICAgdmFyIHllYXIgPSBkYXRlLnN1YnN0cmluZygwLCA0KTtcblx0ICAgIHZhciBtb250aCA9IHBhcnNlSW50KGRhdGUuc3Vic3RyaW5nKDQsIDYpLCAxMCkgLSAxO1xuXHQgICAgdmFyIGRheSA9IGRhdGUuc3Vic3RyaW5nKDYsIDgpO1xuXHRcblx0ICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGFyc2VKdWxpYW5EYXkoZGF0ZSkge1xuXHQgICAgaWYgKHR5cGVvZiBkYXRlID09PSBcInN0cmluZ1wiKSB7XG5cdCAgICAgICAgZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcblx0ICAgICAgICByZXR1cm4gZGF0ZS5nZXRET1koKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGRhdGU7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZSkge1xuXHQgICAgaWYgKGRhdGUgPT09IFwiQXZlcmFnZVwiKSB7XG5cdCAgICAgICAgcmV0dXJuIGRhdGU7XG5cdCAgICB9XG5cdFxuXHQgICAgZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcblx0ICAgIHJldHVybiBmb3JtYXRNb250aChkYXRlLmdldE1vbnRoKCkpICsgXCIgXCIgKyBvcmRpbmFsX3N1ZmZpeF9vZihkYXRlLmdldERhdGUoKSkgKyBcIiwgXCIgKyBkYXRlLmdldEZ1bGxZZWFyKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdE1vbnRoKG1vbnRoKSB7XG5cdCAgICBzd2l0Y2ggKG1vbnRoKSB7XG5cdCAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJKYW4uXCI7XG5cdCAgICAgICAgY2FzZSAxOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJGZWIuXCI7XG5cdCAgICAgICAgY2FzZSAyOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJNYXIuXCI7XG5cdCAgICAgICAgY2FzZSAzOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJBcHIuXCI7XG5cdCAgICAgICAgY2FzZSA0OlxuXHQgICAgICAgICAgICByZXR1cm4gXCJNYXlcIjtcblx0ICAgICAgICBjYXNlIDU6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkp1bi5cIjtcblx0ICAgICAgICBjYXNlIDY6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkp1bC5cIjtcblx0ICAgICAgICBjYXNlIDc6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkF1Zy5cIjtcblx0ICAgICAgICBjYXNlIDg6XG5cdCAgICAgICAgICAgIHJldHVybiBcIlNlcC5cIjtcblx0ICAgICAgICBjYXNlIDk6XG5cdCAgICAgICAgICAgIHJldHVybiBcIk9jdC5cIjtcblx0ICAgICAgICBjYXNlIDEwOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJOb3YuXCI7XG5cdCAgICAgICAgY2FzZSAxMTpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiRGVjLlwiO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBvcmRpbmFsX3N1ZmZpeF9vZihkYXkpIHtcblx0ICAgIHZhciBqID0gZGF5ICUgMTAsXG5cdCAgICAgICAgayA9IGRheSAlIDEwMDtcblx0ICAgIGlmIChqID09PSAxICYmIGsgIT09IDExKSB7XG5cdCAgICAgICAgcmV0dXJuIGRheSArIFwic3RcIjtcblx0ICAgIH1cblx0ICAgIGlmIChqID09PSAyICYmIGsgIT09IDEyKSB7XG5cdCAgICAgICAgcmV0dXJuIGRheSArIFwibmRcIjtcblx0ICAgIH1cblx0ICAgIGlmIChqID09PSAzICYmIGsgIT09IDEzKSB7XG5cdCAgICAgICAgcmV0dXJuIGRheSArIFwicmRcIjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBkYXkgKyBcInRoXCI7XG5cdH1cblx0XG5cdHZhciBNT05USF9MQUJFTFMgPSB7XG5cdCAgICAwOiBcIkphblwiLFxuXHQgICAgMTogXCJGZWJcIixcblx0ICAgIDI6IFwiTWFyXCIsXG5cdCAgICAzOiBcIkFwclwiLFxuXHQgICAgNDogXCJNYXlcIixcblx0ICAgIDU6IFwiSnVuXCIsXG5cdCAgICA2OiBcIkp1bFwiLFxuXHQgICAgNzogXCJBdWdcIixcblx0ICAgIDg6IFwiU2VwXCIsXG5cdCAgICA5OiBcIk9jdFwiLFxuXHQgICAgMTA6IFwiTm92XCIsXG5cdCAgICAxMTogXCJEZWNcIlxuXHR9O1xuXG4vKioqLyB9LFxuLyogMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQmluZFRhYkV2ZW50cztcblx0ZnVuY3Rpb24gQmluZFRhYkV2ZW50cygpIHtcblx0ICAgIGQzLnNlbGVjdEFsbChcIi5wYW5lbC10b3AtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2spO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVUYWJIZWFkZXJCdG5DbGljaygpIHtcblx0ICAgIC8vIElmIHRoZSBzZWN0aW9uIGlzIGFscmVhZHkgYWN0aXZlLCBkbyBub3RoaW5nXG5cdCAgICBpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSByZXR1cm47XG5cdFxuXHQgICAgW2QzLnNlbGVjdEFsbCgnLnBhbmVsLXRvcC1idG4nKSwgZDMuc2VsZWN0QWxsKCcucGFuZWwtc2VjdGlvbi13cmFwcGVyJyldLmZvckVhY2goZnVuY3Rpb24gKHNlbGVjdGlvbikge1xuXHQgICAgICAgIHNlbGVjdGlvbi5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAhZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ2FjdGl2ZScpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQ3JlYXRlTWFwID0gQ3JlYXRlTWFwO1xuXHRleHBvcnRzLkdldE1hcCA9IEdldE1hcDtcblx0dmFyIG1hcDtcblx0XG5cdGZ1bmN0aW9uIENyZWF0ZU1hcChtYXBDb25maWcpIHtcblx0ICAgIHZhciBpZCA9IG1hcENvbmZpZy5pZCB8fCBcIm1hcFwiO1xuXHQgICAgdmFyIG9wdGlvbnMgPSBtYXBDb25maWcub3B0aW9ucyB8fCB7IFwic2Nyb2xsV2hlZWxab29tXCI6IGZhbHNlIH07XG5cdCAgICB2YXIgaW5pdGlhbENlbnRlciA9IG1hcENvbmZpZy5pbml0aWFsQ2VudGVyIHx8IFtcIjM4LjVcIiwgXCItODFcIl07XG5cdCAgICB2YXIgaW5pdGlhbFpvb20gPSBtYXBDb25maWcuaW5pdGlhbFpvb20gfHwgNjtcblx0XG5cdCAgICBtYXAgPSBMLm1hcChpZCwgb3B0aW9ucykuc2V0Vmlldyhpbml0aWFsQ2VudGVyLCBpbml0aWFsWm9vbSk7XG5cdCAgICByZXR1cm4gbWFwO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBHZXRNYXAoKSB7XG5cdCAgICByZXR1cm4gbWFwO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSxcbi8qIDI4ICovLFxuLyogMjkgKi8sXG4vKiAzMCAqLyxcbi8qIDMxICovLFxuLyogMzIgKi8sXG4vKiAzMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkJpbmRVcGRhdGVTaGFyZVVybCA9IEJpbmRVcGRhdGVTaGFyZVVybDtcblx0ZXhwb3J0cy5BZGRTaGFyZVNldHRpbmdzVG9Db25maWcgPSBBZGRTaGFyZVNldHRpbmdzVG9Db25maWc7XG5cdFxuXHR2YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRcblx0ZnVuY3Rpb24gQmluZFVwZGF0ZVNoYXJlVXJsKG1hcCkge1xuXHQgICAgbWFwLm9uKFwibW92ZWVuZFwiLCB1cGRhdGVTaGFyZVVybCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZVNoYXJlVXJsKGUpIHtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHQgICAgdmFyIHBhcmFtcyA9IFttYWtlQ2VudGVyU3RyaW5nKG1hcCksIG1ha2Vab29tU3RyaW5nKG1hcCksIG1ha2VMYXllclN0cmluZyhtYXApXTtcblx0XG5cdCAgICBzZXRTaGFyZVVybChtYWtlU2hhcmVVcmwocGFyYW1zKSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VTaGFyZVVybChwYXJhbXMpIHtcblx0ICAgIHJldHVybiBcIj9cIiArIHBhcmFtcy5maWx0ZXIoZnVuY3Rpb24gKHApIHtcblx0ICAgICAgICByZXR1cm4gcCAhPT0gdW5kZWZpbmVkO1xuXHQgICAgfSkuam9pbihcIiZcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldFNoYXJlVXJsKHVybCkge1xuXHQgICAgaWYgKHdpbmRvdy5oaXN0b3J5ICYmIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSkge1xuXHQgICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgXCJcIiwgdXJsKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUNlbnRlclN0cmluZyhtYXApIHtcblx0ICAgIHZhciBjZW50ZXIgPSBtYXAuZ2V0Q2VudGVyKCk7XG5cdCAgICByZXR1cm4gXCJjZW50ZXI9XCIgKyBjZW50ZXIubGF0LnRvU3RyaW5nKCkgKyBcIixcIiArIGNlbnRlci5sbmcudG9TdHJpbmcoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVpvb21TdHJpbmcobWFwKSB7XG5cdCAgICByZXR1cm4gXCJ6b29tPVwiICsgbWFwLmdldFpvb20oKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyU3RyaW5nKG1hcCkge1xuXHQgICAgdmFyIGxheWVycyA9IFtdO1xuXHQgICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICBpZiAobGF5ZXIub3B0aW9ucyAmJiBsYXllci5vcHRpb25zLmxheWVycykge1xuXHQgICAgICAgICAgICBsYXllcnMucHVzaChsYXllci5vcHRpb25zLmxheWVycyk7XG5cdCAgICAgICAgICAgIGxheWVycy5wdXNoKGxheWVyLm9wdGlvbnMuaGFzT3duUHJvcGVydHkoXCJvcGFjaXR5XCIpID8gbGF5ZXIub3B0aW9ucy5vcGFjaXR5IDogXCIxXCIpO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIFwibGF5ZXJzPVwiICsgbGF5ZXJzLmpvaW4oXCIsXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwYXJzZVNoYXJlVXJsKCkge1xuXHQgICAgdmFyIHBhcmFtcyA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XG5cdCAgICBpZiAocGFyYW1zID09PSBcIlwiKSByZXR1cm47XG5cdFxuXHQgICAgcGFyYW1zID0gZ2V0UGFyYW1zQXJyYXkocGFyYW1zKTtcblx0ICAgIHBhcmFtcyA9IG1ha2VLZXllZFBhcmFtc09iamVjdChwYXJhbXMpO1xuXHRcblx0ICAgIGZvcm1hdFBhcmFtcyhwYXJhbXMpO1xuXHQgICAgcmV0dXJuIHBhcmFtcztcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0UGFyYW1zQXJyYXkocGFyYW1zKSB7XG5cdCAgICBwYXJhbXMgPSBwYXJhbXMuc3Vic3RyaW5nKDEpO1xuXHQgICAgcGFyYW1zID0gdW5tYW5nbGVQYXJhbVN0cmluZyhwYXJhbXMpO1xuXHQgICAgcmV0dXJuIHBhcmFtcy5zcGxpdChcIiZcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVubWFuZ2xlUGFyYW1TdHJpbmcocGFyYW1zKSB7XG5cdCAgICByZXR1cm4gcGFyYW1zLnJlcGxhY2UoL1xcJTJbY3xDXS9nLCBcIixcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VLZXllZFBhcmFtc09iamVjdChwYXJhbXNBcnIpIHtcblx0ICAgIHZhciBwYXJzZWRQYXJhbXMgPSB7fTtcblx0ICAgIHZhciBwYXJhbVBhaXI7XG5cdCAgICB2YXIgaTtcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgcGFyYW1zQXJyLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgcGFyYW1QYWlyID0gcGFyYW1zQXJyW2ldLnNwbGl0KFwiPVwiKTtcblx0ICAgICAgICBwYXJzZWRQYXJhbXNbcGFyYW1QYWlyWzBdXSA9IHBhcmFtUGFpclsxXTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gcGFyc2VkUGFyYW1zO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRQYXJhbXMocGFyYW1zKSB7XG5cdCAgICBpZiAocGFyYW1zLmNlbnRlcikgcGFyYW1zLmNlbnRlciA9IGZvcm1hdENlbnRlclBhcmFtKHBhcmFtcy5jZW50ZXIpO1xuXHQgICAgaWYgKHBhcmFtcy5sYXllcnMpIHBhcmFtcy5sYXllcnMgPSBmb3JtYXRMYXllclBhcmFtKHBhcmFtcy5sYXllcnMpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRDZW50ZXJQYXJhbShjZW50ZXIpIHtcblx0ICAgIHJldHVybiBjZW50ZXIuc3BsaXQoXCIsXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRMYXllclBhcmFtKGxheWVycykge1xuXHQgICAgdmFyIGZvcm1hdHRlZExheWVycyA9IHtcblx0ICAgICAgICBcImVuYWJsZWRMYXllcnNcIjogW10sXG5cdCAgICAgICAgXCJvcGFjaXR5VmFsc1wiOiB7fVxuXHQgICAgfTtcblx0ICAgIHZhciBsYXllcklkO1xuXHQgICAgdmFyIGk7XG5cdFxuXHQgICAgbGF5ZXJzID0gbGF5ZXJzLnNwbGl0KFwiLFwiKTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpID0gaSArIDIpIHtcblx0ICAgICAgICBsYXllcklkID0gbGF5ZXJzW2ldO1xuXHQgICAgICAgIGZvcm1hdHRlZExheWVycy5lbmFibGVkTGF5ZXJzLnB1c2gobGF5ZXJJZCk7XG5cdCAgICAgICAgZm9ybWF0dGVkTGF5ZXJzLm9wYWNpdHlWYWxzW2xheWVySWRdID0gbGF5ZXJzW2kgKyAxXTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gZm9ybWF0dGVkTGF5ZXJzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBBZGRTaGFyZVNldHRpbmdzVG9Db25maWcoY29uZmlnKSB7XG5cdCAgICB2YXIgc2hhcmUgPSBwYXJzZVNoYXJlVXJsKCk7XG5cdCAgICBpZiAoIXNoYXJlKSByZXR1cm47XG5cdCAgICBpZiAoc2hhcmUuY2VudGVyKSBjb25maWcubWFwLmluaXRpYWxDZW50ZXIgPSBzaGFyZS5jZW50ZXI7XG5cdCAgICBpZiAoc2hhcmUuem9vbSkgY29uZmlnLm1hcC5pbml0aWFsWm9vbSA9IHNoYXJlLnpvb207XG5cdCAgICBpZiAoc2hhcmUubGF5ZXJzKSBhZGRMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmUubGF5ZXJzLCBjb25maWcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmVMYXllclNldHRpbmdzLCBjb25maWcpIHtcblx0ICAgIHZhciBlbmFibGVkTGF5ZXJzID0gc2hhcmVMYXllclNldHRpbmdzLmVuYWJsZWRMYXllcnM7XG5cdCAgICBjb25maWdbXCJhY3RpdmUtbGF5ZXJzXCJdID0gZW5hYmxlZExheWVycztcblx0XG5cdCAgICB2YXIgaSwgaiwgcHJvcCwgbGF5ZXJncm91cDtcblx0ICAgIHZhciBlbmFibGVkTGF5ZXI7XG5cdCAgICB2YXIgZm91bmRMYXllcjtcblx0ICAgIHZhciBsYXllcnMgPSBjb25maWcubGF5ZXJzO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBlbmFibGVkTGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZm91bmRMYXllciA9IGZhbHNlO1xuXHQgICAgICAgIGVuYWJsZWRMYXllciA9IGVuYWJsZWRMYXllcnNbaV07XG5cdCAgICAgICAgZm9yIChwcm9wIGluIGxheWVycykge1xuXHQgICAgICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xuXHQgICAgICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuXHQgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGF5ZXJncm91cC5sZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGxheWVyZ3JvdXBbal0uaWQgPT09IGVuYWJsZWRMYXllcikge1xuXHQgICAgICAgICAgICAgICAgICAgIGxheWVyZ3JvdXBbal0ub3BhY2l0eSA9IHNoYXJlTGF5ZXJTZXR0aW5ncy5vcGFjaXR5VmFsc1tlbmFibGVkTGF5ZXJdO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvdW5kTGF5ZXIgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChmb3VuZExheWVyKSBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDM0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkNyZWF0ZURlZmF1bHRMYXllcnMgPSBDcmVhdGVEZWZhdWx0TGF5ZXJzO1xuXHRleHBvcnRzLnRvZ2dsZUxheWVyID0gdG9nZ2xlTGF5ZXI7XG5cdGV4cG9ydHMuZW5hYmxlTGF5ZXIgPSBlbmFibGVMYXllcjtcblx0ZXhwb3J0cy5kaXNhYmxlTGF5ZXIgPSBkaXNhYmxlTGF5ZXI7XG5cdFxuXHR2YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRcblx0LyoqXG5cdCAqIE5vdGU6IGxheWVyIGlzIG5vdCB0aGUgbGVhZmxldCBjb25jZXB0IG9mIGEgbGF5ZXIsIGJ1dCByYXRoZXIgdGhlIGludGVybmFsXG5cdCAqICAgICAgIG9iamVjdCB3aGljaCB0cmFja3MgdGhlbS4gbGF5ZXIubWFwTGF5ZXIgaXMgdGhlIHBvaW50ZXIgdG8gdGhlXG5cdCAqICAgICAgIGxlYWZsZXQgbGF5ZXIuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gQ3JlYXRlRGVmYXVsdExheWVycyhsYXllcnMsIGRlZmF1bHRMYXllcnMpIHtcblx0ICAgIHZhciBpLCBqLCBwcm9wLCBsYXllcmdyb3VwO1xuXHQgICAgdmFyIGRlZmF1bHRMYXllcjtcblx0ICAgIHZhciBmb3VuZExheWVyO1xuXHRcblx0ICAgIGlmICghZGVmYXVsdExheWVycyB8fCBkZWZhdWx0TGF5ZXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBkZWZhdWx0TGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZm91bmRMYXllciA9IGZhbHNlO1xuXHQgICAgICAgIGRlZmF1bHRMYXllciA9IGRlZmF1bHRMYXllcnNbaV07XG5cdCAgICAgICAgZm9yIChwcm9wIGluIGxheWVycykge1xuXHQgICAgICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xuXHQgICAgICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuXHQgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGF5ZXJncm91cC5sZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGxheWVyZ3JvdXBbal0uaWQgPT09IGRlZmF1bHRMYXllcikge1xuXHQgICAgICAgICAgICAgICAgICAgIGVuYWJsZUxheWVyKGxheWVyZ3JvdXBbal0pO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvdW5kTGF5ZXIgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChmb3VuZExheWVyKSBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvZ2dsZUxheWVyKGxheWVyLCBsYXllckRpdikge1xuXHQgICAgaWYgKCFsYXllci5hY3RpdmUpIHtcblx0ICAgICAgICBlbmFibGVMYXllcihsYXllciwgbGF5ZXJEaXYpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBkaXNhYmxlTGF5ZXIobGF5ZXIsIGxheWVyRGl2KTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZW5hYmxlTGF5ZXIobGF5ZXIpIHtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHQgICAgbGF5ZXIuYWN0aXZlID0gdHJ1ZTtcblx0ICAgIGxheWVyLm1hcExheWVyID0gbGF5ZXIubWFwTGF5ZXIgfHwgbWFrZVdtc1RpbGVMYXllcihsYXllcik7XG5cdCAgICBtYXAuYWRkTGF5ZXIobGF5ZXIubWFwTGF5ZXIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkaXNhYmxlTGF5ZXIobGF5ZXIpIHtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHQgICAgbGF5ZXIuYWN0aXZlID0gZmFsc2U7XG5cdCAgICBpZiAobGF5ZXIubWFwTGF5ZXIgJiYgbWFwLmhhc0xheWVyKGxheWVyLm1hcExheWVyKSkge1xuXHQgICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllci5tYXBMYXllcik7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VXbXNUaWxlTGF5ZXIobGF5ZXIpIHtcblx0ICAgIHJldHVybiBMLnRpbGVMYXllci53bXMobGF5ZXIudXJsLCB7XG5cdCAgICAgICAgbGF5ZXJzOiBsYXllci5pZCxcblx0ICAgICAgICB0cmFuc3BhcmVudDogbGF5ZXIudHJhbnNwYXJlbnQgfHwgdHJ1ZSxcblx0ICAgICAgICB2ZXJzaW9uOiBsYXllci52ZXJzaW9uIHx8ICcxLjMuMCcsXG5cdCAgICAgICAgY3JzOiBsYXllci5jcnMgfHwgTC5DUlMuRVBTRzQzMjYsXG5cdCAgICAgICAgZm9ybWF0OiBsYXllci5mb3JtYXQgfHwgJ2ltYWdlL3BuZycsXG5cdCAgICAgICAgb3BhY2l0eTogbGF5ZXIub3BhY2l0eSB8fCBcIjFcIlxuXHQgICAgfSk7XG5cdH1cblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGluZGV4X2J1bmRsZS5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGU5ZTgwMmY3YjJiZTA5ODYwZDE0IiwiaW1wb3J0IFBhcnNlQ29uZmlnIGZyb20gJy4vcGFyc2VyJztcbmltcG9ydCBDcmVhdGVTZWFyY2ggZnJvbSAnLi9zZWFyY2gnO1xuaW1wb3J0IHJlbmRlckxheWVyTGlzdCBmcm9tICcuL3JlbmRlckxheWVyTGlzdCc7XG5pbXBvcnQgQ3JlYXRlQmFzZUxheWVycyBmcm9tICcuL2Jhc2VsYXllcic7XG5pbXBvcnQge1NldHVwR3JhcGhzLCBCaW5kR3JhcGhFdmVudHN9IGZyb20gJy4vZ3JhcGgnXG5pbXBvcnQgQmluZFRhYkV2ZW50cyBmcm9tICcuL3RhYnMnXG5pbXBvcnQge0NyZWF0ZU1hcH0gZnJvbSAnLi9tYXAnXG5pbXBvcnQge0JpbmRVcGRhdGVTaGFyZVVybCwgQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnfSBmcm9tICcuL3NoYXJlJ1xuaW1wb3J0IHtDcmVhdGVEZWZhdWx0TGF5ZXJzfSBmcm9tICcuL3RvZ2dsZUxheWVyJ1xuXG52YXIgY3NzID0gcmVxdWlyZSgnLi4vY3NzL3Nhc3MvbGFuZGF0LnNjc3MnKVxuXG4vLyBEb2VzIG5vdCByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcbnZhciBCYXNlID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgIFBhcnNlQ29uZmlnKGNvbmZpZywgY2FsbGJhY2spO1xuICAgIFNldHVwR3JhcGhzKCk7XG4gICAgQmluZFRhYkV2ZW50cygpO1xufVxuXG4vLyBEb2VzIHJlbHkgb24gbWFwIG9iamVjdCBvciBjb25maWcgZmlsZVxudmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICBBZGRTaGFyZVNldHRpbmdzVG9Db25maWcoZGF0YSlcbiAgICB2YXIgbWFwID0gQ3JlYXRlTWFwKGRhdGEubWFwKTtcbiAgICBDcmVhdGVCYXNlTGF5ZXJzKG1hcCwgZGF0YS5iYXNlbGF5ZXJzKTtcbiAgICBDcmVhdGVEZWZhdWx0TGF5ZXJzKGRhdGEubGF5ZXJzLCBkYXRhW1wiYWN0aXZlLWxheWVyc1wiXSk7XG4gICAgcmVuZGVyTGF5ZXJMaXN0KGRhdGEubGF5ZXJzLCBkYXRhLmxheW91dCk7XG4gICAgQ3JlYXRlU2VhcmNoKG1hcCk7XG4gICAgQmluZEdyYXBoRXZlbnRzKG1hcCk7XG4gICAgQmluZFVwZGF0ZVNoYXJlVXJsKG1hcCk7XG59XG5cbndpbmRvdy5CYXNlID0gQmFzZTtcblxuZXhwb3J0IGRlZmF1bHQge0Jhc2V9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvYmFzZS5qcyIsIi8qKlxuICogUGFyc2VzIGEgY29uZmlnIGZpbGUuIFNpbmNlIHRoZSBwcm9jZXNzIHRvIGdldCBleHRlcm5hbCBmaWxlc1xuICogdXNlcyBBSkFYIHlvdSBuZWVkIHRvIHBhc3MgYSBjYWxsYmFjayB0byBoYW5kbGUgdGhlIG5leHQgc3RlcHNcbiAqIG9mIHVzaW5nIHRoZSBjb25maWcgZmlsZSwgc2luY2Ugd2UgZG8gbm90IGtub3cgaG93IGxvbmcgaXRcbiAqIHdpbGwgdGFrZSB0byBncmFiIHRoZSBmaWxlLlxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQYXJzZUNvbmZpZyAoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcbiAgICBHZXRDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spO1xufVxuXG5mdW5jdGlvbiBHZXRDb25maWcgKGNvbmZpZ0ZpbGUsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHhtbGh0dHAucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4bWxodHRwLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICB9IGNhdGNoKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1I6IE1hbGZvcm1lZCBKU09OIGluIGNvbmZpZyBmaWxlLlwiKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9ybWF0TWFwKGRhdGEpO1xuICAgICAgICAgICAgZm9ybWF0TGF5ZXJzKGRhdGEpO1xuICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG4gICAgICAgIH1cbiAgICB9O1xuIFxuICAgIHhtbGh0dHAub3BlbihcIkdFVFwiLCBjb25maWdGaWxlLCB0cnVlKTtcbiAgICB4bWxodHRwLnNlbmQoKTtcbiAgICBjb25zb2xlLmxvZyhcImhpXCIpXG59XG5cbmZ1bmN0aW9uIGZvcm1hdE1hcCAoZGF0YSkge1xuICAgIGlmICghZGF0YS5tYXApIGRhdGEubWFwID0ge307XG59XG5cbmZ1bmN0aW9uIGZvcm1hdExheWVycyAoZGF0YSkge1xuICAgIHZhciBsYXllcnMgPSBkYXRhLmxheWVycztcbiAgICB2YXIgZGVmYXVsdE1hcHNlcnZlclVybCA9IGRhdGEubWFwc2VydmVyVXJsO1xuICAgIHZhciBkZWZhdWx0RW5hYmxlZExheWVycyA9IGRhdGFbXCJhY3RpdmUtbGF5ZXJzXCJdO1xuICAgIHZhciBsYXllcmdyb3VwO1xuICAgIHZhciBpO1xuXG4gICAgZm9yICh2YXIgcHJvcCBpbiBsYXllcnMpIHtcbiAgICAgICAgaWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcbiAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxheWVyZ3JvdXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHNldE1hcHNlcnZlclVybChsYXllcmdyb3VwW2ldLCBkZWZhdWx0TWFwc2VydmVyVXJsKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gc2V0TWFwc2VydmVyVXJsIChsYXllciwgdXJsKSB7XG4gICAgbGF5ZXIudXJsID0gbGF5ZXIudXJsIHx8IHVybDtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3BhcnNlci5qcyIsImltcG9ydCB7IEdlb1NlYXJjaENvbnRyb2wsIEVzcmlQcm92aWRlciB9IGZyb20gJ2xlYWZsZXQtZ2Vvc2VhcmNoJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ3JlYXRlU2VhcmNoIChtYXApIHtcbiAgICBjb25zdCBwcm92aWRlciA9IG5ldyBFc3JpUHJvdmlkZXIoKTtcblxuICAgIGNvbnN0IHNlYXJjaENvbnRyb2wgPSBuZXcgR2VvU2VhcmNoQ29udHJvbCh7XG4gICAgICAgIHByb3ZpZGVyOiBwcm92aWRlcixcbiAgICAgICAgc2hvd01hcmtlcjogZmFsc2UsXG4gICAgfSk7XG5cbiAgICBtYXAuYWRkQ29udHJvbChzZWFyY2hDb250cm9sKTtcblxuICAgIEwuRG9tRXZlbnQub24oc2VhcmNoQ29udHJvbC5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmNvbnRhaW5lciwgXCJjbGlja1wiLCBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgTC5Eb21FdmVudC5zdG9wUHJvcGFnYXRpb24oZXYpO1xuICAgIH0pO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvc2VhcmNoLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2xlYWZsZXRDb250cm9sID0gcmVxdWlyZSgnLi9sZWFmbGV0Q29udHJvbCcpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0dlb1NlYXJjaENvbnRyb2wnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sZWFmbGV0Q29udHJvbCkuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfc2VhcmNoRWxlbWVudCA9IHJlcXVpcmUoJy4vc2VhcmNoRWxlbWVudCcpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1NlYXJjaEVsZW1lbnQnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2hFbGVtZW50KS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9iaW5nUHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9iaW5nUHJvdmlkZXInKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdCaW5nUHJvdmlkZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iaW5nUHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX2VzcmlQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL2VzcmlQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0VzcmlQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VzcmlQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfZ29vZ2xlUHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9nb29nbGVQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0dvb2dsZVByb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ29vZ2xlUHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX29wZW5TdHJlZXRNYXBQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL29wZW5TdHJlZXRNYXBQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ09wZW5TdHJlZXRNYXBQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29wZW5TdHJlZXRNYXBQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9wcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1Byb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL2luZGV4LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX25vZGVudFJ1bnRpbWUgPSByZXF1aXJlKCdub2RlbnQtcnVudGltZScpO1xuXG52YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IExlYWZsZXRDb250cm9sO1xuXG52YXIgX2xvZGFzaCA9IHJlcXVpcmUoJ2xvZGFzaC5kZWJvdW5jZScpO1xuXG52YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXG52YXIgX3NlYXJjaEVsZW1lbnQgPSByZXF1aXJlKCcuL3NlYXJjaEVsZW1lbnQnKTtcblxudmFyIF9zZWFyY2hFbGVtZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaEVsZW1lbnQpO1xuXG52YXIgX3Jlc3VsdExpc3QgPSByZXF1aXJlKCcuL3Jlc3VsdExpc3QnKTtcblxudmFyIF9yZXN1bHRMaXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Jlc3VsdExpc3QpO1xuXG52YXIgX2RvbVV0aWxzID0gcmVxdWlyZSgnLi9kb21VdGlscycpO1xuXG52YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBkZWZhdWx0T3B0aW9ucyA9IGZ1bmN0aW9uIGRlZmF1bHRPcHRpb25zKCkge1xuICByZXR1cm4ge1xuICAgIHBvc2l0aW9uOiAndG9wbGVmdCcsXG4gICAgc3R5bGU6ICdidXR0b24nLFxuICAgIHNob3dNYXJrZXI6IHRydWUsXG4gICAgc2hvd1BvcHVwOiBmYWxzZSxcbiAgICBtYXJrZXI6IHtcbiAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpLFxuICAgICAgZHJhZ2dhYmxlOiBmYWxzZVxuICAgIH0sXG4gICAgbWF4TWFya2VyczogMSxcbiAgICByZXRhaW5ab29tTGV2ZWw6IGZhbHNlLFxuICAgIGFuaW1hdGVab29tOiB0cnVlLFxuICAgIHNlYXJjaExhYmVsOiAnRW50ZXIgYWRkcmVzcycsXG4gICAgbm90Rm91bmRNZXNzYWdlOiAnU29ycnksIHRoYXQgYWRkcmVzcyBjb3VsZCBub3QgYmUgZm91bmQuJyxcbiAgICBtZXNzYWdlSGlkZURlbGF5OiAzMDAwLFxuICAgIHpvb21MZXZlbDogMTgsXG4gICAgY2xhc3NOYW1lczoge1xuICAgICAgY29udGFpbmVyOiAnbGVhZmxldC1iYXIgbGVhZmxldC1jb250cm9sIGxlYWZsZXQtY29udHJvbC1nZW9zZWFyY2gnLFxuICAgICAgYnV0dG9uOiAnbGVhZmxldC1iYXItcGFydCBsZWFmbGV0LWJhci1wYXJ0LXNpbmdsZScsXG4gICAgICBtc2dib3g6ICdsZWFmbGV0LWJhciBtZXNzYWdlJyxcbiAgICAgIGZvcm06ICcnLFxuICAgICAgaW5wdXQ6ICcnXG4gICAgfSxcbiAgICBhdXRvQ29tcGxldGU6IHRydWUsXG4gICAgYXV0b0NvbXBsZXRlRGVsYXk6IDI1MFxuICB9O1xufTtcblxudmFyIENvbnRyb2wgPSB7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUob3B0aW9ucykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB0aGlzLm1hcmtlcnMgPSBuZXcgTC5GZWF0dXJlR3JvdXAoKTtcblxuICAgIHRoaXMub3B0aW9ucyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0T3B0aW9ucygpLCBvcHRpb25zKTtcblxuICAgIHZhciBfb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgc3R5bGUgPSBfb3B0aW9ucy5zdHlsZSxcbiAgICAgICAgY2xhc3NOYW1lcyA9IF9vcHRpb25zLmNsYXNzTmFtZXMsXG4gICAgICAgIHNlYXJjaExhYmVsID0gX29wdGlvbnMuc2VhcmNoTGFiZWwsXG4gICAgICAgIGF1dG9Db21wbGV0ZSA9IF9vcHRpb25zLmF1dG9Db21wbGV0ZSxcbiAgICAgICAgYXV0b0NvbXBsZXRlRGVsYXkgPSBfb3B0aW9ucy5hdXRvQ29tcGxldGVEZWxheTtcblxuICAgIGlmIChzdHlsZSAhPT0gJ2J1dHRvbicpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5jbGFzc05hbWVzLmNvbnRhaW5lciArPSAnICcgKyBvcHRpb25zLnN0eWxlO1xuICAgIH1cblxuICAgIHRoaXMuc2VhcmNoRWxlbWVudCA9IG5ldyBfc2VhcmNoRWxlbWVudDIuZGVmYXVsdChfZXh0ZW5kcyh7fSwgdGhpcy5vcHRpb25zLCB7XG4gICAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChxdWVyeSkge1xuICAgICAgICByZXR1cm4gX3RoaXMub25TdWJtaXQocXVlcnkpO1xuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHZhciBfc2VhcmNoRWxlbWVudCRlbGVtZW4gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMsXG4gICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5jb250YWluZXIsXG4gICAgICAgIGZvcm0gPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uZm9ybSxcbiAgICAgICAgaW5wdXQgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uaW5wdXQ7XG5cbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9KTtcblxuICAgIHZhciBidXR0b24gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdhJywgY2xhc3NOYW1lcy5idXR0b24sIGNvbnRhaW5lcik7XG4gICAgYnV0dG9uLnRpdGxlID0gc2VhcmNoTGFiZWw7XG4gICAgYnV0dG9uLmhyZWYgPSAnIyc7XG5cbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25DbGljayhlKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICBpZiAoYXV0b0NvbXBsZXRlKSB7XG4gICAgICB0aGlzLnJlc3VsdExpc3QgPSBuZXcgX3Jlc3VsdExpc3QyLmRlZmF1bHQoe1xuICAgICAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2soX3JlZikge1xuICAgICAgICAgIHZhciByZXN1bHQgPSBfcmVmLnJlc3VsdDtcblxuICAgICAgICAgIGlucHV0LnZhbHVlID0gcmVzdWx0LmxhYmVsO1xuICAgICAgICAgIF90aGlzLm9uU3VibWl0KHsgcXVlcnk6IHJlc3VsdC5sYWJlbCB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGZvcm0uYXBwZW5kQ2hpbGQodGhpcy5yZXN1bHRMaXN0LmVsZW1lbnRzLmNvbnRhaW5lcik7XG5cbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKDAsIF9sb2Rhc2gyLmRlZmF1bHQpKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5hdXRvU2VhcmNoKGUpO1xuICAgICAgfSwgYXV0b0NvbXBsZXRlRGVsYXkpLCB0cnVlKTtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2VsZWN0UmVzdWx0KGUpO1xuICAgICAgfSwgdHJ1ZSk7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmNsZWFyUmVzdWx0cyhlKTtcbiAgICAgIH0sIHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudHMgPSB7IGJ1dHRvbjogYnV0dG9uIH07XG4gIH0sXG4gIG9uQWRkOiBmdW5jdGlvbiBvbkFkZChtYXApIHtcbiAgICB2YXIgX29wdGlvbnMyID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBzaG93TWFya2VyID0gX29wdGlvbnMyLnNob3dNYXJrZXIsXG4gICAgICAgIHN0eWxlID0gX29wdGlvbnMyLnN0eWxlO1xuXG5cbiAgICB0aGlzLm1hcCA9IG1hcDtcbiAgICBpZiAoc2hvd01hcmtlcikge1xuICAgICAgdGhpcy5tYXJrZXJzLmFkZFRvKG1hcCk7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlID09PSAnYmFyJykge1xuICAgICAgdmFyIGZvcm0gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuZm9ybTtcblxuICAgICAgdmFyIHJvb3QgPSBtYXAuZ2V0Q29udGFpbmVyKCkucXVlcnlTZWxlY3RvcignLmxlYWZsZXQtY29udHJvbC1jb250YWluZXInKTtcblxuICAgICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsICdsZWFmbGV0LWNvbnRyb2wtZ2Vvc2VhcmNoIGJhcicpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZvcm0pO1xuICAgICAgcm9vdC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgICAgdGhpcy5lbGVtZW50cy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5jb250YWluZXI7XG4gIH0sXG4gIG9uUmVtb3ZlOiBmdW5jdGlvbiBvblJlbW92ZSgpIHtcbiAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cbiAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICBjb250YWluZXIucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG4gIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIF9zZWFyY2hFbGVtZW50JGVsZW1lbjIgPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMsXG4gICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbjIuY29udGFpbmVyLFxuICAgICAgICBpbnB1dCA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbjIuaW5wdXQ7XG5cblxuICAgIGlmIChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgICBpbnB1dC5mb2N1cygpO1xuICAgIH1cbiAgfSxcbiAgc2VsZWN0UmVzdWx0OiBmdW5jdGlvbiBzZWxlY3RSZXN1bHQoZXZlbnQpIHtcbiAgICBpZiAoIVtfY29uc3RhbnRzLkFSUk9XX0RPV05fS0VZLCBfY29uc3RhbnRzLkFSUk9XX1VQX0tFWV0uaW5jbHVkZXMoZXZlbnQua2V5Q29kZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBpbnB1dCA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5pbnB1dDtcblxuXG4gICAgdmFyIGxpc3QgPSB0aGlzLnJlc3VsdExpc3Q7XG4gICAgdmFyIG1heCA9IHRoaXMucmVzdWx0TGlzdC5jb3VudCgpIC0gMTtcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gICAgdmFyIG5leHQgPSBldmVudC5jb2RlID09PSAnQXJyb3dEb3duJyA/IH5+bGlzdC5zZWxlY3RlZCArIDEgOiB+fmxpc3Quc2VsZWN0ZWQgLSAxO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuICAgIHZhciBpZHggPSBuZXh0IDwgMCA/IG1heCA6IG5leHQgPiBtYXggPyAwIDogbmV4dDtcblxuICAgIHZhciBpdGVtID0gbGlzdC5zZWxlY3QoaWR4KTtcbiAgICBpbnB1dC52YWx1ZSA9IGl0ZW0ubGFiZWw7XG4gIH0sXG4gIGNsZWFyUmVzdWx0czogZnVuY3Rpb24gY2xlYXJSZXN1bHRzKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgIT09IF9jb25zdGFudHMuRVNDQVBFX0tFWSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucmVzdWx0TGlzdC5jbGVhcigpO1xuICB9LFxuICBhdXRvU2VhcmNoOiBmdW5jdGlvbiBhdXRvU2VhcmNoKGV2ZW50KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgIHZhciBxdWVyeSwgcHJvdmlkZXIsIHJlc3VsdHM7XG5cbiAgICAgIGlmIChfY29uc3RhbnRzLlNQRUNJQUxfS0VZUy5pbmNsdWRlcyhldmVudC5rZXlDb2RlKSkge1xuICAgICAgICByZXR1cm4gJHJldHVybigpO1xuICAgICAgfVxuXG4gICAgICBxdWVyeSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgIHByb3ZpZGVyID0gdGhpcy5vcHRpb25zLnByb3ZpZGVyO1xuICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlYXJjaCh7IHF1ZXJ5OiBxdWVyeSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXG4gICAgICAgIHJlc3VsdHMgPSAkYXdhaXRfMTtcbiAgICAgICAgdGhpcy5yZXN1bHRMaXN0LnJlbmRlcihyZXN1bHRzKTtcbiAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcbiAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG4gIH0sXG4gIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdChxdWVyeSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG4gICAgICB2YXIgcHJvdmlkZXIsIHJlc3VsdHM7XG4gICAgICBwcm92aWRlciA9IHRoaXMub3B0aW9ucy5wcm92aWRlcjtcbiAgICAgIHJldHVybiBwcm92aWRlci5zZWFyY2gocXVlcnkpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG5cbiAgICAgICAgcmVzdWx0cyA9ICRhd2FpdF8yO1xuXG4gICAgICAgIGlmIChyZXN1bHRzICYmIHJlc3VsdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuc2hvd1Jlc3VsdChyZXN1bHRzWzBdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJHJldHVybigpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgfSxcbiAgc2hvd1Jlc3VsdDogZnVuY3Rpb24gc2hvd1Jlc3VsdChyZXN1bHQpIHtcbiAgICB2YXIgbWFya2VycyA9IE9iamVjdC5rZXlzKHRoaXMubWFya2Vycy5fbGF5ZXJzKTtcbiAgICBpZiAobWFya2Vycy5sZW5ndGggPj0gdGhpcy5vcHRpb25zLm1heE1hcmtlcnMpIHtcbiAgICAgIHRoaXMubWFya2Vycy5yZW1vdmVMYXllcihtYXJrZXJzWzBdKTtcbiAgICB9XG5cbiAgICB2YXIgbWFya2VyID0gdGhpcy5hZGRNYXJrZXIocmVzdWx0KTtcbiAgICB0aGlzLmNlbnRlck1hcChyZXN1bHQpO1xuXG4gICAgdGhpcy5tYXAuZmlyZUV2ZW50KCdnZW9zZWFyY2gvc2hvd2xvY2F0aW9uJywge1xuICAgICAgbG9jYXRpb246IHJlc3VsdCxcbiAgICAgIG1hcmtlcjogbWFya2VyXG4gICAgfSk7XG4gIH0sXG4gIGFkZE1hcmtlcjogZnVuY3Rpb24gYWRkTWFya2VyKHJlc3VsdCkge1xuICAgIHZhciBfb3B0aW9uczMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIG9wdGlvbnMgPSBfb3B0aW9uczMubWFya2VyLFxuICAgICAgICBzaG93UG9wdXAgPSBfb3B0aW9uczMuc2hvd1BvcHVwO1xuXG4gICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihbcmVzdWx0LnksIHJlc3VsdC54XSwgb3B0aW9ucyk7XG4gICAgbWFya2VyLmJpbmRQb3B1cChyZXN1bHQubGFiZWwpO1xuXG4gICAgdGhpcy5tYXJrZXJzLmFkZExheWVyKG1hcmtlcik7XG5cbiAgICBpZiAoc2hvd1BvcHVwKSB7XG4gICAgICBtYXJrZXIub3BlblBvcHVwKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hcmtlcjtcbiAgfSxcbiAgY2VudGVyTWFwOiBmdW5jdGlvbiBjZW50ZXJNYXAocmVzdWx0KSB7XG4gICAgdmFyIF9vcHRpb25zNCA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgcmV0YWluWm9vbUxldmVsID0gX29wdGlvbnM0LnJldGFpblpvb21MZXZlbCxcbiAgICAgICAgYW5pbWF0ZVpvb20gPSBfb3B0aW9uczQuYW5pbWF0ZVpvb207XG5cblxuICAgIHZhciByZXN1bHRCb3VuZHMgPSBuZXcgTC5MYXRMbmdCb3VuZHMocmVzdWx0LmJvdW5kcyk7XG4gICAgdmFyIGJvdW5kcyA9IHJlc3VsdEJvdW5kcy5pc1ZhbGlkKCkgPyByZXN1bHRCb3VuZHMgOiB0aGlzLm1hcmtlcnMuZ2V0Qm91bmRzKCk7XG5cbiAgICBpZiAoIXJldGFpblpvb21MZXZlbCAmJiByZXN1bHRCb3VuZHMuaXNWYWxpZCgpKSB7XG4gICAgICB0aGlzLm1hcC5maXRCb3VuZHMoYm91bmRzLCB7IGFuaW1hdGU6IGFuaW1hdGVab29tIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1hcC5zZXRWaWV3KGJvdW5kcy5nZXRDZW50ZXIoKSwgdGhpcy5nZXRab29tKCksIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG4gICAgfVxuICB9LFxuICBnZXRab29tOiBmdW5jdGlvbiBnZXRab29tKCkge1xuICAgIHZhciBfb3B0aW9uczUgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHJldGFpblpvb21MZXZlbCA9IF9vcHRpb25zNS5yZXRhaW5ab29tTGV2ZWwsXG4gICAgICAgIHpvb21MZXZlbCA9IF9vcHRpb25zNS56b29tTGV2ZWw7XG5cbiAgICByZXR1cm4gcmV0YWluWm9vbUxldmVsID8gdGhpcy5tYXAuZ2V0Wm9vbSgpIDogem9vbUxldmVsO1xuICB9XG59O1xuXG5mdW5jdGlvbiBMZWFmbGV0Q29udHJvbCgpIHtcbiAgaWYgKCFMIHx8ICFMLkNvbnRyb2wgfHwgIUwuQ29udHJvbC5leHRlbmQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0xlYWZsZXQgbXVzdCBiZSBsb2FkZWQgYmVmb3JlIGluc3RhbnRpYXRpbmcgdGhlIEdlb1NlYXJjaCBjb250cm9sJyk7XG4gIH1cblxuICB2YXIgTENvbnRyb2wgPSBMLkNvbnRyb2wuZXh0ZW5kKENvbnRyb2wpO1xuXG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBvcHRpb25zID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgb3B0aW9uc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KExDb250cm9sLCBbbnVsbF0uY29uY2F0KG9wdGlvbnMpKSkoKTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9sZWFmbGV0Q29udHJvbC5qcyIsIlwidXNlIHN0cmljdFwiO1xuLypcbiAqICRhc3luY2JpbmQgaGFzIG11bHRpcGxlIHVzZXMsIGRlcGVuZGluZyBvbiB0aGUgcGFyYW1ldGVyIGxpc3QuIEl0IGlzIGluIEZ1bmN0aW9uLnByb3RvdHlwZSwgc28gJ3RoaXMnIGlzIGFsd2F5cyBhIGZ1bmN0aW9uXG4gKlxuICogMSkgSWYgY2FsbGVkIHdpdGggYSBzaW5nbGUgYXJndW1lbnQgKHRoaXMpLCBpdCBpcyB1c2VkIHdoZW4gZGVmaW5pbmcgYW4gYXN5bmMgZnVuY3Rpb24gdG8gZW5zdXJlIHdoZW5cbiAqICAgICAgaXQgaXMgaW52b2tlZCwgdGhlIGNvcnJlY3QgJ3RoaXMnIGlzIHByZXNlbnQsIGp1c3QgbGlrZSBcImJpbmRcIi4gRm9yIGxlZ2FjeSByZWFzb25zLCAndGhpcycgaXMgZ2l2ZW5cbiAqICAgICAgYSBtZW1lYmVyICd0aGVuJyB3aGljaCByZWZlcnMgdG8gaXRzZWxmLlxuICogMikgSWYgY2FsbGVkIHdpdGggYSBzZWNvbmQgcGFyYW1ldGVyIChcImNhdGNoZXJcIikgYW5kIGNhdGNoZXIhPT10cnVlIGl0IGlzIGJlaW5nIHVzZWQgdG8gaW52b2tlIGFuIGFzeW5jXG4gKiAgICAgIGZ1bmN0aW9uIHdoZXJlIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIHRoZSBlcnJvciBjYWxsYmFjayAoZm9yIHN5bmMgZXhjZXB0aW9ucyBhbmQgdG8gYmUgcGFzc2VkIHRvXG4gKiAgICAgIG5lc3RlZCBhc3luYyBjYWxscylcbiAqIDMpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09dHJ1ZSwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG4gKiAgICAgIGluIGFuICdQcm9taXNlJyBhcyB3ZWxsIGJvdW5kIHRvICd0aGlzJy5cbiAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IFByb21pc2UodGhpcyknLCB3aGVyZSAndGhpcycgaXMgdGhlIGZ1bmN0aW9uIGJlaW5nIGJvdW5kL3dyYXBwZWRcbiAqIDQpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09MCwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG4gKiAgICAgIGluIGEgJ0xhenlUaGVuYWJsZScsIHdoaWNoIGV4ZWN1dGVzIGxhemlseSBhbmQgY2FuIHJlc29sdmUgc3luY2hyb25vdXNseS5cbiAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IExhenlUaGVuYWJsZSh0aGlzKScgKGlmIHN1Y2ggYSB0eXBlIHdlcmUgZXhwb3NlZCksIHdoZXJlICd0aGlzJyBpc1xuICogICAgICB0aGUgZnVuY3Rpb24gYmVpbmcgYm91bmQvd3JhcHBlZFxuICovXG5cbmZ1bmN0aW9uIHByb2Nlc3NJbmNsdWRlcyhpbmNsdWRlcyxpbnB1dCkge1xuICAgIHZhciBzcmMgPSBpbnB1dC50b1N0cmluZygpIDtcbiAgICB2YXIgdCA9IFwicmV0dXJuIFwiK3NyYyA7XG4gICAgdmFyIGFyZ3MgPSBzcmMubWF0Y2goLy4qXFwoKFteKV0qKVxcKS8pWzFdIDtcbiAgICB2YXIgcmUgPSAvWydcIl0hISEoW14nXCJdKilbJ1wiXS9nIDtcbiAgICB2YXIgbSA9IFtdIDtcbiAgICB3aGlsZSAoMSkge1xuICAgICAgICB2YXIgbXggPSByZS5leGVjKHQpIDtcbiAgICAgICAgaWYgKG14KVxuICAgICAgICAgICAgbS5wdXNoKG14KSA7XG4gICAgICAgIGVsc2UgYnJlYWsgO1xuICAgIH1cbiAgICBtLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe1xuICAgICAgICB0ID0gdC5zbGljZSgwLGUuaW5kZXgpK2luY2x1ZGVzW2VbMV1dK3Quc3Vic3RyKGUuaW5kZXgrZVswXS5sZW5ndGgpIDtcbiAgICB9KSA7XG4gICAgdCA9IHQucmVwbGFjZSgvXFwvXFwqW14qXSpcXCpcXC8vZywnICcpLnJlcGxhY2UoL1xccysvZywnICcpIDtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKGFyZ3MsdCkoKSA7XG59XG5cbnZhciAkYXN5bmNiaW5kID0gcHJvY2Vzc0luY2x1ZGVzKHtcbiAgICB6b3VzYW46cmVxdWlyZSgnLi96b3VzYW4nKS50b1N0cmluZygpLFxuICAgIHRoZW5hYmxlOnJlcXVpcmUoJy4vdGhlbmFibGVGYWN0b3J5JykudG9TdHJpbmcoKVxufSxcbmZ1bmN0aW9uICRhc3luY2JpbmQoc2VsZixjYXRjaGVyKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jYmluZCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLFwiJGFzeW5jYmluZFwiLHt2YWx1ZTokYXN5bmNiaW5kLGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6dHJ1ZX0pIDtcbiAgICB9XG5cbiAgICBpZiAoISRhc3luY2JpbmQudHJhbXBvbGluZSkge1xuICAgICAgJGFzeW5jYmluZC50cmFtcG9saW5lID0gZnVuY3Rpb24gdHJhbXBvbGluZSh0LHgscyxlLHUpe1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gYihxKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHEudGhlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHEudGhlbihiLCBlKSA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdT91bmRlZmluZWQ6cTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEucG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHEucG9wKCkgPyB4LmNhbGwodCkgOiBxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBzO1xuICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBxLmNhbGwodClcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAocikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUocik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICghJGFzeW5jYmluZC5MYXp5VGhlbmFibGUpIHtcbiAgICAgICAgJGFzeW5jYmluZC5MYXp5VGhlbmFibGUgPSAnISEhdGhlbmFibGUnKCk7XG4gICAgICAgICRhc3luY2JpbmQuRWFnZXJUaGVuYWJsZSA9ICRhc3luY2JpbmQuVGhlbmFibGUgPSAoJGFzeW5jYmluZC5FYWdlclRoZW5hYmxlRmFjdG9yeSA9ICchISF6b3VzYW4nKSgpO1xuICAgIH1cblxuICAgIHZhciByZXNvbHZlciA9IHRoaXM7XG4gICAgc3dpdGNoIChjYXRjaGVyKSB7XG4gICAgY2FzZSB0cnVlOlxuICAgICAgICByZXR1cm4gbmV3ICgkYXN5bmNiaW5kLlRoZW5hYmxlKShib3VuZFRoZW4pO1xuICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIG5ldyAoJGFzeW5jYmluZC5MYXp5VGhlbmFibGUpKGJvdW5kVGhlbik7XG4gICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICAgIC8qIEZvciBydW50aW1lIGNvbXBhdGliaWxpdHkgd2l0aCBOb2RlbnQgdjIueCwgcHJvdmlkZSBhIHRoZW5hYmxlICovXG4gICAgICAgIGJvdW5kVGhlbi50aGVuID0gYm91bmRUaGVuIDtcbiAgICAgICAgcmV0dXJuIGJvdW5kVGhlbiA7XG4gICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlci5hcHBseShzZWxmLGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9IGNhdGNoKGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhdGNoZXIoZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJvdW5kVGhlbigpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVyLmFwcGx5KHNlbGYsYXJndW1lbnRzKTtcbiAgICB9XG59KSA7XG5cbmZ1bmN0aW9uICRhc3luY3NwYXduKHByb21pc2VQcm92aWRlcixzZWxmKSB7XG4gICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jc3Bhd24pIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSxcIiRhc3luY3NwYXduXCIse3ZhbHVlOiRhc3luY3NwYXduLGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6dHJ1ZX0pIDtcbiAgICB9XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEZ1bmN0aW9uKSkgcmV0dXJuIDtcblxuICAgIHZhciBnZW5GID0gdGhpcyA7XG4gICAgcmV0dXJuIG5ldyBwcm9taXNlUHJvdmlkZXIoZnVuY3Rpb24gZW5vdWdoKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgZ2VuID0gZ2VuRi5jYWxsKHNlbGYsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAoZm4sYXJnKSB7XG4gICAgICAgICAgICB2YXIgbmV4dDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbmV4dCA9IGZuLmNhbGwoZ2VuLGFyZyk7XG4gICAgICAgICAgICAgICAgaWYobmV4dC5kb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlICE9PSByZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZSAmJiBuZXh0LnZhbHVlPT09bmV4dC52YWx1ZS50aGVuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0LnZhbHVlKHJlc29sdmUscmVqZWN0KSA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlICYmIHJlc29sdmUobmV4dC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gbnVsbCA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlLnRoZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dC52YWx1ZS50aGVuKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLm5leHQsdik7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLnRocm93LGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi5uZXh0LG5leHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgIHJlamVjdCAmJiByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgcmVqZWN0ID0gbnVsbCA7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0ZXAoZ2VuLm5leHQpO1xuICAgIH0pO1xufVxuXG4vLyBJbml0aWFsaXplIGFzeW5jIGJpbmRpbmdzXG4kYXN5bmNiaW5kKCkgO1xuJGFzeW5jc3Bhd24oKSA7XG5cbi8vIEV4cG9ydCBhc3luYyBiaW5kaW5nc1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgJGFzeW5jYmluZDokYXN5bmNiaW5kLFxuICAgICRhc3luY3NwYXduOiRhc3luY3NwYXduXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9ub2RlbnQtcnVudGltZS9ydW50aW1lLmpzIiwiLyogVGhpcyBjb2RlIGlzIGJhc2VkIG9uOlxuem91c2FuIC0gQSBMaWdodG5pbmcgRmFzdCwgWWV0IFZlcnkgU21hbGwgUHJvbWlzZSBBKyBDb21wbGlhbnQgSW1wbGVtZW50YXRpb25cbmh0dHBzOi8vZ2l0aHViLmNvbS9ibHVlamF2YS96b3VzYW5cbkF1dGhvcjogR2xlbm4gQ3Jvd25vdmVyIDxnbGVubkBibHVlamF2YS5jb20+IChodHRwOi8vd3d3LmJsdWVqYXZhLmNvbSlcblZlcnNpb24gMi4zLjNcbkxpY2Vuc2U6IE1JVCAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRpY2spe1xuICAgIHRpY2sgPSB0aWNrIHx8ICh0eXBlb2YgcHJvY2Vzcz09PVwib2JqZWN0XCIgJiYgcHJvY2Vzcy5uZXh0VGljaykgfHwgKHR5cGVvZiBzZXRJbW1lZGlhdGU9PT1cImZ1bmN0aW9uXCIgJiYgc2V0SW1tZWRpYXRlKSB8fCBmdW5jdGlvbihmKXtzZXRUaW1lb3V0KGYsMCl9O1xuICAgIHZhciBzb29uID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZxID0gW10sIGZxU3RhcnQgPSAwLCBidWZmZXJTaXplID0gMTAyNDtcbiAgICAgICAgZnVuY3Rpb24gY2FsbFF1ZXVlKCkge1xuICAgICAgICAgICAgd2hpbGUgKGZxLmxlbmd0aCAtIGZxU3RhcnQpIHtcbiAgICAgICAgICAgICAgICB0cnkgeyBmcVtmcVN0YXJ0XSgpIH0gY2F0Y2goZXgpIHsgLyogY29uc29sZS5lcnJvcihleCkgKi8gfVxuICAgICAgICAgICAgICAgIGZxW2ZxU3RhcnQrK10gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKGZxU3RhcnQgPT09IGJ1ZmZlclNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgZnEuc3BsaWNlKDAsIGJ1ZmZlclNpemUpO1xuICAgICAgICAgICAgICAgICAgICBmcVN0YXJ0ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICBmcS5wdXNoKGZuKTtcbiAgICAgICAgICAgIGlmIChmcS5sZW5ndGggLSBmcVN0YXJ0ID09PSAxKVxuICAgICAgICAgICAgICAgIHRpY2soY2FsbFF1ZXVlKTtcbiAgICAgICAgfTtcbiAgICB9KSgpO1xuXG4gICAgZnVuY3Rpb24gWm91c2FuKGZ1bmMpIHtcbiAgICAgICAgaWYgKGZ1bmMpIHtcbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgICAgICBmdW5jKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgICAgICAgICBtZS5yZXNvbHZlKGFyZyk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgICAgICAgbWUucmVqZWN0KGFyZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIFpvdXNhbi5wcm90b3R5cGUgPSB7XG4gICAgICAgIHJlc29sdmU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJBdHRlbXB0IHRvIHJlc29sdmUgcHJvbWlzZSB3aXRoIHNlbGZcIikpO1xuICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aGVuID0gdmFsdWUudGhlbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVuY3Rpb24gKHJhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJlc29sdmUocmEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5yZWplY3QocnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRlVMRklMTEVEO1xuICAgICAgICAgICAgdGhpcy52ID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAobWUuYylcbiAgICAgICAgICAgICAgICBzb29uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIGwgPSBtZS5jLmxlbmd0aDtuIDwgbDsgbisrKVxuICAgICAgICAgICAgICAgICAgICAgICAgU1RBVEVfRlVMRklMTEVEKG1lLmNbbl0sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9SRUpFQ1RFRDtcbiAgICAgICAgICAgIHRoaXMudiA9IHJlYXNvbjtcbiAgICAgICAgICAgIHZhciBjbGllbnRzID0gdGhpcy5jO1xuICAgICAgICAgICAgaWYgKGNsaWVudHMpXG4gICAgICAgICAgICAgICAgc29vbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCBsID0gY2xpZW50cy5sZW5ndGg7biA8IGw7IG4rKylcbiAgICAgICAgICAgICAgICAgICAgICAgIFNUQVRFX1JFSkVDVEVEKGNsaWVudHNbbl0sIHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHRoZW46IGZ1bmN0aW9uIChvbkYsIG9uUikge1xuICAgICAgICAgICAgdmFyIHAgPSBuZXcgWm91c2FuKCk7XG4gICAgICAgICAgICB2YXIgY2xpZW50ID0ge1xuICAgICAgICAgICAgICAgIHk6IG9uRixcbiAgICAgICAgICAgICAgICBuOiBvblIsXG4gICAgICAgICAgICAgICAgcDogcFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmMucHVzaChjbGllbnQpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jID0gW2NsaWVudF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcy5zdGF0ZSwgYSA9IHRoaXMudjtcbiAgICAgICAgICAgICAgICBzb29uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcyhjbGllbnQsIGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gU1RBVEVfRlVMRklMTEVEKGMsIGFyZykge1xuICAgICAgICBpZiAodHlwZW9mIGMueSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciB5cmV0ID0gYy55LmNhbGwodW5kZWZpbmVkLCBhcmcpO1xuICAgICAgICAgICAgICAgIGMucC5yZXNvbHZlKHlyZXQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgYy5wLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgIGMucC5yZXNvbHZlKGFyZyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gU1RBVEVfUkVKRUNURUQoYywgcmVhc29uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYy5uID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHlyZXQgPSBjLm4uY2FsbCh1bmRlZmluZWQsIHJlYXNvbik7XG4gICAgICAgICAgICAgICAgYy5wLnJlc29sdmUoeXJldCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjLnAucmVqZWN0KGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgYy5wLnJlamVjdChyZWFzb24pO1xuICAgIH1cblxuICAgIFpvdXNhbi5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICBpZiAodmFsICYmICh2YWwgaW5zdGFuY2VvZiBab3VzYW4pKVxuICAgICAgICAgICAgcmV0dXJuIHZhbCA7XG4gICAgICAgIHZhciB6ID0gbmV3IFpvdXNhbigpO1xuICAgICAgICB6LnJlc29sdmUodmFsKTtcbiAgICAgICAgcmV0dXJuIHo7XG4gICAgfTtcbiAgICBab3VzYW4ucmVqZWN0ID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoZXJyICYmIChlcnIgaW5zdGFuY2VvZiBab3VzYW4pKVxuICAgICAgICAgICAgcmV0dXJuIGVyciA7XG4gICAgICAgIHZhciB6ID0gbmV3IFpvdXNhbigpO1xuICAgICAgICB6LnJlamVjdChlcnIpO1xuICAgICAgICByZXR1cm4gejtcbiAgICB9O1xuXG4gICAgWm91c2FuLnZlcnNpb24gPSBcIjIuMy4zLW5vZGVudFwiIDtcbiAgICByZXR1cm4gWm91c2FuIDtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L25vZGVudC1ydW50aW1lL3pvdXNhbi5qcyIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ2YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcbn07XG5leHBvcnRzLmNsZWFyVGltZW91dCA9XG5leHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7XG4gIGlmICh0aW1lb3V0KSB7XG4gICAgdGltZW91dC5jbG9zZSgpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG4gIHRoaXMuX2lkID0gaWQ7XG4gIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xufVxuVGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbigpIHt9O1xuVGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdywgdGhpcy5faWQpO1xufTtcblxuLy8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5leHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcbiAgaWYgKG1zZWNzID49IDApIHtcbiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcbiAgICB9LCBtc2Vjcyk7XG4gIH1cbn07XG5cbi8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3RcbnJlcXVpcmUoXCJzZXRpbW1lZGlhdGVcIik7XG5leHBvcnRzLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L21haW4uanMiLCIoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm9cbiAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblxuICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG4gICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcbiAgICAgIH1cbiAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuICAgICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG4gICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcbiAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuKHRhc2spIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcbiAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG4gICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uXG4gICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcbiAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG4gICAgICAgICAgICAvLyBcInRvbyBtdWNoIHJlY3Vyc2lvblwiIGVycm9yLlxuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsgcnVuSWZQcmVzZW50KGhhbmRsZSk7IH0pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG4gICAgICAgIC8vIHdoZXJlIGBnbG9iYWwucG9zdE1lc3NhZ2VgIG1lYW5zIHNvbWV0aGluZyBjb21wbGV0ZWx5IGRpZmZlcmVudCBhbmQgY2FuJ3QgYmUgdXNlZCBmb3IgdGhpcyBwdXJwb3NlLlxuICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG9sZE9uTWVzc2FnZSA9IGdsb2JhbC5vbm1lc3NhZ2U7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShcIlwiLCBcIipcIik7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG4gICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG5cbiAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSBcInNldEltbWVkaWF0ZSRcIiArIE1hdGgucmFuZG9tKCkgKyBcIiRcIjtcbiAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cbiAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS5cbiAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG4gICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cbiAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG4gICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuICAgICAgICAvLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45XG4gICAgICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGNhblVzZVBvc3RNZXNzYWdlKCkpIHtcbiAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcbiAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcbiAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcbiAgICAgICAgLy8gRm9yIElFIDbigJM4XG4gICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG4gICAgfVxuXG4gICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuICAgIGF0dGFjaFRvLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG59KHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiID8gdHlwZW9mIGdsb2JhbCA9PT0gXCJ1bmRlZmluZWRcIiA/IHRoaXMgOiBnbG9iYWwgOiBzZWxmKSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9+L3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanMiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIGlzVGhlbmFibGUob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogJiYgKG9iaiBpbnN0YW5jZW9mIE9iamVjdCkgJiYgdHlwZW9mIG9iai50aGVuPT09XCJmdW5jdGlvblwiO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc29sdXRpb24ocCxyLGhvdykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLyogMi4yLjcuMSAqL1xuICAgICAgICAgICAgdmFyIHggPSBob3cgPyBob3cocik6ciA7XG5cbiAgICAgICAgICAgIGlmIChwPT09eCkgLyogMi4zLjEgKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gcC5yZWplY3QobmV3IFR5cGVFcnJvcihcIlByb21pc2UgcmVzb2x1dGlvbiBsb29wXCIpKSA7XG5cbiAgICAgICAgICAgIGlmIChpc1RoZW5hYmxlKHgpKSB7XG4gICAgICAgICAgICAgICAgLyogMi4zLjMgKi9cbiAgICAgICAgICAgICAgICB4LnRoZW4oZnVuY3Rpb24oeSl7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb24ocCx5KTtcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgICAgICAgICBwLnJlamVjdChlKVxuICAgICAgICAgICAgICAgIH0pIDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcC5yZXNvbHZlKHgpIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIC8qIDIuMi43LjIgKi9cbiAgICAgICAgICAgIHAucmVqZWN0KGV4KSA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDaGFpbmVkKCkge307XG4gICAgQ2hhaW5lZC5wcm90b3R5cGUgPSB7XG4gICAgICAgIHJlc29sdmU6X3VuY2hhaW5lZCxcbiAgICAgICAgcmVqZWN0Ol91bmNoYWluZWQsXG4gICAgICAgIHRoZW46dGhlbkNoYWluXG4gICAgfTtcbiAgICBmdW5jdGlvbiBfdW5jaGFpbmVkKHYpe31cbiAgICBmdW5jdGlvbiB0aGVuQ2hhaW4ocmVzLHJlail7XG4gICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlcztcbiAgICAgICAgdGhpcy5yZWplY3QgPSByZWo7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHRoZW4ocmVzLHJlail7XG4gICAgICAgIHZhciBjaGFpbiA9IG5ldyBDaGFpbmVkKCkgO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZXIoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNUaGVuYWJsZSh2YWx1ZSkgPyB2YWx1ZS50aGVuKHJlcyxyZWopIDogcmVzb2x1dGlvbihjaGFpbix2YWx1ZSxyZXMpO1xuICAgICAgICAgICAgfSxmdW5jdGlvbihleCkge1xuICAgICAgICAgICAgICAgIHJlc29sdXRpb24oY2hhaW4sZXgscmVqKSA7XG4gICAgICAgICAgICB9KSA7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uKGNoYWluLGV4LHJlaik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYWluIDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBUaGVuYWJsZShyZXNvbHZlcikge1xuICAgICAgICB0aGlzLl9yZXNvbHZlciA9IHJlc29sdmVyIDtcbiAgICAgICAgdGhpcy50aGVuID0gdGhlbiA7XG4gICAgfTtcblxuICAgIFRoZW5hYmxlLnJlc29sdmUgPSBmdW5jdGlvbih2KXtcbiAgICAgICAgcmV0dXJuIFRoZW5hYmxlLmlzVGhlbmFibGUodikgPyB2IDoge3RoZW46ZnVuY3Rpb24ocmVzb2x2ZSl7cmV0dXJuIHJlc29sdmUodil9fTtcbiAgICB9O1xuXG4gICAgVGhlbmFibGUuaXNUaGVuYWJsZSA9IGlzVGhlbmFibGUgO1xuXG4gICAgcmV0dXJuIFRoZW5hYmxlIDtcbn0gO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9ub2RlbnQtcnVudGltZS90aGVuYWJsZUZhY3RvcnkuanMiLCIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE5BTiA9IDAgLyAwO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG52YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblxuLyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cbnZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXG4vKipcbiAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAyLjQuMFxuICogQGNhdGVnb3J5IERhdGVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICogfSwgXy5ub3coKSk7XG4gKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuICovXG52YXIgbm93ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiByb290LkRhdGUubm93KCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG4gKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG4gKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cbiAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZVxuICogbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZFxuICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudFxuICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2BcbiAqIGludm9jYXRpb24uXG4gKlxuICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpc1xuICogaW52b2tlZCBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cbiAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAqXG4gKiBJZiBgd2FpdGAgaXMgYDBgIGFuZCBgbGVhZGluZ2AgaXMgYGZhbHNlYCwgYGZ1bmNgIGludm9jYXRpb24gaXMgZGVmZXJyZWRcbiAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cbiAqXG4gKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9kZWJvdW5jaW5nLXRocm90dGxpbmctZXhwbGFpbmVkLWV4YW1wbGVzLylcbiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XVxuICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG4gKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuICpcbiAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuICogICAnbGVhZGluZyc6IHRydWUsXG4gKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gKiB9KSk7XG4gKlxuICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cbiAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuICpcbiAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgZGVib3VuY2VkIGludm9jYXRpb24uXG4gKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgbGFzdEFyZ3MsXG4gICAgICBsYXN0VGhpcyxcbiAgICAgIG1heFdhaXQsXG4gICAgICByZXN1bHQsXG4gICAgICB0aW1lcklkLFxuICAgICAgbGFzdENhbGxUaW1lLFxuICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuICAgICAgbGVhZGluZyA9IGZhbHNlLFxuICAgICAgbWF4aW5nID0gZmFsc2UsXG4gICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcbiAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcbiAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcbiAgICB2YXIgYXJncyA9IGxhc3RBcmdzLFxuICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG4gICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgLy8gU3RhcnQgdGhlIHRpbWVyIGZvciB0aGUgdHJhaWxpbmcgZWRnZS5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuICAgIHJldHVybiBsZWFkaW5nID8gaW52b2tlRnVuYyh0aW1lKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbWFpbmluZ1dhaXQodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG4gICAgICAgIHJlc3VsdCA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcblxuICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cbiAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG4gICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuICAgIHJldHVybiAobGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgKHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQpIHx8XG4gICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCk7XG4gICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICB9XG4gICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG4gICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cbiAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cbiAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcbiAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuICAgIH1cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgIH1cbiAgICBsYXN0SW52b2tlVGltZSA9IDA7XG4gICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICByZXR1cm4gdGltZXJJZCA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogdHJhaWxpbmdFZGdlKG5vdygpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpLFxuICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXG4gICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG4gICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG5cbiAgICBpZiAoaXNJbnZva2luZykge1xuICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXhpbmcpIHtcbiAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcbiAgcmV0dXJuIGRlYm91bmNlZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9OdW1iZXIoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcbiAqIC8vID0+IEluZmluaXR5XG4gKlxuICogXy50b051bWJlcignMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIE5BTjtcbiAgfVxuICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICB9XG4gIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcbiAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG4gICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG4gICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL34vbG9kYXNoLmRlYm91bmNlL2luZGV4LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX25vZGVudFJ1bnRpbWUgPSByZXF1aXJlKCdub2RlbnQtcnVudGltZScpO1xuXG52YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuL2RvbVV0aWxzJyk7XG5cbnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFNlYXJjaEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFNlYXJjaEVsZW1lbnQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgX3JlZiRoYW5kbGVTdWJtaXQgPSBfcmVmLmhhbmRsZVN1Ym1pdCxcbiAgICAgICAgaGFuZGxlU3VibWl0ID0gX3JlZiRoYW5kbGVTdWJtaXQgPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uICgpIHt9IDogX3JlZiRoYW5kbGVTdWJtaXQsXG4gICAgICAgIF9yZWYkc2VhcmNoTGFiZWwgPSBfcmVmLnNlYXJjaExhYmVsLFxuICAgICAgICBzZWFyY2hMYWJlbCA9IF9yZWYkc2VhcmNoTGFiZWwgPT09IHVuZGVmaW5lZCA/ICdzZWFyY2gnIDogX3JlZiRzZWFyY2hMYWJlbCxcbiAgICAgICAgX3JlZiRjbGFzc05hbWVzID0gX3JlZi5jbGFzc05hbWVzLFxuICAgICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZWFyY2hFbGVtZW50KTtcblxuICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBbJ2dlb3NlYXJjaCcsIGNsYXNzTmFtZXMuY29udGFpbmVyXS5qb2luKCcgJykpO1xuICAgIHZhciBmb3JtID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZm9ybScsIFsnJywgY2xhc3NOYW1lcy5mb3JtXS5qb2luKCcgJyksIGNvbnRhaW5lcik7XG4gICAgdmFyIGlucHV0ID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnaW5wdXQnLCBbJ2dsYXNzJywgY2xhc3NOYW1lcy5pbnB1dF0uam9pbignICcpLCBmb3JtKTtcblxuICAgIGlucHV0LnR5cGUgPSAndGV4dCc7XG4gICAgaW5wdXQucGxhY2Vob2xkZXIgPSBzZWFyY2hMYWJlbDtcblxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uSW5wdXQoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uS2V5VXAoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uS2V5UHJlc3MoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uRm9jdXMoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25CbHVyKGUpO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIHRoaXMuZWxlbWVudHMgPSB7IGNvbnRhaW5lcjogY29udGFpbmVyLCBmb3JtOiBmb3JtLCBpbnB1dDogaW5wdXQgfTtcbiAgICB0aGlzLmhhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhTZWFyY2hFbGVtZW50LCBbe1xuICAgIGtleTogJ29uRm9jdXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkZvY3VzKCkge1xuICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKHRoaXMuZWxlbWVudHMuZm9ybSwgJ2FjdGl2ZScpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uQmx1cicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQmx1cigpIHtcbiAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKSh0aGlzLmVsZW1lbnRzLmZvcm0sICdhY3RpdmUnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvblN1Ym1pdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uU3VibWl0KGV2ZW50KSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgICB2YXIgX2VsZW1lbnRzLCBpbnB1dCwgY29udGFpbmVyO1xuXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIF9lbGVtZW50cyA9IHRoaXMuZWxlbWVudHMsIGlucHV0ID0gX2VsZW1lbnRzLmlucHV0LCBjb250YWluZXIgPSBfZWxlbWVudHMuY29udGFpbmVyO1xuXG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuICAgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZVN1Ym1pdCh7IHF1ZXJ5OiBpbnB1dC52YWx1ZSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuICAgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG4gICAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcbiAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uSW5wdXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbklucHV0KCkge1xuICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXG5cbiAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuICAgICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25LZXlVcCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5VXAoZXZlbnQpIHtcbiAgICAgIHZhciBfZWxlbWVudHMyID0gdGhpcy5lbGVtZW50cyxcbiAgICAgICAgICBjb250YWluZXIgPSBfZWxlbWVudHMyLmNvbnRhaW5lcixcbiAgICAgICAgICBpbnB1dCA9IF9lbGVtZW50czIuaW5wdXQ7XG5cblxuICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IF9jb25zdGFudHMuRVNDQVBFX0tFWSkge1xuICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cbiAgICAgICAgaW5wdXQudmFsdWUgPSAnJztcblxuICAgICAgICBkb2N1bWVudC5ib2R5LmZvY3VzKCk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYmx1cigpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uS2V5UHJlc3MnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleVByZXNzKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gX2NvbnN0YW50cy5FTlRFUl9LRVkpIHtcbiAgICAgICAgdGhpcy5vblN1Ym1pdChldmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2V0UXVlcnknLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRRdWVyeShxdWVyeSkge1xuICAgICAgdmFyIGlucHV0ID0gdGhpcy5lbGVtZW50cy5pbnB1dDtcblxuICAgICAgaW5wdXQudmFsdWUgPSBxdWVyeTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU2VhcmNoRWxlbWVudDtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gU2VhcmNoRWxlbWVudDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9zZWFyY2hFbGVtZW50LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xudmFyIGNyZWF0ZUVsZW1lbnQgPSBleHBvcnRzLmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KGVsZW1lbnQpIHtcbiAgdmFyIGNsYXNzTmFtZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnO1xuICB2YXIgcGFyZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsO1xuXG4gIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudCk7XG4gIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZXM7XG5cbiAgaWYgKHBhcmVudCkge1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XG4gIH1cblxuICByZXR1cm4gZWw7XG59O1xuXG52YXIgY3JlYXRlU2NyaXB0RWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlU2NyaXB0RWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZVNjcmlwdEVsZW1lbnQodXJsLCBjYikge1xuICB2YXIgc2NyaXB0ID0gY3JlYXRlRWxlbWVudCgnc2NyaXB0JywgbnVsbCwgZG9jdW1lbnQuYm9keSk7XG4gIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9qYXZhc2NyaXB0Jyk7XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgd2luZG93W2NiXSA9IGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICBzY3JpcHQucmVtb3ZlKCk7XG4gICAgICBkZWxldGUgd2luZG93W2NiXTtcbiAgICAgIHJlc29sdmUoanNvbik7XG4gICAgfTtcblxuICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHVybCk7XG4gIH0pO1xufTtcblxudmFyIGFkZENsYXNzTmFtZSA9IGV4cG9ydHMuYWRkQ2xhc3NOYW1lID0gZnVuY3Rpb24gYWRkQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICBpZiAoZWxlbWVudCAmJiAhZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICB9XG59O1xuXG52YXIgcmVtb3ZlQ2xhc3NOYW1lID0gZXhwb3J0cy5yZW1vdmVDbGFzc05hbWUgPSBmdW5jdGlvbiByZW1vdmVDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgfVxufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9kb21VdGlscy5qcyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xudmFyIEVOVEVSX0tFWSA9IGV4cG9ydHMuRU5URVJfS0VZID0gMTM7XG52YXIgRVNDQVBFX0tFWSA9IGV4cG9ydHMuRVNDQVBFX0tFWSA9IDI3O1xudmFyIEFSUk9XX0RPV05fS0VZID0gZXhwb3J0cy5BUlJPV19ET1dOX0tFWSA9IDQwO1xudmFyIEFSUk9XX1VQX0tFWSA9IGV4cG9ydHMuQVJST1dfVVBfS0VZID0gMzg7XG52YXIgQVJST1dfTEVGVF9LRVkgPSBleHBvcnRzLkFSUk9XX0xFRlRfS0VZID0gMzc7XG52YXIgQVJST1dfUklHSFRfS0VZID0gZXhwb3J0cy5BUlJPV19SSUdIVF9LRVkgPSAzOTtcblxudmFyIFNQRUNJQUxfS0VZUyA9IGV4cG9ydHMuU1BFQ0lBTF9LRVlTID0gW0VOVEVSX0tFWSwgRVNDQVBFX0tFWSwgQVJST1dfRE9XTl9LRVksIEFSUk9XX1VQX0tFWSwgQVJST1dfTEVGVF9LRVksIEFSUk9XX1JJR0hUX0tFWV07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvY29uc3RhbnRzLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX2RvbVV0aWxzID0gcmVxdWlyZSgnLi9kb21VdGlscycpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgY3ggPSBmdW5jdGlvbiBjeCgpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGNsYXNzbmFtZXMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBjbGFzc25hbWVzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIGNsYXNzbmFtZXMuam9pbignICcpLnRyaW0oKTtcbn07XG5cbnZhciBSZXN1bHRMaXN0ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBSZXN1bHRMaXN0KCkge1xuICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgX3JlZiRoYW5kbGVDbGljayA9IF9yZWYuaGFuZGxlQ2xpY2ssXG4gICAgICAgIGhhbmRsZUNsaWNrID0gX3JlZiRoYW5kbGVDbGljayA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZUNsaWNrLFxuICAgICAgICBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG4gICAgICAgIGNsYXNzTmFtZXMgPSBfcmVmJGNsYXNzTmFtZXMgPT09IHVuZGVmaW5lZCA/IHt9IDogX3JlZiRjbGFzc05hbWVzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlc3VsdExpc3QpO1xuXG4gICAgX2luaXRpYWxpc2VQcm9wcy5jYWxsKHRoaXMpO1xuXG4gICAgdGhpcy5wcm9wcyA9IHsgaGFuZGxlQ2xpY2s6IGhhbmRsZUNsaWNrLCBjbGFzc05hbWVzOiBjbGFzc05hbWVzIH07XG4gICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXG4gICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIGN4KCdyZXN1bHRzJywgY2xhc3NOYW1lcy5jb250YWluZXIpKTtcbiAgICB2YXIgcmVzdWx0SXRlbSA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIGN4KGNsYXNzTmFtZXMuaXRlbSkpO1xuXG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrLCB0cnVlKTtcbiAgICB0aGlzLmVsZW1lbnRzID0geyBjb250YWluZXI6IGNvbnRhaW5lciwgcmVzdWx0SXRlbTogcmVzdWx0SXRlbSB9O1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFJlc3VsdExpc3QsIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIHJlc3VsdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdO1xuICAgICAgdmFyIF9lbGVtZW50cyA9IHRoaXMuZWxlbWVudHMsXG4gICAgICAgICAgY29udGFpbmVyID0gX2VsZW1lbnRzLmNvbnRhaW5lcixcbiAgICAgICAgICByZXN1bHRJdGVtID0gX2VsZW1lbnRzLnJlc3VsdEl0ZW07XG5cbiAgICAgIHRoaXMuY2xlYXIoKTtcblxuICAgICAgcmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChyZXN1bHQsIGlkeCkge1xuICAgICAgICB2YXIgY2hpbGQgPSByZXN1bHRJdGVtLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKCdkYXRhLWtleScsIGlkeCk7XG4gICAgICAgIGNoaWxkLmlubmVySFRNTCA9IHJlc3VsdC5sYWJlbDtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZXN1bHRzID0gcmVzdWx0cztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZWxlY3QnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3QoaW5kZXgpIHtcbiAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbmZ1c2luZy1hcnJvd1xuXG4gICAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQsIGlkeCkge1xuICAgICAgICByZXR1cm4gaWR4ID09PSBpbmRleCA/ICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjaGlsZCwgJ2FjdGl2ZScpIDogKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJyk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5zZWxlY3RlZCA9IGluZGV4O1xuICAgICAgcmV0dXJuIHRoaXMucmVzdWx0c1tpbmRleF07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY291bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb3VudCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlc3VsdHMubGVuZ3RoO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NsZWFyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSAtMTtcblxuICAgICAgd2hpbGUgKGNvbnRhaW5lci5sYXN0Q2hpbGQpIHtcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5sYXN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFJlc3VsdExpc3Q7XG59KCk7XG5cbnZhciBfaW5pdGlhbGlzZVByb3BzID0gZnVuY3Rpb24gX2luaXRpYWxpc2VQcm9wcygpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB0aGlzLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgdGFyZ2V0ID0gX3JlZjIudGFyZ2V0O1xuXG4gICAgdmFyIGhhbmRsZUNsaWNrID0gX3RoaXMucHJvcHMuaGFuZGxlQ2xpY2s7XG4gICAgdmFyIGNvbnRhaW5lciA9IF90aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuXG4gICAgaWYgKHRhcmdldC5wYXJlbnROb2RlICE9PSBjb250YWluZXIgfHwgIXRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEta2V5JykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaWR4ID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKTtcbiAgICB2YXIgcmVzdWx0ID0gX3RoaXMucmVzdWx0c1tpZHhdO1xuICAgIGhhbmRsZUNsaWNrKHsgcmVzdWx0OiByZXN1bHQgfSk7XG4gIH07XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBSZXN1bHRMaXN0O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Jlc3VsdExpc3QuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbm9kZW50UnVudGltZSA9IHJlcXVpcmUoJ25vZGVudC1ydW50aW1lJyk7XG5cbnZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuLi9kb21VdGlscycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbCxcbiAgICAgICAgICBqc29ucCA9IF9yZWYuanNvbnA7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXG5cbiAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuICAgICAgICBxdWVyeTogcXVlcnksXG4gICAgICAgIGpzb25wOiBqc29ucFxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9kZXYudmlydHVhbGVhcnRoLm5ldC9SRVNUL3YxL0xvY2F0aW9ucz8nICsgcGFyYW1TdHJpbmc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncGFyc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXG4gICAgICBpZiAoZGF0YS5yZXNvdXJjZVNldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcy5tYXAoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiByLnBvaW50LmNvb3JkaW5hdGVzWzFdLFxuICAgICAgICAgIHk6IHIucG9pbnQuY29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgbGFiZWw6IHIuYWRkcmVzcy5mb3JtYXR0ZWRBZGRyZXNzLFxuICAgICAgICAgIGJvdW5kczogW1tyLmJib3hbMF0sIHIuYmJveFsxXV0sIC8vIHMsIHdcbiAgICAgICAgICBbci5iYm94WzJdLCByLmJib3hbM11dXSxcbiAgICAgICAgICByYXc6IHJcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NlYXJjaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmMykge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwganNvbnAsIHVybCwganNvbjtcbiAgICAgICAgcXVlcnkgPSBfcmVmMy5xdWVyeTtcblxuICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuXG4gICAgICAgIGpzb25wID0gJ0JJTkdfSlNPTlBfQ0JfJyArIERhdGUubm93KCk7XG4gICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCwganNvbnA6IGpzb25wIH0pO1xuXG4gICAgICAgIHJldHVybiAoMCwgX2RvbVV0aWxzLmNyZWF0ZVNjcmlwdEVsZW1lbnQpKHVybCwganNvbnApLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG4gICAgICAgICAganNvbiA9ICRhd2FpdF8xO1xuICAgICAgICAgIHJldHVybiAkcmV0dXJuKHRoaXMucGFyc2UoeyBkYXRhOiBqc29uIH0pKTtcbiAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm92aWRlcjtcbn0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2JpbmdQcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9ub2RlbnRSdW50aW1lID0gcmVxdWlyZSgnbm9kZW50LXJ1bnRpbWUnKTtcblxudmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2dldFBhcmFtU3RyaW5nJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFyYW1TdHJpbmcocGFyYW1zKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pO1xuICAgICAgfSkuam9pbignJicpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NlYXJjaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgICB2YXIgcXVlcnksIHByb3RvY29sLCB1cmwsIHJlcXVlc3QsIGpzb247XG4gICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeTtcblxuICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuICAgICAgICB1cmwgPSB0aGlzLmVuZHBvaW50KHsgcXVlcnk6IHF1ZXJ5LCBwcm90b2NvbDogcHJvdG9jb2wgfSk7XG5cbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcbiAgICAgICAgICByZXF1ZXN0ID0gJGF3YWl0XzE7XG4gICAgICAgICAgcmV0dXJuIHJlcXVlc3QuanNvbigpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG4gICAgICAgICAgICBqc29uID0gJGF3YWl0XzI7XG4gICAgICAgICAgICByZXR1cm4gJHJldHVybih0aGlzLnBhcnNlKHsgZGF0YToganNvbiB9KSk7XG4gICAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9wcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcbiAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblxuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZW5kcG9pbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG4gICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblxuXG4gICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcbiAgICAgICAgZjogJ2pzb24nLFxuICAgICAgICB0ZXh0OiBxdWVyeVxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9nZW9jb2RlLmFyY2dpcy5jb20vYXJjZ2lzL3Jlc3Qvc2VydmljZXMvV29ybGQvR2VvY29kZVNlcnZlci9maW5kPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHJldHVybiBkYXRhLmxvY2F0aW9ucy5tYXAoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiByLmZlYXR1cmUuZ2VvbWV0cnkueCxcbiAgICAgICAgICB5OiByLmZlYXR1cmUuZ2VvbWV0cnkueSxcbiAgICAgICAgICBsYWJlbDogci5uYW1lLFxuICAgICAgICAgIGJvdW5kczogW1tyLmV4dGVudC55bWluLCByLmV4dGVudC54bWluXSwgLy8gcywgd1xuICAgICAgICAgIFtyLmV4dGVudC55bWF4LCByLmV4dGVudC54bWF4XV0sXG4gICAgICAgICAgcmF3OiByXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9lc3JpUHJvdmlkZXIuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVyJyk7XG5cbnZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblxuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cblxuICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG4gICAgICAgIGFkZHJlc3M6IHF1ZXJ5XG4gICAgICB9KSk7XG5cbiAgICAgIC8vIGdvb2dsZSByZXF1aXJlcyBhIHNlY3VyZSBjb25uZWN0aW9uIHdoZW4gdXNpbmcgYXBpIGtleXNcbiAgICAgIHZhciBwcm90byA9IHBhcmFtcyAmJiBwYXJhbXMua2V5ID8gJ2h0dHBzOicgOiBwcm90b2NvbDtcbiAgICAgIHJldHVybiBwcm90byArICcvL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHJldHVybiBkYXRhLnJlc3VsdHMubWFwKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgeDogci5nZW9tZXRyeS5sb2NhdGlvbi5sbmcsXG4gICAgICAgICAgeTogci5nZW9tZXRyeS5sb2NhdGlvbi5sYXQsXG4gICAgICAgICAgbGFiZWw6IHIuZm9ybWF0dGVkX2FkZHJlc3MsXG4gICAgICAgICAgYm91bmRzOiBbW3IuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0LmxhdCwgci5nZW9tZXRyeS52aWV3cG9ydC5zb3V0aHdlc3QubG5nXSwgLy8gcywgd1xuICAgICAgICAgIFtyLmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0LmxuZ11dLFxuICAgICAgICAgIHJhdzogclxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXIuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVyJyk7XG5cbnZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblxuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cblxuICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG4gICAgICAgIGZvcm1hdDogJ2pzb24nLFxuICAgICAgICBxOiBxdWVyeVxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvc2VhcmNoPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHJldHVybiBkYXRhLm1hcChmdW5jdGlvbiAocikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IHIubG9uLFxuICAgICAgICAgIHk6IHIubGF0LFxuICAgICAgICAgIGxhYmVsOiByLmRpc3BsYXlfbmFtZSxcbiAgICAgICAgICBib3VuZHM6IFtbcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzBdKSwgcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzJdKV0sIC8vIHMsIHdcbiAgICAgICAgICBbcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzFdKSwgcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzNdKV1dLFxuICAgICAgICAgIHJhdzogclxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvb3BlblN0cmVldE1hcFByb3ZpZGVyLmpzIiwiaW1wb3J0IHt0b2dnbGVMYXllcn0gZnJvbSBcIi4vdG9nZ2xlTGF5ZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVuZGVyTGF5ZXJMaXN0IChsYXllcnMsIGxheW91dCkge1xuICAgIHZhciBsYXllckdyb3VwcyA9IG1ha2VMYXllckdyb3VwcyhsYXlvdXRbJ2xheWVyLWdyb3Vwcy1vcmRlciddKTtcbiAgICBtYWtlTGF5ZXJFbGVtcyhsYXllckdyb3VwcywgbGF5ZXJzKTtcbn1cblxuZnVuY3Rpb24gbWFrZUxheWVyR3JvdXBzIChsYXlvdXQpIHtcbiAgICByZXR1cm4gZDMuc2VsZWN0KCcubGF5ZXItbGlzdCcpXG4gICAgICAgIC5zZWxlY3RBbGwoJy5sYXllci1ncm91cC13cmFwcGVyJylcbiAgICAgICAgLmRhdGEobGF5b3V0KVxuICAgICAgICAuZW50ZXIoKVxuICAgICAgICAgICAgLmFwcGVuZCgnZGl2JylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cC13cmFwcGVyJylcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIGxheWVyR3JvdXAgPT4gbGF5ZXJHcm91cC5pZClcbiAgICAgICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBsYXllckdyb3VwID0+IGxheWVyR3JvdXAuYWN0aXZlKVxuICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAtYnRuIGJ0bicpXG4gICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJHcm91cC5hY3RpdmUgPSAhbGF5ZXJHcm91cC5hY3RpdmU7XG4gICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5jbGFzc2VkKCdhY3RpdmUnLCAoKSA9PiBsYXllckdyb3VwLmFjdGl2ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KGxheWVyR3JvdXAubmFtZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cCcpO1xufVxuXG5mdW5jdGlvbiBtYWtlTGF5ZXJFbGVtcyAobGF5ZXJHcm91cHMsIGxheWVycykge1xuICAgIGxheWVyR3JvdXBzLnNlbGVjdEFsbCgnLmxheWVyLXNlbGVjdCcpXG4gICAgICAgIC5kYXRhKGxheWVyR3JvdXAgPT4gbGF5ZXJzW2xheWVyR3JvdXAuaWRdKVxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2RpdicpXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1zZWxlY3QnKVxuICAgICAgICAuZWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIHZhciBncm91cE5hbWUgPSB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZDtcbiAgICAgICAgICAgIHZhciBsYXllckRpdiA9IGQzLnNlbGVjdCh0aGlzKTtcblxuICAgICAgICAgICAgbWFrZUNoZWNrYm94KGxheWVyLCBsYXllckRpdik7XG4gICAgICAgICAgICBtYWtlTGFiZWwobGF5ZXIsIGxheWVyRGl2KTtcbiAgICAgICAgICAgIG1ha2VEZXNjcmlwdGlvbihsYXllciwgbGF5ZXJEaXYpO1xuICAgICAgICAgICAgbWFrZUxlZ2VuZChsYXllciwgbGF5ZXJEaXYpO1xuICAgICAgICAgICAgbWFrZU9wYWNpdHlTbGlkZXIobGF5ZXIsIGxheWVyRGl2KTtcbiAgICAgICAgfSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VDaGVja2JveCAobGF5ZXIsIGxheWVyRGl2KSB7XG4gICAgbGF5ZXJEaXYuYXBwZW5kKCdpbnB1dCcpXG4gICAgICAgIC5hdHRyKCd0eXBlJywgJ2NoZWNrYm94JylcbiAgICAgICAgLmF0dHIoJ2lkJywgbGF5ZXIgPT4gbGF5ZXIuaWQpXG4gICAgICAgIC5hdHRyKCdjaGVja2VkJywgKGxheWVyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbGF5ZXIuYWN0aXZlID8gJ2NoZWNrZWQnIDogbnVsbDtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdjbGljaycsIGxheWVyID0+IHtcbiAgICAgICAgICAgIHRvZ2dsZUxheWVyKGxheWVyKTtcbiAgICAgICAgICAgIGxheWVyRGl2LnNlbGVjdEFsbCgnLmxlZ2VuZC13cmFwcGVyLCAub3BhY2l0eS1zbGlkZXItd3JhcHBlcicpXG4gICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGxheWVyLmFjdGl2ZSk7XG4gICAgICAgIH0pO1xufVxuXG5mdW5jdGlvbiBtYWtlTGFiZWwobGF5ZXIsIGxheWVyRGl2KSB7XG4gICAgbGF5ZXJEaXYuYXBwZW5kKCdsYWJlbCcpXG4gICAgICAgIC5hdHRyKCdmb3InLCBsYXllciA9PiBsYXllci5pZClcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWxhYmVsJylcbiAgICAgICAgLmh0bWwobGF5ZXIgPT4gbGF5ZXIubmFtZSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VEZXNjcmlwdGlvbiAobGF5ZXIsIGxheWVyRGl2KSB7XG4gICAgaWYgKGxheWVyLmluZm8gJiYgbGF5ZXIuaW5mbyAhPT0gJycpIHtcbiAgICAgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8tYnRuJylcbiAgICAgICAgICAgIC50ZXh0KCcoPyknKVxuICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKVxuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCcubGF5ZXItaW5mby13cmFwcGVyJylcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8td3JhcHBlcicpXG4gICAgICAgICAgICAudGV4dChsYXllciA9PiAnKCcgKyBsYXllci5pbmZvICsgJyknKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG1ha2VMZWdlbmQgKGxheWVyLCBsYXllckRpdikge1xuICAgIGxheWVyRGl2LmFwcGVuZCgnZGl2JylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZC13cmFwcGVyJylcbiAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGxheWVyLmFjdGl2ZSlcbiAgICAgICAgLmFwcGVuZCgnaW1nJylcbiAgICAgICAgLmF0dHIoJ3NyYycsIGxheWVyLmxlZ2VuZCB8fCAnbWVhbl9uZHZpX2xlZ2VuZC5qcGcnKTtcbn1cblxuZnVuY3Rpb24gbWFrZU9wYWNpdHlTbGlkZXIgKGxheWVyLCBsYXllckRpdikge1xuICAgIHZhciBvcGFjaXR5U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpXG4gICAgICAgIC5kb21haW4oWzAsIDMwMF0pXG4gICAgICAgIC5yYW5nZShbMCwgMV0pXG4gICAgICAgIC5jbGFtcCh0cnVlKTtcblxuICAgIHZhciBvcGFjaXR5U2xpZGVyV3JhcHBlciA9IGxheWVyRGl2LmFwcGVuZCgnZGl2JylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktc2xpZGVyLXdyYXBwZXInKVxuICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJywgbGF5ZXIuYWN0aXZlKTtcblxuICAgIHZhciBvcGFjaXR5U2xpZGVyU3ZnID0gb3BhY2l0eVNsaWRlcldyYXBwZXJcbiAgICAgICAgLmFwcGVuZCgnc3ZnJykuYXBwZW5kKCdnJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktc2xpZGVyJylcbiAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoMjAsIDIwKScpO1xuXG4gICAgb3BhY2l0eVNsaWRlclN2Zy5hcHBlbmQoJ2NpcmNsZScpXG4gICAgICAgIC5hdHRyKCdyJywgNilcbiAgICAgICAgLmF0dHIoJ2N4JywgMzAwKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXItY2lyY2xlJyk7XG5cbiAgICBvcGFjaXR5U2xpZGVyU3ZnLmFwcGVuZCgnbGluZScpXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdvcGFjaXR5LXNsaWRlci10cmFjay1vdmVybGF5JylcbiAgICAgICAgLmF0dHIoJ3gxJywgMClcbiAgICAgICAgLmF0dHIoJ3gyJywgMzE1KVxuICAgICAgICAuYXR0cignc3Ryb2tlJywgJyMwMDAwMDAnKVxuICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgJzIwcHgnKVxuICAgICAgICAuYXR0cignc3Ryb2tlLW9wYWNpdHknLCAnMC4wJylcbiAgICAgICAgLmNhbGwoZDMuZHJhZygpXG4gICAgICAgICAgICAgIC5vbignc3RhcnQgZHJhZycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgIHVwZGF0ZU9wYWNpdHkobGF5ZXIsIHRoaXMucGFyZW50Tm9kZSwgb3BhY2l0eVNjYWxlLCBkMy5ldmVudC54KTtcbiAgICAgICAgICAgICAgfSkpO1xuXG4gICAgb3BhY2l0eVNsaWRlclN2Zy5hcHBlbmQoJ2xpbmUnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXItdHJhY2snKVxuICAgICAgICAuYXR0cigneDEnLCAwKS5hdHRyKCd4MicsIDMwMClcbiAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsICcyMHB4JylcbiAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjNjY2JylcbiAgICAgICAgLmF0dHIoJ3N0cm9rZS13aWR0aCcsICcycHgnKTtcblxuICAgIG9wYWNpdHlTbGlkZXJTdmcuYXBwZW5kKCd0ZXh0JylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktaW5kaWNhdG9yJylcbiAgICAgICAgLmF0dHIoJ3gnLCAzMTUpLmF0dHIoJ3knLCA1KVxuICAgICAgICAudGV4dChvcGFjaXR5U2NhbGUoMzAwKSoxMDAgKyAnJScpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVPcGFjaXR5KGxheWVyLCBzbGlkZXIsIHNjYWxlLCB4UG9zKSB7XG4gIC8vIGNsYW1wIHRoZSB4IHBvc2l0aW9uIHRvIGJlIHdpdGhpbiB0aGUgc2NhbGUncyBkb21haW5cbiAgdmFyIHhQb3MgPSBzY2FsZS5pbnZlcnQoc2NhbGUoeFBvcykpXG4gIHNsaWRlciA9IGQzLnNlbGVjdChzbGlkZXIpXG5cbiAgc2xpZGVyLnNlbGVjdCgnY2lyY2xlJykuYXR0cignY3gnLCB4UG9zKVxuICBzbGlkZXIuc2VsZWN0KCd0ZXh0JykudGV4dChwYXJzZUludChzY2FsZSh4UG9zKSoxMDApICsgJyUnKVxuICBsYXllci5tYXBMYXllci5zZXRPcGFjaXR5KHNjYWxlKGQzLmV2ZW50LngpKVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvcmVuZGVyTGF5ZXJMaXN0LmpzIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ3JlYXRlQmFzZUxheWVycyAobWFwLCBsYXllckNvbmZpZykge1xuICAgIGxheWVyQ29uZmlnID0gbGF5ZXJDb25maWcgfHwgXG4gICAgICAgIFt7XG4gICAgICAgICAgICBcInVybFwiIDogXCJodHRwOi8ve3N9LmJhc2VtYXBzLmNhcnRvY2RuLmNvbS9saWdodF9hbGwve3p9L3t4fS97eX0ucG5nXCIsXG4gICAgICAgICAgICBcImF0dHJpYnV0aW9uXCIgOiAnJmNvcHk7IDxhIGhyZWY9XCJodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodFwiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgJmNvcHk7IDxhIGhyZWY9XCJodHRwczovL2NhcnRvLmNvbS9hdHRyaWJ1dGlvbnNcIj5DQVJUTzwvYT4nXG4gICAgICAgIH1dO1xuXG4gICAgdmFyIGk7XG4gICAgdmFyIGJhc2VMYXllcjtcblxuICAgIGZvciAoaSA9IDA7IGk8IGxheWVyQ29uZmlnLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJhc2VMYXllciA9IGNyZWF0ZUJhc2VMYXllcihsYXllckNvbmZpZ1tpXSk7XG4gICAgICAgIGJhc2VMYXllci5hZGRUbyhtYXApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlQmFzZUxheWVyIChsYXllckNvbmZpZykge1xuICAgIHJldHVybiBMLnRpbGVMYXllcihcbiAgICAgICAgbGF5ZXJDb25maWcudXJsLFxuICAgICAgICB7IGF0dHJpYnV0aW9uOiBsYXllckNvbmZpZy5hdHRyaWJ1dGlvbiB9XG4gICAgKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2Jhc2VsYXllci5qcyIsInZhciB0aXA7XG5cbmV4cG9ydCBmdW5jdGlvbiBTZXR1cEdyYXBocyAoKSB7XG4gICAgZDMuc2VsZWN0QWxsKFwiLmdyYXBoLXR5cGUtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2spO1xuICAgIGV4dGVuZERhdGVNb2R1bGUoKTtcbiAgICB0aXAgPSBkMy50aXAoKS5hdHRyKCdjbGFzcycsICdkMy10aXAnKS5odG1sKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkOyB9KTtcbn1cblxuZnVuY3Rpb24gZXh0ZW5kRGF0ZU1vZHVsZSAoKSB7XG4gICAgRGF0ZS5wcm90b3R5cGUuaXNMZWFwWWVhciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgeWVhciA9IHRoaXMuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgaWYoKHllYXIgJiAzKSAhPSAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiAoKHllYXIgJSAxMDApICE9IDAgfHwgKHllYXIgJSA0MDApID09IDApO1xuICAgIH07XG5cbiAgICAvLyBHZXQgRGF5IG9mIFllYXJcbiAgICBEYXRlLnByb3RvdHlwZS5nZXRET1kgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRheUNvdW50ID0gWzAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0XTtcbiAgICAgICAgdmFyIG1uID0gdGhpcy5nZXRNb250aCgpO1xuICAgICAgICB2YXIgZG4gPSB0aGlzLmdldERhdGUoKTtcbiAgICAgICAgdmFyIGRheU9mWWVhciA9IGRheUNvdW50W21uXSArIGRuO1xuICAgICAgICBpZihtbiA+IDEgJiYgdGhpcy5pc0xlYXBZZWFyKCkpIGRheU9mWWVhcisrO1xuICAgICAgICByZXR1cm4gZGF5T2ZZZWFyO1xuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBCaW5kR3JhcGhFdmVudHMgKG1hcCkge1xuICAgIG1hcC5vbihcImNsaWNrXCIsIGhhbmRsZU1hcENsaWNrKTtcbn1cblxudmFyIGJhc2VJY29uID0gTC5JY29uLmV4dGVuZCh7fSk7XG5cbnZhciBncmFwaEljb24gPSBuZXcgYmFzZUljb24oe1xuICAgIGljb25Vcmw6ICdpbWdzL2JsdWVfaWNvbi5wbmcnLFxuICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxuICAgIGljb25TaXplOiBbMjUsIDQxXSxcbiAgICBpY29uQW5jaG9yOiBbMTIsIDQxXSxcbiAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXG4gICAgc2hhZG93U2l6ZTogWzQxLCA0MV1cbn0pO1xuXG52YXIgaG92ZXJJY29uID0gbmV3IGJhc2VJY29uKHtcbiAgICBpY29uVXJsOiAnaW1ncy9vcmFuZ2VfaWNvbi5wbmcnLFxuICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxuICAgIGljb25TaXplOiBbMjUsIDQxXSxcbiAgICBpY29uQW5jaG9yOiBbMTIsIDQxXSxcbiAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXG4gICAgc2hhZG93U2l6ZTogWzQxLCA0MV1cbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVNYXBDbGljayAoZSkge1xuICAgIHZhciBtYXAgPSB0aGlzO1xuICAgIHZhciBsYXQgPSBlLmxhdGxuZy5sYXQ7XG4gICAgdmFyIGxuZyA9IGUubGF0bG5nLmxuZztcblxuICAgIHZhciBkaXYgPSBjcmVhdGVHcmFwaERpdihsYXQsIGxuZyk7XG4gICAgdmFyIG1hcmtlciA9IGNyZWF0ZU1hcmtlcihtYXAsIGxhdCwgbG5nKTtcbiAgICBkMy5zZWxlY3QoZGl2KS5vbihcIm1vdXNlZW50ZXJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBtYXJrZXIuc2V0SWNvbihob3Zlckljb24pO1xuICAgIH0pXG4gICAgZDMuc2VsZWN0KGRpdikub24oXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbWFya2VyLnNldEljb24oZ3JhcGhJY29uKTtcbiAgICB9KVxuICAgIGNyZWF0ZUdyYXBoUmVtb3ZlcihtYXAsIGRpdiwgbWFya2VyKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTWFya2VyIChtYXAsIGxhdCwgbG5nKSB7XG4gICAgcmV0dXJuIEwubWFya2VyKFtsYXQsIGxuZ10sIHtpY29uOiBncmFwaEljb259KS5hZGRUbyhtYXApO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVHcmFwaFJlbW92ZXIgKG1hcCwgZGl2LCBtYXJrZXIpIHtcbiAgICB2YXIgZWxlbSA9IGNyZWF0ZUdyYXBoUmVtb3ZlckVsZW0oKTtcbiAgICBkaXYuYXBwZW5kQ2hpbGQoZWxlbSk7XG4gICAgZDMuc2VsZWN0KGVsZW0pLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKTtcbiAgICAgICAgbGlzdC5yZW1vdmVDaGlsZChkaXYpO1xuICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobWFya2VyKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSAoKSB7XG4gICAgdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGVsZW0uY2xhc3NOYW1lID0gXCJyZW1vdmUtZ3JhcGhcIjtcbiAgICBlbGVtLmlubmVyVGV4dCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoXCIxMDAwNVwiKTtcbiAgICBlbGVtLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIFwiUmVtb3ZlIGdyYXBoXCIpO1xuICAgIHJldHVybiBlbGVtO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIERBVEEgUFJPQ0VTU0lORyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIGdldERhdGEobGF0LCBsbmcsIGRpdikge1xuICAgIHZhciB1cmwgPSBcImh0dHBzOi8vZmNhdi1uZHZpLm5lbWFjLm9yZy9sYW5kZGF0X3Byb2R1Y3QuY2dpP2FyZ3M9XCIgKyBsbmcgKyBcIixcIiArIGxhdDtcbiAgICB2YXIgb1JlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIG9SZXEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgcmVzcG9uc2UgPSByZXNwb25zZS5yZXBsYWNlKC9cXFt8XFxdfFxcJy9nLCBcIlwiKS5zcGxpdChcIiwgXCIpO1xuICAgICAgICBkcmF3R3JhcGgocmVzcG9uc2UsIGRpdiwgbGF0LCBsbmcpO1xuICAgIH0pO1xuICAgIG9SZXEub3BlbihcIkdFVFwiLCB1cmwpO1xuICAgIG9SZXEuc2VuZCgpXG59XG5cbmZ1bmN0aW9uIHNwbGl0RGF0YShkYXRhKSB7XG4gICAgdmFyIGk7XG4gICAgZm9yIChpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGF0YVtpXSA9IGRhdGFbaV0uc3BsaXQoXCIsXCIpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbn1cblxuZnVuY3Rpb24gcmVwcm9jZXNzRGF0YSAob3JpZ2RhdGEpIHtcbiAgICB2YXIgZGF0YSA9IHt9O1xuICAgIHZhciBwb2ludDtcbiAgICB2YXIga2V5O1xuICAgIHZhciBpLCBqO1xuXG4gICAgZGF0YVtcImtleXNcIl0gPSBbXTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgb3JpZ2RhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcG9pbnQgPSBvcmlnZGF0YVtpXTtcbiAgICAgICAga2V5ID0gcG9pbnRbMF0uc3Vic3RyaW5nKDAsNCk7XG4gICAgICAgIGlmICghZGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICBkYXRhW2tleV0gPSBbXTtcbiAgICAgICAgICAgIGRhdGFbXCJrZXlzXCJdLnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgICAgICBkYXRhW2tleV0ucHVzaChwb2ludCk7XG4gICAgfVxuXG4gICAgdmFyIGRhdGFGb3JNZWRpYW5zO1xuICAgIHZhciBtZWRpYW47XG4gICAgZGF0YVtcIm1lZGlhbnNcIl0gPSBbXTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgNDY7IGkrKykge1xuICAgICAgICBkYXRhRm9yTWVkaWFucyA9IFtdO1xuICAgICAgICBmb3IgKGogPSBpOyBqIDwgb3JpZ2RhdGEubGVuZ3RoOyBqICs9IDQ2KSB7XG4gICAgICAgICAgICBkYXRhRm9yTWVkaWFucy5wdXNoKG9yaWdkYXRhW2pdWzFdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1lZGlhbiA9IGRhdGFGb3JNZWRpYW5zLnNvcnQoKVtNYXRoLmZsb29yKGRhdGFGb3JNZWRpYW5zLmxlbmd0aC8yKV07XG4gICAgICAgIGRhdGFbXCJtZWRpYW5zXCJdLnB1c2gobWVkaWFuKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBHUkFQSCBJTlRFUkZBQ0UgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIGhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrICgpIHtcbiAgICB2YXIgdHlwZSA9IHRoaXMuZGF0YXNldC50eXBlO1xuICAgIHZhciBhY3RpdmVFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyYXBoLXR5cGUtYnRuIGFjdGl2ZVwiKVswXTtcbiAgICB2YXIgYWN0aXZlVHlwZSA9IGFjdGl2ZUVsZW0uZGF0YXNldC50eXBlO1xuXG4gICAgaWYgKHR5cGUgPT09IGFjdGl2ZVR5cGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGQzLnNlbGVjdChcIiNncmFwaC1saXN0XCIpXG4gICAgICAgIC5jbGFzc2VkKFwiZ3JhcGgtXCIgKyBhY3RpdmVUeXBlLCBmYWxzZSlcbiAgICAgICAgLmNsYXNzZWQoXCJncmFwaC1cIiArIHR5cGUsIHRydWUpO1xuXG4gICAgZDMuc2VsZWN0KGFjdGl2ZUVsZW0pLmNsYXNzZWQoXCJhY3RpdmVcIiwgZmFsc2UpO1xuICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVHcmFwaERpdiAobGF0LCBsbmcpIHtcbiAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB2YXIgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiTGF0OiBcIiArIGxhdCArIFwiLCBMb246IFwiICsgbG5nKTtcbiAgICBkaXYuYXBwZW5kQ2hpbGQoY29udGVudCk7XG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoXCJncmFwaC1lbGVtXCIpXG4gICAgZ2V0RGF0YShsYXQsIGxuZywgZGl2KTtcbiAgICByZXR1cm4gZGl2O1xufVxuXG5mdW5jdGlvbiBkcmF3R3JhcGgoZGF0YSwgZGl2LCBsYXQsIGxuZykge1xuICAgIGRhdGEgPSBzcGxpdERhdGEoZGF0YSk7XG4gICAgdmFyIHJlcHJvY2Vzc2VkRGF0YSA9IHJlcHJvY2Vzc0RhdGEoZGF0YSk7XG4gICAgbWFrZVVwRG93bkxpbmVHcmFwaChkYXRhLCBkaXYsIHJlcHJvY2Vzc2VkRGF0YVtcIm1lZGlhbnNcIl0pO1xuICAgIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMocmVwcm9jZXNzZWREYXRhLCBkaXYsIGxhdCwgbG5nKTtcbiAgICBkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMocmVwcm9jZXNzZWREYXRhLCBkaXYsIGxhdCwgbG5nKTtcbiAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKTtcbiAgICBsaXN0LmFwcGVuZENoaWxkKGRpdik7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLyBUSU1FU0VSSUVTIExJTkUgR1JBUEggLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gbWFrZVVwRG93bkxpbmVHcmFwaCAoZGF0YSwgZGl2LCBhdmVyYWdlcykge1xuICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcbiAgICB2YXIgbWFyZ2luID0ge3RvcDogMzAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMCwgbGVmdDogMjV9LFxuICAgIHdpZHRoID0gNTgwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsXG4gICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cbiAgICAvLyBTZXQgdGhlIHJhbmdlc1xuICAgIHZhciB4ID0gZDMuc2NhbGVUaW1lKCkucmFuZ2UoWzAsIHdpZHRoXSlcbiAgICAgICAgLmRvbWFpbihbXG4gICAgICAgICAgICBwYXJzZURhdGUoZGF0YVswXVswXSksXG4gICAgICAgICAgICBwYXJzZURhdGUoZGF0YVtkYXRhLmxlbmd0aC0xXVswXSlcbiAgICAgICAgXSk7XG4gICAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKVxuICAgICAgICAuZG9tYWluKFswLCAxMDBdKTtcblxuICAgIC8vIERlZmluZSB0aGUgYXhlc1xuICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcbiAgICAgICAgLnRpY2tzKDE2KVxuICAgICAgICAudGlja0Zvcm1hdChmdW5jdGlvbiAoZCkge1xuICAgICAgICAgICAgcmV0dXJuIGQuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgfSk7XG5cbiAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KVxuICAgICAgICAudGlja3MoNik7XG5cbiAgICAvLyBEZWZpbmUgdGhlIGxpbmVcbiAgICB2YXIgdmFsdWVsaW5lID0gZDMubGluZSgpXG4gICAgICAgIC54KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHgocGFyc2VEYXRlKGRbMF0pKTsgfSlcbiAgICAgICAgLnkoZnVuY3Rpb24oZCkgeyByZXR1cm4geShkWzFdKTsgfSk7XG5cbiAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwidGltZXNlcmllcy1ncmFwaFwiLCB0cnVlKTtcblxuICAgIC8vIEFkZHMgdGhlIHN2ZyBjYW52YXNcbiAgICB2YXIgc3ZnID0gd3JhcHBlclxuICAgICAgICAuYXBwZW5kKFwic3ZnXCIpXG4gICAgICAgIC5hdHRyKFwid2lkdGhcIiwgd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodClcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXG4gICAgICAgIC5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcbiAgICAgICAgICAgICAgICAgIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XG5cbiAgICBzdmcuY2FsbCh0aXApO1xuXG4gICAgLy8gQWRkIHRoZSB2YWx1ZWxpbmUgcGF0aC5cbiAgICBkcmF3TGluZWFyUGF0aChkYXRhLCB2YWx1ZWxpbmUsIHN2Zyk7XG5cbiAgICAvLyBBZGQgdGhlIFggQXhpc1xuICAgIHN2Zy5hcHBlbmQoXCJnXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ4IGF4aXNcIilcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGhlaWdodCArIFwiKVwiKVxuICAgICAgICAuY2FsbCh4QXhpcyk7XG5cbiAgICAvLyBBZGQgdGhlIFkgQXhpc1xuICAgIHN2Zy5hcHBlbmQoXCJnXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ5IGF4aXNcIilcbiAgICAgICAgLmNhbGwoeUF4aXMpO1xuICAgIC8qKlxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XG4gICAgICovXG4gICAgZHJhd0xpbmVhclBvaW50cyhkYXRhLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLyBPVkVSTEFQUElORyBUSU1FU0VSSUVTIExJTkUgR1JBUEggLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBtYWtlVXBEb3duT3ZlcmxhcGluZ0xpbmVHcmFwaFdpdGhDaGVja2JveGVzIChkYXRhLCBkaXYsIGxhdCwgbG5nKSB7XG4gICAgdmFyIHllYXIgPSBcIjIwMTVcIjtcblxuICAgIHZhciBjaGFydHMgPSB7fTtcblxuICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcbiAgICB2YXIgbWFyZ2luID0ge3RvcDogMzAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMCwgbGVmdDogMjV9LFxuICAgICAgICB3aWR0aCA9IDUwMCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxuICAgICAgICBoZWlnaHQgPSAyNzAgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcblxuICAgIHZhciBhdmVyYWdlcyA9IGRhdGEubWVkaWFucztcblxuICAgIHZhciB4ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbMCwgd2lkdGhdKVxuICAgICAgICAuZG9tYWluKFswLCAzNjVdKTtcbiAgICB2YXIgeSA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodCwgMF0pXG4gICAgICAgIC5kb21haW4oWzAsIDEwMF0pO1xuXG4gICAgLy8gRGVmaW5lIHRoZSBheGVzXG4gICAgZnVuY3Rpb24gZm9ybWF0TW9udGhUaWNrIChkKSB7XG4gICAgICAgIHJldHVybiAoTU9OVEhfTEFCRUxTWyhkLTE1KS8zMF0pO1xuICAgIH1cbiAgICB2YXIgeEF4aXMgPSBkMy5heGlzQm90dG9tKHgpXG4gICAgICAgIC50aWNrcygxMSlcbiAgICAgICAgLnRpY2tWYWx1ZXMoWzE1LCA0NSwgNzUsIDEwNSwgMTM1LCAxNjUsIDE5NSwgMjI1LCAyNTUsIDI4NSwgMzE1LCAzNDVdKVxuICAgICAgICAudGlja0Zvcm1hdChmb3JtYXRNb250aFRpY2spO1xuICBcbiAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KVxuICAgICAgICAudGlja3MoNik7XG5cbiAgICAvLyBEZWZpbmUgdGhlIGxpbmVcbiAgICB2YXIgdmFsdWVsaW5lID0gZDMubGluZSgpXG4gICAgICAgIC54KGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIChBcnJheS5pc0FycmF5KGQpID8geChwYXJzZUp1bGlhbkRheShkWzBdKSkgOiB4KChpICogOCkgKyAzICkpOyB9KVxuICAgICAgICAueShmdW5jdGlvbihkKSB7IHJldHVybiAoQXJyYXkuaXNBcnJheShkKSA/IHkoZFsxXSkgOiB5KGQpKTsgfSk7XG5cbiAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwib3ZlcmxhcHBpbmctZ3JhcGhcIiwgdHJ1ZSk7XG5cbiAgICAvLyBBZGRzIHRoZSBzdmcgY2FudmFzXG4gICAgdmFyIHN2ZyA9IHdyYXBwZXJcbiAgICAgICAgLmFwcGVuZChcInN2Z1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXG4gICAgICAgIC5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcbiAgICAgICAgICAgICAgICAgIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XG5cbiAgICBzdmcuY2FsbCh0aXApO1xuXG4gICAgLy8gQWRkIHRoZSBYIEF4aXNcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieCBheGlzXCIpXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIilcbiAgICAgICAgLmNhbGwoeEF4aXMpO1xuXG4gICAgLy8gQWRkIHRoZSBZIEF4aXNcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpXG4gICAgICAgIC5jYWxsKHlBeGlzKTtcblxuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl0gPSB7XG4gICAgICAgIFwicGF0aFwiIDogZHJhd0xpbmVhclBhdGgoZGF0YVtcIm1lZGlhbnNcIl0sIHZhbHVlbGluZSwgc3ZnKVxuICAgIH07XG5cbiAgICBjaGFydHNbeWVhcl0gPSB7XG4gICAgICAgIFwicGF0aFwiIDogZHJhd0xpbmVhclBhdGgoZGF0YVt5ZWFyXSwgdmFsdWVsaW5lLCBzdmcpXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XG4gICAgICovXG4gICAgY2hhcnRzW1wibWVkaWFuc1wiXVtcInBvaW50c1wiXSA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtcIm1lZGlhbnNcIl0sIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG4gICAgY2hhcnRzW3llYXJdW1wicG9pbnRzXCJdID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW3llYXJdLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXG4gICAgdmFyIGlucHV0d3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJpbnB1dC13cmFwcGVyXCIsIHRydWUpO1xuXG4gICAgZGF0YS5rZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBjcmVhdGVDaGVja2JveChpbnB1dHdyYXBwZXIsIGtleSwgXCJ0aW1lc2VyaWVzXCIsIHllYXIsIGNoYXJ0cywgZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzLCBsYXQsIGxuZyk7XG4gICAgfSk7XG5cbiAgICBjcmVhdGVDaGVja2JveChpbnB1dHdyYXBwZXIsIFwibWVkaWFuc1wiLCBcInRpbWVzZXJpZXNcIiwgXCJtZWRpYW5zXCIsIGNoYXJ0cywgZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzLCBsYXQsIGxuZyk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gUE9MQVIgR1JBUEggLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzIChkYXRhLCBkaXYsIGxhdCwgbG5nKSB7XG4gICAgdmFyIHllYXIgPSBcIjIwMTVcIjtcbiAgICB2YXIgd2lkdGggPSA0OTAsXG4gICAgICAgIGhlaWdodCA9IDQ5MCxcbiAgICAgICAgcmFkaXVzID0gTWF0aC5taW4od2lkdGgsIGhlaWdodCkgLyAyIC0gMzA7XG5cbiAgICB2YXIgYXZlcmFnZXMgPSBkYXRhW1wibWVkaWFuc1wiXTtcbiAgICB2YXIgY2VudGVyID0gZmluZFBvbGFyQ2VudGVyKGRhdGEpO1xuICAgIHZhciB0aHJlc2hvbGRzID0gZmluZFBvbGFyVGhyZXNob2xkcyhhdmVyYWdlcywgY2VudGVyWzFdWzBdKTtcblxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgc2NhbGluZyBvZiBkYXRhLiBXZSBrbm93IHRoYXQgdGhlIG5kdmkgdmFsdWVzIGZhbGwgYmV0d2VlblxuICAgICAqIDAgJiAxMDAgc28gd2Ugc2V0IG91ciBkb21haW4gdG8gdGhhdC4gVGhlIHJhbmdlIGNvbnRyb2xzIHdoZXJlIHRoZVxuICAgICAqIHBvaW50cyB3aWxsIGxpZSBpbiBvdXIgZ3JhcGgsIHNvIHdlIHNldCB0aGVtIHRvIGJlIGJldHdlZW4gMCBhbmQgdGhlXG4gICAgICogcmFkaXVzLlxuICAgICAqL1xuICAgIHZhciByID0gZDMuc2NhbGVMaW5lYXIoKVxuICAgICAgICAuZG9tYWluKFswLCAxMDBdKVxuICAgICAgICAucmFuZ2UoWzAsIHJhZGl1c10pO1xuXG4gICAgLyoqXG4gICAgICogZnVuY3Rpb24gd2hpY2ggd2lsbCBkcmF3IGVhY2ggcG9pbnQuIFRvIGNvbXB1dGUgdGhlIGRpc3RhbmNlIGZyb20gdGhlXG4gICAgICogY2VudGVyIGVhY2ggcG9pbnQgaXMgd2UgcGFzcyB0aGUgZGF0YXBvaW50IHRvIHRoZSBmdW5jdGlvbiBkZWZpbmVkIGFib3ZlLlxuICAgICAqIFRvIGRldGVybWluZSB0aGUgYW5nbGUgZnJvbSB0aGUgb3JpZ2luIHdlIG5lZWQgdG8gY29udmVydCB0aGUgZGF5IHRvXG4gICAgICogcmFkaWFucywgc28gd2UgY29udmVydCB0aGUgZGF5IHRvIGEgbnVtYmVyIGJldHdlZW4gMCAmIDEgYW5kIHRoZW4gbXVsdGlwbHlcbiAgICAgKiBpdCBieSAyIHBpLlxuICAgICAqL1xuICAgIHZhciBsaW5lID0gZDMucmFkaWFsTGluZSgpXG4gICAgICAgIC5yYWRpdXMoZnVuY3Rpb24oZCkgeyByZXR1cm4gQXJyYXkuaXNBcnJheShkKSA/IHIoZFsxXSkgOiByKGQpOyB9KVxuICAgICAgICAuYW5nbGUoZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgdmFyIGRheSA9IEFycmF5LmlzQXJyYXkoZCkgPyBwYXJzZUp1bGlhbkRheShkWzBdKSA6IChpICogOCkgKyAzO1xuICAgICAgICAgICAgcmV0dXJuICgoKChkYXkgLSAxKSUzNjUpLzM2NSkgKiAoMipNYXRoLlBJKSk7XG4gICAgICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogU2V0cyB1cCB0aGUgY2FudmFzIHdoZXJlIHRoZSBjaXJjbGUgd2lsbCBiZSBkcmF3bi5cbiAgICAgKi9cbiAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwicG9sYXItZ3JhcGhcIiwgdHJ1ZSk7XG4gICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpXG4gICAgICAgIC5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG4gICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodClcbiAgICAgICAgLmFwcGVuZChcImdcIilcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB3aWR0aCAvIDIgKyBcIixcIiArIGhlaWdodCAvIDIgKyBcIilcIik7XG5cbiAgICBzdmcuY2FsbCh0aXApO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBiaWcgY2lyY2xlcyBvZiB0aGUgZ3JhcGggJiB0aGVpciBsYWJlbHNcbiAgICAgKi9cbiAgICB2YXIgZ3IgPSBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiciBheGlzXCIpXG4gICAgICAgIC5zZWxlY3RBbGwoXCJnXCIpXG4gICAgICAgIC5kYXRhKHIudGlja3MoNSkuc2xpY2UoMSkpXG4gICAgICAgIC5lbnRlcigpLmFwcGVuZChcImdcIik7XG5cbiAgICBnci5hcHBlbmQoXCJjaXJjbGVcIilcbiAgICAgICAgLmF0dHIoXCJyXCIsIHIpO1xuXG4gICAgZ3IuYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gLXIoZCkgLSA0OyB9KVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInJvdGF0ZSgxNSlcIilcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZDsgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGxhYmVscyBmb3IgZWFjaCBtb250aCBhbmQgdGhlIGxpbmVzXG4gICAgICogdGhhdCBnbyBvdXQgdG8gdGhlbS5cbiAgICAgKi9cbiAgICB2YXIgZ2EgPSBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYSBheGlzXCIpXG4gICAgICAgIC5zZWxlY3RBbGwoXCJnXCIpXG4gICAgICAgIC5kYXRhKGQzLnJhbmdlKDAsIDM2MCwgMzApKVxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInJvdGF0ZShcIiArIChkIC0gOTApICsgXCIpXCI7IH0pO1xuXG4gICAgZ2EuYXBwZW5kKFwibGluZVwiKVxuICAgICAgICAuYXR0cihcIngyXCIsIHJhZGl1cyk7XG5cbiAgICBnYS5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgIC5hdHRyKFwieFwiLCByYWRpdXMgKyA2KVxuICAgICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJlbmRcIiA6IG51bGw7IH0pXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQgPCAzNjAgJiYgZCA+IDE4MCA/IFwicm90YXRlKDE4MCBcIiArIChyYWRpdXMgKyA2KSArIFwiLDApXCIgOiBudWxsOyB9KVxuICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBNT05USF9MQUJFTFNbZC8zMF07IH0pO1xuXG4gICAgLyoqXG4gICAgICogRHJhd3MgdGhlIHRocmVzaG9sZCBsaW5lc1xuICAgICAqL1xuICAgIHZhciB0aHJlc2hvbGRFbGVtID0gc3ZnLmFwcGVuZChcImdcIilcbiAgICAgICAgLnNlbGVjdEFsbChcImdcIilcbiAgICAgICAgLmRhdGEodGhyZXNob2xkcylcbiAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJyb3RhdGUoXCIgKyAoZC5kYXRhWzFdWzBdIC0gOTApICsgXCIpXCI7IH0pO1xuXG4gICAgdGhyZXNob2xkRWxlbS5hcHBlbmQoXCJsaW5lXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpXG4gICAgICAgIC5hdHRyKFwieDJcIiwgcmFkaXVzKTtcblxuICAgIHRocmVzaG9sZEVsZW0uYXBwZW5kKFwidGV4dFwiKVxuICAgICAgICAuYXR0cihcInhcIiwgcmFkaXVzICsgNilcbiAgICAgICAgLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiAoKCgoZC5kYXRhWzFdWzBdIC0gMSklMzY1KS8zNjUpICogKDIqTWF0aC5QSSkpOyB9KVxuICAgICAgICAuYXR0cihcImR5XCIsIFwiLjM1ZW1cIilcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdOyByZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IFwiZW5kXCIgOiBudWxsOyB9KVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHZhciBkYXkgPSBkLmRhdGFbMV1bMF07IHJldHVybiBkYXkgPCAzNjAgJiYgZGF5ID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7IH0pXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQubGFiZWw7IH0pO1xuXG4gICAgLyoqXG4gICAgICogRHJhd3MgdGhlIGxpbmUgdG8gdGhlIGNlbnRlciBvZiB0aGUgZGF0YVxuICAgICAqL1xuICAgIHZhciBjZW50ZXJEYXkgPSBjZW50ZXJbMV1bMF07XG4gICAgdmFyIGNlbnRlckRheU9wcG9zaXRlID0gKGNlbnRlckRheSArICgzNjUvMikpICUgMzY1O1xuICAgIHZhciBjZW50ZXJEYXlEYXRhID0gW2NlbnRlckRheSwgMTAwXTtcbiAgICB2YXIgY2VudGVyRGF5T3Bwb3NpdGVEYXRhID0gW2NlbnRlckRheU9wcG9zaXRlLCAxMDBdO1xuICAgIHZhciBncm93aW5nU2Vhc29uRGF0YSA9IFtjZW50ZXJEYXlEYXRhLCBjZW50ZXJEYXlPcHBvc2l0ZURhdGFdXG5cbiAgICBkcmF3UG9sYXJQYXRoKGdyb3dpbmdTZWFzb25EYXRhLCBsaW5lLCBzdmcpXG4gICAgICAgIC5jbGFzc2VkKFwiZ3Jvd2luZy1zZWFzb24tbGluZVwiLCBcInRydWVcIik7XG5cbiAgICBkcmF3UG9sYXJQYXRoKGNlbnRlciwgbGluZSwgc3ZnKVxuICAgICAgICAuY2xhc3NlZChcImNlbnRlci1saW5lXCIsIFwidHJ1ZVwiKTtcblxuICAgIHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKVxuICAgICAgICAuZGF0YShbY2VudGVyWzFdXSlcbiAgICAgICAgLmVudGVyKClcbiAgICAgICAgLmFwcGVuZChcImNpcmNsZVwiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwicG9pbnRcIilcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgdmFyIGNvb3JzID0gbGluZShbZF0pLnNsaWNlKDEpLnNsaWNlKDAsIC0xKTtcbiAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGNvb3JzICsgXCIpXCJcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoXCJyXCIsIDIuNSlcbiAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCIjMDAwXCIpXG4gICAgICAgIC5hdHRyKFwiZmlsbFwiLCBcIiNkZDgyZDJcIilcbiAgICAgICAgLm9uKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHRpcC5zaG93KFwiQ2VudGVyOiBcIiAgKyBTdHJpbmcoZFsxXSkuc3Vic3RyaW5nKDAsIDcpKTtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCA1KTtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMnB4XCIpO1xuICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbihcIm1vdXNlb3V0XCIsIGZ1bmN0aW9uIChkKSB7XG4gICAgICAgICAgICB0aXAuaGlkZSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDIuNSk7XG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjFweFwiKTtcbiAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuICAgICAgICB9KTtcblxuICAgIHZhciBjaGFydHMgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgbGluZSB0aGF0IHRoZSBkYXRhIGZvbGxvd3NcbiAgICAgKi9cbiAgICBjaGFydHNbXCJtZWRpYW5zXCJdID0ge1xuICAgICAgICBcInBhdGhcIiA6IGRyYXdQb2xhclBhdGgoYXZlcmFnZXMsIGxpbmUsIHN2ZylcbiAgICB9O1xuXG4gICAgY2hhcnRzW3llYXJdID0ge1xuICAgICAgICBcInBhdGhcIiA6IGRyYXdQb2xhclBhdGgoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnKVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxuICAgICAqL1xuICAgIGNoYXJ0cy5tZWRpYW5zLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoYXZlcmFnZXMsIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuICAgIGNoYXJ0c1t5ZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbeWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXG4gICAgdmFyIGlucHV0d3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJpbnB1dC13cmFwcGVyXCIsIHRydWUpO1xuXG4gICAgZGF0YS5rZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblxuICAgICAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIilcbiAgICAgICAgICAgIC5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpXG4gICAgICAgICAgICAuYXR0cihcImlkXCIsIFwicG9sYXItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpXG4gICAgICAgICAgICAuYXR0cihcInZhbHVlXCIsIGtleSlcbiAgICAgICAgICAgIC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgKGtleSA9PT0geWVhcikgPyB0cnVlIDogZmFsc2UpXG4gICAgICAgICAgICAub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3WWVhciA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGgucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGFydHMuaGFzT3duUHJvcGVydHkobmV3WWVhcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3UG9sYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2Zyk7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKVxuICAgICAgICAgICAgLnRleHQoa2V5KVxuICAgICAgICAgICAgLmF0dHIoXCJmb3JcIiwgXCJwb2xhci1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgfSk7XG5cbiAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblxuICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJpbnB1dFwiKVxuICAgICAgICAuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKVxuICAgICAgICAuYXR0cihcImlkXCIsIFwicG9sYXItYXZlcmFnZS1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcbiAgICAgICAgLmF0dHIoXCJ2YWx1ZVwiLCBcIm1lZGlhbnNcIilcbiAgICAgICAgLnByb3BlcnR5KFwiY2hlY2tlZFwiLCB0cnVlKVxuICAgICAgICAub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGgucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGFydHMuaGFzT3duUHJvcGVydHkobmV3WWVhcikpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3UG9sYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZylcblxuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKVxuICAgICAgICAudGV4dChcIkJhc2VsaW5lXCIpXG4gICAgICAgIC5hdHRyKFwiZm9yXCIsIFwicG9sYXItYXZlcmFnZS1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG5cbiAgICB2YXIgdGhyZXNob2xkQ2hlY2tib3g9IGlucHV0d3JhcHBlci5hcHBlbmQoXCJkaXZcIilcbiAgICAgICAgLmNsYXNzZWQoXCJ0aHJlc2hvbGQtY2hlY2tib3hcIiwgdHJ1ZSk7XG5cbiAgICB0aHJlc2hvbGRDaGVja2JveC5hcHBlbmQoXCJpbnB1dFwiKVxuICAgICAgICAuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKVxuICAgICAgICAuYXR0cihcImlkXCIsIFwidGhyZXNob2xkLWNoZWNrYm94LVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKVxuICAgICAgICAucHJvcGVydHkoXCJjaGVja2VkXCIsIHRydWUpXG4gICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdGhyZXNob2xkRWxlbS5zdHlsZShcIm9wYWNpdHlcIiwgKHRoaXMuY2hlY2tlZCkgPyAxIDogMCk7XG4gICAgICAgIH0pO1xuXG4gICAgdGhyZXNob2xkQ2hlY2tib3guYXBwZW5kKFwibGFiZWxcIilcbiAgICAgICAgLnRleHQoXCJUaHJlc2hvbGRzXCIpXG4gICAgICAgIC5hdHRyKFwiZm9yXCIsIFwidGhyZXNob2xkLWNoZWNrYm94LVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbn1cblxuLyogUE9MQVIgR1JBUEggSEVMUEVSUyAqL1xuXG5mdW5jdGlvbiBmaW5kUG9sYXJDZW50ZXIgKGRhdGEpIHtcbiAgICB2YXIgaSwgaiwgbGVuZ3RoLCBhcnI7XG4gICAgdmFyIHRvdGFsU3VtID0gMDtcbiAgICB2YXIgaW5jb21wbGV0ZVllYXJzID0gMDtcbiAgICB2YXIgc3VtO1xuICAgIGxlbmd0aCA9IDQ2O1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGRhdGEua2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBhcnIgPSBkYXRhW2RhdGEua2V5c1tpXV07XG4gICAgICAgIGlmIChhcnIubGVuZ3RoICE9PSBsZW5ndGgpIHtcbiAgICAgICAgICAgIGluY29tcGxldGVZZWFycysrO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgc3VtID0gMDtcbiAgICAgICAgZm9yIChqID0gMDsgaiA8IGxlbmd0aC8yOyBqKyspIHtcbiAgICAgICAgICAgIHN1bSArPSAoYXJyW2pdWzFdIC0gYXJyW2orMjNdWzFdKTtcbiAgICAgICAgfVxuICAgICAgICBzdW0gPSBzdW0gLyAyMztcbiAgICAgICAgdG90YWxTdW0gKz0gc3VtO1xuICAgIH1cbiAgICB0b3RhbFN1bSA9IE1hdGguYWJzKHRvdGFsU3VtKSAvIChkYXRhLmtleXMubGVuZ3RoIC0gaW5jb21wbGV0ZVllYXJzKTtcblxuICAgIHZhciBhcmVhRGlmZiA9IDEwMDAwMDA7XG4gICAgdmFyIGNoZWNrRGlmZjtcbiAgICB2YXIgYXJlYUluZGV4ID0gMDtcbiAgICB2YXIgbGVmdEFyZWEsIHJpZ2h0QXJlYTtcbiAgICB2YXIgYXZncyA9IGRhdGEubWVkaWFucztcbiAgICB2YXIgaywgY291bnRlcjtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGgvMjsgaSsrKSB7XG4gICAgICAgIGxlZnRBcmVhID0gMDtcbiAgICAgICAgcmlnaHRBcmVhID0gMDtcbiAgICAgICAgZm9yIChjb3VudGVyID0gMDsgY291bnRlciA8IGxlbmd0aC8yOyBjb3VudGVyKyspIHtcbiAgICAgICAgICAgIGogPSAoaSArIGNvdW50ZXIpICUgNDY7XG4gICAgICAgICAgICBrID0gKGogKyAyMykgJSA0NjtcblxuICAgICAgICAgICAgbGVmdEFyZWEgKz0gcGFyc2VJbnQoYXZnc1tqXSwgMTApO1xuICAgICAgICAgICAgcmlnaHRBcmVhICs9IHBhcnNlSW50KGF2Z3Nba10sMTApO1xuICAgICAgICB9XG4gICAgICAgIGNoZWNrRGlmZiA9IE1hdGguYWJzKGxlZnRBcmVhIC0gcmlnaHRBcmVhKTtcbiAgICAgICAgaWYgKGNoZWNrRGlmZiA8IGFyZWFEaWZmKSB7XG4gICAgICAgICAgICBhcmVhRGlmZiA9IGNoZWNrRGlmZjtcbiAgICAgICAgICAgIGFyZWFJbmRleCA9IGk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZmlyc3RSYWRpdXMgPSBwYXJzZUludChhdmdzW2FyZWFJbmRleF0sIDEwKTtcbiAgICB2YXIgc2Vjb25kUmFkaXVzID0gcGFyc2VJbnQoLWF2Z3NbYXJlYUluZGV4ICsgMjNdLCAxMCk7XG5cbiAgICB2YXIgZmlyc3REaWZmID0gTWF0aC5hYnModG90YWxTdW0gLSBmaXJzdFJhZGl1cykgLSBNYXRoLmFicyh0b3RhbFN1bSAtIHNlY29uZFJhZGl1cyk7XG4gICAgdmFyIHNlY29uZERpZmYgPSBNYXRoLmFicygtdG90YWxTdW0gLSBmaXJzdFJhZGl1cykgLSBNYXRoLmFicygtdG90YWxTdW0gLSBzZWNvbmRSYWRpdXMpO1xuICAgIGlmIChzZWNvbmREaWZmID4gZmlyc3REaWZmKSB7XG4gICAgICAgIGFyZWFJbmRleCA9IGFyZWFJbmRleCArIDIzO1xuICAgIH1cblxuICAgIHZhciBjaXJjbGVjZW50ZXIgPSBbMCwgMF07XG4gICAgdmFyIGRhdGFjZW50ZXIgPSBbKGFyZWFJbmRleCAqIDgpICsgMywgdG90YWxTdW1dO1xuXG4gICAgcmV0dXJuKFtjaXJjbGVjZW50ZXIsIGRhdGFjZW50ZXJdKTtcbn1cblxuLyoqXG4gKiBzdGFydERheSBpcyBhY3R1YWxseSB0aGUgc2Vhc29uYWxpdHkgaW5kZXgsIGlmIGl0IG9jY3VycyBhZnRlciBqdWx5IGl0IHNob3VsZCBiZSBmbGlwcGVkXG4gKi9cbmZ1bmN0aW9uIGZpbmRQb2xhclRocmVzaG9sZHMgKGRhdGEsIHN0YXJ0RGF5KSB7XG4gICAgdmFyIHN0YXJ0SW5kZXggPSBNYXRoLmZsb29yKChzdGFydERheSAtIDMpIC8gOCk7XG4gICAgaWYgKHN0YXJ0SW5kZXggPiAyMikge1xuICAgICAgICBzdGFydEluZGV4ID0gc3RhcnRJbmRleCAtIDIzO1xuICAgIH1cblxuICAgIHZhciBpLCBqLCBsZW5ndGgsIGFycjtcbiAgICB2YXIgdG90YWxTdW0gPSAwO1xuICAgIHZhciBzdW07XG4gICAgbGVuZ3RoID0gNDY7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaiA9IChzdGFydEluZGV4ICsgaSkgJSBsZW5ndGg7XG4gICAgICAgIHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcbiAgICB9XG5cbiAgICB2YXIgZmlmdGVlblRocmVzaG9sZCA9IHRvdGFsU3VtICogLjE1O1xuICAgIHZhciBlaWdodHlUaHJlc2hvbGQgPSB0b3RhbFN1bSAqIC44MDtcbiAgICB2YXIgZWlnaHR5Zml2ZVRocmVzaG9sZCA9IHRvdGFsU3VtICogLjg1O1xuICAgIHZhciBmaWZ0ZWVuSW5kZXhGb3VuZCA9IGZhbHNlLCBcbiAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IGZhbHNlLFxuICAgICAgICBlaWdodHlmaXZlSW5kZXhGb3VuZCA9IGZhbHNlO1xuICAgIHZhciBmaWZ0ZWVuSW5kZXgsIGVpZ2h0eUluZGV4LCBlaWdodHlmaXZlSW5kZXg7XG5cbiAgICB0b3RhbFN1bSA9IDA7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGogPSAoc3RhcnRJbmRleCArIGkpICUgbGVuZ3RoO1xuICAgICAgICB0b3RhbFN1bSArPSBwYXJzZUludChkYXRhW2pdLCAxMCk7XG4gICAgICAgIGlmICghZmlmdGVlbkluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBmaWZ0ZWVuVGhyZXNob2xkKSB7XG4gICAgICAgICAgICBmaWZ0ZWVuSW5kZXggPSBqO1xuICAgICAgICAgICAgZmlmdGVlbkluZGV4Rm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlaWdodHlJbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZWlnaHR5VGhyZXNob2xkKSB7XG4gICAgICAgICAgICBlaWdodHlJbmRleCA9IGo7XG4gICAgICAgICAgICBlaWdodHlJbmRleEZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZWlnaHR5Zml2ZUluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBlaWdodHlmaXZlVGhyZXNob2xkKSB7XG4gICAgICAgICAgICBlaWdodHlmaXZlSW5kZXggPSBqO1xuICAgICAgICAgICAgZWlnaHR5Zml2ZUluZGV4Rm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgY2lyY2xlQ2VudGVyID0gWzAsIDBdO1xuXG4gICAgdmFyIGZpZnRlZW5FbmQgPSBbKGZpZnRlZW5JbmRleCAqIDgpICsgMywgMTAwXTtcbiAgICB2YXIgZWlnaHR5RW5kID0gWyhlaWdodHlJbmRleCAqIDgpICsgMywgMTAwXTtcbiAgICB2YXIgZWlnaHR5Zml2ZUVuZCA9IFsoZWlnaHR5Zml2ZUluZGV4ICogOCkgKyAzLCAxMDBdO1xuXG4gICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgICAgXCJsYWJlbFwiIDogXCIxNSVcIixcbiAgICAgICAgICAgIFwiZGF0YVwiIDogW2NpcmNsZUNlbnRlciwgZmlmdGVlbkVuZF1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgXCJsYWJlbFwiIDogXCI4MCVcIixcbiAgICAgICAgICAgIFwiZGF0YVwiIDogW2NpcmNsZUNlbnRlciwgZWlnaHR5RW5kXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBcImxhYmVsXCIgOiBcIjg1JVwiLFxuICAgICAgICAgICAgXCJkYXRhXCIgOiBbY2lyY2xlQ2VudGVyLCBlaWdodHlmaXZlRW5kXVxuICAgICAgICB9XG4gICAgXTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIEhFTFBFUlMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gZHJhd0xpbmVhclBhdGgoZGF0YSwgbGluZSwgc3ZnKSB7XG4gICAgcmV0dXJuIHN2Zy5hcHBlbmQoXCJwYXRoXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpXG4gICAgICAgIC5hdHRyKFwiZFwiLCBsaW5lKGRhdGEpKTtcbn1cblxuZnVuY3Rpb24gZHJhd1BvbGFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcbiAgICByZXR1cm4gc3ZnLmFwcGVuZChcInBhdGhcIilcbiAgICAgICAgLmRhdHVtKGRhdGEpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpXG4gICAgICAgIC5hdHRyKFwiZFwiLCBsaW5lKTtcbn1cblxuZnVuY3Rpb24gZHJhd0xpbmVhclBvaW50cyhkYXRhLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKSB7XG4gICAgcmV0dXJuIHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKVxuICAgICAgICAuZGF0YShkYXRhKVxuICAgICAgICAuZW50ZXIoKVxuICAgICAgICAuYXBwZW5kKFwiY2lyY2xlXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJwb2ludFwiKVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgICB2YXIgcG9pbnQgPSBBcnJheS5pc0FycmF5KGQpID8gZCA6IFsoaSo4KSArIDMsIGRdO1xuICAgICAgICAgICAgdmFyIGNvb3JzID0gbGluZShbcG9pbnRdKS5zbGljZSgxKS5zbGljZSgwLCAtMSk7XG4gICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBjb29ycyArIFwiKVwiXG4gICAgICAgIH0pXG4gICAgICAgIC5hdHRyKFwiclwiLCAzKVxuICAgICAgICAuYXR0cihcInN0cm9rZVwiLCBcIiMwMDBcIilcbiAgICAgICAgLmF0dHIoXCJmaWxsXCIsZnVuY3Rpb24oZCxpKXtcbiAgICAgICAgICAgIHZhciB2YWwgPSBBcnJheS5pc0FycmF5KGQpID8gZFsxXSA6IGQ7XG4gICAgICAgICAgICByZXR1cm4gY29tcHV0ZUNvbG9yKHZhbCwgYXZlcmFnZXNbaSU0Nl0sIDMpO1xuICAgICAgICB9KVxuICAgICAgICAub24oXCJtb3VzZW92ZXJcIiwgaGFuZGxlUG9pbnRNb3VzZW92ZXIpXG4gICAgICAgIC5vbihcIm1vdXNlb3V0XCIsIGhhbmRsZVBvaW50TW91c2VvdXQpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVQb2ludE1vdXNlb3ZlcihkKSB7XG4gICAgdmFyIHRpcFN0cmluZyA9IEFycmF5LmlzQXJyYXkoZCkgPyBmb3JtYXREYXRlKGRbMF0pICsgXCI6IFwiICArIGRbMV0gOiBcIkF2ZXJhZ2U6IFwiICArIGQ7XG4gICAgdGlwLnNob3codGlwU3RyaW5nKTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgNSk7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIycHhcIik7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdXQoZCkge1xuICAgIHRpcC5oaWRlKCk7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDMpO1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMXB4XCIpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDaGVja2JveCh3cmFwcGVyLCBrZXksIHR5cGUsIHllYXIsIGNoYXJ0cywgZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpIHtcbiAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIik7XG5cbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIilcbiAgICAgICAgLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIilcbiAgICAgICAgLmF0dHIoXCJpZFwiLCB0eXBlICsgXCItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpXG4gICAgICAgIC5hdHRyKFwidmFsdWVcIiwga2V5KVxuICAgICAgICAucHJvcGVydHkoXCJjaGVja2VkXCIsIChrZXkgPT09IHllYXIpID8gdHJ1ZSA6IGZhbHNlKVxuICAgICAgICAub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGgucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjaGFydHMuaGFzT3duUHJvcGVydHkobmV3WWVhcikpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd0xpbmVhclBhdGgoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnKTtcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwibGFiZWxcIilcbiAgICAgICAgLnRleHQoa2V5KVxuICAgICAgICAuYXR0cihcImZvclwiLCB0eXBlICsgXCItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlQ29sb3IgKHZhbHVlLCBtZWRpYW4sIHNjYWxlKSB7XG4gICAgdmFyIGRpZmYgPSB2YWx1ZSAtIG1lZGlhbjtcbiAgICB2YXIgcGVyY2VudF9kaWZmID0gKE1hdGguYWJzKGRpZmYpL21lZGlhbikgKiAxMDAgKiBzY2FsZTtcbiAgICB2YXIgbGlnaHRuZXNzID0gKDEwMCAtIHBlcmNlbnRfZGlmZikgKyBcIiVcIjtcblxuICAgIGlmIChkaWZmID4gMCkge1xuICAgICAgICByZXR1cm4gXCJoc2woOCwgNzklLCBcIiArIGxpZ2h0bmVzcyArIFwiKVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBcImhzbCgyMTksIDc5JSwgXCIgKyBsaWdodG5lc3MgKyBcIilcIjtcbiAgICB9XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gREFURSBIRUxQRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBwYXJzZURhdGUgKGRhdGUpIHtcbiAgICBkYXRlID0gZGF0ZS50b1N0cmluZygpO1xuICAgIHZhciB5ZWFyID0gZGF0ZS5zdWJzdHJpbmcoMCwgNCk7XG4gICAgdmFyIG1vbnRoID0gcGFyc2VJbnQoZGF0ZS5zdWJzdHJpbmcoNCwgNiksIDEwKSAtIDE7XG4gICAgdmFyIGRheSA9IGRhdGUuc3Vic3RyaW5nKDYsIDgpO1xuXG4gICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUp1bGlhbkRheSAoZGF0ZSkge1xuICAgIGlmICh0eXBlb2YoZGF0ZSkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RE9ZKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRhdGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBmb3JtYXREYXRlIChkYXRlKSB7XG4gICAgaWYgKGRhdGUgPT09IFwiQXZlcmFnZVwiKSB7IHJldHVybiBkYXRlOyB9XG5cbiAgICBkYXRlID0gcGFyc2VEYXRlKGRhdGUpO1xuICAgIHJldHVybiBmb3JtYXRNb250aChkYXRlLmdldE1vbnRoKCkpICsgXCIgXCIgKyBvcmRpbmFsX3N1ZmZpeF9vZihkYXRlLmdldERhdGUoKSkgKyBcIiwgXCIgKyBkYXRlLmdldEZ1bGxZZWFyKCk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdE1vbnRoIChtb250aCkge1xuICAgIHN3aXRjaCAobW9udGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuIFwiSmFuLlwiXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBcIkZlYi5cIlxuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gXCJNYXIuXCJcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIFwiQXByLlwiXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiBcIk1heVwiXG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHJldHVybiBcIkp1bi5cIlxuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgICByZXR1cm4gXCJKdWwuXCJcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuIFwiQXVnLlwiXG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiBcIlNlcC5cIlxuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICByZXR1cm4gXCJPY3QuXCJcbiAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgIHJldHVybiBcIk5vdi5cIlxuICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgcmV0dXJuIFwiRGVjLlwiXG4gICAgfVxufVxuXG5mdW5jdGlvbiBvcmRpbmFsX3N1ZmZpeF9vZihkYXkpIHtcbiAgICB2YXIgaiA9IGRheSAlIDEwLFxuICAgICAgICBrID0gZGF5ICUgMTAwO1xuICAgIGlmIChqID09PSAxICYmIGsgIT09IDExKSB7XG4gICAgICAgIHJldHVybiBkYXkgKyBcInN0XCI7XG4gICAgfVxuICAgIGlmIChqID09PSAyICYmIGsgIT09IDEyKSB7XG4gICAgICAgIHJldHVybiBkYXkgKyBcIm5kXCI7XG4gICAgfVxuICAgIGlmIChqID09PSAzICYmIGsgIT09IDEzKSB7XG4gICAgICAgIHJldHVybiBkYXkgKyBcInJkXCI7XG4gICAgfVxuICAgIHJldHVybiBkYXkgKyBcInRoXCI7XG59XG5cbnZhciBNT05USF9MQUJFTFMgPSB7XG4gICAgMDogXCJKYW5cIixcbiAgICAxOiBcIkZlYlwiLFxuICAgIDI6IFwiTWFyXCIsXG4gICAgMzogXCJBcHJcIixcbiAgICA0OiBcIk1heVwiLFxuICAgIDU6IFwiSnVuXCIsXG4gICAgNjogXCJKdWxcIixcbiAgICA3OiBcIkF1Z1wiLFxuICAgIDg6IFwiU2VwXCIsXG4gICAgOTogXCJPY3RcIixcbiAgICAxMDogXCJOb3ZcIixcbiAgICAxMTogXCJEZWNcIlxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2dyYXBoLmpzIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQmluZFRhYkV2ZW50cyAoKSB7XG4gICAgZDMuc2VsZWN0QWxsKFwiLnBhbmVsLXRvcC1idG5cIikub24oXCJjbGlja1wiLCBoYW5kbGVUYWJIZWFkZXJCdG5DbGljayk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrICgpIHtcbiAgICAvLyBJZiB0aGUgc2VjdGlvbiBpcyBhbHJlYWR5IGFjdGl2ZSwgZG8gbm90aGluZ1xuICAgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHJldHVyblxuXG4gICAgW1xuICAgICAgICBkMy5zZWxlY3RBbGwoJy5wYW5lbC10b3AtYnRuJyksXG4gICAgICAgIGQzLnNlbGVjdEFsbCgnLnBhbmVsLXNlY3Rpb24td3JhcHBlcicpXG4gICAgXS5mb3JFYWNoKChzZWxlY3Rpb24pID0+IHtcbiAgICAgICAgc2VsZWN0aW9uLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ2FjdGl2ZScpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3RhYnMuanMiLCJ2YXIgbWFwO1xuXG5leHBvcnQgZnVuY3Rpb24gQ3JlYXRlTWFwIChtYXBDb25maWcpIHtcbiAgICB2YXIgaWQgPSBtYXBDb25maWcuaWQgfHwgXCJtYXBcIjtcbiAgICB2YXIgb3B0aW9ucyA9IG1hcENvbmZpZy5vcHRpb25zIHx8IHtcInNjcm9sbFdoZWVsWm9vbVwiIDogZmFsc2V9O1xuICAgIHZhciBpbml0aWFsQ2VudGVyID0gbWFwQ29uZmlnLmluaXRpYWxDZW50ZXIgfHwgW1wiMzguNVwiLCBcIi04MVwiXTtcbiAgICB2YXIgaW5pdGlhbFpvb20gPSBtYXBDb25maWcuaW5pdGlhbFpvb20gfHwgNjtcblxuICAgIG1hcCA9IEwubWFwKGlkLCBvcHRpb25zKS5zZXRWaWV3KGluaXRpYWxDZW50ZXIsIGluaXRpYWxab29tKTtcbiAgICByZXR1cm4gbWFwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gR2V0TWFwICgpIHtcbiAgICByZXR1cm4gbWFwO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvbWFwLmpzIiwiaW1wb3J0IHtHZXRNYXB9IGZyb20gJy4vbWFwJztcblxuZXhwb3J0IGZ1bmN0aW9uIEJpbmRVcGRhdGVTaGFyZVVybCAobWFwKSB7XG4gICAgbWFwLm9uKFwibW92ZWVuZFwiLCB1cGRhdGVTaGFyZVVybCk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVNoYXJlVXJsIChlKSB7XG4gICAgdmFyIG1hcCA9IEdldE1hcCgpO1xuXG4gICAgdmFyIHBhcmFtcyA9IFtcbiAgICAgICAgbWFrZUNlbnRlclN0cmluZyhtYXApLFxuICAgICAgICBtYWtlWm9vbVN0cmluZyhtYXApLFxuICAgICAgICBtYWtlTGF5ZXJTdHJpbmcobWFwKSxcbiAgICBdO1xuXG4gICAgc2V0U2hhcmVVcmwobWFrZVNoYXJlVXJsKHBhcmFtcykpO1xufVxuXG5mdW5jdGlvbiBtYWtlU2hhcmVVcmwgKHBhcmFtcykge1xuICAgIHJldHVybiBcIj9cIiArIHBhcmFtcy5maWx0ZXIoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAgIT09IHVuZGVmaW5lZCB9KS5qb2luKFwiJlwiKTtcbn1cblxuZnVuY3Rpb24gc2V0U2hhcmVVcmwgKHVybCkge1xuICAgIGlmICh3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcbiAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBcIlwiLCB1cmwpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbWFrZUNlbnRlclN0cmluZyAobWFwKSB7XG4gICAgdmFyIGNlbnRlciA9IG1hcC5nZXRDZW50ZXIoKTtcbiAgICByZXR1cm4gXCJjZW50ZXI9XCIgKyBjZW50ZXIubGF0LnRvU3RyaW5nKCkgKyBcIixcIiArIGNlbnRlci5sbmcudG9TdHJpbmcoKVxufVxuXG5mdW5jdGlvbiBtYWtlWm9vbVN0cmluZyAobWFwKSB7XG4gICAgcmV0dXJuIFwiem9vbT1cIiArIG1hcC5nZXRab29tKCk7XG59XG5cbmZ1bmN0aW9uIG1ha2VMYXllclN0cmluZyAobWFwKSB7XG4gICAgdmFyIGxheWVycyA9IFtdO1xuICAgIG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgIGlmIChsYXllci5vcHRpb25zICYmIGxheWVyLm9wdGlvbnMubGF5ZXJzKSB7XG4gICAgICAgICAgICBsYXllcnMucHVzaChsYXllci5vcHRpb25zLmxheWVycyk7XG4gICAgICAgICAgICBsYXllcnMucHVzaChsYXllci5vcHRpb25zLmhhc093blByb3BlcnR5KFwib3BhY2l0eVwiKSA/IGxheWVyLm9wdGlvbnMub3BhY2l0eSA6IFwiMVwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBcImxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VTaGFyZVVybCAoKSB7XG4gICAgdmFyIHBhcmFtcyA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XG4gICAgaWYgKHBhcmFtcyA9PT0gXCJcIikgcmV0dXJuO1xuXG4gICAgcGFyYW1zID0gZ2V0UGFyYW1zQXJyYXkocGFyYW1zKTtcbiAgICBwYXJhbXMgPSBtYWtlS2V5ZWRQYXJhbXNPYmplY3QocGFyYW1zKTtcblxuICAgIGZvcm1hdFBhcmFtcyhwYXJhbXMpO1xuICAgIHJldHVybiBwYXJhbXM7XG59XG5cbmZ1bmN0aW9uIGdldFBhcmFtc0FycmF5IChwYXJhbXMpIHtcbiAgICBwYXJhbXMgPSBwYXJhbXMuc3Vic3RyaW5nKDEpO1xuICAgIHBhcmFtcyA9IHVubWFuZ2xlUGFyYW1TdHJpbmcocGFyYW1zKTtcbiAgICByZXR1cm4gcGFyYW1zLnNwbGl0KFwiJlwiKTtcbn1cblxuZnVuY3Rpb24gdW5tYW5nbGVQYXJhbVN0cmluZyAocGFyYW1zKSB7XG4gICAgcmV0dXJuIHBhcmFtcy5yZXBsYWNlKC9cXCUyW2N8Q10vZywgXCIsXCIpO1xufVxuXG5mdW5jdGlvbiBtYWtlS2V5ZWRQYXJhbXNPYmplY3QgKHBhcmFtc0Fycikge1xuICAgIHZhciBwYXJzZWRQYXJhbXMgPSB7fTtcbiAgICB2YXIgcGFyYW1QYWlyO1xuICAgIHZhciBpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IHBhcmFtc0Fyci5sZW5ndGg7IGkrKykge1xuICAgICAgICBwYXJhbVBhaXIgPSBwYXJhbXNBcnJbaV0uc3BsaXQoXCI9XCIpO1xuICAgICAgICBwYXJzZWRQYXJhbXNbcGFyYW1QYWlyWzBdXSA9IHBhcmFtUGFpclsxXVxuICAgIH1cblxuICAgIHJldHVybiBwYXJzZWRQYXJhbXM7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFBhcmFtcyAocGFyYW1zKSB7XG4gICAgaWYgKHBhcmFtcy5jZW50ZXIpIHBhcmFtcy5jZW50ZXIgPSBmb3JtYXRDZW50ZXJQYXJhbShwYXJhbXMuY2VudGVyKTtcbiAgICBpZiAocGFyYW1zLmxheWVycykgcGFyYW1zLmxheWVycyA9IGZvcm1hdExheWVyUGFyYW0ocGFyYW1zLmxheWVycyk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdENlbnRlclBhcmFtIChjZW50ZXIpIHtcbiAgICByZXR1cm4gY2VudGVyLnNwbGl0KFwiLFwiKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TGF5ZXJQYXJhbSAobGF5ZXJzKSB7XG4gICAgdmFyIGZvcm1hdHRlZExheWVycyA9IHtcbiAgICAgICAgXCJlbmFibGVkTGF5ZXJzXCI6IFtdLFxuICAgICAgICBcIm9wYWNpdHlWYWxzXCI6IHt9XG4gICAgfTtcbiAgICB2YXIgbGF5ZXJJZDtcbiAgICB2YXIgaTtcblxuICAgIGxheWVycyA9IGxheWVycy5zcGxpdChcIixcIik7XG4gICAgZm9yIChpID0gMDsgaSA8IGxheWVycy5sZW5ndGg7IGkgPSBpICsgMikge1xuICAgICAgICBsYXllcklkID0gbGF5ZXJzW2ldO1xuICAgICAgICBmb3JtYXR0ZWRMYXllcnMuZW5hYmxlZExheWVycy5wdXNoKGxheWVySWQpO1xuICAgICAgICBmb3JtYXR0ZWRMYXllcnMub3BhY2l0eVZhbHNbbGF5ZXJJZF0gPSBsYXllcnNbaSsxXTtcbiAgICB9XG5cbiAgICByZXR1cm4gZm9ybWF0dGVkTGF5ZXJzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnIChjb25maWcpIHtcbiAgICB2YXIgc2hhcmUgPSBwYXJzZVNoYXJlVXJsKCk7XG4gICAgaWYgKCFzaGFyZSkgcmV0dXJuO1xuICAgIGlmIChzaGFyZS5jZW50ZXIpIGNvbmZpZy5tYXAuaW5pdGlhbENlbnRlciA9IHNoYXJlLmNlbnRlcjtcbiAgICBpZiAoc2hhcmUuem9vbSkgY29uZmlnLm1hcC5pbml0aWFsWm9vbSA9IHNoYXJlLnpvb207XG4gICAgaWYgKHNoYXJlLmxheWVycykgYWRkTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlLmxheWVycywgY29uZmlnKTtcbn1cblxuZnVuY3Rpb24gYWRkTGF5ZXJTZXR0aW5nc1RvQ29uZmlnIChzaGFyZUxheWVyU2V0dGluZ3MsIGNvbmZpZykge1xuICAgIHZhciBlbmFibGVkTGF5ZXJzID0gc2hhcmVMYXllclNldHRpbmdzLmVuYWJsZWRMYXllcnM7XG4gICAgY29uZmlnW1wiYWN0aXZlLWxheWVyc1wiXSA9IGVuYWJsZWRMYXllcnM7XG5cbiAgICB2YXIgaSwgaiwgcHJvcCwgbGF5ZXJncm91cDtcbiAgICB2YXIgZW5hYmxlZExheWVyO1xuICAgIHZhciBmb3VuZExheWVyO1xuICAgIHZhciBsYXllcnMgPSBjb25maWcubGF5ZXJzO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGVuYWJsZWRMYXllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm91bmRMYXllciA9IGZhbHNlO1xuICAgICAgICBlbmFibGVkTGF5ZXIgPSBlbmFibGVkTGF5ZXJzW2ldO1xuICAgICAgICBmb3IgKHByb3AgaW4gbGF5ZXJzKSB7XG4gICAgICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xuICAgICAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsYXllcmdyb3VwLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxheWVyZ3JvdXBbal0uaWQgPT09IGVuYWJsZWRMYXllcikge1xuICAgICAgICAgICAgICAgICAgICBsYXllcmdyb3VwW2pdLm9wYWNpdHkgPSBzaGFyZUxheWVyU2V0dGluZ3Mub3BhY2l0eVZhbHNbZW5hYmxlZExheWVyXTtcbiAgICAgICAgICAgICAgICAgICAgZm91bmRMYXllciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmb3VuZExheWVyKSBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3NoYXJlLmpzIiwiaW1wb3J0IHtHZXRNYXB9IGZyb20gXCIuL21hcFwiO1xuXG4vKipcbiAqIE5vdGU6IGxheWVyIGlzIG5vdCB0aGUgbGVhZmxldCBjb25jZXB0IG9mIGEgbGF5ZXIsIGJ1dCByYXRoZXIgdGhlIGludGVybmFsXG4gKiAgICAgICBvYmplY3Qgd2hpY2ggdHJhY2tzIHRoZW0uIGxheWVyLm1hcExheWVyIGlzIHRoZSBwb2ludGVyIHRvIHRoZVxuICogICAgICAgbGVhZmxldCBsYXllci5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gQ3JlYXRlRGVmYXVsdExheWVycyAobGF5ZXJzLCBkZWZhdWx0TGF5ZXJzKSB7XG4gICAgdmFyIGksIGosIHByb3AsIGxheWVyZ3JvdXA7XG4gICAgdmFyIGRlZmF1bHRMYXllcjtcbiAgICB2YXIgZm91bmRMYXllcjtcblxuICAgIGlmICghZGVmYXVsdExheWVycyB8fCBkZWZhdWx0TGF5ZXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGRlZmF1bHRMYXllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZm91bmRMYXllciA9IGZhbHNlO1xuICAgICAgICBkZWZhdWx0TGF5ZXIgPSBkZWZhdWx0TGF5ZXJzW2ldO1xuICAgICAgICBmb3IgKHByb3AgaW4gbGF5ZXJzKSB7XG4gICAgICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xuICAgICAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsYXllcmdyb3VwLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxheWVyZ3JvdXBbal0uaWQgPT09IGRlZmF1bHRMYXllcikge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGVMYXllcihsYXllcmdyb3VwW2pdKTtcbiAgICAgICAgICAgICAgICAgICAgZm91bmRMYXllciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmb3VuZExheWVyKSBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUxheWVyIChsYXllciwgbGF5ZXJEaXYpIHtcbiAgICBpZiAoIWxheWVyLmFjdGl2ZSkge1xuICAgICAgICBlbmFibGVMYXllcihsYXllciwgbGF5ZXJEaXYpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRpc2FibGVMYXllcihsYXllciwgbGF5ZXJEaXYpO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZUxheWVyIChsYXllcikge1xuICAgIHZhciBtYXAgPSBHZXRNYXAoKTtcblxuICAgIGxheWVyLmFjdGl2ZSA9IHRydWU7XG4gICAgbGF5ZXIubWFwTGF5ZXIgPSBsYXllci5tYXBMYXllciB8fCBtYWtlV21zVGlsZUxheWVyKGxheWVyKTtcbiAgICBtYXAuYWRkTGF5ZXIobGF5ZXIubWFwTGF5ZXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZUxheWVyIChsYXllcikge1xuICAgIHZhciBtYXAgPSBHZXRNYXAoKTtcblxuICAgIGxheWVyLmFjdGl2ZSA9IGZhbHNlO1xuICAgIGlmIChsYXllci5tYXBMYXllciAmJiBtYXAuaGFzTGF5ZXIobGF5ZXIubWFwTGF5ZXIpKSB7XG4gICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllci5tYXBMYXllcik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBtYWtlV21zVGlsZUxheWVyIChsYXllcikge1xuICAgIHJldHVybiBMLnRpbGVMYXllci53bXMobGF5ZXIudXJsLCB7XG4gICAgICAgIGxheWVyczogbGF5ZXIuaWQsXG4gICAgICAgIHRyYW5zcGFyZW50OiBsYXllci50cmFuc3BhcmVudCB8fCB0cnVlLFxuICAgICAgICB2ZXJzaW9uOiBsYXllci52ZXJzaW9uIHx8ICcxLjMuMCcsXG4gICAgICAgIGNyczogbGF5ZXIuY3JzIHx8IEwuQ1JTLkVQU0c0MzI2LFxuICAgICAgICBmb3JtYXQ6IGxheWVyLmZvcm1hdCB8fCAnaW1hZ2UvcG5nJyxcbiAgICAgICAgb3BhY2l0eTogbGF5ZXIub3BhY2l0eSB8fCBcIjFcIlxuICAgIH0pO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvdG9nZ2xlTGF5ZXIuanMiXSwic291cmNlUm9vdCI6IiJ9