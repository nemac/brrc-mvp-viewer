!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),i=n(3),c=r(i),s=n(22),u=n(23),l=n(24),f=n(25),p=r(f),d=n(26),h=n(27),v=n(35),y=n(37),m=r(y),b=(n(29),function(e){(0,o.default)(e,g),(0,l.SetupGraphs)(),(0,p.default)()}),g=function(e){(0,h.AddShareSettingsToConfig)(e);var t=(0,d.CreateMap)(e.map);(0,u.CreateBaseLayers)(t,e.baselayers),(0,v.CreateDefaultLayers)(e.layers,e["active-layers"]),(0,s.SetupPanel)(e.layers,e.layout),(0,c.default)(t),(0,m.default)(e.logo),(0,l.BindGraphEvents)(t),(0,h.BindUpdateShareUrl)(t)};window.Base=b,t.default={Base:b}},function(e,t){"use strict";function n(e,t){r(e,t)}function r(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState){try{var e=JSON.parse(n.responseText)}catch(e){console.log("ERROR: Malformed JSON in config file."),console.log(e)}a(e),o(e),t(e)}},n.open("GET",e,!0),n.send(),console.log("hi")}function a(e){e.map||(e.map={})}function o(e){var t,n,r=e.layers,a=e.mapserverUrl;e["active-layers"];for(var o in r){if(!r.hasOwnProperty(o))return;for(t=r[o],n=0;n<t.length;n++)i(t[n],a)}}function i(e,t){e.url=e.url||t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){var t=new a.EsriProvider,n=new a.GeoSearchControl({provider:t,showMarker:!1,autoComplete:!1});e.addControl(n),L.DomEvent.on(n.searchElement.elements.container,"click",function(e){L.DomEvent.stopPropagation(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(4)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5);Object.defineProperty(t,"GeoSearchControl",{enumerable:!0,get:function(){return r(a).default}});var o=n(13);Object.defineProperty(t,"SearchElement",{enumerable:!0,get:function(){return r(o).default}});var i=n(17);Object.defineProperty(t,"BingProvider",{enumerable:!0,get:function(){return r(i).default}});var c=n(19);Object.defineProperty(t,"EsriProvider",{enumerable:!0,get:function(){return r(c).default}});var s=n(20);Object.defineProperty(t,"GoogleProvider",{enumerable:!0,get:function(){return r(s).default}});var u=n(21);Object.defineProperty(t,"OpenStreetMapProvider",{enumerable:!0,get:function(){return r(u).default}});var l=n(18);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return r(l).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){if(!L||!L.Control||!L.Control.extend)throw new Error("Leaflet must be loaded before instantiating the GeoSearch control");for(var e=L.Control.extend(y),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e,[null].concat(n)))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=(r(o),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});t.default=a;var c=n(12),s=r(c),u=n(13),l=r(u),f=n(16),p=r(f),d=n(14),h=n(15),v=function(){return{position:"topleft",style:"button",showMarker:!0,showPopup:!1,marker:{icon:new L.Icon.Default,draggable:!1},maxMarkers:1,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",notFoundMessage:"Sorry, that address could not be found.",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",msgbox:"leaflet-bar message",form:"",input:""},autoComplete:!0,autoCompleteDelay:250}},y={initialize:function(e){var t=this;this.markers=new L.FeatureGroup,this.options=i({},v(),e);var n=this.options,r=n.style,a=n.classNames,o=n.searchLabel,c=n.autoComplete,u=n.autoCompleteDelay;"button"!==r&&(this.options.classNames.container+=" "+e.style),this.searchElement=new l.default(i({},this.options,{handleSubmit:function(e){return t.onSubmit(e)}}));var f=this.searchElement.elements,h=f.container,y=f.form,m=f.input;h.addEventListener("dblclick",function(e){e.stopPropagation()});var b=(0,d.createElement)("a",a.button,h);b.title=o,b.href="#",b.addEventListener("click",function(e){t.onClick(e)},!1),c&&(this.resultList=new p.default({handleClick:function(e){var n=e.result;m.value=n.label,t.onSubmit({query:n.label})}}),y.appendChild(this.resultList.elements.container),m.addEventListener("keyup",(0,s.default)(function(e){return t.autoSearch(e)},u),!0),m.addEventListener("keydown",function(e){return t.selectResult(e)},!0),m.addEventListener("keydown",function(e){return t.clearResults(e)},!0)),this.elements={button:b}},onAdd:function(e){var t=this.options,n=t.showMarker,r=t.style;if(this.map=e,n&&this.markers.addTo(e),"bar"===r){var a=this.searchElement.elements.form,o=e.getContainer().querySelector(".leaflet-control-container"),i=(0,d.createElement)("div","leaflet-control-geosearch bar");i.appendChild(a),o.appendChild(i),this.elements.container=i}return this.searchElement.elements.container},onRemove:function(){var e=this.elements.container;return e&&e.remove(),this},onClick:function(e){e.preventDefault();var t=this.searchElement.elements,n=t.container,r=t.input;n.classList.contains("active")?(0,d.removeClassName)(n,"active"):((0,d.addClassName)(n,"active"),r.focus())},selectResult:function(e){if([h.ARROW_DOWN_KEY,h.ARROW_UP_KEY].includes(e.keyCode)){e.preventDefault();var t=this.searchElement.elements.input,n=this.resultList,r=this.resultList.count()-1,a="ArrowDown"===e.code?1+~~n.selected:~~n.selected-1,o=a<0?r:a>r?0:a,i=n.select(o);t.value=i.label}},clearResults:function(e){e.keyCode===h.ESCAPE_KEY&&this.resultList.clear()},autoSearch:function(e){return new Promise(function(t,n){var r,a,o;return h.SPECIAL_KEYS.includes(e.keyCode)?t():(r=e.target.value,a=this.options.provider,a.search({query:r}).then(function(e){return o=e,this.resultList.render(o),t()}.$asyncbind(this,n),n))}.$asyncbind(this))},onSubmit:function(e){return new Promise(function(t,n){var r,a;return r=this.options.provider,r.search(e).then(function(e){return a=e,a&&a.length>0&&this.showResult(a[0]),t()}.$asyncbind(this,n),n)}.$asyncbind(this))},showResult:function(e){var t=Object.keys(this.markers._layers);t.length>=this.options.maxMarkers&&this.markers.removeLayer(t[0]);var n=this.addMarker(e);this.centerMap(e),this.map.fireEvent("geosearch/showlocation",{location:e,marker:n})},addMarker:function(e){var t=this.options,n=t.marker,r=t.showPopup,a=new L.Marker([e.y,e.x],n);return a.bindPopup(e.label),this.markers.addLayer(a),r&&a.openPopup(),a},centerMap:function(e){var t=this.options,n=t.retainZoomLevel,r=t.animateZoom,a=new L.LatLngBounds(e.bounds),o=a.isValid()?a:this.markers.getBounds();!n&&a.isValid()?this.map.fitBounds(o,{animate:r}):this.map.setView(o.getCenter(),this.getZoom(),{animate:r})},getZoom:function(){var e=this.options,t=e.retainZoomLevel,n=e.zoomLevel;return t?this.map.getZoom():n}}},function(e,t,n){"use strict";function r(e,t){if(Function.prototype.$asyncspawn||Object.defineProperty(Function.prototype,"$asyncspawn",{value:r,enumerable:!1,configurable:!0,writable:!0}),this instanceof Function){var n=this;return new e(function(e,r){function a(t,n){var i;try{if(i=t.call(o,n),i.done){if(i.value!==e){if(i.value&&i.value===i.value.then)return i.value(e,r);e&&e(i.value),e=null}return}i.value.then?i.value.then(function(e){a(o.next,e)},function(e){a(o.throw,e)}):a(o.next,i.value)}catch(e){return r&&r(e),void(r=null)}}var o=n.call(t,e,r);a(o.next)})}}var a=function(e,t){for(var n=t.toString(),r="return "+n,a=n.match(/.*\(([^)]*)\)/)[1],o=/['"]!!!([^'"]*)['"]/g,i=[];;){var c=o.exec(r);if(!c)break;i.push(c)}return i.reverse().forEach(function(t){r=r.slice(0,t.index)+e[t[1]]+r.substr(t.index+t[0].length)}),r=r.replace(/\/\*[^*]*\*\//g," ").replace(/\s+/g," "),new Function(a,r)()}({zousan:n(7).toString(),thenable:n(11).toString()},function e(t,n){function r(){return a.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,a){return function o(i){for(;i;){if(i.then)return i=i.then(o,r),a?void 0:i;try{if(i.pop){if(i.length)return i.pop()?t.call(e):i;i=n}else i=i.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable="!!!thenable"(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory="!!!zousan")());var a=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return a.apply(t,arguments)}catch(e){return n(e)}}}});a(),r(),e.exports={$asyncbind:a,$asyncspawn:r}},function(e,t,n){(function(t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){function a(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function o(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function i(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===(void 0===t?"undefined":r(t))&&t.nextTick||"function"==typeof n&&n||function(e){setTimeout(e,0)};var c=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===a&&(n.splice(0,a),r=0)}}var n=[],r=0,a=1024;return function(a){n.push(a),n.length-r==1&&e(t)}}();return a.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":r(e))))try{var n=0,a=e.then;if("function"==typeof a)return void a.call(e,function(e){n++||t.resolve(e)},function(e){n++||t.reject(e)})}catch(e){return void(n||this.reject(e))}this.state=o,this.v=e,t.c&&c(function(){for(var n=0,r=t.c.length;n<r;n++)o(t.c[n],e)})}},reject:function(e){if(void 0===this.state){this.state=i,this.v=e;var t=this.c;t&&c(function(){for(var n=0,r=t.length;n<r;n++)i(t[n],e)})}},then:function(e,t){var n=new a,r={y:e,n:t,p:n};if(void 0===this.state)this.c?this.c.push(r):this.c=[r];else{var o=this.state,i=this.v;c(function(){o(r,i)})}return n}},a.resolve=function(e){if(e&&e instanceof a)return e;var t=new a;return t.resolve(e),t},a.reject=function(e){if(e&&e instanceof a)return e;var t=new a;return t.reject(e),t},a.version="2.3.3-nodent",a}}).call(t,n(8),n(9).setImmediate)},function(e,t){"use strict";function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function i(){v&&d&&(v=!1,d.length?h=d.concat(h):y=-1,h.length&&c())}function c(){if(!v){var e=a(i);v=!0;for(var t=h.length;t;){for(d=h,h=[];++y<t;)d&&d[y].run();y=-1,t=h.length}d=null,v=!1,o(e)}}function s(e,t){this.fun=e,this.array=t}function u(){}var l,f,p=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,h=[],v=!1,y=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new s(e,t)),1!==h.length||v||a(c)},s.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";function r(e,t){this._id=e,this._clearFn=t}var a=Function.prototype.apply;t.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(10),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){"use strict";!function(e,n){function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[s]=r,c(s),s++}function a(e){delete u[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function i(e){if(l)setTimeout(i,0,e);else{var t=u[e];if(t){l=!0;try{o(t)}finally{a(e),l=!1}}}}if(!e.setImmediate){var c,s=1,u={},l=!1,f=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){i(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},c=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;c=function(t){var n=f.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(i,0,e)}}(),p.setImmediate=r,p.clearImmediate=a}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(t,function(){return this}(),n(8))},function(e,t){"use strict";e.exports=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,a){try{var o=a?a(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));e(o)?o.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(o)}catch(e){n.reject(e)}}function n(){}function r(e){}function a(e,t){this.resolve=e,this.reject=t}function o(r,a){var o=new n;try{this._resolver(function(n){return e(n)?n.then(r,a):t(o,n,r)},function(e){t(o,e,a)})}catch(e){t(o,e,a)}return o}function i(e){this._resolver=e,this.then=o}return n.prototype={resolve:r,reject:r,then:a},i.resolve=function(e){return i.isThenable(e)?e:{then:function(t){return t(e)}}},i.isThenable=e,i}},function(e,t){(function(t){"use strict";function n(e,t,n){function a(t){var n=v,r=y;return v=y=void 0,O=t,b=e.apply(r,n)}function o(e){return O=e,g=setTimeout(l,t),S?a(e):b}function c(e){var n=e-w,r=e-O,a=t-n;return x?k(a,m-r):a}function u(e){var n=e-w,r=e-O;return void 0===w||n>=t||n<0||x&&r>=m}function l(){var e=E();if(u(e))return f(e);g=setTimeout(l,c(e))}function f(e){return g=void 0,j&&v?a(e):(v=y=void 0,b)}function p(){void 0!==g&&clearTimeout(g),O=0,v=w=y=g=void 0}function d(){return void 0===g?b:f(E())}function h(){var e=E(),n=u(e);if(v=arguments,y=this,w=e,n){if(void 0===g)return o(w);if(x)return g=setTimeout(l,t),a(w)}return void 0===g&&(g=setTimeout(l,t)),b}var v,y,m,b,g,w,O=0,S=!1,x=!1,j=!0;if("function"!=typeof e)throw new TypeError(s);return t=i(t)||0,r(n)&&(S=!!n.leading,x="maxWait"in n,m=x?_(i(n.maxWait)||0,t):m,j="trailing"in n?!!n.trailing:j),h.cancel=p,h.flush=d,h}function r(e){var t=void 0===e?"undefined":c(e);return!!e&&("object"==t||"function"==t)}function a(e){return!!e&&"object"==(void 0===e?"undefined":c(e))}function o(e){return"symbol"==(void 0===e?"undefined":c(e))||a(e)&&w.call(e)==l}function i(e){if("number"==typeof e)return e;if(o(e))return u;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(f,"");var n=d.test(e);return n||h.test(e)?v(e.slice(2),n?2:8):p.test(e)?u:+e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="Expected a function",u=NaN,l="[object Symbol]",f=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,h=/^0o[0-7]+$/i,v=parseInt,y="object"==(void 0===t?"undefined":c(t))&&t&&t.Object===Object&&t,m="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,b=y||m||Function("return this")(),g=Object.prototype,w=g.toString,_=Math.max,k=Math.min,E=function(){return b.Date.now()};e.exports=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=(function(e){e&&e.__esModule?e:{default:e}}(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=n(14),c=n(15),s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.handleSubmit,o=void 0===a?function(){}:a,c=n.searchLabel,s=void 0===c?"search":c,u=n.classNames,l=void 0===u?{}:u;r(this,e);var f=(0,i.createElement)("div",["geosearch",l.container].join(" ")),p=(0,i.createElement)("form",["",l.form].join(" "),f),d=(0,i.createElement)("input",["glass",l.input].join(" "),p);d.type="text",d.placeholder=s,d.addEventListener("input",function(e){t.onInput(e)},!1),d.addEventListener("keyup",function(e){t.onKeyUp(e)},!1),d.addEventListener("keypress",function(e){t.onKeyPress(e)},!1),d.addEventListener("focus",function(e){t.onFocus(e)},!1),d.addEventListener("blur",function(e){t.onBlur(e)},!1),this.elements={container:f,form:p,input:d},this.handleSubmit=o}return o(e,[{key:"onFocus",value:function(){(0,i.addClassName)(this.elements.form,"active")}},{key:"onBlur",value:function(){(0,i.removeClassName)(this.elements.form,"active")}},{key:"onSubmit",value:function(e){return new Promise(function(t,n){var r,a,o;return e.preventDefault(),e.stopPropagation(),r=this.elements,a=r.input,o=r.container,(0,i.removeClassName)(o,"error"),(0,i.addClassName)(o,"pending"),this.handleSubmit({query:a.value}).then(function(e){return(0,i.removeClassName)(o,"pending"),t()}.$asyncbind(this,n),n)}.$asyncbind(this))}},{key:"onInput",value:function(){var e=this.elements.container;this.hasError&&((0,i.removeClassName)(e,"error"),this.hasError=!1)}},{key:"onKeyUp",value:function(e){var t=this.elements,n=t.container,r=t.input;e.keyCode===c.ESCAPE_KEY&&((0,i.removeClassName)(n,"pending"),(0,i.removeClassName)(n,"active"),r.value="",document.body.focus(),document.body.blur())}},{key:"onKeyPress",value:function(e){e.keyCode===c.ENTER_KEY&&this.onSubmit(e)}},{key:"setQuery",value:function(e){this.elements.input.value=e}}]),e}();t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.createElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElement(e);return r.className=t,n&&n.appendChild(r),r};t.createScriptElement=function(e,t){var r=n("script",null,document.body);return r.setAttribute("type","text/javascript"),new Promise(function(n){window[t]=function(e){r.remove(),delete window[t],n(e)},r.setAttribute("src",e)})},t.addClassName=function(e,t){e&&!e.classList.contains(t)&&e.classList.add(t)},t.removeClassName=function(e,t){e&&e.classList.contains(t)&&e.classList.remove(t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.ENTER_KEY=13,r=t.ESCAPE_KEY=27,a=t.ARROW_DOWN_KEY=40,o=t.ARROW_UP_KEY=38,i=t.ARROW_LEFT_KEY=37,c=t.ARROW_RIGHT_KEY=39;t.SPECIAL_KEYS=[n,r,a,o,i,c]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(14),i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join(" ").trim()},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.handleClick,a=void 0===n?function(){}:n,c=t.classNames,u=void 0===c?{}:c;r(this,e),s.call(this),this.props={handleClick:a,classNames:u},this.selected=-1;var l=(0,o.createElement)("div",i("results",u.container)),f=(0,o.createElement)("div",i(u.item));l.addEventListener("click",this.onClick,!0),this.elements={container:l,resultItem:f}}return a(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.elements,n=t.container,r=t.resultItem;this.clear(),e.forEach(function(e,t){var a=r.cloneNode(!0);a.setAttribute("data-key",t),a.innerHTML=e.label,n.appendChild(a)}),e.length>0&&(0,o.addClassName)(n,"active"),this.results=e}},{key:"select",value:function(e){var t=this.elements.container;return Array.from(t.children).forEach(function(t,n){return n===e?(0,o.addClassName)(t,"active"):(0,o.removeClassName)(t,"active")}),this.selected=e,this.results[e]}},{key:"count",value:function(){return this.results.length}},{key:"clear",value:function(){var e=this.elements.container;for(this.selected=-1;e.lastChild;)e.removeChild(e.lastChild);(0,o.removeClassName)(e,"active")}}]),e}(),s=function(){var e=this;this.onClick=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.target,r=e.props.handleClick,a=e.elements.container;if(n.parentNode===a&&n.hasAttribute("data-key")){var o=n.getAttribute("data-key");r({result:e.results[o]})}}};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),u=(r(s),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(18),p=r(f),d=n(14),h=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=e.jsonp,a=this.options.params;return n+"//dev.virtualearth.net/REST/v1/Locations?"+this.getParamString(u({},a,{query:t,jsonp:r}))}},{key:"parse",value:function(e){var t=e.data;return 0===t.resourceSets.length?[]:t.resourceSets[0].resources.map(function(e){return{x:e.point.coordinates[1],y:e.point.coordinates[0],label:e.address.formattedAddress,bounds:[[e.bbox[0],e.bbox[1]],[e.bbox[2],e.bbox[3]]],raw:e}})}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o="BING_JSONP_CB_"+Date.now(),i=this.endpoint({query:r,protocol:a,jsonp:o}),(0,d.createScriptElement)(i,o).then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),t}(p.default);t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=(function(e){e&&e.__esModule?e:{default:e}}(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.options=t}return o(e,[{key:"getParamString",value:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o=this.endpoint({query:r,protocol:a}),fetch(o).then(function(e){return i=e,i.json().then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),l=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find?"+this.getParamString(c({},r,{f:"json",text:t}))}},{key:"parse",value:function(e){return e.data.locations.map(function(e){return{x:e.feature.geometry.x,y:e.feature.geometry.y,label:e.name,bounds:[[e.extent.ymin,e.extent.xmin],[e.extent.ymax,e.extent.xmax]],raw:e}})}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),l=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params,a=this.getParamString(c({},r,{address:t}));return(r&&r.key?"https:":n)+"//maps.googleapis.com/maps/api/geocode/json?"+a}},{key:"parse",value:function(e){return e.data.results.map(function(e){return{x:e.geometry.location.lng,y:e.geometry.location.lat,label:e.formatted_address,bounds:[[e.geometry.viewport.southwest.lat,e.geometry.viewport.southwest.lng],[e.geometry.viewport.northeast.lat,e.geometry.viewport.northeast.lng]],raw:e}})}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),l=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//nominatim.openstreetmap.org/search?"+this.getParamString(c({},r,{format:"json",q:t}))}},{key:"parse",value:function(e){return e.data.map(function(e){return{x:e.lon,y:e.lat,label:e.display_name,bounds:[[parseFloat(e.boundingbox[0]),parseFloat(e.boundingbox[2])],[parseFloat(e.boundingbox[1]),parseFloat(e.boundingbox[3])]],raw:e}})}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e,t){l(u(t["layer-groups-order"]),e),o(),a()}function a(){document.getElementById("right-panel").onscroll=c}function o(){d3.select("#right-panel-drag-overlay").call(d3.drag().on("drag",function(){i.call(this)}))}function i(){c(),s()}function c(){var e,t=d3.select("#right-panel"),n=t.property("offsetHeight"),r=document.getElementById("right-panel-drag-overlay"),a=document.getElementById("right-panel-header");if(t.classed("graphs-active")){var o=document.getElementById("graph-list");e=a.scrollHeight+o.scrollHeight}else{var i=document.getElementById("layer-list");e=a.scrollHeight+i.scrollHeight}e=e>n?e+"px":null,r.style.height=e}function s(){var e=d3.select("#right-panel"),t=+e.style("min-width").slice(0,-2),n=e.property("clientWidth"),r=document.getElementById("wrapper"),a=r.clientWidth,o=document.getElementById("map-wrapper"),i=d3.event.sourceEvent.x,c=a-i-n,s=n+c;s=s<t?t:s>a?a:s,o.style.paddingRight=s+"px",e.style("width",s+"px")}function u(e){return d3.select("#layer-list").selectAll(".layer-group-wrapper").data(e).enter().append("div").attr("class","layer-group-wrapper").attr("id",function(e){return e.id}).classed("active",function(e){return e.active}).each(function(e){d3.select(this).append("div").attr("class","layer-group-btn btn").on("click",function(e){e.active=!e.active,d3.select(this.parentNode).classed("active",function(){return e.active}),c()}).text(e.name)}).append("div").attr("class","layer-group")}function l(e,t){e.selectAll(".layer-select").data(function(e){return t[e.id]}).enter().append("div").attr("class","layer-select").each(function(e){var t=(this.parentNode.parentNode.id,d3.select(this));f(e,t),p(e,t),d(e,t),h(e,t)})}function f(e,t){t.append("input").attr("type","checkbox").attr("id",function(e){return e.id}).attr("checked",function(e){return e.active?"checked":null}).on("click",function(e){(0,y.toggleLayer)(e),t.select(".layer-tools-wrapper").classed("active",e.active),e.active&&(0,m.setSliderInitialPos)(e,t)})}function p(e,t){t.append("label").attr("for",function(e){return e.id}).attr("class","layer-label").html(function(e){return e.name})}function d(e,t){e.info&&""!==e.info&&(t.append("div").attr("class","layer-info-btn").text("(?)").on("click",function(){d3.select(this.parentNode).select(".layer-info-wrapper").classed("active",function(){return!d3.select(this).classed("active")})}),t.append("div").attr("class","layer-info-wrapper").text(function(e){return e.info}))}function h(e,t){var n=t.append("div").attr("class","layer-tools-wrapper").classed("active",function(){return e.active});(0,m.makeOpacitySlider)(e,n),v(e,n)}function v(e,t){t.append("div").attr("class","legend-wrapper").append("img").attr("src",e.legend||"mean_ndvi_legend.jpg")}Object.defineProperty(t,"__esModule",{value:!0}),t.SetupPanel=r,t.updatePanelDragOverlayHeight=c;var y=n(35),m=n(36);n(27)},function(e,t,n){"use strict";function r(e,t){t=t||[{id:"carto-light-default",url:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attributions">CARTO</a>'}],f=t;var n,r,o;for(n=0;n<t.length;n++)o=t[n],o.active&&(r=u(o),o.layer=r,r.addTo(e));a(t)}function a(e){var t=document.createElement("div");t.className="baselayer-ui";for(var n,r,a,i,c=0,s=e.length;c<s;c++)i=e[c],i.hasOwnProperty("image")&&(n=document.createElement("div"),n.setAttribute("data-layer",i.id),r=document.createElement("img"),r.setAttribute("src",i.image),r.setAttribute("alt",i.label),r.setAttribute("title",i.label),a=document.createElement("div"),a.textContent=i.label,n.appendChild(r),n.appendChild(a),n.addEventListener("click",o),d3.select(n).classed("base-selector",!0).classed("active",i.active),t.appendChild(n));document.getElementsByClassName("leaflet-bottom leaflet-left")[0].appendChild(t)}function o(e){e.stopPropagation();var t=this.getAttribute("data-layer");i(this),c(),s(t),(0,d.updateShareUrl)()}function i(e){d3.select(".base-selector.active").classed("active",!1),d3.select(e).classed("active",!0)}function c(){var e=(0,p.GetMap)();e.eachLayer(function(t){t.options.type===h&&e.removeLayer(t)})}function s(e){for(var t,n=(0,p.GetMap)(),r=0,a=f.length;r<a;r++)if(t=f[r],t.id===e){t.layer||(t.layer=u(t)),t.layer.addTo(n),t.layer.bringToBack();break}}function u(e){return L.tileLayer(e.url,l(e))}function l(e){var t={};return e.id&&(t.id=e.id),e.attribution&&(t.attribution=e.attribution),e.subdomains&&(t.subdomains=e.subdomains),t.type=h,t}Object.defineProperty(t,"__esModule",{value:!0}),t.BASE_LAYER_TYPE=void 0,t.CreateBaseLayers=r;var f,p=n(26),d=n(27),h=t.BASE_LAYER_TYPE="baselayer"},function(e,t,n){"use strict";function r(){d3.selectAll(".graph-type-btn").on("click",d),a(),I=d3.tip().attr("class","d3-tip").html(function(e){return e})}function a(){Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100!=0||e%400==0)},Date.prototype.getDOY=function(){var e=[0,31,59,90,120,151,181,212,243,273,304,334],t=this.getMonth(),n=this.getDate(),r=e[t]+n;return t>1&&this.isLeapYear()&&r++,r}}function o(e){e.on("click",i)}function i(e){var t=this,n=e.latlng.lat,r=e.latlng.lng,a=h(n,r),o=c(t,n,r);d3.select(a).on("mouseenter",function(){o.setIcon(D)}),d3.select(a).on("mouseleave",function(){o.setIcon(B)}),s(t,a,o)}function c(e,t,n){return L.marker([t,n],{icon:B}).addTo(e)}function s(e,t,n){var r=u();t.appendChild(r),d3.select(r).on("click",function(){document.getElementById("graph-list").removeChild(t),e.removeLayer(n),(0,N.updatePanelDragOverlayHeight)()})}function u(){var e=document.createElement("button");return e.className="remove-graph",e.innerText=String.fromCharCode("10005"),e.setAttribute("title","Remove graph"),e}function l(e,t,n){var r="https://fcav-ndvi.nemac.org/landdat_product.cgi?args="+t+","+e,a=new XMLHttpRequest;a.addEventListener("load",function(){var r=this.responseText;r=r.replace(/\[|\]|\'/g,"").split(", "),v(r,n,e,t),(0,N.updatePanelDragOverlayHeight)()}),a.open("GET",r),a.send()}function f(e){var t;for(t=0;t<e.length;t++)e[t]=e[t].split(",");return e}function p(e){var t,n,r,a,o={};for(o.keys=[],r=0;r<e.length;r++)t=e[r],n=t[0].substring(0,4),o.hasOwnProperty(n)||(o[n]=[],o.keys.push(n)),o[n].push(t);var i,c;for(o.medians=[],r=0;r<46;r++){for(i=[],a=r;a<e.length;a+=46)i.push(e[a][1]);c=i.sort()[Math.floor(i.length/2)],o.medians.push(c)}return o}function d(){var e=this.dataset.type,t=document.getElementsByClassName("graph-type-btn active")[0],n=t.dataset.type;e!==n&&(d3.select("#graph-list").classed("graph-"+n,!1).classed("graph-"+e,!0),d3.select(t).classed("active",!1),d3.select(this).classed("active",!0))}function h(e,t){var n=document.createElement("div"),r=document.createTextNode("Lat: "+e+", Lon: "+t);return n.appendChild(r),n.classList.add("graph-elem"),l(e,t,n),n}function v(e,t,n,r){e=f(e);var a=p(e);y(e,t,a.medians),m(a,t,n,r),b(a,t,n,r),document.getElementById("graph-list").appendChild(t)}function y(e,t,n){var r={top:30,right:20,bottom:30,left:25},a=580-r.left-r.right,o=270-r.top-r.bottom,i=d3.scaleTime().range([0,a]).domain([P(e[0][0]),P(e[e.length-1][0])]),c=d3.scaleLinear().range([o,0]).domain([0,100]),s=d3.axisBottom(i).ticks(16).tickFormat(function(e){return e.getFullYear()}),u=d3.axisLeft(c).ticks(6),l=d3.line().x(function(e){return i(P(e[0]))}).y(function(e){return c(e[1])}),f=d3.select(t).append("div").classed("timeseries-graph",!0),p=f.append("svg").attr("height",o+r.top+r.bottom).attr("viewBox",function(){return"0 0 "+(a+r.left+r.right)+" "+(o+r.top+r.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+r.left+","+r.top+")");p.call(I),_(e,l,p),p.append("g").attr("class","x axis").attr("transform","translate(0,"+o+")").call(s),p.append("g").attr("class","y axis").call(u),E(e,l,p,n)}function m(e,t,n,r){function a(e){return F[(e-15)/30]}var o={},i={top:30,right:20,bottom:30,left:25},c=500-i.left-i.right,s=270-i.top-i.bottom,u=e.medians,l=d3.scaleLinear().range([0,c]).domain([0,365]),f=d3.scaleLinear().range([s,0]).domain([0,100]),p=d3.axisBottom(l).ticks(11).tickValues([15,45,75,105,135,165,195,225,255,285,315,345]).tickFormat(a),d=d3.axisLeft(f).ticks(6),h=d3.line().x(function(e,t){return l(Array.isArray(e)?C(e[0]):8*t+3)}).y(function(e){return f(Array.isArray(e)?e[1]:e)}),v=d3.select(t).append("div").classed("overlapping-graph",!0),y=v.append("svg").attr("viewBox",function(){return"0 0 "+(c+i.left+i.right)+" "+(s+i.top+i.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+i.left+","+i.top+")");y.call(I),y.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(p),y.append("g").attr("class","y axis").call(d),o.medians={path:_(e.medians,h,y)},o[2015]={path:_(e[2015],h,y)},o.medians.points=E(e.medians,h,y,u),o[2015].points=E(e[2015],h,y,u);var m=v.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){x(m,t,"timeseries","2015",o,e,h,y,u,n,r)}),x(m,"medians","timeseries","medians",o,e,h,y,u,n,r)}function b(e,t,n,r){var a=Math.min(490,490)/2-30,o=e.medians,i=g(e),c=w(o,i[1][0]),s=d3.scaleLinear().domain([0,100]).range([0,a]),u=d3.radialLine().radius(function(e){return s(Array.isArray(e)?e[1]:e)}).angle(function(e,t){return((Array.isArray(e)?C(e[0]):8*t+3)-1)%365/365*(2*Math.PI)}),l=d3.select(t).append("div").classed("polar-graph",!0),f=l.append("svg").attr("viewBox",function(){return"0 0 490 490"}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate(245,245)");f.call(I);var p=f.append("g").attr("class","r axis").selectAll("g").data(s.ticks(5).slice(1)).enter().append("g");p.append("circle").attr("r",s),p.append("text").attr("y",function(e){return-s(e)-4}).attr("transform","rotate(15)").style("text-anchor","middle").text(function(e){return e});var d=f.append("g").attr("class","a axis").selectAll("g").data(d3.range(0,360,30)).enter().append("g").attr("transform",function(e){return"rotate("+(e-90)+")"});d.append("line").attr("x2",a),d.append("text").attr("x",a+6).attr("dy",".35em").style("text-anchor",function(e){return e<360&&e>180?"end":null}).attr("transform",function(e){return e<360&&e>180?"rotate(180 "+(a+6)+",0)":null}).text(function(e){return F[e/30]});var h=f.append("g").selectAll("g").data(c).enter().append("g").attr("transform",function(e){return"rotate("+(e.data[1][0]-90)+")"});h.append("line").attr("class","line").attr("x2",a),h.append("text").attr("x",a+6).attr("y",function(e){return(e.data[1][0]-1)%365/365*(2*Math.PI)}).attr("dy",".35em").style("text-anchor",function(e){var t=e.data[1][0];return t<360&&t>180?"end":null}).attr("transform",function(e){var t=e.data[1][0];return t<360&&t>180?"rotate(180 "+(a+6)+",0)":null}).text(function(e){return e.label});var v=i[1][0];k([[v,100],[(v+182.5)%365,100]],u,f).classed("growing-season-line","true"),k(i,u,f).classed("center-line","true"),f.selectAll("point").data([i[1]]).enter().append("circle").attr("class","point").attr("transform",function(e){return"translate("+u([e]).slice(1).slice(0,-1)+")"}).attr("r",2.5).attr("stroke","#000").attr("fill","#dd82d2").on("mouseover",function(e){I.show("Center: "+String(e[1]).substring(0,7)),this.setAttribute("r",5),this.setAttribute("stroke-width","2px"),d3.select(this).classed("active",!0)}).on("mouseout",function(e){I.hide(),this.setAttribute("r",2.5),this.setAttribute("stroke-width","1px"),d3.select(this).classed("active",!0)});var y={};y.medians={path:k(o,u,f)},y[2015]={path:k(e[2015],u,f)},y.medians.points=E(o,u,f,o),y[2015].points=E(e[2015],u,f,o);var m=l.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){var a=m.append("div");a.append("input").attr("type","checkbox").attr("id","polar-"+t+n.toString().replace(".","")+"-"+r.toString().replace(".","")).attr("value",t).property("checked","2015"===t).on("change",function(t){var n=this.value;this.checked?(y.hasOwnProperty(n)||(y[n]={}),y[n].path=k(e[n],u,f),y[n].points=E(e[n],u,f,o)):(y[n].path.remove(),y[n].points.remove())}),a.append("label").text(t).attr("for","polar-"+t+n.toString().replace(".","")+"-"+r.toString().replace(".",""))});var b=m.append("div");b.append("input").attr("type","checkbox").attr("id","polar-average-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")).attr("value","medians").property("checked",!0).on("change",function(t){var n=this.value;this.checked?(y.hasOwnProperty(n)||(y[n]={}),y[n].path=k(e[n],u,f),y[n].points=E(e[n],u,f,o)):(y[n].path.remove(),y[n].points.remove())}),b.append("label").text("Baseline").attr("for","polar-average-"+n.toString().replace(".","")+"-"+r.toString().replace(".",""));var _=m.append("div").classed("threshold-checkbox",!0);_.append("input").attr("type","checkbox").attr("id","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")).property("checked",!0).on("change",function(e){h.style("opacity",this.checked?1:0)}),_.append("label").text("Thresholds").attr("for","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".",""))}function g(e){var t,n,r,a,o,i=0,c=0;for(r=46,t=0;t<e.keys.length;t++)if(a=e[e.keys[t]],a.length===r){for(o=0,n=0;n<r/2;n++)o+=a[n][1]-a[n+23][1];o/=23,i+=o}else c++;i=Math.abs(i)/(e.keys.length-c);var s,u,l,f,p,d=1e6,h=0,v=e.medians;for(t=0;t<r/2;t++){for(u=0,l=0,p=0;p<r/2;p++)n=(t+p)%46,f=(n+23)%46,u+=parseInt(v[n],10),l+=parseInt(v[f],10);s=Math.abs(u-l),s<d&&(d=s,h=t)}var y=parseInt(v[h],10),m=parseInt(-v[h+23],10),b=Math.abs(i-y)-Math.abs(i-m);return Math.abs(-i-y)-Math.abs(-i-m)>b&&(h+=23),[[0,0],[8*h+3,i]]}function w(e,t){var n=Math.floor((t-3)/8);n>22&&(n-=23);var r,a,o,i=0;for(o=46,r=0;r<o;r++)a=(n+r)%o,i+=parseInt(e[a],10);var c,s,u,l=.15*i,f=.8*i,p=.85*i,d=!1,h=!1,v=!1;for(i=0,r=0;r<o;r++)if(a=(n+r)%o,i+=parseInt(e[a],10),!d&&i>l)c=a,d=!0;else if(!h&&i>f)s=a,h=!0;else if(!v&&i>p){u=a,v=!0;break}var y=[0,0];return[{label:"15%",data:[y,[8*c+3,100]]},{label:"80%",data:[y,[8*s+3,100]]},{label:"85%",data:[y,[8*u+3,100]]}]}function _(e,t,n){return n.append("path").attr("class","line").attr("d",t(e))}function k(e,t,n){return n.append("path").datum(e).attr("class","line").attr("d",t)}function E(e,t,n,r){return n.selectAll("point").data(e).enter().append("circle").attr("class","point").attr("transform",function(e,n){var r=Array.isArray(e)?e:[8*n+3,e];return"translate("+t([r]).slice(1).slice(0,-1)+")"}).attr("r",3).attr("stroke","#000").attr("fill",function(e,t){return j(Array.isArray(e)?e[1]:e,r[t%46],3)}).on("mouseover",O).on("mouseout",S)}function O(e){var t=Array.isArray(e)?T(e[0])+": "+e[1]:"Average: "+e;I.show(t),this.setAttribute("r",5),this.setAttribute("stroke-width","2px")}function S(e){I.hide(),this.setAttribute("r",3),this.setAttribute("stroke-width","1px")}function x(e,t,n,r,a,o,i,c,s,u,l){var f=e.append("div");f.append("input").attr("type","checkbox").attr("id",n+"-"+t+u.toString().replace(".","")+"-"+l.toString().replace(".","")).attr("value",t).property("checked",t===r).on("change",function(e){var t=this.value;this.checked?(a.hasOwnProperty(t)||(a[t]={}),a[t].path=_(o[t],i,c),a[t].points=E(o[t],i,c,s)):(a[t].path.remove(),a[t].points.remove())}),f.append("label").text(t).attr("for",n+"-"+t+u.toString().replace(".","")+"-"+l.toString().replace(".",""))}function j(e,t,n){var r=e-t,a=Math.abs(r)/t*100*n,o=100-a+"%";return r>0?"hsl(8, 79%, "+o+")":"hsl(219, 79%, "+o+")"}function P(e){e=e.toString();var t=e.substring(0,4),n=parseInt(e.substring(4,6),10)-1,r=e.substring(6,8);return new Date(t,n,r)}function C(e){return"string"==typeof e?(e=P(e),e.getDOY()):e}function T(e){return"Average"===e?e:(e=P(e),A(e.getMonth())+" "+M(e.getDate())+", "+e.getFullYear())}function A(e){switch(e){case 0:return"Jan.";case 1:return"Feb.";case 2:return"Mar.";case 3:return"Apr.";case 4:return"May";case 5:return"Jun.";case 6:return"Jul.";case 7:return"Aug.";case 8:return"Sep.";case 9:return"Oct.";case 10:return"Nov.";case 11:return"Dec."}}function M(e){var t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"}Object.defineProperty(t,"__esModule",{value:!0}),t.SetupGraphs=r,t.BindGraphEvents=o;var I,N=n(22),R=L.Icon.extend({}),B=new R({iconUrl:"imgs/blue_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),D=new R({iconUrl:"imgs/orange_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),F={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"}},function(e,t,n){"use strict";function r(){d3.selectAll(".panel-top-btn").on("click",a)}function a(){this.classList.contains("active")||(o(),i(),(0,c.updatePanelDragOverlayHeight)(),d3.selectAll(".panel-top-btn, .panel-section-wrapper").classed("active",function(){return!d3.select(this).classed("active")}))}function o(){var e=d3.selectAll("#map-wrapper, #right-panel"),t=e.classed("layers-active"),n=e.classed("graphs-active");e.classed("layers-active",!t).classed("graphs-active",!n)}function i(){var e=document.getElementById("right-panel").offsetWidth;document.getElementById("map-wrapper").style.paddingRight=e+"px"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var c=n(22)},function(e,t){"use strict";function n(e){var t=e.id||"map",n=e.options||{scrollWheelZoom:!1},r=e.center||["38.5","-81"],o=e.zoom||6;return a=L.map(t,n).setView(r,o),L.control.attribution().addTo(a),a}function r(){return a}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateMap=n,t.GetMap=r;var a},function(e,t,n){"use strict";function r(e){e.on("moveend",a)}function a(e){var t=(0,k.GetMap)();i(o([c(t),s(t),u(t),l(t)]))}function o(e){return"?"+e.filter(function(e){return void 0!==e}).join("&")}function i(e){window.history&&window.history.replaceState&&window.history.replaceState({},"",e)}function c(e){var t=e.getCenter();return"center="+t.lat.toString()+","+t.lng.toString()}function s(e){return"zoom="+e.getZoom()}function u(e){var t=[],n={},r=(0,O.GetCurrentLayers)();e.eachLayer(function(e){var t=e.options;t&&t.layers&&(n[t.layers]=t.hasOwnProperty("opacity")?t.opacity:"1")});var a,o;for(o=0;o<r.length;o++)a=r[o],t.push(a),t.push(n[a]);return"layers="+t.join(",")}function l(e){var t=[];return e.eachLayer(function(e){e.options&&e.options.type===E.BASE_LAYER_TYPE&&t.push(e.options.id)}),"baselayers="+t.join(",")}function f(){var e=window.location.search;if(""!==e)return e=p(e),e=h(e),v(e),e}function p(e){return e=e.substring(1),e=d(e),e.split("&")}function d(e){return e.replace(/\%2[c|C]/g,",")}function h(e){var t,n,r={};for(n=0;n<e.length;n++)t=e[n].split("="),r[t[0]]=t[1];return r}function v(e){e.center&&(e.center=y(e.center)),e.layers&&(e.layers=m(e.layers)),e.baselayers&&(e.baselayers=b(e.baselayers))}function y(e){return e.split(",")}function m(e){var t,n,r={enabledLayers:[],opacityVals:{}};for(e=e.split(","),n=0;n<e.length;n+=2)t=e[n],r.enabledLayers.push(t),r.opacityVals[t]=e[n+1];return r}function b(e){return e.split(",")}function g(e){var t=f();t&&(t.center&&(e.map.center=t.center),t.zoom&&(e.map.zoom=t.zoom),t.layers&&w(t.layers,e),t.baselayers&&_(t.baselayers,e))}function w(e,t){var n=e.enabledLayers;t["active-layers"]=n;var r,a,o,i,c,s,u=t.layers;for(r=0;r<n.length;r++){s=!1,c=n[r];for(o in u){if(!u.hasOwnProperty(o))return;for(i=u[o],a=0;a<i.length;a++)if(i[a].id===c){i[a].opacity=e.opacityVals[c],s=!0;break}if(s)break}}}function _(e,t){var n,r,a=t.baselayers;for(r=0;r<a.length;r++)n=a[r],n.active=e.indexOf(n.id)!==-1}Object.defineProperty(t,"__esModule",{value:!0}),t.BindUpdateShareUrl=r,t.updateShareUrl=a,t.AddShareSettingsToConfig=g;var k=n(26),E=n(23),O=n(35)},,function(e,t){},,,,,,function(e,t,n){"use strict";function r(){return h}function a(e,t){var n,r,a,o,c,s;if(t&&0!==t.length)for(n=0;n<t.length;n++){s=!1,c=t[n];for(a in e){if(!e.hasOwnProperty(a))return;for(o=e[a],r=0;r<o.length;r++)if(o[r].id===c){i(o[r]),s=!0;break}if(s)break}}}function o(e){e.active?s(e):i(e)}function i(e){var t=(0,p.GetMap)();e.active=!0,e.mapLayer=e.mapLayer||f(e),t.addLayer(e.mapLayer),c(e),(0,d.updateShareUrl)()}function c(e){h.push(e.id)}function s(e){var t=(0,p.GetMap)();e.active=!1,e.mapLayer&&t.hasLayer(e.mapLayer)&&t.removeLayer(e.mapLayer),u(e),(0,d.updateShareUrl)()}function u(e){var t=h.indexOf(e.id);t!==-1&&h.splice(t,1)}function l(e,t){e.opacity=t,e.mapLayer.setOpacity(t)}function f(e){return L.tileLayer.wms(e.url,{layers:e.id,transparent:e.transparent||!0,version:e.version||"1.3.0",crs:e.crs||L.CRS.EPSG4326,format:e.format||"image/png",opacity:e.opacity||"1"})}Object.defineProperty(t,"__esModule",{value:!0}),t.GetCurrentLayers=r,t.CreateDefaultLayers=a,t.toggleLayer=o,t.enableLayer=i,t.disableLayer=s,t.updateLayerOpacity=l;var p=n(26),d=n(27),h=[]},function(e,t,n){"use strict";function r(e,t){var n=e.opacity||1,r=f(n);t.select(".opacity-slider-handle").style("top",function(){return r+"px"})}function a(e,t){var n=void 0!==e.opacity?e.opacity:1,r=t.append("div").attr("class","opacity-slider-wrapper");r.append("div").attr("class","opacity-slider-indicator");o(r,e,t,n)}function o(e,t,n,a){var o=e.append("div").attr("class","opacity-slider-track-overlay");o.append("div").attr("class","opacity-slider-track");o.append("div").attr("class","opacity-slider-handle"),t.active&&r(t,n),i(e,t,a)}function i(e,t,n){var r=e.select(".opacity-slider-track-overlay");r.call(d3.drag().on("start drag",function(){var e=s(r);(0,l.updateLayerOpacity)(t,e),c(r,e)}).on("end",function(){(0,u.updateShareUrl)()}))}function c(e,t){e.select(".opacity-slider-handle").style("top",f(t)+"px")}function s(e){var t=d3.mouse(e.node())[1];return f.invert(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.setSliderInitialPos=r,t.makeOpacitySlider=a;var u=n(27),l=n(35),f=d3.scaleLinear().domain([1,0]).range([0,90]).clamp(!0)},function(e,t){"use strict";function n(e){if(e.image){var t=r(),n=a(e),i=e.link?o(e.link):null;i?(i.appendChild(n),t.appendChild(i)):t.appendChild(n);var c=document.getElementsByClassName(e.location)[0],s=c.firstChild;c.insertBefore(t,s)}}function r(){var e=document.createElement("div");return d3.select(e).classed("project-logo",!0),e}function a(e){var t=document.createElement("img");return t.setAttribute("src",e.image),e.label&&(t.setAttribute("alt",e.label),t.setAttribute("title",e.label)),t}function o(e){var t=document.createElement("a");return t.setAttribute("href",e),t.setAttribute("target","_blank"),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXhfYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA3ZjJmZDcxNjZkMjFlZWI1ZjJkMyIsIndlYnBhY2s6Ly8vLi9qcy9iYXNlLmpzIiwid2VicGFjazovLy8uL2pzL3BhcnNlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvbGVhZmxldENvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ub2RlbnQtcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovLy8uL34vbm9kZW50LXJ1bnRpbWUvem91c2FuLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L34vc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L25vZGVudC1ydW50aW1lL3RoZW5hYmxlRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL34vbG9kYXNoLmRlYm91bmNlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3NlYXJjaEVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvZG9tVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Jlc3VsdExpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2JpbmdQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvcHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2VzcmlQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL29wZW5TdHJlZXRNYXBQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9wYW5lbC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9iYXNlbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vanMvZ3JhcGguanMiLCJ3ZWJwYWNrOi8vLy4vanMvdGFicy5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tYXAuanMiLCJ3ZWJwYWNrOi8vLy4vanMvc2hhcmUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vanMvb3BhY2l0eVNsaWRlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9sb2dvLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJfcGFyc2VyIiwiX3BhcnNlcjIiLCJfc2VhcmNoIiwiX3NlYXJjaDIiLCJfcGFuZWwiLCJfYmFzZWxheWVyIiwiX2dyYXBoIiwiX3RhYnMiLCJfdGFiczIiLCJfbWFwIiwiX3NoYXJlIiwiX2xheWVyIiwiX2xvZ28iLCJfbG9nbzIiLCJCYXNlIiwiY29uZmlnIiwiY2FsbGJhY2siLCJTZXR1cEdyYXBocyIsImRhdGEiLCJBZGRTaGFyZVNldHRpbmdzVG9Db25maWciLCJtYXAiLCJDcmVhdGVNYXAiLCJDcmVhdGVCYXNlTGF5ZXJzIiwiYmFzZWxheWVycyIsIkNyZWF0ZURlZmF1bHRMYXllcnMiLCJsYXllcnMiLCJTZXR1cFBhbmVsIiwibGF5b3V0IiwibG9nbyIsIkJpbmRHcmFwaEV2ZW50cyIsIkJpbmRVcGRhdGVTaGFyZVVybCIsIndpbmRvdyIsIlBhcnNlQ29uZmlnIiwiY29uZmlnRmlsZSIsIkdldENvbmZpZyIsInhtbGh0dHAiLCJYTUxIdHRwUmVxdWVzdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZm9ybWF0TWFwIiwiZm9ybWF0TGF5ZXJzIiwib3BlbiIsInNlbmQiLCJsYXllcmdyb3VwIiwiaSIsImRlZmF1bHRNYXBzZXJ2ZXJVcmwiLCJtYXBzZXJ2ZXJVcmwiLCJwcm9wIiwiaGFzT3duUHJvcGVydHkiLCJsZW5ndGgiLCJzZXRNYXBzZXJ2ZXJVcmwiLCJsYXllciIsInVybCIsIkNyZWF0ZVNlYXJjaCIsInByb3ZpZGVyIiwiX2xlYWZsZXRHZW9zZWFyY2giLCJFc3JpUHJvdmlkZXIiLCJzZWFyY2hDb250cm9sIiwiR2VvU2VhcmNoQ29udHJvbCIsInNob3dNYXJrZXIiLCJhdXRvQ29tcGxldGUiLCJhZGRDb250cm9sIiwiTCIsIkRvbUV2ZW50Iiwib24iLCJzZWFyY2hFbGVtZW50IiwiZWxlbWVudHMiLCJjb250YWluZXIiLCJldiIsInN0b3BQcm9wYWdhdGlvbiIsIl9sZWFmbGV0Q29udHJvbCIsImVudW1lcmFibGUiLCJnZXQiLCJfc2VhcmNoRWxlbWVudCIsIl9iaW5nUHJvdmlkZXIiLCJfZXNyaVByb3ZpZGVyIiwiX2dvb2dsZVByb3ZpZGVyIiwiX29wZW5TdHJlZXRNYXBQcm92aWRlciIsIl9wcm92aWRlciIsIkxlYWZsZXRDb250cm9sIiwiQ29udHJvbCIsImV4dGVuZCIsIkVycm9yIiwiTENvbnRyb2wiLCJfbGVuIiwiYXJndW1lbnRzIiwib3B0aW9ucyIsIkFycmF5IiwiX2tleSIsIkZ1bmN0aW9uIiwicHJvdG90eXBlIiwiYmluZCIsImFwcGx5IiwiY29uY2F0IiwiX25vZGVudFJ1bnRpbWUiLCJfZXh0ZW5kcyIsImFzc2lnbiIsInRhcmdldCIsInNvdXJjZSIsImtleSIsIl9sb2Rhc2giLCJfbG9kYXNoMiIsIl9zZWFyY2hFbGVtZW50MiIsIl9yZXN1bHRMaXN0IiwiX3Jlc3VsdExpc3QyIiwiX2RvbVV0aWxzIiwiX2NvbnN0YW50cyIsImRlZmF1bHRPcHRpb25zIiwicG9zaXRpb24iLCJzdHlsZSIsInNob3dQb3B1cCIsIm1hcmtlciIsImljb24iLCJJY29uIiwiRGVmYXVsdCIsImRyYWdnYWJsZSIsIm1heE1hcmtlcnMiLCJyZXRhaW5ab29tTGV2ZWwiLCJhbmltYXRlWm9vbSIsInNlYXJjaExhYmVsIiwibm90Rm91bmRNZXNzYWdlIiwibWVzc2FnZUhpZGVEZWxheSIsInpvb21MZXZlbCIsImNsYXNzTmFtZXMiLCJidXR0b24iLCJtc2dib3giLCJmb3JtIiwiaW5wdXQiLCJhdXRvQ29tcGxldGVEZWxheSIsImluaXRpYWxpemUiLCJfdGhpcyIsInRoaXMiLCJtYXJrZXJzIiwiRmVhdHVyZUdyb3VwIiwiX29wdGlvbnMiLCJoYW5kbGVTdWJtaXQiLCJxdWVyeSIsIm9uU3VibWl0IiwiX3NlYXJjaEVsZW1lbnQkZWxlbWVuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjcmVhdGVFbGVtZW50IiwidGl0bGUiLCJocmVmIiwib25DbGljayIsInJlc3VsdExpc3QiLCJoYW5kbGVDbGljayIsIl9yZWYiLCJyZXN1bHQiLCJsYWJlbCIsImFwcGVuZENoaWxkIiwiYXV0b1NlYXJjaCIsInNlbGVjdFJlc3VsdCIsImNsZWFyUmVzdWx0cyIsIm9uQWRkIiwiX29wdGlvbnMyIiwiYWRkVG8iLCJyb290IiwiZ2V0Q29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsIm9uUmVtb3ZlIiwicmVtb3ZlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZWFyY2hFbGVtZW50JGVsZW1lbjIiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZUNsYXNzTmFtZSIsImFkZENsYXNzTmFtZSIsImZvY3VzIiwiQVJST1dfRE9XTl9LRVkiLCJBUlJPV19VUF9LRVkiLCJpbmNsdWRlcyIsImtleUNvZGUiLCJsaXN0IiwibWF4IiwiY291bnQiLCJuZXh0IiwiY29kZSIsInNlbGVjdGVkIiwiaWR4IiwiaXRlbSIsInNlbGVjdCIsIkVTQ0FQRV9LRVkiLCJjbGVhciIsIlByb21pc2UiLCIkcmV0dXJuIiwiJGVycm9yIiwicmVzdWx0cyIsIlNQRUNJQUxfS0VZUyIsInNlYXJjaCIsInRoZW4iLCIkYXdhaXRfMSIsInJlbmRlciIsIiRhc3luY2JpbmQiLCIkYXdhaXRfMiIsInNob3dSZXN1bHQiLCJrZXlzIiwiX2xheWVycyIsInJlbW92ZUxheWVyIiwiYWRkTWFya2VyIiwiY2VudGVyTWFwIiwiZmlyZUV2ZW50IiwibG9jYXRpb24iLCJfb3B0aW9uczMiLCJNYXJrZXIiLCJ5IiwieCIsImJpbmRQb3B1cCIsImFkZExheWVyIiwib3BlblBvcHVwIiwiX29wdGlvbnM0IiwicmVzdWx0Qm91bmRzIiwiTGF0TG5nQm91bmRzIiwiYm91bmRzIiwiaXNWYWxpZCIsImdldEJvdW5kcyIsImZpdEJvdW5kcyIsImFuaW1hdGUiLCJzZXRWaWV3IiwiZ2V0Q2VudGVyIiwiZ2V0Wm9vbSIsIl9vcHRpb25zNSIsIiRhc3luY3NwYXduIiwicHJvbWlzZVByb3ZpZGVyIiwic2VsZiIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZ2VuRiIsInJlc29sdmUiLCJyZWplY3QiLCJzdGVwIiwiZm4iLCJhcmciLCJnZW4iLCJkb25lIiwidiIsInRocm93Iiwic3JjIiwidG9TdHJpbmciLCJ0IiwiYXJncyIsIm1hdGNoIiwicmUiLCJteCIsImV4ZWMiLCJwdXNoIiwicmV2ZXJzZSIsImZvckVhY2giLCJzbGljZSIsImluZGV4Iiwic3Vic3RyIiwicmVwbGFjZSIsInpvdXNhbiIsInRoZW5hYmxlIiwiY2F0Y2hlciIsImJvdW5kVGhlbiIsInJlc29sdmVyIiwidHJhbXBvbGluZSIsInMiLCJ1IiwiYiIsInEiLCJ1bmRlZmluZWQiLCJwb3AiLCJyIiwiTGF6eVRoZW5hYmxlIiwiRWFnZXJUaGVuYWJsZSIsIlRoZW5hYmxlIiwiRWFnZXJUaGVuYWJsZUZhY3RvcnkiLCJleCIsInByb2Nlc3MiLCJzZXRJbW1lZGlhdGUiLCJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsInRpY2siLCJab3VzYW4iLCJmdW5jIiwibWUiLCJTVEFURV9GVUxGSUxMRUQiLCJ5cmV0IiwiU1RBVEVfUkVKRUNURUQiLCJyZWFzb24iLCJuIiwibmV4dFRpY2siLCJmIiwic2V0VGltZW91dCIsInNvb24iLCJjYWxsUXVldWUiLCJmcSIsImZxU3RhcnQiLCJidWZmZXJTaXplIiwic3BsaWNlIiwic3RhdGUiLCJUeXBlRXJyb3IiLCJmaXJzdCIsInJhIiwicnIiLCJsIiwiY2xpZW50cyIsIm9uRiIsIm9uUiIsImNsaWVudCIsImEiLCJ2YWwiLCJ6IiwidmVyc2lvbiIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImNhY2hlZFNldFRpbWVvdXQiLCJydW5DbGVhclRpbWVvdXQiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpbmluZyIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlIiwicXVldWVJbmRleCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwibGVuIiwicnVuIiwiSXRlbSIsImFycmF5Iiwibm9vcCIsImJyb3dzZXIiLCJlbnYiLCJhcmd2IiwidmVyc2lvbnMiLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJiaW5kaW5nIiwibmFtZSIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJUaW1lb3V0IiwiY2xlYXJGbiIsIl9pZCIsIl9jbGVhckZuIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiY2xvc2UiLCJ1bnJlZiIsInJlZiIsImVucm9sbCIsIm1zZWNzIiwiX2lkbGVUaW1lb3V0SWQiLCJfaWRsZVRpbWVvdXQiLCJ1bmVucm9sbCIsIl91bnJlZkFjdGl2ZSIsImFjdGl2ZSIsIl9vblRpbWVvdXQiLCJjbGVhckltbWVkaWF0ZSIsImdsb2JhbCIsInRhc2siLCJ0YXNrc0J5SGFuZGxlIiwibmV4dEhhbmRsZSIsInJlZ2lzdGVySW1tZWRpYXRlIiwiaGFuZGxlIiwicnVuSWZQcmVzZW50IiwiY3VycmVudGx5UnVubmluZ0FUYXNrIiwiZG9jIiwiZG9jdW1lbnQiLCJhdHRhY2hUbyIsImdldFByb3RvdHlwZU9mIiwicG9zdE1lc3NhZ2UiLCJpbXBvcnRTY3JpcHRzIiwicG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyIsIm9sZE9uTWVzc2FnZSIsIm9ubWVzc2FnZSIsIm1lc3NhZ2VQcmVmaXgiLCJNYXRoIiwicmFuZG9tIiwib25HbG9iYWxNZXNzYWdlIiwiaW5kZXhPZiIsImF0dGFjaEV2ZW50IiwiTWVzc2FnZUNoYW5uZWwiLCJjaGFubmVsIiwicG9ydDEiLCJwb3J0MiIsImh0bWwiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JpcHQiLCJyZW1vdmVDaGlsZCIsImlzVGhlbmFibGUiLCJyZXNvbHV0aW9uIiwiaG93IiwiQ2hhaW5lZCIsIl91bmNoYWluZWQiLCJ0aGVuQ2hhaW4iLCJyZXMiLCJyZWoiLCJjaGFpbiIsIl9yZXNvbHZlciIsImRlYm91bmNlIiwid2FpdCIsImludm9rZUZ1bmMiLCJ0aW1lIiwibGFzdEFyZ3MiLCJ0aGlzQXJnIiwibGFzdFRoaXMiLCJsYXN0SW52b2tlVGltZSIsImxlYWRpbmdFZGdlIiwidGltZXJJZCIsInRpbWVyRXhwaXJlZCIsImxlYWRpbmciLCJyZW1haW5pbmdXYWl0IiwidGltZVNpbmNlTGFzdENhbGwiLCJsYXN0Q2FsbFRpbWUiLCJ0aW1lU2luY2VMYXN0SW52b2tlIiwibWF4aW5nIiwibmF0aXZlTWluIiwibWF4V2FpdCIsInNob3VsZEludm9rZSIsIm5vdyIsInRyYWlsaW5nRWRnZSIsInRyYWlsaW5nIiwiY2FuY2VsIiwiZmx1c2giLCJkZWJvdW5jZWQiLCJpc0ludm9raW5nIiwiRlVOQ19FUlJPUl9URVhUIiwidG9OdW1iZXIiLCJpc09iamVjdCIsIm5hdGl2ZU1heCIsInR5cGUiLCJpc09iamVjdExpa2UiLCJpc1N5bWJvbCIsIm9iamVjdFRvU3RyaW5nIiwic3ltYm9sVGFnIiwiTkFOIiwib3RoZXIiLCJ2YWx1ZU9mIiwicmVUcmltIiwiaXNCaW5hcnkiLCJyZUlzQmluYXJ5IiwidGVzdCIsInJlSXNPY3RhbCIsImZyZWVQYXJzZUludCIsInJlSXNCYWRIZXgiLCJwYXJzZUludCIsImZyZWVHbG9iYWwiLCJmcmVlU2VsZiIsIm9iamVjdFByb3RvIiwibWluIiwiRGF0ZSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiU2VhcmNoRWxlbWVudCIsIl9yZWYkaGFuZGxlU3VibWl0IiwiX3JlZiRzZWFyY2hMYWJlbCIsIl9yZWYkY2xhc3NOYW1lcyIsImpvaW4iLCJwbGFjZWhvbGRlciIsIm9uSW5wdXQiLCJvbktleVVwIiwib25LZXlQcmVzcyIsIm9uRm9jdXMiLCJvbkJsdXIiLCJfZWxlbWVudHMiLCJoYXNFcnJvciIsIl9lbGVtZW50czIiLCJib2R5IiwiYmx1ciIsIkVOVEVSX0tFWSIsImVsZW1lbnQiLCJwYXJlbnQiLCJlbCIsImNsYXNzTmFtZSIsImNyZWF0ZVNjcmlwdEVsZW1lbnQiLCJjYiIsInNldEF0dHJpYnV0ZSIsImpzb24iLCJhZGQiLCJBUlJPV19MRUZUX0tFWSIsIkFSUk9XX1JJR0hUX0tFWSIsImN4IiwiY2xhc3NuYW1lcyIsInRyaW0iLCJSZXN1bHRMaXN0IiwiX3JlZiRoYW5kbGVDbGljayIsIl9pbml0aWFsaXNlUHJvcHMiLCJyZXN1bHRJdGVtIiwiY2hpbGQiLCJjbG9uZU5vZGUiLCJpbm5lckhUTUwiLCJmcm9tIiwiY2hpbGRyZW4iLCJsYXN0Q2hpbGQiLCJfcmVmMiIsInBhcmVudE5vZGUiLCJoYXNBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfcHJvdmlkZXIyIiwiUHJvdmlkZXIiLCJfQmFzZVByb3ZpZGVyIiwicHJvdG9jb2wiLCJqc29ucCIsInBhcmFtcyIsImdldFBhcmFtU3RyaW5nIiwicmVzb3VyY2VTZXRzIiwicmVzb3VyY2VzIiwicG9pbnQiLCJjb29yZGluYXRlcyIsImFkZHJlc3MiLCJmb3JtYXR0ZWRBZGRyZXNzIiwiYmJveCIsInJhdyIsIl9yZWYzIiwiZW5kcG9pbnQiLCJlbmNvZGVVUklDb21wb25lbnQiLCJyZXF1ZXN0IiwiZmV0Y2giLCJ0ZXh0IiwibG9jYXRpb25zIiwiZmVhdHVyZSIsImdlb21ldHJ5IiwiZXh0ZW50IiwieW1pbiIsInhtaW4iLCJ5bWF4IiwieG1heCIsInBhcmFtU3RyaW5nIiwibG5nIiwibGF0IiwiZm9ybWF0dGVkX2FkZHJlc3MiLCJ2aWV3cG9ydCIsInNvdXRod2VzdCIsIm5vcnRoZWFzdCIsImZvcm1hdCIsImxvbiIsImRpc3BsYXlfbmFtZSIsInBhcnNlRmxvYXQiLCJib3VuZGluZ2JveCIsIm1ha2VMYXllckVsZW1zIiwibWFrZUxheWVyR3JvdXBzIiwibWFrZVBhbmVsRHJhZ2dhYmxlIiwic2V0UGFuZWxTY3JvbGxIYW5kbGVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJvbnNjcm9sbCIsInVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQiLCJkMyIsImRyYWciLCJwYW5lbERyYWdFdmVudEhhbmRsZXIiLCJ1cGRhdGVQYW5lbFdpZHRoIiwibmV3SGVpZ2h0IiwicGFuZWwiLCJwYW5lbE9mZnNldEhlaWdodCIsInByb3BlcnR5IiwicGFuZWxEcmFnT3ZlcmxheSIsImhlYWRlciIsImNsYXNzZWQiLCJncmFwaExpc3QiLCJzY3JvbGxIZWlnaHQiLCJsYXllckxpc3QiLCJoZWlnaHQiLCJwYW5lbE1pbldpZHRoIiwicGFuZWxDbGllbnRXaWR0aCIsIndyYXBwZXIiLCJ3cmFwcGVyV2lkdGgiLCJjbGllbnRXaWR0aCIsIm1hcFdyYXBwZXIiLCJtb3VzZVgiLCJzb3VyY2VFdmVudCIsInhEZWx0YSIsIm5ld1BhbmVsV2lkdGgiLCJwYWRkaW5nUmlnaHQiLCJzZWxlY3RBbGwiLCJlbnRlciIsImFwcGVuZCIsImF0dHIiLCJsYXllckdyb3VwIiwiZWFjaCIsImxheWVyR3JvdXBzIiwibGF5ZXJEaXYiLCJtYWtlQ2hlY2tib3giLCJtYWtlTGFiZWwiLCJtYWtlRGVzY3JpcHRpb24iLCJtYWtlTGF5ZXJUb29scyIsInRvZ2dsZUxheWVyIiwiX29wYWNpdHlTbGlkZXIiLCJzZXRTbGlkZXJJbml0aWFsUG9zIiwiaW5mbyIsImxheWVyVG9vbHNEaXYiLCJtYWtlT3BhY2l0eVNsaWRlciIsIm1ha2VMZWdlbmQiLCJsYXllclRvb2xzV3JhcHBlciIsImxlZ2VuZCIsImxheWVyQ29uZmlnIiwiYXR0cmlidXRpb24iLCJfYmFzZWxheWVycyIsImJhc2VMYXllciIsImNyZWF0ZUJhc2VMYXllciIsImNyZWF0ZUJhc2VMYXllclVJIiwiYmFzZVVJIiwiYmFzZVdyYXBwZXIiLCJiYXNlSW1nIiwiYmFzZUxhYmVsIiwiaW1hZ2UiLCJ0ZXh0Q29udGVudCIsImhhbmRsZUJhc2VDbGljayIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJsYXllcmlkIiwidG9nZ2xlQWN0aXZlQmFzZVVJIiwicmVtb3ZlQ3VycmVudEJhc2VMYXllciIsImFkZE5ld0Jhc2VMYXllclRvTWFwIiwidXBkYXRlU2hhcmVVcmwiLCJiYXNlVUlFbGVtIiwiR2V0TWFwIiwiZWFjaExheWVyIiwiQkFTRV9MQVlFUl9UWVBFIiwiYnJpbmdUb0JhY2siLCJ0aWxlTGF5ZXIiLCJtYWtlQmFzZUxheWVyT3B0aW9ucyIsInN1YmRvbWFpbnMiLCJoYW5kbGVHcmFwaFR5cGVCdG5DbGljayIsImV4dGVuZERhdGVNb2R1bGUiLCJ0aXAiLCJkIiwiaXNMZWFwWWVhciIsInllYXIiLCJnZXRGdWxsWWVhciIsImdldERPWSIsImRheUNvdW50IiwibW4iLCJnZXRNb250aCIsImRuIiwiZ2V0RGF0ZSIsImRheU9mWWVhciIsImhhbmRsZU1hcENsaWNrIiwibGF0bG5nIiwiZGl2IiwiY3JlYXRlR3JhcGhEaXYiLCJjcmVhdGVNYXJrZXIiLCJzZXRJY29uIiwiaG92ZXJJY29uIiwiZ3JhcGhJY29uIiwiY3JlYXRlR3JhcGhSZW1vdmVyIiwiZWxlbSIsImNyZWF0ZUdyYXBoUmVtb3ZlckVsZW0iLCJpbm5lclRleHQiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJnZXREYXRhIiwib1JlcSIsInJlc3BvbnNlIiwic3BsaXQiLCJkcmF3R3JhcGgiLCJzcGxpdERhdGEiLCJyZXByb2Nlc3NEYXRhIiwib3JpZ2RhdGEiLCJqIiwic3Vic3RyaW5nIiwiZGF0YUZvck1lZGlhbnMiLCJtZWRpYW4iLCJzb3J0IiwiZmxvb3IiLCJkYXRhc2V0IiwiYWN0aXZlRWxlbSIsImFjdGl2ZVR5cGUiLCJjb250ZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJyZXByb2Nlc3NlZERhdGEiLCJtYWtlVXBEb3duTGluZUdyYXBoIiwibWFrZVVwRG93bk92ZXJsYXBpbmdMaW5lR3JhcGhXaXRoQ2hlY2tib3hlcyIsImRyYXdVcERvd25Qb2xhcldpdGhDaGVja2JveGVzQW5kVGhyZXNob2xkcyIsImF2ZXJhZ2VzIiwibWFyZ2luIiwidG9wIiwicmlnaHQiLCJib3R0b20iLCJsZWZ0Iiwid2lkdGgiLCJzY2FsZVRpbWUiLCJyYW5nZSIsImRvbWFpbiIsInBhcnNlRGF0ZSIsInNjYWxlTGluZWFyIiwieEF4aXMiLCJheGlzQm90dG9tIiwidGlja3MiLCJ0aWNrRm9ybWF0IiwieUF4aXMiLCJheGlzTGVmdCIsInZhbHVlbGluZSIsImxpbmUiLCJzdmciLCJkcmF3TGluZWFyUGF0aCIsImRyYXdMaW5lYXJQb2ludHMiLCJmb3JtYXRNb250aFRpY2siLCJNT05USF9MQUJFTFMiLCJjaGFydHMiLCJtZWRpYW5zIiwidGlja1ZhbHVlcyIsImlzQXJyYXkiLCJwYXJzZUp1bGlhbkRheSIsInBhdGgiLCJpbnB1dHdyYXBwZXIiLCJjcmVhdGVDaGVja2JveCIsInJhZGl1cyIsImNlbnRlciIsImZpbmRQb2xhckNlbnRlciIsInRocmVzaG9sZHMiLCJmaW5kUG9sYXJUaHJlc2hvbGRzIiwicmFkaWFsTGluZSIsImFuZ2xlIiwiUEkiLCJnciIsImdhIiwidGhyZXNob2xkRWxlbSIsImRheSIsImNlbnRlckRheSIsImRyYXdQb2xhclBhdGgiLCJzaG93IiwiaGlkZSIsInBvaW50cyIsImNoZWNrYm94V3JhcHBlciIsIm5ld1llYXIiLCJjaGVja2VkIiwidGhyZXNob2xkQ2hlY2tib3giLCJhcnIiLCJzdW0iLCJ0b3RhbFN1bSIsImluY29tcGxldGVZZWFycyIsImFicyIsImNoZWNrRGlmZiIsImxlZnRBcmVhIiwicmlnaHRBcmVhIiwiayIsImNvdW50ZXIiLCJhcmVhRGlmZiIsImFyZWFJbmRleCIsImF2Z3MiLCJmaXJzdFJhZGl1cyIsInNlY29uZFJhZGl1cyIsImZpcnN0RGlmZiIsInN0YXJ0RGF5Iiwic3RhcnRJbmRleCIsImZpZnRlZW5JbmRleCIsImVpZ2h0eUluZGV4IiwiZWlnaHR5Zml2ZUluZGV4IiwiZmlmdGVlblRocmVzaG9sZCIsImVpZ2h0eVRocmVzaG9sZCIsImVpZ2h0eWZpdmVUaHJlc2hvbGQiLCJmaWZ0ZWVuSW5kZXhGb3VuZCIsImVpZ2h0eUluZGV4Rm91bmQiLCJlaWdodHlmaXZlSW5kZXhGb3VuZCIsImNpcmNsZUNlbnRlciIsImRhdHVtIiwiY29tcHV0ZUNvbG9yIiwiaGFuZGxlUG9pbnRNb3VzZW92ZXIiLCJoYW5kbGVQb2ludE1vdXNlb3V0IiwidGlwU3RyaW5nIiwiZm9ybWF0RGF0ZSIsInNjYWxlIiwiZGlmZiIsInBlcmNlbnRfZGlmZiIsImxpZ2h0bmVzcyIsImRhdGUiLCJtb250aCIsImZvcm1hdE1vbnRoIiwib3JkaW5hbF9zdWZmaXhfb2YiLCJiYXNlSWNvbiIsImljb25VcmwiLCJzaGFkb3dVcmwiLCJpY29uU2l6ZSIsImljb25BbmNob3IiLCJwb3B1cEFuY2hvciIsInNoYWRvd1NpemUiLCIwIiwiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5IiwiMTAiLCIxMSIsIkJpbmRUYWJFdmVudHMiLCJoYW5kbGVUYWJIZWFkZXJCdG5DbGljayIsInRvZ2dsZVdyYXBwZXJBY3RpdmVTdGF0ZXMiLCJ0b2dnbGVNYXBQYWRkaW5nIiwid3JhcHBlcnMiLCJsYXllcnNBY3RpdmUiLCJncmFwaHNBY3RpdmUiLCJvZmZzZXRXaWR0aCIsIm1hcENvbmZpZyIsInNjcm9sbFdoZWVsWm9vbSIsImluaXRpYWxDZW50ZXIiLCJpbml0aWFsWm9vbSIsInpvb20iLCJjb250cm9sIiwic2V0U2hhcmVVcmwiLCJtYWtlU2hhcmVVcmwiLCJtYWtlQ2VudGVyU3RyaW5nIiwibWFrZVpvb21TdHJpbmciLCJtYWtlTGF5ZXJTdHJpbmciLCJtYWtlQmFzZUxheWVyU3RyaW5nIiwiZmlsdGVyIiwiaGlzdG9yeSIsInJlcGxhY2VTdGF0ZSIsIm9wYWNpdHlWYWxzIiwiY3VycmVudExheWVycyIsIkdldEN1cnJlbnRMYXllcnMiLCJvcGFjaXR5IiwiY3VycmVudExheWVyIiwicGFyc2VTaGFyZVVybCIsImdldFBhcmFtc0FycmF5IiwibWFrZUtleWVkUGFyYW1zT2JqZWN0IiwiZm9ybWF0UGFyYW1zIiwidW5tYW5nbGVQYXJhbVN0cmluZyIsInBhcmFtc0FyciIsInBhcmFtUGFpciIsInBhcnNlZFBhcmFtcyIsImZvcm1hdENlbnRlclBhcmFtIiwiZm9ybWF0TGF5ZXJQYXJhbSIsImZvcm1hdEJhc2VMYXllclBhcmFtIiwibGF5ZXJJZCIsImZvcm1hdHRlZExheWVycyIsImVuYWJsZWRMYXllcnMiLCJzaGFyZSIsImFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyIsImFkZEJhc2VMYXllclNldHRpbmdzVG9Db25maWciLCJzaGFyZUxheWVyU2V0dGluZ3MiLCJlbmFibGVkTGF5ZXIiLCJmb3VuZExheWVyIiwic2hhcmVCYXNlTGF5ZXJTZXR0aW5ncyIsImJhc2VsYXllciIsIl9jdXJyZW50X2xheWVycyIsImRlZmF1bHRMYXllcnMiLCJkZWZhdWx0TGF5ZXIiLCJlbmFibGVMYXllciIsImRpc2FibGVMYXllciIsIm1hcExheWVyIiwibWFrZVdtc1RpbGVMYXllciIsImFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIiLCJoYXNMYXllciIsInJlbW92ZUxheWVyRnJvbUludGVybmFsVHJhY2tlciIsImxvYyIsInVwZGF0ZUxheWVyT3BhY2l0eSIsIm5ld09wYWNpdHkiLCJzZXRPcGFjaXR5Iiwid21zIiwidHJhbnNwYXJlbnQiLCJjcnMiLCJDUlMiLCJFUFNHNDMyNiIsImxheWVyT3BhY2l0eSIsImhhbmRsZU9mZnNldCIsIm9wYWNpdHlTY2FsZSIsIm1ha2VTbGlkZXJUcmFjayIsIm92ZXJsYXkiLCJzZXREcmFnRXZlbnRMaXN0ZW5lciIsImNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zIiwiYWRqdXN0U2xpZGVySGFuZGxlIiwieVBvcyIsIm1vdXNlIiwibm9kZSIsImludmVydCIsImNsYW1wIiwiQ3JlYXRlTG9nbyIsImxvZ29kYXRhIiwibG9nb1dyYXBwZXIiLCJjcmVhdGVMb2dvV3JhcHBlciIsImxvZ29JbWFnZSIsImNyZWF0ZUxvZ29JbWFnZSIsImxvZ29MaW5rIiwibGluayIsImNyZWF0ZUxvZ29MaW5rIiwiaW5zZXJ0RWxlbWVudCIsImV4aXN0aW5nQ2hpbGQiLCJmaXJzdENoaWxkIiwiaW5zZXJ0QmVmb3JlIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFBRCxJQUNBRSxXQUNBRSxHQUFBSixFQUNBSyxRQUFBLEVBVUEsT0FOQVAsR0FBQUUsR0FBQU0sS0FBQUgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUgsR0FHQUksRUFBQUUsUUFBQSxFQUdBRixFQUFBRCxRQXZCQSxHQUFBRCxLQTRCQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxHQUdBVixFQUFBLEtETU0sU0FBU0ksRUFBUUQsRUFBU0gsR0FFL0JJLEVBQU9ELFFBQVVILEVBQW9CLElBS2hDLFNBQVNJLEVBQVFELEVBQVNILEdBRS9CLFlBa0NBLFNBQVNXLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLEdBaEN2RkcsT0FBT0MsZUFBZWIsRUFBUyxjQUMzQmMsT0FBTyxHRXhEWSxJQUFBQyxHQUFBbEIsRUFBQSxHRjZEbkJtQixFQUFXUixFQUF1Qk8sR0U1RGRFLEVBQUFwQixFQUFBLEdGZ0VwQnFCLEVBQVdWLEVBQXVCUyxHRS9EZEUsRUFBQXRCLEVBQUEsSUFDTXVCLEVBQUF2QixFQUFBLElBQ1l3QixFQUFBeEIsRUFBQSxJQUNqQnlCLEVBQUF6QixFQUFBLElGc0VyQjBCLEVBQVNmLEVBQXVCYyxHRXJFYkUsRUFBQTNCLEVBQUEsSUFDbUM0QixFQUFBNUIsRUFBQSxJQUN6QjZCLEVBQUE3QixFQUFBLElBQ1g4QixFQUFBOUIsRUFBQSxJRjRFbEIrQixFQUFTcEIsRUFBdUJtQixHRXZFakNFLEdBSE1oQyxFQUFRLElBR1AsU0FBVWlDLElGK0VoQixFQUFJZCxFQUFTTCxTRTlFRm1CLEVBQ1pDLElBQ0EsRUFBQVYsRUFBQVcsZ0JBQ0gsRUFBQVQsRUFBQVosYUFHR29CLEVBQVcsU0FBVUUsSUYrRXBCLEVBQUlSLEVBQU9TLDBCRTdFWkQsRUY4RUMsSUU5RUdFLElBQU0sRUFBQVgsRUFBQVksV0FBVUgsRUFDcEJFLE1GOEVDLEVBQUlmLEVBQVdpQixrQkU5RUNGLEVBQUtGLEVBQ3RCSyxhRjhFQyxFQUFJWixFQUFPYSxxQkU5RVFOLEVBQUtPLE9BQVFQLEVBQ2pDLG1CRjhFQyxFQUFJZCxFQUFPc0IsWUU5RURSLEVBQUtPLE9BQVFQLEVBQ3hCUyxTRjhFQyxFQUFJeEIsRUFBU1AsU0U3RWR3QixJRjhFQyxFQUFJUCxFQUFPakIsU0U5RURzQixFQUNYVSxPRjhFQyxFQUFJdEIsRUFBT3VCLGlCRTdFWlQsSUY4RUMsRUFBSVYsRUFBT29CLG9CRTdFZlYsR0FFRFcsUUFBT2pCLEtBRVBBLEVGOEVDN0IsRUFBUVcsU0U5RU9rQixTRmtGVixTQUFTNUIsRUFBUUQsR0FFdEIsWUdqSGMsU0FBUytDLEdBQWFDLEVBQVlqQixHSDhINUNrQixFRzdIU0QsRUFDYmpCLEdBRUQsUUFBU2tCLEdBQVdELEVBQVlqQixHSDhIM0IsR0c3SEdtQixHQUFVLEdBQ2RDLGVINkhDRCxHRzdIT0UsbUJBQXFCLFdIOEh4QixHRzdIeUIsR0FBdEJGLEVBQVFHLFdBQ1IsQ0g2SEMsSUFDSSxHRzdIR3BCLEdBQU9xQixLQUFLQyxNQUFNTCxFQUN6Qk0sY0FBQyxNQUFNQyxHSDhISEMsUUc3SE9DLElBQ1IseUNINkhDRCxRRzdIT0MsSUFDWEYsR0g4SEFHLEVHNUhEM0IsR0g2SEM0QixFRzVIRDVCLEdINkhDRixFRzVISkUsS0hnSUppQixFRzdIT1ksS0FBSyxNQUFPZCxHQUNwQixHSDZIQ0UsRUc1SERhLE9INkhDTCxRRzdIT0MsSUFDWCxNQUVELFFBQVNDLEdBQVczQixHQUNYQSxFQUFLRSxNQUFLRixFQUFLRSxRQUd4QixRQUFTMEIsR0FBYzVCLEdIOEhsQixHR3pIRCtCLEdBRUFDLEVBTkl6QixFQUFTUCxFQUNiTyxPQUFJMEIsRUFBc0JqQyxFQUMxQmtDLFlBQTJCbEMsR0FDM0IsZ0JIZ0lDLEtHN0hJLEdBQUltQyxLQUFRNUIsR0FDYixDSDZIQyxJRzdISUEsRUFBTzZCLGVBQWVELEdBQzNCLE1IOEhDLEtBREFKLEVHN0hZeEIsRUFDYjRCLEdBQUtILEVBQUksRUFBR0EsRUFBSUQsRUFBV00sT0FBUUwsSUg4SDlCTSxFRzdIZVAsRUFBV0MsR0FDOUJDLElBSVQsUUFBU0ssR0FBaUJDLEVBQU9DLEdIOEg1QkQsRUc3SEtDLElBQU1ELEVBQU1DLEtBQ3JCQSxFSG9FQTdELE9BQU9DLGVBQWViLEVBQVMsY0FDM0JjLE9BQU8sSUFFWGQsRUFBUVcsUUFBVW9DLEdBMERiLFNBQVM5QyxFQUFRRCxFQUFTSCxHQUUvQixZSXRMYyxTQUFTNkUsR0FBY3ZDLEdKZ01qQyxHSS9MS3dDLEdBRU4sR0FBQUMsR0FBQUMsYUFBTUMsRUFBQSxHQUFBRixHQUFBRyxrQkpnTURKLFNJOUxEQSxFSitMQ0ssWUk5TEQsRUorTENDLGNJNUxMLEdKK0xDOUMsR0kvTEcrQyxXQUVKSixHSitMQ0ssRUkvTENDLFNBQVNDLEdBQUdQLEVBQWNRLGNBQWNDLFNBQVNDLFVBQVcsUUFBUyxTQUFVQyxHSmdNNUVOLEVJL0xDQyxTQUFTTSxnQkFDZEQsS0oyS0o3RSxPQUFPQyxlQUFlYixFQUFTLGNBQzNCYyxPQUFPLElBRVhkLEVBQVFXLFFBQVUrRCxDSTNMbkIsSUFBQUUsR0FBQS9FLEVBQUEsSUppTk0sU0FBU0ksRUFBUUQsRUFBU0gsR0tuTmhDLFlBcUVBLFNBQVNXLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLEdBbkV2RkcsT0FBT0MsZUFBZWIsRUFBUyxjQUM3QmMsT0FBTyxHQUdULElBQUk2RSxHQUFrQjlGLEVBQVEsRUFFOUJlLFFBQU9DLGVBQWViLEVBQVMsb0JBQzdCNEYsWUFBWSxFQUNaQyxJQUFLLFdBQ0gsTUFBT3JGLEdBQXVCbUYsR0FBaUJoRixVQUluRCxJQUFJbUYsR0FBaUJqRyxFQUFRLEdBRTdCZSxRQUFPQyxlQUFlYixFQUFTLGlCQUM3QjRGLFlBQVksRUFDWkMsSUFBSyxXQUNILE1BQU9yRixHQUF1QnNGLEdBQWdCbkYsVUFJbEQsSUFBSW9GLEdBQWdCbEcsRUFBUSxHQUU1QmUsUUFBT0MsZUFBZWIsRUFBUyxnQkFDN0I0RixZQUFZLEVBQ1pDLElBQUssV0FDSCxNQUFPckYsR0FBdUJ1RixHQUFlcEYsVUFJakQsSUFBSXFGLEdBQWdCbkcsRUFBUSxHQUU1QmUsUUFBT0MsZUFBZWIsRUFBUyxnQkFDN0I0RixZQUFZLEVBQ1pDLElBQUssV0FDSCxNQUFPckYsR0FBdUJ3RixHQUFlckYsVUFJakQsSUFBSXNGLEdBQWtCcEcsRUFBUSxHQUU5QmUsUUFBT0MsZUFBZWIsRUFBUyxrQkFDN0I0RixZQUFZLEVBQ1pDLElBQUssV0FDSCxNQUFPckYsR0FBdUJ5RixHQUFpQnRGLFVBSW5ELElBQUl1RixHQUF5QnJHLEVBQVEsR0FFckNlLFFBQU9DLGVBQWViLEVBQVMseUJBQzdCNEYsWUFBWSxFQUNaQyxJQUFLLFdBQ0gsTUFBT3JGLEdBQXVCMEYsR0FBd0J2RixVQUkxRCxJQUFJd0YsR0FBWXRHLEVBQVEsR0FFeEJlLFFBQU9DLGVBQWViLEVBQVMsWUFDN0I0RixZQUFZLEVBQ1pDLElBQUssV0FDSCxNQUFPckYsR0FBdUIyRixHQUFXeEYsWUwrTnZDLFNBQVNWLEVBQVFELEVBQVNILEdNaFNoQyxZQThCQSxTQUFTVyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHQW9RdkYsUUFBUzJGLEtBQ1AsSUFBS2pCLElBQU1BLEVBQUVrQixVQUFZbEIsRUFBRWtCLFFBQVFDLE9BQ2pDLEtBQU0sSUFBSUMsT0FBTSxvRUFLbEIsS0FBSyxHQUZEQyxHQUFXckIsRUFBRWtCLFFBQVFDLE9BQU9ELEdBRXZCSSxFQUFPQyxVQUFVcEMsT0FBUXFDLEVBQVVDLE1BQU1ILEdBQU9JLEVBQU8sRUFBR0EsRUFBT0osRUFBTUksSUFDOUVGLEVBQVFFLEdBQVFILFVBQVVHLEVBRzVCLE9BQU8sS0FBS0MsU0FBU0MsVUFBVUMsS0FBS0MsTUFBTVQsR0FBVyxNQUFNVSxPQUFPUCxLQTNTcEUvRixPQUFPQyxlQUFlYixFQUFTLGNBQzdCYyxPQUFPLEdBR1QsSUFBSXFHLEdBQWlCdEgsRUFBUSxHQUl6QnVILEdBRmtCNUcsRUFBdUIyRyxHQUU5QnZHLE9BQU95RyxRQUFVLFNBQVVDLEdBQVUsSUFBSyxHQUFJckQsR0FBSSxFQUFHQSxFQUFJeUMsVUFBVXBDLE9BQVFMLElBQUssQ0FBRSxHQUFJc0QsR0FBU2IsVUFBVXpDLEVBQUksS0FBSyxHQUFJdUQsS0FBT0QsR0FBYzNHLE9BQU9tRyxVQUFVMUMsZUFBZWpFLEtBQUttSCxFQUFRQyxLQUFRRixFQUFPRSxHQUFPRCxFQUFPQyxJQUFZLE1BQU9GLElBRXZQdEgsR0FBUVcsUUFBVXlGLENBRWxCLElBQUlxQixHQUFVNUgsRUFBUSxJQUVsQjZILEVBQVdsSCxFQUF1QmlILEdBRWxDM0IsRUFBaUJqRyxFQUFRLElBRXpCOEgsRUFBa0JuSCxFQUF1QnNGLEdBRXpDOEIsRUFBYy9ILEVBQVEsSUFFdEJnSSxFQUFlckgsRUFBdUJvSCxHQUV0Q0UsRUFBWWpJLEVBQVEsSUFFcEJrSSxFQUFhbEksRUFBUSxJQUlyQm1JLEVBQWlCLFdBQ25CLE9BQ0VDLFNBQVUsVUFDVkMsTUFBTyxTQUNQbEQsWUFBWSxFQUNabUQsV0FBVyxFQUNYQyxRQUNFQyxLQUFNLEdBQUlsRCxHQUFFbUQsS0FBS0MsUUFDakJDLFdBQVcsR0FFYkMsV0FBWSxFQUNaQyxpQkFBaUIsRUFDakJDLGFBQWEsRUFDYkMsWUFBYSxnQkFDYkMsZ0JBQWlCLDBDQUNqQkMsaUJBQWtCLElBQ2xCQyxVQUFXLEdBQ1hDLFlBQ0V4RCxVQUFXLHdEQUNYeUQsT0FBUSwyQ0FDUkMsT0FBUSxzQkFDUkMsS0FBTSxHQUNOQyxNQUFPLElBRVRuRSxjQUFjLEVBQ2RvRSxrQkFBbUIsTUFJbkJoRCxHQUNGaUQsV0FBWSxTQUFvQjNDLEdBQzlCLEdBQUk0QyxHQUFRQyxJQUVaQSxNQUFLQyxRQUFVLEdBQUl0RSxHQUFFdUUsYUFFckJGLEtBQUs3QyxRQUFVUyxLQUFhWSxJQUFrQnJCLEVBRTlDLElBQUlnRCxHQUFXSCxLQUFLN0MsUUFDaEJ1QixFQUFReUIsRUFBU3pCLE1BQ2pCYyxFQUFhVyxFQUFTWCxXQUN0QkosRUFBY2UsRUFBU2YsWUFDdkIzRCxFQUFlMEUsRUFBUzFFLGFBQ3hCb0UsRUFBb0JNLEVBQVNOLGlCQUVuQixZQUFWbkIsSUFDRnNCLEtBQUs3QyxRQUFRcUMsV0FBV3hELFdBQWEsSUFBTW1CLEVBQVF1QixPQUdyRHNCLEtBQUtsRSxjQUFnQixHQUFJcUMsR0FBZ0JoSCxRQUFReUcsS0FBYW9DLEtBQUs3QyxTQUNqRWlELGFBQWMsU0FBc0JDLEdBQ2xDLE1BQU9OLEdBQU1PLFNBQVNELE1BSTFCLElBQUlFLEdBQXdCUCxLQUFLbEUsY0FBY0MsU0FDM0NDLEVBQVl1RSxFQUFzQnZFLFVBQ2xDMkQsRUFBT1ksRUFBc0JaLEtBQzdCQyxFQUFRVyxFQUFzQlgsS0FFbEM1RCxHQUFVd0UsaUJBQWlCLFdBQVksU0FBVUMsR0FDL0NBLEVBQUV2RSxtQkFHSixJQUFJdUQsSUFBUyxFQUFJbkIsRUFBVW9DLGVBQWUsSUFBS2xCLEVBQVdDLE9BQVF6RCxFQUNsRXlELEdBQU9rQixNQUFRdkIsRUFDZkssRUFBT21CLEtBQU8sSUFFZG5CLEVBQU9lLGlCQUFpQixRQUFTLFNBQVVDLEdBQ3pDVixFQUFNYyxRQUFRSixLQUNiLEdBRUNoRixJQUNGdUUsS0FBS2MsV0FBYSxHQUFJekMsR0FBYWxILFNBQ2pDNEosWUFBYSxTQUFxQkMsR0FDaEMsR0FBSUMsR0FBU0QsRUFBS0MsTUFFbEJyQixHQUFNdEksTUFBUTJKLEVBQU9DLE1BQ3JCbkIsRUFBTU8sVUFBV0QsTUFBT1ksRUFBT0MsV0FJbkN2QixFQUFLd0IsWUFBWW5CLEtBQUtjLFdBQVcvRSxTQUFTQyxXQUUxQzRELEVBQU1ZLGlCQUFpQixTQUFTLEVBQUl0QyxFQUFTL0csU0FBUyxTQUFVc0osR0FDOUQsTUFBT1YsR0FBTXFCLFdBQVdYLElBQ3ZCWixJQUFvQixHQUN2QkQsRUFBTVksaUJBQWlCLFVBQVcsU0FBVUMsR0FDMUMsTUFBT1YsR0FBTXNCLGFBQWFaLEtBQ3pCLEdBQ0hiLEVBQU1ZLGlCQUFpQixVQUFXLFNBQVVDLEdBQzFDLE1BQU9WLEdBQU11QixhQUFhYixLQUN6QixJQUdMVCxLQUFLakUsVUFBYTBELE9BQVFBLElBRTVCOEIsTUFBTyxTQUFlNUksR0FDcEIsR0FBSTZJLEdBQVl4QixLQUFLN0MsUUFDakIzQixFQUFhZ0csRUFBVWhHLFdBQ3ZCa0QsRUFBUThDLEVBQVU5QyxLQVF0QixJQUxBc0IsS0FBS3JILElBQU1BLEVBQ1A2QyxHQUNGd0UsS0FBS0MsUUFBUXdCLE1BQU05SSxHQUdQLFFBQVYrRixFQUFpQixDQUNuQixHQUFJaUIsR0FBT0ssS0FBS2xFLGNBQWNDLFNBQVM0RCxLQUVuQytCLEVBQU8vSSxFQUFJZ0osZUFBZUMsY0FBYyw4QkFFeEM1RixHQUFZLEVBQUlzQyxFQUFVb0MsZUFBZSxNQUFPLGdDQUNwRDFFLEdBQVVtRixZQUFZeEIsR0FDdEIrQixFQUFLUCxZQUFZbkYsR0FDakJnRSxLQUFLakUsU0FBU0MsVUFBWUEsRUFHNUIsTUFBT2dFLE1BQUtsRSxjQUFjQyxTQUFTQyxXQUVyQzZGLFNBQVUsV0FDUixHQUFJN0YsR0FBWWdFLEtBQUtqRSxTQUFTQyxTQU05QixPQUpJQSxJQUNGQSxFQUFVOEYsU0FHTDlCLE1BRVRhLFFBQVMsU0FBaUJrQixHQUN4QkEsRUFBTUMsZ0JBRU4sSUFBSUMsR0FBeUJqQyxLQUFLbEUsY0FBY0MsU0FDNUNDLEVBQVlpRyxFQUF1QmpHLFVBQ25DNEQsRUFBUXFDLEVBQXVCckMsS0FHL0I1RCxHQUFVa0csVUFBVUMsU0FBUyxXQUMvQixFQUFJN0QsRUFBVThELGlCQUFpQnBHLEVBQVcsWUFFMUMsRUFBSXNDLEVBQVUrRCxjQUFjckcsRUFBVyxVQUN2QzRELEVBQU0wQyxVQUdWakIsYUFBYyxTQUFzQlUsR0FDbEMsSUFBTXhELEVBQVdnRSxlQUFnQmhFLEVBQVdpRSxjQUFjQyxTQUFTVixFQUFNVyxTQUF6RSxDQUlBWCxFQUFNQyxnQkFDTixJQUFJcEMsR0FBUUksS0FBS2xFLGNBQWNDLFNBQVM2RCxNQUdwQytDLEVBQU8zQyxLQUFLYyxXQUNaOEIsRUFBTTVDLEtBQUtjLFdBQVcrQixRQUFVLEVBR2hDQyxFQUFzQixjQUFmZixFQUFNZ0IsS0FBeUMsSUFBaEJKLEVBQUtLLFdBQWlCTCxFQUFLSyxTQUFXLEVBRTVFQyxFQUFNSCxFQUFPLEVBQUlGLEVBQU1FLEVBQU9GLEVBQU0sRUFBSUUsRUFFeENJLEVBQU9QLEVBQUtRLE9BQU9GLEVBQ3ZCckQsR0FBTXRJLE1BQVE0TCxFQUFLaEMsUUFFckJJLGFBQWMsU0FBc0JTLEdBQzlCQSxFQUFNVyxVQUFZbkUsRUFBVzZFLFlBSWpDcEQsS0FBS2MsV0FBV3VDLFNBRWxCakMsV0FBWSxTQUFvQlcsR0FDOUIsTUFBTyxJQUFJdUIsU0FBUSxTQUFVQyxFQUFTQyxHQUNwQyxHQUFJbkQsR0FBT2xGLEVBQVVzSSxDQUVyQixPQUFJbEYsR0FBV21GLGFBQWFqQixTQUFTVixFQUFNVyxTQUNsQ2EsS0FHVGxELEVBQVEwQixFQUFNakUsT0FBT3hHLE1BQ3JCNkQsRUFBVzZFLEtBQUs3QyxRQUFRaEMsU0FDakJBLEVBQVN3SSxRQUFTdEQsTUFBT0EsSUFBU3VELEtBQUssU0FBVUMsR0FJdEQsTUFGQUosR0FBVUksRUFDVjdELEtBQUtjLFdBQVdnRCxPQUFPTCxHQUNoQkYsS0FDUFEsV0FBVy9ELEtBQU13RCxHQUFTQSxLQUM1Qk8sV0FBVy9ELFFBRWZNLFNBQVUsU0FBa0JELEdBQzFCLE1BQU8sSUFBSWlELFNBQVEsU0FBVUMsRUFBU0MsR0FDcEMsR0FBSXJJLEdBQVVzSSxDQUVkLE9BREF0SSxHQUFXNkUsS0FBSzdDLFFBQVFoQyxTQUNqQkEsRUFBU3dJLE9BQU90RCxHQUFPdUQsS0FBSyxTQUFVSSxHQU8zQyxNQUxBUCxHQUFVTyxFQUVOUCxHQUFXQSxFQUFRM0ksT0FBUyxHQUM5QmtGLEtBQUtpRSxXQUFXUixFQUFRLElBRW5CRixLQUNQUSxXQUFXL0QsS0FBTXdELEdBQVNBLElBQzVCTyxXQUFXL0QsUUFFZmlFLFdBQVksU0FBb0JoRCxHQUM5QixHQUFJaEIsR0FBVTdJLE9BQU84TSxLQUFLbEUsS0FBS0MsUUFBUWtFLFFBQ25DbEUsR0FBUW5GLFFBQVVrRixLQUFLN0MsUUFBUThCLFlBQ2pDZSxLQUFLQyxRQUFRbUUsWUFBWW5FLEVBQVEsR0FHbkMsSUFBSXJCLEdBQVNvQixLQUFLcUUsVUFBVXBELEVBQzVCakIsTUFBS3NFLFVBQVVyRCxHQUVmakIsS0FBS3JILElBQUk0TCxVQUFVLDBCQUNqQkMsU0FBVXZELEVBQ1ZyQyxPQUFRQSxLQUdaeUYsVUFBVyxTQUFtQnBELEdBQzVCLEdBQUl3RCxHQUFZekUsS0FBSzdDLFFBQ2pCQSxFQUFVc0gsRUFBVTdGLE9BQ3BCRCxFQUFZOEYsRUFBVTlGLFVBRXRCQyxFQUFTLEdBQUlqRCxHQUFFK0ksUUFBUXpELEVBQU8wRCxFQUFHMUQsRUFBTzJELEdBQUl6SCxFQVNoRCxPQVJBeUIsR0FBT2lHLFVBQVU1RCxFQUFPQyxPQUV4QmxCLEtBQUtDLFFBQVE2RSxTQUFTbEcsR0FFbEJELEdBQ0ZDLEVBQU9tRyxZQUdGbkcsR0FFVDBGLFVBQVcsU0FBbUJyRCxHQUM1QixHQUFJK0QsR0FBWWhGLEtBQUs3QyxRQUNqQitCLEVBQWtCOEYsRUFBVTlGLGdCQUM1QkMsRUFBYzZGLEVBQVU3RixZQUd4QjhGLEVBQWUsR0FBSXRKLEdBQUV1SixhQUFhakUsRUFBT2tFLFFBQ3pDQSxFQUFTRixFQUFhRyxVQUFZSCxFQUFlakYsS0FBS0MsUUFBUW9GLGFBRTdEbkcsR0FBbUIrRixFQUFhRyxVQUNuQ3BGLEtBQUtySCxJQUFJMk0sVUFBVUgsR0FBVUksUUFBU3BHLElBRXRDYSxLQUFLckgsSUFBSTZNLFFBQVFMLEVBQU9NLFlBQWF6RixLQUFLMEYsV0FBYUgsUUFBU3BHLEtBR3BFdUcsUUFBUyxXQUNQLEdBQUlDLEdBQVkzRixLQUFLN0MsUUFDakIrQixFQUFrQnlHLEVBQVV6RyxnQkFDNUJLLEVBQVlvRyxFQUFVcEcsU0FFMUIsT0FBT0wsR0FBa0JjLEtBQUtySCxJQUFJK00sVUFBWW5HLEtONFQ1QyxTQUFTOUksRUFBUUQsRUFBU0gsR08xbEJoQyxZQW1HQSxTQUFTdVAsR0FBWUMsRUFBZ0JDLEdBSWpDLEdBSEt4SSxTQUFTQyxVQUFVcUksYUFDcEJ4TyxPQUFPQyxlQUFlaUcsU0FBU0MsVUFBVSxlQUFlakcsTUFBTXNPLEVBQVl4SixZQUFXLEVBQU0ySixjQUFhLEVBQUtDLFVBQVMsSUFFcEhoRyxlQUFnQjFDLFVBQXRCLENBRUEsR0FBSTJJLEdBQU9qRyxJQUNYLE9BQU8sSUFBSTZGLEdBQWdCLFNBQWdCSyxFQUFTQyxHQUVoRCxRQUFTQyxHQUFLQyxFQUFHQyxHQUNiLEdBQUl4RCxFQUNKLEtBRUksR0FEQUEsRUFBT3VELEVBQUd6UCxLQUFLMlAsRUFBSUQsR0FDaEJ4RCxFQUFLMEQsS0FBTSxDQUNWLEdBQUkxRCxFQUFLeEwsUUFBVTRPLEVBQVMsQ0FDeEIsR0FBSXBELEVBQUt4TCxPQUFTd0wsRUFBS3hMLFFBQVF3TCxFQUFLeEwsTUFBTXNNLEtBQ3RDLE1BQU9kLEdBQUt4TCxNQUFNNE8sRUFBUUMsRUFDOUJELElBQVdBLEVBQVFwRCxFQUFLeEwsT0FDeEI0TyxFQUFVLEtBRWQsT0FHQXBELEVBQUt4TCxNQUFNc00sS0FDWGQsRUFBS3hMLE1BQU1zTSxLQUFLLFNBQVM2QyxHQUNyQkwsRUFBS0csRUFBSXpELEtBQUsyRCxJQUNmLFNBQVNoRyxHQUNSMkYsRUFBS0csRUFBSUcsTUFBTWpHLEtBR25CMkYsRUFBS0csRUFBSXpELEtBQUtBLEVBQUt4TCxPQUV6QixNQUFNbUosR0FHSixNQUZBMEYsSUFBVUEsRUFBTzFGLFFBQ2pCMEYsRUFBUyxPQTFCakIsR0FBSUksR0FBTU4sRUFBS3JQLEtBQUtrUCxFQUFNSSxFQUFTQyxFQThCbkNDLEdBQUtHLEVBQUl6RCxTQW5HakIsR0FBSWlCLEdBbkJKLFNBQXlCdEIsRUFBUzdDLEdBTTlCLElBTEEsR0FBSStHLEdBQU0vRyxFQUFNZ0gsV0FDWkMsRUFBSSxVQUFVRixFQUNkRyxFQUFPSCxFQUFJSSxNQUFNLGlCQUFpQixHQUNsQ0MsRUFBSyx1QkFDTG5RLE9BQ00sQ0FDTixHQUFJb1EsR0FBS0QsRUFBR0UsS0FBS0wsRUFDakIsS0FBSUksRUFFQyxLQUREcFEsR0FBRXNRLEtBQUtGLEdBT2YsTUFKQXBRLEdBQUV1USxVQUFVQyxRQUFRLFNBQVM1RyxHQUN6Qm9HLEVBQUlBLEVBQUVTLE1BQU0sRUFBRTdHLEVBQUU4RyxPQUFPOUUsRUFBU2hDLEVBQUUsSUFBSW9HLEVBQUVXLE9BQU8vRyxFQUFFOEcsTUFBTTlHLEVBQUUsR0FBRzNGLFVBRWhFK0wsRUFBSUEsRUFBRVksUUFBUSxpQkFBaUIsS0FBS0EsUUFBUSxPQUFPLEtBQzVDLEdBQUluSyxVQUFTd0osRUFBS0QsT0FJekJhLE9BQU9yUixFQUFRLEdBQVl1USxXQUMzQmUsU0FBU3RSLEVBQVEsSUFBcUJ1USxZQUUxQyxRQUFTN0MsR0FBVytCLEVBQUs4QixHQW9EckIsUUFBU0MsS0FDTCxNQUFPQyxHQUFTckssTUFBTXFJLEVBQUs1SSxXQW5EMUJJLFNBQVNDLFVBQVV3RyxZQUNwQjNNLE9BQU9DLGVBQWVpRyxTQUFTQyxVQUFVLGNBQWNqRyxNQUFNeU0sRUFBVzNILFlBQVcsRUFBTTJKLGNBQWEsRUFBS0MsVUFBUyxJQUduSGpDLEVBQVdnRSxhQUNkaEUsRUFBV2dFLFdBQWEsU0FBb0JsQixFQUFFakMsRUFBRW9ELEVBQUV2SCxFQUFFd0gsR0FDbEQsTUFBTyxTQUFTQyxHQUFFQyxHQUNWLEtBQU9BLEdBQUcsQ0FDTixHQUFJQSxFQUFFdkUsS0FFRixNQURBdUUsR0FBSUEsRUFBRXZFLEtBQUtzRSxFQUFHekgsR0FDUHdILEVBQUVHLE9BQVVELENBRXZCLEtBQ0ksR0FBSUEsRUFBRUUsSUFBSyxDQUNQLEdBQUlGLEVBQUVyTixPQUNKLE1BQU9xTixHQUFFRSxNQUFRekQsRUFBRWhPLEtBQUtpUSxHQUFLc0IsQ0FDL0JBLEdBQUlILE1BRUpHLEdBQUlBLEVBQUV2UixLQUFLaVEsR0FDakIsTUFBT3lCLEdBQ0wsTUFBTzdILEdBQUU2SCxRQU14QnZFLEVBQVd3RSxlQUNaeEUsRUFBV3dFLGFBQWUsZ0JBQzFCeEUsRUFBV3lFLGNBQWdCekUsRUFBVzBFLFVBQVkxRSxFQUFXMkUscUJBQXVCLGVBR3hGLElBQUlaLEdBQVc5SCxJQUNmLFFBQVE0SCxHQUNSLEtBQUssRUFDRCxNQUFPLElBQUs3RCxHQUFXMEUsU0FBVVosRUFDckMsS0FBSyxHQUNELE1BQU8sSUFBSzlELEdBQVd3RSxhQUFjVixFQUN6QyxLQUFLTyxRQUdELE1BREFQLEdBQVVqRSxLQUFPaUUsRUFDVkEsQ0FDWCxTQUNJLE1BQU8sWUFDSCxJQUNJLE1BQU9DLEdBQVNySyxNQUFNcUksRUFBSzVJLFdBQzdCLE1BQU15TCxHQUNKLE1BQU9mLEdBQVFlLE9Bb0QvQjVFLEtBQ0E2QixJQUdBblAsRUFBT0QsU0FDSHVOLFdBQVdBLEVBQ1g2QixZQUFZQSxJUDRsQlYsU0FBU25QLEVBQVFELEVBQVNILElRaHZCaEMsU0FBQXVTLEVBQUFDLEdBTUEsWVJvdkJDLElBQUlDLEdBQTRCLGtCQUFYQyxTQUFvRCxnQkFBcEJBLFFBQU9DLFNBQXdCLFNBQVUvUixHQUFPLGFBQWNBLElBQVMsU0FBVUEsR0FBTyxNQUFPQSxJQUF5QixrQkFBWDhSLFNBQXlCOVIsRUFBSWdTLGNBQWdCRixRQUFVOVIsSUFBUThSLE9BQU94TCxVQUFZLGVBQWtCdEcsR1FudkJ2UVIsR0FBT0QsUUFBVSxTQUFTMFMsR0FzQnRCLFFBQVNDLEdBQU9DLEdBQ1osR0FBSUEsRUFBTSxDQUNOLEdBQUlDLEdBQUtySixJQUNUb0osR0FBSyxTQUFVOUMsR0FDWCtDLEVBQUduRCxRQUFRSSxJQUNaLFNBQVVBLEdBQ1QrQyxFQUFHbEQsT0FBT0csTUE0RXRCLFFBQVNnRCxHQUFnQnhTLEVBQUd3UCxHQUN4QixHQUFtQixrQkFBUnhQLEdBQUU2TixFQUNULElBQ0ksR0FBSTRFLEdBQU96UyxFQUFFNk4sRUFBRS9OLEtBQUt3UixPQUFXOUIsRUFDL0J4UCxHQUFFQyxFQUFFbVAsUUFBUXFELEdBQ2QsTUFBT3RQLEdBQ0xuRCxFQUFFQyxFQUFFb1AsT0FBT2xNLE9BR2ZuRCxHQUFFQyxFQUFFbVAsUUFBUUksR0FHcEIsUUFBU2tELEdBQWUxUyxFQUFHMlMsR0FDdkIsR0FBbUIsa0JBQVIzUyxHQUFFNFMsRUFDVCxJQUNJLEdBQUlILEdBQU96UyxFQUFFNFMsRUFBRTlTLEtBQUt3UixPQUFXcUIsRUFDL0IzUyxHQUFFQyxFQUFFbVAsUUFBUXFELEdBQ2QsTUFBT3RQLEdBQ0xuRCxFQUFFQyxFQUFFb1AsT0FBT2xNLE9BR2ZuRCxHQUFFQyxFQUFFb1AsT0FBT3NELEdBNUhuQlAsRUFBT0EsR0FBMEIsWUFBakIsU0FBT04sRUFBUCxZQUFBRSxFQUFPRixLQUFzQkEsRUFBUWUsVUFBb0Msa0JBQWZkLElBQTZCQSxHQUFpQixTQUFTZSxHQUFHQyxXQUFXRCxFQUFFLEdBQ2pKLElBQUlFLEdBQVEsV0FFUixRQUFTQyxLQUNMLEtBQU9DLEVBQUdsUCxPQUFTbVAsR0FBUyxDQUN4QixJQUFNRCxFQUFHQyxLQUFhLE1BQU10QixJQUM1QnFCLEVBQUdDLEtBQWE3QixPQUNaNkIsSUFBWUMsSUFDWkYsRUFBR0csT0FBTyxFQUFHRCxHQUNiRCxFQUFVLElBUHRCLEdBQUlELE1BQVNDLEVBQVUsRUFBR0MsRUFBYSxJQVl2QyxPQUFPLFVBQVU3RCxHQUNiMkQsRUFBRzdDLEtBQUtkLEdBQ0oyRCxFQUFHbFAsT0FBU21QLEdBQVksR0FDeEJmLEVBQUthLE1BOEhqQixPQS9HQVosR0FBTzVMLFdBQ0gySSxRQUFTLFNBQVU1TyxHQUNmLEdBQW1COFEsU0FBZnBJLEtBQUtvSyxNQUFULENBRUEsR0FBSTlTLElBQVUwSSxLQUNWLE1BQU9BLE1BQUttRyxPQUFPLEdBQUlrRSxXQUFVLHdDQUNyQyxJQUFJaEIsR0FBS3JKLElBQ1QsSUFBSTFJLElBQTJCLGtCQUFWQSxJQUF5QyxZQUFqQixTQUFPQSxFQUFQLFlBQUF3UixFQUFPeFIsS0FDaEQsSUFDSSxHQUFJZ1QsR0FBUSxFQUNSMUcsRUFBT3RNLEVBQU1zTSxJQUNqQixJQUFvQixrQkFBVEEsR0FVUCxXQVRBQSxHQUFLaE4sS0FBS1UsRUFBTyxTQUFVaVQsR0FDbEJELEtBQ0RqQixFQUFHbkQsUUFBUXFFLElBRWhCLFNBQVVDLEdBQ0pGLEtBQ0RqQixFQUFHbEQsT0FBT3FFLEtBS3hCLE1BQU8vSixHQUdMLFlBRks2SixHQUNEdEssS0FBS21HLE9BQU8xRixJQUl4QlQsS0FBS29LLE1BQVFkLEVBQ2J0SixLQUFLeUcsRUFBSW5QLEVBQ0wrUixFQUFHdlMsR0FDSGdULEVBQUssV0FDRCxJQUFLLEdBQUlKLEdBQUksRUFBR2UsRUFBSXBCLEVBQUd2UyxFQUFFZ0UsT0FBTzRPLEVBQUllLEVBQUdmLElBQ25DSixFQUFnQkQsRUFBR3ZTLEVBQUU0UyxHQUFJcFMsT0FHekM2TyxPQUFRLFNBQVVzRCxHQUNkLEdBQW1CckIsU0FBZnBJLEtBQUtvSyxNQUFULENBRUFwSyxLQUFLb0ssTUFBUVosRUFDYnhKLEtBQUt5RyxFQUFJZ0QsQ0FDVCxJQUFJaUIsR0FBVTFLLEtBQUtsSixDQUNmNFQsSUFDQVosRUFBSyxXQUNELElBQUssR0FBSUosR0FBSSxFQUFHZSxFQUFJQyxFQUFRNVAsT0FBTzRPLEVBQUllLEVBQUdmLElBQ3RDRixFQUFla0IsRUFBUWhCLEdBQUlELE9BRzNDN0YsS0FBTSxTQUFVK0csRUFBS0MsR0FDakIsR0FBSTdULEdBQUksR0FBSW9TLEdBQ1IwQixHQUNBbEcsRUFBR2dHLEVBQ0hqQixFQUFHa0IsRUFDSDdULEVBQUdBLEVBRVAsSUFBbUJxUixTQUFmcEksS0FBS29LLE1BQ0RwSyxLQUFLbEosRUFDTGtKLEtBQUtsSixFQUFFcVEsS0FBSzBELEdBRVo3SyxLQUFLbEosR0FBSytULE9BQ1gsQ0FDSCxHQUFJN0MsR0FBSWhJLEtBQUtvSyxNQUFPVSxFQUFJOUssS0FBS3lHLENBQzdCcUQsR0FBSyxXQUNEOUIsRUFBRTZDLEVBQVFDLEtBR2xCLE1BQU8vVCxLQTRCZm9TLEVBQU9qRCxRQUFVLFNBQVU2RSxHQUN2QixHQUFJQSxHQUFRQSxZQUFlNUIsR0FDdkIsTUFBTzRCLEVBQ1gsSUFBSUMsR0FBSSxHQUFJN0IsRUFFWixPQURBNkIsR0FBRTlFLFFBQVE2RSxHQUNIQyxHQUVYN0IsRUFBT2hELE9BQVMsU0FBVWxNLEdBQ3RCLEdBQUlBLEdBQVFBLFlBQWVrUCxHQUN2QixNQUFPbFAsRUFDWCxJQUFJK1EsR0FBSSxHQUFJN0IsRUFFWixPQURBNkIsR0FBRTdFLE9BQU9sTSxHQUNGK1EsR0FHWDdCLEVBQU84QixRQUFVLGVBQ1Y5QixLUmt2Qm1CdlMsS0FBS0osRUFBU0gsRUFBb0IsR0FBSUEsRUFBb0IsR0FBR3dTLGVBSXJGLFNBQVNwUyxFQUFRRCxHQUV0QixZU3A0QkQsU0FBUzBVLEtBQ0wsS0FBTSxJQUFJbk8sT0FBTSxtQ0FFcEIsUUFBU29PLEtBQ0wsS0FBTSxJQUFJcE8sT0FBTSxxQ0FzQnBCLFFBQVNxTyxHQUFXQyxHQUNoQixHQUFJQyxJQUFxQnpCLFdBRXJCLE1BQU9BLFlBQVd3QixFQUFLLEVBRzNCLEtBQUtDLElBQXFCSixJQUFxQkksSUFBcUJ6QixXQUVoRSxNQURBeUIsR0FBbUJ6QixXQUNaQSxXQUFXd0IsRUFBSyxFQUUzQixLQUVJLE1BQU9DLEdBQWlCRCxFQUFLLEdBQy9CLE1BQU01SyxHQUNKLElBRUksTUFBTzZLLEdBQWlCMVUsS0FBSyxLQUFNeVUsRUFBSyxHQUMxQyxNQUFNNUssR0FFSixNQUFPNkssR0FBaUIxVSxLQUFLb0osS0FBTXFMLEVBQUssS0FNcEQsUUFBU0UsR0FBZ0IzTSxHQUNyQixHQUFJNE0sSUFBdUJDLGFBRXZCLE1BQU9BLGNBQWE3TSxFQUd4QixLQUFLNE0sSUFBdUJMLElBQXdCSyxJQUF1QkMsYUFFdkUsTUFEQUQsR0FBcUJDLGFBQ2RBLGFBQWE3TSxFQUV4QixLQUVJLE1BQU80TSxHQUFtQjVNLEdBQzVCLE1BQU82QixHQUNMLElBRUksTUFBTytLLEdBQW1CNVUsS0FBSyxLQUFNZ0ksR0FDdkMsTUFBTzZCLEdBR0wsTUFBTytLLEdBQW1CNVUsS0FBS29KLEtBQU1wQixLQVlqRCxRQUFTOE0sS0FDQUMsR0FBYUMsSUFHbEJELEdBQVcsRUFDUEMsRUFBYTlRLE9BQ2IrUSxFQUFRRCxFQUFhbE8sT0FBT21PLEdBRTVCQyxHQUFjLEVBRWRELEVBQU0vUSxRQUNOaVIsS0FJUixRQUFTQSxLQUNMLElBQUlKLEVBQUosQ0FHQSxHQUFJSyxHQUFVWixFQUFXTSxFQUN6QkMsSUFBVyxDQUdYLEtBREEsR0FBSU0sR0FBTUosRUFBTS9RLE9BQ1ZtUixHQUFLLENBR1AsSUFGQUwsRUFBZUMsRUFDZkEsT0FDU0MsRUFBYUcsR0FDZEwsR0FDQUEsRUFBYUUsR0FBWUksS0FHakNKLElBQWMsRUFDZEcsRUFBTUosRUFBTS9RLE9BRWhCOFEsRUFBZSxLQUNmRCxHQUFXLEVBQ1hKLEVBQWdCUyxJQWlCcEIsUUFBU0csR0FBS2QsRUFBS2UsR0FDZnBNLEtBQUtxTCxJQUFNQSxFQUNYckwsS0FBS29NLE1BQVFBLEVBWWpCLFFBQVNDLE1BaEtULEdBT0lmLEdBQ0FFLEVBUkE1QyxFQUFVblMsRUFBT0QsWUFnQnBCLFdBQ0csSUFFUThVLEVBRHNCLGtCQUFmekIsWUFDWUEsV0FFQXFCLEVBRXpCLE1BQU96SyxHQUNMNkssRUFBbUJKLEVBRXZCLElBRVFNLEVBRHdCLGtCQUFqQkMsY0FDY0EsYUFFQU4sRUFFM0IsTUFBTzFLLEdBQ0wrSyxFQUFxQkwsS0F1RDdCLElBRUlTLEdBRkFDLEtBQ0FGLEdBQVcsRUFFWEcsR0FBYyxDQXlDbEJsRCxHQUFRZSxTQUFXLFNBQVUwQixHQUN6QixHQUFJdkUsR0FBTyxHQUFJMUosT0FBTUYsVUFBVXBDLE9BQVMsRUFDeEMsSUFBSW9DLFVBQVVwQyxPQUFTLEVBQ25CLElBQUssR0FBSUwsR0FBSSxFQUFHQSxFQUFJeUMsVUFBVXBDLE9BQVFMLElBQ2xDcU0sRUFBS3JNLEVBQUksR0FBS3lDLFVBQVV6QyxFQUdoQ29SLEdBQU0xRSxLQUFLLEdBQUlnRixHQUFLZCxFQUFLdkUsSUFDSixJQUFqQitFLEVBQU0vUSxRQUFpQjZRLEdBQ3ZCUCxFQUFXVyxJQVNuQkksRUFBSzVPLFVBQVUyTyxJQUFNLFdBQ2pCbE0sS0FBS3FMLElBQUk1TixNQUFNLEtBQU11QyxLQUFLb00sUUFFOUJ4RCxFQUFRakksTUFBUSxVQUNoQmlJLEVBQVEwRCxTQUFVLEVBQ2xCMUQsRUFBUTJELE9BQ1IzRCxFQUFRNEQsUUFDUjVELEVBQVFxQyxRQUFVLEdBQ2xCckMsRUFBUTZELFlBSVI3RCxFQUFRL00sR0FBS3dRLEVBQ2J6RCxFQUFROEQsWUFBY0wsRUFDdEJ6RCxFQUFRK0QsS0FBT04sRUFDZnpELEVBQVFnRSxJQUFNUCxFQUNkekQsRUFBUWlFLGVBQWlCUixFQUN6QnpELEVBQVFrRSxtQkFBcUJULEVBQzdCekQsRUFBUW1FLEtBQU9WLEVBRWZ6RCxFQUFRb0UsUUFBVSxTQUFVQyxHQUN4QixLQUFNLElBQUlsUSxPQUFNLHFDQUdwQjZMLEVBQVFzRSxJQUFNLFdBQWMsTUFBTyxLQUNuQ3RFLEVBQVF1RSxNQUFRLFNBQVVDLEdBQ3RCLEtBQU0sSUFBSXJRLE9BQU0sbUNBRXBCNkwsRUFBUXlFLE1BQVEsV0FBYSxNQUFPLEtUbzVCOUIsU0FBUzVXLEVBQVFELEVBQVNILEdBRS9CLFlVeGpDRCxTQUFTaVgsR0FBUTVXLEVBQUk2VyxHQUNuQnZOLEtBQUt3TixJQUFNOVcsRUFDWHNKLEtBQUt5TixTQUFXRixFQW5CbEIsR0FBSTlQLEdBQVFILFNBQVNDLFVBQVVFLEtBSS9CakgsR0FBUXFULFdBQWEsV0FDbkIsTUFBTyxJQUFJeUQsR0FBUTdQLEVBQU03RyxLQUFLaVQsV0FBWXZRLE9BQVE0RCxXQUFZdU8sZUFFaEVqVixFQUFRa1gsWUFBYyxXQUNwQixNQUFPLElBQUlKLEdBQVE3UCxFQUFNN0csS0FBSzhXLFlBQWFwVSxPQUFRNEQsV0FBWXlRLGdCQUVqRW5YLEVBQVFpVixhQUNSalYsRUFBUW1YLGNBQWdCLFNBQVMzQixHQUMzQkEsR0FDRkEsRUFBUTRCLFNBUVpOLEVBQVEvUCxVQUFVc1EsTUFBUVAsRUFBUS9QLFVBQVV1USxJQUFNLGFBQ2xEUixFQUFRL1AsVUFBVXFRLE1BQVEsV0FDeEI1TixLQUFLeU4sU0FBUzdXLEtBQUswQyxPQUFRMEcsS0FBS3dOLE1BSWxDaFgsRUFBUXVYLE9BQVMsU0FBUzdLLEVBQU04SyxHQUM5QnZDLGFBQWF2SSxFQUFLK0ssZ0JBQ2xCL0ssRUFBS2dMLGFBQWVGLEdBR3RCeFgsRUFBUTJYLFNBQVcsU0FBU2pMLEdBQzFCdUksYUFBYXZJLEVBQUsrSyxnQkFDbEIvSyxFQUFLZ0wsY0FBZ0IsR0FHdkIxWCxFQUFRNFgsYUFBZTVYLEVBQVE2WCxPQUFTLFNBQVNuTCxHQUMvQ3VJLGFBQWF2SSxFQUFLK0ssZUFFbEIsSUFBSUQsR0FBUTlLLEVBQUtnTCxZQUNiRixJQUFTLElBQ1g5SyxFQUFLK0ssZUFBaUJwRSxXQUFXLFdBQzNCM0csRUFBS29MLFlBQ1BwTCxFQUFLb0wsY0FDTk4sS0FLUDNYLEVBQVEsSUFDUkcsRUFBUXFTLGFBQWVBLGFBQ3ZCclMsRUFBUStYLGVBQWlCQSxnQlY2a0NuQixTQUFTOVgsRUFBUUQsRUFBU0gsSUFFSCxTQUFTbVksRUFBUTVGLEdBQVUsY1dub0N2RCxTQUFVNEYsRUFBUXBHLEdBYWYsUUFBU1MsR0FBYXRRLEdBRUksa0JBQWJBLEtBQ1RBLEVBQVcsR0FBSStFLFVBQVMsR0FBSy9FLEdBSS9CLEtBQUssR0FERHVPLEdBQU8sR0FBSTFKLE9BQU1GLFVBQVVwQyxPQUFTLEdBQy9CTCxFQUFJLEVBQUdBLEVBQUlxTSxFQUFLaE0sT0FBUUwsSUFDN0JxTSxFQUFLck0sR0FBS3lDLFVBQVV6QyxFQUFJLEVBRzVCLElBQUlnVSxJQUFTbFcsU0FBVUEsRUFBVXVPLEtBQU1BLEVBR3ZDLE9BRkE0SCxHQUFjQyxHQUFjRixFQUM1QkcsRUFBa0JELEdBQ1hBLElBR1QsUUFBU0osR0FBZU0sU0FDYkgsR0FBY0csR0FHekIsUUFBUzNDLEdBQUl1QyxHQUNULEdBQUlsVyxHQUFXa1csRUFBS2xXLFNBQ2hCdU8sRUFBTzJILEVBQUszSCxJQUNoQixRQUFRQSxFQUFLaE0sUUFDYixJQUFLLEdBQ0R2QyxHQUNBLE1BQ0osS0FBSyxHQUNEQSxFQUFTdU8sRUFBSyxHQUNkLE1BQ0osS0FBSyxHQUNEdk8sRUFBU3VPLEVBQUssR0FBSUEsRUFBSyxHQUN2QixNQUNKLEtBQUssR0FDRHZPLEVBQVN1TyxFQUFLLEdBQUlBLEVBQUssR0FBSUEsRUFBSyxHQUNoQyxNQUNKLFNBQ0l2TyxFQUFTa0YsTUFBTTJLLEVBQVd0QixJQUtsQyxRQUFTZ0ksR0FBYUQsR0FHbEIsR0FBSUUsRUFHQWxGLFdBQVdpRixFQUFjLEVBQUdELE9BQ3pCLENBQ0gsR0FBSUosR0FBT0MsRUFBY0csRUFDekIsSUFBSUosRUFBTSxDQUNOTSxHQUF3QixDQUN4QixLQUNJN0MsRUFBSXVDLEdBRFIsUUFHSUYsRUFBZU0sR0FDZkUsR0FBd0IsS0FwRXhDLElBQUlQLEVBQU8zRixhQUFYLENBSUEsR0FJSStGLEdBSkFELEVBQWEsRUFDYkQsS0FDQUssR0FBd0IsRUFDeEJDLEVBQU1SLEVBQU9TLFNBb0piQyxFQUFXOVgsT0FBTytYLGdCQUFrQi9YLE9BQU8rWCxlQUFlWCxFQUM5RFUsR0FBV0EsR0FBWUEsRUFBU3JGLFdBQWFxRixFQUFXVixFQUdmLHdCQUFsQzVILFNBQVNoUSxLQUFLNFgsRUFBTzVGLFNBckY1QixXQUNJZ0csRUFBb0IsU0FBU0MsR0FDekJqRyxFQUFRZSxTQUFTLFdBQWNtRixFQUFhRCxTQUlwRCxXQUdJLEdBQUlMLEVBQU9ZLGNBQWdCWixFQUFPYSxjQUFlLENBQzdDLEdBQUlDLElBQTRCLEVBQzVCQyxFQUFlZixFQUFPZ0IsU0FNMUIsT0FMQWhCLEdBQU9nQixVQUFZLFdBQ2ZGLEdBQTRCLEdBRWhDZCxFQUFPWSxZQUFZLEdBQUksS0FDdkJaLEVBQU9nQixVQUFZRCxFQUNaRCxNQUlmLFdBS0ksR0FBSUcsR0FBZ0IsZ0JBQWtCQyxLQUFLQyxTQUFXLElBQ2xEQyxFQUFrQixTQUFTN04sR0FDdkJBLEVBQU1oRSxTQUFXeVEsR0FDSyxnQkFBZnpNLEdBQU10SixNQUN5QixJQUF0Q3NKLEVBQU10SixLQUFLb1gsUUFBUUosSUFDbkJYLEdBQWMvTSxFQUFNdEosS0FBSzZPLE1BQU1tSSxFQUFjM1UsU0FJakQwVCxHQUFPaE8saUJBQ1BnTyxFQUFPaE8saUJBQWlCLFVBQVdvUCxHQUFpQixHQUVwRHBCLEVBQU9zQixZQUFZLFlBQWFGLEdBR3BDaEIsRUFBb0IsU0FBU0MsR0FDekJMLEVBQU9ZLFlBQVlLLEVBQWdCWixFQUFRLFNBbUR4Q0wsRUFBT3VCLGVBL0NsQixXQUNJLEdBQUlDLEdBQVUsR0FBSUQsZUFDbEJDLEdBQVFDLE1BQU1ULFVBQVksU0FBU3pOLEdBRS9CK00sRUFEYS9NLEVBQU10SixPQUl2Qm1XLEVBQW9CLFNBQVNDLEdBQ3pCbUIsRUFBUUUsTUFBTWQsWUFBWVAsT0EyQ3ZCRyxHQUFPLHNCQUF3QkEsR0FBSXRPLGNBQWMsVUF2QzVELFdBQ0ksR0FBSXlQLEdBQU9uQixFQUFJb0IsZUFDZnhCLEdBQW9CLFNBQVNDLEdBR3pCLEdBQUl3QixHQUFTckIsRUFBSXRPLGNBQWMsU0FDL0IyUCxHQUFPelcsbUJBQXFCLFdBQ3hCa1YsRUFBYUQsR0FDYndCLEVBQU96VyxtQkFBcUIsS0FDNUJ1VyxFQUFLRyxZQUFZRCxHQUNqQkEsRUFBUyxNQUViRixFQUFLaFAsWUFBWWtQLE9BSXpCLFdBQ0l6QixFQUFvQixTQUFTQyxHQUN6QmhGLFdBQVdpRixFQUFjLEVBQUdELE9BOEJwQ0ssRUFBU3JHLGFBQWVBLEVBQ3hCcUcsRUFBU1gsZUFBaUJBLElBQ1osbUJBQVR6SSxNQUF5QyxTQUFYMEksRUFBUHBHLE9BQXVDb0csRUFBUzFJLFFYa29DbERsUCxLQUFLSixFQUFVLFdBQWEsTUFBT3dKLFNBQVkzSixFQUFvQixLQUkzRixTQUFTSSxFQUFRRCxHQUV0QixZWWowQ0RDLEdBQU9ELFFBQVUsV0FDYixRQUFTK1osR0FBV3RaLEdBQ2hCLE1BQU9BLElBQVFBLFlBQWVHLFNBQTZCLGtCQUFYSCxHQUFJMk0sS0FHeEQsUUFBUzRNLEdBQVd6WixFQUFFdVIsRUFBRW1JLEdBQ3BCLElBRUksR0FBSTdMLEdBQUk2TCxFQUFNQSxFQUFJbkksR0FBR0EsQ0FFckIsSUFBSXZSLElBQUk2TixFQUNKLE1BQU83TixHQUFFb1AsT0FBTyxHQUFJa0UsV0FBVSwyQkFFOUJrRyxHQUFXM0wsR0FFWEEsRUFBRWhCLEtBQUssU0FBU2UsR0FDWjZMLEVBQVd6WixFQUFFNE4sSUFDZixTQUFTbEUsR0FDUDFKLEVBQUVvUCxPQUFPMUYsS0FHYjFKLEVBQUVtUCxRQUFRdEIsR0FFaEIsTUFBTytELEdBRUw1UixFQUFFb1AsT0FBT3dDLElBSWpCLFFBQVMrSCxNQU1ULFFBQVNDLEdBQVdsSyxJQUNwQixRQUFTbUssR0FBVUMsRUFBSUMsR0FDbkI5USxLQUFLa0csUUFBVTJLLEVBQ2Y3USxLQUFLbUcsT0FBUzJLLEVBR2xCLFFBQVNsTixHQUFLaU4sRUFBSUMsR0FDZCxHQUFJQyxHQUFRLEdBQUlMLEVBQ2hCLEtBQ0kxUSxLQUFLZ1IsVUFBVSxTQUFTMVosR0FDcEIsTUFBT2laLEdBQVdqWixHQUFTQSxFQUFNc00sS0FBS2lOLEVBQUlDLEdBQU9OLEVBQVdPLEVBQU16WixFQUFNdVosSUFDMUUsU0FBU2xJLEdBQ1A2SCxFQUFXTyxFQUFNcEksRUFBR21JLEtBRTFCLE1BQU9uSSxHQUNMNkgsRUFBV08sRUFBTXBJLEVBQUdtSSxHQUV4QixNQUFPQyxHQUdYLFFBQVN0SSxHQUFTWCxHQUNkOUgsS0FBS2dSLFVBQVlsSixFQUNqQjlILEtBQUs0RCxLQUFPQSxFQVNoQixNQXBDQThNLEdBQVFuVCxXQUNKMkksUUFBUXlLLEVBQ1J4SyxPQUFPd0ssRUFDUC9NLEtBQUtnTixHQTJCVG5JLEVBQVN2QyxRQUFVLFNBQVNPLEdBQ3hCLE1BQU9nQyxHQUFTOEgsV0FBVzlKLEdBQUtBLEdBQUs3QyxLQUFLLFNBQVNzQyxHQUFTLE1BQU9BLEdBQVFPLE1BRy9FZ0MsRUFBUzhILFdBQWFBLEVBRWY5SCxJWjAwQ0wsU0FBU2hTLEVBQVFELElBRU0sU0FBU2dZLEdBQVMsWWE1d0MvQyxTQUFTeUMsR0FBUzdILEVBQU04SCxFQUFNL1QsR0F1QjVCLFFBQVNnVSxHQUFXQyxHQUNsQixHQUFJdEssR0FBT3VLLEVBQ1BDLEVBQVVDLENBS2QsT0FIQUYsR0FBV0UsRUFBV25KLE9BQ3RCb0osRUFBaUJKLEVBQ2pCblEsRUFBU21JLEVBQUszTCxNQUFNNlQsRUFBU3hLLEdBSS9CLFFBQVMySyxHQUFZTCxHQU1uQixNQUpBSSxHQUFpQkosRUFFakJNLEVBQVU3SCxXQUFXOEgsRUFBY1QsR0FFNUJVLEVBQVVULEVBQVdDLEdBQVFuUSxFQUd0QyxRQUFTNFEsR0FBY1QsR0FDckIsR0FBSVUsR0FBb0JWLEVBQU9XLEVBQzNCQyxFQUFzQlosRUFBT0ksRUFDN0J2USxFQUFTaVEsRUFBT1ksQ0FFcEIsT0FBT0csR0FBU0MsRUFBVWpSLEVBQVFrUixFQUFVSCxHQUF1Qi9RLEVBR3JFLFFBQVNtUixHQUFhaEIsR0FDcEIsR0FBSVUsR0FBb0JWLEVBQU9XLEVBQzNCQyxFQUFzQlosRUFBT0ksQ0FLakMsT0FBeUJwSixVQUFqQjJKLEdBQStCRCxHQUFxQlosR0FDekRZLEVBQW9CLEdBQU9HLEdBQVVELEdBQXVCRyxFQUdqRSxRQUFTUixLQUNQLEdBQUlQLEdBQU9pQixHQUNYLElBQUlELEVBQWFoQixHQUNmLE1BQU9rQixHQUFhbEIsRUFHdEJNLEdBQVU3SCxXQUFXOEgsRUFBY0UsRUFBY1QsSUFHbkQsUUFBU2tCLEdBQWFsQixHQUtwQixNQUpBTSxHQUFVdEosT0FJTm1LLEdBQVlsQixFQUNQRixFQUFXQyxJQUVwQkMsRUFBV0UsRUFBV25KLE9BQ2ZuSCxHQUdULFFBQVN1UixLQUNTcEssU0FBWnNKLEdBQ0ZqRyxhQUFhaUcsR0FFZkYsRUFBaUIsRUFDakJILEVBQVdVLEVBQWVSLEVBQVdHLEVBQVV0SixPQUdqRCxRQUFTcUssS0FDUCxNQUFtQnJLLFVBQVpzSixFQUF3QnpRLEVBQVNxUixFQUFhRCxLQUd2RCxRQUFTSyxLQUNQLEdBQUl0QixHQUFPaUIsSUFDUE0sRUFBYVAsRUFBYWhCLEVBTTlCLElBSkFDLEVBQVduVSxVQUNYcVUsRUFBV3ZSLEtBQ1grUixFQUFlWCxFQUVYdUIsRUFBWSxDQUNkLEdBQWdCdkssU0FBWnNKLEVBQ0YsTUFBT0QsR0FBWU0sRUFFckIsSUFBSUUsRUFHRixNQURBUCxHQUFVN0gsV0FBVzhILEVBQWNULEdBQzVCQyxFQUFXWSxHQU10QixNQUhnQjNKLFVBQVpzSixJQUNGQSxFQUFVN0gsV0FBVzhILEVBQWNULElBRTlCalEsRUFsSFQsR0FBSW9RLEdBQ0FFLEVBQ0FZLEVBQ0FsUixFQUNBeVEsRUFDQUssRUFDQVAsRUFBaUIsRUFDakJJLEdBQVUsRUFDVkssR0FBUyxFQUNUTSxHQUFXLENBRWYsSUFBbUIsa0JBQVJuSixHQUNULEtBQU0sSUFBSWlCLFdBQVV1SSxFQTBHdEIsT0F4R0ExQixHQUFPMkIsRUFBUzNCLElBQVMsRUFDckI0QixFQUFTM1YsS0FDWHlVLElBQVl6VSxFQUFReVUsUUFDcEJLLEVBQVMsV0FBYTlVLEdBQ3RCZ1YsRUFBVUYsRUFBU2MsRUFBVUYsRUFBUzFWLEVBQVFnVixVQUFZLEVBQUdqQixHQUFRaUIsRUFDckVJLEVBQVcsWUFBY3BWLEtBQVlBLEVBQVFvVixTQUFXQSxHQWlHMURHLEVBQVVGLE9BQVNBLEVBQ25CRSxFQUFVRCxNQUFRQSxFQUNYQyxFQTRCVCxRQUFTSSxHQUFTeGIsR0FDaEIsR0FBSTBiLEdBQUEsU0FBYzFiLEVBQWQsWUFBQXdSLEVBQWN4UixFQUNsQixTQUFTQSxJQUFrQixVQUFSMGIsR0FBNEIsWUFBUkEsR0EyQnpDLFFBQVNDLEdBQWEzYixHQUNwQixRQUFTQSxHQUF5QixXQUFoQixTQUFPQSxFQUFQLFlBQUF3UixFQUFPeFIsSUFvQjNCLFFBQVM0YixHQUFTNWIsR0FDaEIsTUFBdUIsV0FBaEIsU0FBT0EsRUFBUCxZQUFBd1IsRUFBT3hSLEtBQ1gyYixFQUFhM2IsSUFBVTZiLEVBQWV2YyxLQUFLVSxJQUFVOGIsRUEwQjFELFFBQVNQLEdBQVN2YixHQUNoQixHQUFvQixnQkFBVEEsR0FDVCxNQUFPQSxFQUVULElBQUk0YixFQUFTNWIsR0FDWCxNQUFPK2IsRUFFVCxJQUFJUCxFQUFTeGIsR0FBUSxDQUNuQixHQUFJZ2MsR0FBZ0Msa0JBQWpCaGMsR0FBTWljLFFBQXdCamMsRUFBTWljLFVBQVlqYyxDQUNuRUEsR0FBUXdiLEVBQVNRLEdBQVVBLEVBQVEsR0FBTUEsRUFFM0MsR0FBb0IsZ0JBQVRoYyxHQUNULE1BQWlCLEtBQVZBLEVBQWNBLEdBQVNBLENBRWhDQSxHQUFRQSxFQUFNbVEsUUFBUStMLEVBQVEsR0FDOUIsSUFBSUMsR0FBV0MsRUFBV0MsS0FBS3JjLEVBQy9CLE9BQVFtYyxJQUFZRyxFQUFVRCxLQUFLcmMsR0FDL0J1YyxFQUFhdmMsRUFBTWdRLE1BQU0sR0FBSW1NLEVBQVcsRUFBSSxHQUMzQ0ssRUFBV0gsS0FBS3JjLEdBQVMrYixHQUFPL2IsRWIyaEN0QyxHQUFJd1IsR0FBNEIsa0JBQVhDLFNBQW9ELGdCQUFwQkEsUUFBT0MsU0FBd0IsU0FBVS9SLEdBQU8sYUFBY0EsSUFBUyxTQUFVQSxHQUFPLE1BQU9BLElBQXlCLGtCQUFYOFIsU0FBeUI5UixFQUFJZ1MsY0FBZ0JGLFFBQVU5UixJQUFROFIsT0FBT3hMLFVBQVksZUFBa0J0RyxJYXQ0Q25RMmIsRUFBa0Isc0JBR2xCUyxFQUFNLElBR05ELEVBQVksa0JBR1pJLEVBQVMsYUFHVE0sRUFBYSxxQkFHYkosRUFBYSxhQUdiRSxFQUFZLGNBR1pDLEVBQWVFLFNBR2ZDLEVBQThCLFdBQWpCLFNBQU94RixFQUFQLFlBQUExRixFQUFPMEYsS0FBc0JBLEdBQVVBLEVBQU9wWCxTQUFXQSxRQUFVb1gsRUFHaEZ5RixFQUEwQixXQUFmLG1CQUFPbk8sTUFBUCxZQUFBZ0QsRUFBT2hELFFBQW9CQSxNQUFRQSxLQUFLMU8sU0FBV0EsUUFBVTBPLEtBR3hFcEUsRUFBT3NTLEdBQWNDLEdBQVkzVyxTQUFTLGlCQUcxQzRXLEVBQWM5YyxPQUFPbUcsVUFPckI0VixFQUFpQmUsRUFBWXROLFNBRzdCbU0sRUFBWXJELEtBQUs5TSxJQUNqQnNQLEVBQVl4QyxLQUFLeUUsSUFrQmpCOUIsRUFBTSxXQUNSLE1BQU8zUSxHQUFLMFMsS0FBSy9CLE1BK1NuQjViLEdBQU9ELFFBQVV5YSxJYis0Q2FyYSxLQUFLSixFQUFVLFdBQWEsTUFBT3dKLFdBSTNELFNBQVN2SixFQUFRRCxFQUFTSCxHYzN3RGhDLFlBa0JBLFNBQVNnZSxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJbEssV0FBVSxxQ0FoQmhIalQsT0FBT0MsZUFBZWIsRUFBUyxjQUM3QmMsT0FBTyxHQUdULElBQUlxRyxHQUFpQnRILEVBQVEsR0FJekJtZSxHQU1KLFNBQWdDdmQsR0FBY0EsR0FBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsSUFSMUMwRyxHQUUxQixXQUFjLFFBQVM4VyxHQUFpQjNXLEVBQVE0VyxHQUFTLElBQUssR0FBSWphLEdBQUksRUFBR0EsRUFBSWlhLEVBQU01WixPQUFRTCxJQUFLLENBQUUsR0FBSWthLEdBQWFELEVBQU1qYSxFQUFJa2EsR0FBV3ZZLFdBQWF1WSxFQUFXdlksYUFBYyxFQUFPdVksRUFBVzVPLGNBQWUsRUFBVSxTQUFXNE8sS0FBWUEsRUFBVzNPLFVBQVcsR0FBTTVPLE9BQU9DLGVBQWV5RyxFQUFRNlcsRUFBVzNXLElBQUsyVyxJQUFpQixNQUFPLFVBQVVKLEVBQWFLLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZSCxFQUFpQkYsRUFBWWhYLFVBQVdxWCxHQUFpQkMsR0FBYUosRUFBaUJGLEVBQWFNLEdBQXFCTixPQUU1aEJqVyxFQUFZakksRUFBUSxJQUVwQmtJLEVBQWFsSSxFQUFRLElBTXJCeWUsRUFBZ0IsV0FDbEIsUUFBU0EsS0FDUCxHQUFJL1UsR0FBUUMsS0FFUmdCLEVBQU85RCxVQUFVcEMsT0FBUyxHQUFzQnNOLFNBQWpCbEwsVUFBVSxHQUFtQkEsVUFBVSxNQUN0RTZYLEVBQW9CL1QsRUFBS1osYUFDekJBLEVBQXFDZ0ksU0FBdEIyTSxFQUFrQyxhQUFpQkEsRUFDbEVDLEVBQW1CaFUsRUFBSzVCLFlBQ3hCQSxFQUFtQ2dKLFNBQXJCNE0sRUFBaUMsU0FBV0EsRUFDMURDLEVBQWtCalUsRUFBS3hCLFdBQ3ZCQSxFQUFpQzRJLFNBQXBCNk0sS0FBcUNBLENBRXREWixHQUFnQnJVLEtBQU04VSxFQUV0QixJQUFJOVksSUFBWSxFQUFJc0MsRUFBVW9DLGVBQWUsT0FBUSxZQUFhbEIsRUFBV3hELFdBQVdrWixLQUFLLE1BQ3pGdlYsR0FBTyxFQUFJckIsRUFBVW9DLGVBQWUsUUFBUyxHQUFJbEIsRUFBV0csTUFBTXVWLEtBQUssS0FBTWxaLEdBQzdFNEQsR0FBUSxFQUFJdEIsRUFBVW9DLGVBQWUsU0FBVSxRQUFTbEIsRUFBV0ksT0FBT3NWLEtBQUssS0FBTXZWLEVBRXpGQyxHQUFNb1QsS0FBTyxPQUNicFQsRUFBTXVWLFlBQWMvVixFQUVwQlEsRUFBTVksaUJBQWlCLFFBQVMsU0FBVUMsR0FDeENWLEVBQU1xVixRQUFRM1UsS0FDYixHQUNIYixFQUFNWSxpQkFBaUIsUUFBUyxTQUFVQyxHQUN4Q1YsRUFBTXNWLFFBQVE1VSxLQUNiLEdBQ0hiLEVBQU1ZLGlCQUFpQixXQUFZLFNBQVVDLEdBQzNDVixFQUFNdVYsV0FBVzdVLEtBQ2hCLEdBQ0hiLEVBQU1ZLGlCQUFpQixRQUFTLFNBQVVDLEdBQ3hDVixFQUFNd1YsUUFBUTlVLEtBQ2IsR0FDSGIsRUFBTVksaUJBQWlCLE9BQVEsU0FBVUMsR0FDdkNWLEVBQU15VixPQUFPL1UsS0FDWixHQUVIVCxLQUFLakUsVUFBYUMsVUFBV0EsRUFBVzJELEtBQU1BLEVBQU1DLE1BQU9BLEdBQzNESSxLQUFLSSxhQUFlQSxFQThFdEIsTUEzRUFvVSxHQUFhTSxJQUNYOVcsSUFBSyxVQUNMMUcsTUFBTyxZQUNMLEVBQUlnSCxFQUFVK0QsY0FBY3JDLEtBQUtqRSxTQUFTNEQsS0FBTSxhQUdsRDNCLElBQUssU0FDTDFHLE1BQU8sWUFDTCxFQUFJZ0gsRUFBVThELGlCQUFpQnBDLEtBQUtqRSxTQUFTNEQsS0FBTSxhQUdyRDNCLElBQUssV0FDTDFHLE1BQU8sU0FBa0J5SyxHQUN2QixNQUFPLElBQUl1QixTQUFRLFNBQVVDLEVBQVNDLEdBQ3BDLEdBQUlpUyxHQUFXN1YsRUFBTzVELENBVXRCLE9BUkErRixHQUFNQyxpQkFDTkQsRUFBTTdGLGtCQUVOdVosRUFBWXpWLEtBQUtqRSxTQUFVNkQsRUFBUTZWLEVBQVU3VixNQUFPNUQsRUFBWXlaLEVBQVV6WixXQUUxRSxFQUFJc0MsRUFBVThELGlCQUFpQnBHLEVBQVcsVUFDMUMsRUFBSXNDLEVBQVUrRCxjQUFjckcsRUFBVyxXQUVoQ2dFLEtBQUtJLGNBQWVDLE1BQU9ULEVBQU10SSxRQUFTc00sS0FBSyxTQUFVQyxHQUU5RCxPQURBLEVBQUl2RixFQUFVOEQsaUJBQWlCcEcsRUFBVyxXQUNuQ3VILEtBQ1BRLFdBQVcvRCxLQUFNd0QsR0FBU0EsSUFDNUJPLFdBQVcvRCxVQUdmaEMsSUFBSyxVQUNMMUcsTUFBTyxXQUNMLEdBQUkwRSxHQUFZZ0UsS0FBS2pFLFNBQVNDLFNBRzFCZ0UsTUFBSzBWLFlBQ1AsRUFBSXBYLEVBQVU4RCxpQkFBaUJwRyxFQUFXLFNBQzFDZ0UsS0FBSzBWLFVBQVcsTUFJcEIxWCxJQUFLLFVBQ0wxRyxNQUFPLFNBQWlCeUssR0FDdEIsR0FBSTRULEdBQWEzVixLQUFLakUsU0FDbEJDLEVBQVkyWixFQUFXM1osVUFDdkI0RCxFQUFRK1YsRUFBVy9WLEtBR25CbUMsR0FBTVcsVUFBWW5FLEVBQVc2RSxjQUMvQixFQUFJOUUsRUFBVThELGlCQUFpQnBHLEVBQVcsWUFDMUMsRUFBSXNDLEVBQVU4RCxpQkFBaUJwRyxFQUFXLFVBRTFDNEQsRUFBTXRJLE1BQVEsR0FFZDJYLFNBQVMyRyxLQUFLdFQsUUFDZDJNLFNBQVMyRyxLQUFLQyxXQUlsQjdYLElBQUssYUFDTDFHLE1BQU8sU0FBb0J5SyxHQUNyQkEsRUFBTVcsVUFBWW5FLEVBQVd1WCxXQUMvQjlWLEtBQUtNLFNBQVN5QixNQUlsQi9ELElBQUssV0FDTDFHLE1BQU8sU0FBa0IrSSxHQUNYTCxLQUFLakUsU0FBUzZELE1BRXBCdEksTUFBUStJLE1BSVh5VSxJQUdUdGUsR0FBUVcsUUFBVTJkLEdkNnhEWixTQUFTcmUsRUFBUUQsR2V4NkR2QixZQUVBWSxRQUFPQyxlQUFlYixFQUFTLGNBQzdCYyxPQUFPLEdBR1QsSUFBSW9KLEdBQWdCbEssRUFBUWtLLGNBQWdCLFNBQXVCcVYsR0FDakUsR0FBSXZXLEdBQWF0QyxVQUFVcEMsT0FBUyxHQUFzQnNOLFNBQWpCbEwsVUFBVSxHQUFtQkEsVUFBVSxHQUFLLEdBQ2pGOFksRUFBUzlZLFVBQVVwQyxPQUFTLEdBQXNCc04sU0FBakJsTCxVQUFVLEdBQW1CQSxVQUFVLEdBQUssS0FFN0UrWSxFQUFLaEgsU0FBU3ZPLGNBQWNxVixFQU9oQyxPQU5BRSxHQUFHQyxVQUFZMVcsRUFFWHdXLEdBQ0ZBLEVBQU83VSxZQUFZOFUsR0FHZEEsRUFHaUJ6ZixHQUFRMmYsb0JBQXNCLFNBQTZCbGIsRUFBS21iLEdBQ3hGLEdBQUkvRixHQUFTM1AsRUFBYyxTQUFVLEtBQU11TyxTQUFTMkcsS0FHcEQsT0FGQXZGLEdBQU9nRyxhQUFhLE9BQVEsbUJBRXJCLEdBQUkvUyxTQUFRLFNBQVU0QyxHQUMzQjVNLE9BQU84YyxHQUFNLFNBQVVFLEdBQ3JCakcsRUFBT3ZPLGVBQ0F4SSxRQUFPOGMsR0FDZGxRLEVBQVFvUSxJQUdWakcsRUFBT2dHLGFBQWEsTUFBT3BiLE1BSVp6RSxFQUFRNkwsYUFBZSxTQUFzQjBULEVBQVNHLEdBQ25FSCxJQUFZQSxFQUFRN1QsVUFBVUMsU0FBUytULElBQ3pDSCxFQUFRN1QsVUFBVXFVLElBQUlMLElBSUoxZixFQUFRNEwsZ0JBQWtCLFNBQXlCMlQsRUFBU0csR0FDNUVILEdBQVdBLEVBQVE3VCxVQUFVQyxTQUFTK1QsSUFDeENILEVBQVE3VCxVQUFVSixPQUFPb1UsS2ZnN0R2QixTQUFTemYsRUFBUUQsR2dCMzlEdkIsWUFFQVksUUFBT0MsZUFBZWIsRUFBUyxjQUM3QmMsT0FBTyxHQUVULElBQUl3ZSxHQUFZdGYsRUFBUXNmLFVBQVksR0FDaEMxUyxFQUFhNU0sRUFBUTRNLFdBQWEsR0FDbENiLEVBQWlCL0wsRUFBUStMLGVBQWlCLEdBQzFDQyxFQUFlaE0sRUFBUWdNLGFBQWUsR0FDdENnVSxFQUFpQmhnQixFQUFRZ2dCLGVBQWlCLEdBQzFDQyxFQUFrQmpnQixFQUFRaWdCLGdCQUFrQixFQUU3QmpnQixHQUFRa04sY0FBZ0JvUyxFQUFXMVMsRUFBWWIsRUFBZ0JDLEVBQWNnVSxFQUFnQkMsSWhCaStEMUcsU0FBU2hnQixFQUFRRCxFQUFTSCxHaUI3K0RoQyxZQVVBLFNBQVNnZSxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJbEssV0FBVSxxQ0FSaEhqVCxPQUFPQyxlQUFlYixFQUFTLGNBQzdCYyxPQUFPLEdBR1QsSUFBSWtkLEdBQWUsV0FBYyxRQUFTQyxHQUFpQjNXLEVBQVE0VyxHQUFTLElBQUssR0FBSWphLEdBQUksRUFBR0EsRUFBSWlhLEVBQU01WixPQUFRTCxJQUFLLENBQUUsR0FBSWthLEdBQWFELEVBQU1qYSxFQUFJa2EsR0FBV3ZZLFdBQWF1WSxFQUFXdlksYUFBYyxFQUFPdVksRUFBVzVPLGNBQWUsRUFBVSxTQUFXNE8sS0FBWUEsRUFBVzNPLFVBQVcsR0FBTTVPLE9BQU9DLGVBQWV5RyxFQUFRNlcsRUFBVzNXLElBQUsyVyxJQUFpQixNQUFPLFVBQVVKLEVBQWFLLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZSCxFQUFpQkYsRUFBWWhYLFVBQVdxWCxHQUFpQkMsR0FBYUosRUFBaUJGLEVBQWFNLEdBQXFCTixNQUU1aEJqVyxFQUFZakksRUFBUSxJQUlwQnFnQixFQUFLLFdBQ1AsSUFBSyxHQUFJelosR0FBT0MsVUFBVXBDLE9BQVE2YixFQUFhdlosTUFBTUgsR0FBT0ksRUFBTyxFQUFHQSxFQUFPSixFQUFNSSxJQUNqRnNaLEVBQVd0WixHQUFRSCxVQUFVRyxFQUcvQixPQUFPc1osR0FBV3pCLEtBQUssS0FBSzBCLFFBRzFCQyxFQUFhLFdBQ2YsUUFBU0EsS0FDUCxHQUFJN1YsR0FBTzlELFVBQVVwQyxPQUFTLEdBQXNCc04sU0FBakJsTCxVQUFVLEdBQW1CQSxVQUFVLE1BQ3RFNFosRUFBbUI5VixFQUFLRCxZQUN4QkEsRUFBbUNxSCxTQUFyQjBPLEVBQWlDLGFBQWlCQSxFQUNoRTdCLEVBQWtCalUsRUFBS3hCLFdBQ3ZCQSxFQUFpQzRJLFNBQXBCNk0sS0FBcUNBLENBRXREWixHQUFnQnJVLEtBQU02VyxHQUV0QkUsRUFBaUJuZ0IsS0FBS29KLE1BRXRCQSxLQUFLMFUsT0FBVTNULFlBQWFBLEVBQWF2QixXQUFZQSxHQUNyRFEsS0FBS2dELFVBQVksQ0FFakIsSUFBSWhILElBQVksRUFBSXNDLEVBQVVvQyxlQUFlLE1BQU9nVyxFQUFHLFVBQVdsWCxFQUFXeEQsWUFDekVnYixHQUFhLEVBQUkxWSxFQUFVb0MsZUFBZSxNQUFPZ1csRUFBR2xYLEVBQVcwRCxNQUVuRWxILEdBQVV3RSxpQkFBaUIsUUFBU1IsS0FBS2EsU0FBUyxHQUNsRGIsS0FBS2pFLFVBQWFDLFVBQVdBLEVBQVdnYixXQUFZQSxHQTREdEQsTUF6REF4QyxHQUFhcUMsSUFDWDdZLElBQUssU0FDTDFHLE1BQU8sV0FDTCxHQUFJbU0sR0FBVXZHLFVBQVVwQyxPQUFTLEdBQXNCc04sU0FBakJsTCxVQUFVLEdBQW1CQSxVQUFVLE1BQ3pFdVksRUFBWXpWLEtBQUtqRSxTQUNqQkMsRUFBWXlaLEVBQVV6WixVQUN0QmdiLEVBQWF2QixFQUFVdUIsVUFFM0JoWCxNQUFLcUQsUUFFTEksRUFBUTRELFFBQVEsU0FBVXBHLEVBQVFnQyxHQUNoQyxHQUFJZ1UsR0FBUUQsRUFBV0UsV0FBVSxFQUNqQ0QsR0FBTVosYUFBYSxXQUFZcFQsR0FDL0JnVSxFQUFNRSxVQUFZbFcsRUFBT0MsTUFDekJsRixFQUFVbUYsWUFBWThWLEtBR3BCeFQsRUFBUTNJLE9BQVMsSUFDbkIsRUFBSXdELEVBQVUrRCxjQUFjckcsRUFBVyxVQUd6Q2dFLEtBQUt5RCxRQUFVQSxLQUdqQnpGLElBQUssU0FDTDFHLE1BQU8sU0FBZ0JpUSxHQUNyQixHQUFJdkwsR0FBWWdFLEtBQUtqRSxTQUFTQyxTQVM5QixPQUxBb0IsT0FBTWdhLEtBQUtwYixFQUFVcWIsVUFBVWhRLFFBQVEsU0FBVTRQLEVBQU9oVSxHQUN0RCxNQUFPQSxLQUFRc0UsR0FBUSxFQUFJakosRUFBVStELGNBQWM0VSxFQUFPLFdBQVksRUFBSTNZLEVBQVU4RCxpQkFBaUI2VSxFQUFPLFlBRzlHalgsS0FBS2dELFNBQVd1RSxFQUNUdkgsS0FBS3lELFFBQVE4RCxNQUd0QnZKLElBQUssUUFDTDFHLE1BQU8sV0FDTCxNQUFPMEksTUFBS3lELFFBQVEzSSxVQUd0QmtELElBQUssUUFDTDFHLE1BQU8sV0FDTCxHQUFJMEUsR0FBWWdFLEtBQUtqRSxTQUFTQyxTQUk5QixLQUZBZ0UsS0FBS2dELFVBQVksRUFFVmhILEVBQVVzYixXQUNmdGIsRUFBVXNVLFlBQVl0VSxFQUFVc2IsWUFHbEMsRUFBSWhaLEVBQVU4RCxpQkFBaUJwRyxFQUFXLGNBSXZDNmEsS0FHTEUsRUFBbUIsV0FDckIsR0FBSWhYLEdBQVFDLElBRVpBLE1BQUthLFFBQVUsV0FDYixHQUFJMFcsR0FBUXJhLFVBQVVwQyxPQUFTLEdBQXNCc04sU0FBakJsTCxVQUFVLEdBQW1CQSxVQUFVLE1BQ3ZFWSxFQUFTeVosRUFBTXpaLE9BRWZpRCxFQUFjaEIsRUFBTTJVLE1BQU0zVCxZQUMxQi9FLEVBQVkrRCxFQUFNaEUsU0FBU0MsU0FHL0IsSUFBSThCLEVBQU8wWixhQUFleGIsR0FBYzhCLEVBQU8yWixhQUFhLFlBQTVELENBSUEsR0FBSXhVLEdBQU1uRixFQUFPNFosYUFBYSxXQUU5QjNXLElBQWNFLE9BRERsQixFQUFNMEQsUUFBUVIsT0FLL0J6TSxHQUFRVyxRQUFVMGYsR2pCOC9EWixTQUFTcGdCLEVBQVFELEVBQVNILEdrQnpuRWhDLFlBb0JBLFNBQVNXLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLEdBRXZGLFFBQVNvZCxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJbEssV0FBVSxxQ0FFaEgsUUFBU3NOLEdBQTJCN1IsRUFBTWxQLEdBQVEsSUFBS2tQLEVBQVEsS0FBTSxJQUFJOFIsZ0JBQWUsNERBQWdFLFFBQU9oaEIsR0FBeUIsWUFBaEIsU0FBT0EsRUFBUCxZQUFBa1MsRUFBT2xTLEtBQXFDLGtCQUFUQSxHQUE4QmtQLEVBQVBsUCxFQUVsTyxRQUFTaWhCLEdBQVVDLEVBQVVDLEdBQWMsR0FBMEIsa0JBQWZBLElBQTRDLE9BQWZBLEVBQXVCLEtBQU0sSUFBSTFOLFdBQVUscUVBQW9FME4sRUFBcEUsWUFBQWpQLEVBQW9FaVAsSUFBZUQsR0FBU3ZhLFVBQVluRyxPQUFPNGdCLE9BQU9ELEdBQWNBLEVBQVd4YSxXQUFhMEwsYUFBZTNSLE1BQU93Z0IsRUFBVTFiLFlBQVksRUFBTzRKLFVBQVUsRUFBTUQsY0FBYyxLQUFlZ1MsSUFBWTNnQixPQUFPNmdCLGVBQWlCN2dCLE9BQU82Z0IsZUFBZUgsRUFBVUMsR0FBY0QsRUFBU0ksVUFBWUgsR2xCbW1FaGUsR0FBSWpQLEdBQTRCLGtCQUFYQyxTQUFvRCxnQkFBcEJBLFFBQU9DLFNBQXdCLFNBQVUvUixHQUFPLGFBQWNBLElBQVMsU0FBVUEsR0FBTyxNQUFPQSxJQUF5QixrQkFBWDhSLFNBQXlCOVIsRUFBSWdTLGNBQWdCRixRQUFVOVIsSUFBUThSLE9BQU94TCxVQUFZLGVBQWtCdEcsR2tCM25FdlFHLFFBQU9DLGVBQWViLEVBQVMsY0FDN0JjLE9BQU8sR0FHVCxJQUFJcUcsR0FBaUJ0SCxFQUFRLEdBSXpCdUgsR0FGa0I1RyxFQUF1QjJHLEdBRTlCdkcsT0FBT3lHLFFBQVUsU0FBVUMsR0FBVSxJQUFLLEdBQUlyRCxHQUFJLEVBQUdBLEVBQUl5QyxVQUFVcEMsT0FBUUwsSUFBSyxDQUFFLEdBQUlzRCxHQUFTYixVQUFVekMsRUFBSSxLQUFLLEdBQUl1RCxLQUFPRCxHQUFjM0csT0FBT21HLFVBQVUxQyxlQUFlakUsS0FBS21ILEVBQVFDLEtBQVFGLEVBQU9FLEdBQU9ELEVBQU9DLElBQVksTUFBT0YsS0FFblAwVyxFQUFlLFdBQWMsUUFBU0MsR0FBaUIzVyxFQUFRNFcsR0FBUyxJQUFLLEdBQUlqYSxHQUFJLEVBQUdBLEVBQUlpYSxFQUFNNVosT0FBUUwsSUFBSyxDQUFFLEdBQUlrYSxHQUFhRCxFQUFNamEsRUFBSWthLEdBQVd2WSxXQUFhdVksRUFBV3ZZLGFBQWMsRUFBT3VZLEVBQVc1TyxjQUFlLEVBQVUsU0FBVzRPLEtBQVlBLEVBQVczTyxVQUFXLEdBQU01TyxPQUFPQyxlQUFleUcsRUFBUTZXLEVBQVczVyxJQUFLMlcsSUFBaUIsTUFBTyxVQUFVSixFQUFhSyxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWUgsRUFBaUJGLEVBQVloWCxVQUFXcVgsR0FBaUJDLEdBQWFKLEVBQWlCRixFQUFhTSxHQUFxQk4sTUFFNWhCNVgsRUFBWXRHLEVBQVEsSUFFcEI4aEIsRUFBYW5oQixFQUF1QjJGLEdBRXBDMkIsRUFBWWpJLEVBQVEsSUFVcEIraEIsRUFBVyxTQUFVQyxHQUd2QixRQUFTRCxLQUdQLE1BRkEvRCxHQUFnQnJVLEtBQU1vWSxHQUVmVCxFQUEyQjNYLE1BQU9vWSxFQUFTRixXQUFhOWdCLE9BQU8rWCxlQUFlaUosSUFBVzNhLE1BQU11QyxLQUFNOUMsWUE2RDlHLE1BbEVBMmEsR0FBVU8sRUFBVUMsR0FRcEI3RCxFQUFhNEQsSUFDWHBhLElBQUssV0FDTDFHLE1BQU8sV0FDTCxHQUFJMEosR0FBTzlELFVBQVVwQyxPQUFTLEdBQXNCc04sU0FBakJsTCxVQUFVLEdBQW1CQSxVQUFVLE1BQ3RFbUQsRUFBUVcsRUFBS1gsTUFDYmlZLEVBQVd0WCxFQUFLc1gsU0FDaEJDLEVBQVF2WCxFQUFLdVgsTUFFYkMsRUFBU3hZLEtBQUs3QyxRQUFRcWIsTUFRMUIsT0FBT0YsR0FBVyw0Q0FMQXRZLEtBQUt5WSxlQUFlN2EsS0FBYTRhLEdBQ2pEblksTUFBT0EsRUFDUGtZLE1BQU9BLFFBTVh2YSxJQUFLLFFBQ0wxRyxNQUFPLFNBQWVpZ0IsR0FDcEIsR0FBSTllLEdBQU84ZSxFQUFNOWUsSUFFakIsT0FBaUMsS0FBN0JBLEVBQUtpZ0IsYUFBYTVkLFVBSWZyQyxFQUFLaWdCLGFBQWEsR0FBR0MsVUFBVWhnQixJQUFJLFNBQVUyUCxHQUNsRCxPQUNFMUQsRUFBRzBELEVBQUVzUSxNQUFNQyxZQUFZLEdBQ3ZCbFUsRUFBRzJELEVBQUVzUSxNQUFNQyxZQUFZLEdBQ3ZCM1gsTUFBT29ILEVBQUV3USxRQUFRQyxpQkFDakI1VCxTQUFVbUQsRUFBRTBRLEtBQUssR0FBSTFRLEVBQUUwUSxLQUFLLEtBQzNCMVEsRUFBRTBRLEtBQUssR0FBSTFRLEVBQUUwUSxLQUFLLEtBQ25CQyxJQUFLM1EsUUFLWHRLLElBQUssU0FDTDFHLE1BQU8sU0FBZ0I0aEIsR0FDckIsTUFBTyxJQUFJNVYsU0FBUSxTQUFVQyxFQUFTQyxHQUNwQyxHQUFJbkQsR0FBT2lZLEVBQVVDLEVBQU90ZCxFQUFLcWIsQ0FRakMsT0FQQWpXLEdBQVE2WSxFQUFNN1ksTUFFZGlZLEdBQVk5VCxTQUFTOFQsU0FBU3pJLFFBQVEsUUFBVXJMLFNBQVM4VCxTQUFXLFNBRXBFQyxFQUFRLGlCQUFtQm5FLEtBQUsvQixNQUNoQ3BYLEVBQU0rRSxLQUFLbVosVUFBVzlZLE1BQU9BLEVBQU9pWSxTQUFVQSxFQUFVQyxNQUFPQSxLQUV4RCxFQUFJamEsRUFBVTZYLHFCQUFxQmxiLEVBQUtzZCxHQUFPM1UsS0FBSyxTQUFVQyxHQUVuRSxNQURBeVMsR0FBT3pTLEVBQ0FOLEVBQVF2RCxLQUFLakcsT0FBUXRCLEtBQU02ZCxNQUNsQ3ZTLFdBQVcvRCxLQUFNd0QsR0FBU0EsSUFDNUJPLFdBQVcvRCxXQUlWb1ksR0FDUEQsRUFBV2hoQixRQUViWCxHQUFRVyxRQUFVaWhCLEdsQjhwRVosU0FBUzNoQixFQUFRRCxFQUFTSCxHbUJod0VoQyxZQWNBLFNBQVNnZSxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJbEssV0FBVSxxQ0FaaEhqVCxPQUFPQyxlQUFlYixFQUFTLGNBQzdCYyxPQUFPLEdBR1QsSUFBSXFHLEdBQWlCdEgsRUFBUSxHQUl6Qm1lLEdBRUosU0FBZ0N2ZCxHQUFjQSxHQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixJQUoxQzBHLEdBRTFCLFdBQWMsUUFBUzhXLEdBQWlCM1csRUFBUTRXLEdBQVMsSUFBSyxHQUFJamEsR0FBSSxFQUFHQSxFQUFJaWEsRUFBTTVaLE9BQVFMLElBQUssQ0FBRSxHQUFJa2EsR0FBYUQsRUFBTWphLEVBQUlrYSxHQUFXdlksV0FBYXVZLEVBQVd2WSxhQUFjLEVBQU91WSxFQUFXNU8sY0FBZSxFQUFVLFNBQVc0TyxLQUFZQSxFQUFXM08sVUFBVyxHQUFNNU8sT0FBT0MsZUFBZXlHLEVBQVE2VyxFQUFXM1csSUFBSzJXLElBQWlCLE1BQU8sVUFBVUosRUFBYUssRUFBWUMsR0FBaUosTUFBOUhELElBQVlILEVBQWlCRixFQUFZaFgsVUFBV3FYLEdBQWlCQyxHQUFhSixFQUFpQkYsRUFBYU0sR0FBcUJOLE9BTTVoQjZELEVBQVcsV0FDYixRQUFTQSxLQUNQLEdBQUlqYixHQUFVRCxVQUFVcEMsT0FBUyxHQUFzQnNOLFNBQWpCbEwsVUFBVSxHQUFtQkEsVUFBVSxLQUU3RW1YLEdBQWdCclUsS0FBTW9ZLEdBRXRCcFksS0FBSzdDLFFBQVVBLEVBK0JqQixNQTVCQXFYLEdBQWE0RCxJQUNYcGEsSUFBSyxpQkFDTDFHLE1BQU8sU0FBd0JraEIsR0FDN0IsTUFBT3BoQixRQUFPOE0sS0FBS3NVLEdBQVE3ZixJQUFJLFNBQVVxRixHQUN2QyxNQUFPb2Isb0JBQW1CcGIsR0FBTyxJQUFNb2IsbUJBQW1CWixFQUFPeGEsTUFDaEVrWCxLQUFLLFFBR1ZsWCxJQUFLLFNBQ0wxRyxNQUFPLFNBQWdCMEosR0FDckIsTUFBTyxJQUFJc0MsU0FBUSxTQUFVQyxFQUFTQyxHQUNwQyxHQUFJbkQsR0FBT2lZLEVBQVVyZCxFQUFLb2UsRUFBUy9DLENBTW5DLE9BTEFqVyxHQUFRVyxFQUFLWCxNQUViaVksR0FBWTlULFNBQVM4VCxTQUFTekksUUFBUSxRQUFVckwsU0FBUzhULFNBQVcsU0FDcEVyZCxFQUFNK0UsS0FBS21aLFVBQVc5WSxNQUFPQSxFQUFPaVksU0FBVUEsSUFFdkNnQixNQUFNcmUsR0FBSzJJLEtBQUssU0FBVUMsR0FFL0IsTUFEQXdWLEdBQVV4VixFQUNId1YsRUFBUS9DLE9BQU8xUyxLQUFLLFNBQVVJLEdBRW5DLE1BREFzUyxHQUFPdFMsRUFDQVQsRUFBUXZELEtBQUtqRyxPQUFRdEIsS0FBTTZkLE1BQ2xDdlMsV0FBVy9ELEtBQU13RCxHQUFTQSxJQUM1Qk8sV0FBVy9ELEtBQU13RCxHQUFTQSxJQUM1Qk8sV0FBVy9ELFdBSVZvWSxJQUdUNWhCLEdBQVFXLFFBQVVpaEIsR25Cb3hFWixTQUFTM2hCLEVBQVFELEVBQVNILEdvQjUwRWhDLFlBZ0JBLFNBQVNnZSxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJbEssV0FBVSxxQ0FFaEgsUUFBU3NOLEdBQTJCN1IsRUFBTWxQLEdBQVEsSUFBS2tQLEVBQVEsS0FBTSxJQUFJOFIsZ0JBQWUsNERBQWdFLFFBQU9oaEIsR0FBeUIsWUFBaEIsU0FBT0EsRUFBUCxZQUFBa1MsRUFBT2xTLEtBQXFDLGtCQUFUQSxHQUE4QmtQLEVBQVBsUCxFQUVsTyxRQUFTaWhCLEdBQVVDLEVBQVVDLEdBQWMsR0FBMEIsa0JBQWZBLElBQTRDLE9BQWZBLEVBQXVCLEtBQU0sSUFBSTFOLFdBQVUscUVBQW9FME4sRUFBcEUsWUFBQWpQLEVBQW9FaVAsSUFBZUQsR0FBU3ZhLFVBQVluRyxPQUFPNGdCLE9BQU9ELEdBQWNBLEVBQVd4YSxXQUFhMEwsYUFBZTNSLE1BQU93Z0IsRUFBVTFiLFlBQVksRUFBTzRKLFVBQVUsRUFBTUQsY0FBYyxLQUFlZ1MsSUFBWTNnQixPQUFPNmdCLGVBQWlCN2dCLE9BQU82Z0IsZUFBZUgsRUFBVUMsR0FBY0QsRUFBU0ksVUFBWUgsR3BCNHpFaGUsR0FBSWpQLEdBQTRCLGtCQUFYQyxTQUFvRCxnQkFBcEJBLFFBQU9DLFNBQXdCLFNBQVUvUixHQUFPLGFBQWNBLElBQVMsU0FBVUEsR0FBTyxNQUFPQSxJQUF5QixrQkFBWDhSLFNBQXlCOVIsRUFBSWdTLGNBQWdCRixRQUFVOVIsSUFBUThSLE9BQU94TCxVQUFZLGVBQWtCdEcsR29COTBFdlFHLFFBQU9DLGVBQWViLEVBQVMsY0FDN0JjLE9BQU8sR0FHVCxJQUFJc0csR0FBV3hHLE9BQU95RyxRQUFVLFNBQVVDLEdBQVUsSUFBSyxHQUFJckQsR0FBSSxFQUFHQSxFQUFJeUMsVUFBVXBDLE9BQVFMLElBQUssQ0FBRSxHQUFJc0QsR0FBU2IsVUFBVXpDLEVBQUksS0FBSyxHQUFJdUQsS0FBT0QsR0FBYzNHLE9BQU9tRyxVQUFVMUMsZUFBZWpFLEtBQUttSCxFQUFRQyxLQUFRRixFQUFPRSxHQUFPRCxFQUFPQyxJQUFZLE1BQU9GLElBRW5QMFcsRUFBZSxXQUFjLFFBQVNDLEdBQWlCM1csRUFBUTRXLEdBQVMsSUFBSyxHQUFJamEsR0FBSSxFQUFHQSxFQUFJaWEsRUFBTTVaLE9BQVFMLElBQUssQ0FBRSxHQUFJa2EsR0FBYUQsRUFBTWphLEVBQUlrYSxHQUFXdlksV0FBYXVZLEVBQVd2WSxhQUFjLEVBQU91WSxFQUFXNU8sY0FBZSxFQUFVLFNBQVc0TyxLQUFZQSxFQUFXM08sVUFBVyxHQUFNNU8sT0FBT0MsZUFBZXlHLEVBQVE2VyxFQUFXM1csSUFBSzJXLElBQWlCLE1BQU8sVUFBVUosRUFBYUssRUFBWUMsR0FBaUosTUFBOUhELElBQVlILEVBQWlCRixFQUFZaFgsVUFBV3FYLEdBQWlCQyxHQUFhSixFQUFpQkYsRUFBYU0sR0FBcUJOLE1BRTVoQjVYLEVBQVl0RyxFQUFRLElBRXBCOGhCLEVBRUosU0FBZ0NsaEIsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixJQUYvQzBGLEdBVXBDeWIsRUFBVyxTQUFVQyxHQUd2QixRQUFTRCxLQUdQLE1BRkEvRCxHQUFnQnJVLEtBQU1vWSxHQUVmVCxFQUEyQjNYLE1BQU9vWSxFQUFTRixXQUFhOWdCLE9BQU8rWCxlQUFlaUosSUFBVzNhLE1BQU11QyxLQUFNOUMsWUFzQzlHLE1BM0NBMmEsR0FBVU8sRUFBVUMsR0FRcEI3RCxFQUFhNEQsSUFDWHBhLElBQUssV0FDTDFHLE1BQU8sV0FDTCxHQUFJMEosR0FBTzlELFVBQVVwQyxPQUFTLEdBQXNCc04sU0FBakJsTCxVQUFVLEdBQW1CQSxVQUFVLE1BQ3RFbUQsRUFBUVcsRUFBS1gsTUFDYmlZLEVBQVd0WCxFQUFLc1gsU0FFaEJFLEVBQVN4WSxLQUFLN0MsUUFBUXFiLE1BUTFCLE9BQU9GLEdBQVcsc0VBTEF0WSxLQUFLeVksZUFBZTdhLEtBQWE0YSxHQUNqRDVPLEVBQUcsT0FDSDJQLEtBQU1sWixRQU1WckMsSUFBSyxRQUNMMUcsTUFBTyxTQUFlaWdCLEdBR3BCLE1BRldBLEdBQU05ZSxLQUVMK2dCLFVBQVU3Z0IsSUFBSSxTQUFVMlAsR0FDbEMsT0FDRTFELEVBQUcwRCxFQUFFbVIsUUFBUUMsU0FBUzlVLEVBQ3RCRCxFQUFHMkQsRUFBRW1SLFFBQVFDLFNBQVMvVSxFQUN0QnpELE1BQU9vSCxFQUFFMkUsS0FDVDlILFNBQVVtRCxFQUFFcVIsT0FBT0MsS0FBTXRSLEVBQUVxUixPQUFPRSxPQUNqQ3ZSLEVBQUVxUixPQUFPRyxLQUFNeFIsRUFBRXFSLE9BQU9JLE9BQ3pCZCxJQUFLM1EsU0FNTjhQLEdBQ1BELEVBQVdoaEIsUUFFYlgsR0FBUVcsUUFBVWloQixHcEJpM0VaLFNBQVMzaEIsRUFBUUQsRUFBU0gsR3FCdDdFaEMsWUFnQkEsU0FBU2dlLEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlsSyxXQUFVLHFDQUVoSCxRQUFTc04sR0FBMkI3UixFQUFNbFAsR0FBUSxJQUFLa1AsRUFBUSxLQUFNLElBQUk4UixnQkFBZSw0REFBZ0UsUUFBT2hoQixHQUF5QixZQUFoQixTQUFPQSxFQUFQLFlBQUFrUyxFQUFPbFMsS0FBcUMsa0JBQVRBLEdBQThCa1AsRUFBUGxQLEVBRWxPLFFBQVNpaEIsR0FBVUMsRUFBVUMsR0FBYyxHQUEwQixrQkFBZkEsSUFBNEMsT0FBZkEsRUFBdUIsS0FBTSxJQUFJMU4sV0FBVSxxRUFBb0UwTixFQUFwRSxZQUFBalAsRUFBb0VpUCxJQUFlRCxHQUFTdmEsVUFBWW5HLE9BQU80Z0IsT0FBT0QsR0FBY0EsRUFBV3hhLFdBQWEwTCxhQUFlM1IsTUFBT3dnQixFQUFVMWIsWUFBWSxFQUFPNEosVUFBVSxFQUFNRCxjQUFjLEtBQWVnUyxJQUFZM2dCLE9BQU82Z0IsZUFBaUI3Z0IsT0FBTzZnQixlQUFlSCxFQUFVQyxHQUFjRCxFQUFTSSxVQUFZSCxHckJzNkVoZSxHQUFJalAsR0FBNEIsa0JBQVhDLFNBQW9ELGdCQUFwQkEsUUFBT0MsU0FBd0IsU0FBVS9SLEdBQU8sYUFBY0EsSUFBUyxTQUFVQSxHQUFPLE1BQU9BLElBQXlCLGtCQUFYOFIsU0FBeUI5UixFQUFJZ1MsY0FBZ0JGLFFBQVU5UixJQUFROFIsT0FBT3hMLFVBQVksZUFBa0J0RyxHcUJ4N0V2UUcsUUFBT0MsZUFBZWIsRUFBUyxjQUM3QmMsT0FBTyxHQUdULElBQUlzRyxHQUFXeEcsT0FBT3lHLFFBQVUsU0FBVUMsR0FBVSxJQUFLLEdBQUlyRCxHQUFJLEVBQUdBLEVBQUl5QyxVQUFVcEMsT0FBUUwsSUFBSyxDQUFFLEdBQUlzRCxHQUFTYixVQUFVekMsRUFBSSxLQUFLLEdBQUl1RCxLQUFPRCxHQUFjM0csT0FBT21HLFVBQVUxQyxlQUFlakUsS0FBS21ILEVBQVFDLEtBQVFGLEVBQU9FLEdBQU9ELEVBQU9DLElBQVksTUFBT0YsSUFFblAwVyxFQUFlLFdBQWMsUUFBU0MsR0FBaUIzVyxFQUFRNFcsR0FBUyxJQUFLLEdBQUlqYSxHQUFJLEVBQUdBLEVBQUlpYSxFQUFNNVosT0FBUUwsSUFBSyxDQUFFLEdBQUlrYSxHQUFhRCxFQUFNamEsRUFBSWthLEdBQVd2WSxXQUFhdVksRUFBV3ZZLGFBQWMsRUFBT3VZLEVBQVc1TyxjQUFlLEVBQVUsU0FBVzRPLEtBQVlBLEVBQVczTyxVQUFXLEdBQU01TyxPQUFPQyxlQUFleUcsRUFBUTZXLEVBQVczVyxJQUFLMlcsSUFBaUIsTUFBTyxVQUFVSixFQUFhSyxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWUgsRUFBaUJGLEVBQVloWCxVQUFXcVgsR0FBaUJDLEdBQWFKLEVBQWlCRixFQUFhTSxHQUFxQk4sTUFFNWhCNVgsRUFBWXRHLEVBQVEsSUFFcEI4aEIsRUFFSixTQUFnQ2xoQixHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLElBRi9DMEYsR0FVcEN5YixFQUFXLFNBQVVDLEdBR3ZCLFFBQVNELEtBR1AsTUFGQS9ELEdBQWdCclUsS0FBTW9ZLEdBRWZULEVBQTJCM1gsTUFBT29ZLEVBQVNGLFdBQWE5Z0IsT0FBTytYLGVBQWVpSixJQUFXM2EsTUFBTXVDLEtBQU05QyxZQXVDOUcsTUE1Q0EyYSxHQUFVTyxFQUFVQyxHQVFwQjdELEVBQWE0RCxJQUNYcGEsSUFBSyxXQUNMMUcsTUFBTyxXQUNMLEdBQUkwSixHQUFPOUQsVUFBVXBDLE9BQVMsR0FBc0JzTixTQUFqQmxMLFVBQVUsR0FBbUJBLFVBQVUsTUFDdEVtRCxFQUFRVyxFQUFLWCxNQUNiaVksRUFBV3RYLEVBQUtzWCxTQUVoQkUsRUFBU3hZLEtBQUs3QyxRQUFRcWIsT0FHdEJ3QixFQUFjaGEsS0FBS3lZLGVBQWU3YSxLQUFhNGEsR0FDakRNLFFBQVN6WSxJQUtYLFFBRFltWSxHQUFVQSxFQUFPeGEsSUFBTSxTQUFXc2EsR0FDL0IsK0NBQWlEMEIsS0FHbEVoYyxJQUFLLFFBQ0wxRyxNQUFPLFNBQWVpZ0IsR0FHcEIsTUFGV0EsR0FBTTllLEtBRUxnTCxRQUFROUssSUFBSSxTQUFVMlAsR0FDaEMsT0FDRTFELEVBQUcwRCxFQUFFb1IsU0FBU2xWLFNBQVN5VixJQUN2QnRWLEVBQUcyRCxFQUFFb1IsU0FBU2xWLFNBQVMwVixJQUN2QmhaLE1BQU9vSCxFQUFFNlIsa0JBQ1RoVixTQUFVbUQsRUFBRW9SLFNBQVNVLFNBQVNDLFVBQVVILElBQUs1UixFQUFFb1IsU0FBU1UsU0FBU0MsVUFBVUosTUFDMUUzUixFQUFFb1IsU0FBU1UsU0FBU0UsVUFBVUosSUFBSzVSLEVBQUVvUixTQUFTVSxTQUFTRSxVQUFVTCxNQUNsRWhCLElBQUszUSxTQU1OOFAsR0FDUEQsRUFBV2hoQixRQUViWCxHQUFRVyxRQUFVaWhCLEdyQjI5RVosU0FBUzNoQixFQUFRRCxFQUFTSCxHc0JqaUZoQyxZQWdCQSxTQUFTZ2UsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSWxLLFdBQVUscUNBRWhILFFBQVNzTixHQUEyQjdSLEVBQU1sUCxHQUFRLElBQUtrUCxFQUFRLEtBQU0sSUFBSThSLGdCQUFlLDREQUFnRSxRQUFPaGhCLEdBQXlCLFlBQWhCLFNBQU9BLEVBQVAsWUFBQWtTLEVBQU9sUyxLQUFxQyxrQkFBVEEsR0FBOEJrUCxFQUFQbFAsRUFFbE8sUUFBU2loQixHQUFVQyxFQUFVQyxHQUFjLEdBQTBCLGtCQUFmQSxJQUE0QyxPQUFmQSxFQUF1QixLQUFNLElBQUkxTixXQUFVLHFFQUFvRTBOLEVBQXBFLFlBQUFqUCxFQUFvRWlQLElBQWVELEdBQVN2YSxVQUFZbkcsT0FBTzRnQixPQUFPRCxHQUFjQSxFQUFXeGEsV0FBYTBMLGFBQWUzUixNQUFPd2dCLEVBQVUxYixZQUFZLEVBQU80SixVQUFVLEVBQU1ELGNBQWMsS0FBZWdTLElBQVkzZ0IsT0FBTzZnQixlQUFpQjdnQixPQUFPNmdCLGVBQWVILEVBQVVDLEdBQWNELEVBQVNJLFVBQVlILEd0QmloRmhlLEdBQUlqUCxHQUE0QixrQkFBWEMsU0FBb0QsZ0JBQXBCQSxRQUFPQyxTQUF3QixTQUFVL1IsR0FBTyxhQUFjQSxJQUFTLFNBQVVBLEdBQU8sTUFBT0EsSUFBeUIsa0JBQVg4UixTQUF5QjlSLEVBQUlnUyxjQUFnQkYsUUFBVTlSLElBQVE4UixPQUFPeEwsVUFBWSxlQUFrQnRHLEdzQm5pRnZRRyxRQUFPQyxlQUFlYixFQUFTLGNBQzdCYyxPQUFPLEdBR1QsSUFBSXNHLEdBQVd4RyxPQUFPeUcsUUFBVSxTQUFVQyxHQUFVLElBQUssR0FBSXJELEdBQUksRUFBR0EsRUFBSXlDLFVBQVVwQyxPQUFRTCxJQUFLLENBQUUsR0FBSXNELEdBQVNiLFVBQVV6QyxFQUFJLEtBQUssR0FBSXVELEtBQU9ELEdBQWMzRyxPQUFPbUcsVUFBVTFDLGVBQWVqRSxLQUFLbUgsRUFBUUMsS0FBUUYsRUFBT0UsR0FBT0QsRUFBT0MsSUFBWSxNQUFPRixJQUVuUDBXLEVBQWUsV0FBYyxRQUFTQyxHQUFpQjNXLEVBQVE0VyxHQUFTLElBQUssR0FBSWphLEdBQUksRUFBR0EsRUFBSWlhLEVBQU01WixPQUFRTCxJQUFLLENBQUUsR0FBSWthLEdBQWFELEVBQU1qYSxFQUFJa2EsR0FBV3ZZLFdBQWF1WSxFQUFXdlksYUFBYyxFQUFPdVksRUFBVzVPLGNBQWUsRUFBVSxTQUFXNE8sS0FBWUEsRUFBVzNPLFVBQVcsR0FBTTVPLE9BQU9DLGVBQWV5RyxFQUFRNlcsRUFBVzNXLElBQUsyVyxJQUFpQixNQUFPLFVBQVVKLEVBQWFLLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZSCxFQUFpQkYsRUFBWWhYLFVBQVdxWCxHQUFpQkMsR0FBYUosRUFBaUJGLEVBQWFNLEdBQXFCTixNQUU1aEI1WCxFQUFZdEcsRUFBUSxJQUVwQjhoQixFQUVKLFNBQWdDbGhCLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsSUFGL0MwRixHQVVwQ3liLEVBQVcsU0FBVUMsR0FHdkIsUUFBU0QsS0FHUCxNQUZBL0QsR0FBZ0JyVSxLQUFNb1ksR0FFZlQsRUFBMkIzWCxNQUFPb1ksRUFBU0YsV0FBYTlnQixPQUFPK1gsZUFBZWlKLElBQVczYSxNQUFNdUMsS0FBTTlDLFlBc0M5RyxNQTNDQTJhLEdBQVVPLEVBQVVDLEdBUXBCN0QsRUFBYTRELElBQ1hwYSxJQUFLLFdBQ0wxRyxNQUFPLFdBQ0wsR0FBSTBKLEdBQU85RCxVQUFVcEMsT0FBUyxHQUFzQnNOLFNBQWpCbEwsVUFBVSxHQUFtQkEsVUFBVSxNQUN0RW1ELEVBQVFXLEVBQUtYLE1BQ2JpWSxFQUFXdFgsRUFBS3NYLFNBRWhCRSxFQUFTeFksS0FBSzdDLFFBQVFxYixNQVExQixPQUFPRixHQUFXLHdDQUxBdFksS0FBS3lZLGVBQWU3YSxLQUFhNGEsR0FDakQrQixPQUFRLE9BQ1JwUyxFQUFHOUgsUUFNUHJDLElBQUssUUFDTDFHLE1BQU8sU0FBZWlnQixHQUdwQixNQUZXQSxHQUFNOWUsS0FFTEUsSUFBSSxTQUFVMlAsR0FDeEIsT0FDRTFELEVBQUcwRCxFQUFFa1MsSUFDTDdWLEVBQUcyRCxFQUFFNFIsSUFDTGhaLE1BQU9vSCxFQUFFbVMsYUFDVHRWLFNBQVV1VixXQUFXcFMsRUFBRXFTLFlBQVksSUFBS0QsV0FBV3BTLEVBQUVxUyxZQUFZLE1BQ2hFRCxXQUFXcFMsRUFBRXFTLFlBQVksSUFBS0QsV0FBV3BTLEVBQUVxUyxZQUFZLE1BQ3hEMUIsSUFBSzNRLFNBTU44UCxHQUNQRCxFQUFXaGhCLFFBRWJYLEdBQVFXLFFBQVVpaEIsR3RCc2tGWixTQUFTM2hCLEVBQVFELEVBQVNILEdBRS9CLFl1QnhvRk0sU0FBQTRDLEdBQXFCRCxFQUFRRSxHdkJ3cEYvQjBoQixFdUJ2cEZpQkMsRUFBZ0IzaEIsRUFDbEMsdUJBQ0FGLEdBQ0E4aEIsSUFDSEMsSUFFRCxRQUFTQSxLQUNPOUwsU0FBUytMLGVBQ3JCLGVBQU1DLFNBQ1RDLEVBRUQsUUFBU0osS0FDU0ssR0FBR2hZLE9BRWpCLDZCQUFRdk0sS0FBQXVrQixHQUFRQyxPQUNYdmYsR0FBRyxPQUFRLFd2QnNwRlh3ZixFdUJycEZxQnprQixLQUN6Qm9KLFNBR0wsUUFBU3FiLEtBRUxILElBQ0hJLElBRU0sUUFBQUosS3ZCc3BGRixHdUI5b0ZESyxHQVBJQyxFQUFRTCxHQUFHaFksT0FDZixnQkFBSXNZLEVBQW9CRCxFQUFNRSxTQUM5QixnQkFBSUMsRUFBbUIxTSxTQUFTK0wsZUFDaEMsNEJBQUlZLEVBQVMzTSxTQUFTK0wsZUFFdEIscUJ2QnVwRkMsSXVCcnBGR1EsRUFBTUssUUFBUSxpQkFDZCxDdkJxcEZDLEd1QnJwRkdDLEdBQVk3TSxTQUFTK0wsZUFDekIsYXZCcXBGQ08sR3VCcnBGV0ssRUFBT0csYUFBZUQsRUFDckNDLGlCQUNNLEN2QnNwRkYsR3VCcnBGR0MsR0FBWS9NLFNBQVMrTCxlQUN6QixhdkJxcEZDTyxHdUJycEZXSyxFQUFPRyxhQUFlQyxFQUNyQ0QsYXZCc3BGQVIsRXVCcnBGV0EsRUFBWUUsRUFBaUNGLEVBQUUsS0FDM0QsS3ZCcXBGQ0ksRXVCcnBGZ0JqZCxNQUFNdWQsT0FDMUJWLEVBRUQsUUFBU0QsS3ZCc3BGSixHdUJycEZHRSxHQUFRTCxHQUFHaFksT0FDZixnQkFBSStZLEdBQWlCVixFQUFNOWMsTUFBTSxhQUFhNEksTUFBTSxHQUNwRCxHQUFJNlUsRUFBbUJYLEVBQU1FLFNBRTdCLGVBQUlVLEVBQVVuTixTQUFTK0wsZUFDdkIsV0FBSXFCLEVBQWVELEVBRW5CRSxZQUFJQyxFQUFhdE4sU0FBUytMLGVBRTFCLGVBQUl3QixFQUFTckIsR0FBR3BaLE1BQU0wYSxZQUN0QjdYLEVBQUk4WCxFQUFVTCxFQUFlRyxFQUU3QkwsRUFBSVEsRUFBZ0JSLEVBQ3BCTyxDdkJxcEZDQyxHdUJycEZlQSxFQUFnQlQsRUFDNUJBLEVBQ0FTLEVBQWdCTixFQUNoQkEsRUFFSk0sRXZCaXBGQ0osRXVCanBGVTdkLE1BQU1rZSxhQUFnQ0QsRUFDakQsS3ZCaXBGQ25CLEV1QmpwRks5YyxNQUFNLFFBQTBCaWUsRUFDekMsTUFFRCxRQUFTOUIsR0FBaUIzaEIsR3ZCa3BGckIsTUFBT2lpQixJdUJqcEZFaFksT0FBTyxlQUNaMFosVUFBVSx3QkFDVnBrQixLQUFLUyxHQUNMNGpCLFFBQ0lDLE9BQU8sT0FDUEMsS0FBSyxRQUFTLHVCQUNkQSxLQUFLLGNBQUFDLEdBQU0sTUFBY0EsR0FBV3ZtQixLQUNwQ21sQixRQUFRLGtCQUFBb0IsR0FBVSxNQUFjQSxHQUFXNU8sU0FDM0M2TyxLQUFLLFNBQVVELEd2QjhvRm5COUIsR3VCN29GVWhZLE9BQU9uRCxNQUFNK2MsT0FBTyxPQUNsQkMsS0FBSyxRQUFTLHVCQUNkbmhCLEdBQUcsUUFBUyxTQUFVb2hCLEd2QjRvRjlCQSxFdUIzb0ZzQjVPLFFBQVU0TyxFQUNyQjVPLE92QjJvRlg4TSxHdUIzb0ZjaFksT0FBT25ELEtBQUt3WCxZQUFZcUUsUUFBUSxvQkFBVSxNQUFNb0IsR0FDbkQ1TyxTQUNINk0sTUFDQTNCLEtBQUswRCxFQUNiaFEsUUFDQThQLE9BQU8sT0FBT0MsS0FBSyxRQUMvQixlQUVELFFBQVNwQyxHQUFnQnVDLEVBQWFua0IsR3ZCNG9GakNta0IsRXVCM29GV04sVUFBVSxpQkFDakJwa0IsS0FBQSxTQUFBd2tCLEdBQUssTUFBY2prQixHQUFPaWtCLEVBQVd2bUIsTUFDckNvbUIsUUFBUUMsT0FBTyxPQUNmQyxLQUFLLFFBQVMsZ0JBQ2RFLEtBQUssU0FBVWxpQixHdkIwb0ZmLEd1QnhvRk9vaUIsSUFEWXBkLEtBQUt3WCxXQUFXQSxXQUNoQzlnQixHQUFleWtCLEdBQUdoWSxPQUVsQm5ELE12QnlvRkhxZCxHdUJ6b0ZnQnJpQixFQUNib2lCLEd2QnlvRkhFLEV1QnpvRmF0aUIsRUFDVm9pQixHdkJ5b0ZIRyxFdUJ6b0ZtQnZpQixFQUNoQm9pQixHdkJ5b0ZISSxFdUJ6b0ZrQnhpQixFQUNsQm9pQixLQUdULFFBQVNDLEdBQWNyaUIsRUFBT29pQixHdkIwb0Z6QkEsRXVCem9GUUwsT0FBTyxTQUNYQyxLQUFLLE9BQVEsWUFDYkEsS0FBSyxjQUFBaGlCLEdBQU0sTUFBU0EsR0FBTXRFLEtBQzFCc21CLEtBQUssVUFBWSxTQUFBaGlCLEd2QnlvRmpCLE11QnhvRlVBLEdBQU1xVCxPQUFTLFVBQ3pCLE9BQ0F4UyxHQUFHLFFBQVMsU0FBU2IsSXZCd29GckIsRUFBSTlDLEVBQU91bEIsYXVCdG9GUnppQixHdkJ1b0ZIb2lCLEV1QnZvRllqYSxPQUFPLHdCQUNYMFksUUFBUSxTQUFVN2dCLEVBQ3ZCcVQsUUFBSXJULEVBQU1xVCxTQUFRLEVBQUFxUCxFQUFBQyxxQkFBb0IzaUIsRUFDekNvaUIsS0FHVCxRQUFTRSxHQUFVdGlCLEVBQU9vaUIsR3ZCdW9GckJBLEV1QnRvRlFMLE9BQU8sU0FDWEMsS0FBSyxlQUFBaGlCLEdBQU8sTUFBU0EsR0FBTXRFLEtBQzNCc21CLEtBQUssUUFBUyxlQUNkN00sS0FBQSxTQUFBblYsR0FBSyxNQUFTQSxHQUN0QmlTLE9BRUQsUUFBU3NRLEdBQWlCdmlCLEVBQU9vaUIsR0FDekJwaUIsRUFBTTRpQixNQUF1QixLQUFmNWlCLEVBQU00aUIsT3ZCd29GbkJSLEV1QnZvRlFMLE9BQU8sT0FDWEMsS0FBSyxRQUFTLGtCQUNkekQsS0FBSyxPQUNMMWQsR0FBRyxRQUFTLFd2QnFvRlpzZixHdUJwb0ZNaFksT0FBT25ELEtBQUt3WCxZQUNWclUsT0FBTyx1QkFDUDBZLFFBQVEsU0FBVSxXdkJtb0Z0QixPdUJsb0ZlVixHQUFHaFksT0FBT25ELE1BQU02YixRQUMzQixjdkJxb0ZadUIsRXVCbG9GUUwsT0FBTyxPQUNYQyxLQUFLLFFBQVMsc0JBQ2R6RCxLQUFBLFNBQUF2ZSxHQUFLLE1BQVNBLEdBQ3RCNGlCLFFBR0wsUUFBU0osR0FBZXhpQixFQUFPb2lCLEd2Qm1vRjFCLEd1QmxvRkdTLEdBQUFULEVBQXlCTCxPQUFPLE9BQy9CQyxLQUFLLFFBQVMsdUJBQ2RuQixRQUFRLFNBQVUsV3ZCaW9GbEIsTXVCaG9GVTdnQixHQUNWcVQsVXZCa29GSixFQUFJcVAsRUFBZUksbUJ1QmhvRkY5aUIsRUFDbEI2aUIsR3ZCZ29GQ0UsRXVCaG9GVS9pQixFQUNkNmlCLEdBRUQsUUFBU0UsR0FBWS9pQixFQUFPZ2pCLEd2QmlvRnZCQSxFdUIvbkZJakIsT0FBTyxPQUNIQyxLQUFLLFFBQVMsa0JBQ2xCRCxPQUFPLE9BQ0hDLEtBQUssTUFBT2hpQixFQUFNaWpCLFFBQzlCLHdCdkJxK0VBN21CLE9BQU9DLGVBQWViLEVBQVMsY0FDM0JjLE9BQU8sSUFFWGQsRXVCN29GZXlDLGF2QjhvRmZ6QyxFdUJwbkZlMGtCLDhCQS9CVSxJQUFBaGpCLEdBQUE3QixFQUFBLElBRVFxbkIsRUFBQXJuQixFQUFBLEdBR2xDQSxHQUFBLEt2QnF5Rk0sU0FBU0ksRUFBUUQsRUFBU0gsR0FFL0IsWXdCcnlGTSxTQUFBd0MsR0FBMkJGLEVBQUt1bEIsR3hCc3pGbENBLEV3QnJ6RmFBLEt4QnN6RlR4bkIsR3dCbnpGRyxzQnhCb3pGSHVFLEl3Qm56RkcsNkR4Qm96RkhrakIsWXdCanpGTCxzSnhCb3pGQ0MsRXdCbnpGREYsQ3hCb3pGQyxJd0JuekZEempCLEdBQ0E0akIsRUFFQS9sQixDeEJvekZDLEt3QnB6RkltQyxFQUFJLEVBQUdBLEVBQUl5akIsRUFBWXBqQixPQUFRTCxJeEJxekYvQm5DLEV3QnB6RlE0bEIsRUFFVHpqQixHQUFLbkMsRUFBTytWLFN4QnF6RlhnUSxFd0JwekZXQyxFQUNaaG1CLEd4Qm96RkNBLEV3QnB6Rk0wQyxNQUNQcWpCLEV4Qm96RkNBLEV3QnB6RlM1YyxNQUNiOUksR3hCc3pGQTRsQixHd0JuekZKTCxHQUVELFFBQVNLLEdBQW1Cam1CLEd4QnF6RnZCLEd3QnB6RkdrbUIsR0FBU3ZQLFNBQVN2TyxjQUN0QixNeEJvekZDOGQsR3dCcHpGTXRJLFVBQ1AsY3hCeXpGQyxLd0JwekZJLEdBSkx1SSxHQUNBQyxFQUVBQyxFQUNBM2pCLEVBQVNQLEVBQUksRUFBR2dRLEVBQUluUyxFQUFPd0MsT0FBUUwsRUFBSWdRLEVBQUdoUSxJeEJxekZyQ08sRXdCcHpGTzFDLEVBQ1JtQyxHQUFLTyxFQUFNSCxlQUFlLFd4QnN6RnpCNGpCLEV3QnB6RmF4UCxTQUFTdk8sY0FDdkIsT3hCb3pGQytkLEV3QnB6RldwSSxhQUFhLGFBQWNyYixFQUN2Q3RFLEl4Qm96RkNnb0IsRXdCcHpGU3pQLFNBQVN2TyxjQUNuQixPeEJvekZDZ2UsRXdCcHpGT3JJLGFBQWEsTUFBT3JiLEVBQzVCNGpCLE94Qm96RkNGLEV3QnB6Rk9ySSxhQUFhLE1BQU9yYixFQUM1QmtHLE94Qm96RkN3ZCxFd0JwekZPckksYUFBYSxRQUFTcmIsRUFDOUJrRyxPeEJvekZDeWQsRXdCcHpGVzFQLFNBQVN2TyxjQUNyQixPeEJvekZDaWUsRXdCcHpGU0UsWUFBYzdqQixFQUN4QmtHLE14Qm96RkN1ZCxFd0JwekZXdGQsWUFDWnVkLEd4Qm96RkNELEV3QnB6Rld0ZCxZQUNad2QsR3hCb3pGQ0YsRXdCcHpGV2plLGlCQUFpQixRQUU3QnNlLEd4Qm96RkMzRCxHd0JwekZFaFksT0FBT3NiLEdBQ0w1QyxRQUFRLGlCQUFpQixHQUN6QkEsUUFBUSxTQUFVN2dCLEVBRXZCcVQsUXhCa3pGQ21RLEV3Qmx6Rk1yZCxZQUNWc2QsR3hCb3pGQXhQLFV3Qmx6RlE4UCx1QkFBdUIsK0JBQStCLEdBQUc1ZCxZQUNyRXFkLEdBRUQsUUFBU00sR0FBaUJyZSxHeEJtekZyQkEsRXdCanpGRHZFLGlCeEJrekZDLEl3Qmx6Rkc4aUIsR0FBVWhmLEtBQUswWCxhQUNuQixheEJrekZDdUgsR3dCanpGRGpmLE1BQ0FrZixJeEJrekZDQyxFd0JqekZESCxJQUNILEVBQUEvbUIsRUFBQW1uQixrQkFFRCxRQUFTSCxHQUFvQkksR3hCbXpGeEJsRSxHd0JsekZFaFksT0FBTyx5QkFBeUIwWSxRQUFRLFVBQzNDLEd4Qmt6RkNWLEd3Qmx6RkVoWSxPQUFPa2MsR0FBWXhELFFBQVEsVUFDakMsR0FFRCxRQUFTcUQsS3hCbXpGSixHd0JsekZHdm1CLElBRUosRUFBQVgsRUFBQXNuQixTeEJrekZDM21CLEd3Qmx6Rkc0bUIsVUFBVSxTQUFVdmtCLEdBQ2hCQSxFQUFNbUMsUUFBUTZWLE9BQVN3TSxHeEJtekYxQjdtQixFd0JsekZHeUwsWUFDUHBKLEtBR0wsUUFBU21rQixHQUFzQkgsR3hCc3pGMUIsSXdCbHpGSSxHQUFMaGtCLEdBSElyQyxHQUVKLEVBQUFYLEVBQUFzbkIsVUFDUzdrQixFQUFJLEVBQUdnUSxFQUFJMlQsRUFBWXRqQixPQUFRTCxFQUFJZ1EsRUFBR2hRLEl4Qm96RjFDLEdBREFPLEV3Qmx6Rk9vakIsRUFDUjNqQixHQUFJTyxFQUFNdEUsS0FBT3NvQixFeEJrekZoQixDd0JqekZJaGtCLEVBQU1BLFFBQU9BLEVBQU1BLE1BQVFzakIsRUFDaEN0akIsSXhCa3pGQ0EsRXdCbHpGS0EsTUFBTXlHLE1BQ1o5SSxHeEJrekZDcUMsRXdCbHpGS0EsTUFDTnlrQixhQUNILFFBR0wsUUFBU25CLEdBQWlCSixHeEJtekZyQixNd0JsekZNdmlCLEdBQUUrakIsVUFDTHhCLEVBQVlqakIsSUFDWjBrQixFQUVQekIsSUFFRCxRQUFTeUIsR0FBc0JybkIsR3hCZ3pGMUIsR3dCL3lGRzZFLEt4QnF6RkgsT3dCcHpGRzdFLEdBQU81QixLQUFJeUcsRUFBUXpHLEdBQUs0QixFQUM1QjVCLElBQUk0QixFQUFPNmxCLGNBQWFoaEIsRUFBUWdoQixZQUFjN2xCLEVBQzlDNmxCLGFBQUk3bEIsRUFBT3NuQixhQUFZemlCLEVBQVF5aUIsV0FBYXRuQixFQUM1Q3NuQixZeEIreUZDemlCLEV3Qi95Rk82VixLQUVSd00sRUFDSHJpQixFeEJ3ckZBL0YsT0FBT0MsZUFBZWIsRUFBUyxjQUMzQmMsT0FBTyxJQUVYZCxFQUFRZ3BCLGdCQUFrQnBYLE9BQzFCNVIsRXdCM3lGZXFDLGtCQVBLLElBT3JCdWxCLEdBUHFCcG1CLEVBQUEzQixFQUFBLElBR3JCNEIsRUFBQTVCLEVBQUEsSUFBYW1wQixFQUFBaHBCLEVBQUFncEIsZ0JBQWtCLGF4QnM2RnpCLFNBQVMvb0IsRUFBUUQsRUFBU0gsR0FFL0IsWXlCdjZGTSxTQUFBbUMsS3pCbzdGRjJpQixHeUJuN0ZFMEIsVUFBVSxtQkFBbUJoaEIsR0FBRyxRQUNuQ2drQixHQUNBQyxJekJtN0ZDQyxFQUFNNUUsR3lCbjdGRTRFLE1BQU0vQyxLQUFLLFFBQVMsVUFBVTdNLEtBQUssU0FBVTZQLEd6Qm83RmpELE15QnA3RmlFQSxLQUcxRSxRQUFTRixLekJzN0ZKMUwsS3lCcjdGSTdXLFVBQVUwaUIsV0FBYSxXekJzN0Z2QixHeUJyN0ZHQyxHQUFPbGdCLEtBQ1htZ0IsYXpCcTdGQyxPeUJyN0ZnQixLQUFOLEVBQVBELEtBQ0tBLEVBQU8sS0FBUSxHQUFNQSxFQUFPLEtBQ3hDLEl6Qnc3RkE5TCxLeUJyN0ZJN1csVUFBVTZpQixPQUFTLFd6QnM3Rm5CLEd5QnI3RkdDLElBQVksRUFBRyxHQUFJLEdBQUksR0FBSSxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUM3RCxLQUFJQyxFQUFLdGdCLEtBQ1R1Z0IsV0FBSUMsRUFBS3hnQixLQUNUeWdCLFVBQUlDLEVBQVlMLEVBQVNDLEdBQ3pCRSxDekJzN0ZDLE95QnQ3RkVGLEdBQUssR0FBS3RnQixLQUFLaWdCLGNBQ2xCUyxJQUNIQSxHQUdFLFFBQUF0bkIsR0FBMEJULEd6QnM3RjVCQSxFeUJyN0ZHa0QsR0FBRyxRQUNWOGtCLEdBc0JELFFBQVNBLEdBQWdCbGdCLEd6QnM3RnBCLEd5QnI3Rkc5SCxHQUNKcUgsS0FBSWthLEVBQU16WixFQUFFbWdCLE9BQ1oxRyxJQUFJRCxFQUFNeFosRUFBRW1nQixPQUVaM0csSUFBSTRHLEVBQU1DLEVBQWU1RyxFQUN6QkQsR0FBSXJiLEVBQVNtaUIsRUFBYXBvQixFQUFLdWhCLEVBQy9CRCxFekJxN0ZDa0IsSXlCcjdGRWhZLE9BQU8wZCxHQUFLaGxCLEdBQUcsYUFBYyxXekJzN0YzQitDLEV5QnI3Rk1vaUIsUUFDVkMsS3pCczdGQTlGLEd5QnI3RkVoWSxPQUFPMGQsR0FBS2hsQixHQUFHLGFBQWMsV3pCczdGM0IrQyxFeUJyN0ZNb2lCLFFBQ1ZFLEt6QnM3RkFDLEV5QnI3RmtCeG9CLEVBQUtrb0IsRUFDM0JqaUIsR0FFRCxRQUFTbWlCLEdBQWNwb0IsRUFBS3VoQixFQUFLRCxHekJzN0Y1QixNeUJyN0ZNdGUsR0FBRWlELFFBQVFzYixFQUFLRCxJQUFPcGIsS0FBTXFpQixJQUFZemYsTUFDbEQ5SSxHQUVELFFBQVN3b0IsR0FBb0J4b0IsRUFBS2tvQixFQUFLamlCLEd6QnM3RmxDLEd5QnI3Rkd3aUIsR0FDSkMsR3pCcTdGQ1IsR3lCcjdGRzFmLFlBQ0ppZ0IsR3pCcTdGQ2pHLEd5QnI3RkVoWSxPQUFPaWUsR0FBTXZsQixHQUFHLFFBQVMsV0FDYm9ULFNBQVMrTCxlQUNwQixjQUFLMUssWUFDTHVRLEd6QnE3RkNsb0IsRXlCcjdGR3lMLFlBQ0p4RixJQUNILEVBQUFqSCxFQUFBdWpCLGtDQUdMLFFBQVNtRyxLekJzN0ZKLEd5QnI3RkdELEdBQU9uUyxTQUFTdk8sY0FDcEIsU3pCdzdGQyxPQUhBMGdCLEd5QnI3RklsTCxVQUNMLGV6QnE3RkNrTCxFeUJyN0ZJRSxVQUFZQyxPQUFPQyxhQUN4QixTekJxN0ZDSixFeUJyN0ZJL0ssYUFBYSxRQUNsQixnQkFDSCtLLEVBSUQsUUFBU0ssR0FBUXZILEVBQUtELEVBQUs0RyxHekJzN0Z0QixHeUJyN0ZHNWxCLEdBQU0sd0RBQTBEZ2YsRUFBTSxJQUMxRUMsRUFBSXdILEVBQU8sR0FDWC9uQixlekJxN0ZDK25CLEd5QnI3RklsaEIsaUJBQWlCLE9BQVEsV3pCczdGekIsR3lCcjdGR21oQixHQUFXM2hCLEtBQ2ZoRyxZekJxN0ZDMm5CLEd5QnI3RlVBLEVBQVNsYSxRQUFRLFlBQWEsSUFBSW1hLE1BQzdDLE16QnE3RkNDLEV5QnI3RlNGLEVBQVVkLEVBQUszRyxFQUN6QkQsSUFDSCxFQUFBdGlCLEVBQUF1akIsa0N6QnM3RkF3RyxFeUJyN0ZJcG5CLEtBQUssTUFDVlcsR3pCcTdGQ3ltQixFeUJwN0ZKbm5CLE9BRUQsUUFBU3VuQixHQUFVcnBCLEd6QnM3RmQsR3lCcDdGRGdDLEV6QnE3RkMsS3lCcjdGSUEsRUFBSSxFQUFHQSxFQUFJaEMsRUFBS3FDLE9BQVFMLEl6QnM3RnhCaEMsRXlCcjdGSWdDLEdBQUtoQyxFQUFLZ0MsR0FBR21uQixNQUNyQixJekJzN0ZBLE95QnA3RkpucEIsR0FFRCxRQUFTc3BCLEdBQWVDLEd6QnM3Rm5CLEd5Qm43RkRwSixHQUNBNWEsRUFBSXZELEVBRUp3bkIsRUFMSXhwQixJekIyN0ZILEtBREFBLEV5QnI3RkksUUFDQWdDLEVBQUksRUFBR0EsRUFBSXVuQixFQUFTbG5CLE9BQVFMLEl6QnM3RjVCbWUsRXlCcjdGT29KLEVBQ1J2bkIsR3pCcTdGQ3VELEV5QnI3Rks0YSxFQUFNLEdBQUdzSixVQUFVLEVBQ3pCLEdBQUt6cEIsRUFBS29DLGVBQWVtRCxLekJzN0ZwQnZGLEV5QnI3Rkl1RixNekJzN0ZKdkYsRXlCcjdGSSxLQUFRME8sS0FDaEJuSixJekJzN0ZBdkYsRXlCcjdGSXVGLEdBQUttSixLQUNieVIsRXpCdTdGQSxJeUJwN0ZEdUosR0FDQUMsQ3pCczdGQyxLQURBM3BCLEV5QnI3RkksV0FDQWdDLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUNoQixDekJzN0ZDLElBREEwbkIsS3lCcDdGSUYsRUFBSXhuQixFQUFHd25CLEVBQUlELEVBQVNsbkIsT0FBUW1uQixHQUFLLEd6QnM3RmpDRSxFeUJyN0ZjaGIsS0FBSzZhLEVBQVNDLEdBQ2hDLEd6QnU3RkFHLEd5QnI3RlFELEVBQWVFLE9BQU8zUyxLQUFLNFMsTUFBTUgsRUFBZXJuQixPQUN6RCxJekJxN0ZDckMsRXlCcjdGSSxRQUFXME8sS0FDbkJpYixHekJ1N0ZBLE15QnA3RkozcEIsR0FJRCxRQUFTb25CLEt6QnM3RkosR3lCcjdGRzdNLEdBQU9oVCxLQUFLdWlCLFFBQ2hCdlAsS0FBSXdQLEVBQWF2VCxTQUFTOFAsdUJBQXVCLHlCQUNqRCxHQUFJMEQsRUFBYUQsRUFBV0QsUUFFNUJ2UCxJQUFJQSxLQUFTeVAsSXpCeTdGWnRILEd5QnI3RkVoWSxPQUFPLGVBQ0wwWSxRQUFRLFNBQVc0RyxHQUFZLEdBQy9CNUcsUUFBUSxTQUFXN0ksR0FFeEIsR3pCbTdGQ21JLEd5Qm43RkVoWSxPQUFPcWYsR0FBWTNHLFFBQVEsVUFDOUIsR3pCbTdGQ1YsR3lCbjdGRWhZLE9BQU9uRCxNQUFNNmIsUUFBUSxVQUMzQixJQUVELFFBQVNpRixHQUFnQjVHLEVBQUtELEd6Qm83RnpCLEd5Qm43Rkc0RyxHQUFNNVIsU0FBU3ZPLGNBQ25CLE9BQUlnaUIsRUFBVXpULFNBQVMwVCxlQUFlLFFBQVV6SSxFQUFNLFVBQ3RERCxFekJzN0ZDLE9BSEE0RyxHeUJuN0ZHMWYsWUFDSnVoQixHekJtN0ZDN0IsRXlCbjdGRzNlLFVBQVVxVSxJQUNkLGN6Qm03RkNrTCxFeUJuN0ZPdkgsRUFBS0QsRUFDYjRHLEdBQ0hBLEVBRUQsUUFBU2dCLEdBQVVwcEIsRUFBTW9vQixFQUFLM0csRUFBS0QsR3pCbzdGOUJ4aEIsRXlCbjdGTXFwQixFQUNQcnBCLEV6Qm03RkMsSXlCbjdGR21xQixHQUFrQmIsRUFDdEJ0cEIsRXpCbTdGQ29xQixHeUJuN0ZtQnBxQixFQUFNb29CLEVBQUsrQixFQUMvQixTekJtN0ZDRSxFeUJuN0YyQ0YsRUFBaUIvQixFQUFLM0csRUFDbEVELEd6Qm03RkM4SSxFeUJuN0YwQ0gsRUFBaUIvQixFQUFLM0csRUFDakVELEdBQVdoTCxTQUFTK0wsZUFDcEIsY0FBSzdaLFlBQ1IwZixHQUlELFFBQVNnQyxHQUFxQnBxQixFQUFNb29CLEVBQUttQyxHekJxN0ZwQyxHeUJuN0ZHQyxJQUFVQyxJQUFLLEdBQUlDLE1BQU8sR0FBSUMsT0FBUSxHQUFJQyxLQUFNLElBQ3BEQyxFQUFRLElBQU1MLEVBQU9JLEtBQU9KLEVBQU9FLE1BQ25DbEgsRUFBUyxJQUFNZ0gsRUFBT0MsSUFBTUQsRUFFNUJHLE9BQ0l4ZSxFQUFJdVcsR0FBR29JLFlBQVlDLE9BQU8sRUFBR0YsSUFDNUJHLFFBQ0dDLEVBQVVqckIsRUFBSyxHQUFHLElBQ2xCaXJCLEVBQVVqckIsRUFBS0EsRUFBS3FDLE9BQU8sR0FFbkMsTUFBSTZKLEVBQUl3VyxHQUFHd0ksY0FBY0gsT0FBT3ZILEVBQVEsSUFDbkN3SCxRQUFRLEVBRWIsTUFDSUcsRUFBQXpJLEdBQVcwSSxXQUFXamYsR0FDckJrZixNQUFNLElBQ05DLFdBQVcsU0FBVS9ELEd6QjY2RnJCLE15QjU2RlVBLEdBQ1ZHLGdCQUVENkQsRUFBUTdJLEdBQUc4SSxTQUFTdGYsR0FDbkJtZixNQUVMLEdBQ0lJLEVBQUEvSSxHQUFlZ0osT0FDZHZmLEVBQUUsU0FBU29iLEd6QjI2RlgsTXlCMzZGdUJwYixHQUFFOGUsRUFBVTFELEVBQVMsT0FDNUNyYixFQUFFLFNBQVNxYixHekI0NkZYLE15QjU2RnVCcmIsR0FBRXFiLEVBQVEsTUFFbEM1RCxFQUFVakIsR0FBR2hZLE9BQU8wZCxHQUNuQjlELE9BQU8sT0FDUGxCLFFBQVEsb0JBRWIsR0FDSXVJLEVBQUFoSSxFQUNDVyxPQUNELE9BQ0NDLEtBQUssU0FBVWYsRUFBU2dILEVBQU9DLElBQU1ELEVBQU9HLFFBQzVDcEcsS0FBSyxVQUFXLFd6QjQ2RmhCLE15Qno2RlUsUUFGQ3NHLEVBQVFMLEVBQU9JLEtBQU9KLEVBQzlCRSxPQUNvQixLQURabEgsRUFBU2dILEVBQU9DLElBQU1ELEVBQzlCRyxVQUVIcEcsS0FBSyxzQkFBdUIsWUFDNUJELE9BQU8sS0FDSEMsS0FBSyxZQUFhLGFBQWVpRyxFQUFPSSxLQUFPLElBQU1KLEVBQU9DLElBRXJFLEl6QnM2RkNrQixHeUJ0NkZHeHRCLEtBRUptcEIsR3pCdTZGQ3NFLEV5QnQ2RmM1ckIsRUFBTXlyQixFQUVyQkUsR3pCdTZGQ0EsRXlCdDZGR3JILE9BQU8sS0FDTkMsS0FBSyxRQUFTLFVBQ2RBLEtBQUssWUFBYSxlQUFpQmYsRUFBUyxLQUM1Q3JsQixLQUVMZ3RCLEd6Qm82RkNRLEV5Qm42RkdySCxPQUFPLEtBQ05DLEtBQUssUUFBUyxVQUNkcG1CLEtBQ0xvdEIsR3pCbzZGQ00sRXlCajZGZ0I3ckIsRUFBTXlyQixFQUFXRSxFQUNyQ3BCLEdBSUQsUUFBU0YsR0FBNkNycUIsRUFBTW9vQixFQUFLM0csRUFBS0QsR3pCaTdGakUsUXlCLzVGUXNLLEdBQWlCdkUsR3pCZzZGckIsTXlCLzVGT3dFLElBQWN4RSxFQUFFLElBQzNCLEl6Qjg0RkEsR3lCLzVGR3lFLE1BR0F4QixHQUFVQyxJQUFLLEdBQUlDLE1BQU8sR0FBSUMsT0FBUSxHQUFJQyxLQUFNLElBQ2hEQyxFQUFRLElBQU1MLEVBQU9JLEtBQU9KLEVBQU9FLE1BQ25DbEgsRUFBUyxJQUFNZ0gsRUFBT0MsSUFBTUQsRUFFaENHLE9BQUlKLEVBQVd2cUIsRUFFZmlzQixRQUFJOWYsRUFBSXVXLEdBQUd3SSxjQUFjSCxPQUFPLEVBQUdGLElBQzlCRyxRQUFRLEVBQ2IsTUFBSTllLEVBQUl3VyxHQUFHd0ksY0FBY0gsT0FBT3ZILEVBQVEsSUFDbkN3SCxRQUFRLEVBRWIsTUFJSUcsRUFBUXpJLEdBQUcwSSxXQUFXamYsR0FDckJrZixNQUFNLElBQ05hLFlBQVksR0FBSSxHQUFJLEdBQUksSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLE1BQ2hFWixXQUVMUSxHQUFJUCxFQUFRN0ksR0FBRzhJLFNBQVN0ZixHQUNuQm1mLE1BRUwsR0FDSUksRUFBQS9JLEdBQWVnSixPQUNkdmYsRUFBRSxTQUFTb2IsRUFBR3ZsQixHekIyNUZkLE15QjM1RjhDbUssR0FBbkJ4SCxNQUFNd25CLFFBQVE1RSxHQUFPNkUsRUFBZTdFLEVBQUUsSUFBYyxFQUFKdmxCLEVBQWdCLEtBQzNGa0ssRUFBRSxTQUFTcWIsR3pCNDVGWCxNeUI1NUYyQ3JiLEdBQW5CdkgsTUFBTXduQixRQUFRNUUsR0FBT0EsRUFBRSxHQUFjQSxLQUU5RDVELEVBQVVqQixHQUFHaFksT0FBTzBkLEdBQUs5RCxPQUFPLE9BQU9sQixRQUFRLHFCQUVuRCxHQUNJdUksRUFBQWhJLEVBQ0NXLE9BQU8sT0FDSEMsS0FBSyxVQUFXLFd6Qjg1RnBCLE15QjM1RmMsUUFGQ3NHLEVBQVFMLEVBQU9JLEtBQU9KLEVBQzlCRSxPQUNvQixLQURabEgsRUFBU2dILEVBQU9DLElBQU1ELEVBQzlCRyxVQUVIcEcsS0FBSyxzQkFDTixZQUVIRCxPQUFPLEtBQ0hDLEtBQUssWUFDQSxhQUFlaUcsRUFBT0ksS0FBTyxJQUFNSixFQUFPQyxJQUV4RCxJekJ3NUZDa0IsR3lCeDVGR3h0QixLQUVKbXBCLEd6Qnk1RkNxRSxFeUJ4NUZHckgsT0FBTyxLQUNOQyxLQUFLLFFBQVMsVUFDZEEsS0FBSyxZQUFhLGVBQWlCZixFQUFTLEtBQzVDcmxCLEtBRUxndEIsR3pCczVGQ1EsRXlCcjVGR3JILE9BQU8sS0FDTkMsS0FBSyxRQUFTLFVBQ2RwbUIsS0FFTG90QixHekJtNUZDUyxFeUJuNUZNLFN6Qm81RkZLLEt5Qm41RlFULEVBQWU1ckIsRUFBSyxRQUFZeXJCLEVBRzdDRSxJekJtNUZDSyxFeUJwOUZELE96QnE5RktLLEt5Qm41RlFULEVBQWU1ckIsRUFsRTVCLE1Ba0V3Q3lyQixFQUd4Q0UsSXpCczVGQ0ssRXlCbjVGTSxRQUFXLE9BQVlILEVBQWlCN3JCLEVBQUssUUFBWXlyQixFQUFXRSxFQUMzRXBCLEd6Qm01RkN5QixFeUI1OUZELE1BeUVhLE9BQVlILEVBQWlCN3JCLEVBekUxQyxNQXlFc0R5ckIsRUFBV0UsRUFFakVwQixFekJtNUZDLEl5Qm41RkcrQixHQUFlM0ksRUFBUVcsT0FBTyxPQUFPbEIsUUFBUSxpQkFFakQsRXpCbTVGQ3BqQixHeUJuNUZJeUwsS0FBS21ELFFBQVEsU0FBVXJKLEd6Qm81RnZCZ25CLEV5Qm41RmNELEVBQWMvbUIsRUFBSyxhQTlFdEMsT0E4RTBEeW1CLEVBQVFoc0IsRUFBTXlyQixFQUFXRSxFQUFLcEIsRUFBVTlJLEVBQ2pHRCxLekJxNUZBK0ssRXlCbjVGY0QsRUFBYyxVQUFXLGFBQWMsVUFBV04sRUFBUWhzQixFQUFNeXJCLEVBQVdFLEVBQUtwQixFQUFVOUksRUFDNUdELEdBSUQsUUFBUzhJLEdBQTRDdHFCLEVBQU1vb0IsRUFBSzNHLEVBQUtELEd6Qm81RmhFLEd5Qmg1RkdnTCxHQUFTdlYsS0FBS3lFLElBRk4sSUFDQyxLQUMwQixFQUV2QyxHQUFJNk8sRUFBV3ZxQixFQUNmLFFBQUl5c0IsRUFBU0MsRUFDYjFzQixHQUFJMnNCLEVBQWFDLEVBQW9CckMsRUFBVWtDLEVBQU8sR0FFdEQsSUFNSTVjLEVBQUk2UyxHQUFHd0ksY0FDTkYsUUFBUSxFQUFHLE1BQ1hELE9BQU8sRUFFWnlCLElBT0lkLEVBQUFoSixHQUFVbUssYUFDVEwsT0FBTyxTQUFTakYsR3pCaTVGaEIsTXlCajVGK0MxWCxHQUFuQmxMLE1BQU13bkIsUUFBUTVFLEdBQU9BLEVBQUUsR0FBYUEsS0FDaEV1RixNQUFNLFNBQVN2RixFQUFHdmxCLEd6Qm01RmxCLFF5Qmw1RmEyQyxNQUFNd25CLFFBQVE1RSxHQUFLNkUsRUFBZTdFLEVBQUUsSUFBVyxFQUFKdmxCLEVBQ3JELEdBQWlCLEdBQUcsSUFBSyxLQUFRLEVBQUVpVixLQUN0QzhWLE1BS0RwSixFQUFVakIsR0FBR2hZLE9BQU8wZCxHQUFLOUQsT0FBTyxPQUFPbEIsUUFBUSxlQUNuRCxHQUFJdUksRUFBQWhJLEVBQWNXLE9BQ2QsT0FFQ0MsS0FBSyxVQUFXLFd6Qms1RmhCLE15Qmo1RlUsZ0JBRVZBLEtBQUssc0JBQXVCLFlBQzVCRCxPQUFPLEtBQ1BDLEtBQUssWUFBYSxxQnpCZzVGdEJvSCxHeUI5NEZHeHRCLEtBRUptcEIsRXpCaTVGQyxJeUI5NEZHMEYsR0FBS3JCLEVBQUlySCxPQUFPLEtBQ2ZDLEtBQUssUUFBUyxVQUNkSCxVQUFVLEtBQ1Zwa0IsS0FBSzZQLEVBQUV3YixNQUFNLEdBQUd4YyxNQUFNLElBQ3RCd1YsUUFBUUMsT0FFYixJekIwNEZDMEksR3lCMTRGRTFJLE9BQU8sVUFDTEMsS0FBSyxJQUVWMVUsR3pCeTRGQ21kLEV5Qno0RkUxSSxPQUFPLFFBQ0xDLEtBQUssSUFBSyxTQUFTZ0QsR3pCeTRGbkIsT3lCejRGZ0MxWCxFQUFFMFgsR0FBUyxJQUMzQ2hELEtBQUssWUFBYSxjQUNsQnRlLE1BQU0sY0FBZSxVQUNyQjZhLEtBQUssU0FBU3lHLEd6Qnc0RmQsTXlCeDRGOEJBLEl6Qis0RmxDLEl5Qno0RkcwRixHQUFBdEIsRUFBU3JILE9BQU8sS0FDZkMsS0FBSyxRQUFTLFVBQ2RILFVBQVUsS0FDVnBrQixLQUFLMGlCLEdBQUdxSSxNQUFNLEVBQUcsSUFBSyxLQUN0QjFHLFFBQVFDLE9BQU8sS0FDWEMsS0FBSyxZQUFhLFNBQVNnRCxHekJxNEYvQixNeUJyNEYyQyxXQUFhQSxFQUFJLElBQVksS3pCdzRGNUUwRixHeUJ0NEZFM0ksT0FBTyxRQUNMQyxLQUFLLEtBRVZpSSxHekJxNEZDUyxFeUJyNEZFM0ksT0FBTyxRQUNMQyxLQUFLLElBQUtpSSxFQUFTLEdBQ25CakksS0FBSyxLQUFNLFNBQ1h0ZSxNQUFNLGNBQWUsU0FBU3NoQixHekJtNEY5QixNeUJuNEYwQ0EsR0FBSSxLQUFPQSxFQUFJLElBQU0sTUFBZSxPQUM5RWhELEtBQUssWUFBYSxTQUFTZ0QsR3pCbzRGM0IsTXlCcDRGdUNBLEdBQUksS0FBT0EsRUFBSSxJQUFNLGVBQWlCaUYsRUFBUyxHQUFLLE1BQWUsT0FDMUcxTCxLQUFLLFNBQVN5RyxHekJxNEZkLE15QnI0RjBCd0UsR0FBYXhFLEVBQVEsS3pCMjRGbkQsSXlCdDRGRzJGLEdBQUF2QixFQUFvQnJILE9BQU8sS0FDMUJGLFVBQVUsS0FDVnBrQixLQUFLMnNCLEdBQ0x0SSxRQUFRQyxPQUFPLEtBQ1hDLEtBQUssWUFBYSxTQUFTZ0QsR3pCbTRGL0IsTXlCbjRGMkMsV0FBYUEsRUFBRXZuQixLQUFLLEdBQUcsR0FBSyxJQUFZLEt6QnM0RnZGa3RCLEd5QnA0RmE1SSxPQUFPLFFBQ2hCQyxLQUFLLFFBQVMsUUFDZEEsS0FBSyxLQUVWaUksR3pCazRGQ1UsRXlCbDRGYTVJLE9BQU8sUUFDaEJDLEtBQUssSUFBS2lJLEVBQVMsR0FDbkJqSSxLQUFLLElBQUssU0FBVWdELEd6Qmk0RnBCLE95Qmo0Rm9DQSxFQUFFdm5CLEtBQUssR0FBRyxHQUFLLEdBQUcsSUFBSyxLQUFRLEVBQUVpWCxLQUFZOFYsTUFDakZ4SSxLQUFLLEtBQU0sU0FDWHRlLE1BQU0sY0FBZSxTQUFTc2hCLEd6Qmk0RjlCLEd5Qmo0RnVDNEYsR0FBTTVGLEVBQUV2bkIsS0FBSyxHQUFHLEVBQUksT0FBT210QixHQUFNLEtBQU9BLEVBQU0sSUFBTSxNQUFlLE9BQzFHNUksS0FBSyxZQUFhLFNBQVNnRCxHekJrNEYzQixHeUJsNEZvQzRGLEdBQU01RixFQUFFdm5CLEtBQUssR0FBRyxFQUFJLE9BQU9tdEIsR0FBTSxLQUFPQSxFQUFNLElBQU0sZUFBaUJYLEVBQVMsR0FBSyxNQUFlLE9BQ3RJMUwsS0FBSyxTQUFTeUcsR3pCbTRGZCxNeUJuNEYwQkEsR0FBVTllLE96Qnk0RnhDLEl5QnA0Rkcya0IsR0FBWVgsRUFBTyxHQUN2QixFekJ5NEZDWSxLeUJ4NEZvQkQsRUFDckIsT0FGeUJBLEVBQWEsT0FDdEMsSUFFQSxNQUVpQzFCLEVBQU1DLEdBQ2xDdkksUUFBUSxzQkFFYixRekJtNEZDaUssRXlCbjRGYVosRUFBUWYsRUFBTUMsR0FDdkJ2SSxRQUFRLGNBRWIsUXpCazRGQ3VJLEV5Qmw0Rkd2SCxVQUFVLFNBQ1Rwa0IsTUFBTXlzQixFQUFPLEtBQ2JwSSxRQUNBQyxPQUFPLFVBQ1BDLEtBQUssUUFBUyxTQUNkQSxLQUFLLFlBQWEsU0FBU2dELEd6QiszRjNCLE15QjczRlUsYUFES21FLEdBQU1uRSxJQUFJMVksTUFBTSxHQUFHQSxNQUFNLEdBQ3JDLEdBQ0gsTUFDQTBWLEtBQUssSUFBSyxLQUNWQSxLQUFLLFNBQVUsUUFDZkEsS0FBSyxPQUFRLFdBQ2JuaEIsR0FBRyxZQUFhLFNBQVNta0IsR3pCMDNGekJELEV5QnozRk9nRyxLQUFLLFdBQWN4RSxPQUFPdkIsRUFBRSxJQUFJa0MsVUFBVSxFQUM5QyxJekJ5M0ZIbGlCLEt5QnozRlFxVyxhQUFhLElBQ2xCLEd6QnkzRkhyVyxLeUJ6M0ZRcVcsYUFBYSxlQUNsQixPekJ5M0ZIOEUsR3lCejNGTWhZLE9BQU9uRCxNQUFNNmIsUUFBUSxVQUMzQixLQUNBaGdCLEdBQUcsV0FBWSxTQUFVbWtCLEd6QnkzRnpCRCxFeUJ2M0ZHaUcsT3pCdzNGSGhtQixLeUJ4M0ZRcVcsYUFBYSxJQUNsQixLekJ3M0ZIclcsS3lCeDNGUXFXLGFBQWEsZUFDbEIsT3pCdzNGSDhFLEd5QngzRk1oWSxPQUFPbkQsTUFBTTZiLFFBQVEsVUFDM0IsSXpCMDNGSixJeUJ4M0ZHNEksS3pCNjNGSEEsR3lCeDNGTSxTekJ5M0ZGSyxLeUJ4M0ZRZ0IsRUFBYzlDLEVBQVVtQixFQUdyQ0MsSXpCdzNGQ0ssRXlCcmhHRCxPekJzaEdLSyxLeUJ4M0ZRZ0IsRUFBY3J0QixFQTlKM0IsTUE4SnVDMHJCLEVBR3ZDQyxJekIyM0ZDSyxFeUJ4M0ZNQyxRQUFRdUIsT0FBUzNCLEVBQWlCdEIsRUFBVW1CLEVBQU1DLEVBQ3pEcEIsR3pCdzNGQ3lCLEV5QjdoR0QsTUFxS2F3QixPQUFTM0IsRUFBaUI3ckIsRUFyS3ZDLE1BcUttRDByQixFQUFNQyxFQUV6RHBCLEV6QnczRkMsSXlCeDNGRytCLEdBQWUzSSxFQUFRVyxPQUFPLE9BQU9sQixRQUFRLGlCQUVqRCxFekJ3M0ZDcGpCLEd5QngzRkl5TCxLQUFLbUQsUUFBUSxTQUFVckosR3pCeTNGdkIsR3lCeDNGR2tvQixHQUFrQm5CLEVBQWFoSSxPQUVuQyxNekJ3M0ZDbUosR3lCeDNGZW5KLE9BQU8sU0FDbEJDLEtBQUssT0FBUSxZQUNiQSxLQUFLLEtBQU0sU0FBV2hmLEVBQU1rYyxFQUFJdFQsV0FBV2EsUUFBUSxJQUFLLElBQU0sSUFBTXdTLEVBQUlyVCxXQUFXYSxRQUFRLElBQUssS0FDaEd1VixLQUFLLFFBQVNoZixHQUNkMGQsU0FBUyxVQWhMbEIsU0FnTDhCMWQsR0FDckJuQyxHQUFHLFNBQVUsU0FBVTRFLEd6Qm8zRnZCLEd5Qm4zRk8wbEIsR0FBVW5tQixLQUNkMUksS0FBSzBJLE1BQUtvbUIsU0FJRDNCLEVBQU81cEIsZUFBZXNyQixLekJvM0YxQjFCLEV5Qm4zRlUwQixPekJzM0ZkMUIsRXlCbjNGVTBCLEdBQVNyQixLQUFPZ0IsRUFBY3J0QixFQUFLMHRCLEdBQVVoQyxFQUNwREMsR3pCbTNGSEssRXlCbjNGVTBCLEdBQVNGLE9BQVMzQixFQUFpQjdyQixFQUFLMHRCLEdBQVVoQyxFQUFNQyxFQUNsRXBCLEt6QjAyRkF5QixFeUJuM0ZVMEIsR0FBU3JCLEtBQ2hCaGpCLFN6Qm0zRkgyaUIsRXlCbjNGVTBCLEdBQVNGLE9BQ25CbmtCLFl6QjYzRlJva0IsRXlCbjNGZW5KLE9BQU8sU0FDbEJ4RCxLQUFLdmIsR0FDTGdmLEtBQUssTUFBTyxTQUFXaGYsRUFBTWtjLEVBQUl0VCxXQUFXYSxRQUFRLElBQUssSUFBTSxJQUFNd1MsRUFBSXJULFdBQVdhLFFBQVEsSUFDcEcsTXpCbTNGQSxJeUJqM0ZHeWUsR0FBa0JuQixFQUFhaEksT0FFbkMsTXpCaTNGQ21KLEd5QmozRmVuSixPQUFPLFNBQ2xCQyxLQUFLLE9BQVEsWUFDYkEsS0FBSyxLQUFNLGlCQUFtQjlDLEVBQUl0VCxXQUFXYSxRQUFRLElBQUssSUFBTSxJQUFNd1MsRUFBSXJULFdBQVdhLFFBQVEsSUFBSyxLQUNsR3VWLEtBQUssUUFBUyxXQUNkdEIsU0FBUyxXQUFXLEdBQ3BCN2YsR0FBRyxTQUFVLFNBQVU0RSxHekI2MkZ2QixHeUI1MkZPMGxCLEdBQVVubUIsS0FDZDFJLEtBQUswSSxNQUFLb21CLFNBSUQzQixFQUFPNXBCLGVBQWVzckIsS3pCNjJGMUIxQixFeUI1MkZVMEIsT3pCKzJGZDFCLEV5QjUyRlUwQixHQUFTckIsS0FBT2dCLEVBQWNydEIsRUFBSzB0QixHQUFVaEMsRUFFcERDLEd6QjQyRkhLLEV5QjUyRlUwQixHQUFTRixPQUFTM0IsRUFBaUI3ckIsRUFBSzB0QixHQUFVaEMsRUFBTUMsRUFDbEVwQixLekJrMkZBeUIsRXlCNTJGVTBCLEdBQVNyQixLQUNoQmhqQixTekI0MkZIMmlCLEV5QjUyRlUwQixHQUFTRixPQUNuQm5rQixZekJ1M0ZSb2tCLEV5QjUyRmVuSixPQUFPLFNBQ2xCeEQsS0FBSyxZQUNMeUQsS0FBSyxNQUFPLGlCQUFtQjlDLEVBQUl0VCxXQUFXYSxRQUFRLElBQUssSUFBTSxJQUFNd1MsRUFBSXJULFdBQVdhLFFBQVEsSUFFbkcsSXpCMDJGQyxJeUIxMkZHNGUsR0FBbUJ0QixFQUFhaEksT0FBTyxPQUN0Q2xCLFFBQVEsc0JBRWIsRXpCeTJGQ3dLLEd5QnoyRmlCdEosT0FBTyxTQUNwQkMsS0FBSyxPQUFRLFlBQ2JBLEtBQUssS0FBTSxzQkFBd0I5QyxFQUFJdFQsV0FBV2EsUUFBUSxJQUFLLElBQU0sSUFBTXdTLEVBQUlyVCxXQUFXYSxRQUFRLElBQUssS0FDdkdpVSxTQUFTLFdBQVcsR0FDcEI3ZixHQUFHLFNBQVUsU0FBVTRFLEd6QnMyRnZCa2xCLEV5QnIyRmlCam5CLE1BQU0sVUFBWXNCLEtBQUtvbUIsUUFBVyxFQUNuRCxLekJ1MkZKQyxFeUJyMkZpQnRKLE9BQU8sU0FDcEJ4RCxLQUFLLGNBQ0x5RCxLQUFLLE1BQU8sc0JBQXdCOUMsRUFBSXRULFdBQVdhLFFBQVEsSUFBSyxJQUFNLElBQU13UyxFQUFJclQsV0FBV2EsUUFBUSxJQUMzRyxLQUlELFFBQVMwZCxHQUFpQjFzQixHekJvMkZyQixHeUJuMkZHZ0MsR0FBR3duQixFQUFHbm5CLEVBQ1Z3ckIsRUFHQUMsRUFISUMsRUFDSixFQUFJQyxFQUNKLEN6QnMyRkMsS0FGQTNyQixFeUJqMkZELEdBQUtMLEVBQUksRUFBR0EsRUFBSWhDLEVBQUt5TCxLQUFLcEosT0FBUUwsSXpCcTJGN0IsR0FEQTZyQixFeUJuMkZLN3RCLEVBQUtBLEVBQUt5TCxLQUNoQnpKLElBQUk2ckIsRUFBSXhyQixTQUFXQSxFekJtMkZsQixDQUtBLElBREF5ckIsRXlCbDJGRCxFQUFLdEUsRUFBSSxFQUFHQSxFQUFJbm5CLEVBQU8sRUFBR21uQixJekJvMkZyQnNFLEd5Qm4yRk9ELEVBQUlyRSxHQUFHLEdBQUtxRSxFQUFJckUsRUFBRSxJQUM3QixFekJvMkZBc0UsSXlCbDJGRCxHekJtMkZDQyxHeUJsMkZKRCxNQVJPRSxJekI0MkZQRCxHeUJuMkZVOVcsS0FBS2dYLElBQUlGLElBQWEvdEIsRUFBS3lMLEtBQUtwSixPQUUzQzJyQixFekJtMkZDLEl5QmoyRkRFLEdBQ0lDLEVBQ0pDLEVBQ0lDLEVBRUpDLEVBUElDLEVBQ0osSUFDSUMsRUFDSixFQUNJQyxFQUFPenVCLEVBQ1hpc0IsT3pCcTJGQyxLeUJuMkZJanFCLEVBQUksRUFBR0EsRUFBSUssRUFBTyxFQUFHTCxJQUN0QixDekJxMkZDLElBRkFtc0IsRXlCbDJGRCxFekJtMkZDQyxFeUJsMkZELEVBQUtFLEVBQVUsRUFBR0EsRUFBVWpzQixFQUFPLEVBQUdpc0IsSXpCbzJGakM5RSxHeUJuMkZJeG5CLEVBQUlzc0IsR0FDVCxHekJtMkZDRCxHeUJuMkZJN0UsRUFBSSxJQUVULEd6Qm0yRkMyRSxHeUJuMkZXN1MsU0FBU21ULEVBQUtqRixHQUMxQixJekJtMkZDNEUsR3lCbjJGWTlTLFNBQVNtVCxFQUFLSixHQUM5QixHekJvMkZBSCxHeUJuMkZXalgsS0FBS2dYLElBQUlFLEVBQ3JCQyxHQUFJRixFQUFZSyxJekJvMkZYQSxFeUJsMkZETCxFekJtMkZDTSxFeUJsMkZKeHNCLEd6QnMyRkosR3lCbjJGRzBzQixHQUFjcFQsU0FBU21ULEVBQUtELEdBQ2hDLElBQUlHLEVBQWVyVCxVQUFVbVQsRUFBS0QsRUFBWSxJQUU5QyxJQUFJSSxFQUFZM1gsS0FBS2dYLElBQUlGLEVBQVdXLEdBQWV6WCxLQUFLZ1gsSUFBSUYsRUFDNURZLEV6QjIyRkMsT3lCMzJGZ0IxWCxNQUFLZ1gsS0FBS0YsRUFBV1csR0FBZXpYLEtBQUtnWCxLQUFLRixFQUMvRFksR0FBaUJDLEl6Qm8yRlpKLEd5QmwyRkosTUFFbUIsRUFDcEIsSUFBK0IsRUFBWkEsRUFBaUIsRUFFcENULElBTUosUUFBU25CLEdBQXFCNXNCLEVBQU02dUIsR3pCbzJGL0IsR3lCbjJGR0MsR0FBYTdYLEtBQUs0UyxPQUFPZ0YsRUFBVyxHQUN4QyxFQUFJQyxHQUFhLEt6Qm8yRlpBLEd5QmwyRkosR3pCcTJGQSxJeUJuMkZHOXNCLEdBQUd3bkIsRUFBR25uQixFQUNOMHJCLEVBQ0osQ3pCczJGQyxLQUZBMXJCLEV5QmoyRkQsR0FBS0wsRUFBSSxFQUFHQSxFQUFJSyxFQUFRTCxJekJvMkZuQnduQixHeUJuMkZJc0YsRUFBYTlzQixHQUNsQkssRXpCbTJGQzByQixHeUJuMkZXelMsU0FBU3RiLEVBQUt3cEIsR0FDN0IsR3pCcTJGQSxJeUI3MUZHdUYsR0FBY0MsRUFFbEJDLEVBUklDLEVBQ0osSUFEdUJuQixFQUNuQm9CLEVBQ0osR0FEc0JwQixFQUNsQnFCLEVBQ0osSUFEMEJyQixFQUN0QnNCLEdBQW9CLEVBQ3BCQyxHQUFtQixFQUNuQkMsR0FDSixDekJzMkZDLEtBREF4QixFeUJsMkZELEVBQUsvckIsRUFBSSxFQUFHQSxFQUFJSyxFQUFRTCxJekJzMkZuQixHQUZBd25CLEd5Qm4yRklzRixFQUFhOXNCLEdBQ2xCSyxFekJtMkZDMHJCLEd5Qm4yRld6UyxTQUFTdGIsRUFBS3dwQixHQUMxQixLQUFLNkYsR0FBcUJ0QixFQUFXbUIsRXpCbzJGaENILEV5QmwyRkR2RixFekJtMkZDNkYsR3lCbDJGRCxNekJxMkZILEt5Qm4yRklDLEdBQW9CdkIsRUFBV29CLEV6Qm8yRi9CSCxFeUJsMkZEeEYsRXpCbTJGQzhGLEd5QmwyRkQsTXpCcTJGSCxLeUJuMkZJQyxHQUF3QnhCLEVBQVdxQixFQUNwQyxDekJtMkZDSCxFeUJsMkZEekYsRXpCbTJGQytGLEd5QmwyRkQsQ0FDSCxPekJzMkZKLEd5Qm4yRkdDLElBQWdCLEVBRXBCLEV6QnUyRkMsU0FDSS9tQixNeUJqMkZHLE16QmsyRkh6SSxNeUJsMkZhd3ZCLEdBUGdCLEVBQWZULEVBQW9CLEVBQ3ZDLFF6QjAyRkt0bUIsTXlCaDJGRyxNekJpMkZIekksTXlCajJGYXd2QixHQVZjLEVBQWRSLEVBQW1CLEVBQ3JDLFF6QjQyRkt2bUIsTXlCLzFGRyxNekJnMkZIekksTXlCaDJGYXd2QixHQWJzQixFQUFsQlAsRUFBdUIsRUFFN0MsUUFrQkosUUFBU3JELEdBQWU1ckIsRUFBTTByQixFQUFNQyxHekJnMkYvQixNeUIvMUZNQSxHQUFJckgsT0FBTyxRQUNiQyxLQUFLLFFBQVMsUUFDZEEsS0FBSyxJQUFLbUgsRUFDbEIxckIsSUFFRCxRQUFTcXRCLEdBQWNydEIsRUFBTTByQixFQUFNQyxHekI4MUY5QixNeUI3MUZNQSxHQUFJckgsT0FBTyxRQUNibUwsTUFBTXp2QixHQUNOdWtCLEtBQUssUUFBUyxRQUNkQSxLQUFLLElBQ2JtSCxHQUVELFFBQVNHLEdBQWlCN3JCLEVBQU0wckIsRUFBTUMsRUFBS3BCLEd6QjIxRnRDLE1BQU9vQixHeUIxMUZHdkgsVUFBVSxTQUNoQnBrQixLQUFLQSxHQUNMcWtCLFFBQ0FDLE9BQU8sVUFDUEMsS0FBSyxRQUFTLFNBQ2RBLEtBQUssWUFBYSxTQUFTZ0QsRUFBR3ZsQixHekJzMUY5QixHeUJyMUZPbWUsR0FBUXhiLE1BQU13bkIsUUFBUTVFLEdBQUtBLEdBQVEsRUFBRnZsQixFQUFPLEVBQzVDdWxCLEV6QnMxRkgsT3lCcjFGVSxhQURLbUUsR0FBTXZMLElBQVF0UixNQUFNLEdBQUdBLE1BQU0sR0FDekMsR0FDSCxNQUNBMFYsS0FBSyxJQUFLLEdBQ1ZBLEtBQUssU0FBVSxRQUNmQSxLQUFLLE9BQU8sU0FBU2dELEVBQUV2bEIsR3pCbzFGdkIsTXlCbDFGVTB0QixHQURHL3FCLE1BQU13bkIsUUFBUTVFLEdBQUtBLEVBQUUsR0FDL0JBLEVBQXlCZ0QsRUFBU3ZvQixFQUFFLElBQ3ZDLEtBQ0FvQixHQUFHLFlBQWF1c0IsR0FDaEJ2c0IsR0FBRyxXQUNYd3NCLEdBRUQsUUFBU0QsR0FBcUJwSSxHekJpMUZ6QixHeUJoMUZHc0ksR0FBWWxyQixNQUFNd25CLFFBQVE1RSxHQUFLdUksRUFBV3ZJLEVBQUUsSUFBTSxLQUFRQSxFQUFFLEdBQUssWUFDckVBLEN6QmcxRkNELEd5QmgxRkdnRyxLQUNKdUMsR3pCZzFGQ3RvQixLeUJoMUZJcVcsYUFBYSxJQUNsQixHekJnMUZDclcsS3lCaDFGSXFXLGFBQWEsZUFDckIsT0FFRCxRQUFTZ1MsR0FBb0JySSxHekJpMUZ4QkQsRXlCLzBGRGlHLE96QmcxRkNobUIsS3lCaDFGSXFXLGFBQWEsSUFDbEIsR3pCZzFGQ3JXLEt5QmgxRklxVyxhQUFhLGVBQ3JCLE9BRUQsUUFBUzJPLEdBQWU1SSxFQUFTcGUsRUFBS2dWLEVBQU1rTixFQUFNdUUsRUFBUWhzQixFQUFNMHJCLEVBQU1DLEVBQUtwQixFQUFVOUksRUFBS0QsR3pCaTFGckYsR3lCaDFGR2lNLEdBQWtCOUosRUFBUVcsT0FFOUIsTXpCZzFGQ21KLEd5QmgxRmVuSixPQUFPLFNBQ2xCQyxLQUFLLE9BQVEsWUFDYkEsS0FBSyxLQUFNaEssRUFBTyxJQUFNaFYsRUFBTWtjLEVBQUl0VCxXQUFXYSxRQUFRLElBQUssSUFBTSxJQUFNd1MsRUFBSXJULFdBQVdhLFFBQVEsSUFBSyxLQUNsR3VWLEtBQUssUUFBU2hmLEdBQ2QwZCxTQUFTLFVBQVkxZCxJQUFRa2lCLEdBQzdCcmtCLEdBQUcsU0FBVSxTQUFVNEUsR3pCNDBGdkIsR3lCMzBGTzBsQixHQUFVbm1CLEtBQ2QxSSxLQUFLMEksTUFBS29tQixTQUlEM0IsRUFBTzVwQixlQUFlc3JCLEt6QjQwRjFCMUIsRXlCMzBGVTBCLE96QjYwRmQxQixFeUIzMEZVMEIsR0FBU3JCLEtBQU9ULEVBQWU1ckIsRUFBSzB0QixHQUFVaEMsRUFDckRDLEd6QjIwRkhLLEV5QjMwRlUwQixHQUFTRixPQUFTM0IsRUFBaUI3ckIsRUFBSzB0QixHQUFVaEMsRUFBTUMsRUFDbEVwQixLekJtMEZBeUIsRXlCMzBGVTBCLEdBQVNyQixLQUNoQmhqQixTekIyMEZIMmlCLEV5QjMwRlUwQixHQUFTRixPQUNuQm5rQixZekJvMUZSb2tCLEV5QjMwRmVuSixPQUFPLFNBQ2xCeEQsS0FBS3ZiLEdBQ0xnZixLQUFLLE1BQU9oSyxFQUFPLElBQU1oVixFQUFNa2MsRUFBSXRULFdBQVdhLFFBQVEsSUFBSyxJQUFNLElBQU13UyxFQUFJclQsV0FBV2EsUUFBUSxJQUN0RyxLQUVELFFBQVMwZ0IsR0FBYzd3QixFQUFPOHFCLEVBQVFvRyxHekIwMEZqQyxHeUJ6MEZHQyxHQUFPbnhCLEVBQ1g4cUIsRUFBSXNHLEVBQWdCaFosS0FBS2dYLElBQUkrQixHQUFNckcsRUFBVSxJQUM3Q29HLEVBQUlHLEVBQWEsSUFBTUQsRUFFdkIsR3pCeTBGQyxPeUJ6MEZHRCxHQUFPLEVBQ0EsZUFBaUJFLEVBQzNCLElBQ1UsaUJBQW1CQSxFQUM3QixJQUtMLFFBQVNqRixHQUFXa0YsR3pCMDBGZkEsRXlCejBGTUEsRUFDUGhpQixVekJ5MEZDLEl5QnowRkdzWixHQUFPMEksRUFBSzFHLFVBQVUsRUFDMUIsR0FBSTJHLEVBQVE5VSxTQUFTNlUsRUFBSzFHLFVBQVUsRUFBRyxHQUFJLElBQzNDLEVBQUkwRCxFQUFNZ0QsRUFBSzFHLFVBQVUsRUFFekIsRXpCeTBGQyxPeUJ6MEZNLElBQUk5TixNQUFLOEwsRUFBTTJJLEVBQ3pCakQsR0FFRCxRQUFTZixHQUFnQitELEd6QjAwRnBCLE15QnowRm9CLGdCQUFWQSxJekIwMEZOQSxFeUJ6MEZNbEYsRUFDUGtGLEdBQU9BLEVBQ1Z4SSxVQUVBd0ksRUFHTCxRQUFTTCxHQUFZSyxHekIwMEZoQixNeUJ6MEZZLFlBQVRBLEVBQW9DQSxHekI2MEZ2Q0EsRXlCMzBGTWxGLEVBQ1BrRixHQUFPRSxFQUFZRixFQUFLckksWUFBYyxJQUFNd0ksRUFBa0JILEVBQUtuSSxXQUFhLEtBQU9tSSxFQUMxRnpJLGVBRUQsUUFBUzJJLEdBQWFELEd6QjQwRmpCLE95QjEwRkdBLEd6QjIwRkMsSXlCMTBGRyxHekIyMEZDLE15QjEwRkwsTXpCMjBGQyxLeUIxMEZHLEd6QjIwRkMsTXlCMTBGTCxNekIyMEZDLEt5QjEwRkcsR3pCMjBGQyxNeUIxMEZMLE16QjIwRkMsS3lCMTBGRyxHekIyMEZDLE15QjEwRkwsTXpCMjBGQyxLeUIxMEZHLEd6QjIwRkMsTXlCMTBGTCxLekIyMEZDLEt5QjEwRkcsR3pCMjBGQyxNeUIxMEZMLE16QjIwRkMsS3lCMTBGRyxHekIyMEZDLE15QjEwRkwsTXpCMjBGQyxLeUIxMEZHLEd6QjIwRkMsTXlCMTBGTCxNekIyMEZDLEt5QjEwRkcsR3pCMjBGQyxNeUIxMEZMLE16QjIwRkMsS3lCMTBGRyxHekIyMEZDLE15QjEwRkwsTXpCMjBGQyxLeUIxMEZHLEl6QjIwRkMsTXlCMTBGTCxNekIyMEZDLEt5QjEwRkcsSXpCMjBGQyxNeUJ6MEZaLFFBRUQsUUFBU0UsR0FBa0JuRCxHekI0MEZ0QixHeUIzMEZHM0QsR0FBSTJELEVBQU0sR0FDVmtCLEVBQUlsQixFQUNSLEd6QjIwRkMsT3lCMzBGUyxLQUFOM0QsR0FBaUIsS0FBTjZFLEVBQ0psQixFQUNWLEtBQ1MsSUFBTjNELEdBQWlCLEtBQU42RSxFQUNKbEIsRUFDVixLQUNTLElBQU4zRCxHQUFpQixLQUFONkUsRUFDSmxCLEVBQ1YsS0FDTUEsRUFDVixLekI4akVBeHVCLE9BQU9DLGVBQWViLEVBQVMsY0FDM0JjLE9BQU8sSUFFWGQsRXlCNTZGZWdDLGN6QjY2RmZoQyxFeUJyNUZlNEMsaUJBNUIyQixJQUkzQzJtQixHQUoyQ3BvQixFQUFBdEIsRUFBQSxJQWdDdkMyeUIsRUFBV3J0QixFQUFFbUQsS0FBS2hDLFdBRWxCb2tCLEVBQUEsR0FBZ0I4SCxJekJzN0ZmQyxReUJwN0ZELHFCekJxN0ZDQyxVeUJwN0ZELHlCekJxN0ZDQyxVeUJyN0ZVLEdBQ1gsSXpCcTdGQ0MsWXlCcjdGWSxHQUNiLEl6QnE3RkNDLGF5QnI3RmEsR0FDZCxJekJxN0ZDQyxZeUJyN0ZZLEdBQUksTUFHakJySSxFQUFBLEdBQWdCK0gsSXpCczdGZkMsUXlCcDdGRCx1QnpCcTdGQ0MsVXlCcDdGRCx5QnpCcTdGQ0MsVXlCcjdGVSxHQUNYLEl6QnE3RkNDLFl5QnI3RlksR0FDYixJekJxN0ZDQyxheUJyN0ZhLEdBQ2QsSXpCcTdGQ0MsWXlCcjdGWSxHQUFJLE1BZzBCakI5RSxHekI0MEZDK0UsRXlCMTBGRCxNekIyMEZDQyxF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QixZQUNUc3VCLEcvQjhxSUNGLEUrQjlxSVdwdUIsWUFDZnd1QixJL0IrcUlJSixFK0I5cUlXcHVCLFlBQ2ZzdUIsRS9CZ3JJQSxJK0I5cUlHSyxHQUFnQjdnQixTQUFTOFAsdUJBQXVCdVEsRUFBUzlxQixVQUM3RCxHQUFJdXJCLEVBQWdCRCxFQUNwQkUsVS9COHFJQ0YsRytCOXFJYUcsYUFBYVYsRUFDOUJRLElBRUQsUUFBU1AsSy9CK3FJSixHK0I5cUlHRCxHQUFjdGdCLFNBQVN2TyxjQUMzQixNL0IrcUlDLE9BREF5YSxJK0I5cUlFaFksT0FBT29zQixHQUFhMVQsUUFBUSxnQkFDL0IsR0FDSDBULEVBRUQsUUFBU0csR0FBaUJKLEcvQitxSXJCLEcrQjlxSUdHLEdBQVl4Z0IsU0FBU3ZPLGNBQ3pCLE0vQm1ySUMsT0FMQSt1QixHK0I5cUlTcFosYUFBYSxNQUFPaVosRUFDOUIxUSxPQUFJMFEsRUFBU3B1QixRL0IrcUlSdXVCLEUrQjlxSVNwWixhQUFhLE1BQU9pWixFQUM5QnB1QixPL0I4cUlDdXVCLEUrQjlxSVNwWixhQUFhLFFBQVNpWixFQUNuQ3B1QixRQUVKdXVCLEVBRUQsUUFBU0ksR0FBZ0JELEcvQitxSXBCLEcrQjlxSUdELEdBQVcxZ0IsU0FBU3ZPLGNBQ3hCLEkvQmdySUMsT0FGQWl2QixHK0I5cUlRdFosYUFBYSxPQUN0QnVaLEcvQjhxSUNELEUrQjlxSVF0WixhQUFhLFNBQ3RCLFVBQ0hzWixFL0J5bklBdjRCLE9BQU9DLGVBQWViLEVBQVMsY0FDM0JjLE9BQU8sSUFFWGQsRUFBUVcsUUFBVWs0QiIsImZpbGUiOiJpbmRleF9idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfcGFyc2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfcGFyc2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BhcnNlcik7XG5cdFxuXHR2YXIgX3NlYXJjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX3NlYXJjaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2gpO1xuXHRcblx0dmFyIF9wYW5lbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0dmFyIF9iYXNlbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0XG5cdHZhciBfZ3JhcGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfdGFicyA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIF90YWJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RhYnMpO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdHZhciBfbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0XG5cdHZhciBfbG9nbyA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpO1xuXHRcblx0dmFyIF9sb2dvMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvZ28pO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBjc3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0XG5cdC8vIERvZXMgbm90IHJlbHkgb24gbWFwIG9iamVjdCBvciBjb25maWcgZmlsZVxuXHR2YXIgQmFzZSA9IGZ1bmN0aW9uIEJhc2UoY29uZmlnKSB7XG5cdCAgICAoMCwgX3BhcnNlcjIuZGVmYXVsdCkoY29uZmlnLCBjYWxsYmFjayk7XG5cdCAgICAoMCwgX2dyYXBoLlNldHVwR3JhcGhzKSgpO1xuXHQgICAgKDAsIF90YWJzMi5kZWZhdWx0KSgpO1xuXHR9O1xuXHRcblx0Ly8gRG9lcyByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcblx0dmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2soZGF0YSkge1xuXHQgICAgKDAsIF9zaGFyZS5BZGRTaGFyZVNldHRpbmdzVG9Db25maWcpKGRhdGEpO1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkNyZWF0ZU1hcCkoZGF0YS5tYXApO1xuXHQgICAgKDAsIF9iYXNlbGF5ZXIuQ3JlYXRlQmFzZUxheWVycykobWFwLCBkYXRhLmJhc2VsYXllcnMpO1xuXHQgICAgKDAsIF9sYXllci5DcmVhdGVEZWZhdWx0TGF5ZXJzKShkYXRhLmxheWVycywgZGF0YVtcImFjdGl2ZS1sYXllcnNcIl0pO1xuXHQgICAgKDAsIF9wYW5lbC5TZXR1cFBhbmVsKShkYXRhLmxheWVycywgZGF0YS5sYXlvdXQpO1xuXHQgICAgKDAsIF9zZWFyY2gyLmRlZmF1bHQpKG1hcCk7XG5cdCAgICAoMCwgX2xvZ28yLmRlZmF1bHQpKGRhdGEubG9nbyk7XG5cdCAgICAoMCwgX2dyYXBoLkJpbmRHcmFwaEV2ZW50cykobWFwKTtcblx0ICAgICgwLCBfc2hhcmUuQmluZFVwZGF0ZVNoYXJlVXJsKShtYXApO1xuXHR9O1xuXHRcblx0d2luZG93LkJhc2UgPSBCYXNlO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0geyBCYXNlOiBCYXNlIH07XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFBhcnNlQ29uZmlnO1xuXHQvKipcblx0ICogUGFyc2VzIGEgY29uZmlnIGZpbGUuIFNpbmNlIHRoZSBwcm9jZXNzIHRvIGdldCBleHRlcm5hbCBmaWxlc1xuXHQgKiB1c2VzIEFKQVggeW91IG5lZWQgdG8gcGFzcyBhIGNhbGxiYWNrIHRvIGhhbmRsZSB0aGUgbmV4dCBzdGVwc1xuXHQgKiBvZiB1c2luZyB0aGUgY29uZmlnIGZpbGUsIHNpbmNlIHdlIGRvIG5vdCBrbm93IGhvdyBsb25nIGl0XG5cdCAqIHdpbGwgdGFrZSB0byBncmFiIHRoZSBmaWxlLlxuXHQgKi9cblx0ZnVuY3Rpb24gUGFyc2VDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcblx0ICAgIEdldENvbmZpZyhjb25maWdGaWxlLCBjYWxsYmFjayk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEdldENvbmZpZyhjb25maWdGaWxlLCBjYWxsYmFjaykge1xuXHQgICAgdmFyIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0ICAgIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh4bWxodHRwLnJlYWR5U3RhdGUgPT0gNCkge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhtbGh0dHAucmVzcG9uc2VUZXh0KTtcblx0ICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SOiBNYWxmb3JtZWQgSlNPTiBpbiBjb25maWcgZmlsZS5cIik7XG5cdCAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGZvcm1hdE1hcChkYXRhKTtcblx0ICAgICAgICAgICAgZm9ybWF0TGF5ZXJzKGRhdGEpO1xuXHQgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHhtbGh0dHAub3BlbihcIkdFVFwiLCBjb25maWdGaWxlLCB0cnVlKTtcblx0ICAgIHhtbGh0dHAuc2VuZCgpO1xuXHQgICAgY29uc29sZS5sb2coXCJoaVwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0TWFwKGRhdGEpIHtcblx0ICAgIGlmICghZGF0YS5tYXApIGRhdGEubWFwID0ge307XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdExheWVycyhkYXRhKSB7XG5cdCAgICB2YXIgbGF5ZXJzID0gZGF0YS5sYXllcnM7XG5cdCAgICB2YXIgZGVmYXVsdE1hcHNlcnZlclVybCA9IGRhdGEubWFwc2VydmVyVXJsO1xuXHQgICAgdmFyIGRlZmF1bHRFbmFibGVkTGF5ZXJzID0gZGF0YVtcImFjdGl2ZS1sYXllcnNcIl07XG5cdCAgICB2YXIgbGF5ZXJncm91cDtcblx0ICAgIHZhciBpO1xuXHRcblx0ICAgIGZvciAodmFyIHByb3AgaW4gbGF5ZXJzKSB7XG5cdCAgICAgICAgaWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcblx0ICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuXHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsYXllcmdyb3VwLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIHNldE1hcHNlcnZlclVybChsYXllcmdyb3VwW2ldLCBkZWZhdWx0TWFwc2VydmVyVXJsKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldE1hcHNlcnZlclVybChsYXllciwgdXJsKSB7XG5cdCAgICBsYXllci51cmwgPSBsYXllci51cmwgfHwgdXJsO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENyZWF0ZVNlYXJjaDtcblx0XG5cdHZhciBfbGVhZmxldEdlb3NlYXJjaCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVTZWFyY2gobWFwKSB7XG5cdCAgICB2YXIgcHJvdmlkZXIgPSBuZXcgX2xlYWZsZXRHZW9zZWFyY2guRXNyaVByb3ZpZGVyKCk7XG5cdFxuXHQgICAgdmFyIHNlYXJjaENvbnRyb2wgPSBuZXcgX2xlYWZsZXRHZW9zZWFyY2guR2VvU2VhcmNoQ29udHJvbCh7XG5cdCAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLFxuXHQgICAgICAgIHNob3dNYXJrZXI6IGZhbHNlLFxuXHQgICAgICAgIGF1dG9Db21wbGV0ZTogZmFsc2Vcblx0ICAgIH0pO1xuXHRcblx0ICAgIG1hcC5hZGRDb250cm9sKHNlYXJjaENvbnRyb2wpO1xuXHRcblx0ICAgIEwuRG9tRXZlbnQub24oc2VhcmNoQ29udHJvbC5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmNvbnRhaW5lciwgXCJjbGlja1wiLCBmdW5jdGlvbiAoZXYpIHtcblx0ICAgICAgICBMLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbihldik7XG5cdCAgICB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2xlYWZsZXRDb250cm9sID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnR2VvU2VhcmNoQ29udHJvbCcsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xlYWZsZXRDb250cm9sKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX3NlYXJjaEVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnU2VhcmNoRWxlbWVudCcsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaEVsZW1lbnQpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfYmluZ1Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0JpbmdQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JpbmdQcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9lc3JpUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnRXNyaVByb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXNyaVByb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX2dvb2dsZVByb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0dvb2dsZVByb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ29vZ2xlUHJvdmlkZXIpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfb3BlblN0cmVldE1hcFByb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ09wZW5TdHJlZXRNYXBQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29wZW5TdHJlZXRNYXBQcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9wcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cbi8qKiovIH0sXG4vKiA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcblx0ICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG5cdCAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG5cdCAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1yZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gTGVhZmxldENvbnRyb2w7XG5cdFxuXHR2YXIgX2xvZGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHRcblx0dmFyIF9sb2Rhc2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbG9kYXNoKTtcblx0XG5cdHZhciBfc2VhcmNoRWxlbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0dmFyIF9zZWFyY2hFbGVtZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaEVsZW1lbnQpO1xuXHRcblx0dmFyIF9yZXN1bHRMaXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdFxuXHR2YXIgX3Jlc3VsdExpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVzdWx0TGlzdCk7XG5cdFxuXHR2YXIgX2RvbVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHR2YXIgX2NvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0dmFyIGRlZmF1bHRPcHRpb25zID0gZnVuY3Rpb24gZGVmYXVsdE9wdGlvbnMoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHBvc2l0aW9uOiAndG9wbGVmdCcsXG5cdCAgICBzdHlsZTogJ2J1dHRvbicsXG5cdCAgICBzaG93TWFya2VyOiB0cnVlLFxuXHQgICAgc2hvd1BvcHVwOiBmYWxzZSxcblx0ICAgIG1hcmtlcjoge1xuXHQgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKSxcblx0ICAgICAgZHJhZ2dhYmxlOiBmYWxzZVxuXHQgICAgfSxcblx0ICAgIG1heE1hcmtlcnM6IDEsXG5cdCAgICByZXRhaW5ab29tTGV2ZWw6IGZhbHNlLFxuXHQgICAgYW5pbWF0ZVpvb206IHRydWUsXG5cdCAgICBzZWFyY2hMYWJlbDogJ0VudGVyIGFkZHJlc3MnLFxuXHQgICAgbm90Rm91bmRNZXNzYWdlOiAnU29ycnksIHRoYXQgYWRkcmVzcyBjb3VsZCBub3QgYmUgZm91bmQuJyxcblx0ICAgIG1lc3NhZ2VIaWRlRGVsYXk6IDMwMDAsXG5cdCAgICB6b29tTGV2ZWw6IDE4LFxuXHQgICAgY2xhc3NOYW1lczoge1xuXHQgICAgICBjb250YWluZXI6ICdsZWFmbGV0LWJhciBsZWFmbGV0LWNvbnRyb2wgbGVhZmxldC1jb250cm9sLWdlb3NlYXJjaCcsXG5cdCAgICAgIGJ1dHRvbjogJ2xlYWZsZXQtYmFyLXBhcnQgbGVhZmxldC1iYXItcGFydC1zaW5nbGUnLFxuXHQgICAgICBtc2dib3g6ICdsZWFmbGV0LWJhciBtZXNzYWdlJyxcblx0ICAgICAgZm9ybTogJycsXG5cdCAgICAgIGlucHV0OiAnJ1xuXHQgICAgfSxcblx0ICAgIGF1dG9Db21wbGV0ZTogdHJ1ZSxcblx0ICAgIGF1dG9Db21wbGV0ZURlbGF5OiAyNTBcblx0ICB9O1xuXHR9O1xuXHRcblx0dmFyIENvbnRyb2wgPSB7XG5cdCAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShvcHRpb25zKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHRoaXMubWFya2VycyA9IG5ldyBMLkZlYXR1cmVHcm91cCgpO1xuXHRcblx0ICAgIHRoaXMub3B0aW9ucyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0T3B0aW9ucygpLCBvcHRpb25zKTtcblx0XG5cdCAgICB2YXIgX29wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG5cdCAgICAgICAgc3R5bGUgPSBfb3B0aW9ucy5zdHlsZSxcblx0ICAgICAgICBjbGFzc05hbWVzID0gX29wdGlvbnMuY2xhc3NOYW1lcyxcblx0ICAgICAgICBzZWFyY2hMYWJlbCA9IF9vcHRpb25zLnNlYXJjaExhYmVsLFxuXHQgICAgICAgIGF1dG9Db21wbGV0ZSA9IF9vcHRpb25zLmF1dG9Db21wbGV0ZSxcblx0ICAgICAgICBhdXRvQ29tcGxldGVEZWxheSA9IF9vcHRpb25zLmF1dG9Db21wbGV0ZURlbGF5O1xuXHRcblx0ICAgIGlmIChzdHlsZSAhPT0gJ2J1dHRvbicpIHtcblx0ICAgICAgdGhpcy5vcHRpb25zLmNsYXNzTmFtZXMuY29udGFpbmVyICs9ICcgJyArIG9wdGlvbnMuc3R5bGU7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5zZWFyY2hFbGVtZW50ID0gbmV3IF9zZWFyY2hFbGVtZW50Mi5kZWZhdWx0KF9leHRlbmRzKHt9LCB0aGlzLm9wdGlvbnMsIHtcblx0ICAgICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQocXVlcnkpIHtcblx0ICAgICAgICByZXR1cm4gX3RoaXMub25TdWJtaXQocXVlcnkpO1xuXHQgICAgICB9XG5cdCAgICB9KSk7XG5cdFxuXHQgICAgdmFyIF9zZWFyY2hFbGVtZW50JGVsZW1lbiA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cyxcblx0ICAgICAgICBjb250YWluZXIgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uY29udGFpbmVyLFxuXHQgICAgICAgIGZvcm0gPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uZm9ybSxcblx0ICAgICAgICBpbnB1dCA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5pbnB1dDtcblx0XG5cdCAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIGJ1dHRvbiA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2EnLCBjbGFzc05hbWVzLmJ1dHRvbiwgY29udGFpbmVyKTtcblx0ICAgIGJ1dHRvbi50aXRsZSA9IHNlYXJjaExhYmVsO1xuXHQgICAgYnV0dG9uLmhyZWYgPSAnIyc7XG5cdFxuXHQgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgX3RoaXMub25DbGljayhlKTtcblx0ICAgIH0sIGZhbHNlKTtcblx0XG5cdCAgICBpZiAoYXV0b0NvbXBsZXRlKSB7XG5cdCAgICAgIHRoaXMucmVzdWx0TGlzdCA9IG5ldyBfcmVzdWx0TGlzdDIuZGVmYXVsdCh7XG5cdCAgICAgICAgaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKF9yZWYpIHtcblx0ICAgICAgICAgIHZhciByZXN1bHQgPSBfcmVmLnJlc3VsdDtcblx0XG5cdCAgICAgICAgICBpbnB1dC52YWx1ZSA9IHJlc3VsdC5sYWJlbDtcblx0ICAgICAgICAgIF90aGlzLm9uU3VibWl0KHsgcXVlcnk6IHJlc3VsdC5sYWJlbCB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgZm9ybS5hcHBlbmRDaGlsZCh0aGlzLnJlc3VsdExpc3QuZWxlbWVudHMuY29udGFpbmVyKTtcblx0XG5cdCAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKDAsIF9sb2Rhc2gyLmRlZmF1bHQpKGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgcmV0dXJuIF90aGlzLmF1dG9TZWFyY2goZSk7XG5cdCAgICAgIH0sIGF1dG9Db21wbGV0ZURlbGF5KSwgdHJ1ZSk7XG5cdCAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5zZWxlY3RSZXN1bHQoZSk7XG5cdCAgICAgIH0sIHRydWUpO1xuXHQgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICByZXR1cm4gX3RoaXMuY2xlYXJSZXN1bHRzKGUpO1xuXHQgICAgICB9LCB0cnVlKTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmVsZW1lbnRzID0geyBidXR0b246IGJ1dHRvbiB9O1xuXHQgIH0sXG5cdCAgb25BZGQ6IGZ1bmN0aW9uIG9uQWRkKG1hcCkge1xuXHQgICAgdmFyIF9vcHRpb25zMiA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICBzaG93TWFya2VyID0gX29wdGlvbnMyLnNob3dNYXJrZXIsXG5cdCAgICAgICAgc3R5bGUgPSBfb3B0aW9uczIuc3R5bGU7XG5cdFxuXHQgICAgdGhpcy5tYXAgPSBtYXA7XG5cdCAgICBpZiAoc2hvd01hcmtlcikge1xuXHQgICAgICB0aGlzLm1hcmtlcnMuYWRkVG8obWFwKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoc3R5bGUgPT09ICdiYXInKSB7XG5cdCAgICAgIHZhciBmb3JtID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmZvcm07XG5cdFxuXHQgICAgICB2YXIgcm9vdCA9IG1hcC5nZXRDb250YWluZXIoKS5xdWVyeVNlbGVjdG9yKCcubGVhZmxldC1jb250cm9sLWNvbnRhaW5lcicpO1xuXHRcblx0ICAgICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsICdsZWFmbGV0LWNvbnRyb2wtZ2Vvc2VhcmNoIGJhcicpO1xuXHQgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZm9ybSk7XG5cdCAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblx0ICAgICAgdGhpcy5lbGVtZW50cy5jb250YWluZXIgPSBjb250YWluZXI7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5jb250YWluZXI7XG5cdCAgfSxcblx0ICBvblJlbW92ZTogZnVuY3Rpb24gb25SZW1vdmUoKSB7XG5cdCAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgaWYgKGNvbnRhaW5lcikge1xuXHQgICAgICBjb250YWluZXIucmVtb3ZlKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfSxcblx0ICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGV2ZW50KSB7XG5cdCAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcblx0ICAgIHZhciBfc2VhcmNoRWxlbWVudCRlbGVtZW4yID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLFxuXHQgICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbjIuY29udGFpbmVyLFxuXHQgICAgICAgIGlucHV0ID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuMi5pbnB1dDtcblx0XG5cdCAgICBpZiAoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcblx0ICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHQgICAgICBpbnB1dC5mb2N1cygpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgc2VsZWN0UmVzdWx0OiBmdW5jdGlvbiBzZWxlY3RSZXN1bHQoZXZlbnQpIHtcblx0ICAgIGlmICghW19jb25zdGFudHMuQVJST1dfRE9XTl9LRVksIF9jb25zdGFudHMuQVJST1dfVVBfS0VZXS5pbmNsdWRlcyhldmVudC5rZXlDb2RlKSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgIHZhciBpbnB1dCA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5pbnB1dDtcblx0XG5cdCAgICB2YXIgbGlzdCA9IHRoaXMucmVzdWx0TGlzdDtcblx0ICAgIHZhciBtYXggPSB0aGlzLnJlc3VsdExpc3QuY291bnQoKSAtIDE7XG5cdFxuXHQgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2Vcblx0ICAgIHZhciBuZXh0ID0gZXZlbnQuY29kZSA9PT0gJ0Fycm93RG93bicgPyB+fmxpc3Quc2VsZWN0ZWQgKyAxIDogfn5saXN0LnNlbGVjdGVkIC0gMTtcblx0ICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuXHQgICAgdmFyIGlkeCA9IG5leHQgPCAwID8gbWF4IDogbmV4dCA+IG1heCA/IDAgOiBuZXh0O1xuXHRcblx0ICAgIHZhciBpdGVtID0gbGlzdC5zZWxlY3QoaWR4KTtcblx0ICAgIGlucHV0LnZhbHVlID0gaXRlbS5sYWJlbDtcblx0ICB9LFxuXHQgIGNsZWFyUmVzdWx0czogZnVuY3Rpb24gY2xlYXJSZXN1bHRzKGV2ZW50KSB7XG5cdCAgICBpZiAoZXZlbnQua2V5Q29kZSAhPT0gX2NvbnN0YW50cy5FU0NBUEVfS0VZKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLnJlc3VsdExpc3QuY2xlYXIoKTtcblx0ICB9LFxuXHQgIGF1dG9TZWFyY2g6IGZ1bmN0aW9uIGF1dG9TZWFyY2goZXZlbnQpIHtcblx0ICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgIHZhciBxdWVyeSwgcHJvdmlkZXIsIHJlc3VsdHM7XG5cdFxuXHQgICAgICBpZiAoX2NvbnN0YW50cy5TUEVDSUFMX0tFWVMuaW5jbHVkZXMoZXZlbnQua2V5Q29kZSkpIHtcblx0ICAgICAgICByZXR1cm4gJHJldHVybigpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBxdWVyeSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcblx0ICAgICAgcHJvdmlkZXIgPSB0aGlzLm9wdGlvbnMucHJvdmlkZXI7XG5cdCAgICAgIHJldHVybiBwcm92aWRlci5zZWFyY2goeyBxdWVyeTogcXVlcnkgfSkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcblx0XG5cdCAgICAgICAgcmVzdWx0cyA9ICRhd2FpdF8xO1xuXHQgICAgICAgIHRoaXMucmVzdWx0TGlzdC5yZW5kZXIocmVzdWx0cyk7XG5cdCAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcblx0ICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuXHQgIH0sXG5cdCAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KHF1ZXJ5KSB7XG5cdCAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuXHQgICAgICB2YXIgcHJvdmlkZXIsIHJlc3VsdHM7XG5cdCAgICAgIHByb3ZpZGVyID0gdGhpcy5vcHRpb25zLnByb3ZpZGVyO1xuXHQgICAgICByZXR1cm4gcHJvdmlkZXIuc2VhcmNoKHF1ZXJ5KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMikge1xuXHRcblx0ICAgICAgICByZXN1bHRzID0gJGF3YWl0XzI7XG5cdFxuXHQgICAgICAgIGlmIChyZXN1bHRzICYmIHJlc3VsdHMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgdGhpcy5zaG93UmVzdWx0KHJlc3VsdHNbMF0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gJHJldHVybigpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgfSxcblx0ICBzaG93UmVzdWx0OiBmdW5jdGlvbiBzaG93UmVzdWx0KHJlc3VsdCkge1xuXHQgICAgdmFyIG1hcmtlcnMgPSBPYmplY3Qua2V5cyh0aGlzLm1hcmtlcnMuX2xheWVycyk7XG5cdCAgICBpZiAobWFya2Vycy5sZW5ndGggPj0gdGhpcy5vcHRpb25zLm1heE1hcmtlcnMpIHtcblx0ICAgICAgdGhpcy5tYXJrZXJzLnJlbW92ZUxheWVyKG1hcmtlcnNbMF0pO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBtYXJrZXIgPSB0aGlzLmFkZE1hcmtlcihyZXN1bHQpO1xuXHQgICAgdGhpcy5jZW50ZXJNYXAocmVzdWx0KTtcblx0XG5cdCAgICB0aGlzLm1hcC5maXJlRXZlbnQoJ2dlb3NlYXJjaC9zaG93bG9jYXRpb24nLCB7XG5cdCAgICAgIGxvY2F0aW9uOiByZXN1bHQsXG5cdCAgICAgIG1hcmtlcjogbWFya2VyXG5cdCAgICB9KTtcblx0ICB9LFxuXHQgIGFkZE1hcmtlcjogZnVuY3Rpb24gYWRkTWFya2VyKHJlc3VsdCkge1xuXHQgICAgdmFyIF9vcHRpb25zMyA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICBvcHRpb25zID0gX29wdGlvbnMzLm1hcmtlcixcblx0ICAgICAgICBzaG93UG9wdXAgPSBfb3B0aW9uczMuc2hvd1BvcHVwO1xuXHRcblx0ICAgIHZhciBtYXJrZXIgPSBuZXcgTC5NYXJrZXIoW3Jlc3VsdC55LCByZXN1bHQueF0sIG9wdGlvbnMpO1xuXHQgICAgbWFya2VyLmJpbmRQb3B1cChyZXN1bHQubGFiZWwpO1xuXHRcblx0ICAgIHRoaXMubWFya2Vycy5hZGRMYXllcihtYXJrZXIpO1xuXHRcblx0ICAgIGlmIChzaG93UG9wdXApIHtcblx0ICAgICAgbWFya2VyLm9wZW5Qb3B1cCgpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBtYXJrZXI7XG5cdCAgfSxcblx0ICBjZW50ZXJNYXA6IGZ1bmN0aW9uIGNlbnRlck1hcChyZXN1bHQpIHtcblx0ICAgIHZhciBfb3B0aW9uczQgPSB0aGlzLm9wdGlvbnMsXG5cdCAgICAgICAgcmV0YWluWm9vbUxldmVsID0gX29wdGlvbnM0LnJldGFpblpvb21MZXZlbCxcblx0ICAgICAgICBhbmltYXRlWm9vbSA9IF9vcHRpb25zNC5hbmltYXRlWm9vbTtcblx0XG5cdCAgICB2YXIgcmVzdWx0Qm91bmRzID0gbmV3IEwuTGF0TG5nQm91bmRzKHJlc3VsdC5ib3VuZHMpO1xuXHQgICAgdmFyIGJvdW5kcyA9IHJlc3VsdEJvdW5kcy5pc1ZhbGlkKCkgPyByZXN1bHRCb3VuZHMgOiB0aGlzLm1hcmtlcnMuZ2V0Qm91bmRzKCk7XG5cdFxuXHQgICAgaWYgKCFyZXRhaW5ab29tTGV2ZWwgJiYgcmVzdWx0Qm91bmRzLmlzVmFsaWQoKSkge1xuXHQgICAgICB0aGlzLm1hcC5maXRCb3VuZHMoYm91bmRzLCB7IGFuaW1hdGU6IGFuaW1hdGVab29tIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5tYXAuc2V0Vmlldyhib3VuZHMuZ2V0Q2VudGVyKCksIHRoaXMuZ2V0Wm9vbSgpLCB7IGFuaW1hdGU6IGFuaW1hdGVab29tIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgZ2V0Wm9vbTogZnVuY3Rpb24gZ2V0Wm9vbSgpIHtcblx0ICAgIHZhciBfb3B0aW9uczUgPSB0aGlzLm9wdGlvbnMsXG5cdCAgICAgICAgcmV0YWluWm9vbUxldmVsID0gX29wdGlvbnM1LnJldGFpblpvb21MZXZlbCxcblx0ICAgICAgICB6b29tTGV2ZWwgPSBfb3B0aW9uczUuem9vbUxldmVsO1xuXHRcblx0ICAgIHJldHVybiByZXRhaW5ab29tTGV2ZWwgPyB0aGlzLm1hcC5nZXRab29tKCkgOiB6b29tTGV2ZWw7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gTGVhZmxldENvbnRyb2woKSB7XG5cdCAgaWYgKCFMIHx8ICFMLkNvbnRyb2wgfHwgIUwuQ29udHJvbC5leHRlbmQpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignTGVhZmxldCBtdXN0IGJlIGxvYWRlZCBiZWZvcmUgaW5zdGFudGlhdGluZyB0aGUgR2VvU2VhcmNoIGNvbnRyb2wnKTtcblx0ICB9XG5cdFxuXHQgIHZhciBMQ29udHJvbCA9IEwuQ29udHJvbC5leHRlbmQoQ29udHJvbCk7XG5cdFxuXHQgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBvcHRpb25zID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG5cdCAgICBvcHRpb25zW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoTENvbnRyb2wsIFtudWxsXS5jb25jYXQob3B0aW9ucykpKSgpO1xuXHR9XG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0Lypcblx0ICogJGFzeW5jYmluZCBoYXMgbXVsdGlwbGUgdXNlcywgZGVwZW5kaW5nIG9uIHRoZSBwYXJhbWV0ZXIgbGlzdC4gSXQgaXMgaW4gRnVuY3Rpb24ucHJvdG90eXBlLCBzbyAndGhpcycgaXMgYWx3YXlzIGEgZnVuY3Rpb25cblx0ICpcblx0ICogMSkgSWYgY2FsbGVkIHdpdGggYSBzaW5nbGUgYXJndW1lbnQgKHRoaXMpLCBpdCBpcyB1c2VkIHdoZW4gZGVmaW5pbmcgYW4gYXN5bmMgZnVuY3Rpb24gdG8gZW5zdXJlIHdoZW5cblx0ICogICAgICBpdCBpcyBpbnZva2VkLCB0aGUgY29ycmVjdCAndGhpcycgaXMgcHJlc2VudCwganVzdCBsaWtlIFwiYmluZFwiLiBGb3IgbGVnYWN5IHJlYXNvbnMsICd0aGlzJyBpcyBnaXZlblxuXHQgKiAgICAgIGEgbWVtZWJlciAndGhlbicgd2hpY2ggcmVmZXJzIHRvIGl0c2VsZi5cblx0ICogMikgSWYgY2FsbGVkIHdpdGggYSBzZWNvbmQgcGFyYW1ldGVyIChcImNhdGNoZXJcIikgYW5kIGNhdGNoZXIhPT10cnVlIGl0IGlzIGJlaW5nIHVzZWQgdG8gaW52b2tlIGFuIGFzeW5jXG5cdCAqICAgICAgZnVuY3Rpb24gd2hlcmUgdGhlIHNlY29uZCBwYXJhbWV0ZXIgaXMgdGhlIGVycm9yIGNhbGxiYWNrIChmb3Igc3luYyBleGNlcHRpb25zIGFuZCB0byBiZSBwYXNzZWQgdG9cblx0ICogICAgICBuZXN0ZWQgYXN5bmMgY2FsbHMpXG5cdCAqIDMpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09dHJ1ZSwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG5cdCAqICAgICAgaW4gYW4gJ1Byb21pc2UnIGFzIHdlbGwgYm91bmQgdG8gJ3RoaXMnLlxuXHQgKiAgICAgIEl0IGlzIHRoZSBzYW1lIGFzIGNhbGxpbmcgJ25ldyBQcm9taXNlKHRoaXMpJywgd2hlcmUgJ3RoaXMnIGlzIHRoZSBmdW5jdGlvbiBiZWluZyBib3VuZC93cmFwcGVkXG5cdCAqIDQpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09MCwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG5cdCAqICAgICAgaW4gYSAnTGF6eVRoZW5hYmxlJywgd2hpY2ggZXhlY3V0ZXMgbGF6aWx5IGFuZCBjYW4gcmVzb2x2ZSBzeW5jaHJvbm91c2x5LlxuXHQgKiAgICAgIEl0IGlzIHRoZSBzYW1lIGFzIGNhbGxpbmcgJ25ldyBMYXp5VGhlbmFibGUodGhpcyknIChpZiBzdWNoIGEgdHlwZSB3ZXJlIGV4cG9zZWQpLCB3aGVyZSAndGhpcycgaXNcblx0ICogICAgICB0aGUgZnVuY3Rpb24gYmVpbmcgYm91bmQvd3JhcHBlZFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NJbmNsdWRlcyhpbmNsdWRlcywgaW5wdXQpIHtcblx0ICAgIHZhciBzcmMgPSBpbnB1dC50b1N0cmluZygpO1xuXHQgICAgdmFyIHQgPSBcInJldHVybiBcIiArIHNyYztcblx0ICAgIHZhciBhcmdzID0gc3JjLm1hdGNoKC8uKlxcKChbXildKilcXCkvKVsxXTtcblx0ICAgIHZhciByZSA9IC9bJ1wiXSEhIShbXidcIl0qKVsnXCJdL2c7XG5cdCAgICB2YXIgbSA9IFtdO1xuXHQgICAgd2hpbGUgKDEpIHtcblx0ICAgICAgICB2YXIgbXggPSByZS5leGVjKHQpO1xuXHQgICAgICAgIGlmIChteCkgbS5wdXNoKG14KTtlbHNlIGJyZWFrO1xuXHQgICAgfVxuXHQgICAgbS5yZXZlcnNlKCkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHQgPSB0LnNsaWNlKDAsIGUuaW5kZXgpICsgaW5jbHVkZXNbZVsxXV0gKyB0LnN1YnN0cihlLmluZGV4ICsgZVswXS5sZW5ndGgpO1xuXHQgICAgfSk7XG5cdCAgICB0ID0gdC5yZXBsYWNlKC9cXC9cXCpbXipdKlxcKlxcLy9nLCAnICcpLnJlcGxhY2UoL1xccysvZywgJyAnKTtcblx0ICAgIHJldHVybiBuZXcgRnVuY3Rpb24oYXJncywgdCkoKTtcblx0fVxuXHRcblx0dmFyICRhc3luY2JpbmQgPSBwcm9jZXNzSW5jbHVkZXMoe1xuXHQgICAgem91c2FuOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpLnRvU3RyaW5nKCksXG5cdCAgICB0aGVuYWJsZTogX193ZWJwYWNrX3JlcXVpcmVfXygxMSkudG9TdHJpbmcoKVxuXHR9LCBmdW5jdGlvbiAkYXN5bmNiaW5kKHNlbGYsIGNhdGNoZXIpIHtcblx0ICAgIFwidXNlIHN0cmljdFwiO1xuXHRcblx0ICAgIGlmICghRnVuY3Rpb24ucHJvdG90eXBlLiRhc3luY2JpbmQpIHtcblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLCBcIiRhc3luY2JpbmRcIiwgeyB2YWx1ZTogJGFzeW5jYmluZCwgZW51bWVyYWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCEkYXN5bmNiaW5kLnRyYW1wb2xpbmUpIHtcblx0ICAgICAgICAkYXN5bmNiaW5kLnRyYW1wb2xpbmUgPSBmdW5jdGlvbiB0cmFtcG9saW5lKHQsIHgsIHMsIGUsIHUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGIocSkge1xuXHQgICAgICAgICAgICAgICAgd2hpbGUgKHEpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAocS50aGVuKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBxLnRoZW4oYiwgZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1ID8gdW5kZWZpbmVkIDogcTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEucG9wKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocS5sZW5ndGgpIHJldHVybiBxLnBvcCgpID8geC5jYWxsKHQpIDogcTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBzO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgcSA9IHEuY2FsbCh0KTtcblx0ICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlKHIpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHQgICAgaWYgKCEkYXN5bmNiaW5kLkxhenlUaGVuYWJsZSkge1xuXHQgICAgICAgICRhc3luY2JpbmQuTGF6eVRoZW5hYmxlID0gJyEhIXRoZW5hYmxlJygpO1xuXHQgICAgICAgICRhc3luY2JpbmQuRWFnZXJUaGVuYWJsZSA9ICRhc3luY2JpbmQuVGhlbmFibGUgPSAoJGFzeW5jYmluZC5FYWdlclRoZW5hYmxlRmFjdG9yeSA9ICchISF6b3VzYW4nKSgpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciByZXNvbHZlciA9IHRoaXM7XG5cdCAgICBzd2l0Y2ggKGNhdGNoZXIpIHtcblx0ICAgICAgICBjYXNlIHRydWU6XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgJGFzeW5jYmluZC5UaGVuYWJsZShib3VuZFRoZW4pO1xuXHQgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyAkYXN5bmNiaW5kLkxhenlUaGVuYWJsZShib3VuZFRoZW4pO1xuXHQgICAgICAgIGNhc2UgdW5kZWZpbmVkOlxuXHQgICAgICAgICAgICAvKiBGb3IgcnVudGltZSBjb21wYXRpYmlsaXR5IHdpdGggTm9kZW50IHYyLngsIHByb3ZpZGUgYSB0aGVuYWJsZSAqL1xuXHQgICAgICAgICAgICBib3VuZFRoZW4udGhlbiA9IGJvdW5kVGhlbjtcblx0ICAgICAgICAgICAgcmV0dXJuIGJvdW5kVGhlbjtcblx0ICAgICAgICBkZWZhdWx0OlxuXHQgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZXIuYXBwbHkoc2VsZiwgYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhdGNoZXIoZXgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gYm91bmRUaGVuKCkge1xuXHQgICAgICAgIHJldHVybiByZXNvbHZlci5hcHBseShzZWxmLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uICRhc3luY3NwYXduKHByb21pc2VQcm92aWRlciwgc2VsZikge1xuXHQgICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jc3Bhd24pIHtcblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLCBcIiRhc3luY3NwYXduXCIsIHsgdmFsdWU6ICRhc3luY3NwYXduLCBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTtcblx0ICAgIH1cblx0ICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBGdW5jdGlvbikpIHJldHVybjtcblx0XG5cdCAgICB2YXIgZ2VuRiA9IHRoaXM7XG5cdCAgICByZXR1cm4gbmV3IHByb21pc2VQcm92aWRlcihmdW5jdGlvbiBlbm91Z2gocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgdmFyIGdlbiA9IGdlbkYuY2FsbChzZWxmLCByZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICAgIGZ1bmN0aW9uIHN0ZXAoZm4sIGFyZykge1xuXHQgICAgICAgICAgICB2YXIgbmV4dDtcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIG5leHQgPSBmbi5jYWxsKGdlbiwgYXJnKTtcblx0ICAgICAgICAgICAgICAgIGlmIChuZXh0LmRvbmUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZSAhPT0gcmVzb2x2ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZSAmJiBuZXh0LnZhbHVlID09PSBuZXh0LnZhbHVlLnRoZW4pIHJldHVybiBuZXh0LnZhbHVlKHJlc29sdmUsIHJlamVjdCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUgJiYgcmVzb2x2ZShuZXh0LnZhbHVlKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZS50aGVuKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgbmV4dC52YWx1ZS50aGVuKGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLm5leHQsIHYpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLnRocm93LCBlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4ubmV4dCwgbmV4dC52YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgIHJlamVjdCAmJiByZWplY3QoZSk7XG5cdCAgICAgICAgICAgICAgICByZWplY3QgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN0ZXAoZ2VuLm5leHQpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdC8vIEluaXRpYWxpemUgYXN5bmMgYmluZGluZ3Ncblx0JGFzeW5jYmluZCgpO1xuXHQkYXN5bmNzcGF3bigpO1xuXHRcblx0Ly8gRXhwb3J0IGFzeW5jIGJpbmRpbmdzXG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgICAgJGFzeW5jYmluZDogJGFzeW5jYmluZCxcblx0ICAgICRhc3luY3NwYXduOiAkYXN5bmNzcGF3blxuXHR9O1xuXG4vKioqLyB9LFxuLyogNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MsIHNldEltbWVkaWF0ZSkgey8qIFRoaXMgY29kZSBpcyBiYXNlZCBvbjpcblx0em91c2FuIC0gQSBMaWdodG5pbmcgRmFzdCwgWWV0IFZlcnkgU21hbGwgUHJvbWlzZSBBKyBDb21wbGlhbnQgSW1wbGVtZW50YXRpb25cblx0aHR0cHM6Ly9naXRodWIuY29tL2JsdWVqYXZhL3pvdXNhblxuXHRBdXRob3I6IEdsZW5uIENyb3dub3ZlciA8Z2xlbm5AYmx1ZWphdmEuY29tPiAoaHR0cDovL3d3dy5ibHVlamF2YS5jb20pXG5cdFZlcnNpb24gMi4zLjNcblx0TGljZW5zZTogTUlUICovXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGljaykge1xuXHQgICAgdGljayA9IHRpY2sgfHwgKHR5cGVvZiBwcm9jZXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YocHJvY2VzcykpID09PSBcIm9iamVjdFwiICYmIHByb2Nlc3MubmV4dFRpY2sgfHwgdHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gXCJmdW5jdGlvblwiICYmIHNldEltbWVkaWF0ZSB8fCBmdW5jdGlvbiAoZikge1xuXHQgICAgICAgIHNldFRpbWVvdXQoZiwgMCk7XG5cdCAgICB9O1xuXHQgICAgdmFyIHNvb24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGZxID0gW10sXG5cdCAgICAgICAgICAgIGZxU3RhcnQgPSAwLFxuXHQgICAgICAgICAgICBidWZmZXJTaXplID0gMTAyNDtcblx0ICAgICAgICBmdW5jdGlvbiBjYWxsUXVldWUoKSB7XG5cdCAgICAgICAgICAgIHdoaWxlIChmcS5sZW5ndGggLSBmcVN0YXJ0KSB7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIGZxW2ZxU3RhcnRdKCk7XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkgey8qIGNvbnNvbGUuZXJyb3IoZXgpICovfVxuXHQgICAgICAgICAgICAgICAgZnFbZnFTdGFydCsrXSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICAgICAgICAgIGlmIChmcVN0YXJ0ID09PSBidWZmZXJTaXplKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZnEuc3BsaWNlKDAsIGJ1ZmZlclNpemUpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZxU3RhcnQgPSAwO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZuKSB7XG5cdCAgICAgICAgICAgIGZxLnB1c2goZm4pO1xuXHQgICAgICAgICAgICBpZiAoZnEubGVuZ3RoIC0gZnFTdGFydCA9PT0gMSkgdGljayhjYWxsUXVldWUpO1xuXHQgICAgICAgIH07XG5cdCAgICB9KCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gWm91c2FuKGZ1bmMpIHtcblx0ICAgICAgICBpZiAoZnVuYykge1xuXHQgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXHQgICAgICAgICAgICBmdW5jKGZ1bmN0aW9uIChhcmcpIHtcblx0ICAgICAgICAgICAgICAgIG1lLnJlc29sdmUoYXJnKTtcblx0ICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgICAgICAgICAgbWUucmVqZWN0KGFyZyk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBab3VzYW4ucHJvdG90eXBlID0ge1xuXHQgICAgICAgIHJlc29sdmU6IGZ1bmN0aW9uIHJlc29sdmUodmFsdWUpIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXHQgICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMpIHJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKFwiQXR0ZW1wdCB0byByZXNvbHZlIHByb21pc2Ugd2l0aCBzZWxmXCIpKTtcblx0ICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcblx0ICAgICAgICAgICAgaWYgKHZhbHVlICYmICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiB8fCAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YodmFsdWUpKSA9PT0gXCJvYmplY3RcIikpIHtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0ID0gMDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdGhlbiA9IHZhbHVlLnRoZW47XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBmdW5jdGlvbiAocmEpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QrKykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJlc29sdmUocmEpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocnIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QrKykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJlamVjdChycik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QpIHRoaXMucmVqZWN0KGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRlVMRklMTEVEO1xuXHQgICAgICAgICAgICB0aGlzLnYgPSB2YWx1ZTtcblx0ICAgICAgICAgICAgaWYgKG1lLmMpIHNvb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIGwgPSBtZS5jLmxlbmd0aDsgbiA8IGw7IG4rKykge1xuXHQgICAgICAgICAgICAgICAgICAgIFNUQVRFX0ZVTEZJTExFRChtZS5jW25dLCB2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSB1bmRlZmluZWQpIHJldHVybjtcblx0ICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1JFSkVDVEVEO1xuXHQgICAgICAgICAgICB0aGlzLnYgPSByZWFzb247XG5cdCAgICAgICAgICAgIHZhciBjbGllbnRzID0gdGhpcy5jO1xuXHQgICAgICAgICAgICBpZiAoY2xpZW50cykgc29vbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgbCA9IGNsaWVudHMubGVuZ3RoOyBuIDwgbDsgbisrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgU1RBVEVfUkVKRUNURUQoY2xpZW50c1tuXSwgcmVhc29uKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICB0aGVuOiBmdW5jdGlvbiB0aGVuKG9uRiwgb25SKSB7XG5cdCAgICAgICAgICAgIHZhciBwID0gbmV3IFpvdXNhbigpO1xuXHQgICAgICAgICAgICB2YXIgY2xpZW50ID0ge1xuXHQgICAgICAgICAgICAgICAgeTogb25GLFxuXHQgICAgICAgICAgICAgICAgbjogb25SLFxuXHQgICAgICAgICAgICAgICAgcDogcFxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAodGhpcy5jKSB0aGlzLmMucHVzaChjbGllbnQpO2Vsc2UgdGhpcy5jID0gW2NsaWVudF07XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgcyA9IHRoaXMuc3RhdGUsXG5cdCAgICAgICAgICAgICAgICAgICAgYSA9IHRoaXMudjtcblx0ICAgICAgICAgICAgICAgIHNvb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHMoY2xpZW50LCBhKTtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBwO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgZnVuY3Rpb24gU1RBVEVfRlVMRklMTEVEKGMsIGFyZykge1xuXHQgICAgICAgIGlmICh0eXBlb2YgYy55ID09PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIHZhciB5cmV0ID0gYy55LmNhbGwodW5kZWZpbmVkLCBhcmcpO1xuXHQgICAgICAgICAgICAgICAgYy5wLnJlc29sdmUoeXJldCk7XG5cdCAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICAgICAgYy5wLnJlamVjdChlcnIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIGMucC5yZXNvbHZlKGFyZyk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gU1RBVEVfUkVKRUNURUQoYywgcmVhc29uKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjLm4gPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgdmFyIHlyZXQgPSBjLm4uY2FsbCh1bmRlZmluZWQsIHJlYXNvbik7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVzb2x2ZSh5cmV0KTtcblx0ICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVqZWN0KGVycik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgYy5wLnJlamVjdChyZWFzb24pO1xuXHQgICAgfVxuXHRcblx0ICAgIFpvdXNhbi5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgICAgIGlmICh2YWwgJiYgdmFsIGluc3RhbmNlb2YgWm91c2FuKSByZXR1cm4gdmFsO1xuXHQgICAgICAgIHZhciB6ID0gbmV3IFpvdXNhbigpO1xuXHQgICAgICAgIHoucmVzb2x2ZSh2YWwpO1xuXHQgICAgICAgIHJldHVybiB6O1xuXHQgICAgfTtcblx0ICAgIFpvdXNhbi5yZWplY3QgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgaWYgKGVyciAmJiBlcnIgaW5zdGFuY2VvZiBab3VzYW4pIHJldHVybiBlcnI7XG5cdCAgICAgICAgdmFyIHogPSBuZXcgWm91c2FuKCk7XG5cdCAgICAgICAgei5yZWplY3QoZXJyKTtcblx0ICAgICAgICByZXR1cm4gejtcblx0ICAgIH07XG5cdFxuXHQgICAgWm91c2FuLnZlcnNpb24gPSBcIjIuMy4zLW5vZGVudFwiO1xuXHQgICAgcmV0dXJuIFpvdXNhbjtcblx0fTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oOCksIF9fd2VicGFja19yZXF1aXJlX18oOSkuc2V0SW1tZWRpYXRlKSlcblxuLyoqKi8gfSxcbi8qIDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXHR2YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cdFxuXHQvLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcblx0Ly8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG5cdC8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcblx0Ly8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblx0XG5cdHZhciBjYWNoZWRTZXRUaW1lb3V0O1xuXHR2YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXHRcblx0ZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xuXHR9XG5cdGZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQoKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xuXHR9XG5cdChmdW5jdGlvbiAoKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgfVxuXHR9KSgpO1xuXHRmdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuXHQgICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdGZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcblx0ICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuXHQgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuXHQgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH1cblx0ICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuXHQgICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHR2YXIgcXVldWUgPSBbXTtcblx0dmFyIGRyYWluaW5nID0gZmFsc2U7XG5cdHZhciBjdXJyZW50UXVldWU7XG5cdHZhciBxdWV1ZUluZGV4ID0gLTE7XG5cdFxuXHRmdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG5cdCAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICB9XG5cdCAgICBpZiAocXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgZHJhaW5RdWV1ZSgpO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuXHQgICAgaWYgKGRyYWluaW5nKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG5cdCAgICBkcmFpbmluZyA9IHRydWU7XG5cdFxuXHQgICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIHdoaWxlIChsZW4pIHtcblx0ICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcblx0ICAgICAgICBxdWV1ZSA9IFtdO1xuXHQgICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcblx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB9XG5cdCAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0fVxuXHRcblx0cHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcblx0ICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcblx0ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG5cdCAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuXHQgICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG5cdCAgICB9XG5cdH07XG5cdFxuXHQvLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5cdGZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuXHQgICAgdGhpcy5mdW4gPSBmdW47XG5cdCAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG5cdH1cblx0SXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG5cdH07XG5cdHByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5cdHByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5cdHByb2Nlc3MuZW52ID0ge307XG5cdHByb2Nlc3MuYXJndiA9IFtdO1xuXHRwcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcblx0cHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXHRcblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cdFxuXHRwcm9jZXNzLm9uID0gbm9vcDtcblx0cHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5cdHByb2Nlc3Mub25jZSA9IG5vb3A7XG5cdHByb2Nlc3Mub2ZmID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcblx0cHJvY2Vzcy5lbWl0ID0gbm9vcDtcblx0XG5cdHByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdFxuXHRwcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiAnLyc7XG5cdH07XG5cdHByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRwcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIDA7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblx0XG5cdC8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cdFxuXHRleHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xuXHR9O1xuXHRleHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xuXHR9O1xuXHRleHBvcnRzLmNsZWFyVGltZW91dCA9IGV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uICh0aW1lb3V0KSB7XG5cdCAgaWYgKHRpbWVvdXQpIHtcblx0ICAgIHRpbWVvdXQuY2xvc2UoKTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG5cdCAgdGhpcy5faWQgPSBpZDtcblx0ICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcblx0fVxuXHRUaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uICgpIHt9O1xuXHRUaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG5cdH07XG5cdFxuXHQvLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cblx0ZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbiAoaXRlbSwgbXNlY3MpIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdCAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcblx0fTtcblx0XG5cdGV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbiAoaXRlbSkge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0ICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHRcblx0ICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcblx0ICBpZiAobXNlY3MgPj0gMCkge1xuXHQgICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuXHQgICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KSBpdGVtLl9vblRpbWVvdXQoKTtcblx0ICAgIH0sIG1zZWNzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyBzZXRpbW1lZGlhdGUgYXR0YWNoZXMgaXRzZWxmIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRleHBvcnRzLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcblx0ZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xuXG4vKioqLyB9LFxuLyogMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwsIHByb2Nlc3MpIHtcInVzZSBzdHJpY3RcIjtcblx0XG5cdChmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcblx0ICAgIFwidXNlIHN0cmljdFwiO1xuXHRcblx0ICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG5cdCAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuXHQgICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuXHQgICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcblx0ICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblx0XG5cdCAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcblx0ICAgICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcblx0ICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcblx0ICAgICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcblx0ICAgICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG5cdCAgICAgICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG5cdCAgICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG5cdCAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcblx0ICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcblx0ICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgY2FzZSAxOlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgY2FzZSAyOlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgY2FzZSAzOlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuXHQgICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcblx0ICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuXHQgICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcblx0ICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcblx0ICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cblx0ICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG5cdCAgICAgICAgICAgIGlmICh0YXNrKSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG5cdCAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcblx0ICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG5cdCAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG5cdCAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcblx0ICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuXHQgICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcblx0ICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSBmYWxzZTtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcblx0ICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcblx0ICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuXHQgICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuXHQgICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblx0XG5cdCAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSBcInNldEltbWVkaWF0ZSRcIiArIE1hdGgucmFuZG9tKCkgKyBcIiRcIjtcblx0ICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24gb25HbG9iYWxNZXNzYWdlKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJiB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJiBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcblx0ICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuXHQgICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuXHQgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcblx0ICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cblx0ICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuXHQgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG5cdCAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcblx0ICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS5cblx0ICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcblx0ICAgIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXHRcblx0ICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cblx0ICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcblx0ICAgICAgICAvLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45XG5cdCAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuXHQgICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcblx0ICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcblx0ICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuXHQgICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9IGVsc2UgaWYgKGRvYyAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpKSB7XG5cdCAgICAgICAgLy8gRm9yIElFIDbigJM4XG5cdCAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcblx0ICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuXHQgICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcblx0fSkodHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdW5kZWZpbmVkIDogZ2xvYmFsIDogc2VsZik7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpKSlcblxuLyoqKi8gfSxcbi8qIDExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gaXNUaGVuYWJsZShvYmopIHtcblx0ICAgICAgICByZXR1cm4gb2JqICYmIG9iaiBpbnN0YW5jZW9mIE9iamVjdCAmJiB0eXBlb2Ygb2JqLnRoZW4gPT09IFwiZnVuY3Rpb25cIjtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiByZXNvbHV0aW9uKHAsIHIsIGhvdykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIC8qIDIuMi43LjEgKi9cblx0ICAgICAgICAgICAgdmFyIHggPSBob3cgPyBob3cocikgOiByO1xuXHRcblx0ICAgICAgICAgICAgaWYgKHAgPT09IHgpIC8qIDIuMy4xICovXG5cdCAgICAgICAgICAgICAgICByZXR1cm4gcC5yZWplY3QobmV3IFR5cGVFcnJvcihcIlByb21pc2UgcmVzb2x1dGlvbiBsb29wXCIpKTtcblx0XG5cdCAgICAgICAgICAgIGlmIChpc1RoZW5hYmxlKHgpKSB7XG5cdCAgICAgICAgICAgICAgICAvKiAyLjMuMyAqL1xuXHQgICAgICAgICAgICAgICAgeC50aGVuKGZ1bmN0aW9uICh5KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbihwLCB5KTtcblx0ICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcC5yZWplY3QoZSk7XG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHAucmVzb2x2ZSh4KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cdCAgICAgICAgICAgIC8qIDIuMi43LjIgKi9cblx0ICAgICAgICAgICAgcC5yZWplY3QoZXgpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBDaGFpbmVkKCkge307XG5cdCAgICBDaGFpbmVkLnByb3RvdHlwZSA9IHtcblx0ICAgICAgICByZXNvbHZlOiBfdW5jaGFpbmVkLFxuXHQgICAgICAgIHJlamVjdDogX3VuY2hhaW5lZCxcblx0ICAgICAgICB0aGVuOiB0aGVuQ2hhaW5cblx0ICAgIH07XG5cdCAgICBmdW5jdGlvbiBfdW5jaGFpbmVkKHYpIHt9XG5cdCAgICBmdW5jdGlvbiB0aGVuQ2hhaW4ocmVzLCByZWopIHtcblx0ICAgICAgICB0aGlzLnJlc29sdmUgPSByZXM7XG5cdCAgICAgICAgdGhpcy5yZWplY3QgPSByZWo7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gdGhlbihyZXMsIHJlaikge1xuXHQgICAgICAgIHZhciBjaGFpbiA9IG5ldyBDaGFpbmVkKCk7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZXIoZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gaXNUaGVuYWJsZSh2YWx1ZSkgPyB2YWx1ZS50aGVuKHJlcywgcmVqKSA6IHJlc29sdXRpb24oY2hhaW4sIHZhbHVlLCByZXMpO1xuXHQgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXgpIHtcblx0ICAgICAgICAgICAgICAgIHJlc29sdXRpb24oY2hhaW4sIGV4LCByZWopO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9IGNhdGNoIChleCkge1xuXHQgICAgICAgICAgICByZXNvbHV0aW9uKGNoYWluLCBleCwgcmVqKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIGNoYWluO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIFRoZW5hYmxlKHJlc29sdmVyKSB7XG5cdCAgICAgICAgdGhpcy5fcmVzb2x2ZXIgPSByZXNvbHZlcjtcblx0ICAgICAgICB0aGlzLnRoZW4gPSB0aGVuO1xuXHQgICAgfTtcblx0XG5cdCAgICBUaGVuYWJsZS5yZXNvbHZlID0gZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICByZXR1cm4gVGhlbmFibGUuaXNUaGVuYWJsZSh2KSA/IHYgOiB7IHRoZW46IGZ1bmN0aW9uIHRoZW4ocmVzb2x2ZSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodik7XG5cdCAgICAgICAgICAgIH0gfTtcblx0ICAgIH07XG5cdFxuXHQgICAgVGhlbmFibGUuaXNUaGVuYWJsZSA9IGlzVGhlbmFibGU7XG5cdFxuXHQgICAgcmV0dXJuIFRoZW5hYmxlO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHQvKipcblx0ICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG5cdCAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdCAqL1xuXHRcblx0LyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cblx0dmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblx0XG5cdC8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xuXHR2YXIgTkFOID0gMCAvIDA7XG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG5cdHZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXHRcblx0LyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cblx0dmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXHRcblx0LyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cblx0dmFyIGZyZWVHbG9iYWwgPSAodHlwZW9mIGdsb2JhbCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoZ2xvYmFsKSkgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cdFxuXHQvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xuXHR2YXIgZnJlZVNlbGYgPSAodHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHNlbGYpKSA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblx0XG5cdC8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xuXHR2YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuXHQgICAgbmF0aXZlTWluID0gTWF0aC5taW47XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgdGltZXN0YW1wIG9mIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlXG5cdCAqIHRoZSBVbml4IGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAyLjQuMFxuXHQgKiBAY2F0ZWdvcnkgRGF0ZVxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lc3RhbXAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcblx0ICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuXHQgKiB9LCBfLm5vdygpKTtcblx0ICogLy8gPT4gTG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgaW52b2NhdGlvbi5cblx0ICovXG5cdHZhciBub3cgPSBmdW5jdGlvbiBub3coKSB7XG5cdCAgcmV0dXJuIHJvb3QuRGF0ZS5ub3coKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcblx0ICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG5cdCAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcblx0ICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG5cdCAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZVxuXHQgKiBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkXG5cdCAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnRcblx0ICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2Bcblx0ICogaW52b2NhdGlvbi5cblx0ICpcblx0ICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpc1xuXHQgKiBpbnZva2VkIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuXHQgKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG5cdCAqXG5cdCAqIElmIGB3YWl0YCBpcyBgMGAgYW5kIGBsZWFkaW5nYCBpcyBgZmFsc2VgLCBgZnVuY2AgaW52b2NhdGlvbiBpcyBkZWZlcnJlZFxuXHQgKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG5cdCAqXG5cdCAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKVxuXHQgKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV1cblx0ICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdXG5cdCAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC5cblx0ICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuXHQgKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LlxuXHQgKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuXHQgKlxuXHQgKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy5cblx0ICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuXHQgKiAgICdsZWFkaW5nJzogdHJ1ZSxcblx0ICogICAndHJhaWxpbmcnOiBmYWxzZVxuXHQgKiB9KSk7XG5cdCAqXG5cdCAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuXG5cdCAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuXHQgKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG5cdCAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTtcblx0ICpcblx0ICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyBkZWJvdW5jZWQgaW52b2NhdGlvbi5cblx0ICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7XG5cdCAqL1xuXHRmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG5cdCAgdmFyIGxhc3RBcmdzLFxuXHQgICAgICBsYXN0VGhpcyxcblx0ICAgICAgbWF4V2FpdCxcblx0ICAgICAgcmVzdWx0LFxuXHQgICAgICB0aW1lcklkLFxuXHQgICAgICBsYXN0Q2FsbFRpbWUsXG5cdCAgICAgIGxhc3RJbnZva2VUaW1lID0gMCxcblx0ICAgICAgbGVhZGluZyA9IGZhbHNlLFxuXHQgICAgICBtYXhpbmcgPSBmYWxzZSxcblx0ICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXHRcblx0ICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuXHQgIH1cblx0ICB3YWl0ID0gdG9OdW1iZXIod2FpdCkgfHwgMDtcblx0ICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcblx0ICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcblx0ICAgIG1heGluZyA9ICdtYXhXYWl0JyBpbiBvcHRpb25zO1xuXHQgICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcblx0ICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcblx0ICAgIHZhciBhcmdzID0gbGFzdEFyZ3MsXG5cdCAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzO1xuXHRcblx0ICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG5cdCAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG5cdCAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGxlYWRpbmdFZGdlKHRpbWUpIHtcblx0ICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG5cdCAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG5cdCAgICAvLyBTdGFydCB0aGUgdGltZXIgZm9yIHRoZSB0cmFpbGluZyBlZGdlLlxuXHQgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuXHQgICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7XG5cdCAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuXHQgICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG5cdCAgICAgICAgcmVzdWx0ID0gd2FpdCAtIHRpbWVTaW5jZUxhc3RDYWxsO1xuXHRcblx0ICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuXHQgICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcblx0ICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lO1xuXHRcblx0ICAgIC8vIEVpdGhlciB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCBhY3Rpdml0eSBoYXMgc3RvcHBlZCBhbmQgd2UncmUgYXQgdGhlXG5cdCAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuXHQgICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuXHQgICAgcmV0dXJuIGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8IHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQgfHwgdGltZVNpbmNlTGFzdENhbGwgPCAwIHx8IG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB0aW1lckV4cGlyZWQoKSB7XG5cdCAgICB2YXIgdGltZSA9IG5vdygpO1xuXHQgICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuXHQgICAgICByZXR1cm4gdHJhaWxpbmdFZGdlKHRpbWUpO1xuXHQgICAgfVxuXHQgICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG5cdCAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHJlbWFpbmluZ1dhaXQodGltZSkpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdHJhaWxpbmdFZGdlKHRpbWUpIHtcblx0ICAgIHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cdFxuXHQgICAgLy8gT25seSBpbnZva2UgaWYgd2UgaGF2ZSBgbGFzdEFyZ3NgIHdoaWNoIG1lYW5zIGBmdW5jYCBoYXMgYmVlblxuXHQgICAgLy8gZGVib3VuY2VkIGF0IGxlYXN0IG9uY2UuXG5cdCAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcblx0ICAgICAgcmV0dXJuIGludm9rZUZ1bmModGltZSk7XG5cdCAgICB9XG5cdCAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGNhbmNlbCgpIHtcblx0ICAgIGlmICh0aW1lcklkICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuXHQgICAgfVxuXHQgICAgbGFzdEludm9rZVRpbWUgPSAwO1xuXHQgICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBmbHVzaCgpIHtcblx0ICAgIHJldHVybiB0aW1lcklkID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuXHQgICAgdmFyIHRpbWUgPSBub3coKSxcblx0ICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXHRcblx0ICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuXHQgICAgbGFzdFRoaXMgPSB0aGlzO1xuXHQgICAgbGFzdENhbGxUaW1lID0gdGltZTtcblx0XG5cdCAgICBpZiAoaXNJbnZva2luZykge1xuXHQgICAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKG1heGluZykge1xuXHQgICAgICAgIC8vIEhhbmRsZSBpbnZvY2F0aW9ucyBpbiBhIHRpZ2h0IGxvb3AuXG5cdCAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0ICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuXHQgIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuXHQgIHJldHVybiBkZWJvdW5jZWQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcblx0ICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuXHQgKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc09iamVjdCh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoXy5ub29wKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KG51bGwpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcblx0ICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodmFsdWUpO1xuXHQgIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcblx0ICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc09iamVjdExpa2Uoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICpcblx0ICogXy5pc09iamVjdExpa2UobnVsbCk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcblx0ICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih2YWx1ZSkpID09ICdvYmplY3QnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc1N5bWJvbCgnYWJjJyk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuXHQgIHJldHVybiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih2YWx1ZSkpID09ICdzeW1ib2wnIHx8IGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKDMuMik7XG5cdCAqIC8vID0+IDMuMlxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuXHQgKiAvLyA9PiA1ZS0zMjRcblx0ICpcblx0ICogXy50b051bWJlcihJbmZpbml0eSk7XG5cdCAqIC8vID0+IEluZmluaXR5XG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoJzMuMicpO1xuXHQgKiAvLyA9PiAzLjJcblx0ICovXG5cdGZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gTkFOO1xuXHQgIH1cblx0ICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG5cdCAgICB2YXIgb3RoZXIgPSB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PSAnZnVuY3Rpb24nID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG5cdCAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IG90aGVyICsgJycgOiBvdGhlcjtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG5cdCAgfVxuXHQgIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcblx0ICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuXHQgIHJldHVybiBpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpIDogcmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBkZWJvdW5jZTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfZG9tVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdHZhciBfY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgU2VhcmNoRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBTZWFyY2hFbGVtZW50KCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgX3JlZiRoYW5kbGVTdWJtaXQgPSBfcmVmLmhhbmRsZVN1Ym1pdCxcblx0ICAgICAgICBoYW5kbGVTdWJtaXQgPSBfcmVmJGhhbmRsZVN1Ym1pdCA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZVN1Ym1pdCxcblx0ICAgICAgICBfcmVmJHNlYXJjaExhYmVsID0gX3JlZi5zZWFyY2hMYWJlbCxcblx0ICAgICAgICBzZWFyY2hMYWJlbCA9IF9yZWYkc2VhcmNoTGFiZWwgPT09IHVuZGVmaW5lZCA/ICdzZWFyY2gnIDogX3JlZiRzZWFyY2hMYWJlbCxcblx0ICAgICAgICBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG5cdCAgICAgICAgY2xhc3NOYW1lcyA9IF9yZWYkY2xhc3NOYW1lcyA9PT0gdW5kZWZpbmVkID8ge30gOiBfcmVmJGNsYXNzTmFtZXM7XG5cdFxuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNlYXJjaEVsZW1lbnQpO1xuXHRcblx0ICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBbJ2dlb3NlYXJjaCcsIGNsYXNzTmFtZXMuY29udGFpbmVyXS5qb2luKCcgJykpO1xuXHQgICAgdmFyIGZvcm0gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdmb3JtJywgWycnLCBjbGFzc05hbWVzLmZvcm1dLmpvaW4oJyAnKSwgY29udGFpbmVyKTtcblx0ICAgIHZhciBpbnB1dCA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2lucHV0JywgWydnbGFzcycsIGNsYXNzTmFtZXMuaW5wdXRdLmpvaW4oJyAnKSwgZm9ybSk7XG5cdFxuXHQgICAgaW5wdXQudHlwZSA9ICd0ZXh0Jztcblx0ICAgIGlucHV0LnBsYWNlaG9sZGVyID0gc2VhcmNoTGFiZWw7XG5cdFxuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbklucHV0KGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbktleVVwKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbktleVByZXNzKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbkZvY3VzKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uQmx1cihlKTtcblx0ICAgIH0sIGZhbHNlKTtcblx0XG5cdCAgICB0aGlzLmVsZW1lbnRzID0geyBjb250YWluZXI6IGNvbnRhaW5lciwgZm9ybTogZm9ybSwgaW5wdXQ6IGlucHV0IH07XG5cdCAgICB0aGlzLmhhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhTZWFyY2hFbGVtZW50LCBbe1xuXHQgICAga2V5OiAnb25Gb2N1cycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25Gb2N1cygpIHtcblx0ICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKHRoaXMuZWxlbWVudHMuZm9ybSwgJ2FjdGl2ZScpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uQmx1cicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25CbHVyKCkge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkodGhpcy5lbGVtZW50cy5mb3JtLCAnYWN0aXZlJyk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb25TdWJtaXQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uU3VibWl0KGV2ZW50KSB7XG5cdCAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgICAgdmFyIF9lbGVtZW50cywgaW5wdXQsIGNvbnRhaW5lcjtcblx0XG5cdCAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XG5cdCAgICAgICAgX2VsZW1lbnRzID0gdGhpcy5lbGVtZW50cywgaW5wdXQgPSBfZWxlbWVudHMuaW5wdXQsIGNvbnRhaW5lciA9IF9lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG5cdFxuXHQgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZVN1Ym1pdCh7IHF1ZXJ5OiBpbnB1dC52YWx1ZSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHQgICAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcblx0ICAgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG5cdCAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb25JbnB1dCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25JbnB1dCgpIHtcblx0ICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnZXJyb3InKTtcblx0ICAgICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvbktleVVwJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleVVwKGV2ZW50KSB7XG5cdCAgICAgIHZhciBfZWxlbWVudHMyID0gdGhpcy5lbGVtZW50cyxcblx0ICAgICAgICAgIGNvbnRhaW5lciA9IF9lbGVtZW50czIuY29udGFpbmVyLFxuXHQgICAgICAgICAgaW5wdXQgPSBfZWxlbWVudHMyLmlucHV0O1xuXHRcblx0ICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IF9jb25zdGFudHMuRVNDQVBFX0tFWSkge1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHRcblx0ICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuXHRcblx0ICAgICAgICBkb2N1bWVudC5ib2R5LmZvY3VzKCk7XG5cdCAgICAgICAgZG9jdW1lbnQuYm9keS5ibHVyKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvbktleVByZXNzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleVByZXNzKGV2ZW50KSB7XG5cdCAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBfY29uc3RhbnRzLkVOVEVSX0tFWSkge1xuXHQgICAgICAgIHRoaXMub25TdWJtaXQoZXZlbnQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2V0UXVlcnknLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFF1ZXJ5KHF1ZXJ5KSB7XG5cdCAgICAgIHZhciBpbnB1dCA9IHRoaXMuZWxlbWVudHMuaW5wdXQ7XG5cdFxuXHQgICAgICBpbnB1dC52YWx1ZSA9IHF1ZXJ5O1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFNlYXJjaEVsZW1lbnQ7XG5cdH0oKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFNlYXJjaEVsZW1lbnQ7XG5cbi8qKiovIH0sXG4vKiAxNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnQgKi9cblx0dmFyIGNyZWF0ZUVsZW1lbnQgPSBleHBvcnRzLmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KGVsZW1lbnQpIHtcblx0ICB2YXIgY2xhc3NOYW1lcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG5cdCAgdmFyIHBhcmVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbnVsbDtcblx0XG5cdCAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50KTtcblx0ICBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWVzO1xuXHRcblx0ICBpZiAocGFyZW50KSB7XG5cdCAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGVsO1xuXHR9O1xuXHRcblx0dmFyIGNyZWF0ZVNjcmlwdEVsZW1lbnQgPSBleHBvcnRzLmNyZWF0ZVNjcmlwdEVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVTY3JpcHRFbGVtZW50KHVybCwgY2IpIHtcblx0ICB2YXIgc2NyaXB0ID0gY3JlYXRlRWxlbWVudCgnc2NyaXB0JywgbnVsbCwgZG9jdW1lbnQuYm9keSk7XG5cdCAgc2NyaXB0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2phdmFzY3JpcHQnKTtcblx0XG5cdCAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG5cdCAgICB3aW5kb3dbY2JdID0gZnVuY3Rpb24gKGpzb24pIHtcblx0ICAgICAgc2NyaXB0LnJlbW92ZSgpO1xuXHQgICAgICBkZWxldGUgd2luZG93W2NiXTtcblx0ICAgICAgcmVzb2x2ZShqc29uKTtcblx0ICAgIH07XG5cdFxuXHQgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3JjJywgdXJsKTtcblx0ICB9KTtcblx0fTtcblx0XG5cdHZhciBhZGRDbGFzc05hbWUgPSBleHBvcnRzLmFkZENsYXNzTmFtZSA9IGZ1bmN0aW9uIGFkZENsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWUpIHtcblx0ICBpZiAoZWxlbWVudCAmJiAhZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuXHQgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHJlbW92ZUNsYXNzTmFtZSA9IGV4cG9ydHMucmVtb3ZlQ2xhc3NOYW1lID0gZnVuY3Rpb24gcmVtb3ZlQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuXHQgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcblx0ICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSxcbi8qIDE1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHR2YXIgRU5URVJfS0VZID0gZXhwb3J0cy5FTlRFUl9LRVkgPSAxMztcblx0dmFyIEVTQ0FQRV9LRVkgPSBleHBvcnRzLkVTQ0FQRV9LRVkgPSAyNztcblx0dmFyIEFSUk9XX0RPV05fS0VZID0gZXhwb3J0cy5BUlJPV19ET1dOX0tFWSA9IDQwO1xuXHR2YXIgQVJST1dfVVBfS0VZID0gZXhwb3J0cy5BUlJPV19VUF9LRVkgPSAzODtcblx0dmFyIEFSUk9XX0xFRlRfS0VZID0gZXhwb3J0cy5BUlJPV19MRUZUX0tFWSA9IDM3O1xuXHR2YXIgQVJST1dfUklHSFRfS0VZID0gZXhwb3J0cy5BUlJPV19SSUdIVF9LRVkgPSAzOTtcblx0XG5cdHZhciBTUEVDSUFMX0tFWVMgPSBleHBvcnRzLlNQRUNJQUxfS0VZUyA9IFtFTlRFUl9LRVksIEVTQ0FQRV9LRVksIEFSUk9XX0RPV05fS0VZLCBBUlJPV19VUF9LRVksIEFSUk9XX0xFRlRfS0VZLCBBUlJPV19SSUdIVF9LRVldO1xuXG4vKioqLyB9LFxuLyogMTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9kb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGN4ID0gZnVuY3Rpb24gY3goKSB7XG5cdCAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGNsYXNzbmFtZXMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgIGNsYXNzbmFtZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gY2xhc3NuYW1lcy5qb2luKCcgJykudHJpbSgpO1xuXHR9O1xuXHRcblx0dmFyIFJlc3VsdExpc3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gUmVzdWx0TGlzdCgpIHtcblx0ICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICBfcmVmJGhhbmRsZUNsaWNrID0gX3JlZi5oYW5kbGVDbGljayxcblx0ICAgICAgICBoYW5kbGVDbGljayA9IF9yZWYkaGFuZGxlQ2xpY2sgPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uICgpIHt9IDogX3JlZiRoYW5kbGVDbGljayxcblx0ICAgICAgICBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG5cdCAgICAgICAgY2xhc3NOYW1lcyA9IF9yZWYkY2xhc3NOYW1lcyA9PT0gdW5kZWZpbmVkID8ge30gOiBfcmVmJGNsYXNzTmFtZXM7XG5cdFxuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlc3VsdExpc3QpO1xuXHRcblx0ICAgIF9pbml0aWFsaXNlUHJvcHMuY2FsbCh0aGlzKTtcblx0XG5cdCAgICB0aGlzLnByb3BzID0geyBoYW5kbGVDbGljazogaGFuZGxlQ2xpY2ssIGNsYXNzTmFtZXM6IGNsYXNzTmFtZXMgfTtcblx0ICAgIHRoaXMuc2VsZWN0ZWQgPSAtMTtcblx0XG5cdCAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgY3goJ3Jlc3VsdHMnLCBjbGFzc05hbWVzLmNvbnRhaW5lcikpO1xuXHQgICAgdmFyIHJlc3VsdEl0ZW0gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBjeChjbGFzc05hbWVzLml0ZW0pKTtcblx0XG5cdCAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2ssIHRydWUpO1xuXHQgICAgdGhpcy5lbGVtZW50cyA9IHsgY29udGFpbmVyOiBjb250YWluZXIsIHJlc3VsdEl0ZW06IHJlc3VsdEl0ZW0gfTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhSZXN1bHRMaXN0LCBbe1xuXHQgICAga2V5OiAncmVuZGVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgIHZhciByZXN1bHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTtcblx0ICAgICAgdmFyIF9lbGVtZW50cyA9IHRoaXMuZWxlbWVudHMsXG5cdCAgICAgICAgICBjb250YWluZXIgPSBfZWxlbWVudHMuY29udGFpbmVyLFxuXHQgICAgICAgICAgcmVzdWx0SXRlbSA9IF9lbGVtZW50cy5yZXN1bHRJdGVtO1xuXHRcblx0ICAgICAgdGhpcy5jbGVhcigpO1xuXHRcblx0ICAgICAgcmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChyZXN1bHQsIGlkeCkge1xuXHQgICAgICAgIHZhciBjaGlsZCA9IHJlc3VsdEl0ZW0uY2xvbmVOb2RlKHRydWUpO1xuXHQgICAgICAgIGNoaWxkLnNldEF0dHJpYnV0ZSgnZGF0YS1rZXknLCBpZHgpO1xuXHQgICAgICAgIGNoaWxkLmlubmVySFRNTCA9IHJlc3VsdC5sYWJlbDtcblx0ICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMucmVzdWx0cyA9IHJlc3VsdHM7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2VsZWN0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3QoaW5kZXgpIHtcblx0ICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbmZ1c2luZy1hcnJvd1xuXHRcblx0ICAgICAgQXJyYXkuZnJvbShjb250YWluZXIuY2hpbGRyZW4pLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkLCBpZHgpIHtcblx0ICAgICAgICByZXR1cm4gaWR4ID09PSBpbmRleCA/ICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjaGlsZCwgJ2FjdGl2ZScpIDogKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJyk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgdGhpcy5zZWxlY3RlZCA9IGluZGV4O1xuXHQgICAgICByZXR1cm4gdGhpcy5yZXN1bHRzW2luZGV4XTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdjb3VudCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY291bnQoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnJlc3VsdHMubGVuZ3RoO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NsZWFyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHtcblx0ICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXHRcblx0ICAgICAgd2hpbGUgKGNvbnRhaW5lci5sYXN0Q2hpbGQpIHtcblx0ICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmxhc3RDaGlsZCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBSZXN1bHRMaXN0O1xuXHR9KCk7XG5cdFxuXHR2YXIgX2luaXRpYWxpc2VQcm9wcyA9IGZ1bmN0aW9uIF9pbml0aWFsaXNlUHJvcHMoKSB7XG5cdCAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgdGhpcy5vbkNsaWNrID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICB0YXJnZXQgPSBfcmVmMi50YXJnZXQ7XG5cdFxuXHQgICAgdmFyIGhhbmRsZUNsaWNrID0gX3RoaXMucHJvcHMuaGFuZGxlQ2xpY2s7XG5cdCAgICB2YXIgY29udGFpbmVyID0gX3RoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgIGlmICh0YXJnZXQucGFyZW50Tm9kZSAhPT0gY29udGFpbmVyIHx8ICF0YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLWtleScpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaWR4ID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKTtcblx0ICAgIHZhciByZXN1bHQgPSBfdGhpcy5yZXN1bHRzW2lkeF07XG5cdCAgICBoYW5kbGVDbGljayh7IHJlc3VsdDogcmVzdWx0IH0pO1xuXHQgIH07XG5cdH07XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBSZXN1bHRMaXN0O1xuXG4vKioqLyB9LFxuLyogMTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfXJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblx0XG5cdHZhciBfZG9tVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcblx0ICBpZiAoIXNlbGYpIHtcblx0ICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcblx0ICB9cmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihzdXBlckNsYXNzKSkpO1xuXHQgIH1zdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pO2lmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcblx0fVxuXHRcblx0dmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcblx0ICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXHRcblx0ICBmdW5jdGlvbiBQcm92aWRlcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG5cdCAgICBrZXk6ICdlbmRwb2ludCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG5cdCAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcblx0ICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbCxcblx0ICAgICAgICAgIGpzb25wID0gX3JlZi5qc29ucDtcblx0XG5cdCAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG5cdCAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuXHQgICAgICAgIGpzb25wOiBqc29ucFxuXHQgICAgICB9KSk7XG5cdFxuXHQgICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9kZXYudmlydHVhbGVhcnRoLm5ldC9SRVNUL3YxL0xvY2F0aW9ucz8nICsgcGFyYW1TdHJpbmc7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncGFyc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG5cdCAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblx0XG5cdCAgICAgIGlmIChkYXRhLnJlc291cmNlU2V0cy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICByZXR1cm4gW107XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBkYXRhLnJlc291cmNlU2V0c1swXS5yZXNvdXJjZXMubWFwKGZ1bmN0aW9uIChyKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHg6IHIucG9pbnQuY29vcmRpbmF0ZXNbMV0sXG5cdCAgICAgICAgICB5OiByLnBvaW50LmNvb3JkaW5hdGVzWzBdLFxuXHQgICAgICAgICAgbGFiZWw6IHIuYWRkcmVzcy5mb3JtYXR0ZWRBZGRyZXNzLFxuXHQgICAgICAgICAgYm91bmRzOiBbW3IuYmJveFswXSwgci5iYm94WzFdXSwgLy8gcywgd1xuXHQgICAgICAgICAgW3IuYmJveFsyXSwgci5iYm94WzNdXV0sXG5cdCAgICAgICAgICByYXc6IHJcblx0ICAgICAgICB9O1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZWFyY2gnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmMykge1xuXHQgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuXHQgICAgICAgIHZhciBxdWVyeSwgcHJvdG9jb2wsIGpzb25wLCB1cmwsIGpzb247XG5cdCAgICAgICAgcXVlcnkgPSBfcmVmMy5xdWVyeTtcblx0XG5cdCAgICAgICAgcHJvdG9jb2wgPSB+bG9jYXRpb24ucHJvdG9jb2wuaW5kZXhPZignaHR0cCcpID8gbG9jYXRpb24ucHJvdG9jb2wgOiAnaHR0cHM6Jztcblx0XG5cdCAgICAgICAganNvbnAgPSAnQklOR19KU09OUF9DQl8nICsgRGF0ZS5ub3coKTtcblx0ICAgICAgICB1cmwgPSB0aGlzLmVuZHBvaW50KHsgcXVlcnk6IHF1ZXJ5LCBwcm90b2NvbDogcHJvdG9jb2wsIGpzb25wOiBqc29ucCB9KTtcblx0XG5cdCAgICAgICAgcmV0dXJuICgwLCBfZG9tVXRpbHMuY3JlYXRlU2NyaXB0RWxlbWVudCkodXJsLCBqc29ucCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcblx0ICAgICAgICAgIGpzb24gPSAkYXdhaXRfMTtcblx0ICAgICAgICAgIHJldHVybiAkcmV0dXJuKHRoaXMucGFyc2UoeyBkYXRhOiBqc29uIH0pKTtcblx0ICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBQcm92aWRlcjtcblx0fShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cbi8qKiovIH0sXG4vKiAxOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXHRcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cdFxuXHQgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2dldFBhcmFtU3RyaW5nJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQYXJhbVN0cmluZyhwYXJhbXMpIHtcblx0ICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHBhcmFtcykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pO1xuXHQgICAgICB9KS5qb2luKCcmJyk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2VhcmNoJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZWFyY2goX3JlZikge1xuXHQgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuXHQgICAgICAgIHZhciBxdWVyeSwgcHJvdG9jb2wsIHVybCwgcmVxdWVzdCwganNvbjtcblx0ICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnk7XG5cdFxuXHQgICAgICAgIHByb3RvY29sID0gfmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoJ2h0dHAnKSA/IGxvY2F0aW9uLnByb3RvY29sIDogJ2h0dHBzOic7XG5cdCAgICAgICAgdXJsID0gdGhpcy5lbmRwb2ludCh7IHF1ZXJ5OiBxdWVyeSwgcHJvdG9jb2w6IHByb3RvY29sIH0pO1xuXHRcblx0ICAgICAgICByZXR1cm4gZmV0Y2godXJsKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHQgICAgICAgICAgcmVxdWVzdCA9ICRhd2FpdF8xO1xuXHQgICAgICAgICAgcmV0dXJuIHJlcXVlc3QuanNvbigpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG5cdCAgICAgICAgICAgIGpzb24gPSAkYXdhaXRfMjtcblx0ICAgICAgICAgICAgcmV0dXJuICRyZXR1cm4odGhpcy5wYXJzZSh7IGRhdGE6IGpzb24gfSkpO1xuXHQgICAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9LFxuLyogMTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcblx0ICB9c3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTtpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG5cdCAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblx0XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZW5kcG9pbnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG5cdCAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblx0XG5cdCAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuXHQgICAgICAgIGY6ICdqc29uJyxcblx0ICAgICAgICB0ZXh0OiBxdWVyeVxuXHQgICAgICB9KSk7XG5cdFxuXHQgICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9nZW9jb2RlLmFyY2dpcy5jb20vYXJjZ2lzL3Jlc3Qvc2VydmljZXMvV29ybGQvR2VvY29kZVNlcnZlci9maW5kPycgKyBwYXJhbVN0cmluZztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcblx0ICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXHRcblx0ICAgICAgcmV0dXJuIGRhdGEubG9jYXRpb25zLm1hcChmdW5jdGlvbiAocikge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICB4OiByLmZlYXR1cmUuZ2VvbWV0cnkueCxcblx0ICAgICAgICAgIHk6IHIuZmVhdHVyZS5nZW9tZXRyeS55LFxuXHQgICAgICAgICAgbGFiZWw6IHIubmFtZSxcblx0ICAgICAgICAgIGJvdW5kczogW1tyLmV4dGVudC55bWluLCByLmV4dGVudC54bWluXSwgLy8gcywgd1xuXHQgICAgICAgICAgW3IuZXh0ZW50LnltYXgsIHIuZXh0ZW50LnhtYXhdXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSxcbi8qIDIwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfXJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcblx0ICBpZiAoIXNlbGYpIHtcblx0ICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcblx0ICB9cmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGNhbGwpKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcblx0ICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArICh0eXBlb2Ygc3VwZXJDbGFzcyA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7XG5cdCAgfXN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7aWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuXHQgIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2VuZHBvaW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcblx0ICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuXHQgICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcblx0ICAgICAgICBhZGRyZXNzOiBxdWVyeVxuXHQgICAgICB9KSk7XG5cdFxuXHQgICAgICAvLyBnb29nbGUgcmVxdWlyZXMgYSBzZWN1cmUgY29ubmVjdGlvbiB3aGVuIHVzaW5nIGFwaSBrZXlzXG5cdCAgICAgIHZhciBwcm90byA9IHBhcmFtcyAmJiBwYXJhbXMua2V5ID8gJ2h0dHBzOicgOiBwcm90b2NvbDtcblx0ICAgICAgcmV0dXJuIHByb3RvICsgJy8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24/JyArIHBhcmFtU3RyaW5nO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BhcnNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuXHQgICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cdFxuXHQgICAgICByZXR1cm4gZGF0YS5yZXN1bHRzLm1hcChmdW5jdGlvbiAocikge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICB4OiByLmdlb21ldHJ5LmxvY2F0aW9uLmxuZyxcblx0ICAgICAgICAgIHk6IHIuZ2VvbWV0cnkubG9jYXRpb24ubGF0LFxuXHQgICAgICAgICAgbGFiZWw6IHIuZm9ybWF0dGVkX2FkZHJlc3MsXG5cdCAgICAgICAgICBib3VuZHM6IFtbci5nZW9tZXRyeS52aWV3cG9ydC5zb3V0aHdlc3QubGF0LCByLmdlb21ldHJ5LnZpZXdwb3J0LnNvdXRod2VzdC5sbmddLCAvLyBzLCB3XG5cdCAgICAgICAgICBbci5nZW9tZXRyeS52aWV3cG9ydC5ub3J0aGVhc3QubGF0LCByLmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sbmddXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSxcbi8qIDIxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfXJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcblx0ICBpZiAoIXNlbGYpIHtcblx0ICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcblx0ICB9cmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGNhbGwpKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcblx0ICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArICh0eXBlb2Ygc3VwZXJDbGFzcyA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7XG5cdCAgfXN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7aWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuXHQgIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2VuZHBvaW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcblx0ICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuXHQgICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcblx0ICAgICAgICBmb3JtYXQ6ICdqc29uJyxcblx0ICAgICAgICBxOiBxdWVyeVxuXHQgICAgICB9KSk7XG5cdFxuXHQgICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvc2VhcmNoPycgKyBwYXJhbVN0cmluZztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcblx0ICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXHRcblx0ICAgICAgcmV0dXJuIGRhdGEubWFwKGZ1bmN0aW9uIChyKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHg6IHIubG9uLFxuXHQgICAgICAgICAgeTogci5sYXQsXG5cdCAgICAgICAgICBsYWJlbDogci5kaXNwbGF5X25hbWUsXG5cdCAgICAgICAgICBib3VuZHM6IFtbcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzBdKSwgcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzJdKV0sIC8vIHMsIHdcblx0ICAgICAgICAgIFtwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMV0pLCBwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbM10pXV0sXG5cdCAgICAgICAgICByYXc6IHJcblx0ICAgICAgICB9O1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBQcm92aWRlcjtcblx0fShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cbi8qKiovIH0sXG4vKiAyMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLlNldHVwUGFuZWwgPSBTZXR1cFBhbmVsO1xuXHRleHBvcnRzLnVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQgPSB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0O1xuXHRcblx0dmFyIF9sYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpO1xuXHRcblx0dmFyIF9vcGFjaXR5U2xpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdFxuXHRmdW5jdGlvbiBTZXR1cFBhbmVsKGxheWVycywgbGF5b3V0KSB7XG5cdCAgICB2YXIgbGF5ZXJHcm91cHMgPSBtYWtlTGF5ZXJHcm91cHMobGF5b3V0WydsYXllci1ncm91cHMtb3JkZXInXSk7XG5cdCAgICBtYWtlTGF5ZXJFbGVtcyhsYXllckdyb3VwcywgbGF5ZXJzKTtcblx0ICAgIG1ha2VQYW5lbERyYWdnYWJsZSgpO1xuXHQgICAgc2V0UGFuZWxTY3JvbGxIYW5kbGVyKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldFBhbmVsU2Nyb2xsSGFuZGxlcigpIHtcblx0ICAgIHZhciBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpO1xuXHQgICAgcGFuZWwub25zY3JvbGwgPSB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlUGFuZWxEcmFnZ2FibGUoKSB7XG5cdCAgICB2YXIgb3ZlcmxheSA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsLWRyYWctb3ZlcmxheScpO1xuXHRcblx0ICAgIG92ZXJsYXkuY2FsbChkMy5kcmFnKCkub24oJ2RyYWcnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcGFuZWxEcmFnRXZlbnRIYW5kbGVyLmNhbGwodGhpcyk7XG5cdCAgICB9KSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhbmVsRHJhZ0V2ZW50SGFuZGxlcigpIHtcblx0ICAgIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKTtcblx0ICAgIHVwZGF0ZVBhbmVsV2lkdGgoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpIHtcblx0ICAgIHZhciBwYW5lbCA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsJyk7XG5cdCAgICB2YXIgcGFuZWxPZmZzZXRIZWlnaHQgPSBwYW5lbC5wcm9wZXJ0eSgnb2Zmc2V0SGVpZ2h0Jyk7XG5cdCAgICB2YXIgcGFuZWxEcmFnT3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbC1kcmFnLW92ZXJsYXknKTtcblx0ICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwtaGVhZGVyJyk7XG5cdFxuXHQgICAgdmFyIG5ld0hlaWdodDtcblx0XG5cdCAgICBpZiAocGFuZWwuY2xhc3NlZCgnZ3JhcGhzLWFjdGl2ZScpKSB7XG5cdCAgICAgICAgdmFyIGdyYXBoTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaC1saXN0Jyk7XG5cdCAgICAgICAgbmV3SGVpZ2h0ID0gaGVhZGVyLnNjcm9sbEhlaWdodCArIGdyYXBoTGlzdC5zY3JvbGxIZWlnaHQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIHBhbmVsLmNsYXNzZWQoJ2xheWVycy1hY3RpdmUnKVxuXHQgICAgICAgIHZhciBsYXllckxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGF5ZXItbGlzdCcpO1xuXHQgICAgICAgIG5ld0hlaWdodCA9IGhlYWRlci5zY3JvbGxIZWlnaHQgKyBsYXllckxpc3Quc2Nyb2xsSGVpZ2h0O1xuXHQgICAgfVxuXHQgICAgbmV3SGVpZ2h0ID0gbmV3SGVpZ2h0ID4gcGFuZWxPZmZzZXRIZWlnaHQgPyBcIlwiICsgbmV3SGVpZ2h0ICsgJ3B4JyA6IG51bGw7XG5cdCAgICBwYW5lbERyYWdPdmVybGF5LnN0eWxlLmhlaWdodCA9IG5ld0hlaWdodDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlUGFuZWxXaWR0aCgpIHtcblx0ICAgIHZhciBwYW5lbCA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsJyk7XG5cdCAgICB2YXIgcGFuZWxNaW5XaWR0aCA9ICtwYW5lbC5zdHlsZSgnbWluLXdpZHRoJykuc2xpY2UoMCwgLTIpO1xuXHQgICAgdmFyIHBhbmVsQ2xpZW50V2lkdGggPSBwYW5lbC5wcm9wZXJ0eSgnY2xpZW50V2lkdGgnKTtcblx0XG5cdCAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3cmFwcGVyJyk7XG5cdCAgICB2YXIgd3JhcHBlcldpZHRoID0gd3JhcHBlci5jbGllbnRXaWR0aDtcblx0XG5cdCAgICB2YXIgbWFwV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtd3JhcHBlcicpO1xuXHRcblx0ICAgIHZhciBtb3VzZVggPSBkMy5ldmVudC5zb3VyY2VFdmVudC54O1xuXHQgICAgdmFyIHhEZWx0YSA9IHdyYXBwZXJXaWR0aCAtIG1vdXNlWCAtIHBhbmVsQ2xpZW50V2lkdGg7XG5cdFxuXHQgICAgdmFyIG5ld1BhbmVsV2lkdGggPSBwYW5lbENsaWVudFdpZHRoICsgeERlbHRhO1xuXHQgICAgbmV3UGFuZWxXaWR0aCA9IG5ld1BhbmVsV2lkdGggPCBwYW5lbE1pbldpZHRoID8gcGFuZWxNaW5XaWR0aCA6IG5ld1BhbmVsV2lkdGggPiB3cmFwcGVyV2lkdGggPyB3cmFwcGVyV2lkdGggOiBuZXdQYW5lbFdpZHRoO1xuXHQgICAgbWFwV3JhcHBlci5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIlwiICsgbmV3UGFuZWxXaWR0aCArICdweCc7XG5cdCAgICBwYW5lbC5zdHlsZSgnd2lkdGgnLCBcIlwiICsgbmV3UGFuZWxXaWR0aCArICdweCcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGF5ZXJHcm91cHMobGF5b3V0KSB7XG5cdCAgICByZXR1cm4gZDMuc2VsZWN0KCcjbGF5ZXItbGlzdCcpLnNlbGVjdEFsbCgnLmxheWVyLWdyb3VwLXdyYXBwZXInKS5kYXRhKGxheW91dCkuZW50ZXIoKS5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwLXdyYXBwZXInKS5hdHRyKCdpZCcsIGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyR3JvdXAuaWQ7XG5cdCAgICB9KS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgIHJldHVybiBsYXllckdyb3VwLmFjdGl2ZTtcblx0ICAgIH0pLmVhY2goZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0ICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cC1idG4gYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0ICAgICAgICAgICAgbGF5ZXJHcm91cC5hY3RpdmUgPSAhbGF5ZXJHcm91cC5hY3RpdmU7XG5cdCAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLnBhcmVudE5vZGUpLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBsYXllckdyb3VwLmFjdGl2ZTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKTtcblx0ICAgICAgICB9KS50ZXh0KGxheWVyR3JvdXAubmFtZSk7XG5cdCAgICB9KS5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYXllckVsZW1zKGxheWVyR3JvdXBzLCBsYXllcnMpIHtcblx0ICAgIGxheWVyR3JvdXBzLnNlbGVjdEFsbCgnLmxheWVyLXNlbGVjdCcpLmRhdGEoZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXJzW2xheWVyR3JvdXAuaWRdO1xuXHQgICAgfSkuZW50ZXIoKS5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLXNlbGVjdCcpLmVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgdmFyIGdyb3VwTmFtZSA9IHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkO1xuXHQgICAgICAgIHZhciBsYXllckRpdiA9IGQzLnNlbGVjdCh0aGlzKTtcblx0XG5cdCAgICAgICAgbWFrZUNoZWNrYm94KGxheWVyLCBsYXllckRpdik7XG5cdCAgICAgICAgbWFrZUxhYmVsKGxheWVyLCBsYXllckRpdik7XG5cdCAgICAgICAgbWFrZURlc2NyaXB0aW9uKGxheWVyLCBsYXllckRpdik7XG5cdCAgICAgICAgbWFrZUxheWVyVG9vbHMobGF5ZXIsIGxheWVyRGl2KTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlQ2hlY2tib3gobGF5ZXIsIGxheWVyRGl2KSB7XG5cdCAgICBsYXllckRpdi5hcHBlbmQoJ2lucHV0JykuYXR0cigndHlwZScsICdjaGVja2JveCcpLmF0dHIoJ2lkJywgZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyLmlkO1xuXHQgICAgfSkuYXR0cignY2hlY2tlZCcsIGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHJldHVybiBsYXllci5hY3RpdmUgPyAnY2hlY2tlZCcgOiBudWxsO1xuXHQgICAgfSkub24oJ2NsaWNrJywgZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgKDAsIF9sYXllci50b2dnbGVMYXllcikobGF5ZXIpO1xuXHQgICAgICAgIGxheWVyRGl2LnNlbGVjdCgnLmxheWVyLXRvb2xzLXdyYXBwZXInKS5jbGFzc2VkKCdhY3RpdmUnLCBsYXllci5hY3RpdmUpO1xuXHQgICAgICAgIGlmIChsYXllci5hY3RpdmUpICgwLCBfb3BhY2l0eVNsaWRlci5zZXRTbGlkZXJJbml0aWFsUG9zKShsYXllciwgbGF5ZXJEaXYpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYWJlbChsYXllciwgbGF5ZXJEaXYpIHtcblx0ICAgIGxheWVyRGl2LmFwcGVuZCgnbGFiZWwnKS5hdHRyKCdmb3InLCBmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXIuaWQ7XG5cdCAgICB9KS5hdHRyKCdjbGFzcycsICdsYXllci1sYWJlbCcpLmh0bWwoZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyLm5hbWU7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZURlc2NyaXB0aW9uKGxheWVyLCBsYXllckRpdikge1xuXHQgICAgaWYgKGxheWVyLmluZm8gJiYgbGF5ZXIuaW5mbyAhPT0gJycpIHtcblx0ICAgICAgICBsYXllckRpdi5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8tYnRuJykudGV4dCgnKD8pJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5zZWxlY3QoJy5sYXllci1pbmZvLXdyYXBwZXInKS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gIWQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdhY3RpdmUnKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIGxheWVyRGl2LmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby13cmFwcGVyJykudGV4dChmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGxheWVyLmluZm87XG5cdCAgICAgICAgfSk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYXllclRvb2xzKGxheWVyLCBsYXllckRpdikge1xuXHQgICAgdmFyIGxheWVyVG9vbHNEaXYgPSBsYXllckRpdi5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLXRvb2xzLXdyYXBwZXInKS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyLmFjdGl2ZTtcblx0ICAgIH0pO1xuXHRcblx0ICAgICgwLCBfb3BhY2l0eVNsaWRlci5tYWtlT3BhY2l0eVNsaWRlcikobGF5ZXIsIGxheWVyVG9vbHNEaXYpO1xuXHQgICAgbWFrZUxlZ2VuZChsYXllciwgbGF5ZXJUb29sc0Rpdik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMZWdlbmQobGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyKSB7XG5cdCAgICBsYXllclRvb2xzV3JhcHBlci5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZC13cmFwcGVyJykuYXBwZW5kKCdpbWcnKS5hdHRyKCdzcmMnLCBsYXllci5sZWdlbmQgfHwgJ21lYW5fbmR2aV9sZWdlbmQuanBnJyk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQkFTRV9MQVlFUl9UWVBFID0gdW5kZWZpbmVkO1xuXHRleHBvcnRzLkNyZWF0ZUJhc2VMYXllcnMgPSBDcmVhdGVCYXNlTGF5ZXJzO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdHZhciBCQVNFX0xBWUVSX1RZUEUgPSBleHBvcnRzLkJBU0VfTEFZRVJfVFlQRSA9IFwiYmFzZWxheWVyXCI7XG5cdFxuXHR2YXIgX2Jhc2VsYXllcnM7XG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVCYXNlTGF5ZXJzKG1hcCwgbGF5ZXJDb25maWcpIHtcblx0ICAgIGxheWVyQ29uZmlnID0gbGF5ZXJDb25maWcgfHwgW3tcblx0ICAgICAgICBcImlkXCI6IFwiY2FydG8tbGlnaHQtZGVmYXVsdFwiLFxuXHQgICAgICAgIFwidXJsXCI6IFwiaHR0cDovL3tzfS5iYXNlbWFwcy5jYXJ0b2Nkbi5jb20vbGlnaHRfYWxsL3t6fS97eH0ve3l9LnBuZ1wiLFxuXHQgICAgICAgIFwiYXR0cmlidXRpb25cIjogJyZjb3B5OyA8YSBocmVmPVwiaHR0cDovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsICZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly9jYXJ0by5jb20vYXR0cmlidXRpb25zXCI+Q0FSVE88L2E+J1xuXHQgICAgfV07XG5cdFxuXHQgICAgX2Jhc2VsYXllcnMgPSBsYXllckNvbmZpZztcblx0ICAgIHZhciBpO1xuXHQgICAgdmFyIGJhc2VMYXllcjtcblx0ICAgIHZhciBjb25maWc7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGxheWVyQ29uZmlnLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgY29uZmlnID0gbGF5ZXJDb25maWdbaV07XG5cdFxuXHQgICAgICAgIGlmICghY29uZmlnLmFjdGl2ZSkgY29udGludWU7XG5cdCAgICAgICAgYmFzZUxheWVyID0gY3JlYXRlQmFzZUxheWVyKGNvbmZpZyk7XG5cdCAgICAgICAgY29uZmlnLmxheWVyID0gYmFzZUxheWVyO1xuXHQgICAgICAgIGJhc2VMYXllci5hZGRUbyhtYXApO1xuXHQgICAgfVxuXHRcblx0ICAgIGNyZWF0ZUJhc2VMYXllclVJKGxheWVyQ29uZmlnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQmFzZUxheWVyVUkoY29uZmlnKSB7XG5cdCAgICB2YXIgYmFzZVVJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0ICAgIGJhc2VVSS5jbGFzc05hbWUgPSBcImJhc2VsYXllci11aVwiO1xuXHQgICAgdmFyIGJhc2VXcmFwcGVyO1xuXHQgICAgdmFyIGJhc2VJbWc7XG5cdCAgICB2YXIgYmFzZUxhYmVsO1xuXHRcblx0ICAgIHZhciBsYXllcjtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gY29uZmlnLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGxheWVyID0gY29uZmlnW2ldO1xuXHQgICAgICAgIGlmICghbGF5ZXIuaGFzT3duUHJvcGVydHkoXCJpbWFnZVwiKSkgY29udGludWU7XG5cdFxuXHQgICAgICAgIGJhc2VXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0ICAgICAgICBiYXNlV3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJkYXRhLWxheWVyXCIsIGxheWVyLmlkKTtcblx0ICAgICAgICBiYXNlSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcblx0ICAgICAgICBiYXNlSW1nLnNldEF0dHJpYnV0ZShcInNyY1wiLCBsYXllci5pbWFnZSk7XG5cdCAgICAgICAgYmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgbGF5ZXIubGFiZWwpO1xuXHQgICAgICAgIGJhc2VJbWcuc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgbGF5ZXIubGFiZWwpO1xuXHQgICAgICAgIGJhc2VMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICAgICAgYmFzZUxhYmVsLnRleHRDb250ZW50ID0gbGF5ZXIubGFiZWw7XG5cdCAgICAgICAgYmFzZVdyYXBwZXIuYXBwZW5kQ2hpbGQoYmFzZUltZyk7XG5cdCAgICAgICAgYmFzZVdyYXBwZXIuYXBwZW5kQ2hpbGQoYmFzZUxhYmVsKTtcblx0ICAgICAgICBiYXNlV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQmFzZUNsaWNrKTtcblx0XG5cdCAgICAgICAgZDMuc2VsZWN0KGJhc2VXcmFwcGVyKS5jbGFzc2VkKFwiYmFzZS1zZWxlY3RvclwiLCB0cnVlKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGxheWVyLmFjdGl2ZSk7XG5cdFxuXHQgICAgICAgIGJhc2VVSS5hcHBlbmRDaGlsZChiYXNlV3JhcHBlcik7XG5cdCAgICB9XG5cdFxuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImxlYWZsZXQtYm90dG9tIGxlYWZsZXQtbGVmdFwiKVswXS5hcHBlbmRDaGlsZChiYXNlVUkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVCYXNlQ2xpY2soZSkge1xuXHQgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0ICAgIHZhciBsYXllcmlkID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWxheWVyXCIpO1xuXHQgICAgdG9nZ2xlQWN0aXZlQmFzZVVJKHRoaXMpO1xuXHQgICAgcmVtb3ZlQ3VycmVudEJhc2VMYXllcigpO1xuXHQgICAgYWRkTmV3QmFzZUxheWVyVG9NYXAobGF5ZXJpZCk7XG5cdCAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b2dnbGVBY3RpdmVCYXNlVUkoYmFzZVVJRWxlbSkge1xuXHQgICAgZDMuc2VsZWN0KFwiLmJhc2Utc2VsZWN0b3IuYWN0aXZlXCIpLmNsYXNzZWQoXCJhY3RpdmVcIiwgZmFsc2UpO1xuXHQgICAgZDMuc2VsZWN0KGJhc2VVSUVsZW0pLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZUN1cnJlbnRCYXNlTGF5ZXIoKSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMudHlwZSAhPT0gQkFTRV9MQVlFUl9UWVBFKSByZXR1cm47XG5cdCAgICAgICAgbWFwLnJlbW92ZUxheWVyKGxheWVyKTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGROZXdCYXNlTGF5ZXJUb01hcChsYXllcmlkKSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIHZhciBsYXllcjtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gX2Jhc2VsYXllcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgbGF5ZXIgPSBfYmFzZWxheWVyc1tpXTtcblx0ICAgICAgICBpZiAobGF5ZXIuaWQgIT09IGxheWVyaWQpIGNvbnRpbnVlO1xuXHQgICAgICAgIGlmICghbGF5ZXIubGF5ZXIpIGxheWVyLmxheWVyID0gY3JlYXRlQmFzZUxheWVyKGxheWVyKTtcblx0ICAgICAgICBsYXllci5sYXllci5hZGRUbyhtYXApO1xuXHQgICAgICAgIGxheWVyLmxheWVyLmJyaW5nVG9CYWNrKCk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUJhc2VMYXllcihsYXllckNvbmZpZykge1xuXHQgICAgcmV0dXJuIEwudGlsZUxheWVyKGxheWVyQ29uZmlnLnVybCwgbWFrZUJhc2VMYXllck9wdGlvbnMobGF5ZXJDb25maWcpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUJhc2VMYXllck9wdGlvbnMoY29uZmlnKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHt9O1xuXHQgICAgaWYgKGNvbmZpZy5pZCkgb3B0aW9ucy5pZCA9IGNvbmZpZy5pZDtcblx0ICAgIGlmIChjb25maWcuYXR0cmlidXRpb24pIG9wdGlvbnMuYXR0cmlidXRpb24gPSBjb25maWcuYXR0cmlidXRpb247XG5cdCAgICBpZiAoY29uZmlnLnN1YmRvbWFpbnMpIG9wdGlvbnMuc3ViZG9tYWlucyA9IGNvbmZpZy5zdWJkb21haW5zO1xuXHQgICAgb3B0aW9ucy50eXBlID0gQkFTRV9MQVlFUl9UWVBFO1xuXHRcblx0ICAgIHJldHVybiBvcHRpb25zO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLlNldHVwR3JhcGhzID0gU2V0dXBHcmFwaHM7XG5cdGV4cG9ydHMuQmluZEdyYXBoRXZlbnRzID0gQmluZEdyYXBoRXZlbnRzO1xuXHRcblx0dmFyIF9wYW5lbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0dmFyIHRpcDtcblx0XG5cdGZ1bmN0aW9uIFNldHVwR3JhcGhzKCkge1xuXHQgICAgZDMuc2VsZWN0QWxsKFwiLmdyYXBoLXR5cGUtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2spO1xuXHQgICAgZXh0ZW5kRGF0ZU1vZHVsZSgpO1xuXHQgICAgdGlwID0gZDMudGlwKCkuYXR0cignY2xhc3MnLCAnZDMtdGlwJykuaHRtbChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV4dGVuZERhdGVNb2R1bGUoKSB7XG5cdCAgICBEYXRlLnByb3RvdHlwZS5pc0xlYXBZZWFyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciB5ZWFyID0gdGhpcy5nZXRGdWxsWWVhcigpO1xuXHQgICAgICAgIGlmICgoeWVhciAmIDMpICE9IDApIHJldHVybiBmYWxzZTtcblx0ICAgICAgICByZXR1cm4geWVhciAlIDEwMCAhPSAwIHx8IHllYXIgJSA0MDAgPT0gMDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gR2V0IERheSBvZiBZZWFyXG5cdCAgICBEYXRlLnByb3RvdHlwZS5nZXRET1kgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGRheUNvdW50ID0gWzAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0XTtcblx0ICAgICAgICB2YXIgbW4gPSB0aGlzLmdldE1vbnRoKCk7XG5cdCAgICAgICAgdmFyIGRuID0gdGhpcy5nZXREYXRlKCk7XG5cdCAgICAgICAgdmFyIGRheU9mWWVhciA9IGRheUNvdW50W21uXSArIGRuO1xuXHQgICAgICAgIGlmIChtbiA+IDEgJiYgdGhpcy5pc0xlYXBZZWFyKCkpIGRheU9mWWVhcisrO1xuXHQgICAgICAgIHJldHVybiBkYXlPZlllYXI7XG5cdCAgICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBCaW5kR3JhcGhFdmVudHMobWFwKSB7XG5cdCAgICBtYXAub24oXCJjbGlja1wiLCBoYW5kbGVNYXBDbGljayk7XG5cdH1cblx0XG5cdHZhciBiYXNlSWNvbiA9IEwuSWNvbi5leHRlbmQoe30pO1xuXHRcblx0dmFyIGdyYXBoSWNvbiA9IG5ldyBiYXNlSWNvbih7XG5cdCAgICBpY29uVXJsOiAnaW1ncy9ibHVlX2ljb24ucG5nJyxcblx0ICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxuXHQgICAgaWNvblNpemU6IFsyNSwgNDFdLFxuXHQgICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sXG5cdCAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXG5cdCAgICBzaGFkb3dTaXplOiBbNDEsIDQxXVxuXHR9KTtcblx0XG5cdHZhciBob3Zlckljb24gPSBuZXcgYmFzZUljb24oe1xuXHQgICAgaWNvblVybDogJ2ltZ3Mvb3JhbmdlX2ljb24ucG5nJyxcblx0ICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxuXHQgICAgaWNvblNpemU6IFsyNSwgNDFdLFxuXHQgICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sXG5cdCAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXG5cdCAgICBzaGFkb3dTaXplOiBbNDEsIDQxXVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIGhhbmRsZU1hcENsaWNrKGUpIHtcblx0ICAgIHZhciBtYXAgPSB0aGlzO1xuXHQgICAgdmFyIGxhdCA9IGUubGF0bG5nLmxhdDtcblx0ICAgIHZhciBsbmcgPSBlLmxhdGxuZy5sbmc7XG5cdFxuXHQgICAgdmFyIGRpdiA9IGNyZWF0ZUdyYXBoRGl2KGxhdCwgbG5nKTtcblx0ICAgIHZhciBtYXJrZXIgPSBjcmVhdGVNYXJrZXIobWFwLCBsYXQsIGxuZyk7XG5cdCAgICBkMy5zZWxlY3QoZGl2KS5vbihcIm1vdXNlZW50ZXJcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIG1hcmtlci5zZXRJY29uKGhvdmVySWNvbik7XG5cdCAgICB9KTtcblx0ICAgIGQzLnNlbGVjdChkaXYpLm9uKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgbWFya2VyLnNldEljb24oZ3JhcGhJY29uKTtcblx0ICAgIH0pO1xuXHQgICAgY3JlYXRlR3JhcGhSZW1vdmVyKG1hcCwgZGl2LCBtYXJrZXIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVNYXJrZXIobWFwLCBsYXQsIGxuZykge1xuXHQgICAgcmV0dXJuIEwubWFya2VyKFtsYXQsIGxuZ10sIHsgaWNvbjogZ3JhcGhJY29uIH0pLmFkZFRvKG1hcCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUdyYXBoUmVtb3ZlcihtYXAsIGRpdiwgbWFya2VyKSB7XG5cdCAgICB2YXIgZWxlbSA9IGNyZWF0ZUdyYXBoUmVtb3ZlckVsZW0oKTtcblx0ICAgIGRpdi5hcHBlbmRDaGlsZChlbGVtKTtcblx0ICAgIGQzLnNlbGVjdChlbGVtKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKTtcblx0ICAgICAgICBsaXN0LnJlbW92ZUNoaWxkKGRpdik7XG5cdCAgICAgICAgbWFwLnJlbW92ZUxheWVyKG1hcmtlcik7XG5cdCAgICAgICAgKDAsIF9wYW5lbC51cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KSgpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUdyYXBoUmVtb3ZlckVsZW0oKSB7XG5cdCAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG5cdCAgICBlbGVtLmNsYXNzTmFtZSA9IFwicmVtb3ZlLWdyYXBoXCI7XG5cdCAgICBlbGVtLmlubmVyVGV4dCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoXCIxMDAwNVwiKTtcblx0ICAgIGVsZW0uc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgXCJSZW1vdmUgZ3JhcGhcIik7XG5cdCAgICByZXR1cm4gZWxlbTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLyBHUkFQSCBEQVRBIFBST0NFU1NJTkcgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gZ2V0RGF0YShsYXQsIGxuZywgZGl2KSB7XG5cdCAgICB2YXIgdXJsID0gXCJodHRwczovL2ZjYXYtbmR2aS5uZW1hYy5vcmcvbGFuZGRhdF9wcm9kdWN0LmNnaT9hcmdzPVwiICsgbG5nICsgXCIsXCIgKyBsYXQ7XG5cdCAgICB2YXIgb1JlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHQgICAgb1JlcS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHJlc3BvbnNlID0gdGhpcy5yZXNwb25zZVRleHQ7XG5cdCAgICAgICAgcmVzcG9uc2UgPSByZXNwb25zZS5yZXBsYWNlKC9cXFt8XFxdfFxcJy9nLCBcIlwiKS5zcGxpdChcIiwgXCIpO1xuXHQgICAgICAgIGRyYXdHcmFwaChyZXNwb25zZSwgZGl2LCBsYXQsIGxuZyk7XG5cdCAgICAgICAgKDAsIF9wYW5lbC51cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KSgpO1xuXHQgICAgfSk7XG5cdCAgICBvUmVxLm9wZW4oXCJHRVRcIiwgdXJsKTtcblx0ICAgIG9SZXEuc2VuZCgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzcGxpdERhdGEoZGF0YSkge1xuXHQgICAgdmFyIGk7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGRhdGFbaV0gPSBkYXRhW2ldLnNwbGl0KFwiLFwiKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBkYXRhO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZXByb2Nlc3NEYXRhKG9yaWdkYXRhKSB7XG5cdCAgICB2YXIgZGF0YSA9IHt9O1xuXHQgICAgdmFyIHBvaW50O1xuXHQgICAgdmFyIGtleTtcblx0ICAgIHZhciBpLCBqO1xuXHRcblx0ICAgIGRhdGFbXCJrZXlzXCJdID0gW107XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgb3JpZ2RhdGEubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBwb2ludCA9IG9yaWdkYXRhW2ldO1xuXHQgICAgICAgIGtleSA9IHBvaW50WzBdLnN1YnN0cmluZygwLCA0KTtcblx0ICAgICAgICBpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHQgICAgICAgICAgICBkYXRhW2tleV0gPSBbXTtcblx0ICAgICAgICAgICAgZGF0YVtcImtleXNcIl0ucHVzaChrZXkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBkYXRhW2tleV0ucHVzaChwb2ludCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGRhdGFGb3JNZWRpYW5zO1xuXHQgICAgdmFyIG1lZGlhbjtcblx0ICAgIGRhdGFbXCJtZWRpYW5zXCJdID0gW107XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgNDY7IGkrKykge1xuXHQgICAgICAgIGRhdGFGb3JNZWRpYW5zID0gW107XG5cdCAgICAgICAgZm9yIChqID0gaTsgaiA8IG9yaWdkYXRhLmxlbmd0aDsgaiArPSA0Nikge1xuXHQgICAgICAgICAgICBkYXRhRm9yTWVkaWFucy5wdXNoKG9yaWdkYXRhW2pdWzFdKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIG1lZGlhbiA9IGRhdGFGb3JNZWRpYW5zLnNvcnQoKVtNYXRoLmZsb29yKGRhdGFGb3JNZWRpYW5zLmxlbmd0aCAvIDIpXTtcblx0ICAgICAgICBkYXRhW1wibWVkaWFuc1wiXS5wdXNoKG1lZGlhbik7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGRhdGE7XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSU5URVJGQUNFIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2soKSB7XG5cdCAgICB2YXIgdHlwZSA9IHRoaXMuZGF0YXNldC50eXBlO1xuXHQgICAgdmFyIGFjdGl2ZUVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZ3JhcGgtdHlwZS1idG4gYWN0aXZlXCIpWzBdO1xuXHQgICAgdmFyIGFjdGl2ZVR5cGUgPSBhY3RpdmVFbGVtLmRhdGFzZXQudHlwZTtcblx0XG5cdCAgICBpZiAodHlwZSA9PT0gYWN0aXZlVHlwZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICBkMy5zZWxlY3QoXCIjZ3JhcGgtbGlzdFwiKS5jbGFzc2VkKFwiZ3JhcGgtXCIgKyBhY3RpdmVUeXBlLCBmYWxzZSkuY2xhc3NlZChcImdyYXBoLVwiICsgdHlwZSwgdHJ1ZSk7XG5cdFxuXHQgICAgZDMuc2VsZWN0KGFjdGl2ZUVsZW0pLmNsYXNzZWQoXCJhY3RpdmVcIiwgZmFsc2UpO1xuXHQgICAgZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUdyYXBoRGl2KGxhdCwgbG5nKSB7XG5cdCAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0ICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJMYXQ6IFwiICsgbGF0ICsgXCIsIExvbjogXCIgKyBsbmcpO1xuXHQgICAgZGl2LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuXHQgICAgZGl2LmNsYXNzTGlzdC5hZGQoXCJncmFwaC1lbGVtXCIpO1xuXHQgICAgZ2V0RGF0YShsYXQsIGxuZywgZGl2KTtcblx0ICAgIHJldHVybiBkaXY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYXdHcmFwaChkYXRhLCBkaXYsIGxhdCwgbG5nKSB7XG5cdCAgICBkYXRhID0gc3BsaXREYXRhKGRhdGEpO1xuXHQgICAgdmFyIHJlcHJvY2Vzc2VkRGF0YSA9IHJlcHJvY2Vzc0RhdGEoZGF0YSk7XG5cdCAgICBtYWtlVXBEb3duTGluZUdyYXBoKGRhdGEsIGRpdiwgcmVwcm9jZXNzZWREYXRhW1wibWVkaWFuc1wiXSk7XG5cdCAgICBtYWtlVXBEb3duT3ZlcmxhcGluZ0xpbmVHcmFwaFdpdGhDaGVja2JveGVzKHJlcHJvY2Vzc2VkRGF0YSwgZGl2LCBsYXQsIGxuZyk7XG5cdCAgICBkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMocmVwcm9jZXNzZWREYXRhLCBkaXYsIGxhdCwgbG5nKTtcblx0ICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpO1xuXHQgICAgbGlzdC5hcHBlbmRDaGlsZChkaXYpO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8gVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBtYWtlVXBEb3duTGluZUdyYXBoKGRhdGEsIGRpdiwgYXZlcmFnZXMpIHtcblx0ICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcblx0ICAgIHZhciBtYXJnaW4gPSB7IHRvcDogMzAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMCwgbGVmdDogMjUgfSxcblx0ICAgICAgICB3aWR0aCA9IDU4MCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxuXHQgICAgICAgIGhlaWdodCA9IDI3MCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXHRcblx0ICAgIC8vIFNldCB0aGUgcmFuZ2VzXG5cdCAgICB2YXIgeCA9IGQzLnNjYWxlVGltZSgpLnJhbmdlKFswLCB3aWR0aF0pLmRvbWFpbihbcGFyc2VEYXRlKGRhdGFbMF1bMF0pLCBwYXJzZURhdGUoZGF0YVtkYXRhLmxlbmd0aCAtIDFdWzBdKV0pO1xuXHQgICAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKS5kb21haW4oWzAsIDEwMF0pO1xuXHRcblx0ICAgIC8vIERlZmluZSB0aGUgYXhlc1xuXHQgICAgdmFyIHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4KS50aWNrcygxNikudGlja0Zvcm1hdChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkLmdldEZ1bGxZZWFyKCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KS50aWNrcyg2KTtcblx0XG5cdCAgICAvLyBEZWZpbmUgdGhlIGxpbmVcblx0ICAgIHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKCkueChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiB4KHBhcnNlRGF0ZShkWzBdKSk7XG5cdCAgICB9KS55KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIHkoZFsxXSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwidGltZXNlcmllcy1ncmFwaFwiLCB0cnVlKTtcblx0XG5cdCAgICAvLyBBZGRzIHRoZSBzdmcgY2FudmFzXG5cdCAgICB2YXIgc3ZnID0gd3JhcHBlci5hcHBlbmQoXCJzdmdcIilcblx0ICAgIC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuXHQgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHcgPSB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0O1xuXHQgICAgICAgIHZhciBoID0gaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b207XG5cdCAgICAgICAgcmV0dXJuICcwIDAgJyArIHcgKyAnICcgKyBoO1xuXHQgICAgfSkuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWlkWU1pZCcpLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xuXHRcblx0ICAgIHN2Zy5jYWxsKHRpcCk7XG5cdFxuXHQgICAgLy8gQWRkIHRoZSB2YWx1ZWxpbmUgcGF0aC5cblx0ICAgIGRyYXdMaW5lYXJQYXRoKGRhdGEsIHZhbHVlbGluZSwgc3ZnKTtcblx0XG5cdCAgICAvLyBBZGQgdGhlIFggQXhpc1xuXHQgICAgc3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwieCBheGlzXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGhlaWdodCArIFwiKVwiKS5jYWxsKHhBeGlzKTtcblx0XG5cdCAgICAvLyBBZGQgdGhlIFkgQXhpc1xuXHQgICAgc3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpLmNhbGwoeUF4aXMpO1xuXHQgICAgLyoqXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxuXHQgICAgICovXG5cdCAgICBkcmF3TGluZWFyUG9pbnRzKGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vIE9WRVJMQVBQSU5HIFRJTUVTRVJJRVMgTElORSBHUkFQSCAvLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBtYWtlVXBEb3duT3ZlcmxhcGluZ0xpbmVHcmFwaFdpdGhDaGVja2JveGVzKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcblx0ICAgIHZhciB5ZWFyID0gXCIyMDE1XCI7XG5cdFxuXHQgICAgdmFyIGNoYXJ0cyA9IHt9O1xuXHRcblx0ICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcblx0ICAgIHZhciBtYXJnaW4gPSB7IHRvcDogMzAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMCwgbGVmdDogMjUgfSxcblx0ICAgICAgICB3aWR0aCA9IDUwMCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxuXHQgICAgICAgIGhlaWdodCA9IDI3MCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXHRcblx0ICAgIHZhciBhdmVyYWdlcyA9IGRhdGEubWVkaWFucztcblx0XG5cdCAgICB2YXIgeCA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoWzAsIHdpZHRoXSkuZG9tYWluKFswLCAzNjVdKTtcblx0ICAgIHZhciB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSkuZG9tYWluKFswLCAxMDBdKTtcblx0XG5cdCAgICAvLyBEZWZpbmUgdGhlIGF4ZXNcblx0ICAgIGZ1bmN0aW9uIGZvcm1hdE1vbnRoVGljayhkKSB7XG5cdCAgICAgICAgcmV0dXJuIE1PTlRIX0xBQkVMU1soZCAtIDE1KSAvIDMwXTtcblx0ICAgIH1cblx0ICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeCkudGlja3MoMTEpLnRpY2tWYWx1ZXMoWzE1LCA0NSwgNzUsIDEwNSwgMTM1LCAxNjUsIDE5NSwgMjI1LCAyNTUsIDI4NSwgMzE1LCAzNDVdKS50aWNrRm9ybWF0KGZvcm1hdE1vbnRoVGljayk7XG5cdFxuXHQgICAgdmFyIHlBeGlzID0gZDMuYXhpc0xlZnQoeSkudGlja3MoNik7XG5cdFxuXHQgICAgLy8gRGVmaW5lIHRoZSBsaW5lXG5cdCAgICB2YXIgdmFsdWVsaW5lID0gZDMubGluZSgpLngoZnVuY3Rpb24gKGQsIGkpIHtcblx0ICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShkKSA/IHgocGFyc2VKdWxpYW5EYXkoZFswXSkpIDogeChpICogOCArIDMpO1xuXHQgICAgfSkueShmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGQpID8geShkWzFdKSA6IHkoZCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwib3ZlcmxhcHBpbmctZ3JhcGhcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgLy8gQWRkcyB0aGUgc3ZnIGNhbnZhc1xuXHQgICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHcgPSB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0O1xuXHQgICAgICAgIHZhciBoID0gaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b207XG5cdCAgICAgICAgcmV0dXJuICcwIDAgJyArIHcgKyAnICcgKyBoO1xuXHQgICAgfSkuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWlkWU1pZCcpXG5cdCAgICAvLy5hdHRyKFwid2lkdGhcIiwgd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodClcblx0ICAgIC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXG5cdCAgICAuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XG5cdFxuXHQgICAgc3ZnLmNhbGwodGlwKTtcblx0XG5cdCAgICAvLyBBZGQgdGhlIFggQXhpc1xuXHQgICAgc3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwieCBheGlzXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGhlaWdodCArIFwiKVwiKS5jYWxsKHhBeGlzKTtcblx0XG5cdCAgICAvLyBBZGQgdGhlIFkgQXhpc1xuXHQgICAgc3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpLmNhbGwoeUF4aXMpO1xuXHRcblx0ICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl0gPSB7XG5cdCAgICAgICAgXCJwYXRoXCI6IGRyYXdMaW5lYXJQYXRoKGRhdGFbXCJtZWRpYW5zXCJdLCB2YWx1ZWxpbmUsIHN2Zylcblx0ICAgIH07XG5cdFxuXHQgICAgY2hhcnRzW3llYXJdID0ge1xuXHQgICAgICAgIFwicGF0aFwiOiBkcmF3TGluZWFyUGF0aChkYXRhW3llYXJdLCB2YWx1ZWxpbmUsIHN2Zylcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxuXHQgICAgICovXG5cdCAgICBjaGFydHNbXCJtZWRpYW5zXCJdW1wicG9pbnRzXCJdID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW1wibWVkaWFuc1wiXSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0ICAgIGNoYXJ0c1t5ZWFyXVtcInBvaW50c1wiXSA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVt5ZWFyXSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0XG5cdCAgICB2YXIgaW5wdXR3cmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcImlucHV0LXdyYXBwZXJcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgZGF0YS5rZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwga2V5LCBcInRpbWVzZXJpZXNcIiwgeWVhciwgY2hhcnRzLCBkYXRhLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMsIGxhdCwgbG5nKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwgXCJtZWRpYW5zXCIsIFwidGltZXNlcmllc1wiLCBcIm1lZGlhbnNcIiwgY2hhcnRzLCBkYXRhLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMsIGxhdCwgbG5nKTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBQT0xBUiBHUkFQSCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcblx0ICAgIHZhciB5ZWFyID0gXCIyMDE1XCI7XG5cdCAgICB2YXIgd2lkdGggPSA0OTAsXG5cdCAgICAgICAgaGVpZ2h0ID0gNDkwLFxuXHQgICAgICAgIHJhZGl1cyA9IE1hdGgubWluKHdpZHRoLCBoZWlnaHQpIC8gMiAtIDMwO1xuXHRcblx0ICAgIHZhciBhdmVyYWdlcyA9IGRhdGFbXCJtZWRpYW5zXCJdO1xuXHQgICAgdmFyIGNlbnRlciA9IGZpbmRQb2xhckNlbnRlcihkYXRhKTtcblx0ICAgIHZhciB0aHJlc2hvbGRzID0gZmluZFBvbGFyVGhyZXNob2xkcyhhdmVyYWdlcywgY2VudGVyWzFdWzBdKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFNldHMgdXAgc2NhbGluZyBvZiBkYXRhLiBXZSBrbm93IHRoYXQgdGhlIG5kdmkgdmFsdWVzIGZhbGwgYmV0d2VlblxuXHQgICAgICogMCAmIDEwMCBzbyB3ZSBzZXQgb3VyIGRvbWFpbiB0byB0aGF0LiBUaGUgcmFuZ2UgY29udHJvbHMgd2hlcmUgdGhlXG5cdCAgICAgKiBwb2ludHMgd2lsbCBsaWUgaW4gb3VyIGdyYXBoLCBzbyB3ZSBzZXQgdGhlbSB0byBiZSBiZXR3ZWVuIDAgYW5kIHRoZVxuXHQgICAgICogcmFkaXVzLlxuXHQgICAgICovXG5cdCAgICB2YXIgciA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFswLCAxMDBdKS5yYW5nZShbMCwgcmFkaXVzXSk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBmdW5jdGlvbiB3aGljaCB3aWxsIGRyYXcgZWFjaCBwb2ludC4gVG8gY29tcHV0ZSB0aGUgZGlzdGFuY2UgZnJvbSB0aGVcblx0ICAgICAqIGNlbnRlciBlYWNoIHBvaW50IGlzIHdlIHBhc3MgdGhlIGRhdGFwb2ludCB0byB0aGUgZnVuY3Rpb24gZGVmaW5lZCBhYm92ZS5cblx0ICAgICAqIFRvIGRldGVybWluZSB0aGUgYW5nbGUgZnJvbSB0aGUgb3JpZ2luIHdlIG5lZWQgdG8gY29udmVydCB0aGUgZGF5IHRvXG5cdCAgICAgKiByYWRpYW5zLCBzbyB3ZSBjb252ZXJ0IHRoZSBkYXkgdG8gYSBudW1iZXIgYmV0d2VlbiAwICYgMSBhbmQgdGhlbiBtdWx0aXBseVxuXHQgICAgICogaXQgYnkgMiBwaS5cblx0ICAgICAqL1xuXHQgICAgdmFyIGxpbmUgPSBkMy5yYWRpYWxMaW5lKCkucmFkaXVzKGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyByKGRbMV0pIDogcihkKTtcblx0ICAgIH0pLmFuZ2xlKGZ1bmN0aW9uIChkLCBpKSB7XG5cdCAgICAgICAgdmFyIGRheSA9IEFycmF5LmlzQXJyYXkoZCkgPyBwYXJzZUp1bGlhbkRheShkWzBdKSA6IGkgKiA4ICsgMztcblx0ICAgICAgICByZXR1cm4gKGRheSAtIDEpICUgMzY1IC8gMzY1ICogKDIgKiBNYXRoLlBJKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0cyB1cCB0aGUgY2FudmFzIHdoZXJlIHRoZSBjaXJjbGUgd2lsbCBiZSBkcmF3bi5cblx0ICAgICAqL1xuXHQgICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcInBvbGFyLWdyYXBoXCIsIHRydWUpO1xuXHQgICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpXG5cdCAgICAvLy5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG5cdCAgICAvLy5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodClcblx0ICAgIC5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiAnMCAwICcgKyB3aWR0aCArICcgJyArIGhlaWdodDtcblx0ICAgIH0pLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB3aWR0aCAvIDIgKyBcIixcIiArIGhlaWdodCAvIDIgKyBcIilcIik7XG5cdFxuXHQgICAgc3ZnLmNhbGwodGlwKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgYmlnIGNpcmNsZXMgb2YgdGhlIGdyYXBoICYgdGhlaXIgbGFiZWxzXG5cdCAgICAgKi9cblx0ICAgIHZhciBnciA9IHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInIgYXhpc1wiKS5zZWxlY3RBbGwoXCJnXCIpLmRhdGEoci50aWNrcyg1KS5zbGljZSgxKSkuZW50ZXIoKS5hcHBlbmQoXCJnXCIpO1xuXHRcblx0ICAgIGdyLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiclwiLCByKTtcblx0XG5cdCAgICBnci5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIC1yKGQpIC0gNDtcblx0ICAgIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJyb3RhdGUoMTUpXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIikudGV4dChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGxhYmVscyBmb3IgZWFjaCBtb250aCBhbmQgdGhlIGxpbmVzXG5cdCAgICAgKiB0aGF0IGdvIG91dCB0byB0aGVtLlxuXHQgICAgICovXG5cdCAgICB2YXIgZ2EgPSBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJhIGF4aXNcIikuc2VsZWN0QWxsKFwiZ1wiKS5kYXRhKGQzLnJhbmdlKDAsIDM2MCwgMzApKS5lbnRlcigpLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBcInJvdGF0ZShcIiArIChkIC0gOTApICsgXCIpXCI7XG5cdCAgICB9KTtcblx0XG5cdCAgICBnYS5hcHBlbmQoXCJsaW5lXCIpLmF0dHIoXCJ4MlwiLCByYWRpdXMpO1xuXHRcblx0ICAgIGdhLmFwcGVuZChcInRleHRcIikuYXR0cihcInhcIiwgcmFkaXVzICsgNikuYXR0cihcImR5XCIsIFwiLjM1ZW1cIikuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkIDwgMzYwICYmIGQgPiAxODAgPyBcImVuZFwiIDogbnVsbDtcblx0ICAgIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7XG5cdCAgICB9KS50ZXh0KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIE1PTlRIX0xBQkVMU1tkIC8gMzBdO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBEcmF3cyB0aGUgdGhyZXNob2xkIGxpbmVzXG5cdCAgICAgKi9cblx0ICAgIHZhciB0aHJlc2hvbGRFbGVtID0gc3ZnLmFwcGVuZChcImdcIikuc2VsZWN0QWxsKFwiZ1wiKS5kYXRhKHRocmVzaG9sZHMpLmVudGVyKCkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIFwicm90YXRlKFwiICsgKGQuZGF0YVsxXVswXSAtIDkwKSArIFwiKVwiO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdGhyZXNob2xkRWxlbS5hcHBlbmQoXCJsaW5lXCIpLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIikuYXR0cihcIngyXCIsIHJhZGl1cyk7XG5cdFxuXHQgICAgdGhyZXNob2xkRWxlbS5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ4XCIsIHJhZGl1cyArIDYpLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIChkLmRhdGFbMV1bMF0gLSAxKSAlIDM2NSAvIDM2NSAqICgyICogTWF0aC5QSSk7XG5cdCAgICB9KS5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKS5zdHlsZShcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgdmFyIGRheSA9IGQuZGF0YVsxXVswXTtyZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IFwiZW5kXCIgOiBudWxsO1xuXHQgICAgfSkuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHZhciBkYXkgPSBkLmRhdGFbMV1bMF07cmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyBcInJvdGF0ZSgxODAgXCIgKyAocmFkaXVzICsgNikgKyBcIiwwKVwiIDogbnVsbDtcblx0ICAgIH0pLnRleHQoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZC5sYWJlbDtcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogRHJhd3MgdGhlIGxpbmUgdG8gdGhlIGNlbnRlciBvZiB0aGUgZGF0YVxuXHQgICAgICovXG5cdCAgICB2YXIgY2VudGVyRGF5ID0gY2VudGVyWzFdWzBdO1xuXHQgICAgdmFyIGNlbnRlckRheU9wcG9zaXRlID0gKGNlbnRlckRheSArIDM2NSAvIDIpICUgMzY1O1xuXHQgICAgdmFyIGNlbnRlckRheURhdGEgPSBbY2VudGVyRGF5LCAxMDBdO1xuXHQgICAgdmFyIGNlbnRlckRheU9wcG9zaXRlRGF0YSA9IFtjZW50ZXJEYXlPcHBvc2l0ZSwgMTAwXTtcblx0ICAgIHZhciBncm93aW5nU2Vhc29uRGF0YSA9IFtjZW50ZXJEYXlEYXRhLCBjZW50ZXJEYXlPcHBvc2l0ZURhdGFdO1xuXHRcblx0ICAgIGRyYXdQb2xhclBhdGgoZ3Jvd2luZ1NlYXNvbkRhdGEsIGxpbmUsIHN2ZykuY2xhc3NlZChcImdyb3dpbmctc2Vhc29uLWxpbmVcIiwgXCJ0cnVlXCIpO1xuXHRcblx0ICAgIGRyYXdQb2xhclBhdGgoY2VudGVyLCBsaW5lLCBzdmcpLmNsYXNzZWQoXCJjZW50ZXItbGluZVwiLCBcInRydWVcIik7XG5cdFxuXHQgICAgc3ZnLnNlbGVjdEFsbChcInBvaW50XCIpLmRhdGEoW2NlbnRlclsxXV0pLmVudGVyKCkuYXBwZW5kKFwiY2lyY2xlXCIpLmF0dHIoXCJjbGFzc1wiLCBcInBvaW50XCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtkXSkuc2xpY2UoMSkuc2xpY2UoMCwgLTEpO1xuXHQgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGNvb3JzICsgXCIpXCI7XG5cdCAgICB9KS5hdHRyKFwiclwiLCAyLjUpLmF0dHIoXCJzdHJva2VcIiwgXCIjMDAwXCIpLmF0dHIoXCJmaWxsXCIsIFwiI2RkODJkMlwiKS5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHRpcC5zaG93KFwiQ2VudGVyOiBcIiArIFN0cmluZyhkWzFdKS5zdWJzdHJpbmcoMCwgNykpO1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCA1KTtcblx0ICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjJweFwiKTtcblx0ICAgICAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblx0ICAgIH0pLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB0aXAuaGlkZSgpO1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCAyLjUpO1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMXB4XCIpO1xuXHQgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIGNoYXJ0cyA9IHt9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBsaW5lIHRoYXQgdGhlIGRhdGEgZm9sbG93c1xuXHQgICAgICovXG5cdCAgICBjaGFydHNbXCJtZWRpYW5zXCJdID0ge1xuXHQgICAgICAgIFwicGF0aFwiOiBkcmF3UG9sYXJQYXRoKGF2ZXJhZ2VzLCBsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIGNoYXJ0c1t5ZWFyXSA9IHtcblx0ICAgICAgICBcInBhdGhcIjogZHJhd1BvbGFyUGF0aChkYXRhW3llYXJdLCBsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBwb2ludCBhdCBlYWNoIGRhdGEgcG9pbnRcblx0ICAgICAqL1xuXHQgICAgY2hhcnRzLm1lZGlhbnMucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhhdmVyYWdlcywgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdCAgICBjaGFydHNbeWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW3llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0XG5cdCAgICB2YXIgaW5wdXR3cmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcImlucHV0LXdyYXBwZXJcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgZGF0YS5rZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSBpbnB1dHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpO1xuXHRcblx0ICAgICAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgXCJwb2xhci1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSkuYXR0cihcInZhbHVlXCIsIGtleSkucHJvcGVydHkoXCJjaGVja2VkXCIsIGtleSA9PT0geWVhciA/IHRydWUgOiBmYWxzZSkub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xuXHQgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGgucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgaWYgKCFjaGFydHMuaGFzT3duUHJvcGVydHkobmV3WWVhcikpIHtcblx0ICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcblx0ICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdQb2xhclBhdGgoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnKTtcblx0ICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKS50ZXh0KGtleSkuYXR0cihcImZvclwiLCBcInBvbGFyLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSBpbnB1dHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpO1xuXHRcblx0ICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJpbnB1dFwiKS5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpLmF0dHIoXCJpZFwiLCBcInBvbGFyLWF2ZXJhZ2UtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpLmF0dHIoXCJ2YWx1ZVwiLCBcIm1lZGlhbnNcIikucHJvcGVydHkoXCJjaGVja2VkXCIsIHRydWUpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xuXHQgICAgICAgIGlmICghdGhpcy5jaGVja2VkKSB7XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoLnJlbW92ZSgpO1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGlmICghY2hhcnRzLmhhc093blByb3BlcnR5KG5ld1llYXIpKSB7XG5cdCAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3UG9sYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2Zyk7XG5cdFxuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwibGFiZWxcIikudGV4dChcIkJhc2VsaW5lXCIpLmF0dHIoXCJmb3JcIiwgXCJwb2xhci1hdmVyYWdlLVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblx0XG5cdCAgICB2YXIgdGhyZXNob2xkQ2hlY2tib3ggPSBpbnB1dHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJ0aHJlc2hvbGQtY2hlY2tib3hcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgdGhyZXNob2xkQ2hlY2tib3guYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpLnByb3BlcnR5KFwiY2hlY2tlZFwiLCB0cnVlKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHRocmVzaG9sZEVsZW0uc3R5bGUoXCJvcGFjaXR5XCIsIHRoaXMuY2hlY2tlZCA/IDEgOiAwKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHRocmVzaG9sZENoZWNrYm94LmFwcGVuZChcImxhYmVsXCIpLnRleHQoXCJUaHJlc2hvbGRzXCIpLmF0dHIoXCJmb3JcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuXHR9XG5cdFxuXHQvKiBQT0xBUiBHUkFQSCBIRUxQRVJTICovXG5cdFxuXHRmdW5jdGlvbiBmaW5kUG9sYXJDZW50ZXIoZGF0YSkge1xuXHQgICAgdmFyIGksIGosIGxlbmd0aCwgYXJyO1xuXHQgICAgdmFyIHRvdGFsU3VtID0gMDtcblx0ICAgIHZhciBpbmNvbXBsZXRlWWVhcnMgPSAwO1xuXHQgICAgdmFyIHN1bTtcblx0ICAgIGxlbmd0aCA9IDQ2O1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmtleXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBhcnIgPSBkYXRhW2RhdGEua2V5c1tpXV07XG5cdCAgICAgICAgaWYgKGFyci5sZW5ndGggIT09IGxlbmd0aCkge1xuXHQgICAgICAgICAgICBpbmNvbXBsZXRlWWVhcnMrKztcblx0ICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1bSA9IDA7XG5cdCAgICAgICAgZm9yIChqID0gMDsgaiA8IGxlbmd0aCAvIDI7IGorKykge1xuXHQgICAgICAgICAgICBzdW0gKz0gYXJyW2pdWzFdIC0gYXJyW2ogKyAyM11bMV07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1bSA9IHN1bSAvIDIzO1xuXHQgICAgICAgIHRvdGFsU3VtICs9IHN1bTtcblx0ICAgIH1cblx0ICAgIHRvdGFsU3VtID0gTWF0aC5hYnModG90YWxTdW0pIC8gKGRhdGEua2V5cy5sZW5ndGggLSBpbmNvbXBsZXRlWWVhcnMpO1xuXHRcblx0ICAgIHZhciBhcmVhRGlmZiA9IDEwMDAwMDA7XG5cdCAgICB2YXIgY2hlY2tEaWZmO1xuXHQgICAgdmFyIGFyZWFJbmRleCA9IDA7XG5cdCAgICB2YXIgbGVmdEFyZWEsIHJpZ2h0QXJlYTtcblx0ICAgIHZhciBhdmdzID0gZGF0YS5tZWRpYW5zO1xuXHQgICAgdmFyIGssIGNvdW50ZXI7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aCAvIDI7IGkrKykge1xuXHQgICAgICAgIGxlZnRBcmVhID0gMDtcblx0ICAgICAgICByaWdodEFyZWEgPSAwO1xuXHQgICAgICAgIGZvciAoY291bnRlciA9IDA7IGNvdW50ZXIgPCBsZW5ndGggLyAyOyBjb3VudGVyKyspIHtcblx0ICAgICAgICAgICAgaiA9IChpICsgY291bnRlcikgJSA0Njtcblx0ICAgICAgICAgICAgayA9IChqICsgMjMpICUgNDY7XG5cdFxuXHQgICAgICAgICAgICBsZWZ0QXJlYSArPSBwYXJzZUludChhdmdzW2pdLCAxMCk7XG5cdCAgICAgICAgICAgIHJpZ2h0QXJlYSArPSBwYXJzZUludChhdmdzW2tdLCAxMCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNoZWNrRGlmZiA9IE1hdGguYWJzKGxlZnRBcmVhIC0gcmlnaHRBcmVhKTtcblx0ICAgICAgICBpZiAoY2hlY2tEaWZmIDwgYXJlYURpZmYpIHtcblx0ICAgICAgICAgICAgYXJlYURpZmYgPSBjaGVja0RpZmY7XG5cdCAgICAgICAgICAgIGFyZWFJbmRleCA9IGk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBmaXJzdFJhZGl1cyA9IHBhcnNlSW50KGF2Z3NbYXJlYUluZGV4XSwgMTApO1xuXHQgICAgdmFyIHNlY29uZFJhZGl1cyA9IHBhcnNlSW50KC1hdmdzW2FyZWFJbmRleCArIDIzXSwgMTApO1xuXHRcblx0ICAgIHZhciBmaXJzdERpZmYgPSBNYXRoLmFicyh0b3RhbFN1bSAtIGZpcnN0UmFkaXVzKSAtIE1hdGguYWJzKHRvdGFsU3VtIC0gc2Vjb25kUmFkaXVzKTtcblx0ICAgIHZhciBzZWNvbmREaWZmID0gTWF0aC5hYnMoLXRvdGFsU3VtIC0gZmlyc3RSYWRpdXMpIC0gTWF0aC5hYnMoLXRvdGFsU3VtIC0gc2Vjb25kUmFkaXVzKTtcblx0ICAgIGlmIChzZWNvbmREaWZmID4gZmlyc3REaWZmKSB7XG5cdCAgICAgICAgYXJlYUluZGV4ID0gYXJlYUluZGV4ICsgMjM7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGNpcmNsZWNlbnRlciA9IFswLCAwXTtcblx0ICAgIHZhciBkYXRhY2VudGVyID0gW2FyZWFJbmRleCAqIDggKyAzLCB0b3RhbFN1bV07XG5cdFxuXHQgICAgcmV0dXJuIFtjaXJjbGVjZW50ZXIsIGRhdGFjZW50ZXJdO1xuXHR9XG5cdFxuXHQvKipcblx0ICogc3RhcnREYXkgaXMgYWN0dWFsbHkgdGhlIHNlYXNvbmFsaXR5IGluZGV4LCBpZiBpdCBvY2N1cnMgYWZ0ZXIganVseSBpdCBzaG91bGQgYmUgZmxpcHBlZFxuXHQgKi9cblx0ZnVuY3Rpb24gZmluZFBvbGFyVGhyZXNob2xkcyhkYXRhLCBzdGFydERheSkge1xuXHQgICAgdmFyIHN0YXJ0SW5kZXggPSBNYXRoLmZsb29yKChzdGFydERheSAtIDMpIC8gOCk7XG5cdCAgICBpZiAoc3RhcnRJbmRleCA+IDIyKSB7XG5cdCAgICAgICAgc3RhcnRJbmRleCA9IHN0YXJ0SW5kZXggLSAyMztcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaSwgaiwgbGVuZ3RoLCBhcnI7XG5cdCAgICB2YXIgdG90YWxTdW0gPSAwO1xuXHQgICAgdmFyIHN1bTtcblx0ICAgIGxlbmd0aCA9IDQ2O1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGogPSAoc3RhcnRJbmRleCArIGkpICUgbGVuZ3RoO1xuXHQgICAgICAgIHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZmlmdGVlblRocmVzaG9sZCA9IHRvdGFsU3VtICogLjE1O1xuXHQgICAgdmFyIGVpZ2h0eVRocmVzaG9sZCA9IHRvdGFsU3VtICogLjgwO1xuXHQgICAgdmFyIGVpZ2h0eWZpdmVUaHJlc2hvbGQgPSB0b3RhbFN1bSAqIC44NTtcblx0ICAgIHZhciBmaWZ0ZWVuSW5kZXhGb3VuZCA9IGZhbHNlLFxuXHQgICAgICAgIGVpZ2h0eUluZGV4Rm91bmQgPSBmYWxzZSxcblx0ICAgICAgICBlaWdodHlmaXZlSW5kZXhGb3VuZCA9IGZhbHNlO1xuXHQgICAgdmFyIGZpZnRlZW5JbmRleCwgZWlnaHR5SW5kZXgsIGVpZ2h0eWZpdmVJbmRleDtcblx0XG5cdCAgICB0b3RhbFN1bSA9IDA7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBqID0gKHN0YXJ0SW5kZXggKyBpKSAlIGxlbmd0aDtcblx0ICAgICAgICB0b3RhbFN1bSArPSBwYXJzZUludChkYXRhW2pdLCAxMCk7XG5cdCAgICAgICAgaWYgKCFmaWZ0ZWVuSW5kZXhGb3VuZCAmJiB0b3RhbFN1bSA+IGZpZnRlZW5UaHJlc2hvbGQpIHtcblx0ICAgICAgICAgICAgZmlmdGVlbkluZGV4ID0gajtcblx0ICAgICAgICAgICAgZmlmdGVlbkluZGV4Rm91bmQgPSB0cnVlO1xuXHQgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFlaWdodHlJbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZWlnaHR5VGhyZXNob2xkKSB7XG5cdCAgICAgICAgICAgIGVpZ2h0eUluZGV4ID0gajtcblx0ICAgICAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IHRydWU7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIWVpZ2h0eWZpdmVJbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZWlnaHR5Zml2ZVRocmVzaG9sZCkge1xuXHQgICAgICAgICAgICBlaWdodHlmaXZlSW5kZXggPSBqO1xuXHQgICAgICAgICAgICBlaWdodHlmaXZlSW5kZXhGb3VuZCA9IHRydWU7XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgY2lyY2xlQ2VudGVyID0gWzAsIDBdO1xuXHRcblx0ICAgIHZhciBmaWZ0ZWVuRW5kID0gW2ZpZnRlZW5JbmRleCAqIDggKyAzLCAxMDBdO1xuXHQgICAgdmFyIGVpZ2h0eUVuZCA9IFtlaWdodHlJbmRleCAqIDggKyAzLCAxMDBdO1xuXHQgICAgdmFyIGVpZ2h0eWZpdmVFbmQgPSBbZWlnaHR5Zml2ZUluZGV4ICogOCArIDMsIDEwMF07XG5cdFxuXHQgICAgcmV0dXJuIFt7XG5cdCAgICAgICAgXCJsYWJlbFwiOiBcIjE1JVwiLFxuXHQgICAgICAgIFwiZGF0YVwiOiBbY2lyY2xlQ2VudGVyLCBmaWZ0ZWVuRW5kXVxuXHQgICAgfSwge1xuXHQgICAgICAgIFwibGFiZWxcIjogXCI4MCVcIixcblx0ICAgICAgICBcImRhdGFcIjogW2NpcmNsZUNlbnRlciwgZWlnaHR5RW5kXVxuXHQgICAgfSwge1xuXHQgICAgICAgIFwibGFiZWxcIjogXCI4NSVcIixcblx0ICAgICAgICBcImRhdGFcIjogW2NpcmNsZUNlbnRlciwgZWlnaHR5Zml2ZUVuZF1cblx0ICAgIH1dO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSEVMUEVSUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gZHJhd0xpbmVhclBhdGgoZGF0YSwgbGluZSwgc3ZnKSB7XG5cdCAgICByZXR1cm4gc3ZnLmFwcGVuZChcInBhdGhcIikuYXR0cihcImNsYXNzXCIsIFwibGluZVwiKS5hdHRyKFwiZFwiLCBsaW5lKGRhdGEpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhd1BvbGFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcblx0ICAgIHJldHVybiBzdmcuYXBwZW5kKFwicGF0aFwiKS5kYXR1bShkYXRhKS5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpLmF0dHIoXCJkXCIsIGxpbmUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmF3TGluZWFyUG9pbnRzKGRhdGEsIGxpbmUsIHN2ZywgYXZlcmFnZXMpIHtcblx0ICAgIHJldHVybiBzdmcuc2VsZWN0QWxsKFwicG9pbnRcIikuZGF0YShkYXRhKS5lbnRlcigpLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiY2xhc3NcIiwgXCJwb2ludFwiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkLCBpKSB7XG5cdCAgICAgICAgdmFyIHBvaW50ID0gQXJyYXkuaXNBcnJheShkKSA/IGQgOiBbaSAqIDggKyAzLCBkXTtcblx0ICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtwb2ludF0pLnNsaWNlKDEpLnNsaWNlKDAsIC0xKTtcblx0ICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBjb29ycyArIFwiKVwiO1xuXHQgICAgfSkuYXR0cihcInJcIiwgMykuYXR0cihcInN0cm9rZVwiLCBcIiMwMDBcIikuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24gKGQsIGkpIHtcblx0ICAgICAgICB2YXIgdmFsID0gQXJyYXkuaXNBcnJheShkKSA/IGRbMV0gOiBkO1xuXHQgICAgICAgIHJldHVybiBjb21wdXRlQ29sb3IodmFsLCBhdmVyYWdlc1tpICUgNDZdLCAzKTtcblx0ICAgIH0pLm9uKFwibW91c2VvdmVyXCIsIGhhbmRsZVBvaW50TW91c2VvdmVyKS5vbihcIm1vdXNlb3V0XCIsIGhhbmRsZVBvaW50TW91c2VvdXQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVQb2ludE1vdXNlb3ZlcihkKSB7XG5cdCAgICB2YXIgdGlwU3RyaW5nID0gQXJyYXkuaXNBcnJheShkKSA/IGZvcm1hdERhdGUoZFswXSkgKyBcIjogXCIgKyBkWzFdIDogXCJBdmVyYWdlOiBcIiArIGQ7XG5cdCAgICB0aXAuc2hvdyh0aXBTdHJpbmcpO1xuXHQgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDUpO1xuXHQgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIycHhcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdXQoZCkge1xuXHQgICAgdGlwLmhpZGUoKTtcblx0ICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCAzKTtcblx0ICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMXB4XCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVDaGVja2JveCh3cmFwcGVyLCBrZXksIHR5cGUsIHllYXIsIGNoYXJ0cywgZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpIHtcblx0ICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKS5hdHRyKFwidmFsdWVcIiwga2V5KS5wcm9wZXJ0eShcImNoZWNrZWRcIiwga2V5ID09PSB5ZWFyID8gdHJ1ZSA6IGZhbHNlKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3TGluZWFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwibGFiZWxcIikudGV4dChrZXkpLmF0dHIoXCJmb3JcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY29tcHV0ZUNvbG9yKHZhbHVlLCBtZWRpYW4sIHNjYWxlKSB7XG5cdCAgICB2YXIgZGlmZiA9IHZhbHVlIC0gbWVkaWFuO1xuXHQgICAgdmFyIHBlcmNlbnRfZGlmZiA9IE1hdGguYWJzKGRpZmYpIC8gbWVkaWFuICogMTAwICogc2NhbGU7XG5cdCAgICB2YXIgbGlnaHRuZXNzID0gMTAwIC0gcGVyY2VudF9kaWZmICsgXCIlXCI7XG5cdFxuXHQgICAgaWYgKGRpZmYgPiAwKSB7XG5cdCAgICAgICAgcmV0dXJuIFwiaHNsKDgsIDc5JSwgXCIgKyBsaWdodG5lc3MgKyBcIilcIjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIFwiaHNsKDIxOSwgNzklLCBcIiArIGxpZ2h0bmVzcyArIFwiKVwiO1xuXHQgICAgfVxuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIERBVEUgSEVMUEVSUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlRGF0ZShkYXRlKSB7XG5cdCAgICBkYXRlID0gZGF0ZS50b1N0cmluZygpO1xuXHQgICAgdmFyIHllYXIgPSBkYXRlLnN1YnN0cmluZygwLCA0KTtcblx0ICAgIHZhciBtb250aCA9IHBhcnNlSW50KGRhdGUuc3Vic3RyaW5nKDQsIDYpLCAxMCkgLSAxO1xuXHQgICAgdmFyIGRheSA9IGRhdGUuc3Vic3RyaW5nKDYsIDgpO1xuXHRcblx0ICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGFyc2VKdWxpYW5EYXkoZGF0ZSkge1xuXHQgICAgaWYgKHR5cGVvZiBkYXRlID09PSBcInN0cmluZ1wiKSB7XG5cdCAgICAgICAgZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcblx0ICAgICAgICByZXR1cm4gZGF0ZS5nZXRET1koKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGRhdGU7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZSkge1xuXHQgICAgaWYgKGRhdGUgPT09IFwiQXZlcmFnZVwiKSB7XG5cdCAgICAgICAgcmV0dXJuIGRhdGU7XG5cdCAgICB9XG5cdFxuXHQgICAgZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcblx0ICAgIHJldHVybiBmb3JtYXRNb250aChkYXRlLmdldE1vbnRoKCkpICsgXCIgXCIgKyBvcmRpbmFsX3N1ZmZpeF9vZihkYXRlLmdldERhdGUoKSkgKyBcIiwgXCIgKyBkYXRlLmdldEZ1bGxZZWFyKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdE1vbnRoKG1vbnRoKSB7XG5cdCAgICBzd2l0Y2ggKG1vbnRoKSB7XG5cdCAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJKYW4uXCI7XG5cdCAgICAgICAgY2FzZSAxOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJGZWIuXCI7XG5cdCAgICAgICAgY2FzZSAyOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJNYXIuXCI7XG5cdCAgICAgICAgY2FzZSAzOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJBcHIuXCI7XG5cdCAgICAgICAgY2FzZSA0OlxuXHQgICAgICAgICAgICByZXR1cm4gXCJNYXlcIjtcblx0ICAgICAgICBjYXNlIDU6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkp1bi5cIjtcblx0ICAgICAgICBjYXNlIDY6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkp1bC5cIjtcblx0ICAgICAgICBjYXNlIDc6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkF1Zy5cIjtcblx0ICAgICAgICBjYXNlIDg6XG5cdCAgICAgICAgICAgIHJldHVybiBcIlNlcC5cIjtcblx0ICAgICAgICBjYXNlIDk6XG5cdCAgICAgICAgICAgIHJldHVybiBcIk9jdC5cIjtcblx0ICAgICAgICBjYXNlIDEwOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJOb3YuXCI7XG5cdCAgICAgICAgY2FzZSAxMTpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiRGVjLlwiO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBvcmRpbmFsX3N1ZmZpeF9vZihkYXkpIHtcblx0ICAgIHZhciBqID0gZGF5ICUgMTAsXG5cdCAgICAgICAgayA9IGRheSAlIDEwMDtcblx0ICAgIGlmIChqID09PSAxICYmIGsgIT09IDExKSB7XG5cdCAgICAgICAgcmV0dXJuIGRheSArIFwic3RcIjtcblx0ICAgIH1cblx0ICAgIGlmIChqID09PSAyICYmIGsgIT09IDEyKSB7XG5cdCAgICAgICAgcmV0dXJuIGRheSArIFwibmRcIjtcblx0ICAgIH1cblx0ICAgIGlmIChqID09PSAzICYmIGsgIT09IDEzKSB7XG5cdCAgICAgICAgcmV0dXJuIGRheSArIFwicmRcIjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBkYXkgKyBcInRoXCI7XG5cdH1cblx0XG5cdHZhciBNT05USF9MQUJFTFMgPSB7XG5cdCAgICAwOiBcIkphblwiLFxuXHQgICAgMTogXCJGZWJcIixcblx0ICAgIDI6IFwiTWFyXCIsXG5cdCAgICAzOiBcIkFwclwiLFxuXHQgICAgNDogXCJNYXlcIixcblx0ICAgIDU6IFwiSnVuXCIsXG5cdCAgICA2OiBcIkp1bFwiLFxuXHQgICAgNzogXCJBdWdcIixcblx0ICAgIDg6IFwiU2VwXCIsXG5cdCAgICA5OiBcIk9jdFwiLFxuXHQgICAgMTA6IFwiTm92XCIsXG5cdCAgICAxMTogXCJEZWNcIlxuXHR9O1xuXG4vKioqLyB9LFxuLyogMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEJpbmRUYWJFdmVudHM7XG5cdFxuXHR2YXIgX3BhbmVsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdFxuXHRmdW5jdGlvbiBCaW5kVGFiRXZlbnRzKCkge1xuXHQgIGQzLnNlbGVjdEFsbChcIi5wYW5lbC10b3AtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2spO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVUYWJIZWFkZXJCdG5DbGljaygpIHtcblx0ICAvLyBJZiB0aGUgc2VjdGlvbiBpcyBhbHJlYWR5IGFjdGl2ZSwgZG8gbm90aGluZ1xuXHQgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHJldHVybjtcblx0XG5cdCAgdG9nZ2xlV3JhcHBlckFjdGl2ZVN0YXRlcygpO1xuXHQgIHRvZ2dsZU1hcFBhZGRpbmcoKTtcblx0ICAoMCwgX3BhbmVsLnVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQpKCk7XG5cdFxuXHQgIGQzLnNlbGVjdEFsbCgnLnBhbmVsLXRvcC1idG4sIC5wYW5lbC1zZWN0aW9uLXdyYXBwZXInKS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gIWQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdhY3RpdmUnKTtcblx0ICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9nZ2xlV3JhcHBlckFjdGl2ZVN0YXRlcygpIHtcblx0ICB2YXIgd3JhcHBlcnMgPSBkMy5zZWxlY3RBbGwoJyNtYXAtd3JhcHBlciwgI3JpZ2h0LXBhbmVsJyk7XG5cdFxuXHQgIHZhciBsYXllcnNBY3RpdmUgPSB3cmFwcGVycy5jbGFzc2VkKCdsYXllcnMtYWN0aXZlJyk7XG5cdCAgdmFyIGdyYXBoc0FjdGl2ZSA9IHdyYXBwZXJzLmNsYXNzZWQoJ2dyYXBocy1hY3RpdmUnKTtcblx0XG5cdCAgd3JhcHBlcnMuY2xhc3NlZCgnbGF5ZXJzLWFjdGl2ZScsICFsYXllcnNBY3RpdmUpLmNsYXNzZWQoJ2dyYXBocy1hY3RpdmUnLCAhZ3JhcGhzQWN0aXZlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9nZ2xlTWFwUGFkZGluZygpIHtcblx0ICB2YXIgcGFkZGluZ1JpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyaWdodC1wYW5lbFwiKS5vZmZzZXRXaWR0aDtcblx0ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcC13cmFwcGVyXCIpLnN0eWxlLnBhZGRpbmdSaWdodCA9IHBhZGRpbmdSaWdodCArIFwicHhcIjtcblx0fVxuXG4vKioqLyB9LFxuLyogMjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5DcmVhdGVNYXAgPSBDcmVhdGVNYXA7XG5cdGV4cG9ydHMuR2V0TWFwID0gR2V0TWFwO1xuXHR2YXIgbWFwO1xuXHRcblx0ZnVuY3Rpb24gQ3JlYXRlTWFwKG1hcENvbmZpZykge1xuXHQgICAgdmFyIGlkID0gbWFwQ29uZmlnLmlkIHx8IFwibWFwXCI7XG5cdCAgICB2YXIgb3B0aW9ucyA9IG1hcENvbmZpZy5vcHRpb25zIHx8IHsgXCJzY3JvbGxXaGVlbFpvb21cIjogZmFsc2UgfTtcblx0ICAgIHZhciBpbml0aWFsQ2VudGVyID0gbWFwQ29uZmlnLmNlbnRlciB8fCBbXCIzOC41XCIsIFwiLTgxXCJdO1xuXHQgICAgdmFyIGluaXRpYWxab29tID0gbWFwQ29uZmlnLnpvb20gfHwgNjtcblx0XG5cdCAgICBtYXAgPSBMLm1hcChpZCwgb3B0aW9ucykuc2V0Vmlldyhpbml0aWFsQ2VudGVyLCBpbml0aWFsWm9vbSk7XG5cdCAgICBMLmNvbnRyb2wuYXR0cmlidXRpb24oKS5hZGRUbyhtYXApO1xuXHQgICAgcmV0dXJuIG1hcDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gR2V0TWFwKCkge1xuXHQgICAgcmV0dXJuIG1hcDtcblx0fVxuXG4vKioqLyB9LFxuLyogMjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQmluZFVwZGF0ZVNoYXJlVXJsID0gQmluZFVwZGF0ZVNoYXJlVXJsO1xuXHRleHBvcnRzLnVwZGF0ZVNoYXJlVXJsID0gdXBkYXRlU2hhcmVVcmw7XG5cdGV4cG9ydHMuQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnID0gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0XG5cdHZhciBfYmFzZWxheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHR2YXIgX2xheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7XG5cdFxuXHRmdW5jdGlvbiBCaW5kVXBkYXRlU2hhcmVVcmwobWFwKSB7XG5cdCAgICBtYXAub24oXCJtb3ZlZW5kXCIsIHVwZGF0ZVNoYXJlVXJsKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlU2hhcmVVcmwoZSkge1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkdldE1hcCkoKTtcblx0XG5cdCAgICB2YXIgcGFyYW1zID0gW21ha2VDZW50ZXJTdHJpbmcobWFwKSwgbWFrZVpvb21TdHJpbmcobWFwKSwgbWFrZUxheWVyU3RyaW5nKG1hcCksIG1ha2VCYXNlTGF5ZXJTdHJpbmcobWFwKV07XG5cdFxuXHQgICAgc2V0U2hhcmVVcmwobWFrZVNoYXJlVXJsKHBhcmFtcykpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlU2hhcmVVcmwocGFyYW1zKSB7XG5cdCAgICByZXR1cm4gXCI/XCIgKyBwYXJhbXMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7XG5cdCAgICAgICAgcmV0dXJuIHAgIT09IHVuZGVmaW5lZDtcblx0ICAgIH0pLmpvaW4oXCImXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRTaGFyZVVybCh1cmwpIHtcblx0ICAgIGlmICh3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcblx0ICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIFwiXCIsIHVybCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VDZW50ZXJTdHJpbmcobWFwKSB7XG5cdCAgICB2YXIgY2VudGVyID0gbWFwLmdldENlbnRlcigpO1xuXHQgICAgcmV0dXJuIFwiY2VudGVyPVwiICsgY2VudGVyLmxhdC50b1N0cmluZygpICsgXCIsXCIgKyBjZW50ZXIubG5nLnRvU3RyaW5nKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2Vab29tU3RyaW5nKG1hcCkge1xuXHQgICAgcmV0dXJuIFwiem9vbT1cIiArIG1hcC5nZXRab29tKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYXllclN0cmluZyhtYXApIHtcblx0ICAgIHZhciBsYXllcnMgPSBbXTtcblx0ICAgIHZhciBvcGFjaXR5VmFscyA9IHt9O1xuXHQgICAgdmFyIGN1cnJlbnRMYXllcnMgPSAoMCwgX2xheWVyLkdldEN1cnJlbnRMYXllcnMpKCk7XG5cdFxuXHQgICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICB2YXIgb3B0aW9ucyA9IGxheWVyLm9wdGlvbnM7XG5cdCAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sYXllcnMpIHtcblx0ICAgICAgICAgICAgb3BhY2l0eVZhbHNbb3B0aW9ucy5sYXllcnNdID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShcIm9wYWNpdHlcIikgPyBvcHRpb25zLm9wYWNpdHkgOiBcIjFcIjtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgY3VycmVudExheWVyO1xuXHQgICAgdmFyIGk7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgY3VycmVudExheWVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGN1cnJlbnRMYXllciA9IGN1cnJlbnRMYXllcnNbaV07XG5cdCAgICAgICAgbGF5ZXJzLnB1c2goY3VycmVudExheWVyKTtcblx0ICAgICAgICBsYXllcnMucHVzaChvcGFjaXR5VmFsc1tjdXJyZW50TGF5ZXJdKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBcImxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUJhc2VMYXllclN0cmluZyhtYXApIHtcblx0ICAgIHZhciBsYXllcnMgPSBbXTtcblx0ICAgIG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMgJiYgbGF5ZXIub3B0aW9ucy50eXBlID09PSBfYmFzZWxheWVyLkJBU0VfTEFZRVJfVFlQRSkge1xuXHQgICAgICAgICAgICBsYXllcnMucHVzaChsYXllci5vcHRpb25zLmlkKTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBcImJhc2VsYXllcnM9XCIgKyBsYXllcnMuam9pbihcIixcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhcnNlU2hhcmVVcmwoKSB7XG5cdCAgICB2YXIgcGFyYW1zID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcblx0ICAgIGlmIChwYXJhbXMgPT09IFwiXCIpIHJldHVybjtcblx0XG5cdCAgICBwYXJhbXMgPSBnZXRQYXJhbXNBcnJheShwYXJhbXMpO1xuXHQgICAgcGFyYW1zID0gbWFrZUtleWVkUGFyYW1zT2JqZWN0KHBhcmFtcyk7XG5cdFxuXHQgICAgZm9ybWF0UGFyYW1zKHBhcmFtcyk7XG5cdCAgICByZXR1cm4gcGFyYW1zO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRQYXJhbXNBcnJheShwYXJhbXMpIHtcblx0ICAgIHBhcmFtcyA9IHBhcmFtcy5zdWJzdHJpbmcoMSk7XG5cdCAgICBwYXJhbXMgPSB1bm1hbmdsZVBhcmFtU3RyaW5nKHBhcmFtcyk7XG5cdCAgICByZXR1cm4gcGFyYW1zLnNwbGl0KFwiJlwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdW5tYW5nbGVQYXJhbVN0cmluZyhwYXJhbXMpIHtcblx0ICAgIHJldHVybiBwYXJhbXMucmVwbGFjZSgvXFwlMltjfENdL2csIFwiLFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUtleWVkUGFyYW1zT2JqZWN0KHBhcmFtc0Fycikge1xuXHQgICAgdmFyIHBhcnNlZFBhcmFtcyA9IHt9O1xuXHQgICAgdmFyIHBhcmFtUGFpcjtcblx0ICAgIHZhciBpO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBwYXJhbXNBcnIubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBwYXJhbVBhaXIgPSBwYXJhbXNBcnJbaV0uc3BsaXQoXCI9XCIpO1xuXHQgICAgICAgIHBhcnNlZFBhcmFtc1twYXJhbVBhaXJbMF1dID0gcGFyYW1QYWlyWzFdO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBwYXJzZWRQYXJhbXM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFBhcmFtcyhwYXJhbXMpIHtcblx0ICAgIGlmIChwYXJhbXMuY2VudGVyKSBwYXJhbXMuY2VudGVyID0gZm9ybWF0Q2VudGVyUGFyYW0ocGFyYW1zLmNlbnRlcik7XG5cdCAgICBpZiAocGFyYW1zLmxheWVycykgcGFyYW1zLmxheWVycyA9IGZvcm1hdExheWVyUGFyYW0ocGFyYW1zLmxheWVycyk7XG5cdCAgICBpZiAocGFyYW1zLmJhc2VsYXllcnMpIHBhcmFtcy5iYXNlbGF5ZXJzID0gZm9ybWF0QmFzZUxheWVyUGFyYW0ocGFyYW1zLmJhc2VsYXllcnMpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRDZW50ZXJQYXJhbShjZW50ZXIpIHtcblx0ICAgIHJldHVybiBjZW50ZXIuc3BsaXQoXCIsXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRMYXllclBhcmFtKGxheWVycykge1xuXHQgICAgdmFyIGZvcm1hdHRlZExheWVycyA9IHtcblx0ICAgICAgICBcImVuYWJsZWRMYXllcnNcIjogW10sXG5cdCAgICAgICAgXCJvcGFjaXR5VmFsc1wiOiB7fVxuXHQgICAgfTtcblx0ICAgIHZhciBsYXllcklkO1xuXHQgICAgdmFyIGk7XG5cdFxuXHQgICAgbGF5ZXJzID0gbGF5ZXJzLnNwbGl0KFwiLFwiKTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpID0gaSArIDIpIHtcblx0ICAgICAgICBsYXllcklkID0gbGF5ZXJzW2ldO1xuXHQgICAgICAgIGZvcm1hdHRlZExheWVycy5lbmFibGVkTGF5ZXJzLnB1c2gobGF5ZXJJZCk7XG5cdCAgICAgICAgZm9ybWF0dGVkTGF5ZXJzLm9wYWNpdHlWYWxzW2xheWVySWRdID0gbGF5ZXJzW2kgKyAxXTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gZm9ybWF0dGVkTGF5ZXJzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRCYXNlTGF5ZXJQYXJhbShiYXNlbGF5ZXJzKSB7XG5cdCAgICByZXR1cm4gYmFzZWxheWVycy5zcGxpdChcIixcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZyhjb25maWcpIHtcblx0ICAgIHZhciBzaGFyZSA9IHBhcnNlU2hhcmVVcmwoKTtcblx0ICAgIGlmICghc2hhcmUpIHJldHVybjtcblx0ICAgIGlmIChzaGFyZS5jZW50ZXIpIGNvbmZpZy5tYXAuY2VudGVyID0gc2hhcmUuY2VudGVyO1xuXHQgICAgaWYgKHNoYXJlLnpvb20pIGNvbmZpZy5tYXAuem9vbSA9IHNoYXJlLnpvb207XG5cdCAgICBpZiAoc2hhcmUubGF5ZXJzKSBhZGRMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmUubGF5ZXJzLCBjb25maWcpO1xuXHQgICAgaWYgKHNoYXJlLmJhc2VsYXllcnMpIGFkZEJhc2VMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmUuYmFzZWxheWVycywgY29uZmlnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlTGF5ZXJTZXR0aW5ncywgY29uZmlnKSB7XG5cdCAgICB2YXIgZW5hYmxlZExheWVycyA9IHNoYXJlTGF5ZXJTZXR0aW5ncy5lbmFibGVkTGF5ZXJzO1xuXHQgICAgY29uZmlnW1wiYWN0aXZlLWxheWVyc1wiXSA9IGVuYWJsZWRMYXllcnM7XG5cdFxuXHQgICAgdmFyIGksIGosIHByb3AsIGxheWVyZ3JvdXA7XG5cdCAgICB2YXIgZW5hYmxlZExheWVyO1xuXHQgICAgdmFyIGZvdW5kTGF5ZXI7XG5cdCAgICB2YXIgbGF5ZXJzID0gY29uZmlnLmxheWVycztcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgZW5hYmxlZExheWVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGZvdW5kTGF5ZXIgPSBmYWxzZTtcblx0ICAgICAgICBlbmFibGVkTGF5ZXIgPSBlbmFibGVkTGF5ZXJzW2ldO1xuXHQgICAgICAgIGZvciAocHJvcCBpbiBsYXllcnMpIHtcblx0ICAgICAgICAgICAgaWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcblx0ICAgICAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcblx0ICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGxheWVyZ3JvdXAubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgICAgICAgIGlmIChsYXllcmdyb3VwW2pdLmlkID09PSBlbmFibGVkTGF5ZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICBsYXllcmdyb3VwW2pdLm9wYWNpdHkgPSBzaGFyZUxheWVyU2V0dGluZ3Mub3BhY2l0eVZhbHNbZW5hYmxlZExheWVyXTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3VuZExheWVyID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoZm91bmRMYXllcikgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRCYXNlTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlQmFzZUxheWVyU2V0dGluZ3MsIGNvbmZpZykge1xuXHQgICAgdmFyIGJhc2VsYXllcnMgPSBjb25maWcuYmFzZWxheWVycztcblx0ICAgIHZhciBiYXNlbGF5ZXI7XG5cdCAgICB2YXIgaTtcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgYmFzZWxheWVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGJhc2VsYXllciA9IGJhc2VsYXllcnNbaV07XG5cdCAgICAgICAgYmFzZWxheWVyLmFjdGl2ZSA9IHNoYXJlQmFzZUxheWVyU2V0dGluZ3MuaW5kZXhPZihiYXNlbGF5ZXIuaWQpICE9PSAtMSA/IHRydWUgOiBmYWxzZTtcblx0ICAgIH1cblx0fVxuXG4vKioqLyB9LFxuLyogMjggKi8sXG4vKiAyOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSxcbi8qIDMwICovLFxuLyogMzEgKi8sXG4vKiAzMiAqLyxcbi8qIDMzICovLFxuLyogMzQgKi8sXG4vKiAzNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkdldEN1cnJlbnRMYXllcnMgPSBHZXRDdXJyZW50TGF5ZXJzO1xuXHRleHBvcnRzLkNyZWF0ZURlZmF1bHRMYXllcnMgPSBDcmVhdGVEZWZhdWx0TGF5ZXJzO1xuXHRleHBvcnRzLnRvZ2dsZUxheWVyID0gdG9nZ2xlTGF5ZXI7XG5cdGV4cG9ydHMuZW5hYmxlTGF5ZXIgPSBlbmFibGVMYXllcjtcblx0ZXhwb3J0cy5kaXNhYmxlTGF5ZXIgPSBkaXNhYmxlTGF5ZXI7XG5cdGV4cG9ydHMudXBkYXRlTGF5ZXJPcGFjaXR5ID0gdXBkYXRlTGF5ZXJPcGFjaXR5O1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdC8qKlxuXHQgKiBOZWVkZWQgZm9yIHRoZSBzaGFyZSB1cmwgc2luY2UgTGVhZmxldCBkb2VzIG5vdCBoYXZlIGEgZGVmYXVsdCB3YXkgdG8gc3VyZmFjZVxuXHQgKiB0aGUgb3JkZXIgb2YgbGF5ZXJzIGluIHRoZSBtYXBcblx0ICovXG5cdHZhciBfY3VycmVudF9sYXllcnMgPSBbXTtcblx0XG5cdC8qKlxuXHQgKiBOb3RlOiBsYXllciBpcyBub3QgdGhlIGxlYWZsZXQgY29uY2VwdCBvZiBhIGxheWVyLCBidXQgcmF0aGVyIHRoZSBpbnRlcm5hbFxuXHQgKiAgICAgICBvYmplY3Qgd2hpY2ggdHJhY2tzIHRoZW0uIGxheWVyLm1hcExheWVyIGlzIHRoZSBwb2ludGVyIHRvIHRoZVxuXHQgKiAgICAgICBsZWFmbGV0IGxheWVyLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIEdldEN1cnJlbnRMYXllcnMoKSB7XG5cdCAgICByZXR1cm4gX2N1cnJlbnRfbGF5ZXJzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVEZWZhdWx0TGF5ZXJzKGxheWVycywgZGVmYXVsdExheWVycykge1xuXHQgICAgdmFyIGksIGosIHByb3AsIGxheWVyZ3JvdXA7XG5cdCAgICB2YXIgZGVmYXVsdExheWVyO1xuXHQgICAgdmFyIGZvdW5kTGF5ZXI7XG5cdFxuXHQgICAgaWYgKCFkZWZhdWx0TGF5ZXJzIHx8IGRlZmF1bHRMYXllcnMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGRlZmF1bHRMYXllcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBmb3VuZExheWVyID0gZmFsc2U7XG5cdCAgICAgICAgZGVmYXVsdExheWVyID0gZGVmYXVsdExheWVyc1tpXTtcblx0ICAgICAgICBmb3IgKHByb3AgaW4gbGF5ZXJzKSB7XG5cdCAgICAgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG5cdCAgICAgICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XG5cdCAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsYXllcmdyb3VwLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZGVmYXVsdExheWVyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZW5hYmxlTGF5ZXIobGF5ZXJncm91cFtqXSk7XG5cdCAgICAgICAgICAgICAgICAgICAgZm91bmRMYXllciA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9nZ2xlTGF5ZXIobGF5ZXIpIHtcblx0ICAgIGlmICghbGF5ZXIuYWN0aXZlKSB7XG5cdCAgICAgICAgZW5hYmxlTGF5ZXIobGF5ZXIpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBkaXNhYmxlTGF5ZXIobGF5ZXIpO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBlbmFibGVMYXllcihsYXllcikge1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkdldE1hcCkoKTtcblx0XG5cdCAgICBsYXllci5hY3RpdmUgPSB0cnVlO1xuXHQgICAgbGF5ZXIubWFwTGF5ZXIgPSBsYXllci5tYXBMYXllciB8fCBtYWtlV21zVGlsZUxheWVyKGxheWVyKTtcblx0ICAgIG1hcC5hZGRMYXllcihsYXllci5tYXBMYXllcik7XG5cdCAgICBhZGRMYXllclRvSW50ZXJuYWxUcmFja2VyKGxheWVyKTtcblx0ICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIobGF5ZXIpIHtcblx0ICAgIF9jdXJyZW50X2xheWVycy5wdXNoKGxheWVyLmlkKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZGlzYWJsZUxheWVyKGxheWVyKSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIGxheWVyLmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgaWYgKGxheWVyLm1hcExheWVyICYmIG1hcC5oYXNMYXllcihsYXllci5tYXBMYXllcikpIHtcblx0ICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobGF5ZXIubWFwTGF5ZXIpO1xuXHQgICAgfVxuXHQgICAgcmVtb3ZlTGF5ZXJGcm9tSW50ZXJuYWxUcmFja2VyKGxheWVyKTtcblx0ICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZUxheWVyRnJvbUludGVybmFsVHJhY2tlcihsYXllcikge1xuXHQgICAgdmFyIGxvYyA9IF9jdXJyZW50X2xheWVycy5pbmRleE9mKGxheWVyLmlkKTtcblx0ICAgIGlmIChsb2MgPT09IC0xKSByZXR1cm47XG5cdCAgICBfY3VycmVudF9sYXllcnMuc3BsaWNlKGxvYywgMSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZUxheWVyT3BhY2l0eShsYXllciwgbmV3T3BhY2l0eSkge1xuXHQgICAgbGF5ZXIub3BhY2l0eSA9IG5ld09wYWNpdHk7XG5cdCAgICBsYXllci5tYXBMYXllci5zZXRPcGFjaXR5KG5ld09wYWNpdHkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlV21zVGlsZUxheWVyKGxheWVyKSB7XG5cdCAgICByZXR1cm4gTC50aWxlTGF5ZXIud21zKGxheWVyLnVybCwge1xuXHQgICAgICAgIGxheWVyczogbGF5ZXIuaWQsXG5cdCAgICAgICAgdHJhbnNwYXJlbnQ6IGxheWVyLnRyYW5zcGFyZW50IHx8IHRydWUsXG5cdCAgICAgICAgdmVyc2lvbjogbGF5ZXIudmVyc2lvbiB8fCAnMS4zLjAnLFxuXHQgICAgICAgIGNyczogbGF5ZXIuY3JzIHx8IEwuQ1JTLkVQU0c0MzI2LFxuXHQgICAgICAgIGZvcm1hdDogbGF5ZXIuZm9ybWF0IHx8ICdpbWFnZS9wbmcnLFxuXHQgICAgICAgIG9wYWNpdHk6IGxheWVyLm9wYWNpdHkgfHwgXCIxXCJcblx0ICAgIH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAzNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5zZXRTbGlkZXJJbml0aWFsUG9zID0gc2V0U2xpZGVySW5pdGlhbFBvcztcblx0ZXhwb3J0cy5tYWtlT3BhY2l0eVNsaWRlciA9IG1ha2VPcGFjaXR5U2xpZGVyO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHRcblx0dmFyIF9sYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpO1xuXHRcblx0Ly8gc2V0IGl0IG1hbnVhbGx5IGZvciBub3dcblx0dmFyIE9QQUNJVFlfUkFOR0VfTUFYID0gOTA7XG5cdFxuXHR2YXIgb3BhY2l0eVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzEsIDBdKS5yYW5nZShbMCwgT1BBQ0lUWV9SQU5HRV9NQVhdKS5jbGFtcCh0cnVlKTtcblx0XG5cdGZ1bmN0aW9uIHNldFNsaWRlckluaXRpYWxQb3MobGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyKSB7XG5cdFxuXHQgICAgdmFyIGxheWVyT3BhY2l0eSA9IGxheWVyLm9wYWNpdHkgfHwgMTtcblx0ICAgIHZhciBoYW5kbGVPZmZzZXQgPSBvcGFjaXR5U2NhbGUobGF5ZXJPcGFjaXR5KTtcblx0XG5cdCAgICBsYXllclRvb2xzV3JhcHBlci5zZWxlY3QoJy5vcGFjaXR5LXNsaWRlci1oYW5kbGUnKS5zdHlsZSgndG9wJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiAnJyArIGhhbmRsZU9mZnNldCArICdweCc7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZU9wYWNpdHlTbGlkZXIobGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyKSB7XG5cdFxuXHQgICAgdmFyIGxheWVyT3BhY2l0eSA9IGxheWVyLm9wYWNpdHkgIT09IHVuZGVmaW5lZCA/IGxheWVyLm9wYWNpdHkgOiAxO1xuXHRcblx0ICAgIHZhciB3cmFwcGVyID0gbGF5ZXJUb29sc1dyYXBwZXIuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdvcGFjaXR5LXNsaWRlci13cmFwcGVyJyk7XG5cdFxuXHQgICAgdmFyIG9wYWNpdHlQZXJjZW50SW5kaWNhdG9yID0gd3JhcHBlci5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktc2xpZGVyLWluZGljYXRvcicpO1xuXHRcblx0ICAgIG1ha2VTbGlkZXJUcmFjayh3cmFwcGVyLCBsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIsIGxheWVyT3BhY2l0eSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VTbGlkZXJUcmFjayh3cmFwcGVyLCBsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIsIGxheWVyT3BhY2l0eSkge1xuXHRcblx0ICAgIHZhciBvdmVybGF5ID0gd3JhcHBlci5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktc2xpZGVyLXRyYWNrLW92ZXJsYXknKTtcblx0XG5cdCAgICB2YXIgdHJhY2sgPSBvdmVybGF5LmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXItdHJhY2snKTtcblx0XG5cdCAgICBvdmVybGF5LmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXItaGFuZGxlJyk7XG5cdFxuXHQgICAgaWYgKGxheWVyLmFjdGl2ZSkgc2V0U2xpZGVySW5pdGlhbFBvcyhsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIpO1xuXHQgICAgc2V0RHJhZ0V2ZW50TGlzdGVuZXIod3JhcHBlciwgbGF5ZXIsIGxheWVyT3BhY2l0eSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldERyYWdFdmVudExpc3RlbmVyKHdyYXBwZXIsIGxheWVyLCBsYXllck9wYWNpdHkpIHtcblx0ICAgIHZhciBvdmVybGF5ID0gd3JhcHBlci5zZWxlY3QoJy5vcGFjaXR5LXNsaWRlci10cmFjay1vdmVybGF5Jyk7XG5cdCAgICBvdmVybGF5LmNhbGwoZDMuZHJhZygpLm9uKCdzdGFydCBkcmFnJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBuZXdPcGFjaXR5ID0gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSk7XG5cdCAgICAgICAgKDAsIF9sYXllci51cGRhdGVMYXllck9wYWNpdHkpKGxheWVyLCBuZXdPcGFjaXR5KTtcblx0ICAgICAgICBhZGp1c3RTbGlkZXJIYW5kbGUob3ZlcmxheSwgbmV3T3BhY2l0eSk7XG5cdCAgICB9KS5vbignZW5kJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdCAgICB9KSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkanVzdFNsaWRlckhhbmRsZShvdmVybGF5LCBuZXdPcGFjaXR5KSB7XG5cdCAgICB2YXIgaGFuZGxlID0gb3ZlcmxheS5zZWxlY3QoJy5vcGFjaXR5LXNsaWRlci1oYW5kbGUnKTtcblx0ICAgIGhhbmRsZS5zdHlsZSgndG9wJywgJycgKyBvcGFjaXR5U2NhbGUobmV3T3BhY2l0eSkgKyAncHgnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSkge1xuXHQgICAgdmFyIHlQb3MgPSBkMy5tb3VzZShvdmVybGF5Lm5vZGUoKSlbMV07XG5cdCAgICB2YXIgbmV3T3BhY2l0eSA9IG9wYWNpdHlTY2FsZS5pbnZlcnQoeVBvcyk7XG5cdCAgICByZXR1cm4gbmV3T3BhY2l0eTtcblx0fVxuXG4vKioqLyB9LFxuLyogMzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ3JlYXRlTG9nbztcblx0Lypcblx0ICBcImxvZ29cIjoge1xuXHQgICAgXCJpbWFnZVwiOiBcImltZ3MvbGFuZGF0X2xvZ29fYmx1ZS5wbmdcIixcblx0ICAgIFwiYWx0XCI6IFwiTG9nbyBmb3IgdGhlIExhbkRhdCBwcm9qZWN0XCIsXG5cdCAgICBcImxpbmtcIjogXCJodHRwczovL2xhbmRhdC1kZXYubmVtYWMub3JnXCIsXG5cdCAgICBcImxvY2F0aW9uXCI6IFtcImJvdHRvbVwiLCBcInJpZ2h0XCJdXG5cdCAgfSxcblx0Ki9cblx0XG5cdGZ1bmN0aW9uIENyZWF0ZUxvZ28obG9nb2RhdGEpIHtcblx0ICAgIGlmICghbG9nb2RhdGEuaW1hZ2UpIHJldHVybjtcblx0XG5cdCAgICB2YXIgbG9nb1dyYXBwZXIgPSBjcmVhdGVMb2dvV3JhcHBlcigpO1xuXHQgICAgdmFyIGxvZ29JbWFnZSA9IGNyZWF0ZUxvZ29JbWFnZShsb2dvZGF0YSk7XG5cdCAgICB2YXIgbG9nb0xpbmsgPSBsb2dvZGF0YS5saW5rID8gY3JlYXRlTG9nb0xpbmsobG9nb2RhdGEubGluaykgOiBudWxsO1xuXHRcblx0ICAgIGlmIChsb2dvTGluaykge1xuXHQgICAgICAgIGxvZ29MaW5rLmFwcGVuZENoaWxkKGxvZ29JbWFnZSk7XG5cdCAgICAgICAgbG9nb1dyYXBwZXIuYXBwZW5kQ2hpbGQobG9nb0xpbmspO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBsb2dvV3JhcHBlci5hcHBlbmRDaGlsZChsb2dvSW1hZ2UpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpbnNlcnRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShsb2dvZGF0YS5sb2NhdGlvbilbMF07XG5cdCAgICB2YXIgZXhpc3RpbmdDaGlsZCA9IGluc2VydEVsZW1lbnQuZmlyc3RDaGlsZDtcblx0ICAgIGluc2VydEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGxvZ29XcmFwcGVyLCBleGlzdGluZ0NoaWxkKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlTG9nb1dyYXBwZXIoKSB7XG5cdCAgICB2YXIgbG9nb1dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHQgICAgZDMuc2VsZWN0KGxvZ29XcmFwcGVyKS5jbGFzc2VkKFwicHJvamVjdC1sb2dvXCIsIHRydWUpO1xuXHQgICAgcmV0dXJuIGxvZ29XcmFwcGVyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVMb2dvSW1hZ2UobG9nb2RhdGEpIHtcblx0ICAgIHZhciBsb2dvSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuXHQgICAgbG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBsb2dvZGF0YS5pbWFnZSk7XG5cdCAgICBpZiAobG9nb2RhdGEubGFiZWwpIHtcblx0ICAgICAgICBsb2dvSW1hZ2Uuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGxvZ29kYXRhLmxhYmVsKTtcblx0ICAgICAgICBsb2dvSW1hZ2Uuc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgbG9nb2RhdGEubGFiZWwpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGxvZ29JbWFnZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlTG9nb0xpbmsobGluaykge1xuXHQgICAgdmFyIGxvZ29MaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG5cdCAgICBsb2dvTGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIGxpbmspO1xuXHQgICAgbG9nb0xpbmsuc2V0QXR0cmlidXRlKFwidGFyZ2V0XCIsIFwiX2JsYW5rXCIpO1xuXHQgICAgcmV0dXJuIGxvZ29MaW5rO1xuXHR9XG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBpbmRleF9idW5kbGUuanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA3ZjJmZDcxNjZkMjFlZWI1ZjJkMyIsImltcG9ydCBQYXJzZUNvbmZpZyBmcm9tICcuL3BhcnNlcic7XG5pbXBvcnQgQ3JlYXRlU2VhcmNoIGZyb20gJy4vc2VhcmNoJztcbmltcG9ydCB7U2V0dXBQYW5lbH0gZnJvbSAnLi9wYW5lbCc7XG5pbXBvcnQge0NyZWF0ZUJhc2VMYXllcnN9IGZyb20gJy4vYmFzZWxheWVyJztcbmltcG9ydCB7U2V0dXBHcmFwaHMsIEJpbmRHcmFwaEV2ZW50c30gZnJvbSAnLi9ncmFwaCdcbmltcG9ydCBCaW5kVGFiRXZlbnRzIGZyb20gJy4vdGFicydcbmltcG9ydCB7Q3JlYXRlTWFwfSBmcm9tICcuL21hcCdcbmltcG9ydCB7QmluZFVwZGF0ZVNoYXJlVXJsLCBBZGRTaGFyZVNldHRpbmdzVG9Db25maWd9IGZyb20gJy4vc2hhcmUnXG5pbXBvcnQge0NyZWF0ZURlZmF1bHRMYXllcnN9IGZyb20gJy4vbGF5ZXInXG5pbXBvcnQgQ3JlYXRlTG9nbyBmcm9tICcuL2xvZ28nO1xuXG52YXIgY3NzID0gcmVxdWlyZSgnLi4vY3NzL3Nhc3MvbGFuZGF0LnNjc3MnKVxuXG4vLyBEb2VzIG5vdCByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcbnZhciBCYXNlID0gZnVuY3Rpb24gKGNvbmZpZykge1xuICAgIFBhcnNlQ29uZmlnKGNvbmZpZywgY2FsbGJhY2spO1xuICAgIFNldHVwR3JhcGhzKCk7XG4gICAgQmluZFRhYkV2ZW50cygpO1xufVxuXG4vLyBEb2VzIHJlbHkgb24gbWFwIG9iamVjdCBvciBjb25maWcgZmlsZVxudmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICBBZGRTaGFyZVNldHRpbmdzVG9Db25maWcoZGF0YSlcbiAgICB2YXIgbWFwID0gQ3JlYXRlTWFwKGRhdGEubWFwKTtcbiAgICBDcmVhdGVCYXNlTGF5ZXJzKG1hcCwgZGF0YS5iYXNlbGF5ZXJzKTtcbiAgICBDcmVhdGVEZWZhdWx0TGF5ZXJzKGRhdGEubGF5ZXJzLCBkYXRhW1wiYWN0aXZlLWxheWVyc1wiXSk7XG4gICAgU2V0dXBQYW5lbChkYXRhLmxheWVycywgZGF0YS5sYXlvdXQpO1xuICAgIENyZWF0ZVNlYXJjaChtYXApO1xuICAgIENyZWF0ZUxvZ28oZGF0YS5sb2dvKTtcbiAgICBCaW5kR3JhcGhFdmVudHMobWFwKTtcbiAgICBCaW5kVXBkYXRlU2hhcmVVcmwobWFwKTtcbn1cblxud2luZG93LkJhc2UgPSBCYXNlO1xuXG5leHBvcnQgZGVmYXVsdCB7QmFzZX07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9iYXNlLmpzIiwiLyoqXG4gKiBQYXJzZXMgYSBjb25maWcgZmlsZS4gU2luY2UgdGhlIHByb2Nlc3MgdG8gZ2V0IGV4dGVybmFsIGZpbGVzXG4gKiB1c2VzIEFKQVggeW91IG5lZWQgdG8gcGFzcyBhIGNhbGxiYWNrIHRvIGhhbmRsZSB0aGUgbmV4dCBzdGVwc1xuICogb2YgdXNpbmcgdGhlIGNvbmZpZyBmaWxlLCBzaW5jZSB3ZSBkbyBub3Qga25vdyBob3cgbG9uZyBpdFxuICogd2lsbCB0YWtlIHRvIGdyYWIgdGhlIGZpbGUuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFBhcnNlQ29uZmlnIChjb25maWdGaWxlLCBjYWxsYmFjaykge1xuICAgIEdldENvbmZpZyhjb25maWdGaWxlLCBjYWxsYmFjayk7XG59XG5cbmZ1bmN0aW9uIEdldENvbmZpZyAoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoeG1saHR0cC5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhtbGh0dHAucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUjogTWFsZm9ybWVkIEpTT04gaW4gY29uZmlnIGZpbGUuXCIpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3JtYXRNYXAoZGF0YSk7XG4gICAgICAgICAgICBmb3JtYXRMYXllcnMoZGF0YSk7XG4gICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcbiAgICAgICAgfVxuICAgIH07XG4gXG4gICAgeG1saHR0cC5vcGVuKFwiR0VUXCIsIGNvbmZpZ0ZpbGUsIHRydWUpO1xuICAgIHhtbGh0dHAuc2VuZCgpO1xuICAgIGNvbnNvbGUubG9nKFwiaGlcIilcbn1cblxuZnVuY3Rpb24gZm9ybWF0TWFwIChkYXRhKSB7XG4gICAgaWYgKCFkYXRhLm1hcCkgZGF0YS5tYXAgPSB7fTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TGF5ZXJzIChkYXRhKSB7XG4gICAgdmFyIGxheWVycyA9IGRhdGEubGF5ZXJzO1xuICAgIHZhciBkZWZhdWx0TWFwc2VydmVyVXJsID0gZGF0YS5tYXBzZXJ2ZXJVcmw7XG4gICAgdmFyIGRlZmF1bHRFbmFibGVkTGF5ZXJzID0gZGF0YVtcImFjdGl2ZS1sYXllcnNcIl07XG4gICAgdmFyIGxheWVyZ3JvdXA7XG4gICAgdmFyIGk7XG5cbiAgICBmb3IgKHZhciBwcm9wIGluIGxheWVycykge1xuICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xuICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGF5ZXJncm91cC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc2V0TWFwc2VydmVyVXJsKGxheWVyZ3JvdXBbaV0sIGRlZmF1bHRNYXBzZXJ2ZXJVcmwpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzZXRNYXBzZXJ2ZXJVcmwgKGxheWVyLCB1cmwpIHtcbiAgICBsYXllci51cmwgPSBsYXllci51cmwgfHwgdXJsO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvcGFyc2VyLmpzIiwiaW1wb3J0IHsgR2VvU2VhcmNoQ29udHJvbCwgRXNyaVByb3ZpZGVyIH0gZnJvbSAnbGVhZmxldC1nZW9zZWFyY2gnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDcmVhdGVTZWFyY2ggKG1hcCkge1xuICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IEVzcmlQcm92aWRlcigpO1xuXG4gICAgY29uc3Qgc2VhcmNoQ29udHJvbCA9IG5ldyBHZW9TZWFyY2hDb250cm9sKHtcbiAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLFxuICAgICAgICBzaG93TWFya2VyOiBmYWxzZSxcbiAgICAgICAgYXV0b0NvbXBsZXRlOiBmYWxzZSxcbiAgICB9KTtcblxuICAgIG1hcC5hZGRDb250cm9sKHNlYXJjaENvbnRyb2wpO1xuXG4gICAgTC5Eb21FdmVudC5vbihzZWFyY2hDb250cm9sLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuY29udGFpbmVyLCBcImNsaWNrXCIsIGZ1bmN0aW9uIChldikge1xuICAgICAgICBMLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbihldik7XG4gICAgfSk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9zZWFyY2guanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbGVhZmxldENvbnRyb2wgPSByZXF1aXJlKCcuL2xlYWZsZXRDb250cm9sJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnR2VvU2VhcmNoQ29udHJvbCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xlYWZsZXRDb250cm9sKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9zZWFyY2hFbGVtZW50ID0gcmVxdWlyZSgnLi9zZWFyY2hFbGVtZW50Jyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnU2VhcmNoRWxlbWVudCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaEVsZW1lbnQpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX2JpbmdQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL2JpbmdQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0JpbmdQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JpbmdQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfZXNyaVByb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcnMvZXNyaVByb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnRXNyaVByb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXNyaVByb3ZpZGVyKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9nb29nbGVQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL2dvb2dsZVByb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnR29vZ2xlUHJvdmlkZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nb29nbGVQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfb3BlblN0cmVldE1hcFByb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcnMvb3BlblN0cmVldE1hcFByb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnT3BlblN0cmVldE1hcFByb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb3BlblN0cmVldE1hcFByb3ZpZGVyKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL3Byb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnUHJvdmlkZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvaW5kZXguanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbm9kZW50UnVudGltZSA9IHJlcXVpcmUoJ25vZGVudC1ydW50aW1lJyk7XG5cbnZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gTGVhZmxldENvbnRyb2w7XG5cbnZhciBfbG9kYXNoID0gcmVxdWlyZSgnbG9kYXNoLmRlYm91bmNlJyk7XG5cbnZhciBfbG9kYXNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvZGFzaCk7XG5cbnZhciBfc2VhcmNoRWxlbWVudCA9IHJlcXVpcmUoJy4vc2VhcmNoRWxlbWVudCcpO1xuXG52YXIgX3NlYXJjaEVsZW1lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoRWxlbWVudCk7XG5cbnZhciBfcmVzdWx0TGlzdCA9IHJlcXVpcmUoJy4vcmVzdWx0TGlzdCcpO1xuXG52YXIgX3Jlc3VsdExpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVzdWx0TGlzdCk7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuL2RvbVV0aWxzJyk7XG5cbnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGRlZmF1bHRPcHRpb25zID0gZnVuY3Rpb24gZGVmYXVsdE9wdGlvbnMoKSB7XG4gIHJldHVybiB7XG4gICAgcG9zaXRpb246ICd0b3BsZWZ0JyxcbiAgICBzdHlsZTogJ2J1dHRvbicsXG4gICAgc2hvd01hcmtlcjogdHJ1ZSxcbiAgICBzaG93UG9wdXA6IGZhbHNlLFxuICAgIG1hcmtlcjoge1xuICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCksXG4gICAgICBkcmFnZ2FibGU6IGZhbHNlXG4gICAgfSxcbiAgICBtYXhNYXJrZXJzOiAxLFxuICAgIHJldGFpblpvb21MZXZlbDogZmFsc2UsXG4gICAgYW5pbWF0ZVpvb206IHRydWUsXG4gICAgc2VhcmNoTGFiZWw6ICdFbnRlciBhZGRyZXNzJyxcbiAgICBub3RGb3VuZE1lc3NhZ2U6ICdTb3JyeSwgdGhhdCBhZGRyZXNzIGNvdWxkIG5vdCBiZSBmb3VuZC4nLFxuICAgIG1lc3NhZ2VIaWRlRGVsYXk6IDMwMDAsXG4gICAgem9vbUxldmVsOiAxOCxcbiAgICBjbGFzc05hbWVzOiB7XG4gICAgICBjb250YWluZXI6ICdsZWFmbGV0LWJhciBsZWFmbGV0LWNvbnRyb2wgbGVhZmxldC1jb250cm9sLWdlb3NlYXJjaCcsXG4gICAgICBidXR0b246ICdsZWFmbGV0LWJhci1wYXJ0IGxlYWZsZXQtYmFyLXBhcnQtc2luZ2xlJyxcbiAgICAgIG1zZ2JveDogJ2xlYWZsZXQtYmFyIG1lc3NhZ2UnLFxuICAgICAgZm9ybTogJycsXG4gICAgICBpbnB1dDogJydcbiAgICB9LFxuICAgIGF1dG9Db21wbGV0ZTogdHJ1ZSxcbiAgICBhdXRvQ29tcGxldGVEZWxheTogMjUwXG4gIH07XG59O1xuXG52YXIgQ29udHJvbCA9IHtcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHRoaXMubWFya2VycyA9IG5ldyBMLkZlYXR1cmVHcm91cCgpO1xuXG4gICAgdGhpcy5vcHRpb25zID0gX2V4dGVuZHMoe30sIGRlZmF1bHRPcHRpb25zKCksIG9wdGlvbnMpO1xuXG4gICAgdmFyIF9vcHRpb25zID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBzdHlsZSA9IF9vcHRpb25zLnN0eWxlLFxuICAgICAgICBjbGFzc05hbWVzID0gX29wdGlvbnMuY2xhc3NOYW1lcyxcbiAgICAgICAgc2VhcmNoTGFiZWwgPSBfb3B0aW9ucy5zZWFyY2hMYWJlbCxcbiAgICAgICAgYXV0b0NvbXBsZXRlID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlLFxuICAgICAgICBhdXRvQ29tcGxldGVEZWxheSA9IF9vcHRpb25zLmF1dG9Db21wbGV0ZURlbGF5O1xuXG4gICAgaWYgKHN0eWxlICE9PSAnYnV0dG9uJykge1xuICAgICAgdGhpcy5vcHRpb25zLmNsYXNzTmFtZXMuY29udGFpbmVyICs9ICcgJyArIG9wdGlvbnMuc3R5bGU7XG4gICAgfVxuXG4gICAgdGhpcy5zZWFyY2hFbGVtZW50ID0gbmV3IF9zZWFyY2hFbGVtZW50Mi5kZWZhdWx0KF9leHRlbmRzKHt9LCB0aGlzLm9wdGlvbnMsIHtcbiAgICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KHF1ZXJ5KSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5vblN1Ym1pdChxdWVyeSk7XG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgdmFyIF9zZWFyY2hFbGVtZW50JGVsZW1lbiA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cyxcbiAgICAgICAgY29udGFpbmVyID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmNvbnRhaW5lcixcbiAgICAgICAgZm9ybSA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5mb3JtLFxuICAgICAgICBpbnB1dCA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5pbnB1dDtcblxuICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuXG4gICAgdmFyIGJ1dHRvbiA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2EnLCBjbGFzc05hbWVzLmJ1dHRvbiwgY29udGFpbmVyKTtcbiAgICBidXR0b24udGl0bGUgPSBzZWFyY2hMYWJlbDtcbiAgICBidXR0b24uaHJlZiA9ICcjJztcblxuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5vbkNsaWNrKGUpO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIGlmIChhdXRvQ29tcGxldGUpIHtcbiAgICAgIHRoaXMucmVzdWx0TGlzdCA9IG5ldyBfcmVzdWx0TGlzdDIuZGVmYXVsdCh7XG4gICAgICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVDbGljayhfcmVmKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IF9yZWYucmVzdWx0O1xuXG4gICAgICAgICAgaW5wdXQudmFsdWUgPSByZXN1bHQubGFiZWw7XG4gICAgICAgICAgX3RoaXMub25TdWJtaXQoeyBxdWVyeTogcmVzdWx0LmxhYmVsIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZm9ybS5hcHBlbmRDaGlsZCh0aGlzLnJlc3VsdExpc3QuZWxlbWVudHMuY29udGFpbmVyKTtcblxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoMCwgX2xvZGFzaDIuZGVmYXVsdCkoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmF1dG9TZWFyY2goZSk7XG4gICAgICB9LCBhdXRvQ29tcGxldGVEZWxheSksIHRydWUpO1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5zZWxlY3RSZXN1bHQoZSk7XG4gICAgICB9LCB0cnVlKTtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMuY2xlYXJSZXN1bHRzKGUpO1xuICAgICAgfSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5lbGVtZW50cyA9IHsgYnV0dG9uOiBidXR0b24gfTtcbiAgfSxcbiAgb25BZGQ6IGZ1bmN0aW9uIG9uQWRkKG1hcCkge1xuICAgIHZhciBfb3B0aW9uczIgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHNob3dNYXJrZXIgPSBfb3B0aW9uczIuc2hvd01hcmtlcixcbiAgICAgICAgc3R5bGUgPSBfb3B0aW9uczIuc3R5bGU7XG5cblxuICAgIHRoaXMubWFwID0gbWFwO1xuICAgIGlmIChzaG93TWFya2VyKSB7XG4gICAgICB0aGlzLm1hcmtlcnMuYWRkVG8obWFwKTtcbiAgICB9XG5cbiAgICBpZiAoc3R5bGUgPT09ICdiYXInKSB7XG4gICAgICB2YXIgZm9ybSA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5mb3JtO1xuXG4gICAgICB2YXIgcm9vdCA9IG1hcC5nZXRDb250YWluZXIoKS5xdWVyeVNlbGVjdG9yKCcubGVhZmxldC1jb250cm9sLWNvbnRhaW5lcicpO1xuXG4gICAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgJ2xlYWZsZXQtY29udHJvbC1nZW9zZWFyY2ggYmFyJyk7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZm9ybSk7XG4gICAgICByb290LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmNvbnRhaW5lcjtcbiAgfSxcbiAgb25SZW1vdmU6IGZ1bmN0aW9uIG9uUmVtb3ZlKCkge1xuICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcbiAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgX3NlYXJjaEVsZW1lbnQkZWxlbWVuMiA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cyxcbiAgICAgICAgY29udGFpbmVyID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuMi5jb250YWluZXIsXG4gICAgICAgIGlucHV0ID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuMi5pbnB1dDtcblxuXG4gICAgaWYgKGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG4gICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcbiAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgfVxuICB9LFxuICBzZWxlY3RSZXN1bHQ6IGZ1bmN0aW9uIHNlbGVjdFJlc3VsdChldmVudCkge1xuICAgIGlmICghW19jb25zdGFudHMuQVJST1dfRE9XTl9LRVksIF9jb25zdGFudHMuQVJST1dfVVBfS0VZXS5pbmNsdWRlcyhldmVudC5rZXlDb2RlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIGlucHV0ID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmlucHV0O1xuXG5cbiAgICB2YXIgbGlzdCA9IHRoaXMucmVzdWx0TGlzdDtcbiAgICB2YXIgbWF4ID0gdGhpcy5yZXN1bHRMaXN0LmNvdW50KCkgLSAxO1xuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2VcbiAgICB2YXIgbmV4dCA9IGV2ZW50LmNvZGUgPT09ICdBcnJvd0Rvd24nID8gfn5saXN0LnNlbGVjdGVkICsgMSA6IH5+bGlzdC5zZWxlY3RlZCAtIDE7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5lc3RlZC10ZXJuYXJ5XG4gICAgdmFyIGlkeCA9IG5leHQgPCAwID8gbWF4IDogbmV4dCA+IG1heCA/IDAgOiBuZXh0O1xuXG4gICAgdmFyIGl0ZW0gPSBsaXN0LnNlbGVjdChpZHgpO1xuICAgIGlucHV0LnZhbHVlID0gaXRlbS5sYWJlbDtcbiAgfSxcbiAgY2xlYXJSZXN1bHRzOiBmdW5jdGlvbiBjbGVhclJlc3VsdHMoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSAhPT0gX2NvbnN0YW50cy5FU0NBUEVfS0VZKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5yZXN1bHRMaXN0LmNsZWFyKCk7XG4gIH0sXG4gIGF1dG9TZWFyY2g6IGZ1bmN0aW9uIGF1dG9TZWFyY2goZXZlbnQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgdmFyIHF1ZXJ5LCBwcm92aWRlciwgcmVzdWx0cztcblxuICAgICAgaWYgKF9jb25zdGFudHMuU1BFQ0lBTF9LRVlTLmluY2x1ZGVzKGV2ZW50LmtleUNvZGUpKSB7XG4gICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG4gICAgICB9XG5cbiAgICAgIHF1ZXJ5ID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgcHJvdmlkZXIgPSB0aGlzLm9wdGlvbnMucHJvdmlkZXI7XG4gICAgICByZXR1cm4gcHJvdmlkZXIuc2VhcmNoKHsgcXVlcnk6IHF1ZXJ5IH0pLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG5cbiAgICAgICAgcmVzdWx0cyA9ICRhd2FpdF8xO1xuICAgICAgICB0aGlzLnJlc3VsdExpc3QucmVuZGVyKHJlc3VsdHMpO1xuICAgICAgICByZXR1cm4gJHJldHVybigpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgfSxcbiAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KHF1ZXJ5KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgIHZhciBwcm92aWRlciwgcmVzdWx0cztcbiAgICAgIHByb3ZpZGVyID0gdGhpcy5vcHRpb25zLnByb3ZpZGVyO1xuICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlYXJjaChxdWVyeSkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzIpIHtcblxuICAgICAgICByZXN1bHRzID0gJGF3YWl0XzI7XG5cbiAgICAgICAgaWYgKHJlc3VsdHMgJiYgcmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5zaG93UmVzdWx0KHJlc3VsdHNbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICB9LFxuICBzaG93UmVzdWx0OiBmdW5jdGlvbiBzaG93UmVzdWx0KHJlc3VsdCkge1xuICAgIHZhciBtYXJrZXJzID0gT2JqZWN0LmtleXModGhpcy5tYXJrZXJzLl9sYXllcnMpO1xuICAgIGlmIChtYXJrZXJzLmxlbmd0aCA+PSB0aGlzLm9wdGlvbnMubWF4TWFya2Vycykge1xuICAgICAgdGhpcy5tYXJrZXJzLnJlbW92ZUxheWVyKG1hcmtlcnNbMF0pO1xuICAgIH1cblxuICAgIHZhciBtYXJrZXIgPSB0aGlzLmFkZE1hcmtlcihyZXN1bHQpO1xuICAgIHRoaXMuY2VudGVyTWFwKHJlc3VsdCk7XG5cbiAgICB0aGlzLm1hcC5maXJlRXZlbnQoJ2dlb3NlYXJjaC9zaG93bG9jYXRpb24nLCB7XG4gICAgICBsb2NhdGlvbjogcmVzdWx0LFxuICAgICAgbWFya2VyOiBtYXJrZXJcbiAgICB9KTtcbiAgfSxcbiAgYWRkTWFya2VyOiBmdW5jdGlvbiBhZGRNYXJrZXIocmVzdWx0KSB7XG4gICAgdmFyIF9vcHRpb25zMyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgb3B0aW9ucyA9IF9vcHRpb25zMy5tYXJrZXIsXG4gICAgICAgIHNob3dQb3B1cCA9IF9vcHRpb25zMy5zaG93UG9wdXA7XG5cbiAgICB2YXIgbWFya2VyID0gbmV3IEwuTWFya2VyKFtyZXN1bHQueSwgcmVzdWx0LnhdLCBvcHRpb25zKTtcbiAgICBtYXJrZXIuYmluZFBvcHVwKHJlc3VsdC5sYWJlbCk7XG5cbiAgICB0aGlzLm1hcmtlcnMuYWRkTGF5ZXIobWFya2VyKTtcblxuICAgIGlmIChzaG93UG9wdXApIHtcbiAgICAgIG1hcmtlci5vcGVuUG9wdXAoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWFya2VyO1xuICB9LFxuICBjZW50ZXJNYXA6IGZ1bmN0aW9uIGNlbnRlck1hcChyZXN1bHQpIHtcbiAgICB2YXIgX29wdGlvbnM0ID0gdGhpcy5vcHRpb25zLFxuICAgICAgICByZXRhaW5ab29tTGV2ZWwgPSBfb3B0aW9uczQucmV0YWluWm9vbUxldmVsLFxuICAgICAgICBhbmltYXRlWm9vbSA9IF9vcHRpb25zNC5hbmltYXRlWm9vbTtcblxuXG4gICAgdmFyIHJlc3VsdEJvdW5kcyA9IG5ldyBMLkxhdExuZ0JvdW5kcyhyZXN1bHQuYm91bmRzKTtcbiAgICB2YXIgYm91bmRzID0gcmVzdWx0Qm91bmRzLmlzVmFsaWQoKSA/IHJlc3VsdEJvdW5kcyA6IHRoaXMubWFya2Vycy5nZXRCb3VuZHMoKTtcblxuICAgIGlmICghcmV0YWluWm9vbUxldmVsICYmIHJlc3VsdEJvdW5kcy5pc1ZhbGlkKCkpIHtcbiAgICAgIHRoaXMubWFwLmZpdEJvdW5kcyhib3VuZHMsIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWFwLnNldFZpZXcoYm91bmRzLmdldENlbnRlcigpLCB0aGlzLmdldFpvb20oKSwgeyBhbmltYXRlOiBhbmltYXRlWm9vbSB9KTtcbiAgICB9XG4gIH0sXG4gIGdldFpvb206IGZ1bmN0aW9uIGdldFpvb20oKSB7XG4gICAgdmFyIF9vcHRpb25zNSA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgcmV0YWluWm9vbUxldmVsID0gX29wdGlvbnM1LnJldGFpblpvb21MZXZlbCxcbiAgICAgICAgem9vbUxldmVsID0gX29wdGlvbnM1Lnpvb21MZXZlbDtcblxuICAgIHJldHVybiByZXRhaW5ab29tTGV2ZWwgPyB0aGlzLm1hcC5nZXRab29tKCkgOiB6b29tTGV2ZWw7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIExlYWZsZXRDb250cm9sKCkge1xuICBpZiAoIUwgfHwgIUwuQ29udHJvbCB8fCAhTC5Db250cm9sLmV4dGVuZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTGVhZmxldCBtdXN0IGJlIGxvYWRlZCBiZWZvcmUgaW5zdGFudGlhdGluZyB0aGUgR2VvU2VhcmNoIGNvbnRyb2wnKTtcbiAgfVxuXG4gIHZhciBMQ29udHJvbCA9IEwuQ29udHJvbC5leHRlbmQoQ29udHJvbCk7XG5cbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG9wdGlvbnMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBvcHRpb25zW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoTENvbnRyb2wsIFtudWxsXS5jb25jYXQob3B0aW9ucykpKSgpO1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL2xlYWZsZXRDb250cm9sLmpzIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKlxuICogJGFzeW5jYmluZCBoYXMgbXVsdGlwbGUgdXNlcywgZGVwZW5kaW5nIG9uIHRoZSBwYXJhbWV0ZXIgbGlzdC4gSXQgaXMgaW4gRnVuY3Rpb24ucHJvdG90eXBlLCBzbyAndGhpcycgaXMgYWx3YXlzIGEgZnVuY3Rpb25cbiAqXG4gKiAxKSBJZiBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudCAodGhpcyksIGl0IGlzIHVzZWQgd2hlbiBkZWZpbmluZyBhbiBhc3luYyBmdW5jdGlvbiB0byBlbnN1cmUgd2hlblxuICogICAgICBpdCBpcyBpbnZva2VkLCB0aGUgY29ycmVjdCAndGhpcycgaXMgcHJlc2VudCwganVzdCBsaWtlIFwiYmluZFwiLiBGb3IgbGVnYWN5IHJlYXNvbnMsICd0aGlzJyBpcyBnaXZlblxuICogICAgICBhIG1lbWViZXIgJ3RoZW4nIHdoaWNoIHJlZmVycyB0byBpdHNlbGYuXG4gKiAyKSBJZiBjYWxsZWQgd2l0aCBhIHNlY29uZCBwYXJhbWV0ZXIgKFwiY2F0Y2hlclwiKSBhbmQgY2F0Y2hlciE9PXRydWUgaXQgaXMgYmVpbmcgdXNlZCB0byBpbnZva2UgYW4gYXN5bmNcbiAqICAgICAgZnVuY3Rpb24gd2hlcmUgdGhlIHNlY29uZCBwYXJhbWV0ZXIgaXMgdGhlIGVycm9yIGNhbGxiYWNrIChmb3Igc3luYyBleGNlcHRpb25zIGFuZCB0byBiZSBwYXNzZWQgdG9cbiAqICAgICAgbmVzdGVkIGFzeW5jIGNhbGxzKVxuICogMykgSWYgY2FsbGVkIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXI9PT10cnVlLCBpdCBpcyB0aGUgc2FtZSB1c2UgYXMgKDEpLCBidXQgdGhlIGZ1bmN0aW9uIGlzIHdyYXBwZWRcbiAqICAgICAgaW4gYW4gJ1Byb21pc2UnIGFzIHdlbGwgYm91bmQgdG8gJ3RoaXMnLlxuICogICAgICBJdCBpcyB0aGUgc2FtZSBhcyBjYWxsaW5nICduZXcgUHJvbWlzZSh0aGlzKScsIHdoZXJlICd0aGlzJyBpcyB0aGUgZnVuY3Rpb24gYmVpbmcgYm91bmQvd3JhcHBlZFxuICogNCkgSWYgY2FsbGVkIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXI9PT0wLCBpdCBpcyB0aGUgc2FtZSB1c2UgYXMgKDEpLCBidXQgdGhlIGZ1bmN0aW9uIGlzIHdyYXBwZWRcbiAqICAgICAgaW4gYSAnTGF6eVRoZW5hYmxlJywgd2hpY2ggZXhlY3V0ZXMgbGF6aWx5IGFuZCBjYW4gcmVzb2x2ZSBzeW5jaHJvbm91c2x5LlxuICogICAgICBJdCBpcyB0aGUgc2FtZSBhcyBjYWxsaW5nICduZXcgTGF6eVRoZW5hYmxlKHRoaXMpJyAoaWYgc3VjaCBhIHR5cGUgd2VyZSBleHBvc2VkKSwgd2hlcmUgJ3RoaXMnIGlzXG4gKiAgICAgIHRoZSBmdW5jdGlvbiBiZWluZyBib3VuZC93cmFwcGVkXG4gKi9cblxuZnVuY3Rpb24gcHJvY2Vzc0luY2x1ZGVzKGluY2x1ZGVzLGlucHV0KSB7XG4gICAgdmFyIHNyYyA9IGlucHV0LnRvU3RyaW5nKCkgO1xuICAgIHZhciB0ID0gXCJyZXR1cm4gXCIrc3JjIDtcbiAgICB2YXIgYXJncyA9IHNyYy5tYXRjaCgvLipcXCgoW14pXSopXFwpLylbMV0gO1xuICAgIHZhciByZSA9IC9bJ1wiXSEhIShbXidcIl0qKVsnXCJdL2cgO1xuICAgIHZhciBtID0gW10gO1xuICAgIHdoaWxlICgxKSB7XG4gICAgICAgIHZhciBteCA9IHJlLmV4ZWModCkgO1xuICAgICAgICBpZiAobXgpXG4gICAgICAgICAgICBtLnB1c2gobXgpIDtcbiAgICAgICAgZWxzZSBicmVhayA7XG4gICAgfVxuICAgIG0ucmV2ZXJzZSgpLmZvckVhY2goZnVuY3Rpb24oZSl7XG4gICAgICAgIHQgPSB0LnNsaWNlKDAsZS5pbmRleCkraW5jbHVkZXNbZVsxXV0rdC5zdWJzdHIoZS5pbmRleCtlWzBdLmxlbmd0aCkgO1xuICAgIH0pIDtcbiAgICB0ID0gdC5yZXBsYWNlKC9cXC9cXCpbXipdKlxcKlxcLy9nLCcgJykucmVwbGFjZSgvXFxzKy9nLCcgJykgO1xuICAgIHJldHVybiBuZXcgRnVuY3Rpb24oYXJncyx0KSgpIDtcbn1cblxudmFyICRhc3luY2JpbmQgPSBwcm9jZXNzSW5jbHVkZXMoe1xuICAgIHpvdXNhbjpyZXF1aXJlKCcuL3pvdXNhbicpLnRvU3RyaW5nKCksXG4gICAgdGhlbmFibGU6cmVxdWlyZSgnLi90aGVuYWJsZUZhY3RvcnknKS50b1N0cmluZygpXG59LFxuZnVuY3Rpb24gJGFzeW5jYmluZChzZWxmLGNhdGNoZXIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBpZiAoIUZ1bmN0aW9uLnByb3RvdHlwZS4kYXN5bmNiaW5kKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsXCIkYXN5bmNiaW5kXCIse3ZhbHVlOiRhc3luY2JpbmQsZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlfSkgO1xuICAgIH1cblxuICAgIGlmICghJGFzeW5jYmluZC50cmFtcG9saW5lKSB7XG4gICAgICAkYXN5bmNiaW5kLnRyYW1wb2xpbmUgPSBmdW5jdGlvbiB0cmFtcG9saW5lKHQseCxzLGUsdSl7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBiKHEpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAocSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocS50aGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxID0gcS50aGVuKGIsIGUpIDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1P3VuZGVmaW5lZDpxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocS5wb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcS5wb3AoKSA/IHguY2FsbCh0KSA6IHE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHEuY2FsbCh0KVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZShyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCEkYXN5bmNiaW5kLkxhenlUaGVuYWJsZSkge1xuICAgICAgICAkYXN5bmNiaW5kLkxhenlUaGVuYWJsZSA9ICchISF0aGVuYWJsZScoKTtcbiAgICAgICAgJGFzeW5jYmluZC5FYWdlclRoZW5hYmxlID0gJGFzeW5jYmluZC5UaGVuYWJsZSA9ICgkYXN5bmNiaW5kLkVhZ2VyVGhlbmFibGVGYWN0b3J5ID0gJyEhIXpvdXNhbicpKCk7XG4gICAgfVxuXG4gICAgdmFyIHJlc29sdmVyID0gdGhpcztcbiAgICBzd2l0Y2ggKGNhdGNoZXIpIHtcbiAgICBjYXNlIHRydWU6XG4gICAgICAgIHJldHVybiBuZXcgKCRhc3luY2JpbmQuVGhlbmFibGUpKGJvdW5kVGhlbik7XG4gICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gbmV3ICgkYXN5bmNiaW5kLkxhenlUaGVuYWJsZSkoYm91bmRUaGVuKTtcbiAgICBjYXNlIHVuZGVmaW5lZDpcbiAgICAgICAgLyogRm9yIHJ1bnRpbWUgY29tcGF0aWJpbGl0eSB3aXRoIE5vZGVudCB2Mi54LCBwcm92aWRlIGEgdGhlbmFibGUgKi9cbiAgICAgICAgYm91bmRUaGVuLnRoZW4gPSBib3VuZFRoZW4gO1xuICAgICAgICByZXR1cm4gYm91bmRUaGVuIDtcbiAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVyLmFwcGx5KHNlbGYsYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH0gY2F0Y2goZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2F0Y2hlcihleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gYm91bmRUaGVuKCkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZXIuYXBwbHkoc2VsZixhcmd1bWVudHMpO1xuICAgIH1cbn0pIDtcblxuZnVuY3Rpb24gJGFzeW5jc3Bhd24ocHJvbWlzZVByb3ZpZGVyLHNlbGYpIHtcbiAgICBpZiAoIUZ1bmN0aW9uLnByb3RvdHlwZS4kYXN5bmNzcGF3bikge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLFwiJGFzeW5jc3Bhd25cIix7dmFsdWU6JGFzeW5jc3Bhd24sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlfSkgO1xuICAgIH1cbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRnVuY3Rpb24pKSByZXR1cm4gO1xuXG4gICAgdmFyIGdlbkYgPSB0aGlzIDtcbiAgICByZXR1cm4gbmV3IHByb21pc2VQcm92aWRlcihmdW5jdGlvbiBlbm91Z2gocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciBnZW4gPSBnZW5GLmNhbGwoc2VsZiwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgZnVuY3Rpb24gc3RlcChmbixhcmcpIHtcbiAgICAgICAgICAgIHZhciBuZXh0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBuZXh0ID0gZm4uY2FsbChnZW4sYXJnKTtcbiAgICAgICAgICAgICAgICBpZihuZXh0LmRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUgIT09IHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlICYmIG5leHQudmFsdWU9PT1uZXh0LnZhbHVlLnRoZW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQudmFsdWUocmVzb2x2ZSxyZWplY3QpIDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUgJiYgcmVzb2x2ZShuZXh0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUgPSBudWxsIDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUudGhlbikge1xuICAgICAgICAgICAgICAgICAgICBuZXh0LnZhbHVlLnRoZW4oZnVuY3Rpb24odikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4ubmV4dCx2KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4udGhyb3csZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLm5leHQsbmV4dC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0ICYmIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICByZWplY3QgPSBudWxsIDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RlcChnZW4ubmV4dCk7XG4gICAgfSk7XG59XG5cbi8vIEluaXRpYWxpemUgYXN5bmMgYmluZGluZ3NcbiRhc3luY2JpbmQoKSA7XG4kYXN5bmNzcGF3bigpIDtcblxuLy8gRXhwb3J0IGFzeW5jIGJpbmRpbmdzXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAkYXN5bmNiaW5kOiRhc3luY2JpbmQsXG4gICAgJGFzeW5jc3Bhd246JGFzeW5jc3Bhd25cbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L25vZGVudC1ydW50aW1lL3J1bnRpbWUuanMiLCIvKiBUaGlzIGNvZGUgaXMgYmFzZWQgb246XG56b3VzYW4gLSBBIExpZ2h0bmluZyBGYXN0LCBZZXQgVmVyeSBTbWFsbCBQcm9taXNlIEErIENvbXBsaWFudCBJbXBsZW1lbnRhdGlvblxuaHR0cHM6Ly9naXRodWIuY29tL2JsdWVqYXZhL3pvdXNhblxuQXV0aG9yOiBHbGVubiBDcm93bm92ZXIgPGdsZW5uQGJsdWVqYXZhLmNvbT4gKGh0dHA6Ly93d3cuYmx1ZWphdmEuY29tKVxuVmVyc2lvbiAyLjMuM1xuTGljZW5zZTogTUlUICovXG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odGljayl7XG4gICAgdGljayA9IHRpY2sgfHwgKHR5cGVvZiBwcm9jZXNzPT09XCJvYmplY3RcIiAmJiBwcm9jZXNzLm5leHRUaWNrKSB8fCAodHlwZW9mIHNldEltbWVkaWF0ZT09PVwiZnVuY3Rpb25cIiAmJiBzZXRJbW1lZGlhdGUpIHx8IGZ1bmN0aW9uKGYpe3NldFRpbWVvdXQoZiwwKX07XG4gICAgdmFyIHNvb24gPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZnEgPSBbXSwgZnFTdGFydCA9IDAsIGJ1ZmZlclNpemUgPSAxMDI0O1xuICAgICAgICBmdW5jdGlvbiBjYWxsUXVldWUoKSB7XG4gICAgICAgICAgICB3aGlsZSAoZnEubGVuZ3RoIC0gZnFTdGFydCkge1xuICAgICAgICAgICAgICAgIHRyeSB7IGZxW2ZxU3RhcnRdKCkgfSBjYXRjaChleCkgeyAvKiBjb25zb2xlLmVycm9yKGV4KSAqLyB9XG4gICAgICAgICAgICAgICAgZnFbZnFTdGFydCsrXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAoZnFTdGFydCA9PT0gYnVmZmVyU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICBmcS5zcGxpY2UoMCwgYnVmZmVyU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIGZxU3RhcnQgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgIGZxLnB1c2goZm4pO1xuICAgICAgICAgICAgaWYgKGZxLmxlbmd0aCAtIGZxU3RhcnQgPT09IDEpXG4gICAgICAgICAgICAgICAgdGljayhjYWxsUXVldWUpO1xuICAgICAgICB9O1xuICAgIH0pKCk7XG5cbiAgICBmdW5jdGlvbiBab3VzYW4oZnVuYykge1xuICAgICAgICBpZiAoZnVuYykge1xuICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgICAgIGZ1bmMoZnVuY3Rpb24gKGFyZykge1xuICAgICAgICAgICAgICAgIG1lLnJlc29sdmUoYXJnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgICAgICAgICBtZS5yZWplY3QoYXJnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgWm91c2FuLnByb3RvdHlwZSA9IHtcbiAgICAgICAgcmVzb2x2ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcylcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWplY3QobmV3IFR5cGVFcnJvcihcIkF0dGVtcHQgdG8gcmVzb2x2ZSBwcm9taXNlIHdpdGggc2VsZlwiKSk7XG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHZhbHVlICYmICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiB8fCB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoZW4gPSB2YWx1ZS50aGVuO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoZW4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBmdW5jdGlvbiAocmEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVzb2x2ZShyYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJlamVjdChycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GVUxGSUxMRUQ7XG4gICAgICAgICAgICB0aGlzLnYgPSB2YWx1ZTtcbiAgICAgICAgICAgIGlmIChtZS5jKVxuICAgICAgICAgICAgICAgIHNvb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgbCA9IG1lLmMubGVuZ3RoO24gPCBsOyBuKyspXG4gICAgICAgICAgICAgICAgICAgICAgICBTVEFURV9GVUxGSUxMRUQobWUuY1tuXSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZWplY3Q6IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1JFSkVDVEVEO1xuICAgICAgICAgICAgdGhpcy52ID0gcmVhc29uO1xuICAgICAgICAgICAgdmFyIGNsaWVudHMgPSB0aGlzLmM7XG4gICAgICAgICAgICBpZiAoY2xpZW50cylcbiAgICAgICAgICAgICAgICBzb29uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIGwgPSBjbGllbnRzLmxlbmd0aDtuIDwgbDsgbisrKVxuICAgICAgICAgICAgICAgICAgICAgICAgU1RBVEVfUkVKRUNURUQoY2xpZW50c1tuXSwgcmVhc29uKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgdGhlbjogZnVuY3Rpb24gKG9uRiwgb25SKSB7XG4gICAgICAgICAgICB2YXIgcCA9IG5ldyBab3VzYW4oKTtcbiAgICAgICAgICAgIHZhciBjbGllbnQgPSB7XG4gICAgICAgICAgICAgICAgeTogb25GLFxuICAgICAgICAgICAgICAgIG46IG9uUixcbiAgICAgICAgICAgICAgICBwOiBwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmMpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYy5wdXNoKGNsaWVudCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmMgPSBbY2xpZW50XTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSB0aGlzLnN0YXRlLCBhID0gdGhpcy52O1xuICAgICAgICAgICAgICAgIHNvb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzKGNsaWVudCwgYSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBTVEFURV9GVUxGSUxMRUQoYywgYXJnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYy55ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHlyZXQgPSBjLnkuY2FsbCh1bmRlZmluZWQsIGFyZyk7XG4gICAgICAgICAgICAgICAgYy5wLnJlc29sdmUoeXJldCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjLnAucmVqZWN0KGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgYy5wLnJlc29sdmUoYXJnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBTVEFURV9SRUpFQ1RFRChjLCByZWFzb24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjLm4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgeXJldCA9IGMubi5jYWxsKHVuZGVmaW5lZCwgcmVhc29uKTtcbiAgICAgICAgICAgICAgICBjLnAucmVzb2x2ZSh5cmV0KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGMucC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICBjLnAucmVqZWN0KHJlYXNvbik7XG4gICAgfVxuXG4gICAgWm91c2FuLnJlc29sdmUgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIGlmICh2YWwgJiYgKHZhbCBpbnN0YW5jZW9mIFpvdXNhbikpXG4gICAgICAgICAgICByZXR1cm4gdmFsIDtcbiAgICAgICAgdmFyIHogPSBuZXcgWm91c2FuKCk7XG4gICAgICAgIHoucmVzb2x2ZSh2YWwpO1xuICAgICAgICByZXR1cm4gejtcbiAgICB9O1xuICAgIFpvdXNhbi5yZWplY3QgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmIChlcnIgJiYgKGVyciBpbnN0YW5jZW9mIFpvdXNhbikpXG4gICAgICAgICAgICByZXR1cm4gZXJyIDtcbiAgICAgICAgdmFyIHogPSBuZXcgWm91c2FuKCk7XG4gICAgICAgIHoucmVqZWN0KGVycik7XG4gICAgICAgIHJldHVybiB6O1xuICAgIH07XG5cbiAgICBab3VzYW4udmVyc2lvbiA9IFwiMi4zLjMtbm9kZW50XCIgO1xuICAgIHJldHVybiBab3VzYW4gO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbm9kZW50LXJ1bnRpbWUvem91c2FuLmpzIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsInZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblxuLy8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3NcblxuZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcbiAgaWYgKHRpbWVvdXQpIHtcbiAgICB0aW1lb3V0LmNsb3NlKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5UaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5UaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG59O1xuXG4vLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cbmV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xufTtcblxuZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xufTtcblxuZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXG4gIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuICBpZiAobXNlY3MgPj0gMCkge1xuICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcbiAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpXG4gICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuICAgIH0sIG1zZWNzKTtcbiAgfVxufTtcblxuLy8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdFxucmVxdWlyZShcInNldGltbWVkaWF0ZVwiKTtcbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcyIsIihmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG4gICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG4gICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXG4gICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4gICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcbiAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuICAgICAgfVxuICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrXG4gICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG4gICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcbiAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpO1xuICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW4odGFzaykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG4gICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcbiAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cbiAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcbiAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5JZlByZXNlbnQoaGFuZGxlKTsgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG4gICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcbiAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG4gICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG4gICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcbiAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG4gICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblxuICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG4gICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcbiAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblxuICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cbiAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG4gICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcbiAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuICAgICAgICAvLyBGb3IgSUUgNuKAkzhcbiAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcbiAgICB9XG5cbiAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG4gICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcbn0odHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IGdsb2JhbCA6IHNlbGYpKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L34vc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gaXNUaGVuYWJsZShvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAmJiAob2JqIGluc3RhbmNlb2YgT2JqZWN0KSAmJiB0eXBlb2Ygb2JqLnRoZW49PT1cImZ1bmN0aW9uXCI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x1dGlvbihwLHIsaG93KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvKiAyLjIuNy4xICovXG4gICAgICAgICAgICB2YXIgeCA9IGhvdyA/IGhvdyhyKTpyIDtcblxuICAgICAgICAgICAgaWYgKHA9PT14KSAvKiAyLjMuMSAqL1xuICAgICAgICAgICAgICAgIHJldHVybiBwLnJlamVjdChuZXcgVHlwZUVycm9yKFwiUHJvbWlzZSByZXNvbHV0aW9uIGxvb3BcIikpIDtcblxuICAgICAgICAgICAgaWYgKGlzVGhlbmFibGUoeCkpIHtcbiAgICAgICAgICAgICAgICAvKiAyLjMuMyAqL1xuICAgICAgICAgICAgICAgIHgudGhlbihmdW5jdGlvbih5KXtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbihwLHkpO1xuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgICAgIHAucmVqZWN0KGUpXG4gICAgICAgICAgICAgICAgfSkgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwLnJlc29sdmUoeCkgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgLyogMi4yLjcuMiAqL1xuICAgICAgICAgICAgcC5yZWplY3QoZXgpIDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIENoYWluZWQoKSB7fTtcbiAgICBDaGFpbmVkLnByb3RvdHlwZSA9IHtcbiAgICAgICAgcmVzb2x2ZTpfdW5jaGFpbmVkLFxuICAgICAgICByZWplY3Q6X3VuY2hhaW5lZCxcbiAgICAgICAgdGhlbjp0aGVuQ2hhaW5cbiAgICB9O1xuICAgIGZ1bmN0aW9uIF91bmNoYWluZWQodil7fVxuICAgIGZ1bmN0aW9uIHRoZW5DaGFpbihyZXMscmVqKXtcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzO1xuICAgICAgICB0aGlzLnJlamVjdCA9IHJlajtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gdGhlbihyZXMscmVqKXtcbiAgICAgICAgdmFyIGNoYWluID0gbmV3IENoYWluZWQoKSA7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlcihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc1RoZW5hYmxlKHZhbHVlKSA/IHZhbHVlLnRoZW4ocmVzLHJlaikgOiByZXNvbHV0aW9uKGNoYWluLHZhbHVlLHJlcyk7XG4gICAgICAgICAgICB9LGZ1bmN0aW9uKGV4KSB7XG4gICAgICAgICAgICAgICAgcmVzb2x1dGlvbihjaGFpbixleCxyZWopIDtcbiAgICAgICAgICAgIH0pIDtcbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIHJlc29sdXRpb24oY2hhaW4sZXgscmVqKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hhaW4gO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFRoZW5hYmxlKHJlc29sdmVyKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVyID0gcmVzb2x2ZXIgO1xuICAgICAgICB0aGlzLnRoZW4gPSB0aGVuIDtcbiAgICB9O1xuXG4gICAgVGhlbmFibGUucmVzb2x2ZSA9IGZ1bmN0aW9uKHYpe1xuICAgICAgICByZXR1cm4gVGhlbmFibGUuaXNUaGVuYWJsZSh2KSA/IHYgOiB7dGhlbjpmdW5jdGlvbihyZXNvbHZlKXtyZXR1cm4gcmVzb2x2ZSh2KX19O1xuICAgIH07XG5cbiAgICBUaGVuYWJsZS5pc1RoZW5hYmxlID0gaXNUaGVuYWJsZSA7XG5cbiAgICByZXR1cm4gVGhlbmFibGUgO1xufSA7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L25vZGVudC1ydW50aW1lL3RoZW5hYmxlRmFjdG9yeS5qcyIsIi8qKlxuICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgTkFOID0gMCAvIDA7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblxuLyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi9cbnZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXG4vKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xudmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xudmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cbi8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG4gICAgbmF0aXZlTWluID0gTWF0aC5taW47XG5cbi8qKlxuICogR2V0cyB0aGUgdGltZXN0YW1wIG9mIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlXG4gKiB0aGUgVW5peCBlcG9jaCAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDIuNC4wXG4gKiBAY2F0ZWdvcnkgRGF0ZVxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXN0YW1wLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7XG4gKiAgIGNvbnNvbGUubG9nKF8ubm93KCkgLSBzdGFtcCk7XG4gKiB9LCBfLm5vdygpKTtcbiAqIC8vID0+IExvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGludm9jYXRpb24uXG4gKi9cbnZhciBub3cgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHJvb3QuRGF0ZS5ub3coKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGRlYm91bmNlZCBmdW5jdGlvbiB0aGF0IGRlbGF5cyBpbnZva2luZyBgZnVuY2AgdW50aWwgYWZ0ZXIgYHdhaXRgXG4gKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcbiAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcbiAqIGRlbGF5ZWQgYGZ1bmNgIGludm9jYXRpb25zIGFuZCBhIGBmbHVzaGAgbWV0aG9kIHRvIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLlxuICogUHJvdmlkZSBgb3B0aW9uc2AgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb24gdGhlXG4gKiBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkXG4gKiB3aXRoIHRoZSBsYXN0IGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50XG4gKiBjYWxscyB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYFxuICogaW52b2NhdGlvbi5cbiAqXG4gKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzXG4gKiBpbnZva2VkIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuICogaXMgaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICpcbiAqIElmIGB3YWl0YCBpcyBgMGAgYW5kIGBsZWFkaW5nYCBpcyBgZmFsc2VgLCBgZnVuY2AgaW52b2NhdGlvbiBpcyBkZWZlcnJlZFxuICogdW50aWwgdG8gdGhlIG5leHQgdGljaywgc2ltaWxhciB0byBgc2V0VGltZW91dGAgd2l0aCBhIHRpbWVvdXQgb2YgYDBgLlxuICpcbiAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKVxuICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy5kZWJvdW5jZWAgYW5kIGBfLnRocm90dGxlYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlLlxuICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9ZmFsc2VdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdXG4gKiAgVGhlIG1heGltdW0gdGltZSBgZnVuY2AgaXMgYWxsb3dlZCB0byBiZSBkZWxheWVkIGJlZm9yZSBpdCdzIGludm9rZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gQXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eC5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG4gKlxuICogLy8gSW52b2tlIGBzZW5kTWFpbGAgd2hlbiBjbGlja2VkLCBkZWJvdW5jaW5nIHN1YnNlcXVlbnQgY2FsbHMuXG4gKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG4gKiAgICdsZWFkaW5nJzogdHJ1ZSxcbiAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAqIH0pKTtcbiAqXG4gKiAvLyBFbnN1cmUgYGJhdGNoTG9nYCBpcyBpbnZva2VkIG9uY2UgYWZ0ZXIgMSBzZWNvbmQgb2YgZGVib3VuY2VkIGNhbGxzLlxuICogdmFyIGRlYm91bmNlZCA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwgeyAnbWF4V2FpdCc6IDEwMDAgfSk7XG4gKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG4gKiBqUXVlcnkoc291cmNlKS5vbignbWVzc2FnZScsIGRlYm91bmNlZCk7XG4gKlxuICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyBkZWJvdW5jZWQgaW52b2NhdGlvbi5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGRlYm91bmNlZC5jYW5jZWwpO1xuICovXG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gIHZhciBsYXN0QXJncyxcbiAgICAgIGxhc3RUaGlzLFxuICAgICAgbWF4V2FpdCxcbiAgICAgIHJlc3VsdCxcbiAgICAgIHRpbWVySWQsXG4gICAgICBsYXN0Q2FsbFRpbWUsXG4gICAgICBsYXN0SW52b2tlVGltZSA9IDAsXG4gICAgICBsZWFkaW5nID0gZmFsc2UsXG4gICAgICBtYXhpbmcgPSBmYWxzZSxcbiAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICB3YWl0ID0gdG9OdW1iZXIod2FpdCkgfHwgMDtcbiAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuICAgIG1heGluZyA9ICdtYXhXYWl0JyBpbiBvcHRpb25zO1xuICAgIG1heFdhaXQgPSBtYXhpbmcgPyBuYXRpdmVNYXgodG9OdW1iZXIob3B0aW9ucy5tYXhXYWl0KSB8fCAwLCB3YWl0KSA6IG1heFdhaXQ7XG4gICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuICAgIHZhciBhcmdzID0gbGFzdEFyZ3MsXG4gICAgICAgIHRoaXNBcmcgPSBsYXN0VGhpcztcblxuICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxlYWRpbmdFZGdlKHRpbWUpIHtcbiAgICAvLyBSZXNldCBhbnkgYG1heFdhaXRgIHRpbWVyLlxuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICAvLyBTdGFydCB0aGUgdGltZXIgZm9yIHRoZSB0cmFpbGluZyBlZGdlLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG4gICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcbiAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSxcbiAgICAgICAgcmVzdWx0ID0gd2FpdCAtIHRpbWVTaW5jZUxhc3RDYWxsO1xuXG4gICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQsIG1heFdhaXQgLSB0aW1lU2luY2VMYXN0SW52b2tlKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcbiAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZTtcblxuICAgIC8vIEVpdGhlciB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCBhY3Rpdml0eSBoYXMgc3RvcHBlZCBhbmQgd2UncmUgYXQgdGhlXG4gICAgLy8gdHJhaWxpbmcgZWRnZSwgdGhlIHN5c3RlbSB0aW1lIGhhcyBnb25lIGJhY2t3YXJkcyBhbmQgd2UncmUgdHJlYXRpbmdcbiAgICAvLyBpdCBhcyB0aGUgdHJhaWxpbmcgZWRnZSwgb3Igd2UndmUgaGl0IHRoZSBgbWF4V2FpdGAgbGltaXQuXG4gICAgcmV0dXJuIChsYXN0Q2FsbFRpbWUgPT09IHVuZGVmaW5lZCB8fCAodGltZVNpbmNlTGFzdENhbGwgPj0gd2FpdCkgfHxcbiAgICAgICh0aW1lU2luY2VMYXN0Q2FsbCA8IDApIHx8IChtYXhpbmcgJiYgdGltZVNpbmNlTGFzdEludm9rZSA+PSBtYXhXYWl0KSk7XG4gIH1cblxuICBmdW5jdGlvbiB0aW1lckV4cGlyZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKTtcbiAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG4gICAgICByZXR1cm4gdHJhaWxpbmdFZGdlKHRpbWUpO1xuICAgIH1cbiAgICAvLyBSZXN0YXJ0IHRoZSB0aW1lci5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHJlbWFpbmluZ1dhaXQodGltZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhaWxpbmdFZGdlKHRpbWUpIHtcbiAgICB0aW1lcklkID0gdW5kZWZpbmVkO1xuXG4gICAgLy8gT25seSBpbnZva2UgaWYgd2UgaGF2ZSBgbGFzdEFyZ3NgIHdoaWNoIG1lYW5zIGBmdW5jYCBoYXMgYmVlblxuICAgIC8vIGRlYm91bmNlZCBhdCBsZWFzdCBvbmNlLlxuICAgIGlmICh0cmFpbGluZyAmJiBsYXN0QXJncykge1xuICAgICAgcmV0dXJuIGludm9rZUZ1bmModGltZSk7XG4gICAgfVxuICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICBpZiAodGltZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7XG4gICAgfVxuICAgIGxhc3RJbnZva2VUaW1lID0gMDtcbiAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIHJldHVybiB0aW1lcklkID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCksXG4gICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG5cbiAgICBsYXN0QXJncyA9IGFyZ3VtZW50cztcbiAgICBsYXN0VGhpcyA9IHRoaXM7XG4gICAgbGFzdENhbGxUaW1lID0gdGltZTtcblxuICAgIGlmIChpc0ludm9raW5nKSB7XG4gICAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBsZWFkaW5nRWRnZShsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgICAgaWYgKG1heGluZykge1xuICAgICAgICAvLyBIYW5kbGUgaW52b2NhdGlvbnMgaW4gYSB0aWdodCBsb29wLlxuICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG4gIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuICByZXR1cm4gZGVib3VuY2VkO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChfLm5vb3ApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTeW1ib2woJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3ltYm9sJyB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG51bWJlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b051bWJlcigzLjIpO1xuICogLy8gPT4gMy4yXG4gKlxuICogXy50b051bWJlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDVlLTMyNFxuICpcbiAqIF8udG9OdW1iZXIoSW5maW5pdHkpO1xuICogLy8gPT4gSW5maW5pdHlcbiAqXG4gKiBfLnRvTnVtYmVyKCczLjInKTtcbiAqIC8vID0+IDMuMlxuICovXG5mdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gTkFOO1xuICB9XG4gIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICB2YXIgb3RoZXIgPSB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PSAnZnVuY3Rpb24nID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG4gICAgdmFsdWUgPSBpc09iamVjdChvdGhlcikgPyAob3RoZXIgKyAnJykgOiBvdGhlcjtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG4gIH1cbiAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpO1xuICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuICByZXR1cm4gKGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSlcbiAgICA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOClcbiAgICA6IChyZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkZWJvdW5jZTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvfi9sb2Rhc2guZGVib3VuY2UvaW5kZXguanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbm9kZW50UnVudGltZSA9IHJlcXVpcmUoJ25vZGVudC1ydW50aW1lJyk7XG5cbnZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9kb21VdGlscyA9IHJlcXVpcmUoJy4vZG9tVXRpbHMnKTtcblxudmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgU2VhcmNoRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU2VhcmNoRWxlbWVudCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICBfcmVmJGhhbmRsZVN1Ym1pdCA9IF9yZWYuaGFuZGxlU3VibWl0LFxuICAgICAgICBoYW5kbGVTdWJtaXQgPSBfcmVmJGhhbmRsZVN1Ym1pdCA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZVN1Ym1pdCxcbiAgICAgICAgX3JlZiRzZWFyY2hMYWJlbCA9IF9yZWYuc2VhcmNoTGFiZWwsXG4gICAgICAgIHNlYXJjaExhYmVsID0gX3JlZiRzZWFyY2hMYWJlbCA9PT0gdW5kZWZpbmVkID8gJ3NlYXJjaCcgOiBfcmVmJHNlYXJjaExhYmVsLFxuICAgICAgICBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG4gICAgICAgIGNsYXNzTmFtZXMgPSBfcmVmJGNsYXNzTmFtZXMgPT09IHVuZGVmaW5lZCA/IHt9IDogX3JlZiRjbGFzc05hbWVzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNlYXJjaEVsZW1lbnQpO1xuXG4gICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIFsnZ2Vvc2VhcmNoJywgY2xhc3NOYW1lcy5jb250YWluZXJdLmpvaW4oJyAnKSk7XG4gICAgdmFyIGZvcm0gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdmb3JtJywgWycnLCBjbGFzc05hbWVzLmZvcm1dLmpvaW4oJyAnKSwgY29udGFpbmVyKTtcbiAgICB2YXIgaW5wdXQgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdpbnB1dCcsIFsnZ2xhc3MnLCBjbGFzc05hbWVzLmlucHV0XS5qb2luKCcgJyksIGZvcm0pO1xuXG4gICAgaW5wdXQudHlwZSA9ICd0ZXh0JztcbiAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHNlYXJjaExhYmVsO1xuXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25JbnB1dChlKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25LZXlVcChlKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25LZXlQcmVzcyhlKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25Gb2N1cyhlKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5vbkJsdXIoZSk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgdGhpcy5lbGVtZW50cyA9IHsgY29udGFpbmVyOiBjb250YWluZXIsIGZvcm06IGZvcm0sIGlucHV0OiBpbnB1dCB9O1xuICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFNlYXJjaEVsZW1lbnQsIFt7XG4gICAga2V5OiAnb25Gb2N1cycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uRm9jdXMoKSB7XG4gICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkodGhpcy5lbGVtZW50cy5mb3JtLCAnYWN0aXZlJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25CbHVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25CbHVyKCkge1xuICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKHRoaXMuZWxlbWVudHMuZm9ybSwgJ2FjdGl2ZScpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uU3VibWl0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWJtaXQoZXZlbnQpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG4gICAgICAgIHZhciBfZWxlbWVudHMsIGlucHV0LCBjb250YWluZXI7XG5cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgX2VsZW1lbnRzID0gdGhpcy5lbGVtZW50cywgaW5wdXQgPSBfZWxlbWVudHMuaW5wdXQsIGNvbnRhaW5lciA9IF9lbGVtZW50cy5jb250YWluZXI7XG5cbiAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2Vycm9yJyk7XG4gICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlU3VibWl0KHsgcXVlcnk6IGlucHV0LnZhbHVlIH0pLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG4gICAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcbiAgICAgICAgICByZXR1cm4gJHJldHVybigpO1xuICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25JbnB1dCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uSW5wdXQoKSB7XG4gICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cblxuICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcbiAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2Vycm9yJyk7XG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvbktleVVwJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25LZXlVcChldmVudCkge1xuICAgICAgdmFyIF9lbGVtZW50czIgPSB0aGlzLmVsZW1lbnRzLFxuICAgICAgICAgIGNvbnRhaW5lciA9IF9lbGVtZW50czIuY29udGFpbmVyLFxuICAgICAgICAgIGlucHV0ID0gX2VsZW1lbnRzMi5pbnB1dDtcblxuXG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gX2NvbnN0YW50cy5FU0NBUEVfS0VZKSB7XG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblxuICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuXG4gICAgICAgIGRvY3VtZW50LmJvZHkuZm9jdXMoKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5ibHVyKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25LZXlQcmVzcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5UHJlc3MoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBfY29uc3RhbnRzLkVOVEVSX0tFWSkge1xuICAgICAgICB0aGlzLm9uU3VibWl0KGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZXRRdWVyeScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldFF1ZXJ5KHF1ZXJ5KSB7XG4gICAgICB2YXIgaW5wdXQgPSB0aGlzLmVsZW1lbnRzLmlucHV0O1xuXG4gICAgICBpbnB1dC52YWx1ZSA9IHF1ZXJ5O1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTZWFyY2hFbGVtZW50O1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBTZWFyY2hFbGVtZW50O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3NlYXJjaEVsZW1lbnQuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXG52YXIgY3JlYXRlRWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoZWxlbWVudCkge1xuICB2YXIgY2xhc3NOYW1lcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG4gIHZhciBwYXJlbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IG51bGw7XG5cbiAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50KTtcbiAgZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lcztcblxuICBpZiAocGFyZW50KSB7XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGVsKTtcbiAgfVxuXG4gIHJldHVybiBlbDtcbn07XG5cbnZhciBjcmVhdGVTY3JpcHRFbGVtZW50ID0gZXhwb3J0cy5jcmVhdGVTY3JpcHRFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlU2NyaXB0RWxlbWVudCh1cmwsIGNiKSB7XG4gIHZhciBzY3JpcHQgPSBjcmVhdGVFbGVtZW50KCdzY3JpcHQnLCBudWxsLCBkb2N1bWVudC5ib2R5KTtcbiAgc2NyaXB0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2phdmFzY3JpcHQnKTtcblxuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICB3aW5kb3dbY2JdID0gZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgIHNjcmlwdC5yZW1vdmUoKTtcbiAgICAgIGRlbGV0ZSB3aW5kb3dbY2JdO1xuICAgICAgcmVzb2x2ZShqc29uKTtcbiAgICB9O1xuXG4gICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3JjJywgdXJsKTtcbiAgfSk7XG59O1xuXG52YXIgYWRkQ2xhc3NOYW1lID0gZXhwb3J0cy5hZGRDbGFzc05hbWUgPSBmdW5jdGlvbiBhZGRDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbGVtZW50ICYmICFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gIH1cbn07XG5cbnZhciByZW1vdmVDbGFzc05hbWUgPSBleHBvcnRzLnJlbW92ZUNsYXNzTmFtZSA9IGZ1bmN0aW9uIHJlbW92ZUNsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICB9XG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL2RvbVV0aWxzLmpzIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG52YXIgRU5URVJfS0VZID0gZXhwb3J0cy5FTlRFUl9LRVkgPSAxMztcbnZhciBFU0NBUEVfS0VZID0gZXhwb3J0cy5FU0NBUEVfS0VZID0gMjc7XG52YXIgQVJST1dfRE9XTl9LRVkgPSBleHBvcnRzLkFSUk9XX0RPV05fS0VZID0gNDA7XG52YXIgQVJST1dfVVBfS0VZID0gZXhwb3J0cy5BUlJPV19VUF9LRVkgPSAzODtcbnZhciBBUlJPV19MRUZUX0tFWSA9IGV4cG9ydHMuQVJST1dfTEVGVF9LRVkgPSAzNztcbnZhciBBUlJPV19SSUdIVF9LRVkgPSBleHBvcnRzLkFSUk9XX1JJR0hUX0tFWSA9IDM5O1xuXG52YXIgU1BFQ0lBTF9LRVlTID0gZXhwb3J0cy5TUEVDSUFMX0tFWVMgPSBbRU5URVJfS0VZLCBFU0NBUEVfS0VZLCBBUlJPV19ET1dOX0tFWSwgQVJST1dfVVBfS0VZLCBBUlJPV19MRUZUX0tFWSwgQVJST1dfUklHSFRfS0VZXTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9jb25zdGFudHMuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuL2RvbVV0aWxzJyk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBjeCA9IGZ1bmN0aW9uIGN4KCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgY2xhc3NuYW1lcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGNsYXNzbmFtZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gY2xhc3NuYW1lcy5qb2luKCcgJykudHJpbSgpO1xufTtcblxudmFyIFJlc3VsdExpc3QgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFJlc3VsdExpc3QoKSB7XG4gICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICBfcmVmJGhhbmRsZUNsaWNrID0gX3JlZi5oYW5kbGVDbGljayxcbiAgICAgICAgaGFuZGxlQ2xpY2sgPSBfcmVmJGhhbmRsZUNsaWNrID09PSB1bmRlZmluZWQgPyBmdW5jdGlvbiAoKSB7fSA6IF9yZWYkaGFuZGxlQ2xpY2ssXG4gICAgICAgIF9yZWYkY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcbiAgICAgICAgY2xhc3NOYW1lcyA9IF9yZWYkY2xhc3NOYW1lcyA9PT0gdW5kZWZpbmVkID8ge30gOiBfcmVmJGNsYXNzTmFtZXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVzdWx0TGlzdCk7XG5cbiAgICBfaW5pdGlhbGlzZVByb3BzLmNhbGwodGhpcyk7XG5cbiAgICB0aGlzLnByb3BzID0geyBoYW5kbGVDbGljazogaGFuZGxlQ2xpY2ssIGNsYXNzTmFtZXM6IGNsYXNzTmFtZXMgfTtcbiAgICB0aGlzLnNlbGVjdGVkID0gLTE7XG5cbiAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgY3goJ3Jlc3VsdHMnLCBjbGFzc05hbWVzLmNvbnRhaW5lcikpO1xuICAgIHZhciByZXN1bHRJdGVtID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgY3goY2xhc3NOYW1lcy5pdGVtKSk7XG5cbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2ssIHRydWUpO1xuICAgIHRoaXMuZWxlbWVudHMgPSB7IGNvbnRhaW5lcjogY29udGFpbmVyLCByZXN1bHRJdGVtOiByZXN1bHRJdGVtIH07XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUmVzdWx0TGlzdCwgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgcmVzdWx0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107XG4gICAgICB2YXIgX2VsZW1lbnRzID0gdGhpcy5lbGVtZW50cyxcbiAgICAgICAgICBjb250YWluZXIgPSBfZWxlbWVudHMuY29udGFpbmVyLFxuICAgICAgICAgIHJlc3VsdEl0ZW0gPSBfZWxlbWVudHMucmVzdWx0SXRlbTtcblxuICAgICAgdGhpcy5jbGVhcigpO1xuXG4gICAgICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKHJlc3VsdCwgaWR4KSB7XG4gICAgICAgIHZhciBjaGlsZCA9IHJlc3VsdEl0ZW0uY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoJ2RhdGEta2V5JywgaWR4KTtcbiAgICAgICAgY2hpbGQuaW5uZXJIVE1MID0gcmVzdWx0LmxhYmVsO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJlc3VsdHMgPSByZXN1bHRzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NlbGVjdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdChpbmRleCkge1xuICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZnVzaW5nLWFycm93XG5cbiAgICAgIEFycmF5LmZyb20oY29udGFpbmVyLmNoaWxkcmVuKS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCwgaWR4KSB7XG4gICAgICAgIHJldHVybiBpZHggPT09IGluZGV4ID8gKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJykgOiAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY2hpbGQsICdhY3RpdmUnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnNlbGVjdGVkID0gaW5kZXg7XG4gICAgICByZXR1cm4gdGhpcy5yZXN1bHRzW2luZGV4XTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvdW50KCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVzdWx0cy5sZW5ndGg7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY2xlYXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuICAgICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXG4gICAgICB3aGlsZSAoY29udGFpbmVyLmxhc3RDaGlsZCkge1xuICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmxhc3RDaGlsZCk7XG4gICAgICB9XG5cbiAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUmVzdWx0TGlzdDtcbn0oKTtcblxudmFyIF9pbml0aWFsaXNlUHJvcHMgPSBmdW5jdGlvbiBfaW5pdGlhbGlzZVByb3BzKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHRoaXMub25DbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3JlZjIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICB0YXJnZXQgPSBfcmVmMi50YXJnZXQ7XG5cbiAgICB2YXIgaGFuZGxlQ2xpY2sgPSBfdGhpcy5wcm9wcy5oYW5kbGVDbGljaztcbiAgICB2YXIgY29udGFpbmVyID0gX3RoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXG5cbiAgICBpZiAodGFyZ2V0LnBhcmVudE5vZGUgIT09IGNvbnRhaW5lciB8fCAhdGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1rZXknKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBpZHggPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWtleScpO1xuICAgIHZhciByZXN1bHQgPSBfdGhpcy5yZXN1bHRzW2lkeF07XG4gICAgaGFuZGxlQ2xpY2soeyByZXN1bHQ6IHJlc3VsdCB9KTtcbiAgfTtcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFJlc3VsdExpc3Q7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcmVzdWx0TGlzdC5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9ub2RlbnRSdW50aW1lID0gcmVxdWlyZSgnbm9kZW50LXJ1bnRpbWUnKTtcblxudmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3Byb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcicpO1xuXG52YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblxudmFyIF9kb21VdGlscyA9IHJlcXVpcmUoJy4uL2RvbVV0aWxzJyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcbiAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblxuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZW5kcG9pbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG4gICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sLFxuICAgICAgICAgIGpzb25wID0gX3JlZi5qc29ucDtcblxuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cblxuICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG4gICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAganNvbnA6IGpzb25wXG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiBwcm90b2NvbCArICcvL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvTG9jYXRpb25zPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIGlmIChkYXRhLnJlc291cmNlU2V0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YS5yZXNvdXJjZVNldHNbMF0ucmVzb3VyY2VzLm1hcChmdW5jdGlvbiAocikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IHIucG9pbnQuY29vcmRpbmF0ZXNbMV0sXG4gICAgICAgICAgeTogci5wb2ludC5jb29yZGluYXRlc1swXSxcbiAgICAgICAgICBsYWJlbDogci5hZGRyZXNzLmZvcm1hdHRlZEFkZHJlc3MsXG4gICAgICAgICAgYm91bmRzOiBbW3IuYmJveFswXSwgci5iYm94WzFdXSwgLy8gcywgd1xuICAgICAgICAgIFtyLmJib3hbMl0sIHIuYmJveFszXV1dLFxuICAgICAgICAgIHJhdzogclxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2VhcmNoJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKF9yZWYzKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgICB2YXIgcXVlcnksIHByb3RvY29sLCBqc29ucCwgdXJsLCBqc29uO1xuICAgICAgICBxdWVyeSA9IF9yZWYzLnF1ZXJ5O1xuXG4gICAgICAgIHByb3RvY29sID0gfmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoJ2h0dHAnKSA/IGxvY2F0aW9uLnByb3RvY29sIDogJ2h0dHBzOic7XG5cbiAgICAgICAganNvbnAgPSAnQklOR19KU09OUF9DQl8nICsgRGF0ZS5ub3coKTtcbiAgICAgICAgdXJsID0gdGhpcy5lbmRwb2ludCh7IHF1ZXJ5OiBxdWVyeSwgcHJvdG9jb2w6IHByb3RvY29sLCBqc29ucDoganNvbnAgfSk7XG5cbiAgICAgICAgcmV0dXJuICgwLCBfZG9tVXRpbHMuY3JlYXRlU2NyaXB0RWxlbWVudCkodXJsLCBqc29ucCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcbiAgICAgICAgICBqc29uID0gJGF3YWl0XzE7XG4gICAgICAgICAgcmV0dXJuICRyZXR1cm4odGhpcy5wYXJzZSh7IGRhdGE6IGpzb24gfSkpO1xuICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvYmluZ1Byb3ZpZGVyLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX25vZGVudFJ1bnRpbWUgPSByZXF1aXJlKCdub2RlbnQtcnVudGltZScpO1xuXG52YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZ2V0UGFyYW1TdHJpbmcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQYXJhbVN0cmluZyhwYXJhbXMpIHtcbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhwYXJhbXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbXNba2V5XSk7XG4gICAgICB9KS5qb2luKCcmJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2VhcmNoJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKF9yZWYpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG4gICAgICAgIHZhciBxdWVyeSwgcHJvdG9jb2wsIHVybCwgcmVxdWVzdCwganNvbjtcbiAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5O1xuXG4gICAgICAgIHByb3RvY29sID0gfmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoJ2h0dHAnKSA/IGxvY2F0aW9uLnByb3RvY29sIDogJ2h0dHBzOic7XG4gICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCB9KTtcblxuICAgICAgICByZXR1cm4gZmV0Y2godXJsKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuICAgICAgICAgIHJlcXVlc3QgPSAkYXdhaXRfMTtcbiAgICAgICAgICByZXR1cm4gcmVxdWVzdC5qc29uKCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzIpIHtcbiAgICAgICAgICAgIGpzb24gPSAkYXdhaXRfMjtcbiAgICAgICAgICAgIHJldHVybiAkcmV0dXJuKHRoaXMucGFyc2UoeyBkYXRhOiBqc29uIH0pKTtcbiAgICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm92aWRlcjtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL3Byb3ZpZGVyLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3Byb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcicpO1xuXG52YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXG4gIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcbiAgICBrZXk6ICdlbmRwb2ludCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcbiAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXG5cbiAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuICAgICAgICBmOiAnanNvbicsXG4gICAgICAgIHRleHQ6IHF1ZXJ5XG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiBwcm90b2NvbCArICcvL2dlb2NvZGUuYXJjZ2lzLmNvbS9hcmNnaXMvcmVzdC9zZXJ2aWNlcy9Xb3JsZC9HZW9jb2RlU2VydmVyL2ZpbmQ/JyArIHBhcmFtU3RyaW5nO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3BhcnNlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcbiAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblxuICAgICAgcmV0dXJuIGRhdGEubG9jYXRpb25zLm1hcChmdW5jdGlvbiAocikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IHIuZmVhdHVyZS5nZW9tZXRyeS54LFxuICAgICAgICAgIHk6IHIuZmVhdHVyZS5nZW9tZXRyeS55LFxuICAgICAgICAgIGxhYmVsOiByLm5hbWUsXG4gICAgICAgICAgYm91bmRzOiBbW3IuZXh0ZW50LnltaW4sIHIuZXh0ZW50LnhtaW5dLCAvLyBzLCB3XG4gICAgICAgICAgW3IuZXh0ZW50LnltYXgsIHIuZXh0ZW50LnhtYXhdXSxcbiAgICAgICAgICByYXc6IHJcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm92aWRlcjtcbn0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2VzcmlQcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcbiAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblxuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZW5kcG9pbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG4gICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblxuXG4gICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcbiAgICAgICAgYWRkcmVzczogcXVlcnlcbiAgICAgIH0pKTtcblxuICAgICAgLy8gZ29vZ2xlIHJlcXVpcmVzIGEgc2VjdXJlIGNvbm5lY3Rpb24gd2hlbiB1c2luZyBhcGkga2V5c1xuICAgICAgdmFyIHByb3RvID0gcGFyYW1zICYmIHBhcmFtcy5rZXkgPyAnaHR0cHM6JyA6IHByb3RvY29sO1xuICAgICAgcmV0dXJuIHByb3RvICsgJy8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24/JyArIHBhcmFtU3RyaW5nO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3BhcnNlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcbiAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblxuICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cy5tYXAoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiByLmdlb21ldHJ5LmxvY2F0aW9uLmxuZyxcbiAgICAgICAgICB5OiByLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCxcbiAgICAgICAgICBsYWJlbDogci5mb3JtYXR0ZWRfYWRkcmVzcyxcbiAgICAgICAgICBib3VuZHM6IFtbci5nZW9tZXRyeS52aWV3cG9ydC5zb3V0aHdlc3QubGF0LCByLmdlb21ldHJ5LnZpZXdwb3J0LnNvdXRod2VzdC5sbmddLCAvLyBzLCB3XG4gICAgICAgICAgW3IuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0LmxhdCwgci5nZW9tZXRyeS52aWV3cG9ydC5ub3J0aGVhc3QubG5nXV0sXG4gICAgICAgICAgcmF3OiByXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9nb29nbGVQcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcbiAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblxuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZW5kcG9pbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG4gICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblxuXG4gICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcbiAgICAgICAgZm9ybWF0OiAnanNvbicsXG4gICAgICAgIHE6IHF1ZXJ5XG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiBwcm90b2NvbCArICcvL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2g/JyArIHBhcmFtU3RyaW5nO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3BhcnNlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcbiAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblxuICAgICAgcmV0dXJuIGRhdGEubWFwKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgeDogci5sb24sXG4gICAgICAgICAgeTogci5sYXQsXG4gICAgICAgICAgbGFiZWw6IHIuZGlzcGxheV9uYW1lLFxuICAgICAgICAgIGJvdW5kczogW1twYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMF0pLCBwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMl0pXSwgLy8gcywgd1xuICAgICAgICAgIFtwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMV0pLCBwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbM10pXV0sXG4gICAgICAgICAgcmF3OiByXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9vcGVuU3RyZWV0TWFwUHJvdmlkZXIuanMiLCJpbXBvcnQge3RvZ2dsZUxheWVyfSBmcm9tIFwiLi9sYXllclwiO1xuaW1wb3J0IHttYWtlT3BhY2l0eVNsaWRlcn0gZnJvbSBcIi4vb3BhY2l0eVNsaWRlclwiXG5pbXBvcnQge3NldFNsaWRlckluaXRpYWxQb3N9IGZyb20gXCIuL29wYWNpdHlTbGlkZXJcIlxuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSBcIi4vc2hhcmVcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIFNldHVwUGFuZWwgKGxheWVycywgbGF5b3V0KSB7XG4gICAgdmFyIGxheWVyR3JvdXBzID0gbWFrZUxheWVyR3JvdXBzKGxheW91dFsnbGF5ZXItZ3JvdXBzLW9yZGVyJ10pO1xuICAgIG1ha2VMYXllckVsZW1zKGxheWVyR3JvdXBzLCBsYXllcnMpO1xuICAgIG1ha2VQYW5lbERyYWdnYWJsZSgpXG4gICAgc2V0UGFuZWxTY3JvbGxIYW5kbGVyKClcbn1cblxuZnVuY3Rpb24gc2V0UGFuZWxTY3JvbGxIYW5kbGVyKCkge1xuICAgIHZhciBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpXG4gICAgcGFuZWwub25zY3JvbGwgPSB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0XG59XG5cbmZ1bmN0aW9uIG1ha2VQYW5lbERyYWdnYWJsZSgpIHtcbiAgICB2YXIgb3ZlcmxheSA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsLWRyYWctb3ZlcmxheScpXG5cbiAgICBvdmVybGF5LmNhbGwoZDMuZHJhZygpXG4gICAgICAgIC5vbignZHJhZycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcGFuZWxEcmFnRXZlbnRIYW5kbGVyLmNhbGwodGhpcylcbiAgICB9KSk7XG59XG5cbmZ1bmN0aW9uIHBhbmVsRHJhZ0V2ZW50SGFuZGxlcigpIHtcbiAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KClcbiAgICB1cGRhdGVQYW5lbFdpZHRoKClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQgKCkge1xuICAgIHZhciBwYW5lbCA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsJylcbiAgICB2YXIgcGFuZWxPZmZzZXRIZWlnaHQgPSBwYW5lbC5wcm9wZXJ0eSgnb2Zmc2V0SGVpZ2h0JylcbiAgICB2YXIgcGFuZWxEcmFnT3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbC1kcmFnLW92ZXJsYXknKVxuICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwtaGVhZGVyJylcblxuICAgIHZhciBuZXdIZWlnaHRcblxuICAgIGlmIChwYW5lbC5jbGFzc2VkKCdncmFwaHMtYWN0aXZlJykpIHtcbiAgICAgICAgdmFyIGdyYXBoTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaC1saXN0JylcbiAgICAgICAgbmV3SGVpZ2h0ID0gaGVhZGVyLnNjcm9sbEhlaWdodCArIGdyYXBoTGlzdC5zY3JvbGxIZWlnaHRcbiAgICB9XG4gICAgZWxzZSB7IC8vIHBhbmVsLmNsYXNzZWQoJ2xheWVycy1hY3RpdmUnKVxuICAgICAgICB2YXIgbGF5ZXJMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheWVyLWxpc3QnKVxuICAgICAgICBuZXdIZWlnaHQgPSBoZWFkZXIuc2Nyb2xsSGVpZ2h0ICsgbGF5ZXJMaXN0LnNjcm9sbEhlaWdodFxuICAgIH1cbiAgICBuZXdIZWlnaHQgPSBuZXdIZWlnaHQgPiBwYW5lbE9mZnNldEhlaWdodCA/IGAke25ld0hlaWdodH1gKydweCcgOiBudWxsXG4gICAgcGFuZWxEcmFnT3ZlcmxheS5zdHlsZS5oZWlnaHQgPSBuZXdIZWlnaHRcbn1cblxuZnVuY3Rpb24gdXBkYXRlUGFuZWxXaWR0aCgpIHtcbiAgICB2YXIgcGFuZWwgPSBkMy5zZWxlY3QoJyNyaWdodC1wYW5lbCcpXG4gICAgdmFyIHBhbmVsTWluV2lkdGggPSArcGFuZWwuc3R5bGUoJ21pbi13aWR0aCcpLnNsaWNlKDAsIC0yKVxuICAgIHZhciBwYW5lbENsaWVudFdpZHRoID0gcGFuZWwucHJvcGVydHkoJ2NsaWVudFdpZHRoJylcblxuICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyYXBwZXInKVxuICAgIHZhciB3cmFwcGVyV2lkdGggPSB3cmFwcGVyLmNsaWVudFdpZHRoXG5cbiAgICB2YXIgbWFwV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtd3JhcHBlcicpXG5cbiAgICB2YXIgbW91c2VYID0gZDMuZXZlbnQuc291cmNlRXZlbnQueFxuICAgIHZhciB4RGVsdGEgPSAod3JhcHBlcldpZHRoIC0gbW91c2VYKSAtIHBhbmVsQ2xpZW50V2lkdGhcblxuICAgIHZhciBuZXdQYW5lbFdpZHRoID0gcGFuZWxDbGllbnRXaWR0aCArIHhEZWx0YVxuICAgIG5ld1BhbmVsV2lkdGggPSBuZXdQYW5lbFdpZHRoIDwgcGFuZWxNaW5XaWR0aCA/XG4gICAgICAgIHBhbmVsTWluV2lkdGhcbiAgICA6ICAgbmV3UGFuZWxXaWR0aCA+IHdyYXBwZXJXaWR0aCA/XG4gICAgICAgIHdyYXBwZXJXaWR0aFxuICAgIDogICBuZXdQYW5lbFdpZHRoXG4gICAgbWFwV3JhcHBlci5zdHlsZS5wYWRkaW5nUmlnaHQgPSBgJHtuZXdQYW5lbFdpZHRofWArJ3B4J1xuICAgIHBhbmVsLnN0eWxlKCd3aWR0aCcsIGAke25ld1BhbmVsV2lkdGh9YCsncHgnKVxufVxuXG5mdW5jdGlvbiBtYWtlTGF5ZXJHcm91cHMgKGxheW91dCkge1xuICAgIHJldHVybiBkMy5zZWxlY3QoJyNsYXllci1saXN0JylcbiAgICAgICAgLnNlbGVjdEFsbCgnLmxheWVyLWdyb3VwLXdyYXBwZXInKVxuICAgICAgICAuZGF0YShsYXlvdXQpXG4gICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAuYXBwZW5kKCdkaXYnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwLXdyYXBwZXInKVxuICAgICAgICAgICAgLmF0dHIoJ2lkJywgbGF5ZXJHcm91cCA9PiBsYXllckdyb3VwLmlkKVxuICAgICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGxheWVyR3JvdXAgPT4gbGF5ZXJHcm91cC5hY3RpdmUpXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoJ2RpdicpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cC1idG4gYnRuJylcbiAgICAgICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllckdyb3VwLmFjdGl2ZSA9ICFsYXllckdyb3VwLmFjdGl2ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLnBhcmVudE5vZGUpLmNsYXNzZWQoJ2FjdGl2ZScsICgpID0+IGxheWVyR3JvdXAuYWN0aXZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAudGV4dChsYXllckdyb3VwLm5hbWUpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAnKTtcbn1cblxuZnVuY3Rpb24gbWFrZUxheWVyRWxlbXMgKGxheWVyR3JvdXBzLCBsYXllcnMpIHtcbiAgICBsYXllckdyb3Vwcy5zZWxlY3RBbGwoJy5sYXllci1zZWxlY3QnKVxuICAgICAgICAuZGF0YShsYXllckdyb3VwID0+IGxheWVyc1tsYXllckdyb3VwLmlkXSlcbiAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdkaXYnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItc2VsZWN0JylcbiAgICAgICAgLmVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICB2YXIgZ3JvdXBOYW1lID0gdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWQ7XG4gICAgICAgICAgICB2YXIgbGF5ZXJEaXYgPSBkMy5zZWxlY3QodGhpcyk7XG5cbiAgICAgICAgICAgIG1ha2VDaGVja2JveChsYXllciwgbGF5ZXJEaXYpO1xuICAgICAgICAgICAgbWFrZUxhYmVsKGxheWVyLCBsYXllckRpdik7XG4gICAgICAgICAgICBtYWtlRGVzY3JpcHRpb24obGF5ZXIsIGxheWVyRGl2KTtcbiAgICAgICAgICAgIG1ha2VMYXllclRvb2xzKGxheWVyLCBsYXllckRpdik7XG4gICAgICAgIH0pO1xufVxuXG5mdW5jdGlvbiBtYWtlQ2hlY2tib3ggKGxheWVyLCBsYXllckRpdikge1xuICAgIGxheWVyRGl2LmFwcGVuZCgnaW5wdXQnKVxuICAgICAgICAuYXR0cigndHlwZScsICdjaGVja2JveCcpXG4gICAgICAgIC5hdHRyKCdpZCcsIGxheWVyID0+IGxheWVyLmlkKVxuICAgICAgICAuYXR0cignY2hlY2tlZCcsIChsYXllcikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGxheWVyLmFjdGl2ZSA/ICdjaGVja2VkJyA6IG51bGw7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbihsYXllcikge1xuICAgICAgICAgICAgdG9nZ2xlTGF5ZXIobGF5ZXIpO1xuICAgICAgICAgICAgbGF5ZXJEaXYuc2VsZWN0KCcubGF5ZXItdG9vbHMtd3JhcHBlcicpXG4gICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGxheWVyLmFjdGl2ZSk7XG4gICAgICAgICAgICBpZiAobGF5ZXIuYWN0aXZlKSBzZXRTbGlkZXJJbml0aWFsUG9zKGxheWVyLCBsYXllckRpdilcbiAgICAgICAgfSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VMYWJlbChsYXllciwgbGF5ZXJEaXYpIHtcbiAgICBsYXllckRpdi5hcHBlbmQoJ2xhYmVsJylcbiAgICAgICAgLmF0dHIoJ2ZvcicsIGxheWVyID0+IGxheWVyLmlkKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItbGFiZWwnKVxuICAgICAgICAuaHRtbChsYXllciA9PiBsYXllci5uYW1lKTtcbn1cblxuZnVuY3Rpb24gbWFrZURlc2NyaXB0aW9uIChsYXllciwgbGF5ZXJEaXYpIHtcbiAgICBpZiAobGF5ZXIuaW5mbyAmJiBsYXllci5pbmZvICE9PSAnJykge1xuICAgICAgICBsYXllckRpdi5hcHBlbmQoJ2RpdicpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby1idG4nKVxuICAgICAgICAgICAgLnRleHQoJyg/KScpXG4gICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLnBhcmVudE5vZGUpXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoJy5sYXllci1pbmZvLXdyYXBwZXInKVxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBsYXllckRpdi5hcHBlbmQoJ2RpdicpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby13cmFwcGVyJylcbiAgICAgICAgICAgIC50ZXh0KGxheWVyID0+IGxheWVyLmluZm8pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbWFrZUxheWVyVG9vbHMobGF5ZXIsIGxheWVyRGl2KSB7XG4gICAgdmFyIGxheWVyVG9vbHNEaXYgPSBsYXllckRpdi5hcHBlbmQoJ2RpdicpXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci10b29scy13cmFwcGVyJylcbiAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXllci5hY3RpdmVcbiAgICAgICAgfSlcblxuICAgIG1ha2VPcGFjaXR5U2xpZGVyKGxheWVyLCBsYXllclRvb2xzRGl2KTtcbiAgICBtYWtlTGVnZW5kKGxheWVyLCBsYXllclRvb2xzRGl2KTtcbn1cblxuZnVuY3Rpb24gbWFrZUxlZ2VuZCAobGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyKSB7XG4gICAgbGF5ZXJUb29sc1dyYXBwZXJcbiAgICAgICAgLmFwcGVuZCgnZGl2JylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQtd3JhcHBlcicpXG4gICAgICAgIC5hcHBlbmQoJ2ltZycpXG4gICAgICAgICAgICAuYXR0cignc3JjJywgbGF5ZXIubGVnZW5kIHx8ICdtZWFuX25kdmlfbGVnZW5kLmpwZycpO1xufVxuXG5cblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvcGFuZWwuanMiLCJpbXBvcnQge0dldE1hcH0gZnJvbSBcIi4vbWFwXCI7XG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tIFwiLi9zaGFyZVwiO1xuXG5leHBvcnQgY29uc3QgQkFTRV9MQVlFUl9UWVBFID0gXCJiYXNlbGF5ZXJcIjtcblxudmFyIF9iYXNlbGF5ZXJzO1xuXG5leHBvcnQgZnVuY3Rpb24gQ3JlYXRlQmFzZUxheWVycyAobWFwLCBsYXllckNvbmZpZykge1xuICAgIGxheWVyQ29uZmlnID0gbGF5ZXJDb25maWcgfHwgXG4gICAgICAgIFt7XG4gICAgICAgICAgICBcImlkXCIgOiBcImNhcnRvLWxpZ2h0LWRlZmF1bHRcIixcbiAgICAgICAgICAgIFwidXJsXCIgOiBcImh0dHA6Ly97c30uYmFzZW1hcHMuY2FydG9jZG4uY29tL2xpZ2h0X2FsbC97en0ve3h9L3t5fS5wbmdcIixcbiAgICAgICAgICAgIFwiYXR0cmlidXRpb25cIiA6ICcmY29weTsgPGEgaHJlZj1cImh0dHA6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzLCAmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vY2FydG8uY29tL2F0dHJpYnV0aW9uc1wiPkNBUlRPPC9hPidcbiAgICAgICAgfV07XG5cbiAgICBfYmFzZWxheWVycyA9IGxheWVyQ29uZmlnO1xuICAgIHZhciBpO1xuICAgIHZhciBiYXNlTGF5ZXI7XG4gICAgdmFyIGNvbmZpZztcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsYXllckNvbmZpZy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25maWcgPSBsYXllckNvbmZpZ1tpXTtcblxuICAgICAgICBpZiAoIWNvbmZpZy5hY3RpdmUpIGNvbnRpbnVlO1xuICAgICAgICBiYXNlTGF5ZXIgPSBjcmVhdGVCYXNlTGF5ZXIoY29uZmlnKTtcbiAgICAgICAgY29uZmlnLmxheWVyID0gYmFzZUxheWVyO1xuICAgICAgICBiYXNlTGF5ZXIuYWRkVG8obWFwKTtcbiAgICB9XG5cbiAgICBjcmVhdGVCYXNlTGF5ZXJVSShsYXllckNvbmZpZylcbn1cblxuZnVuY3Rpb24gY3JlYXRlQmFzZUxheWVyVUkgKGNvbmZpZykge1xuICAgIHZhciBiYXNlVUkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGJhc2VVSS5jbGFzc05hbWUgPSBcImJhc2VsYXllci11aVwiO1xuICAgIHZhciBiYXNlV3JhcHBlcjtcbiAgICB2YXIgYmFzZUltZztcbiAgICB2YXIgYmFzZUxhYmVsO1xuXG4gICAgdmFyIGxheWVyO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY29uZmlnLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBsYXllciA9IGNvbmZpZ1tpXTtcbiAgICAgICAgaWYgKCFsYXllci5oYXNPd25Qcm9wZXJ0eShcImltYWdlXCIpKSBjb250aW51ZTtcblxuICAgICAgICBiYXNlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGJhc2VXcmFwcGVyLnNldEF0dHJpYnV0ZShcImRhdGEtbGF5ZXJcIiwgbGF5ZXIuaWQpO1xuICAgICAgICBiYXNlSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICAgICAgYmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbGF5ZXIuaW1hZ2UpO1xuICAgICAgICBiYXNlSW1nLnNldEF0dHJpYnV0ZShcImFsdFwiLCBsYXllci5sYWJlbCk7XG4gICAgICAgIGJhc2VJbWcuc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgbGF5ZXIubGFiZWwpO1xuICAgICAgICBiYXNlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBiYXNlTGFiZWwudGV4dENvbnRlbnQgPSBsYXllci5sYWJlbDtcbiAgICAgICAgYmFzZVdyYXBwZXIuYXBwZW5kQ2hpbGQoYmFzZUltZyk7XG4gICAgICAgIGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VMYWJlbCk7XG4gICAgICAgIGJhc2VXcmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVCYXNlQ2xpY2spXG5cbiAgICAgICAgZDMuc2VsZWN0KGJhc2VXcmFwcGVyKVxuICAgICAgICAgICAgLmNsYXNzZWQoXCJiYXNlLXNlbGVjdG9yXCIsIHRydWUpXG4gICAgICAgICAgICAuY2xhc3NlZChcImFjdGl2ZVwiLCBsYXllci5hY3RpdmUpO1xuICAgICAgIFxuICAgICAgICBiYXNlVUkuYXBwZW5kQ2hpbGQoYmFzZVdyYXBwZXIpO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJsZWFmbGV0LWJvdHRvbSBsZWFmbGV0LWxlZnRcIilbMF0uYXBwZW5kQ2hpbGQoYmFzZVVJKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQmFzZUNsaWNrIChlKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB2YXIgbGF5ZXJpZCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiKTtcbiAgICB0b2dnbGVBY3RpdmVCYXNlVUkodGhpcyk7XG4gICAgcmVtb3ZlQ3VycmVudEJhc2VMYXllcigpO1xuICAgIGFkZE5ld0Jhc2VMYXllclRvTWFwKGxheWVyaWQpO1xuICAgIHVwZGF0ZVNoYXJlVXJsKCk7XG59XG5cbmZ1bmN0aW9uIHRvZ2dsZUFjdGl2ZUJhc2VVSSAoYmFzZVVJRWxlbSkge1xuICAgIGQzLnNlbGVjdChcIi5iYXNlLXNlbGVjdG9yLmFjdGl2ZVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGZhbHNlKTtcbiAgICBkMy5zZWxlY3QoYmFzZVVJRWxlbSkuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ3VycmVudEJhc2VMYXllciAoKSB7XG4gICAgdmFyIG1hcCA9IEdldE1hcCgpO1xuXG4gICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMudHlwZSAhPT0gQkFTRV9MQVlFUl9UWVBFKSByZXR1cm47XG4gICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllcik7XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gYWRkTmV3QmFzZUxheWVyVG9NYXAgKGxheWVyaWQpIHtcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XG5cbiAgICB2YXIgbGF5ZXI7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBfYmFzZWxheWVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgbGF5ZXIgPSBfYmFzZWxheWVyc1tpXTtcbiAgICAgICAgaWYgKGxheWVyLmlkICE9PSBsYXllcmlkKSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFsYXllci5sYXllcikgbGF5ZXIubGF5ZXIgPSBjcmVhdGVCYXNlTGF5ZXIobGF5ZXIpO1xuICAgICAgICBsYXllci5sYXllci5hZGRUbyhtYXApO1xuICAgICAgICBsYXllci5sYXllci5icmluZ1RvQmFjaygpO1xuICAgICAgICBicmVhaztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUJhc2VMYXllciAobGF5ZXJDb25maWcpIHtcbiAgICByZXR1cm4gTC50aWxlTGF5ZXIoXG4gICAgICAgIGxheWVyQ29uZmlnLnVybCxcbiAgICAgICAgbWFrZUJhc2VMYXllck9wdGlvbnMobGF5ZXJDb25maWcpXG4gICAgKTtcbn1cblxuZnVuY3Rpb24gbWFrZUJhc2VMYXllck9wdGlvbnMgKGNvbmZpZykge1xuICAgIHZhciBvcHRpb25zID0ge307XG4gICAgaWYgKGNvbmZpZy5pZCkgb3B0aW9ucy5pZCA9IGNvbmZpZy5pZDtcbiAgICBpZiAoY29uZmlnLmF0dHJpYnV0aW9uKSBvcHRpb25zLmF0dHJpYnV0aW9uID0gY29uZmlnLmF0dHJpYnV0aW9uO1xuICAgIGlmIChjb25maWcuc3ViZG9tYWlucykgb3B0aW9ucy5zdWJkb21haW5zID0gY29uZmlnLnN1YmRvbWFpbnM7XG4gICAgb3B0aW9ucy50eXBlID0gQkFTRV9MQVlFUl9UWVBFO1xuXG4gICAgcmV0dXJuIG9wdGlvbnM7XG59XG5cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2Jhc2VsYXllci5qcyIsImltcG9ydCB7dXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodH0gZnJvbSAnLi9wYW5lbCdcblxudmFyIHRpcDtcblxuZXhwb3J0IGZ1bmN0aW9uIFNldHVwR3JhcGhzICgpIHtcbiAgICBkMy5zZWxlY3RBbGwoXCIuZ3JhcGgtdHlwZS1idG5cIikub24oXCJjbGlja1wiLCBoYW5kbGVHcmFwaFR5cGVCdG5DbGljayk7XG4gICAgZXh0ZW5kRGF0ZU1vZHVsZSgpO1xuICAgIHRpcCA9IGQzLnRpcCgpLmF0dHIoJ2NsYXNzJywgJ2QzLXRpcCcpLmh0bWwoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQ7IH0pO1xufVxuXG5mdW5jdGlvbiBleHRlbmREYXRlTW9kdWxlICgpIHtcbiAgICBEYXRlLnByb3RvdHlwZS5pc0xlYXBZZWFyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB5ZWFyID0gdGhpcy5nZXRGdWxsWWVhcigpO1xuICAgICAgICBpZigoeWVhciAmIDMpICE9IDApIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuICgoeWVhciAlIDEwMCkgIT0gMCB8fCAoeWVhciAlIDQwMCkgPT0gMCk7XG4gICAgfTtcblxuICAgIC8vIEdldCBEYXkgb2YgWWVhclxuICAgIERhdGUucHJvdG90eXBlLmdldERPWSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZGF5Q291bnQgPSBbMCwgMzEsIDU5LCA5MCwgMTIwLCAxNTEsIDE4MSwgMjEyLCAyNDMsIDI3MywgMzA0LCAzMzRdO1xuICAgICAgICB2YXIgbW4gPSB0aGlzLmdldE1vbnRoKCk7XG4gICAgICAgIHZhciBkbiA9IHRoaXMuZ2V0RGF0ZSgpO1xuICAgICAgICB2YXIgZGF5T2ZZZWFyID0gZGF5Q291bnRbbW5dICsgZG47XG4gICAgICAgIGlmKG1uID4gMSAmJiB0aGlzLmlzTGVhcFllYXIoKSkgZGF5T2ZZZWFyKys7XG4gICAgICAgIHJldHVybiBkYXlPZlllYXI7XG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEJpbmRHcmFwaEV2ZW50cyAobWFwKSB7XG4gICAgbWFwLm9uKFwiY2xpY2tcIiwgaGFuZGxlTWFwQ2xpY2spO1xufVxuXG52YXIgYmFzZUljb24gPSBMLkljb24uZXh0ZW5kKHt9KTtcblxudmFyIGdyYXBoSWNvbiA9IG5ldyBiYXNlSWNvbih7XG4gICAgaWNvblVybDogJ2ltZ3MvYmx1ZV9pY29uLnBuZycsXG4gICAgc2hhZG93VXJsOiAnaW1ncy9tYXJrZXJfc2hhZG93LnBuZycsXG4gICAgaWNvblNpemU6IFsyNSwgNDFdLFxuICAgIGljb25BbmNob3I6IFsxMiwgNDFdLFxuICAgIHBvcHVwQW5jaG9yOiBbMSwgLTM0XSxcbiAgICBzaGFkb3dTaXplOiBbNDEsIDQxXVxufSk7XG5cbnZhciBob3Zlckljb24gPSBuZXcgYmFzZUljb24oe1xuICAgIGljb25Vcmw6ICdpbWdzL29yYW5nZV9pY29uLnBuZycsXG4gICAgc2hhZG93VXJsOiAnaW1ncy9tYXJrZXJfc2hhZG93LnBuZycsXG4gICAgaWNvblNpemU6IFsyNSwgNDFdLFxuICAgIGljb25BbmNob3I6IFsxMiwgNDFdLFxuICAgIHBvcHVwQW5jaG9yOiBbMSwgLTM0XSxcbiAgICBzaGFkb3dTaXplOiBbNDEsIDQxXVxufSk7XG5cbmZ1bmN0aW9uIGhhbmRsZU1hcENsaWNrIChlKSB7XG4gICAgdmFyIG1hcCA9IHRoaXM7XG4gICAgdmFyIGxhdCA9IGUubGF0bG5nLmxhdDtcbiAgICB2YXIgbG5nID0gZS5sYXRsbmcubG5nO1xuXG4gICAgdmFyIGRpdiA9IGNyZWF0ZUdyYXBoRGl2KGxhdCwgbG5nKTtcbiAgICB2YXIgbWFya2VyID0gY3JlYXRlTWFya2VyKG1hcCwgbGF0LCBsbmcpO1xuICAgIGQzLnNlbGVjdChkaXYpLm9uKFwibW91c2VlbnRlclwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG1hcmtlci5zZXRJY29uKGhvdmVySWNvbik7XG4gICAgfSlcbiAgICBkMy5zZWxlY3QoZGl2KS5vbihcIm1vdXNlbGVhdmVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBtYXJrZXIuc2V0SWNvbihncmFwaEljb24pO1xuICAgIH0pXG4gICAgY3JlYXRlR3JhcGhSZW1vdmVyKG1hcCwgZGl2LCBtYXJrZXIpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVNYXJrZXIgKG1hcCwgbGF0LCBsbmcpIHtcbiAgICByZXR1cm4gTC5tYXJrZXIoW2xhdCwgbG5nXSwge2ljb246IGdyYXBoSWNvbn0pLmFkZFRvKG1hcCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUdyYXBoUmVtb3ZlciAobWFwLCBkaXYsIG1hcmtlcikge1xuICAgIHZhciBlbGVtID0gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSgpO1xuICAgIGRpdi5hcHBlbmRDaGlsZChlbGVtKTtcbiAgICBkMy5zZWxlY3QoZWxlbSkub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpO1xuICAgICAgICBsaXN0LnJlbW92ZUNoaWxkKGRpdik7XG4gICAgICAgIG1hcC5yZW1vdmVMYXllcihtYXJrZXIpO1xuICAgICAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KClcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSAoKSB7XG4gICAgdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGVsZW0uY2xhc3NOYW1lID0gXCJyZW1vdmUtZ3JhcGhcIjtcbiAgICBlbGVtLmlubmVyVGV4dCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoXCIxMDAwNVwiKTtcbiAgICBlbGVtLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIFwiUmVtb3ZlIGdyYXBoXCIpO1xuICAgIHJldHVybiBlbGVtO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIERBVEEgUFJPQ0VTU0lORyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIGdldERhdGEobGF0LCBsbmcsIGRpdikge1xuICAgIHZhciB1cmwgPSBcImh0dHBzOi8vZmNhdi1uZHZpLm5lbWFjLm9yZy9sYW5kZGF0X3Byb2R1Y3QuY2dpP2FyZ3M9XCIgKyBsbmcgKyBcIixcIiArIGxhdDtcbiAgICB2YXIgb1JlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIG9SZXEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgcmVzcG9uc2UgPSByZXNwb25zZS5yZXBsYWNlKC9cXFt8XFxdfFxcJy9nLCBcIlwiKS5zcGxpdChcIiwgXCIpO1xuICAgICAgICBkcmF3R3JhcGgocmVzcG9uc2UsIGRpdiwgbGF0LCBsbmcpO1xuICAgICAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KClcbiAgICB9KTtcbiAgICBvUmVxLm9wZW4oXCJHRVRcIiwgdXJsKTtcbiAgICBvUmVxLnNlbmQoKVxufVxuXG5mdW5jdGlvbiBzcGxpdERhdGEoZGF0YSkge1xuICAgIHZhciBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGRhdGFbaV0gPSBkYXRhW2ldLnNwbGl0KFwiLFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIHJlcHJvY2Vzc0RhdGEgKG9yaWdkYXRhKSB7XG4gICAgdmFyIGRhdGEgPSB7fTtcbiAgICB2YXIgcG9pbnQ7XG4gICAgdmFyIGtleTtcbiAgICB2YXIgaSwgajtcblxuICAgIGRhdGFbXCJrZXlzXCJdID0gW107XG4gICAgZm9yIChpID0gMDsgaSA8IG9yaWdkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHBvaW50ID0gb3JpZ2RhdGFbaV07XG4gICAgICAgIGtleSA9IHBvaW50WzBdLnN1YnN0cmluZygwLDQpO1xuICAgICAgICBpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgZGF0YVtrZXldID0gW107XG4gICAgICAgICAgICBkYXRhW1wia2V5c1wiXS5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZGF0YVtrZXldLnB1c2gocG9pbnQpO1xuICAgIH1cblxuICAgIHZhciBkYXRhRm9yTWVkaWFucztcbiAgICB2YXIgbWVkaWFuO1xuICAgIGRhdGFbXCJtZWRpYW5zXCJdID0gW107XG4gICAgZm9yIChpID0gMDsgaSA8IDQ2OyBpKyspIHtcbiAgICAgICAgZGF0YUZvck1lZGlhbnMgPSBbXTtcbiAgICAgICAgZm9yIChqID0gaTsgaiA8IG9yaWdkYXRhLmxlbmd0aDsgaiArPSA0Nikge1xuICAgICAgICAgICAgZGF0YUZvck1lZGlhbnMucHVzaChvcmlnZGF0YVtqXVsxXSk7XG4gICAgICAgIH1cblxuICAgICAgICBtZWRpYW4gPSBkYXRhRm9yTWVkaWFucy5zb3J0KClbTWF0aC5mbG9vcihkYXRhRm9yTWVkaWFucy5sZW5ndGgvMildO1xuICAgICAgICBkYXRhW1wibWVkaWFuc1wiXS5wdXNoKG1lZGlhbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGE7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSU5URVJGQUNFIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBoYW5kbGVHcmFwaFR5cGVCdG5DbGljayAoKSB7XG4gICAgdmFyIHR5cGUgPSB0aGlzLmRhdGFzZXQudHlwZTtcbiAgICB2YXIgYWN0aXZlRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF07XG4gICAgdmFyIGFjdGl2ZVR5cGUgPSBhY3RpdmVFbGVtLmRhdGFzZXQudHlwZTtcblxuICAgIGlmICh0eXBlID09PSBhY3RpdmVUeXBlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBkMy5zZWxlY3QoXCIjZ3JhcGgtbGlzdFwiKVxuICAgICAgICAuY2xhc3NlZChcImdyYXBoLVwiICsgYWN0aXZlVHlwZSwgZmFsc2UpXG4gICAgICAgIC5jbGFzc2VkKFwiZ3JhcGgtXCIgKyB0eXBlLCB0cnVlKTtcblxuICAgIGQzLnNlbGVjdChhY3RpdmVFbGVtKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGZhbHNlKTtcbiAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlR3JhcGhEaXYgKGxhdCwgbG5nKSB7XG4gICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkxhdDogXCIgKyBsYXQgKyBcIiwgTG9uOiBcIiArIGxuZyk7XG4gICAgZGl2LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xuICAgIGRpdi5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtZWxlbVwiKVxuICAgIGdldERhdGEobGF0LCBsbmcsIGRpdik7XG4gICAgcmV0dXJuIGRpdjtcbn1cblxuZnVuY3Rpb24gZHJhd0dyYXBoKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcbiAgICBkYXRhID0gc3BsaXREYXRhKGRhdGEpO1xuICAgIHZhciByZXByb2Nlc3NlZERhdGEgPSByZXByb2Nlc3NEYXRhKGRhdGEpO1xuICAgIG1ha2VVcERvd25MaW5lR3JhcGgoZGF0YSwgZGl2LCByZXByb2Nlc3NlZERhdGFbXCJtZWRpYW5zXCJdKTtcbiAgICBtYWtlVXBEb3duT3ZlcmxhcGluZ0xpbmVHcmFwaFdpdGhDaGVja2JveGVzKHJlcHJvY2Vzc2VkRGF0YSwgZGl2LCBsYXQsIGxuZyk7XG4gICAgZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzKHJlcHJvY2Vzc2VkRGF0YSwgZGl2LCBsYXQsIGxuZyk7XG4gICAgdmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXBoLWxpc3RcIik7XG4gICAgbGlzdC5hcHBlbmRDaGlsZChkaXYpO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8gVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIG1ha2VVcERvd25MaW5lR3JhcGggKGRhdGEsIGRpdiwgYXZlcmFnZXMpIHtcbiAgICAvLyBTZXQgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIGNhbnZhcyAvIGdyYXBoXG4gICAgdmFyIG1hcmdpbiA9IHt0b3A6IDMwLCByaWdodDogMjAsIGJvdHRvbTogMzAsIGxlZnQ6IDI1fSxcbiAgICB3aWR0aCA9IDU4MCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxuICAgIGhlaWdodCA9IDI3MCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXG4gICAgLy8gU2V0IHRoZSByYW5nZXNcbiAgICB2YXIgeCA9IGQzLnNjYWxlVGltZSgpLnJhbmdlKFswLCB3aWR0aF0pXG4gICAgICAgIC5kb21haW4oW1xuICAgICAgICAgICAgcGFyc2VEYXRlKGRhdGFbMF1bMF0pLFxuICAgICAgICAgICAgcGFyc2VEYXRlKGRhdGFbZGF0YS5sZW5ndGgtMV1bMF0pXG4gICAgICAgIF0pO1xuICAgIHZhciB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSlcbiAgICAgICAgLmRvbWFpbihbMCwgMTAwXSk7XG5cbiAgICAvLyBEZWZpbmUgdGhlIGF4ZXNcbiAgICB2YXIgeEF4aXMgPSBkMy5heGlzQm90dG9tKHgpXG4gICAgICAgIC50aWNrcygxNilcbiAgICAgICAgLnRpY2tGb3JtYXQoZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBkLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIH0pO1xuXG4gICAgdmFyIHlBeGlzID0gZDMuYXhpc0xlZnQoeSlcbiAgICAgICAgLnRpY2tzKDYpO1xuXG4gICAgLy8gRGVmaW5lIHRoZSBsaW5lXG4gICAgdmFyIHZhbHVlbGluZSA9IGQzLmxpbmUoKVxuICAgICAgICAueChmdW5jdGlvbihkKSB7IHJldHVybiB4KHBhcnNlRGF0ZShkWzBdKSk7IH0pXG4gICAgICAgIC55KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHkoZFsxXSk7IH0pO1xuXG4gICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KVxuICAgICAgICAuYXBwZW5kKFwiZGl2XCIpXG4gICAgICAgIC5jbGFzc2VkKFwidGltZXNlcmllcy1ncmFwaFwiLCB0cnVlKTtcblxuICAgIC8vIEFkZHMgdGhlIHN2ZyBjYW52YXNcbiAgICB2YXIgc3ZnID0gd3JhcHBlclxuICAgICAgICAuYXBwZW5kKFwic3ZnXCIpXG4gICAgICAgIC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuICAgICAgICAuYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcbiAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdyA9IHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHRcbiAgICAgICAgICAgIHZhciBoID0gaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b21cbiAgICAgICAgICAgIHJldHVybiAnMCAwICcgKyB3ICsgJyAnICsgaFxuICAgICAgICB9KVxuICAgICAgICAuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWlkWU1pZCcpXG4gICAgICAgIC5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xuXG4gICAgc3ZnLmNhbGwodGlwKTtcblxuICAgIC8vIEFkZCB0aGUgdmFsdWVsaW5lIHBhdGguXG4gICAgZHJhd0xpbmVhclBhdGgoZGF0YSwgdmFsdWVsaW5lLCBzdmcpO1xuXG4gICAgLy8gQWRkIHRoZSBYIEF4aXNcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieCBheGlzXCIpXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIilcbiAgICAgICAgLmNhbGwoeEF4aXMpO1xuXG4gICAgLy8gQWRkIHRoZSBZIEF4aXNcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpXG4gICAgICAgIC5jYWxsKHlBeGlzKTtcbiAgICAvKipcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxuICAgICAqL1xuICAgIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8gT1ZFUkxBUFBJTkcgVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gbWFrZVVwRG93bk92ZXJsYXBpbmdMaW5lR3JhcGhXaXRoQ2hlY2tib3hlcyAoZGF0YSwgZGl2LCBsYXQsIGxuZykge1xuICAgIHZhciB5ZWFyID0gXCIyMDE1XCI7XG5cbiAgICB2YXIgY2hhcnRzID0ge307XG5cbiAgICAvLyBTZXQgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIGNhbnZhcyAvIGdyYXBoXG4gICAgdmFyIG1hcmdpbiA9IHt0b3A6IDMwLCByaWdodDogMjAsIGJvdHRvbTogMzAsIGxlZnQ6IDI1fSxcbiAgICAgICAgd2lkdGggPSA1MDAgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCxcbiAgICAgICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cbiAgICB2YXIgYXZlcmFnZXMgPSBkYXRhLm1lZGlhbnM7XG5cbiAgICB2YXIgeCA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoWzAsIHdpZHRoXSlcbiAgICAgICAgLmRvbWFpbihbMCwgMzY1XSk7XG4gICAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKVxuICAgICAgICAuZG9tYWluKFswLCAxMDBdKTtcblxuICAgIC8vIERlZmluZSB0aGUgYXhlc1xuICAgIGZ1bmN0aW9uIGZvcm1hdE1vbnRoVGljayAoZCkge1xuICAgICAgICByZXR1cm4gKE1PTlRIX0xBQkVMU1soZC0xNSkvMzBdKTtcbiAgICB9XG4gICAgdmFyIHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4KVxuICAgICAgICAudGlja3MoMTEpXG4gICAgICAgIC50aWNrVmFsdWVzKFsxNSwgNDUsIDc1LCAxMDUsIDEzNSwgMTY1LCAxOTUsIDIyNSwgMjU1LCAyODUsIDMxNSwgMzQ1XSlcbiAgICAgICAgLnRpY2tGb3JtYXQoZm9ybWF0TW9udGhUaWNrKTtcbiAgXG4gICAgdmFyIHlBeGlzID0gZDMuYXhpc0xlZnQoeSlcbiAgICAgICAgLnRpY2tzKDYpO1xuXG4gICAgLy8gRGVmaW5lIHRoZSBsaW5lXG4gICAgdmFyIHZhbHVlbGluZSA9IGQzLmxpbmUoKVxuICAgICAgICAueChmdW5jdGlvbihkLCBpKSB7IHJldHVybiAoQXJyYXkuaXNBcnJheShkKSA/IHgocGFyc2VKdWxpYW5EYXkoZFswXSkpIDogeCgoaSAqIDgpICsgMyApKTsgfSlcbiAgICAgICAgLnkoZnVuY3Rpb24oZCkgeyByZXR1cm4gKEFycmF5LmlzQXJyYXkoZCkgPyB5KGRbMV0pIDogeShkKSk7IH0pO1xuXG4gICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcIm92ZXJsYXBwaW5nLWdyYXBoXCIsIHRydWUpO1xuXG4gICAgLy8gQWRkcyB0aGUgc3ZnIGNhbnZhc1xuICAgIHZhciBzdmcgPSB3cmFwcGVyXG4gICAgICAgIC5hcHBlbmQoXCJzdmdcIilcbiAgICAgICAgICAgIC5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB3ID0gd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodFxuICAgICAgICAgICAgICAgIHZhciBoID0gaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b21cbiAgICAgICAgICAgICAgICByZXR1cm4gJzAgMCAnICsgdyArICcgJyArIGhcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWlkWU1pZCcpXG4gICAgICAgICAgICAvLy5hdHRyKFwid2lkdGhcIiwgd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodClcbiAgICAgICAgICAgIC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXG4gICAgICAgIC5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcbiAgICAgICAgICAgICAgICAgIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XG5cbiAgICBzdmcuY2FsbCh0aXApO1xuXG4gICAgLy8gQWRkIHRoZSBYIEF4aXNcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieCBheGlzXCIpXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIilcbiAgICAgICAgLmNhbGwoeEF4aXMpO1xuXG4gICAgLy8gQWRkIHRoZSBZIEF4aXNcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpXG4gICAgICAgIC5jYWxsKHlBeGlzKTtcblxuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl0gPSB7XG4gICAgICAgIFwicGF0aFwiIDogZHJhd0xpbmVhclBhdGgoZGF0YVtcIm1lZGlhbnNcIl0sIHZhbHVlbGluZSwgc3ZnKVxuICAgIH07XG5cbiAgICBjaGFydHNbeWVhcl0gPSB7XG4gICAgICAgIFwicGF0aFwiIDogZHJhd0xpbmVhclBhdGgoZGF0YVt5ZWFyXSwgdmFsdWVsaW5lLCBzdmcpXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XG4gICAgICovXG4gICAgY2hhcnRzW1wibWVkaWFuc1wiXVtcInBvaW50c1wiXSA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtcIm1lZGlhbnNcIl0sIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG4gICAgY2hhcnRzW3llYXJdW1wicG9pbnRzXCJdID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW3llYXJdLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXG4gICAgdmFyIGlucHV0d3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJpbnB1dC13cmFwcGVyXCIsIHRydWUpO1xuXG4gICAgZGF0YS5rZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBjcmVhdGVDaGVja2JveChpbnB1dHdyYXBwZXIsIGtleSwgXCJ0aW1lc2VyaWVzXCIsIHllYXIsIGNoYXJ0cywgZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzLCBsYXQsIGxuZyk7XG4gICAgfSk7XG5cbiAgICBjcmVhdGVDaGVja2JveChpbnB1dHdyYXBwZXIsIFwibWVkaWFuc1wiLCBcInRpbWVzZXJpZXNcIiwgXCJtZWRpYW5zXCIsIGNoYXJ0cywgZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzLCBsYXQsIGxuZyk7XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gUE9MQVIgR1JBUEggLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzIChkYXRhLCBkaXYsIGxhdCwgbG5nKSB7XG4gICAgdmFyIHllYXIgPSBcIjIwMTVcIjtcbiAgICB2YXIgd2lkdGggPSA0OTAsXG4gICAgICAgIGhlaWdodCA9IDQ5MCxcbiAgICAgICAgcmFkaXVzID0gTWF0aC5taW4od2lkdGgsIGhlaWdodCkgLyAyIC0gMzA7XG5cbiAgICB2YXIgYXZlcmFnZXMgPSBkYXRhW1wibWVkaWFuc1wiXTtcbiAgICB2YXIgY2VudGVyID0gZmluZFBvbGFyQ2VudGVyKGRhdGEpO1xuICAgIHZhciB0aHJlc2hvbGRzID0gZmluZFBvbGFyVGhyZXNob2xkcyhhdmVyYWdlcywgY2VudGVyWzFdWzBdKTtcblxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgc2NhbGluZyBvZiBkYXRhLiBXZSBrbm93IHRoYXQgdGhlIG5kdmkgdmFsdWVzIGZhbGwgYmV0d2VlblxuICAgICAqIDAgJiAxMDAgc28gd2Ugc2V0IG91ciBkb21haW4gdG8gdGhhdC4gVGhlIHJhbmdlIGNvbnRyb2xzIHdoZXJlIHRoZVxuICAgICAqIHBvaW50cyB3aWxsIGxpZSBpbiBvdXIgZ3JhcGgsIHNvIHdlIHNldCB0aGVtIHRvIGJlIGJldHdlZW4gMCBhbmQgdGhlXG4gICAgICogcmFkaXVzLlxuICAgICAqL1xuICAgIHZhciByID0gZDMuc2NhbGVMaW5lYXIoKVxuICAgICAgICAuZG9tYWluKFswLCAxMDBdKVxuICAgICAgICAucmFuZ2UoWzAsIHJhZGl1c10pO1xuXG4gICAgLyoqXG4gICAgICogZnVuY3Rpb24gd2hpY2ggd2lsbCBkcmF3IGVhY2ggcG9pbnQuIFRvIGNvbXB1dGUgdGhlIGRpc3RhbmNlIGZyb20gdGhlXG4gICAgICogY2VudGVyIGVhY2ggcG9pbnQgaXMgd2UgcGFzcyB0aGUgZGF0YXBvaW50IHRvIHRoZSBmdW5jdGlvbiBkZWZpbmVkIGFib3ZlLlxuICAgICAqIFRvIGRldGVybWluZSB0aGUgYW5nbGUgZnJvbSB0aGUgb3JpZ2luIHdlIG5lZWQgdG8gY29udmVydCB0aGUgZGF5IHRvXG4gICAgICogcmFkaWFucywgc28gd2UgY29udmVydCB0aGUgZGF5IHRvIGEgbnVtYmVyIGJldHdlZW4gMCAmIDEgYW5kIHRoZW4gbXVsdGlwbHlcbiAgICAgKiBpdCBieSAyIHBpLlxuICAgICAqL1xuICAgIHZhciBsaW5lID0gZDMucmFkaWFsTGluZSgpXG4gICAgICAgIC5yYWRpdXMoZnVuY3Rpb24oZCkgeyByZXR1cm4gQXJyYXkuaXNBcnJheShkKSA/IHIoZFsxXSkgOiByKGQpOyB9KVxuICAgICAgICAuYW5nbGUoZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgdmFyIGRheSA9IEFycmF5LmlzQXJyYXkoZCkgPyBwYXJzZUp1bGlhbkRheShkWzBdKSA6IChpICogOCkgKyAzO1xuICAgICAgICAgICAgcmV0dXJuICgoKChkYXkgLSAxKSUzNjUpLzM2NSkgKiAoMipNYXRoLlBJKSk7XG4gICAgICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogU2V0cyB1cCB0aGUgY2FudmFzIHdoZXJlIHRoZSBjaXJjbGUgd2lsbCBiZSBkcmF3bi5cbiAgICAgKi9cbiAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwicG9sYXItZ3JhcGhcIiwgdHJ1ZSk7XG4gICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpXG4gICAgICAgIC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcbiAgICAgICAgLy8uYXR0cihcImhlaWdodFwiLCBoZWlnaHQpXG4gICAgICAgIC5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICcwIDAgJysgd2lkdGggKyAnICcgKyBoZWlnaHRcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKVxuICAgICAgICAuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHdpZHRoIC8gMiArIFwiLFwiICsgaGVpZ2h0IC8gMiArIFwiKVwiKTtcblxuICAgIHN2Zy5jYWxsKHRpcCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGJpZyBjaXJjbGVzIG9mIHRoZSBncmFwaCAmIHRoZWlyIGxhYmVsc1xuICAgICAqL1xuICAgIHZhciBnciA9IHN2Zy5hcHBlbmQoXCJnXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJyIGF4aXNcIilcbiAgICAgICAgLnNlbGVjdEFsbChcImdcIilcbiAgICAgICAgLmRhdGEoci50aWNrcyg1KS5zbGljZSgxKSlcbiAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwiZ1wiKTtcblxuICAgIGdyLmFwcGVuZChcImNpcmNsZVwiKVxuICAgICAgICAuYXR0cihcInJcIiwgcik7XG5cbiAgICBnci5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgIC5hdHRyKFwieVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiAtcihkKSAtIDQ7IH0pXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwicm90YXRlKDE1KVwiKVxuICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxuICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBkOyB9KTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgbGFiZWxzIGZvciBlYWNoIG1vbnRoIGFuZCB0aGUgbGluZXNcbiAgICAgKiB0aGF0IGdvIG91dCB0byB0aGVtLlxuICAgICAqL1xuICAgIHZhciBnYSA9IHN2Zy5hcHBlbmQoXCJnXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJhIGF4aXNcIilcbiAgICAgICAgLnNlbGVjdEFsbChcImdcIilcbiAgICAgICAgLmRhdGEoZDMucmFuZ2UoMCwgMzYwLCAzMCkpXG4gICAgICAgIC5lbnRlcigpLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwicm90YXRlKFwiICsgKGQgLSA5MCkgKyBcIilcIjsgfSk7XG5cbiAgICBnYS5hcHBlbmQoXCJsaW5lXCIpXG4gICAgICAgIC5hdHRyKFwieDJcIiwgcmFkaXVzKTtcblxuICAgIGdhLmFwcGVuZChcInRleHRcIilcbiAgICAgICAgLmF0dHIoXCJ4XCIsIHJhZGl1cyArIDYpXG4gICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKVxuICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkIDwgMzYwICYmIGQgPiAxODAgPyBcImVuZFwiIDogbnVsbDsgfSlcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7IH0pXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIE1PTlRIX0xBQkVMU1tkLzMwXTsgfSk7XG5cbiAgICAvKipcbiAgICAgKiBEcmF3cyB0aGUgdGhyZXNob2xkIGxpbmVzXG4gICAgICovXG4gICAgdmFyIHRocmVzaG9sZEVsZW0gPSBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAuc2VsZWN0QWxsKFwiZ1wiKVxuICAgICAgICAuZGF0YSh0aHJlc2hvbGRzKVxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInJvdGF0ZShcIiArIChkLmRhdGFbMV1bMF0gLSA5MCkgKyBcIilcIjsgfSk7XG5cbiAgICB0aHJlc2hvbGRFbGVtLmFwcGVuZChcImxpbmVcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIilcbiAgICAgICAgLmF0dHIoXCJ4MlwiLCByYWRpdXMpO1xuXG4gICAgdGhyZXNob2xkRWxlbS5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgIC5hdHRyKFwieFwiLCByYWRpdXMgKyA2KVxuICAgICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuICgoKChkLmRhdGFbMV1bMF0gLSAxKSUzNjUpLzM2NSkgKiAoMipNYXRoLlBJKSk7IH0pXG4gICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKVxuICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbihkKSB7IHZhciBkYXkgPSBkLmRhdGFbMV1bMF07IHJldHVybiBkYXkgPCAzNjAgJiYgZGF5ID4gMTgwID8gXCJlbmRcIiA6IG51bGw7IH0pXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgdmFyIGRheSA9IGQuZGF0YVsxXVswXTsgcmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyBcInJvdGF0ZSgxODAgXCIgKyAocmFkaXVzICsgNikgKyBcIiwwKVwiIDogbnVsbDsgfSlcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5sYWJlbDsgfSk7XG5cbiAgICAvKipcbiAgICAgKiBEcmF3cyB0aGUgbGluZSB0byB0aGUgY2VudGVyIG9mIHRoZSBkYXRhXG4gICAgICovXG4gICAgdmFyIGNlbnRlckRheSA9IGNlbnRlclsxXVswXTtcbiAgICB2YXIgY2VudGVyRGF5T3Bwb3NpdGUgPSAoY2VudGVyRGF5ICsgKDM2NS8yKSkgJSAzNjU7XG4gICAgdmFyIGNlbnRlckRheURhdGEgPSBbY2VudGVyRGF5LCAxMDBdO1xuICAgIHZhciBjZW50ZXJEYXlPcHBvc2l0ZURhdGEgPSBbY2VudGVyRGF5T3Bwb3NpdGUsIDEwMF07XG4gICAgdmFyIGdyb3dpbmdTZWFzb25EYXRhID0gW2NlbnRlckRheURhdGEsIGNlbnRlckRheU9wcG9zaXRlRGF0YV1cblxuICAgIGRyYXdQb2xhclBhdGgoZ3Jvd2luZ1NlYXNvbkRhdGEsIGxpbmUsIHN2ZylcbiAgICAgICAgLmNsYXNzZWQoXCJncm93aW5nLXNlYXNvbi1saW5lXCIsIFwidHJ1ZVwiKTtcblxuICAgIGRyYXdQb2xhclBhdGgoY2VudGVyLCBsaW5lLCBzdmcpXG4gICAgICAgIC5jbGFzc2VkKFwiY2VudGVyLWxpbmVcIiwgXCJ0cnVlXCIpO1xuXG4gICAgc3ZnLnNlbGVjdEFsbChcInBvaW50XCIpXG4gICAgICAgIC5kYXRhKFtjZW50ZXJbMV1dKVxuICAgICAgICAuZW50ZXIoKVxuICAgICAgICAuYXBwZW5kKFwiY2lyY2xlXCIpXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJwb2ludFwiKVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtkXSkuc2xpY2UoMSkuc2xpY2UoMCwgLTEpO1xuICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgY29vcnMgKyBcIilcIlxuICAgICAgICB9KVxuICAgICAgICAuYXR0cihcInJcIiwgMi41KVxuICAgICAgICAuYXR0cihcInN0cm9rZVwiLCBcIiMwMDBcIilcbiAgICAgICAgLmF0dHIoXCJmaWxsXCIsIFwiI2RkODJkMlwiKVxuICAgICAgICAub24oXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgdGlwLnNob3coXCJDZW50ZXI6IFwiICArIFN0cmluZyhkWzFdKS5zdWJzdHJpbmcoMCwgNykpO1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDUpO1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIycHhcIik7XG4gICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgICAgIHRpcC5oaWRlKCk7XG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgMi41KTtcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMXB4XCIpO1xuICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgdmFyIGNoYXJ0cyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBsaW5lIHRoYXQgdGhlIGRhdGEgZm9sbG93c1xuICAgICAqL1xuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl0gPSB7XG4gICAgICAgIFwicGF0aFwiIDogZHJhd1BvbGFyUGF0aChhdmVyYWdlcywgbGluZSwgc3ZnKVxuICAgIH07XG5cbiAgICBjaGFydHNbeWVhcl0gPSB7XG4gICAgICAgIFwicGF0aFwiIDogZHJhd1BvbGFyUGF0aChkYXRhW3llYXJdLCBsaW5lLCBzdmcpXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XG4gICAgICovXG4gICAgY2hhcnRzLm1lZGlhbnMucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhhdmVyYWdlcywgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG4gICAgY2hhcnRzW3llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cbiAgICB2YXIgaW5wdXR3cmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcImlucHV0LXdyYXBwZXJcIiwgdHJ1ZSk7XG5cbiAgICBkYXRhLmtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSBpbnB1dHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpO1xuXG4gICAgICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJpbnB1dFwiKVxuICAgICAgICAgICAgLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIilcbiAgICAgICAgICAgIC5hdHRyKFwiaWRcIiwgXCJwb2xhci1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcbiAgICAgICAgICAgIC5hdHRyKFwidmFsdWVcIiwga2V5KVxuICAgICAgICAgICAgLnByb3BlcnR5KFwiY2hlY2tlZFwiLCAoa2V5ID09PSB5ZWFyKSA/IHRydWUgOiBmYWxzZSlcbiAgICAgICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdQb2xhclBhdGgoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnKTtcbiAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImxhYmVsXCIpXG4gICAgICAgICAgICAudGV4dChrZXkpXG4gICAgICAgICAgICAuYXR0cihcImZvclwiLCBcInBvbGFyLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICB9KTtcblxuICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSBpbnB1dHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpO1xuXG4gICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImlucHV0XCIpXG4gICAgICAgIC5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpXG4gICAgICAgIC5hdHRyKFwiaWRcIiwgXCJwb2xhci1hdmVyYWdlLVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKVxuICAgICAgICAuYXR0cihcInZhbHVlXCIsIFwibWVkaWFuc1wiKVxuICAgICAgICAucHJvcGVydHkoXCJjaGVja2VkXCIsIHRydWUpXG4gICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdQb2xhclBhdGgoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnKVxuXG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImxhYmVsXCIpXG4gICAgICAgIC50ZXh0KFwiQmFzZWxpbmVcIilcbiAgICAgICAgLmF0dHIoXCJmb3JcIiwgXCJwb2xhci1hdmVyYWdlLVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblxuICAgIHZhciB0aHJlc2hvbGRDaGVja2JveD0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKVxuICAgICAgICAuY2xhc3NlZChcInRocmVzaG9sZC1jaGVja2JveFwiLCB0cnVlKTtcblxuICAgIHRocmVzaG9sZENoZWNrYm94LmFwcGVuZChcImlucHV0XCIpXG4gICAgICAgIC5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpXG4gICAgICAgIC5hdHRyKFwiaWRcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpXG4gICAgICAgIC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgdHJ1ZSlcbiAgICAgICAgLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aHJlc2hvbGRFbGVtLnN0eWxlKFwib3BhY2l0eVwiLCAodGhpcy5jaGVja2VkKSA/IDEgOiAwKTtcbiAgICAgICAgfSk7XG5cbiAgICB0aHJlc2hvbGRDaGVja2JveC5hcHBlbmQoXCJsYWJlbFwiKVxuICAgICAgICAudGV4dChcIlRocmVzaG9sZHNcIilcbiAgICAgICAgLmF0dHIoXCJmb3JcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xufVxuXG4vKiBQT0xBUiBHUkFQSCBIRUxQRVJTICovXG5cbmZ1bmN0aW9uIGZpbmRQb2xhckNlbnRlciAoZGF0YSkge1xuICAgIHZhciBpLCBqLCBsZW5ndGgsIGFycjtcbiAgICB2YXIgdG90YWxTdW0gPSAwO1xuICAgIHZhciBpbmNvbXBsZXRlWWVhcnMgPSAwO1xuICAgIHZhciBzdW07XG4gICAgbGVuZ3RoID0gNDY7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5rZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFyciA9IGRhdGFbZGF0YS5rZXlzW2ldXTtcbiAgICAgICAgaWYgKGFyci5sZW5ndGggIT09IGxlbmd0aCkge1xuICAgICAgICAgICAgaW5jb21wbGV0ZVllYXJzKys7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBzdW0gPSAwO1xuICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGVuZ3RoLzI7IGorKykge1xuICAgICAgICAgICAgc3VtICs9IChhcnJbal1bMV0gLSBhcnJbaisyM11bMV0pO1xuICAgICAgICB9XG4gICAgICAgIHN1bSA9IHN1bSAvIDIzO1xuICAgICAgICB0b3RhbFN1bSArPSBzdW07XG4gICAgfVxuICAgIHRvdGFsU3VtID0gTWF0aC5hYnModG90YWxTdW0pIC8gKGRhdGEua2V5cy5sZW5ndGggLSBpbmNvbXBsZXRlWWVhcnMpO1xuXG4gICAgdmFyIGFyZWFEaWZmID0gMTAwMDAwMDtcbiAgICB2YXIgY2hlY2tEaWZmO1xuICAgIHZhciBhcmVhSW5kZXggPSAwO1xuICAgIHZhciBsZWZ0QXJlYSwgcmlnaHRBcmVhO1xuICAgIHZhciBhdmdzID0gZGF0YS5tZWRpYW5zO1xuICAgIHZhciBrLCBjb3VudGVyO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aC8yOyBpKyspIHtcbiAgICAgICAgbGVmdEFyZWEgPSAwO1xuICAgICAgICByaWdodEFyZWEgPSAwO1xuICAgICAgICBmb3IgKGNvdW50ZXIgPSAwOyBjb3VudGVyIDwgbGVuZ3RoLzI7IGNvdW50ZXIrKykge1xuICAgICAgICAgICAgaiA9IChpICsgY291bnRlcikgJSA0NjtcbiAgICAgICAgICAgIGsgPSAoaiArIDIzKSAlIDQ2O1xuXG4gICAgICAgICAgICBsZWZ0QXJlYSArPSBwYXJzZUludChhdmdzW2pdLCAxMCk7XG4gICAgICAgICAgICByaWdodEFyZWEgKz0gcGFyc2VJbnQoYXZnc1trXSwxMCk7XG4gICAgICAgIH1cbiAgICAgICAgY2hlY2tEaWZmID0gTWF0aC5hYnMobGVmdEFyZWEgLSByaWdodEFyZWEpO1xuICAgICAgICBpZiAoY2hlY2tEaWZmIDwgYXJlYURpZmYpIHtcbiAgICAgICAgICAgIGFyZWFEaWZmID0gY2hlY2tEaWZmO1xuICAgICAgICAgICAgYXJlYUluZGV4ID0gaTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBmaXJzdFJhZGl1cyA9IHBhcnNlSW50KGF2Z3NbYXJlYUluZGV4XSwgMTApO1xuICAgIHZhciBzZWNvbmRSYWRpdXMgPSBwYXJzZUludCgtYXZnc1thcmVhSW5kZXggKyAyM10sIDEwKTtcblxuICAgIHZhciBmaXJzdERpZmYgPSBNYXRoLmFicyh0b3RhbFN1bSAtIGZpcnN0UmFkaXVzKSAtIE1hdGguYWJzKHRvdGFsU3VtIC0gc2Vjb25kUmFkaXVzKTtcbiAgICB2YXIgc2Vjb25kRGlmZiA9IE1hdGguYWJzKC10b3RhbFN1bSAtIGZpcnN0UmFkaXVzKSAtIE1hdGguYWJzKC10b3RhbFN1bSAtIHNlY29uZFJhZGl1cyk7XG4gICAgaWYgKHNlY29uZERpZmYgPiBmaXJzdERpZmYpIHtcbiAgICAgICAgYXJlYUluZGV4ID0gYXJlYUluZGV4ICsgMjM7XG4gICAgfVxuXG4gICAgdmFyIGNpcmNsZWNlbnRlciA9IFswLCAwXTtcbiAgICB2YXIgZGF0YWNlbnRlciA9IFsoYXJlYUluZGV4ICogOCkgKyAzLCB0b3RhbFN1bV07XG5cbiAgICByZXR1cm4oW2NpcmNsZWNlbnRlciwgZGF0YWNlbnRlcl0pO1xufVxuXG4vKipcbiAqIHN0YXJ0RGF5IGlzIGFjdHVhbGx5IHRoZSBzZWFzb25hbGl0eSBpbmRleCwgaWYgaXQgb2NjdXJzIGFmdGVyIGp1bHkgaXQgc2hvdWxkIGJlIGZsaXBwZWRcbiAqL1xuZnVuY3Rpb24gZmluZFBvbGFyVGhyZXNob2xkcyAoZGF0YSwgc3RhcnREYXkpIHtcbiAgICB2YXIgc3RhcnRJbmRleCA9IE1hdGguZmxvb3IoKHN0YXJ0RGF5IC0gMykgLyA4KTtcbiAgICBpZiAoc3RhcnRJbmRleCA+IDIyKSB7XG4gICAgICAgIHN0YXJ0SW5kZXggPSBzdGFydEluZGV4IC0gMjM7XG4gICAgfVxuXG4gICAgdmFyIGksIGosIGxlbmd0aCwgYXJyO1xuICAgIHZhciB0b3RhbFN1bSA9IDA7XG4gICAgdmFyIHN1bTtcbiAgICBsZW5ndGggPSA0NjtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBqID0gKHN0YXJ0SW5kZXggKyBpKSAlIGxlbmd0aDtcbiAgICAgICAgdG90YWxTdW0gKz0gcGFyc2VJbnQoZGF0YVtqXSwgMTApO1xuICAgIH1cblxuICAgIHZhciBmaWZ0ZWVuVGhyZXNob2xkID0gdG90YWxTdW0gKiAuMTU7XG4gICAgdmFyIGVpZ2h0eVRocmVzaG9sZCA9IHRvdGFsU3VtICogLjgwO1xuICAgIHZhciBlaWdodHlmaXZlVGhyZXNob2xkID0gdG90YWxTdW0gKiAuODU7XG4gICAgdmFyIGZpZnRlZW5JbmRleEZvdW5kID0gZmFsc2UsIFxuICAgICAgICBlaWdodHlJbmRleEZvdW5kID0gZmFsc2UsXG4gICAgICAgIGVpZ2h0eWZpdmVJbmRleEZvdW5kID0gZmFsc2U7XG4gICAgdmFyIGZpZnRlZW5JbmRleCwgZWlnaHR5SW5kZXgsIGVpZ2h0eWZpdmVJbmRleDtcblxuICAgIHRvdGFsU3VtID0gMDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaiA9IChzdGFydEluZGV4ICsgaSkgJSBsZW5ndGg7XG4gICAgICAgIHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcbiAgICAgICAgaWYgKCFmaWZ0ZWVuSW5kZXhGb3VuZCAmJiB0b3RhbFN1bSA+IGZpZnRlZW5UaHJlc2hvbGQpIHtcbiAgICAgICAgICAgIGZpZnRlZW5JbmRleCA9IGo7XG4gICAgICAgICAgICBmaWZ0ZWVuSW5kZXhGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWVpZ2h0eUluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBlaWdodHlUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgIGVpZ2h0eUluZGV4ID0gajtcbiAgICAgICAgICAgIGVpZ2h0eUluZGV4Rm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlaWdodHlmaXZlSW5kZXhGb3VuZCAmJiB0b3RhbFN1bSA+IGVpZ2h0eWZpdmVUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgIGVpZ2h0eWZpdmVJbmRleCA9IGo7XG4gICAgICAgICAgICBlaWdodHlmaXZlSW5kZXhGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBjaXJjbGVDZW50ZXIgPSBbMCwgMF07XG5cbiAgICB2YXIgZmlmdGVlbkVuZCA9IFsoZmlmdGVlbkluZGV4ICogOCkgKyAzLCAxMDBdO1xuICAgIHZhciBlaWdodHlFbmQgPSBbKGVpZ2h0eUluZGV4ICogOCkgKyAzLCAxMDBdO1xuICAgIHZhciBlaWdodHlmaXZlRW5kID0gWyhlaWdodHlmaXZlSW5kZXggKiA4KSArIDMsIDEwMF07XG5cbiAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgICBcImxhYmVsXCIgOiBcIjE1JVwiLFxuICAgICAgICAgICAgXCJkYXRhXCIgOiBbY2lyY2xlQ2VudGVyLCBmaWZ0ZWVuRW5kXVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICBcImxhYmVsXCIgOiBcIjgwJVwiLFxuICAgICAgICAgICAgXCJkYXRhXCIgOiBbY2lyY2xlQ2VudGVyLCBlaWdodHlFbmRdXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIFwibGFiZWxcIiA6IFwiODUlXCIsXG4gICAgICAgICAgICBcImRhdGFcIiA6IFtjaXJjbGVDZW50ZXIsIGVpZ2h0eWZpdmVFbmRdXG4gICAgICAgIH1cbiAgICBdO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSEVMUEVSUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBkcmF3TGluZWFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcbiAgICByZXR1cm4gc3ZnLmFwcGVuZChcInBhdGhcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIilcbiAgICAgICAgLmF0dHIoXCJkXCIsIGxpbmUoZGF0YSkpO1xufVxuXG5mdW5jdGlvbiBkcmF3UG9sYXJQYXRoKGRhdGEsIGxpbmUsIHN2Zykge1xuICAgIHJldHVybiBzdmcuYXBwZW5kKFwicGF0aFwiKVxuICAgICAgICAuZGF0dW0oZGF0YSlcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIilcbiAgICAgICAgLmF0dHIoXCJkXCIsIGxpbmUpO1xufVxuXG5mdW5jdGlvbiBkcmF3TGluZWFyUG9pbnRzKGRhdGEsIGxpbmUsIHN2ZywgYXZlcmFnZXMpIHtcbiAgICByZXR1cm4gc3ZnLnNlbGVjdEFsbChcInBvaW50XCIpXG4gICAgICAgIC5kYXRhKGRhdGEpXG4gICAgICAgIC5lbnRlcigpXG4gICAgICAgIC5hcHBlbmQoXCJjaXJjbGVcIilcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInBvaW50XCIpXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQsIGkpIHtcbiAgICAgICAgICAgIHZhciBwb2ludCA9IEFycmF5LmlzQXJyYXkoZCkgPyBkIDogWyhpKjgpICsgMywgZF07XG4gICAgICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtwb2ludF0pLnNsaWNlKDEpLnNsaWNlKDAsIC0xKTtcbiAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGNvb3JzICsgXCIpXCJcbiAgICAgICAgfSlcbiAgICAgICAgLmF0dHIoXCJyXCIsIDMpXG4gICAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwiIzAwMFwiKVxuICAgICAgICAuYXR0cihcImZpbGxcIixmdW5jdGlvbihkLGkpe1xuICAgICAgICAgICAgdmFyIHZhbCA9IEFycmF5LmlzQXJyYXkoZCkgPyBkWzFdIDogZDtcbiAgICAgICAgICAgIHJldHVybiBjb21wdXRlQ29sb3IodmFsLCBhdmVyYWdlc1tpJTQ2XSwgMyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCBoYW5kbGVQb2ludE1vdXNlb3ZlcilcbiAgICAgICAgLm9uKFwibW91c2VvdXRcIiwgaGFuZGxlUG9pbnRNb3VzZW91dCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdmVyKGQpIHtcbiAgICB2YXIgdGlwU3RyaW5nID0gQXJyYXkuaXNBcnJheShkKSA/IGZvcm1hdERhdGUoZFswXSkgKyBcIjogXCIgICsgZFsxXSA6IFwiQXZlcmFnZTogXCIgICsgZDtcbiAgICB0aXAuc2hvdyh0aXBTdHJpbmcpO1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCA1KTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjJweFwiKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUG9pbnRNb3VzZW91dChkKSB7XG4gICAgdGlwLmhpZGUoKTtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgMyk7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIxcHhcIik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNoZWNrYm94KHdyYXBwZXIsIGtleSwgdHlwZSwgeWVhciwgY2hhcnRzLCBkYXRhLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzLCBsYXQsIGxuZykge1xuICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblxuICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJpbnB1dFwiKVxuICAgICAgICAuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKVxuICAgICAgICAuYXR0cihcImlkXCIsIHR5cGUgKyBcIi1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcbiAgICAgICAgLmF0dHIoXCJ2YWx1ZVwiLCBrZXkpXG4gICAgICAgIC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgKGtleSA9PT0geWVhcikgPyB0cnVlIDogZmFsc2UpXG4gICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3TGluZWFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKVxuICAgICAgICAudGV4dChrZXkpXG4gICAgICAgIC5hdHRyKFwiZm9yXCIsIHR5cGUgKyBcIi1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVDb2xvciAodmFsdWUsIG1lZGlhbiwgc2NhbGUpIHtcbiAgICB2YXIgZGlmZiA9IHZhbHVlIC0gbWVkaWFuO1xuICAgIHZhciBwZXJjZW50X2RpZmYgPSAoTWF0aC5hYnMoZGlmZikvbWVkaWFuKSAqIDEwMCAqIHNjYWxlO1xuICAgIHZhciBsaWdodG5lc3MgPSAoMTAwIC0gcGVyY2VudF9kaWZmKSArIFwiJVwiO1xuXG4gICAgaWYgKGRpZmYgPiAwKSB7XG4gICAgICAgIHJldHVybiBcImhzbCg4LCA3OSUsIFwiICsgbGlnaHRuZXNzICsgXCIpXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFwiaHNsKDIxOSwgNzklLCBcIiArIGxpZ2h0bmVzcyArIFwiKVwiO1xuICAgIH1cbn1cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBEQVRFIEhFTFBFUlMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbmZ1bmN0aW9uIHBhcnNlRGF0ZSAoZGF0ZSkge1xuICAgIGRhdGUgPSBkYXRlLnRvU3RyaW5nKCk7XG4gICAgdmFyIHllYXIgPSBkYXRlLnN1YnN0cmluZygwLCA0KTtcbiAgICB2YXIgbW9udGggPSBwYXJzZUludChkYXRlLnN1YnN0cmluZyg0LCA2KSwgMTApIC0gMTtcbiAgICB2YXIgZGF5ID0gZGF0ZS5zdWJzdHJpbmcoNiwgOCk7XG5cbiAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlSnVsaWFuRGF5IChkYXRlKSB7XG4gICAgaWYgKHR5cGVvZihkYXRlKSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBkYXRlID0gcGFyc2VEYXRlKGRhdGUpO1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXRET1koKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZGF0ZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdERhdGUgKGRhdGUpIHtcbiAgICBpZiAoZGF0ZSA9PT0gXCJBdmVyYWdlXCIpIHsgcmV0dXJuIGRhdGU7IH1cblxuICAgIGRhdGUgPSBwYXJzZURhdGUoZGF0ZSk7XG4gICAgcmV0dXJuIGZvcm1hdE1vbnRoKGRhdGUuZ2V0TW9udGgoKSkgKyBcIiBcIiArIG9yZGluYWxfc3VmZml4X29mKGRhdGUuZ2V0RGF0ZSgpKSArIFwiLCBcIiArIGRhdGUuZ2V0RnVsbFllYXIoKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0TW9udGggKG1vbnRoKSB7XG4gICAgc3dpdGNoIChtb250aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gXCJKYW4uXCJcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIFwiRmViLlwiXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBcIk1hci5cIlxuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gXCJBcHIuXCJcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIFwiTWF5XCJcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuIFwiSnVuLlwiXG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgIHJldHVybiBcIkp1bC5cIlxuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICByZXR1cm4gXCJBdWcuXCJcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIFwiU2VwLlwiXG4gICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgIHJldHVybiBcIk9jdC5cIlxuICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgcmV0dXJuIFwiTm92LlwiXG4gICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICByZXR1cm4gXCJEZWMuXCJcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG9yZGluYWxfc3VmZml4X29mKGRheSkge1xuICAgIHZhciBqID0gZGF5ICUgMTAsXG4gICAgICAgIGsgPSBkYXkgJSAxMDA7XG4gICAgaWYgKGogPT09IDEgJiYgayAhPT0gMTEpIHtcbiAgICAgICAgcmV0dXJuIGRheSArIFwic3RcIjtcbiAgICB9XG4gICAgaWYgKGogPT09IDIgJiYgayAhPT0gMTIpIHtcbiAgICAgICAgcmV0dXJuIGRheSArIFwibmRcIjtcbiAgICB9XG4gICAgaWYgKGogPT09IDMgJiYgayAhPT0gMTMpIHtcbiAgICAgICAgcmV0dXJuIGRheSArIFwicmRcIjtcbiAgICB9XG4gICAgcmV0dXJuIGRheSArIFwidGhcIjtcbn1cblxudmFyIE1PTlRIX0xBQkVMUyA9IHtcbiAgICAwOiBcIkphblwiLFxuICAgIDE6IFwiRmViXCIsXG4gICAgMjogXCJNYXJcIixcbiAgICAzOiBcIkFwclwiLFxuICAgIDQ6IFwiTWF5XCIsXG4gICAgNTogXCJKdW5cIixcbiAgICA2OiBcIkp1bFwiLFxuICAgIDc6IFwiQXVnXCIsXG4gICAgODogXCJTZXBcIixcbiAgICA5OiBcIk9jdFwiLFxuICAgIDEwOiBcIk5vdlwiLFxuICAgIDExOiBcIkRlY1wiXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvZ3JhcGguanMiLCJpbXBvcnQge3VwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHR9IGZyb20gJy4vcGFuZWwnXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEJpbmRUYWJFdmVudHMgKCkge1xuICBkMy5zZWxlY3RBbGwoXCIucGFuZWwtdG9wLWJ0blwiKS5vbihcImNsaWNrXCIsIGhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2sgKCkge1xuICAvLyBJZiB0aGUgc2VjdGlvbiBpcyBhbHJlYWR5IGFjdGl2ZSwgZG8gbm90aGluZ1xuICBpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSByZXR1cm5cblxuICB0b2dnbGVXcmFwcGVyQWN0aXZlU3RhdGVzKClcbiAgdG9nZ2xlTWFwUGFkZGluZygpXG4gIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKVxuXG4gIGQzLnNlbGVjdEFsbCgnLnBhbmVsLXRvcC1idG4sIC5wYW5lbC1zZWN0aW9uLXdyYXBwZXInKVxuICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gIWQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdhY3RpdmUnKTtcbiAgICB9KTtcblxufVxuXG5cbmZ1bmN0aW9uIHRvZ2dsZVdyYXBwZXJBY3RpdmVTdGF0ZXMoKSB7XG4gIHZhciB3cmFwcGVycyA9IGQzLnNlbGVjdEFsbCgnI21hcC13cmFwcGVyLCAjcmlnaHQtcGFuZWwnKVxuXG4gIHZhciBsYXllcnNBY3RpdmUgPSB3cmFwcGVycy5jbGFzc2VkKCdsYXllcnMtYWN0aXZlJylcbiAgdmFyIGdyYXBoc0FjdGl2ZSA9IHdyYXBwZXJzLmNsYXNzZWQoJ2dyYXBocy1hY3RpdmUnKVxuXG4gIHdyYXBwZXJzXG4gICAgLmNsYXNzZWQoJ2xheWVycy1hY3RpdmUnLCAhbGF5ZXJzQWN0aXZlKVxuICAgIC5jbGFzc2VkKCdncmFwaHMtYWN0aXZlJywgIWdyYXBoc0FjdGl2ZSlcbn1cblxuZnVuY3Rpb24gdG9nZ2xlTWFwUGFkZGluZyAoKSB7XG4gICAgdmFyIHBhZGRpbmdSaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmlnaHQtcGFuZWxcIikub2Zmc2V0V2lkdGg7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXAtd3JhcHBlclwiKS5zdHlsZS5wYWRkaW5nUmlnaHQgPSBwYWRkaW5nUmlnaHQgKyBcInB4XCI7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy90YWJzLmpzIiwidmFyIG1hcDtcblxuZXhwb3J0IGZ1bmN0aW9uIENyZWF0ZU1hcCAobWFwQ29uZmlnKSB7XG4gICAgdmFyIGlkID0gbWFwQ29uZmlnLmlkIHx8IFwibWFwXCI7XG4gICAgdmFyIG9wdGlvbnMgPSBtYXBDb25maWcub3B0aW9ucyB8fCB7XCJzY3JvbGxXaGVlbFpvb21cIiA6IGZhbHNlfTtcbiAgICB2YXIgaW5pdGlhbENlbnRlciA9IG1hcENvbmZpZy5jZW50ZXIgfHwgW1wiMzguNVwiLCBcIi04MVwiXTtcbiAgICB2YXIgaW5pdGlhbFpvb20gPSBtYXBDb25maWcuem9vbSB8fCA2O1xuXG4gICAgbWFwID0gTC5tYXAoaWQsIG9wdGlvbnMpLnNldFZpZXcoaW5pdGlhbENlbnRlciwgaW5pdGlhbFpvb20pO1xuICAgIEwuY29udHJvbC5hdHRyaWJ1dGlvbigpLmFkZFRvKG1hcClcbiAgICByZXR1cm4gbWFwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gR2V0TWFwICgpIHtcbiAgICByZXR1cm4gbWFwO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvbWFwLmpzIiwiaW1wb3J0IHtHZXRNYXB9IGZyb20gJy4vbWFwJztcbmltcG9ydCB7QkFTRV9MQVlFUl9UWVBFfSBmcm9tICcuL2Jhc2VsYXllcic7XG5pbXBvcnQge0dldEN1cnJlbnRMYXllcnN9IGZyb20gJy4vbGF5ZXInO1xuXG5leHBvcnQgZnVuY3Rpb24gQmluZFVwZGF0ZVNoYXJlVXJsIChtYXApIHtcbiAgICBtYXAub24oXCJtb3ZlZW5kXCIsIHVwZGF0ZVNoYXJlVXJsKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVNoYXJlVXJsIChlKSB7XG4gICAgdmFyIG1hcCA9IEdldE1hcCgpO1xuXG4gICAgdmFyIHBhcmFtcyA9IFtcbiAgICAgICAgbWFrZUNlbnRlclN0cmluZyhtYXApLFxuICAgICAgICBtYWtlWm9vbVN0cmluZyhtYXApLFxuICAgICAgICBtYWtlTGF5ZXJTdHJpbmcobWFwKSxcbiAgICAgICAgbWFrZUJhc2VMYXllclN0cmluZyhtYXApLFxuICAgIF07XG5cbiAgICBzZXRTaGFyZVVybChtYWtlU2hhcmVVcmwocGFyYW1zKSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VTaGFyZVVybCAocGFyYW1zKSB7XG4gICAgcmV0dXJuIFwiP1wiICsgcGFyYW1zLmZpbHRlcihmdW5jdGlvbiAocCkgeyByZXR1cm4gcCAhPT0gdW5kZWZpbmVkIH0pLmpvaW4oXCImXCIpO1xufVxuXG5mdW5jdGlvbiBzZXRTaGFyZVVybCAodXJsKSB7XG4gICAgaWYgKHdpbmRvdy5oaXN0b3J5ICYmIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSkge1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIFwiXCIsIHVybCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBtYWtlQ2VudGVyU3RyaW5nIChtYXApIHtcbiAgICB2YXIgY2VudGVyID0gbWFwLmdldENlbnRlcigpO1xuICAgIHJldHVybiBcImNlbnRlcj1cIiArIGNlbnRlci5sYXQudG9TdHJpbmcoKSArIFwiLFwiICsgY2VudGVyLmxuZy50b1N0cmluZygpXG59XG5cbmZ1bmN0aW9uIG1ha2Vab29tU3RyaW5nIChtYXApIHtcbiAgICByZXR1cm4gXCJ6b29tPVwiICsgbWFwLmdldFpvb20oKTtcbn1cblxuZnVuY3Rpb24gbWFrZUxheWVyU3RyaW5nIChtYXApIHtcbiAgICB2YXIgbGF5ZXJzID0gW107XG4gICAgdmFyIG9wYWNpdHlWYWxzID0ge307XG4gICAgdmFyIGN1cnJlbnRMYXllcnMgPSBHZXRDdXJyZW50TGF5ZXJzKCk7XG5cbiAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGxheWVyLm9wdGlvbnM7XG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubGF5ZXJzKSB7XG4gICAgICAgICAgICBvcGFjaXR5VmFsc1tvcHRpb25zLmxheWVyc10gPSBvcHRpb25zLmhhc093blByb3BlcnR5KFwib3BhY2l0eVwiKSA/IG9wdGlvbnMub3BhY2l0eSA6IFwiMVwiO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgY3VycmVudExheWVyO1xuICAgIHZhciBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBjdXJyZW50TGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGN1cnJlbnRMYXllciA9IGN1cnJlbnRMYXllcnNbaV07XG4gICAgICAgIGxheWVycy5wdXNoKGN1cnJlbnRMYXllcik7XG4gICAgICAgIGxheWVycy5wdXNoKG9wYWNpdHlWYWxzW2N1cnJlbnRMYXllcl0pO1xuICAgIH1cbiAgICByZXR1cm4gXCJsYXllcnM9XCIgKyBsYXllcnMuam9pbihcIixcIik7XG59XG5cbmZ1bmN0aW9uIG1ha2VCYXNlTGF5ZXJTdHJpbmcgKG1hcCkge1xuICAgIHZhciBsYXllcnMgPSBbXTtcbiAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICBpZiAobGF5ZXIub3B0aW9ucyAmJiBsYXllci5vcHRpb25zLnR5cGUgPT09IEJBU0VfTEFZRVJfVFlQRSkge1xuICAgICAgICAgICAgbGF5ZXJzLnB1c2gobGF5ZXIub3B0aW9ucy5pZCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gXCJiYXNlbGF5ZXJzPVwiICsgbGF5ZXJzLmpvaW4oXCIsXCIpO1xufVxuXG5mdW5jdGlvbiBwYXJzZVNoYXJlVXJsICgpIHtcbiAgICB2YXIgcGFyYW1zID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcbiAgICBpZiAocGFyYW1zID09PSBcIlwiKSByZXR1cm47XG5cbiAgICBwYXJhbXMgPSBnZXRQYXJhbXNBcnJheShwYXJhbXMpO1xuICAgIHBhcmFtcyA9IG1ha2VLZXllZFBhcmFtc09iamVjdChwYXJhbXMpO1xuXG4gICAgZm9ybWF0UGFyYW1zKHBhcmFtcyk7XG4gICAgcmV0dXJuIHBhcmFtcztcbn1cblxuZnVuY3Rpb24gZ2V0UGFyYW1zQXJyYXkgKHBhcmFtcykge1xuICAgIHBhcmFtcyA9IHBhcmFtcy5zdWJzdHJpbmcoMSk7XG4gICAgcGFyYW1zID0gdW5tYW5nbGVQYXJhbVN0cmluZyhwYXJhbXMpO1xuICAgIHJldHVybiBwYXJhbXMuc3BsaXQoXCImXCIpO1xufVxuXG5mdW5jdGlvbiB1bm1hbmdsZVBhcmFtU3RyaW5nIChwYXJhbXMpIHtcbiAgICByZXR1cm4gcGFyYW1zLnJlcGxhY2UoL1xcJTJbY3xDXS9nLCBcIixcIik7XG59XG5cbmZ1bmN0aW9uIG1ha2VLZXllZFBhcmFtc09iamVjdCAocGFyYW1zQXJyKSB7XG4gICAgdmFyIHBhcnNlZFBhcmFtcyA9IHt9O1xuICAgIHZhciBwYXJhbVBhaXI7XG4gICAgdmFyIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgcGFyYW1zQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHBhcmFtUGFpciA9IHBhcmFtc0FycltpXS5zcGxpdChcIj1cIik7XG4gICAgICAgIHBhcnNlZFBhcmFtc1twYXJhbVBhaXJbMF1dID0gcGFyYW1QYWlyWzFdXG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcnNlZFBhcmFtcztcbn1cblxuZnVuY3Rpb24gZm9ybWF0UGFyYW1zIChwYXJhbXMpIHtcbiAgICBpZiAocGFyYW1zLmNlbnRlcikgcGFyYW1zLmNlbnRlciA9IGZvcm1hdENlbnRlclBhcmFtKHBhcmFtcy5jZW50ZXIpO1xuICAgIGlmIChwYXJhbXMubGF5ZXJzKSBwYXJhbXMubGF5ZXJzID0gZm9ybWF0TGF5ZXJQYXJhbShwYXJhbXMubGF5ZXJzKTtcbiAgICBpZiAocGFyYW1zLmJhc2VsYXllcnMpIHBhcmFtcy5iYXNlbGF5ZXJzID0gZm9ybWF0QmFzZUxheWVyUGFyYW0ocGFyYW1zLmJhc2VsYXllcnMpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRDZW50ZXJQYXJhbSAoY2VudGVyKSB7XG4gICAgcmV0dXJuIGNlbnRlci5zcGxpdChcIixcIik7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdExheWVyUGFyYW0gKGxheWVycykge1xuICAgIHZhciBmb3JtYXR0ZWRMYXllcnMgPSB7XG4gICAgICAgIFwiZW5hYmxlZExheWVyc1wiOiBbXSxcbiAgICAgICAgXCJvcGFjaXR5VmFsc1wiOiB7fVxuICAgIH07XG4gICAgdmFyIGxheWVySWQ7XG4gICAgdmFyIGk7XG5cbiAgICBsYXllcnMgPSBsYXllcnMuc3BsaXQoXCIsXCIpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpID0gaSArIDIpIHtcbiAgICAgICAgbGF5ZXJJZCA9IGxheWVyc1tpXTtcbiAgICAgICAgZm9ybWF0dGVkTGF5ZXJzLmVuYWJsZWRMYXllcnMucHVzaChsYXllcklkKTtcbiAgICAgICAgZm9ybWF0dGVkTGF5ZXJzLm9wYWNpdHlWYWxzW2xheWVySWRdID0gbGF5ZXJzW2krMV07XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvcm1hdHRlZExheWVycztcbn1cblxuZnVuY3Rpb24gZm9ybWF0QmFzZUxheWVyUGFyYW0gKGJhc2VsYXllcnMpIHtcbiAgICByZXR1cm4gYmFzZWxheWVycy5zcGxpdChcIixcIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBBZGRTaGFyZVNldHRpbmdzVG9Db25maWcgKGNvbmZpZykge1xuICAgIHZhciBzaGFyZSA9IHBhcnNlU2hhcmVVcmwoKTtcbiAgICBpZiAoIXNoYXJlKSByZXR1cm47XG4gICAgaWYgKHNoYXJlLmNlbnRlcikgY29uZmlnLm1hcC5jZW50ZXIgPSBzaGFyZS5jZW50ZXI7XG4gICAgaWYgKHNoYXJlLnpvb20pIGNvbmZpZy5tYXAuem9vbSA9IHNoYXJlLnpvb207XG4gICAgaWYgKHNoYXJlLmxheWVycykgYWRkTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlLmxheWVycywgY29uZmlnKTtcbiAgICBpZiAoc2hhcmUuYmFzZWxheWVycykgYWRkQmFzZUxheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5iYXNlbGF5ZXJzLCBjb25maWcpO1xufVxuXG5mdW5jdGlvbiBhZGRMYXllclNldHRpbmdzVG9Db25maWcgKHNoYXJlTGF5ZXJTZXR0aW5ncywgY29uZmlnKSB7XG4gICAgdmFyIGVuYWJsZWRMYXllcnMgPSBzaGFyZUxheWVyU2V0dGluZ3MuZW5hYmxlZExheWVycztcbiAgICBjb25maWdbXCJhY3RpdmUtbGF5ZXJzXCJdID0gZW5hYmxlZExheWVycztcblxuICAgIHZhciBpLCBqLCBwcm9wLCBsYXllcmdyb3VwO1xuICAgIHZhciBlbmFibGVkTGF5ZXI7XG4gICAgdmFyIGZvdW5kTGF5ZXI7XG4gICAgdmFyIGxheWVycyA9IGNvbmZpZy5sYXllcnM7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgZW5hYmxlZExheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3VuZExheWVyID0gZmFsc2U7XG4gICAgICAgIGVuYWJsZWRMYXllciA9IGVuYWJsZWRMYXllcnNbaV07XG4gICAgICAgIGZvciAocHJvcCBpbiBsYXllcnMpIHtcbiAgICAgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG4gICAgICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGxheWVyZ3JvdXAubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZW5hYmxlZExheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyZ3JvdXBbal0ub3BhY2l0eSA9IHNoYXJlTGF5ZXJTZXR0aW5ncy5vcGFjaXR5VmFsc1tlbmFibGVkTGF5ZXJdO1xuICAgICAgICAgICAgICAgICAgICBmb3VuZExheWVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhZGRCYXNlTGF5ZXJTZXR0aW5nc1RvQ29uZmlnIChzaGFyZUJhc2VMYXllclNldHRpbmdzLCBjb25maWcpIHtcbiAgICB2YXIgYmFzZWxheWVycyA9IGNvbmZpZy5iYXNlbGF5ZXJzO1xuICAgIHZhciBiYXNlbGF5ZXI7XG4gICAgdmFyIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgYmFzZWxheWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBiYXNlbGF5ZXIgPSBiYXNlbGF5ZXJzW2ldO1xuICAgICAgICBiYXNlbGF5ZXIuYWN0aXZlID0gKHNoYXJlQmFzZUxheWVyU2V0dGluZ3MuaW5kZXhPZihiYXNlbGF5ZXIuaWQpICE9PSAtMSkgPyB0cnVlIDogZmFsc2U7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvc2hhcmUuanMiLCJpbXBvcnQge0dldE1hcH0gZnJvbSBcIi4vbWFwXCI7XG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tIFwiLi9zaGFyZVwiO1xuXG4vKipcbiAqIE5lZWRlZCBmb3IgdGhlIHNoYXJlIHVybCBzaW5jZSBMZWFmbGV0IGRvZXMgbm90IGhhdmUgYSBkZWZhdWx0IHdheSB0byBzdXJmYWNlXG4gKiB0aGUgb3JkZXIgb2YgbGF5ZXJzIGluIHRoZSBtYXBcbiAqL1xudmFyIF9jdXJyZW50X2xheWVycyA9IFtdO1xuXG4vKipcbiAqIE5vdGU6IGxheWVyIGlzIG5vdCB0aGUgbGVhZmxldCBjb25jZXB0IG9mIGEgbGF5ZXIsIGJ1dCByYXRoZXIgdGhlIGludGVybmFsXG4gKiAgICAgICBvYmplY3Qgd2hpY2ggdHJhY2tzIHRoZW0uIGxheWVyLm1hcExheWVyIGlzIHRoZSBwb2ludGVyIHRvIHRoZVxuICogICAgICAgbGVhZmxldCBsYXllci5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gR2V0Q3VycmVudExheWVycyAoKSB7XG4gICAgcmV0dXJuIF9jdXJyZW50X2xheWVycztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIENyZWF0ZURlZmF1bHRMYXllcnMgKGxheWVycywgZGVmYXVsdExheWVycykge1xuICAgIHZhciBpLCBqLCBwcm9wLCBsYXllcmdyb3VwO1xuICAgIHZhciBkZWZhdWx0TGF5ZXI7XG4gICAgdmFyIGZvdW5kTGF5ZXI7XG5cbiAgICBpZiAoIWRlZmF1bHRMYXllcnMgfHwgZGVmYXVsdExheWVycy5sZW5ndGggPT09IDApIHJldHVybjtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBkZWZhdWx0TGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvdW5kTGF5ZXIgPSBmYWxzZTtcbiAgICAgICAgZGVmYXVsdExheWVyID0gZGVmYXVsdExheWVyc1tpXTtcbiAgICAgICAgZm9yIChwcm9wIGluIGxheWVycykge1xuICAgICAgICAgICAgaWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcbiAgICAgICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XG4gICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGF5ZXJncm91cC5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChsYXllcmdyb3VwW2pdLmlkID09PSBkZWZhdWx0TGF5ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlTGF5ZXIobGF5ZXJncm91cFtqXSk7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kTGF5ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZm91bmRMYXllcikgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVMYXllciAobGF5ZXIpIHtcbiAgICBpZiAoIWxheWVyLmFjdGl2ZSkge1xuICAgICAgICBlbmFibGVMYXllcihsYXllcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGlzYWJsZUxheWVyKGxheWVyKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVMYXllciAobGF5ZXIpIHtcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XG5cbiAgICBsYXllci5hY3RpdmUgPSB0cnVlO1xuICAgIGxheWVyLm1hcExheWVyID0gbGF5ZXIubWFwTGF5ZXIgfHwgbWFrZVdtc1RpbGVMYXllcihsYXllcik7XG4gICAgbWFwLmFkZExheWVyKGxheWVyLm1hcExheWVyKTtcbiAgICBhZGRMYXllclRvSW50ZXJuYWxUcmFja2VyKGxheWVyKTtcbiAgICB1cGRhdGVTaGFyZVVybCgpO1xufVxuXG5mdW5jdGlvbiBhZGRMYXllclRvSW50ZXJuYWxUcmFja2VyIChsYXllcikge1xuICAgIF9jdXJyZW50X2xheWVycy5wdXNoKGxheWVyLmlkKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVMYXllciAobGF5ZXIpIHtcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XG5cbiAgICBsYXllci5hY3RpdmUgPSBmYWxzZTtcbiAgICBpZiAobGF5ZXIubWFwTGF5ZXIgJiYgbWFwLmhhc0xheWVyKGxheWVyLm1hcExheWVyKSkge1xuICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobGF5ZXIubWFwTGF5ZXIpO1xuICAgIH1cbiAgICByZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xuICAgIHVwZGF0ZVNoYXJlVXJsKCk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUxheWVyRnJvbUludGVybmFsVHJhY2tlciAobGF5ZXIpIHtcbiAgICB2YXIgbG9jID0gX2N1cnJlbnRfbGF5ZXJzLmluZGV4T2YobGF5ZXIuaWQpO1xuICAgIGlmIChsb2MgPT09IC0xKSByZXR1cm47XG4gICAgX2N1cnJlbnRfbGF5ZXJzLnNwbGljZShsb2MsIDEpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTGF5ZXJPcGFjaXR5IChsYXllciwgbmV3T3BhY2l0eSkge1xuICAgIGxheWVyLm9wYWNpdHkgPSBuZXdPcGFjaXR5XG4gICAgbGF5ZXIubWFwTGF5ZXIuc2V0T3BhY2l0eShuZXdPcGFjaXR5KVxufVxuXG5mdW5jdGlvbiBtYWtlV21zVGlsZUxheWVyIChsYXllcikge1xuICAgIHJldHVybiBMLnRpbGVMYXllci53bXMobGF5ZXIudXJsLCB7XG4gICAgICAgIGxheWVyczogbGF5ZXIuaWQsXG4gICAgICAgIHRyYW5zcGFyZW50OiBsYXllci50cmFuc3BhcmVudCB8fCB0cnVlLFxuICAgICAgICB2ZXJzaW9uOiBsYXllci52ZXJzaW9uIHx8ICcxLjMuMCcsXG4gICAgICAgIGNyczogbGF5ZXIuY3JzIHx8IEwuQ1JTLkVQU0c0MzI2LFxuICAgICAgICBmb3JtYXQ6IGxheWVyLmZvcm1hdCB8fCAnaW1hZ2UvcG5nJyxcbiAgICAgICAgb3BhY2l0eTogbGF5ZXIub3BhY2l0eSB8fCBcIjFcIlxuICAgIH0pO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvbGF5ZXIuanMiLCJpbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tICcuL3NoYXJlJ1xuaW1wb3J0IHt1cGRhdGVMYXllck9wYWNpdHl9IGZyb20gXCIuL2xheWVyXCI7XG5cbi8vIHNldCBpdCBtYW51YWxseSBmb3Igbm93XG5jb25zdCBPUEFDSVRZX1JBTkdFX01BWCA9IDkwXG5cbnZhciBvcGFjaXR5U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpXG4gICAgLmRvbWFpbihbMSwgMF0pXG4gICAgLnJhbmdlKFswLCBPUEFDSVRZX1JBTkdFX01BWF0pXG4gICAgLmNsYW1wKHRydWUpXG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRTbGlkZXJJbml0aWFsUG9zIChsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIpIHtcblxuICAgIHZhciBsYXllck9wYWNpdHkgPSBsYXllci5vcGFjaXR5IHx8IDFcbiAgICB2YXIgaGFuZGxlT2Zmc2V0ID0gb3BhY2l0eVNjYWxlKGxheWVyT3BhY2l0eSlcblxuICAgIGxheWVyVG9vbHNXcmFwcGVyLnNlbGVjdCgnLm9wYWNpdHktc2xpZGVyLWhhbmRsZScpLnN0eWxlKCd0b3AnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBgJHtoYW5kbGVPZmZzZXR9YCsncHgnXG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VPcGFjaXR5U2xpZGVyIChsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIpIHtcblxuICAgIHZhciBsYXllck9wYWNpdHkgPSBsYXllci5vcGFjaXR5ICE9PSB1bmRlZmluZWQgPyBsYXllci5vcGFjaXR5IDogMVxuICAgIFxuICAgIHZhciB3cmFwcGVyID0gbGF5ZXJUb29sc1dyYXBwZXIuYXBwZW5kKCdkaXYnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXItd3JhcHBlcicpXG5cbiAgICB2YXIgb3BhY2l0eVBlcmNlbnRJbmRpY2F0b3IgPSB3cmFwcGVyLmFwcGVuZCgnZGl2JylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktc2xpZGVyLWluZGljYXRvcicpXG5cbiAgICBtYWtlU2xpZGVyVHJhY2sod3JhcHBlciwgbGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyLCBsYXllck9wYWNpdHkpXG5cbn1cblxuZnVuY3Rpb24gbWFrZVNsaWRlclRyYWNrKHdyYXBwZXIsIGxheWVyLCBsYXllclRvb2xzV3JhcHBlciwgbGF5ZXJPcGFjaXR5KSB7XG5cbiAgICB2YXIgb3ZlcmxheSA9IHdyYXBwZXIuYXBwZW5kKCdkaXYnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXItdHJhY2stb3ZlcmxheScpXG5cbiAgICB2YXIgdHJhY2sgPSBvdmVybGF5LmFwcGVuZCgnZGl2JylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktc2xpZGVyLXRyYWNrJylcblxuICAgIG92ZXJsYXkuYXBwZW5kKCdkaXYnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXItaGFuZGxlJylcblxuICAgIGlmIChsYXllci5hY3RpdmUpIHNldFNsaWRlckluaXRpYWxQb3MobGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyKVxuICAgIHNldERyYWdFdmVudExpc3RlbmVyKHdyYXBwZXIsIGxheWVyLCBsYXllck9wYWNpdHkpXG5cbn1cblxuZnVuY3Rpb24gc2V0RHJhZ0V2ZW50TGlzdGVuZXIod3JhcHBlciwgbGF5ZXIsIGxheWVyT3BhY2l0eSkge1xuICAgIHZhciBvdmVybGF5ID0gd3JhcHBlci5zZWxlY3QoJy5vcGFjaXR5LXNsaWRlci10cmFjay1vdmVybGF5JylcbiAgICBvdmVybGF5LmNhbGwoZDMuZHJhZygpXG4gICAgICAgIC5vbignc3RhcnQgZHJhZycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBuZXdPcGFjaXR5ID0gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSlcbiAgICAgICAgICAgIHVwZGF0ZUxheWVyT3BhY2l0eShsYXllciwgbmV3T3BhY2l0eSlcbiAgICAgICAgICAgIGFkanVzdFNsaWRlckhhbmRsZShvdmVybGF5LCBuZXdPcGFjaXR5KVxuICAgICAgICB9KVxuICAgICAgICAub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHVwZGF0ZVNoYXJlVXJsKClcbiAgICAgICAgfSkpXG59XG5cbmZ1bmN0aW9uIGFkanVzdFNsaWRlckhhbmRsZShvdmVybGF5LCBuZXdPcGFjaXR5KSB7XG4gICAgdmFyIGhhbmRsZSA9IG92ZXJsYXkuc2VsZWN0KCcub3BhY2l0eS1zbGlkZXItaGFuZGxlJylcbiAgICBoYW5kbGUuc3R5bGUoJ3RvcCcsIGAke29wYWNpdHlTY2FsZShuZXdPcGFjaXR5KX1gKydweCcpXG59XG5cbmZ1bmN0aW9uIGNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zKG92ZXJsYXkpIHtcbiAgICB2YXIgeVBvcyA9IGQzLm1vdXNlKG92ZXJsYXkubm9kZSgpKVsxXVxuICAgIHZhciBuZXdPcGFjaXR5ID0gb3BhY2l0eVNjYWxlLmludmVydCh5UG9zKVxuICAgIHJldHVybiBuZXdPcGFjaXR5XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9vcGFjaXR5U2xpZGVyLmpzIiwiLypcbiAgXCJsb2dvXCI6IHtcbiAgICBcImltYWdlXCI6IFwiaW1ncy9sYW5kYXRfbG9nb19ibHVlLnBuZ1wiLFxuICAgIFwiYWx0XCI6IFwiTG9nbyBmb3IgdGhlIExhbkRhdCBwcm9qZWN0XCIsXG4gICAgXCJsaW5rXCI6IFwiaHR0cHM6Ly9sYW5kYXQtZGV2Lm5lbWFjLm9yZ1wiLFxuICAgIFwibG9jYXRpb25cIjogW1wiYm90dG9tXCIsIFwicmlnaHRcIl1cbiAgfSxcbiovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENyZWF0ZUxvZ28gKGxvZ29kYXRhKSB7XG4gICAgaWYgKCFsb2dvZGF0YS5pbWFnZSkgcmV0dXJuO1xuXG4gICAgdmFyIGxvZ29XcmFwcGVyID0gY3JlYXRlTG9nb1dyYXBwZXIoKTtcbiAgICB2YXIgbG9nb0ltYWdlID0gY3JlYXRlTG9nb0ltYWdlKGxvZ29kYXRhKTtcbiAgICB2YXIgbG9nb0xpbmsgPSBsb2dvZGF0YS5saW5rID8gY3JlYXRlTG9nb0xpbmsobG9nb2RhdGEubGluaykgOiBudWxsO1xuXG4gICAgaWYgKGxvZ29MaW5rKSB7XG4gICAgICAgIGxvZ29MaW5rLmFwcGVuZENoaWxkKGxvZ29JbWFnZSk7XG4gICAgICAgIGxvZ29XcmFwcGVyLmFwcGVuZENoaWxkKGxvZ29MaW5rKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBsb2dvV3JhcHBlci5hcHBlbmRDaGlsZChsb2dvSW1hZ2UpO1xuICAgIH1cblxuICAgIHZhciBpbnNlcnRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShsb2dvZGF0YS5sb2NhdGlvbilbMF07XG4gICAgdmFyIGV4aXN0aW5nQ2hpbGQgPSBpbnNlcnRFbGVtZW50LmZpcnN0Q2hpbGQ7XG4gICAgaW5zZXJ0RWxlbWVudC5pbnNlcnRCZWZvcmUobG9nb1dyYXBwZXIsIGV4aXN0aW5nQ2hpbGQpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMb2dvV3JhcHBlciAoKSB7XG4gICAgdmFyIGxvZ29XcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBkMy5zZWxlY3QobG9nb1dyYXBwZXIpLmNsYXNzZWQoXCJwcm9qZWN0LWxvZ29cIiwgdHJ1ZSk7XG4gICAgcmV0dXJuIGxvZ29XcmFwcGVyO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMb2dvSW1hZ2UgKGxvZ29kYXRhKSB7XG4gICAgdmFyIGxvZ29JbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgbG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBsb2dvZGF0YS5pbWFnZSk7XG4gICAgaWYgKGxvZ29kYXRhLmxhYmVsKSB7XG4gICAgICAgIGxvZ29JbWFnZS5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgbG9nb2RhdGEubGFiZWwpO1xuICAgICAgICBsb2dvSW1hZ2Uuc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgbG9nb2RhdGEubGFiZWwpO1xuICAgIH1cbiAgICByZXR1cm4gbG9nb0ltYWdlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMb2dvTGluayAobGluaykge1xuICAgIHZhciBsb2dvTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgIGxvZ29MaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgbGluayk7XG4gICAgbG9nb0xpbmsuc2V0QXR0cmlidXRlKFwidGFyZ2V0XCIsIFwiX2JsYW5rXCIpO1xuICAgIHJldHVybiBsb2dvTGluaztcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2xvZ28uanMiXSwic291cmNlUm9vdCI6IiJ9