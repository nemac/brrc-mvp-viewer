!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),i=n(3),c=r(i),s=n(22),u=n(26),l=n(28),f=n(29),p=r(f),d=n(24),h=n(25),v=n(23),y=(n(30),function(e){(0,o.default)(e,m),(0,l.SetupGraphs)(),(0,p.default)()}),m=function(e){(0,h.AddShareSettingsToConfig)(e);var t=(0,d.CreateMap)(e.map);(0,u.CreateBaseLayers)(t,e.baselayers),(0,v.CreateDefaultLayers)(e.layers,e["active-layers"]),(0,s.SetupPanel)(e.layers,e.layout),(0,c.default)(t),(0,l.BindGraphEvents)(t),(0,h.BindUpdateShareUrl)(t)};window.Base=y,t.default={Base:y}},function(e,t){"use strict";function n(e,t){r(e,t)}function r(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState){try{var e=JSON.parse(n.responseText)}catch(e){console.log("ERROR: Malformed JSON in config file."),console.log(e)}a(e),o(e),t(e)}},n.open("GET",e,!0),n.send(),console.log("hi")}function a(e){e.map||(e.map={})}function o(e){var t,n,r=e.layers,a=e.mapserverUrl;e["active-layers"];for(var o in r){if(!r.hasOwnProperty(o))return;for(t=r[o],n=0;n<t.length;n++)i(t[n],a)}}function i(e,t){e.url=e.url||t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){var t=new a.EsriProvider,n=new a.GeoSearchControl({provider:t,showMarker:!1});e.addControl(n),L.DomEvent.on(n.searchElement.elements.container,"click",function(e){L.DomEvent.stopPropagation(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(4)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5);Object.defineProperty(t,"GeoSearchControl",{enumerable:!0,get:function(){return r(a).default}});var o=n(13);Object.defineProperty(t,"SearchElement",{enumerable:!0,get:function(){return r(o).default}});var i=n(17);Object.defineProperty(t,"BingProvider",{enumerable:!0,get:function(){return r(i).default}});var c=n(19);Object.defineProperty(t,"EsriProvider",{enumerable:!0,get:function(){return r(c).default}});var s=n(20);Object.defineProperty(t,"GoogleProvider",{enumerable:!0,get:function(){return r(s).default}});var u=n(21);Object.defineProperty(t,"OpenStreetMapProvider",{enumerable:!0,get:function(){return r(u).default}});var l=n(18);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return r(l).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){if(!L||!L.Control||!L.Control.extend)throw new Error("Leaflet must be loaded before instantiating the GeoSearch control");for(var e=L.Control.extend(y),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e,[null].concat(n)))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=(r(o),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});t.default=a;var c=n(12),s=r(c),u=n(13),l=r(u),f=n(16),p=r(f),d=n(14),h=n(15),v=function(){return{position:"topleft",style:"button",showMarker:!0,showPopup:!1,marker:{icon:new L.Icon.Default,draggable:!1},maxMarkers:1,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",notFoundMessage:"Sorry, that address could not be found.",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",msgbox:"leaflet-bar message",form:"",input:""},autoComplete:!0,autoCompleteDelay:250}},y={initialize:function(e){var t=this;this.markers=new L.FeatureGroup,this.options=i({},v(),e);var n=this.options,r=n.style,a=n.classNames,o=n.searchLabel,c=n.autoComplete,u=n.autoCompleteDelay;"button"!==r&&(this.options.classNames.container+=" "+e.style),this.searchElement=new l.default(i({},this.options,{handleSubmit:function(e){return t.onSubmit(e)}}));var f=this.searchElement.elements,h=f.container,y=f.form,m=f.input;h.addEventListener("dblclick",function(e){e.stopPropagation()});var b=(0,d.createElement)("a",a.button,h);b.title=o,b.href="#",b.addEventListener("click",function(e){t.onClick(e)},!1),c&&(this.resultList=new p.default({handleClick:function(e){var n=e.result;m.value=n.label,t.onSubmit({query:n.label})}}),y.appendChild(this.resultList.elements.container),m.addEventListener("keyup",(0,s.default)(function(e){return t.autoSearch(e)},u),!0),m.addEventListener("keydown",function(e){return t.selectResult(e)},!0),m.addEventListener("keydown",function(e){return t.clearResults(e)},!0)),this.elements={button:b}},onAdd:function(e){var t=this.options,n=t.showMarker,r=t.style;if(this.map=e,n&&this.markers.addTo(e),"bar"===r){var a=this.searchElement.elements.form,o=e.getContainer().querySelector(".leaflet-control-container"),i=(0,d.createElement)("div","leaflet-control-geosearch bar");i.appendChild(a),o.appendChild(i),this.elements.container=i}return this.searchElement.elements.container},onRemove:function(){var e=this.elements.container;return e&&e.remove(),this},onClick:function(e){e.preventDefault();var t=this.searchElement.elements,n=t.container,r=t.input;n.classList.contains("active")?(0,d.removeClassName)(n,"active"):((0,d.addClassName)(n,"active"),r.focus())},selectResult:function(e){if([h.ARROW_DOWN_KEY,h.ARROW_UP_KEY].includes(e.keyCode)){e.preventDefault();var t=this.searchElement.elements.input,n=this.resultList,r=this.resultList.count()-1,a="ArrowDown"===e.code?1+~~n.selected:~~n.selected-1,o=a<0?r:a>r?0:a,i=n.select(o);t.value=i.label}},clearResults:function(e){e.keyCode===h.ESCAPE_KEY&&this.resultList.clear()},autoSearch:function(e){return new Promise(function(t,n){var r,a,o;return h.SPECIAL_KEYS.includes(e.keyCode)?t():(r=e.target.value,a=this.options.provider,a.search({query:r}).then(function(e){return o=e,this.resultList.render(o),t()}.$asyncbind(this,n),n))}.$asyncbind(this))},onSubmit:function(e){return new Promise(function(t,n){var r,a;return r=this.options.provider,r.search(e).then(function(e){return a=e,a&&a.length>0&&this.showResult(a[0]),t()}.$asyncbind(this,n),n)}.$asyncbind(this))},showResult:function(e){var t=Object.keys(this.markers._layers);t.length>=this.options.maxMarkers&&this.markers.removeLayer(t[0]);var n=this.addMarker(e);this.centerMap(e),this.map.fireEvent("geosearch/showlocation",{location:e,marker:n})},addMarker:function(e){var t=this.options,n=t.marker,r=t.showPopup,a=new L.Marker([e.y,e.x],n);return a.bindPopup(e.label),this.markers.addLayer(a),r&&a.openPopup(),a},centerMap:function(e){var t=this.options,n=t.retainZoomLevel,r=t.animateZoom,a=new L.LatLngBounds(e.bounds),o=a.isValid()?a:this.markers.getBounds();!n&&a.isValid()?this.map.fitBounds(o,{animate:r}):this.map.setView(o.getCenter(),this.getZoom(),{animate:r})},getZoom:function(){var e=this.options,t=e.retainZoomLevel,n=e.zoomLevel;return t?this.map.getZoom():n}}},function(e,t,n){"use strict";function r(e,t){if(Function.prototype.$asyncspawn||Object.defineProperty(Function.prototype,"$asyncspawn",{value:r,enumerable:!1,configurable:!0,writable:!0}),this instanceof Function){var n=this;return new e(function(e,r){function a(t,n){var i;try{if(i=t.call(o,n),i.done){if(i.value!==e){if(i.value&&i.value===i.value.then)return i.value(e,r);e&&e(i.value),e=null}return}i.value.then?i.value.then(function(e){a(o.next,e)},function(e){a(o.throw,e)}):a(o.next,i.value)}catch(e){return r&&r(e),void(r=null)}}var o=n.call(t,e,r);a(o.next)})}}var a=function(e,t){for(var n=t.toString(),r="return "+n,a=n.match(/.*\(([^)]*)\)/)[1],o=/['"]!!!([^'"]*)['"]/g,i=[];;){var c=o.exec(r);if(!c)break;i.push(c)}return i.reverse().forEach(function(t){r=r.slice(0,t.index)+e[t[1]]+r.substr(t.index+t[0].length)}),r=r.replace(/\/\*[^*]*\*\//g," ").replace(/\s+/g," "),new Function(a,r)()}({zousan:n(7).toString(),thenable:n(11).toString()},function e(t,n){function r(){return a.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,a){return function o(i){for(;i;){if(i.then)return i=i.then(o,r),a?void 0:i;try{if(i.pop){if(i.length)return i.pop()?t.call(e):i;i=n}else i=i.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable="!!!thenable"(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory="!!!zousan")());var a=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return a.apply(t,arguments)}catch(e){return n(e)}}}});a(),r(),e.exports={$asyncbind:a,$asyncspawn:r}},function(e,t,n){(function(t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){function a(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function o(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function i(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===(void 0===t?"undefined":r(t))&&t.nextTick||"function"==typeof n&&n||function(e){setTimeout(e,0)};var c=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===a&&(n.splice(0,a),r=0)}}var n=[],r=0,a=1024;return function(a){n.push(a),n.length-r==1&&e(t)}}();return a.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":r(e))))try{var n=0,a=e.then;if("function"==typeof a)return void a.call(e,function(e){n++||t.resolve(e)},function(e){n++||t.reject(e)})}catch(e){return void(n||this.reject(e))}this.state=o,this.v=e,t.c&&c(function(){for(var n=0,r=t.c.length;n<r;n++)o(t.c[n],e)})}},reject:function(e){if(void 0===this.state){this.state=i,this.v=e;var t=this.c;t&&c(function(){for(var n=0,r=t.length;n<r;n++)i(t[n],e)})}},then:function(e,t){var n=new a,r={y:e,n:t,p:n};if(void 0===this.state)this.c?this.c.push(r):this.c=[r];else{var o=this.state,i=this.v;c(function(){o(r,i)})}return n}},a.resolve=function(e){if(e&&e instanceof a)return e;var t=new a;return t.resolve(e),t},a.reject=function(e){if(e&&e instanceof a)return e;var t=new a;return t.reject(e),t},a.version="2.3.3-nodent",a}}).call(t,n(8),n(9).setImmediate)},function(e,t){"use strict";function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function i(){v&&d&&(v=!1,d.length?h=d.concat(h):y=-1,h.length&&c())}function c(){if(!v){var e=a(i);v=!0;for(var t=h.length;t;){for(d=h,h=[];++y<t;)d&&d[y].run();y=-1,t=h.length}d=null,v=!1,o(e)}}function s(e,t){this.fun=e,this.array=t}function u(){}var l,f,p=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,h=[],v=!1,y=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new s(e,t)),1!==h.length||v||a(c)},s.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";function r(e,t){this._id=e,this._clearFn=t}var a=Function.prototype.apply;t.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(10),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){"use strict";!function(e,n){function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[s]=r,c(s),s++}function a(e){delete u[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function i(e){if(l)setTimeout(i,0,e);else{var t=u[e];if(t){l=!0;try{o(t)}finally{a(e),l=!1}}}}if(!e.setImmediate){var c,s=1,u={},l=!1,f=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){i(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},c=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;c=function(t){var n=f.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(i,0,e)}}(),p.setImmediate=r,p.clearImmediate=a}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(t,function(){return this}(),n(8))},function(e,t){"use strict";e.exports=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,a){try{var o=a?a(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));e(o)?o.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(o)}catch(e){n.reject(e)}}function n(){}function r(e){}function a(e,t){this.resolve=e,this.reject=t}function o(r,a){var o=new n;try{this._resolver(function(n){return e(n)?n.then(r,a):t(o,n,r)},function(e){t(o,e,a)})}catch(e){t(o,e,a)}return o}function i(e){this._resolver=e,this.then=o}return n.prototype={resolve:r,reject:r,then:a},i.resolve=function(e){return i.isThenable(e)?e:{then:function(t){return t(e)}}},i.isThenable=e,i}},function(e,t){(function(t){"use strict";function n(e,t,n){function a(t){var n=v,r=y;return v=y=void 0,O=t,b=e.apply(r,n)}function o(e){return O=e,g=setTimeout(l,t),S?a(e):b}function c(e){var n=e-w,r=e-O,a=t-n;return x?k(a,m-r):a}function u(e){var n=e-w,r=e-O;return void 0===w||n>=t||n<0||x&&r>=m}function l(){var e=E();if(u(e))return f(e);g=setTimeout(l,c(e))}function f(e){return g=void 0,j&&v?a(e):(v=y=void 0,b)}function p(){void 0!==g&&clearTimeout(g),O=0,v=w=y=g=void 0}function d(){return void 0===g?b:f(E())}function h(){var e=E(),n=u(e);if(v=arguments,y=this,w=e,n){if(void 0===g)return o(w);if(x)return g=setTimeout(l,t),a(w)}return void 0===g&&(g=setTimeout(l,t)),b}var v,y,m,b,g,w,O=0,S=!1,x=!1,j=!0;if("function"!=typeof e)throw new TypeError(s);return t=i(t)||0,r(n)&&(S=!!n.leading,x="maxWait"in n,m=x?_(i(n.maxWait)||0,t):m,j="trailing"in n?!!n.trailing:j),h.cancel=p,h.flush=d,h}function r(e){var t=void 0===e?"undefined":c(e);return!!e&&("object"==t||"function"==t)}function a(e){return!!e&&"object"==(void 0===e?"undefined":c(e))}function o(e){return"symbol"==(void 0===e?"undefined":c(e))||a(e)&&w.call(e)==l}function i(e){if("number"==typeof e)return e;if(o(e))return u;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(f,"");var n=d.test(e);return n||h.test(e)?v(e.slice(2),n?2:8):p.test(e)?u:+e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="Expected a function",u=NaN,l="[object Symbol]",f=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,h=/^0o[0-7]+$/i,v=parseInt,y="object"==(void 0===t?"undefined":c(t))&&t&&t.Object===Object&&t,m="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,b=y||m||Function("return this")(),g=Object.prototype,w=g.toString,_=Math.max,k=Math.min,E=function(){return b.Date.now()};e.exports=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=(function(e){e&&e.__esModule?e:{default:e}}(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=n(14),c=n(15),s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.handleSubmit,o=void 0===a?function(){}:a,c=n.searchLabel,s=void 0===c?"search":c,u=n.classNames,l=void 0===u?{}:u;r(this,e);var f=(0,i.createElement)("div",["geosearch",l.container].join(" ")),p=(0,i.createElement)("form",["",l.form].join(" "),f),d=(0,i.createElement)("input",["glass",l.input].join(" "),p);d.type="text",d.placeholder=s,d.addEventListener("input",function(e){t.onInput(e)},!1),d.addEventListener("keyup",function(e){t.onKeyUp(e)},!1),d.addEventListener("keypress",function(e){t.onKeyPress(e)},!1),d.addEventListener("focus",function(e){t.onFocus(e)},!1),d.addEventListener("blur",function(e){t.onBlur(e)},!1),this.elements={container:f,form:p,input:d},this.handleSubmit=o}return o(e,[{key:"onFocus",value:function(){(0,i.addClassName)(this.elements.form,"active")}},{key:"onBlur",value:function(){(0,i.removeClassName)(this.elements.form,"active")}},{key:"onSubmit",value:function(e){return new Promise(function(t,n){var r,a,o;return e.preventDefault(),e.stopPropagation(),r=this.elements,a=r.input,o=r.container,(0,i.removeClassName)(o,"error"),(0,i.addClassName)(o,"pending"),this.handleSubmit({query:a.value}).then(function(e){return(0,i.removeClassName)(o,"pending"),t()}.$asyncbind(this,n),n)}.$asyncbind(this))}},{key:"onInput",value:function(){var e=this.elements.container;this.hasError&&((0,i.removeClassName)(e,"error"),this.hasError=!1)}},{key:"onKeyUp",value:function(e){var t=this.elements,n=t.container,r=t.input;e.keyCode===c.ESCAPE_KEY&&((0,i.removeClassName)(n,"pending"),(0,i.removeClassName)(n,"active"),r.value="",document.body.focus(),document.body.blur())}},{key:"onKeyPress",value:function(e){e.keyCode===c.ENTER_KEY&&this.onSubmit(e)}},{key:"setQuery",value:function(e){this.elements.input.value=e}}]),e}();t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.createElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElement(e);return r.className=t,n&&n.appendChild(r),r};t.createScriptElement=function(e,t){var r=n("script",null,document.body);return r.setAttribute("type","text/javascript"),new Promise(function(n){window[t]=function(e){r.remove(),delete window[t],n(e)},r.setAttribute("src",e)})},t.addClassName=function(e,t){e&&!e.classList.contains(t)&&e.classList.add(t)},t.removeClassName=function(e,t){e&&e.classList.contains(t)&&e.classList.remove(t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.ENTER_KEY=13,r=t.ESCAPE_KEY=27,a=t.ARROW_DOWN_KEY=40,o=t.ARROW_UP_KEY=38,i=t.ARROW_LEFT_KEY=37,c=t.ARROW_RIGHT_KEY=39;t.SPECIAL_KEYS=[n,r,a,o,i,c]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(14),i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join(" ").trim()},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.handleClick,a=void 0===n?function(){}:n,c=t.classNames,u=void 0===c?{}:c;r(this,e),s.call(this),this.props={handleClick:a,classNames:u},this.selected=-1;var l=(0,o.createElement)("div",i("results",u.container)),f=(0,o.createElement)("div",i(u.item));l.addEventListener("click",this.onClick,!0),this.elements={container:l,resultItem:f}}return a(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.elements,n=t.container,r=t.resultItem;this.clear(),e.forEach(function(e,t){var a=r.cloneNode(!0);a.setAttribute("data-key",t),a.innerHTML=e.label,n.appendChild(a)}),e.length>0&&(0,o.addClassName)(n,"active"),this.results=e}},{key:"select",value:function(e){var t=this.elements.container;return Array.from(t.children).forEach(function(t,n){return n===e?(0,o.addClassName)(t,"active"):(0,o.removeClassName)(t,"active")}),this.selected=e,this.results[e]}},{key:"count",value:function(){return this.results.length}},{key:"clear",value:function(){var e=this.elements.container;for(this.selected=-1;e.lastChild;)e.removeChild(e.lastChild);(0,o.removeClassName)(e,"active")}}]),e}(),s=function(){var e=this;this.onClick=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.target,r=e.props.handleClick,a=e.elements.container;if(n.parentNode===a&&n.hasAttribute("data-key")){var o=n.getAttribute("data-key");r({result:e.results[o]})}}};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),u=(r(s),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(18),p=r(f),d=n(14),h=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=e.jsonp,a=this.options.params;return n+"//dev.virtualearth.net/REST/v1/Locations?"+this.getParamString(u({},a,{query:t,jsonp:r}))}},{key:"parse",value:function(e){var t=e.data;return 0===t.resourceSets.length?[]:t.resourceSets[0].resources.map(function(e){return{x:e.point.coordinates[1],y:e.point.coordinates[0],label:e.address.formattedAddress,bounds:[[e.bbox[0],e.bbox[1]],[e.bbox[2],e.bbox[3]]],raw:e}})}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o="BING_JSONP_CB_"+Date.now(),i=this.endpoint({query:r,protocol:a,jsonp:o}),(0,d.createScriptElement)(i,o).then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),t}(p.default);t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=(function(e){e&&e.__esModule?e:{default:e}}(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.options=t}return o(e,[{key:"getParamString",value:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o=this.endpoint({query:r,protocol:a}),fetch(o).then(function(e){return i=e,i.json().then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),l=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find?"+this.getParamString(c({},r,{f:"json",text:t}))}},{key:"parse",value:function(e){return e.data.locations.map(function(e){return{x:e.feature.geometry.x,y:e.feature.geometry.y,label:e.name,bounds:[[e.extent.ymin,e.extent.xmin],[e.extent.ymax,e.extent.xmax]],raw:e}})}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),l=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params,a=this.getParamString(c({},r,{address:t}));return(r&&r.key?"https:":n)+"//maps.googleapis.com/maps/api/geocode/json?"+a}},{key:"parse",value:function(e){return e.data.results.map(function(e){return{x:e.geometry.location.lng,y:e.geometry.location.lat,label:e.formatted_address,bounds:[[e.geometry.viewport.southwest.lat,e.geometry.viewport.southwest.lng],[e.geometry.viewport.northeast.lat,e.geometry.viewport.northeast.lng]],raw:e}})}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),l=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//nominatim.openstreetmap.org/search?"+this.getParamString(c({},r,{format:"json",q:t}))}},{key:"parse",value:function(e){return e.data.map(function(e){return{x:e.lon,y:e.lat,label:e.display_name,bounds:[[parseFloat(e.boundingbox[0]),parseFloat(e.boundingbox[2])],[parseFloat(e.boundingbox[1]),parseFloat(e.boundingbox[3])]],raw:e}})}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e,t){l(u(t["layer-groups-order"]),e),o(),a()}function a(){document.getElementById("right-panel").onscroll=c}function o(){d3.select("#right-panel-drag-overlay").call(d3.drag().on("drag",function(){i.call(this)}))}function i(){c(),s()}function c(){var e,t=d3.select("#right-panel"),n=t.property("offsetHeight"),r=document.getElementById("right-panel-drag-overlay"),a=document.getElementById("right-panel-header");if(t.classed("graphs-active")){var o=document.getElementById("graph-list");e=a.scrollHeight+o.scrollHeight}else{var i=document.getElementById("layer-list");e=a.scrollHeight+i.scrollHeight}e=e>n?e+"px":null,r.style.height=e}function s(){var e=d3.select("#right-panel"),t=+e.style("min-width").slice(0,-2),n=e.property("clientWidth"),r=document.getElementById("wrapper"),a=r.clientWidth,o=document.getElementById("map-wrapper"),i=d3.event.sourceEvent.x,c=a-i-n,s=n+c;s=s<t?t:s,o.style.paddingRight=s+"px",e.style("width",s+"px")}function u(e){return d3.select("#layer-list").selectAll(".layer-group-wrapper").data(e).enter().append("div").attr("class","layer-group-wrapper").attr("id",function(e){return e.id}).classed("active",function(e){return e.active}).each(function(e){d3.select(this).append("div").attr("class","layer-group-btn btn").on("click",function(e){e.active=!e.active,d3.select(this.parentNode).classed("active",function(){return e.active}),c()}).text(e.name)}).append("div").attr("class","layer-group")}function l(e,t){e.selectAll(".layer-select").data(function(e){return t[e.id]}).enter().append("div").attr("class","layer-select").each(function(e){var t=(this.parentNode.parentNode.id,d3.select(this));f(e,t),p(e,t),d(e,t),h(e,t)})}function f(e,t){t.append("input").attr("type","checkbox").attr("id",function(e){return e.id}).attr("checked",function(e){return e.active?"checked":null}).on("click",function(e){(0,y.toggleLayer)(e),t.select(".layer-tools-wrapper").classed("active",e.active),e.active&&(0,m.setSliderInitialPos)(e,t)})}function p(e,t){t.append("label").attr("for",function(e){return e.id}).attr("class","layer-label").html(function(e){return e.name})}function d(e,t){e.info&&""!==e.info&&(t.append("div").attr("class","layer-info-btn").text("(?)").on("click",function(){d3.select(this.parentNode).select(".layer-info-wrapper").classed("active",function(){return!d3.select(this).classed("active")})}),t.append("div").attr("class","layer-info-wrapper").text(function(e){return e.info}))}function h(e,t){var n=t.append("div").attr("class","layer-tools-wrapper").classed("active",function(){return e.active});(0,m.makeOpacitySlider)(e,n),v(e,n)}function v(e,t){t.append("div").attr("class","legend-wrapper").append("img").attr("src",e.legend||"mean_ndvi_legend.jpg")}Object.defineProperty(t,"__esModule",{value:!0}),t.SetupPanel=r,t.updatePanelDragOverlayHeight=c;var y=n(23),m=n(27);n(25)},function(e,t,n){"use strict";function r(){return h}function a(e,t){var n,r,a,o,c,s;if(t&&0!==t.length)for(n=0;n<t.length;n++){s=!1,c=t[n];for(a in e){if(!e.hasOwnProperty(a))return;for(o=e[a],r=0;r<o.length;r++)if(o[r].id===c){i(o[r]),s=!0;break}if(s)break}}}function o(e,t){e.active?s(e):i(e)}function i(e,t){var n=(0,p.GetMap)();e.active=!0,e.mapLayer=e.mapLayer||f(e),n.addLayer(e.mapLayer),c(e),(0,d.updateShareUrl)()}function c(e){h.push(e.id)}function s(e){var t=(0,p.GetMap)();e.active=!1,e.mapLayer&&t.hasLayer(e.mapLayer)&&t.removeLayer(e.mapLayer),u(e),(0,d.updateShareUrl)()}function u(e){var t=h.indexOf(e.id);t!==-1&&h.splice(t,1)}function l(e,t){e.opacity=t,e.mapLayer.setOpacity(t)}function f(e){return L.tileLayer.wms(e.url,{layers:e.id,transparent:e.transparent||!0,version:e.version||"1.3.0",crs:e.crs||L.CRS.EPSG4326,format:e.format||"image/png",opacity:e.opacity||"1"})}Object.defineProperty(t,"__esModule",{value:!0}),t.GetCurrentLayers=r,t.CreateDefaultLayers=a,t.toggleLayer=o,t.enableLayer=i,t.disableLayer=s,t.updateLayerOpacity=l;var p=n(24),d=n(25),h=[]},function(e,t){"use strict";function n(e){var t=e.id||"map",n=e.options||{scrollWheelZoom:!1},r=e.initialCenter||["38.5","-81"],o=e.initialZoom||6;return a=L.map(t,n).setView(r,o),L.control.attribution().addTo(a),a}function r(){return a}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateMap=n,t.GetMap=r;var a},function(e,t,n){"use strict";function r(e){e.on("moveend",a)}function a(e){var t=(0,k.GetMap)();i(o([c(t),s(t),u(t),l(t)]))}function o(e){return"?"+e.filter(function(e){return void 0!==e}).join("&")}function i(e){window.history&&window.history.replaceState&&window.history.replaceState({},"",e)}function c(e){var t=e.getCenter();return"center="+t.lat.toString()+","+t.lng.toString()}function s(e){return"zoom="+e.getZoom()}function u(e){var t=[],n={},r=(0,O.GetCurrentLayers)();e.eachLayer(function(e){var t=e.options;t&&t.layers&&(n[t.layers]=t.hasOwnProperty("opacity")?t.opacity:"1")});var a,o;for(o=0;o<r.length;o++)a=r[o],t.push(a),t.push(n[a]);return"layers="+t.join(",")}function l(e){var t=[];return e.eachLayer(function(e){e.options&&e.options.type===E.BASE_LAYER_TYPE&&t.push(e.options.id)}),"baselayers="+t.join(",")}function f(){var e=window.location.search;if(""!==e)return e=p(e),e=h(e),v(e),e}function p(e){return e=e.substring(1),e=d(e),e.split("&")}function d(e){return e.replace(/\%2[c|C]/g,",")}function h(e){var t,n,r={};for(n=0;n<e.length;n++)t=e[n].split("="),r[t[0]]=t[1];return r}function v(e){e.center&&(e.center=y(e.center)),e.layers&&(e.layers=m(e.layers)),e.baselayers&&(e.baselayers=b(e.baselayers))}function y(e){return e.split(",")}function m(e){var t,n,r={enabledLayers:[],opacityVals:{}};for(e=e.split(","),n=0;n<e.length;n+=2)t=e[n],r.enabledLayers.push(t),r.opacityVals[t]=e[n+1];return r}function b(e){return e.split(",")}function g(e){var t=f();t&&(t.center&&(e.map.initialCenter=t.center),t.zoom&&(e.map.initialZoom=t.zoom),t.layers&&w(t.layers,e),t.baselayers&&_(t.baselayers,e))}function w(e,t){var n=e.enabledLayers;t["active-layers"]=n;var r,a,o,i,c,s,u=t.layers;for(r=0;r<n.length;r++){s=!1,c=n[r];for(o in u){if(!u.hasOwnProperty(o))return;for(i=u[o],a=0;a<i.length;a++)if(i[a].id===c){i[a].opacity=e.opacityVals[c],s=!0;break}if(s)break}}}function _(e,t){var n,r,a=t.baselayers;for(r=0;r<a.length;r++)n=a[r],n.active=e.indexOf(n.id)!==-1}Object.defineProperty(t,"__esModule",{value:!0}),t.BindUpdateShareUrl=r,t.updateShareUrl=a,t.AddShareSettingsToConfig=g;var k=n(24),E=n(26),O=n(23)},function(e,t,n){"use strict";function r(e,t){t=t||[{id:"carto-light-default",url:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attributions">CARTO</a>'}],f=t;var n,r,o;for(n=0;n<t.length;n++)o=t[n],o.active&&(r=u(o),o.layer=r,r.addTo(e));a(t)}function a(e){var t=document.createElement("div");t.className="baselayer-ui";for(var n,r,a,i,c=0,s=e.length;c<s;c++)i=e[c],i.hasOwnProperty("image")&&(n=document.createElement("div"),n.setAttribute("data-layer",i.id),r=document.createElement("img"),r.setAttribute("src",i.image),r.setAttribute("alt",i.label),r.setAttribute("title",i.label),a=document.createElement("div"),a.textContent=i.label,n.appendChild(r),n.appendChild(a),n.addEventListener("click",o),d3.select(n).classed("base-selector",!0).classed("active",i.active),t.appendChild(n));document.getElementsByClassName("leaflet-bottom leaflet-left")[0].appendChild(t)}function o(e){e.stopPropagation();var t=this.getAttribute("data-layer");i(this),c(),s(t),(0,d.updateShareUrl)()}function i(e){d3.select(".base-selector.active").classed("active",!1),d3.select(e).classed("active",!0)}function c(){var e=(0,p.GetMap)();e.eachLayer(function(t){t.options.type===h&&e.removeLayer(t)})}function s(e){for(var t,n=(0,p.GetMap)(),r=0,a=f.length;r<a;r++)if(t=f[r],t.id===e){t.layer||(t.layer=u(t)),t.layer.addTo(n),t.layer.bringToBack();break}}function u(e){return L.tileLayer(e.url,l(e))}function l(e){var t={};return e.id&&(t.id=e.id),e.attribution&&(t.attribution=e.attribution),e.subdomains&&(t.subdomains=e.subdomains),t.type=h,t}Object.defineProperty(t,"__esModule",{value:!0}),t.BASE_LAYER_TYPE=void 0,t.CreateBaseLayers=r;var f,p=n(24),d=n(25),h=t.BASE_LAYER_TYPE="baselayer"},function(e,t,n){"use strict";function r(e,t){var n=e.opacity||1,r=f(n);t.select(".opacity-slider-handle").style("top",function(){return r+"px"})}function a(e,t){var n=void 0!==e.opacity?e.opacity:1,r=t.append("div").attr("class","opacity-slider-wrapper");r.append("div").attr("class","opacity-slider-indicator");o(r,e,t,n)}function o(e,t,n,a){var o=e.append("div").attr("class","opacity-slider-track-overlay");o.append("div").attr("class","opacity-slider-track");o.append("div").attr("class","opacity-slider-handle"),t.active&&r(t,n),i(e,t,a)}function i(e,t,n){var r=e.select(".opacity-slider-track-overlay");r.call(d3.drag().on("start drag",function(){var e=s(r);(0,l.updateLayerOpacity)(t,e),c(r,e)}).on("end",function(){(0,u.updateShareUrl)()}))}function c(e,t){e.select(".opacity-slider-handle").style("top",f(t)+"px")}function s(e){var t=d3.mouse(e.node())[1];return f.invert(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.setSliderInitialPos=r,t.makeOpacitySlider=a;var u=n(25),l=n(23),f=d3.scaleLinear().domain([1,0]).range([0,90]).clamp(!0)},function(e,t,n){"use strict";function r(){d3.selectAll(".graph-type-btn").on("click",d),a(),I=d3.tip().attr("class","d3-tip").html(function(e){return e})}function a(){Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100!=0||e%400==0)},Date.prototype.getDOY=function(){var e=[0,31,59,90,120,151,181,212,243,273,304,334],t=this.getMonth(),n=this.getDate(),r=e[t]+n;return t>1&&this.isLeapYear()&&r++,r}}function o(e){e.on("click",i)}function i(e){var t=this,n=e.latlng.lat,r=e.latlng.lng,a=h(n,r),o=c(t,n,r);d3.select(a).on("mouseenter",function(){o.setIcon(D)}),d3.select(a).on("mouseleave",function(){o.setIcon(B)}),s(t,a,o)}function c(e,t,n){return L.marker([t,n],{icon:B}).addTo(e)}function s(e,t,n){var r=u();t.appendChild(r),d3.select(r).on("click",function(){document.getElementById("graph-list").removeChild(t),e.removeLayer(n),(0,N.updatePanelDragOverlayHeight)()})}function u(){var e=document.createElement("button");return e.className="remove-graph",e.innerText=String.fromCharCode("10005"),e.setAttribute("title","Remove graph"),e}function l(e,t,n){var r="https://fcav-ndvi.nemac.org/landdat_product.cgi?args="+t+","+e,a=new XMLHttpRequest;a.addEventListener("load",function(){var r=this.responseText;r=r.replace(/\[|\]|\'/g,"").split(", "),v(r,n,e,t),(0,N.updatePanelDragOverlayHeight)()}),a.open("GET",r),a.send()}function f(e){var t;for(t=0;t<e.length;t++)e[t]=e[t].split(",");return e}function p(e){var t,n,r,a,o={};for(o.keys=[],r=0;r<e.length;r++)t=e[r],n=t[0].substring(0,4),o.hasOwnProperty(n)||(o[n]=[],o.keys.push(n)),o[n].push(t);var i,c;for(o.medians=[],r=0;r<46;r++){for(i=[],a=r;a<e.length;a+=46)i.push(e[a][1]);c=i.sort()[Math.floor(i.length/2)],o.medians.push(c)}return o}function d(){var e=this.dataset.type,t=document.getElementsByClassName("graph-type-btn active")[0],n=t.dataset.type;e!==n&&(d3.select("#graph-list").classed("graph-"+n,!1).classed("graph-"+e,!0),d3.select(t).classed("active",!1),d3.select(this).classed("active",!0))}function h(e,t){var n=document.createElement("div"),r=document.createTextNode("Lat: "+e+", Lon: "+t);return n.appendChild(r),n.classList.add("graph-elem"),l(e,t,n),n}function v(e,t,n,r){e=f(e);var a=p(e);y(e,t,a.medians),m(a,t,n,r),b(a,t,n,r),document.getElementById("graph-list").appendChild(t)}function y(e,t,n){var r={top:30,right:20,bottom:30,left:25},a=580-r.left-r.right,o=270-r.top-r.bottom,i=d3.scaleTime().range([0,a]).domain([P(e[0][0]),P(e[e.length-1][0])]),c=d3.scaleLinear().range([o,0]).domain([0,100]),s=d3.axisBottom(i).ticks(16).tickFormat(function(e){return e.getFullYear()}),u=d3.axisLeft(c).ticks(6),l=d3.line().x(function(e){return i(P(e[0]))}).y(function(e){return c(e[1])}),f=d3.select(t).append("div").classed("timeseries-graph",!0),p=f.append("svg").attr("height",o+r.top+r.bottom).attr("viewBox",function(){return"0 0 "+(a+r.left+r.right)+" "+(o+r.top+r.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+r.left+","+r.top+")");p.call(I),_(e,l,p),p.append("g").attr("class","x axis").attr("transform","translate(0,"+o+")").call(s),p.append("g").attr("class","y axis").call(u),E(e,l,p,n)}function m(e,t,n,r){function a(e){return F[(e-15)/30]}var o={},i={top:30,right:20,bottom:30,left:25},c=500-i.left-i.right,s=270-i.top-i.bottom,u=e.medians,l=d3.scaleLinear().range([0,c]).domain([0,365]),f=d3.scaleLinear().range([s,0]).domain([0,100]),p=d3.axisBottom(l).ticks(11).tickValues([15,45,75,105,135,165,195,225,255,285,315,345]).tickFormat(a),d=d3.axisLeft(f).ticks(6),h=d3.line().x(function(e,t){return l(Array.isArray(e)?C(e[0]):8*t+3)}).y(function(e){return f(Array.isArray(e)?e[1]:e)}),v=d3.select(t).append("div").classed("overlapping-graph",!0),y=v.append("svg").attr("viewBox",function(){return"0 0 "+(c+i.left+i.right)+" "+(s+i.top+i.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+i.left+","+i.top+")");y.call(I),y.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(p),y.append("g").attr("class","y axis").call(d),o.medians={path:_(e.medians,h,y)},o[2015]={path:_(e[2015],h,y)},o.medians.points=E(e.medians,h,y,u),o[2015].points=E(e[2015],h,y,u);var m=v.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){x(m,t,"timeseries","2015",o,e,h,y,u,n,r)}),x(m,"medians","timeseries","medians",o,e,h,y,u,n,r)}function b(e,t,n,r){var a=Math.min(490,490)/2-30,o=e.medians,i=g(e),c=w(o,i[1][0]),s=d3.scaleLinear().domain([0,100]).range([0,a]),u=d3.radialLine().radius(function(e){return s(Array.isArray(e)?e[1]:e)}).angle(function(e,t){return((Array.isArray(e)?C(e[0]):8*t+3)-1)%365/365*(2*Math.PI)}),l=d3.select(t).append("div").classed("polar-graph",!0),f=l.append("svg").attr("viewBox",function(){return"0 0 490 490"}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate(245,245)");f.call(I);var p=f.append("g").attr("class","r axis").selectAll("g").data(s.ticks(5).slice(1)).enter().append("g");p.append("circle").attr("r",s),p.append("text").attr("y",function(e){return-s(e)-4}).attr("transform","rotate(15)").style("text-anchor","middle").text(function(e){return e});var d=f.append("g").attr("class","a axis").selectAll("g").data(d3.range(0,360,30)).enter().append("g").attr("transform",function(e){return"rotate("+(e-90)+")"});d.append("line").attr("x2",a),d.append("text").attr("x",a+6).attr("dy",".35em").style("text-anchor",function(e){return e<360&&e>180?"end":null}).attr("transform",function(e){return e<360&&e>180?"rotate(180 "+(a+6)+",0)":null}).text(function(e){return F[e/30]});var h=f.append("g").selectAll("g").data(c).enter().append("g").attr("transform",function(e){return"rotate("+(e.data[1][0]-90)+")"});h.append("line").attr("class","line").attr("x2",a),h.append("text").attr("x",a+6).attr("y",function(e){return(e.data[1][0]-1)%365/365*(2*Math.PI)}).attr("dy",".35em").style("text-anchor",function(e){var t=e.data[1][0];return t<360&&t>180?"end":null}).attr("transform",function(e){var t=e.data[1][0];return t<360&&t>180?"rotate(180 "+(a+6)+",0)":null}).text(function(e){return e.label});var v=i[1][0];k([[v,100],[(v+182.5)%365,100]],u,f).classed("growing-season-line","true"),k(i,u,f).classed("center-line","true"),f.selectAll("point").data([i[1]]).enter().append("circle").attr("class","point").attr("transform",function(e){return"translate("+u([e]).slice(1).slice(0,-1)+")"}).attr("r",2.5).attr("stroke","#000").attr("fill","#dd82d2").on("mouseover",function(e){I.show("Center: "+String(e[1]).substring(0,7)),this.setAttribute("r",5),this.setAttribute("stroke-width","2px"),d3.select(this).classed("active",!0)}).on("mouseout",function(e){I.hide(),this.setAttribute("r",2.5),this.setAttribute("stroke-width","1px"),d3.select(this).classed("active",!0)});var y={};y.medians={path:k(o,u,f)},y[2015]={path:k(e[2015],u,f)},y.medians.points=E(o,u,f,o),y[2015].points=E(e[2015],u,f,o);var m=l.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){var a=m.append("div");a.append("input").attr("type","checkbox").attr("id","polar-"+t+n.toString().replace(".","")+"-"+r.toString().replace(".","")).attr("value",t).property("checked","2015"===t).on("change",function(t){var n=this.value;this.checked?(y.hasOwnProperty(n)||(y[n]={}),y[n].path=k(e[n],u,f),y[n].points=E(e[n],u,f,o)):(y[n].path.remove(),y[n].points.remove())}),a.append("label").text(t).attr("for","polar-"+t+n.toString().replace(".","")+"-"+r.toString().replace(".",""))});var b=m.append("div");b.append("input").attr("type","checkbox").attr("id","polar-average-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")).attr("value","medians").property("checked",!0).on("change",function(t){var n=this.value;this.checked?(y.hasOwnProperty(n)||(y[n]={}),y[n].path=k(e[n],u,f),y[n].points=E(e[n],u,f,o)):(y[n].path.remove(),y[n].points.remove())}),b.append("label").text("Baseline").attr("for","polar-average-"+n.toString().replace(".","")+"-"+r.toString().replace(".",""));var _=m.append("div").classed("threshold-checkbox",!0);_.append("input").attr("type","checkbox").attr("id","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")).property("checked",!0).on("change",function(e){h.style("opacity",this.checked?1:0)}),_.append("label").text("Thresholds").attr("for","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".",""))}function g(e){var t,n,r,a,o,i=0,c=0;for(r=46,t=0;t<e.keys.length;t++)if(a=e[e.keys[t]],a.length===r){for(o=0,n=0;n<r/2;n++)o+=a[n][1]-a[n+23][1];o/=23,i+=o}else c++;i=Math.abs(i)/(e.keys.length-c);var s,u,l,f,p,d=1e6,h=0,v=e.medians;for(t=0;t<r/2;t++){for(u=0,l=0,p=0;p<r/2;p++)n=(t+p)%46,f=(n+23)%46,u+=parseInt(v[n],10),l+=parseInt(v[f],10);s=Math.abs(u-l),s<d&&(d=s,h=t)}var y=parseInt(v[h],10),m=parseInt(-v[h+23],10),b=Math.abs(i-y)-Math.abs(i-m);return Math.abs(-i-y)-Math.abs(-i-m)>b&&(h+=23),[[0,0],[8*h+3,i]]}function w(e,t){var n=Math.floor((t-3)/8);n>22&&(n-=23);var r,a,o,i=0;for(o=46,r=0;r<o;r++)a=(n+r)%o,i+=parseInt(e[a],10);var c,s,u,l=.15*i,f=.8*i,p=.85*i,d=!1,h=!1,v=!1;for(i=0,r=0;r<o;r++)if(a=(n+r)%o,i+=parseInt(e[a],10),!d&&i>l)c=a,d=!0;else if(!h&&i>f)s=a,h=!0;else if(!v&&i>p){u=a,v=!0;break}var y=[0,0];return[{label:"15%",data:[y,[8*c+3,100]]},{label:"80%",data:[y,[8*s+3,100]]},{label:"85%",data:[y,[8*u+3,100]]}]}function _(e,t,n){return n.append("path").attr("class","line").attr("d",t(e))}function k(e,t,n){return n.append("path").datum(e).attr("class","line").attr("d",t)}function E(e,t,n,r){return n.selectAll("point").data(e).enter().append("circle").attr("class","point").attr("transform",function(e,n){return"translate("+t([Array.isArray(e)?e:[8*n+3,e]]).slice(1).slice(0,-1)+")"}).attr("r",3).attr("stroke","#000").attr("fill",function(e,t){return j(Array.isArray(e)?e[1]:e,r[t%46],3)}).on("mouseover",O).on("mouseout",S)}function O(e){var t=Array.isArray(e)?T(e[0])+": "+e[1]:"Average: "+e;I.show(t),this.setAttribute("r",5),this.setAttribute("stroke-width","2px")}function S(e){I.hide(),this.setAttribute("r",3),this.setAttribute("stroke-width","1px")}function x(e,t,n,r,a,o,i,c,s,u,l){var f=e.append("div");f.append("input").attr("type","checkbox").attr("id",n+"-"+t+u.toString().replace(".","")+"-"+l.toString().replace(".","")).attr("value",t).property("checked",t===r).on("change",function(e){var t=this.value;this.checked?(a.hasOwnProperty(t)||(a[t]={}),a[t].path=_(o[t],i,c),a[t].points=E(o[t],i,c,s)):(a[t].path.remove(),a[t].points.remove())}),f.append("label").text(t).attr("for",n+"-"+t+u.toString().replace(".","")+"-"+l.toString().replace(".",""))}function j(e,t,n){var r=e-t,a=Math.abs(r)/t*100*n,o=100-a+"%";return r>0?"hsl(8, 79%, "+o+")":"hsl(219, 79%, "+o+")"}function P(e){e=e.toString();var t=e.substring(0,4),n=parseInt(e.substring(4,6),10)-1,r=e.substring(6,8);return new Date(t,n,r)}function C(e){return"string"==typeof e?(e=P(e),e.getDOY()):e}function T(e){return"Average"===e?e:(e=P(e),M(e.getMonth())+" "+A(e.getDate())+", "+e.getFullYear())}function M(e){switch(e){case 0:return"Jan.";case 1:return"Feb.";case 2:return"Mar.";case 3:return"Apr.";case 4:return"May";case 5:return"Jun.";case 6:return"Jul.";case 7:return"Aug.";case 8:return"Sep.";case 9:return"Oct.";case 10:return"Nov.";case 11:return"Dec."}}function A(e){var t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"}Object.defineProperty(t,"__esModule",{value:!0}),t.SetupGraphs=r,t.BindGraphEvents=o;var I,N=n(22),R=L.Icon.extend({}),B=new R({iconUrl:"imgs/blue_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),D=new R({iconUrl:"imgs/orange_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),F={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"}},function(e,t,n){"use strict";function r(){d3.selectAll(".panel-top-btn").on("click",a)}function a(){this.classList.contains("active")||(o(),i(),(0,c.updatePanelDragOverlayHeight)(),d3.selectAll(".panel-top-btn, .panel-section-wrapper").classed("active",function(){return!d3.select(this).classed("active")}))}function o(){var e=d3.selectAll("#map-wrapper, #right-panel"),t=e.classed("layers-active"),n=e.classed("graphs-active");e.classed("layers-active",!t).classed("graphs-active",!n)}function i(){var e=document.getElementById("right-panel").offsetWidth;document.getElementById("map-wrapper").style.paddingRight=e+"px"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var c=n(22)},function(e,t){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXhfYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBlNDM0NTYyYjZlOGQ4MDgwNTg3NyIsIndlYnBhY2s6Ly8vLi9qcy9iYXNlLmpzIiwid2VicGFjazovLy8uL2pzL3BhcnNlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvbGVhZmxldENvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ub2RlbnQtcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovLy8uL34vbm9kZW50LXJ1bnRpbWUvem91c2FuLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L34vc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L25vZGVudC1ydW50aW1lL3RoZW5hYmxlRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL34vbG9kYXNoLmRlYm91bmNlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3NlYXJjaEVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvZG9tVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Jlc3VsdExpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2JpbmdQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvcHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2VzcmlQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL29wZW5TdHJlZXRNYXBQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9wYW5lbC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9sYXllci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tYXAuanMiLCJ3ZWJwYWNrOi8vLy4vanMvc2hhcmUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvYmFzZWxheWVyLmpzIiwid2VicGFjazovLy8uL2pzL29wYWNpdHlTbGlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vanMvZ3JhcGguanMiLCJ3ZWJwYWNrOi8vLy4vanMvdGFicy5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX3BhcnNlciIsIl9wYXJzZXIyIiwiX3NlYXJjaCIsIl9zZWFyY2gyIiwiX3BhbmVsIiwiX2Jhc2VsYXllciIsIl9ncmFwaCIsIl90YWJzIiwiX3RhYnMyIiwiX21hcCIsIl9zaGFyZSIsIl9sYXllciIsIkJhc2UiLCJjb25maWciLCJjYWxsYmFjayIsIlNldHVwR3JhcGhzIiwiZGF0YSIsIkFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZyIsIm1hcCIsIkNyZWF0ZU1hcCIsIkNyZWF0ZUJhc2VMYXllcnMiLCJiYXNlbGF5ZXJzIiwiQ3JlYXRlRGVmYXVsdExheWVycyIsImxheWVycyIsIlNldHVwUGFuZWwiLCJsYXlvdXQiLCJCaW5kR3JhcGhFdmVudHMiLCJCaW5kVXBkYXRlU2hhcmVVcmwiLCJ3aW5kb3ciLCJQYXJzZUNvbmZpZyIsImNvbmZpZ0ZpbGUiLCJHZXRDb25maWciLCJ4bWxodHRwIiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwiZXJyIiwiY29uc29sZSIsImxvZyIsImZvcm1hdE1hcCIsImZvcm1hdExheWVycyIsIm9wZW4iLCJzZW5kIiwibGF5ZXJncm91cCIsImkiLCJkZWZhdWx0TWFwc2VydmVyVXJsIiwibWFwc2VydmVyVXJsIiwicHJvcCIsImhhc093blByb3BlcnR5IiwibGVuZ3RoIiwic2V0TWFwc2VydmVyVXJsIiwibGF5ZXIiLCJ1cmwiLCJDcmVhdGVTZWFyY2giLCJwcm92aWRlciIsIl9sZWFmbGV0R2Vvc2VhcmNoIiwiRXNyaVByb3ZpZGVyIiwic2VhcmNoQ29udHJvbCIsIkdlb1NlYXJjaENvbnRyb2wiLCJzaG93TWFya2VyIiwiYWRkQ29udHJvbCIsIkwiLCJEb21FdmVudCIsIm9uIiwic2VhcmNoRWxlbWVudCIsImVsZW1lbnRzIiwiY29udGFpbmVyIiwiZXYiLCJzdG9wUHJvcGFnYXRpb24iLCJfbGVhZmxldENvbnRyb2wiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiX3NlYXJjaEVsZW1lbnQiLCJfYmluZ1Byb3ZpZGVyIiwiX2VzcmlQcm92aWRlciIsIl9nb29nbGVQcm92aWRlciIsIl9vcGVuU3RyZWV0TWFwUHJvdmlkZXIiLCJfcHJvdmlkZXIiLCJMZWFmbGV0Q29udHJvbCIsIkNvbnRyb2wiLCJleHRlbmQiLCJFcnJvciIsIkxDb250cm9sIiwiX2xlbiIsImFyZ3VtZW50cyIsIm9wdGlvbnMiLCJBcnJheSIsIl9rZXkiLCJGdW5jdGlvbiIsInByb3RvdHlwZSIsImJpbmQiLCJhcHBseSIsImNvbmNhdCIsIl9ub2RlbnRSdW50aW1lIiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJ0YXJnZXQiLCJzb3VyY2UiLCJrZXkiLCJfbG9kYXNoIiwiX2xvZGFzaDIiLCJfc2VhcmNoRWxlbWVudDIiLCJfcmVzdWx0TGlzdCIsIl9yZXN1bHRMaXN0MiIsIl9kb21VdGlscyIsIl9jb25zdGFudHMiLCJkZWZhdWx0T3B0aW9ucyIsInBvc2l0aW9uIiwic3R5bGUiLCJzaG93UG9wdXAiLCJtYXJrZXIiLCJpY29uIiwiSWNvbiIsIkRlZmF1bHQiLCJkcmFnZ2FibGUiLCJtYXhNYXJrZXJzIiwicmV0YWluWm9vbUxldmVsIiwiYW5pbWF0ZVpvb20iLCJzZWFyY2hMYWJlbCIsIm5vdEZvdW5kTWVzc2FnZSIsIm1lc3NhZ2VIaWRlRGVsYXkiLCJ6b29tTGV2ZWwiLCJjbGFzc05hbWVzIiwiYnV0dG9uIiwibXNnYm94IiwiZm9ybSIsImlucHV0IiwiYXV0b0NvbXBsZXRlIiwiYXV0b0NvbXBsZXRlRGVsYXkiLCJpbml0aWFsaXplIiwiX3RoaXMiLCJ0aGlzIiwibWFya2VycyIsIkZlYXR1cmVHcm91cCIsIl9vcHRpb25zIiwiaGFuZGxlU3VibWl0IiwicXVlcnkiLCJvblN1Ym1pdCIsIl9zZWFyY2hFbGVtZW50JGVsZW1lbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY3JlYXRlRWxlbWVudCIsInRpdGxlIiwiaHJlZiIsIm9uQ2xpY2siLCJyZXN1bHRMaXN0IiwiaGFuZGxlQ2xpY2siLCJfcmVmIiwicmVzdWx0IiwibGFiZWwiLCJhcHBlbmRDaGlsZCIsImF1dG9TZWFyY2giLCJzZWxlY3RSZXN1bHQiLCJjbGVhclJlc3VsdHMiLCJvbkFkZCIsIl9vcHRpb25zMiIsImFkZFRvIiwicm9vdCIsImdldENvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJvblJlbW92ZSIsInJlbW92ZSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJfc2VhcmNoRWxlbWVudCRlbGVtZW4yIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmVDbGFzc05hbWUiLCJhZGRDbGFzc05hbWUiLCJmb2N1cyIsIkFSUk9XX0RPV05fS0VZIiwiQVJST1dfVVBfS0VZIiwiaW5jbHVkZXMiLCJrZXlDb2RlIiwibGlzdCIsIm1heCIsImNvdW50IiwibmV4dCIsImNvZGUiLCJzZWxlY3RlZCIsImlkeCIsIml0ZW0iLCJzZWxlY3QiLCJFU0NBUEVfS0VZIiwiY2xlYXIiLCJQcm9taXNlIiwiJHJldHVybiIsIiRlcnJvciIsInJlc3VsdHMiLCJTUEVDSUFMX0tFWVMiLCJzZWFyY2giLCJ0aGVuIiwiJGF3YWl0XzEiLCJyZW5kZXIiLCIkYXN5bmNiaW5kIiwiJGF3YWl0XzIiLCJzaG93UmVzdWx0Iiwia2V5cyIsIl9sYXllcnMiLCJyZW1vdmVMYXllciIsImFkZE1hcmtlciIsImNlbnRlck1hcCIsImZpcmVFdmVudCIsImxvY2F0aW9uIiwiX29wdGlvbnMzIiwiTWFya2VyIiwieSIsIngiLCJiaW5kUG9wdXAiLCJhZGRMYXllciIsIm9wZW5Qb3B1cCIsIl9vcHRpb25zNCIsInJlc3VsdEJvdW5kcyIsIkxhdExuZ0JvdW5kcyIsImJvdW5kcyIsImlzVmFsaWQiLCJnZXRCb3VuZHMiLCJmaXRCb3VuZHMiLCJhbmltYXRlIiwic2V0VmlldyIsImdldENlbnRlciIsImdldFpvb20iLCJfb3B0aW9uczUiLCIkYXN5bmNzcGF3biIsInByb21pc2VQcm92aWRlciIsInNlbGYiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImdlbkYiLCJyZXNvbHZlIiwicmVqZWN0Iiwic3RlcCIsImZuIiwiYXJnIiwiZ2VuIiwiZG9uZSIsInYiLCJ0aHJvdyIsInNyYyIsInRvU3RyaW5nIiwidCIsImFyZ3MiLCJtYXRjaCIsInJlIiwibXgiLCJleGVjIiwicHVzaCIsInJldmVyc2UiLCJmb3JFYWNoIiwic2xpY2UiLCJpbmRleCIsInN1YnN0ciIsInJlcGxhY2UiLCJ6b3VzYW4iLCJ0aGVuYWJsZSIsImNhdGNoZXIiLCJib3VuZFRoZW4iLCJyZXNvbHZlciIsInRyYW1wb2xpbmUiLCJzIiwidSIsImIiLCJxIiwidW5kZWZpbmVkIiwicG9wIiwiciIsIkxhenlUaGVuYWJsZSIsIkVhZ2VyVGhlbmFibGUiLCJUaGVuYWJsZSIsIkVhZ2VyVGhlbmFibGVGYWN0b3J5IiwiZXgiLCJwcm9jZXNzIiwic2V0SW1tZWRpYXRlIiwiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJ0aWNrIiwiWm91c2FuIiwiZnVuYyIsIm1lIiwiU1RBVEVfRlVMRklMTEVEIiwieXJldCIsIlNUQVRFX1JFSkVDVEVEIiwicmVhc29uIiwibiIsIm5leHRUaWNrIiwiZiIsInNldFRpbWVvdXQiLCJzb29uIiwiY2FsbFF1ZXVlIiwiZnEiLCJmcVN0YXJ0IiwiYnVmZmVyU2l6ZSIsInNwbGljZSIsInN0YXRlIiwiVHlwZUVycm9yIiwiZmlyc3QiLCJyYSIsInJyIiwibCIsImNsaWVudHMiLCJvbkYiLCJvblIiLCJjbGllbnQiLCJhIiwidmFsIiwieiIsInZlcnNpb24iLCJkZWZhdWx0U2V0VGltb3V0IiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJjYWNoZWRTZXRUaW1lb3V0IiwicnVuQ2xlYXJUaW1lb3V0IiwiY2FjaGVkQ2xlYXJUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiY2xlYW5VcE5leHRUaWNrIiwiZHJhaW5pbmciLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsInF1ZXVlSW5kZXgiLCJkcmFpblF1ZXVlIiwidGltZW91dCIsImxlbiIsInJ1biIsIkl0ZW0iLCJhcnJheSIsIm5vb3AiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb25zIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwiYmluZGluZyIsIm5hbWUiLCJjd2QiLCJjaGRpciIsImRpciIsInVtYXNrIiwiVGltZW91dCIsImNsZWFyRm4iLCJfaWQiLCJfY2xlYXJGbiIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImNsb3NlIiwidW5yZWYiLCJyZWYiLCJlbnJvbGwiLCJtc2VjcyIsIl9pZGxlVGltZW91dElkIiwiX2lkbGVUaW1lb3V0IiwidW5lbnJvbGwiLCJfdW5yZWZBY3RpdmUiLCJhY3RpdmUiLCJfb25UaW1lb3V0IiwiY2xlYXJJbW1lZGlhdGUiLCJnbG9iYWwiLCJ0YXNrIiwidGFza3NCeUhhbmRsZSIsIm5leHRIYW5kbGUiLCJyZWdpc3RlckltbWVkaWF0ZSIsImhhbmRsZSIsInJ1bklmUHJlc2VudCIsImN1cnJlbnRseVJ1bm5pbmdBVGFzayIsImRvYyIsImRvY3VtZW50IiwiYXR0YWNoVG8iLCJnZXRQcm90b3R5cGVPZiIsInBvc3RNZXNzYWdlIiwiaW1wb3J0U2NyaXB0cyIsInBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMiLCJvbGRPbk1lc3NhZ2UiLCJvbm1lc3NhZ2UiLCJtZXNzYWdlUHJlZml4IiwiTWF0aCIsInJhbmRvbSIsIm9uR2xvYmFsTWVzc2FnZSIsImluZGV4T2YiLCJhdHRhY2hFdmVudCIsIk1lc3NhZ2VDaGFubmVsIiwiY2hhbm5lbCIsInBvcnQxIiwicG9ydDIiLCJodG1sIiwiZG9jdW1lbnRFbGVtZW50Iiwic2NyaXB0IiwicmVtb3ZlQ2hpbGQiLCJpc1RoZW5hYmxlIiwicmVzb2x1dGlvbiIsImhvdyIsIkNoYWluZWQiLCJfdW5jaGFpbmVkIiwidGhlbkNoYWluIiwicmVzIiwicmVqIiwiY2hhaW4iLCJfcmVzb2x2ZXIiLCJkZWJvdW5jZSIsIndhaXQiLCJpbnZva2VGdW5jIiwidGltZSIsImxhc3RBcmdzIiwidGhpc0FyZyIsImxhc3RUaGlzIiwibGFzdEludm9rZVRpbWUiLCJsZWFkaW5nRWRnZSIsInRpbWVySWQiLCJ0aW1lckV4cGlyZWQiLCJsZWFkaW5nIiwicmVtYWluaW5nV2FpdCIsInRpbWVTaW5jZUxhc3RDYWxsIiwibGFzdENhbGxUaW1lIiwidGltZVNpbmNlTGFzdEludm9rZSIsIm1heGluZyIsIm5hdGl2ZU1pbiIsIm1heFdhaXQiLCJzaG91bGRJbnZva2UiLCJub3ciLCJ0cmFpbGluZ0VkZ2UiLCJ0cmFpbGluZyIsImNhbmNlbCIsImZsdXNoIiwiZGVib3VuY2VkIiwiaXNJbnZva2luZyIsIkZVTkNfRVJST1JfVEVYVCIsInRvTnVtYmVyIiwiaXNPYmplY3QiLCJuYXRpdmVNYXgiLCJ0eXBlIiwiaXNPYmplY3RMaWtlIiwiaXNTeW1ib2wiLCJvYmplY3RUb1N0cmluZyIsInN5bWJvbFRhZyIsIk5BTiIsIm90aGVyIiwidmFsdWVPZiIsInJlVHJpbSIsImlzQmluYXJ5IiwicmVJc0JpbmFyeSIsInRlc3QiLCJyZUlzT2N0YWwiLCJmcmVlUGFyc2VJbnQiLCJyZUlzQmFkSGV4IiwicGFyc2VJbnQiLCJmcmVlR2xvYmFsIiwiZnJlZVNlbGYiLCJvYmplY3RQcm90byIsIm1pbiIsIkRhdGUiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInByb3BzIiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIlNlYXJjaEVsZW1lbnQiLCJfcmVmJGhhbmRsZVN1Ym1pdCIsIl9yZWYkc2VhcmNoTGFiZWwiLCJfcmVmJGNsYXNzTmFtZXMiLCJqb2luIiwicGxhY2Vob2xkZXIiLCJvbklucHV0Iiwib25LZXlVcCIsIm9uS2V5UHJlc3MiLCJvbkZvY3VzIiwib25CbHVyIiwiX2VsZW1lbnRzIiwiaGFzRXJyb3IiLCJfZWxlbWVudHMyIiwiYm9keSIsImJsdXIiLCJFTlRFUl9LRVkiLCJlbGVtZW50IiwicGFyZW50IiwiZWwiLCJjbGFzc05hbWUiLCJjcmVhdGVTY3JpcHRFbGVtZW50IiwiY2IiLCJzZXRBdHRyaWJ1dGUiLCJqc29uIiwiYWRkIiwiQVJST1dfTEVGVF9LRVkiLCJBUlJPV19SSUdIVF9LRVkiLCJjeCIsImNsYXNzbmFtZXMiLCJ0cmltIiwiUmVzdWx0TGlzdCIsIl9yZWYkaGFuZGxlQ2xpY2siLCJfaW5pdGlhbGlzZVByb3BzIiwicmVzdWx0SXRlbSIsImNoaWxkIiwiY2xvbmVOb2RlIiwiaW5uZXJIVE1MIiwiZnJvbSIsImNoaWxkcmVuIiwibGFzdENoaWxkIiwiX3JlZjIiLCJwYXJlbnROb2RlIiwiaGFzQXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX3Byb3ZpZGVyMiIsIlByb3ZpZGVyIiwiX0Jhc2VQcm92aWRlciIsInByb3RvY29sIiwianNvbnAiLCJwYXJhbXMiLCJnZXRQYXJhbVN0cmluZyIsInJlc291cmNlU2V0cyIsInJlc291cmNlcyIsInBvaW50IiwiY29vcmRpbmF0ZXMiLCJhZGRyZXNzIiwiZm9ybWF0dGVkQWRkcmVzcyIsImJib3giLCJyYXciLCJfcmVmMyIsImVuZHBvaW50IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVxdWVzdCIsImZldGNoIiwidGV4dCIsImxvY2F0aW9ucyIsImZlYXR1cmUiLCJnZW9tZXRyeSIsImV4dGVudCIsInltaW4iLCJ4bWluIiwieW1heCIsInhtYXgiLCJwYXJhbVN0cmluZyIsImxuZyIsImxhdCIsImZvcm1hdHRlZF9hZGRyZXNzIiwidmlld3BvcnQiLCJzb3V0aHdlc3QiLCJub3J0aGVhc3QiLCJmb3JtYXQiLCJsb24iLCJkaXNwbGF5X25hbWUiLCJwYXJzZUZsb2F0IiwiYm91bmRpbmdib3giLCJtYWtlTGF5ZXJFbGVtcyIsIm1ha2VMYXllckdyb3VwcyIsIm1ha2VQYW5lbERyYWdnYWJsZSIsInNldFBhbmVsU2Nyb2xsSGFuZGxlciIsImdldEVsZW1lbnRCeUlkIiwib25zY3JvbGwiLCJ1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0IiwiZDMiLCJkcmFnIiwicGFuZWxEcmFnRXZlbnRIYW5kbGVyIiwidXBkYXRlUGFuZWxXaWR0aCIsIm5ld0hlaWdodCIsInBhbmVsIiwicGFuZWxPZmZzZXRIZWlnaHQiLCJwcm9wZXJ0eSIsInBhbmVsRHJhZ092ZXJsYXkiLCJoZWFkZXIiLCJjbGFzc2VkIiwiZ3JhcGhMaXN0Iiwic2Nyb2xsSGVpZ2h0IiwibGF5ZXJMaXN0IiwiaGVpZ2h0IiwicGFuZWxNaW5XaWR0aCIsInBhbmVsQ2xpZW50V2lkdGgiLCJ3cmFwcGVyIiwid3JhcHBlcldpZHRoIiwiY2xpZW50V2lkdGgiLCJtYXBXcmFwcGVyIiwibW91c2VYIiwic291cmNlRXZlbnQiLCJ4RGVsdGEiLCJuZXdQYW5lbFdpZHRoIiwicGFkZGluZ1JpZ2h0Iiwic2VsZWN0QWxsIiwiZW50ZXIiLCJhcHBlbmQiLCJhdHRyIiwibGF5ZXJHcm91cCIsImVhY2giLCJsYXllckdyb3VwcyIsImxheWVyRGl2IiwibWFrZUNoZWNrYm94IiwibWFrZUxhYmVsIiwibWFrZURlc2NyaXB0aW9uIiwibWFrZUxheWVyVG9vbHMiLCJ0b2dnbGVMYXllciIsIl9vcGFjaXR5U2xpZGVyIiwic2V0U2xpZGVySW5pdGlhbFBvcyIsImluZm8iLCJsYXllclRvb2xzRGl2IiwibWFrZU9wYWNpdHlTbGlkZXIiLCJtYWtlTGVnZW5kIiwibGF5ZXJUb29sc1dyYXBwZXIiLCJsZWdlbmQiLCJHZXRDdXJyZW50TGF5ZXJzIiwiX2N1cnJlbnRfbGF5ZXJzIiwiZGVmYXVsdExheWVycyIsImoiLCJkZWZhdWx0TGF5ZXIiLCJmb3VuZExheWVyIiwiZW5hYmxlTGF5ZXIiLCJkaXNhYmxlTGF5ZXIiLCJHZXRNYXAiLCJtYXBMYXllciIsIm1ha2VXbXNUaWxlTGF5ZXIiLCJhZGRMYXllclRvSW50ZXJuYWxUcmFja2VyIiwidXBkYXRlU2hhcmVVcmwiLCJoYXNMYXllciIsInJlbW92ZUxheWVyRnJvbUludGVybmFsVHJhY2tlciIsImxvYyIsInVwZGF0ZUxheWVyT3BhY2l0eSIsIm5ld09wYWNpdHkiLCJvcGFjaXR5Iiwic2V0T3BhY2l0eSIsInRpbGVMYXllciIsIndtcyIsInRyYW5zcGFyZW50IiwiY3JzIiwiQ1JTIiwiRVBTRzQzMjYiLCJtYXBDb25maWciLCJzY3JvbGxXaGVlbFpvb20iLCJpbml0aWFsQ2VudGVyIiwiaW5pdGlhbFpvb20iLCJjb250cm9sIiwiYXR0cmlidXRpb24iLCJzZXRTaGFyZVVybCIsIm1ha2VTaGFyZVVybCIsIm1ha2VDZW50ZXJTdHJpbmciLCJtYWtlWm9vbVN0cmluZyIsIm1ha2VMYXllclN0cmluZyIsIm1ha2VCYXNlTGF5ZXJTdHJpbmciLCJmaWx0ZXIiLCJoaXN0b3J5IiwicmVwbGFjZVN0YXRlIiwiY2VudGVyIiwib3BhY2l0eVZhbHMiLCJjdXJyZW50TGF5ZXJzIiwiZWFjaExheWVyIiwiY3VycmVudExheWVyIiwiQkFTRV9MQVlFUl9UWVBFIiwicGFyc2VTaGFyZVVybCIsImdldFBhcmFtc0FycmF5IiwibWFrZUtleWVkUGFyYW1zT2JqZWN0IiwiZm9ybWF0UGFyYW1zIiwic3Vic3RyaW5nIiwidW5tYW5nbGVQYXJhbVN0cmluZyIsInNwbGl0IiwicGFyYW1zQXJyIiwicGFyYW1QYWlyIiwicGFyc2VkUGFyYW1zIiwiZm9ybWF0Q2VudGVyUGFyYW0iLCJmb3JtYXRMYXllclBhcmFtIiwiZm9ybWF0QmFzZUxheWVyUGFyYW0iLCJsYXllcklkIiwiZm9ybWF0dGVkTGF5ZXJzIiwiZW5hYmxlZExheWVycyIsInNoYXJlIiwiem9vbSIsImFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyIsImFkZEJhc2VMYXllclNldHRpbmdzVG9Db25maWciLCJzaGFyZUxheWVyU2V0dGluZ3MiLCJlbmFibGVkTGF5ZXIiLCJzaGFyZUJhc2VMYXllclNldHRpbmdzIiwiYmFzZWxheWVyIiwibGF5ZXJDb25maWciLCJfYmFzZWxheWVycyIsImJhc2VMYXllciIsImNyZWF0ZUJhc2VMYXllciIsImNyZWF0ZUJhc2VMYXllclVJIiwiYmFzZVVJIiwiYmFzZVdyYXBwZXIiLCJiYXNlSW1nIiwiYmFzZUxhYmVsIiwiaW1hZ2UiLCJ0ZXh0Q29udGVudCIsImhhbmRsZUJhc2VDbGljayIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJsYXllcmlkIiwidG9nZ2xlQWN0aXZlQmFzZVVJIiwicmVtb3ZlQ3VycmVudEJhc2VMYXllciIsImFkZE5ld0Jhc2VMYXllclRvTWFwIiwiYmFzZVVJRWxlbSIsImJyaW5nVG9CYWNrIiwibWFrZUJhc2VMYXllck9wdGlvbnMiLCJzdWJkb21haW5zIiwibGF5ZXJPcGFjaXR5IiwiaGFuZGxlT2Zmc2V0Iiwib3BhY2l0eVNjYWxlIiwibWFrZVNsaWRlclRyYWNrIiwib3ZlcmxheSIsInNldERyYWdFdmVudExpc3RlbmVyIiwiY2FsY09wYWNpdHlGcm9tTW91c2VQb3MiLCJhZGp1c3RTbGlkZXJIYW5kbGUiLCJ5UG9zIiwibW91c2UiLCJub2RlIiwiaW52ZXJ0Iiwic2NhbGVMaW5lYXIiLCJkb21haW4iLCJyYW5nZSIsImNsYW1wIiwiaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2siLCJleHRlbmREYXRlTW9kdWxlIiwidGlwIiwiZCIsImlzTGVhcFllYXIiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJnZXRET1kiLCJkYXlDb3VudCIsIm1uIiwiZ2V0TW9udGgiLCJkbiIsImdldERhdGUiLCJkYXlPZlllYXIiLCJoYW5kbGVNYXBDbGljayIsImxhdGxuZyIsImRpdiIsImNyZWF0ZUdyYXBoRGl2IiwiY3JlYXRlTWFya2VyIiwic2V0SWNvbiIsImhvdmVySWNvbiIsImdyYXBoSWNvbiIsImNyZWF0ZUdyYXBoUmVtb3ZlciIsImVsZW0iLCJjcmVhdGVHcmFwaFJlbW92ZXJFbGVtIiwiaW5uZXJUZXh0IiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiZ2V0RGF0YSIsIm9SZXEiLCJyZXNwb25zZSIsImRyYXdHcmFwaCIsInNwbGl0RGF0YSIsInJlcHJvY2Vzc0RhdGEiLCJvcmlnZGF0YSIsImRhdGFGb3JNZWRpYW5zIiwibWVkaWFuIiwic29ydCIsImZsb29yIiwiZGF0YXNldCIsImFjdGl2ZUVsZW0iLCJhY3RpdmVUeXBlIiwiY29udGVudCIsImNyZWF0ZVRleHROb2RlIiwicmVwcm9jZXNzZWREYXRhIiwibWFrZVVwRG93bkxpbmVHcmFwaCIsIm1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMiLCJkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMiLCJhdmVyYWdlcyIsIm1hcmdpbiIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCIsIndpZHRoIiwic2NhbGVUaW1lIiwicGFyc2VEYXRlIiwieEF4aXMiLCJheGlzQm90dG9tIiwidGlja3MiLCJ0aWNrRm9ybWF0IiwieUF4aXMiLCJheGlzTGVmdCIsInZhbHVlbGluZSIsImxpbmUiLCJzdmciLCJkcmF3TGluZWFyUGF0aCIsImRyYXdMaW5lYXJQb2ludHMiLCJmb3JtYXRNb250aFRpY2siLCJNT05USF9MQUJFTFMiLCJjaGFydHMiLCJtZWRpYW5zIiwidGlja1ZhbHVlcyIsImlzQXJyYXkiLCJwYXJzZUp1bGlhbkRheSIsInBhdGgiLCJpbnB1dHdyYXBwZXIiLCJjcmVhdGVDaGVja2JveCIsInJhZGl1cyIsImZpbmRQb2xhckNlbnRlciIsInRocmVzaG9sZHMiLCJmaW5kUG9sYXJUaHJlc2hvbGRzIiwicmFkaWFsTGluZSIsImFuZ2xlIiwiUEkiLCJnciIsImdhIiwidGhyZXNob2xkRWxlbSIsImRheSIsImNlbnRlckRheSIsImRyYXdQb2xhclBhdGgiLCJzaG93IiwiaGlkZSIsInBvaW50cyIsImNoZWNrYm94V3JhcHBlciIsIm5ld1llYXIiLCJjaGVja2VkIiwidGhyZXNob2xkQ2hlY2tib3giLCJhcnIiLCJzdW0iLCJ0b3RhbFN1bSIsImluY29tcGxldGVZZWFycyIsImFicyIsImNoZWNrRGlmZiIsImxlZnRBcmVhIiwicmlnaHRBcmVhIiwiayIsImNvdW50ZXIiLCJhcmVhRGlmZiIsImFyZWFJbmRleCIsImF2Z3MiLCJmaXJzdFJhZGl1cyIsInNlY29uZFJhZGl1cyIsImZpcnN0RGlmZiIsInN0YXJ0RGF5Iiwic3RhcnRJbmRleCIsImZpZnRlZW5JbmRleCIsImVpZ2h0eUluZGV4IiwiZWlnaHR5Zml2ZUluZGV4IiwiZmlmdGVlblRocmVzaG9sZCIsImVpZ2h0eVRocmVzaG9sZCIsImVpZ2h0eWZpdmVUaHJlc2hvbGQiLCJmaWZ0ZWVuSW5kZXhGb3VuZCIsImVpZ2h0eUluZGV4Rm91bmQiLCJlaWdodHlmaXZlSW5kZXhGb3VuZCIsImNpcmNsZUNlbnRlciIsImRhdHVtIiwiY29tcHV0ZUNvbG9yIiwiaGFuZGxlUG9pbnRNb3VzZW92ZXIiLCJoYW5kbGVQb2ludE1vdXNlb3V0IiwidGlwU3RyaW5nIiwiZm9ybWF0RGF0ZSIsInNjYWxlIiwiZGlmZiIsInBlcmNlbnRfZGlmZiIsImxpZ2h0bmVzcyIsImRhdGUiLCJtb250aCIsImZvcm1hdE1vbnRoIiwib3JkaW5hbF9zdWZmaXhfb2YiLCJiYXNlSWNvbiIsImljb25VcmwiLCJzaGFkb3dVcmwiLCJpY29uU2l6ZSIsImljb25BbmNob3IiLCJwb3B1cEFuY2hvciIsInNoYWRvd1NpemUiLCIwIiwiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5IiwiMTAiLCIxMSIsIkJpbmRUYWJFdmVudHMiLCJoYW5kbGVUYWJIZWFkZXJCdG5DbGljayIsInRvZ2dsZVdyYXBwZXJBY3RpdmVTdGF0ZXMiLCJ0b2dnbGVNYXBQYWRkaW5nIiwid3JhcHBlcnMiLCJsYXllcnNBY3RpdmUiLCJncmFwaHNBY3RpdmUiLCJvZmZzZXRXaWR0aCJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxF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ekIsRTdCcXVHQyxPNkJydUdNLElBQUlqTixNQUFLK1EsRUFBTW9JLEVBQ3pCakQsR0FFRCxRQUFTZCxHQUFnQjhELEc3QnN1R3BCLE02QnJ1R29CLGdCQUFWQSxJN0JzdUdOQSxFNkJydUdNaEYsRUFDUGdGLEdBQU9BLEVBQ1ZqSSxVQUVBaUksRUFHTCxRQUFTTCxHQUFZSyxHN0JzdUdoQixNNkJydUdZLFlBQVRBLEVBQW9DQSxHN0J5dUd2Q0EsRTZCdnVHTWhGLEVBQ1BnRixHQUFPRSxFQUFZRixFQUFLOUgsWUFBYyxJQUFNaUksRUFBa0JILEVBQUs1SCxXQUFhLEtBQU80SCxFQUMxRmxJLGVBRUQsUUFBU29JLEdBQWFELEc3Qnd1R2pCLE82QnR1R0dBLEc3QnV1R0MsSTZCdHVHRyxHN0J1dUdDLE02QnR1R0wsTTdCdXVHQyxLNkJ0dUdHLEc3QnV1R0MsTTZCdHVHTCxNN0J1dUdDLEs2QnR1R0csRzdCdXVHQyxNNkJ0dUdMLE03QnV1R0MsSzZCdHVHRyxHN0J1dUdDLE02QnR1R0wsTTdCdXVHQyxLNkJ0dUdHLEc3QnV1R0MsTTZCdHVHTCxLN0J1dUdDLEs2QnR1R0csRzdCdXVHQyxNNkJ0dUdMLE03QnV1R0MsSzZCdHVHRyxHN0J1dUdDLE02QnR1R0wsTTdCdXVHQyxLNkJ0dUdHLEc3QnV1R0MsTTZCdHVHTCxNN0J1dUdDLEs2QnR1R0csRzdCdXVHQyxNNkJ0dUdMLE03QnV1R0MsSzZCdHVHRyxHN0J1dUdDLE02QnR1R0wsTTdCdXVHQyxLNkJ0dUdHLEk3QnV1R0MsTTZCdHVHTCxNN0J1dUdDLEs2QnR1R0csSTdCdXVHQyxNNkJydUdaLFFBRUQsUUFBU0UsR0FBa0JuRCxHN0J3dUd0QixHNkJ2dUdHak0sR0FBSWlNLEVBQU0sR0FDVmtCLEVBQUlsQixFQUNSLEc3QnV1R0MsTzZCdnVHUyxLQUFOak0sR0FBaUIsS0FBTm1OLEVBQ0psQixFQUNWLEtBQ1MsSUFBTmpNLEdBQWlCLEtBQU5tTixFQUNKbEIsRUFDVixLQUNTLElBQU5qTSxHQUFpQixLQUFObU4sRUFDSmxCLEVBQ1YsS0FDTUEsRUFDVixLN0IwOUVBL3lCLE9BQU9DLGVBQWViLEVBQVMsY0FDM0JjLE9BQU8sSUFFWGQsRTZCeDBHZThCLGM3QnkwR2Y5QixFNkJqekdleUMsaUJBNUIyQixJQUkzQzRyQixHQUoyQ2x0QixFQUFBdEIsRUFBQSxJQWdDdkNrM0IsRUFBV2h5QixFQUFFbUQsS0FBS2hDLFdBRWxCc3BCLEVBQUEsR0FBZ0J1SCxJN0JrMUdmQyxRNkJoMUdELHFCN0JpMUdDQyxVNkJoMUdELHlCN0JpMUdDQyxVNkJqMUdVLEdBQ1gsSTdCaTFHQ0MsWTZCajFHWSxHQUNiLEk3QmkxR0NDLGE2QmoxR2EsR0FDZCxJN0JpMUdDQyxZNkJqMUdZLEdBQUksTUFHakI5SCxFQUFBLEdBQWdCd0gsSTdCazFHZkMsUTZCaDFHRCx1QjdCaTFHQ0MsVTZCaDFHRCx5QjdCaTFHQ0MsVTZCajFHVSxHQUNYLEk3QmkxR0NDLFk2QmoxR1ksR0FDYixJN0JpMUdDQyxhNkJqMUdhLEdBQ2QsSTdCaTFHQ0MsWTZCajFHWSxHQUFJLE1BZzBCakI3RSxHN0J3dUdDOEUsRTZCdHVHRCxNN0J1dUdDQyxFNkJ0dUdELE03QnV1R0NDLEU2QnR1R0QsTTdCdXVHQ0MsRTZCdHVHRCxNN0J1dUdDQyxFNkJ0dUdELE03QnV1R0NDLEU2QnR1R0QsTTdCdXVHQ0MsRTZCdHVHRCxNN0J1dUdDQyxFNkJ0dUdELE03QnV1R0NDLEU2QnR1R0QsTTdCdXVHQ0MsRTZCdHVHRCxNN0J1dUdDQyxHNkJ0dUdELE03QnV1R0NDLEc2QnZ1R0csUTdCNHVHRixTQUFTaDRCLEVBQVFELEVBQVNILEdBRS9CLFk4QnptSWMsU0FBU3E0QixLOUJtbklyQjFULEc4QmxuSUUwQixVQUFVLGtCQUFrQmpoQixHQUFHLFFBQ25Da3pCLEdBRUQsUUFBU0EsS0FFSDl1QixLQUFLa0MsVUFBVUMsU0FBUyxZQUc1QjRzQixJQUNBQyxLQUVBLEVBQUFsM0IsRUFBQW9qQixnQzlCa25JQ0MsRzhCbG5JRTBCLFVBQVUsMENBQ1ZoQixRQUFRLFNBQVUsVzlCa25JbEIsTzhCam5JU1YsR0FBR2hZLE9BQU9uRCxNQUFNNmIsUUFDekIsYUFLTCxRQUFTa1QsSzlCZ25JTixHOEIvbUlHRSxHQUFXOVQsR0FBRzBCLFVBRWxCLDhCQUFJcVMsRUFBZUQsRUFBU3BULFFBQzVCLGlCQUFJc1QsRUFBZUYsRUFBU3BULFFBRTVCLGdCOUIrbUlDb1QsRzhCOW1JRXBULFFBQVEsaUJBQWtCcVQsR0FDMUJyVCxRQUFRLGlCQUNac1QsR0FFRCxRQUFTSCxLOUI4bUlOLEc4QjdtSUtwUyxHQUFlM04sU0FBUytMLGVBQWUsZUFDM0NvVSxXOUI2bUlEbmdCLFU4QjdtSVUrTCxlQUFlLGVBQWV2YyxNQUFNbWUsYUFBZUEsRUFDL0QsSzlCeWtJQXJsQixPQUFPQyxlQUFlYixFQUFTLGNBQzdCYyxPQUFPLElBRVRkLEVBQVFXLFFBQVV1M0IsQzhCOW1JbkIsSUFBQS8yQixHQUFBdEIsRUFBQSxLOUJtcElNLFNBQVNJLEVBQVFEIiwiZmlsZSI6ImluZGV4X2J1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9wYXJzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9wYXJzZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGFyc2VyKTtcblx0XG5cdHZhciBfc2VhcmNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfc2VhcmNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaCk7XG5cdFxuXHR2YXIgX3BhbmVsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdFxuXHR2YXIgX2Jhc2VsYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRcblx0dmFyIF9ncmFwaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHRcblx0dmFyIF90YWJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cdFxuXHR2YXIgX3RhYnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGFicyk7XG5cdFxuXHR2YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIF9sYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBjc3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0XG5cdC8vIERvZXMgbm90IHJlbHkgb24gbWFwIG9iamVjdCBvciBjb25maWcgZmlsZVxuXHR2YXIgQmFzZSA9IGZ1bmN0aW9uIEJhc2UoY29uZmlnKSB7XG5cdCAgICAoMCwgX3BhcnNlcjIuZGVmYXVsdCkoY29uZmlnLCBjYWxsYmFjayk7XG5cdCAgICAoMCwgX2dyYXBoLlNldHVwR3JhcGhzKSgpO1xuXHQgICAgKDAsIF90YWJzMi5kZWZhdWx0KSgpO1xuXHR9O1xuXHRcblx0Ly8gRG9lcyByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcblx0dmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2soZGF0YSkge1xuXHQgICAgKDAsIF9zaGFyZS5BZGRTaGFyZVNldHRpbmdzVG9Db25maWcpKGRhdGEpO1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkNyZWF0ZU1hcCkoZGF0YS5tYXApO1xuXHQgICAgKDAsIF9iYXNlbGF5ZXIuQ3JlYXRlQmFzZUxheWVycykobWFwLCBkYXRhLmJhc2VsYXllcnMpO1xuXHQgICAgKDAsIF9sYXllci5DcmVhdGVEZWZhdWx0TGF5ZXJzKShkYXRhLmxheWVycywgZGF0YVtcImFjdGl2ZS1sYXllcnNcIl0pO1xuXHQgICAgKDAsIF9wYW5lbC5TZXR1cFBhbmVsKShkYXRhLmxheWVycywgZGF0YS5sYXlvdXQpO1xuXHQgICAgKDAsIF9zZWFyY2gyLmRlZmF1bHQpKG1hcCk7XG5cdCAgICAoMCwgX2dyYXBoLkJpbmRHcmFwaEV2ZW50cykobWFwKTtcblx0ICAgICgwLCBfc2hhcmUuQmluZFVwZGF0ZVNoYXJlVXJsKShtYXApO1xuXHR9O1xuXHRcblx0d2luZG93LkJhc2UgPSBCYXNlO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0geyBCYXNlOiBCYXNlIH07XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFBhcnNlQ29uZmlnO1xuXHQvKipcclxuXHQgKiBQYXJzZXMgYSBjb25maWcgZmlsZS4gU2luY2UgdGhlIHByb2Nlc3MgdG8gZ2V0IGV4dGVybmFsIGZpbGVzXHJcblx0ICogdXNlcyBBSkFYIHlvdSBuZWVkIHRvIHBhc3MgYSBjYWxsYmFjayB0byBoYW5kbGUgdGhlIG5leHQgc3RlcHNcclxuXHQgKiBvZiB1c2luZyB0aGUgY29uZmlnIGZpbGUsIHNpbmNlIHdlIGRvIG5vdCBrbm93IGhvdyBsb25nIGl0XHJcblx0ICogd2lsbCB0YWtlIHRvIGdyYWIgdGhlIGZpbGUuXHJcblx0ICovXG5cdGZ1bmN0aW9uIFBhcnNlQ29uZmlnKGNvbmZpZ0ZpbGUsIGNhbGxiYWNrKSB7XG5cdCAgICBHZXRDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBHZXRDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcblx0ICAgIHZhciB4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdCAgICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoeG1saHR0cC5yZWFkeVN0YXRlID09IDQpIHtcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4bWxodHRwLnJlc3BvbnNlVGV4dCk7XG5cdCAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUjogTWFsZm9ybWVkIEpTT04gaW4gY29uZmlnIGZpbGUuXCIpO1xuXHQgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBmb3JtYXRNYXAoZGF0YSk7XG5cdCAgICAgICAgICAgIGZvcm1hdExheWVycyhkYXRhKTtcblx0ICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB4bWxodHRwLm9wZW4oXCJHRVRcIiwgY29uZmlnRmlsZSwgdHJ1ZSk7XG5cdCAgICB4bWxodHRwLnNlbmQoKTtcblx0ICAgIGNvbnNvbGUubG9nKFwiaGlcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdE1hcChkYXRhKSB7XG5cdCAgICBpZiAoIWRhdGEubWFwKSBkYXRhLm1hcCA9IHt9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRMYXllcnMoZGF0YSkge1xuXHQgICAgdmFyIGxheWVycyA9IGRhdGEubGF5ZXJzO1xuXHQgICAgdmFyIGRlZmF1bHRNYXBzZXJ2ZXJVcmwgPSBkYXRhLm1hcHNlcnZlclVybDtcblx0ICAgIHZhciBkZWZhdWx0RW5hYmxlZExheWVycyA9IGRhdGFbXCJhY3RpdmUtbGF5ZXJzXCJdO1xuXHQgICAgdmFyIGxheWVyZ3JvdXA7XG5cdCAgICB2YXIgaTtcblx0XG5cdCAgICBmb3IgKHZhciBwcm9wIGluIGxheWVycykge1xuXHQgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG5cdCAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGF5ZXJncm91cC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBzZXRNYXBzZXJ2ZXJVcmwobGF5ZXJncm91cFtpXSwgZGVmYXVsdE1hcHNlcnZlclVybCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRNYXBzZXJ2ZXJVcmwobGF5ZXIsIHVybCkge1xuXHQgICAgbGF5ZXIudXJsID0gbGF5ZXIudXJsIHx8IHVybDtcblx0fVxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBDcmVhdGVTZWFyY2g7XG5cdFxuXHR2YXIgX2xlYWZsZXRHZW9zZWFyY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0ZnVuY3Rpb24gQ3JlYXRlU2VhcmNoKG1hcCkge1xuXHQgICAgdmFyIHByb3ZpZGVyID0gbmV3IF9sZWFmbGV0R2Vvc2VhcmNoLkVzcmlQcm92aWRlcigpO1xuXHRcblx0ICAgIHZhciBzZWFyY2hDb250cm9sID0gbmV3IF9sZWFmbGV0R2Vvc2VhcmNoLkdlb1NlYXJjaENvbnRyb2woe1xuXHQgICAgICAgIHByb3ZpZGVyOiBwcm92aWRlcixcblx0ICAgICAgICBzaG93TWFya2VyOiBmYWxzZVxuXHQgICAgfSk7XG5cdFxuXHQgICAgbWFwLmFkZENvbnRyb2woc2VhcmNoQ29udHJvbCk7XG5cdFxuXHQgICAgTC5Eb21FdmVudC5vbihzZWFyY2hDb250cm9sLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuY29udGFpbmVyLCBcImNsaWNrXCIsIGZ1bmN0aW9uIChldikge1xuXHQgICAgICAgIEwuRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKGV2KTtcblx0ICAgIH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbGVhZmxldENvbnRyb2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdHZW9TZWFyY2hDb250cm9sJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGVhZmxldENvbnRyb2wpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfc2VhcmNoRWxlbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdTZWFyY2hFbGVtZW50Jywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoRWxlbWVudCkuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9iaW5nUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnQmluZ1Byb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmluZ1Byb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX2VzcmlQcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdFc3JpUHJvdmlkZXInLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lc3JpUHJvdmlkZXIpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfZ29vZ2xlUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnR29vZ2xlUHJvdmlkZXInLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nb29nbGVQcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9vcGVuU3RyZWV0TWFwUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnT3BlblN0cmVldE1hcFByb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb3BlblN0cmVldE1hcFByb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1Byb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfXJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBMZWFmbGV0Q29udHJvbDtcblx0XG5cdHZhciBfbG9kYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHR2YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXHRcblx0dmFyIF9zZWFyY2hFbGVtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHR2YXIgX3NlYXJjaEVsZW1lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoRWxlbWVudCk7XG5cdFxuXHR2YXIgX3Jlc3VsdExpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdHZhciBfcmVzdWx0TGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZXN1bHRMaXN0KTtcblx0XG5cdHZhciBfZG9tVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdHZhciBfY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHR2YXIgZGVmYXVsdE9wdGlvbnMgPSBmdW5jdGlvbiBkZWZhdWx0T3B0aW9ucygpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcG9zaXRpb246ICd0b3BsZWZ0Jyxcblx0ICAgIHN0eWxlOiAnYnV0dG9uJyxcblx0ICAgIHNob3dNYXJrZXI6IHRydWUsXG5cdCAgICBzaG93UG9wdXA6IGZhbHNlLFxuXHQgICAgbWFya2VyOiB7XG5cdCAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpLFxuXHQgICAgICBkcmFnZ2FibGU6IGZhbHNlXG5cdCAgICB9LFxuXHQgICAgbWF4TWFya2VyczogMSxcblx0ICAgIHJldGFpblpvb21MZXZlbDogZmFsc2UsXG5cdCAgICBhbmltYXRlWm9vbTogdHJ1ZSxcblx0ICAgIHNlYXJjaExhYmVsOiAnRW50ZXIgYWRkcmVzcycsXG5cdCAgICBub3RGb3VuZE1lc3NhZ2U6ICdTb3JyeSwgdGhhdCBhZGRyZXNzIGNvdWxkIG5vdCBiZSBmb3VuZC4nLFxuXHQgICAgbWVzc2FnZUhpZGVEZWxheTogMzAwMCxcblx0ICAgIHpvb21MZXZlbDogMTgsXG5cdCAgICBjbGFzc05hbWVzOiB7XG5cdCAgICAgIGNvbnRhaW5lcjogJ2xlYWZsZXQtYmFyIGxlYWZsZXQtY29udHJvbCBsZWFmbGV0LWNvbnRyb2wtZ2Vvc2VhcmNoJyxcblx0ICAgICAgYnV0dG9uOiAnbGVhZmxldC1iYXItcGFydCBsZWFmbGV0LWJhci1wYXJ0LXNpbmdsZScsXG5cdCAgICAgIG1zZ2JveDogJ2xlYWZsZXQtYmFyIG1lc3NhZ2UnLFxuXHQgICAgICBmb3JtOiAnJyxcblx0ICAgICAgaW5wdXQ6ICcnXG5cdCAgICB9LFxuXHQgICAgYXV0b0NvbXBsZXRlOiB0cnVlLFxuXHQgICAgYXV0b0NvbXBsZXRlRGVsYXk6IDI1MFxuXHQgIH07XG5cdH07XG5cdFxuXHR2YXIgQ29udHJvbCA9IHtcblx0ICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKG9wdGlvbnMpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdGhpcy5tYXJrZXJzID0gbmV3IEwuRmVhdHVyZUdyb3VwKCk7XG5cdFxuXHQgICAgdGhpcy5vcHRpb25zID0gX2V4dGVuZHMoe30sIGRlZmF1bHRPcHRpb25zKCksIG9wdGlvbnMpO1xuXHRcblx0ICAgIHZhciBfb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICBzdHlsZSA9IF9vcHRpb25zLnN0eWxlLFxuXHQgICAgICAgIGNsYXNzTmFtZXMgPSBfb3B0aW9ucy5jbGFzc05hbWVzLFxuXHQgICAgICAgIHNlYXJjaExhYmVsID0gX29wdGlvbnMuc2VhcmNoTGFiZWwsXG5cdCAgICAgICAgYXV0b0NvbXBsZXRlID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlLFxuXHQgICAgICAgIGF1dG9Db21wbGV0ZURlbGF5ID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlRGVsYXk7XG5cdFxuXHQgICAgaWYgKHN0eWxlICE9PSAnYnV0dG9uJykge1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY2xhc3NOYW1lcy5jb250YWluZXIgKz0gJyAnICsgb3B0aW9ucy5zdHlsZTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLnNlYXJjaEVsZW1lbnQgPSBuZXcgX3NlYXJjaEVsZW1lbnQyLmRlZmF1bHQoX2V4dGVuZHMoe30sIHRoaXMub3B0aW9ucywge1xuXHQgICAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChxdWVyeSkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5vblN1Ym1pdChxdWVyeSk7XG5cdCAgICAgIH1cblx0ICAgIH0pKTtcblx0XG5cdCAgICB2YXIgX3NlYXJjaEVsZW1lbnQkZWxlbWVuID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLFxuXHQgICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5jb250YWluZXIsXG5cdCAgICAgICAgZm9ybSA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5mb3JtLFxuXHQgICAgICAgIGlucHV0ID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmlucHV0O1xuXHRcblx0ICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgYnV0dG9uID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnYScsIGNsYXNzTmFtZXMuYnV0dG9uLCBjb250YWluZXIpO1xuXHQgICAgYnV0dG9uLnRpdGxlID0gc2VhcmNoTGFiZWw7XG5cdCAgICBidXR0b24uaHJlZiA9ICcjJztcblx0XG5cdCAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbkNsaWNrKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHRcblx0ICAgIGlmIChhdXRvQ29tcGxldGUpIHtcblx0ICAgICAgdGhpcy5yZXN1bHRMaXN0ID0gbmV3IF9yZXN1bHRMaXN0Mi5kZWZhdWx0KHtcblx0ICAgICAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2soX3JlZikge1xuXHQgICAgICAgICAgdmFyIHJlc3VsdCA9IF9yZWYucmVzdWx0O1xuXHRcblx0ICAgICAgICAgIGlucHV0LnZhbHVlID0gcmVzdWx0LmxhYmVsO1xuXHQgICAgICAgICAgX3RoaXMub25TdWJtaXQoeyBxdWVyeTogcmVzdWx0LmxhYmVsIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBmb3JtLmFwcGVuZENoaWxkKHRoaXMucmVzdWx0TGlzdC5lbGVtZW50cy5jb250YWluZXIpO1xuXHRcblx0ICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoMCwgX2xvZGFzaDIuZGVmYXVsdCkoZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICByZXR1cm4gX3RoaXMuYXV0b1NlYXJjaChlKTtcblx0ICAgICAgfSwgYXV0b0NvbXBsZXRlRGVsYXkpLCB0cnVlKTtcblx0ICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgcmV0dXJuIF90aGlzLnNlbGVjdFJlc3VsdChlKTtcblx0ICAgICAgfSwgdHJ1ZSk7XG5cdCAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5jbGVhclJlc3VsdHMoZSk7XG5cdCAgICAgIH0sIHRydWUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuZWxlbWVudHMgPSB7IGJ1dHRvbjogYnV0dG9uIH07XG5cdCAgfSxcblx0ICBvbkFkZDogZnVuY3Rpb24gb25BZGQobWFwKSB7XG5cdCAgICB2YXIgX29wdGlvbnMyID0gdGhpcy5vcHRpb25zLFxuXHQgICAgICAgIHNob3dNYXJrZXIgPSBfb3B0aW9uczIuc2hvd01hcmtlcixcblx0ICAgICAgICBzdHlsZSA9IF9vcHRpb25zMi5zdHlsZTtcblx0XG5cdCAgICB0aGlzLm1hcCA9IG1hcDtcblx0ICAgIGlmIChzaG93TWFya2VyKSB7XG5cdCAgICAgIHRoaXMubWFya2Vycy5hZGRUbyhtYXApO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzdHlsZSA9PT0gJ2JhcicpIHtcblx0ICAgICAgdmFyIGZvcm0gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuZm9ybTtcblx0XG5cdCAgICAgIHZhciByb290ID0gbWFwLmdldENvbnRhaW5lcigpLnF1ZXJ5U2VsZWN0b3IoJy5sZWFmbGV0LWNvbnRyb2wtY29udGFpbmVyJyk7XG5cdFxuXHQgICAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgJ2xlYWZsZXQtY29udHJvbC1nZW9zZWFyY2ggYmFyJyk7XG5cdCAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChmb3JtKTtcblx0ICAgICAgcm9vdC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXHQgICAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0ICB9LFxuXHQgIG9uUmVtb3ZlOiBmdW5jdGlvbiBvblJlbW92ZSgpIHtcblx0ICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICBpZiAoY29udGFpbmVyKSB7XG5cdCAgICAgIGNvbnRhaW5lci5yZW1vdmUoKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9LFxuXHQgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHtcblx0ICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFxuXHQgICAgdmFyIF9zZWFyY2hFbGVtZW50JGVsZW1lbjIgPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMsXG5cdCAgICAgICAgY29udGFpbmVyID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuMi5jb250YWluZXIsXG5cdCAgICAgICAgaW5wdXQgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4yLmlucHV0O1xuXHRcblx0ICAgIGlmIChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdCAgICAgIGlucHV0LmZvY3VzKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBzZWxlY3RSZXN1bHQ6IGZ1bmN0aW9uIHNlbGVjdFJlc3VsdChldmVudCkge1xuXHQgICAgaWYgKCFbX2NvbnN0YW50cy5BUlJPV19ET1dOX0tFWSwgX2NvbnN0YW50cy5BUlJPV19VUF9LRVldLmluY2x1ZGVzKGV2ZW50LmtleUNvZGUpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgdmFyIGlucHV0ID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmlucHV0O1xuXHRcblx0ICAgIHZhciBsaXN0ID0gdGhpcy5yZXN1bHRMaXN0O1xuXHQgICAgdmFyIG1heCA9IHRoaXMucmVzdWx0TGlzdC5jb3VudCgpIC0gMTtcblx0XG5cdCAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYml0d2lzZVxuXHQgICAgdmFyIG5leHQgPSBldmVudC5jb2RlID09PSAnQXJyb3dEb3duJyA/IH5+bGlzdC5zZWxlY3RlZCArIDEgOiB+fmxpc3Quc2VsZWN0ZWQgLSAxO1xuXHQgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5lc3RlZC10ZXJuYXJ5XG5cdCAgICB2YXIgaWR4ID0gbmV4dCA8IDAgPyBtYXggOiBuZXh0ID4gbWF4ID8gMCA6IG5leHQ7XG5cdFxuXHQgICAgdmFyIGl0ZW0gPSBsaXN0LnNlbGVjdChpZHgpO1xuXHQgICAgaW5wdXQudmFsdWUgPSBpdGVtLmxhYmVsO1xuXHQgIH0sXG5cdCAgY2xlYXJSZXN1bHRzOiBmdW5jdGlvbiBjbGVhclJlc3VsdHMoZXZlbnQpIHtcblx0ICAgIGlmIChldmVudC5rZXlDb2RlICE9PSBfY29uc3RhbnRzLkVTQ0FQRV9LRVkpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMucmVzdWx0TGlzdC5jbGVhcigpO1xuXHQgIH0sXG5cdCAgYXV0b1NlYXJjaDogZnVuY3Rpb24gYXV0b1NlYXJjaChldmVudCkge1xuXHQgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgdmFyIHF1ZXJ5LCBwcm92aWRlciwgcmVzdWx0cztcblx0XG5cdCAgICAgIGlmIChfY29uc3RhbnRzLlNQRUNJQUxfS0VZUy5pbmNsdWRlcyhldmVudC5rZXlDb2RlKSkge1xuXHQgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHF1ZXJ5ID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuXHQgICAgICBwcm92aWRlciA9IHRoaXMub3B0aW9ucy5wcm92aWRlcjtcblx0ICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlYXJjaCh7IHF1ZXJ5OiBxdWVyeSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHRcblx0ICAgICAgICByZXN1bHRzID0gJGF3YWl0XzE7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRMaXN0LnJlbmRlcihyZXN1bHRzKTtcblx0ICAgICAgICByZXR1cm4gJHJldHVybigpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgfSxcblx0ICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQocXVlcnkpIHtcblx0ICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgIHZhciBwcm92aWRlciwgcmVzdWx0cztcblx0ICAgICAgcHJvdmlkZXIgPSB0aGlzLm9wdGlvbnMucHJvdmlkZXI7XG5cdCAgICAgIHJldHVybiBwcm92aWRlci5zZWFyY2gocXVlcnkpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG5cdFxuXHQgICAgICAgIHJlc3VsdHMgPSAkYXdhaXRfMjtcblx0XG5cdCAgICAgICAgaWYgKHJlc3VsdHMgJiYgcmVzdWx0cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICB0aGlzLnNob3dSZXN1bHQocmVzdWx0c1swXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICB9LFxuXHQgIHNob3dSZXN1bHQ6IGZ1bmN0aW9uIHNob3dSZXN1bHQocmVzdWx0KSB7XG5cdCAgICB2YXIgbWFya2VycyA9IE9iamVjdC5rZXlzKHRoaXMubWFya2Vycy5fbGF5ZXJzKTtcblx0ICAgIGlmIChtYXJrZXJzLmxlbmd0aCA+PSB0aGlzLm9wdGlvbnMubWF4TWFya2Vycykge1xuXHQgICAgICB0aGlzLm1hcmtlcnMucmVtb3ZlTGF5ZXIobWFya2Vyc1swXSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG1hcmtlciA9IHRoaXMuYWRkTWFya2VyKHJlc3VsdCk7XG5cdCAgICB0aGlzLmNlbnRlck1hcChyZXN1bHQpO1xuXHRcblx0ICAgIHRoaXMubWFwLmZpcmVFdmVudCgnZ2Vvc2VhcmNoL3Nob3dsb2NhdGlvbicsIHtcblx0ICAgICAgbG9jYXRpb246IHJlc3VsdCxcblx0ICAgICAgbWFya2VyOiBtYXJrZXJcblx0ICAgIH0pO1xuXHQgIH0sXG5cdCAgYWRkTWFya2VyOiBmdW5jdGlvbiBhZGRNYXJrZXIocmVzdWx0KSB7XG5cdCAgICB2YXIgX29wdGlvbnMzID0gdGhpcy5vcHRpb25zLFxuXHQgICAgICAgIG9wdGlvbnMgPSBfb3B0aW9uczMubWFya2VyLFxuXHQgICAgICAgIHNob3dQb3B1cCA9IF9vcHRpb25zMy5zaG93UG9wdXA7XG5cdFxuXHQgICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihbcmVzdWx0LnksIHJlc3VsdC54XSwgb3B0aW9ucyk7XG5cdCAgICBtYXJrZXIuYmluZFBvcHVwKHJlc3VsdC5sYWJlbCk7XG5cdFxuXHQgICAgdGhpcy5tYXJrZXJzLmFkZExheWVyKG1hcmtlcik7XG5cdFxuXHQgICAgaWYgKHNob3dQb3B1cCkge1xuXHQgICAgICBtYXJrZXIub3BlblBvcHVwKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG1hcmtlcjtcblx0ICB9LFxuXHQgIGNlbnRlck1hcDogZnVuY3Rpb24gY2VudGVyTWFwKHJlc3VsdCkge1xuXHQgICAgdmFyIF9vcHRpb25zNCA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICByZXRhaW5ab29tTGV2ZWwgPSBfb3B0aW9uczQucmV0YWluWm9vbUxldmVsLFxuXHQgICAgICAgIGFuaW1hdGVab29tID0gX29wdGlvbnM0LmFuaW1hdGVab29tO1xuXHRcblx0ICAgIHZhciByZXN1bHRCb3VuZHMgPSBuZXcgTC5MYXRMbmdCb3VuZHMocmVzdWx0LmJvdW5kcyk7XG5cdCAgICB2YXIgYm91bmRzID0gcmVzdWx0Qm91bmRzLmlzVmFsaWQoKSA/IHJlc3VsdEJvdW5kcyA6IHRoaXMubWFya2Vycy5nZXRCb3VuZHMoKTtcblx0XG5cdCAgICBpZiAoIXJldGFpblpvb21MZXZlbCAmJiByZXN1bHRCb3VuZHMuaXNWYWxpZCgpKSB7XG5cdCAgICAgIHRoaXMubWFwLmZpdEJvdW5kcyhib3VuZHMsIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLm1hcC5zZXRWaWV3KGJvdW5kcy5nZXRDZW50ZXIoKSwgdGhpcy5nZXRab29tKCksIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBnZXRab29tOiBmdW5jdGlvbiBnZXRab29tKCkge1xuXHQgICAgdmFyIF9vcHRpb25zNSA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICByZXRhaW5ab29tTGV2ZWwgPSBfb3B0aW9uczUucmV0YWluWm9vbUxldmVsLFxuXHQgICAgICAgIHpvb21MZXZlbCA9IF9vcHRpb25zNS56b29tTGV2ZWw7XG5cdFxuXHQgICAgcmV0dXJuIHJldGFpblpvb21MZXZlbCA/IHRoaXMubWFwLmdldFpvb20oKSA6IHpvb21MZXZlbDtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBMZWFmbGV0Q29udHJvbCgpIHtcblx0ICBpZiAoIUwgfHwgIUwuQ29udHJvbCB8fCAhTC5Db250cm9sLmV4dGVuZCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdMZWFmbGV0IG11c3QgYmUgbG9hZGVkIGJlZm9yZSBpbnN0YW50aWF0aW5nIHRoZSBHZW9TZWFyY2ggY29udHJvbCcpO1xuXHQgIH1cblx0XG5cdCAgdmFyIExDb250cm9sID0gTC5Db250cm9sLmV4dGVuZChDb250cm9sKTtcblx0XG5cdCAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG9wdGlvbnMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgIG9wdGlvbnNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShMQ29udHJvbCwgW251bGxdLmNvbmNhdChvcHRpb25zKSkpKCk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHQvKlxuXHQgKiAkYXN5bmNiaW5kIGhhcyBtdWx0aXBsZSB1c2VzLCBkZXBlbmRpbmcgb24gdGhlIHBhcmFtZXRlciBsaXN0LiBJdCBpcyBpbiBGdW5jdGlvbi5wcm90b3R5cGUsIHNvICd0aGlzJyBpcyBhbHdheXMgYSBmdW5jdGlvblxuXHQgKlxuXHQgKiAxKSBJZiBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudCAodGhpcyksIGl0IGlzIHVzZWQgd2hlbiBkZWZpbmluZyBhbiBhc3luYyBmdW5jdGlvbiB0byBlbnN1cmUgd2hlblxuXHQgKiAgICAgIGl0IGlzIGludm9rZWQsIHRoZSBjb3JyZWN0ICd0aGlzJyBpcyBwcmVzZW50LCBqdXN0IGxpa2UgXCJiaW5kXCIuIEZvciBsZWdhY3kgcmVhc29ucywgJ3RoaXMnIGlzIGdpdmVuXG5cdCAqICAgICAgYSBtZW1lYmVyICd0aGVuJyB3aGljaCByZWZlcnMgdG8gaXRzZWxmLlxuXHQgKiAyKSBJZiBjYWxsZWQgd2l0aCBhIHNlY29uZCBwYXJhbWV0ZXIgKFwiY2F0Y2hlclwiKSBhbmQgY2F0Y2hlciE9PXRydWUgaXQgaXMgYmVpbmcgdXNlZCB0byBpbnZva2UgYW4gYXN5bmNcblx0ICogICAgICBmdW5jdGlvbiB3aGVyZSB0aGUgc2Vjb25kIHBhcmFtZXRlciBpcyB0aGUgZXJyb3IgY2FsbGJhY2sgKGZvciBzeW5jIGV4Y2VwdGlvbnMgYW5kIHRvIGJlIHBhc3NlZCB0b1xuXHQgKiAgICAgIG5lc3RlZCBhc3luYyBjYWxscylcblx0ICogMykgSWYgY2FsbGVkIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXI9PT10cnVlLCBpdCBpcyB0aGUgc2FtZSB1c2UgYXMgKDEpLCBidXQgdGhlIGZ1bmN0aW9uIGlzIHdyYXBwZWRcblx0ICogICAgICBpbiBhbiAnUHJvbWlzZScgYXMgd2VsbCBib3VuZCB0byAndGhpcycuXG5cdCAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IFByb21pc2UodGhpcyknLCB3aGVyZSAndGhpcycgaXMgdGhlIGZ1bmN0aW9uIGJlaW5nIGJvdW5kL3dyYXBwZWRcblx0ICogNCkgSWYgY2FsbGVkIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXI9PT0wLCBpdCBpcyB0aGUgc2FtZSB1c2UgYXMgKDEpLCBidXQgdGhlIGZ1bmN0aW9uIGlzIHdyYXBwZWRcblx0ICogICAgICBpbiBhICdMYXp5VGhlbmFibGUnLCB3aGljaCBleGVjdXRlcyBsYXppbHkgYW5kIGNhbiByZXNvbHZlIHN5bmNocm9ub3VzbHkuXG5cdCAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IExhenlUaGVuYWJsZSh0aGlzKScgKGlmIHN1Y2ggYSB0eXBlIHdlcmUgZXhwb3NlZCksIHdoZXJlICd0aGlzJyBpc1xuXHQgKiAgICAgIHRoZSBmdW5jdGlvbiBiZWluZyBib3VuZC93cmFwcGVkXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc0luY2x1ZGVzKGluY2x1ZGVzLCBpbnB1dCkge1xuXHQgICAgdmFyIHNyYyA9IGlucHV0LnRvU3RyaW5nKCk7XG5cdCAgICB2YXIgdCA9IFwicmV0dXJuIFwiICsgc3JjO1xuXHQgICAgdmFyIGFyZ3MgPSBzcmMubWF0Y2goLy4qXFwoKFteKV0qKVxcKS8pWzFdO1xuXHQgICAgdmFyIHJlID0gL1snXCJdISEhKFteJ1wiXSopWydcIl0vZztcblx0ICAgIHZhciBtID0gW107XG5cdCAgICB3aGlsZSAoMSkge1xuXHQgICAgICAgIHZhciBteCA9IHJlLmV4ZWModCk7XG5cdCAgICAgICAgaWYgKG14KSBtLnB1c2gobXgpO2Vsc2UgYnJlYWs7XG5cdCAgICB9XG5cdCAgICBtLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgdCA9IHQuc2xpY2UoMCwgZS5pbmRleCkgKyBpbmNsdWRlc1tlWzFdXSArIHQuc3Vic3RyKGUuaW5kZXggKyBlWzBdLmxlbmd0aCk7XG5cdCAgICB9KTtcblx0ICAgIHQgPSB0LnJlcGxhY2UoL1xcL1xcKlteKl0qXFwqXFwvL2csICcgJykucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuXHQgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihhcmdzLCB0KSgpO1xuXHR9XG5cdFxuXHR2YXIgJGFzeW5jYmluZCA9IHByb2Nlc3NJbmNsdWRlcyh7XG5cdCAgICB6b3VzYW46IF9fd2VicGFja19yZXF1aXJlX18oNykudG9TdHJpbmcoKSxcblx0ICAgIHRoZW5hYmxlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKS50b1N0cmluZygpXG5cdH0sIGZ1bmN0aW9uICRhc3luY2JpbmQoc2VsZiwgY2F0Y2hlcikge1xuXHQgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHQgICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jYmluZCkge1xuXHQgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsIFwiJGFzeW5jYmluZFwiLCB7IHZhbHVlOiAkYXN5bmNiaW5kLCBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoISRhc3luY2JpbmQudHJhbXBvbGluZSkge1xuXHQgICAgICAgICRhc3luY2JpbmQudHJhbXBvbGluZSA9IGZ1bmN0aW9uIHRyYW1wb2xpbmUodCwgeCwgcywgZSwgdSkge1xuXHQgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gYihxKSB7XG5cdCAgICAgICAgICAgICAgICB3aGlsZSAocSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChxLnRoZW4pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHEudGhlbihiLCBlKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUgPyB1bmRlZmluZWQgOiBxO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAocS5wb3ApIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxLmxlbmd0aCkgcmV0dXJuIHEucG9wKCkgPyB4LmNhbGwodCkgOiBxO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHM7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBxID0gcS5jYWxsKHQpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUocik7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdCAgICBpZiAoISRhc3luY2JpbmQuTGF6eVRoZW5hYmxlKSB7XG5cdCAgICAgICAgJGFzeW5jYmluZC5MYXp5VGhlbmFibGUgPSAnISEhdGhlbmFibGUnKCk7XG5cdCAgICAgICAgJGFzeW5jYmluZC5FYWdlclRoZW5hYmxlID0gJGFzeW5jYmluZC5UaGVuYWJsZSA9ICgkYXN5bmNiaW5kLkVhZ2VyVGhlbmFibGVGYWN0b3J5ID0gJyEhIXpvdXNhbicpKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHJlc29sdmVyID0gdGhpcztcblx0ICAgIHN3aXRjaCAoY2F0Y2hlcikge1xuXHQgICAgICAgIGNhc2UgdHJ1ZTpcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyAkYXN5bmNiaW5kLlRoZW5hYmxlKGJvdW5kVGhlbik7XG5cdCAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICByZXR1cm4gbmV3ICRhc3luY2JpbmQuTGF6eVRoZW5hYmxlKGJvdW5kVGhlbik7XG5cdCAgICAgICAgY2FzZSB1bmRlZmluZWQ6XG5cdCAgICAgICAgICAgIC8qIEZvciBydW50aW1lIGNvbXBhdGliaWxpdHkgd2l0aCBOb2RlbnQgdjIueCwgcHJvdmlkZSBhIHRoZW5hYmxlICovXG5cdCAgICAgICAgICAgIGJvdW5kVGhlbi50aGVuID0gYm91bmRUaGVuO1xuXHQgICAgICAgICAgICByZXR1cm4gYm91bmRUaGVuO1xuXHQgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlci5hcHBseShzZWxmLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2F0Y2hlcihleCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH07XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBib3VuZFRoZW4oKSB7XG5cdCAgICAgICAgcmV0dXJuIHJlc29sdmVyLmFwcGx5KHNlbGYsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gJGFzeW5jc3Bhd24ocHJvbWlzZVByb3ZpZGVyLCBzZWxmKSB7XG5cdCAgICBpZiAoIUZ1bmN0aW9uLnByb3RvdHlwZS4kYXN5bmNzcGF3bikge1xuXHQgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsIFwiJGFzeW5jc3Bhd25cIiwgeyB2YWx1ZTogJGFzeW5jc3Bhd24sIGVudW1lcmFibGU6IGZhbHNlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pO1xuXHQgICAgfVxuXHQgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEZ1bmN0aW9uKSkgcmV0dXJuO1xuXHRcblx0ICAgIHZhciBnZW5GID0gdGhpcztcblx0ICAgIHJldHVybiBuZXcgcHJvbWlzZVByb3ZpZGVyKGZ1bmN0aW9uIGVub3VnaChyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICB2YXIgZ2VuID0gZ2VuRi5jYWxsKHNlbGYsIHJlc29sdmUsIHJlamVjdCk7XG5cdCAgICAgICAgZnVuY3Rpb24gc3RlcChmbiwgYXJnKSB7XG5cdCAgICAgICAgICAgIHZhciBuZXh0O1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgbmV4dCA9IGZuLmNhbGwoZ2VuLCBhcmcpO1xuXHQgICAgICAgICAgICAgICAgaWYgKG5leHQuZG9uZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlICE9PSByZXNvbHZlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlICYmIG5leHQudmFsdWUgPT09IG5leHQudmFsdWUudGhlbikgcmV0dXJuIG5leHQudmFsdWUocmVzb2x2ZSwgcmVqZWN0KTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSAmJiByZXNvbHZlKG5leHQudmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlLnRoZW4pIHtcblx0ICAgICAgICAgICAgICAgICAgICBuZXh0LnZhbHVlLnRoZW4oZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4ubmV4dCwgdik7XG5cdCAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4udGhyb3csIGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi5uZXh0LCBuZXh0LnZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgICAgcmVqZWN0ICYmIHJlamVjdChlKTtcblx0ICAgICAgICAgICAgICAgIHJlamVjdCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgc3RlcChnZW4ubmV4dCk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0Ly8gSW5pdGlhbGl6ZSBhc3luYyBiaW5kaW5nc1xuXHQkYXN5bmNiaW5kKCk7XG5cdCRhc3luY3NwYXduKCk7XG5cdFxuXHQvLyBFeHBvcnQgYXN5bmMgYmluZGluZ3Ncblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgICAkYXN5bmNiaW5kOiAkYXN5bmNiaW5kLFxuXHQgICAgJGFzeW5jc3Bhd246ICRhc3luY3NwYXduXG5cdH07XG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcywgc2V0SW1tZWRpYXRlKSB7LyogVGhpcyBjb2RlIGlzIGJhc2VkIG9uOlxuXHR6b3VzYW4gLSBBIExpZ2h0bmluZyBGYXN0LCBZZXQgVmVyeSBTbWFsbCBQcm9taXNlIEErIENvbXBsaWFudCBJbXBsZW1lbnRhdGlvblxuXHRodHRwczovL2dpdGh1Yi5jb20vYmx1ZWphdmEvem91c2FuXG5cdEF1dGhvcjogR2xlbm4gQ3Jvd25vdmVyIDxnbGVubkBibHVlamF2YS5jb20+IChodHRwOi8vd3d3LmJsdWVqYXZhLmNvbSlcblx0VmVyc2lvbiAyLjMuM1xuXHRMaWNlbnNlOiBNSVQgKi9cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0aWNrKSB7XG5cdCAgICB0aWNrID0gdGljayB8fCAodHlwZW9mIHByb2Nlc3MgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihwcm9jZXNzKSkgPT09IFwib2JqZWN0XCIgJiYgcHJvY2Vzcy5uZXh0VGljayB8fCB0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSBcImZ1bmN0aW9uXCIgJiYgc2V0SW1tZWRpYXRlIHx8IGZ1bmN0aW9uIChmKSB7XG5cdCAgICAgICAgc2V0VGltZW91dChmLCAwKTtcblx0ICAgIH07XG5cdCAgICB2YXIgc29vbiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZnEgPSBbXSxcblx0ICAgICAgICAgICAgZnFTdGFydCA9IDAsXG5cdCAgICAgICAgICAgIGJ1ZmZlclNpemUgPSAxMDI0O1xuXHQgICAgICAgIGZ1bmN0aW9uIGNhbGxRdWV1ZSgpIHtcblx0ICAgICAgICAgICAgd2hpbGUgKGZxLmxlbmd0aCAtIGZxU3RhcnQpIHtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZnFbZnFTdGFydF0oKTtcblx0ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7LyogY29uc29sZS5lcnJvcihleCkgKi99XG5cdCAgICAgICAgICAgICAgICBmcVtmcVN0YXJ0KytdID0gdW5kZWZpbmVkO1xuXHQgICAgICAgICAgICAgICAgaWYgKGZxU3RhcnQgPT09IGJ1ZmZlclNpemUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBmcS5zcGxpY2UoMCwgYnVmZmVyU2l6ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgZnFTdGFydCA9IDA7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZm4pIHtcblx0ICAgICAgICAgICAgZnEucHVzaChmbik7XG5cdCAgICAgICAgICAgIGlmIChmcS5sZW5ndGggLSBmcVN0YXJ0ID09PSAxKSB0aWNrKGNhbGxRdWV1ZSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH0oKTtcblx0XG5cdCAgICBmdW5jdGlvbiBab3VzYW4oZnVuYykge1xuXHQgICAgICAgIGlmIChmdW5jKSB7XG5cdCAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG5cdCAgICAgICAgICAgIGZ1bmMoZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgICAgICAgICAgbWUucmVzb2x2ZShhcmcpO1xuXHQgICAgICAgICAgICB9LCBmdW5jdGlvbiAoYXJnKSB7XG5cdCAgICAgICAgICAgICAgICBtZS5yZWplY3QoYXJnKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIFpvdXNhbi5wcm90b3R5cGUgPSB7XG5cdCAgICAgICAgcmVzb2x2ZTogZnVuY3Rpb24gcmVzb2x2ZSh2YWx1ZSkge1xuXHQgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gdW5kZWZpbmVkKSByZXR1cm47XG5cdCAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcykgcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJBdHRlbXB0IHRvIHJlc29sdmUgcHJvbWlzZSB3aXRoIHNlbGZcIikpO1xuXHQgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXHQgICAgICAgICAgICBpZiAodmFsdWUgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiIHx8ICh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZih2YWx1ZSkpID09PSBcIm9iamVjdFwiKSkge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3QgPSAwO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciB0aGVuID0gdmFsdWUudGhlbjtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoZW4gPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bmN0aW9uIChyYSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVzb2x2ZShyYSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChycikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVqZWN0KHJyKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCkgdGhpcy5yZWplY3QoZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GVUxGSUxMRUQ7XG5cdCAgICAgICAgICAgIHRoaXMudiA9IHZhbHVlO1xuXHQgICAgICAgICAgICBpZiAobWUuYykgc29vbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgbCA9IG1lLmMubGVuZ3RoOyBuIDwgbDsgbisrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgU1RBVEVfRlVMRklMTEVEKG1lLmNbbl0sIHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXHQgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUkVKRUNURUQ7XG5cdCAgICAgICAgICAgIHRoaXMudiA9IHJlYXNvbjtcblx0ICAgICAgICAgICAgdmFyIGNsaWVudHMgPSB0aGlzLmM7XG5cdCAgICAgICAgICAgIGlmIChjbGllbnRzKSBzb29uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCBsID0gY2xpZW50cy5sZW5ndGg7IG4gPCBsOyBuKyspIHtcblx0ICAgICAgICAgICAgICAgICAgICBTVEFURV9SRUpFQ1RFRChjbGllbnRzW25dLCByZWFzb24pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHRoZW46IGZ1bmN0aW9uIHRoZW4ob25GLCBvblIpIHtcblx0ICAgICAgICAgICAgdmFyIHAgPSBuZXcgWm91c2FuKCk7XG5cdCAgICAgICAgICAgIHZhciBjbGllbnQgPSB7XG5cdCAgICAgICAgICAgICAgICB5OiBvbkYsXG5cdCAgICAgICAgICAgICAgICBuOiBvblIsXG5cdCAgICAgICAgICAgICAgICBwOiBwXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgICAgIGlmICh0aGlzLmMpIHRoaXMuYy5wdXNoKGNsaWVudCk7ZWxzZSB0aGlzLmMgPSBbY2xpZW50XTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcy5zdGF0ZSxcblx0ICAgICAgICAgICAgICAgICAgICBhID0gdGhpcy52O1xuXHQgICAgICAgICAgICAgICAgc29vbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcyhjbGllbnQsIGEpO1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIHA7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBmdW5jdGlvbiBTVEFURV9GVUxGSUxMRUQoYywgYXJnKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjLnkgPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgdmFyIHlyZXQgPSBjLnkuY2FsbCh1bmRlZmluZWQsIGFyZyk7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVzb2x2ZSh5cmV0KTtcblx0ICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVqZWN0KGVycik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgYy5wLnJlc29sdmUoYXJnKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBTVEFURV9SRUpFQ1RFRChjLCByZWFzb24pIHtcblx0ICAgICAgICBpZiAodHlwZW9mIGMubiA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgeXJldCA9IGMubi5jYWxsKHVuZGVmaW5lZCwgcmVhc29uKTtcblx0ICAgICAgICAgICAgICAgIGMucC5yZXNvbHZlKHlyZXQpO1xuXHQgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgIGMucC5yZWplY3QoZXJyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBjLnAucmVqZWN0KHJlYXNvbik7XG5cdCAgICB9XG5cdFxuXHQgICAgWm91c2FuLnJlc29sdmUgPSBmdW5jdGlvbiAodmFsKSB7XG5cdCAgICAgICAgaWYgKHZhbCAmJiB2YWwgaW5zdGFuY2VvZiBab3VzYW4pIHJldHVybiB2YWw7XG5cdCAgICAgICAgdmFyIHogPSBuZXcgWm91c2FuKCk7XG5cdCAgICAgICAgei5yZXNvbHZlKHZhbCk7XG5cdCAgICAgICAgcmV0dXJuIHo7XG5cdCAgICB9O1xuXHQgICAgWm91c2FuLnJlamVjdCA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICBpZiAoZXJyICYmIGVyciBpbnN0YW5jZW9mIFpvdXNhbikgcmV0dXJuIGVycjtcblx0ICAgICAgICB2YXIgeiA9IG5ldyBab3VzYW4oKTtcblx0ICAgICAgICB6LnJlamVjdChlcnIpO1xuXHQgICAgICAgIHJldHVybiB6O1xuXHQgICAgfTtcblx0XG5cdCAgICBab3VzYW4udmVyc2lvbiA9IFwiMi4zLjMtbm9kZW50XCI7XG5cdCAgICByZXR1cm4gWm91c2FuO1xuXHR9O1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg4KSwgX193ZWJwYWNrX3JlcXVpcmVfXyg5KS5zZXRJbW1lZGlhdGUpKVxuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cdHZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblx0XG5cdC8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuXHQvLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcblx0Ly8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuXHQvLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXHRcblx0dmFyIGNhY2hlZFNldFRpbWVvdXQ7XG5cdHZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cdFxuXHRmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0ZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCgpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0KGZ1bmN0aW9uICgpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICB9XG5cdH0pKCk7XG5cdGZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG5cdCAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuXHQgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuXHQgICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuXHQgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0ZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuXHQgICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG5cdCAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG5cdCAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuXHQgICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG5cdCAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuXHQgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG5cdCAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgZHJhaW5pbmcgPSBmYWxzZTtcblx0dmFyIGN1cnJlbnRRdWV1ZTtcblx0dmFyIHF1ZXVlSW5kZXggPSAtMTtcblx0XG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG5cdCAgICBpZiAoZHJhaW5pbmcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcblx0ICAgIGRyYWluaW5nID0gdHJ1ZTtcblx0XG5cdCAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGxlbikge1xuXHQgICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuXHQgICAgICAgIHF1ZXVlID0gW107XG5cdCAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuXHQgICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIH1cblx0ICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHR9XG5cdFxuXHRwcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcblx0ICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG5cdCAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcblx0ICAgIH1cblx0fTtcblx0XG5cdC8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcblx0ZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG5cdCAgICB0aGlzLmZ1biA9IGZ1bjtcblx0ICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcblx0fVxuXHRJdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcblx0fTtcblx0cHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcblx0cHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcblx0cHJvY2Vzcy5lbnYgPSB7fTtcblx0cHJvY2Vzcy5hcmd2ID0gW107XG5cdHByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xuXHRwcm9jZXNzLnZlcnNpb25zID0ge307XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge31cblx0XG5cdHByb2Nlc3Mub24gPSBub29wO1xuXHRwcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5vbmNlID0gbm9vcDtcblx0cHJvY2Vzcy5vZmYgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xuXHRwcm9jZXNzLmVtaXQgPSBub29wO1xuXHRcblx0cHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0XG5cdHByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuICcvJztcblx0fTtcblx0cHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdHByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gMDtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0dmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXHRcblx0Ly8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3Ncblx0XG5cdGV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG5cdH07XG5cdGV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG5cdH07XG5cdGV4cG9ydHMuY2xlYXJUaW1lb3V0ID0gZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24gKHRpbWVvdXQpIHtcblx0ICBpZiAodGltZW91dCkge1xuXHQgICAgdGltZW91dC5jbG9zZSgpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcblx0ICB0aGlzLl9pZCA9IGlkO1xuXHQgIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xuXHR9XG5cdFRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24gKCkge307XG5cdFRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csIHRoaXMuX2lkKTtcblx0fTtcblx0XG5cdC8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuXHRleHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uIChpdGVtLCBtc2Vjcykge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0ICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHQgIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG5cdH07XG5cdFxuXHRleHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdFxuXHQgIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuXHQgIGlmIChtc2VjcyA+PSAwKSB7XG5cdCAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG5cdCAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpIGl0ZW0uX29uVGltZW91dCgpO1xuXHQgICAgfSwgbXNlY3MpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3Rcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdGV4cG9ydHMuc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuXHRleHBvcnRzLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG5cbi8qKiovIH0sXG4vKiAxMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCwgcHJvY2Vzcykge1widXNlIHN0cmljdFwiO1xuXHRcblx0KGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuXHQgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHQgICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm9cblx0ICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG5cdCAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG5cdCAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuXHQgICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXHRcblx0ICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuXHQgICAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuXHQgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBDb3B5IGZ1bmN0aW9uIGFyZ3VtZW50c1xuXHQgICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuXHQgICAgICAgIHZhciB0YXNrID0geyBjYWxsYmFjazogY2FsbGJhY2ssIGFyZ3M6IGFyZ3MgfTtcblx0ICAgICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcblx0ICAgICAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gcnVuKHRhc2spIHtcblx0ICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuXHQgICAgICAgIHZhciBhcmdzID0gdGFzay5hcmdzO1xuXHQgICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBjYXNlIDE6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBjYXNlIDI6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBjYXNlIDM6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBkZWZhdWx0OlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG5cdCAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogXCJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC5cIlxuXHQgICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uXG5cdCAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuXHQgICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuXHQgICAgICAgICAgICAvLyBcInRvbyBtdWNoIHJlY3Vyc2lvblwiIGVycm9yLlxuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcblx0ICAgICAgICAgICAgaWYgKHRhc2spIHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcblx0ICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICAgICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcblx0ICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuXHQgICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcblx0ICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cblx0ICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuXHQgICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG5cdCAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuXHQgICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuXHQgICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuXHQgICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG5cdCAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG5cdCAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXHRcblx0ICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuXHQgICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbiBvbkdsb2JhbE1lc3NhZ2UoZXZlbnQpIHtcblx0ICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuXHQgICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0ICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG5cdCAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG5cdCAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuXHQgICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuXHQgICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG5cdCAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcblx0ICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuXHQgICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuXHQgICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cdFxuXHQgICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuXHQgICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuXHQgICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcblx0ICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG5cdCAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuXHQgICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuXHQgICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG5cdCAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcblx0ICAgICAgICAvLyBGb3IgSUUgNuKAkzhcblx0ICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuXHQgICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH1cblx0XG5cdCAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG5cdCAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xuXHR9KSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB1bmRlZmluZWQgOiBnbG9iYWwgOiBzZWxmKTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSksIF9fd2VicGFja19yZXF1aXJlX18oOCkpKVxuXG4vKioqLyB9LFxuLyogMTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBpc1RoZW5hYmxlKG9iaikge1xuXHQgICAgICAgIHJldHVybiBvYmogJiYgb2JqIGluc3RhbmNlb2YgT2JqZWN0ICYmIHR5cGVvZiBvYmoudGhlbiA9PT0gXCJmdW5jdGlvblwiO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHJlc29sdXRpb24ocCwgciwgaG93KSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLyogMi4yLjcuMSAqL1xuXHQgICAgICAgICAgICB2YXIgeCA9IGhvdyA/IGhvdyhyKSA6IHI7XG5cdFxuXHQgICAgICAgICAgICBpZiAocCA9PT0geCkgLyogMi4zLjEgKi9cblx0ICAgICAgICAgICAgICAgIHJldHVybiBwLnJlamVjdChuZXcgVHlwZUVycm9yKFwiUHJvbWlzZSByZXNvbHV0aW9uIGxvb3BcIikpO1xuXHRcblx0ICAgICAgICAgICAgaWYgKGlzVGhlbmFibGUoeCkpIHtcblx0ICAgICAgICAgICAgICAgIC8qIDIuMy4zICovXG5cdCAgICAgICAgICAgICAgICB4LnRoZW4oZnVuY3Rpb24gKHkpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uKHAsIHkpO1xuXHQgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBwLnJlamVjdChlKTtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgcC5yZXNvbHZlKHgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBjYXRjaCAoZXgpIHtcblx0ICAgICAgICAgICAgLyogMi4yLjcuMiAqL1xuXHQgICAgICAgICAgICBwLnJlamVjdChleCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIENoYWluZWQoKSB7fTtcblx0ICAgIENoYWluZWQucHJvdG90eXBlID0ge1xuXHQgICAgICAgIHJlc29sdmU6IF91bmNoYWluZWQsXG5cdCAgICAgICAgcmVqZWN0OiBfdW5jaGFpbmVkLFxuXHQgICAgICAgIHRoZW46IHRoZW5DaGFpblxuXHQgICAgfTtcblx0ICAgIGZ1bmN0aW9uIF91bmNoYWluZWQodikge31cblx0ICAgIGZ1bmN0aW9uIHRoZW5DaGFpbihyZXMsIHJlaikge1xuXHQgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlcztcblx0ICAgICAgICB0aGlzLnJlamVjdCA9IHJlajtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiB0aGVuKHJlcywgcmVqKSB7XG5cdCAgICAgICAgdmFyIGNoYWluID0gbmV3IENoYWluZWQoKTtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB0aGlzLl9yZXNvbHZlcihmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBpc1RoZW5hYmxlKHZhbHVlKSA/IHZhbHVlLnRoZW4ocmVzLCByZWopIDogcmVzb2x1dGlvbihjaGFpbiwgdmFsdWUsIHJlcyk7XG5cdCAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChleCkge1xuXHQgICAgICAgICAgICAgICAgcmVzb2x1dGlvbihjaGFpbiwgZXgsIHJlaik7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cdCAgICAgICAgICAgIHJlc29sdXRpb24oY2hhaW4sIGV4LCByZWopO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gY2hhaW47XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gVGhlbmFibGUocmVzb2x2ZXIpIHtcblx0ICAgICAgICB0aGlzLl9yZXNvbHZlciA9IHJlc29sdmVyO1xuXHQgICAgICAgIHRoaXMudGhlbiA9IHRoZW47XG5cdCAgICB9O1xuXHRcblx0ICAgIFRoZW5hYmxlLnJlc29sdmUgPSBmdW5jdGlvbiAodikge1xuXHQgICAgICAgIHJldHVybiBUaGVuYWJsZS5pc1RoZW5hYmxlKHYpID8gdiA6IHsgdGhlbjogZnVuY3Rpb24gdGhlbihyZXNvbHZlKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh2KTtcblx0ICAgICAgICAgICAgfSB9O1xuXHQgICAgfTtcblx0XG5cdCAgICBUaGVuYWJsZS5pc1RoZW5hYmxlID0gaXNUaGVuYWJsZTtcblx0XG5cdCAgICByZXR1cm4gVGhlbmFibGU7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdC8qKlxuXHQgKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuXHQgKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cblx0ICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuXHQgKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICovXG5cdFxuXHQvKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xuXHR2YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXHRcblx0LyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG5cdHZhciBOQU4gPSAwIC8gMDtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXHRcblx0LyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi9cblx0dmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cdFxuXHQvKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xuXHR2YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cdFxuXHQvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xuXHR2YXIgZnJlZUdsb2JhbCA9ICh0eXBlb2YgZ2xvYmFsID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihnbG9iYWwpKSA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblx0XG5cdC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG5cdHZhciBmcmVlU2VsZiA9ICh0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2Yoc2VsZikpID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXHRcblx0LyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG5cdHZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcblx0ICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG5cdCAqIG9mIHZhbHVlcy5cblx0ICovXG5cdHZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXHRcblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuXHR2YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG5cdCAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2Vcblx0ICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDIuNC4wXG5cdCAqIEBjYXRlZ29yeSBEYXRlXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuXHQgKiAgIGNvbnNvbGUubG9nKF8ubm93KCkgLSBzdGFtcCk7XG5cdCAqIH0sIF8ubm93KCkpO1xuXHQgKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuXHQgKi9cblx0dmFyIG5vdyA9IGZ1bmN0aW9uIG5vdygpIHtcblx0ICByZXR1cm4gcm9vdC5EYXRlLm5vdygpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuXHQgKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcblx0ICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuXHQgKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cblx0ICogUHJvdmlkZSBgb3B0aW9uc2AgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb24gdGhlXG5cdCAqIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcblx0ICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudFxuXHQgKiBjYWxscyB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYFxuXHQgKiBpbnZvY2F0aW9uLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzXG5cdCAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG5cdCAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cblx0ICpcblx0ICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG5cdCAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cblx0ICpcblx0ICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG5cdCAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBGdW5jdGlvblxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cblx0ICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuXHQgKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cblx0ICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG5cdCAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG5cdCAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG5cdCAqXG5cdCAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuXHQgKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG5cdCAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuXHQgKiAgICd0cmFpbGluZyc6IGZhbHNlXG5cdCAqIH0pKTtcblx0ICpcblx0ICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cblx0ICogdmFyIGRlYm91bmNlZCA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwgeyAnbWF4V2FpdCc6IDEwMDAgfSk7XG5cdCAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcblx0ICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuXHQgKlxuXHQgKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuXHQgKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcblx0ICovXG5cdGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcblx0ICB2YXIgbGFzdEFyZ3MsXG5cdCAgICAgIGxhc3RUaGlzLFxuXHQgICAgICBtYXhXYWl0LFxuXHQgICAgICByZXN1bHQsXG5cdCAgICAgIHRpbWVySWQsXG5cdCAgICAgIGxhc3RDYWxsVGltZSxcblx0ICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuXHQgICAgICBsZWFkaW5nID0gZmFsc2UsXG5cdCAgICAgIG1heGluZyA9IGZhbHNlLFxuXHQgICAgICB0cmFpbGluZyA9IHRydWU7XG5cdFxuXHQgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG5cdCAgfVxuXHQgIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuXHQgIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuXHQgICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuXHQgICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG5cdCAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuXHQgICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuXHQgICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcblx0ICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cdFxuXHQgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcblx0ICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcblx0ICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuXHQgICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cblx0ICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcblx0ICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG5cdCAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG5cdCAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcblx0ICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG5cdCAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSxcblx0ICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cdFxuXHQgICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQsIG1heFdhaXQgLSB0aW1lU2luY2VMYXN0SW52b2tlKSA6IHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG5cdCAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuXHQgICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cdFxuXHQgICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcblx0ICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG5cdCAgICAvLyBpdCBhcyB0aGUgdHJhaWxpbmcgZWRnZSwgb3Igd2UndmUgaGl0IHRoZSBgbWF4V2FpdGAgbGltaXQuXG5cdCAgICByZXR1cm4gbGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgdGltZVNpbmNlTGFzdENhbGwgPj0gd2FpdCB8fCB0aW1lU2luY2VMYXN0Q2FsbCA8IDAgfHwgbWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHtcblx0ICAgIHZhciB0aW1lID0gbm93KCk7XG5cdCAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG5cdCAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7XG5cdCAgICB9XG5cdCAgICAvLyBSZXN0YXJ0IHRoZSB0aW1lci5cblx0ICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuXHQgICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblx0XG5cdCAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG5cdCAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cblx0ICAgIGlmICh0cmFpbGluZyAmJiBsYXN0QXJncykge1xuXHQgICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcblx0ICAgIH1cblx0ICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gY2FuY2VsKCkge1xuXHQgICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7XG5cdCAgICB9XG5cdCAgICBsYXN0SW52b2tlVGltZSA9IDA7XG5cdCAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGZsdXNoKCkge1xuXHQgICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG5cdCAgICB2YXIgdGltZSA9IG5vdygpLFxuXHQgICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG5cdFxuXHQgICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG5cdCAgICBsYXN0VGhpcyA9IHRoaXM7XG5cdCAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXHRcblx0ICAgIGlmIChpc0ludm9raW5nKSB7XG5cdCAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAobWF4aW5nKSB7XG5cdCAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cblx0ICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHQgIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG5cdCAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG5cdCAgcmV0dXJuIGRlYm91bmNlZDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuXHQgKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG5cdCAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KHt9KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChfLm5vb3ApO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QobnVsbCk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuXHQgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih2YWx1ZSk7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuXHQgKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuXHQgIHJldHVybiAhIXZhbHVlICYmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHZhbHVlKSkgPT0gJ29iamVjdCc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzU3ltYm9sKCdhYmMnKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG5cdCAgcmV0dXJuICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHZhbHVlKSkgPT0gJ3N5bWJvbCcgfHwgaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoMy4yKTtcblx0ICogLy8gPT4gMy4yXG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG5cdCAqIC8vID0+IDVlLTMyNFxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcblx0ICogLy8gPT4gSW5maW5pdHlcblx0ICpcblx0ICogXy50b051bWJlcignMy4yJyk7XG5cdCAqIC8vID0+IDMuMlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcblx0ICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHQgIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBOQU47XG5cdCAgfVxuXHQgIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcblx0ICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcblx0ICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gb3RoZXIgKyAnJyA6IG90aGVyO1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcblx0ICB9XG5cdCAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpO1xuXHQgIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG5cdCAgcmV0dXJuIGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOCkgOiByZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGRlYm91bmNlO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiAxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9kb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0dmFyIF9jb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBTZWFyY2hFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIFNlYXJjaEVsZW1lbnQoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICBfcmVmJGhhbmRsZVN1Ym1pdCA9IF9yZWYuaGFuZGxlU3VibWl0LFxuXHQgICAgICAgIGhhbmRsZVN1Ym1pdCA9IF9yZWYkaGFuZGxlU3VibWl0ID09PSB1bmRlZmluZWQgPyBmdW5jdGlvbiAoKSB7fSA6IF9yZWYkaGFuZGxlU3VibWl0LFxuXHQgICAgICAgIF9yZWYkc2VhcmNoTGFiZWwgPSBfcmVmLnNlYXJjaExhYmVsLFxuXHQgICAgICAgIHNlYXJjaExhYmVsID0gX3JlZiRzZWFyY2hMYWJlbCA9PT0gdW5kZWZpbmVkID8gJ3NlYXJjaCcgOiBfcmVmJHNlYXJjaExhYmVsLFxuXHQgICAgICAgIF9yZWYkY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcblx0ICAgICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcztcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2VhcmNoRWxlbWVudCk7XG5cdFxuXHQgICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIFsnZ2Vvc2VhcmNoJywgY2xhc3NOYW1lcy5jb250YWluZXJdLmpvaW4oJyAnKSk7XG5cdCAgICB2YXIgZm9ybSA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2Zvcm0nLCBbJycsIGNsYXNzTmFtZXMuZm9ybV0uam9pbignICcpLCBjb250YWluZXIpO1xuXHQgICAgdmFyIGlucHV0ID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnaW5wdXQnLCBbJ2dsYXNzJywgY2xhc3NOYW1lcy5pbnB1dF0uam9pbignICcpLCBmb3JtKTtcblx0XG5cdCAgICBpbnB1dC50eXBlID0gJ3RleHQnO1xuXHQgICAgaW5wdXQucGxhY2Vob2xkZXIgPSBzZWFyY2hMYWJlbDtcblx0XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uSW5wdXQoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uS2V5VXAoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uS2V5UHJlc3MoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uRm9jdXMoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgX3RoaXMub25CbHVyKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHRcblx0ICAgIHRoaXMuZWxlbWVudHMgPSB7IGNvbnRhaW5lcjogY29udGFpbmVyLCBmb3JtOiBmb3JtLCBpbnB1dDogaW5wdXQgfTtcblx0ICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFNlYXJjaEVsZW1lbnQsIFt7XG5cdCAgICBrZXk6ICdvbkZvY3VzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbkZvY3VzKCkge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkodGhpcy5lbGVtZW50cy5mb3JtLCAnYWN0aXZlJyk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb25CbHVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbkJsdXIoKSB7XG5cdCAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKSh0aGlzLmVsZW1lbnRzLmZvcm0sICdhY3RpdmUnKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvblN1Ym1pdCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWJtaXQoZXZlbnQpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgICB2YXIgX2VsZW1lbnRzLCBpbnB1dCwgY29udGFpbmVyO1xuXHRcblx0ICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcblx0ICAgICAgICBfZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzLCBpbnB1dCA9IF9lbGVtZW50cy5pbnB1dCwgY29udGFpbmVyID0gX2VsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2Vycm9yJyk7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlU3VibWl0KHsgcXVlcnk6IGlucHV0LnZhbHVlIH0pLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG5cdCAgICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuXHQgICAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcblx0ICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvbklucHV0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbklucHV0KCkge1xuXHQgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICBpZiAodGhpcy5oYXNFcnJvcikge1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuXHQgICAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uS2V5VXAnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5VXAoZXZlbnQpIHtcblx0ICAgICAgdmFyIF9lbGVtZW50czIgPSB0aGlzLmVsZW1lbnRzLFxuXHQgICAgICAgICAgY29udGFpbmVyID0gX2VsZW1lbnRzMi5jb250YWluZXIsXG5cdCAgICAgICAgICBpbnB1dCA9IF9lbGVtZW50czIuaW5wdXQ7XG5cdFxuXHQgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gX2NvbnN0YW50cy5FU0NBUEVfS0VZKSB7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdFxuXHQgICAgICAgIGlucHV0LnZhbHVlID0gJyc7XG5cdFxuXHQgICAgICAgIGRvY3VtZW50LmJvZHkuZm9jdXMoKTtcblx0ICAgICAgICBkb2N1bWVudC5ib2R5LmJsdXIoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uS2V5UHJlc3MnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5UHJlc3MoZXZlbnQpIHtcblx0ICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IF9jb25zdGFudHMuRU5URVJfS0VZKSB7XG5cdCAgICAgICAgdGhpcy5vblN1Ym1pdChldmVudCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZXRRdWVyeScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UXVlcnkocXVlcnkpIHtcblx0ICAgICAgdmFyIGlucHV0ID0gdGhpcy5lbGVtZW50cy5pbnB1dDtcblx0XG5cdCAgICAgIGlucHV0LnZhbHVlID0gcXVlcnk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gU2VhcmNoRWxlbWVudDtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gU2VhcmNoRWxlbWVudDtcblxuLyoqKi8gfSxcbi8qIDE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0LyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xuXHR2YXIgY3JlYXRlRWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoZWxlbWVudCkge1xuXHQgIHZhciBjbGFzc05hbWVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJztcblx0ICB2YXIgcGFyZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsO1xuXHRcblx0ICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1lbnQpO1xuXHQgIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZXM7XG5cdFxuXHQgIGlmIChwYXJlbnQpIHtcblx0ICAgIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZWw7XG5cdH07XG5cdFxuXHR2YXIgY3JlYXRlU2NyaXB0RWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlU2NyaXB0RWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZVNjcmlwdEVsZW1lbnQodXJsLCBjYikge1xuXHQgIHZhciBzY3JpcHQgPSBjcmVhdGVFbGVtZW50KCdzY3JpcHQnLCBudWxsLCBkb2N1bWVudC5ib2R5KTtcblx0ICBzY3JpcHQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvamF2YXNjcmlwdCcpO1xuXHRcblx0ICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcblx0ICAgIHdpbmRvd1tjYl0gPSBmdW5jdGlvbiAoanNvbikge1xuXHQgICAgICBzY3JpcHQucmVtb3ZlKCk7XG5cdCAgICAgIGRlbGV0ZSB3aW5kb3dbY2JdO1xuXHQgICAgICByZXNvbHZlKGpzb24pO1xuXHQgICAgfTtcblx0XG5cdCAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdzcmMnLCB1cmwpO1xuXHQgIH0pO1xuXHR9O1xuXHRcblx0dmFyIGFkZENsYXNzTmFtZSA9IGV4cG9ydHMuYWRkQ2xhc3NOYW1lID0gZnVuY3Rpb24gYWRkQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuXHQgIGlmIChlbGVtZW50ICYmICFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG5cdCAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcmVtb3ZlQ2xhc3NOYW1lID0gZXhwb3J0cy5yZW1vdmVDbGFzc05hbWUgPSBmdW5jdGlvbiByZW1vdmVDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG5cdCAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuXHQgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9LFxuLyogMTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdHZhciBFTlRFUl9LRVkgPSBleHBvcnRzLkVOVEVSX0tFWSA9IDEzO1xuXHR2YXIgRVNDQVBFX0tFWSA9IGV4cG9ydHMuRVNDQVBFX0tFWSA9IDI3O1xuXHR2YXIgQVJST1dfRE9XTl9LRVkgPSBleHBvcnRzLkFSUk9XX0RPV05fS0VZID0gNDA7XG5cdHZhciBBUlJPV19VUF9LRVkgPSBleHBvcnRzLkFSUk9XX1VQX0tFWSA9IDM4O1xuXHR2YXIgQVJST1dfTEVGVF9LRVkgPSBleHBvcnRzLkFSUk9XX0xFRlRfS0VZID0gMzc7XG5cdHZhciBBUlJPV19SSUdIVF9LRVkgPSBleHBvcnRzLkFSUk9XX1JJR0hUX0tFWSA9IDM5O1xuXHRcblx0dmFyIFNQRUNJQUxfS0VZUyA9IGV4cG9ydHMuU1BFQ0lBTF9LRVlTID0gW0VOVEVSX0tFWSwgRVNDQVBFX0tFWSwgQVJST1dfRE9XTl9LRVksIEFSUk9XX1VQX0tFWSwgQVJST1dfTEVGVF9LRVksIEFSUk9XX1JJR0hUX0tFWV07XG5cbi8qKiovIH0sXG4vKiAxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX2RvbVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgY3ggPSBmdW5jdGlvbiBjeCgpIHtcblx0ICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgY2xhc3NuYW1lcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgY2xhc3NuYW1lc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBjbGFzc25hbWVzLmpvaW4oJyAnKS50cmltKCk7XG5cdH07XG5cdFxuXHR2YXIgUmVzdWx0TGlzdCA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBSZXN1bHRMaXN0KCkge1xuXHQgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgIF9yZWYkaGFuZGxlQ2xpY2sgPSBfcmVmLmhhbmRsZUNsaWNrLFxuXHQgICAgICAgIGhhbmRsZUNsaWNrID0gX3JlZiRoYW5kbGVDbGljayA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZUNsaWNrLFxuXHQgICAgICAgIF9yZWYkY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcblx0ICAgICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcztcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVzdWx0TGlzdCk7XG5cdFxuXHQgICAgX2luaXRpYWxpc2VQcm9wcy5jYWxsKHRoaXMpO1xuXHRcblx0ICAgIHRoaXMucHJvcHMgPSB7IGhhbmRsZUNsaWNrOiBoYW5kbGVDbGljaywgY2xhc3NOYW1lczogY2xhc3NOYW1lcyB9O1xuXHQgICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXHRcblx0ICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBjeCgncmVzdWx0cycsIGNsYXNzTmFtZXMuY29udGFpbmVyKSk7XG5cdCAgICB2YXIgcmVzdWx0SXRlbSA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIGN4KGNsYXNzTmFtZXMuaXRlbSkpO1xuXHRcblx0ICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbGljaywgdHJ1ZSk7XG5cdCAgICB0aGlzLmVsZW1lbnRzID0geyBjb250YWluZXI6IGNvbnRhaW5lciwgcmVzdWx0SXRlbTogcmVzdWx0SXRlbSB9O1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFJlc3VsdExpc3QsIFt7XG5cdCAgICBrZXk6ICdyZW5kZXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgdmFyIHJlc3VsdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdO1xuXHQgICAgICB2YXIgX2VsZW1lbnRzID0gdGhpcy5lbGVtZW50cyxcblx0ICAgICAgICAgIGNvbnRhaW5lciA9IF9lbGVtZW50cy5jb250YWluZXIsXG5cdCAgICAgICAgICByZXN1bHRJdGVtID0gX2VsZW1lbnRzLnJlc3VsdEl0ZW07XG5cdFxuXHQgICAgICB0aGlzLmNsZWFyKCk7XG5cdFxuXHQgICAgICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKHJlc3VsdCwgaWR4KSB7XG5cdCAgICAgICAgdmFyIGNoaWxkID0gcmVzdWx0SXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG5cdCAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKCdkYXRhLWtleScsIGlkeCk7XG5cdCAgICAgICAgY2hpbGQuaW5uZXJIVE1MID0gcmVzdWx0LmxhYmVsO1xuXHQgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5yZXN1bHRzID0gcmVzdWx0cztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZWxlY3QnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdChpbmRleCkge1xuXHQgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZnVzaW5nLWFycm93XG5cdFxuXHQgICAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQsIGlkeCkge1xuXHQgICAgICAgIHJldHVybiBpZHggPT09IGluZGV4ID8gKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJykgOiAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY2hpbGQsICdhY3RpdmUnKTtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICB0aGlzLnNlbGVjdGVkID0gaW5kZXg7XG5cdCAgICAgIHJldHVybiB0aGlzLnJlc3VsdHNbaW5kZXhdO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NvdW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjb3VudCgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMucmVzdWx0cy5sZW5ndGg7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnY2xlYXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkge1xuXHQgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICB0aGlzLnNlbGVjdGVkID0gLTE7XG5cdFxuXHQgICAgICB3aGlsZSAoY29udGFpbmVyLmxhc3RDaGlsZCkge1xuXHQgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIubGFzdENoaWxkKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFJlc3VsdExpc3Q7XG5cdH0oKTtcblx0XG5cdHZhciBfaW5pdGlhbGlzZVByb3BzID0gZnVuY3Rpb24gX2luaXRpYWxpc2VQcm9wcygpIHtcblx0ICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICB0aGlzLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgX3JlZjIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgIHRhcmdldCA9IF9yZWYyLnRhcmdldDtcblx0XG5cdCAgICB2YXIgaGFuZGxlQ2xpY2sgPSBfdGhpcy5wcm9wcy5oYW5kbGVDbGljaztcblx0ICAgIHZhciBjb250YWluZXIgPSBfdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgaWYgKHRhcmdldC5wYXJlbnROb2RlICE9PSBjb250YWluZXIgfHwgIXRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEta2V5JykpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpZHggPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWtleScpO1xuXHQgICAgdmFyIHJlc3VsdCA9IF90aGlzLnJlc3VsdHNbaWR4XTtcblx0ICAgIGhhbmRsZUNsaWNrKHsgcmVzdWx0OiByZXN1bHQgfSk7XG5cdCAgfTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFJlc3VsdExpc3Q7XG5cbi8qKiovIH0sXG4vKiAxNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0dmFyIF9kb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG5cdCAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7XG5cdCAgfXN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7aWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuXHQgIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2VuZHBvaW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcblx0ICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuXHQgICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sLFxuXHQgICAgICAgICAganNvbnAgPSBfcmVmLmpzb25wO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcblx0ICAgICAgICBxdWVyeTogcXVlcnksXG5cdCAgICAgICAganNvbnA6IGpzb25wXG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIHJldHVybiBwcm90b2NvbCArICcvL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvTG9jYXRpb25zPycgKyBwYXJhbVN0cmluZztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcblx0ICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXHRcblx0ICAgICAgaWYgKGRhdGEucmVzb3VyY2VTZXRzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybiBbXTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIGRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcy5tYXAoZnVuY3Rpb24gKHIpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgeDogci5wb2ludC5jb29yZGluYXRlc1sxXSxcblx0ICAgICAgICAgIHk6IHIucG9pbnQuY29vcmRpbmF0ZXNbMF0sXG5cdCAgICAgICAgICBsYWJlbDogci5hZGRyZXNzLmZvcm1hdHRlZEFkZHJlc3MsXG5cdCAgICAgICAgICBib3VuZHM6IFtbci5iYm94WzBdLCByLmJib3hbMV1dLCAvLyBzLCB3XG5cdCAgICAgICAgICBbci5iYm94WzJdLCByLmJib3hbM11dXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NlYXJjaCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKF9yZWYzKSB7XG5cdCAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwganNvbnAsIHVybCwganNvbjtcblx0ICAgICAgICBxdWVyeSA9IF9yZWYzLnF1ZXJ5O1xuXHRcblx0ICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuXHRcblx0ICAgICAgICBqc29ucCA9ICdCSU5HX0pTT05QX0NCXycgKyBEYXRlLm5vdygpO1xuXHQgICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCwganNvbnA6IGpzb25wIH0pO1xuXHRcblx0ICAgICAgICByZXR1cm4gKDAsIF9kb21VdGlscy5jcmVhdGVTY3JpcHRFbGVtZW50KSh1cmwsIGpzb25wKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHQgICAgICAgICAganNvbiA9ICRhd2FpdF8xO1xuXHQgICAgICAgICAgcmV0dXJuICRyZXR1cm4odGhpcy5wYXJzZSh7IGRhdGE6IGpzb24gfSkpO1xuXHQgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSxcbi8qIDE4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cdFxuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZ2V0UGFyYW1TdHJpbmcnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhcmFtU3RyaW5nKHBhcmFtcykge1xuXHQgICAgICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbXNba2V5XSk7XG5cdCAgICAgIH0pLmpvaW4oJyYnKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZWFyY2gnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmKSB7XG5cdCAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwgdXJsLCByZXF1ZXN0LCBqc29uO1xuXHQgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeTtcblx0XG5cdCAgICAgICAgcHJvdG9jb2wgPSB+bG9jYXRpb24ucHJvdG9jb2wuaW5kZXhPZignaHR0cCcpID8gbG9jYXRpb24ucHJvdG9jb2wgOiAnaHR0cHM6Jztcblx0ICAgICAgICB1cmwgPSB0aGlzLmVuZHBvaW50KHsgcXVlcnk6IHF1ZXJ5LCBwcm90b2NvbDogcHJvdG9jb2wgfSk7XG5cdFxuXHQgICAgICAgIHJldHVybiBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG5cdCAgICAgICAgICByZXF1ZXN0ID0gJGF3YWl0XzE7XG5cdCAgICAgICAgICByZXR1cm4gcmVxdWVzdC5qc29uKCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzIpIHtcblx0ICAgICAgICAgICAganNvbiA9ICRhd2FpdF8yO1xuXHQgICAgICAgICAgICByZXR1cm4gJHJldHVybih0aGlzLnBhcnNlKHsgZGF0YToganNvbiB9KSk7XG5cdCAgICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBQcm92aWRlcjtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cbi8qKiovIH0sXG4vKiAxOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcblx0ICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG5cdCAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG5cdCAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1yZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9wcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0dmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG5cdCAgaWYgKCFzZWxmKSB7XG5cdCAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG5cdCAgfXJldHVybiBjYWxsICYmICgodHlwZW9mIGNhbGwgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG5cdCAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihzdXBlckNsYXNzKSkpO1xuXHQgIH1zdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pO2lmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcblx0fVxuXHRcblx0dmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcblx0ICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXHRcblx0ICBmdW5jdGlvbiBQcm92aWRlcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG5cdCAgICBrZXk6ICdlbmRwb2ludCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG5cdCAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcblx0ICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblx0XG5cdCAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG5cdCAgICAgICAgZjogJ2pzb24nLFxuXHQgICAgICAgIHRleHQ6IHF1ZXJ5XG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIHJldHVybiBwcm90b2NvbCArICcvL2dlb2NvZGUuYXJjZ2lzLmNvbS9hcmNnaXMvcmVzdC9zZXJ2aWNlcy9Xb3JsZC9HZW9jb2RlU2VydmVyL2ZpbmQ/JyArIHBhcmFtU3RyaW5nO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BhcnNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuXHQgICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cdFxuXHQgICAgICByZXR1cm4gZGF0YS5sb2NhdGlvbnMubWFwKGZ1bmN0aW9uIChyKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHg6IHIuZmVhdHVyZS5nZW9tZXRyeS54LFxuXHQgICAgICAgICAgeTogci5mZWF0dXJlLmdlb21ldHJ5LnksXG5cdCAgICAgICAgICBsYWJlbDogci5uYW1lLFxuXHQgICAgICAgICAgYm91bmRzOiBbW3IuZXh0ZW50LnltaW4sIHIuZXh0ZW50LnhtaW5dLCAvLyBzLCB3XG5cdCAgICAgICAgICBbci5leHRlbnQueW1heCwgci5leHRlbnQueG1heF1dLFxuXHQgICAgICAgICAgcmF3OiByXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9LFxuLyogMjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcblx0ICB9c3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTtpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG5cdCAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblx0XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZW5kcG9pbnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG5cdCAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblx0XG5cdCAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuXHQgICAgICAgIGFkZHJlc3M6IHF1ZXJ5XG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIC8vIGdvb2dsZSByZXF1aXJlcyBhIHNlY3VyZSBjb25uZWN0aW9uIHdoZW4gdXNpbmcgYXBpIGtleXNcblx0ICAgICAgdmFyIHByb3RvID0gcGFyYW1zICYmIHBhcmFtcy5rZXkgPyAnaHR0cHM6JyA6IHByb3RvY29sO1xuXHQgICAgICByZXR1cm4gcHJvdG8gKyAnLy9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbj8nICsgcGFyYW1TdHJpbmc7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncGFyc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG5cdCAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblx0XG5cdCAgICAgIHJldHVybiBkYXRhLnJlc3VsdHMubWFwKGZ1bmN0aW9uIChyKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHg6IHIuZ2VvbWV0cnkubG9jYXRpb24ubG5nLFxuXHQgICAgICAgICAgeTogci5nZW9tZXRyeS5sb2NhdGlvbi5sYXQsXG5cdCAgICAgICAgICBsYWJlbDogci5mb3JtYXR0ZWRfYWRkcmVzcyxcblx0ICAgICAgICAgIGJvdW5kczogW1tyLmdlb21ldHJ5LnZpZXdwb3J0LnNvdXRod2VzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0LmxuZ10sIC8vIHMsIHdcblx0ICAgICAgICAgIFtyLmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0LmxuZ11dLFxuXHQgICAgICAgICAgcmF3OiByXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9LFxuLyogMjEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcblx0ICB9c3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTtpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG5cdCAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblx0XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZW5kcG9pbnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG5cdCAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblx0XG5cdCAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuXHQgICAgICAgIGZvcm1hdDogJ2pzb24nLFxuXHQgICAgICAgIHE6IHF1ZXJ5XG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIHJldHVybiBwcm90b2NvbCArICcvL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2g/JyArIHBhcmFtU3RyaW5nO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BhcnNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuXHQgICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cdFxuXHQgICAgICByZXR1cm4gZGF0YS5tYXAoZnVuY3Rpb24gKHIpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgeDogci5sb24sXG5cdCAgICAgICAgICB5OiByLmxhdCxcblx0ICAgICAgICAgIGxhYmVsOiByLmRpc3BsYXlfbmFtZSxcblx0ICAgICAgICAgIGJvdW5kczogW1twYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMF0pLCBwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMl0pXSwgLy8gcywgd1xuXHQgICAgICAgICAgW3BhcnNlRmxvYXQoci5ib3VuZGluZ2JveFsxXSksIHBhcnNlRmxvYXQoci5ib3VuZGluZ2JveFszXSldXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSxcbi8qIDIyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuU2V0dXBQYW5lbCA9IFNldHVwUGFuZWw7XG5cdGV4cG9ydHMudXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCA9IHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQ7XG5cdFxuXHR2YXIgX2xheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHR2YXIgX29wYWNpdHlTbGlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdGZ1bmN0aW9uIFNldHVwUGFuZWwobGF5ZXJzLCBsYXlvdXQpIHtcblx0ICAgIHZhciBsYXllckdyb3VwcyA9IG1ha2VMYXllckdyb3VwcyhsYXlvdXRbJ2xheWVyLWdyb3Vwcy1vcmRlciddKTtcblx0ICAgIG1ha2VMYXllckVsZW1zKGxheWVyR3JvdXBzLCBsYXllcnMpO1xuXHQgICAgbWFrZVBhbmVsRHJhZ2dhYmxlKCk7XG5cdCAgICBzZXRQYW5lbFNjcm9sbEhhbmRsZXIoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0UGFuZWxTY3JvbGxIYW5kbGVyKCkge1xuXHQgICAgdmFyIHBhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsJyk7XG5cdCAgICBwYW5lbC5vbnNjcm9sbCA9IHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VQYW5lbERyYWdnYWJsZSgpIHtcblx0ICAgIHZhciBvdmVybGF5ID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwtZHJhZy1vdmVybGF5Jyk7XG5cdFxuXHQgICAgb3ZlcmxheS5jYWxsKGQzLmRyYWcoKS5vbignZHJhZycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBwYW5lbERyYWdFdmVudEhhbmRsZXIuY2FsbCh0aGlzKTtcblx0ICAgIH0pKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGFuZWxEcmFnRXZlbnRIYW5kbGVyKCkge1xuXHQgICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpO1xuXHQgICAgdXBkYXRlUGFuZWxXaWR0aCgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KCkge1xuXHQgICAgdmFyIHBhbmVsID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwnKTtcblx0ICAgIHZhciBwYW5lbE9mZnNldEhlaWdodCA9IHBhbmVsLnByb3BlcnR5KCdvZmZzZXRIZWlnaHQnKTtcblx0ICAgIHZhciBwYW5lbERyYWdPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsLWRyYWctb3ZlcmxheScpO1xuXHQgICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbC1oZWFkZXInKTtcblx0XG5cdCAgICB2YXIgbmV3SGVpZ2h0O1xuXHRcblx0ICAgIGlmIChwYW5lbC5jbGFzc2VkKCdncmFwaHMtYWN0aXZlJykpIHtcblx0ICAgICAgICB2YXIgZ3JhcGhMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyYXBoLWxpc3QnKTtcblx0ICAgICAgICBuZXdIZWlnaHQgPSBoZWFkZXIuc2Nyb2xsSGVpZ2h0ICsgZ3JhcGhMaXN0LnNjcm9sbEhlaWdodDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gcGFuZWwuY2xhc3NlZCgnbGF5ZXJzLWFjdGl2ZScpXG5cdCAgICAgICAgdmFyIGxheWVyTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXllci1saXN0Jyk7XG5cdCAgICAgICAgbmV3SGVpZ2h0ID0gaGVhZGVyLnNjcm9sbEhlaWdodCArIGxheWVyTGlzdC5zY3JvbGxIZWlnaHQ7XG5cdCAgICB9XG5cdCAgICBuZXdIZWlnaHQgPSBuZXdIZWlnaHQgPiBwYW5lbE9mZnNldEhlaWdodCA/IFwiXCIgKyBuZXdIZWlnaHQgKyAncHgnIDogbnVsbDtcblx0ICAgIHBhbmVsRHJhZ092ZXJsYXkuc3R5bGUuaGVpZ2h0ID0gbmV3SGVpZ2h0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVQYW5lbFdpZHRoKCkge1xuXHQgICAgdmFyIHBhbmVsID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwnKTtcblx0ICAgIHZhciBwYW5lbE1pbldpZHRoID0gK3BhbmVsLnN0eWxlKCdtaW4td2lkdGgnKS5zbGljZSgwLCAtMik7XG5cdCAgICB2YXIgcGFuZWxDbGllbnRXaWR0aCA9IHBhbmVsLnByb3BlcnR5KCdjbGllbnRXaWR0aCcpO1xuXHRcblx0ICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyYXBwZXInKTtcblx0ICAgIHZhciB3cmFwcGVyV2lkdGggPSB3cmFwcGVyLmNsaWVudFdpZHRoO1xuXHRcblx0ICAgIHZhciBtYXBXcmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcC13cmFwcGVyJyk7XG5cdFxuXHQgICAgdmFyIG1vdXNlWCA9IGQzLmV2ZW50LnNvdXJjZUV2ZW50Lng7XG5cdCAgICB2YXIgeERlbHRhID0gd3JhcHBlcldpZHRoIC0gbW91c2VYIC0gcGFuZWxDbGllbnRXaWR0aDtcblx0XG5cdCAgICB2YXIgbmV3UGFuZWxXaWR0aCA9IHBhbmVsQ2xpZW50V2lkdGggKyB4RGVsdGE7XG5cdCAgICBuZXdQYW5lbFdpZHRoID0gbmV3UGFuZWxXaWR0aCA8IHBhbmVsTWluV2lkdGggPyBwYW5lbE1pbldpZHRoIDogbmV3UGFuZWxXaWR0aDtcblx0XG5cdCAgICBtYXBXcmFwcGVyLnN0eWxlLnBhZGRpbmdSaWdodCA9IFwiXCIgKyBuZXdQYW5lbFdpZHRoICsgJ3B4Jztcblx0ICAgIHBhbmVsLnN0eWxlKCd3aWR0aCcsIFwiXCIgKyBuZXdQYW5lbFdpZHRoICsgJ3B4Jyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYXllckdyb3VwcyhsYXlvdXQpIHtcblx0ICAgIHJldHVybiBkMy5zZWxlY3QoJyNsYXllci1saXN0Jykuc2VsZWN0QWxsKCcubGF5ZXItZ3JvdXAtd3JhcHBlcicpLmRhdGEobGF5b3V0KS5lbnRlcigpLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAtd3JhcHBlcicpLmF0dHIoJ2lkJywgZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXJHcm91cC5pZDtcblx0ICAgIH0pLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyR3JvdXAuYWN0aXZlO1xuXHQgICAgfSkuZWFjaChmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwLWJ0biBidG4nKS5vbignY2xpY2snLCBmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgICAgICBsYXllckdyb3VwLmFjdGl2ZSA9ICFsYXllckdyb3VwLmFjdGl2ZTtcblx0ICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMucGFyZW50Tm9kZSkuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGxheWVyR3JvdXAuYWN0aXZlO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpO1xuXHQgICAgICAgIH0pLnRleHQobGF5ZXJHcm91cC5uYW1lKTtcblx0ICAgIH0pLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyRWxlbXMobGF5ZXJHcm91cHMsIGxheWVycykge1xuXHQgICAgbGF5ZXJHcm91cHMuc2VsZWN0QWxsKCcubGF5ZXItc2VsZWN0JykuZGF0YShmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgIHJldHVybiBsYXllcnNbbGF5ZXJHcm91cC5pZF07XG5cdCAgICB9KS5lbnRlcigpLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItc2VsZWN0JykuZWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICB2YXIgZ3JvdXBOYW1lID0gdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWQ7XG5cdCAgICAgICAgdmFyIGxheWVyRGl2ID0gZDMuc2VsZWN0KHRoaXMpO1xuXHRcblx0ICAgICAgICBtYWtlQ2hlY2tib3gobGF5ZXIsIGxheWVyRGl2KTtcblx0ICAgICAgICBtYWtlTGFiZWwobGF5ZXIsIGxheWVyRGl2KTtcblx0ICAgICAgICBtYWtlRGVzY3JpcHRpb24obGF5ZXIsIGxheWVyRGl2KTtcblx0ICAgICAgICBtYWtlTGF5ZXJUb29scyhsYXllciwgbGF5ZXJEaXYpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VDaGVja2JveChsYXllciwgbGF5ZXJEaXYpIHtcblx0ICAgIGxheWVyRGl2LmFwcGVuZCgnaW5wdXQnKS5hdHRyKCd0eXBlJywgJ2NoZWNrYm94JykuYXR0cignaWQnLCBmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXIuaWQ7XG5cdCAgICB9KS5hdHRyKCdjaGVja2VkJywgZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyLmFjdGl2ZSA/ICdjaGVja2VkJyA6IG51bGw7XG5cdCAgICB9KS5vbignY2xpY2snLCBmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICAoMCwgX2xheWVyLnRvZ2dsZUxheWVyKShsYXllcik7XG5cdCAgICAgICAgbGF5ZXJEaXYuc2VsZWN0KCcubGF5ZXItdG9vbHMtd3JhcHBlcicpLmNsYXNzZWQoJ2FjdGl2ZScsIGxheWVyLmFjdGl2ZSk7XG5cdCAgICAgICAgaWYgKGxheWVyLmFjdGl2ZSkgKDAsIF9vcGFjaXR5U2xpZGVyLnNldFNsaWRlckluaXRpYWxQb3MpKGxheWVyLCBsYXllckRpdik7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxhYmVsKGxheWVyLCBsYXllckRpdikge1xuXHQgICAgbGF5ZXJEaXYuYXBwZW5kKCdsYWJlbCcpLmF0dHIoJ2ZvcicsIGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHJldHVybiBsYXllci5pZDtcblx0ICAgIH0pLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWxhYmVsJykuaHRtbChmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXIubmFtZTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlRGVzY3JpcHRpb24obGF5ZXIsIGxheWVyRGl2KSB7XG5cdCAgICBpZiAobGF5ZXIuaW5mbyAmJiBsYXllci5pbmZvICE9PSAnJykge1xuXHQgICAgICAgIGxheWVyRGl2LmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby1idG4nKS50ZXh0KCcoPyknKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLnBhcmVudE5vZGUpLnNlbGVjdCgnLmxheWVyLWluZm8td3JhcHBlcicpLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiAhZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ2FjdGl2ZScpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1pbmZvLXdyYXBwZXInKS50ZXh0KGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgICAgICByZXR1cm4gbGF5ZXIuaW5mbztcblx0ICAgICAgICB9KTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyVG9vbHMobGF5ZXIsIGxheWVyRGl2KSB7XG5cdCAgICB2YXIgbGF5ZXJUb29sc0RpdiA9IGxheWVyRGl2LmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItdG9vbHMtd3JhcHBlcicpLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXIuYWN0aXZlO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgKDAsIF9vcGFjaXR5U2xpZGVyLm1ha2VPcGFjaXR5U2xpZGVyKShsYXllciwgbGF5ZXJUb29sc0Rpdik7XG5cdCAgICBtYWtlTGVnZW5kKGxheWVyLCBsYXllclRvb2xzRGl2KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxlZ2VuZChsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIpIHtcblx0ICAgIGxheWVyVG9vbHNXcmFwcGVyLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGVnZW5kLXdyYXBwZXInKS5hcHBlbmQoJ2ltZycpLmF0dHIoJ3NyYycsIGxheWVyLmxlZ2VuZCB8fCAnbWVhbl9uZHZpX2xlZ2VuZC5qcGcnKTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5HZXRDdXJyZW50TGF5ZXJzID0gR2V0Q3VycmVudExheWVycztcblx0ZXhwb3J0cy5DcmVhdGVEZWZhdWx0TGF5ZXJzID0gQ3JlYXRlRGVmYXVsdExheWVycztcblx0ZXhwb3J0cy50b2dnbGVMYXllciA9IHRvZ2dsZUxheWVyO1xuXHRleHBvcnRzLmVuYWJsZUxheWVyID0gZW5hYmxlTGF5ZXI7XG5cdGV4cG9ydHMuZGlzYWJsZUxheWVyID0gZGlzYWJsZUxheWVyO1xuXHRleHBvcnRzLnVwZGF0ZUxheWVyT3BhY2l0eSA9IHVwZGF0ZUxheWVyT3BhY2l0eTtcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHQvKipcclxuXHQgKiBOZWVkZWQgZm9yIHRoZSBzaGFyZSB1cmwgc2luY2UgTGVhZmxldCBkb2VzIG5vdCBoYXZlIGEgZGVmYXVsdCB3YXkgdG8gc3VyZmFjZVxyXG5cdCAqIHRoZSBvcmRlciBvZiBsYXllcnMgaW4gdGhlIG1hcFxyXG5cdCAqL1xuXHR2YXIgX2N1cnJlbnRfbGF5ZXJzID0gW107XG5cdFxuXHQvKipcclxuXHQgKiBOb3RlOiBsYXllciBpcyBub3QgdGhlIGxlYWZsZXQgY29uY2VwdCBvZiBhIGxheWVyLCBidXQgcmF0aGVyIHRoZSBpbnRlcm5hbFxyXG5cdCAqICAgICAgIG9iamVjdCB3aGljaCB0cmFja3MgdGhlbS4gbGF5ZXIubWFwTGF5ZXIgaXMgdGhlIHBvaW50ZXIgdG8gdGhlXHJcblx0ICogICAgICAgbGVhZmxldCBsYXllci5cclxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIEdldEN1cnJlbnRMYXllcnMoKSB7XG5cdCAgICByZXR1cm4gX2N1cnJlbnRfbGF5ZXJzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVEZWZhdWx0TGF5ZXJzKGxheWVycywgZGVmYXVsdExheWVycykge1xuXHQgICAgdmFyIGksIGosIHByb3AsIGxheWVyZ3JvdXA7XG5cdCAgICB2YXIgZGVmYXVsdExheWVyO1xuXHQgICAgdmFyIGZvdW5kTGF5ZXI7XG5cdFxuXHQgICAgaWYgKCFkZWZhdWx0TGF5ZXJzIHx8IGRlZmF1bHRMYXllcnMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGRlZmF1bHRMYXllcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBmb3VuZExheWVyID0gZmFsc2U7XG5cdCAgICAgICAgZGVmYXVsdExheWVyID0gZGVmYXVsdExheWVyc1tpXTtcblx0ICAgICAgICBmb3IgKHByb3AgaW4gbGF5ZXJzKSB7XG5cdCAgICAgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG5cdCAgICAgICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XG5cdCAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsYXllcmdyb3VwLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZGVmYXVsdExheWVyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZW5hYmxlTGF5ZXIobGF5ZXJncm91cFtqXSk7XG5cdCAgICAgICAgICAgICAgICAgICAgZm91bmRMYXllciA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9nZ2xlTGF5ZXIobGF5ZXIsIGxheWVyRGl2KSB7XG5cdCAgICBpZiAoIWxheWVyLmFjdGl2ZSkge1xuXHQgICAgICAgIGVuYWJsZUxheWVyKGxheWVyKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZGlzYWJsZUxheWVyKGxheWVyKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZW5hYmxlTGF5ZXIobGF5ZXIsIGxheWVyRGl2KSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIGxheWVyLmFjdGl2ZSA9IHRydWU7XG5cdCAgICBsYXllci5tYXBMYXllciA9IGxheWVyLm1hcExheWVyIHx8IG1ha2VXbXNUaWxlTGF5ZXIobGF5ZXIpO1xuXHQgICAgbWFwLmFkZExheWVyKGxheWVyLm1hcExheWVyKTtcblx0ICAgIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkTGF5ZXJUb0ludGVybmFsVHJhY2tlcihsYXllcikge1xuXHQgICAgX2N1cnJlbnRfbGF5ZXJzLnB1c2gobGF5ZXIuaWQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkaXNhYmxlTGF5ZXIobGF5ZXIpIHtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHQgICAgbGF5ZXIuYWN0aXZlID0gZmFsc2U7XG5cdCAgICBpZiAobGF5ZXIubWFwTGF5ZXIgJiYgbWFwLmhhc0xheWVyKGxheWVyLm1hcExheWVyKSkge1xuXHQgICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllci5tYXBMYXllcik7XG5cdCAgICB9XG5cdCAgICByZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlTGF5ZXJGcm9tSW50ZXJuYWxUcmFja2VyKGxheWVyKSB7XG5cdCAgICB2YXIgbG9jID0gX2N1cnJlbnRfbGF5ZXJzLmluZGV4T2YobGF5ZXIuaWQpO1xuXHQgICAgaWYgKGxvYyA9PT0gLTEpIHJldHVybjtcblx0ICAgIF9jdXJyZW50X2xheWVycy5zcGxpY2UobG9jLCAxKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlTGF5ZXJPcGFjaXR5KGxheWVyLCBuZXdPcGFjaXR5KSB7XG5cdCAgICBsYXllci5vcGFjaXR5ID0gbmV3T3BhY2l0eTtcblx0ICAgIGxheWVyLm1hcExheWVyLnNldE9wYWNpdHkobmV3T3BhY2l0eSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VXbXNUaWxlTGF5ZXIobGF5ZXIpIHtcblx0ICAgIHJldHVybiBMLnRpbGVMYXllci53bXMobGF5ZXIudXJsLCB7XG5cdCAgICAgICAgbGF5ZXJzOiBsYXllci5pZCxcblx0ICAgICAgICB0cmFuc3BhcmVudDogbGF5ZXIudHJhbnNwYXJlbnQgfHwgdHJ1ZSxcblx0ICAgICAgICB2ZXJzaW9uOiBsYXllci52ZXJzaW9uIHx8ICcxLjMuMCcsXG5cdCAgICAgICAgY3JzOiBsYXllci5jcnMgfHwgTC5DUlMuRVBTRzQzMjYsXG5cdCAgICAgICAgZm9ybWF0OiBsYXllci5mb3JtYXQgfHwgJ2ltYWdlL3BuZycsXG5cdCAgICAgICAgb3BhY2l0eTogbGF5ZXIub3BhY2l0eSB8fCBcIjFcIlxuXHQgICAgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQ3JlYXRlTWFwID0gQ3JlYXRlTWFwO1xuXHRleHBvcnRzLkdldE1hcCA9IEdldE1hcDtcblx0dmFyIG1hcDtcblx0XG5cdGZ1bmN0aW9uIENyZWF0ZU1hcChtYXBDb25maWcpIHtcblx0ICAgIHZhciBpZCA9IG1hcENvbmZpZy5pZCB8fCBcIm1hcFwiO1xuXHQgICAgdmFyIG9wdGlvbnMgPSBtYXBDb25maWcub3B0aW9ucyB8fCB7IFwic2Nyb2xsV2hlZWxab29tXCI6IGZhbHNlIH07XG5cdCAgICB2YXIgaW5pdGlhbENlbnRlciA9IG1hcENvbmZpZy5pbml0aWFsQ2VudGVyIHx8IFtcIjM4LjVcIiwgXCItODFcIl07XG5cdCAgICB2YXIgaW5pdGlhbFpvb20gPSBtYXBDb25maWcuaW5pdGlhbFpvb20gfHwgNjtcblx0XG5cdCAgICBtYXAgPSBMLm1hcChpZCwgb3B0aW9ucykuc2V0Vmlldyhpbml0aWFsQ2VudGVyLCBpbml0aWFsWm9vbSk7XG5cdCAgICBMLmNvbnRyb2wuYXR0cmlidXRpb24oKS5hZGRUbyhtYXApO1xuXHQgICAgcmV0dXJuIG1hcDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gR2V0TWFwKCkge1xuXHQgICAgcmV0dXJuIG1hcDtcblx0fVxuXG4vKioqLyB9LFxuLyogMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQmluZFVwZGF0ZVNoYXJlVXJsID0gQmluZFVwZGF0ZVNoYXJlVXJsO1xuXHRleHBvcnRzLnVwZGF0ZVNoYXJlVXJsID0gdXBkYXRlU2hhcmVVcmw7XG5cdGV4cG9ydHMuQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnID0gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfYmFzZWxheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdFxuXHR2YXIgX2xheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHRmdW5jdGlvbiBCaW5kVXBkYXRlU2hhcmVVcmwobWFwKSB7XG5cdCAgICBtYXAub24oXCJtb3ZlZW5kXCIsIHVwZGF0ZVNoYXJlVXJsKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlU2hhcmVVcmwoZSkge1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkdldE1hcCkoKTtcblx0XG5cdCAgICB2YXIgcGFyYW1zID0gW21ha2VDZW50ZXJTdHJpbmcobWFwKSwgbWFrZVpvb21TdHJpbmcobWFwKSwgbWFrZUxheWVyU3RyaW5nKG1hcCksIG1ha2VCYXNlTGF5ZXJTdHJpbmcobWFwKV07XG5cdFxuXHQgICAgc2V0U2hhcmVVcmwobWFrZVNoYXJlVXJsKHBhcmFtcykpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlU2hhcmVVcmwocGFyYW1zKSB7XG5cdCAgICByZXR1cm4gXCI/XCIgKyBwYXJhbXMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7XG5cdCAgICAgICAgcmV0dXJuIHAgIT09IHVuZGVmaW5lZDtcblx0ICAgIH0pLmpvaW4oXCImXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRTaGFyZVVybCh1cmwpIHtcblx0ICAgIGlmICh3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcblx0ICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIFwiXCIsIHVybCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VDZW50ZXJTdHJpbmcobWFwKSB7XG5cdCAgICB2YXIgY2VudGVyID0gbWFwLmdldENlbnRlcigpO1xuXHQgICAgcmV0dXJuIFwiY2VudGVyPVwiICsgY2VudGVyLmxhdC50b1N0cmluZygpICsgXCIsXCIgKyBjZW50ZXIubG5nLnRvU3RyaW5nKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2Vab29tU3RyaW5nKG1hcCkge1xuXHQgICAgcmV0dXJuIFwiem9vbT1cIiArIG1hcC5nZXRab29tKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYXllclN0cmluZyhtYXApIHtcblx0ICAgIHZhciBsYXllcnMgPSBbXTtcblx0ICAgIHZhciBvcGFjaXR5VmFscyA9IHt9O1xuXHQgICAgdmFyIGN1cnJlbnRMYXllcnMgPSAoMCwgX2xheWVyLkdldEN1cnJlbnRMYXllcnMpKCk7XG5cdFxuXHQgICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICB2YXIgb3B0aW9ucyA9IGxheWVyLm9wdGlvbnM7XG5cdCAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sYXllcnMpIHtcblx0ICAgICAgICAgICAgb3BhY2l0eVZhbHNbb3B0aW9ucy5sYXllcnNdID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShcIm9wYWNpdHlcIikgPyBvcHRpb25zLm9wYWNpdHkgOiBcIjFcIjtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgY3VycmVudExheWVyO1xuXHQgICAgdmFyIGk7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgY3VycmVudExheWVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGN1cnJlbnRMYXllciA9IGN1cnJlbnRMYXllcnNbaV07XG5cdCAgICAgICAgbGF5ZXJzLnB1c2goY3VycmVudExheWVyKTtcblx0ICAgICAgICBsYXllcnMucHVzaChvcGFjaXR5VmFsc1tjdXJyZW50TGF5ZXJdKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBcImxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUJhc2VMYXllclN0cmluZyhtYXApIHtcblx0ICAgIHZhciBsYXllcnMgPSBbXTtcblx0ICAgIG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMgJiYgbGF5ZXIub3B0aW9ucy50eXBlID09PSBfYmFzZWxheWVyLkJBU0VfTEFZRVJfVFlQRSkge1xuXHQgICAgICAgICAgICBsYXllcnMucHVzaChsYXllci5vcHRpb25zLmlkKTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBcImJhc2VsYXllcnM9XCIgKyBsYXllcnMuam9pbihcIixcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhcnNlU2hhcmVVcmwoKSB7XG5cdCAgICB2YXIgcGFyYW1zID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcblx0ICAgIGlmIChwYXJhbXMgPT09IFwiXCIpIHJldHVybjtcblx0XG5cdCAgICBwYXJhbXMgPSBnZXRQYXJhbXNBcnJheShwYXJhbXMpO1xuXHQgICAgcGFyYW1zID0gbWFrZUtleWVkUGFyYW1zT2JqZWN0KHBhcmFtcyk7XG5cdFxuXHQgICAgZm9ybWF0UGFyYW1zKHBhcmFtcyk7XG5cdCAgICByZXR1cm4gcGFyYW1zO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRQYXJhbXNBcnJheShwYXJhbXMpIHtcblx0ICAgIHBhcmFtcyA9IHBhcmFtcy5zdWJzdHJpbmcoMSk7XG5cdCAgICBwYXJhbXMgPSB1bm1hbmdsZVBhcmFtU3RyaW5nKHBhcmFtcyk7XG5cdCAgICByZXR1cm4gcGFyYW1zLnNwbGl0KFwiJlwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdW5tYW5nbGVQYXJhbVN0cmluZyhwYXJhbXMpIHtcblx0ICAgIHJldHVybiBwYXJhbXMucmVwbGFjZSgvXFwlMltjfENdL2csIFwiLFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUtleWVkUGFyYW1zT2JqZWN0KHBhcmFtc0Fycikge1xuXHQgICAgdmFyIHBhcnNlZFBhcmFtcyA9IHt9O1xuXHQgICAgdmFyIHBhcmFtUGFpcjtcblx0ICAgIHZhciBpO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBwYXJhbXNBcnIubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBwYXJhbVBhaXIgPSBwYXJhbXNBcnJbaV0uc3BsaXQoXCI9XCIpO1xuXHQgICAgICAgIHBhcnNlZFBhcmFtc1twYXJhbVBhaXJbMF1dID0gcGFyYW1QYWlyWzFdO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBwYXJzZWRQYXJhbXM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFBhcmFtcyhwYXJhbXMpIHtcblx0ICAgIGlmIChwYXJhbXMuY2VudGVyKSBwYXJhbXMuY2VudGVyID0gZm9ybWF0Q2VudGVyUGFyYW0ocGFyYW1zLmNlbnRlcik7XG5cdCAgICBpZiAocGFyYW1zLmxheWVycykgcGFyYW1zLmxheWVycyA9IGZvcm1hdExheWVyUGFyYW0ocGFyYW1zLmxheWVycyk7XG5cdCAgICBpZiAocGFyYW1zLmJhc2VsYXllcnMpIHBhcmFtcy5iYXNlbGF5ZXJzID0gZm9ybWF0QmFzZUxheWVyUGFyYW0ocGFyYW1zLmJhc2VsYXllcnMpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRDZW50ZXJQYXJhbShjZW50ZXIpIHtcblx0ICAgIHJldHVybiBjZW50ZXIuc3BsaXQoXCIsXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRMYXllclBhcmFtKGxheWVycykge1xuXHQgICAgdmFyIGZvcm1hdHRlZExheWVycyA9IHtcblx0ICAgICAgICBcImVuYWJsZWRMYXllcnNcIjogW10sXG5cdCAgICAgICAgXCJvcGFjaXR5VmFsc1wiOiB7fVxuXHQgICAgfTtcblx0ICAgIHZhciBsYXllcklkO1xuXHQgICAgdmFyIGk7XG5cdFxuXHQgICAgbGF5ZXJzID0gbGF5ZXJzLnNwbGl0KFwiLFwiKTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpID0gaSArIDIpIHtcblx0ICAgICAgICBsYXllcklkID0gbGF5ZXJzW2ldO1xuXHQgICAgICAgIGZvcm1hdHRlZExheWVycy5lbmFibGVkTGF5ZXJzLnB1c2gobGF5ZXJJZCk7XG5cdCAgICAgICAgZm9ybWF0dGVkTGF5ZXJzLm9wYWNpdHlWYWxzW2xheWVySWRdID0gbGF5ZXJzW2kgKyAxXTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gZm9ybWF0dGVkTGF5ZXJzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRCYXNlTGF5ZXJQYXJhbShiYXNlbGF5ZXJzKSB7XG5cdCAgICByZXR1cm4gYmFzZWxheWVycy5zcGxpdChcIixcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZyhjb25maWcpIHtcblx0ICAgIHZhciBzaGFyZSA9IHBhcnNlU2hhcmVVcmwoKTtcblx0ICAgIGlmICghc2hhcmUpIHJldHVybjtcblx0ICAgIGlmIChzaGFyZS5jZW50ZXIpIGNvbmZpZy5tYXAuaW5pdGlhbENlbnRlciA9IHNoYXJlLmNlbnRlcjtcblx0ICAgIGlmIChzaGFyZS56b29tKSBjb25maWcubWFwLmluaXRpYWxab29tID0gc2hhcmUuem9vbTtcblx0ICAgIGlmIChzaGFyZS5sYXllcnMpIGFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5sYXllcnMsIGNvbmZpZyk7XG5cdCAgICBpZiAoc2hhcmUuYmFzZWxheWVycykgYWRkQmFzZUxheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5iYXNlbGF5ZXJzLCBjb25maWcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmVMYXllclNldHRpbmdzLCBjb25maWcpIHtcblx0ICAgIHZhciBlbmFibGVkTGF5ZXJzID0gc2hhcmVMYXllclNldHRpbmdzLmVuYWJsZWRMYXllcnM7XG5cdCAgICBjb25maWdbXCJhY3RpdmUtbGF5ZXJzXCJdID0gZW5hYmxlZExheWVycztcblx0XG5cdCAgICB2YXIgaSwgaiwgcHJvcCwgbGF5ZXJncm91cDtcblx0ICAgIHZhciBlbmFibGVkTGF5ZXI7XG5cdCAgICB2YXIgZm91bmRMYXllcjtcblx0ICAgIHZhciBsYXllcnMgPSBjb25maWcubGF5ZXJzO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBlbmFibGVkTGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZm91bmRMYXllciA9IGZhbHNlO1xuXHQgICAgICAgIGVuYWJsZWRMYXllciA9IGVuYWJsZWRMYXllcnNbaV07XG5cdCAgICAgICAgZm9yIChwcm9wIGluIGxheWVycykge1xuXHQgICAgICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xuXHQgICAgICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuXHQgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGF5ZXJncm91cC5sZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGxheWVyZ3JvdXBbal0uaWQgPT09IGVuYWJsZWRMYXllcikge1xuXHQgICAgICAgICAgICAgICAgICAgIGxheWVyZ3JvdXBbal0ub3BhY2l0eSA9IHNoYXJlTGF5ZXJTZXR0aW5ncy5vcGFjaXR5VmFsc1tlbmFibGVkTGF5ZXJdO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvdW5kTGF5ZXIgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChmb3VuZExheWVyKSBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZEJhc2VMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmVCYXNlTGF5ZXJTZXR0aW5ncywgY29uZmlnKSB7XG5cdCAgICB2YXIgYmFzZWxheWVycyA9IGNvbmZpZy5iYXNlbGF5ZXJzO1xuXHQgICAgdmFyIGJhc2VsYXllcjtcblx0ICAgIHZhciBpO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBiYXNlbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgYmFzZWxheWVyID0gYmFzZWxheWVyc1tpXTtcblx0ICAgICAgICBiYXNlbGF5ZXIuYWN0aXZlID0gc2hhcmVCYXNlTGF5ZXJTZXR0aW5ncy5pbmRleE9mKGJhc2VsYXllci5pZCkgIT09IC0xID8gdHJ1ZSA6IGZhbHNlO1xuXHQgICAgfVxuXHR9XG5cbi8qKiovIH0sXG4vKiAyNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkJBU0VfTEFZRVJfVFlQRSA9IHVuZGVmaW5lZDtcblx0ZXhwb3J0cy5DcmVhdGVCYXNlTGF5ZXJzID0gQ3JlYXRlQmFzZUxheWVycztcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHR2YXIgQkFTRV9MQVlFUl9UWVBFID0gZXhwb3J0cy5CQVNFX0xBWUVSX1RZUEUgPSBcImJhc2VsYXllclwiO1xuXHRcblx0dmFyIF9iYXNlbGF5ZXJzO1xuXHRcblx0ZnVuY3Rpb24gQ3JlYXRlQmFzZUxheWVycyhtYXAsIGxheWVyQ29uZmlnKSB7XG5cdCAgICBsYXllckNvbmZpZyA9IGxheWVyQ29uZmlnIHx8IFt7XG5cdCAgICAgICAgXCJpZFwiOiBcImNhcnRvLWxpZ2h0LWRlZmF1bHRcIixcblx0ICAgICAgICBcInVybFwiOiBcImh0dHA6Ly97c30uYmFzZW1hcHMuY2FydG9jZG4uY29tL2xpZ2h0X2FsbC97en0ve3h9L3t5fS5wbmdcIixcblx0ICAgICAgICBcImF0dHJpYnV0aW9uXCI6ICcmY29weTsgPGEgaHJlZj1cImh0dHA6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzLCAmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vY2FydG8uY29tL2F0dHJpYnV0aW9uc1wiPkNBUlRPPC9hPidcblx0ICAgIH1dO1xuXHRcblx0ICAgIF9iYXNlbGF5ZXJzID0gbGF5ZXJDb25maWc7XG5cdCAgICB2YXIgaTtcblx0ICAgIHZhciBiYXNlTGF5ZXI7XG5cdCAgICB2YXIgY29uZmlnO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsYXllckNvbmZpZy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGNvbmZpZyA9IGxheWVyQ29uZmlnW2ldO1xuXHRcblx0ICAgICAgICBpZiAoIWNvbmZpZy5hY3RpdmUpIGNvbnRpbnVlO1xuXHQgICAgICAgIGJhc2VMYXllciA9IGNyZWF0ZUJhc2VMYXllcihjb25maWcpO1xuXHQgICAgICAgIGNvbmZpZy5sYXllciA9IGJhc2VMYXllcjtcblx0ICAgICAgICBiYXNlTGF5ZXIuYWRkVG8obWFwKTtcblx0ICAgIH1cblx0XG5cdCAgICBjcmVhdGVCYXNlTGF5ZXJVSShsYXllckNvbmZpZyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUJhc2VMYXllclVJKGNvbmZpZykge1xuXHQgICAgdmFyIGJhc2VVSSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICBiYXNlVUkuY2xhc3NOYW1lID0gXCJiYXNlbGF5ZXItdWlcIjtcblx0ICAgIHZhciBiYXNlV3JhcHBlcjtcblx0ICAgIHZhciBiYXNlSW1nO1xuXHQgICAgdmFyIGJhc2VMYWJlbDtcblx0XG5cdCAgICB2YXIgbGF5ZXI7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbmZpZy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBsYXllciA9IGNvbmZpZ1tpXTtcblx0ICAgICAgICBpZiAoIWxheWVyLmhhc093blByb3BlcnR5KFwiaW1hZ2VcIikpIGNvbnRpbnVlO1xuXHRcblx0ICAgICAgICBiYXNlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICAgICAgYmFzZVdyYXBwZXIuc2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiLCBsYXllci5pZCk7XG5cdCAgICAgICAgYmFzZUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG5cdCAgICAgICAgYmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbGF5ZXIuaW1hZ2UpO1xuXHQgICAgICAgIGJhc2VJbWcuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGxheWVyLmxhYmVsKTtcblx0ICAgICAgICBiYXNlSW1nLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIGxheWVyLmxhYmVsKTtcblx0ICAgICAgICBiYXNlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHQgICAgICAgIGJhc2VMYWJlbC50ZXh0Q29udGVudCA9IGxheWVyLmxhYmVsO1xuXHQgICAgICAgIGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VJbWcpO1xuXHQgICAgICAgIGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VMYWJlbCk7XG5cdCAgICAgICAgYmFzZVdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUJhc2VDbGljayk7XG5cdFxuXHQgICAgICAgIGQzLnNlbGVjdChiYXNlV3JhcHBlcikuY2xhc3NlZChcImJhc2Utc2VsZWN0b3JcIiwgdHJ1ZSkuY2xhc3NlZChcImFjdGl2ZVwiLCBsYXllci5hY3RpdmUpO1xuXHRcblx0ICAgICAgICBiYXNlVUkuYXBwZW5kQ2hpbGQoYmFzZVdyYXBwZXIpO1xuXHQgICAgfVxuXHRcblx0ICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJsZWFmbGV0LWJvdHRvbSBsZWFmbGV0LWxlZnRcIilbMF0uYXBwZW5kQ2hpbGQoYmFzZVVJKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlQmFzZUNsaWNrKGUpIHtcblx0ICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgICB2YXIgbGF5ZXJpZCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiKTtcblx0ICAgIHRvZ2dsZUFjdGl2ZUJhc2VVSSh0aGlzKTtcblx0ICAgIHJlbW92ZUN1cnJlbnRCYXNlTGF5ZXIoKTtcblx0ICAgIGFkZE5ld0Jhc2VMYXllclRvTWFwKGxheWVyaWQpO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9nZ2xlQWN0aXZlQmFzZVVJKGJhc2VVSUVsZW0pIHtcblx0ICAgIGQzLnNlbGVjdChcIi5iYXNlLXNlbGVjdG9yLmFjdGl2ZVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGZhbHNlKTtcblx0ICAgIGQzLnNlbGVjdChiYXNlVUlFbGVtKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmVDdXJyZW50QmFzZUxheWVyKCkge1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkdldE1hcCkoKTtcblx0XG5cdCAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIGlmIChsYXllci5vcHRpb25zLnR5cGUgIT09IEJBU0VfTEFZRVJfVFlQRSkgcmV0dXJuO1xuXHQgICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllcik7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkTmV3QmFzZUxheWVyVG9NYXAobGF5ZXJpZCkge1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkdldE1hcCkoKTtcblx0XG5cdCAgICB2YXIgbGF5ZXI7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IF9iYXNlbGF5ZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGxheWVyID0gX2Jhc2VsYXllcnNbaV07XG5cdCAgICAgICAgaWYgKGxheWVyLmlkICE9PSBsYXllcmlkKSBjb250aW51ZTtcblx0ICAgICAgICBpZiAoIWxheWVyLmxheWVyKSBsYXllci5sYXllciA9IGNyZWF0ZUJhc2VMYXllcihsYXllcik7XG5cdCAgICAgICAgbGF5ZXIubGF5ZXIuYWRkVG8obWFwKTtcblx0ICAgICAgICBsYXllci5sYXllci5icmluZ1RvQmFjaygpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVCYXNlTGF5ZXIobGF5ZXJDb25maWcpIHtcblx0ICAgIHJldHVybiBMLnRpbGVMYXllcihsYXllckNvbmZpZy51cmwsIG1ha2VCYXNlTGF5ZXJPcHRpb25zKGxheWVyQ29uZmlnKSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VCYXNlTGF5ZXJPcHRpb25zKGNvbmZpZykge1xuXHQgICAgdmFyIG9wdGlvbnMgPSB7fTtcblx0ICAgIGlmIChjb25maWcuaWQpIG9wdGlvbnMuaWQgPSBjb25maWcuaWQ7XG5cdCAgICBpZiAoY29uZmlnLmF0dHJpYnV0aW9uKSBvcHRpb25zLmF0dHJpYnV0aW9uID0gY29uZmlnLmF0dHJpYnV0aW9uO1xuXHQgICAgaWYgKGNvbmZpZy5zdWJkb21haW5zKSBvcHRpb25zLnN1YmRvbWFpbnMgPSBjb25maWcuc3ViZG9tYWlucztcblx0ICAgIG9wdGlvbnMudHlwZSA9IEJBU0VfTEFZRVJfVFlQRTtcblx0XG5cdCAgICByZXR1cm4gb3B0aW9ucztcblx0fVxuXG4vKioqLyB9LFxuLyogMjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuc2V0U2xpZGVySW5pdGlhbFBvcyA9IHNldFNsaWRlckluaXRpYWxQb3M7XG5cdGV4cG9ydHMubWFrZU9wYWNpdHlTbGlkZXIgPSBtYWtlT3BhY2l0eVNsaWRlcjtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciBfbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0XG5cdC8vIHNldCBpdCBtYW51YWxseSBmb3Igbm93XG5cdHZhciBPUEFDSVRZX1JBTkdFX01BWCA9IDkwO1xuXHRcblx0dmFyIG9wYWNpdHlTY2FsZSA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFsxLCAwXSkucmFuZ2UoWzAsIE9QQUNJVFlfUkFOR0VfTUFYXSkuY2xhbXAodHJ1ZSk7XG5cdFxuXHRmdW5jdGlvbiBzZXRTbGlkZXJJbml0aWFsUG9zKGxheWVyLCBsYXllclRvb2xzV3JhcHBlcikge1xuXHRcblx0ICAgIHZhciBsYXllck9wYWNpdHkgPSBsYXllci5vcGFjaXR5IHx8IDE7XG5cdCAgICB2YXIgaGFuZGxlT2Zmc2V0ID0gb3BhY2l0eVNjYWxlKGxheWVyT3BhY2l0eSk7XG5cdFxuXHQgICAgbGF5ZXJUb29sc1dyYXBwZXIuc2VsZWN0KCcub3BhY2l0eS1zbGlkZXItaGFuZGxlJykuc3R5bGUoJ3RvcCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gJycgKyBoYW5kbGVPZmZzZXQgKyAncHgnO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VPcGFjaXR5U2xpZGVyKGxheWVyLCBsYXllclRvb2xzV3JhcHBlcikge1xuXHRcblx0ICAgIHZhciBsYXllck9wYWNpdHkgPSBsYXllci5vcGFjaXR5ICE9PSB1bmRlZmluZWQgPyBsYXllci5vcGFjaXR5IDogMTtcblx0XG5cdCAgICB2YXIgd3JhcHBlciA9IGxheWVyVG9vbHNXcmFwcGVyLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXItd3JhcHBlcicpO1xuXHRcblx0ICAgIHZhciBvcGFjaXR5UGVyY2VudEluZGljYXRvciA9IHdyYXBwZXIuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdvcGFjaXR5LXNsaWRlci1pbmRpY2F0b3InKTtcblx0XG5cdCAgICBtYWtlU2xpZGVyVHJhY2sod3JhcHBlciwgbGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyLCBsYXllck9wYWNpdHkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlU2xpZGVyVHJhY2sod3JhcHBlciwgbGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyLCBsYXllck9wYWNpdHkpIHtcblx0XG5cdCAgICB2YXIgb3ZlcmxheSA9IHdyYXBwZXIuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdvcGFjaXR5LXNsaWRlci10cmFjay1vdmVybGF5Jyk7XG5cdFxuXHQgICAgdmFyIHRyYWNrID0gb3ZlcmxheS5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktc2xpZGVyLXRyYWNrJyk7XG5cdFxuXHQgICAgb3ZlcmxheS5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktc2xpZGVyLWhhbmRsZScpO1xuXHRcblx0ICAgIGlmIChsYXllci5hY3RpdmUpIHNldFNsaWRlckluaXRpYWxQb3MobGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyKTtcblx0ICAgIHNldERyYWdFdmVudExpc3RlbmVyKHdyYXBwZXIsIGxheWVyLCBsYXllck9wYWNpdHkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXREcmFnRXZlbnRMaXN0ZW5lcih3cmFwcGVyLCBsYXllciwgbGF5ZXJPcGFjaXR5KSB7XG5cdCAgICB2YXIgb3ZlcmxheSA9IHdyYXBwZXIuc2VsZWN0KCcub3BhY2l0eS1zbGlkZXItdHJhY2stb3ZlcmxheScpO1xuXHQgICAgb3ZlcmxheS5jYWxsKGQzLmRyYWcoKS5vbignc3RhcnQgZHJhZycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgbmV3T3BhY2l0eSA9IGNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zKG92ZXJsYXkpO1xuXHQgICAgICAgICgwLCBfbGF5ZXIudXBkYXRlTGF5ZXJPcGFjaXR5KShsYXllciwgbmV3T3BhY2l0eSk7XG5cdCAgICAgICAgYWRqdXN0U2xpZGVySGFuZGxlKG92ZXJsYXksIG5ld09wYWNpdHkpO1xuXHQgICAgfSkub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHQgICAgfSkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGp1c3RTbGlkZXJIYW5kbGUob3ZlcmxheSwgbmV3T3BhY2l0eSkge1xuXHQgICAgdmFyIGhhbmRsZSA9IG92ZXJsYXkuc2VsZWN0KCcub3BhY2l0eS1zbGlkZXItaGFuZGxlJyk7XG5cdCAgICBoYW5kbGUuc3R5bGUoJ3RvcCcsICcnICsgb3BhY2l0eVNjYWxlKG5ld09wYWNpdHkpICsgJ3B4Jyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zKG92ZXJsYXkpIHtcblx0ICAgIHZhciB5UG9zID0gZDMubW91c2Uob3ZlcmxheS5ub2RlKCkpWzFdO1xuXHQgICAgdmFyIG5ld09wYWNpdHkgPSBvcGFjaXR5U2NhbGUuaW52ZXJ0KHlQb3MpO1xuXHQgICAgcmV0dXJuIG5ld09wYWNpdHk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuU2V0dXBHcmFwaHMgPSBTZXR1cEdyYXBocztcblx0ZXhwb3J0cy5CaW5kR3JhcGhFdmVudHMgPSBCaW5kR3JhcGhFdmVudHM7XG5cdFxuXHR2YXIgX3BhbmVsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdFxuXHR2YXIgdGlwO1xuXHRcblx0ZnVuY3Rpb24gU2V0dXBHcmFwaHMoKSB7XG5cdCAgICBkMy5zZWxlY3RBbGwoXCIuZ3JhcGgtdHlwZS1idG5cIikub24oXCJjbGlja1wiLCBoYW5kbGVHcmFwaFR5cGVCdG5DbGljayk7XG5cdCAgICBleHRlbmREYXRlTW9kdWxlKCk7XG5cdCAgICB0aXAgPSBkMy50aXAoKS5hdHRyKCdjbGFzcycsICdkMy10aXAnKS5odG1sKGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIGQ7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZXh0ZW5kRGF0ZU1vZHVsZSgpIHtcblx0ICAgIERhdGUucHJvdG90eXBlLmlzTGVhcFllYXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHllYXIgPSB0aGlzLmdldEZ1bGxZZWFyKCk7XG5cdCAgICAgICAgaWYgKCh5ZWFyICYgMykgIT0gMCkgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIHJldHVybiB5ZWFyICUgMTAwICE9IDAgfHwgeWVhciAlIDQwMCA9PSAwO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBHZXQgRGF5IG9mIFllYXJcblx0ICAgIERhdGUucHJvdG90eXBlLmdldERPWSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZGF5Q291bnQgPSBbMCwgMzEsIDU5LCA5MCwgMTIwLCAxNTEsIDE4MSwgMjEyLCAyNDMsIDI3MywgMzA0LCAzMzRdO1xuXHQgICAgICAgIHZhciBtbiA9IHRoaXMuZ2V0TW9udGgoKTtcblx0ICAgICAgICB2YXIgZG4gPSB0aGlzLmdldERhdGUoKTtcblx0ICAgICAgICB2YXIgZGF5T2ZZZWFyID0gZGF5Q291bnRbbW5dICsgZG47XG5cdCAgICAgICAgaWYgKG1uID4gMSAmJiB0aGlzLmlzTGVhcFllYXIoKSkgZGF5T2ZZZWFyKys7XG5cdCAgICAgICAgcmV0dXJuIGRheU9mWWVhcjtcblx0ICAgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEJpbmRHcmFwaEV2ZW50cyhtYXApIHtcblx0ICAgIG1hcC5vbihcImNsaWNrXCIsIGhhbmRsZU1hcENsaWNrKTtcblx0fVxuXHRcblx0dmFyIGJhc2VJY29uID0gTC5JY29uLmV4dGVuZCh7fSk7XG5cdFxuXHR2YXIgZ3JhcGhJY29uID0gbmV3IGJhc2VJY29uKHtcblx0ICAgIGljb25Vcmw6ICdpbWdzL2JsdWVfaWNvbi5wbmcnLFxuXHQgICAgc2hhZG93VXJsOiAnaW1ncy9tYXJrZXJfc2hhZG93LnBuZycsXG5cdCAgICBpY29uU2l6ZTogWzI1LCA0MV0sXG5cdCAgICBpY29uQW5jaG9yOiBbMTIsIDQxXSxcblx0ICAgIHBvcHVwQW5jaG9yOiBbMSwgLTM0XSxcblx0ICAgIHNoYWRvd1NpemU6IFs0MSwgNDFdXG5cdH0pO1xuXHRcblx0dmFyIGhvdmVySWNvbiA9IG5ldyBiYXNlSWNvbih7XG5cdCAgICBpY29uVXJsOiAnaW1ncy9vcmFuZ2VfaWNvbi5wbmcnLFxuXHQgICAgc2hhZG93VXJsOiAnaW1ncy9tYXJrZXJfc2hhZG93LnBuZycsXG5cdCAgICBpY29uU2l6ZTogWzI1LCA0MV0sXG5cdCAgICBpY29uQW5jaG9yOiBbMTIsIDQxXSxcblx0ICAgIHBvcHVwQW5jaG9yOiBbMSwgLTM0XSxcblx0ICAgIHNoYWRvd1NpemU6IFs0MSwgNDFdXG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gaGFuZGxlTWFwQ2xpY2soZSkge1xuXHQgICAgdmFyIG1hcCA9IHRoaXM7XG5cdCAgICB2YXIgbGF0ID0gZS5sYXRsbmcubGF0O1xuXHQgICAgdmFyIGxuZyA9IGUubGF0bG5nLmxuZztcblx0XG5cdCAgICB2YXIgZGl2ID0gY3JlYXRlR3JhcGhEaXYobGF0LCBsbmcpO1xuXHQgICAgdmFyIG1hcmtlciA9IGNyZWF0ZU1hcmtlcihtYXAsIGxhdCwgbG5nKTtcblx0ICAgIGQzLnNlbGVjdChkaXYpLm9uKFwibW91c2VlbnRlclwiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgbWFya2VyLnNldEljb24oaG92ZXJJY29uKTtcblx0ICAgIH0pO1xuXHQgICAgZDMuc2VsZWN0KGRpdikub24oXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBtYXJrZXIuc2V0SWNvbihncmFwaEljb24pO1xuXHQgICAgfSk7XG5cdCAgICBjcmVhdGVHcmFwaFJlbW92ZXIobWFwLCBkaXYsIG1hcmtlcik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZU1hcmtlcihtYXAsIGxhdCwgbG5nKSB7XG5cdCAgICByZXR1cm4gTC5tYXJrZXIoW2xhdCwgbG5nXSwgeyBpY29uOiBncmFwaEljb24gfSkuYWRkVG8obWFwKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlR3JhcGhSZW1vdmVyKG1hcCwgZGl2LCBtYXJrZXIpIHtcblx0ICAgIHZhciBlbGVtID0gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSgpO1xuXHQgICAgZGl2LmFwcGVuZENoaWxkKGVsZW0pO1xuXHQgICAgZDMuc2VsZWN0KGVsZW0pLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpO1xuXHQgICAgICAgIGxpc3QucmVtb3ZlQ2hpbGQoZGl2KTtcblx0ICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobWFya2VyKTtcblx0ICAgICAgICAoMCwgX3BhbmVsLnVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQpKCk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSgpIHtcblx0ICAgIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblx0ICAgIGVsZW0uY2xhc3NOYW1lID0gXCJyZW1vdmUtZ3JhcGhcIjtcblx0ICAgIGVsZW0uaW5uZXJUZXh0ID0gU3RyaW5nLmZyb21DaGFyQ29kZShcIjEwMDA1XCIpO1xuXHQgICAgZWxlbS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBcIlJlbW92ZSBncmFwaFwiKTtcblx0ICAgIHJldHVybiBlbGVtO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIERBVEEgUFJPQ0VTU0lORyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBnZXREYXRhKGxhdCwgbG5nLCBkaXYpIHtcblx0ICAgIHZhciB1cmwgPSBcImh0dHBzOi8vZmNhdi1uZHZpLm5lbWFjLm9yZy9sYW5kZGF0X3Byb2R1Y3QuY2dpP2FyZ3M9XCIgKyBsbmcgKyBcIixcIiArIGxhdDtcblx0ICAgIHZhciBvUmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdCAgICBvUmVxLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlVGV4dDtcblx0ICAgICAgICByZXNwb25zZSA9IHJlc3BvbnNlLnJlcGxhY2UoL1xcW3xcXF18XFwnL2csIFwiXCIpLnNwbGl0KFwiLCBcIik7XG5cdCAgICAgICAgZHJhd0dyYXBoKHJlc3BvbnNlLCBkaXYsIGxhdCwgbG5nKTtcblx0ICAgICAgICAoMCwgX3BhbmVsLnVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQpKCk7XG5cdCAgICB9KTtcblx0ICAgIG9SZXEub3BlbihcIkdFVFwiLCB1cmwpO1xuXHQgICAgb1JlcS5zZW5kKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNwbGl0RGF0YShkYXRhKSB7XG5cdCAgICB2YXIgaTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZGF0YVtpXSA9IGRhdGFbaV0uc3BsaXQoXCIsXCIpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGRhdGE7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlcHJvY2Vzc0RhdGEob3JpZ2RhdGEpIHtcblx0ICAgIHZhciBkYXRhID0ge307XG5cdCAgICB2YXIgcG9pbnQ7XG5cdCAgICB2YXIga2V5O1xuXHQgICAgdmFyIGksIGo7XG5cdFxuXHQgICAgZGF0YVtcImtleXNcIl0gPSBbXTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBvcmlnZGF0YS5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHBvaW50ID0gb3JpZ2RhdGFbaV07XG5cdCAgICAgICAga2V5ID0gcG9pbnRbMF0uc3Vic3RyaW5nKDAsIDQpO1xuXHQgICAgICAgIGlmICghZGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdCAgICAgICAgICAgIGRhdGFba2V5XSA9IFtdO1xuXHQgICAgICAgICAgICBkYXRhW1wia2V5c1wiXS5wdXNoKGtleSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGRhdGFba2V5XS5wdXNoKHBvaW50KTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZGF0YUZvck1lZGlhbnM7XG5cdCAgICB2YXIgbWVkaWFuO1xuXHQgICAgZGF0YVtcIm1lZGlhbnNcIl0gPSBbXTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCA0NjsgaSsrKSB7XG5cdCAgICAgICAgZGF0YUZvck1lZGlhbnMgPSBbXTtcblx0ICAgICAgICBmb3IgKGogPSBpOyBqIDwgb3JpZ2RhdGEubGVuZ3RoOyBqICs9IDQ2KSB7XG5cdCAgICAgICAgICAgIGRhdGFGb3JNZWRpYW5zLnB1c2gob3JpZ2RhdGFbal1bMV0pO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgbWVkaWFuID0gZGF0YUZvck1lZGlhbnMuc29ydCgpW01hdGguZmxvb3IoZGF0YUZvck1lZGlhbnMubGVuZ3RoIC8gMildO1xuXHQgICAgICAgIGRhdGFbXCJtZWRpYW5zXCJdLnB1c2gobWVkaWFuKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gZGF0YTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLyBHUkFQSCBJTlRFUkZBQ0UgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVHcmFwaFR5cGVCdG5DbGljaygpIHtcblx0ICAgIHZhciB0eXBlID0gdGhpcy5kYXRhc2V0LnR5cGU7XG5cdCAgICB2YXIgYWN0aXZlRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF07XG5cdCAgICB2YXIgYWN0aXZlVHlwZSA9IGFjdGl2ZUVsZW0uZGF0YXNldC50eXBlO1xuXHRcblx0ICAgIGlmICh0eXBlID09PSBhY3RpdmVUeXBlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIGQzLnNlbGVjdChcIiNncmFwaC1saXN0XCIpLmNsYXNzZWQoXCJncmFwaC1cIiArIGFjdGl2ZVR5cGUsIGZhbHNlKS5jbGFzc2VkKFwiZ3JhcGgtXCIgKyB0eXBlLCB0cnVlKTtcblx0XG5cdCAgICBkMy5zZWxlY3QoYWN0aXZlRWxlbSkuY2xhc3NlZChcImFjdGl2ZVwiLCBmYWxzZSk7XG5cdCAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlR3JhcGhEaXYobGF0LCBsbmcpIHtcblx0ICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHQgICAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkxhdDogXCIgKyBsYXQgKyBcIiwgTG9uOiBcIiArIGxuZyk7XG5cdCAgICBkaXYuYXBwZW5kQ2hpbGQoY29udGVudCk7XG5cdCAgICBkaXYuY2xhc3NMaXN0LmFkZChcImdyYXBoLWVsZW1cIik7XG5cdCAgICBnZXREYXRhKGxhdCwgbG5nLCBkaXYpO1xuXHQgICAgcmV0dXJuIGRpdjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhd0dyYXBoKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcblx0ICAgIGRhdGEgPSBzcGxpdERhdGEoZGF0YSk7XG5cdCAgICB2YXIgcmVwcm9jZXNzZWREYXRhID0gcmVwcm9jZXNzRGF0YShkYXRhKTtcblx0ICAgIG1ha2VVcERvd25MaW5lR3JhcGgoZGF0YSwgZGl2LCByZXByb2Nlc3NlZERhdGFbXCJtZWRpYW5zXCJdKTtcblx0ICAgIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMocmVwcm9jZXNzZWREYXRhLCBkaXYsIGxhdCwgbG5nKTtcblx0ICAgIGRyYXdVcERvd25Qb2xhcldpdGhDaGVja2JveGVzQW5kVGhyZXNob2xkcyhyZXByb2Nlc3NlZERhdGEsIGRpdiwgbGF0LCBsbmcpO1xuXHQgICAgdmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXBoLWxpc3RcIik7XG5cdCAgICBsaXN0LmFwcGVuZENoaWxkKGRpdik7XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLyBUSU1FU0VSSUVTIExJTkUgR1JBUEggLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIG1ha2VVcERvd25MaW5lR3JhcGgoZGF0YSwgZGl2LCBhdmVyYWdlcykge1xuXHQgICAgLy8gU2V0IHRoZSBkaW1lbnNpb25zIG9mIHRoZSBjYW52YXMgLyBncmFwaFxuXHQgICAgdmFyIG1hcmdpbiA9IHsgdG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyNSB9LFxuXHQgICAgICAgIHdpZHRoID0gNTgwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsXG5cdCAgICAgICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cdFxuXHQgICAgLy8gU2V0IHRoZSByYW5nZXNcblx0ICAgIHZhciB4ID0gZDMuc2NhbGVUaW1lKCkucmFuZ2UoWzAsIHdpZHRoXSkuZG9tYWluKFtwYXJzZURhdGUoZGF0YVswXVswXSksIHBhcnNlRGF0ZShkYXRhW2RhdGEubGVuZ3RoIC0gMV1bMF0pXSk7XG5cdCAgICB2YXIgeSA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodCwgMF0pLmRvbWFpbihbMCwgMTAwXSk7XG5cdFxuXHQgICAgLy8gRGVmaW5lIHRoZSBheGVzXG5cdCAgICB2YXIgeEF4aXMgPSBkMy5heGlzQm90dG9tKHgpLnRpY2tzKDE2KS50aWNrRm9ybWF0KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIGQuZ2V0RnVsbFllYXIoKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciB5QXhpcyA9IGQzLmF4aXNMZWZ0KHkpLnRpY2tzKDYpO1xuXHRcblx0ICAgIC8vIERlZmluZSB0aGUgbGluZVxuXHQgICAgdmFyIHZhbHVlbGluZSA9IGQzLmxpbmUoKS54KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIHgocGFyc2VEYXRlKGRbMF0pKTtcblx0ICAgIH0pLnkoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4geShkWzFdKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KGRpdikuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJ0aW1lc2VyaWVzLWdyYXBoXCIsIHRydWUpO1xuXHRcblx0ICAgIC8vIEFkZHMgdGhlIHN2ZyBjYW52YXNcblx0ICAgIHZhciBzdmcgPSB3cmFwcGVyLmFwcGVuZChcInN2Z1wiKVxuXHQgICAgLy8uYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXG5cdCAgICAuYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSkuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgdyA9IHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQ7XG5cdCAgICAgICAgdmFyIGggPSBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbTtcblx0ICAgICAgICByZXR1cm4gJzAgMCAnICsgdyArICcgJyArIGg7XG5cdCAgICB9KS5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJykuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XG5cdFxuXHQgICAgc3ZnLmNhbGwodGlwKTtcblx0XG5cdCAgICAvLyBBZGQgdGhlIHZhbHVlbGluZSBwYXRoLlxuXHQgICAgZHJhd0xpbmVhclBhdGgoZGF0YSwgdmFsdWVsaW5lLCBzdmcpO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWCBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ4IGF4aXNcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpLmNhbGwoeEF4aXMpO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWSBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ5IGF4aXNcIikuY2FsbCh5QXhpcyk7XG5cdCAgICAvKipcclxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBwb2ludCBhdCBlYWNoIGRhdGEgcG9pbnRcclxuXHQgICAgICovXG5cdCAgICBkcmF3TGluZWFyUG9pbnRzKGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vIE9WRVJMQVBQSU5HIFRJTUVTRVJJRVMgTElORSBHUkFQSCAvLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBtYWtlVXBEb3duT3ZlcmxhcGluZ0xpbmVHcmFwaFdpdGhDaGVja2JveGVzKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcblx0ICAgIHZhciB5ZWFyID0gXCIyMDE1XCI7XG5cdFxuXHQgICAgdmFyIGNoYXJ0cyA9IHt9O1xuXHRcblx0ICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcblx0ICAgIHZhciBtYXJnaW4gPSB7IHRvcDogMzAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMCwgbGVmdDogMjUgfSxcblx0ICAgICAgICB3aWR0aCA9IDUwMCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxuXHQgICAgICAgIGhlaWdodCA9IDI3MCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xuXHRcblx0ICAgIHZhciBhdmVyYWdlcyA9IGRhdGEubWVkaWFucztcblx0XG5cdCAgICB2YXIgeCA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoWzAsIHdpZHRoXSkuZG9tYWluKFswLCAzNjVdKTtcblx0ICAgIHZhciB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSkuZG9tYWluKFswLCAxMDBdKTtcblx0XG5cdCAgICAvLyBEZWZpbmUgdGhlIGF4ZXNcblx0ICAgIGZ1bmN0aW9uIGZvcm1hdE1vbnRoVGljayhkKSB7XG5cdCAgICAgICAgcmV0dXJuIE1PTlRIX0xBQkVMU1soZCAtIDE1KSAvIDMwXTtcblx0ICAgIH1cblx0ICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeCkudGlja3MoMTEpLnRpY2tWYWx1ZXMoWzE1LCA0NSwgNzUsIDEwNSwgMTM1LCAxNjUsIDE5NSwgMjI1LCAyNTUsIDI4NSwgMzE1LCAzNDVdKS50aWNrRm9ybWF0KGZvcm1hdE1vbnRoVGljayk7XG5cdFxuXHQgICAgdmFyIHlBeGlzID0gZDMuYXhpc0xlZnQoeSkudGlja3MoNik7XG5cdFxuXHQgICAgLy8gRGVmaW5lIHRoZSBsaW5lXG5cdCAgICB2YXIgdmFsdWVsaW5lID0gZDMubGluZSgpLngoZnVuY3Rpb24gKGQsIGkpIHtcblx0ICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShkKSA/IHgocGFyc2VKdWxpYW5EYXkoZFswXSkpIDogeChpICogOCArIDMpO1xuXHQgICAgfSkueShmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGQpID8geShkWzFdKSA6IHkoZCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwib3ZlcmxhcHBpbmctZ3JhcGhcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgLy8gQWRkcyB0aGUgc3ZnIGNhbnZhc1xuXHQgICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHcgPSB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0O1xuXHQgICAgICAgIHZhciBoID0gaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b207XG5cdCAgICAgICAgcmV0dXJuICcwIDAgJyArIHcgKyAnICcgKyBoO1xuXHQgICAgfSkuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWlkWU1pZCcpXG5cdCAgICAvLy5hdHRyKFwid2lkdGhcIiwgd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodClcblx0ICAgIC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXG5cdCAgICAuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XG5cdFxuXHQgICAgc3ZnLmNhbGwodGlwKTtcblx0XG5cdCAgICAvLyBBZGQgdGhlIFggQXhpc1xuXHQgICAgc3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwieCBheGlzXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGhlaWdodCArIFwiKVwiKS5jYWxsKHhBeGlzKTtcblx0XG5cdCAgICAvLyBBZGQgdGhlIFkgQXhpc1xuXHQgICAgc3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpLmNhbGwoeUF4aXMpO1xuXHRcblx0ICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl0gPSB7XG5cdCAgICAgICAgXCJwYXRoXCI6IGRyYXdMaW5lYXJQYXRoKGRhdGFbXCJtZWRpYW5zXCJdLCB2YWx1ZWxpbmUsIHN2Zylcblx0ICAgIH07XG5cdFxuXHQgICAgY2hhcnRzW3llYXJdID0ge1xuXHQgICAgICAgIFwicGF0aFwiOiBkcmF3TGluZWFyUGF0aChkYXRhW3llYXJdLCB2YWx1ZWxpbmUsIHN2Zylcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXHJcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XHJcblx0ICAgICAqL1xuXHQgICAgY2hhcnRzW1wibWVkaWFuc1wiXVtcInBvaW50c1wiXSA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtcIm1lZGlhbnNcIl0sIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdCAgICBjaGFydHNbeWVhcl1bXCJwb2ludHNcIl0gPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbeWVhcl0sIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdFxuXHQgICAgdmFyIGlucHV0d3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJpbnB1dC13cmFwcGVyXCIsIHRydWUpO1xuXHRcblx0ICAgIGRhdGEua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICBjcmVhdGVDaGVja2JveChpbnB1dHdyYXBwZXIsIGtleSwgXCJ0aW1lc2VyaWVzXCIsIHllYXIsIGNoYXJ0cywgZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzLCBsYXQsIGxuZyk7XG5cdCAgICB9KTtcblx0XG5cdCAgICBjcmVhdGVDaGVja2JveChpbnB1dHdyYXBwZXIsIFwibWVkaWFuc1wiLCBcInRpbWVzZXJpZXNcIiwgXCJtZWRpYW5zXCIsIGNoYXJ0cywgZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzLCBsYXQsIGxuZyk7XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gUE9MQVIgR1JBUEggLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIGRyYXdVcERvd25Qb2xhcldpdGhDaGVja2JveGVzQW5kVGhyZXNob2xkcyhkYXRhLCBkaXYsIGxhdCwgbG5nKSB7XG5cdCAgICB2YXIgeWVhciA9IFwiMjAxNVwiO1xuXHQgICAgdmFyIHdpZHRoID0gNDkwLFxuXHQgICAgICAgIGhlaWdodCA9IDQ5MCxcblx0ICAgICAgICByYWRpdXMgPSBNYXRoLm1pbih3aWR0aCwgaGVpZ2h0KSAvIDIgLSAzMDtcblx0XG5cdCAgICB2YXIgYXZlcmFnZXMgPSBkYXRhW1wibWVkaWFuc1wiXTtcblx0ICAgIHZhciBjZW50ZXIgPSBmaW5kUG9sYXJDZW50ZXIoZGF0YSk7XG5cdCAgICB2YXIgdGhyZXNob2xkcyA9IGZpbmRQb2xhclRocmVzaG9sZHMoYXZlcmFnZXMsIGNlbnRlclsxXVswXSk7XG5cdFxuXHQgICAgLyoqXHJcblx0ICAgICAqIFNldHMgdXAgc2NhbGluZyBvZiBkYXRhLiBXZSBrbm93IHRoYXQgdGhlIG5kdmkgdmFsdWVzIGZhbGwgYmV0d2VlblxyXG5cdCAgICAgKiAwICYgMTAwIHNvIHdlIHNldCBvdXIgZG9tYWluIHRvIHRoYXQuIFRoZSByYW5nZSBjb250cm9scyB3aGVyZSB0aGVcclxuXHQgICAgICogcG9pbnRzIHdpbGwgbGllIGluIG91ciBncmFwaCwgc28gd2Ugc2V0IHRoZW0gdG8gYmUgYmV0d2VlbiAwIGFuZCB0aGVcclxuXHQgICAgICogcmFkaXVzLlxyXG5cdCAgICAgKi9cblx0ICAgIHZhciByID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIDEwMF0pLnJhbmdlKFswLCByYWRpdXNdKTtcblx0XG5cdCAgICAvKipcclxuXHQgICAgICogZnVuY3Rpb24gd2hpY2ggd2lsbCBkcmF3IGVhY2ggcG9pbnQuIFRvIGNvbXB1dGUgdGhlIGRpc3RhbmNlIGZyb20gdGhlXHJcblx0ICAgICAqIGNlbnRlciBlYWNoIHBvaW50IGlzIHdlIHBhc3MgdGhlIGRhdGFwb2ludCB0byB0aGUgZnVuY3Rpb24gZGVmaW5lZCBhYm92ZS5cclxuXHQgICAgICogVG8gZGV0ZXJtaW5lIHRoZSBhbmdsZSBmcm9tIHRoZSBvcmlnaW4gd2UgbmVlZCB0byBjb252ZXJ0IHRoZSBkYXkgdG9cclxuXHQgICAgICogcmFkaWFucywgc28gd2UgY29udmVydCB0aGUgZGF5IHRvIGEgbnVtYmVyIGJldHdlZW4gMCAmIDEgYW5kIHRoZW4gbXVsdGlwbHlcclxuXHQgICAgICogaXQgYnkgMiBwaS5cclxuXHQgICAgICovXG5cdCAgICB2YXIgbGluZSA9IGQzLnJhZGlhbExpbmUoKS5yYWRpdXMoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShkKSA/IHIoZFsxXSkgOiByKGQpO1xuXHQgICAgfSkuYW5nbGUoZnVuY3Rpb24gKGQsIGkpIHtcblx0ICAgICAgICB2YXIgZGF5ID0gQXJyYXkuaXNBcnJheShkKSA/IHBhcnNlSnVsaWFuRGF5KGRbMF0pIDogaSAqIDggKyAzO1xuXHQgICAgICAgIHJldHVybiAoZGF5IC0gMSkgJSAzNjUgLyAzNjUgKiAoMiAqIE1hdGguUEkpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXHJcblx0ICAgICAqIFNldHMgdXAgdGhlIGNhbnZhcyB3aGVyZSB0aGUgY2lyY2xlIHdpbGwgYmUgZHJhd24uXHJcblx0ICAgICAqL1xuXHQgICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcInBvbGFyLWdyYXBoXCIsIHRydWUpO1xuXHQgICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpXG5cdCAgICAvLy5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG5cdCAgICAvLy5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodClcblx0ICAgIC5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiAnMCAwICcgKyB3aWR0aCArICcgJyArIGhlaWdodDtcblx0ICAgIH0pLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB3aWR0aCAvIDIgKyBcIixcIiArIGhlaWdodCAvIDIgKyBcIilcIik7XG5cdFxuXHQgICAgc3ZnLmNhbGwodGlwKTtcblx0XG5cdCAgICAvKipcclxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBiaWcgY2lyY2xlcyBvZiB0aGUgZ3JhcGggJiB0aGVpciBsYWJlbHNcclxuXHQgICAgICovXG5cdCAgICB2YXIgZ3IgPSBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJyIGF4aXNcIikuc2VsZWN0QWxsKFwiZ1wiKS5kYXRhKHIudGlja3MoNSkuc2xpY2UoMSkpLmVudGVyKCkuYXBwZW5kKFwiZ1wiKTtcblx0XG5cdCAgICBnci5hcHBlbmQoXCJjaXJjbGVcIikuYXR0cihcInJcIiwgcik7XG5cdFxuXHQgICAgZ3IuYXBwZW5kKFwidGV4dFwiKS5hdHRyKFwieVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiAtcihkKSAtIDQ7XG5cdCAgICB9KS5hdHRyKFwidHJhbnNmb3JtXCIsIFwicm90YXRlKDE1KVwiKS5zdHlsZShcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpLnRleHQoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZDtcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGxhYmVscyBmb3IgZWFjaCBtb250aCBhbmQgdGhlIGxpbmVzXHJcblx0ICAgICAqIHRoYXQgZ28gb3V0IHRvIHRoZW0uXHJcblx0ICAgICAqL1xuXHQgICAgdmFyIGdhID0gc3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwiYSBheGlzXCIpLnNlbGVjdEFsbChcImdcIikuZGF0YShkMy5yYW5nZSgwLCAzNjAsIDMwKSkuZW50ZXIoKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gXCJyb3RhdGUoXCIgKyAoZCAtIDkwKSArIFwiKVwiO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgZ2EuYXBwZW5kKFwibGluZVwiKS5hdHRyKFwieDJcIiwgcmFkaXVzKTtcblx0XG5cdCAgICBnYS5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ4XCIsIHJhZGl1cyArIDYpLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJlbmRcIiA6IG51bGw7XG5cdCAgICB9KS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIGQgPCAzNjAgJiYgZCA+IDE4MCA/IFwicm90YXRlKDE4MCBcIiArIChyYWRpdXMgKyA2KSArIFwiLDApXCIgOiBudWxsO1xuXHQgICAgfSkudGV4dChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBNT05USF9MQUJFTFNbZCAvIDMwXTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBEcmF3cyB0aGUgdGhyZXNob2xkIGxpbmVzXHJcblx0ICAgICAqL1xuXHQgICAgdmFyIHRocmVzaG9sZEVsZW0gPSBzdmcuYXBwZW5kKFwiZ1wiKS5zZWxlY3RBbGwoXCJnXCIpLmRhdGEodGhyZXNob2xkcykuZW50ZXIoKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gXCJyb3RhdGUoXCIgKyAoZC5kYXRhWzFdWzBdIC0gOTApICsgXCIpXCI7XG5cdCAgICB9KTtcblx0XG5cdCAgICB0aHJlc2hvbGRFbGVtLmFwcGVuZChcImxpbmVcIikuYXR0cihcImNsYXNzXCIsIFwibGluZVwiKS5hdHRyKFwieDJcIiwgcmFkaXVzKTtcblx0XG5cdCAgICB0aHJlc2hvbGRFbGVtLmFwcGVuZChcInRleHRcIikuYXR0cihcInhcIiwgcmFkaXVzICsgNikuYXR0cihcInlcIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gKGQuZGF0YVsxXVswXSAtIDEpICUgMzY1IC8gMzY1ICogKDIgKiBNYXRoLlBJKTtcblx0ICAgIH0pLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdO3JldHVybiBkYXkgPCAzNjAgJiYgZGF5ID4gMTgwID8gXCJlbmRcIiA6IG51bGw7XG5cdCAgICB9KS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgdmFyIGRheSA9IGQuZGF0YVsxXVswXTtyZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IFwicm90YXRlKDE4MCBcIiArIChyYWRpdXMgKyA2KSArIFwiLDApXCIgOiBudWxsO1xuXHQgICAgfSkudGV4dChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkLmxhYmVsO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXHJcblx0ICAgICAqIERyYXdzIHRoZSBsaW5lIHRvIHRoZSBjZW50ZXIgb2YgdGhlIGRhdGFcclxuXHQgICAgICovXG5cdCAgICB2YXIgY2VudGVyRGF5ID0gY2VudGVyWzFdWzBdO1xuXHQgICAgdmFyIGNlbnRlckRheU9wcG9zaXRlID0gKGNlbnRlckRheSArIDM2NSAvIDIpICUgMzY1O1xuXHQgICAgdmFyIGNlbnRlckRheURhdGEgPSBbY2VudGVyRGF5LCAxMDBdO1xuXHQgICAgdmFyIGNlbnRlckRheU9wcG9zaXRlRGF0YSA9IFtjZW50ZXJEYXlPcHBvc2l0ZSwgMTAwXTtcblx0ICAgIHZhciBncm93aW5nU2Vhc29uRGF0YSA9IFtjZW50ZXJEYXlEYXRhLCBjZW50ZXJEYXlPcHBvc2l0ZURhdGFdO1xuXHRcblx0ICAgIGRyYXdQb2xhclBhdGgoZ3Jvd2luZ1NlYXNvbkRhdGEsIGxpbmUsIHN2ZykuY2xhc3NlZChcImdyb3dpbmctc2Vhc29uLWxpbmVcIiwgXCJ0cnVlXCIpO1xuXHRcblx0ICAgIGRyYXdQb2xhclBhdGgoY2VudGVyLCBsaW5lLCBzdmcpLmNsYXNzZWQoXCJjZW50ZXItbGluZVwiLCBcInRydWVcIik7XG5cdFxuXHQgICAgc3ZnLnNlbGVjdEFsbChcInBvaW50XCIpLmRhdGEoW2NlbnRlclsxXV0pLmVudGVyKCkuYXBwZW5kKFwiY2lyY2xlXCIpLmF0dHIoXCJjbGFzc1wiLCBcInBvaW50XCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtkXSkuc2xpY2UoMSkuc2xpY2UoMCwgLTEpO1xuXHQgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGNvb3JzICsgXCIpXCI7XG5cdCAgICB9KS5hdHRyKFwiclwiLCAyLjUpLmF0dHIoXCJzdHJva2VcIiwgXCIjMDAwXCIpLmF0dHIoXCJmaWxsXCIsIFwiI2RkODJkMlwiKS5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHRpcC5zaG93KFwiQ2VudGVyOiBcIiArIFN0cmluZyhkWzFdKS5zdWJzdHJpbmcoMCwgNykpO1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCA1KTtcblx0ICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjJweFwiKTtcblx0ICAgICAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblx0ICAgIH0pLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB0aXAuaGlkZSgpO1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCAyLjUpO1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMXB4XCIpO1xuXHQgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIGNoYXJ0cyA9IHt9O1xuXHRcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGxpbmUgdGhhdCB0aGUgZGF0YSBmb2xsb3dzXHJcblx0ICAgICAqL1xuXHQgICAgY2hhcnRzW1wibWVkaWFuc1wiXSA9IHtcblx0ICAgICAgICBcInBhdGhcIjogZHJhd1BvbGFyUGF0aChhdmVyYWdlcywgbGluZSwgc3ZnKVxuXHQgICAgfTtcblx0XG5cdCAgICBjaGFydHNbeWVhcl0gPSB7XG5cdCAgICAgICAgXCJwYXRoXCI6IGRyYXdQb2xhclBhdGgoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnKVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcclxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBwb2ludCBhdCBlYWNoIGRhdGEgcG9pbnRcclxuXHQgICAgICovXG5cdCAgICBjaGFydHMubWVkaWFucy5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGF2ZXJhZ2VzLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0ICAgIGNoYXJ0c1t5ZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbeWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHRcblx0ICAgIHZhciBpbnB1dHdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwiaW5wdXQtd3JhcHBlclwiLCB0cnVlKTtcblx0XG5cdCAgICBkYXRhLmtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgdmFyIGNoZWNrYm94V3JhcHBlciA9IGlucHV0d3JhcHBlci5hcHBlbmQoXCJkaXZcIik7XG5cdFxuXHQgICAgICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJpbnB1dFwiKS5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpLmF0dHIoXCJpZFwiLCBcInBvbGFyLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKS5hdHRyKFwidmFsdWVcIiwga2V5KS5wcm9wZXJ0eShcImNoZWNrZWRcIiwga2V5ID09PSB5ZWFyID8gdHJ1ZSA6IGZhbHNlKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgICAgICB2YXIgbmV3WWVhciA9IHRoaXMudmFsdWU7XG5cdCAgICAgICAgICAgIGlmICghdGhpcy5jaGVja2VkKSB7XG5cdCAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXSA9IHt9O1xuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd1BvbGFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImxhYmVsXCIpLnRleHQoa2V5KS5hdHRyKFwiZm9yXCIsIFwicG9sYXItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIGNoZWNrYm94V3JhcHBlciA9IGlucHV0d3JhcHBlci5hcHBlbmQoXCJkaXZcIik7XG5cdFxuXHQgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImlucHV0XCIpLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIikuYXR0cihcImlkXCIsIFwicG9sYXItYXZlcmFnZS1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSkuYXR0cihcInZhbHVlXCIsIFwibWVkaWFuc1wiKS5wcm9wZXJ0eShcImNoZWNrZWRcIiwgdHJ1ZSkub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICB2YXIgbmV3WWVhciA9IHRoaXMudmFsdWU7XG5cdCAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGgucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMucmVtb3ZlKCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgaWYgKCFjaGFydHMuaGFzT3duUHJvcGVydHkobmV3WWVhcikpIHtcblx0ICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXSA9IHt9O1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdQb2xhclBhdGgoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnKTtcblx0XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKS50ZXh0KFwiQmFzZWxpbmVcIikuYXR0cihcImZvclwiLCBcInBvbGFyLWF2ZXJhZ2UtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuXHRcblx0ICAgIHZhciB0aHJlc2hvbGRDaGVja2JveCA9IGlucHV0d3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcInRocmVzaG9sZC1jaGVja2JveFwiLCB0cnVlKTtcblx0XG5cdCAgICB0aHJlc2hvbGRDaGVja2JveC5hcHBlbmQoXCJpbnB1dFwiKS5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpLmF0dHIoXCJpZFwiLCBcInRocmVzaG9sZC1jaGVja2JveC1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSkucHJvcGVydHkoXCJjaGVja2VkXCIsIHRydWUpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgdGhyZXNob2xkRWxlbS5zdHlsZShcIm9wYWNpdHlcIiwgdGhpcy5jaGVja2VkID8gMSA6IDApO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdGhyZXNob2xkQ2hlY2tib3guYXBwZW5kKFwibGFiZWxcIikudGV4dChcIlRocmVzaG9sZHNcIikuYXR0cihcImZvclwiLCBcInRocmVzaG9sZC1jaGVja2JveC1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG5cdH1cblx0XG5cdC8qIFBPTEFSIEdSQVBIIEhFTFBFUlMgKi9cblx0XG5cdGZ1bmN0aW9uIGZpbmRQb2xhckNlbnRlcihkYXRhKSB7XG5cdCAgICB2YXIgaSwgaiwgbGVuZ3RoLCBhcnI7XG5cdCAgICB2YXIgdG90YWxTdW0gPSAwO1xuXHQgICAgdmFyIGluY29tcGxldGVZZWFycyA9IDA7XG5cdCAgICB2YXIgc3VtO1xuXHQgICAgbGVuZ3RoID0gNDY7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGRhdGEua2V5cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGFyciA9IGRhdGFbZGF0YS5rZXlzW2ldXTtcblx0ICAgICAgICBpZiAoYXJyLmxlbmd0aCAhPT0gbGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIGluY29tcGxldGVZZWFycysrO1xuXHQgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc3VtID0gMDtcblx0ICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGVuZ3RoIC8gMjsgaisrKSB7XG5cdCAgICAgICAgICAgIHN1bSArPSBhcnJbal1bMV0gLSBhcnJbaiArIDIzXVsxXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc3VtID0gc3VtIC8gMjM7XG5cdCAgICAgICAgdG90YWxTdW0gKz0gc3VtO1xuXHQgICAgfVxuXHQgICAgdG90YWxTdW0gPSBNYXRoLmFicyh0b3RhbFN1bSkgLyAoZGF0YS5rZXlzLmxlbmd0aCAtIGluY29tcGxldGVZZWFycyk7XG5cdFxuXHQgICAgdmFyIGFyZWFEaWZmID0gMTAwMDAwMDtcblx0ICAgIHZhciBjaGVja0RpZmY7XG5cdCAgICB2YXIgYXJlYUluZGV4ID0gMDtcblx0ICAgIHZhciBsZWZ0QXJlYSwgcmlnaHRBcmVhO1xuXHQgICAgdmFyIGF2Z3MgPSBkYXRhLm1lZGlhbnM7XG5cdCAgICB2YXIgaywgY291bnRlcjtcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoIC8gMjsgaSsrKSB7XG5cdCAgICAgICAgbGVmdEFyZWEgPSAwO1xuXHQgICAgICAgIHJpZ2h0QXJlYSA9IDA7XG5cdCAgICAgICAgZm9yIChjb3VudGVyID0gMDsgY291bnRlciA8IGxlbmd0aCAvIDI7IGNvdW50ZXIrKykge1xuXHQgICAgICAgICAgICBqID0gKGkgKyBjb3VudGVyKSAlIDQ2O1xuXHQgICAgICAgICAgICBrID0gKGogKyAyMykgJSA0Njtcblx0XG5cdCAgICAgICAgICAgIGxlZnRBcmVhICs9IHBhcnNlSW50KGF2Z3Nbal0sIDEwKTtcblx0ICAgICAgICAgICAgcmlnaHRBcmVhICs9IHBhcnNlSW50KGF2Z3Nba10sIDEwKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2hlY2tEaWZmID0gTWF0aC5hYnMobGVmdEFyZWEgLSByaWdodEFyZWEpO1xuXHQgICAgICAgIGlmIChjaGVja0RpZmYgPCBhcmVhRGlmZikge1xuXHQgICAgICAgICAgICBhcmVhRGlmZiA9IGNoZWNrRGlmZjtcblx0ICAgICAgICAgICAgYXJlYUluZGV4ID0gaTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGZpcnN0UmFkaXVzID0gcGFyc2VJbnQoYXZnc1thcmVhSW5kZXhdLCAxMCk7XG5cdCAgICB2YXIgc2Vjb25kUmFkaXVzID0gcGFyc2VJbnQoLWF2Z3NbYXJlYUluZGV4ICsgMjNdLCAxMCk7XG5cdFxuXHQgICAgdmFyIGZpcnN0RGlmZiA9IE1hdGguYWJzKHRvdGFsU3VtIC0gZmlyc3RSYWRpdXMpIC0gTWF0aC5hYnModG90YWxTdW0gLSBzZWNvbmRSYWRpdXMpO1xuXHQgICAgdmFyIHNlY29uZERpZmYgPSBNYXRoLmFicygtdG90YWxTdW0gLSBmaXJzdFJhZGl1cykgLSBNYXRoLmFicygtdG90YWxTdW0gLSBzZWNvbmRSYWRpdXMpO1xuXHQgICAgaWYgKHNlY29uZERpZmYgPiBmaXJzdERpZmYpIHtcblx0ICAgICAgICBhcmVhSW5kZXggPSBhcmVhSW5kZXggKyAyMztcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgY2lyY2xlY2VudGVyID0gWzAsIDBdO1xuXHQgICAgdmFyIGRhdGFjZW50ZXIgPSBbYXJlYUluZGV4ICogOCArIDMsIHRvdGFsU3VtXTtcblx0XG5cdCAgICByZXR1cm4gW2NpcmNsZWNlbnRlciwgZGF0YWNlbnRlcl07XG5cdH1cblx0XG5cdC8qKlxyXG5cdCAqIHN0YXJ0RGF5IGlzIGFjdHVhbGx5IHRoZSBzZWFzb25hbGl0eSBpbmRleCwgaWYgaXQgb2NjdXJzIGFmdGVyIGp1bHkgaXQgc2hvdWxkIGJlIGZsaXBwZWRcclxuXHQgKi9cblx0ZnVuY3Rpb24gZmluZFBvbGFyVGhyZXNob2xkcyhkYXRhLCBzdGFydERheSkge1xuXHQgICAgdmFyIHN0YXJ0SW5kZXggPSBNYXRoLmZsb29yKChzdGFydERheSAtIDMpIC8gOCk7XG5cdCAgICBpZiAoc3RhcnRJbmRleCA+IDIyKSB7XG5cdCAgICAgICAgc3RhcnRJbmRleCA9IHN0YXJ0SW5kZXggLSAyMztcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaSwgaiwgbGVuZ3RoLCBhcnI7XG5cdCAgICB2YXIgdG90YWxTdW0gPSAwO1xuXHQgICAgdmFyIHN1bTtcblx0ICAgIGxlbmd0aCA9IDQ2O1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGogPSAoc3RhcnRJbmRleCArIGkpICUgbGVuZ3RoO1xuXHQgICAgICAgIHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZmlmdGVlblRocmVzaG9sZCA9IHRvdGFsU3VtICogLjE1O1xuXHQgICAgdmFyIGVpZ2h0eVRocmVzaG9sZCA9IHRvdGFsU3VtICogLjgwO1xuXHQgICAgdmFyIGVpZ2h0eWZpdmVUaHJlc2hvbGQgPSB0b3RhbFN1bSAqIC44NTtcblx0ICAgIHZhciBmaWZ0ZWVuSW5kZXhGb3VuZCA9IGZhbHNlLFxuXHQgICAgICAgIGVpZ2h0eUluZGV4Rm91bmQgPSBmYWxzZSxcblx0ICAgICAgICBlaWdodHlmaXZlSW5kZXhGb3VuZCA9IGZhbHNlO1xuXHQgICAgdmFyIGZpZnRlZW5JbmRleCwgZWlnaHR5SW5kZXgsIGVpZ2h0eWZpdmVJbmRleDtcblx0XG5cdCAgICB0b3RhbFN1bSA9IDA7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBqID0gKHN0YXJ0SW5kZXggKyBpKSAlIGxlbmd0aDtcblx0ICAgICAgICB0b3RhbFN1bSArPSBwYXJzZUludChkYXRhW2pdLCAxMCk7XG5cdCAgICAgICAgaWYgKCFmaWZ0ZWVuSW5kZXhGb3VuZCAmJiB0b3RhbFN1bSA+IGZpZnRlZW5UaHJlc2hvbGQpIHtcblx0ICAgICAgICAgICAgZmlmdGVlbkluZGV4ID0gajtcblx0ICAgICAgICAgICAgZmlmdGVlbkluZGV4Rm91bmQgPSB0cnVlO1xuXHQgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFlaWdodHlJbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZWlnaHR5VGhyZXNob2xkKSB7XG5cdCAgICAgICAgICAgIGVpZ2h0eUluZGV4ID0gajtcblx0ICAgICAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IHRydWU7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIWVpZ2h0eWZpdmVJbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZWlnaHR5Zml2ZVRocmVzaG9sZCkge1xuXHQgICAgICAgICAgICBlaWdodHlmaXZlSW5kZXggPSBqO1xuXHQgICAgICAgICAgICBlaWdodHlmaXZlSW5kZXhGb3VuZCA9IHRydWU7XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgY2lyY2xlQ2VudGVyID0gWzAsIDBdO1xuXHRcblx0ICAgIHZhciBmaWZ0ZWVuRW5kID0gW2ZpZnRlZW5JbmRleCAqIDggKyAzLCAxMDBdO1xuXHQgICAgdmFyIGVpZ2h0eUVuZCA9IFtlaWdodHlJbmRleCAqIDggKyAzLCAxMDBdO1xuXHQgICAgdmFyIGVpZ2h0eWZpdmVFbmQgPSBbZWlnaHR5Zml2ZUluZGV4ICogOCArIDMsIDEwMF07XG5cdFxuXHQgICAgcmV0dXJuIFt7XG5cdCAgICAgICAgXCJsYWJlbFwiOiBcIjE1JVwiLFxuXHQgICAgICAgIFwiZGF0YVwiOiBbY2lyY2xlQ2VudGVyLCBmaWZ0ZWVuRW5kXVxuXHQgICAgfSwge1xuXHQgICAgICAgIFwibGFiZWxcIjogXCI4MCVcIixcblx0ICAgICAgICBcImRhdGFcIjogW2NpcmNsZUNlbnRlciwgZWlnaHR5RW5kXVxuXHQgICAgfSwge1xuXHQgICAgICAgIFwibGFiZWxcIjogXCI4NSVcIixcblx0ICAgICAgICBcImRhdGFcIjogW2NpcmNsZUNlbnRlciwgZWlnaHR5Zml2ZUVuZF1cblx0ICAgIH1dO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSEVMUEVSUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gZHJhd0xpbmVhclBhdGgoZGF0YSwgbGluZSwgc3ZnKSB7XG5cdCAgICByZXR1cm4gc3ZnLmFwcGVuZChcInBhdGhcIikuYXR0cihcImNsYXNzXCIsIFwibGluZVwiKS5hdHRyKFwiZFwiLCBsaW5lKGRhdGEpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhd1BvbGFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcblx0ICAgIHJldHVybiBzdmcuYXBwZW5kKFwicGF0aFwiKS5kYXR1bShkYXRhKS5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpLmF0dHIoXCJkXCIsIGxpbmUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmF3TGluZWFyUG9pbnRzKGRhdGEsIGxpbmUsIHN2ZywgYXZlcmFnZXMpIHtcblx0ICAgIHJldHVybiBzdmcuc2VsZWN0QWxsKFwicG9pbnRcIikuZGF0YShkYXRhKS5lbnRlcigpLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiY2xhc3NcIiwgXCJwb2ludFwiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkLCBpKSB7XG5cdCAgICAgICAgdmFyIHBvaW50ID0gQXJyYXkuaXNBcnJheShkKSA/IGQgOiBbaSAqIDggKyAzLCBkXTtcblx0ICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtwb2ludF0pLnNsaWNlKDEpLnNsaWNlKDAsIC0xKTtcblx0ICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBjb29ycyArIFwiKVwiO1xuXHQgICAgfSkuYXR0cihcInJcIiwgMykuYXR0cihcInN0cm9rZVwiLCBcIiMwMDBcIikuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24gKGQsIGkpIHtcblx0ICAgICAgICB2YXIgdmFsID0gQXJyYXkuaXNBcnJheShkKSA/IGRbMV0gOiBkO1xuXHQgICAgICAgIHJldHVybiBjb21wdXRlQ29sb3IodmFsLCBhdmVyYWdlc1tpICUgNDZdLCAzKTtcblx0ICAgIH0pLm9uKFwibW91c2VvdmVyXCIsIGhhbmRsZVBvaW50TW91c2VvdmVyKS5vbihcIm1vdXNlb3V0XCIsIGhhbmRsZVBvaW50TW91c2VvdXQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVQb2ludE1vdXNlb3ZlcihkKSB7XG5cdCAgICB2YXIgdGlwU3RyaW5nID0gQXJyYXkuaXNBcnJheShkKSA/IGZvcm1hdERhdGUoZFswXSkgKyBcIjogXCIgKyBkWzFdIDogXCJBdmVyYWdlOiBcIiArIGQ7XG5cdCAgICB0aXAuc2hvdyh0aXBTdHJpbmcpO1xuXHQgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDUpO1xuXHQgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIycHhcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdXQoZCkge1xuXHQgICAgdGlwLmhpZGUoKTtcblx0ICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCAzKTtcblx0ICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMXB4XCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVDaGVja2JveCh3cmFwcGVyLCBrZXksIHR5cGUsIHllYXIsIGNoYXJ0cywgZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpIHtcblx0ICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKS5hdHRyKFwidmFsdWVcIiwga2V5KS5wcm9wZXJ0eShcImNoZWNrZWRcIiwga2V5ID09PSB5ZWFyID8gdHJ1ZSA6IGZhbHNlKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3TGluZWFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwibGFiZWxcIikudGV4dChrZXkpLmF0dHIoXCJmb3JcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY29tcHV0ZUNvbG9yKHZhbHVlLCBtZWRpYW4sIHNjYWxlKSB7XG5cdCAgICB2YXIgZGlmZiA9IHZhbHVlIC0gbWVkaWFuO1xuXHQgICAgdmFyIHBlcmNlbnRfZGlmZiA9IE1hdGguYWJzKGRpZmYpIC8gbWVkaWFuICogMTAwICogc2NhbGU7XG5cdCAgICB2YXIgbGlnaHRuZXNzID0gMTAwIC0gcGVyY2VudF9kaWZmICsgXCIlXCI7XG5cdFxuXHQgICAgaWYgKGRpZmYgPiAwKSB7XG5cdCAgICAgICAgcmV0dXJuIFwiaHNsKDgsIDc5JSwgXCIgKyBsaWdodG5lc3MgKyBcIilcIjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIFwiaHNsKDIxOSwgNzklLCBcIiArIGxpZ2h0bmVzcyArIFwiKVwiO1xuXHQgICAgfVxuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIERBVEUgSEVMUEVSUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlRGF0ZShkYXRlKSB7XG5cdCAgICBkYXRlID0gZGF0ZS50b1N0cmluZygpO1xuXHQgICAgdmFyIHllYXIgPSBkYXRlLnN1YnN0cmluZygwLCA0KTtcblx0ICAgIHZhciBtb250aCA9IHBhcnNlSW50KGRhdGUuc3Vic3RyaW5nKDQsIDYpLCAxMCkgLSAxO1xuXHQgICAgdmFyIGRheSA9IGRhdGUuc3Vic3RyaW5nKDYsIDgpO1xuXHRcblx0ICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGFyc2VKdWxpYW5EYXkoZGF0ZSkge1xuXHQgICAgaWYgKHR5cGVvZiBkYXRlID09PSBcInN0cmluZ1wiKSB7XG5cdCAgICAgICAgZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcblx0ICAgICAgICByZXR1cm4gZGF0ZS5nZXRET1koKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGRhdGU7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZSkge1xuXHQgICAgaWYgKGRhdGUgPT09IFwiQXZlcmFnZVwiKSB7XG5cdCAgICAgICAgcmV0dXJuIGRhdGU7XG5cdCAgICB9XG5cdFxuXHQgICAgZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcblx0ICAgIHJldHVybiBmb3JtYXRNb250aChkYXRlLmdldE1vbnRoKCkpICsgXCIgXCIgKyBvcmRpbmFsX3N1ZmZpeF9vZihkYXRlLmdldERhdGUoKSkgKyBcIiwgXCIgKyBkYXRlLmdldEZ1bGxZZWFyKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdE1vbnRoKG1vbnRoKSB7XG5cdCAgICBzd2l0Y2ggKG1vbnRoKSB7XG5cdCAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJKYW4uXCI7XG5cdCAgICAgICAgY2FzZSAxOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJGZWIuXCI7XG5cdCAgICAgICAgY2FzZSAyOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJNYXIuXCI7XG5cdCAgICAgICAgY2FzZSAzOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJBcHIuXCI7XG5cdCAgICAgICAgY2FzZSA0OlxuXHQgICAgICAgICAgICByZXR1cm4gXCJNYXlcIjtcblx0ICAgICAgICBjYXNlIDU6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkp1bi5cIjtcblx0ICAgICAgICBjYXNlIDY6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkp1bC5cIjtcblx0ICAgICAgICBjYXNlIDc6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkF1Zy5cIjtcblx0ICAgICAgICBjYXNlIDg6XG5cdCAgICAgICAgICAgIHJldHVybiBcIlNlcC5cIjtcblx0ICAgICAgICBjYXNlIDk6XG5cdCAgICAgICAgICAgIHJldHVybiBcIk9jdC5cIjtcblx0ICAgICAgICBjYXNlIDEwOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJOb3YuXCI7XG5cdCAgICAgICAgY2FzZSAxMTpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiRGVjLlwiO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBvcmRpbmFsX3N1ZmZpeF9vZihkYXkpIHtcblx0ICAgIHZhciBqID0gZGF5ICUgMTAsXG5cdCAgICAgICAgayA9IGRheSAlIDEwMDtcblx0ICAgIGlmIChqID09PSAxICYmIGsgIT09IDExKSB7XG5cdCAgICAgICAgcmV0dXJuIGRheSArIFwic3RcIjtcblx0ICAgIH1cblx0ICAgIGlmIChqID09PSAyICYmIGsgIT09IDEyKSB7XG5cdCAgICAgICAgcmV0dXJuIGRheSArIFwibmRcIjtcblx0ICAgIH1cblx0ICAgIGlmIChqID09PSAzICYmIGsgIT09IDEzKSB7XG5cdCAgICAgICAgcmV0dXJuIGRheSArIFwicmRcIjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBkYXkgKyBcInRoXCI7XG5cdH1cblx0XG5cdHZhciBNT05USF9MQUJFTFMgPSB7XG5cdCAgICAwOiBcIkphblwiLFxuXHQgICAgMTogXCJGZWJcIixcblx0ICAgIDI6IFwiTWFyXCIsXG5cdCAgICAzOiBcIkFwclwiLFxuXHQgICAgNDogXCJNYXlcIixcblx0ICAgIDU6IFwiSnVuXCIsXG5cdCAgICA2OiBcIkp1bFwiLFxuXHQgICAgNzogXCJBdWdcIixcblx0ICAgIDg6IFwiU2VwXCIsXG5cdCAgICA5OiBcIk9jdFwiLFxuXHQgICAgMTA6IFwiTm92XCIsXG5cdCAgICAxMTogXCJEZWNcIlxuXHR9O1xuXG4vKioqLyB9LFxuLyogMjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IEJpbmRUYWJFdmVudHM7XG5cdFxuXHR2YXIgX3BhbmVsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdFxuXHRmdW5jdGlvbiBCaW5kVGFiRXZlbnRzKCkge1xuXHQgIGQzLnNlbGVjdEFsbChcIi5wYW5lbC10b3AtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2spO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVUYWJIZWFkZXJCdG5DbGljaygpIHtcblx0ICAvLyBJZiB0aGUgc2VjdGlvbiBpcyBhbHJlYWR5IGFjdGl2ZSwgZG8gbm90aGluZ1xuXHQgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHJldHVybjtcblx0XG5cdCAgdG9nZ2xlV3JhcHBlckFjdGl2ZVN0YXRlcygpO1xuXHQgIHRvZ2dsZU1hcFBhZGRpbmcoKTtcblx0ICAoMCwgX3BhbmVsLnVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQpKCk7XG5cdFxuXHQgIGQzLnNlbGVjdEFsbCgnLnBhbmVsLXRvcC1idG4sIC5wYW5lbC1zZWN0aW9uLXdyYXBwZXInKS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gIWQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdhY3RpdmUnKTtcblx0ICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9nZ2xlV3JhcHBlckFjdGl2ZVN0YXRlcygpIHtcblx0ICB2YXIgd3JhcHBlcnMgPSBkMy5zZWxlY3RBbGwoJyNtYXAtd3JhcHBlciwgI3JpZ2h0LXBhbmVsJyk7XG5cdFxuXHQgIHZhciBsYXllcnNBY3RpdmUgPSB3cmFwcGVycy5jbGFzc2VkKCdsYXllcnMtYWN0aXZlJyk7XG5cdCAgdmFyIGdyYXBoc0FjdGl2ZSA9IHdyYXBwZXJzLmNsYXNzZWQoJ2dyYXBocy1hY3RpdmUnKTtcblx0XG5cdCAgd3JhcHBlcnMuY2xhc3NlZCgnbGF5ZXJzLWFjdGl2ZScsICFsYXllcnNBY3RpdmUpLmNsYXNzZWQoJ2dyYXBocy1hY3RpdmUnLCAhZ3JhcGhzQWN0aXZlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9nZ2xlTWFwUGFkZGluZygpIHtcblx0ICB2YXIgcGFkZGluZ1JpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyaWdodC1wYW5lbFwiKS5vZmZzZXRXaWR0aDtcblx0ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcC13cmFwcGVyXCIpLnN0eWxlLnBhZGRpbmdSaWdodCA9IHBhZGRpbmdSaWdodCArIFwicHhcIjtcblx0fVxuXG4vKioqLyB9LFxuLyogMzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBpbmRleF9idW5kbGUuanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBlNDM0NTYyYjZlOGQ4MDgwNTg3NyIsImltcG9ydCBQYXJzZUNvbmZpZyBmcm9tICcuL3BhcnNlcic7XHJcbmltcG9ydCBDcmVhdGVTZWFyY2ggZnJvbSAnLi9zZWFyY2gnO1xyXG5pbXBvcnQge1NldHVwUGFuZWx9IGZyb20gJy4vcGFuZWwnO1xyXG5pbXBvcnQge0NyZWF0ZUJhc2VMYXllcnN9IGZyb20gJy4vYmFzZWxheWVyJztcclxuaW1wb3J0IHtTZXR1cEdyYXBocywgQmluZEdyYXBoRXZlbnRzfSBmcm9tICcuL2dyYXBoJ1xyXG5pbXBvcnQgQmluZFRhYkV2ZW50cyBmcm9tICcuL3RhYnMnXHJcbmltcG9ydCB7Q3JlYXRlTWFwfSBmcm9tICcuL21hcCdcclxuaW1wb3J0IHtCaW5kVXBkYXRlU2hhcmVVcmwsIEFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZ30gZnJvbSAnLi9zaGFyZSdcclxuaW1wb3J0IHtDcmVhdGVEZWZhdWx0TGF5ZXJzfSBmcm9tICcuL2xheWVyJ1xyXG5cclxudmFyIGNzcyA9IHJlcXVpcmUoJy4uL2Nzcy9zYXNzL2xhbmRhdC5zY3NzJylcclxuXHJcbi8vIERvZXMgbm90IHJlbHkgb24gbWFwIG9iamVjdCBvciBjb25maWcgZmlsZVxyXG52YXIgQmFzZSA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgIFBhcnNlQ29uZmlnKGNvbmZpZywgY2FsbGJhY2spO1xyXG4gICAgU2V0dXBHcmFwaHMoKTtcclxuICAgIEJpbmRUYWJFdmVudHMoKTtcclxufVxyXG5cclxuLy8gRG9lcyByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcclxudmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgIEFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZyhkYXRhKVxyXG4gICAgdmFyIG1hcCA9IENyZWF0ZU1hcChkYXRhLm1hcCk7XHJcbiAgICBDcmVhdGVCYXNlTGF5ZXJzKG1hcCwgZGF0YS5iYXNlbGF5ZXJzKTtcclxuICAgIENyZWF0ZURlZmF1bHRMYXllcnMoZGF0YS5sYXllcnMsIGRhdGFbXCJhY3RpdmUtbGF5ZXJzXCJdKTtcclxuICAgIFNldHVwUGFuZWwoZGF0YS5sYXllcnMsIGRhdGEubGF5b3V0KTtcclxuICAgIENyZWF0ZVNlYXJjaChtYXApO1xyXG4gICAgQmluZEdyYXBoRXZlbnRzKG1hcCk7XHJcbiAgICBCaW5kVXBkYXRlU2hhcmVVcmwobWFwKTtcclxufVxyXG5cclxud2luZG93LkJhc2UgPSBCYXNlO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge0Jhc2V9O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9iYXNlLmpzIiwiLyoqXHJcbiAqIFBhcnNlcyBhIGNvbmZpZyBmaWxlLiBTaW5jZSB0aGUgcHJvY2VzcyB0byBnZXQgZXh0ZXJuYWwgZmlsZXNcclxuICogdXNlcyBBSkFYIHlvdSBuZWVkIHRvIHBhc3MgYSBjYWxsYmFjayB0byBoYW5kbGUgdGhlIG5leHQgc3RlcHNcclxuICogb2YgdXNpbmcgdGhlIGNvbmZpZyBmaWxlLCBzaW5jZSB3ZSBkbyBub3Qga25vdyBob3cgbG9uZyBpdFxyXG4gKiB3aWxsIHRha2UgdG8gZ3JhYiB0aGUgZmlsZS5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFBhcnNlQ29uZmlnIChjb25maWdGaWxlLCBjYWxsYmFjaykge1xyXG4gICAgR2V0Q29uZmlnKGNvbmZpZ0ZpbGUsIGNhbGxiYWNrKTtcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0Q29uZmlnIChjb25maWdGaWxlLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh4bWxodHRwLnJlYWR5U3RhdGUgPT0gNCkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhtbGh0dHAucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgfSBjYXRjaChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1I6IE1hbGZvcm1lZCBKU09OIGluIGNvbmZpZyBmaWxlLlwiKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9ybWF0TWFwKGRhdGEpO1xyXG4gICAgICAgICAgICBmb3JtYXRMYXllcnMoZGF0YSk7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiBcclxuICAgIHhtbGh0dHAub3BlbihcIkdFVFwiLCBjb25maWdGaWxlLCB0cnVlKTtcclxuICAgIHhtbGh0dHAuc2VuZCgpO1xyXG4gICAgY29uc29sZS5sb2coXCJoaVwiKVxyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRNYXAgKGRhdGEpIHtcclxuICAgIGlmICghZGF0YS5tYXApIGRhdGEubWFwID0ge307XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdExheWVycyAoZGF0YSkge1xyXG4gICAgdmFyIGxheWVycyA9IGRhdGEubGF5ZXJzO1xyXG4gICAgdmFyIGRlZmF1bHRNYXBzZXJ2ZXJVcmwgPSBkYXRhLm1hcHNlcnZlclVybDtcclxuICAgIHZhciBkZWZhdWx0RW5hYmxlZExheWVycyA9IGRhdGFbXCJhY3RpdmUtbGF5ZXJzXCJdO1xyXG4gICAgdmFyIGxheWVyZ3JvdXA7XHJcbiAgICB2YXIgaTtcclxuXHJcbiAgICBmb3IgKHZhciBwcm9wIGluIGxheWVycykge1xyXG4gICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XHJcbiAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGF5ZXJncm91cC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBzZXRNYXBzZXJ2ZXJVcmwobGF5ZXJncm91cFtpXSwgZGVmYXVsdE1hcHNlcnZlclVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRNYXBzZXJ2ZXJVcmwgKGxheWVyLCB1cmwpIHtcclxuICAgIGxheWVyLnVybCA9IGxheWVyLnVybCB8fCB1cmw7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvcGFyc2VyLmpzIiwiaW1wb3J0IHsgR2VvU2VhcmNoQ29udHJvbCwgRXNyaVByb3ZpZGVyIH0gZnJvbSAnbGVhZmxldC1nZW9zZWFyY2gnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ3JlYXRlU2VhcmNoIChtYXApIHtcclxuICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IEVzcmlQcm92aWRlcigpO1xyXG5cclxuICAgIGNvbnN0IHNlYXJjaENvbnRyb2wgPSBuZXcgR2VvU2VhcmNoQ29udHJvbCh7XHJcbiAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLFxyXG4gICAgICAgIHNob3dNYXJrZXI6IGZhbHNlLFxyXG4gICAgfSk7XHJcblxyXG4gICAgbWFwLmFkZENvbnRyb2woc2VhcmNoQ29udHJvbCk7XHJcblxyXG4gICAgTC5Eb21FdmVudC5vbihzZWFyY2hDb250cm9sLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuY29udGFpbmVyLCBcImNsaWNrXCIsIGZ1bmN0aW9uIChldikge1xyXG4gICAgICAgIEwuRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKGV2KTtcclxuICAgIH0pO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3NlYXJjaC5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9sZWFmbGV0Q29udHJvbCA9IHJlcXVpcmUoJy4vbGVhZmxldENvbnRyb2wnKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdHZW9TZWFyY2hDb250cm9sJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGVhZmxldENvbnRyb2wpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX3NlYXJjaEVsZW1lbnQgPSByZXF1aXJlKCcuL3NlYXJjaEVsZW1lbnQnKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdTZWFyY2hFbGVtZW50Jywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoRWxlbWVudCkuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfYmluZ1Byb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcnMvYmluZ1Byb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnQmluZ1Byb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmluZ1Byb3ZpZGVyKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9lc3JpUHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9lc3JpUHJvdmlkZXInKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdFc3JpUHJvdmlkZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lc3JpUHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX2dvb2dsZVByb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXInKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdHb29nbGVQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dvb2dsZVByb3ZpZGVyKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9vcGVuU3RyZWV0TWFwUHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9vcGVuU3RyZWV0TWFwUHJvdmlkZXInKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdPcGVuU3RyZWV0TWFwUHJvdmlkZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vcGVuU3RyZWV0TWFwUHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX3Byb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcnMvcHJvdmlkZXInKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKS5kZWZhdWx0O1xuICB9XG59KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9pbmRleC5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9ub2RlbnRSdW50aW1lID0gcmVxdWlyZSgnbm9kZW50LXJ1bnRpbWUnKTtcblxudmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBMZWFmbGV0Q29udHJvbDtcblxudmFyIF9sb2Rhc2ggPSByZXF1aXJlKCdsb2Rhc2guZGVib3VuY2UnKTtcblxudmFyIF9sb2Rhc2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbG9kYXNoKTtcblxudmFyIF9zZWFyY2hFbGVtZW50ID0gcmVxdWlyZSgnLi9zZWFyY2hFbGVtZW50Jyk7XG5cbnZhciBfc2VhcmNoRWxlbWVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2hFbGVtZW50KTtcblxudmFyIF9yZXN1bHRMaXN0ID0gcmVxdWlyZSgnLi9yZXN1bHRMaXN0Jyk7XG5cbnZhciBfcmVzdWx0TGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZXN1bHRMaXN0KTtcblxudmFyIF9kb21VdGlscyA9IHJlcXVpcmUoJy4vZG9tVXRpbHMnKTtcblxudmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgZGVmYXVsdE9wdGlvbnMgPSBmdW5jdGlvbiBkZWZhdWx0T3B0aW9ucygpIHtcbiAgcmV0dXJuIHtcbiAgICBwb3NpdGlvbjogJ3RvcGxlZnQnLFxuICAgIHN0eWxlOiAnYnV0dG9uJyxcbiAgICBzaG93TWFya2VyOiB0cnVlLFxuICAgIHNob3dQb3B1cDogZmFsc2UsXG4gICAgbWFya2VyOiB7XG4gICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKSxcbiAgICAgIGRyYWdnYWJsZTogZmFsc2VcbiAgICB9LFxuICAgIG1heE1hcmtlcnM6IDEsXG4gICAgcmV0YWluWm9vbUxldmVsOiBmYWxzZSxcbiAgICBhbmltYXRlWm9vbTogdHJ1ZSxcbiAgICBzZWFyY2hMYWJlbDogJ0VudGVyIGFkZHJlc3MnLFxuICAgIG5vdEZvdW5kTWVzc2FnZTogJ1NvcnJ5LCB0aGF0IGFkZHJlc3MgY291bGQgbm90IGJlIGZvdW5kLicsXG4gICAgbWVzc2FnZUhpZGVEZWxheTogMzAwMCxcbiAgICB6b29tTGV2ZWw6IDE4LFxuICAgIGNsYXNzTmFtZXM6IHtcbiAgICAgIGNvbnRhaW5lcjogJ2xlYWZsZXQtYmFyIGxlYWZsZXQtY29udHJvbCBsZWFmbGV0LWNvbnRyb2wtZ2Vvc2VhcmNoJyxcbiAgICAgIGJ1dHRvbjogJ2xlYWZsZXQtYmFyLXBhcnQgbGVhZmxldC1iYXItcGFydC1zaW5nbGUnLFxuICAgICAgbXNnYm94OiAnbGVhZmxldC1iYXIgbWVzc2FnZScsXG4gICAgICBmb3JtOiAnJyxcbiAgICAgIGlucHV0OiAnJ1xuICAgIH0sXG4gICAgYXV0b0NvbXBsZXRlOiB0cnVlLFxuICAgIGF1dG9Db21wbGV0ZURlbGF5OiAyNTBcbiAgfTtcbn07XG5cbnZhciBDb250cm9sID0ge1xuICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdGhpcy5tYXJrZXJzID0gbmV3IEwuRmVhdHVyZUdyb3VwKCk7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBfZXh0ZW5kcyh7fSwgZGVmYXVsdE9wdGlvbnMoKSwgb3B0aW9ucyk7XG5cbiAgICB2YXIgX29wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHN0eWxlID0gX29wdGlvbnMuc3R5bGUsXG4gICAgICAgIGNsYXNzTmFtZXMgPSBfb3B0aW9ucy5jbGFzc05hbWVzLFxuICAgICAgICBzZWFyY2hMYWJlbCA9IF9vcHRpb25zLnNlYXJjaExhYmVsLFxuICAgICAgICBhdXRvQ29tcGxldGUgPSBfb3B0aW9ucy5hdXRvQ29tcGxldGUsXG4gICAgICAgIGF1dG9Db21wbGV0ZURlbGF5ID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlRGVsYXk7XG5cbiAgICBpZiAoc3R5bGUgIT09ICdidXR0b24nKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuY2xhc3NOYW1lcy5jb250YWluZXIgKz0gJyAnICsgb3B0aW9ucy5zdHlsZTtcbiAgICB9XG5cbiAgICB0aGlzLnNlYXJjaEVsZW1lbnQgPSBuZXcgX3NlYXJjaEVsZW1lbnQyLmRlZmF1bHQoX2V4dGVuZHMoe30sIHRoaXMub3B0aW9ucywge1xuICAgICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQocXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLm9uU3VibWl0KHF1ZXJ5KTtcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICB2YXIgX3NlYXJjaEVsZW1lbnQkZWxlbWVuID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLFxuICAgICAgICBjb250YWluZXIgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uY29udGFpbmVyLFxuICAgICAgICBmb3JtID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmZvcm0sXG4gICAgICAgIGlucHV0ID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmlucHV0O1xuXG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSk7XG5cbiAgICB2YXIgYnV0dG9uID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnYScsIGNsYXNzTmFtZXMuYnV0dG9uLCBjb250YWluZXIpO1xuICAgIGJ1dHRvbi50aXRsZSA9IHNlYXJjaExhYmVsO1xuICAgIGJ1dHRvbi5ocmVmID0gJyMnO1xuXG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uQ2xpY2soZSk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgaWYgKGF1dG9Db21wbGV0ZSkge1xuICAgICAgdGhpcy5yZXN1bHRMaXN0ID0gbmV3IF9yZXN1bHRMaXN0Mi5kZWZhdWx0KHtcbiAgICAgICAgaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKF9yZWYpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gX3JlZi5yZXN1bHQ7XG5cbiAgICAgICAgICBpbnB1dC52YWx1ZSA9IHJlc3VsdC5sYWJlbDtcbiAgICAgICAgICBfdGhpcy5vblN1Ym1pdCh7IHF1ZXJ5OiByZXN1bHQubGFiZWwgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBmb3JtLmFwcGVuZENoaWxkKHRoaXMucmVzdWx0TGlzdC5lbGVtZW50cy5jb250YWluZXIpO1xuXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsICgwLCBfbG9kYXNoMi5kZWZhdWx0KShmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMuYXV0b1NlYXJjaChlKTtcbiAgICAgIH0sIGF1dG9Db21wbGV0ZURlbGF5KSwgdHJ1ZSk7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnNlbGVjdFJlc3VsdChlKTtcbiAgICAgIH0sIHRydWUpO1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5jbGVhclJlc3VsdHMoZSk7XG4gICAgICB9LCB0cnVlKTtcbiAgICB9XG5cbiAgICB0aGlzLmVsZW1lbnRzID0geyBidXR0b246IGJ1dHRvbiB9O1xuICB9LFxuICBvbkFkZDogZnVuY3Rpb24gb25BZGQobWFwKSB7XG4gICAgdmFyIF9vcHRpb25zMiA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgc2hvd01hcmtlciA9IF9vcHRpb25zMi5zaG93TWFya2VyLFxuICAgICAgICBzdHlsZSA9IF9vcHRpb25zMi5zdHlsZTtcblxuXG4gICAgdGhpcy5tYXAgPSBtYXA7XG4gICAgaWYgKHNob3dNYXJrZXIpIHtcbiAgICAgIHRoaXMubWFya2Vycy5hZGRUbyhtYXApO1xuICAgIH1cblxuICAgIGlmIChzdHlsZSA9PT0gJ2JhcicpIHtcbiAgICAgIHZhciBmb3JtID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmZvcm07XG5cbiAgICAgIHZhciByb290ID0gbWFwLmdldENvbnRhaW5lcigpLnF1ZXJ5U2VsZWN0b3IoJy5sZWFmbGV0LWNvbnRyb2wtY29udGFpbmVyJyk7XG5cbiAgICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCAnbGVhZmxldC1jb250cm9sLWdlb3NlYXJjaCBiYXInKTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChmb3JtKTtcbiAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgICAgIHRoaXMuZWxlbWVudHMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuY29udGFpbmVyO1xuICB9LFxuICBvblJlbW92ZTogZnVuY3Rpb24gb25SZW1vdmUoKSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgY29udGFpbmVyLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBfc2VhcmNoRWxlbWVudCRlbGVtZW4yID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLFxuICAgICAgICBjb250YWluZXIgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4yLmNvbnRhaW5lcixcbiAgICAgICAgaW5wdXQgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4yLmlucHV0O1xuXG5cbiAgICBpZiAoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICB9XG4gIH0sXG4gIHNlbGVjdFJlc3VsdDogZnVuY3Rpb24gc2VsZWN0UmVzdWx0KGV2ZW50KSB7XG4gICAgaWYgKCFbX2NvbnN0YW50cy5BUlJPV19ET1dOX0tFWSwgX2NvbnN0YW50cy5BUlJPV19VUF9LRVldLmluY2x1ZGVzKGV2ZW50LmtleUNvZGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgaW5wdXQgPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuaW5wdXQ7XG5cblxuICAgIHZhciBsaXN0ID0gdGhpcy5yZXN1bHRMaXN0O1xuICAgIHZhciBtYXggPSB0aGlzLnJlc3VsdExpc3QuY291bnQoKSAtIDE7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYml0d2lzZVxuICAgIHZhciBuZXh0ID0gZXZlbnQuY29kZSA9PT0gJ0Fycm93RG93bicgPyB+fmxpc3Quc2VsZWN0ZWQgKyAxIDogfn5saXN0LnNlbGVjdGVkIC0gMTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmVzdGVkLXRlcm5hcnlcbiAgICB2YXIgaWR4ID0gbmV4dCA8IDAgPyBtYXggOiBuZXh0ID4gbWF4ID8gMCA6IG5leHQ7XG5cbiAgICB2YXIgaXRlbSA9IGxpc3Quc2VsZWN0KGlkeCk7XG4gICAgaW5wdXQudmFsdWUgPSBpdGVtLmxhYmVsO1xuICB9LFxuICBjbGVhclJlc3VsdHM6IGZ1bmN0aW9uIGNsZWFyUmVzdWx0cyhldmVudCkge1xuICAgIGlmIChldmVudC5rZXlDb2RlICE9PSBfY29uc3RhbnRzLkVTQ0FQRV9LRVkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnJlc3VsdExpc3QuY2xlYXIoKTtcbiAgfSxcbiAgYXV0b1NlYXJjaDogZnVuY3Rpb24gYXV0b1NlYXJjaChldmVudCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG4gICAgICB2YXIgcXVlcnksIHByb3ZpZGVyLCByZXN1bHRzO1xuXG4gICAgICBpZiAoX2NvbnN0YW50cy5TUEVDSUFMX0tFWVMuaW5jbHVkZXMoZXZlbnQua2V5Q29kZSkpIHtcbiAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcbiAgICAgIH1cblxuICAgICAgcXVlcnkgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgICBwcm92aWRlciA9IHRoaXMub3B0aW9ucy5wcm92aWRlcjtcbiAgICAgIHJldHVybiBwcm92aWRlci5zZWFyY2goeyBxdWVyeTogcXVlcnkgfSkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcblxuICAgICAgICByZXN1bHRzID0gJGF3YWl0XzE7XG4gICAgICAgIHRoaXMucmVzdWx0TGlzdC5yZW5kZXIocmVzdWx0cyk7XG4gICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICB9LFxuICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQocXVlcnkpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgdmFyIHByb3ZpZGVyLCByZXN1bHRzO1xuICAgICAgcHJvdmlkZXIgPSB0aGlzLm9wdGlvbnMucHJvdmlkZXI7XG4gICAgICByZXR1cm4gcHJvdmlkZXIuc2VhcmNoKHF1ZXJ5KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMikge1xuXG4gICAgICAgIHJlc3VsdHMgPSAkYXdhaXRfMjtcblxuICAgICAgICBpZiAocmVzdWx0cyAmJiByZXN1bHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLnNob3dSZXN1bHQocmVzdWx0c1swXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcbiAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG4gIH0sXG4gIHNob3dSZXN1bHQ6IGZ1bmN0aW9uIHNob3dSZXN1bHQocmVzdWx0KSB7XG4gICAgdmFyIG1hcmtlcnMgPSBPYmplY3Qua2V5cyh0aGlzLm1hcmtlcnMuX2xheWVycyk7XG4gICAgaWYgKG1hcmtlcnMubGVuZ3RoID49IHRoaXMub3B0aW9ucy5tYXhNYXJrZXJzKSB7XG4gICAgICB0aGlzLm1hcmtlcnMucmVtb3ZlTGF5ZXIobWFya2Vyc1swXSk7XG4gICAgfVxuXG4gICAgdmFyIG1hcmtlciA9IHRoaXMuYWRkTWFya2VyKHJlc3VsdCk7XG4gICAgdGhpcy5jZW50ZXJNYXAocmVzdWx0KTtcblxuICAgIHRoaXMubWFwLmZpcmVFdmVudCgnZ2Vvc2VhcmNoL3Nob3dsb2NhdGlvbicsIHtcbiAgICAgIGxvY2F0aW9uOiByZXN1bHQsXG4gICAgICBtYXJrZXI6IG1hcmtlclxuICAgIH0pO1xuICB9LFxuICBhZGRNYXJrZXI6IGZ1bmN0aW9uIGFkZE1hcmtlcihyZXN1bHQpIHtcbiAgICB2YXIgX29wdGlvbnMzID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBvcHRpb25zID0gX29wdGlvbnMzLm1hcmtlcixcbiAgICAgICAgc2hvd1BvcHVwID0gX29wdGlvbnMzLnNob3dQb3B1cDtcblxuICAgIHZhciBtYXJrZXIgPSBuZXcgTC5NYXJrZXIoW3Jlc3VsdC55LCByZXN1bHQueF0sIG9wdGlvbnMpO1xuICAgIG1hcmtlci5iaW5kUG9wdXAocmVzdWx0LmxhYmVsKTtcblxuICAgIHRoaXMubWFya2Vycy5hZGRMYXllcihtYXJrZXIpO1xuXG4gICAgaWYgKHNob3dQb3B1cCkge1xuICAgICAgbWFya2VyLm9wZW5Qb3B1cCgpO1xuICAgIH1cblxuICAgIHJldHVybiBtYXJrZXI7XG4gIH0sXG4gIGNlbnRlck1hcDogZnVuY3Rpb24gY2VudGVyTWFwKHJlc3VsdCkge1xuICAgIHZhciBfb3B0aW9uczQgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHJldGFpblpvb21MZXZlbCA9IF9vcHRpb25zNC5yZXRhaW5ab29tTGV2ZWwsXG4gICAgICAgIGFuaW1hdGVab29tID0gX29wdGlvbnM0LmFuaW1hdGVab29tO1xuXG5cbiAgICB2YXIgcmVzdWx0Qm91bmRzID0gbmV3IEwuTGF0TG5nQm91bmRzKHJlc3VsdC5ib3VuZHMpO1xuICAgIHZhciBib3VuZHMgPSByZXN1bHRCb3VuZHMuaXNWYWxpZCgpID8gcmVzdWx0Qm91bmRzIDogdGhpcy5tYXJrZXJzLmdldEJvdW5kcygpO1xuXG4gICAgaWYgKCFyZXRhaW5ab29tTGV2ZWwgJiYgcmVzdWx0Qm91bmRzLmlzVmFsaWQoKSkge1xuICAgICAgdGhpcy5tYXAuZml0Qm91bmRzKGJvdW5kcywgeyBhbmltYXRlOiBhbmltYXRlWm9vbSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tYXAuc2V0Vmlldyhib3VuZHMuZ2V0Q2VudGVyKCksIHRoaXMuZ2V0Wm9vbSgpLCB7IGFuaW1hdGU6IGFuaW1hdGVab29tIH0pO1xuICAgIH1cbiAgfSxcbiAgZ2V0Wm9vbTogZnVuY3Rpb24gZ2V0Wm9vbSgpIHtcbiAgICB2YXIgX29wdGlvbnM1ID0gdGhpcy5vcHRpb25zLFxuICAgICAgICByZXRhaW5ab29tTGV2ZWwgPSBfb3B0aW9uczUucmV0YWluWm9vbUxldmVsLFxuICAgICAgICB6b29tTGV2ZWwgPSBfb3B0aW9uczUuem9vbUxldmVsO1xuXG4gICAgcmV0dXJuIHJldGFpblpvb21MZXZlbCA/IHRoaXMubWFwLmdldFpvb20oKSA6IHpvb21MZXZlbDtcbiAgfVxufTtcblxuZnVuY3Rpb24gTGVhZmxldENvbnRyb2woKSB7XG4gIGlmICghTCB8fCAhTC5Db250cm9sIHx8ICFMLkNvbnRyb2wuZXh0ZW5kKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdMZWFmbGV0IG11c3QgYmUgbG9hZGVkIGJlZm9yZSBpbnN0YW50aWF0aW5nIHRoZSBHZW9TZWFyY2ggY29udHJvbCcpO1xuICB9XG5cbiAgdmFyIExDb250cm9sID0gTC5Db250cm9sLmV4dGVuZChDb250cm9sKTtcblxuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgb3B0aW9ucyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIG9wdGlvbnNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShMQ29udHJvbCwgW251bGxdLmNvbmNhdChvcHRpb25zKSkpKCk7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvbGVhZmxldENvbnRyb2wuanMiLCJcInVzZSBzdHJpY3RcIjtcbi8qXG4gKiAkYXN5bmNiaW5kIGhhcyBtdWx0aXBsZSB1c2VzLCBkZXBlbmRpbmcgb24gdGhlIHBhcmFtZXRlciBsaXN0LiBJdCBpcyBpbiBGdW5jdGlvbi5wcm90b3R5cGUsIHNvICd0aGlzJyBpcyBhbHdheXMgYSBmdW5jdGlvblxuICpcbiAqIDEpIElmIGNhbGxlZCB3aXRoIGEgc2luZ2xlIGFyZ3VtZW50ICh0aGlzKSwgaXQgaXMgdXNlZCB3aGVuIGRlZmluaW5nIGFuIGFzeW5jIGZ1bmN0aW9uIHRvIGVuc3VyZSB3aGVuXG4gKiAgICAgIGl0IGlzIGludm9rZWQsIHRoZSBjb3JyZWN0ICd0aGlzJyBpcyBwcmVzZW50LCBqdXN0IGxpa2UgXCJiaW5kXCIuIEZvciBsZWdhY3kgcmVhc29ucywgJ3RoaXMnIGlzIGdpdmVuXG4gKiAgICAgIGEgbWVtZWJlciAndGhlbicgd2hpY2ggcmVmZXJzIHRvIGl0c2VsZi5cbiAqIDIpIElmIGNhbGxlZCB3aXRoIGEgc2Vjb25kIHBhcmFtZXRlciAoXCJjYXRjaGVyXCIpIGFuZCBjYXRjaGVyIT09dHJ1ZSBpdCBpcyBiZWluZyB1c2VkIHRvIGludm9rZSBhbiBhc3luY1xuICogICAgICBmdW5jdGlvbiB3aGVyZSB0aGUgc2Vjb25kIHBhcmFtZXRlciBpcyB0aGUgZXJyb3IgY2FsbGJhY2sgKGZvciBzeW5jIGV4Y2VwdGlvbnMgYW5kIHRvIGJlIHBhc3NlZCB0b1xuICogICAgICBuZXN0ZWQgYXN5bmMgY2FsbHMpXG4gKiAzKSBJZiBjYWxsZWQgd2l0aCB0aGUgc2Vjb25kIHBhcmFtZXRlcj09PXRydWUsIGl0IGlzIHRoZSBzYW1lIHVzZSBhcyAoMSksIGJ1dCB0aGUgZnVuY3Rpb24gaXMgd3JhcHBlZFxuICogICAgICBpbiBhbiAnUHJvbWlzZScgYXMgd2VsbCBib3VuZCB0byAndGhpcycuXG4gKiAgICAgIEl0IGlzIHRoZSBzYW1lIGFzIGNhbGxpbmcgJ25ldyBQcm9taXNlKHRoaXMpJywgd2hlcmUgJ3RoaXMnIGlzIHRoZSBmdW5jdGlvbiBiZWluZyBib3VuZC93cmFwcGVkXG4gKiA0KSBJZiBjYWxsZWQgd2l0aCB0aGUgc2Vjb25kIHBhcmFtZXRlcj09PTAsIGl0IGlzIHRoZSBzYW1lIHVzZSBhcyAoMSksIGJ1dCB0aGUgZnVuY3Rpb24gaXMgd3JhcHBlZFxuICogICAgICBpbiBhICdMYXp5VGhlbmFibGUnLCB3aGljaCBleGVjdXRlcyBsYXppbHkgYW5kIGNhbiByZXNvbHZlIHN5bmNocm9ub3VzbHkuXG4gKiAgICAgIEl0IGlzIHRoZSBzYW1lIGFzIGNhbGxpbmcgJ25ldyBMYXp5VGhlbmFibGUodGhpcyknIChpZiBzdWNoIGEgdHlwZSB3ZXJlIGV4cG9zZWQpLCB3aGVyZSAndGhpcycgaXNcbiAqICAgICAgdGhlIGZ1bmN0aW9uIGJlaW5nIGJvdW5kL3dyYXBwZWRcbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzSW5jbHVkZXMoaW5jbHVkZXMsaW5wdXQpIHtcbiAgICB2YXIgc3JjID0gaW5wdXQudG9TdHJpbmcoKSA7XG4gICAgdmFyIHQgPSBcInJldHVybiBcIitzcmMgO1xuICAgIHZhciBhcmdzID0gc3JjLm1hdGNoKC8uKlxcKChbXildKilcXCkvKVsxXSA7XG4gICAgdmFyIHJlID0gL1snXCJdISEhKFteJ1wiXSopWydcIl0vZyA7XG4gICAgdmFyIG0gPSBbXSA7XG4gICAgd2hpbGUgKDEpIHtcbiAgICAgICAgdmFyIG14ID0gcmUuZXhlYyh0KSA7XG4gICAgICAgIGlmIChteClcbiAgICAgICAgICAgIG0ucHVzaChteCkgO1xuICAgICAgICBlbHNlIGJyZWFrIDtcbiAgICB9XG4gICAgbS5yZXZlcnNlKCkuZm9yRWFjaChmdW5jdGlvbihlKXtcbiAgICAgICAgdCA9IHQuc2xpY2UoMCxlLmluZGV4KStpbmNsdWRlc1tlWzFdXSt0LnN1YnN0cihlLmluZGV4K2VbMF0ubGVuZ3RoKSA7XG4gICAgfSkgO1xuICAgIHQgPSB0LnJlcGxhY2UoL1xcL1xcKlteKl0qXFwqXFwvL2csJyAnKS5yZXBsYWNlKC9cXHMrL2csJyAnKSA7XG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbihhcmdzLHQpKCkgO1xufVxuXG52YXIgJGFzeW5jYmluZCA9IHByb2Nlc3NJbmNsdWRlcyh7XG4gICAgem91c2FuOnJlcXVpcmUoJy4vem91c2FuJykudG9TdHJpbmcoKSxcbiAgICB0aGVuYWJsZTpyZXF1aXJlKCcuL3RoZW5hYmxlRmFjdG9yeScpLnRvU3RyaW5nKClcbn0sXG5mdW5jdGlvbiAkYXN5bmNiaW5kKHNlbGYsY2F0Y2hlcikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGlmICghRnVuY3Rpb24ucHJvdG90eXBlLiRhc3luY2JpbmQpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSxcIiRhc3luY2JpbmRcIix7dmFsdWU6JGFzeW5jYmluZCxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWV9KSA7XG4gICAgfVxuXG4gICAgaWYgKCEkYXN5bmNiaW5kLnRyYW1wb2xpbmUpIHtcbiAgICAgICRhc3luY2JpbmQudHJhbXBvbGluZSA9IGZ1bmN0aW9uIHRyYW1wb2xpbmUodCx4LHMsZSx1KXtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGIocSkge1xuICAgICAgICAgICAgICAgIHdoaWxlIChxKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChxLnRoZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBxLnRoZW4oYiwgZSkgO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHU/dW5kZWZpbmVkOnE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxLnBvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBxLnBvcCgpID8geC5jYWxsKHQpIDogcTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0gcztcbiAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0gcS5jYWxsKHQpXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlKHIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoISRhc3luY2JpbmQuTGF6eVRoZW5hYmxlKSB7XG4gICAgICAgICRhc3luY2JpbmQuTGF6eVRoZW5hYmxlID0gJyEhIXRoZW5hYmxlJygpO1xuICAgICAgICAkYXN5bmNiaW5kLkVhZ2VyVGhlbmFibGUgPSAkYXN5bmNiaW5kLlRoZW5hYmxlID0gKCRhc3luY2JpbmQuRWFnZXJUaGVuYWJsZUZhY3RvcnkgPSAnISEhem91c2FuJykoKTtcbiAgICB9XG5cbiAgICB2YXIgcmVzb2x2ZXIgPSB0aGlzO1xuICAgIHN3aXRjaCAoY2F0Y2hlcikge1xuICAgIGNhc2UgdHJ1ZTpcbiAgICAgICAgcmV0dXJuIG5ldyAoJGFzeW5jYmluZC5UaGVuYWJsZSkoYm91bmRUaGVuKTtcbiAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBuZXcgKCRhc3luY2JpbmQuTGF6eVRoZW5hYmxlKShib3VuZFRoZW4pO1xuICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgICAvKiBGb3IgcnVudGltZSBjb21wYXRpYmlsaXR5IHdpdGggTm9kZW50IHYyLngsIHByb3ZpZGUgYSB0aGVuYWJsZSAqL1xuICAgICAgICBib3VuZFRoZW4udGhlbiA9IGJvdW5kVGhlbiA7XG4gICAgICAgIHJldHVybiBib3VuZFRoZW4gO1xuICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZXIuYXBwbHkoc2VsZixhcmd1bWVudHMpO1xuICAgICAgICAgICAgfSBjYXRjaChleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYXRjaGVyKGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBib3VuZFRoZW4oKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlci5hcHBseShzZWxmLGFyZ3VtZW50cyk7XG4gICAgfVxufSkgO1xuXG5mdW5jdGlvbiAkYXN5bmNzcGF3bihwcm9taXNlUHJvdmlkZXIsc2VsZikge1xuICAgIGlmICghRnVuY3Rpb24ucHJvdG90eXBlLiRhc3luY3NwYXduKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsXCIkYXN5bmNzcGF3blwiLHt2YWx1ZTokYXN5bmNzcGF3bixlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWV9KSA7XG4gICAgfVxuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBGdW5jdGlvbikpIHJldHVybiA7XG5cbiAgICB2YXIgZ2VuRiA9IHRoaXMgO1xuICAgIHJldHVybiBuZXcgcHJvbWlzZVByb3ZpZGVyKGZ1bmN0aW9uIGVub3VnaChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIGdlbiA9IGdlbkYuY2FsbChzZWxmLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICBmdW5jdGlvbiBzdGVwKGZuLGFyZykge1xuICAgICAgICAgICAgdmFyIG5leHQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG5leHQgPSBmbi5jYWxsKGdlbixhcmcpO1xuICAgICAgICAgICAgICAgIGlmKG5leHQuZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZSAhPT0gcmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUgJiYgbmV4dC52YWx1ZT09PW5leHQudmFsdWUudGhlbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dC52YWx1ZShyZXNvbHZlLHJlamVjdCkgO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSAmJiByZXNvbHZlKG5leHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSA9IG51bGwgO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZS50aGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQudmFsdWUudGhlbihmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi5uZXh0LHYpO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi50aHJvdyxlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4ubmV4dCxuZXh0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICByZWplY3QgJiYgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIHJlamVjdCA9IG51bGwgO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdGVwKGdlbi5uZXh0KTtcbiAgICB9KTtcbn1cblxuLy8gSW5pdGlhbGl6ZSBhc3luYyBiaW5kaW5nc1xuJGFzeW5jYmluZCgpIDtcbiRhc3luY3NwYXduKCkgO1xuXG4vLyBFeHBvcnQgYXN5bmMgYmluZGluZ3Ncbm1vZHVsZS5leHBvcnRzID0ge1xuICAgICRhc3luY2JpbmQ6JGFzeW5jYmluZCxcbiAgICAkYXN5bmNzcGF3bjokYXN5bmNzcGF3blxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbm9kZW50LXJ1bnRpbWUvcnVudGltZS5qcyIsIi8qIFRoaXMgY29kZSBpcyBiYXNlZCBvbjpcbnpvdXNhbiAtIEEgTGlnaHRuaW5nIEZhc3QsIFlldCBWZXJ5IFNtYWxsIFByb21pc2UgQSsgQ29tcGxpYW50IEltcGxlbWVudGF0aW9uXG5odHRwczovL2dpdGh1Yi5jb20vYmx1ZWphdmEvem91c2FuXG5BdXRob3I6IEdsZW5uIENyb3dub3ZlciA8Z2xlbm5AYmx1ZWphdmEuY29tPiAoaHR0cDovL3d3dy5ibHVlamF2YS5jb20pXG5WZXJzaW9uIDIuMy4zXG5MaWNlbnNlOiBNSVQgKi9cblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih0aWNrKXtcbiAgICB0aWNrID0gdGljayB8fCAodHlwZW9mIHByb2Nlc3M9PT1cIm9iamVjdFwiICYmIHByb2Nlc3MubmV4dFRpY2spIHx8ICh0eXBlb2Ygc2V0SW1tZWRpYXRlPT09XCJmdW5jdGlvblwiICYmIHNldEltbWVkaWF0ZSkgfHwgZnVuY3Rpb24oZil7c2V0VGltZW91dChmLDApfTtcbiAgICB2YXIgc29vbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmcSA9IFtdLCBmcVN0YXJ0ID0gMCwgYnVmZmVyU2l6ZSA9IDEwMjQ7XG4gICAgICAgIGZ1bmN0aW9uIGNhbGxRdWV1ZSgpIHtcbiAgICAgICAgICAgIHdoaWxlIChmcS5sZW5ndGggLSBmcVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHsgZnFbZnFTdGFydF0oKSB9IGNhdGNoKGV4KSB7IC8qIGNvbnNvbGUuZXJyb3IoZXgpICovIH1cbiAgICAgICAgICAgICAgICBmcVtmcVN0YXJ0KytdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmIChmcVN0YXJ0ID09PSBidWZmZXJTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIGZxLnNwbGljZSgwLCBidWZmZXJTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgZnFTdGFydCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgZnEucHVzaChmbik7XG4gICAgICAgICAgICBpZiAoZnEubGVuZ3RoIC0gZnFTdGFydCA9PT0gMSlcbiAgICAgICAgICAgICAgICB0aWNrKGNhbGxRdWV1ZSk7XG4gICAgICAgIH07XG4gICAgfSkoKTtcblxuICAgIGZ1bmN0aW9uIFpvdXNhbihmdW5jKSB7XG4gICAgICAgIGlmIChmdW5jKSB7XG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICAgICAgZnVuYyhmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgICAgICAgbWUucmVzb2x2ZShhcmcpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGFyZykge1xuICAgICAgICAgICAgICAgIG1lLnJlamVjdChhcmcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBab3VzYW4ucHJvdG90eXBlID0ge1xuICAgICAgICByZXNvbHZlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB0aGlzKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKFwiQXR0ZW1wdCB0byByZXNvbHZlIHByb21pc2Ugd2l0aCBzZWxmXCIpKTtcbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3QgPSAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGhlbiA9IHZhbHVlLnRoZW47XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhlbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bmN0aW9uIChyYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5yZXNvbHZlKHJhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVqZWN0KHJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZVTEZJTExFRDtcbiAgICAgICAgICAgIHRoaXMudiA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKG1lLmMpXG4gICAgICAgICAgICAgICAgc29vbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCBsID0gbWUuYy5sZW5ndGg7biA8IGw7IG4rKylcbiAgICAgICAgICAgICAgICAgICAgICAgIFNUQVRFX0ZVTEZJTExFRChtZS5jW25dLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlamVjdDogZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUkVKRUNURUQ7XG4gICAgICAgICAgICB0aGlzLnYgPSByZWFzb247XG4gICAgICAgICAgICB2YXIgY2xpZW50cyA9IHRoaXMuYztcbiAgICAgICAgICAgIGlmIChjbGllbnRzKVxuICAgICAgICAgICAgICAgIHNvb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgbCA9IGNsaWVudHMubGVuZ3RoO24gPCBsOyBuKyspXG4gICAgICAgICAgICAgICAgICAgICAgICBTVEFURV9SRUpFQ1RFRChjbGllbnRzW25dLCByZWFzb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICB0aGVuOiBmdW5jdGlvbiAob25GLCBvblIpIHtcbiAgICAgICAgICAgIHZhciBwID0gbmV3IFpvdXNhbigpO1xuICAgICAgICAgICAgdmFyIGNsaWVudCA9IHtcbiAgICAgICAgICAgICAgICB5OiBvbkYsXG4gICAgICAgICAgICAgICAgbjogb25SLFxuICAgICAgICAgICAgICAgIHA6IHBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jLnB1c2goY2xpZW50KTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYyA9IFtjbGllbnRdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcyA9IHRoaXMuc3RhdGUsIGEgPSB0aGlzLnY7XG4gICAgICAgICAgICAgICAgc29vbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHMoY2xpZW50LCBhKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFNUQVRFX0ZVTEZJTExFRChjLCBhcmcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjLnkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgeXJldCA9IGMueS5jYWxsKHVuZGVmaW5lZCwgYXJnKTtcbiAgICAgICAgICAgICAgICBjLnAucmVzb2x2ZSh5cmV0KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGMucC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICBjLnAucmVzb2x2ZShhcmcpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFNUQVRFX1JFSkVDVEVEKGMsIHJlYXNvbikge1xuICAgICAgICBpZiAodHlwZW9mIGMubiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciB5cmV0ID0gYy5uLmNhbGwodW5kZWZpbmVkLCByZWFzb24pO1xuICAgICAgICAgICAgICAgIGMucC5yZXNvbHZlKHlyZXQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgYy5wLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgIGMucC5yZWplY3QocmVhc29uKTtcbiAgICB9XG5cbiAgICBab3VzYW4ucmVzb2x2ZSA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgaWYgKHZhbCAmJiAodmFsIGluc3RhbmNlb2YgWm91c2FuKSlcbiAgICAgICAgICAgIHJldHVybiB2YWwgO1xuICAgICAgICB2YXIgeiA9IG5ldyBab3VzYW4oKTtcbiAgICAgICAgei5yZXNvbHZlKHZhbCk7XG4gICAgICAgIHJldHVybiB6O1xuICAgIH07XG4gICAgWm91c2FuLnJlamVjdCA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKGVyciAmJiAoZXJyIGluc3RhbmNlb2YgWm91c2FuKSlcbiAgICAgICAgICAgIHJldHVybiBlcnIgO1xuICAgICAgICB2YXIgeiA9IG5ldyBab3VzYW4oKTtcbiAgICAgICAgei5yZWplY3QoZXJyKTtcbiAgICAgICAgcmV0dXJuIHo7XG4gICAgfTtcblxuICAgIFpvdXNhbi52ZXJzaW9uID0gXCIyLjMuMy1ub2RlbnRcIiA7XG4gICAgcmV0dXJuIFpvdXNhbiA7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9ub2RlbnQtcnVudGltZS96b3VzYW4uanMiLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcHJvY2Vzcy9icm93c2VyLmpzIiwidmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXG4vLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXG5leHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xufTtcbmV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG59O1xuZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkge1xuICBpZiAodGltZW91dCkge1xuICAgIHRpbWVvdXQuY2xvc2UoKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csIHRoaXMuX2lkKTtcbn07XG5cbi8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG59O1xuXG5leHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG59O1xuXG5leHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cbiAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG4gIGlmIChtc2VjcyA+PSAwKSB7XG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcbiAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7XG4gICAgfSwgbXNlY3MpO1xuICB9XG59O1xuXG4vLyBzZXRpbW1lZGlhdGUgYXR0YWNoZXMgaXRzZWxmIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG5yZXF1aXJlKFwic2V0aW1tZWRpYXRlXCIpO1xuZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG5leHBvcnRzLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwiKGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG4gICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcbiAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbiAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cbiAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcbiAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKFwiXCIgKyBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgICAvLyBDb3B5IGZ1bmN0aW9uIGFyZ3VtZW50c1xuICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG4gICAgICB9XG4gICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcbiAgICAgIHZhciB0YXNrID0geyBjYWxsYmFjazogY2FsbGJhY2ssIGFyZ3M6IGFyZ3MgfTtcbiAgICAgIHRhc2tzQnlIYW5kbGVbbmV4dEhhbmRsZV0gPSB0YXNrO1xuICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG4gICAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG4gICAgICAgIHZhciBhcmdzID0gdGFzay5hcmdzO1xuICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcbiAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogXCJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC5cIlxuICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG4gICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJ1bklmUHJlc2VudChoYW5kbGUpOyB9KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcbiAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cbiAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcbiAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcbiAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2VcbiAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXG4gICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG4gICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuXG4gICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuICAgIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXG4gICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcbiAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG4gICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG4gICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG4gICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGRvYyAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpKSB7XG4gICAgICAgIC8vIEZvciBJRSA24oCTOFxuICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpO1xuICAgIH1cblxuICAgIGF0dGFjaFRvLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbiAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xufSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB0aGlzIDogZ2xvYmFsIDogc2VsZikpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vdGltZXJzLWJyb3dzZXJpZnkvfi9zZXRpbW1lZGlhdGUvc2V0SW1tZWRpYXRlLmpzIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBpc1RoZW5hYmxlKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqICYmIChvYmogaW5zdGFuY2VvZiBPYmplY3QpICYmIHR5cGVvZiBvYmoudGhlbj09PVwiZnVuY3Rpb25cIjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHV0aW9uKHAscixob3cpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8qIDIuMi43LjEgKi9cbiAgICAgICAgICAgIHZhciB4ID0gaG93ID8gaG93KHIpOnIgO1xuXG4gICAgICAgICAgICBpZiAocD09PXgpIC8qIDIuMy4xICovXG4gICAgICAgICAgICAgICAgcmV0dXJuIHAucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJQcm9taXNlIHJlc29sdXRpb24gbG9vcFwiKSkgO1xuXG4gICAgICAgICAgICBpZiAoaXNUaGVuYWJsZSh4KSkge1xuICAgICAgICAgICAgICAgIC8qIDIuMy4zICovXG4gICAgICAgICAgICAgICAgeC50aGVuKGZ1bmN0aW9uKHkpe1xuICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uKHAseSk7XG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICAgICAgcC5yZWplY3QoZSlcbiAgICAgICAgICAgICAgICB9KSA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHAucmVzb2x2ZSh4KSA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAvKiAyLjIuNy4yICovXG4gICAgICAgICAgICBwLnJlamVjdChleCkgO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ2hhaW5lZCgpIHt9O1xuICAgIENoYWluZWQucHJvdG90eXBlID0ge1xuICAgICAgICByZXNvbHZlOl91bmNoYWluZWQsXG4gICAgICAgIHJlamVjdDpfdW5jaGFpbmVkLFxuICAgICAgICB0aGVuOnRoZW5DaGFpblxuICAgIH07XG4gICAgZnVuY3Rpb24gX3VuY2hhaW5lZCh2KXt9XG4gICAgZnVuY3Rpb24gdGhlbkNoYWluKHJlcyxyZWope1xuICAgICAgICB0aGlzLnJlc29sdmUgPSByZXM7XG4gICAgICAgIHRoaXMucmVqZWN0ID0gcmVqO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiB0aGVuKHJlcyxyZWope1xuICAgICAgICB2YXIgY2hhaW4gPSBuZXcgQ2hhaW5lZCgpIDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVyKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzVGhlbmFibGUodmFsdWUpID8gdmFsdWUudGhlbihyZXMscmVqKSA6IHJlc29sdXRpb24oY2hhaW4sdmFsdWUscmVzKTtcbiAgICAgICAgICAgIH0sZnVuY3Rpb24oZXgpIHtcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uKGNoYWluLGV4LHJlaikgO1xuICAgICAgICAgICAgfSkgO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgcmVzb2x1dGlvbihjaGFpbixleCxyZWopO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaGFpbiA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gVGhlbmFibGUocmVzb2x2ZXIpIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZXIgPSByZXNvbHZlciA7XG4gICAgICAgIHRoaXMudGhlbiA9IHRoZW4gO1xuICAgIH07XG5cbiAgICBUaGVuYWJsZS5yZXNvbHZlID0gZnVuY3Rpb24odil7XG4gICAgICAgIHJldHVybiBUaGVuYWJsZS5pc1RoZW5hYmxlKHYpID8gdiA6IHt0aGVuOmZ1bmN0aW9uKHJlc29sdmUpe3JldHVybiByZXNvbHZlKHYpfX07XG4gICAgfTtcblxuICAgIFRoZW5hYmxlLmlzVGhlbmFibGUgPSBpc1RoZW5hYmxlIDtcblxuICAgIHJldHVybiBUaGVuYWJsZSA7XG59IDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbm9kZW50LXJ1bnRpbWUvdGhlbmFibGVGYWN0b3J5LmpzIiwiLyoqXG4gKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBOQU4gPSAwIC8gMDtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xudmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cbi8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG52YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG52YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heCxcbiAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblxuLyoqXG4gKiBHZXRzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2VcbiAqIHRoZSBVbml4IGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMi40LjBcbiAqIEBjYXRlZ29yeSBEYXRlXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lc3RhbXAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcbiAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcbiAqIH0sIF8ubm93KCkpO1xuICogLy8gPT4gTG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgaW52b2NhdGlvbi5cbiAqL1xudmFyIG5vdyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gcm9vdC5EYXRlLm5vdygpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcbiAqIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdhc1xuICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG4gKiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGVcbiAqIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcbiAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnRcbiAqIGNhbGxzIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgXG4gKiBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcbiAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG4gKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cbiAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcbiAqXG4gKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy5cbiAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcbiAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuICogICAndHJhaWxpbmcnOiBmYWxzZVxuICogfSkpO1xuICpcbiAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuXG4gKiB2YXIgZGVib3VuY2VkID0gXy5kZWJvdW5jZShiYXRjaExvZywgMjUwLCB7ICdtYXhXYWl0JzogMTAwMCB9KTtcbiAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcbiAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTtcbiAqXG4gKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7XG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIGxhc3RBcmdzLFxuICAgICAgbGFzdFRoaXMsXG4gICAgICBtYXhXYWl0LFxuICAgICAgcmVzdWx0LFxuICAgICAgdGltZXJJZCxcbiAgICAgIGxhc3RDYWxsVGltZSxcbiAgICAgIGxhc3RJbnZva2VUaW1lID0gMCxcbiAgICAgIGxlYWRpbmcgPSBmYWxzZSxcbiAgICAgIG1heGluZyA9IGZhbHNlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG4gICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcbiAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52b2tlRnVuYyh0aW1lKSB7XG4gICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcbiAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzO1xuXG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAvLyBJbnZva2UgdGhlIGxlYWRpbmcgZWRnZS5cbiAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lLFxuICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cbiAgICByZXR1cm4gbWF4aW5nID8gbmF0aXZlTWluKHJlc3VsdCwgbWF4V2FpdCAtIHRpbWVTaW5jZUxhc3RJbnZva2UpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvdWxkSW52b2tlKHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lO1xuXG4gICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcbiAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuICAgIC8vIGl0IGFzIHRoZSB0cmFpbGluZyBlZGdlLCBvciB3ZSd2ZSBoaXQgdGhlIGBtYXhXYWl0YCBsaW1pdC5cbiAgICByZXR1cm4gKGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8ICh0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0KSB8fFxuICAgICAgKHRpbWVTaW5jZUxhc3RDYWxsIDwgMCkgfHwgKG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpO1xuICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcbiAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7XG4gICAgfVxuICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuICAgIHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG4gICAgLy8gZGVib3VuY2VkIGF0IGxlYXN0IG9uY2UuXG4gICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG4gICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcbiAgICB9XG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIGlmICh0aW1lcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcbiAgICB9XG4gICAgbGFzdEludm9rZVRpbWUgPSAwO1xuICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKSxcbiAgICAgICAgaXNJbnZva2luZyA9IHNob3VsZEludm9rZSh0aW1lKTtcblxuICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuICAgIGxhc3RUaGlzID0gdGhpcztcbiAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXG4gICAgaWYgKGlzSW52b2tpbmcpIHtcbiAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgICBpZiAobWF4aW5nKSB7XG4gICAgICAgIC8vIEhhbmRsZSBpbnZvY2F0aW9ucyBpbiBhIHRpZ2h0IGxvb3AuXG4gICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG4gIHJldHVybiBkZWJvdW5jZWQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvTnVtYmVyKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b051bWJlcihJbmZpbml0eSk7XG4gKiAvLyA9PiBJbmZpbml0eVxuICpcbiAqIF8udG9OdW1iZXIoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBOQU47XG4gIH1cbiAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcbiAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IChvdGhlciArICcnKSA6IG90aGVyO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcbiAgfVxuICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG4gIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG4gIHJldHVybiAoaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpKVxuICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KVxuICAgIDogKHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRlYm91bmNlO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9+L2xvZGFzaC5kZWJvdW5jZS9pbmRleC5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9ub2RlbnRSdW50aW1lID0gcmVxdWlyZSgnbm9kZW50LXJ1bnRpbWUnKTtcblxudmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX2RvbVV0aWxzID0gcmVxdWlyZSgnLi9kb21VdGlscycpO1xuXG52YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBTZWFyY2hFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTZWFyY2hFbGVtZW50KCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgIF9yZWYkaGFuZGxlU3VibWl0ID0gX3JlZi5oYW5kbGVTdWJtaXQsXG4gICAgICAgIGhhbmRsZVN1Ym1pdCA9IF9yZWYkaGFuZGxlU3VibWl0ID09PSB1bmRlZmluZWQgPyBmdW5jdGlvbiAoKSB7fSA6IF9yZWYkaGFuZGxlU3VibWl0LFxuICAgICAgICBfcmVmJHNlYXJjaExhYmVsID0gX3JlZi5zZWFyY2hMYWJlbCxcbiAgICAgICAgc2VhcmNoTGFiZWwgPSBfcmVmJHNlYXJjaExhYmVsID09PSB1bmRlZmluZWQgPyAnc2VhcmNoJyA6IF9yZWYkc2VhcmNoTGFiZWwsXG4gICAgICAgIF9yZWYkY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcbiAgICAgICAgY2xhc3NOYW1lcyA9IF9yZWYkY2xhc3NOYW1lcyA9PT0gdW5kZWZpbmVkID8ge30gOiBfcmVmJGNsYXNzTmFtZXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2VhcmNoRWxlbWVudCk7XG5cbiAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgWydnZW9zZWFyY2gnLCBjbGFzc05hbWVzLmNvbnRhaW5lcl0uam9pbignICcpKTtcbiAgICB2YXIgZm9ybSA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2Zvcm0nLCBbJycsIGNsYXNzTmFtZXMuZm9ybV0uam9pbignICcpLCBjb250YWluZXIpO1xuICAgIHZhciBpbnB1dCA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2lucHV0JywgWydnbGFzcycsIGNsYXNzTmFtZXMuaW5wdXRdLmpvaW4oJyAnKSwgZm9ybSk7XG5cbiAgICBpbnB1dC50eXBlID0gJ3RleHQnO1xuICAgIGlucHV0LnBsYWNlaG9sZGVyID0gc2VhcmNoTGFiZWw7XG5cbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5vbklucHV0KGUpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5vbktleVVwKGUpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5vbktleVByZXNzKGUpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5vbkZvY3VzKGUpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uQmx1cihlKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICB0aGlzLmVsZW1lbnRzID0geyBjb250YWluZXI6IGNvbnRhaW5lciwgZm9ybTogZm9ybSwgaW5wdXQ6IGlucHV0IH07XG4gICAgdGhpcy5oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoU2VhcmNoRWxlbWVudCwgW3tcbiAgICBrZXk6ICdvbkZvY3VzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Gb2N1cygpIHtcbiAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKSh0aGlzLmVsZW1lbnRzLmZvcm0sICdhY3RpdmUnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvbkJsdXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkJsdXIoKSB7XG4gICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkodGhpcy5lbGVtZW50cy5mb3JtLCAnYWN0aXZlJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25TdWJtaXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblN1Ym1pdChldmVudCkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgICAgdmFyIF9lbGVtZW50cywgaW5wdXQsIGNvbnRhaW5lcjtcblxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICBfZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzLCBpbnB1dCA9IF9lbGVtZW50cy5pbnB1dCwgY29udGFpbmVyID0gX2VsZW1lbnRzLmNvbnRhaW5lcjtcblxuICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnZXJyb3InKTtcbiAgICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVTdWJtaXQoeyBxdWVyeTogaW5wdXQudmFsdWUgfSkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcbiAgICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuICAgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG4gICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvbklucHV0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25JbnB1dCgpIHtcbiAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuXG4gICAgICBpZiAodGhpcy5oYXNFcnJvcikge1xuICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnZXJyb3InKTtcbiAgICAgICAgdGhpcy5oYXNFcnJvciA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uS2V5VXAnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleVVwKGV2ZW50KSB7XG4gICAgICB2YXIgX2VsZW1lbnRzMiA9IHRoaXMuZWxlbWVudHMsXG4gICAgICAgICAgY29udGFpbmVyID0gX2VsZW1lbnRzMi5jb250YWluZXIsXG4gICAgICAgICAgaW5wdXQgPSBfZWxlbWVudHMyLmlucHV0O1xuXG5cbiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBfY29uc3RhbnRzLkVTQ0FQRV9LRVkpIHtcbiAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcbiAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXG4gICAgICAgIGlucHV0LnZhbHVlID0gJyc7XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5mb2N1cygpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmJsdXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvbktleVByZXNzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25LZXlQcmVzcyhldmVudCkge1xuICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IF9jb25zdGFudHMuRU5URVJfS0VZKSB7XG4gICAgICAgIHRoaXMub25TdWJtaXQoZXZlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NldFF1ZXJ5JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UXVlcnkocXVlcnkpIHtcbiAgICAgIHZhciBpbnB1dCA9IHRoaXMuZWxlbWVudHMuaW5wdXQ7XG5cbiAgICAgIGlucHV0LnZhbHVlID0gcXVlcnk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFNlYXJjaEVsZW1lbnQ7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNlYXJjaEVsZW1lbnQ7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvc2VhcmNoRWxlbWVudC5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnQgKi9cbnZhciBjcmVhdGVFbGVtZW50ID0gZXhwb3J0cy5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlRWxlbWVudChlbGVtZW50KSB7XG4gIHZhciBjbGFzc05hbWVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJztcbiAgdmFyIHBhcmVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbnVsbDtcblxuICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1lbnQpO1xuICBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWVzO1xuXG4gIGlmIChwYXJlbnQpIHtcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoZWwpO1xuICB9XG5cbiAgcmV0dXJuIGVsO1xufTtcblxudmFyIGNyZWF0ZVNjcmlwdEVsZW1lbnQgPSBleHBvcnRzLmNyZWF0ZVNjcmlwdEVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVTY3JpcHRFbGVtZW50KHVybCwgY2IpIHtcbiAgdmFyIHNjcmlwdCA9IGNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcsIG51bGwsIGRvY3VtZW50LmJvZHkpO1xuICBzY3JpcHQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvamF2YXNjcmlwdCcpO1xuXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgIHdpbmRvd1tjYl0gPSBmdW5jdGlvbiAoanNvbikge1xuICAgICAgc2NyaXB0LnJlbW92ZSgpO1xuICAgICAgZGVsZXRlIHdpbmRvd1tjYl07XG4gICAgICByZXNvbHZlKGpzb24pO1xuICAgIH07XG5cbiAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdzcmMnLCB1cmwpO1xuICB9KTtcbn07XG5cbnZhciBhZGRDbGFzc05hbWUgPSBleHBvcnRzLmFkZENsYXNzTmFtZSA9IGZ1bmN0aW9uIGFkZENsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgaWYgKGVsZW1lbnQgJiYgIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgfVxufTtcblxudmFyIHJlbW92ZUNsYXNzTmFtZSA9IGV4cG9ydHMucmVtb3ZlQ2xhc3NOYW1lID0gZnVuY3Rpb24gcmVtb3ZlQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gIH1cbn07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvZG9tVXRpbHMuanMiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbnZhciBFTlRFUl9LRVkgPSBleHBvcnRzLkVOVEVSX0tFWSA9IDEzO1xudmFyIEVTQ0FQRV9LRVkgPSBleHBvcnRzLkVTQ0FQRV9LRVkgPSAyNztcbnZhciBBUlJPV19ET1dOX0tFWSA9IGV4cG9ydHMuQVJST1dfRE9XTl9LRVkgPSA0MDtcbnZhciBBUlJPV19VUF9LRVkgPSBleHBvcnRzLkFSUk9XX1VQX0tFWSA9IDM4O1xudmFyIEFSUk9XX0xFRlRfS0VZID0gZXhwb3J0cy5BUlJPV19MRUZUX0tFWSA9IDM3O1xudmFyIEFSUk9XX1JJR0hUX0tFWSA9IGV4cG9ydHMuQVJST1dfUklHSFRfS0VZID0gMzk7XG5cbnZhciBTUEVDSUFMX0tFWVMgPSBleHBvcnRzLlNQRUNJQUxfS0VZUyA9IFtFTlRFUl9LRVksIEVTQ0FQRV9LRVksIEFSUk9XX0RPV05fS0VZLCBBUlJPV19VUF9LRVksIEFSUk9XX0xFRlRfS0VZLCBBUlJPV19SSUdIVF9LRVldO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL2NvbnN0YW50cy5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9kb21VdGlscyA9IHJlcXVpcmUoJy4vZG9tVXRpbHMnKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIGN4ID0gZnVuY3Rpb24gY3goKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBjbGFzc25hbWVzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgY2xhc3NuYW1lc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBjbGFzc25hbWVzLmpvaW4oJyAnKS50cmltKCk7XG59O1xuXG52YXIgUmVzdWx0TGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUmVzdWx0TGlzdCgpIHtcbiAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgIF9yZWYkaGFuZGxlQ2xpY2sgPSBfcmVmLmhhbmRsZUNsaWNrLFxuICAgICAgICBoYW5kbGVDbGljayA9IF9yZWYkaGFuZGxlQ2xpY2sgPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uICgpIHt9IDogX3JlZiRoYW5kbGVDbGljayxcbiAgICAgICAgX3JlZiRjbGFzc05hbWVzID0gX3JlZi5jbGFzc05hbWVzLFxuICAgICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZXN1bHRMaXN0KTtcblxuICAgIF9pbml0aWFsaXNlUHJvcHMuY2FsbCh0aGlzKTtcblxuICAgIHRoaXMucHJvcHMgPSB7IGhhbmRsZUNsaWNrOiBoYW5kbGVDbGljaywgY2xhc3NOYW1lczogY2xhc3NOYW1lcyB9O1xuICAgIHRoaXMuc2VsZWN0ZWQgPSAtMTtcblxuICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBjeCgncmVzdWx0cycsIGNsYXNzTmFtZXMuY29udGFpbmVyKSk7XG4gICAgdmFyIHJlc3VsdEl0ZW0gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBjeChjbGFzc05hbWVzLml0ZW0pKTtcblxuICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbGljaywgdHJ1ZSk7XG4gICAgdGhpcy5lbGVtZW50cyA9IHsgY29udGFpbmVyOiBjb250YWluZXIsIHJlc3VsdEl0ZW06IHJlc3VsdEl0ZW0gfTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhSZXN1bHRMaXN0LCBbe1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciByZXN1bHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTtcbiAgICAgIHZhciBfZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzLFxuICAgICAgICAgIGNvbnRhaW5lciA9IF9lbGVtZW50cy5jb250YWluZXIsXG4gICAgICAgICAgcmVzdWx0SXRlbSA9IF9lbGVtZW50cy5yZXN1bHRJdGVtO1xuXG4gICAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICAgIHJlc3VsdHMuZm9yRWFjaChmdW5jdGlvbiAocmVzdWx0LCBpZHgpIHtcbiAgICAgICAgdmFyIGNoaWxkID0gcmVzdWx0SXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIGNoaWxkLnNldEF0dHJpYnV0ZSgnZGF0YS1rZXknLCBpZHgpO1xuICAgICAgICBjaGlsZC5pbm5lckhUTUwgPSByZXN1bHQubGFiZWw7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmVzdWx0cyA9IHJlc3VsdHM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2VsZWN0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0KGluZGV4KSB7XG4gICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25mdXNpbmctYXJyb3dcblxuICAgICAgQXJyYXkuZnJvbShjb250YWluZXIuY2hpbGRyZW4pLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkLCBpZHgpIHtcbiAgICAgICAgcmV0dXJuIGlkeCA9PT0gaW5kZXggPyAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY2hpbGQsICdhY3RpdmUnKSA6ICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjaGlsZCwgJ2FjdGl2ZScpO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSBpbmRleDtcbiAgICAgIHJldHVybiB0aGlzLnJlc3VsdHNbaW5kZXhdO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY291bnQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXN1bHRzLmxlbmd0aDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjbGVhcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXG4gICAgICB0aGlzLnNlbGVjdGVkID0gLTE7XG5cbiAgICAgIHdoaWxlIChjb250YWluZXIubGFzdENoaWxkKSB7XG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIubGFzdENoaWxkKTtcbiAgICAgIH1cblxuICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBSZXN1bHRMaXN0O1xufSgpO1xuXG52YXIgX2luaXRpYWxpc2VQcm9wcyA9IGZ1bmN0aW9uIF9pbml0aWFsaXNlUHJvcHMoKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdGhpcy5vbkNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBfcmVmMiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgIHRhcmdldCA9IF9yZWYyLnRhcmdldDtcblxuICAgIHZhciBoYW5kbGVDbGljayA9IF90aGlzLnByb3BzLmhhbmRsZUNsaWNrO1xuICAgIHZhciBjb250YWluZXIgPSBfdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cblxuICAgIGlmICh0YXJnZXQucGFyZW50Tm9kZSAhPT0gY29udGFpbmVyIHx8ICF0YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLWtleScpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGlkeCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEta2V5Jyk7XG4gICAgdmFyIHJlc3VsdCA9IF90aGlzLnJlc3VsdHNbaWR4XTtcbiAgICBoYW5kbGVDbGljayh7IHJlc3VsdDogcmVzdWx0IH0pO1xuICB9O1xufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUmVzdWx0TGlzdDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9yZXN1bHRMaXN0LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX25vZGVudFJ1bnRpbWUgPSByZXF1aXJlKCdub2RlbnQtcnVudGltZScpO1xuXG52YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVyJyk7XG5cbnZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXG52YXIgX2RvbVV0aWxzID0gcmVxdWlyZSgnLi4vZG9tVXRpbHMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXG4gIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcbiAgICBrZXk6ICdlbmRwb2ludCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcbiAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2wsXG4gICAgICAgICAganNvbnAgPSBfcmVmLmpzb25wO1xuXG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblxuXG4gICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcbiAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICBqc29ucDoganNvbnBcbiAgICAgIH0pKTtcblxuICAgICAgcmV0dXJuIHByb3RvY29sICsgJy8vZGV2LnZpcnR1YWxlYXJ0aC5uZXQvUkVTVC92MS9Mb2NhdGlvbnM/JyArIHBhcmFtU3RyaW5nO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3BhcnNlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcbiAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblxuICAgICAgaWYgKGRhdGEucmVzb3VyY2VTZXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhLnJlc291cmNlU2V0c1swXS5yZXNvdXJjZXMubWFwKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgeDogci5wb2ludC5jb29yZGluYXRlc1sxXSxcbiAgICAgICAgICB5OiByLnBvaW50LmNvb3JkaW5hdGVzWzBdLFxuICAgICAgICAgIGxhYmVsOiByLmFkZHJlc3MuZm9ybWF0dGVkQWRkcmVzcyxcbiAgICAgICAgICBib3VuZHM6IFtbci5iYm94WzBdLCByLmJib3hbMV1dLCAvLyBzLCB3XG4gICAgICAgICAgW3IuYmJveFsyXSwgci5iYm94WzNdXV0sXG4gICAgICAgICAgcmF3OiByXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZWFyY2gnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWFyY2goX3JlZjMpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG4gICAgICAgIHZhciBxdWVyeSwgcHJvdG9jb2wsIGpzb25wLCB1cmwsIGpzb247XG4gICAgICAgIHF1ZXJ5ID0gX3JlZjMucXVlcnk7XG5cbiAgICAgICAgcHJvdG9jb2wgPSB+bG9jYXRpb24ucHJvdG9jb2wuaW5kZXhPZignaHR0cCcpID8gbG9jYXRpb24ucHJvdG9jb2wgOiAnaHR0cHM6JztcblxuICAgICAgICBqc29ucCA9ICdCSU5HX0pTT05QX0NCXycgKyBEYXRlLm5vdygpO1xuICAgICAgICB1cmwgPSB0aGlzLmVuZHBvaW50KHsgcXVlcnk6IHF1ZXJ5LCBwcm90b2NvbDogcHJvdG9jb2wsIGpzb25wOiBqc29ucCB9KTtcblxuICAgICAgICByZXR1cm4gKDAsIF9kb21VdGlscy5jcmVhdGVTY3JpcHRFbGVtZW50KSh1cmwsIGpzb25wKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuICAgICAgICAgIGpzb24gPSAkYXdhaXRfMTtcbiAgICAgICAgICByZXR1cm4gJHJldHVybih0aGlzLnBhcnNlKHsgZGF0YToganNvbiB9KSk7XG4gICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9iaW5nUHJvdmlkZXIuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbm9kZW50UnVudGltZSA9IHJlcXVpcmUoJ25vZGVudC1ydW50aW1lJyk7XG5cbnZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcbiAgICBrZXk6ICdnZXRQYXJhbVN0cmluZycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhcmFtU3RyaW5nKHBhcmFtcykge1xuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHBhcmFtcykubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtc1trZXldKTtcbiAgICAgIH0pLmpvaW4oJyYnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZWFyY2gnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWFyY2goX3JlZikge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwgdXJsLCByZXF1ZXN0LCBqc29uO1xuICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnk7XG5cbiAgICAgICAgcHJvdG9jb2wgPSB+bG9jYXRpb24ucHJvdG9jb2wuaW5kZXhPZignaHR0cCcpID8gbG9jYXRpb24ucHJvdG9jb2wgOiAnaHR0cHM6JztcbiAgICAgICAgdXJsID0gdGhpcy5lbmRwb2ludCh7IHF1ZXJ5OiBxdWVyeSwgcHJvdG9jb2w6IHByb3RvY29sIH0pO1xuXG4gICAgICAgIHJldHVybiBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG4gICAgICAgICAgcmVxdWVzdCA9ICRhd2FpdF8xO1xuICAgICAgICAgIHJldHVybiByZXF1ZXN0Lmpzb24oKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMikge1xuICAgICAgICAgICAganNvbiA9ICRhd2FpdF8yO1xuICAgICAgICAgICAgcmV0dXJuICRyZXR1cm4odGhpcy5wYXJzZSh7IGRhdGE6IGpzb24gfSkpO1xuICAgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvcHJvdmlkZXIuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVyJyk7XG5cbnZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblxuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cblxuICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG4gICAgICAgIGY6ICdqc29uJyxcbiAgICAgICAgdGV4dDogcXVlcnlcbiAgICAgIH0pKTtcblxuICAgICAgcmV0dXJuIHByb3RvY29sICsgJy8vZ2VvY29kZS5hcmNnaXMuY29tL2FyY2dpcy9yZXN0L3NlcnZpY2VzL1dvcmxkL0dlb2NvZGVTZXJ2ZXIvZmluZD8nICsgcGFyYW1TdHJpbmc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncGFyc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXG4gICAgICByZXR1cm4gZGF0YS5sb2NhdGlvbnMubWFwKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgeDogci5mZWF0dXJlLmdlb21ldHJ5LngsXG4gICAgICAgICAgeTogci5mZWF0dXJlLmdlb21ldHJ5LnksXG4gICAgICAgICAgbGFiZWw6IHIubmFtZSxcbiAgICAgICAgICBib3VuZHM6IFtbci5leHRlbnQueW1pbiwgci5leHRlbnQueG1pbl0sIC8vIHMsIHdcbiAgICAgICAgICBbci5leHRlbnQueW1heCwgci5leHRlbnQueG1heF1dLFxuICAgICAgICAgIHJhdzogclxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZXNyaVByb3ZpZGVyLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3Byb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcicpO1xuXG52YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXG4gIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcbiAgICBrZXk6ICdlbmRwb2ludCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcbiAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXG5cbiAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuICAgICAgICBhZGRyZXNzOiBxdWVyeVxuICAgICAgfSkpO1xuXG4gICAgICAvLyBnb29nbGUgcmVxdWlyZXMgYSBzZWN1cmUgY29ubmVjdGlvbiB3aGVuIHVzaW5nIGFwaSBrZXlzXG4gICAgICB2YXIgcHJvdG8gPSBwYXJhbXMgJiYgcGFyYW1zLmtleSA/ICdodHRwczonIDogcHJvdG9jb2w7XG4gICAgICByZXR1cm4gcHJvdG8gKyAnLy9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbj8nICsgcGFyYW1TdHJpbmc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncGFyc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXG4gICAgICByZXR1cm4gZGF0YS5yZXN1bHRzLm1hcChmdW5jdGlvbiAocikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IHIuZ2VvbWV0cnkubG9jYXRpb24ubG5nLFxuICAgICAgICAgIHk6IHIuZ2VvbWV0cnkubG9jYXRpb24ubGF0LFxuICAgICAgICAgIGxhYmVsOiByLmZvcm1hdHRlZF9hZGRyZXNzLFxuICAgICAgICAgIGJvdW5kczogW1tyLmdlb21ldHJ5LnZpZXdwb3J0LnNvdXRod2VzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0LmxuZ10sIC8vIHMsIHdcbiAgICAgICAgICBbci5nZW9tZXRyeS52aWV3cG9ydC5ub3J0aGVhc3QubGF0LCByLmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sbmddXSxcbiAgICAgICAgICByYXc6IHJcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm92aWRlcjtcbn0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2dvb2dsZVByb3ZpZGVyLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3Byb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcicpO1xuXG52YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXG4gIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcbiAgICBrZXk6ICdlbmRwb2ludCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcbiAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXG5cbiAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuICAgICAgICBmb3JtYXQ6ICdqc29uJyxcbiAgICAgICAgcTogcXVlcnlcbiAgICAgIH0pKTtcblxuICAgICAgcmV0dXJuIHByb3RvY29sICsgJy8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3NlYXJjaD8nICsgcGFyYW1TdHJpbmc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncGFyc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXG4gICAgICByZXR1cm4gZGF0YS5tYXAoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiByLmxvbixcbiAgICAgICAgICB5OiByLmxhdCxcbiAgICAgICAgICBsYWJlbDogci5kaXNwbGF5X25hbWUsXG4gICAgICAgICAgYm91bmRzOiBbW3BhcnNlRmxvYXQoci5ib3VuZGluZ2JveFswXSksIHBhcnNlRmxvYXQoci5ib3VuZGluZ2JveFsyXSldLCAvLyBzLCB3XG4gICAgICAgICAgW3BhcnNlRmxvYXQoci5ib3VuZGluZ2JveFsxXSksIHBhcnNlRmxvYXQoci5ib3VuZGluZ2JveFszXSldXSxcbiAgICAgICAgICByYXc6IHJcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm92aWRlcjtcbn0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL29wZW5TdHJlZXRNYXBQcm92aWRlci5qcyIsImltcG9ydCB7dG9nZ2xlTGF5ZXJ9IGZyb20gXCIuL2xheWVyXCI7XHJcbmltcG9ydCB7bWFrZU9wYWNpdHlTbGlkZXJ9IGZyb20gXCIuL29wYWNpdHlTbGlkZXJcIlxyXG5pbXBvcnQge3NldFNsaWRlckluaXRpYWxQb3N9IGZyb20gXCIuL29wYWNpdHlTbGlkZXJcIlxyXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tIFwiLi9zaGFyZVwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFNldHVwUGFuZWwgKGxheWVycywgbGF5b3V0KSB7XHJcbiAgICB2YXIgbGF5ZXJHcm91cHMgPSBtYWtlTGF5ZXJHcm91cHMobGF5b3V0WydsYXllci1ncm91cHMtb3JkZXInXSk7XHJcbiAgICBtYWtlTGF5ZXJFbGVtcyhsYXllckdyb3VwcywgbGF5ZXJzKTtcclxuICAgIG1ha2VQYW5lbERyYWdnYWJsZSgpXHJcbiAgICBzZXRQYW5lbFNjcm9sbEhhbmRsZXIoKVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRQYW5lbFNjcm9sbEhhbmRsZXIoKSB7XHJcbiAgICB2YXIgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKVxyXG4gICAgcGFuZWwub25zY3JvbGwgPSB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VQYW5lbERyYWdnYWJsZSgpIHtcclxuICAgIHZhciBvdmVybGF5ID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwtZHJhZy1vdmVybGF5JylcclxuXHJcbiAgICBvdmVybGF5LmNhbGwoZDMuZHJhZygpXHJcbiAgICAgICAgLm9uKCdkcmFnJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHBhbmVsRHJhZ0V2ZW50SGFuZGxlci5jYWxsKHRoaXMpXHJcbiAgICB9KSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhbmVsRHJhZ0V2ZW50SGFuZGxlcigpIHtcclxuICAgIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKVxyXG4gICAgdXBkYXRlUGFuZWxXaWR0aCgpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0ICgpIHtcclxuICAgIHZhciBwYW5lbCA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsJylcclxuICAgIHZhciBwYW5lbE9mZnNldEhlaWdodCA9IHBhbmVsLnByb3BlcnR5KCdvZmZzZXRIZWlnaHQnKVxyXG4gICAgdmFyIHBhbmVsRHJhZ092ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwtZHJhZy1vdmVybGF5JylcclxuICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwtaGVhZGVyJylcclxuXHJcbiAgICB2YXIgbmV3SGVpZ2h0XHJcblxyXG4gICAgaWYgKHBhbmVsLmNsYXNzZWQoJ2dyYXBocy1hY3RpdmUnKSkge1xyXG4gICAgICAgIHZhciBncmFwaExpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JhcGgtbGlzdCcpXHJcbiAgICAgICAgbmV3SGVpZ2h0ID0gaGVhZGVyLnNjcm9sbEhlaWdodCArIGdyYXBoTGlzdC5zY3JvbGxIZWlnaHRcclxuICAgIH1cclxuICAgIGVsc2UgeyAvLyBwYW5lbC5jbGFzc2VkKCdsYXllcnMtYWN0aXZlJylcclxuICAgICAgICB2YXIgbGF5ZXJMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheWVyLWxpc3QnKVxyXG4gICAgICAgIG5ld0hlaWdodCA9IGhlYWRlci5zY3JvbGxIZWlnaHQgKyBsYXllckxpc3Quc2Nyb2xsSGVpZ2h0XHJcbiAgICB9XHJcbiAgICBuZXdIZWlnaHQgPSBuZXdIZWlnaHQgPiBwYW5lbE9mZnNldEhlaWdodCA/IGAke25ld0hlaWdodH1gKydweCcgOiBudWxsXHJcbiAgICBwYW5lbERyYWdPdmVybGF5LnN0eWxlLmhlaWdodCA9IG5ld0hlaWdodFxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVQYW5lbFdpZHRoKCkge1xyXG4gICAgdmFyIHBhbmVsID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwnKVxyXG4gICAgdmFyIHBhbmVsTWluV2lkdGggPSArcGFuZWwuc3R5bGUoJ21pbi13aWR0aCcpLnNsaWNlKDAsIC0yKVxyXG4gICAgdmFyIHBhbmVsQ2xpZW50V2lkdGggPSBwYW5lbC5wcm9wZXJ0eSgnY2xpZW50V2lkdGgnKVxyXG5cclxuICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyYXBwZXInKVxyXG4gICAgdmFyIHdyYXBwZXJXaWR0aCA9IHdyYXBwZXIuY2xpZW50V2lkdGhcclxuXHJcbiAgICB2YXIgbWFwV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtd3JhcHBlcicpXHJcblxyXG4gICAgdmFyIG1vdXNlWCA9IGQzLmV2ZW50LnNvdXJjZUV2ZW50LnhcclxuICAgIHZhciB4RGVsdGEgPSAod3JhcHBlcldpZHRoIC0gbW91c2VYKSAtIHBhbmVsQ2xpZW50V2lkdGhcclxuXHJcbiAgICB2YXIgbmV3UGFuZWxXaWR0aCA9IHBhbmVsQ2xpZW50V2lkdGggKyB4RGVsdGFcclxuICAgIG5ld1BhbmVsV2lkdGggPSBuZXdQYW5lbFdpZHRoIDwgcGFuZWxNaW5XaWR0aCA/IHBhbmVsTWluV2lkdGggOiBuZXdQYW5lbFdpZHRoXHJcblxyXG4gICAgbWFwV3JhcHBlci5zdHlsZS5wYWRkaW5nUmlnaHQgPSBgJHtuZXdQYW5lbFdpZHRofWArJ3B4J1xyXG4gICAgcGFuZWwuc3R5bGUoJ3dpZHRoJywgYCR7bmV3UGFuZWxXaWR0aH1gKydweCcpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VMYXllckdyb3VwcyAobGF5b3V0KSB7XHJcbiAgICByZXR1cm4gZDMuc2VsZWN0KCcjbGF5ZXItbGlzdCcpXHJcbiAgICAgICAgLnNlbGVjdEFsbCgnLmxheWVyLWdyb3VwLXdyYXBwZXInKVxyXG4gICAgICAgIC5kYXRhKGxheW91dClcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAtd3JhcHBlcicpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIGxheWVyR3JvdXAgPT4gbGF5ZXJHcm91cC5pZClcclxuICAgICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGxheWVyR3JvdXAgPT4gbGF5ZXJHcm91cC5hY3RpdmUpXHJcbiAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cC1idG4gYnRuJylcclxuICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJHcm91cC5hY3RpdmUgPSAhbGF5ZXJHcm91cC5hY3RpdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLnBhcmVudE5vZGUpLmNsYXNzZWQoJ2FjdGl2ZScsICgpID0+IGxheWVyR3JvdXAuYWN0aXZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAudGV4dChsYXllckdyb3VwLm5hbWUpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VMYXllckVsZW1zIChsYXllckdyb3VwcywgbGF5ZXJzKSB7XHJcbiAgICBsYXllckdyb3Vwcy5zZWxlY3RBbGwoJy5sYXllci1zZWxlY3QnKVxyXG4gICAgICAgIC5kYXRhKGxheWVyR3JvdXAgPT4gbGF5ZXJzW2xheWVyR3JvdXAuaWRdKVxyXG4gICAgICAgIC5lbnRlcigpLmFwcGVuZCgnZGl2JylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItc2VsZWN0JylcclxuICAgICAgICAuZWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcclxuICAgICAgICAgICAgdmFyIGdyb3VwTmFtZSA9IHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkO1xyXG4gICAgICAgICAgICB2YXIgbGF5ZXJEaXYgPSBkMy5zZWxlY3QodGhpcyk7XHJcblxyXG4gICAgICAgICAgICBtYWtlQ2hlY2tib3gobGF5ZXIsIGxheWVyRGl2KTtcclxuICAgICAgICAgICAgbWFrZUxhYmVsKGxheWVyLCBsYXllckRpdik7XHJcbiAgICAgICAgICAgIG1ha2VEZXNjcmlwdGlvbihsYXllciwgbGF5ZXJEaXYpO1xyXG4gICAgICAgICAgICBtYWtlTGF5ZXJUb29scyhsYXllciwgbGF5ZXJEaXYpO1xyXG4gICAgICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlQ2hlY2tib3ggKGxheWVyLCBsYXllckRpdikge1xyXG4gICAgbGF5ZXJEaXYuYXBwZW5kKCdpbnB1dCcpXHJcbiAgICAgICAgLmF0dHIoJ3R5cGUnLCAnY2hlY2tib3gnKVxyXG4gICAgICAgIC5hdHRyKCdpZCcsIGxheWVyID0+IGxheWVyLmlkKVxyXG4gICAgICAgIC5hdHRyKCdjaGVja2VkJywgKGxheWVyKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBsYXllci5hY3RpdmUgPyAnY2hlY2tlZCcgOiBudWxsO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKGxheWVyKSB7XHJcbiAgICAgICAgICAgIHRvZ2dsZUxheWVyKGxheWVyKTtcclxuICAgICAgICAgICAgbGF5ZXJEaXYuc2VsZWN0KCcubGF5ZXItdG9vbHMtd3JhcHBlcicpXHJcbiAgICAgICAgICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJywgbGF5ZXIuYWN0aXZlKTtcclxuICAgICAgICAgICAgaWYgKGxheWVyLmFjdGl2ZSkgc2V0U2xpZGVySW5pdGlhbFBvcyhsYXllciwgbGF5ZXJEaXYpXHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VMYWJlbChsYXllciwgbGF5ZXJEaXYpIHtcclxuICAgIGxheWVyRGl2LmFwcGVuZCgnbGFiZWwnKVxyXG4gICAgICAgIC5hdHRyKCdmb3InLCBsYXllciA9PiBsYXllci5pZClcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItbGFiZWwnKVxyXG4gICAgICAgIC5odG1sKGxheWVyID0+IGxheWVyLm5hbWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlRGVzY3JpcHRpb24gKGxheWVyLCBsYXllckRpdikge1xyXG4gICAgaWYgKGxheWVyLmluZm8gJiYgbGF5ZXIuaW5mbyAhPT0gJycpIHtcclxuICAgICAgICBsYXllckRpdi5hcHBlbmQoJ2RpdicpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1pbmZvLWJ0bicpXHJcbiAgICAgICAgICAgIC50ZXh0KCcoPyknKVxyXG4gICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMucGFyZW50Tm9kZSlcclxuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCcubGF5ZXItaW5mby13cmFwcGVyJylcclxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby13cmFwcGVyJylcclxuICAgICAgICAgICAgLnRleHQobGF5ZXIgPT4gbGF5ZXIuaW5mbyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VMYXllclRvb2xzKGxheWVyLCBsYXllckRpdikge1xyXG4gICAgdmFyIGxheWVyVG9vbHNEaXYgPSBsYXllckRpdi5hcHBlbmQoJ2RpdicpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLXRvb2xzLXdyYXBwZXInKVxyXG4gICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsYXllci5hY3RpdmVcclxuICAgICAgICB9KVxyXG5cclxuICAgIG1ha2VPcGFjaXR5U2xpZGVyKGxheWVyLCBsYXllclRvb2xzRGl2KTtcclxuICAgIG1ha2VMZWdlbmQobGF5ZXIsIGxheWVyVG9vbHNEaXYpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTGVnZW5kIChsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIpIHtcclxuICAgIGxheWVyVG9vbHNXcmFwcGVyXHJcbiAgICAgICAgLmFwcGVuZCgnZGl2JylcclxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZC13cmFwcGVyJylcclxuICAgICAgICAuYXBwZW5kKCdpbWcnKVxyXG4gICAgICAgICAgICAuYXR0cignc3JjJywgbGF5ZXIubGVnZW5kIHx8ICdtZWFuX25kdmlfbGVnZW5kLmpwZycpO1xyXG59XHJcblxyXG5cclxuXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3BhbmVsLmpzIiwiaW1wb3J0IHtHZXRNYXB9IGZyb20gXCIuL21hcFwiO1xyXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tIFwiLi9zaGFyZVwiO1xyXG5cclxuLyoqXHJcbiAqIE5lZWRlZCBmb3IgdGhlIHNoYXJlIHVybCBzaW5jZSBMZWFmbGV0IGRvZXMgbm90IGhhdmUgYSBkZWZhdWx0IHdheSB0byBzdXJmYWNlXHJcbiAqIHRoZSBvcmRlciBvZiBsYXllcnMgaW4gdGhlIG1hcFxyXG4gKi9cclxudmFyIF9jdXJyZW50X2xheWVycyA9IFtdO1xyXG5cclxuLyoqXHJcbiAqIE5vdGU6IGxheWVyIGlzIG5vdCB0aGUgbGVhZmxldCBjb25jZXB0IG9mIGEgbGF5ZXIsIGJ1dCByYXRoZXIgdGhlIGludGVybmFsXHJcbiAqICAgICAgIG9iamVjdCB3aGljaCB0cmFja3MgdGhlbS4gbGF5ZXIubWFwTGF5ZXIgaXMgdGhlIHBvaW50ZXIgdG8gdGhlXHJcbiAqICAgICAgIGxlYWZsZXQgbGF5ZXIuXHJcbiAqL1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdldEN1cnJlbnRMYXllcnMgKCkge1xyXG4gICAgcmV0dXJuIF9jdXJyZW50X2xheWVycztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIENyZWF0ZURlZmF1bHRMYXllcnMgKGxheWVycywgZGVmYXVsdExheWVycykge1xyXG4gICAgdmFyIGksIGosIHByb3AsIGxheWVyZ3JvdXA7XHJcbiAgICB2YXIgZGVmYXVsdExheWVyO1xyXG4gICAgdmFyIGZvdW5kTGF5ZXI7XHJcblxyXG4gICAgaWYgKCFkZWZhdWx0TGF5ZXJzIHx8IGRlZmF1bHRMYXllcnMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IGRlZmF1bHRMYXllcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBmb3VuZExheWVyID0gZmFsc2U7XHJcbiAgICAgICAgZGVmYXVsdExheWVyID0gZGVmYXVsdExheWVyc1tpXTtcclxuICAgICAgICBmb3IgKHByb3AgaW4gbGF5ZXJzKSB7XHJcbiAgICAgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XHJcbiAgICAgICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XHJcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsYXllcmdyb3VwLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZGVmYXVsdExheWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlTGF5ZXIobGF5ZXJncm91cFtqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRMYXllciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUxheWVyIChsYXllciwgbGF5ZXJEaXYpIHtcclxuICAgIGlmICghbGF5ZXIuYWN0aXZlKSB7XHJcbiAgICAgICAgZW5hYmxlTGF5ZXIobGF5ZXIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkaXNhYmxlTGF5ZXIobGF5ZXIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlTGF5ZXIgKGxheWVyLCBsYXllckRpdikge1xyXG4gICAgdmFyIG1hcCA9IEdldE1hcCgpO1xyXG5cclxuICAgIGxheWVyLmFjdGl2ZSA9IHRydWU7XHJcbiAgICBsYXllci5tYXBMYXllciA9IGxheWVyLm1hcExheWVyIHx8IG1ha2VXbXNUaWxlTGF5ZXIobGF5ZXIpO1xyXG4gICAgbWFwLmFkZExheWVyKGxheWVyLm1hcExheWVyKTtcclxuICAgIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xyXG4gICAgdXBkYXRlU2hhcmVVcmwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkTGF5ZXJUb0ludGVybmFsVHJhY2tlciAobGF5ZXIpIHtcclxuICAgIF9jdXJyZW50X2xheWVycy5wdXNoKGxheWVyLmlkKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVMYXllciAobGF5ZXIpIHtcclxuICAgIHZhciBtYXAgPSBHZXRNYXAoKTtcclxuXHJcbiAgICBsYXllci5hY3RpdmUgPSBmYWxzZTtcclxuICAgIGlmIChsYXllci5tYXBMYXllciAmJiBtYXAuaGFzTGF5ZXIobGF5ZXIubWFwTGF5ZXIpKSB7XHJcbiAgICAgICAgbWFwLnJlbW92ZUxheWVyKGxheWVyLm1hcExheWVyKTtcclxuICAgIH1cclxuICAgIHJlbW92ZUxheWVyRnJvbUludGVybmFsVHJhY2tlcihsYXllcik7XHJcbiAgICB1cGRhdGVTaGFyZVVybCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIgKGxheWVyKSB7XHJcbiAgICB2YXIgbG9jID0gX2N1cnJlbnRfbGF5ZXJzLmluZGV4T2YobGF5ZXIuaWQpO1xyXG4gICAgaWYgKGxvYyA9PT0gLTEpIHJldHVybjtcclxuICAgIF9jdXJyZW50X2xheWVycy5zcGxpY2UobG9jLCAxKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUxheWVyT3BhY2l0eSAobGF5ZXIsIG5ld09wYWNpdHkpIHtcclxuICAgIGxheWVyLm9wYWNpdHkgPSBuZXdPcGFjaXR5XHJcbiAgICBsYXllci5tYXBMYXllci5zZXRPcGFjaXR5KG5ld09wYWNpdHkpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VXbXNUaWxlTGF5ZXIgKGxheWVyKSB7XHJcbiAgICByZXR1cm4gTC50aWxlTGF5ZXIud21zKGxheWVyLnVybCwge1xyXG4gICAgICAgIGxheWVyczogbGF5ZXIuaWQsXHJcbiAgICAgICAgdHJhbnNwYXJlbnQ6IGxheWVyLnRyYW5zcGFyZW50IHx8IHRydWUsXHJcbiAgICAgICAgdmVyc2lvbjogbGF5ZXIudmVyc2lvbiB8fCAnMS4zLjAnLFxyXG4gICAgICAgIGNyczogbGF5ZXIuY3JzIHx8IEwuQ1JTLkVQU0c0MzI2LFxyXG4gICAgICAgIGZvcm1hdDogbGF5ZXIuZm9ybWF0IHx8ICdpbWFnZS9wbmcnLFxyXG4gICAgICAgIG9wYWNpdHk6IGxheWVyLm9wYWNpdHkgfHwgXCIxXCJcclxuICAgIH0pO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2xheWVyLmpzIiwidmFyIG1hcDtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBDcmVhdGVNYXAgKG1hcENvbmZpZykge1xyXG4gICAgdmFyIGlkID0gbWFwQ29uZmlnLmlkIHx8IFwibWFwXCI7XHJcbiAgICB2YXIgb3B0aW9ucyA9IG1hcENvbmZpZy5vcHRpb25zIHx8IHtcInNjcm9sbFdoZWVsWm9vbVwiIDogZmFsc2V9O1xyXG4gICAgdmFyIGluaXRpYWxDZW50ZXIgPSBtYXBDb25maWcuaW5pdGlhbENlbnRlciB8fCBbXCIzOC41XCIsIFwiLTgxXCJdO1xyXG4gICAgdmFyIGluaXRpYWxab29tID0gbWFwQ29uZmlnLmluaXRpYWxab29tIHx8IDY7XHJcblxyXG4gICAgbWFwID0gTC5tYXAoaWQsIG9wdGlvbnMpLnNldFZpZXcoaW5pdGlhbENlbnRlciwgaW5pdGlhbFpvb20pO1xyXG4gICAgTC5jb250cm9sLmF0dHJpYnV0aW9uKCkuYWRkVG8obWFwKVxyXG4gICAgcmV0dXJuIG1hcDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdldE1hcCAoKSB7XHJcbiAgICByZXR1cm4gbWFwO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL21hcC5qcyIsImltcG9ydCB7R2V0TWFwfSBmcm9tICcuL21hcCc7XHJcbmltcG9ydCB7QkFTRV9MQVlFUl9UWVBFfSBmcm9tICcuL2Jhc2VsYXllcic7XHJcbmltcG9ydCB7R2V0Q3VycmVudExheWVyc30gZnJvbSAnLi9sYXllcic7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQmluZFVwZGF0ZVNoYXJlVXJsIChtYXApIHtcclxuICAgIG1hcC5vbihcIm1vdmVlbmRcIiwgdXBkYXRlU2hhcmVVcmwpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlU2hhcmVVcmwgKGUpIHtcclxuICAgIHZhciBtYXAgPSBHZXRNYXAoKTtcclxuXHJcbiAgICB2YXIgcGFyYW1zID0gW1xyXG4gICAgICAgIG1ha2VDZW50ZXJTdHJpbmcobWFwKSxcclxuICAgICAgICBtYWtlWm9vbVN0cmluZyhtYXApLFxyXG4gICAgICAgIG1ha2VMYXllclN0cmluZyhtYXApLFxyXG4gICAgICAgIG1ha2VCYXNlTGF5ZXJTdHJpbmcobWFwKSxcclxuICAgIF07XHJcblxyXG4gICAgc2V0U2hhcmVVcmwobWFrZVNoYXJlVXJsKHBhcmFtcykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlU2hhcmVVcmwgKHBhcmFtcykge1xyXG4gICAgcmV0dXJuIFwiP1wiICsgcGFyYW1zLmZpbHRlcihmdW5jdGlvbiAocCkgeyByZXR1cm4gcCAhPT0gdW5kZWZpbmVkIH0pLmpvaW4oXCImXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRTaGFyZVVybCAodXJsKSB7XHJcbiAgICBpZiAod2luZG93Lmhpc3RvcnkgJiYgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKSB7XHJcbiAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBcIlwiLCB1cmwpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlQ2VudGVyU3RyaW5nIChtYXApIHtcclxuICAgIHZhciBjZW50ZXIgPSBtYXAuZ2V0Q2VudGVyKCk7XHJcbiAgICByZXR1cm4gXCJjZW50ZXI9XCIgKyBjZW50ZXIubGF0LnRvU3RyaW5nKCkgKyBcIixcIiArIGNlbnRlci5sbmcudG9TdHJpbmcoKVxyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlWm9vbVN0cmluZyAobWFwKSB7XHJcbiAgICByZXR1cm4gXCJ6b29tPVwiICsgbWFwLmdldFpvb20oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUxheWVyU3RyaW5nIChtYXApIHtcclxuICAgIHZhciBsYXllcnMgPSBbXTtcclxuICAgIHZhciBvcGFjaXR5VmFscyA9IHt9O1xyXG4gICAgdmFyIGN1cnJlbnRMYXllcnMgPSBHZXRDdXJyZW50TGF5ZXJzKCk7XHJcblxyXG4gICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IGxheWVyLm9wdGlvbnM7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sYXllcnMpIHtcclxuICAgICAgICAgICAgb3BhY2l0eVZhbHNbb3B0aW9ucy5sYXllcnNdID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShcIm9wYWNpdHlcIikgPyBvcHRpb25zLm9wYWNpdHkgOiBcIjFcIjtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgY3VycmVudExheWVyO1xyXG4gICAgdmFyIGk7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgY3VycmVudExheWVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGN1cnJlbnRMYXllciA9IGN1cnJlbnRMYXllcnNbaV07XHJcbiAgICAgICAgbGF5ZXJzLnB1c2goY3VycmVudExheWVyKTtcclxuICAgICAgICBsYXllcnMucHVzaChvcGFjaXR5VmFsc1tjdXJyZW50TGF5ZXJdKTtcclxuICAgIH1cclxuICAgIHJldHVybiBcImxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUJhc2VMYXllclN0cmluZyAobWFwKSB7XHJcbiAgICB2YXIgbGF5ZXJzID0gW107XHJcbiAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xyXG4gICAgICAgIGlmIChsYXllci5vcHRpb25zICYmIGxheWVyLm9wdGlvbnMudHlwZSA9PT0gQkFTRV9MQVlFUl9UWVBFKSB7XHJcbiAgICAgICAgICAgIGxheWVycy5wdXNoKGxheWVyLm9wdGlvbnMuaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIFwiYmFzZWxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VTaGFyZVVybCAoKSB7XHJcbiAgICB2YXIgcGFyYW1zID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcclxuICAgIGlmIChwYXJhbXMgPT09IFwiXCIpIHJldHVybjtcclxuXHJcbiAgICBwYXJhbXMgPSBnZXRQYXJhbXNBcnJheShwYXJhbXMpO1xyXG4gICAgcGFyYW1zID0gbWFrZUtleWVkUGFyYW1zT2JqZWN0KHBhcmFtcyk7XHJcblxyXG4gICAgZm9ybWF0UGFyYW1zKHBhcmFtcyk7XHJcbiAgICByZXR1cm4gcGFyYW1zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRQYXJhbXNBcnJheSAocGFyYW1zKSB7XHJcbiAgICBwYXJhbXMgPSBwYXJhbXMuc3Vic3RyaW5nKDEpO1xyXG4gICAgcGFyYW1zID0gdW5tYW5nbGVQYXJhbVN0cmluZyhwYXJhbXMpO1xyXG4gICAgcmV0dXJuIHBhcmFtcy5zcGxpdChcIiZcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVubWFuZ2xlUGFyYW1TdHJpbmcgKHBhcmFtcykge1xyXG4gICAgcmV0dXJuIHBhcmFtcy5yZXBsYWNlKC9cXCUyW2N8Q10vZywgXCIsXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlS2V5ZWRQYXJhbXNPYmplY3QgKHBhcmFtc0Fycikge1xyXG4gICAgdmFyIHBhcnNlZFBhcmFtcyA9IHt9O1xyXG4gICAgdmFyIHBhcmFtUGFpcjtcclxuICAgIHZhciBpO1xyXG5cclxuICAgIGZvciAoaSA9IDA7IGkgPCBwYXJhbXNBcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBwYXJhbVBhaXIgPSBwYXJhbXNBcnJbaV0uc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgIHBhcnNlZFBhcmFtc1twYXJhbVBhaXJbMF1dID0gcGFyYW1QYWlyWzFdXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHBhcnNlZFBhcmFtcztcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0UGFyYW1zIChwYXJhbXMpIHtcclxuICAgIGlmIChwYXJhbXMuY2VudGVyKSBwYXJhbXMuY2VudGVyID0gZm9ybWF0Q2VudGVyUGFyYW0ocGFyYW1zLmNlbnRlcik7XHJcbiAgICBpZiAocGFyYW1zLmxheWVycykgcGFyYW1zLmxheWVycyA9IGZvcm1hdExheWVyUGFyYW0ocGFyYW1zLmxheWVycyk7XHJcbiAgICBpZiAocGFyYW1zLmJhc2VsYXllcnMpIHBhcmFtcy5iYXNlbGF5ZXJzID0gZm9ybWF0QmFzZUxheWVyUGFyYW0ocGFyYW1zLmJhc2VsYXllcnMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRDZW50ZXJQYXJhbSAoY2VudGVyKSB7XHJcbiAgICByZXR1cm4gY2VudGVyLnNwbGl0KFwiLFwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0TGF5ZXJQYXJhbSAobGF5ZXJzKSB7XHJcbiAgICB2YXIgZm9ybWF0dGVkTGF5ZXJzID0ge1xyXG4gICAgICAgIFwiZW5hYmxlZExheWVyc1wiOiBbXSxcclxuICAgICAgICBcIm9wYWNpdHlWYWxzXCI6IHt9XHJcbiAgICB9O1xyXG4gICAgdmFyIGxheWVySWQ7XHJcbiAgICB2YXIgaTtcclxuXHJcbiAgICBsYXllcnMgPSBsYXllcnMuc3BsaXQoXCIsXCIpO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IGxheWVycy5sZW5ndGg7IGkgPSBpICsgMikge1xyXG4gICAgICAgIGxheWVySWQgPSBsYXllcnNbaV07XHJcbiAgICAgICAgZm9ybWF0dGVkTGF5ZXJzLmVuYWJsZWRMYXllcnMucHVzaChsYXllcklkKTtcclxuICAgICAgICBmb3JtYXR0ZWRMYXllcnMub3BhY2l0eVZhbHNbbGF5ZXJJZF0gPSBsYXllcnNbaSsxXTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZm9ybWF0dGVkTGF5ZXJzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRCYXNlTGF5ZXJQYXJhbSAoYmFzZWxheWVycykge1xyXG4gICAgcmV0dXJuIGJhc2VsYXllcnMuc3BsaXQoXCIsXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnIChjb25maWcpIHtcclxuICAgIHZhciBzaGFyZSA9IHBhcnNlU2hhcmVVcmwoKTtcclxuICAgIGlmICghc2hhcmUpIHJldHVybjtcclxuICAgIGlmIChzaGFyZS5jZW50ZXIpIGNvbmZpZy5tYXAuaW5pdGlhbENlbnRlciA9IHNoYXJlLmNlbnRlcjtcclxuICAgIGlmIChzaGFyZS56b29tKSBjb25maWcubWFwLmluaXRpYWxab29tID0gc2hhcmUuem9vbTtcclxuICAgIGlmIChzaGFyZS5sYXllcnMpIGFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5sYXllcnMsIGNvbmZpZyk7XHJcbiAgICBpZiAoc2hhcmUuYmFzZWxheWVycykgYWRkQmFzZUxheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5iYXNlbGF5ZXJzLCBjb25maWcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRMYXllclNldHRpbmdzVG9Db25maWcgKHNoYXJlTGF5ZXJTZXR0aW5ncywgY29uZmlnKSB7XHJcbiAgICB2YXIgZW5hYmxlZExheWVycyA9IHNoYXJlTGF5ZXJTZXR0aW5ncy5lbmFibGVkTGF5ZXJzO1xyXG4gICAgY29uZmlnW1wiYWN0aXZlLWxheWVyc1wiXSA9IGVuYWJsZWRMYXllcnM7XHJcblxyXG4gICAgdmFyIGksIGosIHByb3AsIGxheWVyZ3JvdXA7XHJcbiAgICB2YXIgZW5hYmxlZExheWVyO1xyXG4gICAgdmFyIGZvdW5kTGF5ZXI7XHJcbiAgICB2YXIgbGF5ZXJzID0gY29uZmlnLmxheWVycztcclxuXHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgZW5hYmxlZExheWVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGZvdW5kTGF5ZXIgPSBmYWxzZTtcclxuICAgICAgICBlbmFibGVkTGF5ZXIgPSBlbmFibGVkTGF5ZXJzW2ldO1xyXG4gICAgICAgIGZvciAocHJvcCBpbiBsYXllcnMpIHtcclxuICAgICAgICAgICAgaWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcclxuICAgICAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcclxuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGxheWVyZ3JvdXAubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChsYXllcmdyb3VwW2pdLmlkID09PSBlbmFibGVkTGF5ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllcmdyb3VwW2pdLm9wYWNpdHkgPSBzaGFyZUxheWVyU2V0dGluZ3Mub3BhY2l0eVZhbHNbZW5hYmxlZExheWVyXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZExheWVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZm91bmRMYXllcikgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRCYXNlTGF5ZXJTZXR0aW5nc1RvQ29uZmlnIChzaGFyZUJhc2VMYXllclNldHRpbmdzLCBjb25maWcpIHtcclxuICAgIHZhciBiYXNlbGF5ZXJzID0gY29uZmlnLmJhc2VsYXllcnM7XHJcbiAgICB2YXIgYmFzZWxheWVyO1xyXG4gICAgdmFyIGk7XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IGJhc2VsYXllcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBiYXNlbGF5ZXIgPSBiYXNlbGF5ZXJzW2ldO1xyXG4gICAgICAgIGJhc2VsYXllci5hY3RpdmUgPSAoc2hhcmVCYXNlTGF5ZXJTZXR0aW5ncy5pbmRleE9mKGJhc2VsYXllci5pZCkgIT09IC0xKSA/IHRydWUgOiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9zaGFyZS5qcyIsImltcG9ydCB7R2V0TWFwfSBmcm9tIFwiLi9tYXBcIjtcclxuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSBcIi4vc2hhcmVcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBCQVNFX0xBWUVSX1RZUEUgPSBcImJhc2VsYXllclwiO1xyXG5cclxudmFyIF9iYXNlbGF5ZXJzO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIENyZWF0ZUJhc2VMYXllcnMgKG1hcCwgbGF5ZXJDb25maWcpIHtcclxuICAgIGxheWVyQ29uZmlnID0gbGF5ZXJDb25maWcgfHwgXHJcbiAgICAgICAgW3tcclxuICAgICAgICAgICAgXCJpZFwiIDogXCJjYXJ0by1saWdodC1kZWZhdWx0XCIsXHJcbiAgICAgICAgICAgIFwidXJsXCIgOiBcImh0dHA6Ly97c30uYmFzZW1hcHMuY2FydG9jZG4uY29tL2xpZ2h0X2FsbC97en0ve3h9L3t5fS5wbmdcIixcclxuICAgICAgICAgICAgXCJhdHRyaWJ1dGlvblwiIDogJyZjb3B5OyA8YSBocmVmPVwiaHR0cDovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsICZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly9jYXJ0by5jb20vYXR0cmlidXRpb25zXCI+Q0FSVE88L2E+J1xyXG4gICAgICAgIH1dO1xyXG5cclxuICAgIF9iYXNlbGF5ZXJzID0gbGF5ZXJDb25maWc7XHJcbiAgICB2YXIgaTtcclxuICAgIHZhciBiYXNlTGF5ZXI7XHJcbiAgICB2YXIgY29uZmlnO1xyXG5cclxuICAgIGZvciAoaSA9IDA7IGkgPCBsYXllckNvbmZpZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbmZpZyA9IGxheWVyQ29uZmlnW2ldO1xyXG5cclxuICAgICAgICBpZiAoIWNvbmZpZy5hY3RpdmUpIGNvbnRpbnVlO1xyXG4gICAgICAgIGJhc2VMYXllciA9IGNyZWF0ZUJhc2VMYXllcihjb25maWcpO1xyXG4gICAgICAgIGNvbmZpZy5sYXllciA9IGJhc2VMYXllcjtcclxuICAgICAgICBiYXNlTGF5ZXIuYWRkVG8obWFwKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVCYXNlTGF5ZXJVSShsYXllckNvbmZpZylcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQmFzZUxheWVyVUkgKGNvbmZpZykge1xyXG4gICAgdmFyIGJhc2VVSSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBiYXNlVUkuY2xhc3NOYW1lID0gXCJiYXNlbGF5ZXItdWlcIjtcclxuICAgIHZhciBiYXNlV3JhcHBlcjtcclxuICAgIHZhciBiYXNlSW1nO1xyXG4gICAgdmFyIGJhc2VMYWJlbDtcclxuXHJcbiAgICB2YXIgbGF5ZXI7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbmZpZy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBsYXllciA9IGNvbmZpZ1tpXTtcclxuICAgICAgICBpZiAoIWxheWVyLmhhc093blByb3BlcnR5KFwiaW1hZ2VcIikpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICBiYXNlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgYmFzZVdyYXBwZXIuc2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiLCBsYXllci5pZCk7XHJcbiAgICAgICAgYmFzZUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgYmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbGF5ZXIuaW1hZ2UpO1xyXG4gICAgICAgIGJhc2VJbWcuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGxheWVyLmxhYmVsKTtcclxuICAgICAgICBiYXNlSW1nLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIGxheWVyLmxhYmVsKTtcclxuICAgICAgICBiYXNlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGJhc2VMYWJlbC50ZXh0Q29udGVudCA9IGxheWVyLmxhYmVsO1xyXG4gICAgICAgIGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VJbWcpO1xyXG4gICAgICAgIGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VMYWJlbCk7XHJcbiAgICAgICAgYmFzZVdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUJhc2VDbGljaylcclxuXHJcbiAgICAgICAgZDMuc2VsZWN0KGJhc2VXcmFwcGVyKVxyXG4gICAgICAgICAgICAuY2xhc3NlZChcImJhc2Utc2VsZWN0b3JcIiwgdHJ1ZSlcclxuICAgICAgICAgICAgLmNsYXNzZWQoXCJhY3RpdmVcIiwgbGF5ZXIuYWN0aXZlKTtcclxuICAgICAgIFxyXG4gICAgICAgIGJhc2VVSS5hcHBlbmRDaGlsZChiYXNlV3JhcHBlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImxlYWZsZXQtYm90dG9tIGxlYWZsZXQtbGVmdFwiKVswXS5hcHBlbmRDaGlsZChiYXNlVUkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVCYXNlQ2xpY2sgKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB2YXIgbGF5ZXJpZCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiKTtcclxuICAgIHRvZ2dsZUFjdGl2ZUJhc2VVSSh0aGlzKTtcclxuICAgIHJlbW92ZUN1cnJlbnRCYXNlTGF5ZXIoKTtcclxuICAgIGFkZE5ld0Jhc2VMYXllclRvTWFwKGxheWVyaWQpO1xyXG4gICAgdXBkYXRlU2hhcmVVcmwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlQWN0aXZlQmFzZVVJIChiYXNlVUlFbGVtKSB7XHJcbiAgICBkMy5zZWxlY3QoXCIuYmFzZS1zZWxlY3Rvci5hY3RpdmVcIikuY2xhc3NlZChcImFjdGl2ZVwiLCBmYWxzZSk7XHJcbiAgICBkMy5zZWxlY3QoYmFzZVVJRWxlbSkuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlQ3VycmVudEJhc2VMYXllciAoKSB7XHJcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XHJcblxyXG4gICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcclxuICAgICAgICBpZiAobGF5ZXIub3B0aW9ucy50eXBlICE9PSBCQVNFX0xBWUVSX1RZUEUpIHJldHVybjtcclxuICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobGF5ZXIpO1xyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkTmV3QmFzZUxheWVyVG9NYXAgKGxheWVyaWQpIHtcclxuICAgIHZhciBtYXAgPSBHZXRNYXAoKTtcclxuXHJcbiAgICB2YXIgbGF5ZXI7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IF9iYXNlbGF5ZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGxheWVyID0gX2Jhc2VsYXllcnNbaV07XHJcbiAgICAgICAgaWYgKGxheWVyLmlkICE9PSBsYXllcmlkKSBjb250aW51ZTtcclxuICAgICAgICBpZiAoIWxheWVyLmxheWVyKSBsYXllci5sYXllciA9IGNyZWF0ZUJhc2VMYXllcihsYXllcik7XHJcbiAgICAgICAgbGF5ZXIubGF5ZXIuYWRkVG8obWFwKTtcclxuICAgICAgICBsYXllci5sYXllci5icmluZ1RvQmFjaygpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVCYXNlTGF5ZXIgKGxheWVyQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gTC50aWxlTGF5ZXIoXHJcbiAgICAgICAgbGF5ZXJDb25maWcudXJsLFxyXG4gICAgICAgIG1ha2VCYXNlTGF5ZXJPcHRpb25zKGxheWVyQ29uZmlnKVxyXG4gICAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUJhc2VMYXllck9wdGlvbnMgKGNvbmZpZykge1xyXG4gICAgdmFyIG9wdGlvbnMgPSB7fTtcclxuICAgIGlmIChjb25maWcuaWQpIG9wdGlvbnMuaWQgPSBjb25maWcuaWQ7XHJcbiAgICBpZiAoY29uZmlnLmF0dHJpYnV0aW9uKSBvcHRpb25zLmF0dHJpYnV0aW9uID0gY29uZmlnLmF0dHJpYnV0aW9uO1xyXG4gICAgaWYgKGNvbmZpZy5zdWJkb21haW5zKSBvcHRpb25zLnN1YmRvbWFpbnMgPSBjb25maWcuc3ViZG9tYWlucztcclxuICAgIG9wdGlvbnMudHlwZSA9IEJBU0VfTEFZRVJfVFlQRTtcclxuXHJcbiAgICByZXR1cm4gb3B0aW9ucztcclxufVxyXG5cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvYmFzZWxheWVyLmpzIiwiaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSAnLi9zaGFyZSdcclxuaW1wb3J0IHt1cGRhdGVMYXllck9wYWNpdHl9IGZyb20gXCIuL2xheWVyXCI7XHJcblxyXG4vLyBzZXQgaXQgbWFudWFsbHkgZm9yIG5vd1xyXG5jb25zdCBPUEFDSVRZX1JBTkdFX01BWCA9IDkwXHJcblxyXG52YXIgb3BhY2l0eVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgLmRvbWFpbihbMSwgMF0pXHJcbiAgICAucmFuZ2UoWzAsIE9QQUNJVFlfUkFOR0VfTUFYXSlcclxuICAgIC5jbGFtcCh0cnVlKVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldFNsaWRlckluaXRpYWxQb3MgKGxheWVyLCBsYXllclRvb2xzV3JhcHBlcikge1xyXG5cclxuICAgIHZhciBsYXllck9wYWNpdHkgPSBsYXllci5vcGFjaXR5IHx8IDFcclxuICAgIHZhciBoYW5kbGVPZmZzZXQgPSBvcGFjaXR5U2NhbGUobGF5ZXJPcGFjaXR5KVxyXG5cclxuICAgIGxheWVyVG9vbHNXcmFwcGVyLnNlbGVjdCgnLm9wYWNpdHktc2xpZGVyLWhhbmRsZScpLnN0eWxlKCd0b3AnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke2hhbmRsZU9mZnNldH1gKydweCdcclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlT3BhY2l0eVNsaWRlciAobGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyKSB7XHJcblxyXG4gICAgdmFyIGxheWVyT3BhY2l0eSA9IGxheWVyLm9wYWNpdHkgIT09IHVuZGVmaW5lZCA/IGxheWVyLm9wYWNpdHkgOiAxXHJcbiAgICBcclxuICAgIHZhciB3cmFwcGVyID0gbGF5ZXJUb29sc1dyYXBwZXIuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdvcGFjaXR5LXNsaWRlci13cmFwcGVyJylcclxuXHJcbiAgICB2YXIgb3BhY2l0eVBlcmNlbnRJbmRpY2F0b3IgPSB3cmFwcGVyLmFwcGVuZCgnZGl2JylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXItaW5kaWNhdG9yJylcclxuXHJcbiAgICBtYWtlU2xpZGVyVHJhY2sod3JhcHBlciwgbGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyLCBsYXllck9wYWNpdHkpXHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlU2xpZGVyVHJhY2sod3JhcHBlciwgbGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyLCBsYXllck9wYWNpdHkpIHtcclxuXHJcbiAgICB2YXIgb3ZlcmxheSA9IHdyYXBwZXIuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdvcGFjaXR5LXNsaWRlci10cmFjay1vdmVybGF5JylcclxuXHJcbiAgICB2YXIgdHJhY2sgPSBvdmVybGF5LmFwcGVuZCgnZGl2JylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXItdHJhY2snKVxyXG5cclxuICAgIG92ZXJsYXkuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdvcGFjaXR5LXNsaWRlci1oYW5kbGUnKVxyXG5cclxuICAgIGlmIChsYXllci5hY3RpdmUpIHNldFNsaWRlckluaXRpYWxQb3MobGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyKVxyXG4gICAgc2V0RHJhZ0V2ZW50TGlzdGVuZXIod3JhcHBlciwgbGF5ZXIsIGxheWVyT3BhY2l0eSlcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldERyYWdFdmVudExpc3RlbmVyKHdyYXBwZXIsIGxheWVyLCBsYXllck9wYWNpdHkpIHtcclxuICAgIHZhciBvdmVybGF5ID0gd3JhcHBlci5zZWxlY3QoJy5vcGFjaXR5LXNsaWRlci10cmFjay1vdmVybGF5JylcclxuICAgIG92ZXJsYXkuY2FsbChkMy5kcmFnKClcclxuICAgICAgICAub24oJ3N0YXJ0IGRyYWcnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdPcGFjaXR5ID0gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSlcclxuICAgICAgICAgICAgdXBkYXRlTGF5ZXJPcGFjaXR5KGxheWVyLCBuZXdPcGFjaXR5KVxyXG4gICAgICAgICAgICBhZGp1c3RTbGlkZXJIYW5kbGUob3ZlcmxheSwgbmV3T3BhY2l0eSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vbignZW5kJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB1cGRhdGVTaGFyZVVybCgpXHJcbiAgICAgICAgfSkpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkanVzdFNsaWRlckhhbmRsZShvdmVybGF5LCBuZXdPcGFjaXR5KSB7XHJcbiAgICB2YXIgaGFuZGxlID0gb3ZlcmxheS5zZWxlY3QoJy5vcGFjaXR5LXNsaWRlci1oYW5kbGUnKVxyXG4gICAgaGFuZGxlLnN0eWxlKCd0b3AnLCBgJHtvcGFjaXR5U2NhbGUobmV3T3BhY2l0eSl9YCsncHgnKVxyXG59XHJcblxyXG5mdW5jdGlvbiBjYWxjT3BhY2l0eUZyb21Nb3VzZVBvcyhvdmVybGF5KSB7XHJcbiAgICB2YXIgeVBvcyA9IGQzLm1vdXNlKG92ZXJsYXkubm9kZSgpKVsxXVxyXG4gICAgdmFyIG5ld09wYWNpdHkgPSBvcGFjaXR5U2NhbGUuaW52ZXJ0KHlQb3MpXHJcbiAgICByZXR1cm4gbmV3T3BhY2l0eVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL29wYWNpdHlTbGlkZXIuanMiLCJpbXBvcnQge3VwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHR9IGZyb20gJy4vcGFuZWwnXHJcblxyXG52YXIgdGlwO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFNldHVwR3JhcGhzICgpIHtcclxuICAgIGQzLnNlbGVjdEFsbChcIi5ncmFwaC10eXBlLWJ0blwiKS5vbihcImNsaWNrXCIsIGhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrKTtcclxuICAgIGV4dGVuZERhdGVNb2R1bGUoKTtcclxuICAgIHRpcCA9IGQzLnRpcCgpLmF0dHIoJ2NsYXNzJywgJ2QzLXRpcCcpLmh0bWwoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQ7IH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBleHRlbmREYXRlTW9kdWxlICgpIHtcclxuICAgIERhdGUucHJvdG90eXBlLmlzTGVhcFllYXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgeWVhciA9IHRoaXMuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICBpZigoeWVhciAmIDMpICE9IDApIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gKCh5ZWFyICUgMTAwKSAhPSAwIHx8ICh5ZWFyICUgNDAwKSA9PSAwKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gR2V0IERheSBvZiBZZWFyXHJcbiAgICBEYXRlLnByb3RvdHlwZS5nZXRET1kgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZGF5Q291bnQgPSBbMCwgMzEsIDU5LCA5MCwgMTIwLCAxNTEsIDE4MSwgMjEyLCAyNDMsIDI3MywgMzA0LCAzMzRdO1xyXG4gICAgICAgIHZhciBtbiA9IHRoaXMuZ2V0TW9udGgoKTtcclxuICAgICAgICB2YXIgZG4gPSB0aGlzLmdldERhdGUoKTtcclxuICAgICAgICB2YXIgZGF5T2ZZZWFyID0gZGF5Q291bnRbbW5dICsgZG47XHJcbiAgICAgICAgaWYobW4gPiAxICYmIHRoaXMuaXNMZWFwWWVhcigpKSBkYXlPZlllYXIrKztcclxuICAgICAgICByZXR1cm4gZGF5T2ZZZWFyO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEJpbmRHcmFwaEV2ZW50cyAobWFwKSB7XHJcbiAgICBtYXAub24oXCJjbGlja1wiLCBoYW5kbGVNYXBDbGljayk7XHJcbn1cclxuXHJcbnZhciBiYXNlSWNvbiA9IEwuSWNvbi5leHRlbmQoe30pO1xyXG5cclxudmFyIGdyYXBoSWNvbiA9IG5ldyBiYXNlSWNvbih7XHJcbiAgICBpY29uVXJsOiAnaW1ncy9ibHVlX2ljb24ucG5nJyxcclxuICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxyXG4gICAgaWNvblNpemU6IFsyNSwgNDFdLFxyXG4gICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sXHJcbiAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXHJcbiAgICBzaGFkb3dTaXplOiBbNDEsIDQxXVxyXG59KTtcclxuXHJcbnZhciBob3Zlckljb24gPSBuZXcgYmFzZUljb24oe1xyXG4gICAgaWNvblVybDogJ2ltZ3Mvb3JhbmdlX2ljb24ucG5nJyxcclxuICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxyXG4gICAgaWNvblNpemU6IFsyNSwgNDFdLFxyXG4gICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sXHJcbiAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXHJcbiAgICBzaGFkb3dTaXplOiBbNDEsIDQxXVxyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU1hcENsaWNrIChlKSB7XHJcbiAgICB2YXIgbWFwID0gdGhpcztcclxuICAgIHZhciBsYXQgPSBlLmxhdGxuZy5sYXQ7XHJcbiAgICB2YXIgbG5nID0gZS5sYXRsbmcubG5nO1xyXG5cclxuICAgIHZhciBkaXYgPSBjcmVhdGVHcmFwaERpdihsYXQsIGxuZyk7XHJcbiAgICB2YXIgbWFya2VyID0gY3JlYXRlTWFya2VyKG1hcCwgbGF0LCBsbmcpO1xyXG4gICAgZDMuc2VsZWN0KGRpdikub24oXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBtYXJrZXIuc2V0SWNvbihob3Zlckljb24pO1xyXG4gICAgfSlcclxuICAgIGQzLnNlbGVjdChkaXYpLm9uKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbWFya2VyLnNldEljb24oZ3JhcGhJY29uKTtcclxuICAgIH0pXHJcbiAgICBjcmVhdGVHcmFwaFJlbW92ZXIobWFwLCBkaXYsIG1hcmtlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZU1hcmtlciAobWFwLCBsYXQsIGxuZykge1xyXG4gICAgcmV0dXJuIEwubWFya2VyKFtsYXQsIGxuZ10sIHtpY29uOiBncmFwaEljb259KS5hZGRUbyhtYXApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVHcmFwaFJlbW92ZXIgKG1hcCwgZGl2LCBtYXJrZXIpIHtcclxuICAgIHZhciBlbGVtID0gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSgpO1xyXG4gICAgZGl2LmFwcGVuZENoaWxkKGVsZW0pO1xyXG4gICAgZDMuc2VsZWN0KGVsZW0pLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpO1xyXG4gICAgICAgIGxpc3QucmVtb3ZlQ2hpbGQoZGl2KTtcclxuICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobWFya2VyKTtcclxuICAgICAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KClcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVHcmFwaFJlbW92ZXJFbGVtICgpIHtcclxuICAgIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgIGVsZW0uY2xhc3NOYW1lID0gXCJyZW1vdmUtZ3JhcGhcIjtcclxuICAgIGVsZW0uaW5uZXJUZXh0ID0gU3RyaW5nLmZyb21DaGFyQ29kZShcIjEwMDA1XCIpO1xyXG4gICAgZWxlbS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBcIlJlbW92ZSBncmFwaFwiKTtcclxuICAgIHJldHVybiBlbGVtO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIERBVEEgUFJPQ0VTU0lORyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5mdW5jdGlvbiBnZXREYXRhKGxhdCwgbG5nLCBkaXYpIHtcclxuICAgIHZhciB1cmwgPSBcImh0dHBzOi8vZmNhdi1uZHZpLm5lbWFjLm9yZy9sYW5kZGF0X3Byb2R1Y3QuY2dpP2FyZ3M9XCIgKyBsbmcgKyBcIixcIiArIGxhdDtcclxuICAgIHZhciBvUmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICBvUmVxLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlVGV4dDtcclxuICAgICAgICByZXNwb25zZSA9IHJlc3BvbnNlLnJlcGxhY2UoL1xcW3xcXF18XFwnL2csIFwiXCIpLnNwbGl0KFwiLCBcIik7XHJcbiAgICAgICAgZHJhd0dyYXBoKHJlc3BvbnNlLCBkaXYsIGxhdCwgbG5nKTtcclxuICAgICAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KClcclxuICAgIH0pO1xyXG4gICAgb1JlcS5vcGVuKFwiR0VUXCIsIHVybCk7XHJcbiAgICBvUmVxLnNlbmQoKVxyXG59XHJcblxyXG5mdW5jdGlvbiBzcGxpdERhdGEoZGF0YSkge1xyXG4gICAgdmFyIGk7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGRhdGFbaV0gPSBkYXRhW2ldLnNwbGl0KFwiLFwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXByb2Nlc3NEYXRhIChvcmlnZGF0YSkge1xyXG4gICAgdmFyIGRhdGEgPSB7fTtcclxuICAgIHZhciBwb2ludDtcclxuICAgIHZhciBrZXk7XHJcbiAgICB2YXIgaSwgajtcclxuXHJcbiAgICBkYXRhW1wia2V5c1wiXSA9IFtdO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IG9yaWdkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgcG9pbnQgPSBvcmlnZGF0YVtpXTtcclxuICAgICAgICBrZXkgPSBwb2ludFswXS5zdWJzdHJpbmcoMCw0KTtcclxuICAgICAgICBpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICBkYXRhW2tleV0gPSBbXTtcclxuICAgICAgICAgICAgZGF0YVtcImtleXNcIl0ucHVzaChrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhW2tleV0ucHVzaChwb2ludCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGRhdGFGb3JNZWRpYW5zO1xyXG4gICAgdmFyIG1lZGlhbjtcclxuICAgIGRhdGFbXCJtZWRpYW5zXCJdID0gW107XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgNDY7IGkrKykge1xyXG4gICAgICAgIGRhdGFGb3JNZWRpYW5zID0gW107XHJcbiAgICAgICAgZm9yIChqID0gaTsgaiA8IG9yaWdkYXRhLmxlbmd0aDsgaiArPSA0Nikge1xyXG4gICAgICAgICAgICBkYXRhRm9yTWVkaWFucy5wdXNoKG9yaWdkYXRhW2pdWzFdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1lZGlhbiA9IGRhdGFGb3JNZWRpYW5zLnNvcnQoKVtNYXRoLmZsb29yKGRhdGFGb3JNZWRpYW5zLmxlbmd0aC8yKV07XHJcbiAgICAgICAgZGF0YVtcIm1lZGlhbnNcIl0ucHVzaChtZWRpYW4pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIElOVEVSRkFDRSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrICgpIHtcclxuICAgIHZhciB0eXBlID0gdGhpcy5kYXRhc2V0LnR5cGU7XHJcbiAgICB2YXIgYWN0aXZlRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF07XHJcbiAgICB2YXIgYWN0aXZlVHlwZSA9IGFjdGl2ZUVsZW0uZGF0YXNldC50eXBlO1xyXG5cclxuICAgIGlmICh0eXBlID09PSBhY3RpdmVUeXBlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGQzLnNlbGVjdChcIiNncmFwaC1saXN0XCIpXHJcbiAgICAgICAgLmNsYXNzZWQoXCJncmFwaC1cIiArIGFjdGl2ZVR5cGUsIGZhbHNlKVxyXG4gICAgICAgIC5jbGFzc2VkKFwiZ3JhcGgtXCIgKyB0eXBlLCB0cnVlKTtcclxuXHJcbiAgICBkMy5zZWxlY3QoYWN0aXZlRWxlbSkuY2xhc3NlZChcImFjdGl2ZVwiLCBmYWxzZSk7XHJcbiAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlR3JhcGhEaXYgKGxhdCwgbG5nKSB7XHJcbiAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJMYXQ6IFwiICsgbGF0ICsgXCIsIExvbjogXCIgKyBsbmcpO1xyXG4gICAgZGl2LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xyXG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoXCJncmFwaC1lbGVtXCIpXHJcbiAgICBnZXREYXRhKGxhdCwgbG5nLCBkaXYpO1xyXG4gICAgcmV0dXJuIGRpdjtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd0dyYXBoKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcclxuICAgIGRhdGEgPSBzcGxpdERhdGEoZGF0YSk7XHJcbiAgICB2YXIgcmVwcm9jZXNzZWREYXRhID0gcmVwcm9jZXNzRGF0YShkYXRhKTtcclxuICAgIG1ha2VVcERvd25MaW5lR3JhcGgoZGF0YSwgZGl2LCByZXByb2Nlc3NlZERhdGFbXCJtZWRpYW5zXCJdKTtcclxuICAgIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMocmVwcm9jZXNzZWREYXRhLCBkaXYsIGxhdCwgbG5nKTtcclxuICAgIGRyYXdVcERvd25Qb2xhcldpdGhDaGVja2JveGVzQW5kVGhyZXNob2xkcyhyZXByb2Nlc3NlZERhdGEsIGRpdiwgbGF0LCBsbmcpO1xyXG4gICAgdmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXBoLWxpc3RcIik7XHJcbiAgICBsaXN0LmFwcGVuZENoaWxkKGRpdik7XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLyBUSU1FU0VSSUVTIExJTkUgR1JBUEggLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmZ1bmN0aW9uIG1ha2VVcERvd25MaW5lR3JhcGggKGRhdGEsIGRpdiwgYXZlcmFnZXMpIHtcclxuICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcclxuICAgIHZhciBtYXJnaW4gPSB7dG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyNX0sXHJcbiAgICB3aWR0aCA9IDU4MCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxyXG4gICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XHJcblxyXG4gICAgLy8gU2V0IHRoZSByYW5nZXNcclxuICAgIHZhciB4ID0gZDMuc2NhbGVUaW1lKCkucmFuZ2UoWzAsIHdpZHRoXSlcclxuICAgICAgICAuZG9tYWluKFtcclxuICAgICAgICAgICAgcGFyc2VEYXRlKGRhdGFbMF1bMF0pLFxyXG4gICAgICAgICAgICBwYXJzZURhdGUoZGF0YVtkYXRhLmxlbmd0aC0xXVswXSlcclxuICAgICAgICBdKTtcclxuICAgIHZhciB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSlcclxuICAgICAgICAuZG9tYWluKFswLCAxMDBdKTtcclxuXHJcbiAgICAvLyBEZWZpbmUgdGhlIGF4ZXNcclxuICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcclxuICAgICAgICAudGlja3MoMTYpXHJcbiAgICAgICAgLnRpY2tGb3JtYXQoZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KVxyXG4gICAgICAgIC50aWNrcyg2KTtcclxuXHJcbiAgICAvLyBEZWZpbmUgdGhlIGxpbmVcclxuICAgIHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKClcclxuICAgICAgICAueChmdW5jdGlvbihkKSB7IHJldHVybiB4KHBhcnNlRGF0ZShkWzBdKSk7IH0pXHJcbiAgICAgICAgLnkoZnVuY3Rpb24oZCkgeyByZXR1cm4geShkWzFdKTsgfSk7XHJcblxyXG4gICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KVxyXG4gICAgICAgIC5hcHBlbmQoXCJkaXZcIilcclxuICAgICAgICAuY2xhc3NlZChcInRpbWVzZXJpZXMtZ3JhcGhcIiwgdHJ1ZSk7XHJcblxyXG4gICAgLy8gQWRkcyB0aGUgc3ZnIGNhbnZhc1xyXG4gICAgdmFyIHN2ZyA9IHdyYXBwZXJcclxuICAgICAgICAuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgICAgLy8uYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXHJcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXHJcbiAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB3ID0gd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodFxyXG4gICAgICAgICAgICB2YXIgaCA9IGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tXHJcbiAgICAgICAgICAgIHJldHVybiAnMCAwICcgKyB3ICsgJyAnICsgaFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKVxyXG4gICAgICAgIC5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XHJcblxyXG4gICAgc3ZnLmNhbGwodGlwKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIHZhbHVlbGluZSBwYXRoLlxyXG4gICAgZHJhd0xpbmVhclBhdGgoZGF0YSwgdmFsdWVsaW5lLCBzdmcpO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgWCBBeGlzXHJcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ4IGF4aXNcIilcclxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpXHJcbiAgICAgICAgLmNhbGwoeEF4aXMpO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgWSBBeGlzXHJcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ5IGF4aXNcIilcclxuICAgICAgICAuY2FsbCh5QXhpcyk7XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XHJcbiAgICAgKi9cclxuICAgIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8gT1ZFUkxBUFBJTkcgVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmZ1bmN0aW9uIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMgKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcclxuICAgIHZhciB5ZWFyID0gXCIyMDE1XCI7XHJcblxyXG4gICAgdmFyIGNoYXJ0cyA9IHt9O1xyXG5cclxuICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcclxuICAgIHZhciBtYXJnaW4gPSB7dG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyNX0sXHJcbiAgICAgICAgd2lkdGggPSA1MDAgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCxcclxuICAgICAgICBoZWlnaHQgPSAyNzAgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcclxuXHJcbiAgICB2YXIgYXZlcmFnZXMgPSBkYXRhLm1lZGlhbnM7XHJcblxyXG4gICAgdmFyIHggPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFswLCB3aWR0aF0pXHJcbiAgICAgICAgLmRvbWFpbihbMCwgMzY1XSk7XHJcbiAgICB2YXIgeSA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodCwgMF0pXHJcbiAgICAgICAgLmRvbWFpbihbMCwgMTAwXSk7XHJcblxyXG4gICAgLy8gRGVmaW5lIHRoZSBheGVzXHJcbiAgICBmdW5jdGlvbiBmb3JtYXRNb250aFRpY2sgKGQpIHtcclxuICAgICAgICByZXR1cm4gKE1PTlRIX0xBQkVMU1soZC0xNSkvMzBdKTtcclxuICAgIH1cclxuICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcclxuICAgICAgICAudGlja3MoMTEpXHJcbiAgICAgICAgLnRpY2tWYWx1ZXMoWzE1LCA0NSwgNzUsIDEwNSwgMTM1LCAxNjUsIDE5NSwgMjI1LCAyNTUsIDI4NSwgMzE1LCAzNDVdKVxyXG4gICAgICAgIC50aWNrRm9ybWF0KGZvcm1hdE1vbnRoVGljayk7XHJcbiAgXHJcbiAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KVxyXG4gICAgICAgIC50aWNrcyg2KTtcclxuXHJcbiAgICAvLyBEZWZpbmUgdGhlIGxpbmVcclxuICAgIHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKClcclxuICAgICAgICAueChmdW5jdGlvbihkLCBpKSB7IHJldHVybiAoQXJyYXkuaXNBcnJheShkKSA/IHgocGFyc2VKdWxpYW5EYXkoZFswXSkpIDogeCgoaSAqIDgpICsgMyApKTsgfSlcclxuICAgICAgICAueShmdW5jdGlvbihkKSB7IHJldHVybiAoQXJyYXkuaXNBcnJheShkKSA/IHkoZFsxXSkgOiB5KGQpKTsgfSk7XHJcblxyXG4gICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcIm92ZXJsYXBwaW5nLWdyYXBoXCIsIHRydWUpO1xyXG5cclxuICAgIC8vIEFkZHMgdGhlIHN2ZyBjYW52YXNcclxuICAgIHZhciBzdmcgPSB3cmFwcGVyXHJcbiAgICAgICAgLmFwcGVuZChcInN2Z1wiKVxyXG4gICAgICAgICAgICAuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB3ID0gd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodFxyXG4gICAgICAgICAgICAgICAgdmFyIGggPSBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcwIDAgJyArIHcgKyAnICcgKyBoXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJylcclxuICAgICAgICAgICAgLy8uYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXHJcbiAgICAgICAgICAgIC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXHJcbiAgICAgICAgLmFwcGVuZChcImdcIilcclxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXHJcbiAgICAgICAgICAgICAgICAgIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XHJcblxyXG4gICAgc3ZnLmNhbGwodGlwKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIFggQXhpc1xyXG4gICAgc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieCBheGlzXCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGhlaWdodCArIFwiKVwiKVxyXG4gICAgICAgIC5jYWxsKHhBeGlzKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIFkgQXhpc1xyXG4gICAgc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpXHJcbiAgICAgICAgLmNhbGwoeUF4aXMpO1xyXG5cclxuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl0gPSB7XHJcbiAgICAgICAgXCJwYXRoXCIgOiBkcmF3TGluZWFyUGF0aChkYXRhW1wibWVkaWFuc1wiXSwgdmFsdWVsaW5lLCBzdmcpXHJcbiAgICB9O1xyXG5cclxuICAgIGNoYXJ0c1t5ZWFyXSA9IHtcclxuICAgICAgICBcInBhdGhcIiA6IGRyYXdMaW5lYXJQYXRoKGRhdGFbeWVhcl0sIHZhbHVlbGluZSwgc3ZnKVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XHJcbiAgICAgKi9cclxuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl1bXCJwb2ludHNcIl0gPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbXCJtZWRpYW5zXCJdLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG4gICAgY2hhcnRzW3llYXJdW1wicG9pbnRzXCJdID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW3llYXJdLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG5cclxuICAgIHZhciBpbnB1dHdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwiaW5wdXQtd3JhcHBlclwiLCB0cnVlKTtcclxuXHJcbiAgICBkYXRhLmtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgY3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBrZXksIFwidGltZXNlcmllc1wiLCB5ZWFyLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBcIm1lZGlhbnNcIiwgXCJ0aW1lc2VyaWVzXCIsIFwibWVkaWFuc1wiLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFBPTEFSIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5mdW5jdGlvbiBkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMgKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcclxuICAgIHZhciB5ZWFyID0gXCIyMDE1XCI7XHJcbiAgICB2YXIgd2lkdGggPSA0OTAsXHJcbiAgICAgICAgaGVpZ2h0ID0gNDkwLFxyXG4gICAgICAgIHJhZGl1cyA9IE1hdGgubWluKHdpZHRoLCBoZWlnaHQpIC8gMiAtIDMwO1xyXG5cclxuICAgIHZhciBhdmVyYWdlcyA9IGRhdGFbXCJtZWRpYW5zXCJdO1xyXG4gICAgdmFyIGNlbnRlciA9IGZpbmRQb2xhckNlbnRlcihkYXRhKTtcclxuICAgIHZhciB0aHJlc2hvbGRzID0gZmluZFBvbGFyVGhyZXNob2xkcyhhdmVyYWdlcywgY2VudGVyWzFdWzBdKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdXAgc2NhbGluZyBvZiBkYXRhLiBXZSBrbm93IHRoYXQgdGhlIG5kdmkgdmFsdWVzIGZhbGwgYmV0d2VlblxyXG4gICAgICogMCAmIDEwMCBzbyB3ZSBzZXQgb3VyIGRvbWFpbiB0byB0aGF0LiBUaGUgcmFuZ2UgY29udHJvbHMgd2hlcmUgdGhlXHJcbiAgICAgKiBwb2ludHMgd2lsbCBsaWUgaW4gb3VyIGdyYXBoLCBzbyB3ZSBzZXQgdGhlbSB0byBiZSBiZXR3ZWVuIDAgYW5kIHRoZVxyXG4gICAgICogcmFkaXVzLlxyXG4gICAgICovXHJcbiAgICB2YXIgciA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAuZG9tYWluKFswLCAxMDBdKVxyXG4gICAgICAgIC5yYW5nZShbMCwgcmFkaXVzXSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB3aGljaCB3aWxsIGRyYXcgZWFjaCBwb2ludC4gVG8gY29tcHV0ZSB0aGUgZGlzdGFuY2UgZnJvbSB0aGVcclxuICAgICAqIGNlbnRlciBlYWNoIHBvaW50IGlzIHdlIHBhc3MgdGhlIGRhdGFwb2ludCB0byB0aGUgZnVuY3Rpb24gZGVmaW5lZCBhYm92ZS5cclxuICAgICAqIFRvIGRldGVybWluZSB0aGUgYW5nbGUgZnJvbSB0aGUgb3JpZ2luIHdlIG5lZWQgdG8gY29udmVydCB0aGUgZGF5IHRvXHJcbiAgICAgKiByYWRpYW5zLCBzbyB3ZSBjb252ZXJ0IHRoZSBkYXkgdG8gYSBudW1iZXIgYmV0d2VlbiAwICYgMSBhbmQgdGhlbiBtdWx0aXBseVxyXG4gICAgICogaXQgYnkgMiBwaS5cclxuICAgICAqL1xyXG4gICAgdmFyIGxpbmUgPSBkMy5yYWRpYWxMaW5lKClcclxuICAgICAgICAucmFkaXVzKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyByKGRbMV0pIDogcihkKTsgfSlcclxuICAgICAgICAuYW5nbGUoZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICB2YXIgZGF5ID0gQXJyYXkuaXNBcnJheShkKSA/IHBhcnNlSnVsaWFuRGF5KGRbMF0pIDogKGkgKiA4KSArIDM7XHJcbiAgICAgICAgICAgIHJldHVybiAoKCgoZGF5IC0gMSklMzY1KS8zNjUpICogKDIqTWF0aC5QSSkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB1cCB0aGUgY2FudmFzIHdoZXJlIHRoZSBjaXJjbGUgd2lsbCBiZSBkcmF3bi5cclxuICAgICAqL1xyXG4gICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcInBvbGFyLWdyYXBoXCIsIHRydWUpO1xyXG4gICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgICAgLy8uYXR0cihcIndpZHRoXCIsIHdpZHRoKVxyXG4gICAgICAgIC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxyXG4gICAgICAgIC5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJzAgMCAnKyB3aWR0aCArICcgJyArIGhlaWdodFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKVxyXG4gICAgICAgIC5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB3aWR0aCAvIDIgKyBcIixcIiArIGhlaWdodCAvIDIgKyBcIilcIik7XHJcblxyXG4gICAgc3ZnLmNhbGwodGlwKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgYmlnIGNpcmNsZXMgb2YgdGhlIGdyYXBoICYgdGhlaXIgbGFiZWxzXHJcbiAgICAgKi9cclxuICAgIHZhciBnciA9IHN2Zy5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInIgYXhpc1wiKVxyXG4gICAgICAgIC5zZWxlY3RBbGwoXCJnXCIpXHJcbiAgICAgICAgLmRhdGEoci50aWNrcyg1KS5zbGljZSgxKSlcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpO1xyXG5cclxuICAgIGdyLmFwcGVuZChcImNpcmNsZVwiKVxyXG4gICAgICAgIC5hdHRyKFwiclwiLCByKTtcclxuXHJcbiAgICBnci5hcHBlbmQoXCJ0ZXh0XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIC1yKGQpIC0gNDsgfSlcclxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInJvdGF0ZSgxNSlcIilcclxuICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxyXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQ7IH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBsYWJlbHMgZm9yIGVhY2ggbW9udGggYW5kIHRoZSBsaW5lc1xyXG4gICAgICogdGhhdCBnbyBvdXQgdG8gdGhlbS5cclxuICAgICAqL1xyXG4gICAgdmFyIGdhID0gc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYSBheGlzXCIpXHJcbiAgICAgICAgLnNlbGVjdEFsbChcImdcIilcclxuICAgICAgICAuZGF0YShkMy5yYW5nZSgwLCAzNjAsIDMwKSlcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwicm90YXRlKFwiICsgKGQgLSA5MCkgKyBcIilcIjsgfSk7XHJcblxyXG4gICAgZ2EuYXBwZW5kKFwibGluZVwiKVxyXG4gICAgICAgIC5hdHRyKFwieDJcIiwgcmFkaXVzKTtcclxuXHJcbiAgICBnYS5hcHBlbmQoXCJ0ZXh0XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ4XCIsIHJhZGl1cyArIDYpXHJcbiAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpXHJcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJlbmRcIiA6IG51bGw7IH0pXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7IH0pXHJcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gTU9OVEhfTEFCRUxTW2QvMzBdOyB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIHRoZSB0aHJlc2hvbGQgbGluZXNcclxuICAgICAqL1xyXG4gICAgdmFyIHRocmVzaG9sZEVsZW0gPSBzdmcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5zZWxlY3RBbGwoXCJnXCIpXHJcbiAgICAgICAgLmRhdGEodGhyZXNob2xkcylcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwicm90YXRlKFwiICsgKGQuZGF0YVsxXVswXSAtIDkwKSArIFwiKVwiOyB9KTtcclxuXHJcbiAgICB0aHJlc2hvbGRFbGVtLmFwcGVuZChcImxpbmVcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibGluZVwiKVxyXG4gICAgICAgIC5hdHRyKFwieDJcIiwgcmFkaXVzKTtcclxuXHJcbiAgICB0aHJlc2hvbGRFbGVtLmFwcGVuZChcInRleHRcIilcclxuICAgICAgICAuYXR0cihcInhcIiwgcmFkaXVzICsgNilcclxuICAgICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuICgoKChkLmRhdGFbMV1bMF0gLSAxKSUzNjUpLzM2NSkgKiAoMipNYXRoLlBJKSk7IH0pXHJcbiAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpXHJcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdOyByZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IFwiZW5kXCIgOiBudWxsOyB9KVxyXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgdmFyIGRheSA9IGQuZGF0YVsxXVswXTsgcmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyBcInJvdGF0ZSgxODAgXCIgKyAocmFkaXVzICsgNikgKyBcIiwwKVwiIDogbnVsbDsgfSlcclxuICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBkLmxhYmVsOyB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIHRoZSBsaW5lIHRvIHRoZSBjZW50ZXIgb2YgdGhlIGRhdGFcclxuICAgICAqL1xyXG4gICAgdmFyIGNlbnRlckRheSA9IGNlbnRlclsxXVswXTtcclxuICAgIHZhciBjZW50ZXJEYXlPcHBvc2l0ZSA9IChjZW50ZXJEYXkgKyAoMzY1LzIpKSAlIDM2NTtcclxuICAgIHZhciBjZW50ZXJEYXlEYXRhID0gW2NlbnRlckRheSwgMTAwXTtcclxuICAgIHZhciBjZW50ZXJEYXlPcHBvc2l0ZURhdGEgPSBbY2VudGVyRGF5T3Bwb3NpdGUsIDEwMF07XHJcbiAgICB2YXIgZ3Jvd2luZ1NlYXNvbkRhdGEgPSBbY2VudGVyRGF5RGF0YSwgY2VudGVyRGF5T3Bwb3NpdGVEYXRhXVxyXG5cclxuICAgIGRyYXdQb2xhclBhdGgoZ3Jvd2luZ1NlYXNvbkRhdGEsIGxpbmUsIHN2ZylcclxuICAgICAgICAuY2xhc3NlZChcImdyb3dpbmctc2Vhc29uLWxpbmVcIiwgXCJ0cnVlXCIpO1xyXG5cclxuICAgIGRyYXdQb2xhclBhdGgoY2VudGVyLCBsaW5lLCBzdmcpXHJcbiAgICAgICAgLmNsYXNzZWQoXCJjZW50ZXItbGluZVwiLCBcInRydWVcIik7XHJcblxyXG4gICAgc3ZnLnNlbGVjdEFsbChcInBvaW50XCIpXHJcbiAgICAgICAgLmRhdGEoW2NlbnRlclsxXV0pXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKFwiY2lyY2xlXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInBvaW50XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtkXSkuc2xpY2UoMSkuc2xpY2UoMCwgLTEpO1xyXG4gICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBjb29ycyArIFwiKVwiXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuYXR0cihcInJcIiwgMi41KVxyXG4gICAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwiIzAwMFwiKVxyXG4gICAgICAgIC5hdHRyKFwiZmlsbFwiLCBcIiNkZDgyZDJcIilcclxuICAgICAgICAub24oXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICB0aXAuc2hvdyhcIkNlbnRlcjogXCIgICsgU3RyaW5nKGRbMV0pLnN1YnN0cmluZygwLCA3KSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCA1KTtcclxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIycHhcIik7XHJcbiAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgdGlwLmhpZGUoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDIuNSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMXB4XCIpO1xyXG4gICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB2YXIgY2hhcnRzID0ge307XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGxpbmUgdGhhdCB0aGUgZGF0YSBmb2xsb3dzXHJcbiAgICAgKi9cclxuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl0gPSB7XHJcbiAgICAgICAgXCJwYXRoXCIgOiBkcmF3UG9sYXJQYXRoKGF2ZXJhZ2VzLCBsaW5lLCBzdmcpXHJcbiAgICB9O1xyXG5cclxuICAgIGNoYXJ0c1t5ZWFyXSA9IHtcclxuICAgICAgICBcInBhdGhcIiA6IGRyYXdQb2xhclBhdGgoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnKVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XHJcbiAgICAgKi9cclxuICAgIGNoYXJ0cy5tZWRpYW5zLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoYXZlcmFnZXMsIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG4gICAgY2hhcnRzW3llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XHJcblxyXG4gICAgdmFyIGlucHV0d3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJpbnB1dC13cmFwcGVyXCIsIHRydWUpO1xyXG5cclxuICAgIGRhdGEua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImlucHV0XCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiaWRcIiwgXCJwb2xhci1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcclxuICAgICAgICAgICAgLmF0dHIoXCJ2YWx1ZVwiLCBrZXkpXHJcbiAgICAgICAgICAgIC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgKGtleSA9PT0geWVhcikgPyB0cnVlIDogZmFsc2UpXHJcbiAgICAgICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd1BvbGFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImxhYmVsXCIpXHJcbiAgICAgICAgICAgIC50ZXh0KGtleSlcclxuICAgICAgICAgICAgLmF0dHIoXCJmb3JcIiwgXCJwb2xhci1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcclxuXHJcbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIilcclxuICAgICAgICAuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKVxyXG4gICAgICAgIC5hdHRyKFwiaWRcIiwgXCJwb2xhci1hdmVyYWdlLVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKVxyXG4gICAgICAgIC5hdHRyKFwidmFsdWVcIiwgXCJtZWRpYW5zXCIpXHJcbiAgICAgICAgLnByb3BlcnR5KFwiY2hlY2tlZFwiLCB0cnVlKVxyXG4gICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgbmV3WWVhciA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd1BvbGFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpXHJcblxyXG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwibGFiZWxcIilcclxuICAgICAgICAudGV4dChcIkJhc2VsaW5lXCIpXHJcbiAgICAgICAgLmF0dHIoXCJmb3JcIiwgXCJwb2xhci1hdmVyYWdlLVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcclxuXHJcbiAgICB2YXIgdGhyZXNob2xkQ2hlY2tib3g9IGlucHV0d3JhcHBlci5hcHBlbmQoXCJkaXZcIilcclxuICAgICAgICAuY2xhc3NlZChcInRocmVzaG9sZC1jaGVja2JveFwiLCB0cnVlKTtcclxuXHJcbiAgICB0aHJlc2hvbGRDaGVja2JveC5hcHBlbmQoXCJpbnB1dFwiKVxyXG4gICAgICAgIC5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpXHJcbiAgICAgICAgLmF0dHIoXCJpZFwiLCBcInRocmVzaG9sZC1jaGVja2JveC1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcclxuICAgICAgICAucHJvcGVydHkoXCJjaGVja2VkXCIsIHRydWUpXHJcbiAgICAgICAgLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHRocmVzaG9sZEVsZW0uc3R5bGUoXCJvcGFjaXR5XCIsICh0aGlzLmNoZWNrZWQpID8gMSA6IDApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIHRocmVzaG9sZENoZWNrYm94LmFwcGVuZChcImxhYmVsXCIpXHJcbiAgICAgICAgLnRleHQoXCJUaHJlc2hvbGRzXCIpXHJcbiAgICAgICAgLmF0dHIoXCJmb3JcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xyXG59XHJcblxyXG4vKiBQT0xBUiBHUkFQSCBIRUxQRVJTICovXHJcblxyXG5mdW5jdGlvbiBmaW5kUG9sYXJDZW50ZXIgKGRhdGEpIHtcclxuICAgIHZhciBpLCBqLCBsZW5ndGgsIGFycjtcclxuICAgIHZhciB0b3RhbFN1bSA9IDA7XHJcbiAgICB2YXIgaW5jb21wbGV0ZVllYXJzID0gMDtcclxuICAgIHZhciBzdW07XHJcbiAgICBsZW5ndGggPSA0NjtcclxuXHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5rZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgYXJyID0gZGF0YVtkYXRhLmtleXNbaV1dO1xyXG4gICAgICAgIGlmIChhcnIubGVuZ3RoICE9PSBsZW5ndGgpIHtcclxuICAgICAgICAgICAgaW5jb21wbGV0ZVllYXJzKys7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdW0gPSAwO1xyXG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBsZW5ndGgvMjsgaisrKSB7XHJcbiAgICAgICAgICAgIHN1bSArPSAoYXJyW2pdWzFdIC0gYXJyW2orMjNdWzFdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3VtID0gc3VtIC8gMjM7XHJcbiAgICAgICAgdG90YWxTdW0gKz0gc3VtO1xyXG4gICAgfVxyXG4gICAgdG90YWxTdW0gPSBNYXRoLmFicyh0b3RhbFN1bSkgLyAoZGF0YS5rZXlzLmxlbmd0aCAtIGluY29tcGxldGVZZWFycyk7XHJcblxyXG4gICAgdmFyIGFyZWFEaWZmID0gMTAwMDAwMDtcclxuICAgIHZhciBjaGVja0RpZmY7XHJcbiAgICB2YXIgYXJlYUluZGV4ID0gMDtcclxuICAgIHZhciBsZWZ0QXJlYSwgcmlnaHRBcmVhO1xyXG4gICAgdmFyIGF2Z3MgPSBkYXRhLm1lZGlhbnM7XHJcbiAgICB2YXIgaywgY291bnRlcjtcclxuXHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoLzI7IGkrKykge1xyXG4gICAgICAgIGxlZnRBcmVhID0gMDtcclxuICAgICAgICByaWdodEFyZWEgPSAwO1xyXG4gICAgICAgIGZvciAoY291bnRlciA9IDA7IGNvdW50ZXIgPCBsZW5ndGgvMjsgY291bnRlcisrKSB7XHJcbiAgICAgICAgICAgIGogPSAoaSArIGNvdW50ZXIpICUgNDY7XHJcbiAgICAgICAgICAgIGsgPSAoaiArIDIzKSAlIDQ2O1xyXG5cclxuICAgICAgICAgICAgbGVmdEFyZWEgKz0gcGFyc2VJbnQoYXZnc1tqXSwgMTApO1xyXG4gICAgICAgICAgICByaWdodEFyZWEgKz0gcGFyc2VJbnQoYXZnc1trXSwxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNoZWNrRGlmZiA9IE1hdGguYWJzKGxlZnRBcmVhIC0gcmlnaHRBcmVhKTtcclxuICAgICAgICBpZiAoY2hlY2tEaWZmIDwgYXJlYURpZmYpIHtcclxuICAgICAgICAgICAgYXJlYURpZmYgPSBjaGVja0RpZmY7XHJcbiAgICAgICAgICAgIGFyZWFJbmRleCA9IGk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBmaXJzdFJhZGl1cyA9IHBhcnNlSW50KGF2Z3NbYXJlYUluZGV4XSwgMTApO1xyXG4gICAgdmFyIHNlY29uZFJhZGl1cyA9IHBhcnNlSW50KC1hdmdzW2FyZWFJbmRleCArIDIzXSwgMTApO1xyXG5cclxuICAgIHZhciBmaXJzdERpZmYgPSBNYXRoLmFicyh0b3RhbFN1bSAtIGZpcnN0UmFkaXVzKSAtIE1hdGguYWJzKHRvdGFsU3VtIC0gc2Vjb25kUmFkaXVzKTtcclxuICAgIHZhciBzZWNvbmREaWZmID0gTWF0aC5hYnMoLXRvdGFsU3VtIC0gZmlyc3RSYWRpdXMpIC0gTWF0aC5hYnMoLXRvdGFsU3VtIC0gc2Vjb25kUmFkaXVzKTtcclxuICAgIGlmIChzZWNvbmREaWZmID4gZmlyc3REaWZmKSB7XHJcbiAgICAgICAgYXJlYUluZGV4ID0gYXJlYUluZGV4ICsgMjM7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGNpcmNsZWNlbnRlciA9IFswLCAwXTtcclxuICAgIHZhciBkYXRhY2VudGVyID0gWyhhcmVhSW5kZXggKiA4KSArIDMsIHRvdGFsU3VtXTtcclxuXHJcbiAgICByZXR1cm4oW2NpcmNsZWNlbnRlciwgZGF0YWNlbnRlcl0pO1xyXG59XHJcblxyXG4vKipcclxuICogc3RhcnREYXkgaXMgYWN0dWFsbHkgdGhlIHNlYXNvbmFsaXR5IGluZGV4LCBpZiBpdCBvY2N1cnMgYWZ0ZXIganVseSBpdCBzaG91bGQgYmUgZmxpcHBlZFxyXG4gKi9cclxuZnVuY3Rpb24gZmluZFBvbGFyVGhyZXNob2xkcyAoZGF0YSwgc3RhcnREYXkpIHtcclxuICAgIHZhciBzdGFydEluZGV4ID0gTWF0aC5mbG9vcigoc3RhcnREYXkgLSAzKSAvIDgpO1xyXG4gICAgaWYgKHN0YXJ0SW5kZXggPiAyMikge1xyXG4gICAgICAgIHN0YXJ0SW5kZXggPSBzdGFydEluZGV4IC0gMjM7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGksIGosIGxlbmd0aCwgYXJyO1xyXG4gICAgdmFyIHRvdGFsU3VtID0gMDtcclxuICAgIHZhciBzdW07XHJcbiAgICBsZW5ndGggPSA0NjtcclxuXHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBqID0gKHN0YXJ0SW5kZXggKyBpKSAlIGxlbmd0aDtcclxuICAgICAgICB0b3RhbFN1bSArPSBwYXJzZUludChkYXRhW2pdLCAxMCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGZpZnRlZW5UaHJlc2hvbGQgPSB0b3RhbFN1bSAqIC4xNTtcclxuICAgIHZhciBlaWdodHlUaHJlc2hvbGQgPSB0b3RhbFN1bSAqIC44MDtcclxuICAgIHZhciBlaWdodHlmaXZlVGhyZXNob2xkID0gdG90YWxTdW0gKiAuODU7XHJcbiAgICB2YXIgZmlmdGVlbkluZGV4Rm91bmQgPSBmYWxzZSwgXHJcbiAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IGZhbHNlLFxyXG4gICAgICAgIGVpZ2h0eWZpdmVJbmRleEZvdW5kID0gZmFsc2U7XHJcbiAgICB2YXIgZmlmdGVlbkluZGV4LCBlaWdodHlJbmRleCwgZWlnaHR5Zml2ZUluZGV4O1xyXG5cclxuICAgIHRvdGFsU3VtID0gMDtcclxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGogPSAoc3RhcnRJbmRleCArIGkpICUgbGVuZ3RoO1xyXG4gICAgICAgIHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcclxuICAgICAgICBpZiAoIWZpZnRlZW5JbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZmlmdGVlblRocmVzaG9sZCkge1xyXG4gICAgICAgICAgICBmaWZ0ZWVuSW5kZXggPSBqO1xyXG4gICAgICAgICAgICBmaWZ0ZWVuSW5kZXhGb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWVpZ2h0eUluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBlaWdodHlUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgZWlnaHR5SW5kZXggPSBqO1xyXG4gICAgICAgICAgICBlaWdodHlJbmRleEZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZWlnaHR5Zml2ZUluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBlaWdodHlmaXZlVGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgIGVpZ2h0eWZpdmVJbmRleCA9IGo7XHJcbiAgICAgICAgICAgIGVpZ2h0eWZpdmVJbmRleEZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBjaXJjbGVDZW50ZXIgPSBbMCwgMF07XHJcblxyXG4gICAgdmFyIGZpZnRlZW5FbmQgPSBbKGZpZnRlZW5JbmRleCAqIDgpICsgMywgMTAwXTtcclxuICAgIHZhciBlaWdodHlFbmQgPSBbKGVpZ2h0eUluZGV4ICogOCkgKyAzLCAxMDBdO1xyXG4gICAgdmFyIGVpZ2h0eWZpdmVFbmQgPSBbKGVpZ2h0eWZpdmVJbmRleCAqIDgpICsgMywgMTAwXTtcclxuXHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJsYWJlbFwiIDogXCIxNSVcIixcclxuICAgICAgICAgICAgXCJkYXRhXCIgOiBbY2lyY2xlQ2VudGVyLCBmaWZ0ZWVuRW5kXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcImxhYmVsXCIgOiBcIjgwJVwiLFxyXG4gICAgICAgICAgICBcImRhdGFcIiA6IFtjaXJjbGVDZW50ZXIsIGVpZ2h0eUVuZF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJsYWJlbFwiIDogXCI4NSVcIixcclxuICAgICAgICAgICAgXCJkYXRhXCIgOiBbY2lyY2xlQ2VudGVyLCBlaWdodHlmaXZlRW5kXVxyXG4gICAgICAgIH1cclxuICAgIF07XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBHUkFQSCBIRUxQRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5mdW5jdGlvbiBkcmF3TGluZWFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcclxuICAgIHJldHVybiBzdmcuYXBwZW5kKFwicGF0aFwiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpXHJcbiAgICAgICAgLmF0dHIoXCJkXCIsIGxpbmUoZGF0YSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3UG9sYXJQYXRoKGRhdGEsIGxpbmUsIHN2Zykge1xyXG4gICAgcmV0dXJuIHN2Zy5hcHBlbmQoXCJwYXRoXCIpXHJcbiAgICAgICAgLmRhdHVtKGRhdGEpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIilcclxuICAgICAgICAuYXR0cihcImRcIiwgbGluZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcykge1xyXG4gICAgcmV0dXJuIHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKVxyXG4gICAgICAgIC5kYXRhKGRhdGEpXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKFwiY2lyY2xlXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInBvaW50XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICB2YXIgcG9pbnQgPSBBcnJheS5pc0FycmF5KGQpID8gZCA6IFsoaSo4KSArIDMsIGRdO1xyXG4gICAgICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtwb2ludF0pLnNsaWNlKDEpLnNsaWNlKDAsIC0xKTtcclxuICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgY29vcnMgKyBcIilcIlxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmF0dHIoXCJyXCIsIDMpXHJcbiAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCIjMDAwXCIpXHJcbiAgICAgICAgLmF0dHIoXCJmaWxsXCIsZnVuY3Rpb24oZCxpKXtcclxuICAgICAgICAgICAgdmFyIHZhbCA9IEFycmF5LmlzQXJyYXkoZCkgPyBkWzFdIDogZDtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXB1dGVDb2xvcih2YWwsIGF2ZXJhZ2VzW2klNDZdLCAzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCBoYW5kbGVQb2ludE1vdXNlb3ZlcilcclxuICAgICAgICAub24oXCJtb3VzZW91dFwiLCBoYW5kbGVQb2ludE1vdXNlb3V0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUG9pbnRNb3VzZW92ZXIoZCkge1xyXG4gICAgdmFyIHRpcFN0cmluZyA9IEFycmF5LmlzQXJyYXkoZCkgPyBmb3JtYXREYXRlKGRbMF0pICsgXCI6IFwiICArIGRbMV0gOiBcIkF2ZXJhZ2U6IFwiICArIGQ7XHJcbiAgICB0aXAuc2hvdyh0aXBTdHJpbmcpO1xyXG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDUpO1xyXG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIycHhcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdXQoZCkge1xyXG4gICAgdGlwLmhpZGUoKTtcclxuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCAzKTtcclxuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMXB4XCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDaGVja2JveCh3cmFwcGVyLCBrZXksIHR5cGUsIHllYXIsIGNoYXJ0cywgZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpIHtcclxuICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcclxuXHJcbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIilcclxuICAgICAgICAuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKVxyXG4gICAgICAgIC5hdHRyKFwiaWRcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKVxyXG4gICAgICAgIC5hdHRyKFwidmFsdWVcIiwga2V5KVxyXG4gICAgICAgIC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgKGtleSA9PT0geWVhcikgPyB0cnVlIDogZmFsc2UpXHJcbiAgICAgICAgLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghY2hhcnRzLmhhc093blByb3BlcnR5KG5ld1llYXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdMaW5lYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2Zyk7XHJcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKVxyXG4gICAgICAgIC50ZXh0KGtleSlcclxuICAgICAgICAuYXR0cihcImZvclwiLCB0eXBlICsgXCItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjb21wdXRlQ29sb3IgKHZhbHVlLCBtZWRpYW4sIHNjYWxlKSB7XHJcbiAgICB2YXIgZGlmZiA9IHZhbHVlIC0gbWVkaWFuO1xyXG4gICAgdmFyIHBlcmNlbnRfZGlmZiA9IChNYXRoLmFicyhkaWZmKS9tZWRpYW4pICogMTAwICogc2NhbGU7XHJcbiAgICB2YXIgbGlnaHRuZXNzID0gKDEwMCAtIHBlcmNlbnRfZGlmZikgKyBcIiVcIjtcclxuXHJcbiAgICBpZiAoZGlmZiA+IDApIHtcclxuICAgICAgICByZXR1cm4gXCJoc2woOCwgNzklLCBcIiArIGxpZ2h0bmVzcyArIFwiKVwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gXCJoc2woMjE5LCA3OSUsIFwiICsgbGlnaHRuZXNzICsgXCIpXCI7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gREFURSBIRUxQRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZnVuY3Rpb24gcGFyc2VEYXRlIChkYXRlKSB7XHJcbiAgICBkYXRlID0gZGF0ZS50b1N0cmluZygpO1xyXG4gICAgdmFyIHllYXIgPSBkYXRlLnN1YnN0cmluZygwLCA0KTtcclxuICAgIHZhciBtb250aCA9IHBhcnNlSW50KGRhdGUuc3Vic3RyaW5nKDQsIDYpLCAxMCkgLSAxO1xyXG4gICAgdmFyIGRheSA9IGRhdGUuc3Vic3RyaW5nKDYsIDgpO1xyXG5cclxuICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VKdWxpYW5EYXkgKGRhdGUpIHtcclxuICAgIGlmICh0eXBlb2YoZGF0ZSkgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICBkYXRlID0gcGFyc2VEYXRlKGRhdGUpO1xyXG4gICAgICAgIHJldHVybiBkYXRlLmdldERPWSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZGF0ZTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0RGF0ZSAoZGF0ZSkge1xyXG4gICAgaWYgKGRhdGUgPT09IFwiQXZlcmFnZVwiKSB7IHJldHVybiBkYXRlOyB9XHJcblxyXG4gICAgZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcclxuICAgIHJldHVybiBmb3JtYXRNb250aChkYXRlLmdldE1vbnRoKCkpICsgXCIgXCIgKyBvcmRpbmFsX3N1ZmZpeF9vZihkYXRlLmdldERhdGUoKSkgKyBcIiwgXCIgKyBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdE1vbnRoIChtb250aCkge1xyXG4gICAgc3dpdGNoIChtb250aCkge1xyXG4gICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgcmV0dXJuIFwiSmFuLlwiXHJcbiAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJGZWIuXCJcclxuICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgIHJldHVybiBcIk1hci5cIlxyXG4gICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiQXByLlwiXHJcbiAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICByZXR1cm4gXCJNYXlcIlxyXG4gICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgcmV0dXJuIFwiSnVuLlwiXHJcbiAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICByZXR1cm4gXCJKdWwuXCJcclxuICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgIHJldHVybiBcIkF1Zy5cIlxyXG4gICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgcmV0dXJuIFwiU2VwLlwiXHJcbiAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICByZXR1cm4gXCJPY3QuXCJcclxuICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJOb3YuXCJcclxuICAgICAgICBjYXNlIDExOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJEZWMuXCJcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb3JkaW5hbF9zdWZmaXhfb2YoZGF5KSB7XHJcbiAgICB2YXIgaiA9IGRheSAlIDEwLFxyXG4gICAgICAgIGsgPSBkYXkgJSAxMDA7XHJcbiAgICBpZiAoaiA9PT0gMSAmJiBrICE9PSAxMSkge1xyXG4gICAgICAgIHJldHVybiBkYXkgKyBcInN0XCI7XHJcbiAgICB9XHJcbiAgICBpZiAoaiA9PT0gMiAmJiBrICE9PSAxMikge1xyXG4gICAgICAgIHJldHVybiBkYXkgKyBcIm5kXCI7XHJcbiAgICB9XHJcbiAgICBpZiAoaiA9PT0gMyAmJiBrICE9PSAxMykge1xyXG4gICAgICAgIHJldHVybiBkYXkgKyBcInJkXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF5ICsgXCJ0aFwiO1xyXG59XHJcblxyXG52YXIgTU9OVEhfTEFCRUxTID0ge1xyXG4gICAgMDogXCJKYW5cIixcclxuICAgIDE6IFwiRmViXCIsXHJcbiAgICAyOiBcIk1hclwiLFxyXG4gICAgMzogXCJBcHJcIixcclxuICAgIDQ6IFwiTWF5XCIsXHJcbiAgICA1OiBcIkp1blwiLFxyXG4gICAgNjogXCJKdWxcIixcclxuICAgIDc6IFwiQXVnXCIsXHJcbiAgICA4OiBcIlNlcFwiLFxyXG4gICAgOTogXCJPY3RcIixcclxuICAgIDEwOiBcIk5vdlwiLFxyXG4gICAgMTE6IFwiRGVjXCJcclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvZ3JhcGguanMiLCJpbXBvcnQge3VwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHR9IGZyb20gJy4vcGFuZWwnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBCaW5kVGFiRXZlbnRzICgpIHtcclxuICBkMy5zZWxlY3RBbGwoXCIucGFuZWwtdG9wLWJ0blwiKS5vbihcImNsaWNrXCIsIGhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2sgKCkge1xyXG4gIC8vIElmIHRoZSBzZWN0aW9uIGlzIGFscmVhZHkgYWN0aXZlLCBkbyBub3RoaW5nXHJcbiAgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgcmV0dXJuXHJcblxyXG4gIHRvZ2dsZVdyYXBwZXJBY3RpdmVTdGF0ZXMoKVxyXG4gIHRvZ2dsZU1hcFBhZGRpbmcoKVxyXG4gIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKVxyXG5cclxuICBkMy5zZWxlY3RBbGwoJy5wYW5lbC10b3AtYnRuLCAucGFuZWwtc2VjdGlvbi13cmFwcGVyJylcclxuICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHJldHVybiAhZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ2FjdGl2ZScpO1xyXG4gICAgfSk7XHJcblxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlV3JhcHBlckFjdGl2ZVN0YXRlcygpIHtcclxuICB2YXIgd3JhcHBlcnMgPSBkMy5zZWxlY3RBbGwoJyNtYXAtd3JhcHBlciwgI3JpZ2h0LXBhbmVsJylcclxuXHJcbiAgdmFyIGxheWVyc0FjdGl2ZSA9IHdyYXBwZXJzLmNsYXNzZWQoJ2xheWVycy1hY3RpdmUnKVxyXG4gIHZhciBncmFwaHNBY3RpdmUgPSB3cmFwcGVycy5jbGFzc2VkKCdncmFwaHMtYWN0aXZlJylcclxuXHJcbiAgd3JhcHBlcnNcclxuICAgIC5jbGFzc2VkKCdsYXllcnMtYWN0aXZlJywgIWxheWVyc0FjdGl2ZSlcclxuICAgIC5jbGFzc2VkKCdncmFwaHMtYWN0aXZlJywgIWdyYXBoc0FjdGl2ZSlcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlTWFwUGFkZGluZyAoKSB7XHJcbiAgICB2YXIgcGFkZGluZ1JpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyaWdodC1wYW5lbFwiKS5vZmZzZXRXaWR0aDtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwLXdyYXBwZXJcIikuc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGFkZGluZ1JpZ2h0ICsgXCJweFwiO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3RhYnMuanMiXSwic291cmNlUm9vdCI6IiJ9