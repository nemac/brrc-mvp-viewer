!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),i=n(3),c=r(i),s=n(22),u=n(26),l=n(28),f=n(30),p=n(24),d=n(25),h=n(23),v=n(31),y=r(v),m=n(27),b=(n(32),function(e){(0,o.default)(e,g),(0,l.SetupGraphs)(),(0,f.BindTabEvents)()}),g=function(e){(0,d.AddShareSettingsToConfig)(e);var t=(0,p.CreateMap)(e.map);(0,u.CreateBaseLayers)(t,e.baselayers),(0,h.CreateDefaultLayers)(e.layers,e["active-layers"]),(0,s.SetupPanel)(e.layers,e.layout),(0,c.default)(t),(0,y.default)(e.logo),e.tab&&(0,f.HandleTabChange)(e.tab),(0,l.BindGraphEvents)(t),(0,d.BindUpdateShareUrl)(t),(0,m.SetupPointsOfInterest)(t,e.pois),(0,d.updateShareUrl)()};window.Base=b,t.default={Base:b}},function(e,t){"use strict";function n(e,t){r(e,t)}function r(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState){try{var e=JSON.parse(n.responseText)}catch(e){console.log("ERROR: Malformed JSON in config file."),console.log(e)}a(e),o(e),t(e)}},n.open("GET",e,!0),n.send(),console.log("hi")}function a(e){e.map||(e.map={})}function o(e){var t,n,r=e.layers,a=e.mapserverUrl;e["active-layers"];for(var o in r){if(!r.hasOwnProperty(o))return;for(t=r[o],n=0;n<t.length;n++)i(t[n],a)}}function i(e,t){e.url=e.url||t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){var t=new a.EsriProvider,n=new a.GeoSearchControl({provider:t,showMarker:!1,autoComplete:!1});e.addControl(n),L.DomEvent.on(n.searchElement.elements.container,"click",function(e){L.DomEvent.stopPropagation(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(4)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5);Object.defineProperty(t,"GeoSearchControl",{enumerable:!0,get:function(){return r(a).default}});var o=n(13);Object.defineProperty(t,"SearchElement",{enumerable:!0,get:function(){return r(o).default}});var i=n(17);Object.defineProperty(t,"BingProvider",{enumerable:!0,get:function(){return r(i).default}});var c=n(19);Object.defineProperty(t,"EsriProvider",{enumerable:!0,get:function(){return r(c).default}});var s=n(20);Object.defineProperty(t,"GoogleProvider",{enumerable:!0,get:function(){return r(s).default}});var u=n(21);Object.defineProperty(t,"OpenStreetMapProvider",{enumerable:!0,get:function(){return r(u).default}});var l=n(18);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return r(l).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){if(!L||!L.Control||!L.Control.extend)throw new Error("Leaflet must be loaded before instantiating the GeoSearch control");for(var e=L.Control.extend(y),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e,[null].concat(n)))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=(r(o),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});t.default=a;var c=n(12),s=r(c),u=n(13),l=r(u),f=n(16),p=r(f),d=n(14),h=n(15),v=function(){return{position:"topleft",style:"button",showMarker:!0,showPopup:!1,marker:{icon:new L.Icon.Default,draggable:!1},maxMarkers:1,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",notFoundMessage:"Sorry, that address could not be found.",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",msgbox:"leaflet-bar message",form:"",input:""},autoComplete:!0,autoCompleteDelay:250}},y={initialize:function(e){var t=this;this.markers=new L.FeatureGroup,this.options=i({},v(),e);var n=this.options,r=n.style,a=n.classNames,o=n.searchLabel,c=n.autoComplete,u=n.autoCompleteDelay;"button"!==r&&(this.options.classNames.container+=" "+e.style),this.searchElement=new l.default(i({},this.options,{handleSubmit:function(e){return t.onSubmit(e)}}));var f=this.searchElement.elements,h=f.container,y=f.form,m=f.input;h.addEventListener("dblclick",function(e){e.stopPropagation()});var b=(0,d.createElement)("a",a.button,h);b.title=o,b.href="#",b.addEventListener("click",function(e){t.onClick(e)},!1),c&&(this.resultList=new p.default({handleClick:function(e){var n=e.result;m.value=n.label,t.onSubmit({query:n.label})}}),y.appendChild(this.resultList.elements.container),m.addEventListener("keyup",(0,s.default)(function(e){return t.autoSearch(e)},u),!0),m.addEventListener("keydown",function(e){return t.selectResult(e)},!0),m.addEventListener("keydown",function(e){return t.clearResults(e)},!0)),this.elements={button:b}},onAdd:function(e){var t=this.options,n=t.showMarker,r=t.style;if(this.map=e,n&&this.markers.addTo(e),"bar"===r){var a=this.searchElement.elements.form,o=e.getContainer().querySelector(".leaflet-control-container"),i=(0,d.createElement)("div","leaflet-control-geosearch bar");i.appendChild(a),o.appendChild(i),this.elements.container=i}return this.searchElement.elements.container},onRemove:function(){var e=this.elements.container;return e&&e.remove(),this},onClick:function(e){e.preventDefault();var t=this.searchElement.elements,n=t.container,r=t.input;n.classList.contains("active")?(0,d.removeClassName)(n,"active"):((0,d.addClassName)(n,"active"),r.focus())},selectResult:function(e){if([h.ARROW_DOWN_KEY,h.ARROW_UP_KEY].includes(e.keyCode)){e.preventDefault();var t=this.searchElement.elements.input,n=this.resultList,r=this.resultList.count()-1,a="ArrowDown"===e.code?1+~~n.selected:~~n.selected-1,o=a<0?r:a>r?0:a,i=n.select(o);t.value=i.label}},clearResults:function(e){e.keyCode===h.ESCAPE_KEY&&this.resultList.clear()},autoSearch:function(e){return new Promise(function(t,n){var r,a,o;return h.SPECIAL_KEYS.includes(e.keyCode)?t():(r=e.target.value,a=this.options.provider,a.search({query:r}).then(function(e){return o=e,this.resultList.render(o),t()}.$asyncbind(this,n),n))}.$asyncbind(this))},onSubmit:function(e){return new Promise(function(t,n){var r,a;return r=this.options.provider,r.search(e).then(function(e){return a=e,a&&a.length>0&&this.showResult(a[0]),t()}.$asyncbind(this,n),n)}.$asyncbind(this))},showResult:function(e){var t=Object.keys(this.markers._layers);t.length>=this.options.maxMarkers&&this.markers.removeLayer(t[0]);var n=this.addMarker(e);this.centerMap(e),this.map.fireEvent("geosearch/showlocation",{location:e,marker:n})},addMarker:function(e){var t=this.options,n=t.marker,r=t.showPopup,a=new L.Marker([e.y,e.x],n);return a.bindPopup(e.label),this.markers.addLayer(a),r&&a.openPopup(),a},centerMap:function(e){var t=this.options,n=t.retainZoomLevel,r=t.animateZoom,a=new L.LatLngBounds(e.bounds),o=a.isValid()?a:this.markers.getBounds();!n&&a.isValid()?this.map.fitBounds(o,{animate:r}):this.map.setView(o.getCenter(),this.getZoom(),{animate:r})},getZoom:function(){var e=this.options,t=e.retainZoomLevel,n=e.zoomLevel;return t?this.map.getZoom():n}}},function(e,t,n){"use strict";function r(e,t){if(Function.prototype.$asyncspawn||Object.defineProperty(Function.prototype,"$asyncspawn",{value:r,enumerable:!1,configurable:!0,writable:!0}),this instanceof Function){var n=this;return new e(function(e,r){function a(t,n){var i;try{if(i=t.call(o,n),i.done){if(i.value!==e){if(i.value&&i.value===i.value.then)return i.value(e,r);e&&e(i.value),e=null}return}i.value.then?i.value.then(function(e){a(o.next,e)},function(e){a(o.throw,e)}):a(o.next,i.value)}catch(e){return r&&r(e),void(r=null)}}var o=n.call(t,e,r);a(o.next)})}}var a=function(e,t){for(var n=t.toString(),r="return "+n,a=n.match(/.*\(([^)]*)\)/)[1],o=/['"]!!!([^'"]*)['"]/g,i=[];;){var c=o.exec(r);if(!c)break;i.push(c)}return i.reverse().forEach(function(t){r=r.slice(0,t.index)+e[t[1]]+r.substr(t.index+t[0].length)}),r=r.replace(/\/\*[^*]*\*\//g," ").replace(/\s+/g," "),new Function(a,r)()}({zousan:n(7).toString(),thenable:n(11).toString()},function e(t,n){function r(){return a.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,a){return function o(i){for(;i;){if(i.then)return i=i.then(o,r),a?void 0:i;try{if(i.pop){if(i.length)return i.pop()?t.call(e):i;i=n}else i=i.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable="!!!thenable"(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory="!!!zousan")());var a=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return a.apply(t,arguments)}catch(e){return n(e)}}}});a(),r(),e.exports={$asyncbind:a,$asyncspawn:r}},function(e,t,n){(function(t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){function a(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function o(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function i(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===(void 0===t?"undefined":r(t))&&t.nextTick||"function"==typeof n&&n||function(e){setTimeout(e,0)};var c=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===a&&(n.splice(0,a),r=0)}}var n=[],r=0,a=1024;return function(a){n.push(a),n.length-r==1&&e(t)}}();return a.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":r(e))))try{var n=0,a=e.then;if("function"==typeof a)return void a.call(e,function(e){n++||t.resolve(e)},function(e){n++||t.reject(e)})}catch(e){return void(n||this.reject(e))}this.state=o,this.v=e,t.c&&c(function(){for(var n=0,r=t.c.length;n<r;n++)o(t.c[n],e)})}},reject:function(e){if(void 0===this.state){this.state=i,this.v=e;var t=this.c;t&&c(function(){for(var n=0,r=t.length;n<r;n++)i(t[n],e)})}},then:function(e,t){var n=new a,r={y:e,n:t,p:n};if(void 0===this.state)this.c?this.c.push(r):this.c=[r];else{var o=this.state,i=this.v;c(function(){o(r,i)})}return n}},a.resolve=function(e){if(e&&e instanceof a)return e;var t=new a;return t.resolve(e),t},a.reject=function(e){if(e&&e instanceof a)return e;var t=new a;return t.reject(e),t},a.version="2.3.3-nodent",a}}).call(t,n(8),n(9).setImmediate)},function(e,t){"use strict";function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function i(){v&&d&&(v=!1,d.length?h=d.concat(h):y=-1,h.length&&c())}function c(){if(!v){var e=a(i);v=!0;for(var t=h.length;t;){for(d=h,h=[];++y<t;)d&&d[y].run();y=-1,t=h.length}d=null,v=!1,o(e)}}function s(e,t){this.fun=e,this.array=t}function u(){}var l,f,p=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,h=[],v=!1,y=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new s(e,t)),1!==h.length||v||a(c)},s.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";function r(e,t){this._id=e,this._clearFn=t}var a=Function.prototype.apply;t.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(10),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){"use strict";!function(e,n){function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[s]=r,c(s),s++}function a(e){delete u[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function i(e){if(l)setTimeout(i,0,e);else{var t=u[e];if(t){l=!0;try{o(t)}finally{a(e),l=!1}}}}if(!e.setImmediate){var c,s=1,u={},l=!1,f=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){i(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},c=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;c=function(t){var n=f.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(i,0,e)}}(),p.setImmediate=r,p.clearImmediate=a}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(t,function(){return this}(),n(8))},function(e,t){"use strict";e.exports=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,a){try{var o=a?a(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));e(o)?o.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(o)}catch(e){n.reject(e)}}function n(){}function r(e){}function a(e,t){this.resolve=e,this.reject=t}function o(r,a){var o=new n;try{this._resolver(function(n){return e(n)?n.then(r,a):t(o,n,r)},function(e){t(o,e,a)})}catch(e){t(o,e,a)}return o}function i(e){this._resolver=e,this.then=o}return n.prototype={resolve:r,reject:r,then:a},i.resolve=function(e){return i.isThenable(e)?e:{then:function(t){return t(e)}}},i.isThenable=e,i}},function(e,t){(function(t){"use strict";function n(e,t,n){function a(t){var n=v,r=y;return v=y=void 0,E=t,b=e.apply(r,n)}function o(e){return E=e,g=setTimeout(l,t),S?a(e):b}function c(e){var n=e-w,r=e-E,a=t-n;return P?O(a,m-r):a}function u(e){var n=e-w,r=e-E;return void 0===w||n>=t||n<0||P&&r>=m}function l(){var e=_();if(u(e))return f(e);g=setTimeout(l,c(e))}function f(e){return g=void 0,x&&v?a(e):(v=y=void 0,b)}function p(){void 0!==g&&clearTimeout(g),E=0,v=w=y=g=void 0}function d(){return void 0===g?b:f(_())}function h(){var e=_(),n=u(e);if(v=arguments,y=this,w=e,n){if(void 0===g)return o(w);if(P)return g=setTimeout(l,t),a(w)}return void 0===g&&(g=setTimeout(l,t)),b}var v,y,m,b,g,w,E=0,S=!1,P=!1,x=!0;if("function"!=typeof e)throw new TypeError(s);return t=i(t)||0,r(n)&&(S=!!n.leading,P="maxWait"in n,m=P?k(i(n.maxWait)||0,t):m,x="trailing"in n?!!n.trailing:x),h.cancel=p,h.flush=d,h}function r(e){var t=void 0===e?"undefined":c(e);return!!e&&("object"==t||"function"==t)}function a(e){return!!e&&"object"==(void 0===e?"undefined":c(e))}function o(e){return"symbol"==(void 0===e?"undefined":c(e))||a(e)&&w.call(e)==l}function i(e){if("number"==typeof e)return e;if(o(e))return u;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(f,"");var n=d.test(e);return n||h.test(e)?v(e.slice(2),n?2:8):p.test(e)?u:+e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="Expected a function",u=NaN,l="[object Symbol]",f=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,h=/^0o[0-7]+$/i,v=parseInt,y="object"==(void 0===t?"undefined":c(t))&&t&&t.Object===Object&&t,m="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,b=y||m||Function("return this")(),g=Object.prototype,w=g.toString,k=Math.max,O=Math.min,_=function(){return b.Date.now()};e.exports=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=(function(e){e&&e.__esModule?e:{default:e}}(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=n(14),c=n(15),s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.handleSubmit,o=void 0===a?function(){}:a,c=n.searchLabel,s=void 0===c?"search":c,u=n.classNames,l=void 0===u?{}:u;r(this,e);var f=(0,i.createElement)("div",["geosearch",l.container].join(" ")),p=(0,i.createElement)("form",["",l.form].join(" "),f),d=(0,i.createElement)("input",["glass",l.input].join(" "),p);d.type="text",d.placeholder=s,d.addEventListener("input",function(e){t.onInput(e)},!1),d.addEventListener("keyup",function(e){t.onKeyUp(e)},!1),d.addEventListener("keypress",function(e){t.onKeyPress(e)},!1),d.addEventListener("focus",function(e){t.onFocus(e)},!1),d.addEventListener("blur",function(e){t.onBlur(e)},!1),this.elements={container:f,form:p,input:d},this.handleSubmit=o}return o(e,[{key:"onFocus",value:function(){(0,i.addClassName)(this.elements.form,"active")}},{key:"onBlur",value:function(){(0,i.removeClassName)(this.elements.form,"active")}},{key:"onSubmit",value:function(e){return new Promise(function(t,n){var r,a,o;return e.preventDefault(),e.stopPropagation(),r=this.elements,a=r.input,o=r.container,(0,i.removeClassName)(o,"error"),(0,i.addClassName)(o,"pending"),this.handleSubmit({query:a.value}).then(function(e){return(0,i.removeClassName)(o,"pending"),t()}.$asyncbind(this,n),n)}.$asyncbind(this))}},{key:"onInput",value:function(){var e=this.elements.container;this.hasError&&((0,i.removeClassName)(e,"error"),this.hasError=!1)}},{key:"onKeyUp",value:function(e){var t=this.elements,n=t.container,r=t.input;e.keyCode===c.ESCAPE_KEY&&((0,i.removeClassName)(n,"pending"),(0,i.removeClassName)(n,"active"),r.value="",document.body.focus(),document.body.blur())}},{key:"onKeyPress",value:function(e){e.keyCode===c.ENTER_KEY&&this.onSubmit(e)}},{key:"setQuery",value:function(e){this.elements.input.value=e}}]),e}();t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.createElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElement(e);return r.className=t,n&&n.appendChild(r),r};t.createScriptElement=function(e,t){var r=n("script",null,document.body);return r.setAttribute("type","text/javascript"),new Promise(function(n){window[t]=function(e){r.remove(),delete window[t],n(e)},r.setAttribute("src",e)})},t.addClassName=function(e,t){e&&!e.classList.contains(t)&&e.classList.add(t)},t.removeClassName=function(e,t){e&&e.classList.contains(t)&&e.classList.remove(t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.ENTER_KEY=13,r=t.ESCAPE_KEY=27,a=t.ARROW_DOWN_KEY=40,o=t.ARROW_UP_KEY=38,i=t.ARROW_LEFT_KEY=37,c=t.ARROW_RIGHT_KEY=39;t.SPECIAL_KEYS=[n,r,a,o,i,c]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(14),i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join(" ").trim()},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.handleClick,a=void 0===n?function(){}:n,c=t.classNames,u=void 0===c?{}:c;r(this,e),s.call(this),this.props={handleClick:a,classNames:u},this.selected=-1;var l=(0,o.createElement)("div",i("results",u.container)),f=(0,o.createElement)("div",i(u.item));l.addEventListener("click",this.onClick,!0),this.elements={container:l,resultItem:f}}return a(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.elements,n=t.container,r=t.resultItem;this.clear(),e.forEach(function(e,t){var a=r.cloneNode(!0);a.setAttribute("data-key",t),a.innerHTML=e.label,n.appendChild(a)}),e.length>0&&(0,o.addClassName)(n,"active"),this.results=e}},{key:"select",value:function(e){var t=this.elements.container;return Array.from(t.children).forEach(function(t,n){return n===e?(0,o.addClassName)(t,"active"):(0,o.removeClassName)(t,"active")}),this.selected=e,this.results[e]}},{key:"count",value:function(){return this.results.length}},{key:"clear",value:function(){var e=this.elements.container;for(this.selected=-1;e.lastChild;)e.removeChild(e.lastChild);(0,o.removeClassName)(e,"active")}}]),e}(),s=function(){var e=this;this.onClick=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.target,r=e.props.handleClick,a=e.elements.container;if(n.parentNode===a&&n.hasAttribute("data-key")){var o=n.getAttribute("data-key");r({result:e.results[o]})}}};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),u=(r(s),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(18),p=r(f),d=n(14),h=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=e.jsonp,a=this.options.params;return n+"//dev.virtualearth.net/REST/v1/Locations?"+this.getParamString(u({},a,{query:t,jsonp:r}))}},{key:"parse",value:function(e){var t=e.data;return 0===t.resourceSets.length?[]:t.resourceSets[0].resources.map(function(e){return{x:e.point.coordinates[1],y:e.point.coordinates[0],label:e.address.formattedAddress,bounds:[[e.bbox[0],e.bbox[1]],[e.bbox[2],e.bbox[3]]],raw:e}})}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o="BING_JSONP_CB_"+Date.now(),i=this.endpoint({query:r,protocol:a,jsonp:o}),(0,d.createScriptElement)(i,o).then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),t}(p.default);t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=(function(e){e&&e.__esModule?e:{default:e}}(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.options=t}return o(e,[{key:"getParamString",value:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o=this.endpoint({query:r,protocol:a}),fetch(o).then(function(e){return i=e,i.json().then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),l=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find?"+this.getParamString(c({},r,{f:"json",text:t}))}},{key:"parse",value:function(e){return e.data.locations.map(function(e){return{x:e.feature.geometry.x,y:e.feature.geometry.y,label:e.name,bounds:[[e.extent.ymin,e.extent.xmin],[e.extent.ymax,e.extent.xmax]],raw:e}})}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),l=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params,a=this.getParamString(c({},r,{address:t}));return(r&&r.key?"https:":n)+"//maps.googleapis.com/maps/api/geocode/json?"+a}},{key:"parse",value:function(e){return e.data.results.map(function(e){return{x:e.geometry.location.lng,y:e.geometry.location.lat,label:e.formatted_address,bounds:[[e.geometry.viewport.southwest.lat,e.geometry.viewport.southwest.lng],[e.geometry.viewport.northeast.lat,e.geometry.viewport.northeast.lng]],raw:e}})}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),l=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//nominatim.openstreetmap.org/search?"+this.getParamString(c({},r,{format:"json",q:t}))}},{key:"parse",value:function(e){return e.data.map(function(e){return{x:e.lon,y:e.lat,label:e.display_name,bounds:[[parseFloat(e.boundingbox[0]),parseFloat(e.boundingbox[2])],[parseFloat(e.boundingbox[1]),parseFloat(e.boundingbox[3])]],raw:e}})}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e,t){l(u(t["layer-groups-order"]),e),o(),a()}function a(){document.getElementById("right-panel").onscroll=c}function o(){d3.select("#right-panel-drag-overlay").call(d3.drag().on("drag",function(){i.call(this)}))}function i(){c(),s()}function c(){var e,t=d3.select("#right-panel"),n=t.property("offsetHeight"),r=document.getElementById("right-panel-drag-overlay"),a=document.getElementById("right-panel-header");if(t.classed("graphs-active")){var o=document.getElementById("graph-list");e=a.scrollHeight+o.scrollHeight+700}else{var i=document.getElementById("layer-list");e=a.scrollHeight+i.scrollHeight}e=e>n?e+"px":null,r.style.height=e}function s(){var e=d3.select("#right-panel"),t=+e.style("min-width").slice(0,-2),n=e.property("clientWidth"),r=document.getElementById("wrapper"),a=r.clientWidth,o=document.getElementById("map-wrapper"),i=d3.event.sourceEvent.x,c=a-i-n,s=n+c;s=s<t?t:s>a?a:s,o.style.paddingRight=s+"px",e.style("width",s+"px")}function u(e){return d3.select("#layer-list").selectAll(".layer-group-wrapper").data(e).enter().append("div").attr("class","layer-group-wrapper").attr("id",function(e){return e.id}).classed("active",function(e){return e.active}).each(function(e){d3.select(this).append("div").attr("class","layer-group-btn btn").on("click",function(e){e.active=!e.active,d3.select(this.parentNode).classed("active",function(){return e.active}),c()}).text(e.name)}).append("div").attr("class","layer-group")}function l(e,t){e.selectAll(".layer-select").data(function(e){return t[e.id]}).enter().append("div").attr("class","layer-select").each(function(e){var t=(this.parentNode.parentNode.id,d3.select(this));f(e,t),p(e,t),d(e,t),h(e,t)})}function f(e,t){t.append("input").attr("type","checkbox").attr("id",function(e){return e.id}).attr("checked",function(e){return e.active?"checked":null}).on("click",function(e){(0,y.toggleLayer)(e),t.select(".layer-tools-wrapper").classed("active",e.active),e.active&&(0,m.setSliderInitialPos)(e,t)})}function p(e,t){t.append("div").attr("class","layer-label-wrapper").append("label").attr("for",function(e){return e.id}).attr("class","layer-label").html(function(e){return e.name})}function d(e,t){e.info&&""!==e.info&&(t.append("div").attr("class","layer-info-btn").text("(?)").on("click",function(){d3.select(this.parentNode).select(".layer-info-wrapper").classed("active",function(){return!d3.select(this).classed("active")})}),t.append("div").attr("class","layer-info-wrapper").text(function(e){return e.info}))}function h(e,t){var n=t.append("div").attr("class","layer-tools-wrapper").classed("active",function(){return e.active});(0,m.makeOpacitySlider)(e,n),v(e,n)}function v(e,t){t.append("div").attr("class","legend-wrapper").append("img").attr("src",e.legend||"mean_ndvi_legend.jpg")}Object.defineProperty(t,"__esModule",{value:!0}),t.SetupPanel=r,t.updatePanelDragOverlayHeight=c;var y=n(23),m=n(29);n(25)},function(e,t,n){"use strict";function r(){return h}function a(e,t){var n,r,a,o,c,s;if(t&&0!==t.length)for(n=0;n<t.length;n++){s=!1,c=t[n];for(a in e){if(!e.hasOwnProperty(a))return;for(o=e[a],r=0;r<o.length;r++)if(o[r].id===c){i(o[r]),s=!0;break}if(s)break}}}function o(e){e.active?s(e):i(e)}function i(e){var t=(0,p.GetMap)();e.active=!0,e.mapLayer=e.mapLayer||f(e),t.addLayer(e.mapLayer),c(e),(0,d.updateShareUrl)()}function c(e){h.push(e.id)}function s(e){var t=(0,p.GetMap)();e.active=!1,e.mapLayer&&t.hasLayer(e.mapLayer)&&t.removeLayer(e.mapLayer),u(e),(0,d.updateShareUrl)()}function u(e){var t=h.indexOf(e.id);t!==-1&&h.splice(t,1)}function l(e,t){e.opacity=t,e.mapLayer.setOpacity(t)}function f(e){return L.tileLayer.wms(e.url,{layers:e.id,transparent:e.transparent||!0,version:e.version||"1.3.0",crs:e.crs||L.CRS.EPSG4326,format:e.format||"image/png",opacity:e.opacity||1,tileSize:e.tileSize||256})}Object.defineProperty(t,"__esModule",{value:!0}),t.GetCurrentLayers=r,t.CreateDefaultLayers=a,t.toggleLayer=o,t.enableLayer=i,t.disableLayer=s,t.updateLayerOpacity=l;var p=n(24),d=n(25),h=[]},function(e,t){"use strict";function n(e){var t=e.id||"map",n=e.options||{scrollWheelZoom:!1},r=e.center||["38.5","-81"],o=e.zoom||6;return a=L.map(t,n).setView(r,o),L.control.attribution().addTo(a),a}function r(){return a}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateMap=n,t.GetMap=r;var a},function(e,t,n){"use strict";function r(e){e.on("moveend",a)}function a(e){var t=(0,P.GetMap)();c(i([s(t),u(t),l(t),f(t),p(),d()]))}function o(e){var t=h();t&&(t.center&&(e.map.center=t.center),t.zoom&&(e.map.zoom=t.zoom),t.layers&&_(t.layers,e),t.baselayers&&E(t.baselayers,e),t.pois&&S(t.pois,e),t.tab&&(e.tab=t.tab))}function i(e){return"?"+e.filter(function(e){return void 0!==e}).join("&")}function c(e){window.history&&window.history.replaceState&&window.history.replaceState({},"",e)}function s(e){var t=e.getCenter();return"center="+t.lat.toString()+","+t.lng.toString()}function u(e){return"zoom="+e.getZoom()}function l(e){var t=[],n={},r=(0,j.GetCurrentLayers)();e.eachLayer(function(e){var t=e.options;t&&t.layers&&(n[t.layers]=t.hasOwnProperty("opacity")?t.opacity:"1")});var a,o;for(o=0;o<r.length;o++)a=r[o],t.push(a),t.push(n[a]);return"layers="+t.join(",")}function f(e){var t=[];return e.eachLayer(function(e){e.options&&e.options.type===x.BASE_LAYER_TYPE&&t.push(e.options.id)}),"baselayers="+t.join(",")}function p(){var e=(0,L.GetAllPointsOfInterest)();if(e.length){var t="pois=";return e.forEach(function(e){t+=e.lat+","+e.lng+";"}),t}}function d(){return"tab="+d3.select(".panel-top-btn.active").attr("data-active")}function h(){var e=window.location.search;if(""!==e)return e=v(e),e=m(e),b(e),e}function v(e){return e=e.substring(1),e=y(e),e.split("&")}function y(e){return e.replace(/\%2[c|C]/g,",").replace(/\%3[b|B]/g,";")}function m(e){var t,n,r={};for(n=0;n<e.length;n++)t=e[n].split("="),r[t[0]]=t[1];return r}function b(e){e.center&&(e.center=g(e.center)),e.layers&&(e.layers=w(e.layers)),e.baselayers&&(e.baselayers=k(e.baselayers)),e.pois&&(e.pois=O(e.pois))}function g(e){return e.split(",")}function w(e){var t,n,r={enabledLayers:[],opacityVals:{}};for(e=e.split(","),n=0;n<e.length;n+=2)t=e[n],r.enabledLayers.push(t),r.opacityVals[t]=e[n+1];return r}function k(e){return e.split(",")}function O(e){return e.split(";").filter(function(e){return""!==e}).map(function(e){return e=e.split(","),{lat:e[0],lng:e[1]}})}function _(e,t){var n=e.enabledLayers;t["active-layers"]=n;var r,a,o,i,c,s,u=t.layers;for(r=0;r<n.length;r++){s=!1,c=n[r];for(o in u){if(!u.hasOwnProperty(o))return;for(i=u[o],a=0;a<i.length;a++)if(i[a].id===c){i[a].opacity=e.opacityVals[c],s=!0;break}if(s)break}}}function E(e,t){var n,r,a=t.baselayers;for(r=0;r<a.length;r++)n=a[r],n.active=e.indexOf(n.id)!==-1}function S(e,t){t.pois=e}Object.defineProperty(t,"__esModule",{value:!0}),t.BindUpdateShareUrl=r,t.updateShareUrl=a,t.AddShareSettingsToConfig=o;var P=n(24),x=n(26),j=n(23),L=n(27)},function(e,t,n){"use strict";function r(e,t){t=t||[{id:"carto-light-default",url:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attributions">CARTO</a>'}],f=t;var n,r,o;for(n=0;n<t.length;n++)o=t[n],o.active&&(r=u(o),o.layer=r,r.addTo(e));a(t)}function a(e){var t=document.createElement("div");t.className="baselayer-ui";for(var n,r,a,i,c=0,s=e.length;c<s;c++)i=e[c],i.hasOwnProperty("image")&&(n=document.createElement("div"),n.setAttribute("data-layer",i.id),r=document.createElement("img"),r.setAttribute("src",i.image),r.setAttribute("alt",i.label),r.setAttribute("title",i.label),a=document.createElement("div"),a.textContent=i.label,n.appendChild(r),n.appendChild(a),n.addEventListener("click",o),d3.select(n).classed("base-selector",!0).classed("active",i.active),t.appendChild(n));document.getElementsByClassName("leaflet-bottom leaflet-left")[0].appendChild(t)}function o(e){e.stopPropagation();var t=this.getAttribute("data-layer");i(this),c(),s(t),(0,d.updateShareUrl)()}function i(e){d3.select(".base-selector.active").classed("active",!1),d3.select(e).classed("active",!0)}function c(){var e=(0,p.GetMap)();e.eachLayer(function(t){t.options.type===h&&e.removeLayer(t)})}function s(e){for(var t,n=(0,p.GetMap)(),r=0,a=f.length;r<a;r++)if(t=f[r],t.id===e){t.layer||(t.layer=u(t)),t.layer.addTo(n),t.layer.bringToBack();break}}function u(e){return L.tileLayer(e.url,l(e))}function l(e){var t={};return e.id&&(t.id=e.id),e.attribution&&(t.attribution=e.attribution),e.subdomains&&(t.subdomains=e.subdomains),t.type=h,t}Object.defineProperty(t,"__esModule",{value:!0}),t.BASE_LAYER_TYPE=void 0,t.CreateBaseLayers=r;var f,p=n(24),d=n(25),h=t.BASE_LAYER_TYPE="baselayer"},function(e,t,n){"use strict";function r(){return y}function a(e,t){var n={lat:e,lng:t};return y.push(n),n}function o(e,t){i(t);var n=r(),e=(0,h.GetMap)();n.forEach(function(t){s(e,t)})}function i(e){Array.prototype.push.apply(y,e)}function c(e){y=y.filter(function(t){return!Object.is(t,e)})}function s(e,t){var n=(0,p.createGraphDiv)(t),r=(0,p.createMarker)(e,t.lat,t.lng);t.graphDiv=n,t.marker=r,r.addTo(e),(0,p.createGraphRemover)(e,n,r,t),d3.select(n).on("mouseenter",function(e){r.setIcon((0,p.getIcon)("hover"))}),d3.select(n).on("mouseleave",function(){r.setIcon((0,p.getIcon)("graph"))}),r.on("click dblclick",function(e){u(e,t)}),r.on("mouseover",function(e){r.setIcon((0,p.getIcon)("hover")),u(e,t)}),r.on("mouseout",function(e){r.setIcon((0,p.getIcon)("graph"))})}function u(e,t){e.originalEvent.stopPropagation(),"click"===e.originalEvent.type&&(HandleTabChange("graphs-active"),l(t)),"graphs-active"===(0,v.GetActiveTab)()&&"mouseover"===e.originalEvent.type&&l(t)}function l(e){var t=document.getElementById("right-panel"),n=document.getElementById("right-panel-header");t.scrollTop=e.graphDiv.offsetTop+n.scrollHeight}function f(e,t,n){document.getElementById("graph-list").removeChild(t),e.removeLayer(n),(0,d.updateShareUrl)()}Object.defineProperty(t,"__esModule",{value:!0}),t.GetAllPointsOfInterest=r,t.AddPointOfInterestToTracker=a,t.SetupPointsOfInterest=o,t.AddMultiplePointsOfInterest=i,t.RemovePointOfInterestFromTracker=c,t.SetupPointOfInterestUI=s,t.RemovePointOfInterestUI=f;var p=n(28),d=n(25),h=n(24),v=n(30),y=[]},function(e,t,n){"use strict";function r(){d3.selectAll(".graph-type-btn").on("click",h),a(),B=d3.tip().attr("class","d3-tip").html(function(e){return e})}function a(){Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100!=0||e%400==0)},Date.prototype.getDOY=function(){var e=[0,31,59,90,120,151,181,212,243,273,304,334],t=this.getMonth(),n=this.getDate(),r=e[t]+n;return t>1&&this.isLeapYear()&&r++,r}}function o(e){e.on("click",c)}function i(e){return"hover"===e?z:$}function c(e){var t=this,n=e.latlng.lat,r=e.latlng.lng,a=(0,D.AddPointOfInterestToTracker)(n,r);(0,D.SetupPointOfInterestUI)(t,a,z,$),(0,F.updateShareUrl)()}function s(e,t,n){return L.marker([t,n],{icon:$})}function u(e,t,n,r){var a=l();t.appendChild(a),d3.select(a).on("click",function(){(0,D.RemovePointOfInterestFromTracker)(r),(0,D.RemovePointOfInterestUI)(e,t,n),(0,G.updatePanelDragOverlayHeight)(),(0,F.updateShareUrl)()})}function l(){var e=document.createElement("button");return e.className="remove-graph",e.innerText=String.fromCharCode("10005"),e.setAttribute("title","Remove graph"),e}function f(e,t,n){var r="https://fcav-ndvi.nemac.org/landdat_product.cgi?args="+t+","+e,a=new XMLHttpRequest;a.addEventListener("load",function(){var r=this.responseText;r=r.replace(/\[|\]|\'/g,"").split(", "),m(r,n,e,t),(0,G.updatePanelDragOverlayHeight)()}),a.open("GET",r),a.send()}function p(e){var t;for(t=0;t<e.length;t++)e[t]=e[t].split(",");return e}function d(e){var t,n,r,a,o={};for(o.keys=[],r=0;r<e.length;r++)t=e[r],n=t[0].substring(0,4),o.hasOwnProperty(n)||(o[n]=[],o.keys.push(n)),o[n].push(t);var i,c;for(o.medians=[],r=0;r<46;r++){for(i=[],a=r;a<e.length;a+=46)i.push(e[a][1]);c=i.sort()[Math.floor(i.length/2)],o.medians.push(c)}return o}function h(){var e=this.dataset.type,t=document.getElementsByClassName("graph-type-btn active")[0],n=t.dataset.type;e!==n&&(d3.select("#graph-list").classed("graph-"+n,!1).classed("graph-"+e,!0),d3.select(t).classed("active",!1),d3.select(this).classed("active",!0))}function v(e){var t=b(e.lat,3),n=b(e.lng,3),r=document.createElement("div"),a=y(e),o=document.createTextNode("Lat: "+t+", Lon: "+n);return r.appendChild(a),r.appendChild(o),r.classList.add("graph-elem"),f(e.lat,e.lng,r),r}function y(e){var t=document.createElement("button");return t.classList.add("btn","pan-to-marker-btn"),t.textContent="Show On Map",t.onclick=function(e,t){(0,U.GetMap)().panTo([e.lat,e.lng])}.bind(t,e),t}function m(e,t,n,r){e=p(e);var a=d(e);g(e,t,a.medians),w(a,t,n,r),k(a,t,n,r),document.getElementById("graph-list").appendChild(t)}function b(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function g(e,t,n){var r={top:30,right:20,bottom:30,left:25},a=580-r.left-r.right,o=270-r.top-r.bottom,i=d3.scaleTime().range([0,a]).domain([A(e[0][0]),A(e[e.length-1][0])]),c=d3.scaleLinear().range([o,0]).domain([0,100]),s=d3.axisBottom(i).ticks(16).tickFormat(function(e){return e.getFullYear()}),u=d3.axisLeft(c).ticks(6),l=d3.line().x(function(e){return i(A(e[0]))}).y(function(e){return c(e[1])}),f=d3.select(t).append("div").classed("timeseries-graph",!0),p=f.append("svg").attr("height",o+r.top+r.bottom).attr("viewBox",function(){return"0 0 "+(a+r.left+r.right)+" "+(o+r.top+r.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+r.left+","+r.top+")");p.call(B),E(e,l,p),p.append("g").attr("class","x axis").attr("transform","translate(0,"+o+")").call(s),p.append("g").attr("class","y axis").call(u),P(e,l,p,n)}function w(e,t,n,r){function a(e){return H[(e-15)/30]}var o={},i={top:30,right:20,bottom:30,left:25},c=500-i.left-i.right,s=270-i.top-i.bottom,u=e.medians,l=d3.scaleLinear().range([0,c]).domain([0,365]),f=d3.scaleLinear().range([s,0]).domain([0,100]),p=d3.axisBottom(l).ticks(11).tickValues([15,45,75,105,135,165,195,225,255,285,315,345]).tickFormat(a),d=d3.axisLeft(f).ticks(6),h=d3.line().x(function(e,t){return l(Array.isArray(e)?M(e[0]):8*t+3)}).y(function(e){return f(Array.isArray(e)?e[1]:e)}),v=d3.select(t).append("div").classed("overlapping-graph",!0),y=v.append("svg").attr("viewBox",function(){return"0 0 "+(c+i.left+i.right)+" "+(s+i.top+i.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+i.left+","+i.top+")");y.call(B),y.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(p),y.append("g").attr("class","y axis").call(d),o.medians={path:E(e.medians,h,y)},o[2015]={path:E(e[2015],h,y)},o.medians.points=P(e.medians,h,y,u),o[2015].points=P(e[2015],h,y,u);var m=v.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){T(m,t,"timeseries","2015",o,e,h,y,u,n,r)}),T(m,"medians","timeseries","medians",o,e,h,y,u,n,r)}function k(e,t,n,r){var a=Math.min(490,490)/2-30,o=e.medians,i=O(e),c=_(o,i[1][0]),s=d3.scaleLinear().domain([0,100]).range([0,a]),u=d3.radialLine().radius(function(e){return s(Array.isArray(e)?e[1]:e)}).angle(function(e,t){return((Array.isArray(e)?M(e[0]):8*t+3)-1)%365/365*(2*Math.PI)}),l=d3.select(t).append("div").classed("polar-graph",!0),f=l.append("svg").attr("viewBox",function(){return"0 0 490 490"}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate(245,245)");f.call(B);var p=f.append("g").attr("class","r axis").selectAll("g").data(s.ticks(5).slice(1)).enter().append("g");p.append("circle").attr("r",s),p.append("text").attr("y",function(e){return-s(e)-4}).attr("transform","rotate(15)").style("text-anchor","middle").text(function(e){return e});var d=f.append("g").attr("class","a axis").selectAll("g").data(d3.range(0,360,30)).enter().append("g").attr("transform",function(e){return"rotate("+(e-90)+")"});d.append("line").attr("x2",a),d.append("text").attr("x",a+6).attr("dy",".35em").style("text-anchor",function(e){return e<360&&e>180?"end":null}).attr("transform",function(e){return e<360&&e>180?"rotate(180 "+(a+6)+",0)":null}).text(function(e){return H[e/30]});var h=f.append("g").selectAll("g").data(c).enter().append("g").attr("transform",function(e){return"rotate("+(e.data[1][0]-90)+")"});h.append("line").attr("class","line").attr("x2",a),h.append("text").attr("x",a+6).attr("y",function(e){return(e.data[1][0]-1)%365/365*(2*Math.PI)}).attr("dy",".35em").style("text-anchor",function(e){var t=e.data[1][0];return t<360&&t>180?"end":null}).attr("transform",function(e){var t=e.data[1][0];return t<360&&t>180?"rotate(180 "+(a+6)+",0)":null}).text(function(e){return e.label});var v=i[1][0];S([[v,100],[(v+182.5)%365,100]],u,f).classed("growing-season-line","true"),S(i,u,f).classed("center-line","true"),f.selectAll("point").data([i[1]]).enter().append("circle").attr("class","point").attr("transform",function(e){return"translate("+u([e]).slice(1).slice(0,-1)+")"}).attr("r",2.5).attr("stroke","#000").attr("fill","#dd82d2").on("mouseover",function(e){B.show("Center: "+String(e[1]).substring(0,7)),this.setAttribute("r",5),this.setAttribute("stroke-width","2px"),d3.select(this).classed("active",!0)}).on("mouseout",function(e){B.hide(),this.setAttribute("r",2.5),this.setAttribute("stroke-width","1px"),d3.select(this).classed("active",!0)});var y={};y.medians={path:S(o,u,f)},y[2015]={path:S(e[2015],u,f)},y.medians.points=P(o,u,f,o),y[2015].points=P(e[2015],u,f,o);var m=l.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){var a=m.append("div");a.append("input").attr("type","checkbox").attr("id","polar-"+t+n.toString().replace(".","")+"-"+r.toString().replace(".","")).attr("value",t).property("checked","2015"===t).on("change",function(t){var n=this.value;this.checked?(y.hasOwnProperty(n)||(y[n]={}),y[n].path=S(e[n],u,f),y[n].points=P(e[n],u,f,o)):(y[n].path.remove(),y[n].points.remove())}),a.append("label").text(t).attr("for","polar-"+t+n.toString().replace(".","")+"-"+r.toString().replace(".",""))});var b=m.append("div");b.append("input").attr("type","checkbox").attr("id","polar-average-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")).attr("value","medians").property("checked",!0).on("change",function(t){var n=this.value;this.checked?(y.hasOwnProperty(n)||(y[n]={}),y[n].path=S(e[n],u,f),y[n].points=P(e[n],u,f,o)):(y[n].path.remove(),y[n].points.remove())}),b.append("label").text("Baseline").attr("for","polar-average-"+n.toString().replace(".","")+"-"+r.toString().replace(".",""));var g=m.append("div").classed("threshold-checkbox",!0);g.append("input").attr("type","checkbox").attr("id","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")).property("checked",!0).on("change",function(e){h.style("opacity",this.checked?1:0)}),g.append("label").text("Thresholds").attr("for","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".",""))}function O(e){var t,n,r,a,o,i=0,c=0;for(r=46,t=0;t<e.keys.length;t++)if(a=e[e.keys[t]],a.length===r){for(o=0,n=0;n<r/2;n++)o+=a[n][1]-a[n+23][1];o/=23,i+=o}else c++;i=Math.abs(i)/(e.keys.length-c);var s,u,l,f,p,d=1e6,h=0,v=e.medians;for(t=0;t<r/2;t++){for(u=0,l=0,p=0;p<r/2;p++)n=(t+p)%46,f=(n+23)%46,u+=parseInt(v[n],10),l+=parseInt(v[f],10);s=Math.abs(u-l),s<d&&(d=s,h=t)}var y=parseInt(v[h],10),m=parseInt(-v[h+23],10),b=Math.abs(i-y)-Math.abs(i-m);return Math.abs(-i-y)-Math.abs(-i-m)>b&&(h+=23),[[0,0],[8*h+3,i]]}function _(e,t){var n=Math.floor((t-3)/8);n>22&&(n-=23);var r,a,o,i=0;for(o=46,r=0;r<o;r++)a=(n+r)%o,i+=parseInt(e[a],10);var c,s,u,l=.15*i,f=.8*i,p=.85*i,d=!1,h=!1,v=!1;for(i=0,r=0;r<o;r++)if(a=(n+r)%o,i+=parseInt(e[a],10),!d&&i>l)c=a,d=!0;else if(!h&&i>f)s=a,h=!0;else if(!v&&i>p){u=a,v=!0;break}var y=[0,0];return[{label:"15%",data:[y,[8*c+3,100]]},{label:"80%",data:[y,[8*s+3,100]]},{label:"85%",data:[y,[8*u+3,100]]}]}function E(e,t,n){return n.append("path").attr("class","line").attr("d",t(e))}function S(e,t,n){return n.append("path").datum(e).attr("class","line").attr("d",t)}function P(e,t,n,r){return n.selectAll("point").data(e).enter().append("circle").attr("class","point").attr("transform",function(e,n){return"translate("+t([Array.isArray(e)?e:[8*n+3,e]]).slice(1).slice(0,-1)+")"}).attr("r",3).attr("stroke","#000").attr("fill",function(e,t){return C(Array.isArray(e)?e[1]:e,r[t%46],3)}).on("mouseover",x).on("mouseout",j)}function x(e){var t=Array.isArray(e)?I(e[0])+": "+e[1]:"Average: "+e;B.show(t),this.setAttribute("r",5),this.setAttribute("stroke-width","2px")}function j(e){B.hide(),this.setAttribute("r",3),this.setAttribute("stroke-width","1px")}function T(e,t,n,r,a,o,i,c,s,u,l){var f=e.append("div");f.append("input").attr("type","checkbox").attr("id",n+"-"+t+u.toString().replace(".","")+"-"+l.toString().replace(".","")).attr("value",t).property("checked",t===r).on("change",function(e){var t=this.value;this.checked?(a.hasOwnProperty(t)||(a[t]={}),a[t].path=E(o[t],i,c),a[t].points=P(o[t],i,c,s)):(a[t].path.remove(),a[t].points.remove())}),f.append("label").text(t).attr("for",n+"-"+t+u.toString().replace(".","")+"-"+l.toString().replace(".",""))}function C(e,t,n){var r=e-t,a=Math.abs(r)/t*100*n,o=100-a+"%";return r>0?"hsl(8, 79%, "+o+")":"hsl(219, 79%, "+o+")"}function A(e){e=e.toString();var t=e.substring(0,4),n=parseInt(e.substring(4,6),10)-1,r=e.substring(6,8);return new Date(t,n,r)}function M(e){return"string"==typeof e?(e=A(e),e.getDOY()):e}function I(e){return"Average"===e?e:(e=A(e),R(e.getMonth())+" "+N(e.getDate())+", "+e.getFullYear())}function R(e){switch(e){case 0:return"Jan.";case 1:return"Feb.";case 2:return"Mar.";case 3:return"Apr.";case 4:return"May";case 5:return"Jun.";case 6:return"Jul.";case 7:return"Aug.";case 8:return"Sep.";case 9:return"Oct.";case 10:return"Nov.";case 11:return"Dec."}}function N(e){var t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"}Object.defineProperty(t,"__esModule",{value:!0}),t.SetupGraphs=r,t.BindGraphEvents=o,t.getIcon=i,t.createMarker=s,t.createGraphRemover=u,t.createGraphDiv=v;var B,D=n(27),G=n(22),F=n(25),U=n(24),Y=L.Icon.extend({}),$=new Y({iconUrl:"imgs/blue_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),z=new Y({iconUrl:"imgs/orange_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),H={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"}},function(e,t,n){"use strict";function r(e,t){var n=e.opacity||1,r=f(n);t.select(".opacity-slider-handle").style("top",function(){return r+"px"})}function a(e,t){var n=void 0!==e.opacity?e.opacity:1,r=t.append("div").attr("class","opacity-slider-wrapper");r.append("div").attr("class","opacity-slider-indicator");o(r,e,t,n)}function o(e,t,n,a){var o=e.append("div").attr("class","opacity-slider-track-overlay");o.append("div").attr("class","opacity-slider-track");o.append("div").attr("class","opacity-slider-handle"),t.active&&r(t,n),i(e,t,a)}function i(e,t,n){var r=e.select(".opacity-slider-track-overlay");r.call(d3.drag().on("start drag",function(){var e=s(r);(0,l.updateLayerOpacity)(t,e),c(r,e)}).on("end",function(){(0,u.updateShareUrl)()}))}function c(e,t){e.select(".opacity-slider-handle").style("top",f(t)+"px")}function s(e){var t=d3.mouse(e.node())[1];return f.invert(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.setSliderInitialPos=r,t.makeOpacitySlider=a;var u=n(25),l=n(23),f=d3.scaleLinear().domain([1,0]).range([0,90]).clamp(!0)},function(e,t,n){"use strict";function r(){d3.selectAll(".panel-top-btn").on("click",o)}function a(){return d3.select("#right-panel").classed("graphs-active")?"graphs-active":"layers-active"}function o(){this.classList.contains("active")||i(this.getAttribute("data-active"))}function i(e){s(),c(e),(0,f.updateShareUrl)()}function c(e){d3.select(".panel-top-btn[data-active='"+e+"']").classed("active",!0),d3.selectAll("#map-wrapper, #right-panel").classed(e,!0),d3.select(".panel-section-wrapper[data-active='"+e+"']").classed("active",!0),u(),(0,l.updatePanelDragOverlayHeight)()}function s(){var e=d3.select(".panel-top-btn.active").attr("data-active");d3.selectAll("#map-wrapper, #right-panel").classed(e,!1),d3.selectAll(".panel-top-btn.active, .panel-section-wrapper.active").classed("active",!1)}function u(){var e=document.getElementById("right-panel").offsetWidth;document.getElementById("map-wrapper").style.paddingRight=e+"px"}Object.defineProperty(t,"__esModule",{value:!0}),t.BindTabEvents=r,t.GetActiveTab=a,t.HandleTabChange=i;var l=n(22),f=n(25)},function(e,t){"use strict";function n(e){if(e.image){var t=r(),n=a(e),i=e.link?o(e.link):null;i?(i.appendChild(n),t.appendChild(i)):t.appendChild(n);var c=document.getElementsByClassName(e.location)[0],s=c.firstChild;c.insertBefore(t,s)}}function r(){var e=document.createElement("div");return d3.select(e).classed("project-logo",!0),e}function a(e){var t=document.createElement("img");return t.setAttribute("src",e.image),e.label&&(t.setAttribute("alt",e.label),t.setAttribute("title",e.label)),t}function o(e){var t=document.createElement("a");return t.setAttribute("href",e),t.setAttribute("target","_blank"),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXhfYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAyNGNhZTZmNmI1MjlhMWUxNzI5MiIsIndlYnBhY2s6Ly8vLi9qcy9iYXNlLmpzIiwid2VicGFjazovLy8uL2pzL3BhcnNlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvbGVhZmxldENvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ub2RlbnQtcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovLy8uL34vbm9kZW50LXJ1bnRpbWUvem91c2FuLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L34vc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L25vZGVudC1ydW50aW1lL3RoZW5hYmxlRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL34vbG9kYXNoLmRlYm91bmNlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3NlYXJjaEVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvZG9tVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Jlc3VsdExpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2JpbmdQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvcHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2VzcmlQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL29wZW5TdHJlZXRNYXBQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9wYW5lbC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9sYXllci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tYXAuanMiLCJ3ZWJwYWNrOi8vLy4vanMvc2hhcmUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvYmFzZWxheWVyLmpzIiwid2VicGFjazovLy8uL2pzL3BvaS5qcyIsIndlYnBhY2s6Ly8vLi9qcy9ncmFwaC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9vcGFjaXR5U2xpZGVyLmpzIiwid2VicGFjazovLy8uL2pzL3RhYnMuanMiLCJ3ZWJwYWNrOi8vLy4vanMvbG9nby5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX3BhcnNlciIsIl9wYXJzZXIyIiwiX3NlYXJjaCIsIl9zZWFyY2gyIiwiX3BhbmVsIiwiX2Jhc2VsYXllciIsIl9ncmFwaCIsIl90YWJzIiwiX21hcCIsIl9zaGFyZSIsIl9sYXllciIsIl9sb2dvIiwiX2xvZ28yIiwiX3BvaSIsIkJhc2UiLCJjb25maWciLCJjYWxsYmFjayIsIlNldHVwR3JhcGhzIiwiQmluZFRhYkV2ZW50cyIsImRhdGEiLCJBZGRTaGFyZVNldHRpbmdzVG9Db25maWciLCJtYXAiLCJDcmVhdGVNYXAiLCJDcmVhdGVCYXNlTGF5ZXJzIiwiYmFzZWxheWVycyIsIkNyZWF0ZURlZmF1bHRMYXllcnMiLCJsYXllcnMiLCJTZXR1cFBhbmVsIiwibGF5b3V0IiwibG9nbyIsInRhYiIsIkhhbmRsZVRhYkNoYW5nZSIsIkJpbmRHcmFwaEV2ZW50cyIsIkJpbmRVcGRhdGVTaGFyZVVybCIsIlNldHVwUG9pbnRzT2ZJbnRlcmVzdCIsInBvaXMiLCJ1cGRhdGVTaGFyZVVybCIsIndpbmRvdyIsIlBhcnNlQ29uZmlnIiwiY29uZmlnRmlsZSIsIkdldENvbmZpZyIsInhtbGh0dHAiLCJYTUxIdHRwUmVxdWVzdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJKU09OIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZm9ybWF0TWFwIiwiZm9ybWF0TGF5ZXJzIiwib3BlbiIsInNlbmQiLCJsYXllcmdyb3VwIiwiaSIsImRlZmF1bHRNYXBzZXJ2ZXJVcmwiLCJtYXBzZXJ2ZXJVcmwiLCJwcm9wIiwiaGFzT3duUHJvcGVydHkiLCJsZW5ndGgiLCJzZXRNYXBzZXJ2ZXJVcmwiLCJsYXllciIsInVybCIsIkNyZWF0ZVNlYXJjaCIsInByb3ZpZGVyIiwiX2xlYWZsZXRHZW9zZWFyY2giLCJFc3JpUHJvdmlkZXIiLCJzZWFyY2hDb250cm9sIiwiR2VvU2VhcmNoQ29udHJvbCIsInNob3dNYXJrZXIiLCJhdXRvQ29tcGxldGUiLCJhZGRDb250cm9sIiwiTCIsIkRvbUV2ZW50Iiwib24iLCJzZWFyY2hFbGVtZW50IiwiZWxlbWVudHMiLCJjb250YWluZXIiLCJldiIsInN0b3BQcm9wYWdhdGlvbiIsIl9sZWFmbGV0Q29udHJvbCIsImVudW1lcmFibGUiLCJnZXQiLCJfc2VhcmNoRWxlbWVudCIsIl9iaW5nUHJvdmlkZXIiLCJfZXNyaVByb3ZpZGVyIiwiX2dvb2dsZVByb3ZpZGVyIiwiX29wZW5TdHJlZXRNYXBQcm92aWRlciIsIl9wcm92aWRlciIsIkxlYWZsZXRDb250cm9sIiwiQ29udHJvbCIsImV4dGVuZCIsIkVycm9yIiwiTENvbnRyb2wiLCJfbGVuIiwiYXJndW1lbnRzIiwib3B0aW9ucyIsIkFycmF5IiwiX2tleSIsIkZ1bmN0aW9uIiwicHJvdG90eXBlIiwiYmluZCIsImFwcGx5IiwiY29uY2F0IiwiX25vZGVudFJ1bnRpbWUiLCJfZXh0ZW5kcyIsImFzc2lnbiIsInRhcmdldCIsInNvdXJjZSIsImtleSIsIl9sb2Rhc2giLCJfbG9kYXNoMiIsIl9zZWFyY2hFbGVtZW50MiIsIl9yZXN1bHRMaXN0IiwiX3Jlc3VsdExpc3QyIiwiX2RvbVV0aWxzIiwiX2NvbnN0YW50cyIsImRlZmF1bHRPcHRpb25zIiwicG9zaXRpb24iLCJzdHlsZSIsInNob3dQb3B1cCIsIm1hcmtlciIsImljb24iLCJJY29uIiwiRGVmYXVsdCIsImRyYWdnYWJsZSIsIm1heE1hcmtlcnMiLCJyZXRhaW5ab29tTGV2ZWwiLCJhbmltYXRlWm9vbSIsInNlYXJjaExhYmVsIiwibm90Rm91bmRNZXNzYWdlIiwibWVzc2FnZUhpZGVEZWxheSIsInpvb21MZXZlbCIsImNsYXNzTmFtZXMiLCJidXR0b24iLCJtc2dib3giLCJmb3JtIiwiaW5wdXQiLCJhdXRvQ29tcGxldGVEZWxheSIsImluaXRpYWxpemUiLCJfdGhpcyIsInRoaXMiLCJtYXJrZXJzIiwiRmVhdHVyZUdyb3VwIiwiX29wdGlvbnMiLCJoYW5kbGVTdWJtaXQiLCJxdWVyeSIsIm9uU3VibWl0IiwiX3NlYXJjaEVsZW1lbnQkZWxlbWVuIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjcmVhdGVFbGVtZW50IiwidGl0bGUiLCJocmVmIiwib25DbGljayIsInJlc3VsdExpc3QiLCJoYW5kbGVDbGljayIsIl9yZWYiLCJyZXN1bHQiLCJsYWJlbCIsImFwcGVuZENoaWxkIiwiYXV0b1NlYXJjaCIsInNlbGVjdFJlc3VsdCIsImNsZWFyUmVzdWx0cyIsIm9uQWRkIiwiX29wdGlvbnMyIiwiYWRkVG8iLCJyb290IiwiZ2V0Q29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsIm9uUmVtb3ZlIiwicmVtb3ZlIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZWFyY2hFbGVtZW50JGVsZW1lbjIiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZUNsYXNzTmFtZSIsImFkZENsYXNzTmFtZSIsImZvY3VzIiwiQVJST1dfRE9XTl9LRVkiLCJBUlJPV19VUF9LRVkiLCJpbmNsdWRlcyIsImtleUNvZGUiLCJsaXN0IiwibWF4IiwiY291bnQiLCJuZXh0IiwiY29kZSIsInNlbGVjdGVkIiwiaWR4IiwiaXRlbSIsInNlbGVjdCIsIkVTQ0FQRV9LRVkiLCJjbGVhciIsIlByb21pc2UiLCIkcmV0dXJuIiwiJGVycm9yIiwicmVzdWx0cyIsIlNQRUNJQUxfS0VZUyIsInNlYXJjaCIsInRoZW4iLCIkYXdhaXRfMSIsInJlbmRlciIsIiRhc3luY2JpbmQiLCIkYXdhaXRfMiIsInNob3dSZXN1bHQiLCJrZXlzIiwiX2xheWVycyIsInJlbW92ZUxheWVyIiwiYWRkTWFya2VyIiwiY2VudGVyTWFwIiwiZmlyZUV2ZW50IiwibG9jYXRpb24iLCJfb3B0aW9uczMiLCJNYXJrZXIiLCJ5IiwieCIsImJpbmRQb3B1cCIsImFkZExheWVyIiwib3BlblBvcHVwIiwiX29wdGlvbnM0IiwicmVzdWx0Qm91bmRzIiwiTGF0TG5nQm91bmRzIiwiYm91bmRzIiwiaXNWYWxpZCIsImdldEJvdW5kcyIsImZpdEJvdW5kcyIsImFuaW1hdGUiLCJzZXRWaWV3IiwiZ2V0Q2VudGVyIiwiZ2V0Wm9vbSIsIl9vcHRpb25zNSIsIiRhc3luY3NwYXduIiwicHJvbWlzZVByb3ZpZGVyIiwic2VsZiIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZ2VuRiIsInJlc29sdmUiLCJyZWplY3QiLCJzdGVwIiwiZm4iLCJhcmciLCJnZW4iLCJkb25lIiwidiIsInRocm93Iiwic3JjIiwidG9TdHJpbmciLCJ0IiwiYXJncyIsIm1hdGNoIiwicmUiLCJteCIsImV4ZWMiLCJwdXNoIiwicmV2ZXJzZSIsImZvckVhY2giLCJzbGljZSIsImluZGV4Iiwic3Vic3RyIiwicmVwbGFjZSIsInpvdXNhbiIsInRoZW5hYmxlIiwiY2F0Y2hlciIsImJvdW5kVGhlbiIsInJlc29sdmVyIiwidHJhbXBvbGluZSIsInMiLCJ1IiwiYiIsInEiLCJ1bmRlZmluZWQiLCJwb3AiLCJyIiwiTGF6eVRoZW5hYmxlIiwiRWFnZXJUaGVuYWJsZSIsIlRoZW5hYmxlIiwiRWFnZXJUaGVuYWJsZUZhY3RvcnkiLCJleCIsInByb2Nlc3MiLCJzZXRJbW1lZGlhdGUiLCJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsInRpY2siLCJab3VzYW4iLCJmdW5jIiwibWUiLCJTVEFURV9GVUxGSUxMRUQiLCJ5cmV0IiwiU1RBVEVfUkVKRUNURUQiLCJyZWFzb24iLCJuIiwibmV4dFRpY2siLCJmIiwic2V0VGltZW91dCIsInNvb24iLCJjYWxsUXVldWUiLCJmcSIsImZxU3RhcnQiLCJidWZmZXJTaXplIiwic3BsaWNlIiwic3RhdGUiLCJUeXBlRXJyb3IiLCJmaXJzdCIsInJhIiwicnIiLCJsIiwiY2xpZW50cyIsIm9uRiIsIm9uUiIsImNsaWVudCIsImEiLCJ2YWwiLCJ6IiwidmVyc2lvbiIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImNhY2hlZFNldFRpbWVvdXQiLCJydW5DbGVhclRpbWVvdXQiLCJjYWNoZWRDbGVhclRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpbmluZyIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlIiwicXVldWVJbmRleCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwibGVuIiwicnVuIiwiSXRlbSIsImFycmF5Iiwibm9vcCIsImJyb3dzZXIiLCJlbnYiLCJhcmd2IiwidmVyc2lvbnMiLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJiaW5kaW5nIiwibmFtZSIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJUaW1lb3V0IiwiY2xlYXJGbiIsIl9pZCIsIl9jbGVhckZuIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiY2xvc2UiLCJ1bnJlZiIsInJlZiIsImVucm9sbCIsIm1zZWNzIiwiX2lkbGVUaW1lb3V0SWQiLCJfaWRsZVRpbWVvdXQiLCJ1bmVucm9sbCIsIl91bnJlZkFjdGl2ZSIsImFjdGl2ZSIsIl9vblRpbWVvdXQiLCJjbGVhckltbWVkaWF0ZSIsImdsb2JhbCIsInRhc2siLCJ0YXNrc0J5SGFuZGxlIiwibmV4dEhhbmRsZSIsInJlZ2lzdGVySW1tZWRpYXRlIiwiaGFuZGxlIiwicnVuSWZQcmVzZW50IiwiY3VycmVudGx5UnVubmluZ0FUYXNrIiwiZG9jIiwiZG9jdW1lbnQiLCJhdHRhY2hUbyIsImdldFByb3RvdHlwZU9mIiwicG9zdE1lc3NhZ2UiLCJpbXBvcnRTY3JpcHRzIiwicG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyIsIm9sZE9uTWVzc2FnZSIsIm9ubWVzc2FnZSIsIm1lc3NhZ2VQcmVmaXgiLCJNYXRoIiwicmFuZG9tIiwib25HbG9iYWxNZXNzYWdlIiwiaW5kZXhPZiIsImF0dGFjaEV2ZW50IiwiTWVzc2FnZUNoYW5uZWwiLCJjaGFubmVsIiwicG9ydDEiLCJwb3J0MiIsImh0bWwiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JpcHQiLCJyZW1vdmVDaGlsZCIsImlzVGhlbmFibGUiLCJyZXNvbHV0aW9uIiwiaG93IiwiQ2hhaW5lZCIsIl91bmNoYWluZWQiLCJ0aGVuQ2hhaW4iLCJyZXMiLCJyZWoiLCJjaGFpbiIsIl9yZXNvbHZlciIsImRlYm91bmNlIiwid2FpdCIsImludm9rZUZ1bmMiLCJ0aW1lIiwibGFzdEFyZ3MiLCJ0aGlzQXJnIiwibGFzdFRoaXMiLCJsYXN0SW52b2tlVGltZSIsImxlYWRpbmdFZGdlIiwidGltZXJJZCIsInRpbWVyRXhwaXJlZCIsImxlYWRpbmciLCJyZW1haW5pbmdXYWl0IiwidGltZVNpbmNlTGFzdENhbGwiLCJsYXN0Q2FsbFRpbWUiLCJ0aW1lU2luY2VMYXN0SW52b2tlIiwibWF4aW5nIiwibmF0aXZlTWluIiwibWF4V2FpdCIsInNob3VsZEludm9rZSIsIm5vdyIsInRyYWlsaW5nRWRnZSIsInRyYWlsaW5nIiwiY2FuY2VsIiwiZmx1c2giLCJkZWJvdW5jZWQiLCJpc0ludm9raW5nIiwiRlVOQ19FUlJPUl9URVhUIiwidG9OdW1iZXIiLCJpc09iamVjdCIsIm5hdGl2ZU1heCIsInR5cGUiLCJpc09iamVjdExpa2UiLCJpc1N5bWJvbCIsIm9iamVjdFRvU3RyaW5nIiwic3ltYm9sVGFnIiwiTkFOIiwib3RoZXIiLCJ2YWx1ZU9mIiwicmVUcmltIiwiaXNCaW5hcnkiLCJyZUlzQmluYXJ5IiwidGVzdCIsInJlSXNPY3RhbCIsImZyZWVQYXJzZUludCIsInJlSXNCYWRIZXgiLCJwYXJzZUludCIsImZyZWVHbG9iYWwiLCJmcmVlU2VsZiIsIm9iamVjdFByb3RvIiwibWluIiwiRGF0ZSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiU2VhcmNoRWxlbWVudCIsIl9yZWYkaGFuZGxlU3VibWl0IiwiX3JlZiRzZWFyY2hMYWJlbCIsIl9yZWYkY2xhc3NOYW1lcyIsImpvaW4iLCJwbGFjZWhvbGRlciIsIm9uSW5wdXQiLCJvbktleVVwIiwib25LZXlQcmVzcyIsIm9uRm9jdXMiLCJvbkJsdXIiLCJfZWxlbWVudHMiLCJoYXNFcnJvciIsIl9lbGVtZW50czIiLCJib2R5IiwiYmx1ciIsIkVOVEVSX0tFWSIsImVsZW1lbnQiLCJwYXJlbnQiLCJlbCIsImNsYXNzTmFtZSIsImNyZWF0ZVNjcmlwdEVsZW1lbnQiLCJjYiIsInNldEF0dHJpYnV0ZSIsImpzb24iLCJhZGQiLCJBUlJPV19MRUZUX0tFWSIsIkFSUk9XX1JJR0hUX0tFWSIsImN4IiwiY2xhc3NuYW1lcyIsInRyaW0iLCJSZXN1bHRMaXN0IiwiX3JlZiRoYW5kbGVDbGljayIsIl9pbml0aWFsaXNlUHJvcHMiLCJyZXN1bHRJdGVtIiwiY2hpbGQiLCJjbG9uZU5vZGUiLCJpbm5lckhUTUwiLCJmcm9tIiwiY2hpbGRyZW4iLCJsYXN0Q2hpbGQiLCJfcmVmMiIsInBhcmVudE5vZGUiLCJoYXNBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGUiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfcHJvdmlkZXIyIiwiUHJvdmlkZXIiLCJfQmFzZVByb3ZpZGVyIiwicHJvdG9jb2wiLCJqc29ucCIsInBhcmFtcyIsImdldFBhcmFtU3RyaW5nIiwicmVzb3VyY2VTZXRzIiwicmVzb3VyY2VzIiwicG9pbnQiLCJjb29yZGluYXRlcyIsImFkZHJlc3MiLCJmb3JtYXR0ZWRBZGRyZXNzIiwiYmJveCIsInJhdyIsIl9yZWYzIiwiZW5kcG9pbnQiLCJlbmNvZGVVUklDb21wb25lbnQiLCJyZXF1ZXN0IiwiZmV0Y2giLCJ0ZXh0IiwibG9jYXRpb25zIiwiZmVhdHVyZSIsImdlb21ldHJ5IiwiZXh0ZW50IiwieW1pbiIsInhtaW4iLCJ5bWF4IiwieG1heCIsInBhcmFtU3RyaW5nIiwibG5nIiwibGF0IiwiZm9ybWF0dGVkX2FkZHJlc3MiLCJ2aWV3cG9ydCIsInNvdXRod2VzdCIsIm5vcnRoZWFzdCIsImZvcm1hdCIsImxvbiIsImRpc3BsYXlfbmFtZSIsInBhcnNlRmxvYXQiLCJib3VuZGluZ2JveCIsIm1ha2VMYXllckVsZW1zIiwibWFrZUxheWVyR3JvdXBzIiwibWFrZVBhbmVsRHJhZ2dhYmxlIiwic2V0UGFuZWxTY3JvbGxIYW5kbGVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJvbnNjcm9sbCIsInVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQiLCJkMyIsImRyYWciLCJwYW5lbERyYWdFdmVudEhhbmRsZXIiLCJ1cGRhdGVQYW5lbFdpZHRoIiwibmV3SGVpZ2h0IiwicGFuZWwiLCJwYW5lbE9mZnNldEhlaWdodCIsInByb3BlcnR5IiwicGFuZWxEcmFnT3ZlcmxheSIsImhlYWRlciIsImNsYXNzZWQiLCJncmFwaExpc3QiLCJzY3JvbGxIZWlnaHQiLCJsYXllckxpc3QiLCJoZWlnaHQiLCJwYW5lbE1pbldpZHRoIiwicGFuZWxDbGllbnRXaWR0aCIsIndyYXBwZXIiLCJ3cmFwcGVyV2lkdGgiLCJjbGllbnRXaWR0aCIsIm1hcFdyYXBwZXIiLCJtb3VzZVgiLCJzb3VyY2VFdmVudCIsInhEZWx0YSIsIm5ld1BhbmVsV2lkdGgiLCJwYWRkaW5nUmlnaHQiLCJzZWxlY3RBbGwiLCJlbnRlciIsImFwcGVuZCIsImF0dHIiLCJsYXllckdyb3VwIiwiZWFjaCIsImxheWVyR3JvdXBzIiwibGF5ZXJEaXYiLCJtYWtlQ2hlY2tib3giLCJtYWtlTGFiZWwiLCJtYWtlRGVzY3JpcHRpb24iLCJtYWtlTGF5ZXJUb29scyIsInRvZ2dsZUxheWVyIiwiX29wYWNpdHlTbGlkZXIiLCJzZXRTbGlkZXJJbml0aWFsUG9zIiwiaW5mbyIsImxheWVyVG9vbHNEaXYiLCJtYWtlT3BhY2l0eVNsaWRlciIsIm1ha2VMZWdlbmQiLCJsYXllclRvb2xzV3JhcHBlciIsImxlZ2VuZCIsIkdldEN1cnJlbnRMYXllcnMiLCJfY3VycmVudF9sYXllcnMiLCJkZWZhdWx0TGF5ZXJzIiwiaiIsImRlZmF1bHRMYXllciIsImZvdW5kTGF5ZXIiLCJlbmFibGVMYXllciIsImRpc2FibGVMYXllciIsIkdldE1hcCIsIm1hcExheWVyIiwibWFrZVdtc1RpbGVMYXllciIsImFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIiLCJoYXNMYXllciIsInJlbW92ZUxheWVyRnJvbUludGVybmFsVHJhY2tlciIsImxvYyIsInVwZGF0ZUxheWVyT3BhY2l0eSIsIm5ld09wYWNpdHkiLCJvcGFjaXR5Iiwic2V0T3BhY2l0eSIsInRpbGVMYXllciIsIndtcyIsInRyYW5zcGFyZW50IiwiY3JzIiwiQ1JTIiwiRVBTRzQzMjYiLCJ0aWxlU2l6ZSIsIm1hcENvbmZpZyIsInNjcm9sbFdoZWVsWm9vbSIsImluaXRpYWxDZW50ZXIiLCJjZW50ZXIiLCJpbml0aWFsWm9vbSIsInpvb20iLCJjb250cm9sIiwiYXR0cmlidXRpb24iLCJzZXRTaGFyZVVybCIsIm1ha2VTaGFyZVVybCIsIm1ha2VDZW50ZXJTdHJpbmciLCJtYWtlWm9vbVN0cmluZyIsIm1ha2VMYXllclN0cmluZyIsIm1ha2VCYXNlTGF5ZXJTdHJpbmciLCJtYWtlUG9pbnRzT2ZJbnRlcmVzdFN0cmluZyIsIm1ha2VBY3RpdmVUYWJTdHJpbmciLCJzaGFyZSIsInBhcnNlU2hhcmVVcmwiLCJhZGRMYXllclNldHRpbmdzVG9Db25maWciLCJhZGRCYXNlTGF5ZXJTZXR0aW5nc1RvQ29uZmlnIiwiYWRkUG9pbnRzT2ZJbnRlcmVzdFRvQ29uZmlnIiwiZmlsdGVyIiwiaGlzdG9yeSIsInJlcGxhY2VTdGF0ZSIsIm9wYWNpdHlWYWxzIiwiY3VycmVudExheWVycyIsImVhY2hMYXllciIsImN1cnJlbnRMYXllciIsIkJBU0VfTEFZRVJfVFlQRSIsIkdldEFsbFBvaW50c09mSW50ZXJlc3QiLCJwb2lTdHJpbmciLCJwb2kiLCJnZXRQYXJhbXNBcnJheSIsIm1ha2VLZXllZFBhcmFtc09iamVjdCIsImZvcm1hdFBhcmFtcyIsInN1YnN0cmluZyIsInVubWFuZ2xlUGFyYW1TdHJpbmciLCJzcGxpdCIsInBhcmFtc0FyciIsInBhcmFtUGFpciIsInBhcnNlZFBhcmFtcyIsImZvcm1hdENlbnRlclBhcmFtIiwiZm9ybWF0TGF5ZXJQYXJhbSIsImZvcm1hdEJhc2VMYXllclBhcmFtIiwiZm9ybWF0UG9pbnRzT2ZJbnRlcmVzdFBhcmFtIiwibGF5ZXJJZCIsImZvcm1hdHRlZExheWVycyIsImVuYWJsZWRMYXllcnMiLCJzdHIiLCJzaGFyZUxheWVyU2V0dGluZ3MiLCJlbmFibGVkTGF5ZXIiLCJzaGFyZUJhc2VMYXllclNldHRpbmdzIiwiYmFzZWxheWVyIiwibGF5ZXJDb25maWciLCJfYmFzZWxheWVycyIsImJhc2VMYXllciIsImNyZWF0ZUJhc2VMYXllciIsImNyZWF0ZUJhc2VMYXllclVJIiwiYmFzZVVJIiwiYmFzZVdyYXBwZXIiLCJiYXNlSW1nIiwiYmFzZUxhYmVsIiwiaW1hZ2UiLCJ0ZXh0Q29udGVudCIsImhhbmRsZUJhc2VDbGljayIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJsYXllcmlkIiwidG9nZ2xlQWN0aXZlQmFzZVVJIiwicmVtb3ZlQ3VycmVudEJhc2VMYXllciIsImFkZE5ld0Jhc2VMYXllclRvTWFwIiwiYmFzZVVJRWxlbSIsImJyaW5nVG9CYWNrIiwibWFrZUJhc2VMYXllck9wdGlvbnMiLCJzdWJkb21haW5zIiwiX3BvaW50c19vZl9pbnRlcmVzdCIsIkFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlciIsIm5ld1BvaXMiLCJBZGRNdWx0aXBsZVBvaW50c09mSW50ZXJlc3QiLCJTZXR1cFBvaW50T2ZJbnRlcmVzdFVJIiwiUmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXIiLCJwb2lUb1JlbW92ZSIsImlzIiwiZGl2IiwiY3JlYXRlR3JhcGhEaXYiLCJjcmVhdGVNYXJrZXIiLCJncmFwaERpdiIsImNyZWF0ZUdyYXBoUmVtb3ZlciIsInNldEljb24iLCJnZXRJY29uIiwiaGFuZGxlTWFya2VyTW91c2VFdmVudCIsIm9yaWdpbmFsRXZlbnQiLCJzY3JvbGxUb1BvaW50T2ZJbnRlcmVzdEdyYXBoIiwiR2V0QWN0aXZlVGFiIiwicmlnaHRQYW5lbCIsInNjcm9sbFRvcCIsIm9mZnNldFRvcCIsIlJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJIiwiaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2siLCJleHRlbmREYXRlTW9kdWxlIiwidGlwIiwiZCIsImlzTGVhcFllYXIiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJnZXRET1kiLCJkYXlDb3VudCIsIm1uIiwiZ2V0TW9udGgiLCJkbiIsImdldERhdGUiLCJkYXlPZlllYXIiLCJoYW5kbGVNYXBDbGljayIsImhvdmVySWNvbiIsImdyYXBoSWNvbiIsImxhdGxuZyIsImVsZW0iLCJjcmVhdGVHcmFwaFJlbW92ZXJFbGVtIiwiaW5uZXJUZXh0IiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiZ2V0RGF0YSIsIm9SZXEiLCJyZXNwb25zZSIsImRyYXdHcmFwaCIsInNwbGl0RGF0YSIsInJlcHJvY2Vzc0RhdGEiLCJvcmlnZGF0YSIsImRhdGFGb3JNZWRpYW5zIiwibWVkaWFuIiwic29ydCIsImZsb29yIiwiZGF0YXNldCIsImFjdGl2ZUVsZW0iLCJhY3RpdmVUeXBlIiwibGF0U2hvcnQiLCJyb3VuZEZsb2F0IiwibG5nU2hvcnQiLCJ6b29tVG9NYXJrZXJCdXR0b24iLCJtYWtlWm9vbVRvTWFwTWFya2VyQnV0dG9uIiwiY29udGVudCIsImNyZWF0ZVRleHROb2RlIiwib25jbGljayIsInBhblRvIiwicmVwcm9jZXNzZWREYXRhIiwibWFrZVVwRG93bkxpbmVHcmFwaCIsIm1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMiLCJkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMiLCJudW1iZXIiLCJkZWNpbWFsUGxhY2VzIiwicm91bmQiLCJwb3ciLCJhdmVyYWdlcyIsIm1hcmdpbiIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCIsIndpZHRoIiwic2NhbGVUaW1lIiwicmFuZ2UiLCJkb21haW4iLCJwYXJzZURhdGUiLCJzY2FsZUxpbmVhciIsInhBeGlzIiwiYXhpc0JvdHRvbSIsInRpY2tzIiwidGlja0Zvcm1hdCIsInlBeGlzIiwiYXhpc0xlZnQiLCJ2YWx1ZWxpbmUiLCJsaW5lIiwic3ZnIiwiZHJhd0xpbmVhclBhdGgiLCJkcmF3TGluZWFyUG9pbnRzIiwiZm9ybWF0TW9udGhUaWNrIiwiTU9OVEhfTEFCRUxTIiwiY2hhcnRzIiwibWVkaWFucyIsInRpY2tWYWx1ZXMiLCJpc0FycmF5IiwicGFyc2VKdWxpYW5EYXkiLCJwYXRoIiwiaW5wdXR3cmFwcGVyIiwiY3JlYXRlQ2hlY2tib3giLCJyYWRpdXMiLCJmaW5kUG9sYXJDZW50ZXIiLCJ0aHJlc2hvbGRzIiwiZmluZFBvbGFyVGhyZXNob2xkcyIsInJhZGlhbExpbmUiLCJhbmdsZSIsIlBJIiwiZ3IiLCJnYSIsInRocmVzaG9sZEVsZW0iLCJkYXkiLCJjZW50ZXJEYXkiLCJkcmF3UG9sYXJQYXRoIiwic2hvdyIsImhpZGUiLCJwb2ludHMiLCJjaGVja2JveFdyYXBwZXIiLCJuZXdZZWFyIiwiY2hlY2tlZCIsInRocmVzaG9sZENoZWNrYm94IiwiYXJyIiwic3VtIiwidG90YWxTdW0iLCJpbmNvbXBsZXRlWWVhcnMiLCJhYnMiLCJjaGVja0RpZmYiLCJsZWZ0QXJlYSIsInJpZ2h0QXJlYSIsImsiLCJjb3VudGVyIiwiYXJlYURpZmYiLCJhcmVhSW5kZXgiLCJhdmdzIiwiZmlyc3RSYWRpdXMiLCJzZWNvbmRSYWRpdXMiLCJmaXJzdERpZmYiLCJzdGFydERheSIsInN0YXJ0SW5kZXgiLCJmaWZ0ZWVuSW5kZXgiLCJlaWdodHlJbmRleCIsImVpZ2h0eWZpdmVJbmRleCIsImZpZnRlZW5UaHJlc2hvbGQiLCJlaWdodHlUaHJlc2hvbGQiLCJlaWdodHlmaXZlVGhyZXNob2xkIiwiZmlmdGVlbkluZGV4Rm91bmQiLCJlaWdodHlJbmRleEZvdW5kIiwiZWlnaHR5Zml2ZUluZGV4Rm91bmQiLCJjaXJjbGVDZW50ZXIiLCJkYXR1bSIsImNvbXB1dGVDb2xvciIsImhhbmRsZVBvaW50TW91c2VvdmVyIiwiaGFuZGxlUG9pbnRNb3VzZW91dCIsInRpcFN0cmluZyIsImZvcm1hdERhdGUiLCJzY2FsZSIsImRpZmYiLCJwZXJjZW50X2RpZmYiLCJsaWdodG5lc3MiLCJkYXRlIiwibW9udGgiLCJmb3JtYXRNb250aCIsIm9yZGluYWxfc3VmZml4X29mIiwiYmFzZUljb24iLCJpY29uVXJsIiwic2hhZG93VXJsIiwiaWNvblNpemUiLCJpY29uQW5jaG9yIiwicG9wdXBBbmNob3IiLCJzaGFkb3dTaXplIiwiMCIsIjEiLCIyIiwiMyIsIjQiLCI1IiwiNiIsIjciLCI4IiwiOSIsIjEwIiwiMTEiLCJsYXllck9wYWNpdHkiLCJoYW5kbGVPZmZzZXQiLCJvcGFjaXR5U2NhbGUiLCJtYWtlU2xpZGVyVHJhY2siLCJvdmVybGF5Iiwic2V0RHJhZ0V2ZW50TGlzdGVuZXIiLCJjYWxjT3BhY2l0eUZyb21Nb3VzZVBvcyIsImFkanVzdFNsaWRlckhhbmRsZSIsInlQb3MiLCJtb3VzZSIsIm5vZGUiLCJpbnZlcnQiLCJjbGFtcCIsImhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrIiwibmV3Q2xhc3MiLCJkaXNhYmxlQWN0aXZlVGFiIiwiZW5hYmxlVGFiIiwidG9nZ2xlTWFwUGFkZGluZyIsImFjdGl2ZUNsYXNzIiwib2Zmc2V0V2lkdGgiLCJDcmVhdGVMb2dvIiwibG9nb2RhdGEiLCJsb2dvV3JhcHBlciIsImNyZWF0ZUxvZ29XcmFwcGVyIiwibG9nb0ltYWdlIiwiY3JlYXRlTG9nb0ltYWdlIiwibG9nb0xpbmsiLCJsaW5rIiwiY3JlYXRlTG9nb0xpbmsiLCJpbnNlcnRFbGVtZW50IiwiZXhpc3RpbmdDaGlsZCIsImZpcnN0Q2hpbGQiLCJpbnNlcnRCZWZvcmUiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxP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QWVQLEVBQVNNLE1BRXZELElBQUlELEloQ28ySUNBLEVnQ24ySVE1d0IsWUFDVDB3QixHaENtMklDRixFZ0NuMklXeHdCLFlBQ2Y0d0IsSWhDbzJJSUosRWdDbjJJV3h3QixZQUNmMHdCLEVoQ3EySUEsSWdDbjJJR0ssR0FBZ0JqakIsU0FBUzRVLHVCQUF1QjZOLEVBQVNsdEIsVUFDN0QsR0FBSTJ0QixFQUFnQkQsRUFDcEJFLFVoQ20ySUNGLEdnQ24ySWFHLGFBQWFWLEVBQzlCUSxJQUVELFFBQVNQLEtoQ28ySUosR2dDbjJJR0QsR0FBYzFpQixTQUFTdk8sY0FDM0IsTWhDbzJJQyxPQURBeWEsSWdDbjJJRWhZLE9BQU93dUIsR0FBYTlWLFFBQVEsZ0JBQy9CLEdBQ0g4VixFQUVELFFBQVNHLEdBQWlCSixHaENvMklyQixHZ0NuMklHRyxHQUFZNWlCLFNBQVN2TyxjQUN6QixNaEN3MklDLE9BTEFteEIsR2dDbjJJU3hiLGFBQWEsTUFBT3FiLEVBQzlCaE8sT0FBSWdPLEVBQVN4d0IsUWhDbzJJUjJ3QixFZ0NuMklTeGIsYUFBYSxNQUFPcWIsRUFDOUJ4d0IsT2hDbTJJQzJ3QixFZ0NuMklTeGIsYUFBYSxRQUFTcWIsRUFDbkN4d0IsUUFFSjJ3QixFQUVELFFBQVNJLEdBQWdCRCxHaENvMklwQixHZ0NuMklHRCxHQUFXOWlCLFNBQVN2TyxjQUN4QixJaENxMklDLE9BRkFxeEIsR2dDbjJJUTFiLGFBQWEsT0FDdEIyYixHaENtMklDRCxFZ0NuMklRMWIsYUFBYSxTQUN0QixVQUNIMGIsRWhDOHlJQWo3QixPQUFPQyxlQUFlYixFQUFTLGNBQzNCYyxPQUFPLElBRVhkLEVBQVFXLFFBQVU0NkIsR0FzRGIsU0FBU3Q3QixFQUFRRCIsImZpbGUiOiJpbmRleF9idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfcGFyc2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBfcGFyc2VyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BhcnNlcik7XG5cdFxuXHR2YXIgX3NlYXJjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX3NlYXJjaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2gpO1xuXHRcblx0dmFyIF9wYW5lbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0dmFyIF9iYXNlbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0XG5cdHZhciBfZ3JhcGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0XG5cdHZhciBfdGFicyA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciBfbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0XG5cdHZhciBfbG9nbyA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXHRcblx0dmFyIF9sb2dvMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvZ28pO1xuXHRcblx0dmFyIF9wb2kgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIgY3NzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdFxuXHQvLyBEb2VzIG5vdCByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcblx0dmFyIEJhc2UgPSBmdW5jdGlvbiBCYXNlKGNvbmZpZykge1xuXHQgICAgKDAsIF9wYXJzZXIyLmRlZmF1bHQpKGNvbmZpZywgY2FsbGJhY2spO1xuXHQgICAgKDAsIF9ncmFwaC5TZXR1cEdyYXBocykoKTtcblx0ICAgICgwLCBfdGFicy5CaW5kVGFiRXZlbnRzKSgpO1xuXHR9O1xuXHRcblx0Ly8gRG9lcyByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcblx0dmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2soZGF0YSkge1xuXHQgICAgKDAsIF9zaGFyZS5BZGRTaGFyZVNldHRpbmdzVG9Db25maWcpKGRhdGEpO1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkNyZWF0ZU1hcCkoZGF0YS5tYXApO1xuXHQgICAgKDAsIF9iYXNlbGF5ZXIuQ3JlYXRlQmFzZUxheWVycykobWFwLCBkYXRhLmJhc2VsYXllcnMpO1xuXHQgICAgKDAsIF9sYXllci5DcmVhdGVEZWZhdWx0TGF5ZXJzKShkYXRhLmxheWVycywgZGF0YVtcImFjdGl2ZS1sYXllcnNcIl0pO1xuXHQgICAgKDAsIF9wYW5lbC5TZXR1cFBhbmVsKShkYXRhLmxheWVycywgZGF0YS5sYXlvdXQpO1xuXHQgICAgKDAsIF9zZWFyY2gyLmRlZmF1bHQpKG1hcCk7XG5cdCAgICAoMCwgX2xvZ28yLmRlZmF1bHQpKGRhdGEubG9nbyk7XG5cdCAgICBpZiAoZGF0YS50YWIpICgwLCBfdGFicy5IYW5kbGVUYWJDaGFuZ2UpKGRhdGEudGFiKTtcblx0ICAgICgwLCBfZ3JhcGguQmluZEdyYXBoRXZlbnRzKShtYXApO1xuXHQgICAgKDAsIF9zaGFyZS5CaW5kVXBkYXRlU2hhcmVVcmwpKG1hcCk7XG5cdCAgICAoMCwgX3BvaS5TZXR1cFBvaW50c09mSW50ZXJlc3QpKG1hcCwgZGF0YS5wb2lzKTtcblx0ICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH07XG5cdFxuXHR3aW5kb3cuQmFzZSA9IEJhc2U7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7IEJhc2U6IEJhc2UgfTtcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUGFyc2VDb25maWc7XG5cdC8qKlxyXG5cdCAqIFBhcnNlcyBhIGNvbmZpZyBmaWxlLiBTaW5jZSB0aGUgcHJvY2VzcyB0byBnZXQgZXh0ZXJuYWwgZmlsZXNcclxuXHQgKiB1c2VzIEFKQVggeW91IG5lZWQgdG8gcGFzcyBhIGNhbGxiYWNrIHRvIGhhbmRsZSB0aGUgbmV4dCBzdGVwc1xyXG5cdCAqIG9mIHVzaW5nIHRoZSBjb25maWcgZmlsZSwgc2luY2Ugd2UgZG8gbm90IGtub3cgaG93IGxvbmcgaXRcclxuXHQgKiB3aWxsIHRha2UgdG8gZ3JhYiB0aGUgZmlsZS5cclxuXHQgKi9cblx0ZnVuY3Rpb24gUGFyc2VDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcblx0ICAgIEdldENvbmZpZyhjb25maWdGaWxlLCBjYWxsYmFjayk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEdldENvbmZpZyhjb25maWdGaWxlLCBjYWxsYmFjaykge1xuXHQgICAgdmFyIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0ICAgIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh4bWxodHRwLnJlYWR5U3RhdGUgPT0gNCkge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhtbGh0dHAucmVzcG9uc2VUZXh0KTtcblx0ICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SOiBNYWxmb3JtZWQgSlNPTiBpbiBjb25maWcgZmlsZS5cIik7XG5cdCAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGZvcm1hdE1hcChkYXRhKTtcblx0ICAgICAgICAgICAgZm9ybWF0TGF5ZXJzKGRhdGEpO1xuXHQgICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHhtbGh0dHAub3BlbihcIkdFVFwiLCBjb25maWdGaWxlLCB0cnVlKTtcblx0ICAgIHhtbGh0dHAuc2VuZCgpO1xuXHQgICAgY29uc29sZS5sb2coXCJoaVwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0TWFwKGRhdGEpIHtcblx0ICAgIGlmICghZGF0YS5tYXApIGRhdGEubWFwID0ge307XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdExheWVycyhkYXRhKSB7XG5cdCAgICB2YXIgbGF5ZXJzID0gZGF0YS5sYXllcnM7XG5cdCAgICB2YXIgZGVmYXVsdE1hcHNlcnZlclVybCA9IGRhdGEubWFwc2VydmVyVXJsO1xuXHQgICAgdmFyIGRlZmF1bHRFbmFibGVkTGF5ZXJzID0gZGF0YVtcImFjdGl2ZS1sYXllcnNcIl07XG5cdCAgICB2YXIgbGF5ZXJncm91cDtcblx0ICAgIHZhciBpO1xuXHRcblx0ICAgIGZvciAodmFyIHByb3AgaW4gbGF5ZXJzKSB7XG5cdCAgICAgICAgaWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcblx0ICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuXHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsYXllcmdyb3VwLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIHNldE1hcHNlcnZlclVybChsYXllcmdyb3VwW2ldLCBkZWZhdWx0TWFwc2VydmVyVXJsKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldE1hcHNlcnZlclVybChsYXllciwgdXJsKSB7XG5cdCAgICBsYXllci51cmwgPSBsYXllci51cmwgfHwgdXJsO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENyZWF0ZVNlYXJjaDtcblx0XG5cdHZhciBfbGVhZmxldEdlb3NlYXJjaCA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVTZWFyY2gobWFwKSB7XG5cdCAgICB2YXIgcHJvdmlkZXIgPSBuZXcgX2xlYWZsZXRHZW9zZWFyY2guRXNyaVByb3ZpZGVyKCk7XG5cdFxuXHQgICAgdmFyIHNlYXJjaENvbnRyb2wgPSBuZXcgX2xlYWZsZXRHZW9zZWFyY2guR2VvU2VhcmNoQ29udHJvbCh7XG5cdCAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLFxuXHQgICAgICAgIHNob3dNYXJrZXI6IGZhbHNlLFxuXHQgICAgICAgIGF1dG9Db21wbGV0ZTogZmFsc2Vcblx0ICAgIH0pO1xuXHRcblx0ICAgIG1hcC5hZGRDb250cm9sKHNlYXJjaENvbnRyb2wpO1xuXHRcblx0ICAgIEwuRG9tRXZlbnQub24oc2VhcmNoQ29udHJvbC5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmNvbnRhaW5lciwgXCJjbGlja1wiLCBmdW5jdGlvbiAoZXYpIHtcblx0ICAgICAgICBMLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbihldik7XG5cdCAgICB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2xlYWZsZXRDb250cm9sID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnR2VvU2VhcmNoQ29udHJvbCcsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xlYWZsZXRDb250cm9sKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX3NlYXJjaEVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnU2VhcmNoRWxlbWVudCcsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaEVsZW1lbnQpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfYmluZ1Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0JpbmdQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JpbmdQcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9lc3JpUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnRXNyaVByb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXNyaVByb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX2dvb2dsZVByb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0dvb2dsZVByb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ29vZ2xlUHJvdmlkZXIpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfb3BlblN0cmVldE1hcFByb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ09wZW5TdHJlZXRNYXBQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29wZW5TdHJlZXRNYXBQcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9wcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cbi8qKiovIH0sXG4vKiA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcblx0ICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG5cdCAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG5cdCAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1yZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gTGVhZmxldENvbnRyb2w7XG5cdFxuXHR2YXIgX2xvZGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHRcblx0dmFyIF9sb2Rhc2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbG9kYXNoKTtcblx0XG5cdHZhciBfc2VhcmNoRWxlbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0dmFyIF9zZWFyY2hFbGVtZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaEVsZW1lbnQpO1xuXHRcblx0dmFyIF9yZXN1bHRMaXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdFxuXHR2YXIgX3Jlc3VsdExpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVzdWx0TGlzdCk7XG5cdFxuXHR2YXIgX2RvbVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHR2YXIgX2NvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0dmFyIGRlZmF1bHRPcHRpb25zID0gZnVuY3Rpb24gZGVmYXVsdE9wdGlvbnMoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHBvc2l0aW9uOiAndG9wbGVmdCcsXG5cdCAgICBzdHlsZTogJ2J1dHRvbicsXG5cdCAgICBzaG93TWFya2VyOiB0cnVlLFxuXHQgICAgc2hvd1BvcHVwOiBmYWxzZSxcblx0ICAgIG1hcmtlcjoge1xuXHQgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKSxcblx0ICAgICAgZHJhZ2dhYmxlOiBmYWxzZVxuXHQgICAgfSxcblx0ICAgIG1heE1hcmtlcnM6IDEsXG5cdCAgICByZXRhaW5ab29tTGV2ZWw6IGZhbHNlLFxuXHQgICAgYW5pbWF0ZVpvb206IHRydWUsXG5cdCAgICBzZWFyY2hMYWJlbDogJ0VudGVyIGFkZHJlc3MnLFxuXHQgICAgbm90Rm91bmRNZXNzYWdlOiAnU29ycnksIHRoYXQgYWRkcmVzcyBjb3VsZCBub3QgYmUgZm91bmQuJyxcblx0ICAgIG1lc3NhZ2VIaWRlRGVsYXk6IDMwMDAsXG5cdCAgICB6b29tTGV2ZWw6IDE4LFxuXHQgICAgY2xhc3NOYW1lczoge1xuXHQgICAgICBjb250YWluZXI6ICdsZWFmbGV0LWJhciBsZWFmbGV0LWNvbnRyb2wgbGVhZmxldC1jb250cm9sLWdlb3NlYXJjaCcsXG5cdCAgICAgIGJ1dHRvbjogJ2xlYWZsZXQtYmFyLXBhcnQgbGVhZmxldC1iYXItcGFydC1zaW5nbGUnLFxuXHQgICAgICBtc2dib3g6ICdsZWFmbGV0LWJhciBtZXNzYWdlJyxcblx0ICAgICAgZm9ybTogJycsXG5cdCAgICAgIGlucHV0OiAnJ1xuXHQgICAgfSxcblx0ICAgIGF1dG9Db21wbGV0ZTogdHJ1ZSxcblx0ICAgIGF1dG9Db21wbGV0ZURlbGF5OiAyNTBcblx0ICB9O1xuXHR9O1xuXHRcblx0dmFyIENvbnRyb2wgPSB7XG5cdCAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShvcHRpb25zKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHRoaXMubWFya2VycyA9IG5ldyBMLkZlYXR1cmVHcm91cCgpO1xuXHRcblx0ICAgIHRoaXMub3B0aW9ucyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0T3B0aW9ucygpLCBvcHRpb25zKTtcblx0XG5cdCAgICB2YXIgX29wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG5cdCAgICAgICAgc3R5bGUgPSBfb3B0aW9ucy5zdHlsZSxcblx0ICAgICAgICBjbGFzc05hbWVzID0gX29wdGlvbnMuY2xhc3NOYW1lcyxcblx0ICAgICAgICBzZWFyY2hMYWJlbCA9IF9vcHRpb25zLnNlYXJjaExhYmVsLFxuXHQgICAgICAgIGF1dG9Db21wbGV0ZSA9IF9vcHRpb25zLmF1dG9Db21wbGV0ZSxcblx0ICAgICAgICBhdXRvQ29tcGxldGVEZWxheSA9IF9vcHRpb25zLmF1dG9Db21wbGV0ZURlbGF5O1xuXHRcblx0ICAgIGlmIChzdHlsZSAhPT0gJ2J1dHRvbicpIHtcblx0ICAgICAgdGhpcy5vcHRpb25zLmNsYXNzTmFtZXMuY29udGFpbmVyICs9ICcgJyArIG9wdGlvbnMuc3R5bGU7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5zZWFyY2hFbGVtZW50ID0gbmV3IF9zZWFyY2hFbGVtZW50Mi5kZWZhdWx0KF9leHRlbmRzKHt9LCB0aGlzLm9wdGlvbnMsIHtcblx0ICAgICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQocXVlcnkpIHtcblx0ICAgICAgICByZXR1cm4gX3RoaXMub25TdWJtaXQocXVlcnkpO1xuXHQgICAgICB9XG5cdCAgICB9KSk7XG5cdFxuXHQgICAgdmFyIF9zZWFyY2hFbGVtZW50JGVsZW1lbiA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cyxcblx0ICAgICAgICBjb250YWluZXIgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uY29udGFpbmVyLFxuXHQgICAgICAgIGZvcm0gPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uZm9ybSxcblx0ICAgICAgICBpbnB1dCA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5pbnB1dDtcblx0XG5cdCAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIGJ1dHRvbiA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2EnLCBjbGFzc05hbWVzLmJ1dHRvbiwgY29udGFpbmVyKTtcblx0ICAgIGJ1dHRvbi50aXRsZSA9IHNlYXJjaExhYmVsO1xuXHQgICAgYnV0dG9uLmhyZWYgPSAnIyc7XG5cdFxuXHQgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgX3RoaXMub25DbGljayhlKTtcblx0ICAgIH0sIGZhbHNlKTtcblx0XG5cdCAgICBpZiAoYXV0b0NvbXBsZXRlKSB7XG5cdCAgICAgIHRoaXMucmVzdWx0TGlzdCA9IG5ldyBfcmVzdWx0TGlzdDIuZGVmYXVsdCh7XG5cdCAgICAgICAgaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKF9yZWYpIHtcblx0ICAgICAgICAgIHZhciByZXN1bHQgPSBfcmVmLnJlc3VsdDtcblx0XG5cdCAgICAgICAgICBpbnB1dC52YWx1ZSA9IHJlc3VsdC5sYWJlbDtcblx0ICAgICAgICAgIF90aGlzLm9uU3VibWl0KHsgcXVlcnk6IHJlc3VsdC5sYWJlbCB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgZm9ybS5hcHBlbmRDaGlsZCh0aGlzLnJlc3VsdExpc3QuZWxlbWVudHMuY29udGFpbmVyKTtcblx0XG5cdCAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKDAsIF9sb2Rhc2gyLmRlZmF1bHQpKGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgcmV0dXJuIF90aGlzLmF1dG9TZWFyY2goZSk7XG5cdCAgICAgIH0sIGF1dG9Db21wbGV0ZURlbGF5KSwgdHJ1ZSk7XG5cdCAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5zZWxlY3RSZXN1bHQoZSk7XG5cdCAgICAgIH0sIHRydWUpO1xuXHQgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICByZXR1cm4gX3RoaXMuY2xlYXJSZXN1bHRzKGUpO1xuXHQgICAgICB9LCB0cnVlKTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmVsZW1lbnRzID0geyBidXR0b246IGJ1dHRvbiB9O1xuXHQgIH0sXG5cdCAgb25BZGQ6IGZ1bmN0aW9uIG9uQWRkKG1hcCkge1xuXHQgICAgdmFyIF9vcHRpb25zMiA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICBzaG93TWFya2VyID0gX29wdGlvbnMyLnNob3dNYXJrZXIsXG5cdCAgICAgICAgc3R5bGUgPSBfb3B0aW9uczIuc3R5bGU7XG5cdFxuXHQgICAgdGhpcy5tYXAgPSBtYXA7XG5cdCAgICBpZiAoc2hvd01hcmtlcikge1xuXHQgICAgICB0aGlzLm1hcmtlcnMuYWRkVG8obWFwKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoc3R5bGUgPT09ICdiYXInKSB7XG5cdCAgICAgIHZhciBmb3JtID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmZvcm07XG5cdFxuXHQgICAgICB2YXIgcm9vdCA9IG1hcC5nZXRDb250YWluZXIoKS5xdWVyeVNlbGVjdG9yKCcubGVhZmxldC1jb250cm9sLWNvbnRhaW5lcicpO1xuXHRcblx0ICAgICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsICdsZWFmbGV0LWNvbnRyb2wtZ2Vvc2VhcmNoIGJhcicpO1xuXHQgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZm9ybSk7XG5cdCAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblx0ICAgICAgdGhpcy5lbGVtZW50cy5jb250YWluZXIgPSBjb250YWluZXI7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5jb250YWluZXI7XG5cdCAgfSxcblx0ICBvblJlbW92ZTogZnVuY3Rpb24gb25SZW1vdmUoKSB7XG5cdCAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgaWYgKGNvbnRhaW5lcikge1xuXHQgICAgICBjb250YWluZXIucmVtb3ZlKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfSxcblx0ICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGV2ZW50KSB7XG5cdCAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcblx0ICAgIHZhciBfc2VhcmNoRWxlbWVudCRlbGVtZW4yID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLFxuXHQgICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbjIuY29udGFpbmVyLFxuXHQgICAgICAgIGlucHV0ID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuMi5pbnB1dDtcblx0XG5cdCAgICBpZiAoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcblx0ICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHQgICAgICBpbnB1dC5mb2N1cygpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgc2VsZWN0UmVzdWx0OiBmdW5jdGlvbiBzZWxlY3RSZXN1bHQoZXZlbnQpIHtcblx0ICAgIGlmICghW19jb25zdGFudHMuQVJST1dfRE9XTl9LRVksIF9jb25zdGFudHMuQVJST1dfVVBfS0VZXS5pbmNsdWRlcyhldmVudC5rZXlDb2RlKSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgIHZhciBpbnB1dCA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5pbnB1dDtcblx0XG5cdCAgICB2YXIgbGlzdCA9IHRoaXMucmVzdWx0TGlzdDtcblx0ICAgIHZhciBtYXggPSB0aGlzLnJlc3VsdExpc3QuY291bnQoKSAtIDE7XG5cdFxuXHQgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2Vcblx0ICAgIHZhciBuZXh0ID0gZXZlbnQuY29kZSA9PT0gJ0Fycm93RG93bicgPyB+fmxpc3Quc2VsZWN0ZWQgKyAxIDogfn5saXN0LnNlbGVjdGVkIC0gMTtcblx0ICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuXHQgICAgdmFyIGlkeCA9IG5leHQgPCAwID8gbWF4IDogbmV4dCA+IG1heCA/IDAgOiBuZXh0O1xuXHRcblx0ICAgIHZhciBpdGVtID0gbGlzdC5zZWxlY3QoaWR4KTtcblx0ICAgIGlucHV0LnZhbHVlID0gaXRlbS5sYWJlbDtcblx0ICB9LFxuXHQgIGNsZWFyUmVzdWx0czogZnVuY3Rpb24gY2xlYXJSZXN1bHRzKGV2ZW50KSB7XG5cdCAgICBpZiAoZXZlbnQua2V5Q29kZSAhPT0gX2NvbnN0YW50cy5FU0NBUEVfS0VZKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLnJlc3VsdExpc3QuY2xlYXIoKTtcblx0ICB9LFxuXHQgIGF1dG9TZWFyY2g6IGZ1bmN0aW9uIGF1dG9TZWFyY2goZXZlbnQpIHtcblx0ICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgIHZhciBxdWVyeSwgcHJvdmlkZXIsIHJlc3VsdHM7XG5cdFxuXHQgICAgICBpZiAoX2NvbnN0YW50cy5TUEVDSUFMX0tFWVMuaW5jbHVkZXMoZXZlbnQua2V5Q29kZSkpIHtcblx0ICAgICAgICByZXR1cm4gJHJldHVybigpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBxdWVyeSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcblx0ICAgICAgcHJvdmlkZXIgPSB0aGlzLm9wdGlvbnMucHJvdmlkZXI7XG5cdCAgICAgIHJldHVybiBwcm92aWRlci5zZWFyY2goeyBxdWVyeTogcXVlcnkgfSkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcblx0XG5cdCAgICAgICAgcmVzdWx0cyA9ICRhd2FpdF8xO1xuXHQgICAgICAgIHRoaXMucmVzdWx0TGlzdC5yZW5kZXIocmVzdWx0cyk7XG5cdCAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcblx0ICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuXHQgIH0sXG5cdCAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KHF1ZXJ5KSB7XG5cdCAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuXHQgICAgICB2YXIgcHJvdmlkZXIsIHJlc3VsdHM7XG5cdCAgICAgIHByb3ZpZGVyID0gdGhpcy5vcHRpb25zLnByb3ZpZGVyO1xuXHQgICAgICByZXR1cm4gcHJvdmlkZXIuc2VhcmNoKHF1ZXJ5KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMikge1xuXHRcblx0ICAgICAgICByZXN1bHRzID0gJGF3YWl0XzI7XG5cdFxuXHQgICAgICAgIGlmIChyZXN1bHRzICYmIHJlc3VsdHMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgdGhpcy5zaG93UmVzdWx0KHJlc3VsdHNbMF0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gJHJldHVybigpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgfSxcblx0ICBzaG93UmVzdWx0OiBmdW5jdGlvbiBzaG93UmVzdWx0KHJlc3VsdCkge1xuXHQgICAgdmFyIG1hcmtlcnMgPSBPYmplY3Qua2V5cyh0aGlzLm1hcmtlcnMuX2xheWVycyk7XG5cdCAgICBpZiAobWFya2Vycy5sZW5ndGggPj0gdGhpcy5vcHRpb25zLm1heE1hcmtlcnMpIHtcblx0ICAgICAgdGhpcy5tYXJrZXJzLnJlbW92ZUxheWVyKG1hcmtlcnNbMF0pO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBtYXJrZXIgPSB0aGlzLmFkZE1hcmtlcihyZXN1bHQpO1xuXHQgICAgdGhpcy5jZW50ZXJNYXAocmVzdWx0KTtcblx0XG5cdCAgICB0aGlzLm1hcC5maXJlRXZlbnQoJ2dlb3NlYXJjaC9zaG93bG9jYXRpb24nLCB7XG5cdCAgICAgIGxvY2F0aW9uOiByZXN1bHQsXG5cdCAgICAgIG1hcmtlcjogbWFya2VyXG5cdCAgICB9KTtcblx0ICB9LFxuXHQgIGFkZE1hcmtlcjogZnVuY3Rpb24gYWRkTWFya2VyKHJlc3VsdCkge1xuXHQgICAgdmFyIF9vcHRpb25zMyA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICBvcHRpb25zID0gX29wdGlvbnMzLm1hcmtlcixcblx0ICAgICAgICBzaG93UG9wdXAgPSBfb3B0aW9uczMuc2hvd1BvcHVwO1xuXHRcblx0ICAgIHZhciBtYXJrZXIgPSBuZXcgTC5NYXJrZXIoW3Jlc3VsdC55LCByZXN1bHQueF0sIG9wdGlvbnMpO1xuXHQgICAgbWFya2VyLmJpbmRQb3B1cChyZXN1bHQubGFiZWwpO1xuXHRcblx0ICAgIHRoaXMubWFya2Vycy5hZGRMYXllcihtYXJrZXIpO1xuXHRcblx0ICAgIGlmIChzaG93UG9wdXApIHtcblx0ICAgICAgbWFya2VyLm9wZW5Qb3B1cCgpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBtYXJrZXI7XG5cdCAgfSxcblx0ICBjZW50ZXJNYXA6IGZ1bmN0aW9uIGNlbnRlck1hcChyZXN1bHQpIHtcblx0ICAgIHZhciBfb3B0aW9uczQgPSB0aGlzLm9wdGlvbnMsXG5cdCAgICAgICAgcmV0YWluWm9vbUxldmVsID0gX29wdGlvbnM0LnJldGFpblpvb21MZXZlbCxcblx0ICAgICAgICBhbmltYXRlWm9vbSA9IF9vcHRpb25zNC5hbmltYXRlWm9vbTtcblx0XG5cdCAgICB2YXIgcmVzdWx0Qm91bmRzID0gbmV3IEwuTGF0TG5nQm91bmRzKHJlc3VsdC5ib3VuZHMpO1xuXHQgICAgdmFyIGJvdW5kcyA9IHJlc3VsdEJvdW5kcy5pc1ZhbGlkKCkgPyByZXN1bHRCb3VuZHMgOiB0aGlzLm1hcmtlcnMuZ2V0Qm91bmRzKCk7XG5cdFxuXHQgICAgaWYgKCFyZXRhaW5ab29tTGV2ZWwgJiYgcmVzdWx0Qm91bmRzLmlzVmFsaWQoKSkge1xuXHQgICAgICB0aGlzLm1hcC5maXRCb3VuZHMoYm91bmRzLCB7IGFuaW1hdGU6IGFuaW1hdGVab29tIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5tYXAuc2V0Vmlldyhib3VuZHMuZ2V0Q2VudGVyKCksIHRoaXMuZ2V0Wm9vbSgpLCB7IGFuaW1hdGU6IGFuaW1hdGVab29tIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgZ2V0Wm9vbTogZnVuY3Rpb24gZ2V0Wm9vbSgpIHtcblx0ICAgIHZhciBfb3B0aW9uczUgPSB0aGlzLm9wdGlvbnMsXG5cdCAgICAgICAgcmV0YWluWm9vbUxldmVsID0gX29wdGlvbnM1LnJldGFpblpvb21MZXZlbCxcblx0ICAgICAgICB6b29tTGV2ZWwgPSBfb3B0aW9uczUuem9vbUxldmVsO1xuXHRcblx0ICAgIHJldHVybiByZXRhaW5ab29tTGV2ZWwgPyB0aGlzLm1hcC5nZXRab29tKCkgOiB6b29tTGV2ZWw7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gTGVhZmxldENvbnRyb2woKSB7XG5cdCAgaWYgKCFMIHx8ICFMLkNvbnRyb2wgfHwgIUwuQ29udHJvbC5leHRlbmQpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignTGVhZmxldCBtdXN0IGJlIGxvYWRlZCBiZWZvcmUgaW5zdGFudGlhdGluZyB0aGUgR2VvU2VhcmNoIGNvbnRyb2wnKTtcblx0ICB9XG5cdFxuXHQgIHZhciBMQ29udHJvbCA9IEwuQ29udHJvbC5leHRlbmQoQ29udHJvbCk7XG5cdFxuXHQgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBvcHRpb25zID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG5cdCAgICBvcHRpb25zW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoTENvbnRyb2wsIFtudWxsXS5jb25jYXQob3B0aW9ucykpKSgpO1xuXHR9XG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0Lypcblx0ICogJGFzeW5jYmluZCBoYXMgbXVsdGlwbGUgdXNlcywgZGVwZW5kaW5nIG9uIHRoZSBwYXJhbWV0ZXIgbGlzdC4gSXQgaXMgaW4gRnVuY3Rpb24ucHJvdG90eXBlLCBzbyAndGhpcycgaXMgYWx3YXlzIGEgZnVuY3Rpb25cblx0ICpcblx0ICogMSkgSWYgY2FsbGVkIHdpdGggYSBzaW5nbGUgYXJndW1lbnQgKHRoaXMpLCBpdCBpcyB1c2VkIHdoZW4gZGVmaW5pbmcgYW4gYXN5bmMgZnVuY3Rpb24gdG8gZW5zdXJlIHdoZW5cblx0ICogICAgICBpdCBpcyBpbnZva2VkLCB0aGUgY29ycmVjdCAndGhpcycgaXMgcHJlc2VudCwganVzdCBsaWtlIFwiYmluZFwiLiBGb3IgbGVnYWN5IHJlYXNvbnMsICd0aGlzJyBpcyBnaXZlblxuXHQgKiAgICAgIGEgbWVtZWJlciAndGhlbicgd2hpY2ggcmVmZXJzIHRvIGl0c2VsZi5cblx0ICogMikgSWYgY2FsbGVkIHdpdGggYSBzZWNvbmQgcGFyYW1ldGVyIChcImNhdGNoZXJcIikgYW5kIGNhdGNoZXIhPT10cnVlIGl0IGlzIGJlaW5nIHVzZWQgdG8gaW52b2tlIGFuIGFzeW5jXG5cdCAqICAgICAgZnVuY3Rpb24gd2hlcmUgdGhlIHNlY29uZCBwYXJhbWV0ZXIgaXMgdGhlIGVycm9yIGNhbGxiYWNrIChmb3Igc3luYyBleGNlcHRpb25zIGFuZCB0byBiZSBwYXNzZWQgdG9cblx0ICogICAgICBuZXN0ZWQgYXN5bmMgY2FsbHMpXG5cdCAqIDMpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09dHJ1ZSwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG5cdCAqICAgICAgaW4gYW4gJ1Byb21pc2UnIGFzIHdlbGwgYm91bmQgdG8gJ3RoaXMnLlxuXHQgKiAgICAgIEl0IGlzIHRoZSBzYW1lIGFzIGNhbGxpbmcgJ25ldyBQcm9taXNlKHRoaXMpJywgd2hlcmUgJ3RoaXMnIGlzIHRoZSBmdW5jdGlvbiBiZWluZyBib3VuZC93cmFwcGVkXG5cdCAqIDQpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09MCwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG5cdCAqICAgICAgaW4gYSAnTGF6eVRoZW5hYmxlJywgd2hpY2ggZXhlY3V0ZXMgbGF6aWx5IGFuZCBjYW4gcmVzb2x2ZSBzeW5jaHJvbm91c2x5LlxuXHQgKiAgICAgIEl0IGlzIHRoZSBzYW1lIGFzIGNhbGxpbmcgJ25ldyBMYXp5VGhlbmFibGUodGhpcyknIChpZiBzdWNoIGEgdHlwZSB3ZXJlIGV4cG9zZWQpLCB3aGVyZSAndGhpcycgaXNcblx0ICogICAgICB0aGUgZnVuY3Rpb24gYmVpbmcgYm91bmQvd3JhcHBlZFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NJbmNsdWRlcyhpbmNsdWRlcywgaW5wdXQpIHtcblx0ICAgIHZhciBzcmMgPSBpbnB1dC50b1N0cmluZygpO1xuXHQgICAgdmFyIHQgPSBcInJldHVybiBcIiArIHNyYztcblx0ICAgIHZhciBhcmdzID0gc3JjLm1hdGNoKC8uKlxcKChbXildKilcXCkvKVsxXTtcblx0ICAgIHZhciByZSA9IC9bJ1wiXSEhIShbXidcIl0qKVsnXCJdL2c7XG5cdCAgICB2YXIgbSA9IFtdO1xuXHQgICAgd2hpbGUgKDEpIHtcblx0ICAgICAgICB2YXIgbXggPSByZS5leGVjKHQpO1xuXHQgICAgICAgIGlmIChteCkgbS5wdXNoKG14KTtlbHNlIGJyZWFrO1xuXHQgICAgfVxuXHQgICAgbS5yZXZlcnNlKCkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHQgPSB0LnNsaWNlKDAsIGUuaW5kZXgpICsgaW5jbHVkZXNbZVsxXV0gKyB0LnN1YnN0cihlLmluZGV4ICsgZVswXS5sZW5ndGgpO1xuXHQgICAgfSk7XG5cdCAgICB0ID0gdC5yZXBsYWNlKC9cXC9cXCpbXipdKlxcKlxcLy9nLCAnICcpLnJlcGxhY2UoL1xccysvZywgJyAnKTtcblx0ICAgIHJldHVybiBuZXcgRnVuY3Rpb24oYXJncywgdCkoKTtcblx0fVxuXHRcblx0dmFyICRhc3luY2JpbmQgPSBwcm9jZXNzSW5jbHVkZXMoe1xuXHQgICAgem91c2FuOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpLnRvU3RyaW5nKCksXG5cdCAgICB0aGVuYWJsZTogX193ZWJwYWNrX3JlcXVpcmVfXygxMSkudG9TdHJpbmcoKVxuXHR9LCBmdW5jdGlvbiAkYXN5bmNiaW5kKHNlbGYsIGNhdGNoZXIpIHtcblx0ICAgIFwidXNlIHN0cmljdFwiO1xuXHRcblx0ICAgIGlmICghRnVuY3Rpb24ucHJvdG90eXBlLiRhc3luY2JpbmQpIHtcblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLCBcIiRhc3luY2JpbmRcIiwgeyB2YWx1ZTogJGFzeW5jYmluZCwgZW51bWVyYWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCEkYXN5bmNiaW5kLnRyYW1wb2xpbmUpIHtcblx0ICAgICAgICAkYXN5bmNiaW5kLnRyYW1wb2xpbmUgPSBmdW5jdGlvbiB0cmFtcG9saW5lKHQsIHgsIHMsIGUsIHUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGIocSkge1xuXHQgICAgICAgICAgICAgICAgd2hpbGUgKHEpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAocS50aGVuKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBxLnRoZW4oYiwgZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1ID8gdW5kZWZpbmVkIDogcTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEucG9wKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocS5sZW5ndGgpIHJldHVybiBxLnBvcCgpID8geC5jYWxsKHQpIDogcTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBzO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgcSA9IHEuY2FsbCh0KTtcblx0ICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlKHIpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHQgICAgaWYgKCEkYXN5bmNiaW5kLkxhenlUaGVuYWJsZSkge1xuXHQgICAgICAgICRhc3luY2JpbmQuTGF6eVRoZW5hYmxlID0gJyEhIXRoZW5hYmxlJygpO1xuXHQgICAgICAgICRhc3luY2JpbmQuRWFnZXJUaGVuYWJsZSA9ICRhc3luY2JpbmQuVGhlbmFibGUgPSAoJGFzeW5jYmluZC5FYWdlclRoZW5hYmxlRmFjdG9yeSA9ICchISF6b3VzYW4nKSgpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciByZXNvbHZlciA9IHRoaXM7XG5cdCAgICBzd2l0Y2ggKGNhdGNoZXIpIHtcblx0ICAgICAgICBjYXNlIHRydWU6XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgJGFzeW5jYmluZC5UaGVuYWJsZShib3VuZFRoZW4pO1xuXHQgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyAkYXN5bmNiaW5kLkxhenlUaGVuYWJsZShib3VuZFRoZW4pO1xuXHQgICAgICAgIGNhc2UgdW5kZWZpbmVkOlxuXHQgICAgICAgICAgICAvKiBGb3IgcnVudGltZSBjb21wYXRpYmlsaXR5IHdpdGggTm9kZW50IHYyLngsIHByb3ZpZGUgYSB0aGVuYWJsZSAqL1xuXHQgICAgICAgICAgICBib3VuZFRoZW4udGhlbiA9IGJvdW5kVGhlbjtcblx0ICAgICAgICAgICAgcmV0dXJuIGJvdW5kVGhlbjtcblx0ICAgICAgICBkZWZhdWx0OlxuXHQgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZXIuYXBwbHkoc2VsZiwgYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhdGNoZXIoZXgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gYm91bmRUaGVuKCkge1xuXHQgICAgICAgIHJldHVybiByZXNvbHZlci5hcHBseShzZWxmLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uICRhc3luY3NwYXduKHByb21pc2VQcm92aWRlciwgc2VsZikge1xuXHQgICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jc3Bhd24pIHtcblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLCBcIiRhc3luY3NwYXduXCIsIHsgdmFsdWU6ICRhc3luY3NwYXduLCBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTtcblx0ICAgIH1cblx0ICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBGdW5jdGlvbikpIHJldHVybjtcblx0XG5cdCAgICB2YXIgZ2VuRiA9IHRoaXM7XG5cdCAgICByZXR1cm4gbmV3IHByb21pc2VQcm92aWRlcihmdW5jdGlvbiBlbm91Z2gocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgdmFyIGdlbiA9IGdlbkYuY2FsbChzZWxmLCByZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICAgIGZ1bmN0aW9uIHN0ZXAoZm4sIGFyZykge1xuXHQgICAgICAgICAgICB2YXIgbmV4dDtcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIG5leHQgPSBmbi5jYWxsKGdlbiwgYXJnKTtcblx0ICAgICAgICAgICAgICAgIGlmIChuZXh0LmRvbmUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZSAhPT0gcmVzb2x2ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZSAmJiBuZXh0LnZhbHVlID09PSBuZXh0LnZhbHVlLnRoZW4pIHJldHVybiBuZXh0LnZhbHVlKHJlc29sdmUsIHJlamVjdCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUgJiYgcmVzb2x2ZShuZXh0LnZhbHVlKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZS50aGVuKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgbmV4dC52YWx1ZS50aGVuKGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLm5leHQsIHYpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLnRocm93LCBlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4ubmV4dCwgbmV4dC52YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgIHJlamVjdCAmJiByZWplY3QoZSk7XG5cdCAgICAgICAgICAgICAgICByZWplY3QgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN0ZXAoZ2VuLm5leHQpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdC8vIEluaXRpYWxpemUgYXN5bmMgYmluZGluZ3Ncblx0JGFzeW5jYmluZCgpO1xuXHQkYXN5bmNzcGF3bigpO1xuXHRcblx0Ly8gRXhwb3J0IGFzeW5jIGJpbmRpbmdzXG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgICAgJGFzeW5jYmluZDogJGFzeW5jYmluZCxcblx0ICAgICRhc3luY3NwYXduOiAkYXN5bmNzcGF3blxuXHR9O1xuXG4vKioqLyB9LFxuLyogNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MsIHNldEltbWVkaWF0ZSkgey8qIFRoaXMgY29kZSBpcyBiYXNlZCBvbjpcblx0em91c2FuIC0gQSBMaWdodG5pbmcgRmFzdCwgWWV0IFZlcnkgU21hbGwgUHJvbWlzZSBBKyBDb21wbGlhbnQgSW1wbGVtZW50YXRpb25cblx0aHR0cHM6Ly9naXRodWIuY29tL2JsdWVqYXZhL3pvdXNhblxuXHRBdXRob3I6IEdsZW5uIENyb3dub3ZlciA8Z2xlbm5AYmx1ZWphdmEuY29tPiAoaHR0cDovL3d3dy5ibHVlamF2YS5jb20pXG5cdFZlcnNpb24gMi4zLjNcblx0TGljZW5zZTogTUlUICovXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGljaykge1xuXHQgICAgdGljayA9IHRpY2sgfHwgKHR5cGVvZiBwcm9jZXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YocHJvY2VzcykpID09PSBcIm9iamVjdFwiICYmIHByb2Nlc3MubmV4dFRpY2sgfHwgdHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gXCJmdW5jdGlvblwiICYmIHNldEltbWVkaWF0ZSB8fCBmdW5jdGlvbiAoZikge1xuXHQgICAgICAgIHNldFRpbWVvdXQoZiwgMCk7XG5cdCAgICB9O1xuXHQgICAgdmFyIHNvb24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGZxID0gW10sXG5cdCAgICAgICAgICAgIGZxU3RhcnQgPSAwLFxuXHQgICAgICAgICAgICBidWZmZXJTaXplID0gMTAyNDtcblx0ICAgICAgICBmdW5jdGlvbiBjYWxsUXVldWUoKSB7XG5cdCAgICAgICAgICAgIHdoaWxlIChmcS5sZW5ndGggLSBmcVN0YXJ0KSB7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIGZxW2ZxU3RhcnRdKCk7XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkgey8qIGNvbnNvbGUuZXJyb3IoZXgpICovfVxuXHQgICAgICAgICAgICAgICAgZnFbZnFTdGFydCsrXSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICAgICAgICAgIGlmIChmcVN0YXJ0ID09PSBidWZmZXJTaXplKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZnEuc3BsaWNlKDAsIGJ1ZmZlclNpemUpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZxU3RhcnQgPSAwO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZuKSB7XG5cdCAgICAgICAgICAgIGZxLnB1c2goZm4pO1xuXHQgICAgICAgICAgICBpZiAoZnEubGVuZ3RoIC0gZnFTdGFydCA9PT0gMSkgdGljayhjYWxsUXVldWUpO1xuXHQgICAgICAgIH07XG5cdCAgICB9KCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gWm91c2FuKGZ1bmMpIHtcblx0ICAgICAgICBpZiAoZnVuYykge1xuXHQgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXHQgICAgICAgICAgICBmdW5jKGZ1bmN0aW9uIChhcmcpIHtcblx0ICAgICAgICAgICAgICAgIG1lLnJlc29sdmUoYXJnKTtcblx0ICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgICAgICAgICAgbWUucmVqZWN0KGFyZyk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBab3VzYW4ucHJvdG90eXBlID0ge1xuXHQgICAgICAgIHJlc29sdmU6IGZ1bmN0aW9uIHJlc29sdmUodmFsdWUpIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXHQgICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMpIHJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKFwiQXR0ZW1wdCB0byByZXNvbHZlIHByb21pc2Ugd2l0aCBzZWxmXCIpKTtcblx0ICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcblx0ICAgICAgICAgICAgaWYgKHZhbHVlICYmICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiB8fCAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YodmFsdWUpKSA9PT0gXCJvYmplY3RcIikpIHtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0ID0gMDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdGhlbiA9IHZhbHVlLnRoZW47XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBmdW5jdGlvbiAocmEpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QrKykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJlc29sdmUocmEpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocnIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QrKykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJlamVjdChycik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QpIHRoaXMucmVqZWN0KGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRlVMRklMTEVEO1xuXHQgICAgICAgICAgICB0aGlzLnYgPSB2YWx1ZTtcblx0ICAgICAgICAgICAgaWYgKG1lLmMpIHNvb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIGwgPSBtZS5jLmxlbmd0aDsgbiA8IGw7IG4rKykge1xuXHQgICAgICAgICAgICAgICAgICAgIFNUQVRFX0ZVTEZJTExFRChtZS5jW25dLCB2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSB1bmRlZmluZWQpIHJldHVybjtcblx0ICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1JFSkVDVEVEO1xuXHQgICAgICAgICAgICB0aGlzLnYgPSByZWFzb247XG5cdCAgICAgICAgICAgIHZhciBjbGllbnRzID0gdGhpcy5jO1xuXHQgICAgICAgICAgICBpZiAoY2xpZW50cykgc29vbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgbCA9IGNsaWVudHMubGVuZ3RoOyBuIDwgbDsgbisrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgU1RBVEVfUkVKRUNURUQoY2xpZW50c1tuXSwgcmVhc29uKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICB0aGVuOiBmdW5jdGlvbiB0aGVuKG9uRiwgb25SKSB7XG5cdCAgICAgICAgICAgIHZhciBwID0gbmV3IFpvdXNhbigpO1xuXHQgICAgICAgICAgICB2YXIgY2xpZW50ID0ge1xuXHQgICAgICAgICAgICAgICAgeTogb25GLFxuXHQgICAgICAgICAgICAgICAgbjogb25SLFxuXHQgICAgICAgICAgICAgICAgcDogcFxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAodGhpcy5jKSB0aGlzLmMucHVzaChjbGllbnQpO2Vsc2UgdGhpcy5jID0gW2NsaWVudF07XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgcyA9IHRoaXMuc3RhdGUsXG5cdCAgICAgICAgICAgICAgICAgICAgYSA9IHRoaXMudjtcblx0ICAgICAgICAgICAgICAgIHNvb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHMoY2xpZW50LCBhKTtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBwO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgZnVuY3Rpb24gU1RBVEVfRlVMRklMTEVEKGMsIGFyZykge1xuXHQgICAgICAgIGlmICh0eXBlb2YgYy55ID09PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIHZhciB5cmV0ID0gYy55LmNhbGwodW5kZWZpbmVkLCBhcmcpO1xuXHQgICAgICAgICAgICAgICAgYy5wLnJlc29sdmUoeXJldCk7XG5cdCAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICAgICAgYy5wLnJlamVjdChlcnIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIGMucC5yZXNvbHZlKGFyZyk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gU1RBVEVfUkVKRUNURUQoYywgcmVhc29uKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjLm4gPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgdmFyIHlyZXQgPSBjLm4uY2FsbCh1bmRlZmluZWQsIHJlYXNvbik7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVzb2x2ZSh5cmV0KTtcblx0ICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVqZWN0KGVycik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgYy5wLnJlamVjdChyZWFzb24pO1xuXHQgICAgfVxuXHRcblx0ICAgIFpvdXNhbi5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgICAgIGlmICh2YWwgJiYgdmFsIGluc3RhbmNlb2YgWm91c2FuKSByZXR1cm4gdmFsO1xuXHQgICAgICAgIHZhciB6ID0gbmV3IFpvdXNhbigpO1xuXHQgICAgICAgIHoucmVzb2x2ZSh2YWwpO1xuXHQgICAgICAgIHJldHVybiB6O1xuXHQgICAgfTtcblx0ICAgIFpvdXNhbi5yZWplY3QgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgaWYgKGVyciAmJiBlcnIgaW5zdGFuY2VvZiBab3VzYW4pIHJldHVybiBlcnI7XG5cdCAgICAgICAgdmFyIHogPSBuZXcgWm91c2FuKCk7XG5cdCAgICAgICAgei5yZWplY3QoZXJyKTtcblx0ICAgICAgICByZXR1cm4gejtcblx0ICAgIH07XG5cdFxuXHQgICAgWm91c2FuLnZlcnNpb24gPSBcIjIuMy4zLW5vZGVudFwiO1xuXHQgICAgcmV0dXJuIFpvdXNhbjtcblx0fTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oOCksIF9fd2VicGFja19yZXF1aXJlX18oOSkuc2V0SW1tZWRpYXRlKSlcblxuLyoqKi8gfSxcbi8qIDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXHR2YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cdFxuXHQvLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcblx0Ly8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG5cdC8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcblx0Ly8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblx0XG5cdHZhciBjYWNoZWRTZXRUaW1lb3V0O1xuXHR2YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXHRcblx0ZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xuXHR9XG5cdGZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQoKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xuXHR9XG5cdChmdW5jdGlvbiAoKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgfVxuXHR9KSgpO1xuXHRmdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuXHQgICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdGZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcblx0ICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuXHQgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuXHQgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH1cblx0ICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuXHQgICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHR2YXIgcXVldWUgPSBbXTtcblx0dmFyIGRyYWluaW5nID0gZmFsc2U7XG5cdHZhciBjdXJyZW50UXVldWU7XG5cdHZhciBxdWV1ZUluZGV4ID0gLTE7XG5cdFxuXHRmdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG5cdCAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICB9XG5cdCAgICBpZiAocXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgZHJhaW5RdWV1ZSgpO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuXHQgICAgaWYgKGRyYWluaW5nKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG5cdCAgICBkcmFpbmluZyA9IHRydWU7XG5cdFxuXHQgICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIHdoaWxlIChsZW4pIHtcblx0ICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcblx0ICAgICAgICBxdWV1ZSA9IFtdO1xuXHQgICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcblx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB9XG5cdCAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0fVxuXHRcblx0cHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcblx0ICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcblx0ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG5cdCAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuXHQgICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG5cdCAgICB9XG5cdH07XG5cdFxuXHQvLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5cdGZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuXHQgICAgdGhpcy5mdW4gPSBmdW47XG5cdCAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG5cdH1cblx0SXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG5cdH07XG5cdHByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5cdHByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5cdHByb2Nlc3MuZW52ID0ge307XG5cdHByb2Nlc3MuYXJndiA9IFtdO1xuXHRwcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcblx0cHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXHRcblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cdFxuXHRwcm9jZXNzLm9uID0gbm9vcDtcblx0cHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5cdHByb2Nlc3Mub25jZSA9IG5vb3A7XG5cdHByb2Nlc3Mub2ZmID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcblx0cHJvY2Vzcy5lbWl0ID0gbm9vcDtcblx0XG5cdHByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdFxuXHRwcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiAnLyc7XG5cdH07XG5cdHByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRwcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIDA7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblx0XG5cdC8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cdFxuXHRleHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xuXHR9O1xuXHRleHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xuXHR9O1xuXHRleHBvcnRzLmNsZWFyVGltZW91dCA9IGV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uICh0aW1lb3V0KSB7XG5cdCAgaWYgKHRpbWVvdXQpIHtcblx0ICAgIHRpbWVvdXQuY2xvc2UoKTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG5cdCAgdGhpcy5faWQgPSBpZDtcblx0ICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcblx0fVxuXHRUaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uICgpIHt9O1xuXHRUaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG5cdH07XG5cdFxuXHQvLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cblx0ZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbiAoaXRlbSwgbXNlY3MpIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdCAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcblx0fTtcblx0XG5cdGV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbiAoaXRlbSkge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0ICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHRcblx0ICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcblx0ICBpZiAobXNlY3MgPj0gMCkge1xuXHQgICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuXHQgICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KSBpdGVtLl9vblRpbWVvdXQoKTtcblx0ICAgIH0sIG1zZWNzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyBzZXRpbW1lZGlhdGUgYXR0YWNoZXMgaXRzZWxmIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRleHBvcnRzLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcblx0ZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xuXG4vKioqLyB9LFxuLyogMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwsIHByb2Nlc3MpIHtcInVzZSBzdHJpY3RcIjtcblx0XG5cdChmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcblx0ICAgIFwidXNlIHN0cmljdFwiO1xuXHRcblx0ICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG5cdCAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuXHQgICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuXHQgICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcblx0ICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblx0XG5cdCAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcblx0ICAgICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcblx0ICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcblx0ICAgICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcblx0ICAgICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG5cdCAgICAgICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG5cdCAgICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG5cdCAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcblx0ICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcblx0ICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgY2FzZSAxOlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgY2FzZSAyOlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgY2FzZSAzOlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuXHQgICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcblx0ICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuXHQgICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcblx0ICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcblx0ICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cblx0ICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG5cdCAgICAgICAgICAgIGlmICh0YXNrKSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG5cdCAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcblx0ICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG5cdCAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG5cdCAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcblx0ICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuXHQgICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcblx0ICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSBmYWxzZTtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcblx0ICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcblx0ICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuXHQgICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuXHQgICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblx0XG5cdCAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSBcInNldEltbWVkaWF0ZSRcIiArIE1hdGgucmFuZG9tKCkgKyBcIiRcIjtcblx0ICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24gb25HbG9iYWxNZXNzYWdlKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJiB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJiBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcblx0ICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuXHQgICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuXHQgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcblx0ICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cblx0ICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuXHQgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG5cdCAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcblx0ICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS5cblx0ICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcblx0ICAgIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXHRcblx0ICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cblx0ICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcblx0ICAgICAgICAvLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45XG5cdCAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuXHQgICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcblx0ICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcblx0ICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuXHQgICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9IGVsc2UgaWYgKGRvYyAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpKSB7XG5cdCAgICAgICAgLy8gRm9yIElFIDbigJM4XG5cdCAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcblx0ICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuXHQgICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcblx0fSkodHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdW5kZWZpbmVkIDogZ2xvYmFsIDogc2VsZik7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpKSlcblxuLyoqKi8gfSxcbi8qIDExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gaXNUaGVuYWJsZShvYmopIHtcblx0ICAgICAgICByZXR1cm4gb2JqICYmIG9iaiBpbnN0YW5jZW9mIE9iamVjdCAmJiB0eXBlb2Ygb2JqLnRoZW4gPT09IFwiZnVuY3Rpb25cIjtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiByZXNvbHV0aW9uKHAsIHIsIGhvdykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIC8qIDIuMi43LjEgKi9cblx0ICAgICAgICAgICAgdmFyIHggPSBob3cgPyBob3cocikgOiByO1xuXHRcblx0ICAgICAgICAgICAgaWYgKHAgPT09IHgpIC8qIDIuMy4xICovXG5cdCAgICAgICAgICAgICAgICByZXR1cm4gcC5yZWplY3QobmV3IFR5cGVFcnJvcihcIlByb21pc2UgcmVzb2x1dGlvbiBsb29wXCIpKTtcblx0XG5cdCAgICAgICAgICAgIGlmIChpc1RoZW5hYmxlKHgpKSB7XG5cdCAgICAgICAgICAgICAgICAvKiAyLjMuMyAqL1xuXHQgICAgICAgICAgICAgICAgeC50aGVuKGZ1bmN0aW9uICh5KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbihwLCB5KTtcblx0ICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcC5yZWplY3QoZSk7XG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHAucmVzb2x2ZSh4KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cdCAgICAgICAgICAgIC8qIDIuMi43LjIgKi9cblx0ICAgICAgICAgICAgcC5yZWplY3QoZXgpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBDaGFpbmVkKCkge307XG5cdCAgICBDaGFpbmVkLnByb3RvdHlwZSA9IHtcblx0ICAgICAgICByZXNvbHZlOiBfdW5jaGFpbmVkLFxuXHQgICAgICAgIHJlamVjdDogX3VuY2hhaW5lZCxcblx0ICAgICAgICB0aGVuOiB0aGVuQ2hhaW5cblx0ICAgIH07XG5cdCAgICBmdW5jdGlvbiBfdW5jaGFpbmVkKHYpIHt9XG5cdCAgICBmdW5jdGlvbiB0aGVuQ2hhaW4ocmVzLCByZWopIHtcblx0ICAgICAgICB0aGlzLnJlc29sdmUgPSByZXM7XG5cdCAgICAgICAgdGhpcy5yZWplY3QgPSByZWo7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gdGhlbihyZXMsIHJlaikge1xuXHQgICAgICAgIHZhciBjaGFpbiA9IG5ldyBDaGFpbmVkKCk7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZXIoZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gaXNUaGVuYWJsZSh2YWx1ZSkgPyB2YWx1ZS50aGVuKHJlcywgcmVqKSA6IHJlc29sdXRpb24oY2hhaW4sIHZhbHVlLCByZXMpO1xuXHQgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXgpIHtcblx0ICAgICAgICAgICAgICAgIHJlc29sdXRpb24oY2hhaW4sIGV4LCByZWopO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9IGNhdGNoIChleCkge1xuXHQgICAgICAgICAgICByZXNvbHV0aW9uKGNoYWluLCBleCwgcmVqKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIGNoYWluO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIFRoZW5hYmxlKHJlc29sdmVyKSB7XG5cdCAgICAgICAgdGhpcy5fcmVzb2x2ZXIgPSByZXNvbHZlcjtcblx0ICAgICAgICB0aGlzLnRoZW4gPSB0aGVuO1xuXHQgICAgfTtcblx0XG5cdCAgICBUaGVuYWJsZS5yZXNvbHZlID0gZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICByZXR1cm4gVGhlbmFibGUuaXNUaGVuYWJsZSh2KSA/IHYgOiB7IHRoZW46IGZ1bmN0aW9uIHRoZW4ocmVzb2x2ZSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodik7XG5cdCAgICAgICAgICAgIH0gfTtcblx0ICAgIH07XG5cdFxuXHQgICAgVGhlbmFibGUuaXNUaGVuYWJsZSA9IGlzVGhlbmFibGU7XG5cdFxuXHQgICAgcmV0dXJuIFRoZW5hYmxlO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHQvKipcblx0ICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG5cdCAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdCAqL1xuXHRcblx0LyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cblx0dmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblx0XG5cdC8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xuXHR2YXIgTkFOID0gMCAvIDA7XG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG5cdHZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXHRcblx0LyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cblx0dmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXHRcblx0LyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cblx0dmFyIGZyZWVHbG9iYWwgPSAodHlwZW9mIGdsb2JhbCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoZ2xvYmFsKSkgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cdFxuXHQvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xuXHR2YXIgZnJlZVNlbGYgPSAodHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHNlbGYpKSA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblx0XG5cdC8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xuXHR2YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuXHQgICAgbmF0aXZlTWluID0gTWF0aC5taW47XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgdGltZXN0YW1wIG9mIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlXG5cdCAqIHRoZSBVbml4IGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAyLjQuMFxuXHQgKiBAY2F0ZWdvcnkgRGF0ZVxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lc3RhbXAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcblx0ICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuXHQgKiB9LCBfLm5vdygpKTtcblx0ICogLy8gPT4gTG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgaW52b2NhdGlvbi5cblx0ICovXG5cdHZhciBub3cgPSBmdW5jdGlvbiBub3coKSB7XG5cdCAgcmV0dXJuIHJvb3QuRGF0ZS5ub3coKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcblx0ICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG5cdCAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcblx0ICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG5cdCAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZVxuXHQgKiBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkXG5cdCAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnRcblx0ICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2Bcblx0ICogaW52b2NhdGlvbi5cblx0ICpcblx0ICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpc1xuXHQgKiBpbnZva2VkIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuXHQgKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG5cdCAqXG5cdCAqIElmIGB3YWl0YCBpcyBgMGAgYW5kIGBsZWFkaW5nYCBpcyBgZmFsc2VgLCBgZnVuY2AgaW52b2NhdGlvbiBpcyBkZWZlcnJlZFxuXHQgKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG5cdCAqXG5cdCAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKVxuXHQgKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV1cblx0ICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdXG5cdCAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC5cblx0ICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuXHQgKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LlxuXHQgKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuXHQgKlxuXHQgKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy5cblx0ICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuXHQgKiAgICdsZWFkaW5nJzogdHJ1ZSxcblx0ICogICAndHJhaWxpbmcnOiBmYWxzZVxuXHQgKiB9KSk7XG5cdCAqXG5cdCAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuXG5cdCAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuXHQgKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG5cdCAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTtcblx0ICpcblx0ICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyBkZWJvdW5jZWQgaW52b2NhdGlvbi5cblx0ICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7XG5cdCAqL1xuXHRmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG5cdCAgdmFyIGxhc3RBcmdzLFxuXHQgICAgICBsYXN0VGhpcyxcblx0ICAgICAgbWF4V2FpdCxcblx0ICAgICAgcmVzdWx0LFxuXHQgICAgICB0aW1lcklkLFxuXHQgICAgICBsYXN0Q2FsbFRpbWUsXG5cdCAgICAgIGxhc3RJbnZva2VUaW1lID0gMCxcblx0ICAgICAgbGVhZGluZyA9IGZhbHNlLFxuXHQgICAgICBtYXhpbmcgPSBmYWxzZSxcblx0ICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXHRcblx0ICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuXHQgIH1cblx0ICB3YWl0ID0gdG9OdW1iZXIod2FpdCkgfHwgMDtcblx0ICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcblx0ICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcblx0ICAgIG1heGluZyA9ICdtYXhXYWl0JyBpbiBvcHRpb25zO1xuXHQgICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcblx0ICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcblx0ICAgIHZhciBhcmdzID0gbGFzdEFyZ3MsXG5cdCAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzO1xuXHRcblx0ICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG5cdCAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG5cdCAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGxlYWRpbmdFZGdlKHRpbWUpIHtcblx0ICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG5cdCAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG5cdCAgICAvLyBTdGFydCB0aGUgdGltZXIgZm9yIHRoZSB0cmFpbGluZyBlZGdlLlxuXHQgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuXHQgICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7XG5cdCAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuXHQgICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG5cdCAgICAgICAgcmVzdWx0ID0gd2FpdCAtIHRpbWVTaW5jZUxhc3RDYWxsO1xuXHRcblx0ICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuXHQgICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcblx0ICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lO1xuXHRcblx0ICAgIC8vIEVpdGhlciB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCBhY3Rpdml0eSBoYXMgc3RvcHBlZCBhbmQgd2UncmUgYXQgdGhlXG5cdCAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuXHQgICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuXHQgICAgcmV0dXJuIGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8IHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQgfHwgdGltZVNpbmNlTGFzdENhbGwgPCAwIHx8IG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB0aW1lckV4cGlyZWQoKSB7XG5cdCAgICB2YXIgdGltZSA9IG5vdygpO1xuXHQgICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuXHQgICAgICByZXR1cm4gdHJhaWxpbmdFZGdlKHRpbWUpO1xuXHQgICAgfVxuXHQgICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG5cdCAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHJlbWFpbmluZ1dhaXQodGltZSkpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdHJhaWxpbmdFZGdlKHRpbWUpIHtcblx0ICAgIHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cdFxuXHQgICAgLy8gT25seSBpbnZva2UgaWYgd2UgaGF2ZSBgbGFzdEFyZ3NgIHdoaWNoIG1lYW5zIGBmdW5jYCBoYXMgYmVlblxuXHQgICAgLy8gZGVib3VuY2VkIGF0IGxlYXN0IG9uY2UuXG5cdCAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcblx0ICAgICAgcmV0dXJuIGludm9rZUZ1bmModGltZSk7XG5cdCAgICB9XG5cdCAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGNhbmNlbCgpIHtcblx0ICAgIGlmICh0aW1lcklkICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuXHQgICAgfVxuXHQgICAgbGFzdEludm9rZVRpbWUgPSAwO1xuXHQgICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBmbHVzaCgpIHtcblx0ICAgIHJldHVybiB0aW1lcklkID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuXHQgICAgdmFyIHRpbWUgPSBub3coKSxcblx0ICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXHRcblx0ICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuXHQgICAgbGFzdFRoaXMgPSB0aGlzO1xuXHQgICAgbGFzdENhbGxUaW1lID0gdGltZTtcblx0XG5cdCAgICBpZiAoaXNJbnZva2luZykge1xuXHQgICAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKG1heGluZykge1xuXHQgICAgICAgIC8vIEhhbmRsZSBpbnZvY2F0aW9ucyBpbiBhIHRpZ2h0IGxvb3AuXG5cdCAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0ICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuXHQgIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuXHQgIHJldHVybiBkZWJvdW5jZWQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcblx0ICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuXHQgKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc09iamVjdCh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoXy5ub29wKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KG51bGwpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcblx0ICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodmFsdWUpO1xuXHQgIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcblx0ICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc09iamVjdExpa2Uoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICpcblx0ICogXy5pc09iamVjdExpa2UobnVsbCk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcblx0ICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih2YWx1ZSkpID09ICdvYmplY3QnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc1N5bWJvbCgnYWJjJyk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuXHQgIHJldHVybiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih2YWx1ZSkpID09ICdzeW1ib2wnIHx8IGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKDMuMik7XG5cdCAqIC8vID0+IDMuMlxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuXHQgKiAvLyA9PiA1ZS0zMjRcblx0ICpcblx0ICogXy50b051bWJlcihJbmZpbml0eSk7XG5cdCAqIC8vID0+IEluZmluaXR5XG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoJzMuMicpO1xuXHQgKiAvLyA9PiAzLjJcblx0ICovXG5cdGZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gTkFOO1xuXHQgIH1cblx0ICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG5cdCAgICB2YXIgb3RoZXIgPSB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PSAnZnVuY3Rpb24nID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG5cdCAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IG90aGVyICsgJycgOiBvdGhlcjtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG5cdCAgfVxuXHQgIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcblx0ICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuXHQgIHJldHVybiBpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpIDogcmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBkZWJvdW5jZTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfZG9tVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdHZhciBfY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgU2VhcmNoRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBTZWFyY2hFbGVtZW50KCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgX3JlZiRoYW5kbGVTdWJtaXQgPSBfcmVmLmhhbmRsZVN1Ym1pdCxcblx0ICAgICAgICBoYW5kbGVTdWJtaXQgPSBfcmVmJGhhbmRsZVN1Ym1pdCA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZVN1Ym1pdCxcblx0ICAgICAgICBfcmVmJHNlYXJjaExhYmVsID0gX3JlZi5zZWFyY2hMYWJlbCxcblx0ICAgICAgICBzZWFyY2hMYWJlbCA9IF9yZWYkc2VhcmNoTGFiZWwgPT09IHVuZGVmaW5lZCA/ICdzZWFyY2gnIDogX3JlZiRzZWFyY2hMYWJlbCxcblx0ICAgICAgICBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG5cdCAgICAgICAgY2xhc3NOYW1lcyA9IF9yZWYkY2xhc3NOYW1lcyA9PT0gdW5kZWZpbmVkID8ge30gOiBfcmVmJGNsYXNzTmFtZXM7XG5cdFxuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNlYXJjaEVsZW1lbnQpO1xuXHRcblx0ICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBbJ2dlb3NlYXJjaCcsIGNsYXNzTmFtZXMuY29udGFpbmVyXS5qb2luKCcgJykpO1xuXHQgICAgdmFyIGZvcm0gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdmb3JtJywgWycnLCBjbGFzc05hbWVzLmZvcm1dLmpvaW4oJyAnKSwgY29udGFpbmVyKTtcblx0ICAgIHZhciBpbnB1dCA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2lucHV0JywgWydnbGFzcycsIGNsYXNzTmFtZXMuaW5wdXRdLmpvaW4oJyAnKSwgZm9ybSk7XG5cdFxuXHQgICAgaW5wdXQudHlwZSA9ICd0ZXh0Jztcblx0ICAgIGlucHV0LnBsYWNlaG9sZGVyID0gc2VhcmNoTGFiZWw7XG5cdFxuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbklucHV0KGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbktleVVwKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbktleVByZXNzKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbkZvY3VzKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uQmx1cihlKTtcblx0ICAgIH0sIGZhbHNlKTtcblx0XG5cdCAgICB0aGlzLmVsZW1lbnRzID0geyBjb250YWluZXI6IGNvbnRhaW5lciwgZm9ybTogZm9ybSwgaW5wdXQ6IGlucHV0IH07XG5cdCAgICB0aGlzLmhhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhTZWFyY2hFbGVtZW50LCBbe1xuXHQgICAga2V5OiAnb25Gb2N1cycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25Gb2N1cygpIHtcblx0ICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKHRoaXMuZWxlbWVudHMuZm9ybSwgJ2FjdGl2ZScpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uQmx1cicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25CbHVyKCkge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkodGhpcy5lbGVtZW50cy5mb3JtLCAnYWN0aXZlJyk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb25TdWJtaXQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uU3VibWl0KGV2ZW50KSB7XG5cdCAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgICAgdmFyIF9lbGVtZW50cywgaW5wdXQsIGNvbnRhaW5lcjtcblx0XG5cdCAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XG5cdCAgICAgICAgX2VsZW1lbnRzID0gdGhpcy5lbGVtZW50cywgaW5wdXQgPSBfZWxlbWVudHMuaW5wdXQsIGNvbnRhaW5lciA9IF9lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG5cdFxuXHQgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZVN1Ym1pdCh7IHF1ZXJ5OiBpbnB1dC52YWx1ZSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHQgICAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcblx0ICAgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG5cdCAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb25JbnB1dCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25JbnB1dCgpIHtcblx0ICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnZXJyb3InKTtcblx0ICAgICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvbktleVVwJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleVVwKGV2ZW50KSB7XG5cdCAgICAgIHZhciBfZWxlbWVudHMyID0gdGhpcy5lbGVtZW50cyxcblx0ICAgICAgICAgIGNvbnRhaW5lciA9IF9lbGVtZW50czIuY29udGFpbmVyLFxuXHQgICAgICAgICAgaW5wdXQgPSBfZWxlbWVudHMyLmlucHV0O1xuXHRcblx0ICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IF9jb25zdGFudHMuRVNDQVBFX0tFWSkge1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHRcblx0ICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuXHRcblx0ICAgICAgICBkb2N1bWVudC5ib2R5LmZvY3VzKCk7XG5cdCAgICAgICAgZG9jdW1lbnQuYm9keS5ibHVyKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvbktleVByZXNzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleVByZXNzKGV2ZW50KSB7XG5cdCAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBfY29uc3RhbnRzLkVOVEVSX0tFWSkge1xuXHQgICAgICAgIHRoaXMub25TdWJtaXQoZXZlbnQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2V0UXVlcnknLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFF1ZXJ5KHF1ZXJ5KSB7XG5cdCAgICAgIHZhciBpbnB1dCA9IHRoaXMuZWxlbWVudHMuaW5wdXQ7XG5cdFxuXHQgICAgICBpbnB1dC52YWx1ZSA9IHF1ZXJ5O1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFNlYXJjaEVsZW1lbnQ7XG5cdH0oKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFNlYXJjaEVsZW1lbnQ7XG5cbi8qKiovIH0sXG4vKiAxNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnQgKi9cblx0dmFyIGNyZWF0ZUVsZW1lbnQgPSBleHBvcnRzLmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KGVsZW1lbnQpIHtcblx0ICB2YXIgY2xhc3NOYW1lcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG5cdCAgdmFyIHBhcmVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbnVsbDtcblx0XG5cdCAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50KTtcblx0ICBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWVzO1xuXHRcblx0ICBpZiAocGFyZW50KSB7XG5cdCAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGVsO1xuXHR9O1xuXHRcblx0dmFyIGNyZWF0ZVNjcmlwdEVsZW1lbnQgPSBleHBvcnRzLmNyZWF0ZVNjcmlwdEVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVTY3JpcHRFbGVtZW50KHVybCwgY2IpIHtcblx0ICB2YXIgc2NyaXB0ID0gY3JlYXRlRWxlbWVudCgnc2NyaXB0JywgbnVsbCwgZG9jdW1lbnQuYm9keSk7XG5cdCAgc2NyaXB0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2phdmFzY3JpcHQnKTtcblx0XG5cdCAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG5cdCAgICB3aW5kb3dbY2JdID0gZnVuY3Rpb24gKGpzb24pIHtcblx0ICAgICAgc2NyaXB0LnJlbW92ZSgpO1xuXHQgICAgICBkZWxldGUgd2luZG93W2NiXTtcblx0ICAgICAgcmVzb2x2ZShqc29uKTtcblx0ICAgIH07XG5cdFxuXHQgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3JjJywgdXJsKTtcblx0ICB9KTtcblx0fTtcblx0XG5cdHZhciBhZGRDbGFzc05hbWUgPSBleHBvcnRzLmFkZENsYXNzTmFtZSA9IGZ1bmN0aW9uIGFkZENsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWUpIHtcblx0ICBpZiAoZWxlbWVudCAmJiAhZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuXHQgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHJlbW92ZUNsYXNzTmFtZSA9IGV4cG9ydHMucmVtb3ZlQ2xhc3NOYW1lID0gZnVuY3Rpb24gcmVtb3ZlQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuXHQgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcblx0ICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSxcbi8qIDE1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHR2YXIgRU5URVJfS0VZID0gZXhwb3J0cy5FTlRFUl9LRVkgPSAxMztcblx0dmFyIEVTQ0FQRV9LRVkgPSBleHBvcnRzLkVTQ0FQRV9LRVkgPSAyNztcblx0dmFyIEFSUk9XX0RPV05fS0VZID0gZXhwb3J0cy5BUlJPV19ET1dOX0tFWSA9IDQwO1xuXHR2YXIgQVJST1dfVVBfS0VZID0gZXhwb3J0cy5BUlJPV19VUF9LRVkgPSAzODtcblx0dmFyIEFSUk9XX0xFRlRfS0VZID0gZXhwb3J0cy5BUlJPV19MRUZUX0tFWSA9IDM3O1xuXHR2YXIgQVJST1dfUklHSFRfS0VZID0gZXhwb3J0cy5BUlJPV19SSUdIVF9LRVkgPSAzOTtcblx0XG5cdHZhciBTUEVDSUFMX0tFWVMgPSBleHBvcnRzLlNQRUNJQUxfS0VZUyA9IFtFTlRFUl9LRVksIEVTQ0FQRV9LRVksIEFSUk9XX0RPV05fS0VZLCBBUlJPV19VUF9LRVksIEFSUk9XX0xFRlRfS0VZLCBBUlJPV19SSUdIVF9LRVldO1xuXG4vKioqLyB9LFxuLyogMTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9kb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGN4ID0gZnVuY3Rpb24gY3goKSB7XG5cdCAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGNsYXNzbmFtZXMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgIGNsYXNzbmFtZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gY2xhc3NuYW1lcy5qb2luKCcgJykudHJpbSgpO1xuXHR9O1xuXHRcblx0dmFyIFJlc3VsdExpc3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gUmVzdWx0TGlzdCgpIHtcblx0ICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICBfcmVmJGhhbmRsZUNsaWNrID0gX3JlZi5oYW5kbGVDbGljayxcblx0ICAgICAgICBoYW5kbGVDbGljayA9IF9yZWYkaGFuZGxlQ2xpY2sgPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uICgpIHt9IDogX3JlZiRoYW5kbGVDbGljayxcblx0ICAgICAgICBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG5cdCAgICAgICAgY2xhc3NOYW1lcyA9IF9yZWYkY2xhc3NOYW1lcyA9PT0gdW5kZWZpbmVkID8ge30gOiBfcmVmJGNsYXNzTmFtZXM7XG5cdFxuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlc3VsdExpc3QpO1xuXHRcblx0ICAgIF9pbml0aWFsaXNlUHJvcHMuY2FsbCh0aGlzKTtcblx0XG5cdCAgICB0aGlzLnByb3BzID0geyBoYW5kbGVDbGljazogaGFuZGxlQ2xpY2ssIGNsYXNzTmFtZXM6IGNsYXNzTmFtZXMgfTtcblx0ICAgIHRoaXMuc2VsZWN0ZWQgPSAtMTtcblx0XG5cdCAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgY3goJ3Jlc3VsdHMnLCBjbGFzc05hbWVzLmNvbnRhaW5lcikpO1xuXHQgICAgdmFyIHJlc3VsdEl0ZW0gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBjeChjbGFzc05hbWVzLml0ZW0pKTtcblx0XG5cdCAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2ssIHRydWUpO1xuXHQgICAgdGhpcy5lbGVtZW50cyA9IHsgY29udGFpbmVyOiBjb250YWluZXIsIHJlc3VsdEl0ZW06IHJlc3VsdEl0ZW0gfTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhSZXN1bHRMaXN0LCBbe1xuXHQgICAga2V5OiAncmVuZGVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgIHZhciByZXN1bHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTtcblx0ICAgICAgdmFyIF9lbGVtZW50cyA9IHRoaXMuZWxlbWVudHMsXG5cdCAgICAgICAgICBjb250YWluZXIgPSBfZWxlbWVudHMuY29udGFpbmVyLFxuXHQgICAgICAgICAgcmVzdWx0SXRlbSA9IF9lbGVtZW50cy5yZXN1bHRJdGVtO1xuXHRcblx0ICAgICAgdGhpcy5jbGVhcigpO1xuXHRcblx0ICAgICAgcmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChyZXN1bHQsIGlkeCkge1xuXHQgICAgICAgIHZhciBjaGlsZCA9IHJlc3VsdEl0ZW0uY2xvbmVOb2RlKHRydWUpO1xuXHQgICAgICAgIGNoaWxkLnNldEF0dHJpYnV0ZSgnZGF0YS1rZXknLCBpZHgpO1xuXHQgICAgICAgIGNoaWxkLmlubmVySFRNTCA9IHJlc3VsdC5sYWJlbDtcblx0ICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMucmVzdWx0cyA9IHJlc3VsdHM7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2VsZWN0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3QoaW5kZXgpIHtcblx0ICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbmZ1c2luZy1hcnJvd1xuXHRcblx0ICAgICAgQXJyYXkuZnJvbShjb250YWluZXIuY2hpbGRyZW4pLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkLCBpZHgpIHtcblx0ICAgICAgICByZXR1cm4gaWR4ID09PSBpbmRleCA/ICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjaGlsZCwgJ2FjdGl2ZScpIDogKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJyk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgdGhpcy5zZWxlY3RlZCA9IGluZGV4O1xuXHQgICAgICByZXR1cm4gdGhpcy5yZXN1bHRzW2luZGV4XTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdjb3VudCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY291bnQoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnJlc3VsdHMubGVuZ3RoO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NsZWFyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHtcblx0ICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXHRcblx0ICAgICAgd2hpbGUgKGNvbnRhaW5lci5sYXN0Q2hpbGQpIHtcblx0ICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmxhc3RDaGlsZCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBSZXN1bHRMaXN0O1xuXHR9KCk7XG5cdFxuXHR2YXIgX2luaXRpYWxpc2VQcm9wcyA9IGZ1bmN0aW9uIF9pbml0aWFsaXNlUHJvcHMoKSB7XG5cdCAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgdGhpcy5vbkNsaWNrID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICB0YXJnZXQgPSBfcmVmMi50YXJnZXQ7XG5cdFxuXHQgICAgdmFyIGhhbmRsZUNsaWNrID0gX3RoaXMucHJvcHMuaGFuZGxlQ2xpY2s7XG5cdCAgICB2YXIgY29udGFpbmVyID0gX3RoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgIGlmICh0YXJnZXQucGFyZW50Tm9kZSAhPT0gY29udGFpbmVyIHx8ICF0YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLWtleScpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaWR4ID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKTtcblx0ICAgIHZhciByZXN1bHQgPSBfdGhpcy5yZXN1bHRzW2lkeF07XG5cdCAgICBoYW5kbGVDbGljayh7IHJlc3VsdDogcmVzdWx0IH0pO1xuXHQgIH07XG5cdH07XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBSZXN1bHRMaXN0O1xuXG4vKioqLyB9LFxuLyogMTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfXJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblx0XG5cdHZhciBfZG9tVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcblx0ICBpZiAoIXNlbGYpIHtcblx0ICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcblx0ICB9cmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihzdXBlckNsYXNzKSkpO1xuXHQgIH1zdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pO2lmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcblx0fVxuXHRcblx0dmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcblx0ICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXHRcblx0ICBmdW5jdGlvbiBQcm92aWRlcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG5cdCAgICBrZXk6ICdlbmRwb2ludCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG5cdCAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcblx0ICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbCxcblx0ICAgICAgICAgIGpzb25wID0gX3JlZi5qc29ucDtcblx0XG5cdCAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG5cdCAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuXHQgICAgICAgIGpzb25wOiBqc29ucFxuXHQgICAgICB9KSk7XG5cdFxuXHQgICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9kZXYudmlydHVhbGVhcnRoLm5ldC9SRVNUL3YxL0xvY2F0aW9ucz8nICsgcGFyYW1TdHJpbmc7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncGFyc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG5cdCAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblx0XG5cdCAgICAgIGlmIChkYXRhLnJlc291cmNlU2V0cy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICByZXR1cm4gW107XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBkYXRhLnJlc291cmNlU2V0c1swXS5yZXNvdXJjZXMubWFwKGZ1bmN0aW9uIChyKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHg6IHIucG9pbnQuY29vcmRpbmF0ZXNbMV0sXG5cdCAgICAgICAgICB5OiByLnBvaW50LmNvb3JkaW5hdGVzWzBdLFxuXHQgICAgICAgICAgbGFiZWw6IHIuYWRkcmVzcy5mb3JtYXR0ZWRBZGRyZXNzLFxuXHQgICAgICAgICAgYm91bmRzOiBbW3IuYmJveFswXSwgci5iYm94WzFdXSwgLy8gcywgd1xuXHQgICAgICAgICAgW3IuYmJveFsyXSwgci5iYm94WzNdXV0sXG5cdCAgICAgICAgICByYXc6IHJcblx0ICAgICAgICB9O1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZWFyY2gnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmMykge1xuXHQgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuXHQgICAgICAgIHZhciBxdWVyeSwgcHJvdG9jb2wsIGpzb25wLCB1cmwsIGpzb247XG5cdCAgICAgICAgcXVlcnkgPSBfcmVmMy5xdWVyeTtcblx0XG5cdCAgICAgICAgcHJvdG9jb2wgPSB+bG9jYXRpb24ucHJvdG9jb2wuaW5kZXhPZignaHR0cCcpID8gbG9jYXRpb24ucHJvdG9jb2wgOiAnaHR0cHM6Jztcblx0XG5cdCAgICAgICAganNvbnAgPSAnQklOR19KU09OUF9DQl8nICsgRGF0ZS5ub3coKTtcblx0ICAgICAgICB1cmwgPSB0aGlzLmVuZHBvaW50KHsgcXVlcnk6IHF1ZXJ5LCBwcm90b2NvbDogcHJvdG9jb2wsIGpzb25wOiBqc29ucCB9KTtcblx0XG5cdCAgICAgICAgcmV0dXJuICgwLCBfZG9tVXRpbHMuY3JlYXRlU2NyaXB0RWxlbWVudCkodXJsLCBqc29ucCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcblx0ICAgICAgICAgIGpzb24gPSAkYXdhaXRfMTtcblx0ICAgICAgICAgIHJldHVybiAkcmV0dXJuKHRoaXMucGFyc2UoeyBkYXRhOiBqc29uIH0pKTtcblx0ICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBQcm92aWRlcjtcblx0fShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cbi8qKiovIH0sXG4vKiAxOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXHRcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cdFxuXHQgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2dldFBhcmFtU3RyaW5nJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQYXJhbVN0cmluZyhwYXJhbXMpIHtcblx0ICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHBhcmFtcykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pO1xuXHQgICAgICB9KS5qb2luKCcmJyk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2VhcmNoJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZWFyY2goX3JlZikge1xuXHQgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuXHQgICAgICAgIHZhciBxdWVyeSwgcHJvdG9jb2wsIHVybCwgcmVxdWVzdCwganNvbjtcblx0ICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnk7XG5cdFxuXHQgICAgICAgIHByb3RvY29sID0gfmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoJ2h0dHAnKSA/IGxvY2F0aW9uLnByb3RvY29sIDogJ2h0dHBzOic7XG5cdCAgICAgICAgdXJsID0gdGhpcy5lbmRwb2ludCh7IHF1ZXJ5OiBxdWVyeSwgcHJvdG9jb2w6IHByb3RvY29sIH0pO1xuXHRcblx0ICAgICAgICByZXR1cm4gZmV0Y2godXJsKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHQgICAgICAgICAgcmVxdWVzdCA9ICRhd2FpdF8xO1xuXHQgICAgICAgICAgcmV0dXJuIHJlcXVlc3QuanNvbigpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG5cdCAgICAgICAgICAgIGpzb24gPSAkYXdhaXRfMjtcblx0ICAgICAgICAgICAgcmV0dXJuICRyZXR1cm4odGhpcy5wYXJzZSh7IGRhdGE6IGpzb24gfSkpO1xuXHQgICAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9LFxuLyogMTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcblx0ICB9c3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTtpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG5cdCAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblx0XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZW5kcG9pbnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG5cdCAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblx0XG5cdCAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuXHQgICAgICAgIGY6ICdqc29uJyxcblx0ICAgICAgICB0ZXh0OiBxdWVyeVxuXHQgICAgICB9KSk7XG5cdFxuXHQgICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9nZW9jb2RlLmFyY2dpcy5jb20vYXJjZ2lzL3Jlc3Qvc2VydmljZXMvV29ybGQvR2VvY29kZVNlcnZlci9maW5kPycgKyBwYXJhbVN0cmluZztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcblx0ICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXHRcblx0ICAgICAgcmV0dXJuIGRhdGEubG9jYXRpb25zLm1hcChmdW5jdGlvbiAocikge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICB4OiByLmZlYXR1cmUuZ2VvbWV0cnkueCxcblx0ICAgICAgICAgIHk6IHIuZmVhdHVyZS5nZW9tZXRyeS55LFxuXHQgICAgICAgICAgbGFiZWw6IHIubmFtZSxcblx0ICAgICAgICAgIGJvdW5kczogW1tyLmV4dGVudC55bWluLCByLmV4dGVudC54bWluXSwgLy8gcywgd1xuXHQgICAgICAgICAgW3IuZXh0ZW50LnltYXgsIHIuZXh0ZW50LnhtYXhdXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSxcbi8qIDIwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfXJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcblx0ICBpZiAoIXNlbGYpIHtcblx0ICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcblx0ICB9cmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGNhbGwpKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcblx0ICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArICh0eXBlb2Ygc3VwZXJDbGFzcyA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7XG5cdCAgfXN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7aWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuXHQgIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2VuZHBvaW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcblx0ICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuXHQgICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcblx0ICAgICAgICBhZGRyZXNzOiBxdWVyeVxuXHQgICAgICB9KSk7XG5cdFxuXHQgICAgICAvLyBnb29nbGUgcmVxdWlyZXMgYSBzZWN1cmUgY29ubmVjdGlvbiB3aGVuIHVzaW5nIGFwaSBrZXlzXG5cdCAgICAgIHZhciBwcm90byA9IHBhcmFtcyAmJiBwYXJhbXMua2V5ID8gJ2h0dHBzOicgOiBwcm90b2NvbDtcblx0ICAgICAgcmV0dXJuIHByb3RvICsgJy8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24/JyArIHBhcmFtU3RyaW5nO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BhcnNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuXHQgICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cdFxuXHQgICAgICByZXR1cm4gZGF0YS5yZXN1bHRzLm1hcChmdW5jdGlvbiAocikge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICB4OiByLmdlb21ldHJ5LmxvY2F0aW9uLmxuZyxcblx0ICAgICAgICAgIHk6IHIuZ2VvbWV0cnkubG9jYXRpb24ubGF0LFxuXHQgICAgICAgICAgbGFiZWw6IHIuZm9ybWF0dGVkX2FkZHJlc3MsXG5cdCAgICAgICAgICBib3VuZHM6IFtbci5nZW9tZXRyeS52aWV3cG9ydC5zb3V0aHdlc3QubGF0LCByLmdlb21ldHJ5LnZpZXdwb3J0LnNvdXRod2VzdC5sbmddLCAvLyBzLCB3XG5cdCAgICAgICAgICBbci5nZW9tZXRyeS52aWV3cG9ydC5ub3J0aGVhc3QubGF0LCByLmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sbmddXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSxcbi8qIDIxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfXJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcblx0ICBpZiAoIXNlbGYpIHtcblx0ICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcblx0ICB9cmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGNhbGwpKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcblx0ICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArICh0eXBlb2Ygc3VwZXJDbGFzcyA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7XG5cdCAgfXN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7aWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuXHQgIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2VuZHBvaW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcblx0ICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuXHQgICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcblx0ICAgICAgICBmb3JtYXQ6ICdqc29uJyxcblx0ICAgICAgICBxOiBxdWVyeVxuXHQgICAgICB9KSk7XG5cdFxuXHQgICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvc2VhcmNoPycgKyBwYXJhbVN0cmluZztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcblx0ICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXHRcblx0ICAgICAgcmV0dXJuIGRhdGEubWFwKGZ1bmN0aW9uIChyKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHg6IHIubG9uLFxuXHQgICAgICAgICAgeTogci5sYXQsXG5cdCAgICAgICAgICBsYWJlbDogci5kaXNwbGF5X25hbWUsXG5cdCAgICAgICAgICBib3VuZHM6IFtbcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzBdKSwgcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzJdKV0sIC8vIHMsIHdcblx0ICAgICAgICAgIFtwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMV0pLCBwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbM10pXV0sXG5cdCAgICAgICAgICByYXc6IHJcblx0ICAgICAgICB9O1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBQcm92aWRlcjtcblx0fShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cbi8qKiovIH0sXG4vKiAyMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLlNldHVwUGFuZWwgPSBTZXR1cFBhbmVsO1xuXHRleHBvcnRzLnVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQgPSB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0O1xuXHRcblx0dmFyIF9sYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0dmFyIF9vcGFjaXR5U2xpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHRmdW5jdGlvbiBTZXR1cFBhbmVsKGxheWVycywgbGF5b3V0KSB7XG5cdCAgICB2YXIgbGF5ZXJHcm91cHMgPSBtYWtlTGF5ZXJHcm91cHMobGF5b3V0WydsYXllci1ncm91cHMtb3JkZXInXSk7XG5cdCAgICBtYWtlTGF5ZXJFbGVtcyhsYXllckdyb3VwcywgbGF5ZXJzKTtcblx0ICAgIG1ha2VQYW5lbERyYWdnYWJsZSgpO1xuXHQgICAgc2V0UGFuZWxTY3JvbGxIYW5kbGVyKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldFBhbmVsU2Nyb2xsSGFuZGxlcigpIHtcblx0ICAgIHZhciBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpO1xuXHQgICAgcGFuZWwub25zY3JvbGwgPSB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlUGFuZWxEcmFnZ2FibGUoKSB7XG5cdCAgICB2YXIgb3ZlcmxheSA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsLWRyYWctb3ZlcmxheScpO1xuXHRcblx0ICAgIG92ZXJsYXkuY2FsbChkMy5kcmFnKCkub24oJ2RyYWcnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcGFuZWxEcmFnRXZlbnRIYW5kbGVyLmNhbGwodGhpcyk7XG5cdCAgICB9KSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhbmVsRHJhZ0V2ZW50SGFuZGxlcigpIHtcblx0ICAgIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKTtcblx0ICAgIHVwZGF0ZVBhbmVsV2lkdGgoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpIHtcblx0ICAgIHZhciBwYW5lbCA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsJyk7XG5cdCAgICB2YXIgcGFuZWxPZmZzZXRIZWlnaHQgPSBwYW5lbC5wcm9wZXJ0eSgnb2Zmc2V0SGVpZ2h0Jyk7XG5cdCAgICB2YXIgcGFuZWxEcmFnT3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbC1kcmFnLW92ZXJsYXknKTtcblx0ICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwtaGVhZGVyJyk7XG5cdFxuXHQgICAgdmFyIG5ld0hlaWdodDtcblx0XG5cdCAgICBpZiAocGFuZWwuY2xhc3NlZCgnZ3JhcGhzLWFjdGl2ZScpKSB7XG5cdCAgICAgICAgdmFyIGdyYXBoTGlzdEV4dHJhU3BhY2UgPSA3MDA7XG5cdCAgICAgICAgdmFyIGdyYXBoTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaC1saXN0Jyk7XG5cdCAgICAgICAgbmV3SGVpZ2h0ID0gaGVhZGVyLnNjcm9sbEhlaWdodCArIGdyYXBoTGlzdC5zY3JvbGxIZWlnaHQgKyBncmFwaExpc3RFeHRyYVNwYWNlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBwYW5lbC5jbGFzc2VkKCdsYXllcnMtYWN0aXZlJylcblx0ICAgICAgICB2YXIgbGF5ZXJMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheWVyLWxpc3QnKTtcblx0ICAgICAgICBuZXdIZWlnaHQgPSBoZWFkZXIuc2Nyb2xsSGVpZ2h0ICsgbGF5ZXJMaXN0LnNjcm9sbEhlaWdodDtcblx0ICAgIH1cblx0ICAgIG5ld0hlaWdodCA9IG5ld0hlaWdodCA+IHBhbmVsT2Zmc2V0SGVpZ2h0ID8gXCJcIiArIG5ld0hlaWdodCArICdweCcgOiBudWxsO1xuXHQgICAgcGFuZWxEcmFnT3ZlcmxheS5zdHlsZS5oZWlnaHQgPSBuZXdIZWlnaHQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZVBhbmVsV2lkdGgoKSB7XG5cdCAgICB2YXIgcGFuZWwgPSBkMy5zZWxlY3QoJyNyaWdodC1wYW5lbCcpO1xuXHQgICAgdmFyIHBhbmVsTWluV2lkdGggPSArcGFuZWwuc3R5bGUoJ21pbi13aWR0aCcpLnNsaWNlKDAsIC0yKTtcblx0ICAgIHZhciBwYW5lbENsaWVudFdpZHRoID0gcGFuZWwucHJvcGVydHkoJ2NsaWVudFdpZHRoJyk7XG5cdFxuXHQgICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd3JhcHBlcicpO1xuXHQgICAgdmFyIHdyYXBwZXJXaWR0aCA9IHdyYXBwZXIuY2xpZW50V2lkdGg7XG5cdFxuXHQgICAgdmFyIG1hcFdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLXdyYXBwZXInKTtcblx0XG5cdCAgICB2YXIgbW91c2VYID0gZDMuZXZlbnQuc291cmNlRXZlbnQueDtcblx0ICAgIHZhciB4RGVsdGEgPSB3cmFwcGVyV2lkdGggLSBtb3VzZVggLSBwYW5lbENsaWVudFdpZHRoO1xuXHRcblx0ICAgIHZhciBuZXdQYW5lbFdpZHRoID0gcGFuZWxDbGllbnRXaWR0aCArIHhEZWx0YTtcblx0ICAgIG5ld1BhbmVsV2lkdGggPSBuZXdQYW5lbFdpZHRoIDwgcGFuZWxNaW5XaWR0aCA/IHBhbmVsTWluV2lkdGggOiBuZXdQYW5lbFdpZHRoID4gd3JhcHBlcldpZHRoID8gd3JhcHBlcldpZHRoIDogbmV3UGFuZWxXaWR0aDtcblx0ICAgIG1hcFdyYXBwZXIuc3R5bGUucGFkZGluZ1JpZ2h0ID0gXCJcIiArIG5ld1BhbmVsV2lkdGggKyAncHgnO1xuXHQgICAgcGFuZWwuc3R5bGUoJ3dpZHRoJywgXCJcIiArIG5ld1BhbmVsV2lkdGggKyAncHgnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyR3JvdXBzKGxheW91dCkge1xuXHQgICAgcmV0dXJuIGQzLnNlbGVjdCgnI2xheWVyLWxpc3QnKS5zZWxlY3RBbGwoJy5sYXllci1ncm91cC13cmFwcGVyJykuZGF0YShsYXlvdXQpLmVudGVyKCkuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cC13cmFwcGVyJykuYXR0cignaWQnLCBmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgIHJldHVybiBsYXllckdyb3VwLmlkO1xuXHQgICAgfSkuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXJHcm91cC5hY3RpdmU7XG5cdCAgICB9KS5lYWNoKGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAtYnRuIGJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgICAgIGxheWVyR3JvdXAuYWN0aXZlID0gIWxheWVyR3JvdXAuYWN0aXZlO1xuXHQgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gbGF5ZXJHcm91cC5hY3RpdmU7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KCk7XG5cdCAgICAgICAgfSkudGV4dChsYXllckdyb3VwLm5hbWUpO1xuXHQgICAgfSkuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cCcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGF5ZXJFbGVtcyhsYXllckdyb3VwcywgbGF5ZXJzKSB7XG5cdCAgICBsYXllckdyb3Vwcy5zZWxlY3RBbGwoJy5sYXllci1zZWxlY3QnKS5kYXRhKGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyc1tsYXllckdyb3VwLmlkXTtcblx0ICAgIH0pLmVudGVyKCkuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1zZWxlY3QnKS5lYWNoKGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHZhciBncm91cE5hbWUgPSB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZDtcblx0ICAgICAgICB2YXIgbGF5ZXJEaXYgPSBkMy5zZWxlY3QodGhpcyk7XG5cdCAgICAgICAgbWFrZUNoZWNrYm94KGxheWVyLCBsYXllckRpdik7XG5cdCAgICAgICAgbWFrZUxhYmVsKGxheWVyLCBsYXllckRpdik7XG5cdCAgICAgICAgbWFrZURlc2NyaXB0aW9uKGxheWVyLCBsYXllckRpdik7XG5cdCAgICAgICAgbWFrZUxheWVyVG9vbHMobGF5ZXIsIGxheWVyRGl2KTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlQ2hlY2tib3gobGF5ZXIsIGxheWVyRGl2KSB7XG5cdCAgICBsYXllckRpdi5hcHBlbmQoJ2lucHV0JykuYXR0cigndHlwZScsICdjaGVja2JveCcpLmF0dHIoJ2lkJywgZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyLmlkO1xuXHQgICAgfSkuYXR0cignY2hlY2tlZCcsIGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHJldHVybiBsYXllci5hY3RpdmUgPyAnY2hlY2tlZCcgOiBudWxsO1xuXHQgICAgfSkub24oJ2NsaWNrJywgZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgKDAsIF9sYXllci50b2dnbGVMYXllcikobGF5ZXIpO1xuXHQgICAgICAgIGxheWVyRGl2LnNlbGVjdCgnLmxheWVyLXRvb2xzLXdyYXBwZXInKS5jbGFzc2VkKCdhY3RpdmUnLCBsYXllci5hY3RpdmUpO1xuXHQgICAgICAgIGlmIChsYXllci5hY3RpdmUpICgwLCBfb3BhY2l0eVNsaWRlci5zZXRTbGlkZXJJbml0aWFsUG9zKShsYXllciwgbGF5ZXJEaXYpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYWJlbChsYXllciwgbGF5ZXJEaXYpIHtcblx0ICAgIGxheWVyRGl2LmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItbGFiZWwtd3JhcHBlcicpLmFwcGVuZCgnbGFiZWwnKS5hdHRyKCdmb3InLCBmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXIuaWQ7XG5cdCAgICB9KS5hdHRyKCdjbGFzcycsICdsYXllci1sYWJlbCcpLmh0bWwoZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyLm5hbWU7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZURlc2NyaXB0aW9uKGxheWVyLCBsYXllckRpdikge1xuXHQgICAgaWYgKGxheWVyLmluZm8gJiYgbGF5ZXIuaW5mbyAhPT0gJycpIHtcblx0ICAgICAgICBsYXllckRpdi5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8tYnRuJykudGV4dCgnKD8pJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5zZWxlY3QoJy5sYXllci1pbmZvLXdyYXBwZXInKS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gIWQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdhY3RpdmUnKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIGxheWVyRGl2LmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby13cmFwcGVyJykudGV4dChmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGxheWVyLmluZm87XG5cdCAgICAgICAgfSk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYXllclRvb2xzKGxheWVyLCBsYXllckRpdikge1xuXHQgICAgdmFyIGxheWVyVG9vbHNEaXYgPSBsYXllckRpdi5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLXRvb2xzLXdyYXBwZXInKS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyLmFjdGl2ZTtcblx0ICAgIH0pO1xuXHRcblx0ICAgICgwLCBfb3BhY2l0eVNsaWRlci5tYWtlT3BhY2l0eVNsaWRlcikobGF5ZXIsIGxheWVyVG9vbHNEaXYpO1xuXHQgICAgbWFrZUxlZ2VuZChsYXllciwgbGF5ZXJUb29sc0Rpdik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMZWdlbmQobGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyKSB7XG5cdCAgICBsYXllclRvb2xzV3JhcHBlci5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZC13cmFwcGVyJykuYXBwZW5kKCdpbWcnKS5hdHRyKCdzcmMnLCBsYXllci5sZWdlbmQgfHwgJ21lYW5fbmR2aV9sZWdlbmQuanBnJyk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuR2V0Q3VycmVudExheWVycyA9IEdldEN1cnJlbnRMYXllcnM7XG5cdGV4cG9ydHMuQ3JlYXRlRGVmYXVsdExheWVycyA9IENyZWF0ZURlZmF1bHRMYXllcnM7XG5cdGV4cG9ydHMudG9nZ2xlTGF5ZXIgPSB0b2dnbGVMYXllcjtcblx0ZXhwb3J0cy5lbmFibGVMYXllciA9IGVuYWJsZUxheWVyO1xuXHRleHBvcnRzLmRpc2FibGVMYXllciA9IGRpc2FibGVMYXllcjtcblx0ZXhwb3J0cy51cGRhdGVMYXllck9wYWNpdHkgPSB1cGRhdGVMYXllck9wYWNpdHk7XG5cdFxuXHR2YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0LyoqXHJcblx0ICogTmVlZGVkIGZvciB0aGUgc2hhcmUgdXJsIHNpbmNlIExlYWZsZXQgZG9lcyBub3QgaGF2ZSBhIGRlZmF1bHQgd2F5IHRvIHN1cmZhY2VcclxuXHQgKiB0aGUgb3JkZXIgb2YgbGF5ZXJzIGluIHRoZSBtYXBcclxuXHQgKi9cblx0dmFyIF9jdXJyZW50X2xheWVycyA9IFtdO1xuXHRcblx0LyoqXHJcblx0ICogTm90ZTogbGF5ZXIgaXMgbm90IHRoZSBsZWFmbGV0IGNvbmNlcHQgb2YgYSBsYXllciwgYnV0IHJhdGhlciB0aGUgaW50ZXJuYWxcclxuXHQgKiAgICAgICBvYmplY3Qgd2hpY2ggdHJhY2tzIHRoZW0uIGxheWVyLm1hcExheWVyIGlzIHRoZSBwb2ludGVyIHRvIHRoZVxyXG5cdCAqICAgICAgIGxlYWZsZXQgbGF5ZXIuXHJcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBHZXRDdXJyZW50TGF5ZXJzKCkge1xuXHQgICAgcmV0dXJuIF9jdXJyZW50X2xheWVycztcblx0fVxuXHRcblx0ZnVuY3Rpb24gQ3JlYXRlRGVmYXVsdExheWVycyhsYXllcnMsIGRlZmF1bHRMYXllcnMpIHtcblx0ICAgIHZhciBpLCBqLCBwcm9wLCBsYXllcmdyb3VwO1xuXHQgICAgdmFyIGRlZmF1bHRMYXllcjtcblx0ICAgIHZhciBmb3VuZExheWVyO1xuXHRcblx0ICAgIGlmICghZGVmYXVsdExheWVycyB8fCBkZWZhdWx0TGF5ZXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBkZWZhdWx0TGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZm91bmRMYXllciA9IGZhbHNlO1xuXHQgICAgICAgIGRlZmF1bHRMYXllciA9IGRlZmF1bHRMYXllcnNbaV07XG5cdCAgICAgICAgZm9yIChwcm9wIGluIGxheWVycykge1xuXHQgICAgICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xuXHQgICAgICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuXHQgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGF5ZXJncm91cC5sZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGxheWVyZ3JvdXBbal0uaWQgPT09IGRlZmF1bHRMYXllcikge1xuXHQgICAgICAgICAgICAgICAgICAgIGVuYWJsZUxheWVyKGxheWVyZ3JvdXBbal0pO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvdW5kTGF5ZXIgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChmb3VuZExheWVyKSBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvZ2dsZUxheWVyKGxheWVyKSB7XG5cdCAgICBpZiAoIWxheWVyLmFjdGl2ZSkge1xuXHQgICAgICAgIGVuYWJsZUxheWVyKGxheWVyKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZGlzYWJsZUxheWVyKGxheWVyKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZW5hYmxlTGF5ZXIobGF5ZXIpIHtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHQgICAgbGF5ZXIuYWN0aXZlID0gdHJ1ZTtcblx0ICAgIGxheWVyLm1hcExheWVyID0gbGF5ZXIubWFwTGF5ZXIgfHwgbWFrZVdtc1RpbGVMYXllcihsYXllcik7XG5cdCAgICBtYXAuYWRkTGF5ZXIobGF5ZXIubWFwTGF5ZXIpO1xuXHQgICAgYWRkTGF5ZXJUb0ludGVybmFsVHJhY2tlcihsYXllcik7XG5cdCAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRMYXllclRvSW50ZXJuYWxUcmFja2VyKGxheWVyKSB7XG5cdCAgICBfY3VycmVudF9sYXllcnMucHVzaChsYXllci5pZCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRpc2FibGVMYXllcihsYXllcikge1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkdldE1hcCkoKTtcblx0XG5cdCAgICBsYXllci5hY3RpdmUgPSBmYWxzZTtcblx0ICAgIGlmIChsYXllci5tYXBMYXllciAmJiBtYXAuaGFzTGF5ZXIobGF5ZXIubWFwTGF5ZXIpKSB7XG5cdCAgICAgICAgbWFwLnJlbW92ZUxheWVyKGxheWVyLm1hcExheWVyKTtcblx0ICAgIH1cblx0ICAgIHJlbW92ZUxheWVyRnJvbUludGVybmFsVHJhY2tlcihsYXllcik7XG5cdCAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIobGF5ZXIpIHtcblx0ICAgIHZhciBsb2MgPSBfY3VycmVudF9sYXllcnMuaW5kZXhPZihsYXllci5pZCk7XG5cdCAgICBpZiAobG9jID09PSAtMSkgcmV0dXJuO1xuXHQgICAgX2N1cnJlbnRfbGF5ZXJzLnNwbGljZShsb2MsIDEpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVMYXllck9wYWNpdHkobGF5ZXIsIG5ld09wYWNpdHkpIHtcblx0ICAgIGxheWVyLm9wYWNpdHkgPSBuZXdPcGFjaXR5O1xuXHQgICAgbGF5ZXIubWFwTGF5ZXIuc2V0T3BhY2l0eShuZXdPcGFjaXR5KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVdtc1RpbGVMYXllcihsYXllcikge1xuXHQgICAgcmV0dXJuIEwudGlsZUxheWVyLndtcyhsYXllci51cmwsIHtcblx0ICAgICAgICBsYXllcnM6IGxheWVyLmlkLFxuXHQgICAgICAgIHRyYW5zcGFyZW50OiBsYXllci50cmFuc3BhcmVudCB8fCB0cnVlLFxuXHQgICAgICAgIHZlcnNpb246IGxheWVyLnZlcnNpb24gfHwgJzEuMy4wJyxcblx0ICAgICAgICBjcnM6IGxheWVyLmNycyB8fCBMLkNSUy5FUFNHNDMyNixcblx0ICAgICAgICBmb3JtYXQ6IGxheWVyLmZvcm1hdCB8fCAnaW1hZ2UvcG5nJyxcblx0ICAgICAgICBvcGFjaXR5OiBsYXllci5vcGFjaXR5IHx8IDEuMCxcblx0ICAgICAgICB0aWxlU2l6ZTogbGF5ZXIudGlsZVNpemUgfHwgMjU2XG5cdCAgICB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5DcmVhdGVNYXAgPSBDcmVhdGVNYXA7XG5cdGV4cG9ydHMuR2V0TWFwID0gR2V0TWFwO1xuXHR2YXIgbWFwO1xuXHRcblx0ZnVuY3Rpb24gQ3JlYXRlTWFwKG1hcENvbmZpZykge1xuXHQgICAgdmFyIGlkID0gbWFwQ29uZmlnLmlkIHx8IFwibWFwXCI7XG5cdCAgICB2YXIgb3B0aW9ucyA9IG1hcENvbmZpZy5vcHRpb25zIHx8IHsgXCJzY3JvbGxXaGVlbFpvb21cIjogZmFsc2UgfTtcblx0ICAgIHZhciBpbml0aWFsQ2VudGVyID0gbWFwQ29uZmlnLmNlbnRlciB8fCBbXCIzOC41XCIsIFwiLTgxXCJdO1xuXHQgICAgdmFyIGluaXRpYWxab29tID0gbWFwQ29uZmlnLnpvb20gfHwgNjtcblx0XG5cdCAgICBtYXAgPSBMLm1hcChpZCwgb3B0aW9ucykuc2V0Vmlldyhpbml0aWFsQ2VudGVyLCBpbml0aWFsWm9vbSk7XG5cdCAgICBMLmNvbnRyb2wuYXR0cmlidXRpb24oKS5hZGRUbyhtYXApO1xuXHQgICAgcmV0dXJuIG1hcDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gR2V0TWFwKCkge1xuXHQgICAgcmV0dXJuIG1hcDtcblx0fVxuXG4vKioqLyB9LFxuLyogMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQmluZFVwZGF0ZVNoYXJlVXJsID0gQmluZFVwZGF0ZVNoYXJlVXJsO1xuXHRleHBvcnRzLnVwZGF0ZVNoYXJlVXJsID0gdXBkYXRlU2hhcmVVcmw7XG5cdGV4cG9ydHMuQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnID0gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfYmFzZWxheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdFxuXHR2YXIgX2xheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHR2YXIgX3BvaSA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHRcblx0ZnVuY3Rpb24gQmluZFVwZGF0ZVNoYXJlVXJsKG1hcCkge1xuXHQgICAgbWFwLm9uKFwibW92ZWVuZFwiLCB1cGRhdGVTaGFyZVVybCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZVNoYXJlVXJsKGUpIHtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHQgICAgdmFyIHBhcmFtcyA9IFttYWtlQ2VudGVyU3RyaW5nKG1hcCksIG1ha2Vab29tU3RyaW5nKG1hcCksIG1ha2VMYXllclN0cmluZyhtYXApLCBtYWtlQmFzZUxheWVyU3RyaW5nKG1hcCksIG1ha2VQb2ludHNPZkludGVyZXN0U3RyaW5nKCksIG1ha2VBY3RpdmVUYWJTdHJpbmcoKV07XG5cdFxuXHQgICAgc2V0U2hhcmVVcmwobWFrZVNoYXJlVXJsKHBhcmFtcykpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBBZGRTaGFyZVNldHRpbmdzVG9Db25maWcoY29uZmlnKSB7XG5cdCAgICB2YXIgc2hhcmUgPSBwYXJzZVNoYXJlVXJsKCk7XG5cdCAgICBpZiAoIXNoYXJlKSByZXR1cm47XG5cdCAgICBpZiAoc2hhcmUuY2VudGVyKSBjb25maWcubWFwLmNlbnRlciA9IHNoYXJlLmNlbnRlcjtcblx0ICAgIGlmIChzaGFyZS56b29tKSBjb25maWcubWFwLnpvb20gPSBzaGFyZS56b29tO1xuXHQgICAgaWYgKHNoYXJlLmxheWVycykgYWRkTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlLmxheWVycywgY29uZmlnKTtcblx0ICAgIGlmIChzaGFyZS5iYXNlbGF5ZXJzKSBhZGRCYXNlTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlLmJhc2VsYXllcnMsIGNvbmZpZyk7XG5cdCAgICBpZiAoc2hhcmUucG9pcykgYWRkUG9pbnRzT2ZJbnRlcmVzdFRvQ29uZmlnKHNoYXJlLnBvaXMsIGNvbmZpZyk7XG5cdCAgICBpZiAoc2hhcmUudGFiKSBjb25maWcudGFiID0gc2hhcmUudGFiO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlU2hhcmVVcmwocGFyYW1zKSB7XG5cdCAgICByZXR1cm4gXCI/XCIgKyBwYXJhbXMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7XG5cdCAgICAgICAgcmV0dXJuIHAgIT09IHVuZGVmaW5lZDtcblx0ICAgIH0pLmpvaW4oXCImXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRTaGFyZVVybCh1cmwpIHtcblx0ICAgIGlmICh3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcblx0ICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIFwiXCIsIHVybCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VDZW50ZXJTdHJpbmcobWFwKSB7XG5cdCAgICB2YXIgY2VudGVyID0gbWFwLmdldENlbnRlcigpO1xuXHQgICAgcmV0dXJuIFwiY2VudGVyPVwiICsgY2VudGVyLmxhdC50b1N0cmluZygpICsgXCIsXCIgKyBjZW50ZXIubG5nLnRvU3RyaW5nKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2Vab29tU3RyaW5nKG1hcCkge1xuXHQgICAgcmV0dXJuIFwiem9vbT1cIiArIG1hcC5nZXRab29tKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYXllclN0cmluZyhtYXApIHtcblx0ICAgIHZhciBsYXllcnMgPSBbXTtcblx0ICAgIHZhciBvcGFjaXR5VmFscyA9IHt9O1xuXHQgICAgdmFyIGN1cnJlbnRMYXllcnMgPSAoMCwgX2xheWVyLkdldEN1cnJlbnRMYXllcnMpKCk7XG5cdFxuXHQgICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICB2YXIgb3B0aW9ucyA9IGxheWVyLm9wdGlvbnM7XG5cdCAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sYXllcnMpIHtcblx0ICAgICAgICAgICAgb3BhY2l0eVZhbHNbb3B0aW9ucy5sYXllcnNdID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShcIm9wYWNpdHlcIikgPyBvcHRpb25zLm9wYWNpdHkgOiBcIjFcIjtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgY3VycmVudExheWVyO1xuXHQgICAgdmFyIGk7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgY3VycmVudExheWVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGN1cnJlbnRMYXllciA9IGN1cnJlbnRMYXllcnNbaV07XG5cdCAgICAgICAgbGF5ZXJzLnB1c2goY3VycmVudExheWVyKTtcblx0ICAgICAgICBsYXllcnMucHVzaChvcGFjaXR5VmFsc1tjdXJyZW50TGF5ZXJdKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBcImxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUJhc2VMYXllclN0cmluZyhtYXApIHtcblx0ICAgIHZhciBsYXllcnMgPSBbXTtcblx0ICAgIG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMgJiYgbGF5ZXIub3B0aW9ucy50eXBlID09PSBfYmFzZWxheWVyLkJBU0VfTEFZRVJfVFlQRSkge1xuXHQgICAgICAgICAgICBsYXllcnMucHVzaChsYXllci5vcHRpb25zLmlkKTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBcImJhc2VsYXllcnM9XCIgKyBsYXllcnMuam9pbihcIixcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VQb2ludHNPZkludGVyZXN0U3RyaW5nKCkge1xuXHQgICAgdmFyIHBvaXMgPSAoMCwgX3BvaS5HZXRBbGxQb2ludHNPZkludGVyZXN0KSgpO1xuXHQgICAgaWYgKCFwb2lzLmxlbmd0aCkgcmV0dXJuO1xuXHQgICAgdmFyIHBvaVN0cmluZyA9IFwicG9pcz1cIjtcblx0ICAgIHBvaXMuZm9yRWFjaChmdW5jdGlvbiAocG9pKSB7XG5cdCAgICAgICAgcG9pU3RyaW5nICs9IHBvaS5sYXQgKyAnLCcgKyBwb2kubG5nICsgJzsnO1xuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gcG9pU3RyaW5nO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlQWN0aXZlVGFiU3RyaW5nKCkge1xuXHQgICAgcmV0dXJuIFwidGFiPVwiICsgZDMuc2VsZWN0KFwiLnBhbmVsLXRvcC1idG4uYWN0aXZlXCIpLmF0dHIoXCJkYXRhLWFjdGl2ZVwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGFyc2VTaGFyZVVybCgpIHtcblx0ICAgIHZhciBwYXJhbXMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xuXHQgICAgaWYgKHBhcmFtcyA9PT0gXCJcIikgcmV0dXJuO1xuXHRcblx0ICAgIHBhcmFtcyA9IGdldFBhcmFtc0FycmF5KHBhcmFtcyk7XG5cdCAgICBwYXJhbXMgPSBtYWtlS2V5ZWRQYXJhbXNPYmplY3QocGFyYW1zKTtcblx0XG5cdCAgICBmb3JtYXRQYXJhbXMocGFyYW1zKTtcblx0ICAgIHJldHVybiBwYXJhbXM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldFBhcmFtc0FycmF5KHBhcmFtcykge1xuXHQgICAgcGFyYW1zID0gcGFyYW1zLnN1YnN0cmluZygxKTtcblx0ICAgIHBhcmFtcyA9IHVubWFuZ2xlUGFyYW1TdHJpbmcocGFyYW1zKTtcblx0ICAgIHJldHVybiBwYXJhbXMuc3BsaXQoXCImXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1bm1hbmdsZVBhcmFtU3RyaW5nKHBhcmFtcykge1xuXHQgICAgcmV0dXJuIHBhcmFtcy5yZXBsYWNlKC9cXCUyW2N8Q10vZywgXCIsXCIpLnJlcGxhY2UoL1xcJTNbYnxCXS9nLCBcIjtcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VLZXllZFBhcmFtc09iamVjdChwYXJhbXNBcnIpIHtcblx0ICAgIHZhciBwYXJzZWRQYXJhbXMgPSB7fTtcblx0ICAgIHZhciBwYXJhbVBhaXI7XG5cdCAgICB2YXIgaTtcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgcGFyYW1zQXJyLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgcGFyYW1QYWlyID0gcGFyYW1zQXJyW2ldLnNwbGl0KFwiPVwiKTtcblx0ICAgICAgICBwYXJzZWRQYXJhbXNbcGFyYW1QYWlyWzBdXSA9IHBhcmFtUGFpclsxXTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gcGFyc2VkUGFyYW1zO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRQYXJhbXMocGFyYW1zKSB7XG5cdCAgICBpZiAocGFyYW1zLmNlbnRlcikgcGFyYW1zLmNlbnRlciA9IGZvcm1hdENlbnRlclBhcmFtKHBhcmFtcy5jZW50ZXIpO1xuXHQgICAgaWYgKHBhcmFtcy5sYXllcnMpIHBhcmFtcy5sYXllcnMgPSBmb3JtYXRMYXllclBhcmFtKHBhcmFtcy5sYXllcnMpO1xuXHQgICAgaWYgKHBhcmFtcy5iYXNlbGF5ZXJzKSBwYXJhbXMuYmFzZWxheWVycyA9IGZvcm1hdEJhc2VMYXllclBhcmFtKHBhcmFtcy5iYXNlbGF5ZXJzKTtcblx0ICAgIGlmIChwYXJhbXMucG9pcykgcGFyYW1zLnBvaXMgPSBmb3JtYXRQb2ludHNPZkludGVyZXN0UGFyYW0ocGFyYW1zLnBvaXMpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRDZW50ZXJQYXJhbShjZW50ZXIpIHtcblx0ICAgIHJldHVybiBjZW50ZXIuc3BsaXQoXCIsXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRMYXllclBhcmFtKGxheWVycykge1xuXHQgICAgdmFyIGZvcm1hdHRlZExheWVycyA9IHtcblx0ICAgICAgICBcImVuYWJsZWRMYXllcnNcIjogW10sXG5cdCAgICAgICAgXCJvcGFjaXR5VmFsc1wiOiB7fVxuXHQgICAgfTtcblx0ICAgIHZhciBsYXllcklkO1xuXHQgICAgdmFyIGk7XG5cdFxuXHQgICAgbGF5ZXJzID0gbGF5ZXJzLnNwbGl0KFwiLFwiKTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpID0gaSArIDIpIHtcblx0ICAgICAgICBsYXllcklkID0gbGF5ZXJzW2ldO1xuXHQgICAgICAgIGZvcm1hdHRlZExheWVycy5lbmFibGVkTGF5ZXJzLnB1c2gobGF5ZXJJZCk7XG5cdCAgICAgICAgZm9ybWF0dGVkTGF5ZXJzLm9wYWNpdHlWYWxzW2xheWVySWRdID0gbGF5ZXJzW2kgKyAxXTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gZm9ybWF0dGVkTGF5ZXJzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRCYXNlTGF5ZXJQYXJhbShiYXNlbGF5ZXJzKSB7XG5cdCAgICByZXR1cm4gYmFzZWxheWVycy5zcGxpdChcIixcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFBvaW50c09mSW50ZXJlc3RQYXJhbShwb2lzKSB7XG5cdCAgICByZXR1cm4gcG9pcy5zcGxpdCgnOycpLmZpbHRlcihmdW5jdGlvbiAoc3RyKSB7XG5cdCAgICAgICAgcmV0dXJuIHN0ciAhPT0gJyc7XG5cdCAgICB9KS5tYXAoZnVuY3Rpb24gKHBvaSkge1xuXHQgICAgICAgIHBvaSA9IHBvaS5zcGxpdCgnLCcpO1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIGxhdDogcG9pWzBdLFxuXHQgICAgICAgICAgICBsbmc6IHBvaVsxXVxuXHQgICAgICAgIH07XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlTGF5ZXJTZXR0aW5ncywgY29uZmlnKSB7XG5cdCAgICB2YXIgZW5hYmxlZExheWVycyA9IHNoYXJlTGF5ZXJTZXR0aW5ncy5lbmFibGVkTGF5ZXJzO1xuXHQgICAgY29uZmlnW1wiYWN0aXZlLWxheWVyc1wiXSA9IGVuYWJsZWRMYXllcnM7XG5cdFxuXHQgICAgdmFyIGksIGosIHByb3AsIGxheWVyZ3JvdXA7XG5cdCAgICB2YXIgZW5hYmxlZExheWVyO1xuXHQgICAgdmFyIGZvdW5kTGF5ZXI7XG5cdCAgICB2YXIgbGF5ZXJzID0gY29uZmlnLmxheWVycztcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgZW5hYmxlZExheWVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGZvdW5kTGF5ZXIgPSBmYWxzZTtcblx0ICAgICAgICBlbmFibGVkTGF5ZXIgPSBlbmFibGVkTGF5ZXJzW2ldO1xuXHQgICAgICAgIGZvciAocHJvcCBpbiBsYXllcnMpIHtcblx0ICAgICAgICAgICAgaWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcblx0ICAgICAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcblx0ICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGxheWVyZ3JvdXAubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgICAgICAgIGlmIChsYXllcmdyb3VwW2pdLmlkID09PSBlbmFibGVkTGF5ZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICBsYXllcmdyb3VwW2pdLm9wYWNpdHkgPSBzaGFyZUxheWVyU2V0dGluZ3Mub3BhY2l0eVZhbHNbZW5hYmxlZExheWVyXTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3VuZExheWVyID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoZm91bmRMYXllcikgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRCYXNlTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlQmFzZUxheWVyU2V0dGluZ3MsIGNvbmZpZykge1xuXHQgICAgdmFyIGJhc2VsYXllcnMgPSBjb25maWcuYmFzZWxheWVycztcblx0ICAgIHZhciBiYXNlbGF5ZXI7XG5cdCAgICB2YXIgaTtcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgYmFzZWxheWVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGJhc2VsYXllciA9IGJhc2VsYXllcnNbaV07XG5cdCAgICAgICAgYmFzZWxheWVyLmFjdGl2ZSA9IHNoYXJlQmFzZUxheWVyU2V0dGluZ3MuaW5kZXhPZihiYXNlbGF5ZXIuaWQpICE9PSAtMSA/IHRydWUgOiBmYWxzZTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkUG9pbnRzT2ZJbnRlcmVzdFRvQ29uZmlnKHBvaXMsIGNvbmZpZykge1xuXHQgICAgY29uZmlnW1wicG9pc1wiXSA9IHBvaXM7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQkFTRV9MQVlFUl9UWVBFID0gdW5kZWZpbmVkO1xuXHRleHBvcnRzLkNyZWF0ZUJhc2VMYXllcnMgPSBDcmVhdGVCYXNlTGF5ZXJzO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciBCQVNFX0xBWUVSX1RZUEUgPSBleHBvcnRzLkJBU0VfTEFZRVJfVFlQRSA9IFwiYmFzZWxheWVyXCI7XG5cdFxuXHR2YXIgX2Jhc2VsYXllcnM7XG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVCYXNlTGF5ZXJzKG1hcCwgbGF5ZXJDb25maWcpIHtcblx0ICAgIGxheWVyQ29uZmlnID0gbGF5ZXJDb25maWcgfHwgW3tcblx0ICAgICAgICBcImlkXCI6IFwiY2FydG8tbGlnaHQtZGVmYXVsdFwiLFxuXHQgICAgICAgIFwidXJsXCI6IFwiaHR0cDovL3tzfS5iYXNlbWFwcy5jYXJ0b2Nkbi5jb20vbGlnaHRfYWxsL3t6fS97eH0ve3l9LnBuZ1wiLFxuXHQgICAgICAgIFwiYXR0cmlidXRpb25cIjogJyZjb3B5OyA8YSBocmVmPVwiaHR0cDovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsICZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly9jYXJ0by5jb20vYXR0cmlidXRpb25zXCI+Q0FSVE88L2E+J1xuXHQgICAgfV07XG5cdFxuXHQgICAgX2Jhc2VsYXllcnMgPSBsYXllckNvbmZpZztcblx0ICAgIHZhciBpO1xuXHQgICAgdmFyIGJhc2VMYXllcjtcblx0ICAgIHZhciBjb25maWc7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGxheWVyQ29uZmlnLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgY29uZmlnID0gbGF5ZXJDb25maWdbaV07XG5cdFxuXHQgICAgICAgIGlmICghY29uZmlnLmFjdGl2ZSkgY29udGludWU7XG5cdCAgICAgICAgYmFzZUxheWVyID0gY3JlYXRlQmFzZUxheWVyKGNvbmZpZyk7XG5cdCAgICAgICAgY29uZmlnLmxheWVyID0gYmFzZUxheWVyO1xuXHQgICAgICAgIGJhc2VMYXllci5hZGRUbyhtYXApO1xuXHQgICAgfVxuXHRcblx0ICAgIGNyZWF0ZUJhc2VMYXllclVJKGxheWVyQ29uZmlnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQmFzZUxheWVyVUkoY29uZmlnKSB7XG5cdCAgICB2YXIgYmFzZVVJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0ICAgIGJhc2VVSS5jbGFzc05hbWUgPSBcImJhc2VsYXllci11aVwiO1xuXHQgICAgdmFyIGJhc2VXcmFwcGVyO1xuXHQgICAgdmFyIGJhc2VJbWc7XG5cdCAgICB2YXIgYmFzZUxhYmVsO1xuXHRcblx0ICAgIHZhciBsYXllcjtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gY29uZmlnLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGxheWVyID0gY29uZmlnW2ldO1xuXHQgICAgICAgIGlmICghbGF5ZXIuaGFzT3duUHJvcGVydHkoXCJpbWFnZVwiKSkgY29udGludWU7XG5cdFxuXHQgICAgICAgIGJhc2VXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0ICAgICAgICBiYXNlV3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJkYXRhLWxheWVyXCIsIGxheWVyLmlkKTtcblx0ICAgICAgICBiYXNlSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcblx0ICAgICAgICBiYXNlSW1nLnNldEF0dHJpYnV0ZShcInNyY1wiLCBsYXllci5pbWFnZSk7XG5cdCAgICAgICAgYmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgbGF5ZXIubGFiZWwpO1xuXHQgICAgICAgIGJhc2VJbWcuc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgbGF5ZXIubGFiZWwpO1xuXHQgICAgICAgIGJhc2VMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICAgICAgYmFzZUxhYmVsLnRleHRDb250ZW50ID0gbGF5ZXIubGFiZWw7XG5cdCAgICAgICAgYmFzZVdyYXBwZXIuYXBwZW5kQ2hpbGQoYmFzZUltZyk7XG5cdCAgICAgICAgYmFzZVdyYXBwZXIuYXBwZW5kQ2hpbGQoYmFzZUxhYmVsKTtcblx0ICAgICAgICBiYXNlV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQmFzZUNsaWNrKTtcblx0XG5cdCAgICAgICAgZDMuc2VsZWN0KGJhc2VXcmFwcGVyKS5jbGFzc2VkKFwiYmFzZS1zZWxlY3RvclwiLCB0cnVlKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGxheWVyLmFjdGl2ZSk7XG5cdFxuXHQgICAgICAgIGJhc2VVSS5hcHBlbmRDaGlsZChiYXNlV3JhcHBlcik7XG5cdCAgICB9XG5cdFxuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImxlYWZsZXQtYm90dG9tIGxlYWZsZXQtbGVmdFwiKVswXS5hcHBlbmRDaGlsZChiYXNlVUkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVCYXNlQ2xpY2soZSkge1xuXHQgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0ICAgIHZhciBsYXllcmlkID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWxheWVyXCIpO1xuXHQgICAgdG9nZ2xlQWN0aXZlQmFzZVVJKHRoaXMpO1xuXHQgICAgcmVtb3ZlQ3VycmVudEJhc2VMYXllcigpO1xuXHQgICAgYWRkTmV3QmFzZUxheWVyVG9NYXAobGF5ZXJpZCk7XG5cdCAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b2dnbGVBY3RpdmVCYXNlVUkoYmFzZVVJRWxlbSkge1xuXHQgICAgZDMuc2VsZWN0KFwiLmJhc2Utc2VsZWN0b3IuYWN0aXZlXCIpLmNsYXNzZWQoXCJhY3RpdmVcIiwgZmFsc2UpO1xuXHQgICAgZDMuc2VsZWN0KGJhc2VVSUVsZW0pLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZUN1cnJlbnRCYXNlTGF5ZXIoKSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMudHlwZSAhPT0gQkFTRV9MQVlFUl9UWVBFKSByZXR1cm47XG5cdCAgICAgICAgbWFwLnJlbW92ZUxheWVyKGxheWVyKTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGROZXdCYXNlTGF5ZXJUb01hcChsYXllcmlkKSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIHZhciBsYXllcjtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gX2Jhc2VsYXllcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgbGF5ZXIgPSBfYmFzZWxheWVyc1tpXTtcblx0ICAgICAgICBpZiAobGF5ZXIuaWQgIT09IGxheWVyaWQpIGNvbnRpbnVlO1xuXHQgICAgICAgIGlmICghbGF5ZXIubGF5ZXIpIGxheWVyLmxheWVyID0gY3JlYXRlQmFzZUxheWVyKGxheWVyKTtcblx0ICAgICAgICBsYXllci5sYXllci5hZGRUbyhtYXApO1xuXHQgICAgICAgIGxheWVyLmxheWVyLmJyaW5nVG9CYWNrKCk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUJhc2VMYXllcihsYXllckNvbmZpZykge1xuXHQgICAgcmV0dXJuIEwudGlsZUxheWVyKGxheWVyQ29uZmlnLnVybCwgbWFrZUJhc2VMYXllck9wdGlvbnMobGF5ZXJDb25maWcpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUJhc2VMYXllck9wdGlvbnMoY29uZmlnKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHt9O1xuXHQgICAgaWYgKGNvbmZpZy5pZCkgb3B0aW9ucy5pZCA9IGNvbmZpZy5pZDtcblx0ICAgIGlmIChjb25maWcuYXR0cmlidXRpb24pIG9wdGlvbnMuYXR0cmlidXRpb24gPSBjb25maWcuYXR0cmlidXRpb247XG5cdCAgICBpZiAoY29uZmlnLnN1YmRvbWFpbnMpIG9wdGlvbnMuc3ViZG9tYWlucyA9IGNvbmZpZy5zdWJkb21haW5zO1xuXHQgICAgb3B0aW9ucy50eXBlID0gQkFTRV9MQVlFUl9UWVBFO1xuXHRcblx0ICAgIHJldHVybiBvcHRpb25zO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCA9IEdldEFsbFBvaW50c09mSW50ZXJlc3Q7XG5cdGV4cG9ydHMuQWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyID0gQWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyO1xuXHRleHBvcnRzLlNldHVwUG9pbnRzT2ZJbnRlcmVzdCA9IFNldHVwUG9pbnRzT2ZJbnRlcmVzdDtcblx0ZXhwb3J0cy5BZGRNdWx0aXBsZVBvaW50c09mSW50ZXJlc3QgPSBBZGRNdWx0aXBsZVBvaW50c09mSW50ZXJlc3Q7XG5cdGV4cG9ydHMuUmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXIgPSBSZW1vdmVQb2ludE9mSW50ZXJlc3RGcm9tVHJhY2tlcjtcblx0ZXhwb3J0cy5TZXR1cFBvaW50T2ZJbnRlcmVzdFVJID0gU2V0dXBQb2ludE9mSW50ZXJlc3RVSTtcblx0ZXhwb3J0cy5SZW1vdmVQb2ludE9mSW50ZXJlc3RVSSA9IFJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJO1xuXHRcblx0dmFyIF9ncmFwaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfdGFicyA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHRcblx0dmFyIF9wb2ludHNfb2ZfaW50ZXJlc3QgPSBbXTtcblx0XG5cdGZ1bmN0aW9uIEdldEFsbFBvaW50c09mSW50ZXJlc3QoKSB7XG5cdCAgcmV0dXJuIF9wb2ludHNfb2ZfaW50ZXJlc3Q7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlcihsYXQsIGxuZykge1xuXHQgIHZhciBwb2kgPSB7XG5cdCAgICBsYXQ6IGxhdCxcblx0ICAgIGxuZzogbG5nXG5cdCAgfTtcblx0ICBfcG9pbnRzX29mX2ludGVyZXN0LnB1c2gocG9pKTtcblx0ICByZXR1cm4gcG9pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBTZXR1cFBvaW50c09mSW50ZXJlc3QobWFwLCBuZXdQb2lzKSB7XG5cdCAgQWRkTXVsdGlwbGVQb2ludHNPZkludGVyZXN0KG5ld1BvaXMpO1xuXHQgIHZhciBwb2lzID0gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCgpO1xuXHQgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdCAgcG9pcy5mb3JFYWNoKGZ1bmN0aW9uIChwb2kpIHtcblx0ICAgIFNldHVwUG9pbnRPZkludGVyZXN0VUkobWFwLCBwb2kpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBBZGRNdWx0aXBsZVBvaW50c09mSW50ZXJlc3QocG9pcykge1xuXHQgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KF9wb2ludHNfb2ZfaW50ZXJlc3QsIHBvaXMpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBSZW1vdmVQb2ludE9mSW50ZXJlc3RGcm9tVHJhY2tlcihwb2lUb1JlbW92ZSkge1xuXHQgIF9wb2ludHNfb2ZfaW50ZXJlc3QgPSBfcG9pbnRzX29mX2ludGVyZXN0LmZpbHRlcihmdW5jdGlvbiAocG9pKSB7XG5cdCAgICByZXR1cm4gIU9iamVjdC5pcyhwb2ksIHBvaVRvUmVtb3ZlKTtcblx0ICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gU2V0dXBQb2ludE9mSW50ZXJlc3RVSShtYXAsIHBvaSkge1xuXHQgIHZhciBkaXYgPSAoMCwgX2dyYXBoLmNyZWF0ZUdyYXBoRGl2KShwb2kpO1xuXHQgIHZhciBtYXJrZXIgPSAoMCwgX2dyYXBoLmNyZWF0ZU1hcmtlcikobWFwLCBwb2kubGF0LCBwb2kubG5nKTtcblx0ICBwb2kuZ3JhcGhEaXYgPSBkaXY7XG5cdCAgcG9pLm1hcmtlciA9IG1hcmtlcjtcblx0ICBtYXJrZXIuYWRkVG8obWFwKTtcblx0ICAoMCwgX2dyYXBoLmNyZWF0ZUdyYXBoUmVtb3ZlcikobWFwLCBkaXYsIG1hcmtlciwgcG9pKTtcblx0XG5cdCAgZDMuc2VsZWN0KGRpdikub24oXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICBtYXJrZXIuc2V0SWNvbigoMCwgX2dyYXBoLmdldEljb24pKCdob3ZlcicpKTtcblx0ICB9KTtcblx0ICBkMy5zZWxlY3QoZGl2KS5vbihcIm1vdXNlbGVhdmVcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgbWFya2VyLnNldEljb24oKDAsIF9ncmFwaC5nZXRJY29uKSgnZ3JhcGgnKSk7XG5cdCAgfSk7XG5cdCAgbWFya2VyLm9uKCdjbGljayBkYmxjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICBoYW5kbGVNYXJrZXJNb3VzZUV2ZW50KGUsIHBvaSk7XG5cdCAgfSk7XG5cdCAgbWFya2VyLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgbWFya2VyLnNldEljb24oKDAsIF9ncmFwaC5nZXRJY29uKSgnaG92ZXInKSk7XG5cdCAgICBoYW5kbGVNYXJrZXJNb3VzZUV2ZW50KGUsIHBvaSk7XG5cdCAgfSk7XG5cdCAgbWFya2VyLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICBtYXJrZXIuc2V0SWNvbigoMCwgX2dyYXBoLmdldEljb24pKCdncmFwaCcpKTtcblx0ICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlTWFya2VyTW91c2VFdmVudChlLCBwb2kpIHtcblx0ICBlLm9yaWdpbmFsRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgaWYgKGUub3JpZ2luYWxFdmVudC50eXBlID09PSAnY2xpY2snKSB7XG5cdCAgICBIYW5kbGVUYWJDaGFuZ2UoJ2dyYXBocy1hY3RpdmUnKTtcblx0ICAgIHNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGgocG9pKTtcblx0ICB9XG5cdCAgaWYgKCgwLCBfdGFicy5HZXRBY3RpdmVUYWIpKCkgPT09ICdncmFwaHMtYWN0aXZlJyAmJiBlLm9yaWdpbmFsRXZlbnQudHlwZSA9PT0gJ21vdXNlb3ZlcicpIHtcblx0ICAgIHNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGgocG9pKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGgocG9pKSB7XG5cdCAgdmFyIHJpZ2h0UGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKTtcblx0ICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsLWhlYWRlcicpO1xuXHQgIHJpZ2h0UGFuZWwuc2Nyb2xsVG9wID0gcG9pLmdyYXBoRGl2Lm9mZnNldFRvcCArIGhlYWRlci5zY3JvbGxIZWlnaHQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJKG1hcCwgZGl2LCBtYXJrZXIpIHtcblx0ICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaC1saXN0Jyk7XG5cdCAgbGlzdC5yZW1vdmVDaGlsZChkaXYpO1xuXHQgIG1hcC5yZW1vdmVMYXllcihtYXJrZXIpO1xuXHQgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLlNldHVwR3JhcGhzID0gU2V0dXBHcmFwaHM7XG5cdGV4cG9ydHMuQmluZEdyYXBoRXZlbnRzID0gQmluZEdyYXBoRXZlbnRzO1xuXHRleHBvcnRzLmdldEljb24gPSBnZXRJY29uO1xuXHRleHBvcnRzLmNyZWF0ZU1hcmtlciA9IGNyZWF0ZU1hcmtlcjtcblx0ZXhwb3J0cy5jcmVhdGVHcmFwaFJlbW92ZXIgPSBjcmVhdGVHcmFwaFJlbW92ZXI7XG5cdGV4cG9ydHMuY3JlYXRlR3JhcGhEaXYgPSBjcmVhdGVHcmFwaERpdjtcblx0XG5cdHZhciBfcG9pID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdFxuXHR2YXIgX3BhbmVsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHR2YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRcblx0dmFyIHRpcDtcblx0XG5cdGZ1bmN0aW9uIFNldHVwR3JhcGhzKCkge1xuXHQgICAgZDMuc2VsZWN0QWxsKFwiLmdyYXBoLXR5cGUtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2spO1xuXHQgICAgZXh0ZW5kRGF0ZU1vZHVsZSgpO1xuXHQgICAgdGlwID0gZDMudGlwKCkuYXR0cignY2xhc3MnLCAnZDMtdGlwJykuaHRtbChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV4dGVuZERhdGVNb2R1bGUoKSB7XG5cdCAgICBEYXRlLnByb3RvdHlwZS5pc0xlYXBZZWFyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciB5ZWFyID0gdGhpcy5nZXRGdWxsWWVhcigpO1xuXHQgICAgICAgIGlmICgoeWVhciAmIDMpICE9IDApIHJldHVybiBmYWxzZTtcblx0ICAgICAgICByZXR1cm4geWVhciAlIDEwMCAhPSAwIHx8IHllYXIgJSA0MDAgPT0gMDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gR2V0IERheSBvZiBZZWFyXG5cdCAgICBEYXRlLnByb3RvdHlwZS5nZXRET1kgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGRheUNvdW50ID0gWzAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0XTtcblx0ICAgICAgICB2YXIgbW4gPSB0aGlzLmdldE1vbnRoKCk7XG5cdCAgICAgICAgdmFyIGRuID0gdGhpcy5nZXREYXRlKCk7XG5cdCAgICAgICAgdmFyIGRheU9mWWVhciA9IGRheUNvdW50W21uXSArIGRuO1xuXHQgICAgICAgIGlmIChtbiA+IDEgJiYgdGhpcy5pc0xlYXBZZWFyKCkpIGRheU9mWWVhcisrO1xuXHQgICAgICAgIHJldHVybiBkYXlPZlllYXI7XG5cdCAgICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBCaW5kR3JhcGhFdmVudHMobWFwKSB7XG5cdCAgICBtYXAub24oXCJjbGlja1wiLCBoYW5kbGVNYXBDbGljayk7XG5cdH1cblx0XG5cdHZhciBiYXNlSWNvbiA9IEwuSWNvbi5leHRlbmQoe30pO1xuXHRcblx0dmFyIGdyYXBoSWNvbiA9IG5ldyBiYXNlSWNvbih7XG5cdCAgICBpY29uVXJsOiAnaW1ncy9ibHVlX2ljb24ucG5nJyxcblx0ICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxuXHQgICAgaWNvblNpemU6IFsyNSwgNDFdLFxuXHQgICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sXG5cdCAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXG5cdCAgICBzaGFkb3dTaXplOiBbNDEsIDQxXVxuXHR9KTtcblx0XG5cdHZhciBob3Zlckljb24gPSBuZXcgYmFzZUljb24oe1xuXHQgICAgaWNvblVybDogJ2ltZ3Mvb3JhbmdlX2ljb24ucG5nJyxcblx0ICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxuXHQgICAgaWNvblNpemU6IFsyNSwgNDFdLFxuXHQgICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sXG5cdCAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXG5cdCAgICBzaGFkb3dTaXplOiBbNDEsIDQxXVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIGdldEljb24odHlwZSkge1xuXHQgICAgcmV0dXJuIHR5cGUgPT09ICdob3ZlcicgPyBob3Zlckljb24gOiBncmFwaEljb247XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZU1hcENsaWNrKGUpIHtcblx0ICAgIHZhciBtYXAgPSB0aGlzO1xuXHQgICAgdmFyIGxhdCA9IGUubGF0bG5nLmxhdDtcblx0ICAgIHZhciBsbmcgPSBlLmxhdGxuZy5sbmc7XG5cdFxuXHQgICAgdmFyIHBvaSA9ICgwLCBfcG9pLkFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlcikobGF0LCBsbmcpO1xuXHQgICAgKDAsIF9wb2kuU2V0dXBQb2ludE9mSW50ZXJlc3RVSSkobWFwLCBwb2ksIGhvdmVySWNvbiwgZ3JhcGhJY29uKTtcblx0ICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZU1hcmtlcihtYXAsIGxhdCwgbG5nKSB7XG5cdCAgICByZXR1cm4gTC5tYXJrZXIoW2xhdCwgbG5nXSwgeyBpY29uOiBncmFwaEljb24gfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUdyYXBoUmVtb3ZlcihtYXAsIGRpdiwgbWFya2VyLCBwb2kpIHtcblx0ICAgIHZhciBlbGVtID0gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSgpO1xuXHQgICAgZGl2LmFwcGVuZENoaWxkKGVsZW0pO1xuXHQgICAgZDMuc2VsZWN0KGVsZW0pLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICgwLCBfcG9pLlJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyKShwb2kpO1xuXHQgICAgICAgICgwLCBfcG9pLlJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJKShtYXAsIGRpdiwgbWFya2VyKTtcblx0ICAgICAgICAoMCwgX3BhbmVsLnVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQpKCk7XG5cdCAgICAgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVHcmFwaFJlbW92ZXJFbGVtKCkge1xuXHQgICAgdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuXHQgICAgZWxlbS5jbGFzc05hbWUgPSBcInJlbW92ZS1ncmFwaFwiO1xuXHQgICAgZWxlbS5pbm5lclRleHQgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKFwiMTAwMDVcIik7XG5cdCAgICBlbGVtLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIFwiUmVtb3ZlIGdyYXBoXCIpO1xuXHQgICAgcmV0dXJuIGVsZW07XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggREFUQSBQUk9DRVNTSU5HIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIGdldERhdGEobGF0LCBsbmcsIGRpdikge1xuXHQgICAgdmFyIHVybCA9IFwiaHR0cHM6Ly9mY2F2LW5kdmkubmVtYWMub3JnL2xhbmRkYXRfcHJvZHVjdC5jZ2k/YXJncz1cIiArIGxuZyArIFwiLFwiICsgbGF0O1xuXHQgICAgdmFyIG9SZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0ICAgIG9SZXEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciByZXNwb25zZSA9IHRoaXMucmVzcG9uc2VUZXh0O1xuXHQgICAgICAgIHJlc3BvbnNlID0gcmVzcG9uc2UucmVwbGFjZSgvXFxbfFxcXXxcXCcvZywgXCJcIikuc3BsaXQoXCIsIFwiKTtcblx0ICAgICAgICBkcmF3R3JhcGgocmVzcG9uc2UsIGRpdiwgbGF0LCBsbmcpO1xuXHQgICAgICAgICgwLCBfcGFuZWwudXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCkoKTtcblx0ICAgIH0pO1xuXHQgICAgb1JlcS5vcGVuKFwiR0VUXCIsIHVybCk7XG5cdCAgICBvUmVxLnNlbmQoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc3BsaXREYXRhKGRhdGEpIHtcblx0ICAgIHZhciBpO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBkYXRhW2ldID0gZGF0YVtpXS5zcGxpdChcIixcIik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZGF0YTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVwcm9jZXNzRGF0YShvcmlnZGF0YSkge1xuXHQgICAgdmFyIGRhdGEgPSB7fTtcblx0ICAgIHZhciBwb2ludDtcblx0ICAgIHZhciBrZXk7XG5cdCAgICB2YXIgaSwgajtcblx0XG5cdCAgICBkYXRhW1wia2V5c1wiXSA9IFtdO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IG9yaWdkYXRhLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgcG9pbnQgPSBvcmlnZGF0YVtpXTtcblx0ICAgICAgICBrZXkgPSBwb2ludFswXS5zdWJzdHJpbmcoMCwgNCk7XG5cdCAgICAgICAgaWYgKCFkYXRhLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgICAgICAgZGF0YVtrZXldID0gW107XG5cdCAgICAgICAgICAgIGRhdGFbXCJrZXlzXCJdLnB1c2goa2V5KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZGF0YVtrZXldLnB1c2gocG9pbnQpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBkYXRhRm9yTWVkaWFucztcblx0ICAgIHZhciBtZWRpYW47XG5cdCAgICBkYXRhW1wibWVkaWFuc1wiXSA9IFtdO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IDQ2OyBpKyspIHtcblx0ICAgICAgICBkYXRhRm9yTWVkaWFucyA9IFtdO1xuXHQgICAgICAgIGZvciAoaiA9IGk7IGogPCBvcmlnZGF0YS5sZW5ndGg7IGogKz0gNDYpIHtcblx0ICAgICAgICAgICAgZGF0YUZvck1lZGlhbnMucHVzaChvcmlnZGF0YVtqXVsxXSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBtZWRpYW4gPSBkYXRhRm9yTWVkaWFucy5zb3J0KClbTWF0aC5mbG9vcihkYXRhRm9yTWVkaWFucy5sZW5ndGggLyAyKV07XG5cdCAgICAgICAgZGF0YVtcIm1lZGlhbnNcIl0ucHVzaChtZWRpYW4pO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBkYXRhO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIElOVEVSRkFDRSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrKCkge1xuXHQgICAgdmFyIHR5cGUgPSB0aGlzLmRhdGFzZXQudHlwZTtcblx0ICAgIHZhciBhY3RpdmVFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyYXBoLXR5cGUtYnRuIGFjdGl2ZVwiKVswXTtcblx0ICAgIHZhciBhY3RpdmVUeXBlID0gYWN0aXZlRWxlbS5kYXRhc2V0LnR5cGU7XG5cdFxuXHQgICAgaWYgKHR5cGUgPT09IGFjdGl2ZVR5cGUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgZDMuc2VsZWN0KFwiI2dyYXBoLWxpc3RcIikuY2xhc3NlZChcImdyYXBoLVwiICsgYWN0aXZlVHlwZSwgZmFsc2UpLmNsYXNzZWQoXCJncmFwaC1cIiArIHR5cGUsIHRydWUpO1xuXHRcblx0ICAgIGQzLnNlbGVjdChhY3RpdmVFbGVtKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGZhbHNlKTtcblx0ICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVHcmFwaERpdihwb2kpIHtcblx0ICAgIHZhciBkZWNpbWFsUGxhY2VzID0gMztcblx0ICAgIHZhciBsYXRTaG9ydCA9IHJvdW5kRmxvYXQocG9pLmxhdCwgZGVjaW1hbFBsYWNlcyk7XG5cdCAgICB2YXIgbG5nU2hvcnQgPSByb3VuZEZsb2F0KHBvaS5sbmcsIGRlY2ltYWxQbGFjZXMpO1xuXHQgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICB2YXIgem9vbVRvTWFya2VyQnV0dG9uID0gbWFrZVpvb21Ub01hcE1hcmtlckJ1dHRvbihwb2kpO1xuXHQgICAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkxhdDogXCIgKyBsYXRTaG9ydCArIFwiLCBMb246IFwiICsgbG5nU2hvcnQpO1xuXHQgICAgZGl2LmFwcGVuZENoaWxkKHpvb21Ub01hcmtlckJ1dHRvbik7XG5cdCAgICBkaXYuYXBwZW5kQ2hpbGQoY29udGVudCk7XG5cdCAgICBkaXYuY2xhc3NMaXN0LmFkZChcImdyYXBoLWVsZW1cIik7XG5cdCAgICBnZXREYXRhKHBvaS5sYXQsIHBvaS5sbmcsIGRpdik7XG5cdCAgICByZXR1cm4gZGl2O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlWm9vbVRvTWFwTWFya2VyQnV0dG9uKHBvaSkge1xuXHQgICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG5cdCAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuJywgJ3Bhbi10by1tYXJrZXItYnRuJyk7XG5cdCAgICBidXR0b24udGV4dENvbnRlbnQgPSBcIlNob3cgT24gTWFwXCI7XG5cdCAgICBidXR0b24ub25jbGljayA9IGZ1bmN0aW9uIChwb2ksIGUpIHtcblx0ICAgICAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHQgICAgICAgIG1hcC5wYW5UbyhbcG9pLmxhdCwgcG9pLmxuZ10pO1xuXHQgICAgfS5iaW5kKGJ1dHRvbiwgcG9pKTtcblx0ICAgIHJldHVybiBidXR0b247XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYXdHcmFwaChkYXRhLCBkaXYsIGxhdCwgbG5nKSB7XG5cdCAgICBkYXRhID0gc3BsaXREYXRhKGRhdGEpO1xuXHQgICAgdmFyIHJlcHJvY2Vzc2VkRGF0YSA9IHJlcHJvY2Vzc0RhdGEoZGF0YSk7XG5cdCAgICBtYWtlVXBEb3duTGluZUdyYXBoKGRhdGEsIGRpdiwgcmVwcm9jZXNzZWREYXRhW1wibWVkaWFuc1wiXSk7XG5cdCAgICBtYWtlVXBEb3duT3ZlcmxhcGluZ0xpbmVHcmFwaFdpdGhDaGVja2JveGVzKHJlcHJvY2Vzc2VkRGF0YSwgZGl2LCBsYXQsIGxuZyk7XG5cdCAgICBkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMocmVwcm9jZXNzZWREYXRhLCBkaXYsIGxhdCwgbG5nKTtcblx0ICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpO1xuXHQgICAgbGlzdC5hcHBlbmRDaGlsZChkaXYpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByb3VuZEZsb2F0KG51bWJlciwgZGVjaW1hbFBsYWNlcykge1xuXHQgICAgcmV0dXJuIE1hdGgucm91bmQobnVtYmVyICogTWF0aC5wb3coMTAsIGRlY2ltYWxQbGFjZXMpKSAvIE1hdGgucG93KDEwLCBkZWNpbWFsUGxhY2VzKTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vIFRJTUVTRVJJRVMgTElORSBHUkFQSCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVVwRG93bkxpbmVHcmFwaChkYXRhLCBkaXYsIGF2ZXJhZ2VzKSB7XG5cdCAgICAvLyBTZXQgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIGNhbnZhcyAvIGdyYXBoXG5cdCAgICB2YXIgbWFyZ2luID0geyB0b3A6IDMwLCByaWdodDogMjAsIGJvdHRvbTogMzAsIGxlZnQ6IDI1IH0sXG5cdCAgICAgICAgd2lkdGggPSA1ODAgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCxcblx0ICAgICAgICBoZWlnaHQgPSAyNzAgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcblx0XG5cdCAgICAvLyBTZXQgdGhlIHJhbmdlc1xuXHQgICAgdmFyIHggPSBkMy5zY2FsZVRpbWUoKS5yYW5nZShbMCwgd2lkdGhdKS5kb21haW4oW3BhcnNlRGF0ZShkYXRhWzBdWzBdKSwgcGFyc2VEYXRlKGRhdGFbZGF0YS5sZW5ndGggLSAxXVswXSldKTtcblx0ICAgIHZhciB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSkuZG9tYWluKFswLCAxMDBdKTtcblx0XG5cdCAgICAvLyBEZWZpbmUgdGhlIGF4ZXNcblx0ICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeCkudGlja3MoMTYpLnRpY2tGb3JtYXQoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZC5nZXRGdWxsWWVhcigpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIHlBeGlzID0gZDMuYXhpc0xlZnQoeSkudGlja3MoNik7XG5cdFxuXHQgICAgLy8gRGVmaW5lIHRoZSBsaW5lXG5cdCAgICB2YXIgdmFsdWVsaW5lID0gZDMubGluZSgpLngoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4geChwYXJzZURhdGUoZFswXSkpO1xuXHQgICAgfSkueShmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiB5KGRbMV0pO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcInRpbWVzZXJpZXMtZ3JhcGhcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgLy8gQWRkcyB0aGUgc3ZnIGNhbnZhc1xuXHQgICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpXG5cdCAgICAvLy5hdHRyKFwid2lkdGhcIiwgd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodClcblx0ICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKS5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciB3ID0gd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodDtcblx0ICAgICAgICB2YXIgaCA9IGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tO1xuXHQgICAgICAgIHJldHVybiAnMCAwICcgKyB3ICsgJyAnICsgaDtcblx0ICAgIH0pLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtYXJnaW4ubGVmdCArIFwiLFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKTtcblx0XG5cdCAgICBzdmcuY2FsbCh0aXApO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgdmFsdWVsaW5lIHBhdGguXG5cdCAgICBkcmF3TGluZWFyUGF0aChkYXRhLCB2YWx1ZWxpbmUsIHN2Zyk7XG5cdFxuXHQgICAgLy8gQWRkIHRoZSBYIEF4aXNcblx0ICAgIHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInggYXhpc1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIikuY2FsbCh4QXhpcyk7XG5cdFxuXHQgICAgLy8gQWRkIHRoZSBZIEF4aXNcblx0ICAgIHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInkgYXhpc1wiKS5jYWxsKHlBeGlzKTtcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxyXG5cdCAgICAgKi9cblx0ICAgIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8gT1ZFUkxBUFBJTkcgVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMoZGF0YSwgZGl2LCBsYXQsIGxuZykge1xuXHQgICAgdmFyIHllYXIgPSBcIjIwMTVcIjtcblx0XG5cdCAgICB2YXIgY2hhcnRzID0ge307XG5cdFxuXHQgICAgLy8gU2V0IHRoZSBkaW1lbnNpb25zIG9mIHRoZSBjYW52YXMgLyBncmFwaFxuXHQgICAgdmFyIG1hcmdpbiA9IHsgdG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyNSB9LFxuXHQgICAgICAgIHdpZHRoID0gNTAwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsXG5cdCAgICAgICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cdFxuXHQgICAgdmFyIGF2ZXJhZ2VzID0gZGF0YS5tZWRpYW5zO1xuXHRcblx0ICAgIHZhciB4ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbMCwgd2lkdGhdKS5kb21haW4oWzAsIDM2NV0pO1xuXHQgICAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKS5kb21haW4oWzAsIDEwMF0pO1xuXHRcblx0ICAgIC8vIERlZmluZSB0aGUgYXhlc1xuXHQgICAgZnVuY3Rpb24gZm9ybWF0TW9udGhUaWNrKGQpIHtcblx0ICAgICAgICByZXR1cm4gTU9OVEhfTEFCRUxTWyhkIC0gMTUpIC8gMzBdO1xuXHQgICAgfVxuXHQgICAgdmFyIHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4KS50aWNrcygxMSkudGlja1ZhbHVlcyhbMTUsIDQ1LCA3NSwgMTA1LCAxMzUsIDE2NSwgMTk1LCAyMjUsIDI1NSwgMjg1LCAzMTUsIDM0NV0pLnRpY2tGb3JtYXQoZm9ybWF0TW9udGhUaWNrKTtcblx0XG5cdCAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KS50aWNrcyg2KTtcblx0XG5cdCAgICAvLyBEZWZpbmUgdGhlIGxpbmVcblx0ICAgIHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKCkueChmdW5jdGlvbiAoZCwgaSkge1xuXHQgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGQpID8geChwYXJzZUp1bGlhbkRheShkWzBdKSkgOiB4KGkgKiA4ICsgMyk7XG5cdCAgICB9KS55KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyB5KGRbMV0pIDogeShkKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KGRpdikuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJvdmVybGFwcGluZy1ncmFwaFwiLCB0cnVlKTtcblx0XG5cdCAgICAvLyBBZGRzIHRoZSBzdmcgY2FudmFzXG5cdCAgICB2YXIgc3ZnID0gd3JhcHBlci5hcHBlbmQoXCJzdmdcIikuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgdyA9IHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQ7XG5cdCAgICAgICAgdmFyIGggPSBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbTtcblx0ICAgICAgICByZXR1cm4gJzAgMCAnICsgdyArICcgJyArIGg7XG5cdCAgICB9KS5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJylcblx0ICAgIC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuXHQgICAgLy8uYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcblx0ICAgIC5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtYXJnaW4ubGVmdCArIFwiLFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKTtcblx0XG5cdCAgICBzdmcuY2FsbCh0aXApO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWCBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ4IGF4aXNcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpLmNhbGwoeEF4aXMpO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWSBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ5IGF4aXNcIikuY2FsbCh5QXhpcyk7XG5cdFxuXHQgICAgY2hhcnRzW1wibWVkaWFuc1wiXSA9IHtcblx0ICAgICAgICBcInBhdGhcIjogZHJhd0xpbmVhclBhdGgoZGF0YVtcIm1lZGlhbnNcIl0sIHZhbHVlbGluZSwgc3ZnKVxuXHQgICAgfTtcblx0XG5cdCAgICBjaGFydHNbeWVhcl0gPSB7XG5cdCAgICAgICAgXCJwYXRoXCI6IGRyYXdMaW5lYXJQYXRoKGRhdGFbeWVhcl0sIHZhbHVlbGluZSwgc3ZnKVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcclxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBwb2ludCBhdCBlYWNoIGRhdGEgcG9pbnRcclxuXHQgICAgICovXG5cdCAgICBjaGFydHNbXCJtZWRpYW5zXCJdW1wicG9pbnRzXCJdID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW1wibWVkaWFuc1wiXSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0ICAgIGNoYXJ0c1t5ZWFyXVtcInBvaW50c1wiXSA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVt5ZWFyXSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0XG5cdCAgICB2YXIgaW5wdXR3cmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcImlucHV0LXdyYXBwZXJcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgZGF0YS5rZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwga2V5LCBcInRpbWVzZXJpZXNcIiwgeWVhciwgY2hhcnRzLCBkYXRhLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMsIGxhdCwgbG5nKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwgXCJtZWRpYW5zXCIsIFwidGltZXNlcmllc1wiLCBcIm1lZGlhbnNcIiwgY2hhcnRzLCBkYXRhLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMsIGxhdCwgbG5nKTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBQT0xBUiBHUkFQSCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcblx0ICAgIHZhciB5ZWFyID0gXCIyMDE1XCI7XG5cdCAgICB2YXIgd2lkdGggPSA0OTAsXG5cdCAgICAgICAgaGVpZ2h0ID0gNDkwLFxuXHQgICAgICAgIHJhZGl1cyA9IE1hdGgubWluKHdpZHRoLCBoZWlnaHQpIC8gMiAtIDMwO1xuXHRcblx0ICAgIHZhciBhdmVyYWdlcyA9IGRhdGFbXCJtZWRpYW5zXCJdO1xuXHQgICAgdmFyIGNlbnRlciA9IGZpbmRQb2xhckNlbnRlcihkYXRhKTtcblx0ICAgIHZhciB0aHJlc2hvbGRzID0gZmluZFBvbGFyVGhyZXNob2xkcyhhdmVyYWdlcywgY2VudGVyWzFdWzBdKTtcblx0XG5cdCAgICAvKipcclxuXHQgICAgICogU2V0cyB1cCBzY2FsaW5nIG9mIGRhdGEuIFdlIGtub3cgdGhhdCB0aGUgbmR2aSB2YWx1ZXMgZmFsbCBiZXR3ZWVuXHJcblx0ICAgICAqIDAgJiAxMDAgc28gd2Ugc2V0IG91ciBkb21haW4gdG8gdGhhdC4gVGhlIHJhbmdlIGNvbnRyb2xzIHdoZXJlIHRoZVxyXG5cdCAgICAgKiBwb2ludHMgd2lsbCBsaWUgaW4gb3VyIGdyYXBoLCBzbyB3ZSBzZXQgdGhlbSB0byBiZSBiZXR3ZWVuIDAgYW5kIHRoZVxyXG5cdCAgICAgKiByYWRpdXMuXHJcblx0ICAgICAqL1xuXHQgICAgdmFyIHIgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgMTAwXSkucmFuZ2UoWzAsIHJhZGl1c10pO1xuXHRcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBmdW5jdGlvbiB3aGljaCB3aWxsIGRyYXcgZWFjaCBwb2ludC4gVG8gY29tcHV0ZSB0aGUgZGlzdGFuY2UgZnJvbSB0aGVcclxuXHQgICAgICogY2VudGVyIGVhY2ggcG9pbnQgaXMgd2UgcGFzcyB0aGUgZGF0YXBvaW50IHRvIHRoZSBmdW5jdGlvbiBkZWZpbmVkIGFib3ZlLlxyXG5cdCAgICAgKiBUbyBkZXRlcm1pbmUgdGhlIGFuZ2xlIGZyb20gdGhlIG9yaWdpbiB3ZSBuZWVkIHRvIGNvbnZlcnQgdGhlIGRheSB0b1xyXG5cdCAgICAgKiByYWRpYW5zLCBzbyB3ZSBjb252ZXJ0IHRoZSBkYXkgdG8gYSBudW1iZXIgYmV0d2VlbiAwICYgMSBhbmQgdGhlbiBtdWx0aXBseVxyXG5cdCAgICAgKiBpdCBieSAyIHBpLlxyXG5cdCAgICAgKi9cblx0ICAgIHZhciBsaW5lID0gZDMucmFkaWFsTGluZSgpLnJhZGl1cyhmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGQpID8gcihkWzFdKSA6IHIoZCk7XG5cdCAgICB9KS5hbmdsZShmdW5jdGlvbiAoZCwgaSkge1xuXHQgICAgICAgIHZhciBkYXkgPSBBcnJheS5pc0FycmF5KGQpID8gcGFyc2VKdWxpYW5EYXkoZFswXSkgOiBpICogOCArIDM7XG5cdCAgICAgICAgcmV0dXJuIChkYXkgLSAxKSAlIDM2NSAvIDM2NSAqICgyICogTWF0aC5QSSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKipcclxuXHQgICAgICogU2V0cyB1cCB0aGUgY2FudmFzIHdoZXJlIHRoZSBjaXJjbGUgd2lsbCBiZSBkcmF3bi5cclxuXHQgICAgICovXG5cdCAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwicG9sYXItZ3JhcGhcIiwgdHJ1ZSk7XG5cdCAgICB2YXIgc3ZnID0gd3JhcHBlci5hcHBlbmQoXCJzdmdcIilcblx0ICAgIC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcblx0ICAgIC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuXHQgICAgLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuICcwIDAgJyArIHdpZHRoICsgJyAnICsgaGVpZ2h0O1xuXHQgICAgfSkuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWlkWU1pZCcpLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHdpZHRoIC8gMiArIFwiLFwiICsgaGVpZ2h0IC8gMiArIFwiKVwiKTtcblx0XG5cdCAgICBzdmcuY2FsbCh0aXApO1xuXHRcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGJpZyBjaXJjbGVzIG9mIHRoZSBncmFwaCAmIHRoZWlyIGxhYmVsc1xyXG5cdCAgICAgKi9cblx0ICAgIHZhciBnciA9IHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInIgYXhpc1wiKS5zZWxlY3RBbGwoXCJnXCIpLmRhdGEoci50aWNrcyg1KS5zbGljZSgxKSkuZW50ZXIoKS5hcHBlbmQoXCJnXCIpO1xuXHRcblx0ICAgIGdyLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiclwiLCByKTtcblx0XG5cdCAgICBnci5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIC1yKGQpIC0gNDtcblx0ICAgIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJyb3RhdGUoMTUpXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIikudGV4dChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXHJcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgbGFiZWxzIGZvciBlYWNoIG1vbnRoIGFuZCB0aGUgbGluZXNcclxuXHQgICAgICogdGhhdCBnbyBvdXQgdG8gdGhlbS5cclxuXHQgICAgICovXG5cdCAgICB2YXIgZ2EgPSBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJhIGF4aXNcIikuc2VsZWN0QWxsKFwiZ1wiKS5kYXRhKGQzLnJhbmdlKDAsIDM2MCwgMzApKS5lbnRlcigpLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBcInJvdGF0ZShcIiArIChkIC0gOTApICsgXCIpXCI7XG5cdCAgICB9KTtcblx0XG5cdCAgICBnYS5hcHBlbmQoXCJsaW5lXCIpLmF0dHIoXCJ4MlwiLCByYWRpdXMpO1xuXHRcblx0ICAgIGdhLmFwcGVuZChcInRleHRcIikuYXR0cihcInhcIiwgcmFkaXVzICsgNikuYXR0cihcImR5XCIsIFwiLjM1ZW1cIikuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkIDwgMzYwICYmIGQgPiAxODAgPyBcImVuZFwiIDogbnVsbDtcblx0ICAgIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7XG5cdCAgICB9KS50ZXh0KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIE1PTlRIX0xBQkVMU1tkIC8gMzBdO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXHJcblx0ICAgICAqIERyYXdzIHRoZSB0aHJlc2hvbGQgbGluZXNcclxuXHQgICAgICovXG5cdCAgICB2YXIgdGhyZXNob2xkRWxlbSA9IHN2Zy5hcHBlbmQoXCJnXCIpLnNlbGVjdEFsbChcImdcIikuZGF0YSh0aHJlc2hvbGRzKS5lbnRlcigpLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBcInJvdGF0ZShcIiArIChkLmRhdGFbMV1bMF0gLSA5MCkgKyBcIilcIjtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHRocmVzaG9sZEVsZW0uYXBwZW5kKFwibGluZVwiKS5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpLmF0dHIoXCJ4MlwiLCByYWRpdXMpO1xuXHRcblx0ICAgIHRocmVzaG9sZEVsZW0uYXBwZW5kKFwidGV4dFwiKS5hdHRyKFwieFwiLCByYWRpdXMgKyA2KS5hdHRyKFwieVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiAoZC5kYXRhWzFdWzBdIC0gMSkgJSAzNjUgLyAzNjUgKiAoMiAqIE1hdGguUEkpO1xuXHQgICAgfSkuYXR0cihcImR5XCIsIFwiLjM1ZW1cIikuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHZhciBkYXkgPSBkLmRhdGFbMV1bMF07cmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyBcImVuZFwiIDogbnVsbDtcblx0ICAgIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdO3JldHVybiBkYXkgPCAzNjAgJiYgZGF5ID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7XG5cdCAgICB9KS50ZXh0KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIGQubGFiZWw7XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKipcclxuXHQgICAgICogRHJhd3MgdGhlIGxpbmUgdG8gdGhlIGNlbnRlciBvZiB0aGUgZGF0YVxyXG5cdCAgICAgKi9cblx0ICAgIHZhciBjZW50ZXJEYXkgPSBjZW50ZXJbMV1bMF07XG5cdCAgICB2YXIgY2VudGVyRGF5T3Bwb3NpdGUgPSAoY2VudGVyRGF5ICsgMzY1IC8gMikgJSAzNjU7XG5cdCAgICB2YXIgY2VudGVyRGF5RGF0YSA9IFtjZW50ZXJEYXksIDEwMF07XG5cdCAgICB2YXIgY2VudGVyRGF5T3Bwb3NpdGVEYXRhID0gW2NlbnRlckRheU9wcG9zaXRlLCAxMDBdO1xuXHQgICAgdmFyIGdyb3dpbmdTZWFzb25EYXRhID0gW2NlbnRlckRheURhdGEsIGNlbnRlckRheU9wcG9zaXRlRGF0YV07XG5cdFxuXHQgICAgZHJhd1BvbGFyUGF0aChncm93aW5nU2Vhc29uRGF0YSwgbGluZSwgc3ZnKS5jbGFzc2VkKFwiZ3Jvd2luZy1zZWFzb24tbGluZVwiLCBcInRydWVcIik7XG5cdFxuXHQgICAgZHJhd1BvbGFyUGF0aChjZW50ZXIsIGxpbmUsIHN2ZykuY2xhc3NlZChcImNlbnRlci1saW5lXCIsIFwidHJ1ZVwiKTtcblx0XG5cdCAgICBzdmcuc2VsZWN0QWxsKFwicG9pbnRcIikuZGF0YShbY2VudGVyWzFdXSkuZW50ZXIoKS5hcHBlbmQoXCJjaXJjbGVcIikuYXR0cihcImNsYXNzXCIsIFwicG9pbnRcIikuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHZhciBjb29ycyA9IGxpbmUoW2RdKS5zbGljZSgxKS5zbGljZSgwLCAtMSk7XG5cdCAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgY29vcnMgKyBcIilcIjtcblx0ICAgIH0pLmF0dHIoXCJyXCIsIDIuNSkuYXR0cihcInN0cm9rZVwiLCBcIiMwMDBcIikuYXR0cihcImZpbGxcIiwgXCIjZGQ4MmQyXCIpLm9uKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgdGlwLnNob3coXCJDZW50ZXI6IFwiICsgU3RyaW5nKGRbMV0pLnN1YnN0cmluZygwLCA3KSk7XG5cdCAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDUpO1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMnB4XCIpO1xuXHQgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHQgICAgfSkub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHRpcC5oaWRlKCk7XG5cdCAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDIuNSk7XG5cdCAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIxcHhcIik7XG5cdCAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgY2hhcnRzID0ge307XG5cdFxuXHQgICAgLyoqXHJcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgbGluZSB0aGF0IHRoZSBkYXRhIGZvbGxvd3NcclxuXHQgICAgICovXG5cdCAgICBjaGFydHNbXCJtZWRpYW5zXCJdID0ge1xuXHQgICAgICAgIFwicGF0aFwiOiBkcmF3UG9sYXJQYXRoKGF2ZXJhZ2VzLCBsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIGNoYXJ0c1t5ZWFyXSA9IHtcblx0ICAgICAgICBcInBhdGhcIjogZHJhd1BvbGFyUGF0aChkYXRhW3llYXJdLCBsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxyXG5cdCAgICAgKi9cblx0ICAgIGNoYXJ0cy5tZWRpYW5zLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoYXZlcmFnZXMsIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHQgICAgY2hhcnRzW3llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdFxuXHQgICAgdmFyIGlucHV0d3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJpbnB1dC13cmFwcGVyXCIsIHRydWUpO1xuXHRcblx0ICAgIGRhdGEua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblx0XG5cdCAgICAgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImlucHV0XCIpLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIikuYXR0cihcImlkXCIsIFwicG9sYXItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpLmF0dHIoXCJ2YWx1ZVwiLCBrZXkpLnByb3BlcnR5KFwiY2hlY2tlZFwiLCBrZXkgPT09IHllYXIgPyB0cnVlIDogZmFsc2UpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcblx0ICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoLnJlbW92ZSgpO1xuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIGlmICghY2hhcnRzLmhhc093blByb3BlcnR5KG5ld1llYXIpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG5cdCAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3UG9sYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2Zyk7XG5cdCAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwibGFiZWxcIikudGV4dChrZXkpLmF0dHIoXCJmb3JcIiwgXCJwb2xhci1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgXCJwb2xhci1hdmVyYWdlLVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKS5hdHRyKFwidmFsdWVcIiwgXCJtZWRpYW5zXCIpLnByb3BlcnR5KFwiY2hlY2tlZFwiLCB0cnVlKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd1BvbGFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xuXHRcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdCAgICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImxhYmVsXCIpLnRleHQoXCJCYXNlbGluZVwiKS5hdHRyKFwiZm9yXCIsIFwicG9sYXItYXZlcmFnZS1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG5cdFxuXHQgICAgdmFyIHRocmVzaG9sZENoZWNrYm94ID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwidGhyZXNob2xkLWNoZWNrYm94XCIsIHRydWUpO1xuXHRcblx0ICAgIHRocmVzaG9sZENoZWNrYm94LmFwcGVuZChcImlucHV0XCIpLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIikuYXR0cihcImlkXCIsIFwidGhyZXNob2xkLWNoZWNrYm94LVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKS5wcm9wZXJ0eShcImNoZWNrZWRcIiwgdHJ1ZSkub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICB0aHJlc2hvbGRFbGVtLnN0eWxlKFwib3BhY2l0eVwiLCB0aGlzLmNoZWNrZWQgPyAxIDogMCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB0aHJlc2hvbGRDaGVja2JveC5hcHBlbmQoXCJsYWJlbFwiKS50ZXh0KFwiVGhyZXNob2xkc1wiKS5hdHRyKFwiZm9yXCIsIFwidGhyZXNob2xkLWNoZWNrYm94LVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblx0fVxuXHRcblx0LyogUE9MQVIgR1JBUEggSEVMUEVSUyAqL1xuXHRcblx0ZnVuY3Rpb24gZmluZFBvbGFyQ2VudGVyKGRhdGEpIHtcblx0ICAgIHZhciBpLCBqLCBsZW5ndGgsIGFycjtcblx0ICAgIHZhciB0b3RhbFN1bSA9IDA7XG5cdCAgICB2YXIgaW5jb21wbGV0ZVllYXJzID0gMDtcblx0ICAgIHZhciBzdW07XG5cdCAgICBsZW5ndGggPSA0Njtcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5rZXlzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgYXJyID0gZGF0YVtkYXRhLmtleXNbaV1dO1xuXHQgICAgICAgIGlmIChhcnIubGVuZ3RoICE9PSBsZW5ndGgpIHtcblx0ICAgICAgICAgICAgaW5jb21wbGV0ZVllYXJzKys7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdW0gPSAwO1xuXHQgICAgICAgIGZvciAoaiA9IDA7IGogPCBsZW5ndGggLyAyOyBqKyspIHtcblx0ICAgICAgICAgICAgc3VtICs9IGFycltqXVsxXSAtIGFycltqICsgMjNdWzFdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdW0gPSBzdW0gLyAyMztcblx0ICAgICAgICB0b3RhbFN1bSArPSBzdW07XG5cdCAgICB9XG5cdCAgICB0b3RhbFN1bSA9IE1hdGguYWJzKHRvdGFsU3VtKSAvIChkYXRhLmtleXMubGVuZ3RoIC0gaW5jb21wbGV0ZVllYXJzKTtcblx0XG5cdCAgICB2YXIgYXJlYURpZmYgPSAxMDAwMDAwO1xuXHQgICAgdmFyIGNoZWNrRGlmZjtcblx0ICAgIHZhciBhcmVhSW5kZXggPSAwO1xuXHQgICAgdmFyIGxlZnRBcmVhLCByaWdodEFyZWE7XG5cdCAgICB2YXIgYXZncyA9IGRhdGEubWVkaWFucztcblx0ICAgIHZhciBrLCBjb3VudGVyO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGggLyAyOyBpKyspIHtcblx0ICAgICAgICBsZWZ0QXJlYSA9IDA7XG5cdCAgICAgICAgcmlnaHRBcmVhID0gMDtcblx0ICAgICAgICBmb3IgKGNvdW50ZXIgPSAwOyBjb3VudGVyIDwgbGVuZ3RoIC8gMjsgY291bnRlcisrKSB7XG5cdCAgICAgICAgICAgIGogPSAoaSArIGNvdW50ZXIpICUgNDY7XG5cdCAgICAgICAgICAgIGsgPSAoaiArIDIzKSAlIDQ2O1xuXHRcblx0ICAgICAgICAgICAgbGVmdEFyZWEgKz0gcGFyc2VJbnQoYXZnc1tqXSwgMTApO1xuXHQgICAgICAgICAgICByaWdodEFyZWEgKz0gcGFyc2VJbnQoYXZnc1trXSwgMTApO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjaGVja0RpZmYgPSBNYXRoLmFicyhsZWZ0QXJlYSAtIHJpZ2h0QXJlYSk7XG5cdCAgICAgICAgaWYgKGNoZWNrRGlmZiA8IGFyZWFEaWZmKSB7XG5cdCAgICAgICAgICAgIGFyZWFEaWZmID0gY2hlY2tEaWZmO1xuXHQgICAgICAgICAgICBhcmVhSW5kZXggPSBpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZmlyc3RSYWRpdXMgPSBwYXJzZUludChhdmdzW2FyZWFJbmRleF0sIDEwKTtcblx0ICAgIHZhciBzZWNvbmRSYWRpdXMgPSBwYXJzZUludCgtYXZnc1thcmVhSW5kZXggKyAyM10sIDEwKTtcblx0XG5cdCAgICB2YXIgZmlyc3REaWZmID0gTWF0aC5hYnModG90YWxTdW0gLSBmaXJzdFJhZGl1cykgLSBNYXRoLmFicyh0b3RhbFN1bSAtIHNlY29uZFJhZGl1cyk7XG5cdCAgICB2YXIgc2Vjb25kRGlmZiA9IE1hdGguYWJzKC10b3RhbFN1bSAtIGZpcnN0UmFkaXVzKSAtIE1hdGguYWJzKC10b3RhbFN1bSAtIHNlY29uZFJhZGl1cyk7XG5cdCAgICBpZiAoc2Vjb25kRGlmZiA+IGZpcnN0RGlmZikge1xuXHQgICAgICAgIGFyZWFJbmRleCA9IGFyZWFJbmRleCArIDIzO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjaXJjbGVjZW50ZXIgPSBbMCwgMF07XG5cdCAgICB2YXIgZGF0YWNlbnRlciA9IFthcmVhSW5kZXggKiA4ICsgMywgdG90YWxTdW1dO1xuXHRcblx0ICAgIHJldHVybiBbY2lyY2xlY2VudGVyLCBkYXRhY2VudGVyXTtcblx0fVxuXHRcblx0LyoqXHJcblx0ICogc3RhcnREYXkgaXMgYWN0dWFsbHkgdGhlIHNlYXNvbmFsaXR5IGluZGV4LCBpZiBpdCBvY2N1cnMgYWZ0ZXIganVseSBpdCBzaG91bGQgYmUgZmxpcHBlZFxyXG5cdCAqL1xuXHRmdW5jdGlvbiBmaW5kUG9sYXJUaHJlc2hvbGRzKGRhdGEsIHN0YXJ0RGF5KSB7XG5cdCAgICB2YXIgc3RhcnRJbmRleCA9IE1hdGguZmxvb3IoKHN0YXJ0RGF5IC0gMykgLyA4KTtcblx0ICAgIGlmIChzdGFydEluZGV4ID4gMjIpIHtcblx0ICAgICAgICBzdGFydEluZGV4ID0gc3RhcnRJbmRleCAtIDIzO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpLCBqLCBsZW5ndGgsIGFycjtcblx0ICAgIHZhciB0b3RhbFN1bSA9IDA7XG5cdCAgICB2YXIgc3VtO1xuXHQgICAgbGVuZ3RoID0gNDY7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgaiA9IChzdGFydEluZGV4ICsgaSkgJSBsZW5ndGg7XG5cdCAgICAgICAgdG90YWxTdW0gKz0gcGFyc2VJbnQoZGF0YVtqXSwgMTApO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBmaWZ0ZWVuVGhyZXNob2xkID0gdG90YWxTdW0gKiAuMTU7XG5cdCAgICB2YXIgZWlnaHR5VGhyZXNob2xkID0gdG90YWxTdW0gKiAuODA7XG5cdCAgICB2YXIgZWlnaHR5Zml2ZVRocmVzaG9sZCA9IHRvdGFsU3VtICogLjg1O1xuXHQgICAgdmFyIGZpZnRlZW5JbmRleEZvdW5kID0gZmFsc2UsXG5cdCAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IGZhbHNlLFxuXHQgICAgICAgIGVpZ2h0eWZpdmVJbmRleEZvdW5kID0gZmFsc2U7XG5cdCAgICB2YXIgZmlmdGVlbkluZGV4LCBlaWdodHlJbmRleCwgZWlnaHR5Zml2ZUluZGV4O1xuXHRcblx0ICAgIHRvdGFsU3VtID0gMDtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGogPSAoc3RhcnRJbmRleCArIGkpICUgbGVuZ3RoO1xuXHQgICAgICAgIHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcblx0ICAgICAgICBpZiAoIWZpZnRlZW5JbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZmlmdGVlblRocmVzaG9sZCkge1xuXHQgICAgICAgICAgICBmaWZ0ZWVuSW5kZXggPSBqO1xuXHQgICAgICAgICAgICBmaWZ0ZWVuSW5kZXhGb3VuZCA9IHRydWU7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIWVpZ2h0eUluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBlaWdodHlUaHJlc2hvbGQpIHtcblx0ICAgICAgICAgICAgZWlnaHR5SW5kZXggPSBqO1xuXHQgICAgICAgICAgICBlaWdodHlJbmRleEZvdW5kID0gdHJ1ZTtcblx0ICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICghZWlnaHR5Zml2ZUluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBlaWdodHlmaXZlVGhyZXNob2xkKSB7XG5cdCAgICAgICAgICAgIGVpZ2h0eWZpdmVJbmRleCA9IGo7XG5cdCAgICAgICAgICAgIGVpZ2h0eWZpdmVJbmRleEZvdW5kID0gdHJ1ZTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjaXJjbGVDZW50ZXIgPSBbMCwgMF07XG5cdFxuXHQgICAgdmFyIGZpZnRlZW5FbmQgPSBbZmlmdGVlbkluZGV4ICogOCArIDMsIDEwMF07XG5cdCAgICB2YXIgZWlnaHR5RW5kID0gW2VpZ2h0eUluZGV4ICogOCArIDMsIDEwMF07XG5cdCAgICB2YXIgZWlnaHR5Zml2ZUVuZCA9IFtlaWdodHlmaXZlSW5kZXggKiA4ICsgMywgMTAwXTtcblx0XG5cdCAgICByZXR1cm4gW3tcblx0ICAgICAgICBcImxhYmVsXCI6IFwiMTUlXCIsXG5cdCAgICAgICAgXCJkYXRhXCI6IFtjaXJjbGVDZW50ZXIsIGZpZnRlZW5FbmRdXG5cdCAgICB9LCB7XG5cdCAgICAgICAgXCJsYWJlbFwiOiBcIjgwJVwiLFxuXHQgICAgICAgIFwiZGF0YVwiOiBbY2lyY2xlQ2VudGVyLCBlaWdodHlFbmRdXG5cdCAgICB9LCB7XG5cdCAgICAgICAgXCJsYWJlbFwiOiBcIjg1JVwiLFxuXHQgICAgICAgIFwiZGF0YVwiOiBbY2lyY2xlQ2VudGVyLCBlaWdodHlmaXZlRW5kXVxuXHQgICAgfV07XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBHUkFQSCBIRUxQRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBkcmF3TGluZWFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcblx0ICAgIHJldHVybiBzdmcuYXBwZW5kKFwicGF0aFwiKS5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpLmF0dHIoXCJkXCIsIGxpbmUoZGF0YSkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmF3UG9sYXJQYXRoKGRhdGEsIGxpbmUsIHN2Zykge1xuXHQgICAgcmV0dXJuIHN2Zy5hcHBlbmQoXCJwYXRoXCIpLmRhdHVtKGRhdGEpLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIikuYXR0cihcImRcIiwgbGluZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcykge1xuXHQgICAgcmV0dXJuIHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKS5kYXRhKGRhdGEpLmVudGVyKCkuYXBwZW5kKFwiY2lyY2xlXCIpLmF0dHIoXCJjbGFzc1wiLCBcInBvaW50XCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQsIGkpIHtcblx0ICAgICAgICB2YXIgcG9pbnQgPSBBcnJheS5pc0FycmF5KGQpID8gZCA6IFtpICogOCArIDMsIGRdO1xuXHQgICAgICAgIHZhciBjb29ycyA9IGxpbmUoW3BvaW50XSkuc2xpY2UoMSkuc2xpY2UoMCwgLTEpO1xuXHQgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGNvb3JzICsgXCIpXCI7XG5cdCAgICB9KS5hdHRyKFwiclwiLCAzKS5hdHRyKFwic3Ryb2tlXCIsIFwiIzAwMFwiKS5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbiAoZCwgaSkge1xuXHQgICAgICAgIHZhciB2YWwgPSBBcnJheS5pc0FycmF5KGQpID8gZFsxXSA6IGQ7XG5cdCAgICAgICAgcmV0dXJuIGNvbXB1dGVDb2xvcih2YWwsIGF2ZXJhZ2VzW2kgJSA0Nl0sIDMpO1xuXHQgICAgfSkub24oXCJtb3VzZW92ZXJcIiwgaGFuZGxlUG9pbnRNb3VzZW92ZXIpLm9uKFwibW91c2VvdXRcIiwgaGFuZGxlUG9pbnRNb3VzZW91dCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdmVyKGQpIHtcblx0ICAgIHZhciB0aXBTdHJpbmcgPSBBcnJheS5pc0FycmF5KGQpID8gZm9ybWF0RGF0ZShkWzBdKSArIFwiOiBcIiArIGRbMV0gOiBcIkF2ZXJhZ2U6IFwiICsgZDtcblx0ICAgIHRpcC5zaG93KHRpcFN0cmluZyk7XG5cdCAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgNSk7XG5cdCAgICB0aGlzLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjJweFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlUG9pbnRNb3VzZW91dChkKSB7XG5cdCAgICB0aXAuaGlkZSgpO1xuXHQgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDMpO1xuXHQgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIxcHhcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUNoZWNrYm94KHdyYXBwZXIsIGtleSwgdHlwZSwgeWVhciwgY2hhcnRzLCBkYXRhLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzLCBsYXQsIGxuZykge1xuXHQgICAgdmFyIGNoZWNrYm94V3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpO1xuXHRcblx0ICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJpbnB1dFwiKS5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpLmF0dHIoXCJpZFwiLCB0eXBlICsgXCItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpLmF0dHIoXCJ2YWx1ZVwiLCBrZXkpLnByb3BlcnR5KFwiY2hlY2tlZFwiLCBrZXkgPT09IHllYXIgPyB0cnVlIDogZmFsc2UpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xuXHQgICAgICAgIGlmICghdGhpcy5jaGVja2VkKSB7XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoLnJlbW92ZSgpO1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGlmICghY2hhcnRzLmhhc093blByb3BlcnR5KG5ld1llYXIpKSB7XG5cdCAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdMaW5lYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2Zyk7XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKS50ZXh0KGtleSkuYXR0cihcImZvclwiLCB0eXBlICsgXCItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjb21wdXRlQ29sb3IodmFsdWUsIG1lZGlhbiwgc2NhbGUpIHtcblx0ICAgIHZhciBkaWZmID0gdmFsdWUgLSBtZWRpYW47XG5cdCAgICB2YXIgcGVyY2VudF9kaWZmID0gTWF0aC5hYnMoZGlmZikgLyBtZWRpYW4gKiAxMDAgKiBzY2FsZTtcblx0ICAgIHZhciBsaWdodG5lc3MgPSAxMDAgLSBwZXJjZW50X2RpZmYgKyBcIiVcIjtcblx0XG5cdCAgICBpZiAoZGlmZiA+IDApIHtcblx0ICAgICAgICByZXR1cm4gXCJoc2woOCwgNzklLCBcIiArIGxpZ2h0bmVzcyArIFwiKVwiO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gXCJoc2woMjE5LCA3OSUsIFwiICsgbGlnaHRuZXNzICsgXCIpXCI7XG5cdCAgICB9XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gREFURSBIRUxQRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VEYXRlKGRhdGUpIHtcblx0ICAgIGRhdGUgPSBkYXRlLnRvU3RyaW5nKCk7XG5cdCAgICB2YXIgeWVhciA9IGRhdGUuc3Vic3RyaW5nKDAsIDQpO1xuXHQgICAgdmFyIG1vbnRoID0gcGFyc2VJbnQoZGF0ZS5zdWJzdHJpbmcoNCwgNiksIDEwKSAtIDE7XG5cdCAgICB2YXIgZGF5ID0gZGF0ZS5zdWJzdHJpbmcoNiwgOCk7XG5cdFxuXHQgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwYXJzZUp1bGlhbkRheShkYXRlKSB7XG5cdCAgICBpZiAodHlwZW9mIGRhdGUgPT09IFwic3RyaW5nXCIpIHtcblx0ICAgICAgICBkYXRlID0gcGFyc2VEYXRlKGRhdGUpO1xuXHQgICAgICAgIHJldHVybiBkYXRlLmdldERPWSgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gZGF0ZTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKSB7XG5cdCAgICBpZiAoZGF0ZSA9PT0gXCJBdmVyYWdlXCIpIHtcblx0ICAgICAgICByZXR1cm4gZGF0ZTtcblx0ICAgIH1cblx0XG5cdCAgICBkYXRlID0gcGFyc2VEYXRlKGRhdGUpO1xuXHQgICAgcmV0dXJuIGZvcm1hdE1vbnRoKGRhdGUuZ2V0TW9udGgoKSkgKyBcIiBcIiArIG9yZGluYWxfc3VmZml4X29mKGRhdGUuZ2V0RGF0ZSgpKSArIFwiLCBcIiArIGRhdGUuZ2V0RnVsbFllYXIoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0TW9udGgobW9udGgpIHtcblx0ICAgIHN3aXRjaCAobW9udGgpIHtcblx0ICAgICAgICBjYXNlIDA6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkphbi5cIjtcblx0ICAgICAgICBjYXNlIDE6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkZlYi5cIjtcblx0ICAgICAgICBjYXNlIDI6XG5cdCAgICAgICAgICAgIHJldHVybiBcIk1hci5cIjtcblx0ICAgICAgICBjYXNlIDM6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkFwci5cIjtcblx0ICAgICAgICBjYXNlIDQ6XG5cdCAgICAgICAgICAgIHJldHVybiBcIk1heVwiO1xuXHQgICAgICAgIGNhc2UgNTpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiSnVuLlwiO1xuXHQgICAgICAgIGNhc2UgNjpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiSnVsLlwiO1xuXHQgICAgICAgIGNhc2UgNzpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiQXVnLlwiO1xuXHQgICAgICAgIGNhc2UgODpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiU2VwLlwiO1xuXHQgICAgICAgIGNhc2UgOTpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiT2N0LlwiO1xuXHQgICAgICAgIGNhc2UgMTA6XG5cdCAgICAgICAgICAgIHJldHVybiBcIk5vdi5cIjtcblx0ICAgICAgICBjYXNlIDExOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJEZWMuXCI7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9yZGluYWxfc3VmZml4X29mKGRheSkge1xuXHQgICAgdmFyIGogPSBkYXkgJSAxMCxcblx0ICAgICAgICBrID0gZGF5ICUgMTAwO1xuXHQgICAgaWYgKGogPT09IDEgJiYgayAhPT0gMTEpIHtcblx0ICAgICAgICByZXR1cm4gZGF5ICsgXCJzdFwiO1xuXHQgICAgfVxuXHQgICAgaWYgKGogPT09IDIgJiYgayAhPT0gMTIpIHtcblx0ICAgICAgICByZXR1cm4gZGF5ICsgXCJuZFwiO1xuXHQgICAgfVxuXHQgICAgaWYgKGogPT09IDMgJiYgayAhPT0gMTMpIHtcblx0ICAgICAgICByZXR1cm4gZGF5ICsgXCJyZFwiO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGRheSArIFwidGhcIjtcblx0fVxuXHRcblx0dmFyIE1PTlRIX0xBQkVMUyA9IHtcblx0ICAgIDA6IFwiSmFuXCIsXG5cdCAgICAxOiBcIkZlYlwiLFxuXHQgICAgMjogXCJNYXJcIixcblx0ICAgIDM6IFwiQXByXCIsXG5cdCAgICA0OiBcIk1heVwiLFxuXHQgICAgNTogXCJKdW5cIixcblx0ICAgIDY6IFwiSnVsXCIsXG5cdCAgICA3OiBcIkF1Z1wiLFxuXHQgICAgODogXCJTZXBcIixcblx0ICAgIDk6IFwiT2N0XCIsXG5cdCAgICAxMDogXCJOb3ZcIixcblx0ICAgIDExOiBcIkRlY1wiXG5cdH07XG5cbi8qKiovIH0sXG4vKiAyOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5zZXRTbGlkZXJJbml0aWFsUG9zID0gc2V0U2xpZGVySW5pdGlhbFBvcztcblx0ZXhwb3J0cy5tYWtlT3BhY2l0eVNsaWRlciA9IG1ha2VPcGFjaXR5U2xpZGVyO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIF9sYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0Ly8gc2V0IGl0IG1hbnVhbGx5IGZvciBub3dcblx0dmFyIE9QQUNJVFlfUkFOR0VfTUFYID0gOTA7XG5cdFxuXHR2YXIgb3BhY2l0eVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzEsIDBdKS5yYW5nZShbMCwgT1BBQ0lUWV9SQU5HRV9NQVhdKS5jbGFtcCh0cnVlKTtcblx0XG5cdGZ1bmN0aW9uIHNldFNsaWRlckluaXRpYWxQb3MobGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyKSB7XG5cdFxuXHQgICAgdmFyIGxheWVyT3BhY2l0eSA9IGxheWVyLm9wYWNpdHkgfHwgMTtcblx0ICAgIHZhciBoYW5kbGVPZmZzZXQgPSBvcGFjaXR5U2NhbGUobGF5ZXJPcGFjaXR5KTtcblx0XG5cdCAgICBsYXllclRvb2xzV3JhcHBlci5zZWxlY3QoJy5vcGFjaXR5LXNsaWRlci1oYW5kbGUnKS5zdHlsZSgndG9wJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiAnJyArIGhhbmRsZU9mZnNldCArICdweCc7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZU9wYWNpdHlTbGlkZXIobGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyKSB7XG5cdFxuXHQgICAgdmFyIGxheWVyT3BhY2l0eSA9IGxheWVyLm9wYWNpdHkgIT09IHVuZGVmaW5lZCA/IGxheWVyLm9wYWNpdHkgOiAxO1xuXHRcblx0ICAgIHZhciB3cmFwcGVyID0gbGF5ZXJUb29sc1dyYXBwZXIuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdvcGFjaXR5LXNsaWRlci13cmFwcGVyJyk7XG5cdFxuXHQgICAgdmFyIG9wYWNpdHlQZXJjZW50SW5kaWNhdG9yID0gd3JhcHBlci5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktc2xpZGVyLWluZGljYXRvcicpO1xuXHRcblx0ICAgIG1ha2VTbGlkZXJUcmFjayh3cmFwcGVyLCBsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIsIGxheWVyT3BhY2l0eSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VTbGlkZXJUcmFjayh3cmFwcGVyLCBsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIsIGxheWVyT3BhY2l0eSkge1xuXHRcblx0ICAgIHZhciBvdmVybGF5ID0gd3JhcHBlci5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktc2xpZGVyLXRyYWNrLW92ZXJsYXknKTtcblx0XG5cdCAgICB2YXIgdHJhY2sgPSBvdmVybGF5LmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXItdHJhY2snKTtcblx0XG5cdCAgICBvdmVybGF5LmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXItaGFuZGxlJyk7XG5cdFxuXHQgICAgaWYgKGxheWVyLmFjdGl2ZSkgc2V0U2xpZGVySW5pdGlhbFBvcyhsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIpO1xuXHQgICAgc2V0RHJhZ0V2ZW50TGlzdGVuZXIod3JhcHBlciwgbGF5ZXIsIGxheWVyT3BhY2l0eSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldERyYWdFdmVudExpc3RlbmVyKHdyYXBwZXIsIGxheWVyLCBsYXllck9wYWNpdHkpIHtcblx0ICAgIHZhciBvdmVybGF5ID0gd3JhcHBlci5zZWxlY3QoJy5vcGFjaXR5LXNsaWRlci10cmFjay1vdmVybGF5Jyk7XG5cdCAgICBvdmVybGF5LmNhbGwoZDMuZHJhZygpLm9uKCdzdGFydCBkcmFnJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBuZXdPcGFjaXR5ID0gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSk7XG5cdCAgICAgICAgKDAsIF9sYXllci51cGRhdGVMYXllck9wYWNpdHkpKGxheWVyLCBuZXdPcGFjaXR5KTtcblx0ICAgICAgICBhZGp1c3RTbGlkZXJIYW5kbGUob3ZlcmxheSwgbmV3T3BhY2l0eSk7XG5cdCAgICB9KS5vbignZW5kJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdCAgICB9KSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkanVzdFNsaWRlckhhbmRsZShvdmVybGF5LCBuZXdPcGFjaXR5KSB7XG5cdCAgICB2YXIgaGFuZGxlID0gb3ZlcmxheS5zZWxlY3QoJy5vcGFjaXR5LXNsaWRlci1oYW5kbGUnKTtcblx0ICAgIGhhbmRsZS5zdHlsZSgndG9wJywgJycgKyBvcGFjaXR5U2NhbGUobmV3T3BhY2l0eSkgKyAncHgnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSkge1xuXHQgICAgdmFyIHlQb3MgPSBkMy5tb3VzZShvdmVybGF5Lm5vZGUoKSlbMV07XG5cdCAgICB2YXIgbmV3T3BhY2l0eSA9IG9wYWNpdHlTY2FsZS5pbnZlcnQoeVBvcyk7XG5cdCAgICByZXR1cm4gbmV3T3BhY2l0eTtcblx0fVxuXG4vKioqLyB9LFxuLyogMzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5CaW5kVGFiRXZlbnRzID0gQmluZFRhYkV2ZW50cztcblx0ZXhwb3J0cy5HZXRBY3RpdmVUYWIgPSBHZXRBY3RpdmVUYWI7XG5cdGV4cG9ydHMuSGFuZGxlVGFiQ2hhbmdlID0gSGFuZGxlVGFiQ2hhbmdlO1xuXHRcblx0dmFyIF9wYW5lbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0ZnVuY3Rpb24gQmluZFRhYkV2ZW50cygpIHtcblx0ICAgIGQzLnNlbGVjdEFsbChcIi5wYW5lbC10b3AtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2spO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBHZXRBY3RpdmVUYWIoKSB7XG5cdCAgICByZXR1cm4gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwnKS5jbGFzc2VkKCdncmFwaHMtYWN0aXZlJykgPyAnZ3JhcGhzLWFjdGl2ZScgOiAnbGF5ZXJzLWFjdGl2ZSc7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrKCkge1xuXHQgICAgLy8gSWYgdGhlIHNlY3Rpb24gaXMgYWxyZWFkeSBhY3RpdmUsIGRvIG5vdGhpbmdcblx0ICAgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkgcmV0dXJuO1xuXHQgICAgSGFuZGxlVGFiQ2hhbmdlKHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1hY3RpdmVcIikpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBIYW5kbGVUYWJDaGFuZ2UobmV3Q2xhc3MpIHtcblx0ICAgIGRpc2FibGVBY3RpdmVUYWIoKTtcblx0ICAgIGVuYWJsZVRhYihuZXdDbGFzcyk7XG5cdCAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBlbmFibGVUYWIobmV3Q2xhc3MpIHtcblx0ICAgIGQzLnNlbGVjdChcIi5wYW5lbC10b3AtYnRuW2RhdGEtYWN0aXZlPSdcIiArIG5ld0NsYXNzICsgXCInXVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHRcblx0ICAgIGQzLnNlbGVjdEFsbChcIiNtYXAtd3JhcHBlciwgI3JpZ2h0LXBhbmVsXCIpLmNsYXNzZWQobmV3Q2xhc3MsIHRydWUpO1xuXHRcblx0ICAgIGQzLnNlbGVjdChcIi5wYW5lbC1zZWN0aW9uLXdyYXBwZXJbZGF0YS1hY3RpdmU9J1wiICsgbmV3Q2xhc3MgKyBcIiddXCIpLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgdG9nZ2xlTWFwUGFkZGluZygpO1xuXHQgICAgKDAsIF9wYW5lbC51cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkaXNhYmxlQWN0aXZlVGFiKCkge1xuXHQgICAgdmFyIGFjdGl2ZUNsYXNzID0gZDMuc2VsZWN0KFwiLnBhbmVsLXRvcC1idG4uYWN0aXZlXCIpLmF0dHIoXCJkYXRhLWFjdGl2ZVwiKTtcblx0XG5cdCAgICBkMy5zZWxlY3RBbGwoJyNtYXAtd3JhcHBlciwgI3JpZ2h0LXBhbmVsJykuY2xhc3NlZChhY3RpdmVDbGFzcywgZmFsc2UpO1xuXHRcblx0ICAgIGQzLnNlbGVjdEFsbCgnLnBhbmVsLXRvcC1idG4uYWN0aXZlLCAucGFuZWwtc2VjdGlvbi13cmFwcGVyLmFjdGl2ZScpLmNsYXNzZWQoJ2FjdGl2ZScsIGZhbHNlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9nZ2xlTWFwUGFkZGluZygpIHtcblx0ICAgIHZhciBwYWRkaW5nUmlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJpZ2h0LXBhbmVsXCIpLm9mZnNldFdpZHRoO1xuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXAtd3JhcHBlclwiKS5zdHlsZS5wYWRkaW5nUmlnaHQgPSBwYWRkaW5nUmlnaHQgKyBcInB4XCI7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDMxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IENyZWF0ZUxvZ287XG5cdC8qXHJcblx0ICBcImxvZ29cIjoge1xyXG5cdCAgICBcImltYWdlXCI6IFwiaW1ncy9sYW5kYXRfbG9nb19ibHVlLnBuZ1wiLFxyXG5cdCAgICBcImFsdFwiOiBcIkxvZ28gZm9yIHRoZSBMYW5EYXQgcHJvamVjdFwiLFxyXG5cdCAgICBcImxpbmtcIjogXCJodHRwczovL2xhbmRhdC1kZXYubmVtYWMub3JnXCIsXHJcblx0ICAgIFwibG9jYXRpb25cIjogW1wiYm90dG9tXCIsIFwicmlnaHRcIl1cclxuXHQgIH0sXHJcblx0Ki9cblx0XG5cdGZ1bmN0aW9uIENyZWF0ZUxvZ28obG9nb2RhdGEpIHtcblx0ICAgIGlmICghbG9nb2RhdGEuaW1hZ2UpIHJldHVybjtcblx0XG5cdCAgICB2YXIgbG9nb1dyYXBwZXIgPSBjcmVhdGVMb2dvV3JhcHBlcigpO1xuXHQgICAgdmFyIGxvZ29JbWFnZSA9IGNyZWF0ZUxvZ29JbWFnZShsb2dvZGF0YSk7XG5cdCAgICB2YXIgbG9nb0xpbmsgPSBsb2dvZGF0YS5saW5rID8gY3JlYXRlTG9nb0xpbmsobG9nb2RhdGEubGluaykgOiBudWxsO1xuXHRcblx0ICAgIGlmIChsb2dvTGluaykge1xuXHQgICAgICAgIGxvZ29MaW5rLmFwcGVuZENoaWxkKGxvZ29JbWFnZSk7XG5cdCAgICAgICAgbG9nb1dyYXBwZXIuYXBwZW5kQ2hpbGQobG9nb0xpbmspO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBsb2dvV3JhcHBlci5hcHBlbmRDaGlsZChsb2dvSW1hZ2UpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpbnNlcnRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShsb2dvZGF0YS5sb2NhdGlvbilbMF07XG5cdCAgICB2YXIgZXhpc3RpbmdDaGlsZCA9IGluc2VydEVsZW1lbnQuZmlyc3RDaGlsZDtcblx0ICAgIGluc2VydEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGxvZ29XcmFwcGVyLCBleGlzdGluZ0NoaWxkKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlTG9nb1dyYXBwZXIoKSB7XG5cdCAgICB2YXIgbG9nb1dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHQgICAgZDMuc2VsZWN0KGxvZ29XcmFwcGVyKS5jbGFzc2VkKFwicHJvamVjdC1sb2dvXCIsIHRydWUpO1xuXHQgICAgcmV0dXJuIGxvZ29XcmFwcGVyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVMb2dvSW1hZ2UobG9nb2RhdGEpIHtcblx0ICAgIHZhciBsb2dvSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuXHQgICAgbG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcInNyY1wiLCBsb2dvZGF0YS5pbWFnZSk7XG5cdCAgICBpZiAobG9nb2RhdGEubGFiZWwpIHtcblx0ICAgICAgICBsb2dvSW1hZ2Uuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGxvZ29kYXRhLmxhYmVsKTtcblx0ICAgICAgICBsb2dvSW1hZ2Uuc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgbG9nb2RhdGEubGFiZWwpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGxvZ29JbWFnZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlTG9nb0xpbmsobGluaykge1xuXHQgICAgdmFyIGxvZ29MaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XG5cdCAgICBsb2dvTGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIGxpbmspO1xuXHQgICAgbG9nb0xpbmsuc2V0QXR0cmlidXRlKFwidGFyZ2V0XCIsIFwiX2JsYW5rXCIpO1xuXHQgICAgcmV0dXJuIGxvZ29MaW5rO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAzMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGluZGV4X2J1bmRsZS5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDI0Y2FlNmY2YjUyOWExZTE3MjkyIiwiaW1wb3J0IFBhcnNlQ29uZmlnIGZyb20gJy4vcGFyc2VyJztcclxuaW1wb3J0IENyZWF0ZVNlYXJjaCBmcm9tICcuL3NlYXJjaCc7XHJcbmltcG9ydCB7U2V0dXBQYW5lbH0gZnJvbSAnLi9wYW5lbCc7XHJcbmltcG9ydCB7Q3JlYXRlQmFzZUxheWVyc30gZnJvbSAnLi9iYXNlbGF5ZXInO1xyXG5pbXBvcnQge1NldHVwR3JhcGhzLCBCaW5kR3JhcGhFdmVudHN9IGZyb20gJy4vZ3JhcGgnXHJcbmltcG9ydCB7QmluZFRhYkV2ZW50cywgSGFuZGxlVGFiQ2hhbmdlfSBmcm9tICcuL3RhYnMnXHJcbmltcG9ydCB7Q3JlYXRlTWFwfSBmcm9tICcuL21hcCdcclxuaW1wb3J0IHtCaW5kVXBkYXRlU2hhcmVVcmwsIEFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZ30gZnJvbSAnLi9zaGFyZSdcclxuaW1wb3J0IHtDcmVhdGVEZWZhdWx0TGF5ZXJzfSBmcm9tICcuL2xheWVyJ1xyXG5pbXBvcnQgQ3JlYXRlTG9nbyBmcm9tICcuL2xvZ28nO1xyXG5pbXBvcnQge1NldHVwUG9pbnRzT2ZJbnRlcmVzdH0gZnJvbSAnLi9wb2knO1xyXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tICcuL3NoYXJlJztcclxuXHJcbnZhciBjc3MgPSByZXF1aXJlKCcuLi9jc3Mvc2Fzcy9sYW5kYXQuc2NzcycpXHJcblxyXG4vLyBEb2VzIG5vdCByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcclxudmFyIEJhc2UgPSBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICBQYXJzZUNvbmZpZyhjb25maWcsIGNhbGxiYWNrKTtcclxuICAgIFNldHVwR3JhcGhzKCk7XHJcbiAgICBCaW5kVGFiRXZlbnRzKCk7XHJcbn1cclxuXHJcbi8vIERvZXMgcmVseSBvbiBtYXAgb2JqZWN0IG9yIGNvbmZpZyBmaWxlXHJcbnZhciBjYWxsYmFjayA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICBBZGRTaGFyZVNldHRpbmdzVG9Db25maWcoZGF0YSlcclxuICAgIHZhciBtYXAgPSBDcmVhdGVNYXAoZGF0YS5tYXApO1xyXG4gICAgQ3JlYXRlQmFzZUxheWVycyhtYXAsIGRhdGEuYmFzZWxheWVycyk7XHJcbiAgICBDcmVhdGVEZWZhdWx0TGF5ZXJzKGRhdGEubGF5ZXJzLCBkYXRhW1wiYWN0aXZlLWxheWVyc1wiXSk7XHJcbiAgICBTZXR1cFBhbmVsKGRhdGEubGF5ZXJzLCBkYXRhLmxheW91dCk7XHJcbiAgICBDcmVhdGVTZWFyY2gobWFwKTtcclxuICAgIENyZWF0ZUxvZ28oZGF0YS5sb2dvKTtcclxuICAgIGlmIChkYXRhLnRhYikgSGFuZGxlVGFiQ2hhbmdlKGRhdGEudGFiKTtcclxuICAgIEJpbmRHcmFwaEV2ZW50cyhtYXApO1xyXG4gICAgQmluZFVwZGF0ZVNoYXJlVXJsKG1hcCk7XHJcbiAgICBTZXR1cFBvaW50c09mSW50ZXJlc3QobWFwLCBkYXRhLnBvaXMpXHJcbiAgICB1cGRhdGVTaGFyZVVybCgpXHJcbn1cclxuXHJcbndpbmRvdy5CYXNlID0gQmFzZTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtCYXNlfTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvYmFzZS5qcyIsIi8qKlxyXG4gKiBQYXJzZXMgYSBjb25maWcgZmlsZS4gU2luY2UgdGhlIHByb2Nlc3MgdG8gZ2V0IGV4dGVybmFsIGZpbGVzXHJcbiAqIHVzZXMgQUpBWCB5b3UgbmVlZCB0byBwYXNzIGEgY2FsbGJhY2sgdG8gaGFuZGxlIHRoZSBuZXh0IHN0ZXBzXHJcbiAqIG9mIHVzaW5nIHRoZSBjb25maWcgZmlsZSwgc2luY2Ugd2UgZG8gbm90IGtub3cgaG93IGxvbmcgaXRcclxuICogd2lsbCB0YWtlIHRvIGdyYWIgdGhlIGZpbGUuXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQYXJzZUNvbmZpZyAoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcclxuICAgIEdldENvbmZpZyhjb25maWdGaWxlLCBjYWxsYmFjayk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldENvbmZpZyAoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcclxuICAgIHZhciB4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoeG1saHR0cC5yZWFkeVN0YXRlID09IDQpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4bWxodHRwLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SOiBNYWxmb3JtZWQgSlNPTiBpbiBjb25maWcgZmlsZS5cIik7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvcm1hdE1hcChkYXRhKTtcclxuICAgICAgICAgICAgZm9ybWF0TGF5ZXJzKGRhdGEpO1xyXG4gICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gXHJcbiAgICB4bWxodHRwLm9wZW4oXCJHRVRcIiwgY29uZmlnRmlsZSwgdHJ1ZSk7XHJcbiAgICB4bWxodHRwLnNlbmQoKTtcclxuICAgIGNvbnNvbGUubG9nKFwiaGlcIilcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0TWFwIChkYXRhKSB7XHJcbiAgICBpZiAoIWRhdGEubWFwKSBkYXRhLm1hcCA9IHt9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRMYXllcnMgKGRhdGEpIHtcclxuICAgIHZhciBsYXllcnMgPSBkYXRhLmxheWVycztcclxuICAgIHZhciBkZWZhdWx0TWFwc2VydmVyVXJsID0gZGF0YS5tYXBzZXJ2ZXJVcmw7XHJcbiAgICB2YXIgZGVmYXVsdEVuYWJsZWRMYXllcnMgPSBkYXRhW1wiYWN0aXZlLWxheWVyc1wiXTtcclxuICAgIHZhciBsYXllcmdyb3VwO1xyXG4gICAgdmFyIGk7XHJcblxyXG4gICAgZm9yICh2YXIgcHJvcCBpbiBsYXllcnMpIHtcclxuICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xyXG4gICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxheWVyZ3JvdXAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgc2V0TWFwc2VydmVyVXJsKGxheWVyZ3JvdXBbaV0sIGRlZmF1bHRNYXBzZXJ2ZXJVcmwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2V0TWFwc2VydmVyVXJsIChsYXllciwgdXJsKSB7XHJcbiAgICBsYXllci51cmwgPSBsYXllci51cmwgfHwgdXJsO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3BhcnNlci5qcyIsImltcG9ydCB7IEdlb1NlYXJjaENvbnRyb2wsIEVzcmlQcm92aWRlciB9IGZyb20gJ2xlYWZsZXQtZ2Vvc2VhcmNoJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENyZWF0ZVNlYXJjaCAobWFwKSB7XHJcbiAgICBjb25zdCBwcm92aWRlciA9IG5ldyBFc3JpUHJvdmlkZXIoKTtcclxuXHJcbiAgICBjb25zdCBzZWFyY2hDb250cm9sID0gbmV3IEdlb1NlYXJjaENvbnRyb2woe1xyXG4gICAgICAgIHByb3ZpZGVyOiBwcm92aWRlcixcclxuICAgICAgICBzaG93TWFya2VyOiBmYWxzZSxcclxuICAgICAgICBhdXRvQ29tcGxldGU6IGZhbHNlLFxyXG4gICAgfSk7XHJcblxyXG4gICAgbWFwLmFkZENvbnRyb2woc2VhcmNoQ29udHJvbCk7XHJcblxyXG4gICAgTC5Eb21FdmVudC5vbihzZWFyY2hDb250cm9sLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuY29udGFpbmVyLCBcImNsaWNrXCIsIGZ1bmN0aW9uIChldikge1xyXG4gICAgICAgIEwuRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKGV2KTtcclxuICAgIH0pO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3NlYXJjaC5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9sZWFmbGV0Q29udHJvbCA9IHJlcXVpcmUoJy4vbGVhZmxldENvbnRyb2wnKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdHZW9TZWFyY2hDb250cm9sJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGVhZmxldENvbnRyb2wpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX3NlYXJjaEVsZW1lbnQgPSByZXF1aXJlKCcuL3NlYXJjaEVsZW1lbnQnKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdTZWFyY2hFbGVtZW50Jywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoRWxlbWVudCkuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfYmluZ1Byb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcnMvYmluZ1Byb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnQmluZ1Byb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmluZ1Byb3ZpZGVyKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9lc3JpUHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9lc3JpUHJvdmlkZXInKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdFc3JpUHJvdmlkZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lc3JpUHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX2dvb2dsZVByb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXInKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdHb29nbGVQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2dvb2dsZVByb3ZpZGVyKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9vcGVuU3RyZWV0TWFwUHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9vcGVuU3RyZWV0TWFwUHJvdmlkZXInKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdPcGVuU3RyZWV0TWFwUHJvdmlkZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vcGVuU3RyZWV0TWFwUHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX3Byb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcnMvcHJvdmlkZXInKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKS5kZWZhdWx0O1xuICB9XG59KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9pbmRleC5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9ub2RlbnRSdW50aW1lID0gcmVxdWlyZSgnbm9kZW50LXJ1bnRpbWUnKTtcblxudmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBMZWFmbGV0Q29udHJvbDtcblxudmFyIF9sb2Rhc2ggPSByZXF1aXJlKCdsb2Rhc2guZGVib3VuY2UnKTtcblxudmFyIF9sb2Rhc2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbG9kYXNoKTtcblxudmFyIF9zZWFyY2hFbGVtZW50ID0gcmVxdWlyZSgnLi9zZWFyY2hFbGVtZW50Jyk7XG5cbnZhciBfc2VhcmNoRWxlbWVudDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2hFbGVtZW50KTtcblxudmFyIF9yZXN1bHRMaXN0ID0gcmVxdWlyZSgnLi9yZXN1bHRMaXN0Jyk7XG5cbnZhciBfcmVzdWx0TGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZXN1bHRMaXN0KTtcblxudmFyIF9kb21VdGlscyA9IHJlcXVpcmUoJy4vZG9tVXRpbHMnKTtcblxudmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgZGVmYXVsdE9wdGlvbnMgPSBmdW5jdGlvbiBkZWZhdWx0T3B0aW9ucygpIHtcbiAgcmV0dXJuIHtcbiAgICBwb3NpdGlvbjogJ3RvcGxlZnQnLFxuICAgIHN0eWxlOiAnYnV0dG9uJyxcbiAgICBzaG93TWFya2VyOiB0cnVlLFxuICAgIHNob3dQb3B1cDogZmFsc2UsXG4gICAgbWFya2VyOiB7XG4gICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKSxcbiAgICAgIGRyYWdnYWJsZTogZmFsc2VcbiAgICB9LFxuICAgIG1heE1hcmtlcnM6IDEsXG4gICAgcmV0YWluWm9vbUxldmVsOiBmYWxzZSxcbiAgICBhbmltYXRlWm9vbTogdHJ1ZSxcbiAgICBzZWFyY2hMYWJlbDogJ0VudGVyIGFkZHJlc3MnLFxuICAgIG5vdEZvdW5kTWVzc2FnZTogJ1NvcnJ5LCB0aGF0IGFkZHJlc3MgY291bGQgbm90IGJlIGZvdW5kLicsXG4gICAgbWVzc2FnZUhpZGVEZWxheTogMzAwMCxcbiAgICB6b29tTGV2ZWw6IDE4LFxuICAgIGNsYXNzTmFtZXM6IHtcbiAgICAgIGNvbnRhaW5lcjogJ2xlYWZsZXQtYmFyIGxlYWZsZXQtY29udHJvbCBsZWFmbGV0LWNvbnRyb2wtZ2Vvc2VhcmNoJyxcbiAgICAgIGJ1dHRvbjogJ2xlYWZsZXQtYmFyLXBhcnQgbGVhZmxldC1iYXItcGFydC1zaW5nbGUnLFxuICAgICAgbXNnYm94OiAnbGVhZmxldC1iYXIgbWVzc2FnZScsXG4gICAgICBmb3JtOiAnJyxcbiAgICAgIGlucHV0OiAnJ1xuICAgIH0sXG4gICAgYXV0b0NvbXBsZXRlOiB0cnVlLFxuICAgIGF1dG9Db21wbGV0ZURlbGF5OiAyNTBcbiAgfTtcbn07XG5cbnZhciBDb250cm9sID0ge1xuICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdGhpcy5tYXJrZXJzID0gbmV3IEwuRmVhdHVyZUdyb3VwKCk7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBfZXh0ZW5kcyh7fSwgZGVmYXVsdE9wdGlvbnMoKSwgb3B0aW9ucyk7XG5cbiAgICB2YXIgX29wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHN0eWxlID0gX29wdGlvbnMuc3R5bGUsXG4gICAgICAgIGNsYXNzTmFtZXMgPSBfb3B0aW9ucy5jbGFzc05hbWVzLFxuICAgICAgICBzZWFyY2hMYWJlbCA9IF9vcHRpb25zLnNlYXJjaExhYmVsLFxuICAgICAgICBhdXRvQ29tcGxldGUgPSBfb3B0aW9ucy5hdXRvQ29tcGxldGUsXG4gICAgICAgIGF1dG9Db21wbGV0ZURlbGF5ID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlRGVsYXk7XG5cbiAgICBpZiAoc3R5bGUgIT09ICdidXR0b24nKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuY2xhc3NOYW1lcy5jb250YWluZXIgKz0gJyAnICsgb3B0aW9ucy5zdHlsZTtcbiAgICB9XG5cbiAgICB0aGlzLnNlYXJjaEVsZW1lbnQgPSBuZXcgX3NlYXJjaEVsZW1lbnQyLmRlZmF1bHQoX2V4dGVuZHMoe30sIHRoaXMub3B0aW9ucywge1xuICAgICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQocXVlcnkpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLm9uU3VibWl0KHF1ZXJ5KTtcbiAgICAgIH1cbiAgICB9KSk7XG5cbiAgICB2YXIgX3NlYXJjaEVsZW1lbnQkZWxlbWVuID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLFxuICAgICAgICBjb250YWluZXIgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uY29udGFpbmVyLFxuICAgICAgICBmb3JtID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmZvcm0sXG4gICAgICAgIGlucHV0ID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmlucHV0O1xuXG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSk7XG5cbiAgICB2YXIgYnV0dG9uID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnYScsIGNsYXNzTmFtZXMuYnV0dG9uLCBjb250YWluZXIpO1xuICAgIGJ1dHRvbi50aXRsZSA9IHNlYXJjaExhYmVsO1xuICAgIGJ1dHRvbi5ocmVmID0gJyMnO1xuXG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uQ2xpY2soZSk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgaWYgKGF1dG9Db21wbGV0ZSkge1xuICAgICAgdGhpcy5yZXN1bHRMaXN0ID0gbmV3IF9yZXN1bHRMaXN0Mi5kZWZhdWx0KHtcbiAgICAgICAgaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKF9yZWYpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gX3JlZi5yZXN1bHQ7XG5cbiAgICAgICAgICBpbnB1dC52YWx1ZSA9IHJlc3VsdC5sYWJlbDtcbiAgICAgICAgICBfdGhpcy5vblN1Ym1pdCh7IHF1ZXJ5OiByZXN1bHQubGFiZWwgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBmb3JtLmFwcGVuZENoaWxkKHRoaXMucmVzdWx0TGlzdC5lbGVtZW50cy5jb250YWluZXIpO1xuXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsICgwLCBfbG9kYXNoMi5kZWZhdWx0KShmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMuYXV0b1NlYXJjaChlKTtcbiAgICAgIH0sIGF1dG9Db21wbGV0ZURlbGF5KSwgdHJ1ZSk7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnNlbGVjdFJlc3VsdChlKTtcbiAgICAgIH0sIHRydWUpO1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5jbGVhclJlc3VsdHMoZSk7XG4gICAgICB9LCB0cnVlKTtcbiAgICB9XG5cbiAgICB0aGlzLmVsZW1lbnRzID0geyBidXR0b246IGJ1dHRvbiB9O1xuICB9LFxuICBvbkFkZDogZnVuY3Rpb24gb25BZGQobWFwKSB7XG4gICAgdmFyIF9vcHRpb25zMiA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgc2hvd01hcmtlciA9IF9vcHRpb25zMi5zaG93TWFya2VyLFxuICAgICAgICBzdHlsZSA9IF9vcHRpb25zMi5zdHlsZTtcblxuXG4gICAgdGhpcy5tYXAgPSBtYXA7XG4gICAgaWYgKHNob3dNYXJrZXIpIHtcbiAgICAgIHRoaXMubWFya2Vycy5hZGRUbyhtYXApO1xuICAgIH1cblxuICAgIGlmIChzdHlsZSA9PT0gJ2JhcicpIHtcbiAgICAgIHZhciBmb3JtID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmZvcm07XG5cbiAgICAgIHZhciByb290ID0gbWFwLmdldENvbnRhaW5lcigpLnF1ZXJ5U2VsZWN0b3IoJy5sZWFmbGV0LWNvbnRyb2wtY29udGFpbmVyJyk7XG5cbiAgICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCAnbGVhZmxldC1jb250cm9sLWdlb3NlYXJjaCBiYXInKTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChmb3JtKTtcbiAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgICAgIHRoaXMuZWxlbWVudHMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuY29udGFpbmVyO1xuICB9LFxuICBvblJlbW92ZTogZnVuY3Rpb24gb25SZW1vdmUoKSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgY29udGFpbmVyLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9LFxuICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBfc2VhcmNoRWxlbWVudCRlbGVtZW4yID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLFxuICAgICAgICBjb250YWluZXIgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4yLmNvbnRhaW5lcixcbiAgICAgICAgaW5wdXQgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4yLmlucHV0O1xuXG5cbiAgICBpZiAoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICB9XG4gIH0sXG4gIHNlbGVjdFJlc3VsdDogZnVuY3Rpb24gc2VsZWN0UmVzdWx0KGV2ZW50KSB7XG4gICAgaWYgKCFbX2NvbnN0YW50cy5BUlJPV19ET1dOX0tFWSwgX2NvbnN0YW50cy5BUlJPV19VUF9LRVldLmluY2x1ZGVzKGV2ZW50LmtleUNvZGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgaW5wdXQgPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuaW5wdXQ7XG5cblxuICAgIHZhciBsaXN0ID0gdGhpcy5yZXN1bHRMaXN0O1xuICAgIHZhciBtYXggPSB0aGlzLnJlc3VsdExpc3QuY291bnQoKSAtIDE7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYml0d2lzZVxuICAgIHZhciBuZXh0ID0gZXZlbnQuY29kZSA9PT0gJ0Fycm93RG93bicgPyB+fmxpc3Quc2VsZWN0ZWQgKyAxIDogfn5saXN0LnNlbGVjdGVkIC0gMTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbmVzdGVkLXRlcm5hcnlcbiAgICB2YXIgaWR4ID0gbmV4dCA8IDAgPyBtYXggOiBuZXh0ID4gbWF4ID8gMCA6IG5leHQ7XG5cbiAgICB2YXIgaXRlbSA9IGxpc3Quc2VsZWN0KGlkeCk7XG4gICAgaW5wdXQudmFsdWUgPSBpdGVtLmxhYmVsO1xuICB9LFxuICBjbGVhclJlc3VsdHM6IGZ1bmN0aW9uIGNsZWFyUmVzdWx0cyhldmVudCkge1xuICAgIGlmIChldmVudC5rZXlDb2RlICE9PSBfY29uc3RhbnRzLkVTQ0FQRV9LRVkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnJlc3VsdExpc3QuY2xlYXIoKTtcbiAgfSxcbiAgYXV0b1NlYXJjaDogZnVuY3Rpb24gYXV0b1NlYXJjaChldmVudCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG4gICAgICB2YXIgcXVlcnksIHByb3ZpZGVyLCByZXN1bHRzO1xuXG4gICAgICBpZiAoX2NvbnN0YW50cy5TUEVDSUFMX0tFWVMuaW5jbHVkZXMoZXZlbnQua2V5Q29kZSkpIHtcbiAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcbiAgICAgIH1cblxuICAgICAgcXVlcnkgPSBldmVudC50YXJnZXQudmFsdWU7XG4gICAgICBwcm92aWRlciA9IHRoaXMub3B0aW9ucy5wcm92aWRlcjtcbiAgICAgIHJldHVybiBwcm92aWRlci5zZWFyY2goeyBxdWVyeTogcXVlcnkgfSkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcblxuICAgICAgICByZXN1bHRzID0gJGF3YWl0XzE7XG4gICAgICAgIHRoaXMucmVzdWx0TGlzdC5yZW5kZXIocmVzdWx0cyk7XG4gICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICB9LFxuICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQocXVlcnkpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgdmFyIHByb3ZpZGVyLCByZXN1bHRzO1xuICAgICAgcHJvdmlkZXIgPSB0aGlzLm9wdGlvbnMucHJvdmlkZXI7XG4gICAgICByZXR1cm4gcHJvdmlkZXIuc2VhcmNoKHF1ZXJ5KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMikge1xuXG4gICAgICAgIHJlc3VsdHMgPSAkYXdhaXRfMjtcblxuICAgICAgICBpZiAocmVzdWx0cyAmJiByZXN1bHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLnNob3dSZXN1bHQocmVzdWx0c1swXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcbiAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG4gIH0sXG4gIHNob3dSZXN1bHQ6IGZ1bmN0aW9uIHNob3dSZXN1bHQocmVzdWx0KSB7XG4gICAgdmFyIG1hcmtlcnMgPSBPYmplY3Qua2V5cyh0aGlzLm1hcmtlcnMuX2xheWVycyk7XG4gICAgaWYgKG1hcmtlcnMubGVuZ3RoID49IHRoaXMub3B0aW9ucy5tYXhNYXJrZXJzKSB7XG4gICAgICB0aGlzLm1hcmtlcnMucmVtb3ZlTGF5ZXIobWFya2Vyc1swXSk7XG4gICAgfVxuXG4gICAgdmFyIG1hcmtlciA9IHRoaXMuYWRkTWFya2VyKHJlc3VsdCk7XG4gICAgdGhpcy5jZW50ZXJNYXAocmVzdWx0KTtcblxuICAgIHRoaXMubWFwLmZpcmVFdmVudCgnZ2Vvc2VhcmNoL3Nob3dsb2NhdGlvbicsIHtcbiAgICAgIGxvY2F0aW9uOiByZXN1bHQsXG4gICAgICBtYXJrZXI6IG1hcmtlclxuICAgIH0pO1xuICB9LFxuICBhZGRNYXJrZXI6IGZ1bmN0aW9uIGFkZE1hcmtlcihyZXN1bHQpIHtcbiAgICB2YXIgX29wdGlvbnMzID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBvcHRpb25zID0gX29wdGlvbnMzLm1hcmtlcixcbiAgICAgICAgc2hvd1BvcHVwID0gX29wdGlvbnMzLnNob3dQb3B1cDtcblxuICAgIHZhciBtYXJrZXIgPSBuZXcgTC5NYXJrZXIoW3Jlc3VsdC55LCByZXN1bHQueF0sIG9wdGlvbnMpO1xuICAgIG1hcmtlci5iaW5kUG9wdXAocmVzdWx0LmxhYmVsKTtcblxuICAgIHRoaXMubWFya2Vycy5hZGRMYXllcihtYXJrZXIpO1xuXG4gICAgaWYgKHNob3dQb3B1cCkge1xuICAgICAgbWFya2VyLm9wZW5Qb3B1cCgpO1xuICAgIH1cblxuICAgIHJldHVybiBtYXJrZXI7XG4gIH0sXG4gIGNlbnRlck1hcDogZnVuY3Rpb24gY2VudGVyTWFwKHJlc3VsdCkge1xuICAgIHZhciBfb3B0aW9uczQgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHJldGFpblpvb21MZXZlbCA9IF9vcHRpb25zNC5yZXRhaW5ab29tTGV2ZWwsXG4gICAgICAgIGFuaW1hdGVab29tID0gX29wdGlvbnM0LmFuaW1hdGVab29tO1xuXG5cbiAgICB2YXIgcmVzdWx0Qm91bmRzID0gbmV3IEwuTGF0TG5nQm91bmRzKHJlc3VsdC5ib3VuZHMpO1xuICAgIHZhciBib3VuZHMgPSByZXN1bHRCb3VuZHMuaXNWYWxpZCgpID8gcmVzdWx0Qm91bmRzIDogdGhpcy5tYXJrZXJzLmdldEJvdW5kcygpO1xuXG4gICAgaWYgKCFyZXRhaW5ab29tTGV2ZWwgJiYgcmVzdWx0Qm91bmRzLmlzVmFsaWQoKSkge1xuICAgICAgdGhpcy5tYXAuZml0Qm91bmRzKGJvdW5kcywgeyBhbmltYXRlOiBhbmltYXRlWm9vbSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tYXAuc2V0Vmlldyhib3VuZHMuZ2V0Q2VudGVyKCksIHRoaXMuZ2V0Wm9vbSgpLCB7IGFuaW1hdGU6IGFuaW1hdGVab29tIH0pO1xuICAgIH1cbiAgfSxcbiAgZ2V0Wm9vbTogZnVuY3Rpb24gZ2V0Wm9vbSgpIHtcbiAgICB2YXIgX29wdGlvbnM1ID0gdGhpcy5vcHRpb25zLFxuICAgICAgICByZXRhaW5ab29tTGV2ZWwgPSBfb3B0aW9uczUucmV0YWluWm9vbUxldmVsLFxuICAgICAgICB6b29tTGV2ZWwgPSBfb3B0aW9uczUuem9vbUxldmVsO1xuXG4gICAgcmV0dXJuIHJldGFpblpvb21MZXZlbCA/IHRoaXMubWFwLmdldFpvb20oKSA6IHpvb21MZXZlbDtcbiAgfVxufTtcblxuZnVuY3Rpb24gTGVhZmxldENvbnRyb2woKSB7XG4gIGlmICghTCB8fCAhTC5Db250cm9sIHx8ICFMLkNvbnRyb2wuZXh0ZW5kKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdMZWFmbGV0IG11c3QgYmUgbG9hZGVkIGJlZm9yZSBpbnN0YW50aWF0aW5nIHRoZSBHZW9TZWFyY2ggY29udHJvbCcpO1xuICB9XG5cbiAgdmFyIExDb250cm9sID0gTC5Db250cm9sLmV4dGVuZChDb250cm9sKTtcblxuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgb3B0aW9ucyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIG9wdGlvbnNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShMQ29udHJvbCwgW251bGxdLmNvbmNhdChvcHRpb25zKSkpKCk7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvbGVhZmxldENvbnRyb2wuanMiLCJcInVzZSBzdHJpY3RcIjtcbi8qXG4gKiAkYXN5bmNiaW5kIGhhcyBtdWx0aXBsZSB1c2VzLCBkZXBlbmRpbmcgb24gdGhlIHBhcmFtZXRlciBsaXN0LiBJdCBpcyBpbiBGdW5jdGlvbi5wcm90b3R5cGUsIHNvICd0aGlzJyBpcyBhbHdheXMgYSBmdW5jdGlvblxuICpcbiAqIDEpIElmIGNhbGxlZCB3aXRoIGEgc2luZ2xlIGFyZ3VtZW50ICh0aGlzKSwgaXQgaXMgdXNlZCB3aGVuIGRlZmluaW5nIGFuIGFzeW5jIGZ1bmN0aW9uIHRvIGVuc3VyZSB3aGVuXG4gKiAgICAgIGl0IGlzIGludm9rZWQsIHRoZSBjb3JyZWN0ICd0aGlzJyBpcyBwcmVzZW50LCBqdXN0IGxpa2UgXCJiaW5kXCIuIEZvciBsZWdhY3kgcmVhc29ucywgJ3RoaXMnIGlzIGdpdmVuXG4gKiAgICAgIGEgbWVtZWJlciAndGhlbicgd2hpY2ggcmVmZXJzIHRvIGl0c2VsZi5cbiAqIDIpIElmIGNhbGxlZCB3aXRoIGEgc2Vjb25kIHBhcmFtZXRlciAoXCJjYXRjaGVyXCIpIGFuZCBjYXRjaGVyIT09dHJ1ZSBpdCBpcyBiZWluZyB1c2VkIHRvIGludm9rZSBhbiBhc3luY1xuICogICAgICBmdW5jdGlvbiB3aGVyZSB0aGUgc2Vjb25kIHBhcmFtZXRlciBpcyB0aGUgZXJyb3IgY2FsbGJhY2sgKGZvciBzeW5jIGV4Y2VwdGlvbnMgYW5kIHRvIGJlIHBhc3NlZCB0b1xuICogICAgICBuZXN0ZWQgYXN5bmMgY2FsbHMpXG4gKiAzKSBJZiBjYWxsZWQgd2l0aCB0aGUgc2Vjb25kIHBhcmFtZXRlcj09PXRydWUsIGl0IGlzIHRoZSBzYW1lIHVzZSBhcyAoMSksIGJ1dCB0aGUgZnVuY3Rpb24gaXMgd3JhcHBlZFxuICogICAgICBpbiBhbiAnUHJvbWlzZScgYXMgd2VsbCBib3VuZCB0byAndGhpcycuXG4gKiAgICAgIEl0IGlzIHRoZSBzYW1lIGFzIGNhbGxpbmcgJ25ldyBQcm9taXNlKHRoaXMpJywgd2hlcmUgJ3RoaXMnIGlzIHRoZSBmdW5jdGlvbiBiZWluZyBib3VuZC93cmFwcGVkXG4gKiA0KSBJZiBjYWxsZWQgd2l0aCB0aGUgc2Vjb25kIHBhcmFtZXRlcj09PTAsIGl0IGlzIHRoZSBzYW1lIHVzZSBhcyAoMSksIGJ1dCB0aGUgZnVuY3Rpb24gaXMgd3JhcHBlZFxuICogICAgICBpbiBhICdMYXp5VGhlbmFibGUnLCB3aGljaCBleGVjdXRlcyBsYXppbHkgYW5kIGNhbiByZXNvbHZlIHN5bmNocm9ub3VzbHkuXG4gKiAgICAgIEl0IGlzIHRoZSBzYW1lIGFzIGNhbGxpbmcgJ25ldyBMYXp5VGhlbmFibGUodGhpcyknIChpZiBzdWNoIGEgdHlwZSB3ZXJlIGV4cG9zZWQpLCB3aGVyZSAndGhpcycgaXNcbiAqICAgICAgdGhlIGZ1bmN0aW9uIGJlaW5nIGJvdW5kL3dyYXBwZWRcbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzSW5jbHVkZXMoaW5jbHVkZXMsaW5wdXQpIHtcbiAgICB2YXIgc3JjID0gaW5wdXQudG9TdHJpbmcoKSA7XG4gICAgdmFyIHQgPSBcInJldHVybiBcIitzcmMgO1xuICAgIHZhciBhcmdzID0gc3JjLm1hdGNoKC8uKlxcKChbXildKilcXCkvKVsxXSA7XG4gICAgdmFyIHJlID0gL1snXCJdISEhKFteJ1wiXSopWydcIl0vZyA7XG4gICAgdmFyIG0gPSBbXSA7XG4gICAgd2hpbGUgKDEpIHtcbiAgICAgICAgdmFyIG14ID0gcmUuZXhlYyh0KSA7XG4gICAgICAgIGlmIChteClcbiAgICAgICAgICAgIG0ucHVzaChteCkgO1xuICAgICAgICBlbHNlIGJyZWFrIDtcbiAgICB9XG4gICAgbS5yZXZlcnNlKCkuZm9yRWFjaChmdW5jdGlvbihlKXtcbiAgICAgICAgdCA9IHQuc2xpY2UoMCxlLmluZGV4KStpbmNsdWRlc1tlWzFdXSt0LnN1YnN0cihlLmluZGV4K2VbMF0ubGVuZ3RoKSA7XG4gICAgfSkgO1xuICAgIHQgPSB0LnJlcGxhY2UoL1xcL1xcKlteKl0qXFwqXFwvL2csJyAnKS5yZXBsYWNlKC9cXHMrL2csJyAnKSA7XG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbihhcmdzLHQpKCkgO1xufVxuXG52YXIgJGFzeW5jYmluZCA9IHByb2Nlc3NJbmNsdWRlcyh7XG4gICAgem91c2FuOnJlcXVpcmUoJy4vem91c2FuJykudG9TdHJpbmcoKSxcbiAgICB0aGVuYWJsZTpyZXF1aXJlKCcuL3RoZW5hYmxlRmFjdG9yeScpLnRvU3RyaW5nKClcbn0sXG5mdW5jdGlvbiAkYXN5bmNiaW5kKHNlbGYsY2F0Y2hlcikge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGlmICghRnVuY3Rpb24ucHJvdG90eXBlLiRhc3luY2JpbmQpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSxcIiRhc3luY2JpbmRcIix7dmFsdWU6JGFzeW5jYmluZCxlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWV9KSA7XG4gICAgfVxuXG4gICAgaWYgKCEkYXN5bmNiaW5kLnRyYW1wb2xpbmUpIHtcbiAgICAgICRhc3luY2JpbmQudHJhbXBvbGluZSA9IGZ1bmN0aW9uIHRyYW1wb2xpbmUodCx4LHMsZSx1KXtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGIocSkge1xuICAgICAgICAgICAgICAgIHdoaWxlIChxKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChxLnRoZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBxLnRoZW4oYiwgZSkgO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHU/dW5kZWZpbmVkOnE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxLnBvcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBxLnBvcCgpID8geC5jYWxsKHQpIDogcTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0gcztcbiAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0gcS5jYWxsKHQpXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlKHIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoISRhc3luY2JpbmQuTGF6eVRoZW5hYmxlKSB7XG4gICAgICAgICRhc3luY2JpbmQuTGF6eVRoZW5hYmxlID0gJyEhIXRoZW5hYmxlJygpO1xuICAgICAgICAkYXN5bmNiaW5kLkVhZ2VyVGhlbmFibGUgPSAkYXN5bmNiaW5kLlRoZW5hYmxlID0gKCRhc3luY2JpbmQuRWFnZXJUaGVuYWJsZUZhY3RvcnkgPSAnISEhem91c2FuJykoKTtcbiAgICB9XG5cbiAgICB2YXIgcmVzb2x2ZXIgPSB0aGlzO1xuICAgIHN3aXRjaCAoY2F0Y2hlcikge1xuICAgIGNhc2UgdHJ1ZTpcbiAgICAgICAgcmV0dXJuIG5ldyAoJGFzeW5jYmluZC5UaGVuYWJsZSkoYm91bmRUaGVuKTtcbiAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBuZXcgKCRhc3luY2JpbmQuTGF6eVRoZW5hYmxlKShib3VuZFRoZW4pO1xuICAgIGNhc2UgdW5kZWZpbmVkOlxuICAgICAgICAvKiBGb3IgcnVudGltZSBjb21wYXRpYmlsaXR5IHdpdGggTm9kZW50IHYyLngsIHByb3ZpZGUgYSB0aGVuYWJsZSAqL1xuICAgICAgICBib3VuZFRoZW4udGhlbiA9IGJvdW5kVGhlbiA7XG4gICAgICAgIHJldHVybiBib3VuZFRoZW4gO1xuICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZXIuYXBwbHkoc2VsZixhcmd1bWVudHMpO1xuICAgICAgICAgICAgfSBjYXRjaChleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYXRjaGVyKGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBib3VuZFRoZW4oKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlci5hcHBseShzZWxmLGFyZ3VtZW50cyk7XG4gICAgfVxufSkgO1xuXG5mdW5jdGlvbiAkYXN5bmNzcGF3bihwcm9taXNlUHJvdmlkZXIsc2VsZikge1xuICAgIGlmICghRnVuY3Rpb24ucHJvdG90eXBlLiRhc3luY3NwYXduKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsXCIkYXN5bmNzcGF3blwiLHt2YWx1ZTokYXN5bmNzcGF3bixlbnVtZXJhYmxlOmZhbHNlLGNvbmZpZ3VyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWV9KSA7XG4gICAgfVxuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBGdW5jdGlvbikpIHJldHVybiA7XG5cbiAgICB2YXIgZ2VuRiA9IHRoaXMgO1xuICAgIHJldHVybiBuZXcgcHJvbWlzZVByb3ZpZGVyKGZ1bmN0aW9uIGVub3VnaChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIGdlbiA9IGdlbkYuY2FsbChzZWxmLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICBmdW5jdGlvbiBzdGVwKGZuLGFyZykge1xuICAgICAgICAgICAgdmFyIG5leHQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG5leHQgPSBmbi5jYWxsKGdlbixhcmcpO1xuICAgICAgICAgICAgICAgIGlmKG5leHQuZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZSAhPT0gcmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUgJiYgbmV4dC52YWx1ZT09PW5leHQudmFsdWUudGhlbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dC52YWx1ZShyZXNvbHZlLHJlamVjdCkgO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSAmJiByZXNvbHZlKG5leHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSA9IG51bGwgO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZS50aGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQudmFsdWUudGhlbihmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi5uZXh0LHYpO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi50aHJvdyxlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4ubmV4dCxuZXh0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICByZWplY3QgJiYgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIHJlamVjdCA9IG51bGwgO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdGVwKGdlbi5uZXh0KTtcbiAgICB9KTtcbn1cblxuLy8gSW5pdGlhbGl6ZSBhc3luYyBiaW5kaW5nc1xuJGFzeW5jYmluZCgpIDtcbiRhc3luY3NwYXduKCkgO1xuXG4vLyBFeHBvcnQgYXN5bmMgYmluZGluZ3Ncbm1vZHVsZS5leHBvcnRzID0ge1xuICAgICRhc3luY2JpbmQ6JGFzeW5jYmluZCxcbiAgICAkYXN5bmNzcGF3bjokYXN5bmNzcGF3blxufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbm9kZW50LXJ1bnRpbWUvcnVudGltZS5qcyIsIi8qIFRoaXMgY29kZSBpcyBiYXNlZCBvbjpcbnpvdXNhbiAtIEEgTGlnaHRuaW5nIEZhc3QsIFlldCBWZXJ5IFNtYWxsIFByb21pc2UgQSsgQ29tcGxpYW50IEltcGxlbWVudGF0aW9uXG5odHRwczovL2dpdGh1Yi5jb20vYmx1ZWphdmEvem91c2FuXG5BdXRob3I6IEdsZW5uIENyb3dub3ZlciA8Z2xlbm5AYmx1ZWphdmEuY29tPiAoaHR0cDovL3d3dy5ibHVlamF2YS5jb20pXG5WZXJzaW9uIDIuMy4zXG5MaWNlbnNlOiBNSVQgKi9cblwidXNlIHN0cmljdFwiO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih0aWNrKXtcbiAgICB0aWNrID0gdGljayB8fCAodHlwZW9mIHByb2Nlc3M9PT1cIm9iamVjdFwiICYmIHByb2Nlc3MubmV4dFRpY2spIHx8ICh0eXBlb2Ygc2V0SW1tZWRpYXRlPT09XCJmdW5jdGlvblwiICYmIHNldEltbWVkaWF0ZSkgfHwgZnVuY3Rpb24oZil7c2V0VGltZW91dChmLDApfTtcbiAgICB2YXIgc29vbiA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmcSA9IFtdLCBmcVN0YXJ0ID0gMCwgYnVmZmVyU2l6ZSA9IDEwMjQ7XG4gICAgICAgIGZ1bmN0aW9uIGNhbGxRdWV1ZSgpIHtcbiAgICAgICAgICAgIHdoaWxlIChmcS5sZW5ndGggLSBmcVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgdHJ5IHsgZnFbZnFTdGFydF0oKSB9IGNhdGNoKGV4KSB7IC8qIGNvbnNvbGUuZXJyb3IoZXgpICovIH1cbiAgICAgICAgICAgICAgICBmcVtmcVN0YXJ0KytdID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmIChmcVN0YXJ0ID09PSBidWZmZXJTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIGZxLnNwbGljZSgwLCBidWZmZXJTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgZnFTdGFydCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgZnEucHVzaChmbik7XG4gICAgICAgICAgICBpZiAoZnEubGVuZ3RoIC0gZnFTdGFydCA9PT0gMSlcbiAgICAgICAgICAgICAgICB0aWNrKGNhbGxRdWV1ZSk7XG4gICAgICAgIH07XG4gICAgfSkoKTtcblxuICAgIGZ1bmN0aW9uIFpvdXNhbihmdW5jKSB7XG4gICAgICAgIGlmIChmdW5jKSB7XG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICAgICAgZnVuYyhmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgICAgICAgbWUucmVzb2x2ZShhcmcpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGFyZykge1xuICAgICAgICAgICAgICAgIG1lLnJlamVjdChhcmcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBab3VzYW4ucHJvdG90eXBlID0ge1xuICAgICAgICByZXNvbHZlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB0aGlzKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKFwiQXR0ZW1wdCB0byByZXNvbHZlIHByb21pc2Ugd2l0aCBzZWxmXCIpKTtcbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgICAgICBpZiAodmFsdWUgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIikpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3QgPSAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGhlbiA9IHZhbHVlLnRoZW47XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhlbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bmN0aW9uIChyYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5yZXNvbHZlKHJhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVqZWN0KHJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0ZVTEZJTExFRDtcbiAgICAgICAgICAgIHRoaXMudiA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKG1lLmMpXG4gICAgICAgICAgICAgICAgc29vbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCBsID0gbWUuYy5sZW5ndGg7biA8IGw7IG4rKylcbiAgICAgICAgICAgICAgICAgICAgICAgIFNUQVRFX0ZVTEZJTExFRChtZS5jW25dLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlamVjdDogZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUkVKRUNURUQ7XG4gICAgICAgICAgICB0aGlzLnYgPSByZWFzb247XG4gICAgICAgICAgICB2YXIgY2xpZW50cyA9IHRoaXMuYztcbiAgICAgICAgICAgIGlmIChjbGllbnRzKVxuICAgICAgICAgICAgICAgIHNvb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgbCA9IGNsaWVudHMubGVuZ3RoO24gPCBsOyBuKyspXG4gICAgICAgICAgICAgICAgICAgICAgICBTVEFURV9SRUpFQ1RFRChjbGllbnRzW25dLCByZWFzb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICB0aGVuOiBmdW5jdGlvbiAob25GLCBvblIpIHtcbiAgICAgICAgICAgIHZhciBwID0gbmV3IFpvdXNhbigpO1xuICAgICAgICAgICAgdmFyIGNsaWVudCA9IHtcbiAgICAgICAgICAgICAgICB5OiBvbkYsXG4gICAgICAgICAgICAgICAgbjogb25SLFxuICAgICAgICAgICAgICAgIHA6IHBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jLnB1c2goY2xpZW50KTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYyA9IFtjbGllbnRdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcyA9IHRoaXMuc3RhdGUsIGEgPSB0aGlzLnY7XG4gICAgICAgICAgICAgICAgc29vbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHMoY2xpZW50LCBhKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFNUQVRFX0ZVTEZJTExFRChjLCBhcmcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjLnkgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgeXJldCA9IGMueS5jYWxsKHVuZGVmaW5lZCwgYXJnKTtcbiAgICAgICAgICAgICAgICBjLnAucmVzb2x2ZSh5cmV0KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGMucC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICBjLnAucmVzb2x2ZShhcmcpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFNUQVRFX1JFSkVDVEVEKGMsIHJlYXNvbikge1xuICAgICAgICBpZiAodHlwZW9mIGMubiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciB5cmV0ID0gYy5uLmNhbGwodW5kZWZpbmVkLCByZWFzb24pO1xuICAgICAgICAgICAgICAgIGMucC5yZXNvbHZlKHlyZXQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgYy5wLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgIGMucC5yZWplY3QocmVhc29uKTtcbiAgICB9XG5cbiAgICBab3VzYW4ucmVzb2x2ZSA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgaWYgKHZhbCAmJiAodmFsIGluc3RhbmNlb2YgWm91c2FuKSlcbiAgICAgICAgICAgIHJldHVybiB2YWwgO1xuICAgICAgICB2YXIgeiA9IG5ldyBab3VzYW4oKTtcbiAgICAgICAgei5yZXNvbHZlKHZhbCk7XG4gICAgICAgIHJldHVybiB6O1xuICAgIH07XG4gICAgWm91c2FuLnJlamVjdCA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKGVyciAmJiAoZXJyIGluc3RhbmNlb2YgWm91c2FuKSlcbiAgICAgICAgICAgIHJldHVybiBlcnIgO1xuICAgICAgICB2YXIgeiA9IG5ldyBab3VzYW4oKTtcbiAgICAgICAgei5yZWplY3QoZXJyKTtcbiAgICAgICAgcmV0dXJuIHo7XG4gICAgfTtcblxuICAgIFpvdXNhbi52ZXJzaW9uID0gXCIyLjMuMy1ub2RlbnRcIiA7XG4gICAgcmV0dXJuIFpvdXNhbiA7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9ub2RlbnQtcnVudGltZS96b3VzYW4uanMiLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vcHJvY2Vzcy9icm93c2VyLmpzIiwidmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXG4vLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXG5leHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xufTtcbmV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG59O1xuZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkge1xuICBpZiAodGltZW91dCkge1xuICAgIHRpbWVvdXQuY2xvc2UoKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csIHRoaXMuX2lkKTtcbn07XG5cbi8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG59O1xuXG5leHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG59O1xuXG5leHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cbiAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG4gIGlmIChtc2VjcyA+PSAwKSB7XG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcbiAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7XG4gICAgfSwgbXNlY3MpO1xuICB9XG59O1xuXG4vLyBzZXRpbW1lZGlhdGUgYXR0YWNoZXMgaXRzZWxmIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG5yZXF1aXJlKFwic2V0aW1tZWRpYXRlXCIpO1xuZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG5leHBvcnRzLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwiKGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG4gICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcbiAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbiAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cbiAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcbiAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKFwiXCIgKyBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgICAvLyBDb3B5IGZ1bmN0aW9uIGFyZ3VtZW50c1xuICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG4gICAgICB9XG4gICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcbiAgICAgIHZhciB0YXNrID0geyBjYWxsYmFjazogY2FsbGJhY2ssIGFyZ3M6IGFyZ3MgfTtcbiAgICAgIHRhc2tzQnlIYW5kbGVbbmV4dEhhbmRsZV0gPSB0YXNrO1xuICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG4gICAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG4gICAgICAgIHZhciBhcmdzID0gdGFzay5hcmdzO1xuICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcbiAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogXCJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC5cIlxuICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG4gICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJ1bklmUHJlc2VudChoYW5kbGUpOyB9KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcbiAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cbiAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcbiAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcbiAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2VcbiAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXG4gICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG4gICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuXG4gICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuICAgIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXG4gICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcbiAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG4gICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG4gICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG4gICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGRvYyAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpKSB7XG4gICAgICAgIC8vIEZvciBJRSA24oCTOFxuICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpO1xuICAgIH1cblxuICAgIGF0dGFjaFRvLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbiAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xufSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB0aGlzIDogZ2xvYmFsIDogc2VsZikpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vdGltZXJzLWJyb3dzZXJpZnkvfi9zZXRpbW1lZGlhdGUvc2V0SW1tZWRpYXRlLmpzIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBpc1RoZW5hYmxlKG9iaikge1xuICAgICAgICByZXR1cm4gb2JqICYmIChvYmogaW5zdGFuY2VvZiBPYmplY3QpICYmIHR5cGVvZiBvYmoudGhlbj09PVwiZnVuY3Rpb25cIjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHV0aW9uKHAscixob3cpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8qIDIuMi43LjEgKi9cbiAgICAgICAgICAgIHZhciB4ID0gaG93ID8gaG93KHIpOnIgO1xuXG4gICAgICAgICAgICBpZiAocD09PXgpIC8qIDIuMy4xICovXG4gICAgICAgICAgICAgICAgcmV0dXJuIHAucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJQcm9taXNlIHJlc29sdXRpb24gbG9vcFwiKSkgO1xuXG4gICAgICAgICAgICBpZiAoaXNUaGVuYWJsZSh4KSkge1xuICAgICAgICAgICAgICAgIC8qIDIuMy4zICovXG4gICAgICAgICAgICAgICAgeC50aGVuKGZ1bmN0aW9uKHkpe1xuICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uKHAseSk7XG4gICAgICAgICAgICAgICAgfSxmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICAgICAgcC5yZWplY3QoZSlcbiAgICAgICAgICAgICAgICB9KSA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHAucmVzb2x2ZSh4KSA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAvKiAyLjIuNy4yICovXG4gICAgICAgICAgICBwLnJlamVjdChleCkgO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ2hhaW5lZCgpIHt9O1xuICAgIENoYWluZWQucHJvdG90eXBlID0ge1xuICAgICAgICByZXNvbHZlOl91bmNoYWluZWQsXG4gICAgICAgIHJlamVjdDpfdW5jaGFpbmVkLFxuICAgICAgICB0aGVuOnRoZW5DaGFpblxuICAgIH07XG4gICAgZnVuY3Rpb24gX3VuY2hhaW5lZCh2KXt9XG4gICAgZnVuY3Rpb24gdGhlbkNoYWluKHJlcyxyZWope1xuICAgICAgICB0aGlzLnJlc29sdmUgPSByZXM7XG4gICAgICAgIHRoaXMucmVqZWN0ID0gcmVqO1xuICAgIH1cbiAgICBcbiAgICBmdW5jdGlvbiB0aGVuKHJlcyxyZWope1xuICAgICAgICB2YXIgY2hhaW4gPSBuZXcgQ2hhaW5lZCgpIDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuX3Jlc29sdmVyKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzVGhlbmFibGUodmFsdWUpID8gdmFsdWUudGhlbihyZXMscmVqKSA6IHJlc29sdXRpb24oY2hhaW4sdmFsdWUscmVzKTtcbiAgICAgICAgICAgIH0sZnVuY3Rpb24oZXgpIHtcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uKGNoYWluLGV4LHJlaikgO1xuICAgICAgICAgICAgfSkgO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgcmVzb2x1dGlvbihjaGFpbixleCxyZWopO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaGFpbiA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gVGhlbmFibGUocmVzb2x2ZXIpIHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZXIgPSByZXNvbHZlciA7XG4gICAgICAgIHRoaXMudGhlbiA9IHRoZW4gO1xuICAgIH07XG5cbiAgICBUaGVuYWJsZS5yZXNvbHZlID0gZnVuY3Rpb24odil7XG4gICAgICAgIHJldHVybiBUaGVuYWJsZS5pc1RoZW5hYmxlKHYpID8gdiA6IHt0aGVuOmZ1bmN0aW9uKHJlc29sdmUpe3JldHVybiByZXNvbHZlKHYpfX07XG4gICAgfTtcblxuICAgIFRoZW5hYmxlLmlzVGhlbmFibGUgPSBpc1RoZW5hYmxlIDtcblxuICAgIHJldHVybiBUaGVuYWJsZSA7XG59IDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbm9kZW50LXJ1bnRpbWUvdGhlbmFibGVGYWN0b3J5LmpzIiwiLyoqXG4gKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIDxodHRwczovL2pxdWVyeS5vcmcvPlxuICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICovXG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBOQU4gPSAwIC8gMDtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xudmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cbi8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG52YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZ2xvYmFsYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG52YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heCxcbiAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblxuLyoqXG4gKiBHZXRzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2VcbiAqIHRoZSBVbml4IGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMi40LjBcbiAqIEBjYXRlZ29yeSBEYXRlXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lc3RhbXAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcbiAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcbiAqIH0sIF8ubm93KCkpO1xuICogLy8gPT4gTG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgaW52b2NhdGlvbi5cbiAqL1xudmFyIG5vdyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gcm9vdC5EYXRlLm5vdygpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcbiAqIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdhc1xuICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG4gKiBQcm92aWRlIGBvcHRpb25zYCB0byBpbmRpY2F0ZSB3aGV0aGVyIGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGVcbiAqIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcbiAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnRcbiAqIGNhbGxzIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgXG4gKiBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXNcbiAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG4gKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cbiAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcbiAqXG4gKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy5cbiAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcbiAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuICogICAndHJhaWxpbmcnOiBmYWxzZVxuICogfSkpO1xuICpcbiAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuXG4gKiB2YXIgZGVib3VuY2VkID0gXy5kZWJvdW5jZShiYXRjaExvZywgMjUwLCB7ICdtYXhXYWl0JzogMTAwMCB9KTtcbiAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcbiAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTtcbiAqXG4gKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7XG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIGxhc3RBcmdzLFxuICAgICAgbGFzdFRoaXMsXG4gICAgICBtYXhXYWl0LFxuICAgICAgcmVzdWx0LFxuICAgICAgdGltZXJJZCxcbiAgICAgIGxhc3RDYWxsVGltZSxcbiAgICAgIGxhc3RJbnZva2VUaW1lID0gMCxcbiAgICAgIGxlYWRpbmcgPSBmYWxzZSxcbiAgICAgIG1heGluZyA9IGZhbHNlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG4gICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcbiAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52b2tlRnVuYyh0aW1lKSB7XG4gICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcbiAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzO1xuXG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAvLyBJbnZva2UgdGhlIGxlYWRpbmcgZWRnZS5cbiAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lLFxuICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cbiAgICByZXR1cm4gbWF4aW5nID8gbmF0aXZlTWluKHJlc3VsdCwgbWF4V2FpdCAtIHRpbWVTaW5jZUxhc3RJbnZva2UpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvdWxkSW52b2tlKHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lO1xuXG4gICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcbiAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuICAgIC8vIGl0IGFzIHRoZSB0cmFpbGluZyBlZGdlLCBvciB3ZSd2ZSBoaXQgdGhlIGBtYXhXYWl0YCBsaW1pdC5cbiAgICByZXR1cm4gKGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8ICh0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0KSB8fFxuICAgICAgKHRpbWVTaW5jZUxhc3RDYWxsIDwgMCkgfHwgKG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpO1xuICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcbiAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7XG4gICAgfVxuICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuICAgIHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG4gICAgLy8gZGVib3VuY2VkIGF0IGxlYXN0IG9uY2UuXG4gICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG4gICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcbiAgICB9XG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIGlmICh0aW1lcklkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lcklkKTtcbiAgICB9XG4gICAgbGFzdEludm9rZVRpbWUgPSAwO1xuICAgIGxhc3RBcmdzID0gbGFzdENhbGxUaW1lID0gbGFzdFRoaXMgPSB0aW1lcklkID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKSxcbiAgICAgICAgaXNJbnZva2luZyA9IHNob3VsZEludm9rZSh0aW1lKTtcblxuICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuICAgIGxhc3RUaGlzID0gdGhpcztcbiAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXG4gICAgaWYgKGlzSW52b2tpbmcpIHtcbiAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgICBpZiAobWF4aW5nKSB7XG4gICAgICAgIC8vIEhhbmRsZSBpbnZvY2F0aW9ucyBpbiBhIHRpZ2h0IGxvb3AuXG4gICAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgZGVib3VuY2VkLmNhbmNlbCA9IGNhbmNlbDtcbiAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG4gIHJldHVybiBkZWJvdW5jZWQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG4gKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG4gKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1N5bWJvbCgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG4gICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnRvTnVtYmVyKDMuMik7XG4gKiAvLyA9PiAzLjJcbiAqXG4gKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gNWUtMzI0XG4gKlxuICogXy50b051bWJlcihJbmZpbml0eSk7XG4gKiAvLyA9PiBJbmZpbml0eVxuICpcbiAqIF8udG9OdW1iZXIoJzMuMicpO1xuICogLy8gPT4gMy4yXG4gKi9cbmZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBOQU47XG4gIH1cbiAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcbiAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IChvdGhlciArICcnKSA6IG90aGVyO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcbiAgfVxuICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG4gIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG4gIHJldHVybiAoaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpKVxuICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KVxuICAgIDogKHJlSXNCYWRIZXgudGVzdCh2YWx1ZSkgPyBOQU4gOiArdmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRlYm91bmNlO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9+L2xvZGFzaC5kZWJvdW5jZS9pbmRleC5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9ub2RlbnRSdW50aW1lID0gcmVxdWlyZSgnbm9kZW50LXJ1bnRpbWUnKTtcblxudmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX2RvbVV0aWxzID0gcmVxdWlyZSgnLi9kb21VdGlscycpO1xuXG52YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBTZWFyY2hFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTZWFyY2hFbGVtZW50KCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgIF9yZWYkaGFuZGxlU3VibWl0ID0gX3JlZi5oYW5kbGVTdWJtaXQsXG4gICAgICAgIGhhbmRsZVN1Ym1pdCA9IF9yZWYkaGFuZGxlU3VibWl0ID09PSB1bmRlZmluZWQgPyBmdW5jdGlvbiAoKSB7fSA6IF9yZWYkaGFuZGxlU3VibWl0LFxuICAgICAgICBfcmVmJHNlYXJjaExhYmVsID0gX3JlZi5zZWFyY2hMYWJlbCxcbiAgICAgICAgc2VhcmNoTGFiZWwgPSBfcmVmJHNlYXJjaExhYmVsID09PSB1bmRlZmluZWQgPyAnc2VhcmNoJyA6IF9yZWYkc2VhcmNoTGFiZWwsXG4gICAgICAgIF9yZWYkY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcbiAgICAgICAgY2xhc3NOYW1lcyA9IF9yZWYkY2xhc3NOYW1lcyA9PT0gdW5kZWZpbmVkID8ge30gOiBfcmVmJGNsYXNzTmFtZXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2VhcmNoRWxlbWVudCk7XG5cbiAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgWydnZW9zZWFyY2gnLCBjbGFzc05hbWVzLmNvbnRhaW5lcl0uam9pbignICcpKTtcbiAgICB2YXIgZm9ybSA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2Zvcm0nLCBbJycsIGNsYXNzTmFtZXMuZm9ybV0uam9pbignICcpLCBjb250YWluZXIpO1xuICAgIHZhciBpbnB1dCA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2lucHV0JywgWydnbGFzcycsIGNsYXNzTmFtZXMuaW5wdXRdLmpvaW4oJyAnKSwgZm9ybSk7XG5cbiAgICBpbnB1dC50eXBlID0gJ3RleHQnO1xuICAgIGlucHV0LnBsYWNlaG9sZGVyID0gc2VhcmNoTGFiZWw7XG5cbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5vbklucHV0KGUpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5vbktleVVwKGUpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5vbktleVByZXNzKGUpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5vbkZvY3VzKGUpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uQmx1cihlKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICB0aGlzLmVsZW1lbnRzID0geyBjb250YWluZXI6IGNvbnRhaW5lciwgZm9ybTogZm9ybSwgaW5wdXQ6IGlucHV0IH07XG4gICAgdGhpcy5oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoU2VhcmNoRWxlbWVudCwgW3tcbiAgICBrZXk6ICdvbkZvY3VzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25Gb2N1cygpIHtcbiAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKSh0aGlzLmVsZW1lbnRzLmZvcm0sICdhY3RpdmUnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvbkJsdXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkJsdXIoKSB7XG4gICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkodGhpcy5lbGVtZW50cy5mb3JtLCAnYWN0aXZlJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25TdWJtaXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvblN1Ym1pdChldmVudCkge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgICAgdmFyIF9lbGVtZW50cywgaW5wdXQsIGNvbnRhaW5lcjtcblxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICBfZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzLCBpbnB1dCA9IF9lbGVtZW50cy5pbnB1dCwgY29udGFpbmVyID0gX2VsZW1lbnRzLmNvbnRhaW5lcjtcblxuICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnZXJyb3InKTtcbiAgICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVTdWJtaXQoeyBxdWVyeTogaW5wdXQudmFsdWUgfSkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcbiAgICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuICAgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG4gICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvbklucHV0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25JbnB1dCgpIHtcbiAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuXG4gICAgICBpZiAodGhpcy5oYXNFcnJvcikge1xuICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnZXJyb3InKTtcbiAgICAgICAgdGhpcy5oYXNFcnJvciA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uS2V5VXAnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleVVwKGV2ZW50KSB7XG4gICAgICB2YXIgX2VsZW1lbnRzMiA9IHRoaXMuZWxlbWVudHMsXG4gICAgICAgICAgY29udGFpbmVyID0gX2VsZW1lbnRzMi5jb250YWluZXIsXG4gICAgICAgICAgaW5wdXQgPSBfZWxlbWVudHMyLmlucHV0O1xuXG5cbiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBfY29uc3RhbnRzLkVTQ0FQRV9LRVkpIHtcbiAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcbiAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXG4gICAgICAgIGlucHV0LnZhbHVlID0gJyc7XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5mb2N1cygpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmJsdXIoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvbktleVByZXNzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25LZXlQcmVzcyhldmVudCkge1xuICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IF9jb25zdGFudHMuRU5URVJfS0VZKSB7XG4gICAgICAgIHRoaXMub25TdWJtaXQoZXZlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NldFF1ZXJ5JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UXVlcnkocXVlcnkpIHtcbiAgICAgIHZhciBpbnB1dCA9IHRoaXMuZWxlbWVudHMuaW5wdXQ7XG5cbiAgICAgIGlucHV0LnZhbHVlID0gcXVlcnk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFNlYXJjaEVsZW1lbnQ7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNlYXJjaEVsZW1lbnQ7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvc2VhcmNoRWxlbWVudC5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnQgKi9cbnZhciBjcmVhdGVFbGVtZW50ID0gZXhwb3J0cy5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlRWxlbWVudChlbGVtZW50KSB7XG4gIHZhciBjbGFzc05hbWVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJztcbiAgdmFyIHBhcmVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbnVsbDtcblxuICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1lbnQpO1xuICBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWVzO1xuXG4gIGlmIChwYXJlbnQpIHtcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoZWwpO1xuICB9XG5cbiAgcmV0dXJuIGVsO1xufTtcblxudmFyIGNyZWF0ZVNjcmlwdEVsZW1lbnQgPSBleHBvcnRzLmNyZWF0ZVNjcmlwdEVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVTY3JpcHRFbGVtZW50KHVybCwgY2IpIHtcbiAgdmFyIHNjcmlwdCA9IGNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcsIG51bGwsIGRvY3VtZW50LmJvZHkpO1xuICBzY3JpcHQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvamF2YXNjcmlwdCcpO1xuXG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgIHdpbmRvd1tjYl0gPSBmdW5jdGlvbiAoanNvbikge1xuICAgICAgc2NyaXB0LnJlbW92ZSgpO1xuICAgICAgZGVsZXRlIHdpbmRvd1tjYl07XG4gICAgICByZXNvbHZlKGpzb24pO1xuICAgIH07XG5cbiAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdzcmMnLCB1cmwpO1xuICB9KTtcbn07XG5cbnZhciBhZGRDbGFzc05hbWUgPSBleHBvcnRzLmFkZENsYXNzTmFtZSA9IGZ1bmN0aW9uIGFkZENsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgaWYgKGVsZW1lbnQgJiYgIWVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgfVxufTtcblxudmFyIHJlbW92ZUNsYXNzTmFtZSA9IGV4cG9ydHMucmVtb3ZlQ2xhc3NOYW1lID0gZnVuY3Rpb24gcmVtb3ZlQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gIH1cbn07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvZG9tVXRpbHMuanMiLCJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbnZhciBFTlRFUl9LRVkgPSBleHBvcnRzLkVOVEVSX0tFWSA9IDEzO1xudmFyIEVTQ0FQRV9LRVkgPSBleHBvcnRzLkVTQ0FQRV9LRVkgPSAyNztcbnZhciBBUlJPV19ET1dOX0tFWSA9IGV4cG9ydHMuQVJST1dfRE9XTl9LRVkgPSA0MDtcbnZhciBBUlJPV19VUF9LRVkgPSBleHBvcnRzLkFSUk9XX1VQX0tFWSA9IDM4O1xudmFyIEFSUk9XX0xFRlRfS0VZID0gZXhwb3J0cy5BUlJPV19MRUZUX0tFWSA9IDM3O1xudmFyIEFSUk9XX1JJR0hUX0tFWSA9IGV4cG9ydHMuQVJST1dfUklHSFRfS0VZID0gMzk7XG5cbnZhciBTUEVDSUFMX0tFWVMgPSBleHBvcnRzLlNQRUNJQUxfS0VZUyA9IFtFTlRFUl9LRVksIEVTQ0FQRV9LRVksIEFSUk9XX0RPV05fS0VZLCBBUlJPV19VUF9LRVksIEFSUk9XX0xFRlRfS0VZLCBBUlJPV19SSUdIVF9LRVldO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL2NvbnN0YW50cy5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9kb21VdGlscyA9IHJlcXVpcmUoJy4vZG9tVXRpbHMnKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIGN4ID0gZnVuY3Rpb24gY3goKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBjbGFzc25hbWVzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgY2xhc3NuYW1lc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBjbGFzc25hbWVzLmpvaW4oJyAnKS50cmltKCk7XG59O1xuXG52YXIgUmVzdWx0TGlzdCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUmVzdWx0TGlzdCgpIHtcbiAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgIF9yZWYkaGFuZGxlQ2xpY2sgPSBfcmVmLmhhbmRsZUNsaWNrLFxuICAgICAgICBoYW5kbGVDbGljayA9IF9yZWYkaGFuZGxlQ2xpY2sgPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uICgpIHt9IDogX3JlZiRoYW5kbGVDbGljayxcbiAgICAgICAgX3JlZiRjbGFzc05hbWVzID0gX3JlZi5jbGFzc05hbWVzLFxuICAgICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSZXN1bHRMaXN0KTtcblxuICAgIF9pbml0aWFsaXNlUHJvcHMuY2FsbCh0aGlzKTtcblxuICAgIHRoaXMucHJvcHMgPSB7IGhhbmRsZUNsaWNrOiBoYW5kbGVDbGljaywgY2xhc3NOYW1lczogY2xhc3NOYW1lcyB9O1xuICAgIHRoaXMuc2VsZWN0ZWQgPSAtMTtcblxuICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBjeCgncmVzdWx0cycsIGNsYXNzTmFtZXMuY29udGFpbmVyKSk7XG4gICAgdmFyIHJlc3VsdEl0ZW0gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBjeChjbGFzc05hbWVzLml0ZW0pKTtcblxuICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbGljaywgdHJ1ZSk7XG4gICAgdGhpcy5lbGVtZW50cyA9IHsgY29udGFpbmVyOiBjb250YWluZXIsIHJlc3VsdEl0ZW06IHJlc3VsdEl0ZW0gfTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhSZXN1bHRMaXN0LCBbe1xuICAgIGtleTogJ3JlbmRlcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIHZhciByZXN1bHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTtcbiAgICAgIHZhciBfZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzLFxuICAgICAgICAgIGNvbnRhaW5lciA9IF9lbGVtZW50cy5jb250YWluZXIsXG4gICAgICAgICAgcmVzdWx0SXRlbSA9IF9lbGVtZW50cy5yZXN1bHRJdGVtO1xuXG4gICAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICAgIHJlc3VsdHMuZm9yRWFjaChmdW5jdGlvbiAocmVzdWx0LCBpZHgpIHtcbiAgICAgICAgdmFyIGNoaWxkID0gcmVzdWx0SXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIGNoaWxkLnNldEF0dHJpYnV0ZSgnZGF0YS1rZXknLCBpZHgpO1xuICAgICAgICBjaGlsZC5pbm5lckhUTUwgPSByZXN1bHQubGFiZWw7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucmVzdWx0cyA9IHJlc3VsdHM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2VsZWN0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0KGluZGV4KSB7XG4gICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25mdXNpbmctYXJyb3dcblxuICAgICAgQXJyYXkuZnJvbShjb250YWluZXIuY2hpbGRyZW4pLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkLCBpZHgpIHtcbiAgICAgICAgcmV0dXJuIGlkeCA9PT0gaW5kZXggPyAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY2hpbGQsICdhY3RpdmUnKSA6ICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjaGlsZCwgJ2FjdGl2ZScpO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSBpbmRleDtcbiAgICAgIHJldHVybiB0aGlzLnJlc3VsdHNbaW5kZXhdO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NvdW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY291bnQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXN1bHRzLmxlbmd0aDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjbGVhcicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXG4gICAgICB0aGlzLnNlbGVjdGVkID0gLTE7XG5cbiAgICAgIHdoaWxlIChjb250YWluZXIubGFzdENoaWxkKSB7XG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIubGFzdENoaWxkKTtcbiAgICAgIH1cblxuICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBSZXN1bHRMaXN0O1xufSgpO1xuXG52YXIgX2luaXRpYWxpc2VQcm9wcyA9IGZ1bmN0aW9uIF9pbml0aWFsaXNlUHJvcHMoKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdGhpcy5vbkNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBfcmVmMiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgIHRhcmdldCA9IF9yZWYyLnRhcmdldDtcblxuICAgIHZhciBoYW5kbGVDbGljayA9IF90aGlzLnByb3BzLmhhbmRsZUNsaWNrO1xuICAgIHZhciBjb250YWluZXIgPSBfdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cblxuICAgIGlmICh0YXJnZXQucGFyZW50Tm9kZSAhPT0gY29udGFpbmVyIHx8ICF0YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLWtleScpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGlkeCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEta2V5Jyk7XG4gICAgdmFyIHJlc3VsdCA9IF90aGlzLnJlc3VsdHNbaWR4XTtcbiAgICBoYW5kbGVDbGljayh7IHJlc3VsdDogcmVzdWx0IH0pO1xuICB9O1xufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUmVzdWx0TGlzdDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9yZXN1bHRMaXN0LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX25vZGVudFJ1bnRpbWUgPSByZXF1aXJlKCdub2RlbnQtcnVudGltZScpO1xuXG52YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVyJyk7XG5cbnZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXG52YXIgX2RvbVV0aWxzID0gcmVxdWlyZSgnLi4vZG9tVXRpbHMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXG4gIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcbiAgICBrZXk6ICdlbmRwb2ludCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcbiAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2wsXG4gICAgICAgICAganNvbnAgPSBfcmVmLmpzb25wO1xuXG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblxuXG4gICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcbiAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICBqc29ucDoganNvbnBcbiAgICAgIH0pKTtcblxuICAgICAgcmV0dXJuIHByb3RvY29sICsgJy8vZGV2LnZpcnR1YWxlYXJ0aC5uZXQvUkVTVC92MS9Mb2NhdGlvbnM/JyArIHBhcmFtU3RyaW5nO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3BhcnNlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcbiAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblxuICAgICAgaWYgKGRhdGEucmVzb3VyY2VTZXRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhLnJlc291cmNlU2V0c1swXS5yZXNvdXJjZXMubWFwKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgeDogci5wb2ludC5jb29yZGluYXRlc1sxXSxcbiAgICAgICAgICB5OiByLnBvaW50LmNvb3JkaW5hdGVzWzBdLFxuICAgICAgICAgIGxhYmVsOiByLmFkZHJlc3MuZm9ybWF0dGVkQWRkcmVzcyxcbiAgICAgICAgICBib3VuZHM6IFtbci5iYm94WzBdLCByLmJib3hbMV1dLCAvLyBzLCB3XG4gICAgICAgICAgW3IuYmJveFsyXSwgci5iYm94WzNdXV0sXG4gICAgICAgICAgcmF3OiByXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZWFyY2gnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWFyY2goX3JlZjMpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG4gICAgICAgIHZhciBxdWVyeSwgcHJvdG9jb2wsIGpzb25wLCB1cmwsIGpzb247XG4gICAgICAgIHF1ZXJ5ID0gX3JlZjMucXVlcnk7XG5cbiAgICAgICAgcHJvdG9jb2wgPSB+bG9jYXRpb24ucHJvdG9jb2wuaW5kZXhPZignaHR0cCcpID8gbG9jYXRpb24ucHJvdG9jb2wgOiAnaHR0cHM6JztcblxuICAgICAgICBqc29ucCA9ICdCSU5HX0pTT05QX0NCXycgKyBEYXRlLm5vdygpO1xuICAgICAgICB1cmwgPSB0aGlzLmVuZHBvaW50KHsgcXVlcnk6IHF1ZXJ5LCBwcm90b2NvbDogcHJvdG9jb2wsIGpzb25wOiBqc29ucCB9KTtcblxuICAgICAgICByZXR1cm4gKDAsIF9kb21VdGlscy5jcmVhdGVTY3JpcHRFbGVtZW50KSh1cmwsIGpzb25wKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuICAgICAgICAgIGpzb24gPSAkYXdhaXRfMTtcbiAgICAgICAgICByZXR1cm4gJHJldHVybih0aGlzLnBhcnNlKHsgZGF0YToganNvbiB9KSk7XG4gICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9iaW5nUHJvdmlkZXIuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbm9kZW50UnVudGltZSA9IHJlcXVpcmUoJ25vZGVudC1ydW50aW1lJyk7XG5cbnZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcbiAgICBrZXk6ICdnZXRQYXJhbVN0cmluZycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhcmFtU3RyaW5nKHBhcmFtcykge1xuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHBhcmFtcykubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHBhcmFtc1trZXldKTtcbiAgICAgIH0pLmpvaW4oJyYnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZWFyY2gnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWFyY2goX3JlZikge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwgdXJsLCByZXF1ZXN0LCBqc29uO1xuICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnk7XG5cbiAgICAgICAgcHJvdG9jb2wgPSB+bG9jYXRpb24ucHJvdG9jb2wuaW5kZXhPZignaHR0cCcpID8gbG9jYXRpb24ucHJvdG9jb2wgOiAnaHR0cHM6JztcbiAgICAgICAgdXJsID0gdGhpcy5lbmRwb2ludCh7IHF1ZXJ5OiBxdWVyeSwgcHJvdG9jb2w6IHByb3RvY29sIH0pO1xuXG4gICAgICAgIHJldHVybiBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG4gICAgICAgICAgcmVxdWVzdCA9ICRhd2FpdF8xO1xuICAgICAgICAgIHJldHVybiByZXF1ZXN0Lmpzb24oKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMikge1xuICAgICAgICAgICAganNvbiA9ICRhd2FpdF8yO1xuICAgICAgICAgICAgcmV0dXJuICRyZXR1cm4odGhpcy5wYXJzZSh7IGRhdGE6IGpzb24gfSkpO1xuICAgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvcHJvdmlkZXIuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVyJyk7XG5cbnZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblxuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cblxuICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG4gICAgICAgIGY6ICdqc29uJyxcbiAgICAgICAgdGV4dDogcXVlcnlcbiAgICAgIH0pKTtcblxuICAgICAgcmV0dXJuIHByb3RvY29sICsgJy8vZ2VvY29kZS5hcmNnaXMuY29tL2FyY2dpcy9yZXN0L3NlcnZpY2VzL1dvcmxkL0dlb2NvZGVTZXJ2ZXIvZmluZD8nICsgcGFyYW1TdHJpbmc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncGFyc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXG4gICAgICByZXR1cm4gZGF0YS5sb2NhdGlvbnMubWFwKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgeDogci5mZWF0dXJlLmdlb21ldHJ5LngsXG4gICAgICAgICAgeTogci5mZWF0dXJlLmdlb21ldHJ5LnksXG4gICAgICAgICAgbGFiZWw6IHIubmFtZSxcbiAgICAgICAgICBib3VuZHM6IFtbci5leHRlbnQueW1pbiwgci5leHRlbnQueG1pbl0sIC8vIHMsIHdcbiAgICAgICAgICBbci5leHRlbnQueW1heCwgci5leHRlbnQueG1heF1dLFxuICAgICAgICAgIHJhdzogclxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZXNyaVByb3ZpZGVyLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3Byb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcicpO1xuXG52YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXG4gIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcbiAgICBrZXk6ICdlbmRwb2ludCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcbiAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXG5cbiAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuICAgICAgICBhZGRyZXNzOiBxdWVyeVxuICAgICAgfSkpO1xuXG4gICAgICAvLyBnb29nbGUgcmVxdWlyZXMgYSBzZWN1cmUgY29ubmVjdGlvbiB3aGVuIHVzaW5nIGFwaSBrZXlzXG4gICAgICB2YXIgcHJvdG8gPSBwYXJhbXMgJiYgcGFyYW1zLmtleSA/ICdodHRwczonIDogcHJvdG9jb2w7XG4gICAgICByZXR1cm4gcHJvdG8gKyAnLy9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbj8nICsgcGFyYW1TdHJpbmc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncGFyc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXG4gICAgICByZXR1cm4gZGF0YS5yZXN1bHRzLm1hcChmdW5jdGlvbiAocikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IHIuZ2VvbWV0cnkubG9jYXRpb24ubG5nLFxuICAgICAgICAgIHk6IHIuZ2VvbWV0cnkubG9jYXRpb24ubGF0LFxuICAgICAgICAgIGxhYmVsOiByLmZvcm1hdHRlZF9hZGRyZXNzLFxuICAgICAgICAgIGJvdW5kczogW1tyLmdlb21ldHJ5LnZpZXdwb3J0LnNvdXRod2VzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0LmxuZ10sIC8vIHMsIHdcbiAgICAgICAgICBbci5nZW9tZXRyeS52aWV3cG9ydC5ub3J0aGVhc3QubGF0LCByLmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sbmddXSxcbiAgICAgICAgICByYXc6IHJcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm92aWRlcjtcbn0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2dvb2dsZVByb3ZpZGVyLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3Byb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcicpO1xuXG52YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXG4gIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcbiAgICBrZXk6ICdlbmRwb2ludCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcbiAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXG5cbiAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuICAgICAgICBmb3JtYXQ6ICdqc29uJyxcbiAgICAgICAgcTogcXVlcnlcbiAgICAgIH0pKTtcblxuICAgICAgcmV0dXJuIHByb3RvY29sICsgJy8vbm9taW5hdGltLm9wZW5zdHJlZXRtYXAub3JnL3NlYXJjaD8nICsgcGFyYW1TdHJpbmc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncGFyc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXG4gICAgICByZXR1cm4gZGF0YS5tYXAoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiByLmxvbixcbiAgICAgICAgICB5OiByLmxhdCxcbiAgICAgICAgICBsYWJlbDogci5kaXNwbGF5X25hbWUsXG4gICAgICAgICAgYm91bmRzOiBbW3BhcnNlRmxvYXQoci5ib3VuZGluZ2JveFswXSksIHBhcnNlRmxvYXQoci5ib3VuZGluZ2JveFsyXSldLCAvLyBzLCB3XG4gICAgICAgICAgW3BhcnNlRmxvYXQoci5ib3VuZGluZ2JveFsxXSksIHBhcnNlRmxvYXQoci5ib3VuZGluZ2JveFszXSldXSxcbiAgICAgICAgICByYXc6IHJcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm92aWRlcjtcbn0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL29wZW5TdHJlZXRNYXBQcm92aWRlci5qcyIsImltcG9ydCB7dG9nZ2xlTGF5ZXJ9IGZyb20gXCIuL2xheWVyXCI7XHJcbmltcG9ydCB7bWFrZU9wYWNpdHlTbGlkZXJ9IGZyb20gXCIuL29wYWNpdHlTbGlkZXJcIlxyXG5pbXBvcnQge3NldFNsaWRlckluaXRpYWxQb3N9IGZyb20gXCIuL29wYWNpdHlTbGlkZXJcIlxyXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tIFwiLi9zaGFyZVwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFNldHVwUGFuZWwgKGxheWVycywgbGF5b3V0KSB7XHJcbiAgICB2YXIgbGF5ZXJHcm91cHMgPSBtYWtlTGF5ZXJHcm91cHMobGF5b3V0WydsYXllci1ncm91cHMtb3JkZXInXSk7XHJcbiAgICBtYWtlTGF5ZXJFbGVtcyhsYXllckdyb3VwcywgbGF5ZXJzKTtcclxuICAgIG1ha2VQYW5lbERyYWdnYWJsZSgpXHJcbiAgICBzZXRQYW5lbFNjcm9sbEhhbmRsZXIoKVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRQYW5lbFNjcm9sbEhhbmRsZXIoKSB7XHJcbiAgICB2YXIgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKVxyXG4gICAgcGFuZWwub25zY3JvbGwgPSB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VQYW5lbERyYWdnYWJsZSgpIHtcclxuICAgIHZhciBvdmVybGF5ID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwtZHJhZy1vdmVybGF5JylcclxuXHJcbiAgICBvdmVybGF5LmNhbGwoZDMuZHJhZygpXHJcbiAgICAgICAgLm9uKCdkcmFnJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHBhbmVsRHJhZ0V2ZW50SGFuZGxlci5jYWxsKHRoaXMpXHJcbiAgICB9KSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhbmVsRHJhZ0V2ZW50SGFuZGxlcigpIHtcclxuICAgIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKVxyXG4gICAgdXBkYXRlUGFuZWxXaWR0aCgpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0ICgpIHtcclxuICAgIHZhciBwYW5lbCA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsJylcclxuICAgIHZhciBwYW5lbE9mZnNldEhlaWdodCA9IHBhbmVsLnByb3BlcnR5KCdvZmZzZXRIZWlnaHQnKVxyXG4gICAgdmFyIHBhbmVsRHJhZ092ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwtZHJhZy1vdmVybGF5JylcclxuICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwtaGVhZGVyJylcclxuXHJcbiAgICB2YXIgbmV3SGVpZ2h0XHJcblxyXG4gICAgaWYgKHBhbmVsLmNsYXNzZWQoJ2dyYXBocy1hY3RpdmUnKSkge1xyXG4gICAgICAgIHZhciBncmFwaExpc3RFeHRyYVNwYWNlID0gNzAwXHJcbiAgICAgICAgdmFyIGdyYXBoTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaC1saXN0JylcclxuICAgICAgICBuZXdIZWlnaHQgPSBoZWFkZXIuc2Nyb2xsSGVpZ2h0ICsgZ3JhcGhMaXN0LnNjcm9sbEhlaWdodCArIGdyYXBoTGlzdEV4dHJhU3BhY2VcclxuICAgIH1cclxuICAgIGVsc2UgeyAvLyBwYW5lbC5jbGFzc2VkKCdsYXllcnMtYWN0aXZlJylcclxuICAgICAgICB2YXIgbGF5ZXJMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheWVyLWxpc3QnKVxyXG4gICAgICAgIG5ld0hlaWdodCA9IGhlYWRlci5zY3JvbGxIZWlnaHQgKyBsYXllckxpc3Quc2Nyb2xsSGVpZ2h0XHJcbiAgICB9XHJcbiAgICBuZXdIZWlnaHQgPSBuZXdIZWlnaHQgPiBwYW5lbE9mZnNldEhlaWdodCA/IGAke25ld0hlaWdodH1gKydweCcgOiBudWxsXHJcbiAgICBwYW5lbERyYWdPdmVybGF5LnN0eWxlLmhlaWdodCA9IG5ld0hlaWdodFxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVQYW5lbFdpZHRoKCkge1xyXG4gICAgdmFyIHBhbmVsID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwnKVxyXG4gICAgdmFyIHBhbmVsTWluV2lkdGggPSArcGFuZWwuc3R5bGUoJ21pbi13aWR0aCcpLnNsaWNlKDAsIC0yKVxyXG4gICAgdmFyIHBhbmVsQ2xpZW50V2lkdGggPSBwYW5lbC5wcm9wZXJ0eSgnY2xpZW50V2lkdGgnKVxyXG5cclxuICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyYXBwZXInKVxyXG4gICAgdmFyIHdyYXBwZXJXaWR0aCA9IHdyYXBwZXIuY2xpZW50V2lkdGhcclxuXHJcbiAgICB2YXIgbWFwV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtd3JhcHBlcicpXHJcblxyXG4gICAgdmFyIG1vdXNlWCA9IGQzLmV2ZW50LnNvdXJjZUV2ZW50LnhcclxuICAgIHZhciB4RGVsdGEgPSAod3JhcHBlcldpZHRoIC0gbW91c2VYKSAtIHBhbmVsQ2xpZW50V2lkdGhcclxuXHJcbiAgICB2YXIgbmV3UGFuZWxXaWR0aCA9IHBhbmVsQ2xpZW50V2lkdGggKyB4RGVsdGFcclxuICAgIG5ld1BhbmVsV2lkdGggPSBuZXdQYW5lbFdpZHRoIDwgcGFuZWxNaW5XaWR0aCA/XHJcbiAgICAgICAgcGFuZWxNaW5XaWR0aFxyXG4gICAgOiAgIG5ld1BhbmVsV2lkdGggPiB3cmFwcGVyV2lkdGggP1xyXG4gICAgICAgIHdyYXBwZXJXaWR0aFxyXG4gICAgOiAgIG5ld1BhbmVsV2lkdGhcclxuICAgIG1hcFdyYXBwZXIuc3R5bGUucGFkZGluZ1JpZ2h0ID0gYCR7bmV3UGFuZWxXaWR0aH1gKydweCdcclxuICAgIHBhbmVsLnN0eWxlKCd3aWR0aCcsIGAke25ld1BhbmVsV2lkdGh9YCsncHgnKVxyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTGF5ZXJHcm91cHMgKGxheW91dCkge1xyXG4gICAgcmV0dXJuIGQzLnNlbGVjdCgnI2xheWVyLWxpc3QnKVxyXG4gICAgICAgIC5zZWxlY3RBbGwoJy5sYXllci1ncm91cC13cmFwcGVyJylcclxuICAgICAgICAuZGF0YShsYXlvdXQpXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAgLmFwcGVuZCgnZGl2JylcclxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwLXdyYXBwZXInKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCBsYXllckdyb3VwID0+IGxheWVyR3JvdXAuaWQpXHJcbiAgICAgICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBsYXllckdyb3VwID0+IGxheWVyR3JvdXAuYWN0aXZlKVxyXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgnZGl2JylcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAtYnRuIGJ0bicpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyR3JvdXAuYWN0aXZlID0gIWxheWVyR3JvdXAuYWN0aXZlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5jbGFzc2VkKCdhY3RpdmUnLCAoKSA9PiBsYXllckdyb3VwLmFjdGl2ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHQobGF5ZXJHcm91cC5uYW1lKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cCcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTGF5ZXJFbGVtcyAobGF5ZXJHcm91cHMsIGxheWVycykge1xyXG4gICAgbGF5ZXJHcm91cHMuc2VsZWN0QWxsKCcubGF5ZXItc2VsZWN0JylcclxuICAgICAgICAuZGF0YShsYXllckdyb3VwID0+IGxheWVyc1tsYXllckdyb3VwLmlkXSlcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2RpdicpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLXNlbGVjdCcpXHJcbiAgICAgICAgLmVhY2goZnVuY3Rpb24gKGxheWVyKSB7XHJcbiAgICAgICAgICAgIHZhciBncm91cE5hbWUgPSB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZDtcclxuICAgICAgICAgICAgdmFyIGxheWVyRGl2ID0gZDMuc2VsZWN0KHRoaXMpXHJcbiAgICAgICAgICAgIG1ha2VDaGVja2JveChsYXllciwgbGF5ZXJEaXYpO1xyXG4gICAgICAgICAgICBtYWtlTGFiZWwobGF5ZXIsIGxheWVyRGl2KTtcclxuICAgICAgICAgICAgbWFrZURlc2NyaXB0aW9uKGxheWVyLCBsYXllckRpdik7XHJcbiAgICAgICAgICAgIG1ha2VMYXllclRvb2xzKGxheWVyLCBsYXllckRpdik7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VDaGVja2JveCAobGF5ZXIsIGxheWVyRGl2KSB7XHJcbiAgICBsYXllckRpdi5hcHBlbmQoJ2lucHV0JylcclxuICAgICAgICAuYXR0cigndHlwZScsICdjaGVja2JveCcpXHJcbiAgICAgICAgLmF0dHIoJ2lkJywgbGF5ZXIgPT4gbGF5ZXIuaWQpXHJcbiAgICAgICAgLmF0dHIoJ2NoZWNrZWQnLCAobGF5ZXIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGxheWVyLmFjdGl2ZSA/ICdjaGVja2VkJyA6IG51bGw7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24obGF5ZXIpIHtcclxuICAgICAgICAgICAgdG9nZ2xlTGF5ZXIobGF5ZXIpO1xyXG4gICAgICAgICAgICBsYXllckRpdi5zZWxlY3QoJy5sYXllci10b29scy13cmFwcGVyJylcclxuICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBsYXllci5hY3RpdmUpO1xyXG4gICAgICAgICAgICBpZiAobGF5ZXIuYWN0aXZlKSBzZXRTbGlkZXJJbml0aWFsUG9zKGxheWVyLCBsYXllckRpdilcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUxhYmVsKGxheWVyLCBsYXllckRpdikge1xyXG4gICAgbGF5ZXJEaXZcclxuICAgICAgICAuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItbGFiZWwtd3JhcHBlcicpXHJcbiAgICAgICAgLmFwcGVuZCgnbGFiZWwnKVxyXG4gICAgICAgICAgICAuYXR0cignZm9yJywgbGF5ZXIgPT4gbGF5ZXIuaWQpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1sYWJlbCcpXHJcbiAgICAgICAgICAgIC5odG1sKGxheWVyID0+IGxheWVyLm5hbWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlRGVzY3JpcHRpb24gKGxheWVyLCBsYXllckRpdikge1xyXG4gICAgaWYgKGxheWVyLmluZm8gJiYgbGF5ZXIuaW5mbyAhPT0gJycpIHtcclxuICAgICAgICBsYXllckRpdi5hcHBlbmQoJ2RpdicpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1pbmZvLWJ0bicpXHJcbiAgICAgICAgICAgIC50ZXh0KCcoPyknKVxyXG4gICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMucGFyZW50Tm9kZSlcclxuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCcubGF5ZXItaW5mby13cmFwcGVyJylcclxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby13cmFwcGVyJylcclxuICAgICAgICAgICAgLnRleHQobGF5ZXIgPT4gbGF5ZXIuaW5mbyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VMYXllclRvb2xzKGxheWVyLCBsYXllckRpdikge1xyXG4gICAgdmFyIGxheWVyVG9vbHNEaXYgPSBsYXllckRpdi5hcHBlbmQoJ2RpdicpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLXRvb2xzLXdyYXBwZXInKVxyXG4gICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsYXllci5hY3RpdmVcclxuICAgICAgICB9KVxyXG5cclxuICAgIG1ha2VPcGFjaXR5U2xpZGVyKGxheWVyLCBsYXllclRvb2xzRGl2KTtcclxuICAgIG1ha2VMZWdlbmQobGF5ZXIsIGxheWVyVG9vbHNEaXYpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTGVnZW5kIChsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIpIHtcclxuICAgIGxheWVyVG9vbHNXcmFwcGVyXHJcbiAgICAgICAgLmFwcGVuZCgnZGl2JylcclxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZC13cmFwcGVyJylcclxuICAgICAgICAuYXBwZW5kKCdpbWcnKVxyXG4gICAgICAgICAgICAuYXR0cignc3JjJywgbGF5ZXIubGVnZW5kIHx8ICdtZWFuX25kdmlfbGVnZW5kLmpwZycpO1xyXG59XHJcblxyXG5cclxuXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3BhbmVsLmpzIiwiaW1wb3J0IHtHZXRNYXB9IGZyb20gXCIuL21hcFwiO1xyXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tIFwiLi9zaGFyZVwiO1xyXG5cclxuLyoqXHJcbiAqIE5lZWRlZCBmb3IgdGhlIHNoYXJlIHVybCBzaW5jZSBMZWFmbGV0IGRvZXMgbm90IGhhdmUgYSBkZWZhdWx0IHdheSB0byBzdXJmYWNlXHJcbiAqIHRoZSBvcmRlciBvZiBsYXllcnMgaW4gdGhlIG1hcFxyXG4gKi9cclxudmFyIF9jdXJyZW50X2xheWVycyA9IFtdO1xyXG5cclxuLyoqXHJcbiAqIE5vdGU6IGxheWVyIGlzIG5vdCB0aGUgbGVhZmxldCBjb25jZXB0IG9mIGEgbGF5ZXIsIGJ1dCByYXRoZXIgdGhlIGludGVybmFsXHJcbiAqICAgICAgIG9iamVjdCB3aGljaCB0cmFja3MgdGhlbS4gbGF5ZXIubWFwTGF5ZXIgaXMgdGhlIHBvaW50ZXIgdG8gdGhlXHJcbiAqICAgICAgIGxlYWZsZXQgbGF5ZXIuXHJcbiAqL1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdldEN1cnJlbnRMYXllcnMgKCkge1xyXG4gICAgcmV0dXJuIF9jdXJyZW50X2xheWVycztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIENyZWF0ZURlZmF1bHRMYXllcnMgKGxheWVycywgZGVmYXVsdExheWVycykge1xyXG4gICAgdmFyIGksIGosIHByb3AsIGxheWVyZ3JvdXA7XHJcbiAgICB2YXIgZGVmYXVsdExheWVyO1xyXG4gICAgdmFyIGZvdW5kTGF5ZXI7XHJcblxyXG4gICAgaWYgKCFkZWZhdWx0TGF5ZXJzIHx8IGRlZmF1bHRMYXllcnMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IGRlZmF1bHRMYXllcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBmb3VuZExheWVyID0gZmFsc2U7XHJcbiAgICAgICAgZGVmYXVsdExheWVyID0gZGVmYXVsdExheWVyc1tpXTtcclxuICAgICAgICBmb3IgKHByb3AgaW4gbGF5ZXJzKSB7XHJcbiAgICAgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XHJcbiAgICAgICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XHJcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsYXllcmdyb3VwLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZGVmYXVsdExheWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlTGF5ZXIobGF5ZXJncm91cFtqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRMYXllciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUxheWVyIChsYXllcikge1xyXG4gICAgaWYgKCFsYXllci5hY3RpdmUpIHtcclxuICAgICAgICBlbmFibGVMYXllcihsYXllcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGRpc2FibGVMYXllcihsYXllcik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVMYXllciAobGF5ZXIpIHtcclxuICAgIHZhciBtYXAgPSBHZXRNYXAoKTtcclxuXHJcbiAgICBsYXllci5hY3RpdmUgPSB0cnVlO1xyXG4gICAgbGF5ZXIubWFwTGF5ZXIgPSBsYXllci5tYXBMYXllciB8fCBtYWtlV21zVGlsZUxheWVyKGxheWVyKTtcclxuICAgIG1hcC5hZGRMYXllcihsYXllci5tYXBMYXllcik7XHJcbiAgICBhZGRMYXllclRvSW50ZXJuYWxUcmFja2VyKGxheWVyKTtcclxuICAgIHVwZGF0ZVNoYXJlVXJsKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIgKGxheWVyKSB7XHJcbiAgICBfY3VycmVudF9sYXllcnMucHVzaChsYXllci5pZCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlTGF5ZXIgKGxheWVyKSB7XHJcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XHJcblxyXG4gICAgbGF5ZXIuYWN0aXZlID0gZmFsc2U7XHJcbiAgICBpZiAobGF5ZXIubWFwTGF5ZXIgJiYgbWFwLmhhc0xheWVyKGxheWVyLm1hcExheWVyKSkge1xyXG4gICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllci5tYXBMYXllcik7XHJcbiAgICB9XHJcbiAgICByZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xyXG4gICAgdXBkYXRlU2hhcmVVcmwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlTGF5ZXJGcm9tSW50ZXJuYWxUcmFja2VyIChsYXllcikge1xyXG4gICAgdmFyIGxvYyA9IF9jdXJyZW50X2xheWVycy5pbmRleE9mKGxheWVyLmlkKTtcclxuICAgIGlmIChsb2MgPT09IC0xKSByZXR1cm47XHJcbiAgICBfY3VycmVudF9sYXllcnMuc3BsaWNlKGxvYywgMSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVMYXllck9wYWNpdHkgKGxheWVyLCBuZXdPcGFjaXR5KSB7XHJcbiAgICBsYXllci5vcGFjaXR5ID0gbmV3T3BhY2l0eVxyXG4gICAgbGF5ZXIubWFwTGF5ZXIuc2V0T3BhY2l0eShuZXdPcGFjaXR5KVxyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlV21zVGlsZUxheWVyIChsYXllcikge1xyXG4gICAgcmV0dXJuIEwudGlsZUxheWVyLndtcyhsYXllci51cmwsIHtcclxuICAgICAgICBsYXllcnM6IGxheWVyLmlkLFxyXG4gICAgICAgIHRyYW5zcGFyZW50OiBsYXllci50cmFuc3BhcmVudCB8fCB0cnVlLFxyXG4gICAgICAgIHZlcnNpb246IGxheWVyLnZlcnNpb24gfHwgJzEuMy4wJyxcclxuICAgICAgICBjcnM6IGxheWVyLmNycyB8fCBMLkNSUy5FUFNHNDMyNixcclxuICAgICAgICBmb3JtYXQ6IGxheWVyLmZvcm1hdCB8fCAnaW1hZ2UvcG5nJyxcclxuICAgICAgICBvcGFjaXR5OiBsYXllci5vcGFjaXR5IHx8IDEuMCxcclxuICAgICAgICB0aWxlU2l6ZTogbGF5ZXIudGlsZVNpemUgfHwgMjU2XHJcbiAgICB9KTtcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9sYXllci5qcyIsInZhciBtYXA7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQ3JlYXRlTWFwIChtYXBDb25maWcpIHtcclxuICAgIHZhciBpZCA9IG1hcENvbmZpZy5pZCB8fCBcIm1hcFwiO1xyXG4gICAgdmFyIG9wdGlvbnMgPSBtYXBDb25maWcub3B0aW9ucyB8fCB7XCJzY3JvbGxXaGVlbFpvb21cIiA6IGZhbHNlfTtcclxuICAgIHZhciBpbml0aWFsQ2VudGVyID0gbWFwQ29uZmlnLmNlbnRlciB8fCBbXCIzOC41XCIsIFwiLTgxXCJdO1xyXG4gICAgdmFyIGluaXRpYWxab29tID0gbWFwQ29uZmlnLnpvb20gfHwgNjtcclxuXHJcbiAgICBtYXAgPSBMLm1hcChpZCwgb3B0aW9ucykuc2V0Vmlldyhpbml0aWFsQ2VudGVyLCBpbml0aWFsWm9vbSk7XHJcbiAgICBMLmNvbnRyb2wuYXR0cmlidXRpb24oKS5hZGRUbyhtYXApXHJcbiAgICByZXR1cm4gbWFwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2V0TWFwICgpIHtcclxuICAgIHJldHVybiBtYXA7XHJcbn1cclxuXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL21hcC5qcyIsImltcG9ydCB7R2V0TWFwfSBmcm9tICcuL21hcCc7XHJcbmltcG9ydCB7QkFTRV9MQVlFUl9UWVBFfSBmcm9tICcuL2Jhc2VsYXllcic7XHJcbmltcG9ydCB7R2V0Q3VycmVudExheWVyc30gZnJvbSAnLi9sYXllcic7XHJcbmltcG9ydCB7R2V0QWxsUG9pbnRzT2ZJbnRlcmVzdH0gZnJvbSAnLi9wb2knO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEJpbmRVcGRhdGVTaGFyZVVybCAobWFwKSB7XHJcbiAgICBtYXAub24oXCJtb3ZlZW5kXCIsIHVwZGF0ZVNoYXJlVXJsKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVNoYXJlVXJsIChlKSB7XHJcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XHJcblxyXG4gICAgdmFyIHBhcmFtcyA9IFtcclxuICAgICAgICBtYWtlQ2VudGVyU3RyaW5nKG1hcCksXHJcbiAgICAgICAgbWFrZVpvb21TdHJpbmcobWFwKSxcclxuICAgICAgICBtYWtlTGF5ZXJTdHJpbmcobWFwKSxcclxuICAgICAgICBtYWtlQmFzZUxheWVyU3RyaW5nKG1hcCksXHJcbiAgICAgICAgbWFrZVBvaW50c09mSW50ZXJlc3RTdHJpbmcoKSxcclxuICAgICAgICBtYWtlQWN0aXZlVGFiU3RyaW5nKClcclxuICAgIF07XHJcblxyXG4gICAgc2V0U2hhcmVVcmwobWFrZVNoYXJlVXJsKHBhcmFtcykpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnIChjb25maWcpIHtcclxuICAgIHZhciBzaGFyZSA9IHBhcnNlU2hhcmVVcmwoKTtcclxuICAgIGlmICghc2hhcmUpIHJldHVybjtcclxuICAgIGlmIChzaGFyZS5jZW50ZXIpIGNvbmZpZy5tYXAuY2VudGVyID0gc2hhcmUuY2VudGVyO1xyXG4gICAgaWYgKHNoYXJlLnpvb20pIGNvbmZpZy5tYXAuem9vbSA9IHNoYXJlLnpvb207XHJcbiAgICBpZiAoc2hhcmUubGF5ZXJzKSBhZGRMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmUubGF5ZXJzLCBjb25maWcpO1xyXG4gICAgaWYgKHNoYXJlLmJhc2VsYXllcnMpIGFkZEJhc2VMYXllclNldHRpbmdzVG9Db25maWcoc2hhcmUuYmFzZWxheWVycywgY29uZmlnKTtcclxuICAgIGlmIChzaGFyZS5wb2lzKSBhZGRQb2ludHNPZkludGVyZXN0VG9Db25maWcoc2hhcmUucG9pcywgY29uZmlnKVxyXG4gICAgaWYgKHNoYXJlLnRhYikgY29uZmlnLnRhYiA9IHNoYXJlLnRhYjtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZVNoYXJlVXJsIChwYXJhbXMpIHtcclxuICAgIHJldHVybiBcIj9cIiArIHBhcmFtcy5maWx0ZXIoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAgIT09IHVuZGVmaW5lZCB9KS5qb2luKFwiJlwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0U2hhcmVVcmwgKHVybCkge1xyXG4gICAgaWYgKHdpbmRvdy5oaXN0b3J5ICYmIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSkge1xyXG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgXCJcIiwgdXJsKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUNlbnRlclN0cmluZyAobWFwKSB7XHJcbiAgICB2YXIgY2VudGVyID0gbWFwLmdldENlbnRlcigpO1xyXG4gICAgcmV0dXJuIFwiY2VudGVyPVwiICsgY2VudGVyLmxhdC50b1N0cmluZygpICsgXCIsXCIgKyBjZW50ZXIubG5nLnRvU3RyaW5nKClcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZVpvb21TdHJpbmcgKG1hcCkge1xyXG4gICAgcmV0dXJuIFwiem9vbT1cIiArIG1hcC5nZXRab29tKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VMYXllclN0cmluZyAobWFwKSB7XHJcbiAgICB2YXIgbGF5ZXJzID0gW107XHJcbiAgICB2YXIgb3BhY2l0eVZhbHMgPSB7fTtcclxuICAgIHZhciBjdXJyZW50TGF5ZXJzID0gR2V0Q3VycmVudExheWVycygpO1xyXG5cclxuICAgIG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBsYXllci5vcHRpb25zO1xyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubGF5ZXJzKSB7XHJcbiAgICAgICAgICAgIG9wYWNpdHlWYWxzW29wdGlvbnMubGF5ZXJzXSA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoXCJvcGFjaXR5XCIpID8gb3B0aW9ucy5vcGFjaXR5IDogXCIxXCI7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIGN1cnJlbnRMYXllcjtcclxuICAgIHZhciBpO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IGN1cnJlbnRMYXllcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjdXJyZW50TGF5ZXIgPSBjdXJyZW50TGF5ZXJzW2ldO1xyXG4gICAgICAgIGxheWVycy5wdXNoKGN1cnJlbnRMYXllcik7XHJcbiAgICAgICAgbGF5ZXJzLnB1c2gob3BhY2l0eVZhbHNbY3VycmVudExheWVyXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJsYXllcnM9XCIgKyBsYXllcnMuam9pbihcIixcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VCYXNlTGF5ZXJTdHJpbmcgKG1hcCkge1xyXG4gICAgdmFyIGxheWVycyA9IFtdO1xyXG4gICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcclxuICAgICAgICBpZiAobGF5ZXIub3B0aW9ucyAmJiBsYXllci5vcHRpb25zLnR5cGUgPT09IEJBU0VfTEFZRVJfVFlQRSkge1xyXG4gICAgICAgICAgICBsYXllcnMucHVzaChsYXllci5vcHRpb25zLmlkKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBcImJhc2VsYXllcnM9XCIgKyBsYXllcnMuam9pbihcIixcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VQb2ludHNPZkludGVyZXN0U3RyaW5nICgpIHtcclxuICAgIHZhciBwb2lzID0gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCgpXHJcbiAgICBpZiAoIXBvaXMubGVuZ3RoKSByZXR1cm5cclxuICAgIHZhciBwb2lTdHJpbmcgPSBcInBvaXM9XCJcclxuICAgIHBvaXMuZm9yRWFjaChwb2kgPT4ge1xyXG4gICAgICAgIHBvaVN0cmluZyArPSBwb2kubGF0ICsgJywnICsgcG9pLmxuZyArICc7J1xyXG4gICAgfSlcclxuICAgIHJldHVybiBwb2lTdHJpbmdcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUFjdGl2ZVRhYlN0cmluZyAoKSB7XHJcbiAgICByZXR1cm4gXCJ0YWI9XCIgKyBkMy5zZWxlY3QoXCIucGFuZWwtdG9wLWJ0bi5hY3RpdmVcIikuYXR0cihcImRhdGEtYWN0aXZlXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZVNoYXJlVXJsICgpIHtcclxuICAgIHZhciBwYXJhbXMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xyXG4gICAgaWYgKHBhcmFtcyA9PT0gXCJcIikgcmV0dXJuO1xyXG5cclxuICAgIHBhcmFtcyA9IGdldFBhcmFtc0FycmF5KHBhcmFtcyk7XHJcbiAgICBwYXJhbXMgPSBtYWtlS2V5ZWRQYXJhbXNPYmplY3QocGFyYW1zKTtcclxuXHJcbiAgICBmb3JtYXRQYXJhbXMocGFyYW1zKTtcclxuICAgIHJldHVybiBwYXJhbXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFBhcmFtc0FycmF5IChwYXJhbXMpIHtcclxuICAgIHBhcmFtcyA9IHBhcmFtcy5zdWJzdHJpbmcoMSk7XHJcbiAgICBwYXJhbXMgPSB1bm1hbmdsZVBhcmFtU3RyaW5nKHBhcmFtcyk7XHJcbiAgICByZXR1cm4gcGFyYW1zLnNwbGl0KFwiJlwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdW5tYW5nbGVQYXJhbVN0cmluZyAocGFyYW1zKSB7XHJcbiAgICByZXR1cm4gcGFyYW1zLnJlcGxhY2UoL1xcJTJbY3xDXS9nLCBcIixcIikucmVwbGFjZSgvXFwlM1tifEJdL2csIFwiO1wiKVxyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlS2V5ZWRQYXJhbXNPYmplY3QgKHBhcmFtc0Fycikge1xyXG4gICAgdmFyIHBhcnNlZFBhcmFtcyA9IHt9O1xyXG4gICAgdmFyIHBhcmFtUGFpcjtcclxuICAgIHZhciBpO1xyXG5cclxuICAgIGZvciAoaSA9IDA7IGkgPCBwYXJhbXNBcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBwYXJhbVBhaXIgPSBwYXJhbXNBcnJbaV0uc3BsaXQoXCI9XCIpO1xyXG4gICAgICAgIHBhcnNlZFBhcmFtc1twYXJhbVBhaXJbMF1dID0gcGFyYW1QYWlyWzFdXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHBhcnNlZFBhcmFtcztcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0UGFyYW1zIChwYXJhbXMpIHtcclxuICAgIGlmIChwYXJhbXMuY2VudGVyKSBwYXJhbXMuY2VudGVyID0gZm9ybWF0Q2VudGVyUGFyYW0ocGFyYW1zLmNlbnRlcik7XHJcbiAgICBpZiAocGFyYW1zLmxheWVycykgcGFyYW1zLmxheWVycyA9IGZvcm1hdExheWVyUGFyYW0ocGFyYW1zLmxheWVycyk7XHJcbiAgICBpZiAocGFyYW1zLmJhc2VsYXllcnMpIHBhcmFtcy5iYXNlbGF5ZXJzID0gZm9ybWF0QmFzZUxheWVyUGFyYW0ocGFyYW1zLmJhc2VsYXllcnMpO1xyXG4gICAgaWYgKHBhcmFtcy5wb2lzKSBwYXJhbXMucG9pcyA9IGZvcm1hdFBvaW50c09mSW50ZXJlc3RQYXJhbShwYXJhbXMucG9pcylcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0Q2VudGVyUGFyYW0gKGNlbnRlcikge1xyXG4gICAgcmV0dXJuIGNlbnRlci5zcGxpdChcIixcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdExheWVyUGFyYW0gKGxheWVycykge1xyXG4gICAgdmFyIGZvcm1hdHRlZExheWVycyA9IHtcclxuICAgICAgICBcImVuYWJsZWRMYXllcnNcIjogW10sXHJcbiAgICAgICAgXCJvcGFjaXR5VmFsc1wiOiB7fVxyXG4gICAgfTtcclxuICAgIHZhciBsYXllcklkO1xyXG4gICAgdmFyIGk7XHJcblxyXG4gICAgbGF5ZXJzID0gbGF5ZXJzLnNwbGl0KFwiLFwiKTtcclxuICAgIGZvciAoaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpID0gaSArIDIpIHtcclxuICAgICAgICBsYXllcklkID0gbGF5ZXJzW2ldO1xyXG4gICAgICAgIGZvcm1hdHRlZExheWVycy5lbmFibGVkTGF5ZXJzLnB1c2gobGF5ZXJJZCk7XHJcbiAgICAgICAgZm9ybWF0dGVkTGF5ZXJzLm9wYWNpdHlWYWxzW2xheWVySWRdID0gbGF5ZXJzW2krMV07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZvcm1hdHRlZExheWVycztcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0QmFzZUxheWVyUGFyYW0gKGJhc2VsYXllcnMpIHtcclxuICAgIHJldHVybiBiYXNlbGF5ZXJzLnNwbGl0KFwiLFwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0UG9pbnRzT2ZJbnRlcmVzdFBhcmFtIChwb2lzKSB7XHJcbiAgICByZXR1cm4gcG9pcy5zcGxpdCgnOycpXHJcbiAgICAgICAgLmZpbHRlcigoc3RyKSA9PiBzdHIgIT09ICcnKVxyXG4gICAgICAgIC5tYXAoKHBvaSkgPT4ge1xyXG4gICAgICAgICAgICBwb2kgPSBwb2kuc3BsaXQoJywnKVxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbGF0OiBwb2lbMF0sXHJcbiAgICAgICAgICAgICAgICBsbmc6IHBvaVsxXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyAoc2hhcmVMYXllclNldHRpbmdzLCBjb25maWcpIHtcclxuICAgIHZhciBlbmFibGVkTGF5ZXJzID0gc2hhcmVMYXllclNldHRpbmdzLmVuYWJsZWRMYXllcnM7XHJcbiAgICBjb25maWdbXCJhY3RpdmUtbGF5ZXJzXCJdID0gZW5hYmxlZExheWVycztcclxuXHJcbiAgICB2YXIgaSwgaiwgcHJvcCwgbGF5ZXJncm91cDtcclxuICAgIHZhciBlbmFibGVkTGF5ZXI7XHJcbiAgICB2YXIgZm91bmRMYXllcjtcclxuICAgIHZhciBsYXllcnMgPSBjb25maWcubGF5ZXJzO1xyXG5cclxuICAgIGZvciAoaSA9IDA7IGkgPCBlbmFibGVkTGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZm91bmRMYXllciA9IGZhbHNlO1xyXG4gICAgICAgIGVuYWJsZWRMYXllciA9IGVuYWJsZWRMYXllcnNbaV07XHJcbiAgICAgICAgZm9yIChwcm9wIGluIGxheWVycykge1xyXG4gICAgICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xyXG4gICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGF5ZXJncm91cC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxheWVyZ3JvdXBbal0uaWQgPT09IGVuYWJsZWRMYXllcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyZ3JvdXBbal0ub3BhY2l0eSA9IHNoYXJlTGF5ZXJTZXR0aW5ncy5vcGFjaXR5VmFsc1tlbmFibGVkTGF5ZXJdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kTGF5ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChmb3VuZExheWVyKSBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEJhc2VMYXllclNldHRpbmdzVG9Db25maWcgKHNoYXJlQmFzZUxheWVyU2V0dGluZ3MsIGNvbmZpZykge1xyXG4gICAgdmFyIGJhc2VsYXllcnMgPSBjb25maWcuYmFzZWxheWVycztcclxuICAgIHZhciBiYXNlbGF5ZXI7XHJcbiAgICB2YXIgaTtcclxuXHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgYmFzZWxheWVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGJhc2VsYXllciA9IGJhc2VsYXllcnNbaV07XHJcbiAgICAgICAgYmFzZWxheWVyLmFjdGl2ZSA9IChzaGFyZUJhc2VMYXllclNldHRpbmdzLmluZGV4T2YoYmFzZWxheWVyLmlkKSAhPT0gLTEpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRQb2ludHNPZkludGVyZXN0VG9Db25maWcocG9pcywgY29uZmlnKSB7XHJcbiAgICBjb25maWdbXCJwb2lzXCJdID0gcG9pc1xyXG59XHJcblxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9zaGFyZS5qcyIsImltcG9ydCB7R2V0TWFwfSBmcm9tIFwiLi9tYXBcIjtcclxuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSBcIi4vc2hhcmVcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBCQVNFX0xBWUVSX1RZUEUgPSBcImJhc2VsYXllclwiO1xyXG5cclxudmFyIF9iYXNlbGF5ZXJzO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIENyZWF0ZUJhc2VMYXllcnMgKG1hcCwgbGF5ZXJDb25maWcpIHtcclxuICAgIGxheWVyQ29uZmlnID0gbGF5ZXJDb25maWcgfHwgXHJcbiAgICAgICAgW3tcclxuICAgICAgICAgICAgXCJpZFwiIDogXCJjYXJ0by1saWdodC1kZWZhdWx0XCIsXHJcbiAgICAgICAgICAgIFwidXJsXCIgOiBcImh0dHA6Ly97c30uYmFzZW1hcHMuY2FydG9jZG4uY29tL2xpZ2h0X2FsbC97en0ve3h9L3t5fS5wbmdcIixcclxuICAgICAgICAgICAgXCJhdHRyaWJ1dGlvblwiIDogJyZjb3B5OyA8YSBocmVmPVwiaHR0cDovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsICZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly9jYXJ0by5jb20vYXR0cmlidXRpb25zXCI+Q0FSVE88L2E+J1xyXG4gICAgICAgIH1dO1xyXG5cclxuICAgIF9iYXNlbGF5ZXJzID0gbGF5ZXJDb25maWc7XHJcbiAgICB2YXIgaTtcclxuICAgIHZhciBiYXNlTGF5ZXI7XHJcbiAgICB2YXIgY29uZmlnO1xyXG5cclxuICAgIGZvciAoaSA9IDA7IGkgPCBsYXllckNvbmZpZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbmZpZyA9IGxheWVyQ29uZmlnW2ldO1xyXG5cclxuICAgICAgICBpZiAoIWNvbmZpZy5hY3RpdmUpIGNvbnRpbnVlO1xyXG4gICAgICAgIGJhc2VMYXllciA9IGNyZWF0ZUJhc2VMYXllcihjb25maWcpO1xyXG4gICAgICAgIGNvbmZpZy5sYXllciA9IGJhc2VMYXllcjtcclxuICAgICAgICBiYXNlTGF5ZXIuYWRkVG8obWFwKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVCYXNlTGF5ZXJVSShsYXllckNvbmZpZylcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQmFzZUxheWVyVUkgKGNvbmZpZykge1xyXG4gICAgdmFyIGJhc2VVSSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBiYXNlVUkuY2xhc3NOYW1lID0gXCJiYXNlbGF5ZXItdWlcIjtcclxuICAgIHZhciBiYXNlV3JhcHBlcjtcclxuICAgIHZhciBiYXNlSW1nO1xyXG4gICAgdmFyIGJhc2VMYWJlbDtcclxuXHJcbiAgICB2YXIgbGF5ZXI7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbmZpZy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBsYXllciA9IGNvbmZpZ1tpXTtcclxuICAgICAgICBpZiAoIWxheWVyLmhhc093blByb3BlcnR5KFwiaW1hZ2VcIikpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICBiYXNlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgYmFzZVdyYXBwZXIuc2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiLCBsYXllci5pZCk7XHJcbiAgICAgICAgYmFzZUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgYmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbGF5ZXIuaW1hZ2UpO1xyXG4gICAgICAgIGJhc2VJbWcuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGxheWVyLmxhYmVsKTtcclxuICAgICAgICBiYXNlSW1nLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIGxheWVyLmxhYmVsKTtcclxuICAgICAgICBiYXNlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGJhc2VMYWJlbC50ZXh0Q29udGVudCA9IGxheWVyLmxhYmVsO1xyXG4gICAgICAgIGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VJbWcpO1xyXG4gICAgICAgIGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VMYWJlbCk7XHJcbiAgICAgICAgYmFzZVdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUJhc2VDbGljaylcclxuXHJcbiAgICAgICAgZDMuc2VsZWN0KGJhc2VXcmFwcGVyKVxyXG4gICAgICAgICAgICAuY2xhc3NlZChcImJhc2Utc2VsZWN0b3JcIiwgdHJ1ZSlcclxuICAgICAgICAgICAgLmNsYXNzZWQoXCJhY3RpdmVcIiwgbGF5ZXIuYWN0aXZlKTtcclxuICAgICAgIFxyXG4gICAgICAgIGJhc2VVSS5hcHBlbmRDaGlsZChiYXNlV3JhcHBlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImxlYWZsZXQtYm90dG9tIGxlYWZsZXQtbGVmdFwiKVswXS5hcHBlbmRDaGlsZChiYXNlVUkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVCYXNlQ2xpY2sgKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB2YXIgbGF5ZXJpZCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiKTtcclxuICAgIHRvZ2dsZUFjdGl2ZUJhc2VVSSh0aGlzKTtcclxuICAgIHJlbW92ZUN1cnJlbnRCYXNlTGF5ZXIoKTtcclxuICAgIGFkZE5ld0Jhc2VMYXllclRvTWFwKGxheWVyaWQpO1xyXG4gICAgdXBkYXRlU2hhcmVVcmwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlQWN0aXZlQmFzZVVJIChiYXNlVUlFbGVtKSB7XHJcbiAgICBkMy5zZWxlY3QoXCIuYmFzZS1zZWxlY3Rvci5hY3RpdmVcIikuY2xhc3NlZChcImFjdGl2ZVwiLCBmYWxzZSk7XHJcbiAgICBkMy5zZWxlY3QoYmFzZVVJRWxlbSkuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlQ3VycmVudEJhc2VMYXllciAoKSB7XHJcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XHJcblxyXG4gICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcclxuICAgICAgICBpZiAobGF5ZXIub3B0aW9ucy50eXBlICE9PSBCQVNFX0xBWUVSX1RZUEUpIHJldHVybjtcclxuICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobGF5ZXIpO1xyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkTmV3QmFzZUxheWVyVG9NYXAgKGxheWVyaWQpIHtcclxuICAgIHZhciBtYXAgPSBHZXRNYXAoKTtcclxuXHJcbiAgICB2YXIgbGF5ZXI7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IF9iYXNlbGF5ZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGxheWVyID0gX2Jhc2VsYXllcnNbaV07XHJcbiAgICAgICAgaWYgKGxheWVyLmlkICE9PSBsYXllcmlkKSBjb250aW51ZTtcclxuICAgICAgICBpZiAoIWxheWVyLmxheWVyKSBsYXllci5sYXllciA9IGNyZWF0ZUJhc2VMYXllcihsYXllcik7XHJcbiAgICAgICAgbGF5ZXIubGF5ZXIuYWRkVG8obWFwKTtcclxuICAgICAgICBsYXllci5sYXllci5icmluZ1RvQmFjaygpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVCYXNlTGF5ZXIgKGxheWVyQ29uZmlnKSB7XHJcbiAgICByZXR1cm4gTC50aWxlTGF5ZXIoXHJcbiAgICAgICAgbGF5ZXJDb25maWcudXJsLFxyXG4gICAgICAgIG1ha2VCYXNlTGF5ZXJPcHRpb25zKGxheWVyQ29uZmlnKVxyXG4gICAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUJhc2VMYXllck9wdGlvbnMgKGNvbmZpZykge1xyXG4gICAgdmFyIG9wdGlvbnMgPSB7fTtcclxuICAgIGlmIChjb25maWcuaWQpIG9wdGlvbnMuaWQgPSBjb25maWcuaWQ7XHJcbiAgICBpZiAoY29uZmlnLmF0dHJpYnV0aW9uKSBvcHRpb25zLmF0dHJpYnV0aW9uID0gY29uZmlnLmF0dHJpYnV0aW9uO1xyXG4gICAgaWYgKGNvbmZpZy5zdWJkb21haW5zKSBvcHRpb25zLnN1YmRvbWFpbnMgPSBjb25maWcuc3ViZG9tYWlucztcclxuICAgIG9wdGlvbnMudHlwZSA9IEJBU0VfTEFZRVJfVFlQRTtcclxuXHJcbiAgICByZXR1cm4gb3B0aW9ucztcclxufVxyXG5cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvYmFzZWxheWVyLmpzIiwiaW1wb3J0IHtcclxuICBjcmVhdGVHcmFwaERpdixcclxuICBjcmVhdGVNYXJrZXIsXHJcbiAgY3JlYXRlR3JhcGhSZW1vdmVyLFxyXG4gIGdldEljb25cclxufSBmcm9tICcuL2dyYXBoJ1xyXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tICcuL3NoYXJlJ1xyXG5pbXBvcnQge0dldE1hcH0gZnJvbSAnLi9tYXAnXHJcbmltcG9ydCB7R2V0QWN0aXZlVGFifSBmcm9tICcuL3RhYnMnXHJcblxyXG52YXIgX3BvaW50c19vZl9pbnRlcmVzdCA9IFtdXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCAoKSB7XHJcbiAgcmV0dXJuIF9wb2ludHNfb2ZfaW50ZXJlc3RcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlciAobGF0LCBsbmcpIHtcclxuICB2YXIgcG9pID0ge1xyXG4gICAgbGF0OiBsYXQsXHJcbiAgICBsbmc6IGxuZ1xyXG4gIH1cclxuICBfcG9pbnRzX29mX2ludGVyZXN0LnB1c2gocG9pKVxyXG4gIHJldHVybiBwb2lcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFNldHVwUG9pbnRzT2ZJbnRlcmVzdCAobWFwLCBuZXdQb2lzKSB7XHJcbiAgQWRkTXVsdGlwbGVQb2ludHNPZkludGVyZXN0KG5ld1BvaXMpXHJcbiAgdmFyIHBvaXMgPSBHZXRBbGxQb2ludHNPZkludGVyZXN0KClcclxuICB2YXIgbWFwID0gR2V0TWFwKClcclxuICBwb2lzLmZvckVhY2gocG9pID0+IHtcclxuICAgIFNldHVwUG9pbnRPZkludGVyZXN0VUkobWFwLCBwb2kpXHJcbiAgfSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEFkZE11bHRpcGxlUG9pbnRzT2ZJbnRlcmVzdCAocG9pcykge1xyXG4gIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KF9wb2ludHNfb2ZfaW50ZXJlc3QsIHBvaXMpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBSZW1vdmVQb2ludE9mSW50ZXJlc3RGcm9tVHJhY2tlcihwb2lUb1JlbW92ZSkge1xyXG4gIF9wb2ludHNfb2ZfaW50ZXJlc3QgPSBfcG9pbnRzX29mX2ludGVyZXN0LmZpbHRlcihwb2kgPT4ge1xyXG4gICAgcmV0dXJuICFPYmplY3QuaXMocG9pLCBwb2lUb1JlbW92ZSlcclxuICB9KVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gU2V0dXBQb2ludE9mSW50ZXJlc3RVSSAobWFwLCBwb2kpIHtcclxuICAgIHZhciBkaXYgPSBjcmVhdGVHcmFwaERpdihwb2kpO1xyXG4gICAgdmFyIG1hcmtlciA9IGNyZWF0ZU1hcmtlcihtYXAsIHBvaS5sYXQsIHBvaS5sbmcpO1xyXG4gICAgcG9pLmdyYXBoRGl2ID0gZGl2XHJcbiAgICBwb2kubWFya2VyID0gbWFya2VyXHJcbiAgICBtYXJrZXIuYWRkVG8obWFwKVxyXG4gICAgY3JlYXRlR3JhcGhSZW1vdmVyKG1hcCwgZGl2LCBtYXJrZXIsIHBvaSk7XHJcblxyXG4gICAgZDMuc2VsZWN0KGRpdikub24oXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgbWFya2VyLnNldEljb24oZ2V0SWNvbignaG92ZXInKSk7XHJcbiAgICB9KVxyXG4gICAgZDMuc2VsZWN0KGRpdikub24oXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBtYXJrZXIuc2V0SWNvbihnZXRJY29uKCdncmFwaCcpKTtcclxuICAgIH0pXHJcbiAgICBtYXJrZXIub24oJ2NsaWNrIGRibGNsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgaGFuZGxlTWFya2VyTW91c2VFdmVudChlLCBwb2kpXHJcbiAgICB9KVxyXG4gICAgbWFya2VyLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICBtYXJrZXIuc2V0SWNvbihnZXRJY29uKCdob3ZlcicpKVxyXG4gICAgICBoYW5kbGVNYXJrZXJNb3VzZUV2ZW50KGUsIHBvaSlcclxuICAgIH0pXHJcbiAgICBtYXJrZXIub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgbWFya2VyLnNldEljb24oZ2V0SWNvbignZ3JhcGgnKSlcclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU1hcmtlck1vdXNlRXZlbnQgKGUsIHBvaSkge1xyXG4gIGUub3JpZ2luYWxFdmVudC5zdG9wUHJvcGFnYXRpb24oKVxyXG4gIGlmIChlLm9yaWdpbmFsRXZlbnQudHlwZSA9PT0gJ2NsaWNrJykge1xyXG4gICAgSGFuZGxlVGFiQ2hhbmdlKCdncmFwaHMtYWN0aXZlJylcclxuICAgIHNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGgocG9pKVxyXG4gIH1cclxuICBpZiAoR2V0QWN0aXZlVGFiKCkgPT09ICdncmFwaHMtYWN0aXZlJyAmJlxyXG4gICAgICBlLm9yaWdpbmFsRXZlbnQudHlwZSA9PT0gJ21vdXNlb3ZlcicpIHtcclxuICAgIHNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGgocG9pKVxyXG4gIH1cclxuICBcclxufVxyXG5cclxuZnVuY3Rpb24gc2Nyb2xsVG9Qb2ludE9mSW50ZXJlc3RHcmFwaChwb2kpIHtcclxuICB2YXIgcmlnaHRQYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpXHJcbiAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbC1oZWFkZXInKVxyXG4gIHJpZ2h0UGFuZWwuc2Nyb2xsVG9wID0gcG9pLmdyYXBoRGl2Lm9mZnNldFRvcCArIGhlYWRlci5zY3JvbGxIZWlnaHRcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJIChtYXAsIGRpdiwgbWFya2VyKSB7XHJcbiAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaC1saXN0Jyk7XHJcbiAgICBsaXN0LnJlbW92ZUNoaWxkKGRpdik7XHJcbiAgICBtYXAucmVtb3ZlTGF5ZXIobWFya2VyKTtcclxuICAgIHVwZGF0ZVNoYXJlVXJsKClcclxufVxyXG5cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvcG9pLmpzIiwiaW1wb3J0IHtcclxuICAgIEFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlcixcclxuICAgIFJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyLFxyXG4gICAgU2V0dXBQb2ludE9mSW50ZXJlc3RVSSxcclxuICAgIFJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJXHJcbn0gZnJvbSAnLi9wb2knXHJcbmltcG9ydCB7dXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodH0gZnJvbSAnLi9wYW5lbCdcclxuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSAnLi9zaGFyZSdcclxuaW1wb3J0IHtHZXRNYXB9IGZyb20gJy4vbWFwJ1xyXG5cclxudmFyIHRpcDtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBTZXR1cEdyYXBocyAoKSB7XHJcbiAgICBkMy5zZWxlY3RBbGwoXCIuZ3JhcGgtdHlwZS1idG5cIikub24oXCJjbGlja1wiLCBoYW5kbGVHcmFwaFR5cGVCdG5DbGljayk7XHJcbiAgICBleHRlbmREYXRlTW9kdWxlKCk7XHJcbiAgICB0aXAgPSBkMy50aXAoKS5hdHRyKCdjbGFzcycsICdkMy10aXAnKS5odG1sKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkOyB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZXh0ZW5kRGF0ZU1vZHVsZSAoKSB7XHJcbiAgICBEYXRlLnByb3RvdHlwZS5pc0xlYXBZZWFyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHllYXIgPSB0aGlzLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgaWYoKHllYXIgJiAzKSAhPSAwKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuICgoeWVhciAlIDEwMCkgIT0gMCB8fCAoeWVhciAlIDQwMCkgPT0gMCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEdldCBEYXkgb2YgWWVhclxyXG4gICAgRGF0ZS5wcm90b3R5cGUuZ2V0RE9ZID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGRheUNvdW50ID0gWzAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0XTtcclxuICAgICAgICB2YXIgbW4gPSB0aGlzLmdldE1vbnRoKCk7XHJcbiAgICAgICAgdmFyIGRuID0gdGhpcy5nZXREYXRlKCk7XHJcbiAgICAgICAgdmFyIGRheU9mWWVhciA9IGRheUNvdW50W21uXSArIGRuO1xyXG4gICAgICAgIGlmKG1uID4gMSAmJiB0aGlzLmlzTGVhcFllYXIoKSkgZGF5T2ZZZWFyKys7XHJcbiAgICAgICAgcmV0dXJuIGRheU9mWWVhcjtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBCaW5kR3JhcGhFdmVudHMgKG1hcCkge1xyXG4gICAgbWFwLm9uKFwiY2xpY2tcIiwgaGFuZGxlTWFwQ2xpY2spO1xyXG59XHJcblxyXG52YXIgYmFzZUljb24gPSBMLkljb24uZXh0ZW5kKHt9KTtcclxuXHJcbnZhciBncmFwaEljb24gPSBuZXcgYmFzZUljb24oe1xyXG4gICAgaWNvblVybDogJ2ltZ3MvYmx1ZV9pY29uLnBuZycsXHJcbiAgICBzaGFkb3dVcmw6ICdpbWdzL21hcmtlcl9zaGFkb3cucG5nJyxcclxuICAgIGljb25TaXplOiBbMjUsIDQxXSxcclxuICAgIGljb25BbmNob3I6IFsxMiwgNDFdLFxyXG4gICAgcG9wdXBBbmNob3I6IFsxLCAtMzRdLFxyXG4gICAgc2hhZG93U2l6ZTogWzQxLCA0MV1cclxufSk7XHJcblxyXG52YXIgaG92ZXJJY29uID0gbmV3IGJhc2VJY29uKHtcclxuICAgIGljb25Vcmw6ICdpbWdzL29yYW5nZV9pY29uLnBuZycsXHJcbiAgICBzaGFkb3dVcmw6ICdpbWdzL21hcmtlcl9zaGFkb3cucG5nJyxcclxuICAgIGljb25TaXplOiBbMjUsIDQxXSxcclxuICAgIGljb25BbmNob3I6IFsxMiwgNDFdLFxyXG4gICAgcG9wdXBBbmNob3I6IFsxLCAtMzRdLFxyXG4gICAgc2hhZG93U2l6ZTogWzQxLCA0MV1cclxufSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SWNvbih0eXBlKSB7XHJcbiAgICByZXR1cm4gdHlwZSA9PT0gJ2hvdmVyJyA/IGhvdmVySWNvbiA6IGdyYXBoSWNvblxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVNYXBDbGljayAoZSkge1xyXG4gICAgdmFyIG1hcCA9IHRoaXM7XHJcbiAgICB2YXIgbGF0ID0gZS5sYXRsbmcubGF0O1xyXG4gICAgdmFyIGxuZyA9IGUubGF0bG5nLmxuZztcclxuXHJcbiAgICB2YXIgcG9pID0gQWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyKGxhdCwgbG5nKVxyXG4gICAgU2V0dXBQb2ludE9mSW50ZXJlc3RVSShtYXAsIHBvaSwgaG92ZXJJY29uLCBncmFwaEljb24pXHJcbiAgICB1cGRhdGVTaGFyZVVybCgpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNYXJrZXIgKG1hcCwgbGF0LCBsbmcpIHtcclxuICAgIHJldHVybiBMLm1hcmtlcihbbGF0LCBsbmddLCB7aWNvbjogZ3JhcGhJY29ufSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHcmFwaFJlbW92ZXIgKG1hcCwgZGl2LCBtYXJrZXIsIHBvaSkge1xyXG4gICAgdmFyIGVsZW0gPSBjcmVhdGVHcmFwaFJlbW92ZXJFbGVtKCk7XHJcbiAgICBkaXYuYXBwZW5kQ2hpbGQoZWxlbSk7XHJcbiAgICBkMy5zZWxlY3QoZWxlbSkub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgUmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXIocG9pKVxyXG4gICAgICAgIFJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJKG1hcCwgZGl2LCBtYXJrZXIpXHJcbiAgICAgICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpXHJcbiAgICAgICAgdXBkYXRlU2hhcmVVcmwoKVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUdyYXBoUmVtb3ZlckVsZW0gKCkge1xyXG4gICAgdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgZWxlbS5jbGFzc05hbWUgPSBcInJlbW92ZS1ncmFwaFwiO1xyXG4gICAgZWxlbS5pbm5lclRleHQgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKFwiMTAwMDVcIik7XHJcbiAgICBlbGVtLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIFwiUmVtb3ZlIGdyYXBoXCIpO1xyXG4gICAgcmV0dXJuIGVsZW07XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggREFUQSBQUk9DRVNTSU5HIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmZ1bmN0aW9uIGdldERhdGEobGF0LCBsbmcsIGRpdikge1xyXG4gICAgdmFyIHVybCA9IFwiaHR0cHM6Ly9mY2F2LW5kdmkubmVtYWMub3JnL2xhbmRkYXRfcHJvZHVjdC5jZ2k/YXJncz1cIiArIGxuZyArIFwiLFwiICsgbGF0O1xyXG4gICAgdmFyIG9SZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIG9SZXEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByZXNwb25zZSA9IHRoaXMucmVzcG9uc2VUZXh0O1xyXG4gICAgICAgIHJlc3BvbnNlID0gcmVzcG9uc2UucmVwbGFjZSgvXFxbfFxcXXxcXCcvZywgXCJcIikuc3BsaXQoXCIsIFwiKTtcclxuICAgICAgICBkcmF3R3JhcGgocmVzcG9uc2UsIGRpdiwgbGF0LCBsbmcpO1xyXG4gICAgICAgIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKVxyXG4gICAgfSk7XHJcbiAgICBvUmVxLm9wZW4oXCJHRVRcIiwgdXJsKTtcclxuICAgIG9SZXEuc2VuZCgpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNwbGl0RGF0YShkYXRhKSB7XHJcbiAgICB2YXIgaTtcclxuICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZGF0YVtpXSA9IGRhdGFbaV0uc3BsaXQoXCIsXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlcHJvY2Vzc0RhdGEgKG9yaWdkYXRhKSB7XHJcbiAgICB2YXIgZGF0YSA9IHt9O1xyXG4gICAgdmFyIHBvaW50O1xyXG4gICAgdmFyIGtleTtcclxuICAgIHZhciBpLCBqO1xyXG5cclxuICAgIGRhdGFbXCJrZXlzXCJdID0gW107XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgb3JpZ2RhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBwb2ludCA9IG9yaWdkYXRhW2ldO1xyXG4gICAgICAgIGtleSA9IHBvaW50WzBdLnN1YnN0cmluZygwLDQpO1xyXG4gICAgICAgIGlmICghZGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgIGRhdGFba2V5XSA9IFtdO1xyXG4gICAgICAgICAgICBkYXRhW1wia2V5c1wiXS5wdXNoKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGFba2V5XS5wdXNoKHBvaW50KTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgZGF0YUZvck1lZGlhbnM7XHJcbiAgICB2YXIgbWVkaWFuO1xyXG4gICAgZGF0YVtcIm1lZGlhbnNcIl0gPSBbXTtcclxuICAgIGZvciAoaSA9IDA7IGkgPCA0NjsgaSsrKSB7XHJcbiAgICAgICAgZGF0YUZvck1lZGlhbnMgPSBbXTtcclxuICAgICAgICBmb3IgKGogPSBpOyBqIDwgb3JpZ2RhdGEubGVuZ3RoOyBqICs9IDQ2KSB7XHJcbiAgICAgICAgICAgIGRhdGFGb3JNZWRpYW5zLnB1c2gob3JpZ2RhdGFbal1bMV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWVkaWFuID0gZGF0YUZvck1lZGlhbnMuc29ydCgpW01hdGguZmxvb3IoZGF0YUZvck1lZGlhbnMubGVuZ3RoLzIpXTtcclxuICAgICAgICBkYXRhW1wibWVkaWFuc1wiXS5wdXNoKG1lZGlhbik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSU5URVJGQUNFIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2sgKCkge1xyXG4gICAgdmFyIHR5cGUgPSB0aGlzLmRhdGFzZXQudHlwZTtcclxuICAgIHZhciBhY3RpdmVFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyYXBoLXR5cGUtYnRuIGFjdGl2ZVwiKVswXTtcclxuICAgIHZhciBhY3RpdmVUeXBlID0gYWN0aXZlRWxlbS5kYXRhc2V0LnR5cGU7XHJcblxyXG4gICAgaWYgKHR5cGUgPT09IGFjdGl2ZVR5cGUpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgZDMuc2VsZWN0KFwiI2dyYXBoLWxpc3RcIilcclxuICAgICAgICAuY2xhc3NlZChcImdyYXBoLVwiICsgYWN0aXZlVHlwZSwgZmFsc2UpXHJcbiAgICAgICAgLmNsYXNzZWQoXCJncmFwaC1cIiArIHR5cGUsIHRydWUpO1xyXG5cclxuICAgIGQzLnNlbGVjdChhY3RpdmVFbGVtKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGZhbHNlKTtcclxuICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlR3JhcGhEaXYgKHBvaSkge1xyXG4gICAgdmFyIGRlY2ltYWxQbGFjZXMgPSAzXHJcbiAgICB2YXIgbGF0U2hvcnQgPSByb3VuZEZsb2F0KHBvaS5sYXQsIGRlY2ltYWxQbGFjZXMpXHJcbiAgICB2YXIgbG5nU2hvcnQgPSByb3VuZEZsb2F0KHBvaS5sbmcsIGRlY2ltYWxQbGFjZXMpXHJcbiAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHZhciB6b29tVG9NYXJrZXJCdXR0b24gPSBtYWtlWm9vbVRvTWFwTWFya2VyQnV0dG9uKHBvaSlcclxuICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJMYXQ6IFwiICsgbGF0U2hvcnQgKyBcIiwgTG9uOiBcIiArIGxuZ1Nob3J0KTtcclxuICAgIGRpdi5hcHBlbmRDaGlsZCh6b29tVG9NYXJrZXJCdXR0b24pXHJcbiAgICBkaXYuYXBwZW5kQ2hpbGQoY29udGVudCk7XHJcbiAgICBkaXYuY2xhc3NMaXN0LmFkZChcImdyYXBoLWVsZW1cIilcclxuICAgIGdldERhdGEocG9pLmxhdCwgcG9pLmxuZywgZGl2KTtcclxuICAgIHJldHVybiBkaXY7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2Vab29tVG9NYXBNYXJrZXJCdXR0b24ocG9pKSB7XHJcbiAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKVxyXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bicsICdwYW4tdG8tbWFya2VyLWJ0bicpXHJcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSBcIlNob3cgT24gTWFwXCJcclxuICAgIGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKHBvaSwgZSkge1xyXG4gICAgICAgIHZhciBtYXAgPSBHZXRNYXAoKVxyXG4gICAgICAgIG1hcC5wYW5UbyhbcG9pLmxhdCwgcG9pLmxuZ10pXHJcbiAgICB9LmJpbmQoYnV0dG9uLCBwb2kpXHJcbiAgICByZXR1cm4gYnV0dG9uXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdHcmFwaChkYXRhLCBkaXYsIGxhdCwgbG5nKSB7XHJcbiAgICBkYXRhID0gc3BsaXREYXRhKGRhdGEpO1xyXG4gICAgdmFyIHJlcHJvY2Vzc2VkRGF0YSA9IHJlcHJvY2Vzc0RhdGEoZGF0YSk7XHJcbiAgICBtYWtlVXBEb3duTGluZUdyYXBoKGRhdGEsIGRpdiwgcmVwcm9jZXNzZWREYXRhW1wibWVkaWFuc1wiXSk7XHJcbiAgICBtYWtlVXBEb3duT3ZlcmxhcGluZ0xpbmVHcmFwaFdpdGhDaGVja2JveGVzKHJlcHJvY2Vzc2VkRGF0YSwgZGl2LCBsYXQsIGxuZyk7XHJcbiAgICBkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMocmVwcm9jZXNzZWREYXRhLCBkaXYsIGxhdCwgbG5nKTtcclxuICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpO1xyXG4gICAgbGlzdC5hcHBlbmRDaGlsZChkaXYpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByb3VuZEZsb2F0KG51bWJlciwgZGVjaW1hbFBsYWNlcykge1xyXG4gICAgcmV0dXJuIE1hdGgucm91bmQobnVtYmVyICogTWF0aC5wb3coMTAsIGRlY2ltYWxQbGFjZXMpKSAvIChNYXRoLnBvdygxMCwgZGVjaW1hbFBsYWNlcykpXHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLyBUSU1FU0VSSUVTIExJTkUgR1JBUEggLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmZ1bmN0aW9uIG1ha2VVcERvd25MaW5lR3JhcGggKGRhdGEsIGRpdiwgYXZlcmFnZXMpIHtcclxuICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcclxuICAgIHZhciBtYXJnaW4gPSB7dG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyNX0sXHJcbiAgICB3aWR0aCA9IDU4MCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxyXG4gICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XHJcblxyXG4gICAgLy8gU2V0IHRoZSByYW5nZXNcclxuICAgIHZhciB4ID0gZDMuc2NhbGVUaW1lKCkucmFuZ2UoWzAsIHdpZHRoXSlcclxuICAgICAgICAuZG9tYWluKFtcclxuICAgICAgICAgICAgcGFyc2VEYXRlKGRhdGFbMF1bMF0pLFxyXG4gICAgICAgICAgICBwYXJzZURhdGUoZGF0YVtkYXRhLmxlbmd0aC0xXVswXSlcclxuICAgICAgICBdKTtcclxuICAgIHZhciB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSlcclxuICAgICAgICAuZG9tYWluKFswLCAxMDBdKTtcclxuXHJcbiAgICAvLyBEZWZpbmUgdGhlIGF4ZXNcclxuICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcclxuICAgICAgICAudGlja3MoMTYpXHJcbiAgICAgICAgLnRpY2tGb3JtYXQoZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KVxyXG4gICAgICAgIC50aWNrcyg2KTtcclxuXHJcbiAgICAvLyBEZWZpbmUgdGhlIGxpbmVcclxuICAgIHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKClcclxuICAgICAgICAueChmdW5jdGlvbihkKSB7IHJldHVybiB4KHBhcnNlRGF0ZShkWzBdKSk7IH0pXHJcbiAgICAgICAgLnkoZnVuY3Rpb24oZCkgeyByZXR1cm4geShkWzFdKTsgfSk7XHJcblxyXG4gICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KVxyXG4gICAgICAgIC5hcHBlbmQoXCJkaXZcIilcclxuICAgICAgICAuY2xhc3NlZChcInRpbWVzZXJpZXMtZ3JhcGhcIiwgdHJ1ZSk7XHJcblxyXG4gICAgLy8gQWRkcyB0aGUgc3ZnIGNhbnZhc1xyXG4gICAgdmFyIHN2ZyA9IHdyYXBwZXJcclxuICAgICAgICAuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgICAgLy8uYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXHJcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXHJcbiAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB3ID0gd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodFxyXG4gICAgICAgICAgICB2YXIgaCA9IGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tXHJcbiAgICAgICAgICAgIHJldHVybiAnMCAwICcgKyB3ICsgJyAnICsgaFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKVxyXG4gICAgICAgIC5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XHJcblxyXG4gICAgc3ZnLmNhbGwodGlwKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIHZhbHVlbGluZSBwYXRoLlxyXG4gICAgZHJhd0xpbmVhclBhdGgoZGF0YSwgdmFsdWVsaW5lLCBzdmcpO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgWCBBeGlzXHJcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ4IGF4aXNcIilcclxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpXHJcbiAgICAgICAgLmNhbGwoeEF4aXMpO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgWSBBeGlzXHJcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ5IGF4aXNcIilcclxuICAgICAgICAuY2FsbCh5QXhpcyk7XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XHJcbiAgICAgKi9cclxuICAgIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8gT1ZFUkxBUFBJTkcgVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmZ1bmN0aW9uIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMgKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcclxuICAgIHZhciB5ZWFyID0gXCIyMDE1XCI7XHJcblxyXG4gICAgdmFyIGNoYXJ0cyA9IHt9O1xyXG5cclxuICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcclxuICAgIHZhciBtYXJnaW4gPSB7dG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyNX0sXHJcbiAgICAgICAgd2lkdGggPSA1MDAgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCxcclxuICAgICAgICBoZWlnaHQgPSAyNzAgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcclxuXHJcbiAgICB2YXIgYXZlcmFnZXMgPSBkYXRhLm1lZGlhbnM7XHJcblxyXG4gICAgdmFyIHggPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFswLCB3aWR0aF0pXHJcbiAgICAgICAgLmRvbWFpbihbMCwgMzY1XSk7XHJcbiAgICB2YXIgeSA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodCwgMF0pXHJcbiAgICAgICAgLmRvbWFpbihbMCwgMTAwXSk7XHJcblxyXG4gICAgLy8gRGVmaW5lIHRoZSBheGVzXHJcbiAgICBmdW5jdGlvbiBmb3JtYXRNb250aFRpY2sgKGQpIHtcclxuICAgICAgICByZXR1cm4gKE1PTlRIX0xBQkVMU1soZC0xNSkvMzBdKTtcclxuICAgIH1cclxuICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcclxuICAgICAgICAudGlja3MoMTEpXHJcbiAgICAgICAgLnRpY2tWYWx1ZXMoWzE1LCA0NSwgNzUsIDEwNSwgMTM1LCAxNjUsIDE5NSwgMjI1LCAyNTUsIDI4NSwgMzE1LCAzNDVdKVxyXG4gICAgICAgIC50aWNrRm9ybWF0KGZvcm1hdE1vbnRoVGljayk7XHJcbiAgXHJcbiAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KVxyXG4gICAgICAgIC50aWNrcyg2KTtcclxuXHJcbiAgICAvLyBEZWZpbmUgdGhlIGxpbmVcclxuICAgIHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKClcclxuICAgICAgICAueChmdW5jdGlvbihkLCBpKSB7IHJldHVybiAoQXJyYXkuaXNBcnJheShkKSA/IHgocGFyc2VKdWxpYW5EYXkoZFswXSkpIDogeCgoaSAqIDgpICsgMyApKTsgfSlcclxuICAgICAgICAueShmdW5jdGlvbihkKSB7IHJldHVybiAoQXJyYXkuaXNBcnJheShkKSA/IHkoZFsxXSkgOiB5KGQpKTsgfSk7XHJcblxyXG4gICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcIm92ZXJsYXBwaW5nLWdyYXBoXCIsIHRydWUpO1xyXG5cclxuICAgIC8vIEFkZHMgdGhlIHN2ZyBjYW52YXNcclxuICAgIHZhciBzdmcgPSB3cmFwcGVyXHJcbiAgICAgICAgLmFwcGVuZChcInN2Z1wiKVxyXG4gICAgICAgICAgICAuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB3ID0gd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodFxyXG4gICAgICAgICAgICAgICAgdmFyIGggPSBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcwIDAgJyArIHcgKyAnICcgKyBoXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJylcclxuICAgICAgICAgICAgLy8uYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXHJcbiAgICAgICAgICAgIC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXHJcbiAgICAgICAgLmFwcGVuZChcImdcIilcclxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXHJcbiAgICAgICAgICAgICAgICAgIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XHJcblxyXG4gICAgc3ZnLmNhbGwodGlwKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIFggQXhpc1xyXG4gICAgc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieCBheGlzXCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGhlaWdodCArIFwiKVwiKVxyXG4gICAgICAgIC5jYWxsKHhBeGlzKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIFkgQXhpc1xyXG4gICAgc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpXHJcbiAgICAgICAgLmNhbGwoeUF4aXMpO1xyXG5cclxuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl0gPSB7XHJcbiAgICAgICAgXCJwYXRoXCIgOiBkcmF3TGluZWFyUGF0aChkYXRhW1wibWVkaWFuc1wiXSwgdmFsdWVsaW5lLCBzdmcpXHJcbiAgICB9O1xyXG5cclxuICAgIGNoYXJ0c1t5ZWFyXSA9IHtcclxuICAgICAgICBcInBhdGhcIiA6IGRyYXdMaW5lYXJQYXRoKGRhdGFbeWVhcl0sIHZhbHVlbGluZSwgc3ZnKVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XHJcbiAgICAgKi9cclxuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl1bXCJwb2ludHNcIl0gPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbXCJtZWRpYW5zXCJdLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG4gICAgY2hhcnRzW3llYXJdW1wicG9pbnRzXCJdID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW3llYXJdLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG5cclxuICAgIHZhciBpbnB1dHdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwiaW5wdXQtd3JhcHBlclwiLCB0cnVlKTtcclxuXHJcbiAgICBkYXRhLmtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgY3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBrZXksIFwidGltZXNlcmllc1wiLCB5ZWFyLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBcIm1lZGlhbnNcIiwgXCJ0aW1lc2VyaWVzXCIsIFwibWVkaWFuc1wiLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFBPTEFSIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5mdW5jdGlvbiBkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMgKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcclxuICAgIHZhciB5ZWFyID0gXCIyMDE1XCI7XHJcbiAgICB2YXIgd2lkdGggPSA0OTAsXHJcbiAgICAgICAgaGVpZ2h0ID0gNDkwLFxyXG4gICAgICAgIHJhZGl1cyA9IE1hdGgubWluKHdpZHRoLCBoZWlnaHQpIC8gMiAtIDMwO1xyXG5cclxuICAgIHZhciBhdmVyYWdlcyA9IGRhdGFbXCJtZWRpYW5zXCJdO1xyXG4gICAgdmFyIGNlbnRlciA9IGZpbmRQb2xhckNlbnRlcihkYXRhKTtcclxuICAgIHZhciB0aHJlc2hvbGRzID0gZmluZFBvbGFyVGhyZXNob2xkcyhhdmVyYWdlcywgY2VudGVyWzFdWzBdKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdXAgc2NhbGluZyBvZiBkYXRhLiBXZSBrbm93IHRoYXQgdGhlIG5kdmkgdmFsdWVzIGZhbGwgYmV0d2VlblxyXG4gICAgICogMCAmIDEwMCBzbyB3ZSBzZXQgb3VyIGRvbWFpbiB0byB0aGF0LiBUaGUgcmFuZ2UgY29udHJvbHMgd2hlcmUgdGhlXHJcbiAgICAgKiBwb2ludHMgd2lsbCBsaWUgaW4gb3VyIGdyYXBoLCBzbyB3ZSBzZXQgdGhlbSB0byBiZSBiZXR3ZWVuIDAgYW5kIHRoZVxyXG4gICAgICogcmFkaXVzLlxyXG4gICAgICovXHJcbiAgICB2YXIgciA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAuZG9tYWluKFswLCAxMDBdKVxyXG4gICAgICAgIC5yYW5nZShbMCwgcmFkaXVzXSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB3aGljaCB3aWxsIGRyYXcgZWFjaCBwb2ludC4gVG8gY29tcHV0ZSB0aGUgZGlzdGFuY2UgZnJvbSB0aGVcclxuICAgICAqIGNlbnRlciBlYWNoIHBvaW50IGlzIHdlIHBhc3MgdGhlIGRhdGFwb2ludCB0byB0aGUgZnVuY3Rpb24gZGVmaW5lZCBhYm92ZS5cclxuICAgICAqIFRvIGRldGVybWluZSB0aGUgYW5nbGUgZnJvbSB0aGUgb3JpZ2luIHdlIG5lZWQgdG8gY29udmVydCB0aGUgZGF5IHRvXHJcbiAgICAgKiByYWRpYW5zLCBzbyB3ZSBjb252ZXJ0IHRoZSBkYXkgdG8gYSBudW1iZXIgYmV0d2VlbiAwICYgMSBhbmQgdGhlbiBtdWx0aXBseVxyXG4gICAgICogaXQgYnkgMiBwaS5cclxuICAgICAqL1xyXG4gICAgdmFyIGxpbmUgPSBkMy5yYWRpYWxMaW5lKClcclxuICAgICAgICAucmFkaXVzKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyByKGRbMV0pIDogcihkKTsgfSlcclxuICAgICAgICAuYW5nbGUoZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICB2YXIgZGF5ID0gQXJyYXkuaXNBcnJheShkKSA/IHBhcnNlSnVsaWFuRGF5KGRbMF0pIDogKGkgKiA4KSArIDM7XHJcbiAgICAgICAgICAgIHJldHVybiAoKCgoZGF5IC0gMSklMzY1KS8zNjUpICogKDIqTWF0aC5QSSkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB1cCB0aGUgY2FudmFzIHdoZXJlIHRoZSBjaXJjbGUgd2lsbCBiZSBkcmF3bi5cclxuICAgICAqL1xyXG4gICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcInBvbGFyLWdyYXBoXCIsIHRydWUpO1xyXG4gICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgICAgLy8uYXR0cihcIndpZHRoXCIsIHdpZHRoKVxyXG4gICAgICAgIC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxyXG4gICAgICAgIC5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJzAgMCAnKyB3aWR0aCArICcgJyArIGhlaWdodFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKVxyXG4gICAgICAgIC5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB3aWR0aCAvIDIgKyBcIixcIiArIGhlaWdodCAvIDIgKyBcIilcIik7XHJcblxyXG4gICAgc3ZnLmNhbGwodGlwKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgYmlnIGNpcmNsZXMgb2YgdGhlIGdyYXBoICYgdGhlaXIgbGFiZWxzXHJcbiAgICAgKi9cclxuICAgIHZhciBnciA9IHN2Zy5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInIgYXhpc1wiKVxyXG4gICAgICAgIC5zZWxlY3RBbGwoXCJnXCIpXHJcbiAgICAgICAgLmRhdGEoci50aWNrcyg1KS5zbGljZSgxKSlcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpO1xyXG5cclxuICAgIGdyLmFwcGVuZChcImNpcmNsZVwiKVxyXG4gICAgICAgIC5hdHRyKFwiclwiLCByKTtcclxuXHJcbiAgICBnci5hcHBlbmQoXCJ0ZXh0XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIC1yKGQpIC0gNDsgfSlcclxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInJvdGF0ZSgxNSlcIilcclxuICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxyXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQ7IH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBsYWJlbHMgZm9yIGVhY2ggbW9udGggYW5kIHRoZSBsaW5lc1xyXG4gICAgICogdGhhdCBnbyBvdXQgdG8gdGhlbS5cclxuICAgICAqL1xyXG4gICAgdmFyIGdhID0gc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYSBheGlzXCIpXHJcbiAgICAgICAgLnNlbGVjdEFsbChcImdcIilcclxuICAgICAgICAuZGF0YShkMy5yYW5nZSgwLCAzNjAsIDMwKSlcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwicm90YXRlKFwiICsgKGQgLSA5MCkgKyBcIilcIjsgfSk7XHJcblxyXG4gICAgZ2EuYXBwZW5kKFwibGluZVwiKVxyXG4gICAgICAgIC5hdHRyKFwieDJcIiwgcmFkaXVzKTtcclxuXHJcbiAgICBnYS5hcHBlbmQoXCJ0ZXh0XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ4XCIsIHJhZGl1cyArIDYpXHJcbiAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpXHJcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJlbmRcIiA6IG51bGw7IH0pXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7IH0pXHJcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gTU9OVEhfTEFCRUxTW2QvMzBdOyB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIHRoZSB0aHJlc2hvbGQgbGluZXNcclxuICAgICAqL1xyXG4gICAgdmFyIHRocmVzaG9sZEVsZW0gPSBzdmcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5zZWxlY3RBbGwoXCJnXCIpXHJcbiAgICAgICAgLmRhdGEodGhyZXNob2xkcylcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwicm90YXRlKFwiICsgKGQuZGF0YVsxXVswXSAtIDkwKSArIFwiKVwiOyB9KTtcclxuXHJcbiAgICB0aHJlc2hvbGRFbGVtLmFwcGVuZChcImxpbmVcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibGluZVwiKVxyXG4gICAgICAgIC5hdHRyKFwieDJcIiwgcmFkaXVzKTtcclxuXHJcbiAgICB0aHJlc2hvbGRFbGVtLmFwcGVuZChcInRleHRcIilcclxuICAgICAgICAuYXR0cihcInhcIiwgcmFkaXVzICsgNilcclxuICAgICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuICgoKChkLmRhdGFbMV1bMF0gLSAxKSUzNjUpLzM2NSkgKiAoMipNYXRoLlBJKSk7IH0pXHJcbiAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpXHJcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdOyByZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IFwiZW5kXCIgOiBudWxsOyB9KVxyXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgdmFyIGRheSA9IGQuZGF0YVsxXVswXTsgcmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyBcInJvdGF0ZSgxODAgXCIgKyAocmFkaXVzICsgNikgKyBcIiwwKVwiIDogbnVsbDsgfSlcclxuICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBkLmxhYmVsOyB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIHRoZSBsaW5lIHRvIHRoZSBjZW50ZXIgb2YgdGhlIGRhdGFcclxuICAgICAqL1xyXG4gICAgdmFyIGNlbnRlckRheSA9IGNlbnRlclsxXVswXTtcclxuICAgIHZhciBjZW50ZXJEYXlPcHBvc2l0ZSA9IChjZW50ZXJEYXkgKyAoMzY1LzIpKSAlIDM2NTtcclxuICAgIHZhciBjZW50ZXJEYXlEYXRhID0gW2NlbnRlckRheSwgMTAwXTtcclxuICAgIHZhciBjZW50ZXJEYXlPcHBvc2l0ZURhdGEgPSBbY2VudGVyRGF5T3Bwb3NpdGUsIDEwMF07XHJcbiAgICB2YXIgZ3Jvd2luZ1NlYXNvbkRhdGEgPSBbY2VudGVyRGF5RGF0YSwgY2VudGVyRGF5T3Bwb3NpdGVEYXRhXVxyXG5cclxuICAgIGRyYXdQb2xhclBhdGgoZ3Jvd2luZ1NlYXNvbkRhdGEsIGxpbmUsIHN2ZylcclxuICAgICAgICAuY2xhc3NlZChcImdyb3dpbmctc2Vhc29uLWxpbmVcIiwgXCJ0cnVlXCIpO1xyXG5cclxuICAgIGRyYXdQb2xhclBhdGgoY2VudGVyLCBsaW5lLCBzdmcpXHJcbiAgICAgICAgLmNsYXNzZWQoXCJjZW50ZXItbGluZVwiLCBcInRydWVcIik7XHJcblxyXG4gICAgc3ZnLnNlbGVjdEFsbChcInBvaW50XCIpXHJcbiAgICAgICAgLmRhdGEoW2NlbnRlclsxXV0pXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKFwiY2lyY2xlXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInBvaW50XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtkXSkuc2xpY2UoMSkuc2xpY2UoMCwgLTEpO1xyXG4gICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBjb29ycyArIFwiKVwiXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuYXR0cihcInJcIiwgMi41KVxyXG4gICAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwiIzAwMFwiKVxyXG4gICAgICAgIC5hdHRyKFwiZmlsbFwiLCBcIiNkZDgyZDJcIilcclxuICAgICAgICAub24oXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICB0aXAuc2hvdyhcIkNlbnRlcjogXCIgICsgU3RyaW5nKGRbMV0pLnN1YnN0cmluZygwLCA3KSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCA1KTtcclxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIycHhcIik7XHJcbiAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgdGlwLmhpZGUoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDIuNSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMXB4XCIpO1xyXG4gICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB2YXIgY2hhcnRzID0ge307XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGxpbmUgdGhhdCB0aGUgZGF0YSBmb2xsb3dzXHJcbiAgICAgKi9cclxuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl0gPSB7XHJcbiAgICAgICAgXCJwYXRoXCIgOiBkcmF3UG9sYXJQYXRoKGF2ZXJhZ2VzLCBsaW5lLCBzdmcpXHJcbiAgICB9O1xyXG5cclxuICAgIGNoYXJ0c1t5ZWFyXSA9IHtcclxuICAgICAgICBcInBhdGhcIiA6IGRyYXdQb2xhclBhdGgoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnKVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XHJcbiAgICAgKi9cclxuICAgIGNoYXJ0cy5tZWRpYW5zLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoYXZlcmFnZXMsIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG4gICAgY2hhcnRzW3llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XHJcblxyXG4gICAgdmFyIGlucHV0d3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJpbnB1dC13cmFwcGVyXCIsIHRydWUpO1xyXG5cclxuICAgIGRhdGEua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImlucHV0XCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiaWRcIiwgXCJwb2xhci1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcclxuICAgICAgICAgICAgLmF0dHIoXCJ2YWx1ZVwiLCBrZXkpXHJcbiAgICAgICAgICAgIC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgKGtleSA9PT0geWVhcikgPyB0cnVlIDogZmFsc2UpXHJcbiAgICAgICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd1BvbGFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImxhYmVsXCIpXHJcbiAgICAgICAgICAgIC50ZXh0KGtleSlcclxuICAgICAgICAgICAgLmF0dHIoXCJmb3JcIiwgXCJwb2xhci1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcclxuXHJcbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIilcclxuICAgICAgICAuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKVxyXG4gICAgICAgIC5hdHRyKFwiaWRcIiwgXCJwb2xhci1hdmVyYWdlLVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKVxyXG4gICAgICAgIC5hdHRyKFwidmFsdWVcIiwgXCJtZWRpYW5zXCIpXHJcbiAgICAgICAgLnByb3BlcnR5KFwiY2hlY2tlZFwiLCB0cnVlKVxyXG4gICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgbmV3WWVhciA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd1BvbGFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpXHJcblxyXG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwibGFiZWxcIilcclxuICAgICAgICAudGV4dChcIkJhc2VsaW5lXCIpXHJcbiAgICAgICAgLmF0dHIoXCJmb3JcIiwgXCJwb2xhci1hdmVyYWdlLVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcclxuXHJcbiAgICB2YXIgdGhyZXNob2xkQ2hlY2tib3g9IGlucHV0d3JhcHBlci5hcHBlbmQoXCJkaXZcIilcclxuICAgICAgICAuY2xhc3NlZChcInRocmVzaG9sZC1jaGVja2JveFwiLCB0cnVlKTtcclxuXHJcbiAgICB0aHJlc2hvbGRDaGVja2JveC5hcHBlbmQoXCJpbnB1dFwiKVxyXG4gICAgICAgIC5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpXHJcbiAgICAgICAgLmF0dHIoXCJpZFwiLCBcInRocmVzaG9sZC1jaGVja2JveC1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcclxuICAgICAgICAucHJvcGVydHkoXCJjaGVja2VkXCIsIHRydWUpXHJcbiAgICAgICAgLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHRocmVzaG9sZEVsZW0uc3R5bGUoXCJvcGFjaXR5XCIsICh0aGlzLmNoZWNrZWQpID8gMSA6IDApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIHRocmVzaG9sZENoZWNrYm94LmFwcGVuZChcImxhYmVsXCIpXHJcbiAgICAgICAgLnRleHQoXCJUaHJlc2hvbGRzXCIpXHJcbiAgICAgICAgLmF0dHIoXCJmb3JcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xyXG59XHJcblxyXG4vKiBQT0xBUiBHUkFQSCBIRUxQRVJTICovXHJcblxyXG5mdW5jdGlvbiBmaW5kUG9sYXJDZW50ZXIgKGRhdGEpIHtcclxuICAgIHZhciBpLCBqLCBsZW5ndGgsIGFycjtcclxuICAgIHZhciB0b3RhbFN1bSA9IDA7XHJcbiAgICB2YXIgaW5jb21wbGV0ZVllYXJzID0gMDtcclxuICAgIHZhciBzdW07XHJcbiAgICBsZW5ndGggPSA0NjtcclxuXHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5rZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgYXJyID0gZGF0YVtkYXRhLmtleXNbaV1dO1xyXG4gICAgICAgIGlmIChhcnIubGVuZ3RoICE9PSBsZW5ndGgpIHtcclxuICAgICAgICAgICAgaW5jb21wbGV0ZVllYXJzKys7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdW0gPSAwO1xyXG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBsZW5ndGgvMjsgaisrKSB7XHJcbiAgICAgICAgICAgIHN1bSArPSAoYXJyW2pdWzFdIC0gYXJyW2orMjNdWzFdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3VtID0gc3VtIC8gMjM7XHJcbiAgICAgICAgdG90YWxTdW0gKz0gc3VtO1xyXG4gICAgfVxyXG4gICAgdG90YWxTdW0gPSBNYXRoLmFicyh0b3RhbFN1bSkgLyAoZGF0YS5rZXlzLmxlbmd0aCAtIGluY29tcGxldGVZZWFycyk7XHJcblxyXG4gICAgdmFyIGFyZWFEaWZmID0gMTAwMDAwMDtcclxuICAgIHZhciBjaGVja0RpZmY7XHJcbiAgICB2YXIgYXJlYUluZGV4ID0gMDtcclxuICAgIHZhciBsZWZ0QXJlYSwgcmlnaHRBcmVhO1xyXG4gICAgdmFyIGF2Z3MgPSBkYXRhLm1lZGlhbnM7XHJcbiAgICB2YXIgaywgY291bnRlcjtcclxuXHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoLzI7IGkrKykge1xyXG4gICAgICAgIGxlZnRBcmVhID0gMDtcclxuICAgICAgICByaWdodEFyZWEgPSAwO1xyXG4gICAgICAgIGZvciAoY291bnRlciA9IDA7IGNvdW50ZXIgPCBsZW5ndGgvMjsgY291bnRlcisrKSB7XHJcbiAgICAgICAgICAgIGogPSAoaSArIGNvdW50ZXIpICUgNDY7XHJcbiAgICAgICAgICAgIGsgPSAoaiArIDIzKSAlIDQ2O1xyXG5cclxuICAgICAgICAgICAgbGVmdEFyZWEgKz0gcGFyc2VJbnQoYXZnc1tqXSwgMTApO1xyXG4gICAgICAgICAgICByaWdodEFyZWEgKz0gcGFyc2VJbnQoYXZnc1trXSwxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNoZWNrRGlmZiA9IE1hdGguYWJzKGxlZnRBcmVhIC0gcmlnaHRBcmVhKTtcclxuICAgICAgICBpZiAoY2hlY2tEaWZmIDwgYXJlYURpZmYpIHtcclxuICAgICAgICAgICAgYXJlYURpZmYgPSBjaGVja0RpZmY7XHJcbiAgICAgICAgICAgIGFyZWFJbmRleCA9IGk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBmaXJzdFJhZGl1cyA9IHBhcnNlSW50KGF2Z3NbYXJlYUluZGV4XSwgMTApO1xyXG4gICAgdmFyIHNlY29uZFJhZGl1cyA9IHBhcnNlSW50KC1hdmdzW2FyZWFJbmRleCArIDIzXSwgMTApO1xyXG5cclxuICAgIHZhciBmaXJzdERpZmYgPSBNYXRoLmFicyh0b3RhbFN1bSAtIGZpcnN0UmFkaXVzKSAtIE1hdGguYWJzKHRvdGFsU3VtIC0gc2Vjb25kUmFkaXVzKTtcclxuICAgIHZhciBzZWNvbmREaWZmID0gTWF0aC5hYnMoLXRvdGFsU3VtIC0gZmlyc3RSYWRpdXMpIC0gTWF0aC5hYnMoLXRvdGFsU3VtIC0gc2Vjb25kUmFkaXVzKTtcclxuICAgIGlmIChzZWNvbmREaWZmID4gZmlyc3REaWZmKSB7XHJcbiAgICAgICAgYXJlYUluZGV4ID0gYXJlYUluZGV4ICsgMjM7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGNpcmNsZWNlbnRlciA9IFswLCAwXTtcclxuICAgIHZhciBkYXRhY2VudGVyID0gWyhhcmVhSW5kZXggKiA4KSArIDMsIHRvdGFsU3VtXTtcclxuXHJcbiAgICByZXR1cm4oW2NpcmNsZWNlbnRlciwgZGF0YWNlbnRlcl0pO1xyXG59XHJcblxyXG4vKipcclxuICogc3RhcnREYXkgaXMgYWN0dWFsbHkgdGhlIHNlYXNvbmFsaXR5IGluZGV4LCBpZiBpdCBvY2N1cnMgYWZ0ZXIganVseSBpdCBzaG91bGQgYmUgZmxpcHBlZFxyXG4gKi9cclxuZnVuY3Rpb24gZmluZFBvbGFyVGhyZXNob2xkcyAoZGF0YSwgc3RhcnREYXkpIHtcclxuICAgIHZhciBzdGFydEluZGV4ID0gTWF0aC5mbG9vcigoc3RhcnREYXkgLSAzKSAvIDgpO1xyXG4gICAgaWYgKHN0YXJ0SW5kZXggPiAyMikge1xyXG4gICAgICAgIHN0YXJ0SW5kZXggPSBzdGFydEluZGV4IC0gMjM7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGksIGosIGxlbmd0aCwgYXJyO1xyXG4gICAgdmFyIHRvdGFsU3VtID0gMDtcclxuICAgIHZhciBzdW07XHJcbiAgICBsZW5ndGggPSA0NjtcclxuXHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBqID0gKHN0YXJ0SW5kZXggKyBpKSAlIGxlbmd0aDtcclxuICAgICAgICB0b3RhbFN1bSArPSBwYXJzZUludChkYXRhW2pdLCAxMCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGZpZnRlZW5UaHJlc2hvbGQgPSB0b3RhbFN1bSAqIC4xNTtcclxuICAgIHZhciBlaWdodHlUaHJlc2hvbGQgPSB0b3RhbFN1bSAqIC44MDtcclxuICAgIHZhciBlaWdodHlmaXZlVGhyZXNob2xkID0gdG90YWxTdW0gKiAuODU7XHJcbiAgICB2YXIgZmlmdGVlbkluZGV4Rm91bmQgPSBmYWxzZSwgXHJcbiAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IGZhbHNlLFxyXG4gICAgICAgIGVpZ2h0eWZpdmVJbmRleEZvdW5kID0gZmFsc2U7XHJcbiAgICB2YXIgZmlmdGVlbkluZGV4LCBlaWdodHlJbmRleCwgZWlnaHR5Zml2ZUluZGV4O1xyXG5cclxuICAgIHRvdGFsU3VtID0gMDtcclxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGogPSAoc3RhcnRJbmRleCArIGkpICUgbGVuZ3RoO1xyXG4gICAgICAgIHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcclxuICAgICAgICBpZiAoIWZpZnRlZW5JbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZmlmdGVlblRocmVzaG9sZCkge1xyXG4gICAgICAgICAgICBmaWZ0ZWVuSW5kZXggPSBqO1xyXG4gICAgICAgICAgICBmaWZ0ZWVuSW5kZXhGb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWVpZ2h0eUluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBlaWdodHlUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgZWlnaHR5SW5kZXggPSBqO1xyXG4gICAgICAgICAgICBlaWdodHlJbmRleEZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZWlnaHR5Zml2ZUluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBlaWdodHlmaXZlVGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgIGVpZ2h0eWZpdmVJbmRleCA9IGo7XHJcbiAgICAgICAgICAgIGVpZ2h0eWZpdmVJbmRleEZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBjaXJjbGVDZW50ZXIgPSBbMCwgMF07XHJcblxyXG4gICAgdmFyIGZpZnRlZW5FbmQgPSBbKGZpZnRlZW5JbmRleCAqIDgpICsgMywgMTAwXTtcclxuICAgIHZhciBlaWdodHlFbmQgPSBbKGVpZ2h0eUluZGV4ICogOCkgKyAzLCAxMDBdO1xyXG4gICAgdmFyIGVpZ2h0eWZpdmVFbmQgPSBbKGVpZ2h0eWZpdmVJbmRleCAqIDgpICsgMywgMTAwXTtcclxuXHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJsYWJlbFwiIDogXCIxNSVcIixcclxuICAgICAgICAgICAgXCJkYXRhXCIgOiBbY2lyY2xlQ2VudGVyLCBmaWZ0ZWVuRW5kXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcImxhYmVsXCIgOiBcIjgwJVwiLFxyXG4gICAgICAgICAgICBcImRhdGFcIiA6IFtjaXJjbGVDZW50ZXIsIGVpZ2h0eUVuZF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJsYWJlbFwiIDogXCI4NSVcIixcclxuICAgICAgICAgICAgXCJkYXRhXCIgOiBbY2lyY2xlQ2VudGVyLCBlaWdodHlmaXZlRW5kXVxyXG4gICAgICAgIH1cclxuICAgIF07XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBHUkFQSCBIRUxQRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5mdW5jdGlvbiBkcmF3TGluZWFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcclxuICAgIHJldHVybiBzdmcuYXBwZW5kKFwicGF0aFwiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpXHJcbiAgICAgICAgLmF0dHIoXCJkXCIsIGxpbmUoZGF0YSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3UG9sYXJQYXRoKGRhdGEsIGxpbmUsIHN2Zykge1xyXG4gICAgcmV0dXJuIHN2Zy5hcHBlbmQoXCJwYXRoXCIpXHJcbiAgICAgICAgLmRhdHVtKGRhdGEpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIilcclxuICAgICAgICAuYXR0cihcImRcIiwgbGluZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcykge1xyXG4gICAgcmV0dXJuIHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKVxyXG4gICAgICAgIC5kYXRhKGRhdGEpXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKFwiY2lyY2xlXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInBvaW50XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICB2YXIgcG9pbnQgPSBBcnJheS5pc0FycmF5KGQpID8gZCA6IFsoaSo4KSArIDMsIGRdO1xyXG4gICAgICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtwb2ludF0pLnNsaWNlKDEpLnNsaWNlKDAsIC0xKTtcclxuICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgY29vcnMgKyBcIilcIlxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmF0dHIoXCJyXCIsIDMpXHJcbiAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCIjMDAwXCIpXHJcbiAgICAgICAgLmF0dHIoXCJmaWxsXCIsZnVuY3Rpb24oZCxpKXtcclxuICAgICAgICAgICAgdmFyIHZhbCA9IEFycmF5LmlzQXJyYXkoZCkgPyBkWzFdIDogZDtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXB1dGVDb2xvcih2YWwsIGF2ZXJhZ2VzW2klNDZdLCAzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCBoYW5kbGVQb2ludE1vdXNlb3ZlcilcclxuICAgICAgICAub24oXCJtb3VzZW91dFwiLCBoYW5kbGVQb2ludE1vdXNlb3V0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUG9pbnRNb3VzZW92ZXIoZCkge1xyXG4gICAgdmFyIHRpcFN0cmluZyA9IEFycmF5LmlzQXJyYXkoZCkgPyBmb3JtYXREYXRlKGRbMF0pICsgXCI6IFwiICArIGRbMV0gOiBcIkF2ZXJhZ2U6IFwiICArIGQ7XHJcbiAgICB0aXAuc2hvdyh0aXBTdHJpbmcpO1xyXG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDUpO1xyXG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIycHhcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdXQoZCkge1xyXG4gICAgdGlwLmhpZGUoKTtcclxuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCAzKTtcclxuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMXB4XCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDaGVja2JveCh3cmFwcGVyLCBrZXksIHR5cGUsIHllYXIsIGNoYXJ0cywgZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpIHtcclxuICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcclxuXHJcbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIilcclxuICAgICAgICAuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKVxyXG4gICAgICAgIC5hdHRyKFwiaWRcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKVxyXG4gICAgICAgIC5hdHRyKFwidmFsdWVcIiwga2V5KVxyXG4gICAgICAgIC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgKGtleSA9PT0geWVhcikgPyB0cnVlIDogZmFsc2UpXHJcbiAgICAgICAgLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghY2hhcnRzLmhhc093blByb3BlcnR5KG5ld1llYXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdMaW5lYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2Zyk7XHJcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKVxyXG4gICAgICAgIC50ZXh0KGtleSlcclxuICAgICAgICAuYXR0cihcImZvclwiLCB0eXBlICsgXCItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjb21wdXRlQ29sb3IgKHZhbHVlLCBtZWRpYW4sIHNjYWxlKSB7XHJcbiAgICB2YXIgZGlmZiA9IHZhbHVlIC0gbWVkaWFuO1xyXG4gICAgdmFyIHBlcmNlbnRfZGlmZiA9IChNYXRoLmFicyhkaWZmKS9tZWRpYW4pICogMTAwICogc2NhbGU7XHJcbiAgICB2YXIgbGlnaHRuZXNzID0gKDEwMCAtIHBlcmNlbnRfZGlmZikgKyBcIiVcIjtcclxuXHJcbiAgICBpZiAoZGlmZiA+IDApIHtcclxuICAgICAgICByZXR1cm4gXCJoc2woOCwgNzklLCBcIiArIGxpZ2h0bmVzcyArIFwiKVwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gXCJoc2woMjE5LCA3OSUsIFwiICsgbGlnaHRuZXNzICsgXCIpXCI7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gREFURSBIRUxQRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZnVuY3Rpb24gcGFyc2VEYXRlIChkYXRlKSB7XHJcbiAgICBkYXRlID0gZGF0ZS50b1N0cmluZygpO1xyXG4gICAgdmFyIHllYXIgPSBkYXRlLnN1YnN0cmluZygwLCA0KTtcclxuICAgIHZhciBtb250aCA9IHBhcnNlSW50KGRhdGUuc3Vic3RyaW5nKDQsIDYpLCAxMCkgLSAxO1xyXG4gICAgdmFyIGRheSA9IGRhdGUuc3Vic3RyaW5nKDYsIDgpO1xyXG5cclxuICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VKdWxpYW5EYXkgKGRhdGUpIHtcclxuICAgIGlmICh0eXBlb2YoZGF0ZSkgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICBkYXRlID0gcGFyc2VEYXRlKGRhdGUpO1xyXG4gICAgICAgIHJldHVybiBkYXRlLmdldERPWSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZGF0ZTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0RGF0ZSAoZGF0ZSkge1xyXG4gICAgaWYgKGRhdGUgPT09IFwiQXZlcmFnZVwiKSB7IHJldHVybiBkYXRlOyB9XHJcblxyXG4gICAgZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcclxuICAgIHJldHVybiBmb3JtYXRNb250aChkYXRlLmdldE1vbnRoKCkpICsgXCIgXCIgKyBvcmRpbmFsX3N1ZmZpeF9vZihkYXRlLmdldERhdGUoKSkgKyBcIiwgXCIgKyBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdE1vbnRoIChtb250aCkge1xyXG4gICAgc3dpdGNoIChtb250aCkge1xyXG4gICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgcmV0dXJuIFwiSmFuLlwiXHJcbiAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJGZWIuXCJcclxuICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgIHJldHVybiBcIk1hci5cIlxyXG4gICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiQXByLlwiXHJcbiAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICByZXR1cm4gXCJNYXlcIlxyXG4gICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgcmV0dXJuIFwiSnVuLlwiXHJcbiAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICByZXR1cm4gXCJKdWwuXCJcclxuICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgIHJldHVybiBcIkF1Zy5cIlxyXG4gICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgcmV0dXJuIFwiU2VwLlwiXHJcbiAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICByZXR1cm4gXCJPY3QuXCJcclxuICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJOb3YuXCJcclxuICAgICAgICBjYXNlIDExOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJEZWMuXCJcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb3JkaW5hbF9zdWZmaXhfb2YoZGF5KSB7XHJcbiAgICB2YXIgaiA9IGRheSAlIDEwLFxyXG4gICAgICAgIGsgPSBkYXkgJSAxMDA7XHJcbiAgICBpZiAoaiA9PT0gMSAmJiBrICE9PSAxMSkge1xyXG4gICAgICAgIHJldHVybiBkYXkgKyBcInN0XCI7XHJcbiAgICB9XHJcbiAgICBpZiAoaiA9PT0gMiAmJiBrICE9PSAxMikge1xyXG4gICAgICAgIHJldHVybiBkYXkgKyBcIm5kXCI7XHJcbiAgICB9XHJcbiAgICBpZiAoaiA9PT0gMyAmJiBrICE9PSAxMykge1xyXG4gICAgICAgIHJldHVybiBkYXkgKyBcInJkXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF5ICsgXCJ0aFwiO1xyXG59XHJcblxyXG52YXIgTU9OVEhfTEFCRUxTID0ge1xyXG4gICAgMDogXCJKYW5cIixcclxuICAgIDE6IFwiRmViXCIsXHJcbiAgICAyOiBcIk1hclwiLFxyXG4gICAgMzogXCJBcHJcIixcclxuICAgIDQ6IFwiTWF5XCIsXHJcbiAgICA1OiBcIkp1blwiLFxyXG4gICAgNjogXCJKdWxcIixcclxuICAgIDc6IFwiQXVnXCIsXHJcbiAgICA4OiBcIlNlcFwiLFxyXG4gICAgOTogXCJPY3RcIixcclxuICAgIDEwOiBcIk5vdlwiLFxyXG4gICAgMTE6IFwiRGVjXCJcclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvZ3JhcGguanMiLCJpbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tICcuL3NoYXJlJ1xyXG5pbXBvcnQge3VwZGF0ZUxheWVyT3BhY2l0eX0gZnJvbSBcIi4vbGF5ZXJcIjtcclxuXHJcbi8vIHNldCBpdCBtYW51YWxseSBmb3Igbm93XHJcbmNvbnN0IE9QQUNJVFlfUkFOR0VfTUFYID0gOTBcclxuXHJcbnZhciBvcGFjaXR5U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAuZG9tYWluKFsxLCAwXSlcclxuICAgIC5yYW5nZShbMCwgT1BBQ0lUWV9SQU5HRV9NQVhdKVxyXG4gICAgLmNsYW1wKHRydWUpXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0U2xpZGVySW5pdGlhbFBvcyAobGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyKSB7XHJcblxyXG4gICAgdmFyIGxheWVyT3BhY2l0eSA9IGxheWVyLm9wYWNpdHkgfHwgMVxyXG4gICAgdmFyIGhhbmRsZU9mZnNldCA9IG9wYWNpdHlTY2FsZShsYXllck9wYWNpdHkpXHJcblxyXG4gICAgbGF5ZXJUb29sc1dyYXBwZXIuc2VsZWN0KCcub3BhY2l0eS1zbGlkZXItaGFuZGxlJykuc3R5bGUoJ3RvcCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gYCR7aGFuZGxlT2Zmc2V0fWArJ3B4J1xyXG4gICAgfSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VPcGFjaXR5U2xpZGVyIChsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIpIHtcclxuXHJcbiAgICB2YXIgbGF5ZXJPcGFjaXR5ID0gbGF5ZXIub3BhY2l0eSAhPT0gdW5kZWZpbmVkID8gbGF5ZXIub3BhY2l0eSA6IDFcclxuICAgIFxyXG4gICAgdmFyIHdyYXBwZXIgPSBsYXllclRvb2xzV3JhcHBlci5hcHBlbmQoJ2RpdicpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktc2xpZGVyLXdyYXBwZXInKVxyXG5cclxuICAgIHZhciBvcGFjaXR5UGVyY2VudEluZGljYXRvciA9IHdyYXBwZXIuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdvcGFjaXR5LXNsaWRlci1pbmRpY2F0b3InKVxyXG5cclxuICAgIG1ha2VTbGlkZXJUcmFjayh3cmFwcGVyLCBsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIsIGxheWVyT3BhY2l0eSlcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VTbGlkZXJUcmFjayh3cmFwcGVyLCBsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIsIGxheWVyT3BhY2l0eSkge1xyXG5cclxuICAgIHZhciBvdmVybGF5ID0gd3JhcHBlci5hcHBlbmQoJ2RpdicpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktc2xpZGVyLXRyYWNrLW92ZXJsYXknKVxyXG5cclxuICAgIHZhciB0cmFjayA9IG92ZXJsYXkuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdvcGFjaXR5LXNsaWRlci10cmFjaycpXHJcblxyXG4gICAgb3ZlcmxheS5hcHBlbmQoJ2RpdicpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktc2xpZGVyLWhhbmRsZScpXHJcblxyXG4gICAgaWYgKGxheWVyLmFjdGl2ZSkgc2V0U2xpZGVySW5pdGlhbFBvcyhsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIpXHJcbiAgICBzZXREcmFnRXZlbnRMaXN0ZW5lcih3cmFwcGVyLCBsYXllciwgbGF5ZXJPcGFjaXR5KVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gc2V0RHJhZ0V2ZW50TGlzdGVuZXIod3JhcHBlciwgbGF5ZXIsIGxheWVyT3BhY2l0eSkge1xyXG4gICAgdmFyIG92ZXJsYXkgPSB3cmFwcGVyLnNlbGVjdCgnLm9wYWNpdHktc2xpZGVyLXRyYWNrLW92ZXJsYXknKVxyXG4gICAgb3ZlcmxheS5jYWxsKGQzLmRyYWcoKVxyXG4gICAgICAgIC5vbignc3RhcnQgZHJhZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIG5ld09wYWNpdHkgPSBjYWxjT3BhY2l0eUZyb21Nb3VzZVBvcyhvdmVybGF5KVxyXG4gICAgICAgICAgICB1cGRhdGVMYXllck9wYWNpdHkobGF5ZXIsIG5ld09wYWNpdHkpXHJcbiAgICAgICAgICAgIGFkanVzdFNsaWRlckhhbmRsZShvdmVybGF5LCBuZXdPcGFjaXR5KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm9uKCdlbmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZVNoYXJlVXJsKClcclxuICAgICAgICB9KSlcclxufVxyXG5cclxuZnVuY3Rpb24gYWRqdXN0U2xpZGVySGFuZGxlKG92ZXJsYXksIG5ld09wYWNpdHkpIHtcclxuICAgIHZhciBoYW5kbGUgPSBvdmVybGF5LnNlbGVjdCgnLm9wYWNpdHktc2xpZGVyLWhhbmRsZScpXHJcbiAgICBoYW5kbGUuc3R5bGUoJ3RvcCcsIGAke29wYWNpdHlTY2FsZShuZXdPcGFjaXR5KX1gKydweCcpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zKG92ZXJsYXkpIHtcclxuICAgIHZhciB5UG9zID0gZDMubW91c2Uob3ZlcmxheS5ub2RlKCkpWzFdXHJcbiAgICB2YXIgbmV3T3BhY2l0eSA9IG9wYWNpdHlTY2FsZS5pbnZlcnQoeVBvcylcclxuICAgIHJldHVybiBuZXdPcGFjaXR5XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvb3BhY2l0eVNsaWRlci5qcyIsImltcG9ydCB7dXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodH0gZnJvbSBcIi4vcGFuZWxcIjtcclxuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSBcIi4vc2hhcmVcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBCaW5kVGFiRXZlbnRzICgpIHtcclxuICAgIGQzLnNlbGVjdEFsbChcIi5wYW5lbC10b3AtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2spO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2V0QWN0aXZlVGFiICgpIHtcclxuICAgIHJldHVybiBkMy5zZWxlY3QoJyNyaWdodC1wYW5lbCcpLmNsYXNzZWQoJ2dyYXBocy1hY3RpdmUnKSA/XHJcbiAgICAgICAgJ2dyYXBocy1hY3RpdmUnIDogJ2xheWVycy1hY3RpdmUnXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrICgpIHtcclxuICAgIC8vIElmIHRoZSBzZWN0aW9uIGlzIGFscmVhZHkgYWN0aXZlLCBkbyBub3RoaW5nXHJcbiAgICBpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHJldHVybjtcclxuICAgIEhhbmRsZVRhYkNoYW5nZSh0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtYWN0aXZlXCIpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEhhbmRsZVRhYkNoYW5nZSAobmV3Q2xhc3MpIHtcclxuICAgIGRpc2FibGVBY3RpdmVUYWIoKTtcclxuICAgIGVuYWJsZVRhYihuZXdDbGFzcyk7XHJcbiAgICB1cGRhdGVTaGFyZVVybCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmFibGVUYWIgKG5ld0NsYXNzKSB7XHJcbiAgICBkMy5zZWxlY3QoXCIucGFuZWwtdG9wLWJ0bltkYXRhLWFjdGl2ZT0nXCIgKyBuZXdDbGFzcyArIFwiJ11cIikuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcclxuXHJcbiAgICBkMy5zZWxlY3RBbGwoXCIjbWFwLXdyYXBwZXIsICNyaWdodC1wYW5lbFwiKVxyXG4gICAgICAgIC5jbGFzc2VkKG5ld0NsYXNzLCB0cnVlKTtcclxuXHJcbiAgICBkMy5zZWxlY3QoXCIucGFuZWwtc2VjdGlvbi13cmFwcGVyW2RhdGEtYWN0aXZlPSdcIiArIG5ld0NsYXNzICsgXCInXVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xyXG5cclxuICAgIHRvZ2dsZU1hcFBhZGRpbmcoKTtcclxuICAgIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGlzYWJsZUFjdGl2ZVRhYiAoKSB7XHJcbiAgICB2YXIgYWN0aXZlQ2xhc3MgPSBkMy5zZWxlY3QoXCIucGFuZWwtdG9wLWJ0bi5hY3RpdmVcIikuYXR0cihcImRhdGEtYWN0aXZlXCIpO1xyXG5cclxuICAgIGQzLnNlbGVjdEFsbCgnI21hcC13cmFwcGVyLCAjcmlnaHQtcGFuZWwnKVxyXG4gICAgICAgIC5jbGFzc2VkKGFjdGl2ZUNsYXNzLCBmYWxzZSk7XHJcblxyXG4gICAgZDMuc2VsZWN0QWxsKCcucGFuZWwtdG9wLWJ0bi5hY3RpdmUsIC5wYW5lbC1zZWN0aW9uLXdyYXBwZXIuYWN0aXZlJylcclxuICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJywgZmFsc2UpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVNYXBQYWRkaW5nICgpIHtcclxuICAgIHZhciBwYWRkaW5nUmlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJpZ2h0LXBhbmVsXCIpLm9mZnNldFdpZHRoO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXAtd3JhcHBlclwiKS5zdHlsZS5wYWRkaW5nUmlnaHQgPSBwYWRkaW5nUmlnaHQgKyBcInB4XCI7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvdGFicy5qcyIsIi8qXHJcbiAgXCJsb2dvXCI6IHtcclxuICAgIFwiaW1hZ2VcIjogXCJpbWdzL2xhbmRhdF9sb2dvX2JsdWUucG5nXCIsXHJcbiAgICBcImFsdFwiOiBcIkxvZ28gZm9yIHRoZSBMYW5EYXQgcHJvamVjdFwiLFxyXG4gICAgXCJsaW5rXCI6IFwiaHR0cHM6Ly9sYW5kYXQtZGV2Lm5lbWFjLm9yZ1wiLFxyXG4gICAgXCJsb2NhdGlvblwiOiBbXCJib3R0b21cIiwgXCJyaWdodFwiXVxyXG4gIH0sXHJcbiovXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDcmVhdGVMb2dvIChsb2dvZGF0YSkge1xyXG4gICAgaWYgKCFsb2dvZGF0YS5pbWFnZSkgcmV0dXJuO1xyXG5cclxuICAgIHZhciBsb2dvV3JhcHBlciA9IGNyZWF0ZUxvZ29XcmFwcGVyKCk7XHJcbiAgICB2YXIgbG9nb0ltYWdlID0gY3JlYXRlTG9nb0ltYWdlKGxvZ29kYXRhKTtcclxuICAgIHZhciBsb2dvTGluayA9IGxvZ29kYXRhLmxpbmsgPyBjcmVhdGVMb2dvTGluayhsb2dvZGF0YS5saW5rKSA6IG51bGw7XHJcblxyXG4gICAgaWYgKGxvZ29MaW5rKSB7XHJcbiAgICAgICAgbG9nb0xpbmsuYXBwZW5kQ2hpbGQobG9nb0ltYWdlKTtcclxuICAgICAgICBsb2dvV3JhcHBlci5hcHBlbmRDaGlsZChsb2dvTGluayk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxvZ29XcmFwcGVyLmFwcGVuZENoaWxkKGxvZ29JbWFnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGluc2VydEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGxvZ29kYXRhLmxvY2F0aW9uKVswXTtcclxuICAgIHZhciBleGlzdGluZ0NoaWxkID0gaW5zZXJ0RWxlbWVudC5maXJzdENoaWxkO1xyXG4gICAgaW5zZXJ0RWxlbWVudC5pbnNlcnRCZWZvcmUobG9nb1dyYXBwZXIsIGV4aXN0aW5nQ2hpbGQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVMb2dvV3JhcHBlciAoKSB7XHJcbiAgICB2YXIgbG9nb1dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZDMuc2VsZWN0KGxvZ29XcmFwcGVyKS5jbGFzc2VkKFwicHJvamVjdC1sb2dvXCIsIHRydWUpO1xyXG4gICAgcmV0dXJuIGxvZ29XcmFwcGVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVMb2dvSW1hZ2UgKGxvZ29kYXRhKSB7XHJcbiAgICB2YXIgbG9nb0ltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgIGxvZ29JbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbG9nb2RhdGEuaW1hZ2UpO1xyXG4gICAgaWYgKGxvZ29kYXRhLmxhYmVsKSB7XHJcbiAgICAgICAgbG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcImFsdFwiLCBsb2dvZGF0YS5sYWJlbCk7XHJcbiAgICAgICAgbG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIGxvZ29kYXRhLmxhYmVsKTtcclxuICAgIH1cclxuICAgIHJldHVybiBsb2dvSW1hZ2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUxvZ29MaW5rIChsaW5rKSB7XHJcbiAgICB2YXIgbG9nb0xpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICAgIGxvZ29MaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgbGluayk7XHJcbiAgICBsb2dvTGluay5zZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIiwgXCJfYmxhbmtcIik7XHJcbiAgICByZXR1cm4gbG9nb0xpbms7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvbG9nby5qcyJdLCJzb3VyY2VSb290IjoiIn0=