!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(3),i=r(o),c=n(22),s=n(26),l=n(28),u=n(29),p=n(24),d=n(25),f=n(23),v=n(31),h=r(v),m=n(27),y=(n(32),function(e){(0,a.ParseConfig)(e,g),(0,l.SetupGraphs)(),(0,u.BindTabEvents)(),(0,d.BindCopyLinkEvents)()}),g=function(e){(0,d.AddShareSettingsToConfig)(e);var t=(0,p.CreateMap)(e.map);(0,s.CreateBaseLayers)(t,e.baselayers),(0,f.CreateDefaultLayers)(e.layers,e["active-layers"]),(0,c.SetupPanel)(e.layers,e.layout),(0,i.default)(t),(0,h.default)(e.logo),e.tab&&(0,u.HandleTabChange)(e.tab),e.graph&&(0,l.HandleGraphTabChange)(e.graph),(0,l.BindGraphEvents)(t),(0,d.BindUpdateShareUrl)(t),(0,m.SetupPointsOfInterest)(t,e.pois),(0,d.updateShareUrl)()};window.Base=y,t.default={Base:y}},function(e,t){"use strict";function n(e,t){a(e,t)}function r(e){var t;return t=!window.XMLHttpRequest&&window.ActiveXObject?new window.ActiveXObject("MSXML2.XMLHTTP.3.0"):new XMLHttpRequest,t.onreadystatechange=function(){4===t.readyState&&e(t.response)},t}function a(e,t){var n=r(function(e){t(o(e))});n.open("GET",e,!0),n.send(),console.log("hi")}function o(e){return e=JSON.parse(e),i(e),c(e),e}function i(e){e.map||(e.map={})}function c(e){var t,n,r=e.layers,a=e.mapserverUrl;e["active-layers"];for(var o in r){if(!r.hasOwnProperty(o))return;for(t=r[o],n=0;n<t.length;n++)l(t[n],a),s(t[n],e.defaultLayerOpacity)}}function s(e,t){e.opacity=e.opacity||t}function l(e,t){e.url=e.url||t}Object.defineProperty(t,"__esModule",{value:!0}),t.ParseConfig=n,t.GetAjaxObject=r},function(e,t,n){"use strict";function r(e){var t=new a.OpenStreetMapProvider,n=new a.GeoSearchControl({provider:t,showMarker:!1,autoComplete:!0,showPopup:!1});e.addControl(n);var r=n.searchElement.elements;L.DomEvent.on(r.container,"click",function(e){L.DomEvent.stopPropagation(e);for(var t=r.form.getElementsByClassName("results")[0].children,n=0;n<t.length;n++)e.target===t[n]&&r.container.classList.remove("active");ga("send","event",{eventCategory:"map",eventAction:"search",eventLabel:"click",nonInteraction:!1})}),L.DomEvent.on(r.container,"keydown",function(e){L.DomEvent.stopPropagation(e),13!=e.which&&13!=e.keyCode||(r.container.classList.remove("active"),ga("send","event",{eventCategory:"map",eventAction:"search address",eventLabel:e.target.value,nonInteraction:!1}))})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(4)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5);Object.defineProperty(t,"GeoSearchControl",{enumerable:!0,get:function(){return r(a).default}});var o=n(13);Object.defineProperty(t,"SearchElement",{enumerable:!0,get:function(){return r(o).default}});var i=n(17);Object.defineProperty(t,"BingProvider",{enumerable:!0,get:function(){return r(i).default}});var c=n(19);Object.defineProperty(t,"EsriProvider",{enumerable:!0,get:function(){return r(c).default}});var s=n(20);Object.defineProperty(t,"GoogleProvider",{enumerable:!0,get:function(){return r(s).default}});var l=n(21);Object.defineProperty(t,"OpenStreetMapProvider",{enumerable:!0,get:function(){return r(l).default}});var u=n(18);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return r(u).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){if(!L||!L.Control||!L.Control.extend)throw new Error("Leaflet must be loaded before instantiating the GeoSearch control");for(var e=L.Control.extend(m),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e,[null].concat(n)))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=(r(o),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});t.default=a;var c=n(12),s=r(c),l=n(13),u=r(l),p=n(16),d=r(p),f=n(14),v=n(15),h=function(){return{position:"topleft",style:"button",showMarker:!0,showPopup:!1,marker:{icon:new L.Icon.Default,draggable:!1},maxMarkers:1,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",notFoundMessage:"Sorry, that address could not be found.",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",msgbox:"leaflet-bar message",form:"",input:""},autoComplete:!0,autoCompleteDelay:250}},m={initialize:function(e){var t=this;this.markers=new L.FeatureGroup,this.options=i({},h(),e);var n=this.options,r=n.style,a=n.classNames,o=n.searchLabel,c=n.autoComplete,l=n.autoCompleteDelay;"button"!==r&&(this.options.classNames.container+=" "+e.style),this.searchElement=new u.default(i({},this.options,{handleSubmit:function(e){return t.onSubmit(e)}}));var p=this.searchElement.elements,v=p.container,m=p.form,y=p.input;v.addEventListener("dblclick",function(e){e.stopPropagation()});var g=(0,f.createElement)("a",a.button,v);g.title=o,g.href="#",g.addEventListener("click",function(e){t.onClick(e)},!1),c&&(this.resultList=new d.default({handleClick:function(e){var n=e.result;y.value=n.label,t.onSubmit({query:n.label})}}),m.appendChild(this.resultList.elements.container),y.addEventListener("keyup",(0,s.default)(function(e){return t.autoSearch(e)},l),!0),y.addEventListener("keydown",function(e){return t.selectResult(e)},!0),y.addEventListener("keydown",function(e){return t.clearResults(e)},!0)),this.elements={button:g}},onAdd:function(e){var t=this.options,n=t.showMarker,r=t.style;if(this.map=e,n&&this.markers.addTo(e),"bar"===r){var a=this.searchElement.elements.form,o=e.getContainer().querySelector(".leaflet-control-container"),i=(0,f.createElement)("div","leaflet-control-geosearch bar");i.appendChild(a),o.appendChild(i),this.elements.container=i}return this.searchElement.elements.container},onRemove:function(){var e=this.elements.container;return e&&e.remove(),this},onClick:function(e){e.preventDefault();var t=this.searchElement.elements,n=t.container,r=t.input;n.classList.contains("active")?(0,f.removeClassName)(n,"active"):((0,f.addClassName)(n,"active"),r.focus())},selectResult:function(e){if([v.ARROW_DOWN_KEY,v.ARROW_UP_KEY].includes(e.keyCode)){e.preventDefault();var t=this.searchElement.elements.input,n=this.resultList,r=this.resultList.count()-1,a="ArrowDown"===e.code?1+~~n.selected:~~n.selected-1,o=a<0?r:a>r?0:a,i=n.select(o);t.value=i.label}},clearResults:function(e){e.keyCode===v.ESCAPE_KEY&&this.resultList.clear()},autoSearch:function(e){return new Promise(function(t,n){var r,a,o;return v.SPECIAL_KEYS.includes(e.keyCode)?t():(r=e.target.value,a=this.options.provider,a.search({query:r}).then(function(e){return o=e,this.resultList.render(o),t()}.$asyncbind(this,n),n))}.$asyncbind(this))},onSubmit:function(e){return new Promise(function(t,n){var r,a;return r=this.options.provider,r.search(e).then(function(e){return a=e,a&&a.length>0&&this.showResult(a[0]),t()}.$asyncbind(this,n),n)}.$asyncbind(this))},showResult:function(e){var t=Object.keys(this.markers._layers);t.length>=this.options.maxMarkers&&this.markers.removeLayer(t[0]);var n=this.addMarker(e);this.centerMap(e),this.map.fireEvent("geosearch/showlocation",{location:e,marker:n})},addMarker:function(e){var t=this.options,n=t.marker,r=t.showPopup,a=new L.Marker([e.y,e.x],n);return a.bindPopup(e.label),this.markers.addLayer(a),r&&a.openPopup(),a},centerMap:function(e){var t=this.options,n=t.retainZoomLevel,r=t.animateZoom,a=new L.LatLngBounds(e.bounds),o=a.isValid()?a:this.markers.getBounds();!n&&a.isValid()?this.map.fitBounds(o,{animate:r}):this.map.setView(o.getCenter(),this.getZoom(),{animate:r})},getZoom:function(){var e=this.options,t=e.retainZoomLevel,n=e.zoomLevel;return t?this.map.getZoom():n}}},function(e,t,n){"use strict";function r(e,t){if(Function.prototype.$asyncspawn||Object.defineProperty(Function.prototype,"$asyncspawn",{value:r,enumerable:!1,configurable:!0,writable:!0}),this instanceof Function){var n=this;return new e(function(e,r){function a(t,n){var i;try{if(i=t.call(o,n),i.done){if(i.value!==e){if(i.value&&i.value===i.value.then)return i.value(e,r);e&&e(i.value),e=null}return}i.value.then?i.value.then(function(e){a(o.next,e)},function(e){a(o.throw,e)}):a(o.next,i.value)}catch(e){return r&&r(e),void(r=null)}}var o=n.call(t,e,r);a(o.next)})}}var a=function(e,t){for(var n=t.toString(),r="return "+n,a=n.match(/.*\(([^)]*)\)/)[1],o=/['"]!!!([^'"]*)['"]/g,i=[];;){var c=o.exec(r);if(!c)break;i.push(c)}return i.reverse().forEach(function(t){r=r.slice(0,t.index)+e[t[1]]+r.substr(t.index+t[0].length)}),r=r.replace(/\/\*[^*]*\*\//g," ").replace(/\s+/g," "),new Function(a,r)()}({zousan:n(7).toString(),thenable:n(11).toString()},function e(t,n){function r(){return a.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,a){return function o(i){for(;i;){if(i.then)return i=i.then(o,r),a?void 0:i;try{if(i.pop){if(i.length)return i.pop()?t.call(e):i;i=n}else i=i.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable="!!!thenable"(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory="!!!zousan")());var a=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return a.apply(t,arguments)}catch(e){return n(e)}}}});a(),r(),e.exports={$asyncbind:a,$asyncspawn:r}},function(e,t,n){(function(t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){function a(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function o(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function i(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===(void 0===t?"undefined":r(t))&&t.nextTick||"function"==typeof n&&n||function(e){setTimeout(e,0)};var c=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===a&&(n.splice(0,a),r=0)}}var n=[],r=0,a=1024;return function(a){n.push(a),n.length-r==1&&e(t)}}();return a.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":r(e))))try{var n=0,a=e.then;if("function"==typeof a)return void a.call(e,function(e){n++||t.resolve(e)},function(e){n++||t.reject(e)})}catch(e){return void(n||this.reject(e))}this.state=o,this.v=e,t.c&&c(function(){for(var n=0,r=t.c.length;n<r;n++)o(t.c[n],e)})}},reject:function(e){if(void 0===this.state){this.state=i,this.v=e;var t=this.c;t&&c(function(){for(var n=0,r=t.length;n<r;n++)i(t[n],e)})}},then:function(e,t){var n=new a,r={y:e,n:t,p:n};if(void 0===this.state)this.c?this.c.push(r):this.c=[r];else{var o=this.state,i=this.v;c(function(){o(r,i)})}return n}},a.resolve=function(e){if(e&&e instanceof a)return e;var t=new a;return t.resolve(e),t},a.reject=function(e){if(e&&e instanceof a)return e;var t=new a;return t.reject(e),t},a.version="2.3.3-nodent",a}}).call(t,n(8),n(9).setImmediate)},function(e,t){"use strict";function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(p===clearTimeout)return clearTimeout(e);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function i(){h&&f&&(h=!1,f.length?v=f.concat(v):m=-1,v.length&&c())}function c(){if(!h){var e=a(i);h=!0;for(var t=v.length;t;){for(f=v,v=[];++m<t;)f&&f[m].run();m=-1,t=v.length}f=null,h=!1,o(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var u,p,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(e){p=r}}();var f,v=[],h=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new s(e,t)),1!==v.length||h||a(c)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";function r(e,t){this._id=e,this._clearFn=t}var a=Function.prototype.apply;t.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(10),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){"use strict";!function(e,n){function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[s]=r,c(s),s++}function a(e){delete l[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function i(e){if(u)setTimeout(i,0,e);else{var t=l[e];if(t){u=!0;try{o(t)}finally{a(e),u=!1}}}}if(!e.setImmediate){var c,s=1,l={},u=!1,p=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){i(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},c=function(t){e.port2.postMessage(t)}}():p&&"onreadystatechange"in p.createElement("script")?function(){var e=p.documentElement;c=function(t){var n=p.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(i,0,e)}}(),d.setImmediate=r,d.clearImmediate=a}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(t,function(){return this}(),n(8))},function(e,t){"use strict";e.exports=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,a){try{var o=a?a(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));e(o)?o.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(o)}catch(e){n.reject(e)}}function n(){}function r(e){}function a(e,t){this.resolve=e,this.reject=t}function o(r,a){var o=new n;try{this._resolver(function(n){return e(n)?n.then(r,a):t(o,n,r)},function(e){t(o,e,a)})}catch(e){t(o,e,a)}return o}function i(e){this._resolver=e,this.then=o}return n.prototype={resolve:r,reject:r,then:a},i.resolve=function(e){return i.isThenable(e)?e:{then:function(t){return t(e)}}},i.isThenable=e,i}},function(e,t){(function(t){"use strict";function n(e,t,n){function a(t){var n=h,r=m;return h=m=void 0,C=t,g=e.apply(r,n)}function o(e){return C=e,b=setTimeout(u,t),O?a(e):g}function c(e){var n=e-w,r=e-C,a=t-n;return S?E(a,y-r):a}function l(e){var n=e-w,r=e-C;return void 0===w||n>=t||n<0||S&&r>=y}function u(){var e=L();if(l(e))return p(e);b=setTimeout(u,c(e))}function p(e){return b=void 0,_&&h?a(e):(h=m=void 0,g)}function d(){void 0!==b&&clearTimeout(b),C=0,h=w=m=b=void 0}function f(){return void 0===b?g:p(L())}function v(){var e=L(),n=l(e);if(h=arguments,m=this,w=e,n){if(void 0===b)return o(w);if(S)return b=setTimeout(u,t),a(w)}return void 0===b&&(b=setTimeout(u,t)),g}var h,m,y,g,b,w,C=0,O=!1,S=!1,_=!0;if("function"!=typeof e)throw new TypeError(s);return t=i(t)||0,r(n)&&(O=!!n.leading,S="maxWait"in n,y=S?k(i(n.maxWait)||0,t):y,_="trailing"in n?!!n.trailing:_),v.cancel=d,v.flush=f,v}function r(e){var t=void 0===e?"undefined":c(e);return!!e&&("object"==t||"function"==t)}function a(e){return!!e&&"object"==(void 0===e?"undefined":c(e))}function o(e){return"symbol"==(void 0===e?"undefined":c(e))||a(e)&&w.call(e)==u}function i(e){if("number"==typeof e)return e;if(o(e))return l;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(p,"");var n=f.test(e);return n||v.test(e)?h(e.slice(2),n?2:8):d.test(e)?l:+e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="Expected a function",l=NaN,u="[object Symbol]",p=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,v=/^0o[0-7]+$/i,h=parseInt,m="object"==(void 0===t?"undefined":c(t))&&t&&t.Object===Object&&t,y="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,g=m||y||Function("return this")(),b=Object.prototype,w=b.toString,k=Math.max,E=Math.min,L=function(){return g.Date.now()};e.exports=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=(function(e){e&&e.__esModule?e:{default:e}}(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=n(14),c=n(15),s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.handleSubmit,o=void 0===a?function(){}:a,c=n.searchLabel,s=void 0===c?"search":c,l=n.classNames,u=void 0===l?{}:l;r(this,e);var p=(0,i.createElement)("div",["geosearch",u.container].join(" ")),d=(0,i.createElement)("form",["",u.form].join(" "),p),f=(0,i.createElement)("input",["glass",u.input].join(" "),d);f.type="text",f.placeholder=s,f.addEventListener("input",function(e){t.onInput(e)},!1),f.addEventListener("keyup",function(e){t.onKeyUp(e)},!1),f.addEventListener("keypress",function(e){t.onKeyPress(e)},!1),f.addEventListener("focus",function(e){t.onFocus(e)},!1),f.addEventListener("blur",function(e){t.onBlur(e)},!1),this.elements={container:p,form:d,input:f},this.handleSubmit=o}return o(e,[{key:"onFocus",value:function(){(0,i.addClassName)(this.elements.form,"active")}},{key:"onBlur",value:function(){(0,i.removeClassName)(this.elements.form,"active")}},{key:"onSubmit",value:function(e){return new Promise(function(t,n){var r,a,o;return e.preventDefault(),e.stopPropagation(),r=this.elements,a=r.input,o=r.container,(0,i.removeClassName)(o,"error"),(0,i.addClassName)(o,"pending"),this.handleSubmit({query:a.value}).then(function(e){return(0,i.removeClassName)(o,"pending"),t()}.$asyncbind(this,n),n)}.$asyncbind(this))}},{key:"onInput",value:function(){var e=this.elements.container;this.hasError&&((0,i.removeClassName)(e,"error"),this.hasError=!1)}},{key:"onKeyUp",value:function(e){var t=this.elements,n=t.container,r=t.input;e.keyCode===c.ESCAPE_KEY&&((0,i.removeClassName)(n,"pending"),(0,i.removeClassName)(n,"active"),r.value="",document.body.focus(),document.body.blur())}},{key:"onKeyPress",value:function(e){e.keyCode===c.ENTER_KEY&&this.onSubmit(e)}},{key:"setQuery",value:function(e){this.elements.input.value=e}}]),e}();t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.createElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElement(e);return r.className=t,n&&n.appendChild(r),r};t.createScriptElement=function(e,t){var r=n("script",null,document.body);return r.setAttribute("type","text/javascript"),new Promise(function(n){window[t]=function(e){r.remove(),delete window[t],n(e)},r.setAttribute("src",e)})},t.addClassName=function(e,t){e&&!e.classList.contains(t)&&e.classList.add(t)},t.removeClassName=function(e,t){e&&e.classList.contains(t)&&e.classList.remove(t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.ENTER_KEY=13,r=t.ESCAPE_KEY=27,a=t.ARROW_DOWN_KEY=40,o=t.ARROW_UP_KEY=38,i=t.ARROW_LEFT_KEY=37,c=t.ARROW_RIGHT_KEY=39;t.SPECIAL_KEYS=[n,r,a,o,i,c]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(14),i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join(" ").trim()},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.handleClick,a=void 0===n?function(){}:n,c=t.classNames,l=void 0===c?{}:c;r(this,e),s.call(this),this.props={handleClick:a,classNames:l},this.selected=-1;var u=(0,o.createElement)("div",i("results",l.container)),p=(0,o.createElement)("div",i(l.item));u.addEventListener("click",this.onClick,!0),this.elements={container:u,resultItem:p}}return a(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.elements,n=t.container,r=t.resultItem;this.clear(),e.forEach(function(e,t){var a=r.cloneNode(!0);a.setAttribute("data-key",t),a.innerHTML=e.label,n.appendChild(a)}),e.length>0&&(0,o.addClassName)(n,"active"),this.results=e}},{key:"select",value:function(e){var t=this.elements.container;return Array.from(t.children).forEach(function(t,n){return n===e?(0,o.addClassName)(t,"active"):(0,o.removeClassName)(t,"active")}),this.selected=e,this.results[e]}},{key:"count",value:function(){return this.results.length}},{key:"clear",value:function(){var e=this.elements.container;for(this.selected=-1;e.lastChild;)e.removeChild(e.lastChild);(0,o.removeClassName)(e,"active")}}]),e}(),s=function(){var e=this;this.onClick=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.target,r=e.props.handleClick,a=e.elements.container;if(n.parentNode===a&&n.hasAttribute("data-key")){var o=n.getAttribute("data-key");r({result:e.results[o]})}}};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=(r(s),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(18),d=r(p),f=n(14),v=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=e.jsonp,a=this.options.params;return n+"//dev.virtualearth.net/REST/v1/Locations?"+this.getParamString(l({},a,{query:t,jsonp:r}))}},{key:"parse",value:function(e){var t=e.data;return 0===t.resourceSets.length?[]:t.resourceSets[0].resources.map(function(e){return{x:e.point.coordinates[1],y:e.point.coordinates[0],label:e.address.formattedAddress,bounds:[[e.bbox[0],e.bbox[1]],[e.bbox[2],e.bbox[3]]],raw:e}})}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o="BING_JSONP_CB_"+Date.now(),i=this.endpoint({query:r,protocol:a,jsonp:o}),(0,f.createScriptElement)(i,o).then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),t}(d.default);t.default=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=(function(e){e&&e.__esModule?e:{default:e}}(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.options=t}return o(e,[{key:"getParamString",value:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o=this.endpoint({query:r,protocol:a}),fetch(o).then(function(e){return i=e,i.json().then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=function(e){return e&&e.__esModule?e:{default:e}}(l),p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find?"+this.getParamString(c({},r,{f:"json",text:t}))}},{key:"parse",value:function(e){return e.data.locations.map(function(e){return{x:e.feature.geometry.x,y:e.feature.geometry.y,label:e.name,bounds:[[e.extent.ymin,e.extent.xmin],[e.extent.ymax,e.extent.xmax]],raw:e}})}}]),t}(u.default);t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=function(e){return e&&e.__esModule?e:{default:e}}(l),p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params,a=this.getParamString(c({},r,{address:t}));return(r&&r.key?"https:":n)+"//maps.googleapis.com/maps/api/geocode/json?"+a}},{key:"parse",value:function(e){return e.data.results.map(function(e){return{x:e.geometry.location.lng,y:e.geometry.location.lat,label:e.formatted_address,bounds:[[e.geometry.viewport.southwest.lat,e.geometry.viewport.southwest.lng],[e.geometry.viewport.northeast.lat,e.geometry.viewport.northeast.lng]],raw:e}})}}]),t}(u.default);t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=function(e){return e&&e.__esModule?e:{default:e}}(l),p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//nominatim.openstreetmap.org/search?"+this.getParamString(c({},r,{format:"json",q:t}))}},{key:"parse",value:function(e){return e.data.map(function(e){return{x:e.lon,y:e.lat,label:e.display_name,bounds:[[parseFloat(e.boundingbox[0]),parseFloat(e.boundingbox[2])],[parseFloat(e.boundingbox[1]),parseFloat(e.boundingbox[3])]],raw:e}})}}]),t}(u.default);t.default=p},function(e,t,n){"use strict";function r(){return k.filter(function(e){return e.active})}function a(e,t){k=t["layer-groups-order"],d(p(t["layer-groups-order"]),e),c(),i()}function o(){var e=window.navigator.userAgent;return e.indexOf("MSIE")>-1||e.indexOf("rv:11.0")>-1}function i(){document.getElementById("right-panel").onscroll=l}function c(){if(!o()){var e=d3.select("#right-panel-drag-overlay");e.style("cursor","ew-resize"),e.call(d3.drag().on("drag",function(){s.call(this)}))}}function s(){l(),u()}function l(){var e,t=d3.select("#right-panel"),n=t.property("offsetHeight"),r=document.getElementById("right-panel-drag-overlay"),a=document.getElementById("right-panel-header");if(t.classed("graphs-active")){var o=document.getElementById("graph-list");e=a.scrollHeight+o.scrollHeight+700}else{var i=document.getElementById("layer-list");e=a.scrollHeight+i.scrollHeight}e=e>n?e+"px":null,r.style.height=e}function u(){var e=d3.select("#right-panel"),t=+e.style("min-width").slice(0,-2),n=e.property("clientWidth"),r=document.getElementById("wrapper"),a=r.clientWidth,o=document.getElementById("map-wrapper"),i=d3.event.sourceEvent.x,c=a-i-n,s=n+c;s=s<t?t:s>a?a:s,o.style.paddingRight=s+"px",e.style("width",s+"px")}function p(e){return d3.select("#layer-list").selectAll(".layer-group-wrapper").data(e).enter().append("div").attr("class","layer-group-wrapper").attr("id",function(e){return e.id}).classed("active",function(e){return e.active}).each(function(e){d3.select(this).append("div").attr("class","layer-group-btn btn").on("click",function(e){ga("send","event",{eventCategory:"layer list",eventAction:"toggle "+!e.active,eventLabel:e.name,nonInteraction:!1}),e.active=!e.active,d3.select(this.parentNode).classed("active",function(){return e.active}),l(),(0,w.updateShareUrl)()}).text(e.name)}).append("div").attr("class","layer-group")}function d(e,t){e.selectAll(".layer-select").data(function(e){return t[e.id]}).enter().append("div").attr("class","layer-select").each(function(e){var t=(this.parentNode.parentNode.id,d3.select(this));f(e,t),v(e,t),h(e,t),t.node().appendChild(m(e))})}function f(e,t){t.append("input").attr("type","checkbox").attr("id",function(e){return e.id}).attr("checked",function(e){return e.active?"checked":null}).on("click",function(e){if((0,g.toggleLayer)(e),t.select(".layer-tools-wrapper").classed("active",e.active),e.active){var n=t.select(".opacity-slider-handle").node();(0,b.setOpacitySliderPosition)(e,n,e.opacitiy)}})}function v(e,t){t.append("div").attr("class","layer-label-wrapper").append("label").attr("for",function(e){return e.id}).attr("class","layer-label").html(function(e){return e.name})}function h(e,t){e.info&&""!==e.info&&(t.append("div").attr("class","layer-info-btn-wrapper").on("click",function(){d3.select(this.parentNode).select(".layer-info-wrapper").classed("active",function(){return ga("send","event",{eventCategory:"layer info",eventAction:"clicked",eventLabel:e.name+" "+!d3.select(this).classed("active"),nonInteraction:!1}),!d3.select(this).classed("active")})}).append("img").attr("class","layer-info-icon").attr("src","imgs/more-info-icon-64x64.png").attr("alt","Read more about the "+e.name+" layer").attr("title","Read more about the "+e.name+" layer"),t.append("div").attr("class","layer-info-wrapper").text(function(e){return e.info}))}function m(e,t){var n=document.createElement("div");n.classList.add("layer-tools-wrapper"),e.active&&n.classList.add("active");var r=(0,b.makeOpacitySlider)(e),a=y(e);return n.appendChild(a),n.appendChild(r),n}function y(e,t){var n=document.createElement("div"),r=document.createElement("img");return n.classList.add("legend-wrapper"),r.setAttribute("src",e.legend),n.appendChild(r),n}Object.defineProperty(t,"__esModule",{value:!0}),t.GetActiveLayerGroups=r,t.SetupPanel=a,t.updatePanelDragOverlayHeight=l;var g=n(23),b=n(30),w=n(25),k=[]},function(e,t,n){"use strict";function r(){return h}function a(e,t){var n,r,a,o,c,s;if(t&&0!==t.length)for(n=0;n<t.length;n++){s=!1,c=t[n];for(a in e){if(!e.hasOwnProperty(a))return;for(o=e[a],r=0;r<o.length;r++)if(o[r].id===c){i(o[r]),s=!0;break}if(s)break}}}function o(e){e.active?(l(e),ga("send","event",{eventCategory:"layer",eventAction:"toggle off",eventLabel:e.name,nonInteraction:!1})):(i(e),ga("send","event",{eventCategory:"layer",eventAction:"toggle on",eventLabel:e.name,nonInteraction:!1}))}function i(e){var t=(0,f.GetMap)();e.active=!0,e.mapLayer=e.mapLayer||d(e),t.addLayer(e.mapLayer),s(e),c(),(0,v.updateShareUrl)()}function c(){var e,t,n;for(t=0,n=m.length;t<n;t++)e=m[t],"overlay"===e.type&&e.mapLayer.bringToFront()}function s(e){h.push(e.id),m.push(e)}function l(e){var t=(0,f.GetMap)();e.active=!1,e.mapLayer&&t.hasLayer(e.mapLayer)&&t.removeLayer(e.mapLayer),u(e),(0,v.updateShareUrl)()}function u(e){var t=h.indexOf(e.id);t!==-1&&(h.splice(t,1),m.splice(t,1))}function p(e,t){e.opacity=t,e.mapLayer.setOpacity(t)}function d(e){return L.tileLayer.wms(e.url,{layers:e.id,transparent:e.transparent||!0,version:e.version||"1.3.0",crs:e.crs||L.CRS.EPSG900913,format:e.format||"image/png",opacity:e.opacity||.75,tileSize:e.tileSize||document.getElementById("map").clientWidth})}Object.defineProperty(t,"__esModule",{value:!0}),t.GetCurrentLayers=r,t.CreateDefaultLayers=a,t.toggleLayer=o,t.enableLayer=i,t.disableLayer=l,t.updateLayerOpacity=p;var f=n(24),v=n(25),h=[],m=[]},function(e,t){"use strict";function n(e){console.log(e);var t=e.id||"map",n=e.options||{scrollWheelZoom:!1},r=e.center||["38.5","-81"],o=e.zoom||6;return a=L.map(t,n).setView(r,o),L.control.attribution().addTo(a),document.getElementsByClassName("leaflet-control-zoom-in")[0].addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click button",eventLabel:"zoom in",nonInteraction:!1})}),document.getElementsByClassName("leaflet-control-zoom-out")[0].addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click button",eventLabel:"zoom out",nonInteraction:!1})}),a.on("dragend",function(e){ga("send","event",{eventCategory:"map",eventAction:"drag",eventLabel:JSON.stringify(a.getBounds()),nonInteraction:!0})}),a.on("zoomend",function(e){ga("send","event",{eventCategory:"map",eventAction:"zoom",eventLabel:JSON.stringify(a.getBounds()),nonInteraction:!0})}),a}function r(){return a}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateMap=n,t.GetMap=r;var a},function(e,t,n){"use strict";function r(e){e.on("moveend",a)}function a(e){var t=(0,Y.GetMap)();c(i([b(t),w(t),k(t),L(),E(t),C(),O(),S()])),s(),g()}function o(e){var t=_();t&&(t.center&&(e.map.center=t.center),t.zoom&&(e.map.zoom=t.zoom),t.layers&&D(t.layers,e),t.baselayers&&F(t.baselayers,e),t.pois&&U(t.pois,e),t.tab&&(e.tab=t.tab),t.graph&&(e.graph=t.graph),t.layerGroups&&(e.layerGroups=G(t.layerGroups,e)))}function i(e){return"?"+e.filter(function(e){return void 0!==e}).join("&")}function c(e){window.history&&window.history.replaceState&&window.history.replaceState({},"",e)}function s(){var e=window.location.href;document.getElementById("shareurl-link-url").setAttribute("value",e)}function l(){d3.select(document).on("click",u),d3.select(".shareurl-link a").on("click",d),d3.select(".shareurl-link-url").on("click",v),d3.select(".shareurl-link-popup-remover").on("click",f)}function u(){var e=d3.event,t=[];t=p(e.target);var n,r,a=!0;for(n=0,r=t.length;n<r;n++)if(t[n].classList.contains("shareurl-link-popup")||t[n].classList.contains("shareurl-link")){a=!1;break}if(a){m(document.getElementsByClassName("shareurl-link-popup").item(0))}}function p(e){for(var t=[];e&&e.parentNode;)t.push(e),e=e.parentNode;return t}function d(){var e=document.getElementsByClassName("shareurl-link-popup").item(0);d3.select(e).classed("active")?m(e):h(e)}function f(){m(document.getElementsByClassName("shareurl-link-popup").item(0))}function v(){y()}function h(e){e.classList.toggle("active"),y(),ga("send","event",{eventCategory:"shareurl",eventAction:"open",eventLabel:document.getElementById("shareurl-link-url").getAttribute("value"),nonInteraction:!1})}function m(e){ga("send","event",{eventCategory:"shareurl",eventAction:"close",eventLabel:document.getElementById("shareurl-link-url").getAttribute("value"),nonInteraction:!1}),e.classList.remove("active")}function y(){var e=document.getElementById("shareurl-link-url");e.focus(),e.setSelectionRange(0,e.value.length)}function g(){var e,t,n,r,a=P(window.location.href),o=document.getElementsByClassName("shareurl-social");for(n=0,r=o.length;n<r;n++)e=o[n],t=e.getAttribute("data-baseurl")+a,e.setAttribute("href",t),e.addEventListener("click",function(){ga("send","event",{eventCategory:"shareurl",eventAction:this.getAttribute("aria-label"),eventLabel:this.href,nonInteraction:!1})})}function b(e){var t=e.getCenter();return"center="+t.lat.toString()+","+t.lng.toString()}function w(e){return"zoom="+e.getZoom()}function k(e){var t=[],n={},r=(0,H.GetCurrentLayers)();e.eachLayer(function(e){var t=e.options;t&&t.layers&&(n[t.layers]=t.hasOwnProperty("opacity")?t.opacity:"1")});var a,o;for(o=0;o<r.length;o++)a=r[o],t.push(a),t.push(n[a]);return"layers="+t.join(",")}function E(e){var t=[];return e.eachLayer(function(e){e.options&&e.options.type===z.BASE_LAYER_TYPE&&t.push(e.options.id)}),"baselayers="+t.join(",")}function L(){return"layerGroups="+(0,K.GetActiveLayerGroups)().map(function(e){return e.id}).join(",")}function C(){var e=(0,$.GetAllPointsOfInterest)();if(e.length){var t="pois=";return e.forEach(function(e){t+=e.lat+","+e.lng+";"}),t}}function O(){return"tab="+d3.select(".panel-top-btn.active").attr("data-active")}function S(){return"graph="+d3.select(".graph-type-btn.active").attr("data-type")}function _(){var e=window.location.search;if(""!==e)return e=A(e),e=j(e),I(e),e}function A(e){return e=e.substring(1),e=x(e),e.split("&")}function P(e){return e.replace(/\:/g,"%3A").replace(/\;/g,"%3B").replace(/\//g,"%2F").replace(/\,/g,"%2C").replace(/\&/g,"%26")}function x(e){return e.replace(/\%2[c|C]/g,",").replace(/\%3[b|B]/g,";")}function j(e){var t,n,r={};for(n=0;n<e.length;n++)t=e[n].split("="),r[t[0]]=t[1];return r}function I(e){e.center&&(e.center=T(e.center)),e.layers&&(e.layers=M(e.layers)),e.baselayers&&(e.baselayers=B(e.baselayers)),e.pois&&(e.pois=N(e.pois)),e.layerGroups&&(e.layerGroups=R(e.layerGroups))}function T(e){return e.split(",")}function M(e){var t,n,r={enabledLayers:[],opacityVals:{}};for(e=e.split(","),n=0;n<e.length;n+=2)t=e[n],r.enabledLayers.push(t),r.opacityVals[t]=e[n+1];return r}function B(e){return e.split(",")}function N(e){return e.split(";").filter(function(e){return""!==e}).map(function(e){return e=e.split(","),{lat:e[0],lng:e[1]}})}function R(e){return e.split(",")}function G(e,t){t.layout["layer-groups-order"].forEach(function(t){t.active=e.filter(function(e){return e===t.id}).length>0})}function D(e,t){var n=e.enabledLayers;t["active-layers"]=n;var r,a,o,i,c,s,l=t.layers;for(r=0;r<n.length;r++){s=!1,c=n[r];for(o in l){if(!l.hasOwnProperty(o))return;for(i=l[o],a=0;a<i.length;a++)if(i[a].id===c){i[a].opacity=e.opacityVals[c],s=!0;break}if(s)break}}}function F(e,t){var n,r,a=t.baselayers;for(r=0;r<a.length;r++)n=a[r],n.active=e.indexOf(n.id)!==-1}function U(e,t){t.pois=e}Object.defineProperty(t,"__esModule",{value:!0}),t.BindUpdateShareUrl=r,t.updateShareUrl=a,t.AddShareSettingsToConfig=o,t.BindCopyLinkEvents=l;var Y=n(24),z=n(26),H=n(23),$=n(27),K=n(22)},function(e,t,n){"use strict";function r(e,t){t=t||[{id:"carto-light-default",url:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attributions">CARTO</a>'}],p=t;var n,r,o;for(n=0;n<t.length;n++)o=t[n],o.active&&(r=l(o),o.layer=r,r.addTo(e));a(t)}function a(e){var t=document.createElement("div");t.className="baselayer-ui";for(var n,r,a,i,c=0,s=e.length;c<s;c++)i=e[c],i.hasOwnProperty("image")&&(n=document.createElement("div"),n.setAttribute("data-layer",i.id),r=document.createElement("img"),r.setAttribute("src",i.image),r.setAttribute("alt",i.label),r.setAttribute("title",i.label),a=document.createElement("div"),a.textContent=i.label,n.appendChild(r),n.appendChild(a),n.addEventListener("click",o),d3.select(n).classed("base-selector",!0).classed("active",i.active),t.appendChild(n));document.getElementsByClassName("leaflet-bottom leaflet-left")[0].appendChild(t)}function o(e){e.stopPropagation();var t=this.getAttribute("data-layer");i(this),c(),s(t),ga("send","event",{eventCategory:"map",eventAction:"change base layer",eventLabel:t,nonInteraction:!1}),(0,f.updateShareUrl)()}function i(e){d3.select(".base-selector.active").classed("active",!1),d3.select(e).classed("active",!0)}function c(){var e=(0,d.GetMap)();e.eachLayer(function(t){t.options.type===v&&e.removeLayer(t)})}function s(e){for(var t,n=(0,d.GetMap)(),r=0,a=p.length;r<a;r++)if(t=p[r],t.id===e){t.layer||(t.layer=l(t)),t.layer.addTo(n),t.layer.bringToBack();break}}function l(e){return L.tileLayer(e.url,u(e))}function u(e){var t={};return e.id&&(t.id=e.id),e.attribution&&(t.attribution=e.attribution),e.subdomains&&(t.subdomains=e.subdomains),t.type=v,t}Object.defineProperty(t,"__esModule",{value:!0}),t.BASE_LAYER_TYPE=void 0,t.CreateBaseLayers=r;var p,d=n(24),f=n(25),v=t.BASE_LAYER_TYPE="baselayer"},function(e,t,n){"use strict";function r(){return y}function a(e,t){var n={lat:e,lng:t};return y.push(n),n}function o(e,t){i(t);var n=r(),e=(0,h.GetMap)();n.forEach(function(t){s(e,t)})}function i(e){Array.prototype.push.apply(y,e)}function c(e){y=y.filter(function(t){return!(t===e)})}function s(e,t){var n=(0,f.createGraphDiv)(t),r=(0,f.createMarker)(e,t.lat,t.lng);t.graphDiv=n,t.marker=r,r.addTo(e),(0,f.createGraphRemover)(e,n,r,t),d3.select(n).on("mouseenter",function(e){r.setIcon((0,f.getIcon)("hover"))}),d3.select(n).on("mouseleave",function(){r.setIcon((0,f.getIcon)("graph"))}),r.on("click dblclick",function(e){l(e,t)}),r.on("mouseover",function(e){r.setIcon((0,f.getIcon)("hover"))}),r.on("mouseout",function(e){r.setIcon((0,f.getIcon)("graph")),t.graphDiv.getElementsByClassName("pan-to-marker-btn")[0].classList.remove("animate")})}function l(e,t){e.originalEvent.stopPropagation(),(0,m.HandleTabChange)("graphs-active"),p(t),u(t)}function u(e){e.graphDiv.getElementsByClassName("pan-to-marker-btn")[0].classList.add("animate")}function p(e){var t=document.getElementById("right-panel");document.getElementById("right-panel-header"),document.getElementById("graph-type-header");t.scrollTop=e.graphDiv.offsetTop}function d(e,t,n){document.getElementById("graph-list").removeChild(t),e.removeLayer(n),(0,v.updateShareUrl)()}Object.defineProperty(t,"__esModule",{value:!0}),t.GetAllPointsOfInterest=r,t.AddPointOfInterestToTracker=a,t.SetupPointsOfInterest=o,t.AddMultiplePointsOfInterest=i,t.RemovePointOfInterestFromTracker=c,t.SetupPointOfInterestUI=s,t.RemovePointOfInterestUI=d;var f=n(28),v=n(25),h=n(24),m=n(29),y=[]},function(e,t,n){"use strict";function r(){d3.selectAll(".graph-type-btn").on("click",h),a(),W=d3.tip().attr("class","d3-tip").html(function(e){return e})}function a(){Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100!=0||e%400==0)},Date.prototype.getDOY=function(){var e=[0,31,59,90,120,151,181,212,243,273,304,334],t=this.getMonth(),n=this.getDate(),r=e[t]+n;return t>1&&this.isLeapYear()&&r++,r}}function o(e){e.on("click",c)}function i(e){return"hover"===e?V:Z}function c(e){var t=this,n=e.latlng.lat,r=e.latlng.lng,a=(0,z.AddPointOfInterestToTracker)(n,r);(0,z.SetupPointOfInterestUI)(t,a,V,Z),(0,$.updateShareUrl)(),ga("send","event",{eventCategory:"map",eventAction:"click",eventLabel:"add point",nonInteraction:!1})}function s(e,t,n){return L.marker([t,n],{icon:Z})}function l(e,t,n,r){var a=u();t.getElementsByClassName("graph-elem-header")[0].appendChild(a),d3.select(a).on("click",function(){ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:"remove",nonInteraction:!1}),(0,z.RemovePointOfInterestFromTracker)(r),(0,z.RemovePointOfInterestUI)(e,t,n),(0,H.updatePanelDragOverlayHeight)(),(0,$.updateShareUrl)()})}function u(){var e=document.createElement("button");return e.className="remove-graph",e.innerText=String.fromCharCode("10005"),e.setAttribute("title","Remove graph"),e}function p(e,t,n,r){r=r.replace(/\[|\]|\'/g,"").split(", "),C(r,e,t,n),(0,H.updatePanelDragOverlayHeight)()}function d(e,t,n){var r="https://fcav-ndvi.nemac.org/landdat_product.cgi?args="+t+","+e,a=(0,q.GetAjaxObject)(function(r){p(n,e,t,r)});a.open("GET",r),a.send()}function f(e){var t;for(t=0;t<e.length;t++)e[t]=e[t].split(",");return e}function v(e){var t,n,r,a,o={};for(o.keys=[],r=0;r<e.length;r++)t=e[r],n=t[0].substring(0,4),o.hasOwnProperty(n)||(o[n]=[],o.keys.push(n)),o[n].push(t);var i=[];for(r=0;r<o.keys.length;r++)n=o.keys[r],46!==o[n].length&&i.push(n);for(r=0;r<i.length;r++)n=i[r],delete o[n],o.keys.splice(o.keys.indexOf(n),1);var c,s;for(o.medians=[],r=0;r<46;r++){for(c=[],a=r;a<e.length;a+=46)c.push(e[a][1]);s=c.sort()[Math.floor(c.length/2)],o.medians.push(s)}return o}function h(){var e=this.getAttribute("data-type"),t=document.getElementsByClassName("graph-type-btn active")[0].getAttribute("data-type");e!==t&&(ga("send","event",{eventCategory:"graph type",eventAction:"click",eventLabel:e,nonInteraction:!1}),m(e))}function m(e){if(!y())var t=document.getElementsByClassName("graph-elem")[0].scrollHeight,n=document.getElementsByClassName("graph-type-info active")[0].scrollHeight,r=document.getElementById("right-panel").scrollTop;b(),w(e),y()||g(n,t,r),(0,$.updateShareUrl)()}function y(){return void 0===document.getElementsByClassName("graph-elem")[0]}function g(e,t,n){var r=document.getElementsByClassName("graph-type-info active")[0].scrollHeight,a=document.getElementsByClassName("graph-elem")[0].scrollHeight,o=a/t,i=r+(n-e)*o;document.getElementById("right-panel").scrollTop=i}function b(){var e=document.getElementsByClassName("graph-type-btn active")[0],t="graph-"+e.getAttribute("data-type");e.classList.remove("active"),document.getElementById("graph-list").classList.remove(t)}function w(e){d3.select(".graph-type-btn[data-type='"+e+"']").classed("active",!0),document.getElementById("graph-list").classList.add("graph-"+e),d3.selectAll(".graph-type-info").classed("active",function(){return e===this.id.split("-")[0]})}function k(e){var t=O(e.lat,3),n=O(e.lng,3),r=document.createElement("div"),a=document.createElement("div");r.appendChild(a);var o=E(e),i=document.createTextNode("Lat: "+t+", Long: "+n),c=document.createElement("div");return c.className="graph-lat-lon",c.appendChild(i),a.appendChild(o),a.appendChild(c),r.classList.add("graph-elem"),a.classList.add("graph-elem-header"),d(e.lat,e.lng,r),r}function E(e){var t=document.createElement("button");return t.classList.add("btn"),t.classList.add("pan-to-marker-btn"),t.textContent="Show On Map",t.onclick=function(e,t){(0,K.GetMap)().panTo([e.lat,e.lng]),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:'{"show on map":{"lat":'+e.lat+',"long":'+e.lng+"}}",nonInteraction:!1})}.bind(t,e),t}function C(e,t,n,r){e=f(e);var a=v(e);S(e,t,a.medians),_(a,t,n,r),A(a,t,n,r),document.getElementById("graph-list").appendChild(t)}function O(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function S(e,t,n){var r={top:30,right:20,bottom:30,left:29},a=580-r.left-r.right,o=270-r.top-r.bottom,i=d3.scaleTime().range([0,a]).domain([G(e[0][0]),G(e[e.length-1][0])]),c=d3.scaleLinear().range([o,0]).domain([0,100]),s=d3.axisBottom(i).ticks(16).tickFormat(function(e){return e.getFullYear()}),l=d3.axisLeft(c).ticks(6),u=d3.line().x(function(e){return i(G(e[0]))}).y(function(e){return c(e[1])}),p=d3.select(t).append("div").classed("timeseries-graph",!0),d=p.append("svg").attr("height",o+r.top+r.bottom).attr("viewBox",function(){return"0 0 "+(a+r.left+r.right)+" "+(o+r.top+r.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+r.left+","+r.top+")");d.call(W),j(e,u,d),d.append("g").attr("class","x axis").attr("transform","translate(0,"+o+")").call(s),d.append("g").attr("class","y axis").call(l),T(e,u,d,n)}function _(e,t,n,r){function a(e){return X[(e-15)/30]}var o={},i={top:30,right:20,bottom:30,left:29},c=500-i.left-i.right,s=270-i.top-i.bottom,l=e.medians,u=d3.scaleLinear().range([0,c]).domain([0,365]),p=d3.scaleLinear().range([s,0]).domain([0,100]),d=d3.axisBottom(u).ticks(11).tickValues([15,45,75,105,135,165,195,225,255,285,315,345]).tickFormat(a),f=d3.axisLeft(p).ticks(6),v=d3.line().x(function(e,t){return u(Array.isArray(e)?D(e[0]):8*t+3)}).y(function(e){return p(Array.isArray(e)?e[1]:e)}),h=d3.select(t).append("div").classed("overlapping-graph",!0),m=h.append("svg").attr("viewBox",function(){return"0 0 "+(c+i.left+i.right)+" "+(s+i.top+i.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+i.left+","+i.top+")");m.call(W),m.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(d),m.append("g").attr("class","y axis").call(f),o.medians={path:j(e.medians,v,m)},o[2015]={path:j(e[2015],v,m)},o.medians.points=T(e.medians,v,m,l),o[2015].points=T(e[2015],v,m,l);var y=h.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){N(y,t,"timeseries","2015",o,e,v,m,l,n,r)}),N(y,"medians","timeseries","medians",o,e,v,m,l,n,r)}function A(e,t,n,r){var a=Math.min(490,490)/2-30,o=e.medians,i=P(e),c=x(o,i[1][0]),s=d3.scaleLinear().domain([0,100]).range([0,a]),l=d3.radialLine().radius(function(e){return s(Array.isArray(e)?e[1]:e)}).angle(function(e,t){return((Array.isArray(e)?D(e[0]):8*t+3)-1)%365/365*(2*Math.PI)}),u=d3.select(t).append("div").classed("polar-graph",!0),p=u.append("svg").attr("viewBox",function(){return"0 0 490 490"}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate(245,245)");p.call(W);var d=p.append("g").attr("class","r axis").selectAll("g").data(s.ticks(5).slice(1)).enter().append("g");d.append("circle").attr("r",s),d.append("text").attr("y",function(e){return-s(e)-4}).attr("transform","rotate(15)").style("text-anchor","middle").text(function(e){return e});var f=p.append("g").attr("class","a axis").selectAll("g").data(d3.range(0,360,30)).enter().append("g").attr("transform",function(e){return"rotate("+(e-90)+")"});f.append("line").attr("x2",a),f.append("text").attr("x",a+6).attr("dy",".35em").style("text-anchor",function(e){return e<360&&e>180?"end":null}).attr("transform",function(e){return e<360&&e>180?"rotate(180 "+(a+6)+",0)":null}).text(function(e){return X[e/30]});var v=p.append("g").selectAll("g").data(c).enter().append("g").attr("transform",function(e){return"rotate("+(e.data[1][0]-90)+")"});v.append("line").attr("class","line").attr("x2",a),v.append("text").attr("x",function(e){var t=e.data[1][0];return t<360&&t>180?a+30:a-30}).attr("y",function(e){return e.data[1][0]%365/365*(2*Math.PI)+6}).attr("dy",".35em").style("text-anchor",function(e){var t=e.data[1][0];return t<360&&t>180?"middle":null}).attr("transform",function(e){var t=e.data[1][0];return t<360&&t>180?"rotate(180 "+(a+6)+",0)":null}).text(function(e){return e.label});var h=i[1][0];I([[h,100],[(h+182.5)%365,100]],l,p).classed("growing-season-line","true"),I(i,l,p).classed("center-line","true"),p.selectAll("point").data([i[1]]).enter().append("circle").attr("class","center").attr("transform",function(e){return"translate("+l([e]).slice(1).slice(0,-1)+")"}).attr("stroke","#000").attr("fill","#ea0c48").on("mouseover",function(e){W.show("Center: "+String(e[1]).substring(0,7)),this.classList.add("active")}).on("mouseout",function(e){W.hide(),this.classList.remove("active")});var m={};m.medians={path:I(o,l,p)},m[2015]={path:I(e[2015],l,p)},m.medians.points=T(o,l,p,o),m[2015].points=T(e[2015],l,p,o);var y=u.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){var a=y.append("div");a.append("input").attr("type","checkbox").attr("id","polar-"+t+n.toString().replace(".","")+"-"+r.toString().replace(".","")).attr("value",t).property("checked","2015"===t).on("change",function(t){var n=this.value;this.checked?(m.hasOwnProperty(n)||(m[n]={}),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:n+" polar timeseries on",nonInteraction:!1}),m[n].path=I(e[n],l,p),m[n].points=T(e[n],l,p,o)):(m[n].path.remove(),m[n].points.remove(),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:n+" polar timeseries off",nonInteraction:!1}))}),a.append("label").text(t).attr("for","polar-"+t+n.toString().replace(".","")+"-"+r.toString().replace(".","")),a.append("div").style("background",R("medians"!==t?t:0)).classed("graph-pip-example",!0)});var g=y.append("div");g.append("input").attr("type","checkbox").attr("id","polar-average-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")).attr("value","medians").property("checked",!0).on("change",function(t){var n=this.value;this.checked?(m.hasOwnProperty(n)||(m[n]={}),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:n+" polar timeseries on",nonInteraction:!1}),m[n].path=I(e[n],l,p),m[n].points=T(e[n],l,p,o)):(m[n].path.remove(),m[n].points.remove(),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:n+" polar timeseries off",nonInteraction:!1}))}),g.append("label").text("Baseline").attr("for","polar-average-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")),g.append("div").style("background",R(0)).classed("graph-pip-example",!0);var b=y.append("div").classed("threshold-checkbox",!0);b.append("input").attr("type","checkbox").attr("id","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")).property("checked",!0).on("change",function(e){v.style("opacity",this.checked?1:0);var t=this.checked?"off":"on";ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:"threshold polar timeseries "+t,nonInteraction:!1})}),b.append("label").text("Thresholds").attr("for","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".",""))}function P(e){var t,n,r,a,o,i=0,c=0;for(r=46,t=0;t<e.keys.length;t++)if(a=e[e.keys[t]],a.length===r){for(o=0,n=0;n<r/2;n++)o+=a[n][1]-a[n+23][1];o/=23,i+=o}else c++;i=Math.abs(i)/(e.keys.length-c);var s,l,u,p,d,f=1e6,v=0,h=e.medians;for(t=0;t<r/2;t++){for(l=0,u=0,d=0;d<r/2;d++)n=(t+d)%46,p=(n+23)%46,l+=parseInt(h[n],10),u+=parseInt(h[p],10);s=Math.abs(l-u),s<f&&(f=s,v=t)}var m=parseInt(h[v],10),y=parseInt(-h[v+23],10),g=Math.abs(i-m)-Math.abs(i-y);return Math.abs(-i-m)-Math.abs(-i-y)>g&&(v+=23),[[0,0],[8*v+3,i]]}function x(e,t){var n=Math.floor((t-3)/8);n>22&&(n-=23);var r,a,o,i=0;for(o=46,r=0;r<o;r++)a=(n+r)%o,i+=parseInt(e[a],10);var c,s,l=.15*i,u=.8*i,p=!1,d=!1;for(i=0,r=0;r<o;r++)a=(n+r)%o,i+=parseInt(e[a],10),!p&&i>l?(c=a,p=!0):!d&&i>u&&(s=a,d=!0);var f=[0,0];return[{label:"15%",data:[f,[8*c+3,100]]},{label:"80%",data:[f,[8*s+3,100]]}]}function j(e,t,n){return n.append("path").attr("class","line").attr("d",t(e))}function I(e,t,n){return n.append("path").datum(e).attr("class","line").attr("d",t)}function T(e,t,n,r){return n.selectAll("point").data(e).enter().append("circle").attr("class","point").attr("transform",function(e,n){return"translate("+t([Array.isArray(e)?e:[8*n+3,e]]).slice(1).slice(0,-1)+")"}).attr("stroke","#000").attr("fill",function(e,t){return R(Array.isArray(e)?e[0].substring(0,4):0)}).on("mouseover",M).on("mouseout",B)}function M(e){var t=Array.isArray(e)?F(e[0])+": "+e[1]:"Average: "+e;W.show(t),this.classList.add("active")}function B(e){W.hide(),this.classList.remove("active");var t=document.getElementsByClassName("graph-type-btn active")[0].getAttribute("data-type");ga("send","event",{eventCategory:"graph",eventAction:"hover",eventLabel:t+" tool tip",nonInteraction:!1})}function N(e,t,n,r,a,o,i,c,s,l,u){var p=e.append("div");p.append("input").attr("type","checkbox").attr("id",n+"-"+t+l.toString().replace(".","")+"-"+u.toString().replace(".","")).attr("value",t).property("checked",t===r).on("change",function(e){var t=this.value;this.checked?(a.hasOwnProperty(t)||(a[t]={}),a[t].path=j(o[t],i,c),a[t].points=T(o[t],i,c,s),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:t+" overlapping timeseries on",nonInteraction:!1})):(a[t].path.remove(),a[t].points.remove(),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:t+" overlapping timeseries off",nonInteraction:!1}))}),p.append("label").text(t).attr("for",n+"-"+t+l.toString().replace(".","")+"-"+u.toString().replace(".","")),p.append("div").style("background",R("medians"!==t?t:0)).classed("graph-pip-example",!0)}function R(e){var t=["#ffe476","#036593","#116c91","#1e7390","#2c7b8e","#39828c","#4c8c8a","#5e9589","#719f87","#83a886","#95b183","#a6ba80","#b8c37c","#cacc79","#d6d279","#e2d779","#efdd78","#fbe378"];return 0===e?"#fff":t[parseInt(e,10)%t.length]}function G(e){e=e.toString();var t=e.substring(0,4),n=parseInt(e.substring(4,6),10)-1,r=e.substring(6,8);return new Date(t,n,r)}function D(e){return"string"==typeof e?(e=G(e),e.getDOY()):e}function F(e){return"Average"===e?e:(e=G(e),U(e.getMonth())+" "+Y(e.getDate())+", "+e.getFullYear())}function U(e){switch(e){case 0:return"Jan.";case 1:return"Feb.";case 2:return"Mar.";case 3:return"Apr.";case 4:return"May";case 5:return"Jun.";case 6:return"Jul.";case 7:return"Aug.";case 8:return"Sep.";case 9:return"Oct.";case 10:return"Nov.";case 11:return"Dec."}}function Y(e){var t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"}Object.defineProperty(t,"__esModule",{value:!0}),t.SetupGraphs=r,t.BindGraphEvents=o,t.getIcon=i,t.createMarker=s,t.createGraphRemover=l,t.HandleGraphTabChange=m,t.createGraphDiv=k;var z=n(27),H=n(22),$=n(25),K=n(24),q=n(2),W={},J=L.Icon.extend({}),Z=new J({iconUrl:"imgs/blue_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),V=new J({iconUrl:"imgs/orange_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),X={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"}},function(e,t,n){"use strict";function r(){d3.selectAll(".panel-top-btn").on("click",o)}function a(){return document.getElementsByClassName("panel-top-btn active")[0].getAttribute("data-active")}function o(){this.classList.contains("active")||(ga("send","event",{eventCategory:"tab",eventAction:"click",eventLabel:this.getAttribute("data-active"),nonInteraction:!1}),i(this.getAttribute("data-active")))}function i(e){s(),c(e),(0,d.updateShareUrl)()}function c(e){d3.select(".panel-top-btn[data-active='"+e+"']").classed("active",!0),d3.selectAll("#map-wrapper, #right-panel").classed(e,!0),d3.select(".panel-section-wrapper[data-active='"+e+"']").classed("active",!0),l(),u(),(0,p.updatePanelDragOverlayHeight)()}function s(){var e=d3.select(".panel-top-btn.active").attr("data-active");d3.selectAll("#map-wrapper, #right-panel").classed(e,!1),d3.selectAll(".panel-top-btn.active, .panel-section-wrapper.active").classed("active",!1)}function l(){var e=document.getElementById("right-panel").offsetWidth;document.getElementById("map-wrapper").style.paddingRight=e+"px"}function u(){var e=document.getElementById("right-panel"),t=e.style.width;if(t){var n=d3.select(e).style("min-width").slice(0,-2);parseInt(t.slice(0,-2),10)>parseInt(n,10)||(e.style.width="")}}Object.defineProperty(t,"__esModule",{value:!0}),t.BindTabEvents=r,t.GetActiveTab=a,t.HandleTabChange=i;var p=n(22),d=n(25)},function(e,t,n){"use strict";function r(e,t,n){n=n||e.opacity,t.style.top=p(n)+"px"}function a(e){var t=void 0!==e.opacity?e.opacity:1,n=document.createElement("div"),r=i(e,t),a=o("closed",e,r);return n.classList.add("opacity-slider-wrapper"),n.appendChild(r),n.appendChild(a),n}function o(e,t,n){var a=document.createElement("div"),o=document.createElement("img");return a.classList.add("opacity-icon-wrapper"),o.classList.add("opacity-icon"),o.classList.add(e),o.setAttribute("src","imgs/opacity-icon-"+e+"-64x64.png"),o.setAttribute("alt","Use this slider to adjust transparency for the "+t.name+" layer"),o.setAttribute("title","Use this slider to adjust transparency for the "+t.name+" layer"),a.appendChild(o),a.onclick=function(e){var a=n.getElementsByClassName("opacity-slider-handle")[0];(0,u.updateLayerOpacity)(t,0),r(t,a,0)},a}function i(e,t){var n=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div");return n.classList.add("opacity-slider-track-overlay"),a.classList.add("opacity-slider-track"),o.classList.add("opacity-slider-handle"),n.appendChild(a),n.append(o),e.active&&r(e,o),c(n,e,t),n}function c(e,t,n){d3.select(e).call(d3.drag().on("start drag",function(){var n=e.getElementsByClassName("opacity-slider-handle")[0],a=s(e);(0,u.updateLayerOpacity)(t,a),r(t,n,a)}).on("end",function(){var n=s(e);ga("send","event",{eventCategory:"opacity slider",eventAction:"change",eventLabel:'{"'+t.name+'": "'+n+'"}',nonInteraction:!1}),(0,l.updateShareUrl)()}))}function s(e){var t=d3.mouse(e)[1];return p.invert(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.setOpacitySliderPosition=r,t.makeOpacitySlider=a;var l=n(25),u=n(23),p=d3.scaleLinear().domain([1,0]).range([0,90]).clamp(!0)},function(e,t){"use strict";function n(e){if(e.image){var t=r(),n=a(e),i=e.link?o(e.link):null;i?(i.appendChild(n),t.appendChild(i)):t.appendChild(n);var c=document.getElementsByClassName(e.location)[0],s=c.firstChild;c.insertBefore(t,s)}}function r(){var e=document.createElement("div");return d3.select(e).classed("project-logo",!0),e}function a(e){var t=document.createElement("img");return t.setAttribute("src",e.image),e.label&&(t.setAttribute("alt",e.label),t.setAttribute("title",e.label)),t}function o(e){var t=document.createElement("a");return t.setAttribute("href",e),t.setAttribute("target","_blank"),t.addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click",eventLabel:"landat logo",nonInteraction:!1})}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXhfYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBhMjk3ZDg5ZWMyNzYyZjljMWMzNiIsIndlYnBhY2s6Ly8vLi9qcy9iYXNlLmpzIiwid2VicGFjazovLy8uL2pzL3BhcnNlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvbGVhZmxldENvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ub2RlbnQtcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovLy8uL34vbm9kZW50LXJ1bnRpbWUvem91c2FuLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L34vc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L25vZGVudC1ydW50aW1lL3RoZW5hYmxlRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL34vbG9kYXNoLmRlYm91bmNlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3NlYXJjaEVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvZG9tVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Jlc3VsdExpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2JpbmdQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvcHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2VzcmlQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL29wZW5TdHJlZXRNYXBQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9wYW5lbC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9sYXllci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tYXAuanMiLCJ3ZWJwYWNrOi8vLy4vanMvc2hhcmUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvYmFzZWxheWVyLmpzIiwid2VicGFjazovLy8uL2pzL3BvaS5qcyIsIndlYnBhY2s6Ly8vLi9qcy9ncmFwaC5qcyIsIndlYnBhY2s6Ly8vLi9qcy90YWJzLmpzIiwid2VicGFjazovLy8uL2pzL29wYWNpdHlTbGlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vanMvbG9nby5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX3BhcnNlciIsIl9zZWFyY2giLCJfc2VhcmNoMiIsIl9wYW5lbCIsIl9iYXNlbGF5ZXIiLCJfZ3JhcGgiLCJfdGFicyIsIl9tYXAiLCJfc2hhcmUiLCJfbGF5ZXIiLCJfbG9nbyIsIl9sb2dvMiIsIl9wb2kiLCJCYXNlIiwiY29uZmlnIiwiUGFyc2VDb25maWciLCJjYWxsYmFjayIsIlNldHVwR3JhcGhzIiwiQmluZFRhYkV2ZW50cyIsIkJpbmRDb3B5TGlua0V2ZW50cyIsImRhdGEiLCJBZGRTaGFyZVNldHRpbmdzVG9Db25maWciLCJtYXAiLCJDcmVhdGVNYXAiLCJDcmVhdGVCYXNlTGF5ZXJzIiwiYmFzZWxheWVycyIsIkNyZWF0ZURlZmF1bHRMYXllcnMiLCJsYXllcnMiLCJTZXR1cFBhbmVsIiwibGF5b3V0IiwibG9nbyIsInRhYiIsIkhhbmRsZVRhYkNoYW5nZSIsImdyYXBoIiwiSGFuZGxlR3JhcGhUYWJDaGFuZ2UiLCJCaW5kR3JhcGhFdmVudHMiLCJCaW5kVXBkYXRlU2hhcmVVcmwiLCJTZXR1cFBvaW50c09mSW50ZXJlc3QiLCJwb2lzIiwidXBkYXRlU2hhcmVVcmwiLCJ3aW5kb3ciLCJjb25maWdGaWxlIiwiR2V0Q29uZmlnIiwiR2V0QWpheE9iamVjdCIsInJlc3BvbnNlSGFuZGxlciIsInhtbGh0dHAiLCJYTUxIdHRwUmVxdWVzdCIsIkFjdGl2ZVhPYmplY3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwicmVzcG9uc2UiLCJvcGVuIiwic2VuZCIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwicGFyc2UiLCJmb3JtYXRNYXAiLCJmb3JtYXRMYXllcnMiLCJsYXllcmdyb3VwIiwiaSIsImRlZmF1bHRNYXBzZXJ2ZXJVcmwiLCJtYXBzZXJ2ZXJVcmwiLCJwcm9wIiwiaGFzT3duUHJvcGVydHkiLCJsZW5ndGgiLCJzZXRNYXBzZXJ2ZXJVcmwiLCJzZXREZWZhdWx0TGF5ZXJPcGFjaXR5IiwiZGVmYXVsdExheWVyT3BhY2l0eSIsImxheWVyIiwib3BhY2l0eSIsInVybCIsIkNyZWF0ZVNlYXJjaCIsInByb3ZpZGVyIiwiX2xlYWZsZXRHZW9zZWFyY2giLCJPcGVuU3RyZWV0TWFwUHJvdmlkZXIiLCJzZWFyY2hDb250cm9sIiwiR2VvU2VhcmNoQ29udHJvbCIsInNob3dNYXJrZXIiLCJhdXRvQ29tcGxldGUiLCJzaG93UG9wdXAiLCJhZGRDb250cm9sIiwic2VhcmNoRWxlbWVudHMiLCJzZWFyY2hFbGVtZW50IiwiZWxlbWVudHMiLCJMIiwiRG9tRXZlbnQiLCJvbiIsImNvbnRhaW5lciIsImV2Iiwic3RvcFByb3BhZ2F0aW9uIiwic2VhcmNoRW50cmllcyIsImZvcm0iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY2hpbGRyZW4iLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJnYSIsImV2ZW50Q2F0ZWdvcnkiLCJldmVudEFjdGlvbiIsImV2ZW50TGFiZWwiLCJub25JbnRlcmFjdGlvbiIsIndoaWNoIiwia2V5Q29kZSIsIl9sZWFmbGV0Q29udHJvbCIsImVudW1lcmFibGUiLCJnZXQiLCJfc2VhcmNoRWxlbWVudCIsIl9iaW5nUHJvdmlkZXIiLCJfZXNyaVByb3ZpZGVyIiwiX2dvb2dsZVByb3ZpZGVyIiwiX29wZW5TdHJlZXRNYXBQcm92aWRlciIsIl9wcm92aWRlciIsIkxlYWZsZXRDb250cm9sIiwiQ29udHJvbCIsImV4dGVuZCIsIkVycm9yIiwiTENvbnRyb2wiLCJfbGVuIiwiYXJndW1lbnRzIiwib3B0aW9ucyIsIkFycmF5IiwiX2tleSIsIkZ1bmN0aW9uIiwicHJvdG90eXBlIiwiYmluZCIsImFwcGx5IiwiY29uY2F0IiwiX25vZGVudFJ1bnRpbWUiLCJfZXh0ZW5kcyIsImFzc2lnbiIsInNvdXJjZSIsImtleSIsIl9sb2Rhc2giLCJfbG9kYXNoMiIsIl9zZWFyY2hFbGVtZW50MiIsIl9yZXN1bHRMaXN0IiwiX3Jlc3VsdExpc3QyIiwiX2RvbVV0aWxzIiwiX2NvbnN0YW50cyIsImRlZmF1bHRPcHRpb25zIiwicG9zaXRpb24iLCJzdHlsZSIsIm1hcmtlciIsImljb24iLCJJY29uIiwiRGVmYXVsdCIsImRyYWdnYWJsZSIsIm1heE1hcmtlcnMiLCJyZXRhaW5ab29tTGV2ZWwiLCJhbmltYXRlWm9vbSIsInNlYXJjaExhYmVsIiwibm90Rm91bmRNZXNzYWdlIiwibWVzc2FnZUhpZGVEZWxheSIsInpvb21MZXZlbCIsImNsYXNzTmFtZXMiLCJidXR0b24iLCJtc2dib3giLCJpbnB1dCIsImF1dG9Db21wbGV0ZURlbGF5IiwiaW5pdGlhbGl6ZSIsIl90aGlzIiwidGhpcyIsIm1hcmtlcnMiLCJGZWF0dXJlR3JvdXAiLCJfb3B0aW9ucyIsImhhbmRsZVN1Ym1pdCIsInF1ZXJ5Iiwib25TdWJtaXQiLCJfc2VhcmNoRWxlbWVudCRlbGVtZW4iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImNyZWF0ZUVsZW1lbnQiLCJ0aXRsZSIsImhyZWYiLCJvbkNsaWNrIiwicmVzdWx0TGlzdCIsImhhbmRsZUNsaWNrIiwiX3JlZiIsInJlc3VsdCIsImxhYmVsIiwiYXBwZW5kQ2hpbGQiLCJhdXRvU2VhcmNoIiwic2VsZWN0UmVzdWx0IiwiY2xlYXJSZXN1bHRzIiwib25BZGQiLCJfb3B0aW9uczIiLCJhZGRUbyIsInJvb3QiLCJnZXRDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwib25SZW1vdmUiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiX3NlYXJjaEVsZW1lbnQkZWxlbWVuMiIsImNvbnRhaW5zIiwicmVtb3ZlQ2xhc3NOYW1lIiwiYWRkQ2xhc3NOYW1lIiwiZm9jdXMiLCJBUlJPV19ET1dOX0tFWSIsIkFSUk9XX1VQX0tFWSIsImluY2x1ZGVzIiwibGlzdCIsIm1heCIsImNvdW50IiwibmV4dCIsImNvZGUiLCJzZWxlY3RlZCIsImlkeCIsIml0ZW0iLCJzZWxlY3QiLCJFU0NBUEVfS0VZIiwiY2xlYXIiLCJQcm9taXNlIiwiJHJldHVybiIsIiRlcnJvciIsInJlc3VsdHMiLCJTUEVDSUFMX0tFWVMiLCJzZWFyY2giLCJ0aGVuIiwiJGF3YWl0XzEiLCJyZW5kZXIiLCIkYXN5bmNiaW5kIiwiJGF3YWl0XzIiLCJzaG93UmVzdWx0Iiwia2V5cyIsIl9sYXllcnMiLCJyZW1vdmVMYXllciIsImFkZE1hcmtlciIsImNlbnRlck1hcCIsImZpcmVFdmVudCIsImxvY2F0aW9uIiwiX29wdGlvbnMzIiwiTWFya2VyIiwieSIsIngiLCJiaW5kUG9wdXAiLCJhZGRMYXllciIsIm9wZW5Qb3B1cCIsIl9vcHRpb25zNCIsInJlc3VsdEJvdW5kcyIsIkxhdExuZ0JvdW5kcyIsImJvdW5kcyIsImlzVmFsaWQiLCJnZXRCb3VuZHMiLCJmaXRCb3VuZHMiLCJhbmltYXRlIiwic2V0VmlldyIsImdldENlbnRlciIsImdldFpvb20iLCJfb3B0aW9uczUiLCIkYXN5bmNzcGF3biIsInByb21pc2VQcm92aWRlciIsInNlbGYiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImdlbkYiLCJyZXNvbHZlIiwicmVqZWN0Iiwic3RlcCIsImZuIiwiYXJnIiwiZ2VuIiwiZG9uZSIsInYiLCJ0aHJvdyIsInNyYyIsInRvU3RyaW5nIiwidCIsImFyZ3MiLCJtYXRjaCIsInJlIiwibXgiLCJleGVjIiwicHVzaCIsInJldmVyc2UiLCJmb3JFYWNoIiwic2xpY2UiLCJpbmRleCIsInN1YnN0ciIsInJlcGxhY2UiLCJ6b3VzYW4iLCJ0aGVuYWJsZSIsImNhdGNoZXIiLCJib3VuZFRoZW4iLCJyZXNvbHZlciIsInRyYW1wb2xpbmUiLCJzIiwidSIsImIiLCJxIiwidW5kZWZpbmVkIiwicG9wIiwiciIsIkxhenlUaGVuYWJsZSIsIkVhZ2VyVGhlbmFibGUiLCJUaGVuYWJsZSIsIkVhZ2VyVGhlbmFibGVGYWN0b3J5IiwiZXgiLCJwcm9jZXNzIiwic2V0SW1tZWRpYXRlIiwiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJ0aWNrIiwiWm91c2FuIiwiZnVuYyIsIm1lIiwiU1RBVEVfRlVMRklMTEVEIiwieXJldCIsImVyciIsIlNUQVRFX1JFSkVDVEVEIiwicmVhc29uIiwibiIsIm5leHRUaWNrIiwiZiIsInNldFRpbWVvdXQiLCJzb29uIiwiY2FsbFF1ZXVlIiwiZnEiLCJmcVN0YXJ0IiwiYnVmZmVyU2l6ZSIsInNwbGljZSIsInN0YXRlIiwiVHlwZUVycm9yIiwiZmlyc3QiLCJyYSIsInJyIiwibCIsImNsaWVudHMiLCJvbkYiLCJvblIiLCJjbGllbnQiLCJhIiwidmFsIiwieiIsInZlcnNpb24iLCJkZWZhdWx0U2V0VGltb3V0IiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJjYWNoZWRTZXRUaW1lb3V0IiwicnVuQ2xlYXJUaW1lb3V0IiwiY2FjaGVkQ2xlYXJUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiY2xlYW5VcE5leHRUaWNrIiwiZHJhaW5pbmciLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsInF1ZXVlSW5kZXgiLCJkcmFpblF1ZXVlIiwidGltZW91dCIsImxlbiIsInJ1biIsIkl0ZW0iLCJhcnJheSIsIm5vb3AiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb25zIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwiYmluZGluZyIsIm5hbWUiLCJjd2QiLCJjaGRpciIsImRpciIsInVtYXNrIiwiVGltZW91dCIsImNsZWFyRm4iLCJfaWQiLCJfY2xlYXJGbiIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImNsb3NlIiwidW5yZWYiLCJyZWYiLCJlbnJvbGwiLCJtc2VjcyIsIl9pZGxlVGltZW91dElkIiwiX2lkbGVUaW1lb3V0IiwidW5lbnJvbGwiLCJfdW5yZWZBY3RpdmUiLCJhY3RpdmUiLCJfb25UaW1lb3V0IiwiY2xlYXJJbW1lZGlhdGUiLCJnbG9iYWwiLCJ0YXNrIiwidGFza3NCeUhhbmRsZSIsIm5leHRIYW5kbGUiLCJyZWdpc3RlckltbWVkaWF0ZSIsImhhbmRsZSIsInJ1bklmUHJlc2VudCIsImN1cnJlbnRseVJ1bm5pbmdBVGFzayIsImRvYyIsImRvY3VtZW50IiwiYXR0YWNoVG8iLCJnZXRQcm90b3R5cGVPZiIsInBvc3RNZXNzYWdlIiwiaW1wb3J0U2NyaXB0cyIsInBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMiLCJvbGRPbk1lc3NhZ2UiLCJvbm1lc3NhZ2UiLCJtZXNzYWdlUHJlZml4IiwiTWF0aCIsInJhbmRvbSIsIm9uR2xvYmFsTWVzc2FnZSIsImluZGV4T2YiLCJhdHRhY2hFdmVudCIsIk1lc3NhZ2VDaGFubmVsIiwiY2hhbm5lbCIsInBvcnQxIiwicG9ydDIiLCJodG1sIiwiZG9jdW1lbnRFbGVtZW50Iiwic2NyaXB0IiwicmVtb3ZlQ2hpbGQiLCJpc1RoZW5hYmxlIiwicmVzb2x1dGlvbiIsImhvdyIsIkNoYWluZWQiLCJfdW5jaGFpbmVkIiwidGhlbkNoYWluIiwicmVzIiwicmVqIiwiY2hhaW4iLCJfcmVzb2x2ZXIiLCJkZWJvdW5jZSIsIndhaXQiLCJpbnZva2VGdW5jIiwidGltZSIsImxhc3RBcmdzIiwidGhpc0FyZyIsImxhc3RUaGlzIiwibGFzdEludm9rZVRpbWUiLCJsZWFkaW5nRWRnZSIsInRpbWVySWQiLCJ0aW1lckV4cGlyZWQiLCJsZWFkaW5nIiwicmVtYWluaW5nV2FpdCIsInRpbWVTaW5jZUxhc3RDYWxsIiwibGFzdENhbGxUaW1lIiwidGltZVNpbmNlTGFzdEludm9rZSIsIm1heGluZyIsIm5hdGl2ZU1pbiIsIm1heFdhaXQiLCJzaG91bGRJbnZva2UiLCJub3ciLCJ0cmFpbGluZ0VkZ2UiLCJ0cmFpbGluZyIsImNhbmNlbCIsImZsdXNoIiwiZGVib3VuY2VkIiwiaXNJbnZva2luZyIsIkZVTkNfRVJST1JfVEVYVCIsInRvTnVtYmVyIiwiaXNPYmplY3QiLCJuYXRpdmVNYXgiLCJ0eXBlIiwiaXNPYmplY3RMaWtlIiwiaXNTeW1ib2wiLCJvYmplY3RUb1N0cmluZyIsInN5bWJvbFRhZyIsIk5BTiIsIm90aGVyIiwidmFsdWVPZiIsInJlVHJpbSIsImlzQmluYXJ5IiwicmVJc0JpbmFyeSIsInRlc3QiLCJyZUlzT2N0YWwiLCJmcmVlUGFyc2VJbnQiLCJyZUlzQmFkSGV4IiwicGFyc2VJbnQiLCJmcmVlR2xvYmFsIiwiZnJlZVNlbGYiLCJvYmplY3RQcm90byIsIm1pbiIsIkRhdGUiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInByb3BzIiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIlNlYXJjaEVsZW1lbnQiLCJfcmVmJGhhbmRsZVN1Ym1pdCIsIl9yZWYkc2VhcmNoTGFiZWwiLCJfcmVmJGNsYXNzTmFtZXMiLCJqb2luIiwicGxhY2Vob2xkZXIiLCJvbklucHV0Iiwib25LZXlVcCIsIm9uS2V5UHJlc3MiLCJvbkZvY3VzIiwib25CbHVyIiwiX2VsZW1lbnRzIiwiaGFzRXJyb3IiLCJfZWxlbWVudHMyIiwiYm9keSIsImJsdXIiLCJFTlRFUl9LRVkiLCJlbGVtZW50IiwicGFyZW50IiwiZWwiLCJjbGFzc05hbWUiLCJjcmVhdGVTY3JpcHRFbGVtZW50IiwiY2IiLCJzZXRBdHRyaWJ1dGUiLCJqc29uIiwiYWRkIiwiQVJST1dfTEVGVF9LRVkiLCJBUlJPV19SSUdIVF9LRVkiLCJjeCIsImNsYXNzbmFtZXMiLCJ0cmltIiwiUmVzdWx0TGlzdCIsIl9yZWYkaGFuZGxlQ2xpY2siLCJfaW5pdGlhbGlzZVByb3BzIiwicmVzdWx0SXRlbSIsImNoaWxkIiwiY2xvbmVOb2RlIiwiaW5uZXJIVE1MIiwiZnJvbSIsImxhc3RDaGlsZCIsIl9yZWYyIiwicGFyZW50Tm9kZSIsImhhc0F0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJjcmVhdGUiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIl9wcm92aWRlcjIiLCJQcm92aWRlciIsIl9CYXNlUHJvdmlkZXIiLCJwcm90b2NvbCIsImpzb25wIiwicGFyYW1zIiwiZ2V0UGFyYW1TdHJpbmciLCJyZXNvdXJjZVNldHMiLCJyZXNvdXJjZXMiLCJwb2ludCIsImNvb3JkaW5hdGVzIiwiYWRkcmVzcyIsImZvcm1hdHRlZEFkZHJlc3MiLCJiYm94IiwicmF3IiwiX3JlZjMiLCJlbmRwb2ludCIsImVuY29kZVVSSUNvbXBvbmVudCIsInJlcXVlc3QiLCJmZXRjaCIsInRleHQiLCJsb2NhdGlvbnMiLCJmZWF0dXJlIiwiZ2VvbWV0cnkiLCJleHRlbnQiLCJ5bWluIiwieG1pbiIsInltYXgiLCJ4bWF4IiwicGFyYW1TdHJpbmciLCJsbmciLCJsYXQiLCJmb3JtYXR0ZWRfYWRkcmVzcyIsInZpZXdwb3J0Iiwic291dGh3ZXN0Iiwibm9ydGhlYXN0IiwiZm9ybWF0IiwibG9uIiwiZGlzcGxheV9uYW1lIiwicGFyc2VGbG9hdCIsImJvdW5kaW5nYm94IiwiR2V0QWN0aXZlTGF5ZXJHcm91cHMiLCJsYXllckdyb3VwTGF5b3V0IiwiZmlsdGVyIiwibGF5ZXJHcm91cCIsIm1ha2VMYXllckVsZW1zIiwibWFrZUxheWVyR3JvdXBzIiwibWFrZVBhbmVsRHJhZ2dhYmxlIiwic2V0UGFuZWxTY3JvbGxIYW5kbGVyIiwiYnJvd3NlcklzSW50ZXJuZXRFeHBsb3JlciIsInVhIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJvbnNjcm9sbCIsInVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQiLCJvdmVybGF5IiwiZDMiLCJkcmFnIiwicGFuZWxEcmFnRXZlbnRIYW5kbGVyIiwidXBkYXRlUGFuZWxXaWR0aCIsIm5ld0hlaWdodCIsInBhbmVsIiwicGFuZWxPZmZzZXRIZWlnaHQiLCJwcm9wZXJ0eSIsInBhbmVsRHJhZ092ZXJsYXkiLCJoZWFkZXIiLCJjbGFzc2VkIiwiZ3JhcGhMaXN0Iiwic2Nyb2xsSGVpZ2h0IiwibGF5ZXJMaXN0IiwiaGVpZ2h0IiwicGFuZWxNaW5XaWR0aCIsInBhbmVsQ2xpZW50V2lkdGgiLCJ3cmFwcGVyIiwid3JhcHBlcldpZHRoIiwiY2xpZW50V2lkdGgiLCJtYXBXcmFwcGVyIiwibW91c2VYIiwic291cmNlRXZlbnQiLCJ4RGVsdGEiLCJuZXdQYW5lbFdpZHRoIiwicGFkZGluZ1JpZ2h0Iiwic2VsZWN0QWxsIiwiZW50ZXIiLCJhcHBlbmQiLCJhdHRyIiwiZWFjaCIsImxheWVyR3JvdXBzIiwibGF5ZXJEaXYiLCJtYWtlQ2hlY2tib3giLCJtYWtlTGFiZWwiLCJtYWtlRGVzY3JpcHRpb24iLCJub2RlIiwibWFrZUxheWVyVG9vbHMiLCJ0b2dnbGVMYXllciIsInNsaWRlckhhbmRsZSIsIl9vcGFjaXR5U2xpZGVyIiwic2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uIiwib3BhY2l0aXkiLCJpbmZvIiwibGF5ZXJUb29sc0RpdiIsIm9wYWNpdHlTbGlkZXIiLCJtYWtlT3BhY2l0eVNsaWRlciIsImxlZ2VuZCIsIm1ha2VMZWdlbmQiLCJsYXllclRvb2xzV3JhcHBlciIsImxlZ2VuZFdyYXBwZXIiLCJsZWdlbmRJbWciLCJHZXRDdXJyZW50TGF5ZXJzIiwiX2N1cnJlbnRfbGF5ZXJzIiwiZGVmYXVsdExheWVycyIsImoiLCJkZWZhdWx0TGF5ZXIiLCJmb3VuZExheWVyIiwiZW5hYmxlTGF5ZXIiLCJkaXNhYmxlTGF5ZXIiLCJHZXRNYXAiLCJtYXBMYXllciIsIm1ha2VXbXNUaWxlTGF5ZXIiLCJhZGRMYXllclRvSW50ZXJuYWxUcmFja2VyIiwibW92ZU92ZXJsYXlMYXllcnNUb1RvcCIsIl9jdXJyZW50X2xheWVyc19vYmplY3RzIiwiYnJpbmdUb0Zyb250IiwiaGFzTGF5ZXIiLCJyZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIiLCJsb2MiLCJ1cGRhdGVMYXllck9wYWNpdHkiLCJuZXdPcGFjaXR5Iiwic2V0T3BhY2l0eSIsInRpbGVMYXllciIsIndtcyIsInRyYW5zcGFyZW50IiwiY3JzIiwiQ1JTIiwiRVBTRzkwMDkxMyIsInRpbGVTaXplIiwibWFwQ29uZmlnIiwic2Nyb2xsV2hlZWxab29tIiwiaW5pdGlhbENlbnRlciIsImNlbnRlciIsImluaXRpYWxab29tIiwiem9vbSIsImNvbnRyb2wiLCJhdHRyaWJ1dGlvbiIsInN0cmluZ2lmeSIsInNldFNoYXJlVXJsIiwibWFrZVNoYXJlVXJsIiwibWFrZUNlbnRlclN0cmluZyIsIm1ha2Vab29tU3RyaW5nIiwibWFrZUxheWVyU3RyaW5nIiwibWFrZUxheWVyR3JvdXBzU3RyaW5nIiwibWFrZUJhc2VMYXllclN0cmluZyIsIm1ha2VQb2ludHNPZkludGVyZXN0U3RyaW5nIiwibWFrZUFjdGl2ZVRhYlN0cmluZyIsIm1ha2VBY3RpdmVHcmFwaFRhYlN0cmluZyIsInNldENvcHlMaW5rVXJsIiwic2V0U29jaWFsVXJscyIsInNoYXJlIiwicGFyc2VTaGFyZVVybCIsImFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyIsImFkZEJhc2VMYXllclNldHRpbmdzVG9Db25maWciLCJhZGRQb2ludHNPZkludGVyZXN0VG9Db25maWciLCJhZGRMYXllckdyb3VwU2V0dGluZ3NUb0NvbmZpZyIsImhpc3RvcnkiLCJyZXBsYWNlU3RhdGUiLCJoYW5kbGVCb2R5Q2xpY2siLCJoYW5kbGVTaGFyZUxpbmtCdXR0b25DbGljayIsImhhbmRsZVNoYXJlTGlua1VybENsaWNrIiwiaGFuZGxlU2hhcmVMaW5rQ2xvc2VCdXR0b25DbGljayIsIm5vZGVQYXRoIiwiZ2V0RG9tUGF0aCIsInRvQ2xvc2VQb3B1cCIsImhhbmRsZUNvcHlMaW5rQ2xvc2UiLCJwYXRoIiwic2hhcmVQb3B1cCIsImhhbmRsZUNvcHlMaW5rT3BlbiIsInNlbGVjdENvcHlMaW5rVXJsIiwidG9nZ2xlIiwic2hhcmVJbnB1dCIsInNldFNlbGVjdGlvblJhbmdlIiwic29jaWFsTGluayIsIm5ld1VybCIsIm1hbmdsZVBhcmFtU3RyaW5nIiwic29jaWFsTGlua3MiLCJvcGFjaXR5VmFscyIsImN1cnJlbnRMYXllcnMiLCJlYWNoTGF5ZXIiLCJjdXJyZW50TGF5ZXIiLCJCQVNFX0xBWUVSX1RZUEUiLCJkIiwiR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCIsInBvaVN0cmluZyIsInBvaSIsImdldFBhcmFtc0FycmF5IiwibWFrZUtleWVkUGFyYW1zT2JqZWN0IiwiZm9ybWF0UGFyYW1zIiwic3Vic3RyaW5nIiwidW5tYW5nbGVQYXJhbVN0cmluZyIsInNwbGl0IiwicGFyYW1zQXJyIiwicGFyYW1QYWlyIiwicGFyc2VkUGFyYW1zIiwiZm9ybWF0Q2VudGVyUGFyYW0iLCJmb3JtYXRMYXllclBhcmFtIiwiZm9ybWF0QmFzZUxheWVyUGFyYW0iLCJmb3JtYXRQb2ludHNPZkludGVyZXN0UGFyYW0iLCJmb3JtYXRMYXllckdyb3Vwc1BhcmFtIiwibGF5ZXJJZCIsImZvcm1hdHRlZExheWVycyIsImVuYWJsZWRMYXllcnMiLCJzdHIiLCJsYXllckdyb3VwU2V0dGluZ3MiLCJhY3RpdmVMYXllckdyb3VwSWRzIiwic2hhcmVMYXllclNldHRpbmdzIiwiZW5hYmxlZExheWVyIiwic2hhcmVCYXNlTGF5ZXJTZXR0aW5ncyIsImJhc2VsYXllciIsImxheWVyQ29uZmlnIiwiX2Jhc2VsYXllcnMiLCJiYXNlTGF5ZXIiLCJjcmVhdGVCYXNlTGF5ZXIiLCJjcmVhdGVCYXNlTGF5ZXJVSSIsImJhc2VVSSIsImJhc2VXcmFwcGVyIiwiYmFzZUltZyIsImJhc2VMYWJlbCIsImltYWdlIiwidGV4dENvbnRlbnQiLCJoYW5kbGVCYXNlQ2xpY2siLCJsYXllcmlkIiwidG9nZ2xlQWN0aXZlQmFzZVVJIiwicmVtb3ZlQ3VycmVudEJhc2VMYXllciIsImFkZE5ld0Jhc2VMYXllclRvTWFwIiwiYmFzZVVJRWxlbSIsImJyaW5nVG9CYWNrIiwibWFrZUJhc2VMYXllck9wdGlvbnMiLCJzdWJkb21haW5zIiwiX3BvaW50c19vZl9pbnRlcmVzdCIsIkFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlciIsIm5ld1BvaXMiLCJBZGRNdWx0aXBsZVBvaW50c09mSW50ZXJlc3QiLCJTZXR1cFBvaW50T2ZJbnRlcmVzdFVJIiwiUmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXIiLCJwb2lUb1JlbW92ZSIsImRpdiIsImNyZWF0ZUdyYXBoRGl2IiwiY3JlYXRlTWFya2VyIiwiZ3JhcGhEaXYiLCJjcmVhdGVHcmFwaFJlbW92ZXIiLCJzZXRJY29uIiwiZ2V0SWNvbiIsImhhbmRsZU1hcmtlck1vdXNlRXZlbnQiLCJvcmlnaW5hbEV2ZW50Iiwic2Nyb2xsVG9Qb2ludE9mSW50ZXJlc3RHcmFwaCIsInRyaWdnZXJHcmFwaEFuaW1hdGlvbiIsInJpZ2h0UGFuZWwiLCJzY3JvbGxUb3AiLCJvZmZzZXRUb3AiLCJSZW1vdmVQb2ludE9mSW50ZXJlc3RVSSIsImhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrIiwiZXh0ZW5kRGF0ZU1vZHVsZSIsInRpcCIsImlzTGVhcFllYXIiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJnZXRET1kiLCJkYXlDb3VudCIsIm1uIiwiZ2V0TW9udGgiLCJkbiIsImdldERhdGUiLCJkYXlPZlllYXIiLCJoYW5kbGVNYXBDbGljayIsImhvdmVySWNvbiIsImdyYXBoSWNvbiIsImxhdGxuZyIsImVsZW0iLCJjcmVhdGVHcmFwaFJlbW92ZXJFbGVtIiwiaW5uZXJUZXh0IiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiaGFuZGxlR3JhcGhEYXRhUmVzcG9uc2UiLCJkcmF3R3JhcGgiLCJnZXREYXRhIiwib1JlcSIsInNwbGl0RGF0YSIsInJlcHJvY2Vzc0RhdGEiLCJvcmlnZGF0YSIsImtleXNUb0JlRGVsZXRlZCIsImRhdGFGb3JNZWRpYW5zIiwibWVkaWFuIiwic29ydCIsImZsb29yIiwiYWN0aXZlVHlwZSIsImdyYXBoVHlwZSIsImlzR3JhcGhMaXN0RW1wdHkiLCJvbGRBY3RpdmVHcmFwaEVsZW1IZWlnaHQiLCJvbGRBY3RpdmVHcmFwaEluZm9IZWlnaHQiLCJyaWdodFBhbmVsU2Nyb2xsVG9wIiwiZGlzYWJsZUFjdGl2ZUdyYXBoVGFiIiwiZW5hYmxlR3JhcGhUYWIiLCJhZGp1c3RTY3JvbGxQb3NpdGlvbiIsIm9sZEdyYXBoSW5mb0hlaWdodCIsIm9sZEdyYXBoRWxlbUhlaWdodCIsIm9sZFJpZ2h0UGFuZWxTY3JvbGxUb3AiLCJuZXdHcmFwaEluZm9IZWlnaHQiLCJuZXdHcmFwaEVsZW1IZWlnaHQiLCJuZXdHcmFwaEVsZW1IZWlnaHRTY2FsZSIsIm5ld1JpZ2h0UGFuZWxTY3JvbGxUb3AiLCJhY3RpdmVFbGVtIiwiYWN0aXZlQ2xhc3MiLCJsYXRTaG9ydCIsInJvdW5kRmxvYXQiLCJsbmdTaG9ydCIsInpvb21Ub01hcmtlckJ1dHRvbiIsIm1ha2Vab29tVG9NYXBNYXJrZXJCdXR0b24iLCJjb250ZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJjb250ZW50RGl2Iiwib25jbGljayIsInBhblRvIiwicmVwcm9jZXNzZWREYXRhIiwibWFrZVVwRG93bkxpbmVHcmFwaCIsIm1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMiLCJkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMiLCJudW1iZXIiLCJkZWNpbWFsUGxhY2VzIiwicm91bmQiLCJwb3ciLCJhdmVyYWdlcyIsIm1hcmdpbiIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCIsIndpZHRoIiwic2NhbGVUaW1lIiwicmFuZ2UiLCJkb21haW4iLCJwYXJzZURhdGUiLCJzY2FsZUxpbmVhciIsInhBeGlzIiwiYXhpc0JvdHRvbSIsInRpY2tzIiwidGlja0Zvcm1hdCIsInlBeGlzIiwiYXhpc0xlZnQiLCJ2YWx1ZWxpbmUiLCJsaW5lIiwic3ZnIiwiZHJhd0xpbmVhclBhdGgiLCJkcmF3TGluZWFyUG9pbnRzIiwiZm9ybWF0TW9udGhUaWNrIiwiTU9OVEhfTEFCRUxTIiwiY2hhcnRzIiwibWVkaWFucyIsInRpY2tWYWx1ZXMiLCJpc0FycmF5IiwicGFyc2VKdWxpYW5EYXkiLCJpbnB1dHdyYXBwZXIiLCJjcmVhdGVDaGVja2JveCIsInJhZGl1cyIsImZpbmRQb2xhckNlbnRlciIsInRocmVzaG9sZHMiLCJmaW5kUG9sYXJUaHJlc2hvbGRzIiwicmFkaWFsTGluZSIsImFuZ2xlIiwiUEkiLCJnciIsImdhX2EiLCJ0aHJlc2hvbGRFbGVtIiwiZGF5IiwiY2VudGVyRGF5IiwiZHJhd1BvbGFyUGF0aCIsInNob3ciLCJoaWRlIiwicG9pbnRzIiwiY2hlY2tib3hXcmFwcGVyIiwibmV3WWVhciIsImNoZWNrZWQiLCJwdWxsRGlzdGluY3RDb2xvciIsInRocmVzaG9sZENoZWNrYm94Iiwib2Zmb24iLCJhcnIiLCJzdW0iLCJ0b3RhbFN1bSIsImluY29tcGxldGVZZWFycyIsImFicyIsImNoZWNrRGlmZiIsImxlZnRBcmVhIiwicmlnaHRBcmVhIiwiayIsImNvdW50ZXIiLCJhcmVhRGlmZiIsImFyZWFJbmRleCIsImF2Z3MiLCJmaXJzdFJhZGl1cyIsInNlY29uZFJhZGl1cyIsImZpcnN0RGlmZiIsInN0YXJ0RGF5Iiwic3RhcnRJbmRleCIsImZpZnRlZW5JbmRleCIsImVpZ2h0eUluZGV4IiwiZmlmdGVlblRocmVzaG9sZCIsImVpZ2h0eVRocmVzaG9sZCIsImZpZnRlZW5JbmRleEZvdW5kIiwiZWlnaHR5SW5kZXhGb3VuZCIsImNpcmNsZUNlbnRlciIsImRhdHVtIiwiaGFuZGxlUG9pbnRNb3VzZW92ZXIiLCJoYW5kbGVQb2ludE1vdXNlb3V0IiwidGlwU3RyaW5nIiwiZm9ybWF0RGF0ZSIsImNvbG9yUmFtcCIsImRhdGUiLCJtb250aCIsImZvcm1hdE1vbnRoIiwib3JkaW5hbF9zdWZmaXhfb2YiLCJiYXNlSWNvbiIsImljb25VcmwiLCJzaGFkb3dVcmwiLCJpY29uU2l6ZSIsImljb25BbmNob3IiLCJwb3B1cEFuY2hvciIsInNoYWRvd1NpemUiLCIwIiwiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5IiwiMTAiLCIxMSIsImhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrIiwiR2V0QWN0aXZlVGFiIiwibmV3Q2xhc3MiLCJkaXNhYmxlQWN0aXZlVGFiIiwiZW5hYmxlVGFiIiwidG9nZ2xlTWFwUGFkZGluZyIsInJlc2V0UGFuZWxXaWR0aCIsIm9mZnNldFdpZHRoIiwib3BhY2l0eVNjYWxlIiwibGF5ZXJPcGFjaXR5Iiwic2xpZGVyVHJhY2tPdmVybGF5IiwibWFrZVNsaWRlclRyYWNrIiwiaWNvbldyYXBwZXJDbG9zZWQiLCJtYWtlT3BhY2l0eUljb25XcmFwcGVyIiwidHJhY2siLCJzZXREcmFnRXZlbnRMaXN0ZW5lciIsImNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zIiwieVBvcyIsIm1vdXNlIiwiaW52ZXJ0IiwiY2xhbXAiLCJDcmVhdGVMb2dvIiwibG9nb2RhdGEiLCJsb2dvV3JhcHBlciIsImNyZWF0ZUxvZ29XcmFwcGVyIiwibG9nb0ltYWdlIiwiY3JlYXRlTG9nb0ltYWdlIiwibG9nb0xpbmsiLCJsaW5rIiwiY3JlYXRlTG9nb0xpbmsiLCJpbnNlcnRFbGVtZW50IiwiZXhpc3RpbmdDaGlsZCIsImZpcnN0Q2hpbGQiLCJpbnNlcnRCZWZvcmUiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FFLFdBQ0FFLEdBQUFKLEVBQ0FLLFFBQUEsRUFVQSxPQU5BUCxHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBNEJBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLEdBR0FWLEVBQUEsS0RNTSxTQUFTSSxFQUFRRCxFQUFTSCxHQUUvQkksRUFBT0QsUUFBVUgsRUFBb0IsSUFLaEMsU0FBU0ksRUFBUUQsRUFBU0gsR0FFL0IsWUFnQ0EsU0FBU1csR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsR0E5QnZGRyxPQUFPQyxlQUFlYixFQUFTLGNBQzNCYyxPQUFPLEdFeERjLElBQUFDLEdBQUFsQixFQUFBLEdBQ0RtQixFQUFBbkIsRUFBQSxH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QyxPQTlDQTNwQixHeUJoakdLK0QsRUFBRS9ELElBQUluQyxFQUFJc0ksR0FBUytILFFBQVFzYixFQUNqQ0UsR3pCZ2pHQzNsQixFeUJoakdDNmxCLFFBQVFDLGNBQWN2ZixNQUV4QnRLLEdBQW9CNFgsU0FBU3JULHVCQUF1QiwyQkFFcEQsR0FBYzhFLGlCQUFpQixRQUFTLFd6QmtqR25DekUsR3lCaGpHQSxPQUFRLFN6QmlqR0pDLGN5Qi9pR0wsTXpCZ2pHS0MsWXlCL2lHTCxlekJnakdLQyxXeUIvaUdMLFV6QmdqR0tDLGdCeUI5aUdSLE1BRW9CNFMsU0FBU3JULHVCQUF1Qiw0QkFFckQsR0FBZThFLGlCQUFpQixRQUFTLFd6QmtqR3BDekUsR3lCaGpHQSxPQUFRLFN6QmlqR0pDLGN5Qi9pR0wsTXpCZ2pHS0MsWXlCL2lHTCxlekJnakdLQyxXeUIvaUdMLFd6QmdqR0tDLGdCeUI5aUdSLE16QmtqR0FoRixFeUJoakdHaUUsR0FBRyxVQUFXLFNBQVNxRixHekJrakd0QjFFLEd5QmhqR0EsT0FBUSxTekJpakdKQyxjeUIvaUdMLE16QmdqR0tDLFl5Qi9pR0wsT3pCZ2pHS0MsV3lCaGpHTzlDLEtBQUs2bkIsVUFBVTlwQixFQUMzQitOLGF6QmdqR0svSSxnQnlCOWlHUixNekJrakdBaEYsRXlCaGpHR2lFLEdBQUcsVUFBVyxTQUFTcUYsR3pCa2pHdEIxRSxHeUJoakdBLE9BQVEsU3pCaWpHSkMsY3lCL2lHTCxNekJnakdLQyxZeUIvaUdMLE96QmdqR0tDLFd5QmhqR085QyxLQUFLNm5CLFVBQVU5cEIsRUFDM0IrTixhekJnakdLL0ksZ0J5QjlpR1IsTUFFSmhGLEVBRU0sUUFBQWtvQixLekJpakdGLE15Qi9pR0psb0IsR3pCKytGQXpCLE9BQU9DLGVBQWViLEVBQVMsY0FDM0JjLE9BQU8sSUFFWGQsRXlCNWlHZXNDLFl6QjZpR2Z0QyxFeUJyL0ZldXFCLFFBMURoQixJQUVBbG9CLEl6QjhtR00sU0FBU3BDLEVBQVFELEVBQVNILEdBRS9CLFkwQjVtR00sU0FBQXNELEdBQTZCZCxHMUJpb0cvQkEsRTBC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eTVKS0MsV2dDeDVKTCxjaEN5NUpLQyxnQmdDdjVKUixNQUdKODRCLEVoQ3cxSkF2L0IsT0FBT0MsZUFBZWIsRUFBUyxjQUMzQmMsT0FBTyxJQUVYZCxFQUFRVyxRQUFVay9CLEdBa0ViLFNBQVM1L0IsRUFBUUQiLCJmaWxlIjoiaW5kZXhfYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX3BhcnNlciA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX3NlYXJjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHR2YXIgX3NlYXJjaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2gpO1xuXHRcblx0dmFyIF9wYW5lbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0dmFyIF9iYXNlbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0XG5cdHZhciBfZ3JhcGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0XG5cdHZhciBfdGFicyA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciBfbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0XG5cdHZhciBfbG9nbyA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXHRcblx0dmFyIF9sb2dvMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvZ28pO1xuXHRcblx0dmFyIF9wb2kgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHR2YXIgY3NzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdFxuXHQvLyBEb2VzIG5vdCByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcblx0dmFyIEJhc2UgPSBmdW5jdGlvbiBCYXNlKGNvbmZpZykge1xuXHQgICAgKDAsIF9wYXJzZXIuUGFyc2VDb25maWcpKGNvbmZpZywgY2FsbGJhY2spO1xuXHQgICAgKDAsIF9ncmFwaC5TZXR1cEdyYXBocykoKTtcblx0ICAgICgwLCBfdGFicy5CaW5kVGFiRXZlbnRzKSgpO1xuXHQgICAgKDAsIF9zaGFyZS5CaW5kQ29weUxpbmtFdmVudHMpKCk7XG5cdH07XG5cdFxuXHQvLyBEb2VzIHJlbHkgb24gbWFwIG9iamVjdCBvciBjb25maWcgZmlsZVxuXHR2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjayhkYXRhKSB7XG5cdCAgICAoMCwgX3NoYXJlLkFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZykoZGF0YSk7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuQ3JlYXRlTWFwKShkYXRhLm1hcCk7XG5cdCAgICAoMCwgX2Jhc2VsYXllci5DcmVhdGVCYXNlTGF5ZXJzKShtYXAsIGRhdGEuYmFzZWxheWVycyk7XG5cdCAgICAoMCwgX2xheWVyLkNyZWF0ZURlZmF1bHRMYXllcnMpKGRhdGEubGF5ZXJzLCBkYXRhW1wiYWN0aXZlLWxheWVyc1wiXSk7XG5cdCAgICAoMCwgX3BhbmVsLlNldHVwUGFuZWwpKGRhdGEubGF5ZXJzLCBkYXRhLmxheW91dCk7XG5cdCAgICAoMCwgX3NlYXJjaDIuZGVmYXVsdCkobWFwKTtcblx0ICAgICgwLCBfbG9nbzIuZGVmYXVsdCkoZGF0YS5sb2dvKTtcblx0ICAgIGlmIChkYXRhLnRhYikgKDAsIF90YWJzLkhhbmRsZVRhYkNoYW5nZSkoZGF0YS50YWIpO1xuXHQgICAgaWYgKGRhdGEuZ3JhcGgpICgwLCBfZ3JhcGguSGFuZGxlR3JhcGhUYWJDaGFuZ2UpKGRhdGEuZ3JhcGgpO1xuXHQgICAgKDAsIF9ncmFwaC5CaW5kR3JhcGhFdmVudHMpKG1hcCk7XG5cdCAgICAoMCwgX3NoYXJlLkJpbmRVcGRhdGVTaGFyZVVybCkobWFwKTtcblx0ICAgICgwLCBfcG9pLlNldHVwUG9pbnRzT2ZJbnRlcmVzdCkobWFwLCBkYXRhLnBvaXMpO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fTtcblx0XG5cdHdpbmRvdy5CYXNlID0gQmFzZTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHsgQmFzZTogQmFzZSB9O1xuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLlBhcnNlQ29uZmlnID0gUGFyc2VDb25maWc7XG5cdGV4cG9ydHMuR2V0QWpheE9iamVjdCA9IEdldEFqYXhPYmplY3Q7XG5cdC8qKlxyXG5cdCAqIFBhcnNlcyBhIGNvbmZpZyBmaWxlLiBTaW5jZSB0aGUgcHJvY2VzcyB0byBnZXQgZXh0ZXJuYWwgZmlsZXNcclxuXHQgKiB1c2VzIEFKQVggeW91IG5lZWQgdG8gcGFzcyBhIGNhbGxiYWNrIHRvIGhhbmRsZSB0aGUgbmV4dCBzdGVwc1xyXG5cdCAqIG9mIHVzaW5nIHRoZSBjb25maWcgZmlsZSwgc2luY2Ugd2UgZG8gbm90IGtub3cgaG93IGxvbmcgaXRcclxuXHQgKiB3aWxsIHRha2UgdG8gZ3JhYiB0aGUgZmlsZS5cclxuXHQgKi9cblx0ZnVuY3Rpb24gUGFyc2VDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcblx0ICAgIEdldENvbmZpZyhjb25maWdGaWxlLCBjYWxsYmFjayk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEdldEFqYXhPYmplY3QocmVzcG9uc2VIYW5kbGVyKSB7XG5cdCAgICB2YXIgeG1saHR0cDtcblx0ICAgIGlmICghd2luZG93LlhNTEh0dHBSZXF1ZXN0ICYmIHdpbmRvdy5BY3RpdmVYT2JqZWN0KSB7XG5cdCAgICAgICAgeG1saHR0cCA9IG5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdChcIk1TWE1MMi5YTUxIVFRQLjMuMFwiKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHQgICAgfVxuXHQgICAgeG1saHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHhtbGh0dHAucmVhZHlTdGF0ZSA9PT0gNCkge1xuXHQgICAgICAgICAgICByZXNwb25zZUhhbmRsZXIoeG1saHR0cC5yZXNwb25zZSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHJldHVybiB4bWxodHRwO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBHZXRDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcblx0ICAgIHZhciB4bWxodHRwID0gR2V0QWpheE9iamVjdChmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0ICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlSGFuZGxlcihyZXNwb25zZSk7XG5cdCAgICAgICAgY2FsbGJhY2soZGF0YSk7XG5cdCAgICB9KTtcblx0ICAgIHhtbGh0dHAub3BlbihcIkdFVFwiLCBjb25maWdGaWxlLCB0cnVlKTtcblx0ICAgIHhtbGh0dHAuc2VuZCgpO1xuXHQgICAgY29uc29sZS5sb2coXCJoaVwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVzcG9uc2VIYW5kbGVyKHJlc3BvbnNlKSB7XG5cdCAgICByZXNwb25zZSA9IEpTT04ucGFyc2UocmVzcG9uc2UpO1xuXHQgICAgZm9ybWF0TWFwKHJlc3BvbnNlKTtcblx0ICAgIGZvcm1hdExheWVycyhyZXNwb25zZSk7XG5cdCAgICByZXR1cm4gcmVzcG9uc2U7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdE1hcChkYXRhKSB7XG5cdCAgICBpZiAoIWRhdGEubWFwKSBkYXRhLm1hcCA9IHt9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRMYXllcnMoZGF0YSkge1xuXHQgICAgdmFyIGxheWVycyA9IGRhdGEubGF5ZXJzO1xuXHQgICAgdmFyIGRlZmF1bHRNYXBzZXJ2ZXJVcmwgPSBkYXRhLm1hcHNlcnZlclVybDtcblx0ICAgIHZhciBkZWZhdWx0RW5hYmxlZExheWVycyA9IGRhdGFbXCJhY3RpdmUtbGF5ZXJzXCJdO1xuXHQgICAgdmFyIGxheWVyZ3JvdXA7XG5cdCAgICB2YXIgaTtcblx0XG5cdCAgICBmb3IgKHZhciBwcm9wIGluIGxheWVycykge1xuXHQgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG5cdCAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGF5ZXJncm91cC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBzZXRNYXBzZXJ2ZXJVcmwobGF5ZXJncm91cFtpXSwgZGVmYXVsdE1hcHNlcnZlclVybCk7XG5cdCAgICAgICAgICAgIHNldERlZmF1bHRMYXllck9wYWNpdHkobGF5ZXJncm91cFtpXSwgZGF0YS5kZWZhdWx0TGF5ZXJPcGFjaXR5KTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldERlZmF1bHRMYXllck9wYWNpdHkobGF5ZXIsIG9wYWNpdHkpIHtcblx0ICAgIGxheWVyLm9wYWNpdHkgPSBsYXllci5vcGFjaXR5IHx8IG9wYWNpdHk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldE1hcHNlcnZlclVybChsYXllciwgdXJsKSB7XG5cdCAgICBsYXllci51cmwgPSBsYXllci51cmwgfHwgdXJsO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBDcmVhdGVTZWFyY2g7XG5cdFxuXHR2YXIgX2xlYWZsZXRHZW9zZWFyY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0ZnVuY3Rpb24gQ3JlYXRlU2VhcmNoKG1hcCkge1xuXHQgICAgdmFyIHByb3ZpZGVyID0gbmV3IF9sZWFmbGV0R2Vvc2VhcmNoLk9wZW5TdHJlZXRNYXBQcm92aWRlcigpO1xuXHRcblx0ICAgIHZhciBzZWFyY2hDb250cm9sID0gbmV3IF9sZWFmbGV0R2Vvc2VhcmNoLkdlb1NlYXJjaENvbnRyb2woe1xuXHQgICAgICAgIHByb3ZpZGVyOiBwcm92aWRlcixcblx0ICAgICAgICBzaG93TWFya2VyOiBmYWxzZSxcblx0ICAgICAgICBhdXRvQ29tcGxldGU6IHRydWUsXG5cdCAgICAgICAgc2hvd1BvcHVwOiBmYWxzZVxuXHQgICAgfSk7XG5cdFxuXHQgICAgbWFwLmFkZENvbnRyb2woc2VhcmNoQ29udHJvbCk7XG5cdFxuXHQgICAgdmFyIHNlYXJjaEVsZW1lbnRzID0gc2VhcmNoQ29udHJvbC5zZWFyY2hFbGVtZW50LmVsZW1lbnRzO1xuXHRcblx0ICAgIEwuRG9tRXZlbnQub24oc2VhcmNoRWxlbWVudHMuY29udGFpbmVyLCBcImNsaWNrXCIsIGZ1bmN0aW9uIChldikge1xuXHQgICAgICAgIEwuRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKGV2KTtcblx0XG5cdCAgICAgICAgdmFyIHNlYXJjaEVudHJpZXMgPSBzZWFyY2hFbGVtZW50cy5mb3JtLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Jlc3VsdHMnKVswXS5jaGlsZHJlbjtcblx0XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWFyY2hFbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGlmIChldi50YXJnZXQgPT09IHNlYXJjaEVudHJpZXNbaV0pIHtcblx0ICAgICAgICAgICAgICAgIHNlYXJjaEVsZW1lbnRzLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIHNlYXJjaCBieSBhZGRyZXNzXG5cdCAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuXHQgICAgICAgICAgICBldmVudEFjdGlvbjogJ3NlYXJjaCcsXG5cdCAgICAgICAgICAgIGV2ZW50TGFiZWw6ICdjbGljaycsXG5cdCAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgIH0pO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgTC5Eb21FdmVudC5vbihzZWFyY2hFbGVtZW50cy5jb250YWluZXIsIFwia2V5ZG93blwiLCBmdW5jdGlvbiAoZXYpIHtcblx0ICAgICAgICBMLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbihldik7XG5cdFxuXHQgICAgICAgIGlmIChldi53aGljaCA9PSAxMyB8fCBldi5rZXlDb2RlID09IDEzKSB7XG5cdCAgICAgICAgICAgIHNlYXJjaEVsZW1lbnRzLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblx0XG5cdCAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBzZWFjcmNoIGJ5IGFkZHJlc3Ncblx0ICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcblx0ICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnc2VhcmNoIGFkZHJlc3MnLFxuXHQgICAgICAgICAgICAgICAgZXZlbnRMYWJlbDogZXYudGFyZ2V0LnZhbHVlLFxuXHQgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbGVhZmxldENvbnRyb2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdHZW9TZWFyY2hDb250cm9sJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGVhZmxldENvbnRyb2wpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfc2VhcmNoRWxlbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdTZWFyY2hFbGVtZW50Jywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoRWxlbWVudCkuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9iaW5nUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnQmluZ1Byb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmluZ1Byb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX2VzcmlQcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdFc3JpUHJvdmlkZXInLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lc3JpUHJvdmlkZXIpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfZ29vZ2xlUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnR29vZ2xlUHJvdmlkZXInLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nb29nbGVQcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9vcGVuU3RyZWV0TWFwUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnT3BlblN0cmVldE1hcFByb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb3BlblN0cmVldE1hcFByb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1Byb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfXJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBMZWFmbGV0Q29udHJvbDtcblx0XG5cdHZhciBfbG9kYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHR2YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXHRcblx0dmFyIF9zZWFyY2hFbGVtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHR2YXIgX3NlYXJjaEVsZW1lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoRWxlbWVudCk7XG5cdFxuXHR2YXIgX3Jlc3VsdExpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdHZhciBfcmVzdWx0TGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZXN1bHRMaXN0KTtcblx0XG5cdHZhciBfZG9tVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdHZhciBfY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHR2YXIgZGVmYXVsdE9wdGlvbnMgPSBmdW5jdGlvbiBkZWZhdWx0T3B0aW9ucygpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcG9zaXRpb246ICd0b3BsZWZ0Jyxcblx0ICAgIHN0eWxlOiAnYnV0dG9uJyxcblx0ICAgIHNob3dNYXJrZXI6IHRydWUsXG5cdCAgICBzaG93UG9wdXA6IGZhbHNlLFxuXHQgICAgbWFya2VyOiB7XG5cdCAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpLFxuXHQgICAgICBkcmFnZ2FibGU6IGZhbHNlXG5cdCAgICB9LFxuXHQgICAgbWF4TWFya2VyczogMSxcblx0ICAgIHJldGFpblpvb21MZXZlbDogZmFsc2UsXG5cdCAgICBhbmltYXRlWm9vbTogdHJ1ZSxcblx0ICAgIHNlYXJjaExhYmVsOiAnRW50ZXIgYWRkcmVzcycsXG5cdCAgICBub3RGb3VuZE1lc3NhZ2U6ICdTb3JyeSwgdGhhdCBhZGRyZXNzIGNvdWxkIG5vdCBiZSBmb3VuZC4nLFxuXHQgICAgbWVzc2FnZUhpZGVEZWxheTogMzAwMCxcblx0ICAgIHpvb21MZXZlbDogMTgsXG5cdCAgICBjbGFzc05hbWVzOiB7XG5cdCAgICAgIGNvbnRhaW5lcjogJ2xlYWZsZXQtYmFyIGxlYWZsZXQtY29udHJvbCBsZWFmbGV0LWNvbnRyb2wtZ2Vvc2VhcmNoJyxcblx0ICAgICAgYnV0dG9uOiAnbGVhZmxldC1iYXItcGFydCBsZWFmbGV0LWJhci1wYXJ0LXNpbmdsZScsXG5cdCAgICAgIG1zZ2JveDogJ2xlYWZsZXQtYmFyIG1lc3NhZ2UnLFxuXHQgICAgICBmb3JtOiAnJyxcblx0ICAgICAgaW5wdXQ6ICcnXG5cdCAgICB9LFxuXHQgICAgYXV0b0NvbXBsZXRlOiB0cnVlLFxuXHQgICAgYXV0b0NvbXBsZXRlRGVsYXk6IDI1MFxuXHQgIH07XG5cdH07XG5cdFxuXHR2YXIgQ29udHJvbCA9IHtcblx0ICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKG9wdGlvbnMpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdGhpcy5tYXJrZXJzID0gbmV3IEwuRmVhdHVyZUdyb3VwKCk7XG5cdFxuXHQgICAgdGhpcy5vcHRpb25zID0gX2V4dGVuZHMoe30sIGRlZmF1bHRPcHRpb25zKCksIG9wdGlvbnMpO1xuXHRcblx0ICAgIHZhciBfb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICBzdHlsZSA9IF9vcHRpb25zLnN0eWxlLFxuXHQgICAgICAgIGNsYXNzTmFtZXMgPSBfb3B0aW9ucy5jbGFzc05hbWVzLFxuXHQgICAgICAgIHNlYXJjaExhYmVsID0gX29wdGlvbnMuc2VhcmNoTGFiZWwsXG5cdCAgICAgICAgYXV0b0NvbXBsZXRlID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlLFxuXHQgICAgICAgIGF1dG9Db21wbGV0ZURlbGF5ID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlRGVsYXk7XG5cdFxuXHQgICAgaWYgKHN0eWxlICE9PSAnYnV0dG9uJykge1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY2xhc3NOYW1lcy5jb250YWluZXIgKz0gJyAnICsgb3B0aW9ucy5zdHlsZTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLnNlYXJjaEVsZW1lbnQgPSBuZXcgX3NlYXJjaEVsZW1lbnQyLmRlZmF1bHQoX2V4dGVuZHMoe30sIHRoaXMub3B0aW9ucywge1xuXHQgICAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChxdWVyeSkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5vblN1Ym1pdChxdWVyeSk7XG5cdCAgICAgIH1cblx0ICAgIH0pKTtcblx0XG5cdCAgICB2YXIgX3NlYXJjaEVsZW1lbnQkZWxlbWVuID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLFxuXHQgICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5jb250YWluZXIsXG5cdCAgICAgICAgZm9ybSA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5mb3JtLFxuXHQgICAgICAgIGlucHV0ID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmlucHV0O1xuXHRcblx0ICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgYnV0dG9uID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnYScsIGNsYXNzTmFtZXMuYnV0dG9uLCBjb250YWluZXIpO1xuXHQgICAgYnV0dG9uLnRpdGxlID0gc2VhcmNoTGFiZWw7XG5cdCAgICBidXR0b24uaHJlZiA9ICcjJztcblx0XG5cdCAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbkNsaWNrKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHRcblx0ICAgIGlmIChhdXRvQ29tcGxldGUpIHtcblx0ICAgICAgdGhpcy5yZXN1bHRMaXN0ID0gbmV3IF9yZXN1bHRMaXN0Mi5kZWZhdWx0KHtcblx0ICAgICAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2soX3JlZikge1xuXHQgICAgICAgICAgdmFyIHJlc3VsdCA9IF9yZWYucmVzdWx0O1xuXHRcblx0ICAgICAgICAgIGlucHV0LnZhbHVlID0gcmVzdWx0LmxhYmVsO1xuXHQgICAgICAgICAgX3RoaXMub25TdWJtaXQoeyBxdWVyeTogcmVzdWx0LmxhYmVsIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBmb3JtLmFwcGVuZENoaWxkKHRoaXMucmVzdWx0TGlzdC5lbGVtZW50cy5jb250YWluZXIpO1xuXHRcblx0ICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoMCwgX2xvZGFzaDIuZGVmYXVsdCkoZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICByZXR1cm4gX3RoaXMuYXV0b1NlYXJjaChlKTtcblx0ICAgICAgfSwgYXV0b0NvbXBsZXRlRGVsYXkpLCB0cnVlKTtcblx0ICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgcmV0dXJuIF90aGlzLnNlbGVjdFJlc3VsdChlKTtcblx0ICAgICAgfSwgdHJ1ZSk7XG5cdCAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5jbGVhclJlc3VsdHMoZSk7XG5cdCAgICAgIH0sIHRydWUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuZWxlbWVudHMgPSB7IGJ1dHRvbjogYnV0dG9uIH07XG5cdCAgfSxcblx0ICBvbkFkZDogZnVuY3Rpb24gb25BZGQobWFwKSB7XG5cdCAgICB2YXIgX29wdGlvbnMyID0gdGhpcy5vcHRpb25zLFxuXHQgICAgICAgIHNob3dNYXJrZXIgPSBfb3B0aW9uczIuc2hvd01hcmtlcixcblx0ICAgICAgICBzdHlsZSA9IF9vcHRpb25zMi5zdHlsZTtcblx0XG5cdCAgICB0aGlzLm1hcCA9IG1hcDtcblx0ICAgIGlmIChzaG93TWFya2VyKSB7XG5cdCAgICAgIHRoaXMubWFya2Vycy5hZGRUbyhtYXApO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzdHlsZSA9PT0gJ2JhcicpIHtcblx0ICAgICAgdmFyIGZvcm0gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuZm9ybTtcblx0XG5cdCAgICAgIHZhciByb290ID0gbWFwLmdldENvbnRhaW5lcigpLnF1ZXJ5U2VsZWN0b3IoJy5sZWFmbGV0LWNvbnRyb2wtY29udGFpbmVyJyk7XG5cdFxuXHQgICAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgJ2xlYWZsZXQtY29udHJvbC1nZW9zZWFyY2ggYmFyJyk7XG5cdCAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChmb3JtKTtcblx0ICAgICAgcm9vdC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXHQgICAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0ICB9LFxuXHQgIG9uUmVtb3ZlOiBmdW5jdGlvbiBvblJlbW92ZSgpIHtcblx0ICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICBpZiAoY29udGFpbmVyKSB7XG5cdCAgICAgIGNvbnRhaW5lci5yZW1vdmUoKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9LFxuXHQgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHtcblx0ICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFxuXHQgICAgdmFyIF9zZWFyY2hFbGVtZW50JGVsZW1lbjIgPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMsXG5cdCAgICAgICAgY29udGFpbmVyID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuMi5jb250YWluZXIsXG5cdCAgICAgICAgaW5wdXQgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4yLmlucHV0O1xuXHRcblx0ICAgIGlmIChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdCAgICAgIGlucHV0LmZvY3VzKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBzZWxlY3RSZXN1bHQ6IGZ1bmN0aW9uIHNlbGVjdFJlc3VsdChldmVudCkge1xuXHQgICAgaWYgKCFbX2NvbnN0YW50cy5BUlJPV19ET1dOX0tFWSwgX2NvbnN0YW50cy5BUlJPV19VUF9LRVldLmluY2x1ZGVzKGV2ZW50LmtleUNvZGUpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgdmFyIGlucHV0ID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmlucHV0O1xuXHRcblx0ICAgIHZhciBsaXN0ID0gdGhpcy5yZXN1bHRMaXN0O1xuXHQgICAgdmFyIG1heCA9IHRoaXMucmVzdWx0TGlzdC5jb3VudCgpIC0gMTtcblx0XG5cdCAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYml0d2lzZVxuXHQgICAgdmFyIG5leHQgPSBldmVudC5jb2RlID09PSAnQXJyb3dEb3duJyA/IH5+bGlzdC5zZWxlY3RlZCArIDEgOiB+fmxpc3Quc2VsZWN0ZWQgLSAxO1xuXHQgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5lc3RlZC10ZXJuYXJ5XG5cdCAgICB2YXIgaWR4ID0gbmV4dCA8IDAgPyBtYXggOiBuZXh0ID4gbWF4ID8gMCA6IG5leHQ7XG5cdFxuXHQgICAgdmFyIGl0ZW0gPSBsaXN0LnNlbGVjdChpZHgpO1xuXHQgICAgaW5wdXQudmFsdWUgPSBpdGVtLmxhYmVsO1xuXHQgIH0sXG5cdCAgY2xlYXJSZXN1bHRzOiBmdW5jdGlvbiBjbGVhclJlc3VsdHMoZXZlbnQpIHtcblx0ICAgIGlmIChldmVudC5rZXlDb2RlICE9PSBfY29uc3RhbnRzLkVTQ0FQRV9LRVkpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMucmVzdWx0TGlzdC5jbGVhcigpO1xuXHQgIH0sXG5cdCAgYXV0b1NlYXJjaDogZnVuY3Rpb24gYXV0b1NlYXJjaChldmVudCkge1xuXHQgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgdmFyIHF1ZXJ5LCBwcm92aWRlciwgcmVzdWx0cztcblx0XG5cdCAgICAgIGlmIChfY29uc3RhbnRzLlNQRUNJQUxfS0VZUy5pbmNsdWRlcyhldmVudC5rZXlDb2RlKSkge1xuXHQgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHF1ZXJ5ID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuXHQgICAgICBwcm92aWRlciA9IHRoaXMub3B0aW9ucy5wcm92aWRlcjtcblx0ICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlYXJjaCh7IHF1ZXJ5OiBxdWVyeSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHRcblx0ICAgICAgICByZXN1bHRzID0gJGF3YWl0XzE7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRMaXN0LnJlbmRlcihyZXN1bHRzKTtcblx0ICAgICAgICByZXR1cm4gJHJldHVybigpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgfSxcblx0ICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQocXVlcnkpIHtcblx0ICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgIHZhciBwcm92aWRlciwgcmVzdWx0cztcblx0ICAgICAgcHJvdmlkZXIgPSB0aGlzLm9wdGlvbnMucHJvdmlkZXI7XG5cdCAgICAgIHJldHVybiBwcm92aWRlci5zZWFyY2gocXVlcnkpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG5cdFxuXHQgICAgICAgIHJlc3VsdHMgPSAkYXdhaXRfMjtcblx0XG5cdCAgICAgICAgaWYgKHJlc3VsdHMgJiYgcmVzdWx0cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICB0aGlzLnNob3dSZXN1bHQocmVzdWx0c1swXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICB9LFxuXHQgIHNob3dSZXN1bHQ6IGZ1bmN0aW9uIHNob3dSZXN1bHQocmVzdWx0KSB7XG5cdCAgICB2YXIgbWFya2VycyA9IE9iamVjdC5rZXlzKHRoaXMubWFya2Vycy5fbGF5ZXJzKTtcblx0ICAgIGlmIChtYXJrZXJzLmxlbmd0aCA+PSB0aGlzLm9wdGlvbnMubWF4TWFya2Vycykge1xuXHQgICAgICB0aGlzLm1hcmtlcnMucmVtb3ZlTGF5ZXIobWFya2Vyc1swXSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG1hcmtlciA9IHRoaXMuYWRkTWFya2VyKHJlc3VsdCk7XG5cdCAgICB0aGlzLmNlbnRlck1hcChyZXN1bHQpO1xuXHRcblx0ICAgIHRoaXMubWFwLmZpcmVFdmVudCgnZ2Vvc2VhcmNoL3Nob3dsb2NhdGlvbicsIHtcblx0ICAgICAgbG9jYXRpb246IHJlc3VsdCxcblx0ICAgICAgbWFya2VyOiBtYXJrZXJcblx0ICAgIH0pO1xuXHQgIH0sXG5cdCAgYWRkTWFya2VyOiBmdW5jdGlvbiBhZGRNYXJrZXIocmVzdWx0KSB7XG5cdCAgICB2YXIgX29wdGlvbnMzID0gdGhpcy5vcHRpb25zLFxuXHQgICAgICAgIG9wdGlvbnMgPSBfb3B0aW9uczMubWFya2VyLFxuXHQgICAgICAgIHNob3dQb3B1cCA9IF9vcHRpb25zMy5zaG93UG9wdXA7XG5cdFxuXHQgICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihbcmVzdWx0LnksIHJlc3VsdC54XSwgb3B0aW9ucyk7XG5cdCAgICBtYXJrZXIuYmluZFBvcHVwKHJlc3VsdC5sYWJlbCk7XG5cdFxuXHQgICAgdGhpcy5tYXJrZXJzLmFkZExheWVyKG1hcmtlcik7XG5cdFxuXHQgICAgaWYgKHNob3dQb3B1cCkge1xuXHQgICAgICBtYXJrZXIub3BlblBvcHVwKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG1hcmtlcjtcblx0ICB9LFxuXHQgIGNlbnRlck1hcDogZnVuY3Rpb24gY2VudGVyTWFwKHJlc3VsdCkge1xuXHQgICAgdmFyIF9vcHRpb25zNCA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICByZXRhaW5ab29tTGV2ZWwgPSBfb3B0aW9uczQucmV0YWluWm9vbUxldmVsLFxuXHQgICAgICAgIGFuaW1hdGVab29tID0gX29wdGlvbnM0LmFuaW1hdGVab29tO1xuXHRcblx0ICAgIHZhciByZXN1bHRCb3VuZHMgPSBuZXcgTC5MYXRMbmdCb3VuZHMocmVzdWx0LmJvdW5kcyk7XG5cdCAgICB2YXIgYm91bmRzID0gcmVzdWx0Qm91bmRzLmlzVmFsaWQoKSA/IHJlc3VsdEJvdW5kcyA6IHRoaXMubWFya2Vycy5nZXRCb3VuZHMoKTtcblx0XG5cdCAgICBpZiAoIXJldGFpblpvb21MZXZlbCAmJiByZXN1bHRCb3VuZHMuaXNWYWxpZCgpKSB7XG5cdCAgICAgIHRoaXMubWFwLmZpdEJvdW5kcyhib3VuZHMsIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLm1hcC5zZXRWaWV3KGJvdW5kcy5nZXRDZW50ZXIoKSwgdGhpcy5nZXRab29tKCksIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBnZXRab29tOiBmdW5jdGlvbiBnZXRab29tKCkge1xuXHQgICAgdmFyIF9vcHRpb25zNSA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICByZXRhaW5ab29tTGV2ZWwgPSBfb3B0aW9uczUucmV0YWluWm9vbUxldmVsLFxuXHQgICAgICAgIHpvb21MZXZlbCA9IF9vcHRpb25zNS56b29tTGV2ZWw7XG5cdFxuXHQgICAgcmV0dXJuIHJldGFpblpvb21MZXZlbCA/IHRoaXMubWFwLmdldFpvb20oKSA6IHpvb21MZXZlbDtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBMZWFmbGV0Q29udHJvbCgpIHtcblx0ICBpZiAoIUwgfHwgIUwuQ29udHJvbCB8fCAhTC5Db250cm9sLmV4dGVuZCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdMZWFmbGV0IG11c3QgYmUgbG9hZGVkIGJlZm9yZSBpbnN0YW50aWF0aW5nIHRoZSBHZW9TZWFyY2ggY29udHJvbCcpO1xuXHQgIH1cblx0XG5cdCAgdmFyIExDb250cm9sID0gTC5Db250cm9sLmV4dGVuZChDb250cm9sKTtcblx0XG5cdCAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG9wdGlvbnMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgIG9wdGlvbnNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShMQ29udHJvbCwgW251bGxdLmNvbmNhdChvcHRpb25zKSkpKCk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHQvKlxuXHQgKiAkYXN5bmNiaW5kIGhhcyBtdWx0aXBsZSB1c2VzLCBkZXBlbmRpbmcgb24gdGhlIHBhcmFtZXRlciBsaXN0LiBJdCBpcyBpbiBGdW5jdGlvbi5wcm90b3R5cGUsIHNvICd0aGlzJyBpcyBhbHdheXMgYSBmdW5jdGlvblxuXHQgKlxuXHQgKiAxKSBJZiBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudCAodGhpcyksIGl0IGlzIHVzZWQgd2hlbiBkZWZpbmluZyBhbiBhc3luYyBmdW5jdGlvbiB0byBlbnN1cmUgd2hlblxuXHQgKiAgICAgIGl0IGlzIGludm9rZWQsIHRoZSBjb3JyZWN0ICd0aGlzJyBpcyBwcmVzZW50LCBqdXN0IGxpa2UgXCJiaW5kXCIuIEZvciBsZWdhY3kgcmVhc29ucywgJ3RoaXMnIGlzIGdpdmVuXG5cdCAqICAgICAgYSBtZW1lYmVyICd0aGVuJyB3aGljaCByZWZlcnMgdG8gaXRzZWxmLlxuXHQgKiAyKSBJZiBjYWxsZWQgd2l0aCBhIHNlY29uZCBwYXJhbWV0ZXIgKFwiY2F0Y2hlclwiKSBhbmQgY2F0Y2hlciE9PXRydWUgaXQgaXMgYmVpbmcgdXNlZCB0byBpbnZva2UgYW4gYXN5bmNcblx0ICogICAgICBmdW5jdGlvbiB3aGVyZSB0aGUgc2Vjb25kIHBhcmFtZXRlciBpcyB0aGUgZXJyb3IgY2FsbGJhY2sgKGZvciBzeW5jIGV4Y2VwdGlvbnMgYW5kIHRvIGJlIHBhc3NlZCB0b1xuXHQgKiAgICAgIG5lc3RlZCBhc3luYyBjYWxscylcblx0ICogMykgSWYgY2FsbGVkIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXI9PT10cnVlLCBpdCBpcyB0aGUgc2FtZSB1c2UgYXMgKDEpLCBidXQgdGhlIGZ1bmN0aW9uIGlzIHdyYXBwZWRcblx0ICogICAgICBpbiBhbiAnUHJvbWlzZScgYXMgd2VsbCBib3VuZCB0byAndGhpcycuXG5cdCAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IFByb21pc2UodGhpcyknLCB3aGVyZSAndGhpcycgaXMgdGhlIGZ1bmN0aW9uIGJlaW5nIGJvdW5kL3dyYXBwZWRcblx0ICogNCkgSWYgY2FsbGVkIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXI9PT0wLCBpdCBpcyB0aGUgc2FtZSB1c2UgYXMgKDEpLCBidXQgdGhlIGZ1bmN0aW9uIGlzIHdyYXBwZWRcblx0ICogICAgICBpbiBhICdMYXp5VGhlbmFibGUnLCB3aGljaCBleGVjdXRlcyBsYXppbHkgYW5kIGNhbiByZXNvbHZlIHN5bmNocm9ub3VzbHkuXG5cdCAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IExhenlUaGVuYWJsZSh0aGlzKScgKGlmIHN1Y2ggYSB0eXBlIHdlcmUgZXhwb3NlZCksIHdoZXJlICd0aGlzJyBpc1xuXHQgKiAgICAgIHRoZSBmdW5jdGlvbiBiZWluZyBib3VuZC93cmFwcGVkXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc0luY2x1ZGVzKGluY2x1ZGVzLCBpbnB1dCkge1xuXHQgICAgdmFyIHNyYyA9IGlucHV0LnRvU3RyaW5nKCk7XG5cdCAgICB2YXIgdCA9IFwicmV0dXJuIFwiICsgc3JjO1xuXHQgICAgdmFyIGFyZ3MgPSBzcmMubWF0Y2goLy4qXFwoKFteKV0qKVxcKS8pWzFdO1xuXHQgICAgdmFyIHJlID0gL1snXCJdISEhKFteJ1wiXSopWydcIl0vZztcblx0ICAgIHZhciBtID0gW107XG5cdCAgICB3aGlsZSAoMSkge1xuXHQgICAgICAgIHZhciBteCA9IHJlLmV4ZWModCk7XG5cdCAgICAgICAgaWYgKG14KSBtLnB1c2gobXgpO2Vsc2UgYnJlYWs7XG5cdCAgICB9XG5cdCAgICBtLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgdCA9IHQuc2xpY2UoMCwgZS5pbmRleCkgKyBpbmNsdWRlc1tlWzFdXSArIHQuc3Vic3RyKGUuaW5kZXggKyBlWzBdLmxlbmd0aCk7XG5cdCAgICB9KTtcblx0ICAgIHQgPSB0LnJlcGxhY2UoL1xcL1xcKlteKl0qXFwqXFwvL2csICcgJykucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuXHQgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihhcmdzLCB0KSgpO1xuXHR9XG5cdFxuXHR2YXIgJGFzeW5jYmluZCA9IHByb2Nlc3NJbmNsdWRlcyh7XG5cdCAgICB6b3VzYW46IF9fd2VicGFja19yZXF1aXJlX18oNykudG9TdHJpbmcoKSxcblx0ICAgIHRoZW5hYmxlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKS50b1N0cmluZygpXG5cdH0sIGZ1bmN0aW9uICRhc3luY2JpbmQoc2VsZiwgY2F0Y2hlcikge1xuXHQgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHQgICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jYmluZCkge1xuXHQgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsIFwiJGFzeW5jYmluZFwiLCB7IHZhbHVlOiAkYXN5bmNiaW5kLCBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoISRhc3luY2JpbmQudHJhbXBvbGluZSkge1xuXHQgICAgICAgICRhc3luY2JpbmQudHJhbXBvbGluZSA9IGZ1bmN0aW9uIHRyYW1wb2xpbmUodCwgeCwgcywgZSwgdSkge1xuXHQgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gYihxKSB7XG5cdCAgICAgICAgICAgICAgICB3aGlsZSAocSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChxLnRoZW4pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHEudGhlbihiLCBlKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUgPyB1bmRlZmluZWQgOiBxO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAocS5wb3ApIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxLmxlbmd0aCkgcmV0dXJuIHEucG9wKCkgPyB4LmNhbGwodCkgOiBxO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHM7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBxID0gcS5jYWxsKHQpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUocik7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdCAgICBpZiAoISRhc3luY2JpbmQuTGF6eVRoZW5hYmxlKSB7XG5cdCAgICAgICAgJGFzeW5jYmluZC5MYXp5VGhlbmFibGUgPSAnISEhdGhlbmFibGUnKCk7XG5cdCAgICAgICAgJGFzeW5jYmluZC5FYWdlclRoZW5hYmxlID0gJGFzeW5jYmluZC5UaGVuYWJsZSA9ICgkYXN5bmNiaW5kLkVhZ2VyVGhlbmFibGVGYWN0b3J5ID0gJyEhIXpvdXNhbicpKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHJlc29sdmVyID0gdGhpcztcblx0ICAgIHN3aXRjaCAoY2F0Y2hlcikge1xuXHQgICAgICAgIGNhc2UgdHJ1ZTpcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyAkYXN5bmNiaW5kLlRoZW5hYmxlKGJvdW5kVGhlbik7XG5cdCAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICByZXR1cm4gbmV3ICRhc3luY2JpbmQuTGF6eVRoZW5hYmxlKGJvdW5kVGhlbik7XG5cdCAgICAgICAgY2FzZSB1bmRlZmluZWQ6XG5cdCAgICAgICAgICAgIC8qIEZvciBydW50aW1lIGNvbXBhdGliaWxpdHkgd2l0aCBOb2RlbnQgdjIueCwgcHJvdmlkZSBhIHRoZW5hYmxlICovXG5cdCAgICAgICAgICAgIGJvdW5kVGhlbi50aGVuID0gYm91bmRUaGVuO1xuXHQgICAgICAgICAgICByZXR1cm4gYm91bmRUaGVuO1xuXHQgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlci5hcHBseShzZWxmLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2F0Y2hlcihleCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH07XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBib3VuZFRoZW4oKSB7XG5cdCAgICAgICAgcmV0dXJuIHJlc29sdmVyLmFwcGx5KHNlbGYsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gJGFzeW5jc3Bhd24ocHJvbWlzZVByb3ZpZGVyLCBzZWxmKSB7XG5cdCAgICBpZiAoIUZ1bmN0aW9uLnByb3RvdHlwZS4kYXN5bmNzcGF3bikge1xuXHQgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsIFwiJGFzeW5jc3Bhd25cIiwgeyB2YWx1ZTogJGFzeW5jc3Bhd24sIGVudW1lcmFibGU6IGZhbHNlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pO1xuXHQgICAgfVxuXHQgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEZ1bmN0aW9uKSkgcmV0dXJuO1xuXHRcblx0ICAgIHZhciBnZW5GID0gdGhpcztcblx0ICAgIHJldHVybiBuZXcgcHJvbWlzZVByb3ZpZGVyKGZ1bmN0aW9uIGVub3VnaChyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICB2YXIgZ2VuID0gZ2VuRi5jYWxsKHNlbGYsIHJlc29sdmUsIHJlamVjdCk7XG5cdCAgICAgICAgZnVuY3Rpb24gc3RlcChmbiwgYXJnKSB7XG5cdCAgICAgICAgICAgIHZhciBuZXh0O1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgbmV4dCA9IGZuLmNhbGwoZ2VuLCBhcmcpO1xuXHQgICAgICAgICAgICAgICAgaWYgKG5leHQuZG9uZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlICE9PSByZXNvbHZlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlICYmIG5leHQudmFsdWUgPT09IG5leHQudmFsdWUudGhlbikgcmV0dXJuIG5leHQudmFsdWUocmVzb2x2ZSwgcmVqZWN0KTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSAmJiByZXNvbHZlKG5leHQudmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlLnRoZW4pIHtcblx0ICAgICAgICAgICAgICAgICAgICBuZXh0LnZhbHVlLnRoZW4oZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4ubmV4dCwgdik7XG5cdCAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4udGhyb3csIGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi5uZXh0LCBuZXh0LnZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgICAgcmVqZWN0ICYmIHJlamVjdChlKTtcblx0ICAgICAgICAgICAgICAgIHJlamVjdCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgc3RlcChnZW4ubmV4dCk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0Ly8gSW5pdGlhbGl6ZSBhc3luYyBiaW5kaW5nc1xuXHQkYXN5bmNiaW5kKCk7XG5cdCRhc3luY3NwYXduKCk7XG5cdFxuXHQvLyBFeHBvcnQgYXN5bmMgYmluZGluZ3Ncblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgICAkYXN5bmNiaW5kOiAkYXN5bmNiaW5kLFxuXHQgICAgJGFzeW5jc3Bhd246ICRhc3luY3NwYXduXG5cdH07XG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcywgc2V0SW1tZWRpYXRlKSB7LyogVGhpcyBjb2RlIGlzIGJhc2VkIG9uOlxuXHR6b3VzYW4gLSBBIExpZ2h0bmluZyBGYXN0LCBZZXQgVmVyeSBTbWFsbCBQcm9taXNlIEErIENvbXBsaWFudCBJbXBsZW1lbnRhdGlvblxuXHRodHRwczovL2dpdGh1Yi5jb20vYmx1ZWphdmEvem91c2FuXG5cdEF1dGhvcjogR2xlbm4gQ3Jvd25vdmVyIDxnbGVubkBibHVlamF2YS5jb20+IChodHRwOi8vd3d3LmJsdWVqYXZhLmNvbSlcblx0VmVyc2lvbiAyLjMuM1xuXHRMaWNlbnNlOiBNSVQgKi9cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0aWNrKSB7XG5cdCAgICB0aWNrID0gdGljayB8fCAodHlwZW9mIHByb2Nlc3MgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihwcm9jZXNzKSkgPT09IFwib2JqZWN0XCIgJiYgcHJvY2Vzcy5uZXh0VGljayB8fCB0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSBcImZ1bmN0aW9uXCIgJiYgc2V0SW1tZWRpYXRlIHx8IGZ1bmN0aW9uIChmKSB7XG5cdCAgICAgICAgc2V0VGltZW91dChmLCAwKTtcblx0ICAgIH07XG5cdCAgICB2YXIgc29vbiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZnEgPSBbXSxcblx0ICAgICAgICAgICAgZnFTdGFydCA9IDAsXG5cdCAgICAgICAgICAgIGJ1ZmZlclNpemUgPSAxMDI0O1xuXHQgICAgICAgIGZ1bmN0aW9uIGNhbGxRdWV1ZSgpIHtcblx0ICAgICAgICAgICAgd2hpbGUgKGZxLmxlbmd0aCAtIGZxU3RhcnQpIHtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZnFbZnFTdGFydF0oKTtcblx0ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7LyogY29uc29sZS5lcnJvcihleCkgKi99XG5cdCAgICAgICAgICAgICAgICBmcVtmcVN0YXJ0KytdID0gdW5kZWZpbmVkO1xuXHQgICAgICAgICAgICAgICAgaWYgKGZxU3RhcnQgPT09IGJ1ZmZlclNpemUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBmcS5zcGxpY2UoMCwgYnVmZmVyU2l6ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgZnFTdGFydCA9IDA7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZm4pIHtcblx0ICAgICAgICAgICAgZnEucHVzaChmbik7XG5cdCAgICAgICAgICAgIGlmIChmcS5sZW5ndGggLSBmcVN0YXJ0ID09PSAxKSB0aWNrKGNhbGxRdWV1ZSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH0oKTtcblx0XG5cdCAgICBmdW5jdGlvbiBab3VzYW4oZnVuYykge1xuXHQgICAgICAgIGlmIChmdW5jKSB7XG5cdCAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG5cdCAgICAgICAgICAgIGZ1bmMoZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgICAgICAgICAgbWUucmVzb2x2ZShhcmcpO1xuXHQgICAgICAgICAgICB9LCBmdW5jdGlvbiAoYXJnKSB7XG5cdCAgICAgICAgICAgICAgICBtZS5yZWplY3QoYXJnKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIFpvdXNhbi5wcm90b3R5cGUgPSB7XG5cdCAgICAgICAgcmVzb2x2ZTogZnVuY3Rpb24gcmVzb2x2ZSh2YWx1ZSkge1xuXHQgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gdW5kZWZpbmVkKSByZXR1cm47XG5cdCAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcykgcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJBdHRlbXB0IHRvIHJlc29sdmUgcHJvbWlzZSB3aXRoIHNlbGZcIikpO1xuXHQgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXHQgICAgICAgICAgICBpZiAodmFsdWUgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiIHx8ICh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZih2YWx1ZSkpID09PSBcIm9iamVjdFwiKSkge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3QgPSAwO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciB0aGVuID0gdmFsdWUudGhlbjtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoZW4gPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bmN0aW9uIChyYSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVzb2x2ZShyYSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChycikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVqZWN0KHJyKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCkgdGhpcy5yZWplY3QoZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GVUxGSUxMRUQ7XG5cdCAgICAgICAgICAgIHRoaXMudiA9IHZhbHVlO1xuXHQgICAgICAgICAgICBpZiAobWUuYykgc29vbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgbCA9IG1lLmMubGVuZ3RoOyBuIDwgbDsgbisrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgU1RBVEVfRlVMRklMTEVEKG1lLmNbbl0sIHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXHQgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUkVKRUNURUQ7XG5cdCAgICAgICAgICAgIHRoaXMudiA9IHJlYXNvbjtcblx0ICAgICAgICAgICAgdmFyIGNsaWVudHMgPSB0aGlzLmM7XG5cdCAgICAgICAgICAgIGlmIChjbGllbnRzKSBzb29uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCBsID0gY2xpZW50cy5sZW5ndGg7IG4gPCBsOyBuKyspIHtcblx0ICAgICAgICAgICAgICAgICAgICBTVEFURV9SRUpFQ1RFRChjbGllbnRzW25dLCByZWFzb24pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHRoZW46IGZ1bmN0aW9uIHRoZW4ob25GLCBvblIpIHtcblx0ICAgICAgICAgICAgdmFyIHAgPSBuZXcgWm91c2FuKCk7XG5cdCAgICAgICAgICAgIHZhciBjbGllbnQgPSB7XG5cdCAgICAgICAgICAgICAgICB5OiBvbkYsXG5cdCAgICAgICAgICAgICAgICBuOiBvblIsXG5cdCAgICAgICAgICAgICAgICBwOiBwXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgICAgIGlmICh0aGlzLmMpIHRoaXMuYy5wdXNoKGNsaWVudCk7ZWxzZSB0aGlzLmMgPSBbY2xpZW50XTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcy5zdGF0ZSxcblx0ICAgICAgICAgICAgICAgICAgICBhID0gdGhpcy52O1xuXHQgICAgICAgICAgICAgICAgc29vbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcyhjbGllbnQsIGEpO1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIHA7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBmdW5jdGlvbiBTVEFURV9GVUxGSUxMRUQoYywgYXJnKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjLnkgPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgdmFyIHlyZXQgPSBjLnkuY2FsbCh1bmRlZmluZWQsIGFyZyk7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVzb2x2ZSh5cmV0KTtcblx0ICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVqZWN0KGVycik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgYy5wLnJlc29sdmUoYXJnKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBTVEFURV9SRUpFQ1RFRChjLCByZWFzb24pIHtcblx0ICAgICAgICBpZiAodHlwZW9mIGMubiA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgeXJldCA9IGMubi5jYWxsKHVuZGVmaW5lZCwgcmVhc29uKTtcblx0ICAgICAgICAgICAgICAgIGMucC5yZXNvbHZlKHlyZXQpO1xuXHQgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgIGMucC5yZWplY3QoZXJyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBjLnAucmVqZWN0KHJlYXNvbik7XG5cdCAgICB9XG5cdFxuXHQgICAgWm91c2FuLnJlc29sdmUgPSBmdW5jdGlvbiAodmFsKSB7XG5cdCAgICAgICAgaWYgKHZhbCAmJiB2YWwgaW5zdGFuY2VvZiBab3VzYW4pIHJldHVybiB2YWw7XG5cdCAgICAgICAgdmFyIHogPSBuZXcgWm91c2FuKCk7XG5cdCAgICAgICAgei5yZXNvbHZlKHZhbCk7XG5cdCAgICAgICAgcmV0dXJuIHo7XG5cdCAgICB9O1xuXHQgICAgWm91c2FuLnJlamVjdCA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICBpZiAoZXJyICYmIGVyciBpbnN0YW5jZW9mIFpvdXNhbikgcmV0dXJuIGVycjtcblx0ICAgICAgICB2YXIgeiA9IG5ldyBab3VzYW4oKTtcblx0ICAgICAgICB6LnJlamVjdChlcnIpO1xuXHQgICAgICAgIHJldHVybiB6O1xuXHQgICAgfTtcblx0XG5cdCAgICBab3VzYW4udmVyc2lvbiA9IFwiMi4zLjMtbm9kZW50XCI7XG5cdCAgICByZXR1cm4gWm91c2FuO1xuXHR9O1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg4KSwgX193ZWJwYWNrX3JlcXVpcmVfXyg5KS5zZXRJbW1lZGlhdGUpKVxuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cdHZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblx0XG5cdC8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuXHQvLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcblx0Ly8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuXHQvLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXHRcblx0dmFyIGNhY2hlZFNldFRpbWVvdXQ7XG5cdHZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cdFxuXHRmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0ZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCgpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0KGZ1bmN0aW9uICgpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICB9XG5cdH0pKCk7XG5cdGZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG5cdCAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuXHQgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuXHQgICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuXHQgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0ZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuXHQgICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG5cdCAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG5cdCAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuXHQgICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG5cdCAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuXHQgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG5cdCAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgZHJhaW5pbmcgPSBmYWxzZTtcblx0dmFyIGN1cnJlbnRRdWV1ZTtcblx0dmFyIHF1ZXVlSW5kZXggPSAtMTtcblx0XG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG5cdCAgICBpZiAoZHJhaW5pbmcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcblx0ICAgIGRyYWluaW5nID0gdHJ1ZTtcblx0XG5cdCAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGxlbikge1xuXHQgICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuXHQgICAgICAgIHF1ZXVlID0gW107XG5cdCAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuXHQgICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIH1cblx0ICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHR9XG5cdFxuXHRwcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcblx0ICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG5cdCAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcblx0ICAgIH1cblx0fTtcblx0XG5cdC8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcblx0ZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG5cdCAgICB0aGlzLmZ1biA9IGZ1bjtcblx0ICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcblx0fVxuXHRJdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcblx0fTtcblx0cHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcblx0cHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcblx0cHJvY2Vzcy5lbnYgPSB7fTtcblx0cHJvY2Vzcy5hcmd2ID0gW107XG5cdHByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xuXHRwcm9jZXNzLnZlcnNpb25zID0ge307XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge31cblx0XG5cdHByb2Nlc3Mub24gPSBub29wO1xuXHRwcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5vbmNlID0gbm9vcDtcblx0cHJvY2Vzcy5vZmYgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xuXHRwcm9jZXNzLmVtaXQgPSBub29wO1xuXHRcblx0cHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0XG5cdHByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuICcvJztcblx0fTtcblx0cHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdHByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gMDtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0dmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXHRcblx0Ly8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3Ncblx0XG5cdGV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG5cdH07XG5cdGV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG5cdH07XG5cdGV4cG9ydHMuY2xlYXJUaW1lb3V0ID0gZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24gKHRpbWVvdXQpIHtcblx0ICBpZiAodGltZW91dCkge1xuXHQgICAgdGltZW91dC5jbG9zZSgpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcblx0ICB0aGlzLl9pZCA9IGlkO1xuXHQgIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xuXHR9XG5cdFRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24gKCkge307XG5cdFRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csIHRoaXMuX2lkKTtcblx0fTtcblx0XG5cdC8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuXHRleHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uIChpdGVtLCBtc2Vjcykge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0ICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHQgIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG5cdH07XG5cdFxuXHRleHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdFxuXHQgIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuXHQgIGlmIChtc2VjcyA+PSAwKSB7XG5cdCAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG5cdCAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpIGl0ZW0uX29uVGltZW91dCgpO1xuXHQgICAgfSwgbXNlY3MpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3Rcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdGV4cG9ydHMuc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuXHRleHBvcnRzLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG5cbi8qKiovIH0sXG4vKiAxMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCwgcHJvY2Vzcykge1widXNlIHN0cmljdFwiO1xuXHRcblx0KGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuXHQgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHQgICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm9cblx0ICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG5cdCAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG5cdCAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuXHQgICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXHRcblx0ICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuXHQgICAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuXHQgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBDb3B5IGZ1bmN0aW9uIGFyZ3VtZW50c1xuXHQgICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuXHQgICAgICAgIHZhciB0YXNrID0geyBjYWxsYmFjazogY2FsbGJhY2ssIGFyZ3M6IGFyZ3MgfTtcblx0ICAgICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcblx0ICAgICAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gcnVuKHRhc2spIHtcblx0ICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuXHQgICAgICAgIHZhciBhcmdzID0gdGFzay5hcmdzO1xuXHQgICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBjYXNlIDE6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBjYXNlIDI6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBjYXNlIDM6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBkZWZhdWx0OlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG5cdCAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogXCJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC5cIlxuXHQgICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uXG5cdCAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuXHQgICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuXHQgICAgICAgICAgICAvLyBcInRvbyBtdWNoIHJlY3Vyc2lvblwiIGVycm9yLlxuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcblx0ICAgICAgICAgICAgaWYgKHRhc2spIHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcblx0ICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICAgICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcblx0ICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuXHQgICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcblx0ICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cblx0ICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuXHQgICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG5cdCAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuXHQgICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuXHQgICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuXHQgICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG5cdCAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG5cdCAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXHRcblx0ICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuXHQgICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbiBvbkdsb2JhbE1lc3NhZ2UoZXZlbnQpIHtcblx0ICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuXHQgICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0ICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG5cdCAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG5cdCAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuXHQgICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuXHQgICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG5cdCAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcblx0ICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuXHQgICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuXHQgICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cdFxuXHQgICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuXHQgICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuXHQgICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcblx0ICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG5cdCAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuXHQgICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuXHQgICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG5cdCAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcblx0ICAgICAgICAvLyBGb3IgSUUgNuKAkzhcblx0ICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuXHQgICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH1cblx0XG5cdCAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG5cdCAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xuXHR9KSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB1bmRlZmluZWQgOiBnbG9iYWwgOiBzZWxmKTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSksIF9fd2VicGFja19yZXF1aXJlX18oOCkpKVxuXG4vKioqLyB9LFxuLyogMTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBpc1RoZW5hYmxlKG9iaikge1xuXHQgICAgICAgIHJldHVybiBvYmogJiYgb2JqIGluc3RhbmNlb2YgT2JqZWN0ICYmIHR5cGVvZiBvYmoudGhlbiA9PT0gXCJmdW5jdGlvblwiO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHJlc29sdXRpb24ocCwgciwgaG93KSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLyogMi4yLjcuMSAqL1xuXHQgICAgICAgICAgICB2YXIgeCA9IGhvdyA/IGhvdyhyKSA6IHI7XG5cdFxuXHQgICAgICAgICAgICBpZiAocCA9PT0geCkgLyogMi4zLjEgKi9cblx0ICAgICAgICAgICAgICAgIHJldHVybiBwLnJlamVjdChuZXcgVHlwZUVycm9yKFwiUHJvbWlzZSByZXNvbHV0aW9uIGxvb3BcIikpO1xuXHRcblx0ICAgICAgICAgICAgaWYgKGlzVGhlbmFibGUoeCkpIHtcblx0ICAgICAgICAgICAgICAgIC8qIDIuMy4zICovXG5cdCAgICAgICAgICAgICAgICB4LnRoZW4oZnVuY3Rpb24gKHkpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uKHAsIHkpO1xuXHQgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBwLnJlamVjdChlKTtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgcC5yZXNvbHZlKHgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBjYXRjaCAoZXgpIHtcblx0ICAgICAgICAgICAgLyogMi4yLjcuMiAqL1xuXHQgICAgICAgICAgICBwLnJlamVjdChleCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIENoYWluZWQoKSB7fTtcblx0ICAgIENoYWluZWQucHJvdG90eXBlID0ge1xuXHQgICAgICAgIHJlc29sdmU6IF91bmNoYWluZWQsXG5cdCAgICAgICAgcmVqZWN0OiBfdW5jaGFpbmVkLFxuXHQgICAgICAgIHRoZW46IHRoZW5DaGFpblxuXHQgICAgfTtcblx0ICAgIGZ1bmN0aW9uIF91bmNoYWluZWQodikge31cblx0ICAgIGZ1bmN0aW9uIHRoZW5DaGFpbihyZXMsIHJlaikge1xuXHQgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlcztcblx0ICAgICAgICB0aGlzLnJlamVjdCA9IHJlajtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiB0aGVuKHJlcywgcmVqKSB7XG5cdCAgICAgICAgdmFyIGNoYWluID0gbmV3IENoYWluZWQoKTtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB0aGlzLl9yZXNvbHZlcihmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBpc1RoZW5hYmxlKHZhbHVlKSA/IHZhbHVlLnRoZW4ocmVzLCByZWopIDogcmVzb2x1dGlvbihjaGFpbiwgdmFsdWUsIHJlcyk7XG5cdCAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChleCkge1xuXHQgICAgICAgICAgICAgICAgcmVzb2x1dGlvbihjaGFpbiwgZXgsIHJlaik7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cdCAgICAgICAgICAgIHJlc29sdXRpb24oY2hhaW4sIGV4LCByZWopO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gY2hhaW47XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gVGhlbmFibGUocmVzb2x2ZXIpIHtcblx0ICAgICAgICB0aGlzLl9yZXNvbHZlciA9IHJlc29sdmVyO1xuXHQgICAgICAgIHRoaXMudGhlbiA9IHRoZW47XG5cdCAgICB9O1xuXHRcblx0ICAgIFRoZW5hYmxlLnJlc29sdmUgPSBmdW5jdGlvbiAodikge1xuXHQgICAgICAgIHJldHVybiBUaGVuYWJsZS5pc1RoZW5hYmxlKHYpID8gdiA6IHsgdGhlbjogZnVuY3Rpb24gdGhlbihyZXNvbHZlKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh2KTtcblx0ICAgICAgICAgICAgfSB9O1xuXHQgICAgfTtcblx0XG5cdCAgICBUaGVuYWJsZS5pc1RoZW5hYmxlID0gaXNUaGVuYWJsZTtcblx0XG5cdCAgICByZXR1cm4gVGhlbmFibGU7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdC8qKlxuXHQgKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuXHQgKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cblx0ICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuXHQgKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICovXG5cdFxuXHQvKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xuXHR2YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXHRcblx0LyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG5cdHZhciBOQU4gPSAwIC8gMDtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXHRcblx0LyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi9cblx0dmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cdFxuXHQvKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xuXHR2YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cdFxuXHQvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xuXHR2YXIgZnJlZUdsb2JhbCA9ICh0eXBlb2YgZ2xvYmFsID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihnbG9iYWwpKSA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblx0XG5cdC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG5cdHZhciBmcmVlU2VsZiA9ICh0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2Yoc2VsZikpID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXHRcblx0LyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG5cdHZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcblx0ICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG5cdCAqIG9mIHZhbHVlcy5cblx0ICovXG5cdHZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXHRcblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuXHR2YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG5cdCAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2Vcblx0ICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDIuNC4wXG5cdCAqIEBjYXRlZ29yeSBEYXRlXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuXHQgKiAgIGNvbnNvbGUubG9nKF8ubm93KCkgLSBzdGFtcCk7XG5cdCAqIH0sIF8ubm93KCkpO1xuXHQgKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuXHQgKi9cblx0dmFyIG5vdyA9IGZ1bmN0aW9uIG5vdygpIHtcblx0ICByZXR1cm4gcm9vdC5EYXRlLm5vdygpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuXHQgKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcblx0ICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuXHQgKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cblx0ICogUHJvdmlkZSBgb3B0aW9uc2AgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb24gdGhlXG5cdCAqIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcblx0ICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudFxuXHQgKiBjYWxscyB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYFxuXHQgKiBpbnZvY2F0aW9uLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzXG5cdCAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG5cdCAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cblx0ICpcblx0ICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG5cdCAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cblx0ICpcblx0ICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG5cdCAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBGdW5jdGlvblxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cblx0ICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuXHQgKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cblx0ICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG5cdCAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG5cdCAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG5cdCAqXG5cdCAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuXHQgKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG5cdCAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuXHQgKiAgICd0cmFpbGluZyc6IGZhbHNlXG5cdCAqIH0pKTtcblx0ICpcblx0ICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cblx0ICogdmFyIGRlYm91bmNlZCA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwgeyAnbWF4V2FpdCc6IDEwMDAgfSk7XG5cdCAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcblx0ICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuXHQgKlxuXHQgKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuXHQgKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcblx0ICovXG5cdGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcblx0ICB2YXIgbGFzdEFyZ3MsXG5cdCAgICAgIGxhc3RUaGlzLFxuXHQgICAgICBtYXhXYWl0LFxuXHQgICAgICByZXN1bHQsXG5cdCAgICAgIHRpbWVySWQsXG5cdCAgICAgIGxhc3RDYWxsVGltZSxcblx0ICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuXHQgICAgICBsZWFkaW5nID0gZmFsc2UsXG5cdCAgICAgIG1heGluZyA9IGZhbHNlLFxuXHQgICAgICB0cmFpbGluZyA9IHRydWU7XG5cdFxuXHQgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG5cdCAgfVxuXHQgIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuXHQgIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuXHQgICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuXHQgICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG5cdCAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuXHQgICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuXHQgICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcblx0ICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cdFxuXHQgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcblx0ICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcblx0ICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuXHQgICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cblx0ICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcblx0ICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG5cdCAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG5cdCAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcblx0ICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG5cdCAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSxcblx0ICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cdFxuXHQgICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQsIG1heFdhaXQgLSB0aW1lU2luY2VMYXN0SW52b2tlKSA6IHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG5cdCAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuXHQgICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cdFxuXHQgICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcblx0ICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG5cdCAgICAvLyBpdCBhcyB0aGUgdHJhaWxpbmcgZWRnZSwgb3Igd2UndmUgaGl0IHRoZSBgbWF4V2FpdGAgbGltaXQuXG5cdCAgICByZXR1cm4gbGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgdGltZVNpbmNlTGFzdENhbGwgPj0gd2FpdCB8fCB0aW1lU2luY2VMYXN0Q2FsbCA8IDAgfHwgbWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHtcblx0ICAgIHZhciB0aW1lID0gbm93KCk7XG5cdCAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG5cdCAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7XG5cdCAgICB9XG5cdCAgICAvLyBSZXN0YXJ0IHRoZSB0aW1lci5cblx0ICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuXHQgICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblx0XG5cdCAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG5cdCAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cblx0ICAgIGlmICh0cmFpbGluZyAmJiBsYXN0QXJncykge1xuXHQgICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcblx0ICAgIH1cblx0ICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gY2FuY2VsKCkge1xuXHQgICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7XG5cdCAgICB9XG5cdCAgICBsYXN0SW52b2tlVGltZSA9IDA7XG5cdCAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGZsdXNoKCkge1xuXHQgICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG5cdCAgICB2YXIgdGltZSA9IG5vdygpLFxuXHQgICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG5cdFxuXHQgICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG5cdCAgICBsYXN0VGhpcyA9IHRoaXM7XG5cdCAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXHRcblx0ICAgIGlmIChpc0ludm9raW5nKSB7XG5cdCAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAobWF4aW5nKSB7XG5cdCAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cblx0ICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHQgIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG5cdCAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG5cdCAgcmV0dXJuIGRlYm91bmNlZDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuXHQgKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG5cdCAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KHt9KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChfLm5vb3ApO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QobnVsbCk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuXHQgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih2YWx1ZSk7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuXHQgKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuXHQgIHJldHVybiAhIXZhbHVlICYmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHZhbHVlKSkgPT0gJ29iamVjdCc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzU3ltYm9sKCdhYmMnKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG5cdCAgcmV0dXJuICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHZhbHVlKSkgPT0gJ3N5bWJvbCcgfHwgaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoMy4yKTtcblx0ICogLy8gPT4gMy4yXG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG5cdCAqIC8vID0+IDVlLTMyNFxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcblx0ICogLy8gPT4gSW5maW5pdHlcblx0ICpcblx0ICogXy50b051bWJlcignMy4yJyk7XG5cdCAqIC8vID0+IDMuMlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcblx0ICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHQgIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBOQU47XG5cdCAgfVxuXHQgIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcblx0ICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcblx0ICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gb3RoZXIgKyAnJyA6IG90aGVyO1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcblx0ICB9XG5cdCAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpO1xuXHQgIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG5cdCAgcmV0dXJuIGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOCkgOiByZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGRlYm91bmNlO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiAxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9kb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0dmFyIF9jb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBTZWFyY2hFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIFNlYXJjaEVsZW1lbnQoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICBfcmVmJGhhbmRsZVN1Ym1pdCA9IF9yZWYuaGFuZGxlU3VibWl0LFxuXHQgICAgICAgIGhhbmRsZVN1Ym1pdCA9IF9yZWYkaGFuZGxlU3VibWl0ID09PSB1bmRlZmluZWQgPyBmdW5jdGlvbiAoKSB7fSA6IF9yZWYkaGFuZGxlU3VibWl0LFxuXHQgICAgICAgIF9yZWYkc2VhcmNoTGFiZWwgPSBfcmVmLnNlYXJjaExhYmVsLFxuXHQgICAgICAgIHNlYXJjaExhYmVsID0gX3JlZiRzZWFyY2hMYWJlbCA9PT0gdW5kZWZpbmVkID8gJ3NlYXJjaCcgOiBfcmVmJHNlYXJjaExhYmVsLFxuXHQgICAgICAgIF9yZWYkY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcblx0ICAgICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcztcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2VhcmNoRWxlbWVudCk7XG5cdFxuXHQgICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIFsnZ2Vvc2VhcmNoJywgY2xhc3NOYW1lcy5jb250YWluZXJdLmpvaW4oJyAnKSk7XG5cdCAgICB2YXIgZm9ybSA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2Zvcm0nLCBbJycsIGNsYXNzTmFtZXMuZm9ybV0uam9pbignICcpLCBjb250YWluZXIpO1xuXHQgICAgdmFyIGlucHV0ID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnaW5wdXQnLCBbJ2dsYXNzJywgY2xhc3NOYW1lcy5pbnB1dF0uam9pbignICcpLCBmb3JtKTtcblx0XG5cdCAgICBpbnB1dC50eXBlID0gJ3RleHQnO1xuXHQgICAgaW5wdXQucGxhY2Vob2xkZXIgPSBzZWFyY2hMYWJlbDtcblx0XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uSW5wdXQoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uS2V5VXAoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uS2V5UHJlc3MoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uRm9jdXMoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgX3RoaXMub25CbHVyKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHRcblx0ICAgIHRoaXMuZWxlbWVudHMgPSB7IGNvbnRhaW5lcjogY29udGFpbmVyLCBmb3JtOiBmb3JtLCBpbnB1dDogaW5wdXQgfTtcblx0ICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFNlYXJjaEVsZW1lbnQsIFt7XG5cdCAgICBrZXk6ICdvbkZvY3VzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbkZvY3VzKCkge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkodGhpcy5lbGVtZW50cy5mb3JtLCAnYWN0aXZlJyk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb25CbHVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbkJsdXIoKSB7XG5cdCAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKSh0aGlzLmVsZW1lbnRzLmZvcm0sICdhY3RpdmUnKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvblN1Ym1pdCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWJtaXQoZXZlbnQpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgICB2YXIgX2VsZW1lbnRzLCBpbnB1dCwgY29udGFpbmVyO1xuXHRcblx0ICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcblx0ICAgICAgICBfZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzLCBpbnB1dCA9IF9lbGVtZW50cy5pbnB1dCwgY29udGFpbmVyID0gX2VsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2Vycm9yJyk7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlU3VibWl0KHsgcXVlcnk6IGlucHV0LnZhbHVlIH0pLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG5cdCAgICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuXHQgICAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcblx0ICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvbklucHV0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbklucHV0KCkge1xuXHQgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICBpZiAodGhpcy5oYXNFcnJvcikge1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuXHQgICAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uS2V5VXAnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5VXAoZXZlbnQpIHtcblx0ICAgICAgdmFyIF9lbGVtZW50czIgPSB0aGlzLmVsZW1lbnRzLFxuXHQgICAgICAgICAgY29udGFpbmVyID0gX2VsZW1lbnRzMi5jb250YWluZXIsXG5cdCAgICAgICAgICBpbnB1dCA9IF9lbGVtZW50czIuaW5wdXQ7XG5cdFxuXHQgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gX2NvbnN0YW50cy5FU0NBUEVfS0VZKSB7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdFxuXHQgICAgICAgIGlucHV0LnZhbHVlID0gJyc7XG5cdFxuXHQgICAgICAgIGRvY3VtZW50LmJvZHkuZm9jdXMoKTtcblx0ICAgICAgICBkb2N1bWVudC5ib2R5LmJsdXIoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uS2V5UHJlc3MnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5UHJlc3MoZXZlbnQpIHtcblx0ICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IF9jb25zdGFudHMuRU5URVJfS0VZKSB7XG5cdCAgICAgICAgdGhpcy5vblN1Ym1pdChldmVudCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZXRRdWVyeScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UXVlcnkocXVlcnkpIHtcblx0ICAgICAgdmFyIGlucHV0ID0gdGhpcy5lbGVtZW50cy5pbnB1dDtcblx0XG5cdCAgICAgIGlucHV0LnZhbHVlID0gcXVlcnk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gU2VhcmNoRWxlbWVudDtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gU2VhcmNoRWxlbWVudDtcblxuLyoqKi8gfSxcbi8qIDE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0LyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xuXHR2YXIgY3JlYXRlRWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoZWxlbWVudCkge1xuXHQgIHZhciBjbGFzc05hbWVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJztcblx0ICB2YXIgcGFyZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsO1xuXHRcblx0ICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1lbnQpO1xuXHQgIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZXM7XG5cdFxuXHQgIGlmIChwYXJlbnQpIHtcblx0ICAgIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZWw7XG5cdH07XG5cdFxuXHR2YXIgY3JlYXRlU2NyaXB0RWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlU2NyaXB0RWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZVNjcmlwdEVsZW1lbnQodXJsLCBjYikge1xuXHQgIHZhciBzY3JpcHQgPSBjcmVhdGVFbGVtZW50KCdzY3JpcHQnLCBudWxsLCBkb2N1bWVudC5ib2R5KTtcblx0ICBzY3JpcHQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvamF2YXNjcmlwdCcpO1xuXHRcblx0ICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcblx0ICAgIHdpbmRvd1tjYl0gPSBmdW5jdGlvbiAoanNvbikge1xuXHQgICAgICBzY3JpcHQucmVtb3ZlKCk7XG5cdCAgICAgIGRlbGV0ZSB3aW5kb3dbY2JdO1xuXHQgICAgICByZXNvbHZlKGpzb24pO1xuXHQgICAgfTtcblx0XG5cdCAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdzcmMnLCB1cmwpO1xuXHQgIH0pO1xuXHR9O1xuXHRcblx0dmFyIGFkZENsYXNzTmFtZSA9IGV4cG9ydHMuYWRkQ2xhc3NOYW1lID0gZnVuY3Rpb24gYWRkQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuXHQgIGlmIChlbGVtZW50ICYmICFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG5cdCAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcmVtb3ZlQ2xhc3NOYW1lID0gZXhwb3J0cy5yZW1vdmVDbGFzc05hbWUgPSBmdW5jdGlvbiByZW1vdmVDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG5cdCAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuXHQgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9LFxuLyogMTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdHZhciBFTlRFUl9LRVkgPSBleHBvcnRzLkVOVEVSX0tFWSA9IDEzO1xuXHR2YXIgRVNDQVBFX0tFWSA9IGV4cG9ydHMuRVNDQVBFX0tFWSA9IDI3O1xuXHR2YXIgQVJST1dfRE9XTl9LRVkgPSBleHBvcnRzLkFSUk9XX0RPV05fS0VZID0gNDA7XG5cdHZhciBBUlJPV19VUF9LRVkgPSBleHBvcnRzLkFSUk9XX1VQX0tFWSA9IDM4O1xuXHR2YXIgQVJST1dfTEVGVF9LRVkgPSBleHBvcnRzLkFSUk9XX0xFRlRfS0VZID0gMzc7XG5cdHZhciBBUlJPV19SSUdIVF9LRVkgPSBleHBvcnRzLkFSUk9XX1JJR0hUX0tFWSA9IDM5O1xuXHRcblx0dmFyIFNQRUNJQUxfS0VZUyA9IGV4cG9ydHMuU1BFQ0lBTF9LRVlTID0gW0VOVEVSX0tFWSwgRVNDQVBFX0tFWSwgQVJST1dfRE9XTl9LRVksIEFSUk9XX1VQX0tFWSwgQVJST1dfTEVGVF9LRVksIEFSUk9XX1JJR0hUX0tFWV07XG5cbi8qKiovIH0sXG4vKiAxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX2RvbVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgY3ggPSBmdW5jdGlvbiBjeCgpIHtcblx0ICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgY2xhc3NuYW1lcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgY2xhc3NuYW1lc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBjbGFzc25hbWVzLmpvaW4oJyAnKS50cmltKCk7XG5cdH07XG5cdFxuXHR2YXIgUmVzdWx0TGlzdCA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBSZXN1bHRMaXN0KCkge1xuXHQgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgIF9yZWYkaGFuZGxlQ2xpY2sgPSBfcmVmLmhhbmRsZUNsaWNrLFxuXHQgICAgICAgIGhhbmRsZUNsaWNrID0gX3JlZiRoYW5kbGVDbGljayA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZUNsaWNrLFxuXHQgICAgICAgIF9yZWYkY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcblx0ICAgICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcztcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVzdWx0TGlzdCk7XG5cdFxuXHQgICAgX2luaXRpYWxpc2VQcm9wcy5jYWxsKHRoaXMpO1xuXHRcblx0ICAgIHRoaXMucHJvcHMgPSB7IGhhbmRsZUNsaWNrOiBoYW5kbGVDbGljaywgY2xhc3NOYW1lczogY2xhc3NOYW1lcyB9O1xuXHQgICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXHRcblx0ICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBjeCgncmVzdWx0cycsIGNsYXNzTmFtZXMuY29udGFpbmVyKSk7XG5cdCAgICB2YXIgcmVzdWx0SXRlbSA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIGN4KGNsYXNzTmFtZXMuaXRlbSkpO1xuXHRcblx0ICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbGljaywgdHJ1ZSk7XG5cdCAgICB0aGlzLmVsZW1lbnRzID0geyBjb250YWluZXI6IGNvbnRhaW5lciwgcmVzdWx0SXRlbTogcmVzdWx0SXRlbSB9O1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFJlc3VsdExpc3QsIFt7XG5cdCAgICBrZXk6ICdyZW5kZXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgdmFyIHJlc3VsdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdO1xuXHQgICAgICB2YXIgX2VsZW1lbnRzID0gdGhpcy5lbGVtZW50cyxcblx0ICAgICAgICAgIGNvbnRhaW5lciA9IF9lbGVtZW50cy5jb250YWluZXIsXG5cdCAgICAgICAgICByZXN1bHRJdGVtID0gX2VsZW1lbnRzLnJlc3VsdEl0ZW07XG5cdFxuXHQgICAgICB0aGlzLmNsZWFyKCk7XG5cdFxuXHQgICAgICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKHJlc3VsdCwgaWR4KSB7XG5cdCAgICAgICAgdmFyIGNoaWxkID0gcmVzdWx0SXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG5cdCAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKCdkYXRhLWtleScsIGlkeCk7XG5cdCAgICAgICAgY2hpbGQuaW5uZXJIVE1MID0gcmVzdWx0LmxhYmVsO1xuXHQgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5yZXN1bHRzID0gcmVzdWx0cztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZWxlY3QnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdChpbmRleCkge1xuXHQgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZnVzaW5nLWFycm93XG5cdFxuXHQgICAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQsIGlkeCkge1xuXHQgICAgICAgIHJldHVybiBpZHggPT09IGluZGV4ID8gKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJykgOiAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY2hpbGQsICdhY3RpdmUnKTtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICB0aGlzLnNlbGVjdGVkID0gaW5kZXg7XG5cdCAgICAgIHJldHVybiB0aGlzLnJlc3VsdHNbaW5kZXhdO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NvdW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjb3VudCgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMucmVzdWx0cy5sZW5ndGg7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnY2xlYXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkge1xuXHQgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICB0aGlzLnNlbGVjdGVkID0gLTE7XG5cdFxuXHQgICAgICB3aGlsZSAoY29udGFpbmVyLmxhc3RDaGlsZCkge1xuXHQgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIubGFzdENoaWxkKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFJlc3VsdExpc3Q7XG5cdH0oKTtcblx0XG5cdHZhciBfaW5pdGlhbGlzZVByb3BzID0gZnVuY3Rpb24gX2luaXRpYWxpc2VQcm9wcygpIHtcblx0ICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICB0aGlzLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgX3JlZjIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgIHRhcmdldCA9IF9yZWYyLnRhcmdldDtcblx0XG5cdCAgICB2YXIgaGFuZGxlQ2xpY2sgPSBfdGhpcy5wcm9wcy5oYW5kbGVDbGljaztcblx0ICAgIHZhciBjb250YWluZXIgPSBfdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgaWYgKHRhcmdldC5wYXJlbnROb2RlICE9PSBjb250YWluZXIgfHwgIXRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEta2V5JykpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpZHggPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWtleScpO1xuXHQgICAgdmFyIHJlc3VsdCA9IF90aGlzLnJlc3VsdHNbaWR4XTtcblx0ICAgIGhhbmRsZUNsaWNrKHsgcmVzdWx0OiByZXN1bHQgfSk7XG5cdCAgfTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFJlc3VsdExpc3Q7XG5cbi8qKiovIH0sXG4vKiAxNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0dmFyIF9kb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG5cdCAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7XG5cdCAgfXN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7aWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuXHQgIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2VuZHBvaW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcblx0ICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuXHQgICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sLFxuXHQgICAgICAgICAganNvbnAgPSBfcmVmLmpzb25wO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcblx0ICAgICAgICBxdWVyeTogcXVlcnksXG5cdCAgICAgICAganNvbnA6IGpzb25wXG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIHJldHVybiBwcm90b2NvbCArICcvL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvTG9jYXRpb25zPycgKyBwYXJhbVN0cmluZztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcblx0ICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXHRcblx0ICAgICAgaWYgKGRhdGEucmVzb3VyY2VTZXRzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybiBbXTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIGRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcy5tYXAoZnVuY3Rpb24gKHIpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgeDogci5wb2ludC5jb29yZGluYXRlc1sxXSxcblx0ICAgICAgICAgIHk6IHIucG9pbnQuY29vcmRpbmF0ZXNbMF0sXG5cdCAgICAgICAgICBsYWJlbDogci5hZGRyZXNzLmZvcm1hdHRlZEFkZHJlc3MsXG5cdCAgICAgICAgICBib3VuZHM6IFtbci5iYm94WzBdLCByLmJib3hbMV1dLCAvLyBzLCB3XG5cdCAgICAgICAgICBbci5iYm94WzJdLCByLmJib3hbM11dXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NlYXJjaCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKF9yZWYzKSB7XG5cdCAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwganNvbnAsIHVybCwganNvbjtcblx0ICAgICAgICBxdWVyeSA9IF9yZWYzLnF1ZXJ5O1xuXHRcblx0ICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuXHRcblx0ICAgICAgICBqc29ucCA9ICdCSU5HX0pTT05QX0NCXycgKyBEYXRlLm5vdygpO1xuXHQgICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCwganNvbnA6IGpzb25wIH0pO1xuXHRcblx0ICAgICAgICByZXR1cm4gKDAsIF9kb21VdGlscy5jcmVhdGVTY3JpcHRFbGVtZW50KSh1cmwsIGpzb25wKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHQgICAgICAgICAganNvbiA9ICRhd2FpdF8xO1xuXHQgICAgICAgICAgcmV0dXJuICRyZXR1cm4odGhpcy5wYXJzZSh7IGRhdGE6IGpzb24gfSkpO1xuXHQgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSxcbi8qIDE4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cdFxuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZ2V0UGFyYW1TdHJpbmcnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhcmFtU3RyaW5nKHBhcmFtcykge1xuXHQgICAgICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbXNba2V5XSk7XG5cdCAgICAgIH0pLmpvaW4oJyYnKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZWFyY2gnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmKSB7XG5cdCAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwgdXJsLCByZXF1ZXN0LCBqc29uO1xuXHQgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeTtcblx0XG5cdCAgICAgICAgcHJvdG9jb2wgPSB+bG9jYXRpb24ucHJvdG9jb2wuaW5kZXhPZignaHR0cCcpID8gbG9jYXRpb24ucHJvdG9jb2wgOiAnaHR0cHM6Jztcblx0ICAgICAgICB1cmwgPSB0aGlzLmVuZHBvaW50KHsgcXVlcnk6IHF1ZXJ5LCBwcm90b2NvbDogcHJvdG9jb2wgfSk7XG5cdFxuXHQgICAgICAgIHJldHVybiBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG5cdCAgICAgICAgICByZXF1ZXN0ID0gJGF3YWl0XzE7XG5cdCAgICAgICAgICByZXR1cm4gcmVxdWVzdC5qc29uKCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzIpIHtcblx0ICAgICAgICAgICAganNvbiA9ICRhd2FpdF8yO1xuXHQgICAgICAgICAgICByZXR1cm4gJHJldHVybih0aGlzLnBhcnNlKHsgZGF0YToganNvbiB9KSk7XG5cdCAgICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBQcm92aWRlcjtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cbi8qKiovIH0sXG4vKiAxOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcblx0ICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG5cdCAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG5cdCAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1yZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9wcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0dmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG5cdCAgaWYgKCFzZWxmKSB7XG5cdCAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG5cdCAgfXJldHVybiBjYWxsICYmICgodHlwZW9mIGNhbGwgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG5cdCAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihzdXBlckNsYXNzKSkpO1xuXHQgIH1zdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pO2lmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcblx0fVxuXHRcblx0dmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcblx0ICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXHRcblx0ICBmdW5jdGlvbiBQcm92aWRlcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG5cdCAgICBrZXk6ICdlbmRwb2ludCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG5cdCAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcblx0ICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblx0XG5cdCAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG5cdCAgICAgICAgZjogJ2pzb24nLFxuXHQgICAgICAgIHRleHQ6IHF1ZXJ5XG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIHJldHVybiBwcm90b2NvbCArICcvL2dlb2NvZGUuYXJjZ2lzLmNvbS9hcmNnaXMvcmVzdC9zZXJ2aWNlcy9Xb3JsZC9HZW9jb2RlU2VydmVyL2ZpbmQ/JyArIHBhcmFtU3RyaW5nO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BhcnNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuXHQgICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cdFxuXHQgICAgICByZXR1cm4gZGF0YS5sb2NhdGlvbnMubWFwKGZ1bmN0aW9uIChyKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHg6IHIuZmVhdHVyZS5nZW9tZXRyeS54LFxuXHQgICAgICAgICAgeTogci5mZWF0dXJlLmdlb21ldHJ5LnksXG5cdCAgICAgICAgICBsYWJlbDogci5uYW1lLFxuXHQgICAgICAgICAgYm91bmRzOiBbW3IuZXh0ZW50LnltaW4sIHIuZXh0ZW50LnhtaW5dLCAvLyBzLCB3XG5cdCAgICAgICAgICBbci5leHRlbnQueW1heCwgci5leHRlbnQueG1heF1dLFxuXHQgICAgICAgICAgcmF3OiByXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9LFxuLyogMjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcblx0ICB9c3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTtpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG5cdCAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblx0XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZW5kcG9pbnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG5cdCAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblx0XG5cdCAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuXHQgICAgICAgIGFkZHJlc3M6IHF1ZXJ5XG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIC8vIGdvb2dsZSByZXF1aXJlcyBhIHNlY3VyZSBjb25uZWN0aW9uIHdoZW4gdXNpbmcgYXBpIGtleXNcblx0ICAgICAgdmFyIHByb3RvID0gcGFyYW1zICYmIHBhcmFtcy5rZXkgPyAnaHR0cHM6JyA6IHByb3RvY29sO1xuXHQgICAgICByZXR1cm4gcHJvdG8gKyAnLy9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbj8nICsgcGFyYW1TdHJpbmc7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncGFyc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG5cdCAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblx0XG5cdCAgICAgIHJldHVybiBkYXRhLnJlc3VsdHMubWFwKGZ1bmN0aW9uIChyKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHg6IHIuZ2VvbWV0cnkubG9jYXRpb24ubG5nLFxuXHQgICAgICAgICAgeTogci5nZW9tZXRyeS5sb2NhdGlvbi5sYXQsXG5cdCAgICAgICAgICBsYWJlbDogci5mb3JtYXR0ZWRfYWRkcmVzcyxcblx0ICAgICAgICAgIGJvdW5kczogW1tyLmdlb21ldHJ5LnZpZXdwb3J0LnNvdXRod2VzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0LmxuZ10sIC8vIHMsIHdcblx0ICAgICAgICAgIFtyLmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0LmxuZ11dLFxuXHQgICAgICAgICAgcmF3OiByXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9LFxuLyogMjEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcblx0ICB9c3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTtpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG5cdCAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblx0XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZW5kcG9pbnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG5cdCAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblx0XG5cdCAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuXHQgICAgICAgIGZvcm1hdDogJ2pzb24nLFxuXHQgICAgICAgIHE6IHF1ZXJ5XG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIHJldHVybiBwcm90b2NvbCArICcvL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2g/JyArIHBhcmFtU3RyaW5nO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BhcnNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuXHQgICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cdFxuXHQgICAgICByZXR1cm4gZGF0YS5tYXAoZnVuY3Rpb24gKHIpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgeDogci5sb24sXG5cdCAgICAgICAgICB5OiByLmxhdCxcblx0ICAgICAgICAgIGxhYmVsOiByLmRpc3BsYXlfbmFtZSxcblx0ICAgICAgICAgIGJvdW5kczogW1twYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMF0pLCBwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMl0pXSwgLy8gcywgd1xuXHQgICAgICAgICAgW3BhcnNlRmxvYXQoci5ib3VuZGluZ2JveFsxXSksIHBhcnNlRmxvYXQoci5ib3VuZGluZ2JveFszXSldXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSxcbi8qIDIyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuR2V0QWN0aXZlTGF5ZXJHcm91cHMgPSBHZXRBY3RpdmVMYXllckdyb3Vwcztcblx0ZXhwb3J0cy5TZXR1cFBhbmVsID0gU2V0dXBQYW5lbDtcblx0ZXhwb3J0cy51cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0ID0gdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodDtcblx0XG5cdHZhciBfbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0XG5cdHZhciBfb3BhY2l0eVNsaWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIGxheWVyR3JvdXBMYXlvdXQgPSBbXTtcblx0XG5cdGZ1bmN0aW9uIEdldEFjdGl2ZUxheWVyR3JvdXBzKCkge1xuXHQgICAgcmV0dXJuIGxheWVyR3JvdXBMYXlvdXQuZmlsdGVyKGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyR3JvdXAuYWN0aXZlO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFNldHVwUGFuZWwobGF5ZXJzLCBsYXlvdXQpIHtcblx0ICAgIGxheWVyR3JvdXBMYXlvdXQgPSBsYXlvdXRbJ2xheWVyLWdyb3Vwcy1vcmRlciddO1xuXHQgICAgdmFyIGxheWVyR3JvdXBzID0gbWFrZUxheWVyR3JvdXBzKGxheW91dFsnbGF5ZXItZ3JvdXBzLW9yZGVyJ10pO1xuXHQgICAgbWFrZUxheWVyRWxlbXMobGF5ZXJHcm91cHMsIGxheWVycyk7XG5cdCAgICBtYWtlUGFuZWxEcmFnZ2FibGUoKTtcblx0ICAgIHNldFBhbmVsU2Nyb2xsSGFuZGxlcigpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBicm93c2VySXNJbnRlcm5ldEV4cGxvcmVyKCkge1xuXHQgICAgdmFyIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7XG5cdCAgICByZXR1cm4gdWEuaW5kZXhPZignTVNJRScpID4gLTEgfHwgdWEuaW5kZXhPZigncnY6MTEuMCcpID4gLTE7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldFBhbmVsU2Nyb2xsSGFuZGxlcigpIHtcblx0ICAgIHZhciBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpO1xuXHQgICAgcGFuZWwub25zY3JvbGwgPSB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlUGFuZWxEcmFnZ2FibGUoKSB7XG5cdCAgICBpZiAoYnJvd3NlcklzSW50ZXJuZXRFeHBsb3JlcigpKSByZXR1cm47XG5cdFxuXHQgICAgdmFyIG92ZXJsYXkgPSBkMy5zZWxlY3QoJyNyaWdodC1wYW5lbC1kcmFnLW92ZXJsYXknKTtcblx0XG5cdCAgICBvdmVybGF5LnN0eWxlKCdjdXJzb3InLCAnZXctcmVzaXplJyk7XG5cdFxuXHQgICAgb3ZlcmxheS5jYWxsKGQzLmRyYWcoKS5vbignZHJhZycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBwYW5lbERyYWdFdmVudEhhbmRsZXIuY2FsbCh0aGlzKTtcblx0ICAgIH0pKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGFuZWxEcmFnRXZlbnRIYW5kbGVyKCkge1xuXHQgICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpO1xuXHQgICAgdXBkYXRlUGFuZWxXaWR0aCgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KCkge1xuXHQgICAgdmFyIHBhbmVsID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwnKTtcblx0ICAgIHZhciBwYW5lbE9mZnNldEhlaWdodCA9IHBhbmVsLnByb3BlcnR5KCdvZmZzZXRIZWlnaHQnKTtcblx0ICAgIHZhciBwYW5lbERyYWdPdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsLWRyYWctb3ZlcmxheScpO1xuXHQgICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbC1oZWFkZXInKTtcblx0XG5cdCAgICB2YXIgbmV3SGVpZ2h0O1xuXHRcblx0ICAgIGlmIChwYW5lbC5jbGFzc2VkKCdncmFwaHMtYWN0aXZlJykpIHtcblx0ICAgICAgICB2YXIgZ3JhcGhMaXN0RXh0cmFTcGFjZSA9IDcwMDtcblx0ICAgICAgICB2YXIgZ3JhcGhMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyYXBoLWxpc3QnKTtcblx0ICAgICAgICBuZXdIZWlnaHQgPSBoZWFkZXIuc2Nyb2xsSGVpZ2h0ICsgZ3JhcGhMaXN0LnNjcm9sbEhlaWdodCArIGdyYXBoTGlzdEV4dHJhU3BhY2U7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIHBhbmVsLmNsYXNzZWQoJ2xheWVycy1hY3RpdmUnKVxuXHQgICAgICAgIHZhciBsYXllckxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGF5ZXItbGlzdCcpO1xuXHQgICAgICAgIG5ld0hlaWdodCA9IGhlYWRlci5zY3JvbGxIZWlnaHQgKyBsYXllckxpc3Quc2Nyb2xsSGVpZ2h0O1xuXHQgICAgfVxuXHQgICAgbmV3SGVpZ2h0ID0gbmV3SGVpZ2h0ID4gcGFuZWxPZmZzZXRIZWlnaHQgPyBcIlwiICsgbmV3SGVpZ2h0ICsgJ3B4JyA6IG51bGw7XG5cdCAgICBwYW5lbERyYWdPdmVybGF5LnN0eWxlLmhlaWdodCA9IG5ld0hlaWdodDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlUGFuZWxXaWR0aCgpIHtcblx0ICAgIHZhciBwYW5lbCA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsJyk7XG5cdCAgICB2YXIgcGFuZWxNaW5XaWR0aCA9ICtwYW5lbC5zdHlsZSgnbWluLXdpZHRoJykuc2xpY2UoMCwgLTIpO1xuXHQgICAgdmFyIHBhbmVsQ2xpZW50V2lkdGggPSBwYW5lbC5wcm9wZXJ0eSgnY2xpZW50V2lkdGgnKTtcblx0XG5cdCAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3cmFwcGVyJyk7XG5cdCAgICB2YXIgd3JhcHBlcldpZHRoID0gd3JhcHBlci5jbGllbnRXaWR0aDtcblx0XG5cdCAgICB2YXIgbWFwV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtd3JhcHBlcicpO1xuXHRcblx0ICAgIHZhciBtb3VzZVggPSBkMy5ldmVudC5zb3VyY2VFdmVudC54O1xuXHQgICAgdmFyIHhEZWx0YSA9IHdyYXBwZXJXaWR0aCAtIG1vdXNlWCAtIHBhbmVsQ2xpZW50V2lkdGg7XG5cdFxuXHQgICAgdmFyIG5ld1BhbmVsV2lkdGggPSBwYW5lbENsaWVudFdpZHRoICsgeERlbHRhO1xuXHQgICAgbmV3UGFuZWxXaWR0aCA9IG5ld1BhbmVsV2lkdGggPCBwYW5lbE1pbldpZHRoID8gcGFuZWxNaW5XaWR0aCA6IG5ld1BhbmVsV2lkdGggPiB3cmFwcGVyV2lkdGggPyB3cmFwcGVyV2lkdGggOiBuZXdQYW5lbFdpZHRoO1xuXHQgICAgbWFwV3JhcHBlci5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIlwiICsgbmV3UGFuZWxXaWR0aCArICdweCc7XG5cdCAgICBwYW5lbC5zdHlsZSgnd2lkdGgnLCBcIlwiICsgbmV3UGFuZWxXaWR0aCArICdweCcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGF5ZXJHcm91cHMobGF5b3V0KSB7XG5cdCAgICByZXR1cm4gZDMuc2VsZWN0KCcjbGF5ZXItbGlzdCcpLnNlbGVjdEFsbCgnLmxheWVyLWdyb3VwLXdyYXBwZXInKS5kYXRhKGxheW91dCkuZW50ZXIoKS5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwLXdyYXBwZXInKS5hdHRyKCdpZCcsIGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyR3JvdXAuaWQ7XG5cdCAgICB9KS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgIHJldHVybiBsYXllckdyb3VwLmFjdGl2ZTtcblx0ICAgIH0pLmVhY2goZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0ICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cC1idG4gYnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0XG5cdCAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvZ2dsZSB0aGUgbGF5ZXIgbGlzdCBhY2NvcmRpYW5zXG5cdCAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2xheWVyIGxpc3QnLFxuXHQgICAgICAgICAgICAgICAgZXZlbnRBY3Rpb246ICd0b2dnbGUgJyArICFsYXllckdyb3VwLmFjdGl2ZSxcblx0ICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6IGxheWVyR3JvdXAubmFtZSxcblx0ICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICAgIGxheWVyR3JvdXAuYWN0aXZlID0gIWxheWVyR3JvdXAuYWN0aXZlO1xuXHQgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gbGF5ZXJHcm91cC5hY3RpdmU7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KCk7XG5cdCAgICAgICAgICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdCAgICAgICAgfSkudGV4dChsYXllckdyb3VwLm5hbWUpO1xuXHQgICAgfSkuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cCcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGF5ZXJFbGVtcyhsYXllckdyb3VwcywgbGF5ZXJzKSB7XG5cdCAgICBsYXllckdyb3Vwcy5zZWxlY3RBbGwoJy5sYXllci1zZWxlY3QnKS5kYXRhKGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyc1tsYXllckdyb3VwLmlkXTtcblx0ICAgIH0pLmVudGVyKCkuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1zZWxlY3QnKS5lYWNoKGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHZhciBncm91cE5hbWUgPSB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZDtcblx0ICAgICAgICB2YXIgbGF5ZXJEaXYgPSBkMy5zZWxlY3QodGhpcyk7XG5cdCAgICAgICAgbWFrZUNoZWNrYm94KGxheWVyLCBsYXllckRpdik7XG5cdCAgICAgICAgbWFrZUxhYmVsKGxheWVyLCBsYXllckRpdik7XG5cdCAgICAgICAgbWFrZURlc2NyaXB0aW9uKGxheWVyLCBsYXllckRpdik7XG5cdCAgICAgICAgbGF5ZXJEaXYubm9kZSgpLmFwcGVuZENoaWxkKG1ha2VMYXllclRvb2xzKGxheWVyKSk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUNoZWNrYm94KGxheWVyLCBsYXllckRpdikge1xuXHQgICAgbGF5ZXJEaXYuYXBwZW5kKCdpbnB1dCcpLmF0dHIoJ3R5cGUnLCAnY2hlY2tib3gnKS5hdHRyKCdpZCcsIGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHJldHVybiBsYXllci5pZDtcblx0ICAgIH0pLmF0dHIoJ2NoZWNrZWQnLCBmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXIuYWN0aXZlID8gJ2NoZWNrZWQnIDogbnVsbDtcblx0ICAgIH0pLm9uKCdjbGljaycsIGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgICgwLCBfbGF5ZXIudG9nZ2xlTGF5ZXIpKGxheWVyKTtcblx0ICAgICAgICBsYXllckRpdi5zZWxlY3QoJy5sYXllci10b29scy13cmFwcGVyJykuY2xhc3NlZCgnYWN0aXZlJywgbGF5ZXIuYWN0aXZlKTtcblx0ICAgICAgICBpZiAobGF5ZXIuYWN0aXZlKSB7XG5cdCAgICAgICAgICAgIHZhciBzbGlkZXJIYW5kbGUgPSBsYXllckRpdi5zZWxlY3QoJy5vcGFjaXR5LXNsaWRlci1oYW5kbGUnKS5ub2RlKCk7XG5cdCAgICAgICAgICAgICgwLCBfb3BhY2l0eVNsaWRlci5zZXRPcGFjaXR5U2xpZGVyUG9zaXRpb24pKGxheWVyLCBzbGlkZXJIYW5kbGUsIGxheWVyLm9wYWNpdGl5KTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxhYmVsKGxheWVyLCBsYXllckRpdikge1xuXHQgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1sYWJlbC13cmFwcGVyJykuYXBwZW5kKCdsYWJlbCcpLmF0dHIoJ2ZvcicsIGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHJldHVybiBsYXllci5pZDtcblx0ICAgIH0pLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWxhYmVsJykuaHRtbChmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXIubmFtZTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlRGVzY3JpcHRpb24obGF5ZXIsIGxheWVyRGl2KSB7XG5cdCAgICBpZiAobGF5ZXIuaW5mbyAmJiBsYXllci5pbmZvICE9PSAnJykge1xuXHQgICAgICAgIGxheWVyRGl2LmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby1idG4td3JhcHBlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMucGFyZW50Tm9kZSkuc2VsZWN0KCcubGF5ZXItaW5mby13cmFwcGVyJykuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKCkge1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIGxheWVyIGluZm9cblx0ICAgICAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdsYXllciBpbmZvJyxcblx0ICAgICAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrZWQnLFxuXHQgICAgICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6IGxheWVyLm5hbWUgKyBcIiBcIiArICFkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnYWN0aXZlJyksXG5cdCAgICAgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gIWQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdhY3RpdmUnKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSkuYXBwZW5kKCdpbWcnKS5hdHRyKCdjbGFzcycsICdsYXllci1pbmZvLWljb24nKS5hdHRyKCdzcmMnLCAnaW1ncy9tb3JlLWluZm8taWNvbi02NHg2NC5wbmcnKS5hdHRyKFwiYWx0XCIsIFwiUmVhZCBtb3JlIGFib3V0IHRoZSBcIiArIGxheWVyLm5hbWUgKyBcIiBsYXllclwiKS5hdHRyKFwidGl0bGVcIiwgXCJSZWFkIG1vcmUgYWJvdXQgdGhlIFwiICsgbGF5ZXIubmFtZSArIFwiIGxheWVyXCIpO1xuXHRcblx0ICAgICAgICBsYXllckRpdi5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8td3JhcHBlcicpLnRleHQoZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBsYXllci5pbmZvO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGF5ZXJUb29scyhsYXllciwgbGF5ZXJEaXYpIHtcblx0ICAgIHZhciBsYXllclRvb2xzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICBsYXllclRvb2xzRGl2LmNsYXNzTGlzdC5hZGQoJ2xheWVyLXRvb2xzLXdyYXBwZXInKTtcblx0ICAgIGlmIChsYXllci5hY3RpdmUpIGxheWVyVG9vbHNEaXYuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cdFxuXHQgICAgdmFyIG9wYWNpdHlTbGlkZXIgPSAoMCwgX29wYWNpdHlTbGlkZXIubWFrZU9wYWNpdHlTbGlkZXIpKGxheWVyKTtcblx0ICAgIHZhciBsZWdlbmQgPSBtYWtlTGVnZW5kKGxheWVyKTtcblx0XG5cdCAgICBsYXllclRvb2xzRGl2LmFwcGVuZENoaWxkKGxlZ2VuZCk7XG5cdCAgICBsYXllclRvb2xzRGl2LmFwcGVuZENoaWxkKG9wYWNpdHlTbGlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBsYXllclRvb2xzRGl2O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGVnZW5kKGxheWVyLCBsYXllclRvb2xzV3JhcHBlcikge1xuXHQgICAgdmFyIGxlZ2VuZFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIHZhciBsZWdlbmRJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblx0ICAgIGxlZ2VuZFdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnbGVnZW5kLXdyYXBwZXInKTtcblx0ICAgIGxlZ2VuZEltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGxheWVyLmxlZ2VuZCk7XG5cdCAgICBsZWdlbmRXcmFwcGVyLmFwcGVuZENoaWxkKGxlZ2VuZEltZyk7XG5cdCAgICByZXR1cm4gbGVnZW5kV3JhcHBlcjtcblx0fVxuXG4vKioqLyB9LFxuLyogMjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5HZXRDdXJyZW50TGF5ZXJzID0gR2V0Q3VycmVudExheWVycztcblx0ZXhwb3J0cy5DcmVhdGVEZWZhdWx0TGF5ZXJzID0gQ3JlYXRlRGVmYXVsdExheWVycztcblx0ZXhwb3J0cy50b2dnbGVMYXllciA9IHRvZ2dsZUxheWVyO1xuXHRleHBvcnRzLmVuYWJsZUxheWVyID0gZW5hYmxlTGF5ZXI7XG5cdGV4cG9ydHMuZGlzYWJsZUxheWVyID0gZGlzYWJsZUxheWVyO1xuXHRleHBvcnRzLnVwZGF0ZUxheWVyT3BhY2l0eSA9IHVwZGF0ZUxheWVyT3BhY2l0eTtcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHQvKipcclxuXHQgKiBOZWVkZWQgZm9yIHRoZSBzaGFyZSB1cmwgc2luY2UgTGVhZmxldCBkb2VzIG5vdCBoYXZlIGEgZGVmYXVsdCB3YXkgdG8gc3VyZmFjZVxyXG5cdCAqIHRoZSBvcmRlciBvZiBsYXllcnMgaW4gdGhlIG1hcFxyXG5cdCAqL1xuXHR2YXIgX2N1cnJlbnRfbGF5ZXJzID0gW107XG5cdHZhciBfY3VycmVudF9sYXllcnNfb2JqZWN0cyA9IFtdO1xuXHRcblx0LyoqXHJcblx0ICogTm90ZTogbGF5ZXIgaXMgbm90IHRoZSBsZWFmbGV0IGNvbmNlcHQgb2YgYSBsYXllciwgYnV0IHJhdGhlciB0aGUgaW50ZXJuYWxcclxuXHQgKiAgICAgICBvYmplY3Qgd2hpY2ggdHJhY2tzIHRoZW0uIGxheWVyLm1hcExheWVyIGlzIHRoZSBwb2ludGVyIHRvIHRoZVxyXG5cdCAqICAgICAgIGxlYWZsZXQgbGF5ZXIuXHJcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBHZXRDdXJyZW50TGF5ZXJzKCkge1xuXHQgICAgcmV0dXJuIF9jdXJyZW50X2xheWVycztcblx0fVxuXHRcblx0ZnVuY3Rpb24gQ3JlYXRlRGVmYXVsdExheWVycyhsYXllcnMsIGRlZmF1bHRMYXllcnMpIHtcblx0ICAgIHZhciBpLCBqLCBwcm9wLCBsYXllcmdyb3VwO1xuXHQgICAgdmFyIGRlZmF1bHRMYXllcjtcblx0ICAgIHZhciBmb3VuZExheWVyO1xuXHRcblx0ICAgIGlmICghZGVmYXVsdExheWVycyB8fCBkZWZhdWx0TGF5ZXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBkZWZhdWx0TGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZm91bmRMYXllciA9IGZhbHNlO1xuXHQgICAgICAgIGRlZmF1bHRMYXllciA9IGRlZmF1bHRMYXllcnNbaV07XG5cdCAgICAgICAgZm9yIChwcm9wIGluIGxheWVycykge1xuXHQgICAgICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xuXHQgICAgICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xuXHQgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGF5ZXJncm91cC5sZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgICAgICAgaWYgKGxheWVyZ3JvdXBbal0uaWQgPT09IGRlZmF1bHRMYXllcikge1xuXHQgICAgICAgICAgICAgICAgICAgIGVuYWJsZUxheWVyKGxheWVyZ3JvdXBbal0pO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvdW5kTGF5ZXIgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChmb3VuZExheWVyKSBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvZ2dsZUxheWVyKGxheWVyKSB7XG5cdCAgICBpZiAoIWxheWVyLmFjdGl2ZSkge1xuXHQgICAgICAgIGVuYWJsZUxheWVyKGxheWVyKTtcblx0XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgdG9nZ2xlIHRoZSBsYXllciBvblxuXHQgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbGF5ZXInLFxuXHQgICAgICAgICAgICBldmVudEFjdGlvbjogJ3RvZ2dsZSBvbicsXG5cdCAgICAgICAgICAgIGV2ZW50TGFiZWw6IGxheWVyLm5hbWUsXG5cdCAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBkaXNhYmxlTGF5ZXIobGF5ZXIpO1xuXHRcblx0ICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyB0b2dnbGUgdGhlIGxheWVyIG9mZlxuXHQgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbGF5ZXInLFxuXHQgICAgICAgICAgICBldmVudEFjdGlvbjogJ3RvZ2dsZSBvZmYnLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiBsYXllci5uYW1lLFxuXHQgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICB9KTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZW5hYmxlTGF5ZXIobGF5ZXIpIHtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHQgICAgbGF5ZXIuYWN0aXZlID0gdHJ1ZTtcblx0ICAgIGxheWVyLm1hcExheWVyID0gbGF5ZXIubWFwTGF5ZXIgfHwgbWFrZVdtc1RpbGVMYXllcihsYXllcik7XG5cdCAgICBtYXAuYWRkTGF5ZXIobGF5ZXIubWFwTGF5ZXIpO1xuXHQgICAgYWRkTGF5ZXJUb0ludGVybmFsVHJhY2tlcihsYXllcik7XG5cdCAgICBtb3ZlT3ZlcmxheUxheWVyc1RvVG9wKCk7XG5cdCAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtb3ZlT3ZlcmxheUxheWVyc1RvVG9wKCkge1xuXHQgICAgdmFyIGxheWVyO1xuXHQgICAgdmFyIGksIGw7XG5cdFxuXHQgICAgZm9yIChpID0gMCwgbCA9IF9jdXJyZW50X2xheWVyc19vYmplY3RzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGxheWVyID0gX2N1cnJlbnRfbGF5ZXJzX29iamVjdHNbaV07XG5cdCAgICAgICAgaWYgKGxheWVyLnR5cGUgPT09IFwib3ZlcmxheVwiKSBsYXllci5tYXBMYXllci5icmluZ1RvRnJvbnQoKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkTGF5ZXJUb0ludGVybmFsVHJhY2tlcihsYXllcikge1xuXHQgICAgX2N1cnJlbnRfbGF5ZXJzLnB1c2gobGF5ZXIuaWQpO1xuXHQgICAgX2N1cnJlbnRfbGF5ZXJzX29iamVjdHMucHVzaChsYXllcik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRpc2FibGVMYXllcihsYXllcikge1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkdldE1hcCkoKTtcblx0XG5cdCAgICBsYXllci5hY3RpdmUgPSBmYWxzZTtcblx0ICAgIGlmIChsYXllci5tYXBMYXllciAmJiBtYXAuaGFzTGF5ZXIobGF5ZXIubWFwTGF5ZXIpKSB7XG5cdCAgICAgICAgbWFwLnJlbW92ZUxheWVyKGxheWVyLm1hcExheWVyKTtcblx0ICAgIH1cblx0ICAgIHJlbW92ZUxheWVyRnJvbUludGVybmFsVHJhY2tlcihsYXllcik7XG5cdCAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIobGF5ZXIpIHtcblx0ICAgIHZhciBsb2MgPSBfY3VycmVudF9sYXllcnMuaW5kZXhPZihsYXllci5pZCk7XG5cdCAgICBpZiAobG9jID09PSAtMSkgcmV0dXJuO1xuXHQgICAgX2N1cnJlbnRfbGF5ZXJzLnNwbGljZShsb2MsIDEpO1xuXHQgICAgX2N1cnJlbnRfbGF5ZXJzX29iamVjdHMuc3BsaWNlKGxvYywgMSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZUxheWVyT3BhY2l0eShsYXllciwgbmV3T3BhY2l0eSkge1xuXHQgICAgbGF5ZXIub3BhY2l0eSA9IG5ld09wYWNpdHk7XG5cdCAgICBsYXllci5tYXBMYXllci5zZXRPcGFjaXR5KG5ld09wYWNpdHkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlV21zVGlsZUxheWVyKGxheWVyKSB7XG5cdCAgICByZXR1cm4gTC50aWxlTGF5ZXIud21zKGxheWVyLnVybCwge1xuXHQgICAgICAgIGxheWVyczogbGF5ZXIuaWQsXG5cdCAgICAgICAgdHJhbnNwYXJlbnQ6IGxheWVyLnRyYW5zcGFyZW50IHx8IHRydWUsXG5cdCAgICAgICAgdmVyc2lvbjogbGF5ZXIudmVyc2lvbiB8fCAnMS4zLjAnLFxuXHQgICAgICAgIGNyczogbGF5ZXIuY3JzIHx8IEwuQ1JTLkVQU0c5MDA5MTMsXG5cdCAgICAgICAgZm9ybWF0OiBsYXllci5mb3JtYXQgfHwgJ2ltYWdlL3BuZycsXG5cdCAgICAgICAgb3BhY2l0eTogbGF5ZXIub3BhY2l0eSB8fCAuNzUsXG5cdCAgICAgICAgdGlsZVNpemU6IGxheWVyLnRpbGVTaXplIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwXCIpLmNsaWVudFdpZHRoXG5cdCAgICB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5DcmVhdGVNYXAgPSBDcmVhdGVNYXA7XG5cdGV4cG9ydHMuR2V0TWFwID0gR2V0TWFwO1xuXHR2YXIgbWFwO1xuXHRcblx0ZnVuY3Rpb24gQ3JlYXRlTWFwKG1hcENvbmZpZykge1xuXHQgICAgY29uc29sZS5sb2cobWFwQ29uZmlnKTtcblx0ICAgIHZhciBpZCA9IG1hcENvbmZpZy5pZCB8fCBcIm1hcFwiO1xuXHQgICAgdmFyIG9wdGlvbnMgPSBtYXBDb25maWcub3B0aW9ucyB8fCB7IFwic2Nyb2xsV2hlZWxab29tXCI6IGZhbHNlIH07XG5cdCAgICB2YXIgaW5pdGlhbENlbnRlciA9IG1hcENvbmZpZy5jZW50ZXIgfHwgW1wiMzguNVwiLCBcIi04MVwiXTtcblx0ICAgIHZhciBpbml0aWFsWm9vbSA9IG1hcENvbmZpZy56b29tIHx8IDY7XG5cdFxuXHQgICAgbWFwID0gTC5tYXAoaWQsIG9wdGlvbnMpLnNldFZpZXcoaW5pdGlhbENlbnRlciwgaW5pdGlhbFpvb20pO1xuXHQgICAgTC5jb250cm9sLmF0dHJpYnV0aW9uKCkuYWRkVG8obWFwKTtcblx0XG5cdCAgICB2YXIgbGVhZmxldFpvb21JbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJsZWFmbGV0LWNvbnRyb2wtem9vbS1pblwiKVswXTtcblx0XG5cdCAgICBsZWFmbGV0Wm9vbUluLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIHNlYWNyY2ggYnkgYWRkcmVzc1xuXHQgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcblx0ICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljayBidXR0b24nLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiAnem9vbSBpbicsXG5cdCAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgIH0pO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIGxlYWZsZXRab29tT3V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImxlYWZsZXQtY29udHJvbC16b29tLW91dFwiKVswXTtcblx0XG5cdCAgICBsZWFmbGV0Wm9vbU91dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBzZWFjcmNoIGJ5IGFkZHJlc3Ncblx0ICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdCAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2sgYnV0dG9uJyxcblx0ICAgICAgICAgICAgZXZlbnRMYWJlbDogJ3pvb20gb3V0Jyxcblx0ICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgfSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICBtYXAub24oXCJkcmFnZW5kXCIsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIGRyYWcgKHBhbikgZW5kXG5cdCAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuXHQgICAgICAgICAgICBldmVudEFjdGlvbjogJ2RyYWcnLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiBKU09OLnN0cmluZ2lmeShtYXAuZ2V0Qm91bmRzKCkpLFxuXHQgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogdHJ1ZVxuXHQgICAgICAgIH0pO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgbWFwLm9uKFwiem9vbWVuZFwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciB6b29tIGVuZFxuXHQgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcblx0ICAgICAgICAgICAgZXZlbnRBY3Rpb246ICd6b29tJyxcblx0ICAgICAgICAgICAgZXZlbnRMYWJlbDogSlNPTi5zdHJpbmdpZnkobWFwLmdldEJvdW5kcygpKSxcblx0ICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IHRydWVcblx0ICAgICAgICB9KTtcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIG1hcDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gR2V0TWFwKCkge1xuXHQgICAgcmV0dXJuIG1hcDtcblx0fVxuXG4vKioqLyB9LFxuLyogMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQmluZFVwZGF0ZVNoYXJlVXJsID0gQmluZFVwZGF0ZVNoYXJlVXJsO1xuXHRleHBvcnRzLnVwZGF0ZVNoYXJlVXJsID0gdXBkYXRlU2hhcmVVcmw7XG5cdGV4cG9ydHMuQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnID0gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnO1xuXHRleHBvcnRzLkJpbmRDb3B5TGlua0V2ZW50cyA9IEJpbmRDb3B5TGlua0V2ZW50cztcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX2Jhc2VsYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRcblx0dmFyIF9sYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0dmFyIF9wb2kgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdHZhciBfcGFuZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0XG5cdGZ1bmN0aW9uIEJpbmRVcGRhdGVTaGFyZVVybChtYXApIHtcblx0ICAgIG1hcC5vbihcIm1vdmVlbmRcIiwgdXBkYXRlU2hhcmVVcmwpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVTaGFyZVVybChlKSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIHZhciBwYXJhbXMgPSBbbWFrZUNlbnRlclN0cmluZyhtYXApLCBtYWtlWm9vbVN0cmluZyhtYXApLCBtYWtlTGF5ZXJTdHJpbmcobWFwKSwgbWFrZUxheWVyR3JvdXBzU3RyaW5nKCksIG1ha2VCYXNlTGF5ZXJTdHJpbmcobWFwKSwgbWFrZVBvaW50c09mSW50ZXJlc3RTdHJpbmcoKSwgbWFrZUFjdGl2ZVRhYlN0cmluZygpLCBtYWtlQWN0aXZlR3JhcGhUYWJTdHJpbmcoKV07XG5cdFxuXHQgICAgc2V0U2hhcmVVcmwobWFrZVNoYXJlVXJsKHBhcmFtcykpO1xuXHQgICAgc2V0Q29weUxpbmtVcmwoKTtcblx0ICAgIHNldFNvY2lhbFVybHMoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnKGNvbmZpZykge1xuXHQgICAgdmFyIHNoYXJlID0gcGFyc2VTaGFyZVVybCgpO1xuXHQgICAgaWYgKCFzaGFyZSkgcmV0dXJuO1xuXHQgICAgaWYgKHNoYXJlLmNlbnRlcikgY29uZmlnLm1hcC5jZW50ZXIgPSBzaGFyZS5jZW50ZXI7XG5cdCAgICBpZiAoc2hhcmUuem9vbSkgY29uZmlnLm1hcC56b29tID0gc2hhcmUuem9vbTtcblx0ICAgIGlmIChzaGFyZS5sYXllcnMpIGFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5sYXllcnMsIGNvbmZpZyk7XG5cdCAgICBpZiAoc2hhcmUuYmFzZWxheWVycykgYWRkQmFzZUxheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5iYXNlbGF5ZXJzLCBjb25maWcpO1xuXHQgICAgaWYgKHNoYXJlLnBvaXMpIGFkZFBvaW50c09mSW50ZXJlc3RUb0NvbmZpZyhzaGFyZS5wb2lzLCBjb25maWcpO1xuXHQgICAgaWYgKHNoYXJlLnRhYikgY29uZmlnLnRhYiA9IHNoYXJlLnRhYjtcblx0ICAgIGlmIChzaGFyZS5ncmFwaCkgY29uZmlnLmdyYXBoID0gc2hhcmUuZ3JhcGg7XG5cdCAgICBpZiAoc2hhcmUubGF5ZXJHcm91cHMpIGNvbmZpZy5sYXllckdyb3VwcyA9IGFkZExheWVyR3JvdXBTZXR0aW5nc1RvQ29uZmlnKHNoYXJlLmxheWVyR3JvdXBzLCBjb25maWcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlU2hhcmVVcmwocGFyYW1zKSB7XG5cdCAgICByZXR1cm4gXCI/XCIgKyBwYXJhbXMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7XG5cdCAgICAgICAgcmV0dXJuIHAgIT09IHVuZGVmaW5lZDtcblx0ICAgIH0pLmpvaW4oXCImXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRTaGFyZVVybCh1cmwpIHtcblx0ICAgIGlmICh3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcblx0ICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIFwiXCIsIHVybCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldENvcHlMaW5rVXJsKCkge1xuXHQgICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCB1cmwpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBCaW5kQ29weUxpbmtFdmVudHMoKSB7XG5cdCAgICBkMy5zZWxlY3QoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgaGFuZGxlQm9keUNsaWNrKTtcblx0ICAgIGQzLnNlbGVjdChcIi5zaGFyZXVybC1saW5rIGFcIikub24oXCJjbGlja1wiLCBoYW5kbGVTaGFyZUxpbmtCdXR0b25DbGljayk7XG5cdCAgICBkMy5zZWxlY3QoXCIuc2hhcmV1cmwtbGluay11cmxcIikub24oXCJjbGlja1wiLCBoYW5kbGVTaGFyZUxpbmtVcmxDbGljayk7XG5cdCAgICBkMy5zZWxlY3QoXCIuc2hhcmV1cmwtbGluay1wb3B1cC1yZW1vdmVyXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlU2hhcmVMaW5rQ2xvc2VCdXR0b25DbGljayk7XG5cdH1cblx0XG5cdC8qKlxyXG5cdCAqIFNob3VsZCBjbG9zZSB0aGUgY29weSBsaW5rIHBvcHVwIGlmIGl0IGlzIGFjdGl2ZSBhbmQgaWYgeW91IGNsaWNrIG9uIGFueSBlbGVtZW50XHJcblx0ICogdGhhdCBpcyBub3QgdGhlIHBvcHVwIG9yIGl0cyBjaGlsZHJlbi5cclxuXHQgKi9cblx0ZnVuY3Rpb24gaGFuZGxlQm9keUNsaWNrKCkge1xuXHQgICAgdmFyIGV2ZW50ID0gZDMuZXZlbnQ7XG5cdCAgICB2YXIgbm9kZVBhdGggPSBbXTtcblx0ICAgIG5vZGVQYXRoID0gZ2V0RG9tUGF0aChldmVudC50YXJnZXQpO1xuXHRcblx0ICAgIHZhciB0b0Nsb3NlUG9wdXAgPSB0cnVlO1xuXHQgICAgdmFyIGksIGw7XG5cdFxuXHQgICAgZm9yIChpID0gMCwgbCA9IG5vZGVQYXRoLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGlmIChub2RlUGF0aFtpXS5jbGFzc0xpc3QuY29udGFpbnMoJ3NoYXJldXJsLWxpbmstcG9wdXAnKSB8fCBub2RlUGF0aFtpXS5jbGFzc0xpc3QuY29udGFpbnMoJ3NoYXJldXJsLWxpbmsnKSkge1xuXHQgICAgICAgICAgICB0b0Nsb3NlUG9wdXAgPSBmYWxzZTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmICh0b0Nsb3NlUG9wdXApIHtcblx0ICAgICAgICB2YXIgc2hhcmVQb3B1cCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NoYXJldXJsLWxpbmstcG9wdXAnKS5pdGVtKDApO1xuXHQgICAgICAgIGhhbmRsZUNvcHlMaW5rQ2xvc2Uoc2hhcmVQb3B1cCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldERvbVBhdGgobm9kZSkge1xuXHQgICAgdmFyIHBhdGggPSBbXTtcblx0ICAgIHdoaWxlIChub2RlICYmIG5vZGUucGFyZW50Tm9kZSkge1xuXHQgICAgICAgIHBhdGgucHVzaChub2RlKTtcblx0ICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHBhdGg7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVNoYXJlTGlua0J1dHRvbkNsaWNrKCkge1xuXHQgICAgdmFyIHNoYXJlUG9wdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2hhcmV1cmwtbGluay1wb3B1cFwiKS5pdGVtKDApO1xuXHQgICAgaWYgKGQzLnNlbGVjdChzaGFyZVBvcHVwKS5jbGFzc2VkKFwiYWN0aXZlXCIpKSB7XG5cdCAgICAgICAgaGFuZGxlQ29weUxpbmtDbG9zZShzaGFyZVBvcHVwKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgaGFuZGxlQ29weUxpbmtPcGVuKHNoYXJlUG9wdXApO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVTaGFyZUxpbmtDbG9zZUJ1dHRvbkNsaWNrKCkge1xuXHQgICAgdmFyIHNoYXJlUG9wdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2hhcmV1cmwtbGluay1wb3B1cFwiKS5pdGVtKDApO1xuXHQgICAgaGFuZGxlQ29weUxpbmtDbG9zZShzaGFyZVBvcHVwKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlU2hhcmVMaW5rVXJsQ2xpY2soKSB7XG5cdCAgICBzZWxlY3RDb3B5TGlua1VybCgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVDb3B5TGlua09wZW4oc2hhcmVQb3B1cCkge1xuXHQgICAgc2hhcmVQb3B1cC5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xuXHQgICAgc2VsZWN0Q29weUxpbmtVcmwoKTtcblx0XG5cdCAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBldmVudCBjbGljayBvbiBzaGFyZSB1cmxcblx0ICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdzaGFyZXVybCcsXG5cdCAgICAgICAgZXZlbnRBY3Rpb246ICdvcGVuJyxcblx0ICAgICAgICBldmVudExhYmVsOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNoYXJldXJsLWxpbmstdXJsXCIpLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpLFxuXHQgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZUNvcHlMaW5rQ2xvc2Uoc2hhcmVQb3B1cCkge1xuXHRcblx0ICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGNsaWNrIG9uIHNoYXJlIHVybCBjbG9zZVxuXHQgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgZXZlbnRDYXRlZ29yeTogJ3NoYXJldXJsJyxcblx0ICAgICAgICBldmVudEFjdGlvbjogJ2Nsb3NlJyxcblx0ICAgICAgICBldmVudExhYmVsOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNoYXJldXJsLWxpbmstdXJsXCIpLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpLFxuXHQgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgfSk7XG5cdFxuXHQgICAgc2hhcmVQb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZWxlY3RDb3B5TGlua1VybCgpIHtcblx0ICAgIHZhciBzaGFyZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKTtcblx0ICAgIHNoYXJlSW5wdXQuZm9jdXMoKTtcblx0ICAgIHNoYXJlSW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgc2hhcmVJbnB1dC52YWx1ZS5sZW5ndGgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRTb2NpYWxVcmxzKCkge1xuXHQgICAgdmFyIHVybCA9IG1hbmdsZVBhcmFtU3RyaW5nKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblx0ICAgIHZhciBzb2NpYWxMaW5rcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaGFyZXVybC1zb2NpYWxcIik7XG5cdCAgICB2YXIgc29jaWFsTGluaztcblx0ICAgIHZhciBuZXdVcmw7XG5cdCAgICB2YXIgaSwgbDtcblx0XG5cdCAgICBmb3IgKGkgPSAwLCBsID0gc29jaWFsTGlua3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgc29jaWFsTGluayA9IHNvY2lhbExpbmtzW2ldO1xuXHRcblx0ICAgICAgICBuZXdVcmwgPSBzb2NpYWxMaW5rLmdldEF0dHJpYnV0ZShcImRhdGEtYmFzZXVybFwiKSArIHVybDtcblx0ICAgICAgICBzb2NpYWxMaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgbmV3VXJsKTtcblx0XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZXZlbnQgZm9yIHNvY2lhbCB1cmxzXG5cdCAgICAgICAgc29jaWFsTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0XG5cdCAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ3NoYXJldXJsJyxcblx0ICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiB0aGlzLmdldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiksXG5cdCAgICAgICAgICAgICAgICBldmVudExhYmVsOiB0aGlzLmhyZWYsXG5cdCAgICAgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VDZW50ZXJTdHJpbmcobWFwKSB7XG5cdCAgICB2YXIgY2VudGVyID0gbWFwLmdldENlbnRlcigpO1xuXHQgICAgcmV0dXJuIFwiY2VudGVyPVwiICsgY2VudGVyLmxhdC50b1N0cmluZygpICsgXCIsXCIgKyBjZW50ZXIubG5nLnRvU3RyaW5nKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2Vab29tU3RyaW5nKG1hcCkge1xuXHQgICAgcmV0dXJuIFwiem9vbT1cIiArIG1hcC5nZXRab29tKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYXllclN0cmluZyhtYXApIHtcblx0ICAgIHZhciBsYXllcnMgPSBbXTtcblx0ICAgIHZhciBvcGFjaXR5VmFscyA9IHt9O1xuXHQgICAgdmFyIGN1cnJlbnRMYXllcnMgPSAoMCwgX2xheWVyLkdldEN1cnJlbnRMYXllcnMpKCk7XG5cdFxuXHQgICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICB2YXIgb3B0aW9ucyA9IGxheWVyLm9wdGlvbnM7XG5cdCAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sYXllcnMpIHtcblx0ICAgICAgICAgICAgb3BhY2l0eVZhbHNbb3B0aW9ucy5sYXllcnNdID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShcIm9wYWNpdHlcIikgPyBvcHRpb25zLm9wYWNpdHkgOiBcIjFcIjtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgY3VycmVudExheWVyO1xuXHQgICAgdmFyIGk7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgY3VycmVudExheWVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGN1cnJlbnRMYXllciA9IGN1cnJlbnRMYXllcnNbaV07XG5cdCAgICAgICAgbGF5ZXJzLnB1c2goY3VycmVudExheWVyKTtcblx0ICAgICAgICBsYXllcnMucHVzaChvcGFjaXR5VmFsc1tjdXJyZW50TGF5ZXJdKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBcImxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUJhc2VMYXllclN0cmluZyhtYXApIHtcblx0ICAgIHZhciBsYXllcnMgPSBbXTtcblx0ICAgIG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMgJiYgbGF5ZXIub3B0aW9ucy50eXBlID09PSBfYmFzZWxheWVyLkJBU0VfTEFZRVJfVFlQRSkge1xuXHQgICAgICAgICAgICBsYXllcnMucHVzaChsYXllci5vcHRpb25zLmlkKTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBcImJhc2VsYXllcnM9XCIgKyBsYXllcnMuam9pbihcIixcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYXllckdyb3Vwc1N0cmluZygpIHtcblx0ICAgIHZhciBhY3RpdmVMYXllckdyb3VwcyA9ICgwLCBfcGFuZWwuR2V0QWN0aXZlTGF5ZXJHcm91cHMpKCk7XG5cdCAgICByZXR1cm4gXCJsYXllckdyb3Vwcz1cIiArIGFjdGl2ZUxheWVyR3JvdXBzLm1hcChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkLmlkO1xuXHQgICAgfSkuam9pbignLCcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlUG9pbnRzT2ZJbnRlcmVzdFN0cmluZygpIHtcblx0ICAgIHZhciBwb2lzID0gKDAsIF9wb2kuR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCkoKTtcblx0ICAgIGlmICghcG9pcy5sZW5ndGgpIHJldHVybjtcblx0ICAgIHZhciBwb2lTdHJpbmcgPSBcInBvaXM9XCI7XG5cdCAgICBwb2lzLmZvckVhY2goZnVuY3Rpb24gKHBvaSkge1xuXHQgICAgICAgIHBvaVN0cmluZyArPSBwb2kubGF0ICsgJywnICsgcG9pLmxuZyArICc7Jztcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIHBvaVN0cmluZztcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUFjdGl2ZVRhYlN0cmluZygpIHtcblx0ICAgIHJldHVybiBcInRhYj1cIiArIGQzLnNlbGVjdChcIi5wYW5lbC10b3AtYnRuLmFjdGl2ZVwiKS5hdHRyKFwiZGF0YS1hY3RpdmVcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VBY3RpdmVHcmFwaFRhYlN0cmluZygpIHtcblx0ICAgIHJldHVybiBcImdyYXBoPVwiICsgZDMuc2VsZWN0KFwiLmdyYXBoLXR5cGUtYnRuLmFjdGl2ZVwiKS5hdHRyKFwiZGF0YS10eXBlXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwYXJzZVNoYXJlVXJsKCkge1xuXHQgICAgdmFyIHBhcmFtcyA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XG5cdCAgICBpZiAocGFyYW1zID09PSBcIlwiKSByZXR1cm47XG5cdFxuXHQgICAgcGFyYW1zID0gZ2V0UGFyYW1zQXJyYXkocGFyYW1zKTtcblx0ICAgIHBhcmFtcyA9IG1ha2VLZXllZFBhcmFtc09iamVjdChwYXJhbXMpO1xuXHRcblx0ICAgIGZvcm1hdFBhcmFtcyhwYXJhbXMpO1xuXHQgICAgcmV0dXJuIHBhcmFtcztcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0UGFyYW1zQXJyYXkocGFyYW1zKSB7XG5cdCAgICBwYXJhbXMgPSBwYXJhbXMuc3Vic3RyaW5nKDEpO1xuXHQgICAgcGFyYW1zID0gdW5tYW5nbGVQYXJhbVN0cmluZyhwYXJhbXMpO1xuXHQgICAgcmV0dXJuIHBhcmFtcy5zcGxpdChcIiZcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1hbmdsZVBhcmFtU3RyaW5nKHVybCkge1xuXHQgICAgcmV0dXJuIHVybC5yZXBsYWNlKC9cXDovZywgXCIlM0FcIikucmVwbGFjZSgvXFw7L2csIFwiJTNCXCIpLnJlcGxhY2UoL1xcLy9nLCBcIiUyRlwiKS5yZXBsYWNlKC9cXCwvZywgXCIlMkNcIikucmVwbGFjZSgvXFwmL2csIFwiJTI2XCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1bm1hbmdsZVBhcmFtU3RyaW5nKHBhcmFtcykge1xuXHQgICAgcmV0dXJuIHBhcmFtcy5yZXBsYWNlKC9cXCUyW2N8Q10vZywgXCIsXCIpLnJlcGxhY2UoL1xcJTNbYnxCXS9nLCBcIjtcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VLZXllZFBhcmFtc09iamVjdChwYXJhbXNBcnIpIHtcblx0ICAgIHZhciBwYXJzZWRQYXJhbXMgPSB7fTtcblx0ICAgIHZhciBwYXJhbVBhaXI7XG5cdCAgICB2YXIgaTtcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgcGFyYW1zQXJyLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgcGFyYW1QYWlyID0gcGFyYW1zQXJyW2ldLnNwbGl0KFwiPVwiKTtcblx0ICAgICAgICBwYXJzZWRQYXJhbXNbcGFyYW1QYWlyWzBdXSA9IHBhcmFtUGFpclsxXTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gcGFyc2VkUGFyYW1zO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRQYXJhbXMocGFyYW1zKSB7XG5cdCAgICBpZiAocGFyYW1zLmNlbnRlcikgcGFyYW1zLmNlbnRlciA9IGZvcm1hdENlbnRlclBhcmFtKHBhcmFtcy5jZW50ZXIpO1xuXHQgICAgaWYgKHBhcmFtcy5sYXllcnMpIHBhcmFtcy5sYXllcnMgPSBmb3JtYXRMYXllclBhcmFtKHBhcmFtcy5sYXllcnMpO1xuXHQgICAgaWYgKHBhcmFtcy5iYXNlbGF5ZXJzKSBwYXJhbXMuYmFzZWxheWVycyA9IGZvcm1hdEJhc2VMYXllclBhcmFtKHBhcmFtcy5iYXNlbGF5ZXJzKTtcblx0ICAgIGlmIChwYXJhbXMucG9pcykgcGFyYW1zLnBvaXMgPSBmb3JtYXRQb2ludHNPZkludGVyZXN0UGFyYW0ocGFyYW1zLnBvaXMpO1xuXHQgICAgaWYgKHBhcmFtcy5sYXllckdyb3VwcykgcGFyYW1zLmxheWVyR3JvdXBzID0gZm9ybWF0TGF5ZXJHcm91cHNQYXJhbShwYXJhbXMubGF5ZXJHcm91cHMpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRDZW50ZXJQYXJhbShjZW50ZXIpIHtcblx0ICAgIHJldHVybiBjZW50ZXIuc3BsaXQoXCIsXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRMYXllclBhcmFtKGxheWVycykge1xuXHQgICAgdmFyIGZvcm1hdHRlZExheWVycyA9IHtcblx0ICAgICAgICBcImVuYWJsZWRMYXllcnNcIjogW10sXG5cdCAgICAgICAgXCJvcGFjaXR5VmFsc1wiOiB7fVxuXHQgICAgfTtcblx0ICAgIHZhciBsYXllcklkO1xuXHQgICAgdmFyIGk7XG5cdFxuXHQgICAgbGF5ZXJzID0gbGF5ZXJzLnNwbGl0KFwiLFwiKTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpID0gaSArIDIpIHtcblx0ICAgICAgICBsYXllcklkID0gbGF5ZXJzW2ldO1xuXHQgICAgICAgIGZvcm1hdHRlZExheWVycy5lbmFibGVkTGF5ZXJzLnB1c2gobGF5ZXJJZCk7XG5cdCAgICAgICAgZm9ybWF0dGVkTGF5ZXJzLm9wYWNpdHlWYWxzW2xheWVySWRdID0gbGF5ZXJzW2kgKyAxXTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gZm9ybWF0dGVkTGF5ZXJzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRCYXNlTGF5ZXJQYXJhbShiYXNlbGF5ZXJzKSB7XG5cdCAgICByZXR1cm4gYmFzZWxheWVycy5zcGxpdChcIixcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFBvaW50c09mSW50ZXJlc3RQYXJhbShwb2lzKSB7XG5cdCAgICByZXR1cm4gcG9pcy5zcGxpdCgnOycpLmZpbHRlcihmdW5jdGlvbiAoc3RyKSB7XG5cdCAgICAgICAgcmV0dXJuIHN0ciAhPT0gJyc7XG5cdCAgICB9KS5tYXAoZnVuY3Rpb24gKHBvaSkge1xuXHQgICAgICAgIHBvaSA9IHBvaS5zcGxpdCgnLCcpO1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIGxhdDogcG9pWzBdLFxuXHQgICAgICAgICAgICBsbmc6IHBvaVsxXVxuXHQgICAgICAgIH07XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0TGF5ZXJHcm91cHNQYXJhbShsYXllckdyb3VwU2V0dGluZ3MpIHtcblx0ICAgIHJldHVybiBsYXllckdyb3VwU2V0dGluZ3Muc3BsaXQoJywnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkTGF5ZXJHcm91cFNldHRpbmdzVG9Db25maWcoYWN0aXZlTGF5ZXJHcm91cElkcywgY29uZmlnKSB7XG5cdCAgICBjb25maWcubGF5b3V0WydsYXllci1ncm91cHMtb3JkZXInXS5mb3JFYWNoKGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgLy8gc2V0IGxheWVyIGdyb3VwIHRvIGFjdGl2ZSBpZiBpdHMgaWQgYXBwZWFycyBpbiB0aGUgc2hhcmUgdXJsIHNldHRpbmdzXG5cdCAgICAgICAgbGF5ZXJHcm91cC5hY3RpdmUgPSBhY3RpdmVMYXllckdyb3VwSWRzLmZpbHRlcihmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGlkID09PSBsYXllckdyb3VwLmlkO1xuXHQgICAgICAgIH0pLmxlbmd0aCA+IDA7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlTGF5ZXJTZXR0aW5ncywgY29uZmlnKSB7XG5cdCAgICB2YXIgZW5hYmxlZExheWVycyA9IHNoYXJlTGF5ZXJTZXR0aW5ncy5lbmFibGVkTGF5ZXJzO1xuXHQgICAgY29uZmlnW1wiYWN0aXZlLWxheWVyc1wiXSA9IGVuYWJsZWRMYXllcnM7XG5cdFxuXHQgICAgdmFyIGksIGosIHByb3AsIGxheWVyZ3JvdXA7XG5cdCAgICB2YXIgZW5hYmxlZExheWVyO1xuXHQgICAgdmFyIGZvdW5kTGF5ZXI7XG5cdCAgICB2YXIgbGF5ZXJzID0gY29uZmlnLmxheWVycztcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgZW5hYmxlZExheWVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGZvdW5kTGF5ZXIgPSBmYWxzZTtcblx0ICAgICAgICBlbmFibGVkTGF5ZXIgPSBlbmFibGVkTGF5ZXJzW2ldO1xuXHQgICAgICAgIGZvciAocHJvcCBpbiBsYXllcnMpIHtcblx0ICAgICAgICAgICAgaWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcblx0ICAgICAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcblx0ICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGxheWVyZ3JvdXAubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgICAgICAgIGlmIChsYXllcmdyb3VwW2pdLmlkID09PSBlbmFibGVkTGF5ZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICBsYXllcmdyb3VwW2pdLm9wYWNpdHkgPSBzaGFyZUxheWVyU2V0dGluZ3Mub3BhY2l0eVZhbHNbZW5hYmxlZExheWVyXTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3VuZExheWVyID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoZm91bmRMYXllcikgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRCYXNlTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlQmFzZUxheWVyU2V0dGluZ3MsIGNvbmZpZykge1xuXHQgICAgdmFyIGJhc2VsYXllcnMgPSBjb25maWcuYmFzZWxheWVycztcblx0ICAgIHZhciBiYXNlbGF5ZXI7XG5cdCAgICB2YXIgaTtcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgYmFzZWxheWVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGJhc2VsYXllciA9IGJhc2VsYXllcnNbaV07XG5cdCAgICAgICAgYmFzZWxheWVyLmFjdGl2ZSA9IHNoYXJlQmFzZUxheWVyU2V0dGluZ3MuaW5kZXhPZihiYXNlbGF5ZXIuaWQpICE9PSAtMSA/IHRydWUgOiBmYWxzZTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkUG9pbnRzT2ZJbnRlcmVzdFRvQ29uZmlnKHBvaXMsIGNvbmZpZykge1xuXHQgICAgY29uZmlnW1wicG9pc1wiXSA9IHBvaXM7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQkFTRV9MQVlFUl9UWVBFID0gdW5kZWZpbmVkO1xuXHRleHBvcnRzLkNyZWF0ZUJhc2VMYXllcnMgPSBDcmVhdGVCYXNlTGF5ZXJzO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciBCQVNFX0xBWUVSX1RZUEUgPSBleHBvcnRzLkJBU0VfTEFZRVJfVFlQRSA9IFwiYmFzZWxheWVyXCI7XG5cdFxuXHR2YXIgX2Jhc2VsYXllcnM7XG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVCYXNlTGF5ZXJzKG1hcCwgbGF5ZXJDb25maWcpIHtcblx0ICAgIGxheWVyQ29uZmlnID0gbGF5ZXJDb25maWcgfHwgW3tcblx0ICAgICAgICBcImlkXCI6IFwiY2FydG8tbGlnaHQtZGVmYXVsdFwiLFxuXHQgICAgICAgIFwidXJsXCI6IFwiaHR0cDovL3tzfS5iYXNlbWFwcy5jYXJ0b2Nkbi5jb20vbGlnaHRfYWxsL3t6fS97eH0ve3l9LnBuZ1wiLFxuXHQgICAgICAgIFwiYXR0cmlidXRpb25cIjogJyZjb3B5OyA8YSBocmVmPVwiaHR0cDovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsICZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly9jYXJ0by5jb20vYXR0cmlidXRpb25zXCI+Q0FSVE88L2E+J1xuXHQgICAgfV07XG5cdFxuXHQgICAgX2Jhc2VsYXllcnMgPSBsYXllckNvbmZpZztcblx0ICAgIHZhciBpO1xuXHQgICAgdmFyIGJhc2VMYXllcjtcblx0ICAgIHZhciBjb25maWc7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGxheWVyQ29uZmlnLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgY29uZmlnID0gbGF5ZXJDb25maWdbaV07XG5cdFxuXHQgICAgICAgIGlmICghY29uZmlnLmFjdGl2ZSkgY29udGludWU7XG5cdCAgICAgICAgYmFzZUxheWVyID0gY3JlYXRlQmFzZUxheWVyKGNvbmZpZyk7XG5cdCAgICAgICAgY29uZmlnLmxheWVyID0gYmFzZUxheWVyO1xuXHQgICAgICAgIGJhc2VMYXllci5hZGRUbyhtYXApO1xuXHQgICAgfVxuXHRcblx0ICAgIGNyZWF0ZUJhc2VMYXllclVJKGxheWVyQ29uZmlnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQmFzZUxheWVyVUkoY29uZmlnKSB7XG5cdCAgICB2YXIgYmFzZVVJID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0ICAgIGJhc2VVSS5jbGFzc05hbWUgPSBcImJhc2VsYXllci11aVwiO1xuXHQgICAgdmFyIGJhc2VXcmFwcGVyO1xuXHQgICAgdmFyIGJhc2VJbWc7XG5cdCAgICB2YXIgYmFzZUxhYmVsO1xuXHRcblx0ICAgIHZhciBsYXllcjtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gY29uZmlnLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGxheWVyID0gY29uZmlnW2ldO1xuXHQgICAgICAgIGlmICghbGF5ZXIuaGFzT3duUHJvcGVydHkoXCJpbWFnZVwiKSkgY29udGludWU7XG5cdFxuXHQgICAgICAgIGJhc2VXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0ICAgICAgICBiYXNlV3JhcHBlci5zZXRBdHRyaWJ1dGUoXCJkYXRhLWxheWVyXCIsIGxheWVyLmlkKTtcblx0ICAgICAgICBiYXNlSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcblx0ICAgICAgICBiYXNlSW1nLnNldEF0dHJpYnV0ZShcInNyY1wiLCBsYXllci5pbWFnZSk7XG5cdCAgICAgICAgYmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgbGF5ZXIubGFiZWwpO1xuXHQgICAgICAgIGJhc2VJbWcuc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgbGF5ZXIubGFiZWwpO1xuXHQgICAgICAgIGJhc2VMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICAgICAgYmFzZUxhYmVsLnRleHRDb250ZW50ID0gbGF5ZXIubGFiZWw7XG5cdCAgICAgICAgYmFzZVdyYXBwZXIuYXBwZW5kQ2hpbGQoYmFzZUltZyk7XG5cdCAgICAgICAgYmFzZVdyYXBwZXIuYXBwZW5kQ2hpbGQoYmFzZUxhYmVsKTtcblx0ICAgICAgICBiYXNlV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQmFzZUNsaWNrKTtcblx0XG5cdCAgICAgICAgZDMuc2VsZWN0KGJhc2VXcmFwcGVyKS5jbGFzc2VkKFwiYmFzZS1zZWxlY3RvclwiLCB0cnVlKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGxheWVyLmFjdGl2ZSk7XG5cdFxuXHQgICAgICAgIGJhc2VVSS5hcHBlbmRDaGlsZChiYXNlV3JhcHBlcik7XG5cdCAgICB9XG5cdFxuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImxlYWZsZXQtYm90dG9tIGxlYWZsZXQtbGVmdFwiKVswXS5hcHBlbmRDaGlsZChiYXNlVUkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVCYXNlQ2xpY2soZSkge1xuXHQgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0ICAgIHZhciBsYXllcmlkID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWxheWVyXCIpO1xuXHQgICAgdG9nZ2xlQWN0aXZlQmFzZVVJKHRoaXMpO1xuXHQgICAgcmVtb3ZlQ3VycmVudEJhc2VMYXllcigpO1xuXHQgICAgYWRkTmV3QmFzZUxheWVyVG9NYXAobGF5ZXJpZCk7XG5cdFxuXHQgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIGNoYW5nZWluZyBiYXNlIGxheWVyXG5cdCAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcblx0ICAgICAgICBldmVudEFjdGlvbjogJ2NoYW5nZSBiYXNlIGxheWVyJyxcblx0ICAgICAgICBldmVudExhYmVsOiBsYXllcmlkLFxuXHQgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgfSk7XG5cdFxuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9nZ2xlQWN0aXZlQmFzZVVJKGJhc2VVSUVsZW0pIHtcblx0ICAgIGQzLnNlbGVjdChcIi5iYXNlLXNlbGVjdG9yLmFjdGl2ZVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGZhbHNlKTtcblx0ICAgIGQzLnNlbGVjdChiYXNlVUlFbGVtKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmVDdXJyZW50QmFzZUxheWVyKCkge1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkdldE1hcCkoKTtcblx0XG5cdCAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIGlmIChsYXllci5vcHRpb25zLnR5cGUgIT09IEJBU0VfTEFZRVJfVFlQRSkgcmV0dXJuO1xuXHQgICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllcik7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkTmV3QmFzZUxheWVyVG9NYXAobGF5ZXJpZCkge1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkdldE1hcCkoKTtcblx0XG5cdCAgICB2YXIgbGF5ZXI7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IF9iYXNlbGF5ZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGxheWVyID0gX2Jhc2VsYXllcnNbaV07XG5cdCAgICAgICAgaWYgKGxheWVyLmlkICE9PSBsYXllcmlkKSBjb250aW51ZTtcblx0ICAgICAgICBpZiAoIWxheWVyLmxheWVyKSBsYXllci5sYXllciA9IGNyZWF0ZUJhc2VMYXllcihsYXllcik7XG5cdCAgICAgICAgbGF5ZXIubGF5ZXIuYWRkVG8obWFwKTtcblx0ICAgICAgICBsYXllci5sYXllci5icmluZ1RvQmFjaygpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVCYXNlTGF5ZXIobGF5ZXJDb25maWcpIHtcblx0ICAgIHJldHVybiBMLnRpbGVMYXllcihsYXllckNvbmZpZy51cmwsIG1ha2VCYXNlTGF5ZXJPcHRpb25zKGxheWVyQ29uZmlnKSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VCYXNlTGF5ZXJPcHRpb25zKGNvbmZpZykge1xuXHQgICAgdmFyIG9wdGlvbnMgPSB7fTtcblx0ICAgIGlmIChjb25maWcuaWQpIG9wdGlvbnMuaWQgPSBjb25maWcuaWQ7XG5cdCAgICBpZiAoY29uZmlnLmF0dHJpYnV0aW9uKSBvcHRpb25zLmF0dHJpYnV0aW9uID0gY29uZmlnLmF0dHJpYnV0aW9uO1xuXHQgICAgaWYgKGNvbmZpZy5zdWJkb21haW5zKSBvcHRpb25zLnN1YmRvbWFpbnMgPSBjb25maWcuc3ViZG9tYWlucztcblx0ICAgIG9wdGlvbnMudHlwZSA9IEJBU0VfTEFZRVJfVFlQRTtcblx0XG5cdCAgICByZXR1cm4gb3B0aW9ucztcblx0fVxuXG4vKioqLyB9LFxuLyogMjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCA9IEdldEFsbFBvaW50c09mSW50ZXJlc3Q7XG5cdGV4cG9ydHMuQWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyID0gQWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyO1xuXHRleHBvcnRzLlNldHVwUG9pbnRzT2ZJbnRlcmVzdCA9IFNldHVwUG9pbnRzT2ZJbnRlcmVzdDtcblx0ZXhwb3J0cy5BZGRNdWx0aXBsZVBvaW50c09mSW50ZXJlc3QgPSBBZGRNdWx0aXBsZVBvaW50c09mSW50ZXJlc3Q7XG5cdGV4cG9ydHMuUmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXIgPSBSZW1vdmVQb2ludE9mSW50ZXJlc3RGcm9tVHJhY2tlcjtcblx0ZXhwb3J0cy5TZXR1cFBvaW50T2ZJbnRlcmVzdFVJID0gU2V0dXBQb2ludE9mSW50ZXJlc3RVSTtcblx0ZXhwb3J0cy5SZW1vdmVQb2ludE9mSW50ZXJlc3RVSSA9IFJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJO1xuXHRcblx0dmFyIF9ncmFwaCA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfdGFicyA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHRcblx0dmFyIF9wb2ludHNfb2ZfaW50ZXJlc3QgPSBbXTtcblx0XG5cdGZ1bmN0aW9uIEdldEFsbFBvaW50c09mSW50ZXJlc3QoKSB7XG5cdCAgICByZXR1cm4gX3BvaW50c19vZl9pbnRlcmVzdDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gQWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyKGxhdCwgbG5nKSB7XG5cdCAgICB2YXIgcG9pID0ge1xuXHQgICAgICAgIGxhdDogbGF0LFxuXHQgICAgICAgIGxuZzogbG5nXG5cdCAgICB9O1xuXHQgICAgX3BvaW50c19vZl9pbnRlcmVzdC5wdXNoKHBvaSk7XG5cdCAgICByZXR1cm4gcG9pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBTZXR1cFBvaW50c09mSW50ZXJlc3QobWFwLCBuZXdQb2lzKSB7XG5cdCAgICBBZGRNdWx0aXBsZVBvaW50c09mSW50ZXJlc3QobmV3UG9pcyk7XG5cdCAgICB2YXIgcG9pcyA9IEdldEFsbFBvaW50c09mSW50ZXJlc3QoKTtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdCAgICBwb2lzLmZvckVhY2goZnVuY3Rpb24gKHBvaSkge1xuXHQgICAgICAgIFNldHVwUG9pbnRPZkludGVyZXN0VUkobWFwLCBwb2kpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEFkZE11bHRpcGxlUG9pbnRzT2ZJbnRlcmVzdChwb2lzKSB7XG5cdCAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShfcG9pbnRzX29mX2ludGVyZXN0LCBwb2lzKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gUmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXIocG9pVG9SZW1vdmUpIHtcblx0ICAgIF9wb2ludHNfb2ZfaW50ZXJlc3QgPSBfcG9pbnRzX29mX2ludGVyZXN0LmZpbHRlcihmdW5jdGlvbiAocG9pKSB7XG5cdCAgICAgICAgcmV0dXJuICEocG9pID09PSBwb2lUb1JlbW92ZSk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gU2V0dXBQb2ludE9mSW50ZXJlc3RVSShtYXAsIHBvaSkge1xuXHQgICAgdmFyIGRpdiA9ICgwLCBfZ3JhcGguY3JlYXRlR3JhcGhEaXYpKHBvaSk7XG5cdCAgICB2YXIgbWFya2VyID0gKDAsIF9ncmFwaC5jcmVhdGVNYXJrZXIpKG1hcCwgcG9pLmxhdCwgcG9pLmxuZyk7XG5cdCAgICBwb2kuZ3JhcGhEaXYgPSBkaXY7XG5cdCAgICBwb2kubWFya2VyID0gbWFya2VyO1xuXHQgICAgbWFya2VyLmFkZFRvKG1hcCk7XG5cdCAgICAoMCwgX2dyYXBoLmNyZWF0ZUdyYXBoUmVtb3ZlcikobWFwLCBkaXYsIG1hcmtlciwgcG9pKTtcblx0XG5cdCAgICBkMy5zZWxlY3QoZGl2KS5vbihcIm1vdXNlZW50ZXJcIiwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICBtYXJrZXIuc2V0SWNvbigoMCwgX2dyYXBoLmdldEljb24pKCdob3ZlcicpKTtcblx0ICAgIH0pO1xuXHQgICAgZDMuc2VsZWN0KGRpdikub24oXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBtYXJrZXIuc2V0SWNvbigoMCwgX2dyYXBoLmdldEljb24pKCdncmFwaCcpKTtcblx0ICAgIH0pO1xuXHQgICAgbWFya2VyLm9uKCdjbGljayBkYmxjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgaGFuZGxlTWFya2VyTW91c2VFdmVudChlLCBwb2kpO1xuXHQgICAgfSk7XG5cdCAgICBtYXJrZXIub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgbWFya2VyLnNldEljb24oKDAsIF9ncmFwaC5nZXRJY29uKSgnaG92ZXInKSk7XG5cdCAgICB9KTtcblx0ICAgIG1hcmtlci5vbignbW91c2VvdXQnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIG1hcmtlci5zZXRJY29uKCgwLCBfZ3JhcGguZ2V0SWNvbikoJ2dyYXBoJykpO1xuXHQgICAgICAgIHBvaS5ncmFwaERpdi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwYW4tdG8tbWFya2VyLWJ0bicpWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGUnKTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVNYXJrZXJNb3VzZUV2ZW50KGUsIHBvaSkge1xuXHQgICAgZS5vcmlnaW5hbEV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHQgICAgKDAsIF90YWJzLkhhbmRsZVRhYkNoYW5nZSkoJ2dyYXBocy1hY3RpdmUnKTtcblx0ICAgIHNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGgocG9pKTtcblx0ICAgIHRyaWdnZXJHcmFwaEFuaW1hdGlvbihwb2kpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0cmlnZ2VyR3JhcGhBbmltYXRpb24ocG9pKSB7XG5cdCAgICBwb2kuZ3JhcGhEaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncGFuLXRvLW1hcmtlci1idG4nKVswXS5jbGFzc0xpc3QuYWRkKCdhbmltYXRlJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGgocG9pKSB7XG5cdCAgICB2YXIgcmlnaHRQYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpO1xuXHQgICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbC1oZWFkZXInKTtcblx0ICAgIHZhciBncmFwaFR5cGVIZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JhcGgtdHlwZS1oZWFkZXInKTtcblx0ICAgIHJpZ2h0UGFuZWwuc2Nyb2xsVG9wID0gcG9pLmdyYXBoRGl2Lm9mZnNldFRvcDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gUmVtb3ZlUG9pbnRPZkludGVyZXN0VUkobWFwLCBkaXYsIG1hcmtlcikge1xuXHQgICAgdmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3JhcGgtbGlzdCcpO1xuXHQgICAgbGlzdC5yZW1vdmVDaGlsZChkaXYpO1xuXHQgICAgbWFwLnJlbW92ZUxheWVyKG1hcmtlcik7XG5cdCAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5TZXR1cEdyYXBocyA9IFNldHVwR3JhcGhzO1xuXHRleHBvcnRzLkJpbmRHcmFwaEV2ZW50cyA9IEJpbmRHcmFwaEV2ZW50cztcblx0ZXhwb3J0cy5nZXRJY29uID0gZ2V0SWNvbjtcblx0ZXhwb3J0cy5jcmVhdGVNYXJrZXIgPSBjcmVhdGVNYXJrZXI7XG5cdGV4cG9ydHMuY3JlYXRlR3JhcGhSZW1vdmVyID0gY3JlYXRlR3JhcGhSZW1vdmVyO1xuXHRleHBvcnRzLkhhbmRsZUdyYXBoVGFiQ2hhbmdlID0gSGFuZGxlR3JhcGhUYWJDaGFuZ2U7XG5cdGV4cG9ydHMuY3JlYXRlR3JhcGhEaXYgPSBjcmVhdGVHcmFwaERpdjtcblx0XG5cdHZhciBfcG9pID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdFxuXHR2YXIgX3BhbmVsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHR2YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRcblx0dmFyIF9wYXJzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIHRpcCA9IHt9O1xuXHRcblx0ZnVuY3Rpb24gZ2V0R3JhcGhUaXAoKSB7XG5cdCAgICByZXR1cm4gdGlwO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBTZXR1cEdyYXBocygpIHtcblx0ICAgIGQzLnNlbGVjdEFsbChcIi5ncmFwaC10eXBlLWJ0blwiKS5vbihcImNsaWNrXCIsIGhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrKTtcblx0ICAgIGV4dGVuZERhdGVNb2R1bGUoKTtcblx0ICAgIHRpcCA9IGQzLnRpcCgpLmF0dHIoJ2NsYXNzJywgJ2QzLXRpcCcpLmh0bWwoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZDtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBleHRlbmREYXRlTW9kdWxlKCkge1xuXHQgICAgRGF0ZS5wcm90b3R5cGUuaXNMZWFwWWVhciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgeWVhciA9IHRoaXMuZ2V0RnVsbFllYXIoKTtcblx0ICAgICAgICBpZiAoKHllYXIgJiAzKSAhPSAwKSByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgcmV0dXJuIHllYXIgJSAxMDAgIT0gMCB8fCB5ZWFyICUgNDAwID09IDA7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIEdldCBEYXkgb2YgWWVhclxuXHQgICAgRGF0ZS5wcm90b3R5cGUuZ2V0RE9ZID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBkYXlDb3VudCA9IFswLCAzMSwgNTksIDkwLCAxMjAsIDE1MSwgMTgxLCAyMTIsIDI0MywgMjczLCAzMDQsIDMzNF07XG5cdCAgICAgICAgdmFyIG1uID0gdGhpcy5nZXRNb250aCgpO1xuXHQgICAgICAgIHZhciBkbiA9IHRoaXMuZ2V0RGF0ZSgpO1xuXHQgICAgICAgIHZhciBkYXlPZlllYXIgPSBkYXlDb3VudFttbl0gKyBkbjtcblx0ICAgICAgICBpZiAobW4gPiAxICYmIHRoaXMuaXNMZWFwWWVhcigpKSBkYXlPZlllYXIrKztcblx0ICAgICAgICByZXR1cm4gZGF5T2ZZZWFyO1xuXHQgICAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gQmluZEdyYXBoRXZlbnRzKG1hcCkge1xuXHQgICAgbWFwLm9uKFwiY2xpY2tcIiwgaGFuZGxlTWFwQ2xpY2spO1xuXHR9XG5cdFxuXHR2YXIgYmFzZUljb24gPSBMLkljb24uZXh0ZW5kKHt9KTtcblx0XG5cdHZhciBncmFwaEljb24gPSBuZXcgYmFzZUljb24oe1xuXHQgICAgaWNvblVybDogJ2ltZ3MvYmx1ZV9pY29uLnBuZycsXG5cdCAgICBzaGFkb3dVcmw6ICdpbWdzL21hcmtlcl9zaGFkb3cucG5nJyxcblx0ICAgIGljb25TaXplOiBbMjUsIDQxXSxcblx0ICAgIGljb25BbmNob3I6IFsxMiwgNDFdLFxuXHQgICAgcG9wdXBBbmNob3I6IFsxLCAtMzRdLFxuXHQgICAgc2hhZG93U2l6ZTogWzQxLCA0MV1cblx0fSk7XG5cdFxuXHR2YXIgaG92ZXJJY29uID0gbmV3IGJhc2VJY29uKHtcblx0ICAgIGljb25Vcmw6ICdpbWdzL29yYW5nZV9pY29uLnBuZycsXG5cdCAgICBzaGFkb3dVcmw6ICdpbWdzL21hcmtlcl9zaGFkb3cucG5nJyxcblx0ICAgIGljb25TaXplOiBbMjUsIDQxXSxcblx0ICAgIGljb25BbmNob3I6IFsxMiwgNDFdLFxuXHQgICAgcG9wdXBBbmNob3I6IFsxLCAtMzRdLFxuXHQgICAgc2hhZG93U2l6ZTogWzQxLCA0MV1cblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBnZXRJY29uKHR5cGUpIHtcblx0ICAgIHJldHVybiB0eXBlID09PSAnaG92ZXInID8gaG92ZXJJY29uIDogZ3JhcGhJY29uO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVNYXBDbGljayhlKSB7XG5cdCAgICB2YXIgbWFwID0gdGhpcztcblx0ICAgIHZhciBsYXQgPSBlLmxhdGxuZy5sYXQ7XG5cdCAgICB2YXIgbG5nID0gZS5sYXRsbmcubG5nO1xuXHRcblx0ICAgIHZhciBwb2kgPSAoMCwgX3BvaS5BZGRQb2ludE9mSW50ZXJlc3RUb1RyYWNrZXIpKGxhdCwgbG5nKTtcblx0ICAgICgwLCBfcG9pLlNldHVwUG9pbnRPZkludGVyZXN0VUkpKG1hcCwgcG9pLCBob3Zlckljb24sIGdyYXBoSWNvbik7XG5cdCAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHRcblx0ICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGNsaWNrIG9uIG1hcFxuXHQgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdCAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdCAgICAgICAgZXZlbnRMYWJlbDogJ2FkZCBwb2ludCcsXG5cdCAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlTWFya2VyKG1hcCwgbGF0LCBsbmcpIHtcblx0ICAgIHJldHVybiBMLm1hcmtlcihbbGF0LCBsbmddLCB7IGljb246IGdyYXBoSWNvbiB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlR3JhcGhSZW1vdmVyKG1hcCwgZGl2LCBtYXJrZXIsIHBvaSkge1xuXHQgICAgdmFyIGVsZW0gPSBjcmVhdGVHcmFwaFJlbW92ZXJFbGVtKCk7XG5cdCAgICBkaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyYXBoLWVsZW0taGVhZGVyXCIpWzBdLmFwcGVuZENoaWxkKGVsZW0pO1xuXHQgICAgZDMuc2VsZWN0KGVsZW0pLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuXHRcblx0ICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyByZW1vdmUgZ3JhcGhcblx0ICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcblx0ICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdCAgICAgICAgICAgIGV2ZW50TGFiZWw6ICdyZW1vdmUnLFxuXHQgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgKDAsIF9wb2kuUmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXIpKHBvaSk7XG5cdCAgICAgICAgKDAsIF9wb2kuUmVtb3ZlUG9pbnRPZkludGVyZXN0VUkpKG1hcCwgZGl2LCBtYXJrZXIpO1xuXHQgICAgICAgICgwLCBfcGFuZWwudXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCkoKTtcblx0ICAgICAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUdyYXBoUmVtb3ZlckVsZW0oKSB7XG5cdCAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG5cdCAgICBlbGVtLmNsYXNzTmFtZSA9IFwicmVtb3ZlLWdyYXBoXCI7XG5cdCAgICBlbGVtLmlubmVyVGV4dCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoXCIxMDAwNVwiKTtcblx0ICAgIGVsZW0uc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgXCJSZW1vdmUgZ3JhcGhcIik7XG5cdCAgICByZXR1cm4gZWxlbTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLyBHUkFQSCBEQVRBIFBST0NFU1NJTkcgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gc2VuZFJlcXVlc3QocmVxdWVzdCwgdXJsKSB7XG5cdCAgICByZXF1ZXN0Lm9wZW4oJ0dFVCcsIHVybCk7XG5cdCAgICByZXF1ZXN0LnNlbmQoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlR3JhcGhEYXRhUmVzcG9uc2UoZGl2LCBsYXQsIGxuZywgcmVzcG9uc2UpIHtcblx0ICAgIHJlc3BvbnNlID0gcmVzcG9uc2UucmVwbGFjZSgvXFxbfFxcXXxcXCcvZywgXCJcIikuc3BsaXQoXCIsIFwiKTtcblx0ICAgIGRyYXdHcmFwaChyZXNwb25zZSwgZGl2LCBsYXQsIGxuZyk7XG5cdCAgICAoMCwgX3BhbmVsLnVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQpKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldERhdGEobGF0LCBsbmcsIGRpdikge1xuXHQgICAgdmFyIHVybCA9IFwiaHR0cHM6Ly9mY2F2LW5kdmkubmVtYWMub3JnL2xhbmRkYXRfcHJvZHVjdC5jZ2k/YXJncz1cIiArIGxuZyArIFwiLFwiICsgbGF0O1xuXHQgICAgdmFyIG9SZXEgPSAoMCwgX3BhcnNlci5HZXRBamF4T2JqZWN0KShmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0ICAgICAgICBoYW5kbGVHcmFwaERhdGFSZXNwb25zZShkaXYsIGxhdCwgbG5nLCByZXNwb25zZSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICBvUmVxLm9wZW4oXCJHRVRcIiwgdXJsKTtcblx0ICAgIG9SZXEuc2VuZCgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzcGxpdERhdGEoZGF0YSkge1xuXHQgICAgdmFyIGk7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGRhdGFbaV0gPSBkYXRhW2ldLnNwbGl0KFwiLFwiKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBkYXRhO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZXByb2Nlc3NEYXRhKG9yaWdkYXRhKSB7XG5cdCAgICB2YXIgZXhwZWN0ZWRZZWFyTGVuZ3RoID0gNDY7XG5cdCAgICB2YXIgZGF0YSA9IHt9O1xuXHQgICAgdmFyIHBvaW50O1xuXHQgICAgdmFyIGtleTtcblx0ICAgIHZhciBpLCBqO1xuXHRcblx0ICAgIGRhdGFbXCJrZXlzXCJdID0gW107XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgb3JpZ2RhdGEubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBwb2ludCA9IG9yaWdkYXRhW2ldO1xuXHQgICAgICAgIGtleSA9IHBvaW50WzBdLnN1YnN0cmluZygwLCA0KTtcblx0ICAgICAgICBpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHQgICAgICAgICAgICBkYXRhW2tleV0gPSBbXTtcblx0ICAgICAgICAgICAgZGF0YVtcImtleXNcIl0ucHVzaChrZXkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBkYXRhW2tleV0ucHVzaChwb2ludCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGtleXNUb0JlRGVsZXRlZCA9IFtdO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGRhdGEua2V5cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGtleSA9IGRhdGEua2V5c1tpXTtcblx0ICAgICAgICBpZiAoZGF0YVtrZXldLmxlbmd0aCAhPT0gZXhwZWN0ZWRZZWFyTGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIGtleXNUb0JlRGVsZXRlZC5wdXNoKGtleSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBrZXlzVG9CZURlbGV0ZWQubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBrZXkgPSBrZXlzVG9CZURlbGV0ZWRbaV07XG5cdCAgICAgICAgZGVsZXRlIGRhdGFba2V5XTtcblx0ICAgICAgICBkYXRhLmtleXMuc3BsaWNlKGRhdGEua2V5cy5pbmRleE9mKGtleSksIDEpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBkYXRhRm9yTWVkaWFucztcblx0ICAgIHZhciBtZWRpYW47XG5cdCAgICBkYXRhW1wibWVkaWFuc1wiXSA9IFtdO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGV4cGVjdGVkWWVhckxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZGF0YUZvck1lZGlhbnMgPSBbXTtcblx0ICAgICAgICBmb3IgKGogPSBpOyBqIDwgb3JpZ2RhdGEubGVuZ3RoOyBqICs9IGV4cGVjdGVkWWVhckxlbmd0aCkge1xuXHQgICAgICAgICAgICBkYXRhRm9yTWVkaWFucy5wdXNoKG9yaWdkYXRhW2pdWzFdKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIG1lZGlhbiA9IGRhdGFGb3JNZWRpYW5zLnNvcnQoKVtNYXRoLmZsb29yKGRhdGFGb3JNZWRpYW5zLmxlbmd0aCAvIDIpXTtcblx0ICAgICAgICBkYXRhW1wibWVkaWFuc1wiXS5wdXNoKG1lZGlhbik7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGRhdGE7XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSU5URVJGQUNFIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2soKSB7XG5cdCAgICB2YXIgdHlwZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKTtcblx0ICAgIHZhciBhY3RpdmVUeXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyYXBoLXR5cGUtYnRuIGFjdGl2ZVwiKVswXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpO1xuXHRcblx0ICAgIGlmICh0eXBlID09PSBhY3RpdmVUeXBlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIGdyYXBoIHR5cGVcblx0ICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCB0eXBlJyxcblx0ICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0ICAgICAgICBldmVudExhYmVsOiB0eXBlLFxuXHQgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgfSk7XG5cdFxuXHQgICAgSGFuZGxlR3JhcGhUYWJDaGFuZ2UodHlwZSwgYWN0aXZlVHlwZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEhhbmRsZUdyYXBoVGFiQ2hhbmdlKGdyYXBoVHlwZSkge1xuXHQgICAgaWYgKCFpc0dyYXBoTGlzdEVtcHR5KCkpIHtcblx0ICAgICAgICB2YXIgb2xkQWN0aXZlR3JhcGhFbGVtSGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhcGgtZWxlbScpWzBdLnNjcm9sbEhlaWdodDtcblx0ICAgICAgICB2YXIgb2xkQWN0aXZlR3JhcGhJbmZvSGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhcGgtdHlwZS1pbmZvIGFjdGl2ZScpWzBdLnNjcm9sbEhlaWdodDtcblx0ICAgICAgICB2YXIgcmlnaHRQYW5lbFNjcm9sbFRvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpLnNjcm9sbFRvcDtcblx0ICAgIH1cblx0ICAgIGRpc2FibGVBY3RpdmVHcmFwaFRhYigpO1xuXHQgICAgZW5hYmxlR3JhcGhUYWIoZ3JhcGhUeXBlKTtcblx0ICAgIGlmICghaXNHcmFwaExpc3RFbXB0eSgpKSBhZGp1c3RTY3JvbGxQb3NpdGlvbihvbGRBY3RpdmVHcmFwaEluZm9IZWlnaHQsIG9sZEFjdGl2ZUdyYXBoRWxlbUhlaWdodCwgcmlnaHRQYW5lbFNjcm9sbFRvcCk7XG5cdCAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0dyYXBoTGlzdEVtcHR5KCkge1xuXHQgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLWVsZW0nKVswXSA9PT0gdW5kZWZpbmVkO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGp1c3RTY3JvbGxQb3NpdGlvbihvbGRHcmFwaEluZm9IZWlnaHQsIG9sZEdyYXBoRWxlbUhlaWdodCwgb2xkUmlnaHRQYW5lbFNjcm9sbFRvcCkge1xuXHQgICAgdmFyIG5ld0dyYXBoSW5mb0hlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLXR5cGUtaW5mbyBhY3RpdmUnKVswXS5zY3JvbGxIZWlnaHQ7XG5cdCAgICB2YXIgbmV3R3JhcGhFbGVtSGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhcGgtZWxlbScpWzBdLnNjcm9sbEhlaWdodDtcblx0XG5cdCAgICB2YXIgbmV3R3JhcGhFbGVtSGVpZ2h0U2NhbGUgPSBuZXdHcmFwaEVsZW1IZWlnaHQgLyBvbGRHcmFwaEVsZW1IZWlnaHQ7XG5cdCAgICB2YXIgbmV3UmlnaHRQYW5lbFNjcm9sbFRvcCA9IG5ld0dyYXBoSW5mb0hlaWdodCArIChvbGRSaWdodFBhbmVsU2Nyb2xsVG9wIC0gb2xkR3JhcGhJbmZvSGVpZ2h0KSAqIG5ld0dyYXBoRWxlbUhlaWdodFNjYWxlO1xuXHRcblx0ICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpLnNjcm9sbFRvcCA9IG5ld1JpZ2h0UGFuZWxTY3JvbGxUb3A7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRpc2FibGVBY3RpdmVHcmFwaFRhYigpIHtcblx0ICAgIHZhciBhY3RpdmVFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyYXBoLXR5cGUtYnRuIGFjdGl2ZVwiKVswXTtcblx0ICAgIHZhciBhY3RpdmVDbGFzcyA9IFwiZ3JhcGgtXCIgKyBhY3RpdmVFbGVtLmdldEF0dHJpYnV0ZShcImRhdGEtdHlwZVwiKTtcblx0XG5cdCAgICBhY3RpdmVFbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG5cdCAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXBoLWxpc3RcIikuY2xhc3NMaXN0LnJlbW92ZShhY3RpdmVDbGFzcyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGVuYWJsZUdyYXBoVGFiKGdyYXBoVHlwZSkge1xuXHQgICAgZDMuc2VsZWN0KFwiLmdyYXBoLXR5cGUtYnRuW2RhdGEtdHlwZT0nXCIgKyBncmFwaFR5cGUgKyBcIiddXCIpLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cdCAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXBoLWxpc3RcIikuY2xhc3NMaXN0LmFkZChcImdyYXBoLVwiICsgZ3JhcGhUeXBlKTtcblx0ICAgIGQzLnNlbGVjdEFsbCgnLmdyYXBoLXR5cGUtaW5mbycpLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gZ3JhcGhUeXBlID09PSB0aGlzLmlkLnNwbGl0KCctJylbMF07XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlR3JhcGhEaXYocG9pKSB7XG5cdCAgICB2YXIgZGVjaW1hbFBsYWNlcyA9IDM7XG5cdCAgICB2YXIgbGF0U2hvcnQgPSByb3VuZEZsb2F0KHBvaS5sYXQsIGRlY2ltYWxQbGFjZXMpO1xuXHQgICAgdmFyIGxuZ1Nob3J0ID0gcm91bmRGbG9hdChwb2kubG5nLCBkZWNpbWFsUGxhY2VzKTtcblx0ICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0ICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHQgICAgd3JhcHBlci5hcHBlbmRDaGlsZChoZWFkZXIpO1xuXHQgICAgdmFyIHpvb21Ub01hcmtlckJ1dHRvbiA9IG1ha2Vab29tVG9NYXBNYXJrZXJCdXR0b24ocG9pKTtcblx0ICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJMYXQ6IFwiICsgbGF0U2hvcnQgKyBcIiwgTG9uZzogXCIgKyBsbmdTaG9ydCk7XG5cdCAgICB2YXIgY29udGVudERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICBjb250ZW50RGl2LmNsYXNzTmFtZSA9IFwiZ3JhcGgtbGF0LWxvblwiO1xuXHQgICAgY29udGVudERpdi5hcHBlbmRDaGlsZChjb250ZW50KTtcblx0XG5cdCAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoem9vbVRvTWFya2VyQnV0dG9uKTtcblx0ICAgIGhlYWRlci5hcHBlbmRDaGlsZChjb250ZW50RGl2KTtcblx0XG5cdCAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJncmFwaC1lbGVtXCIpO1xuXHQgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJncmFwaC1lbGVtLWhlYWRlclwiKTtcblx0XG5cdCAgICBnZXREYXRhKHBvaS5sYXQsIHBvaS5sbmcsIHdyYXBwZXIpO1xuXHQgICAgcmV0dXJuIHdyYXBwZXI7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2Vab29tVG9NYXBNYXJrZXJCdXR0b24ocG9pKSB7XG5cdCAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblx0ICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdidG4nKTtcblx0ICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwYW4tdG8tbWFya2VyLWJ0bicpO1xuXHQgICAgYnV0dG9uLnRleHRDb250ZW50ID0gXCJTaG93IE9uIE1hcFwiO1xuXHQgICAgYnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAocG9pLCBlKSB7XG5cdCAgICAgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkdldE1hcCkoKTtcblx0ICAgICAgICBtYXAucGFuVG8oW3BvaS5sYXQsIHBvaS5sbmddKTtcblx0XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgY2xpY2sgb24gc2hvdyBvbiBtYXBcblx0ICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcblx0ICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdCAgICAgICAgICAgIGV2ZW50TGFiZWw6ICd7XCJzaG93IG9uIG1hcFwiOntcImxhdFwiOicgKyBwb2kubGF0ICsgJyxcImxvbmdcIjonICsgcG9pLmxuZyArICd9fScsXG5cdCAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgIH0pO1xuXHQgICAgfS5iaW5kKGJ1dHRvbiwgcG9pKTtcblx0ICAgIHJldHVybiBidXR0b247XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYXdHcmFwaChkYXRhLCBkaXYsIGxhdCwgbG5nKSB7XG5cdCAgICBkYXRhID0gc3BsaXREYXRhKGRhdGEpO1xuXHQgICAgdmFyIHJlcHJvY2Vzc2VkRGF0YSA9IHJlcHJvY2Vzc0RhdGEoZGF0YSk7XG5cdCAgICBtYWtlVXBEb3duTGluZUdyYXBoKGRhdGEsIGRpdiwgcmVwcm9jZXNzZWREYXRhW1wibWVkaWFuc1wiXSk7XG5cdCAgICBtYWtlVXBEb3duT3ZlcmxhcGluZ0xpbmVHcmFwaFdpdGhDaGVja2JveGVzKHJlcHJvY2Vzc2VkRGF0YSwgZGl2LCBsYXQsIGxuZyk7XG5cdCAgICBkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMocmVwcm9jZXNzZWREYXRhLCBkaXYsIGxhdCwgbG5nKTtcblx0ICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpO1xuXHQgICAgbGlzdC5hcHBlbmRDaGlsZChkaXYpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByb3VuZEZsb2F0KG51bWJlciwgZGVjaW1hbFBsYWNlcykge1xuXHQgICAgcmV0dXJuIE1hdGgucm91bmQobnVtYmVyICogTWF0aC5wb3coMTAsIGRlY2ltYWxQbGFjZXMpKSAvIE1hdGgucG93KDEwLCBkZWNpbWFsUGxhY2VzKTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vIFRJTUVTRVJJRVMgTElORSBHUkFQSCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVVwRG93bkxpbmVHcmFwaChkYXRhLCBkaXYsIGF2ZXJhZ2VzKSB7XG5cdCAgICAvLyBTZXQgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIGNhbnZhcyAvIGdyYXBoXG5cdCAgICB2YXIgbWFyZ2luID0geyB0b3A6IDMwLCByaWdodDogMjAsIGJvdHRvbTogMzAsIGxlZnQ6IDI5IH0sXG5cdCAgICAgICAgd2lkdGggPSA1ODAgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCxcblx0ICAgICAgICBoZWlnaHQgPSAyNzAgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcblx0XG5cdCAgICAvLyBTZXQgdGhlIHJhbmdlc1xuXHQgICAgdmFyIHggPSBkMy5zY2FsZVRpbWUoKS5yYW5nZShbMCwgd2lkdGhdKS5kb21haW4oW3BhcnNlRGF0ZShkYXRhWzBdWzBdKSwgcGFyc2VEYXRlKGRhdGFbZGF0YS5sZW5ndGggLSAxXVswXSldKTtcblx0ICAgIHZhciB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSkuZG9tYWluKFswLCAxMDBdKTtcblx0XG5cdCAgICAvLyBEZWZpbmUgdGhlIGF4ZXNcblx0ICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeCkudGlja3MoMTYpLnRpY2tGb3JtYXQoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZC5nZXRGdWxsWWVhcigpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIHlBeGlzID0gZDMuYXhpc0xlZnQoeSkudGlja3MoNik7XG5cdFxuXHQgICAgLy8gRGVmaW5lIHRoZSBsaW5lXG5cdCAgICB2YXIgdmFsdWVsaW5lID0gZDMubGluZSgpLngoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4geChwYXJzZURhdGUoZFswXSkpO1xuXHQgICAgfSkueShmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiB5KGRbMV0pO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcInRpbWVzZXJpZXMtZ3JhcGhcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgLy8gQWRkcyB0aGUgc3ZnIGNhbnZhc1xuXHQgICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHcgPSB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0O1xuXHQgICAgICAgIHZhciBoID0gaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b207XG5cdCAgICAgICAgcmV0dXJuICcwIDAgJyArIHcgKyAnICcgKyBoO1xuXHQgICAgfSkuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWlkWU1pZCcpLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xuXHRcblx0ICAgIHN2Zy5jYWxsKHRpcCk7XG5cdFxuXHQgICAgLy8gQWRkIHRoZSB2YWx1ZWxpbmUgcGF0aC5cblx0ICAgIGRyYXdMaW5lYXJQYXRoKGRhdGEsIHZhbHVlbGluZSwgc3ZnKTtcblx0XG5cdCAgICAvLyBBZGQgdGhlIFggQXhpc1xuXHQgICAgc3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwieCBheGlzXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGhlaWdodCArIFwiKVwiKS5jYWxsKHhBeGlzKTtcblx0XG5cdCAgICAvLyBBZGQgdGhlIFkgQXhpc1xuXHQgICAgc3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpLmNhbGwoeUF4aXMpO1xuXHQgICAgLyoqXHJcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XHJcblx0ICAgICAqL1xuXHQgICAgZHJhd0xpbmVhclBvaW50cyhkYXRhLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLyBPVkVSTEFQUElORyBUSU1FU0VSSUVTIExJTkUgR1JBUEggLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVVwRG93bk92ZXJsYXBpbmdMaW5lR3JhcGhXaXRoQ2hlY2tib3hlcyhkYXRhLCBkaXYsIGxhdCwgbG5nKSB7XG5cdCAgICB2YXIgeWVhciA9IFwiMjAxNVwiO1xuXHRcblx0ICAgIHZhciBjaGFydHMgPSB7fTtcblx0XG5cdCAgICAvLyBTZXQgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIGNhbnZhcyAvIGdyYXBoXG5cdCAgICB2YXIgbWFyZ2luID0geyB0b3A6IDMwLCByaWdodDogMjAsIGJvdHRvbTogMzAsIGxlZnQ6IDI5IH0sXG5cdCAgICAgICAgd2lkdGggPSA1MDAgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCxcblx0ICAgICAgICBoZWlnaHQgPSAyNzAgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcblx0XG5cdCAgICB2YXIgYXZlcmFnZXMgPSBkYXRhLm1lZGlhbnM7XG5cdFxuXHQgICAgdmFyIHggPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFswLCB3aWR0aF0pLmRvbWFpbihbMCwgMzY1XSk7XG5cdCAgICB2YXIgeSA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodCwgMF0pLmRvbWFpbihbMCwgMTAwXSk7XG5cdFxuXHQgICAgLy8gRGVmaW5lIHRoZSBheGVzXG5cdCAgICBmdW5jdGlvbiBmb3JtYXRNb250aFRpY2soZCkge1xuXHQgICAgICAgIHJldHVybiBNT05USF9MQUJFTFNbKGQgLSAxNSkgLyAzMF07XG5cdCAgICB9XG5cdCAgICB2YXIgeEF4aXMgPSBkMy5heGlzQm90dG9tKHgpLnRpY2tzKDExKS50aWNrVmFsdWVzKFsxNSwgNDUsIDc1LCAxMDUsIDEzNSwgMTY1LCAxOTUsIDIyNSwgMjU1LCAyODUsIDMxNSwgMzQ1XSkudGlja0Zvcm1hdChmb3JtYXRNb250aFRpY2spO1xuXHRcblx0ICAgIHZhciB5QXhpcyA9IGQzLmF4aXNMZWZ0KHkpLnRpY2tzKDYpO1xuXHRcblx0ICAgIC8vIERlZmluZSB0aGUgbGluZVxuXHQgICAgdmFyIHZhbHVlbGluZSA9IGQzLmxpbmUoKS54KGZ1bmN0aW9uIChkLCBpKSB7XG5cdCAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyB4KHBhcnNlSnVsaWFuRGF5KGRbMF0pKSA6IHgoaSAqIDggKyAzKTtcblx0ICAgIH0pLnkoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShkKSA/IHkoZFsxXSkgOiB5KGQpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcIm92ZXJsYXBwaW5nLWdyYXBoXCIsIHRydWUpO1xuXHRcblx0ICAgIC8vIEFkZHMgdGhlIHN2ZyBjYW52YXNcblx0ICAgIHZhciBzdmcgPSB3cmFwcGVyLmFwcGVuZChcInN2Z1wiKS5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciB3ID0gd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodDtcblx0ICAgICAgICB2YXIgaCA9IGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tO1xuXHQgICAgICAgIHJldHVybiAnMCAwICcgKyB3ICsgJyAnICsgaDtcblx0ICAgIH0pLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKVxuXHQgICAgLy8uYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXG5cdCAgICAvLy5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKVxuXHQgICAgLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xuXHRcblx0ICAgIHN2Zy5jYWxsKHRpcCk7XG5cdFxuXHQgICAgLy8gQWRkIHRoZSBYIEF4aXNcblx0ICAgIHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInggYXhpc1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIikuY2FsbCh4QXhpcyk7XG5cdFxuXHQgICAgLy8gQWRkIHRoZSBZIEF4aXNcblx0ICAgIHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInkgYXhpc1wiKS5jYWxsKHlBeGlzKTtcblx0XG5cdCAgICBjaGFydHNbXCJtZWRpYW5zXCJdID0ge1xuXHQgICAgICAgIFwicGF0aFwiOiBkcmF3TGluZWFyUGF0aChkYXRhW1wibWVkaWFuc1wiXSwgdmFsdWVsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIGNoYXJ0c1t5ZWFyXSA9IHtcblx0ICAgICAgICBcInBhdGhcIjogZHJhd0xpbmVhclBhdGgoZGF0YVt5ZWFyXSwgdmFsdWVsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxyXG5cdCAgICAgKi9cblx0ICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl1bXCJwb2ludHNcIl0gPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbXCJtZWRpYW5zXCJdLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHQgICAgY2hhcnRzW3llYXJdW1wicG9pbnRzXCJdID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW3llYXJdLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHRcblx0ICAgIHZhciBpbnB1dHdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwiaW5wdXQtd3JhcHBlclwiLCB0cnVlKTtcblx0XG5cdCAgICBkYXRhLmtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgY3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBrZXksIFwidGltZXNlcmllc1wiLCB5ZWFyLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgY3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBcIm1lZGlhbnNcIiwgXCJ0aW1lc2VyaWVzXCIsIFwibWVkaWFuc1wiLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFBPTEFSIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMoZGF0YSwgZGl2LCBsYXQsIGxuZykge1xuXHQgICAgdmFyIHllYXIgPSBcIjIwMTVcIjtcblx0ICAgIHZhciB3aWR0aCA9IDQ5MCxcblx0ICAgICAgICBoZWlnaHQgPSA0OTAsXG5cdCAgICAgICAgcmFkaXVzID0gTWF0aC5taW4od2lkdGgsIGhlaWdodCkgLyAyIC0gMzA7XG5cdFxuXHQgICAgdmFyIGF2ZXJhZ2VzID0gZGF0YVtcIm1lZGlhbnNcIl07XG5cdCAgICB2YXIgY2VudGVyID0gZmluZFBvbGFyQ2VudGVyKGRhdGEpO1xuXHQgICAgdmFyIHRocmVzaG9sZHMgPSBmaW5kUG9sYXJUaHJlc2hvbGRzKGF2ZXJhZ2VzLCBjZW50ZXJbMV1bMF0pO1xuXHRcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBTZXRzIHVwIHNjYWxpbmcgb2YgZGF0YS4gV2Uga25vdyB0aGF0IHRoZSBuZHZpIHZhbHVlcyBmYWxsIGJldHdlZW5cclxuXHQgICAgICogMCAmIDEwMCBzbyB3ZSBzZXQgb3VyIGRvbWFpbiB0byB0aGF0LiBUaGUgcmFuZ2UgY29udHJvbHMgd2hlcmUgdGhlXHJcblx0ICAgICAqIHBvaW50cyB3aWxsIGxpZSBpbiBvdXIgZ3JhcGgsIHNvIHdlIHNldCB0aGVtIHRvIGJlIGJldHdlZW4gMCBhbmQgdGhlXHJcblx0ICAgICAqIHJhZGl1cy5cclxuXHQgICAgICovXG5cdCAgICB2YXIgciA9IGQzLnNjYWxlTGluZWFyKCkuZG9tYWluKFswLCAxMDBdKS5yYW5nZShbMCwgcmFkaXVzXSk7XG5cdFxuXHQgICAgLyoqXHJcblx0ICAgICAqIGZ1bmN0aW9uIHdoaWNoIHdpbGwgZHJhdyBlYWNoIHBvaW50LiBUbyBjb21wdXRlIHRoZSBkaXN0YW5jZSBmcm9tIHRoZVxyXG5cdCAgICAgKiBjZW50ZXIgZWFjaCBwb2ludCBpcyB3ZSBwYXNzIHRoZSBkYXRhcG9pbnQgdG8gdGhlIGZ1bmN0aW9uIGRlZmluZWQgYWJvdmUuXHJcblx0ICAgICAqIFRvIGRldGVybWluZSB0aGUgYW5nbGUgZnJvbSB0aGUgb3JpZ2luIHdlIG5lZWQgdG8gY29udmVydCB0aGUgZGF5IHRvXHJcblx0ICAgICAqIHJhZGlhbnMsIHNvIHdlIGNvbnZlcnQgdGhlIGRheSB0byBhIG51bWJlciBiZXR3ZWVuIDAgJiAxIGFuZCB0aGVuIG11bHRpcGx5XHJcblx0ICAgICAqIGl0IGJ5IDIgcGkuXHJcblx0ICAgICAqL1xuXHQgICAgdmFyIGxpbmUgPSBkMy5yYWRpYWxMaW5lKCkucmFkaXVzKGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyByKGRbMV0pIDogcihkKTtcblx0ICAgIH0pLmFuZ2xlKGZ1bmN0aW9uIChkLCBpKSB7XG5cdCAgICAgICAgdmFyIGRheSA9IEFycmF5LmlzQXJyYXkoZCkgPyBwYXJzZUp1bGlhbkRheShkWzBdKSA6IGkgKiA4ICsgMztcblx0ICAgICAgICByZXR1cm4gKGRheSAtIDEpICUgMzY1IC8gMzY1ICogKDIgKiBNYXRoLlBJKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBTZXRzIHVwIHRoZSBjYW52YXMgd2hlcmUgdGhlIGNpcmNsZSB3aWxsIGJlIGRyYXduLlxyXG5cdCAgICAgKi9cblx0ICAgIHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KGRpdikuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJwb2xhci1ncmFwaFwiLCB0cnVlKTtcblx0ICAgIHZhciBzdmcgPSB3cmFwcGVyLmFwcGVuZChcInN2Z1wiKVxuXHQgICAgLy8uYXR0cihcIndpZHRoXCIsIHdpZHRoKVxuXHQgICAgLy8uYXR0cihcImhlaWdodFwiLCBoZWlnaHQpXG5cdCAgICAuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gJzAgMCAnICsgd2lkdGggKyAnICcgKyBoZWlnaHQ7XG5cdCAgICB9KS5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJykuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgd2lkdGggLyAyICsgXCIsXCIgKyBoZWlnaHQgLyAyICsgXCIpXCIpO1xuXHRcblx0ICAgIHN2Zy5jYWxsKHRpcCk7XG5cdFxuXHQgICAgLyoqXHJcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgYmlnIGNpcmNsZXMgb2YgdGhlIGdyYXBoICYgdGhlaXIgbGFiZWxzXHJcblx0ICAgICAqL1xuXHQgICAgdmFyIGdyID0gc3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwiciBheGlzXCIpLnNlbGVjdEFsbChcImdcIikuZGF0YShyLnRpY2tzKDUpLnNsaWNlKDEpKS5lbnRlcigpLmFwcGVuZChcImdcIik7XG5cdFxuXHQgICAgZ3IuYXBwZW5kKFwiY2lyY2xlXCIpLmF0dHIoXCJyXCIsIHIpO1xuXHRcblx0ICAgIGdyLmFwcGVuZChcInRleHRcIikuYXR0cihcInlcIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gLXIoZCkgLSA0O1xuXHQgICAgfSkuYXR0cihcInRyYW5zZm9ybVwiLCBcInJvdGF0ZSgxNSlcIikuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKS50ZXh0KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIGQ7XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKipcclxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBsYWJlbHMgZm9yIGVhY2ggbW9udGggYW5kIHRoZSBsaW5lc1xyXG5cdCAgICAgKiB0aGF0IGdvIG91dCB0byB0aGVtLlxyXG5cdCAgICAgKi9cblx0ICAgIHZhciBnYV9hID0gc3ZnLmFwcGVuZChcImdcIikuYXR0cihcImNsYXNzXCIsIFwiYSBheGlzXCIpLnNlbGVjdEFsbChcImdcIikuZGF0YShkMy5yYW5nZSgwLCAzNjAsIDMwKSkuZW50ZXIoKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gXCJyb3RhdGUoXCIgKyAoZCAtIDkwKSArIFwiKVwiO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgZ2FfYS5hcHBlbmQoXCJsaW5lXCIpLmF0dHIoXCJ4MlwiLCByYWRpdXMpO1xuXHRcblx0ICAgIGdhX2EuYXBwZW5kKFwidGV4dFwiKS5hdHRyKFwieFwiLCByYWRpdXMgKyA2KS5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKS5zdHlsZShcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIGQgPCAzNjAgJiYgZCA+IDE4MCA/IFwiZW5kXCIgOiBudWxsO1xuXHQgICAgfSkuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkIDwgMzYwICYmIGQgPiAxODAgPyBcInJvdGF0ZSgxODAgXCIgKyAocmFkaXVzICsgNikgKyBcIiwwKVwiIDogbnVsbDtcblx0ICAgIH0pLnRleHQoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gTU9OVEhfTEFCRUxTW2QgLyAzMF07XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKipcclxuXHQgICAgICogRHJhd3MgdGhlIHRocmVzaG9sZCBsaW5lc1xyXG5cdCAgICAgKi9cblx0ICAgIHZhciB0aHJlc2hvbGRFbGVtID0gc3ZnLmFwcGVuZChcImdcIikuc2VsZWN0QWxsKFwiZ1wiKS5kYXRhKHRocmVzaG9sZHMpLmVudGVyKCkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIFwicm90YXRlKFwiICsgKGQuZGF0YVsxXVswXSAtIDkwKSArIFwiKVwiO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdGhyZXNob2xkRWxlbS5hcHBlbmQoXCJsaW5lXCIpLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIikuYXR0cihcIngyXCIsIHJhZGl1cyk7XG5cdFxuXHQgICAgdGhyZXNob2xkRWxlbS5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgdmFyIGRheSA9IGQuZGF0YVsxXVswXTtyZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IHJhZGl1cyArIDMwIDogcmFkaXVzIC0gMzA7XG5cdCAgICB9KS5hdHRyKFwieVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkLmRhdGFbMV1bMF0gJSAzNjUgLyAzNjUgKiAoMiAqIE1hdGguUEkpICsgNjtcblx0ICAgIH0pLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdO3JldHVybiBkYXkgPCAzNjAgJiYgZGF5ID4gMTgwID8gXCJtaWRkbGVcIiA6IG51bGw7XG5cdCAgICB9KS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgdmFyIGRheSA9IGQuZGF0YVsxXVswXTtyZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IFwicm90YXRlKDE4MCBcIiArIChyYWRpdXMgKyA2KSArIFwiLDApXCIgOiBudWxsO1xuXHQgICAgfSkudGV4dChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkLmxhYmVsO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXHJcblx0ICAgICAqIERyYXdzIHRoZSBsaW5lIHRvIHRoZSBjZW50ZXIgb2YgdGhlIGRhdGFcclxuXHQgICAgICovXG5cdCAgICB2YXIgY2VudGVyRGF5ID0gY2VudGVyWzFdWzBdO1xuXHQgICAgdmFyIGNlbnRlckRheU9wcG9zaXRlID0gKGNlbnRlckRheSArIDM2NSAvIDIpICUgMzY1O1xuXHQgICAgdmFyIGNlbnRlckRheURhdGEgPSBbY2VudGVyRGF5LCAxMDBdO1xuXHQgICAgdmFyIGNlbnRlckRheU9wcG9zaXRlRGF0YSA9IFtjZW50ZXJEYXlPcHBvc2l0ZSwgMTAwXTtcblx0ICAgIHZhciBncm93aW5nU2Vhc29uRGF0YSA9IFtjZW50ZXJEYXlEYXRhLCBjZW50ZXJEYXlPcHBvc2l0ZURhdGFdO1xuXHRcblx0ICAgIGRyYXdQb2xhclBhdGgoZ3Jvd2luZ1NlYXNvbkRhdGEsIGxpbmUsIHN2ZykuY2xhc3NlZChcImdyb3dpbmctc2Vhc29uLWxpbmVcIiwgXCJ0cnVlXCIpO1xuXHRcblx0ICAgIGRyYXdQb2xhclBhdGgoY2VudGVyLCBsaW5lLCBzdmcpLmNsYXNzZWQoXCJjZW50ZXItbGluZVwiLCBcInRydWVcIik7XG5cdFxuXHQgICAgc3ZnLnNlbGVjdEFsbChcInBvaW50XCIpLmRhdGEoW2NlbnRlclsxXV0pLmVudGVyKCkuYXBwZW5kKFwiY2lyY2xlXCIpLmF0dHIoXCJjbGFzc1wiLCBcImNlbnRlclwiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgdmFyIGNvb3JzID0gbGluZShbZF0pLnNsaWNlKDEpLnNsaWNlKDAsIC0xKTtcblx0ICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBjb29ycyArIFwiKVwiO1xuXHQgICAgfSkuYXR0cihcInN0cm9rZVwiLCBcIiMwMDBcIikuYXR0cihcImZpbGxcIiwgXCIjZWEwYzQ4XCIpLm9uKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgdGlwLnNob3coXCJDZW50ZXI6IFwiICsgU3RyaW5nKGRbMV0pLnN1YnN0cmluZygwLCA3KSk7XG5cdCAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblx0ICAgIH0pLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB0aXAuaGlkZSgpO1xuXHQgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgY2hhcnRzID0ge307XG5cdFxuXHQgICAgLyoqXHJcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgbGluZSB0aGF0IHRoZSBkYXRhIGZvbGxvd3NcclxuXHQgICAgICovXG5cdCAgICBjaGFydHNbXCJtZWRpYW5zXCJdID0ge1xuXHQgICAgICAgIFwicGF0aFwiOiBkcmF3UG9sYXJQYXRoKGF2ZXJhZ2VzLCBsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIGNoYXJ0c1t5ZWFyXSA9IHtcblx0ICAgICAgICBcInBhdGhcIjogZHJhd1BvbGFyUGF0aChkYXRhW3llYXJdLCBsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxyXG5cdCAgICAgKi9cblx0ICAgIGNoYXJ0cy5tZWRpYW5zLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoYXZlcmFnZXMsIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHQgICAgY2hhcnRzW3llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdFxuXHQgICAgdmFyIGlucHV0d3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJpbnB1dC13cmFwcGVyXCIsIHRydWUpO1xuXHRcblx0ICAgIGRhdGEua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblx0XG5cdCAgICAgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImlucHV0XCIpLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIikuYXR0cihcImlkXCIsIFwicG9sYXItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpLmF0dHIoXCJ2YWx1ZVwiLCBrZXkpLnByb3BlcnR5KFwiY2hlY2tlZFwiLCBrZXkgPT09IHllYXIgPyB0cnVlIDogZmFsc2UpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcblx0ICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoLnJlbW92ZSgpO1xuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcblx0XG5cdCAgICAgICAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBncmFwaCB5ZWFyIGNsaWNrIG9mZlxuXHQgICAgICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcblx0ICAgICAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0ICAgICAgICAgICAgICAgICAgICBldmVudExhYmVsOiBuZXdZZWFyICsgJyBwb2xhciB0aW1lc2VyaWVzIG9mZicsXG5cdCAgICAgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIGlmICghY2hhcnRzLmhhc093blByb3BlcnR5KG5ld1llYXIpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG5cdCAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZ3JhcGggeWVhciBjbGljayBvZmZcblx0ICAgICAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXG5cdCAgICAgICAgICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdCAgICAgICAgICAgICAgICAgICAgZXZlbnRMYWJlbDogbmV3WWVhciArICcgcG9sYXIgdGltZXNlcmllcyBvbicsXG5cdCAgICAgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdQb2xhclBhdGgoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnKTtcblx0ICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKS50ZXh0KGtleSkuYXR0cihcImZvclwiLCBcInBvbGFyLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblx0XG5cdCAgICAgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImRpdlwiKS5zdHlsZShcImJhY2tncm91bmRcIiwgcHVsbERpc3RpbmN0Q29sb3Ioa2V5ICE9PSBcIm1lZGlhbnNcIiA/IGtleSA6IDApKS5jbGFzc2VkKFwiZ3JhcGgtcGlwLWV4YW1wbGVcIiwgdHJ1ZSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgXCJwb2xhci1hdmVyYWdlLVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKS5hdHRyKFwidmFsdWVcIiwgXCJtZWRpYW5zXCIpLnByb3BlcnR5KFwiY2hlY2tlZFwiLCB0cnVlKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcblx0XG5cdCAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGdyYXBoIHllYXIgY2xpY2sgb2ZmXG5cdCAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcblx0ICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHQgICAgICAgICAgICAgICAgZXZlbnRMYWJlbDogbmV3WWVhciArICcgcG9sYXIgdGltZXNlcmllcyBvZmYnLFxuXHQgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGlmICghY2hhcnRzLmhhc093blByb3BlcnR5KG5ld1llYXIpKSB7XG5cdCAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZ3JhcGggeWVhciBjbGljayBvZmZcblx0ICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxuXHQgICAgICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdCAgICAgICAgICAgICAgICBldmVudExhYmVsOiBuZXdZZWFyICsgJyBwb2xhciB0aW1lc2VyaWVzIG9uJyxcblx0ICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd1BvbGFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwibGFiZWxcIikudGV4dChcIkJhc2VsaW5lXCIpLmF0dHIoXCJmb3JcIiwgXCJwb2xhci1hdmVyYWdlLVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLnN0eWxlKFwiYmFja2dyb3VuZFwiLCBwdWxsRGlzdGluY3RDb2xvcigwKSkuY2xhc3NlZChcImdyYXBoLXBpcC1leGFtcGxlXCIsIHRydWUpO1xuXHRcblx0ICAgIHZhciB0aHJlc2hvbGRDaGVja2JveCA9IGlucHV0d3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcInRocmVzaG9sZC1jaGVja2JveFwiLCB0cnVlKTtcblx0XG5cdCAgICB0aHJlc2hvbGRDaGVja2JveC5hcHBlbmQoXCJpbnB1dFwiKS5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpLmF0dHIoXCJpZFwiLCBcInRocmVzaG9sZC1jaGVja2JveC1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSkucHJvcGVydHkoXCJjaGVja2VkXCIsIHRydWUpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgdGhyZXNob2xkRWxlbS5zdHlsZShcIm9wYWNpdHlcIiwgdGhpcy5jaGVja2VkID8gMSA6IDApO1xuXHQgICAgICAgIHZhciBvZmZvbiA9IHRoaXMuY2hlY2tlZCA/ICdvZmYnIDogJ29uJztcblx0XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZ3JhcGggdGhyZXNob2xkIGNsaWNrIG9mZlxuXHQgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxuXHQgICAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0ICAgICAgICAgICAgZXZlbnRMYWJlbDogJ3RocmVzaG9sZCBwb2xhciB0aW1lc2VyaWVzICcgKyBvZmZvbixcblx0ICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgfSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB0aHJlc2hvbGRDaGVja2JveC5hcHBlbmQoXCJsYWJlbFwiKS50ZXh0KFwiVGhyZXNob2xkc1wiKS5hdHRyKFwiZm9yXCIsIFwidGhyZXNob2xkLWNoZWNrYm94LVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblx0fVxuXHRcblx0LyogUE9MQVIgR1JBUEggSEVMUEVSUyAqL1xuXHRcblx0ZnVuY3Rpb24gZmluZFBvbGFyQ2VudGVyKGRhdGEpIHtcblx0ICAgIHZhciBpLCBqLCBsZW5ndGgsIGFycjtcblx0ICAgIHZhciB0b3RhbFN1bSA9IDA7XG5cdCAgICB2YXIgaW5jb21wbGV0ZVllYXJzID0gMDtcblx0ICAgIHZhciBzdW07XG5cdCAgICBsZW5ndGggPSA0Njtcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5rZXlzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgYXJyID0gZGF0YVtkYXRhLmtleXNbaV1dO1xuXHQgICAgICAgIGlmIChhcnIubGVuZ3RoICE9PSBsZW5ndGgpIHtcblx0ICAgICAgICAgICAgaW5jb21wbGV0ZVllYXJzKys7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdW0gPSAwO1xuXHQgICAgICAgIGZvciAoaiA9IDA7IGogPCBsZW5ndGggLyAyOyBqKyspIHtcblx0ICAgICAgICAgICAgc3VtICs9IGFycltqXVsxXSAtIGFycltqICsgMjNdWzFdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdW0gPSBzdW0gLyAyMztcblx0ICAgICAgICB0b3RhbFN1bSArPSBzdW07XG5cdCAgICB9XG5cdCAgICB0b3RhbFN1bSA9IE1hdGguYWJzKHRvdGFsU3VtKSAvIChkYXRhLmtleXMubGVuZ3RoIC0gaW5jb21wbGV0ZVllYXJzKTtcblx0XG5cdCAgICB2YXIgYXJlYURpZmYgPSAxMDAwMDAwO1xuXHQgICAgdmFyIGNoZWNrRGlmZjtcblx0ICAgIHZhciBhcmVhSW5kZXggPSAwO1xuXHQgICAgdmFyIGxlZnRBcmVhLCByaWdodEFyZWE7XG5cdCAgICB2YXIgYXZncyA9IGRhdGEubWVkaWFucztcblx0ICAgIHZhciBrLCBjb3VudGVyO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGggLyAyOyBpKyspIHtcblx0ICAgICAgICBsZWZ0QXJlYSA9IDA7XG5cdCAgICAgICAgcmlnaHRBcmVhID0gMDtcblx0ICAgICAgICBmb3IgKGNvdW50ZXIgPSAwOyBjb3VudGVyIDwgbGVuZ3RoIC8gMjsgY291bnRlcisrKSB7XG5cdCAgICAgICAgICAgIGogPSAoaSArIGNvdW50ZXIpICUgNDY7XG5cdCAgICAgICAgICAgIGsgPSAoaiArIDIzKSAlIDQ2O1xuXHRcblx0ICAgICAgICAgICAgbGVmdEFyZWEgKz0gcGFyc2VJbnQoYXZnc1tqXSwgMTApO1xuXHQgICAgICAgICAgICByaWdodEFyZWEgKz0gcGFyc2VJbnQoYXZnc1trXSwgMTApO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjaGVja0RpZmYgPSBNYXRoLmFicyhsZWZ0QXJlYSAtIHJpZ2h0QXJlYSk7XG5cdCAgICAgICAgaWYgKGNoZWNrRGlmZiA8IGFyZWFEaWZmKSB7XG5cdCAgICAgICAgICAgIGFyZWFEaWZmID0gY2hlY2tEaWZmO1xuXHQgICAgICAgICAgICBhcmVhSW5kZXggPSBpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZmlyc3RSYWRpdXMgPSBwYXJzZUludChhdmdzW2FyZWFJbmRleF0sIDEwKTtcblx0ICAgIHZhciBzZWNvbmRSYWRpdXMgPSBwYXJzZUludCgtYXZnc1thcmVhSW5kZXggKyAyM10sIDEwKTtcblx0XG5cdCAgICB2YXIgZmlyc3REaWZmID0gTWF0aC5hYnModG90YWxTdW0gLSBmaXJzdFJhZGl1cykgLSBNYXRoLmFicyh0b3RhbFN1bSAtIHNlY29uZFJhZGl1cyk7XG5cdCAgICB2YXIgc2Vjb25kRGlmZiA9IE1hdGguYWJzKC10b3RhbFN1bSAtIGZpcnN0UmFkaXVzKSAtIE1hdGguYWJzKC10b3RhbFN1bSAtIHNlY29uZFJhZGl1cyk7XG5cdCAgICBpZiAoc2Vjb25kRGlmZiA+IGZpcnN0RGlmZikge1xuXHQgICAgICAgIGFyZWFJbmRleCA9IGFyZWFJbmRleCArIDIzO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjaXJjbGVjZW50ZXIgPSBbMCwgMF07XG5cdCAgICB2YXIgZGF0YWNlbnRlciA9IFthcmVhSW5kZXggKiA4ICsgMywgdG90YWxTdW1dO1xuXHRcblx0ICAgIHJldHVybiBbY2lyY2xlY2VudGVyLCBkYXRhY2VudGVyXTtcblx0fVxuXHRcblx0LyoqXHJcblx0ICogc3RhcnREYXkgaXMgYWN0dWFsbHkgdGhlIHNlYXNvbmFsaXR5IGluZGV4LCBpZiBpdCBvY2N1cnMgYWZ0ZXIganVseSBpdCBzaG91bGQgYmUgZmxpcHBlZFxyXG5cdCAqL1xuXHRmdW5jdGlvbiBmaW5kUG9sYXJUaHJlc2hvbGRzKGRhdGEsIHN0YXJ0RGF5KSB7XG5cdCAgICB2YXIgc3RhcnRJbmRleCA9IE1hdGguZmxvb3IoKHN0YXJ0RGF5IC0gMykgLyA4KTtcblx0ICAgIGlmIChzdGFydEluZGV4ID4gMjIpIHtcblx0ICAgICAgICBzdGFydEluZGV4ID0gc3RhcnRJbmRleCAtIDIzO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpLCBqLCBsZW5ndGgsIGFycjtcblx0ICAgIHZhciB0b3RhbFN1bSA9IDA7XG5cdCAgICB2YXIgc3VtO1xuXHQgICAgbGVuZ3RoID0gNDY7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgaiA9IChzdGFydEluZGV4ICsgaSkgJSBsZW5ndGg7XG5cdCAgICAgICAgdG90YWxTdW0gKz0gcGFyc2VJbnQoZGF0YVtqXSwgMTApO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBmaWZ0ZWVuVGhyZXNob2xkID0gdG90YWxTdW0gKiAuMTU7XG5cdCAgICB2YXIgZWlnaHR5VGhyZXNob2xkID0gdG90YWxTdW0gKiAuODA7XG5cdCAgICB2YXIgZmlmdGVlbkluZGV4Rm91bmQgPSBmYWxzZSxcblx0ICAgICAgICBlaWdodHlJbmRleEZvdW5kID0gZmFsc2U7XG5cdCAgICB2YXIgZmlmdGVlbkluZGV4LCBlaWdodHlJbmRleDtcblx0XG5cdCAgICB0b3RhbFN1bSA9IDA7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBqID0gKHN0YXJ0SW5kZXggKyBpKSAlIGxlbmd0aDtcblx0ICAgICAgICB0b3RhbFN1bSArPSBwYXJzZUludChkYXRhW2pdLCAxMCk7XG5cdCAgICAgICAgaWYgKCFmaWZ0ZWVuSW5kZXhGb3VuZCAmJiB0b3RhbFN1bSA+IGZpZnRlZW5UaHJlc2hvbGQpIHtcblx0ICAgICAgICAgICAgZmlmdGVlbkluZGV4ID0gajtcblx0ICAgICAgICAgICAgZmlmdGVlbkluZGV4Rm91bmQgPSB0cnVlO1xuXHQgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFlaWdodHlJbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZWlnaHR5VGhyZXNob2xkKSB7XG5cdCAgICAgICAgICAgIGVpZ2h0eUluZGV4ID0gajtcblx0ICAgICAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IHRydWU7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgY2lyY2xlQ2VudGVyID0gWzAsIDBdO1xuXHRcblx0ICAgIHZhciBmaWZ0ZWVuRW5kID0gW2ZpZnRlZW5JbmRleCAqIDggKyAzLCAxMDBdO1xuXHQgICAgdmFyIGVpZ2h0eUVuZCA9IFtlaWdodHlJbmRleCAqIDggKyAzLCAxMDBdO1xuXHRcblx0ICAgIHJldHVybiBbe1xuXHQgICAgICAgIFwibGFiZWxcIjogXCIxNSVcIixcblx0ICAgICAgICBcImRhdGFcIjogW2NpcmNsZUNlbnRlciwgZmlmdGVlbkVuZF1cblx0ICAgIH0sIHtcblx0ICAgICAgICBcImxhYmVsXCI6IFwiODAlXCIsXG5cdCAgICAgICAgXCJkYXRhXCI6IFtjaXJjbGVDZW50ZXIsIGVpZ2h0eUVuZF1cblx0ICAgIH1dO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSEVMUEVSUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gZHJhd0xpbmVhclBhdGgoZGF0YSwgbGluZSwgc3ZnKSB7XG5cdCAgICByZXR1cm4gc3ZnLmFwcGVuZChcInBhdGhcIikuYXR0cihcImNsYXNzXCIsIFwibGluZVwiKS5hdHRyKFwiZFwiLCBsaW5lKGRhdGEpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhd1BvbGFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcblx0ICAgIHJldHVybiBzdmcuYXBwZW5kKFwicGF0aFwiKS5kYXR1bShkYXRhKS5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpLmF0dHIoXCJkXCIsIGxpbmUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmF3TGluZWFyUG9pbnRzKGRhdGEsIGxpbmUsIHN2ZywgYXZlcmFnZXMpIHtcblx0ICAgIHJldHVybiBzdmcuc2VsZWN0QWxsKFwicG9pbnRcIikuZGF0YShkYXRhKS5lbnRlcigpLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiY2xhc3NcIiwgXCJwb2ludFwiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkLCBpKSB7XG5cdCAgICAgICAgdmFyIHBvaW50ID0gQXJyYXkuaXNBcnJheShkKSA/IGQgOiBbaSAqIDggKyAzLCBkXTtcblx0ICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtwb2ludF0pLnNsaWNlKDEpLnNsaWNlKDAsIC0xKTtcblx0ICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBjb29ycyArIFwiKVwiO1xuXHQgICAgfSlcblx0ICAgIC8vLmF0dHIoXCJyXCIsIDMpXG5cdCAgICAuYXR0cihcInN0cm9rZVwiLCBcIiMwMDBcIikuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24gKGQsIGkpIHtcblx0ICAgICAgICB2YXIgdmFsID0gQXJyYXkuaXNBcnJheShkKSA/IGRbMF0uc3Vic3RyaW5nKDAsIDQpIDogMDtcblx0ICAgICAgICByZXR1cm4gcHVsbERpc3RpbmN0Q29sb3IodmFsKTtcblx0ICAgIH0pLm9uKFwibW91c2VvdmVyXCIsIGhhbmRsZVBvaW50TW91c2VvdmVyKS5vbihcIm1vdXNlb3V0XCIsIGhhbmRsZVBvaW50TW91c2VvdXQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVQb2ludE1vdXNlb3ZlcihkKSB7XG5cdCAgICB2YXIgdGlwU3RyaW5nID0gQXJyYXkuaXNBcnJheShkKSA/IGZvcm1hdERhdGUoZFswXSkgKyBcIjogXCIgKyBkWzFdIDogXCJBdmVyYWdlOiBcIiArIGQ7XG5cdCAgICB0aXAuc2hvdyh0aXBTdHJpbmcpO1xuXHQgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblx0ICAgIC8vdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDUpO1xuXHQgICAgLy90aGlzLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjJweFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlUG9pbnRNb3VzZW91dChkKSB7XG5cdCAgICB0aXAuaGlkZSgpO1xuXHQgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcblx0ICAgIC8vdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDMpO1xuXHQgICAgLy90aGlzLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjFweFwiKTtcblx0XG5cdCAgICB2YXIgYWN0aXZlVHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF0uZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKTtcblx0XG5cdCAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyB0b29sIHRpcCBvbiBncmFwaCBkbyB0aGlzIG9uIHRoZSBtb3VzZW91dCBzbyBtb3VzZW92ZXIgZG9zZSBub3QgZG8gYSBsb3Qgb2YgZXZlbnRzLi4uLlxuXHQgICAgLy8gd2UgbWlzcyBhIGZldyBidXQgdGhhdCBpcyBiZXR0ZXIgdGhhbiBvdmVyIGNvdW50aW5nLlxuXHQgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcblx0ICAgICAgICBldmVudEFjdGlvbjogJ2hvdmVyJyxcblx0ICAgICAgICBldmVudExhYmVsOiBhY3RpdmVUeXBlICsgJyB0b29sIHRpcCcsXG5cdCAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQ2hlY2tib3god3JhcHBlciwga2V5LCB0eXBlLCB5ZWFyLCBjaGFydHMsIGRhdGEsIGxpbmUsIHN2ZywgYXZlcmFnZXMsIGxhdCwgbG5nKSB7XG5cdCAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIik7XG5cdFxuXHQgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImlucHV0XCIpLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIikuYXR0cihcImlkXCIsIHR5cGUgKyBcIi1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSkuYXR0cihcInZhbHVlXCIsIGtleSkucHJvcGVydHkoXCJjaGVja2VkXCIsIGtleSA9PT0geWVhciA/IHRydWUgOiBmYWxzZSkub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICB2YXIgbmV3WWVhciA9IHRoaXMudmFsdWU7XG5cdCAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGgucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMucmVtb3ZlKCk7XG5cdFxuXHQgICAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBncmFwaCB5ZWFyIGNsaWNrIG9mZlxuXHQgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXG5cdCAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0ICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6IG5ld1llYXIgKyAnIG92ZXJsYXBwaW5nIHRpbWVzZXJpZXMgb2ZmJyxcblx0ICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3TGluZWFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0XG5cdCAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGdyYXBoIHllYXIgY2xpY2sgb25cblx0ICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxuXHQgICAgICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdCAgICAgICAgICAgICAgICBldmVudExhYmVsOiBuZXdZZWFyICsgJyBvdmVybGFwcGluZyB0aW1lc2VyaWVzIG9uJyxcblx0ICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwibGFiZWxcIikudGV4dChrZXkpLmF0dHIoXCJmb3JcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLnN0eWxlKFwiYmFja2dyb3VuZFwiLCBwdWxsRGlzdGluY3RDb2xvcihrZXkgIT09IFwibWVkaWFuc1wiID8ga2V5IDogMCkpLmNsYXNzZWQoXCJncmFwaC1waXAtZXhhbXBsZVwiLCB0cnVlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcHVsbERpc3RpbmN0Q29sb3IoeWVhcikge1xuXHQgICAgdmFyIGNvbG9yUmFtcCA9IFtcIiNmZmU0NzZcIiwgXCIjMDM2NTkzXCIsIFwiIzExNmM5MVwiLCBcIiMxZTczOTBcIiwgXCIjMmM3YjhlXCIsIFwiIzM5ODI4Y1wiLCBcIiM0YzhjOGFcIiwgXCIjNWU5NTg5XCIsIFwiIzcxOWY4N1wiLCBcIiM4M2E4ODZcIiwgXCIjOTViMTgzXCIsIFwiI2E2YmE4MFwiLCBcIiNiOGMzN2NcIiwgXCIjY2FjYzc5XCIsIFwiI2Q2ZDI3OVwiLCBcIiNlMmQ3NzlcIiwgXCIjZWZkZDc4XCIsIFwiI2ZiZTM3OFwiXTtcblx0XG5cdCAgICByZXR1cm4geWVhciA9PT0gMCA/IFwiI2ZmZlwiIDogY29sb3JSYW1wW3BhcnNlSW50KHllYXIsIDEwKSAlIGNvbG9yUmFtcC5sZW5ndGhdO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIERBVEUgSEVMUEVSUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlRGF0ZShkYXRlKSB7XG5cdCAgICBkYXRlID0gZGF0ZS50b1N0cmluZygpO1xuXHQgICAgdmFyIHllYXIgPSBkYXRlLnN1YnN0cmluZygwLCA0KTtcblx0ICAgIHZhciBtb250aCA9IHBhcnNlSW50KGRhdGUuc3Vic3RyaW5nKDQsIDYpLCAxMCkgLSAxO1xuXHQgICAgdmFyIGRheSA9IGRhdGUuc3Vic3RyaW5nKDYsIDgpO1xuXHRcblx0ICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGFyc2VKdWxpYW5EYXkoZGF0ZSkge1xuXHQgICAgaWYgKHR5cGVvZiBkYXRlID09PSBcInN0cmluZ1wiKSB7XG5cdCAgICAgICAgZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcblx0ICAgICAgICByZXR1cm4gZGF0ZS5nZXRET1koKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGRhdGU7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZSkge1xuXHQgICAgaWYgKGRhdGUgPT09IFwiQXZlcmFnZVwiKSB7XG5cdCAgICAgICAgcmV0dXJuIGRhdGU7XG5cdCAgICB9XG5cdFxuXHQgICAgZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcblx0ICAgIHJldHVybiBmb3JtYXRNb250aChkYXRlLmdldE1vbnRoKCkpICsgXCIgXCIgKyBvcmRpbmFsX3N1ZmZpeF9vZihkYXRlLmdldERhdGUoKSkgKyBcIiwgXCIgKyBkYXRlLmdldEZ1bGxZZWFyKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdE1vbnRoKG1vbnRoKSB7XG5cdCAgICBzd2l0Y2ggKG1vbnRoKSB7XG5cdCAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJKYW4uXCI7XG5cdCAgICAgICAgY2FzZSAxOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJGZWIuXCI7XG5cdCAgICAgICAgY2FzZSAyOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJNYXIuXCI7XG5cdCAgICAgICAgY2FzZSAzOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJBcHIuXCI7XG5cdCAgICAgICAgY2FzZSA0OlxuXHQgICAgICAgICAgICByZXR1cm4gXCJNYXlcIjtcblx0ICAgICAgICBjYXNlIDU6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkp1bi5cIjtcblx0ICAgICAgICBjYXNlIDY6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkp1bC5cIjtcblx0ICAgICAgICBjYXNlIDc6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkF1Zy5cIjtcblx0ICAgICAgICBjYXNlIDg6XG5cdCAgICAgICAgICAgIHJldHVybiBcIlNlcC5cIjtcblx0ICAgICAgICBjYXNlIDk6XG5cdCAgICAgICAgICAgIHJldHVybiBcIk9jdC5cIjtcblx0ICAgICAgICBjYXNlIDEwOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJOb3YuXCI7XG5cdCAgICAgICAgY2FzZSAxMTpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiRGVjLlwiO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBvcmRpbmFsX3N1ZmZpeF9vZihkYXkpIHtcblx0ICAgIHZhciBqID0gZGF5ICUgMTAsXG5cdCAgICAgICAgayA9IGRheSAlIDEwMDtcblx0ICAgIGlmIChqID09PSAxICYmIGsgIT09IDExKSB7XG5cdCAgICAgICAgcmV0dXJuIGRheSArIFwic3RcIjtcblx0ICAgIH1cblx0ICAgIGlmIChqID09PSAyICYmIGsgIT09IDEyKSB7XG5cdCAgICAgICAgcmV0dXJuIGRheSArIFwibmRcIjtcblx0ICAgIH1cblx0ICAgIGlmIChqID09PSAzICYmIGsgIT09IDEzKSB7XG5cdCAgICAgICAgcmV0dXJuIGRheSArIFwicmRcIjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBkYXkgKyBcInRoXCI7XG5cdH1cblx0XG5cdHZhciBNT05USF9MQUJFTFMgPSB7XG5cdCAgICAwOiBcIkphblwiLFxuXHQgICAgMTogXCJGZWJcIixcblx0ICAgIDI6IFwiTWFyXCIsXG5cdCAgICAzOiBcIkFwclwiLFxuXHQgICAgNDogXCJNYXlcIixcblx0ICAgIDU6IFwiSnVuXCIsXG5cdCAgICA2OiBcIkp1bFwiLFxuXHQgICAgNzogXCJBdWdcIixcblx0ICAgIDg6IFwiU2VwXCIsXG5cdCAgICA5OiBcIk9jdFwiLFxuXHQgICAgMTA6IFwiTm92XCIsXG5cdCAgICAxMTogXCJEZWNcIlxuXHR9O1xuXG4vKioqLyB9LFxuLyogMjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5CaW5kVGFiRXZlbnRzID0gQmluZFRhYkV2ZW50cztcblx0ZXhwb3J0cy5HZXRBY3RpdmVUYWIgPSBHZXRBY3RpdmVUYWI7XG5cdGV4cG9ydHMuSGFuZGxlVGFiQ2hhbmdlID0gSGFuZGxlVGFiQ2hhbmdlO1xuXHRcblx0dmFyIF9wYW5lbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0ZnVuY3Rpb24gQmluZFRhYkV2ZW50cygpIHtcblx0ICAgIGQzLnNlbGVjdEFsbChcIi5wYW5lbC10b3AtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2spO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBHZXRBY3RpdmVUYWIoKSB7XG5cdCAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInBhbmVsLXRvcC1idG4gYWN0aXZlXCIpWzBdLmdldEF0dHJpYnV0ZShcImRhdGEtYWN0aXZlXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVUYWJIZWFkZXJCdG5DbGljaygpIHtcblx0ICAgIC8vIElmIHRoZSBzZWN0aW9uIGlzIGFscmVhZHkgYWN0aXZlLCBkbyBub3RoaW5nXG5cdCAgICBpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHJldHVybjtcblx0XG5cdCAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBjbGljayBvbiBncmFwaCB0eXBlXG5cdCAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICBldmVudENhdGVnb3J5OiAndGFiJyxcblx0ICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0ICAgICAgICBldmVudExhYmVsOiB0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtYWN0aXZlXCIpLFxuXHQgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgfSk7XG5cdFxuXHQgICAgSGFuZGxlVGFiQ2hhbmdlKHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1hY3RpdmVcIikpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBIYW5kbGVUYWJDaGFuZ2UobmV3Q2xhc3MpIHtcblx0ICAgIGRpc2FibGVBY3RpdmVUYWIoKTtcblx0ICAgIGVuYWJsZVRhYihuZXdDbGFzcyk7XG5cdCAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBlbmFibGVUYWIobmV3Q2xhc3MpIHtcblx0ICAgIGQzLnNlbGVjdChcIi5wYW5lbC10b3AtYnRuW2RhdGEtYWN0aXZlPSdcIiArIG5ld0NsYXNzICsgXCInXVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHRcblx0ICAgIGQzLnNlbGVjdEFsbChcIiNtYXAtd3JhcHBlciwgI3JpZ2h0LXBhbmVsXCIpLmNsYXNzZWQobmV3Q2xhc3MsIHRydWUpO1xuXHRcblx0ICAgIGQzLnNlbGVjdChcIi5wYW5lbC1zZWN0aW9uLXdyYXBwZXJbZGF0YS1hY3RpdmU9J1wiICsgbmV3Q2xhc3MgKyBcIiddXCIpLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgdG9nZ2xlTWFwUGFkZGluZygpO1xuXHQgICAgcmVzZXRQYW5lbFdpZHRoKCk7XG5cdCAgICAoMCwgX3BhbmVsLnVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQpKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRpc2FibGVBY3RpdmVUYWIoKSB7XG5cdCAgICB2YXIgYWN0aXZlQ2xhc3MgPSBkMy5zZWxlY3QoXCIucGFuZWwtdG9wLWJ0bi5hY3RpdmVcIikuYXR0cihcImRhdGEtYWN0aXZlXCIpO1xuXHRcblx0ICAgIGQzLnNlbGVjdEFsbCgnI21hcC13cmFwcGVyLCAjcmlnaHQtcGFuZWwnKS5jbGFzc2VkKGFjdGl2ZUNsYXNzLCBmYWxzZSk7XG5cdFxuXHQgICAgZDMuc2VsZWN0QWxsKCcucGFuZWwtdG9wLWJ0bi5hY3RpdmUsIC5wYW5lbC1zZWN0aW9uLXdyYXBwZXIuYWN0aXZlJykuY2xhc3NlZCgnYWN0aXZlJywgZmFsc2UpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b2dnbGVNYXBQYWRkaW5nKCkge1xuXHQgICAgdmFyIHBhZGRpbmdSaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmlnaHQtcGFuZWxcIikub2Zmc2V0V2lkdGg7XG5cdCAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcC13cmFwcGVyXCIpLnN0eWxlLnBhZGRpbmdSaWdodCA9IHBhZGRpbmdSaWdodCArIFwicHhcIjtcblx0fVxuXHRcblx0LyoqXHJcblx0ICogU2luY2UgdGhlIHBhbmVsIGhhcyBjaGlsZCBlbGVtZW50cyB3aXRoIHBvc2l0aW9uIGZpeGVkIGFuZCB3aWR0aCBpbmhlcml0XHJcblx0ICogd2UgbmVlZCB0byBjbGVhciB0aGUgaW5saW5lIHdpZHRoIHByb3BlcnR5IGlmIGFuZCBvbmx5IGlmIHRoZSBpbmxpbmVcclxuXHQgKiB3aWR0aCBpcyBsZXNzIHRoYW4gdGhlIG1pbiB3aWR0aFxyXG5cdCAqL1xuXHRmdW5jdGlvbiByZXNldFBhbmVsV2lkdGgoKSB7XG5cdCAgICB2YXIgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJpZ2h0LXBhbmVsXCIpO1xuXHQgICAgdmFyIHdpZHRoID0gcGFuZWwuc3R5bGUud2lkdGg7XG5cdCAgICBpZiAoIXdpZHRoKSByZXR1cm47XG5cdFxuXHQgICAgdmFyIHBhbmVsTWluV2lkdGggPSBkMy5zZWxlY3QocGFuZWwpLnN0eWxlKCdtaW4td2lkdGgnKS5zbGljZSgwLCAtMik7XG5cdCAgICBpZiAocGFyc2VJbnQod2lkdGguc2xpY2UoMCwgLTIpLCAxMCkgPiBwYXJzZUludChwYW5lbE1pbldpZHRoLCAxMCkpIHJldHVybjtcblx0XG5cdCAgICBwYW5lbC5zdHlsZS53aWR0aCA9IFwiXCI7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDMwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLnNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbiA9IHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbjtcblx0ZXhwb3J0cy5tYWtlT3BhY2l0eVNsaWRlciA9IG1ha2VPcGFjaXR5U2xpZGVyO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIF9sYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0Ly8gc2V0IGl0IG1hbnVhbGx5IGZvciBub3dcblx0dmFyIE9QQUNJVFlfUkFOR0VfTUFYID0gOTA7XG5cdFxuXHR2YXIgb3BhY2l0eVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzEsIDBdKS5yYW5nZShbMCwgT1BBQ0lUWV9SQU5HRV9NQVhdKS5jbGFtcCh0cnVlKTtcblx0XG5cdGZ1bmN0aW9uIHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbihsYXllciwgc2xpZGVySGFuZGxlLCBvcGFjaXR5KSB7XG5cdCAgICBvcGFjaXR5ID0gb3BhY2l0eSB8fCBsYXllci5vcGFjaXR5O1xuXHQgICAgc2xpZGVySGFuZGxlLnN0eWxlLnRvcCA9ICcnICsgb3BhY2l0eVNjYWxlKG9wYWNpdHkpICsgJ3B4Jztcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZU9wYWNpdHlTbGlkZXIobGF5ZXIpIHtcblx0ICAgIHZhciBsYXllck9wYWNpdHkgPSBsYXllci5vcGFjaXR5ICE9PSB1bmRlZmluZWQgPyBsYXllci5vcGFjaXR5IDogMTtcblx0ICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICB2YXIgc2xpZGVyVHJhY2tPdmVybGF5ID0gbWFrZVNsaWRlclRyYWNrKGxheWVyLCBsYXllck9wYWNpdHkpO1xuXHQgICAgdmFyIGljb25XcmFwcGVyQ2xvc2VkID0gbWFrZU9wYWNpdHlJY29uV3JhcHBlcignY2xvc2VkJywgbGF5ZXIsIHNsaWRlclRyYWNrT3ZlcmxheSk7XG5cdFxuXHQgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci13cmFwcGVyJyk7XG5cdCAgICB3cmFwcGVyLmFwcGVuZENoaWxkKHNsaWRlclRyYWNrT3ZlcmxheSk7XG5cdCAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGljb25XcmFwcGVyQ2xvc2VkKTtcblx0ICAgIHJldHVybiB3cmFwcGVyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlT3BhY2l0eUljb25XcmFwcGVyKHN0YXRlLCBsYXllciwgc2xpZGVyVHJhY2tPdmVybGF5KSB7XG5cdCAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgdmFyIGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblx0ICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1pY29uLXdyYXBwZXInKTtcblx0ICAgIGljb24uY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1pY29uJyk7XG5cdCAgICBpY29uLmNsYXNzTGlzdC5hZGQoc3RhdGUpO1xuXHQgICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ3NyYycsICdpbWdzL29wYWNpdHktaWNvbi0nICsgc3RhdGUgKyAnLTY0eDY0LnBuZycpO1xuXHQgICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ2FsdCcsICdVc2UgdGhpcyBzbGlkZXIgdG8gYWRqdXN0IHRyYW5zcGFyZW5jeSBmb3IgdGhlICcgKyBsYXllci5uYW1lICsgJyBsYXllcicpO1xuXHQgICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgJ1VzZSB0aGlzIHNsaWRlciB0byBhZGp1c3QgdHJhbnNwYXJlbmN5IGZvciB0aGUgJyArIGxheWVyLm5hbWUgKyAnIGxheWVyJyk7XG5cdCAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGljb24pO1xuXHQgICAgd3JhcHBlci5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICB2YXIgc2xpZGVySGFuZGxlID0gc2xpZGVyVHJhY2tPdmVybGF5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ29wYWNpdHktc2xpZGVyLWhhbmRsZScpWzBdO1xuXHQgICAgICAgICgwLCBfbGF5ZXIudXBkYXRlTGF5ZXJPcGFjaXR5KShsYXllciwgMCk7XG5cdCAgICAgICAgc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uKGxheWVyLCBzbGlkZXJIYW5kbGUsIDApO1xuXHQgICAgfTtcblx0ICAgIHJldHVybiB3cmFwcGVyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlU2xpZGVyVHJhY2sobGF5ZXIsIGxheWVyT3BhY2l0eSkge1xuXHRcblx0ICAgIHZhciBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICB2YXIgdHJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIHZhciBzbGlkZXJIYW5kbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XG5cdCAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktc2xpZGVyLXRyYWNrLW92ZXJsYXknKTtcblx0ICAgIHRyYWNrLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktc2xpZGVyLXRyYWNrJyk7XG5cdCAgICBzbGlkZXJIYW5kbGUuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1zbGlkZXItaGFuZGxlJyk7XG5cdFxuXHQgICAgb3ZlcmxheS5hcHBlbmRDaGlsZCh0cmFjayk7XG5cdCAgICBvdmVybGF5LmFwcGVuZChzbGlkZXJIYW5kbGUpO1xuXHRcblx0ICAgIGlmIChsYXllci5hY3RpdmUpIHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbihsYXllciwgc2xpZGVySGFuZGxlKTtcblx0ICAgIHNldERyYWdFdmVudExpc3RlbmVyKG92ZXJsYXksIGxheWVyLCBsYXllck9wYWNpdHkpO1xuXHRcblx0ICAgIHJldHVybiBvdmVybGF5O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXREcmFnRXZlbnRMaXN0ZW5lcihvdmVybGF5LCBsYXllciwgbGF5ZXJPcGFjaXR5KSB7XG5cdCAgICBkMy5zZWxlY3Qob3ZlcmxheSkuY2FsbChkMy5kcmFnKCkub24oJ3N0YXJ0IGRyYWcnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHNsaWRlckhhbmRsZSA9IG92ZXJsYXkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnb3BhY2l0eS1zbGlkZXItaGFuZGxlJylbMF07XG5cdCAgICAgICAgdmFyIG5ld09wYWNpdHkgPSBjYWxjT3BhY2l0eUZyb21Nb3VzZVBvcyhvdmVybGF5KTtcblx0ICAgICAgICAoMCwgX2xheWVyLnVwZGF0ZUxheWVyT3BhY2l0eSkobGF5ZXIsIG5ld09wYWNpdHkpO1xuXHQgICAgICAgIHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbihsYXllciwgc2xpZGVySGFuZGxlLCBuZXdPcGFjaXR5KTtcblx0ICAgIH0pLm9uKCdlbmQnLCBmdW5jdGlvbiAoKSB7XG5cdFxuXHQgICAgICAgIHZhciBuZXdPcGFjaXR5ID0gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSk7XG5cdFxuXHQgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIG9wYWNpdHkgc2xpZGVyIGNoYW5nZVxuXHQgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnb3BhY2l0eSBzbGlkZXInLFxuXHQgICAgICAgICAgICBldmVudEFjdGlvbjogJ2NoYW5nZScsXG5cdCAgICAgICAgICAgIGV2ZW50TGFiZWw6ICd7XCInICsgbGF5ZXIubmFtZSArICdcIjogXCInICsgbmV3T3BhY2l0eSArICdcIn0nLFxuXHQgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0ICAgIH0pKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSkge1xuXHQgICAgdmFyIHlQb3MgPSBkMy5tb3VzZShvdmVybGF5KVsxXTtcblx0ICAgIHZhciBuZXdPcGFjaXR5ID0gb3BhY2l0eVNjYWxlLmludmVydCh5UG9zKTtcblx0ICAgIHJldHVybiBuZXdPcGFjaXR5O1xuXHR9XG5cbi8qKiovIH0sXG4vKiAzMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBDcmVhdGVMb2dvO1xuXHQvKlxyXG5cdCAgXCJsb2dvXCI6IHtcclxuXHQgICAgXCJpbWFnZVwiOiBcImltZ3MvbGFuZGF0X2xvZ29fYmx1ZS5wbmdcIixcclxuXHQgICAgXCJhbHRcIjogXCJMb2dvIGZvciB0aGUgTGFuRGF0IHByb2plY3RcIixcclxuXHQgICAgXCJsaW5rXCI6IFwiaHR0cHM6Ly9sYW5kYXQtZGV2Lm5lbWFjLm9yZ1wiLFxyXG5cdCAgICBcImxvY2F0aW9uXCI6IFtcImJvdHRvbVwiLCBcInJpZ2h0XCJdXHJcblx0ICB9LFxyXG5cdCovXG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVMb2dvKGxvZ29kYXRhKSB7XG5cdCAgICBpZiAoIWxvZ29kYXRhLmltYWdlKSByZXR1cm47XG5cdFxuXHQgICAgdmFyIGxvZ29XcmFwcGVyID0gY3JlYXRlTG9nb1dyYXBwZXIoKTtcblx0ICAgIHZhciBsb2dvSW1hZ2UgPSBjcmVhdGVMb2dvSW1hZ2UobG9nb2RhdGEpO1xuXHQgICAgdmFyIGxvZ29MaW5rID0gbG9nb2RhdGEubGluayA/IGNyZWF0ZUxvZ29MaW5rKGxvZ29kYXRhLmxpbmspIDogbnVsbDtcblx0XG5cdCAgICBpZiAobG9nb0xpbmspIHtcblx0ICAgICAgICBsb2dvTGluay5hcHBlbmRDaGlsZChsb2dvSW1hZ2UpO1xuXHQgICAgICAgIGxvZ29XcmFwcGVyLmFwcGVuZENoaWxkKGxvZ29MaW5rKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbG9nb1dyYXBwZXIuYXBwZW5kQ2hpbGQobG9nb0ltYWdlKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaW5zZXJ0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUobG9nb2RhdGEubG9jYXRpb24pWzBdO1xuXHQgICAgdmFyIGV4aXN0aW5nQ2hpbGQgPSBpbnNlcnRFbGVtZW50LmZpcnN0Q2hpbGQ7XG5cdCAgICBpbnNlcnRFbGVtZW50Lmluc2VydEJlZm9yZShsb2dvV3JhcHBlciwgZXhpc3RpbmdDaGlsZCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUxvZ29XcmFwcGVyKCkge1xuXHQgICAgdmFyIGxvZ29XcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0ICAgIGQzLnNlbGVjdChsb2dvV3JhcHBlcikuY2xhc3NlZChcInByb2plY3QtbG9nb1wiLCB0cnVlKTtcblx0ICAgIHJldHVybiBsb2dvV3JhcHBlcjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlTG9nb0ltYWdlKGxvZ29kYXRhKSB7XG5cdCAgICB2YXIgbG9nb0ltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcblx0ICAgIGxvZ29JbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbG9nb2RhdGEuaW1hZ2UpO1xuXHQgICAgaWYgKGxvZ29kYXRhLmxhYmVsKSB7XG5cdCAgICAgICAgbG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcImFsdFwiLCBsb2dvZGF0YS5sYWJlbCk7XG5cdCAgICAgICAgbG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIGxvZ29kYXRhLmxhYmVsKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBsb2dvSW1hZ2U7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUxvZ29MaW5rKGxpbmspIHtcblx0ICAgIHZhciBsb2dvTGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuXHQgICAgbG9nb0xpbmsuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBsaW5rKTtcblx0ICAgIGxvZ29MaW5rLnNldEF0dHJpYnV0ZShcInRhcmdldFwiLCBcIl9ibGFua1wiKTtcblx0XG5cdCAgICBsb2dvTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIGNsaWNraW5nIGxvZ29cblx0ICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdCAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiAnbGFuZGF0IGxvZ28nLFxuXHQgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICB9KTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHJldHVybiBsb2dvTGluaztcblx0fVxuXG4vKioqLyB9LFxuLyogMzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBpbmRleF9idW5kbGUuanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBhMjk3ZDg5ZWMyNzYyZjljMWMzNiIsImltcG9ydCB7UGFyc2VDb25maWd9IGZyb20gJy4vcGFyc2VyJztcclxuaW1wb3J0IENyZWF0ZVNlYXJjaCBmcm9tICcuL3NlYXJjaCc7XHJcbmltcG9ydCB7U2V0dXBQYW5lbH0gZnJvbSAnLi9wYW5lbCc7XHJcbmltcG9ydCB7Q3JlYXRlQmFzZUxheWVyc30gZnJvbSAnLi9iYXNlbGF5ZXInO1xyXG5pbXBvcnQge1NldHVwR3JhcGhzLCBCaW5kR3JhcGhFdmVudHMsIEhhbmRsZUdyYXBoVGFiQ2hhbmdlfSBmcm9tICcuL2dyYXBoJ1xyXG5pbXBvcnQge0JpbmRUYWJFdmVudHMsIEhhbmRsZVRhYkNoYW5nZX0gZnJvbSAnLi90YWJzJ1xyXG5pbXBvcnQge0NyZWF0ZU1hcH0gZnJvbSAnLi9tYXAnXHJcbmltcG9ydCB7QmluZFVwZGF0ZVNoYXJlVXJsLCBBZGRTaGFyZVNldHRpbmdzVG9Db25maWcsIEJpbmRDb3B5TGlua0V2ZW50c30gZnJvbSAnLi9zaGFyZSdcclxuaW1wb3J0IHtDcmVhdGVEZWZhdWx0TGF5ZXJzfSBmcm9tICcuL2xheWVyJ1xyXG5pbXBvcnQgQ3JlYXRlTG9nbyBmcm9tICcuL2xvZ28nO1xyXG5pbXBvcnQge1NldHVwUG9pbnRzT2ZJbnRlcmVzdH0gZnJvbSAnLi9wb2knO1xyXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tICcuL3NoYXJlJztcclxuXHJcbnZhciBjc3MgPSByZXF1aXJlKCcuLi9jc3Mvc2Fzcy9sYW5kYXQuc2NzcycpXHJcblxyXG4vLyBEb2VzIG5vdCByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcclxudmFyIEJhc2UgPSBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICBQYXJzZUNvbmZpZyhjb25maWcsIGNhbGxiYWNrKTtcclxuICAgIFNldHVwR3JhcGhzKCk7XHJcbiAgICBCaW5kVGFiRXZlbnRzKCk7XHJcbiAgICBCaW5kQ29weUxpbmtFdmVudHMoKTtcclxufVxyXG5cclxuLy8gRG9lcyByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcclxudmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgIEFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZyhkYXRhKVxyXG4gICAgdmFyIG1hcCA9IENyZWF0ZU1hcChkYXRhLm1hcCk7XHJcbiAgICBDcmVhdGVCYXNlTGF5ZXJzKG1hcCwgZGF0YS5iYXNlbGF5ZXJzKTtcclxuICAgIENyZWF0ZURlZmF1bHRMYXllcnMoZGF0YS5sYXllcnMsIGRhdGFbXCJhY3RpdmUtbGF5ZXJzXCJdKTtcclxuICAgIFNldHVwUGFuZWwoZGF0YS5sYXllcnMsIGRhdGEubGF5b3V0KTtcclxuICAgIENyZWF0ZVNlYXJjaChtYXApO1xyXG4gICAgQ3JlYXRlTG9nbyhkYXRhLmxvZ28pO1xyXG4gICAgaWYgKGRhdGEudGFiKSBIYW5kbGVUYWJDaGFuZ2UoZGF0YS50YWIpO1xyXG4gICAgaWYgKGRhdGEuZ3JhcGgpIEhhbmRsZUdyYXBoVGFiQ2hhbmdlKGRhdGEuZ3JhcGgpO1xyXG4gICAgQmluZEdyYXBoRXZlbnRzKG1hcCk7XHJcbiAgICBCaW5kVXBkYXRlU2hhcmVVcmwobWFwKTtcclxuICAgIFNldHVwUG9pbnRzT2ZJbnRlcmVzdChtYXAsIGRhdGEucG9pcylcclxuICAgIHVwZGF0ZVNoYXJlVXJsKClcclxufVxyXG5cclxud2luZG93LkJhc2UgPSBCYXNlO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge0Jhc2V9O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9iYXNlLmpzIiwiLyoqXHJcbiAqIFBhcnNlcyBhIGNvbmZpZyBmaWxlLiBTaW5jZSB0aGUgcHJvY2VzcyB0byBnZXQgZXh0ZXJuYWwgZmlsZXNcclxuICogdXNlcyBBSkFYIHlvdSBuZWVkIHRvIHBhc3MgYSBjYWxsYmFjayB0byBoYW5kbGUgdGhlIG5leHQgc3RlcHNcclxuICogb2YgdXNpbmcgdGhlIGNvbmZpZyBmaWxlLCBzaW5jZSB3ZSBkbyBub3Qga25vdyBob3cgbG9uZyBpdFxyXG4gKiB3aWxsIHRha2UgdG8gZ3JhYiB0aGUgZmlsZS5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBQYXJzZUNvbmZpZyAoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcclxuICAgIEdldENvbmZpZyhjb25maWdGaWxlLCBjYWxsYmFjayk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZXRBamF4T2JqZWN0KHJlc3BvbnNlSGFuZGxlcikge1xyXG4gICAgdmFyIHhtbGh0dHBcclxuICAgIGlmICghd2luZG93LlhNTEh0dHBSZXF1ZXN0ICYmIHdpbmRvdy5BY3RpdmVYT2JqZWN0KSB7XHJcbiAgICAgICAgeG1saHR0cCA9IG5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdChcIk1TWE1MMi5YTUxIVFRQLjMuMFwiKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcclxuICAgIH1cclxuICAgIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh4bWxodHRwLnJlYWR5U3RhdGUgPT09IDQpIHtcclxuICAgICAgICAgICAgcmVzcG9uc2VIYW5kbGVyKHhtbGh0dHAucmVzcG9uc2UpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHhtbGh0dHBcclxufVxyXG5cclxuZnVuY3Rpb24gR2V0Q29uZmlnIChjb25maWdGaWxlLCBjYWxsYmFjaykge1xyXG4gICAgdmFyIHhtbGh0dHAgPSBHZXRBamF4T2JqZWN0KGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2VIYW5kbGVyKHJlc3BvbnNlKVxyXG4gICAgICAgIGNhbGxiYWNrKGRhdGEpXHJcbiAgICB9KVxyXG4gICAgeG1saHR0cC5vcGVuKFwiR0VUXCIsIGNvbmZpZ0ZpbGUsIHRydWUpO1xyXG4gICAgeG1saHR0cC5zZW5kKCk7XHJcbiAgICBjb25zb2xlLmxvZyhcImhpXCIpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlc3BvbnNlSGFuZGxlciAocmVzcG9uc2UpIHtcclxuICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXNwb25zZSlcclxuICAgIGZvcm1hdE1hcChyZXNwb25zZSk7XHJcbiAgICBmb3JtYXRMYXllcnMocmVzcG9uc2UpO1xyXG4gICAgcmV0dXJuIHJlc3BvbnNlXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdE1hcCAoZGF0YSkge1xyXG4gICAgaWYgKCFkYXRhLm1hcCkgZGF0YS5tYXAgPSB7fTtcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0TGF5ZXJzIChkYXRhKSB7XHJcbiAgICB2YXIgbGF5ZXJzID0gZGF0YS5sYXllcnM7XHJcbiAgICB2YXIgZGVmYXVsdE1hcHNlcnZlclVybCA9IGRhdGEubWFwc2VydmVyVXJsO1xyXG4gICAgdmFyIGRlZmF1bHRFbmFibGVkTGF5ZXJzID0gZGF0YVtcImFjdGl2ZS1sYXllcnNcIl07XHJcbiAgICB2YXIgbGF5ZXJncm91cDtcclxuICAgIHZhciBpO1xyXG5cclxuICAgIGZvciAodmFyIHByb3AgaW4gbGF5ZXJzKSB7XHJcbiAgICAgICAgaWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcclxuICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsYXllcmdyb3VwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHNldE1hcHNlcnZlclVybChsYXllcmdyb3VwW2ldLCBkZWZhdWx0TWFwc2VydmVyVXJsKTtcclxuICAgICAgICAgICAgc2V0RGVmYXVsdExheWVyT3BhY2l0eShsYXllcmdyb3VwW2ldLCBkYXRhLmRlZmF1bHRMYXllck9wYWNpdHkpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXREZWZhdWx0TGF5ZXJPcGFjaXR5IChsYXllciwgb3BhY2l0eSkge1xyXG4gICAgbGF5ZXIub3BhY2l0eSA9IGxheWVyLm9wYWNpdHkgfHwgb3BhY2l0eVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRNYXBzZXJ2ZXJVcmwgKGxheWVyLCB1cmwpIHtcclxuICAgIGxheWVyLnVybCA9IGxheWVyLnVybCB8fCB1cmw7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvcGFyc2VyLmpzIiwiaW1wb3J0IHsgR2VvU2VhcmNoQ29udHJvbCwgT3BlblN0cmVldE1hcFByb3ZpZGVyIH0gZnJvbSAnbGVhZmxldC1nZW9zZWFyY2gnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ3JlYXRlU2VhcmNoIChtYXApIHtcclxuICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IE9wZW5TdHJlZXRNYXBQcm92aWRlcigpO1xyXG5cclxuICAgIGNvbnN0IHNlYXJjaENvbnRyb2wgPSBuZXcgR2VvU2VhcmNoQ29udHJvbCh7XHJcbiAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLFxyXG4gICAgICAgIHNob3dNYXJrZXI6IGZhbHNlLFxyXG4gICAgICAgIGF1dG9Db21wbGV0ZTogdHJ1ZSxcclxuICAgICAgICBzaG93UG9wdXA6IGZhbHNlLFxyXG4gICAgfSk7XHJcblxyXG4gICAgbWFwLmFkZENvbnRyb2woc2VhcmNoQ29udHJvbCk7XHJcblxyXG4gICAgdmFyIHNlYXJjaEVsZW1lbnRzID0gc2VhcmNoQ29udHJvbC5zZWFyY2hFbGVtZW50LmVsZW1lbnRzXHJcblxyXG4gICAgTC5Eb21FdmVudC5vbihzZWFyY2hFbGVtZW50cy5jb250YWluZXIsIFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2KSB7XHJcbiAgICAgICAgTC5Eb21FdmVudC5zdG9wUHJvcGFnYXRpb24oZXYpO1xyXG5cclxuICAgICAgICB2YXIgc2VhcmNoRW50cmllcyA9IHNlYXJjaEVsZW1lbnRzLmZvcm1cclxuICAgICAgICAgICAgLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Jlc3VsdHMnKVswXS5jaGlsZHJlblxyXG5cclxuICAgICAgICBmb3IgKHZhciBpPTA7IGk8c2VhcmNoRW50cmllcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZXYudGFyZ2V0ID09PSBzZWFyY2hFbnRyaWVzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICBzZWFyY2hFbGVtZW50cy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIHNlYXJjaCBieSBhZGRyZXNzXHJcbiAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XHJcbiAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxyXG4gICAgICAgICAgICBldmVudEFjdGlvbjogJ3NlYXJjaCcsXHJcbiAgICAgICAgICAgIGV2ZW50TGFiZWw6ICdjbGljaycsXHJcbiAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIEwuRG9tRXZlbnQub24oc2VhcmNoRWxlbWVudHMuY29udGFpbmVyLCBcImtleWRvd25cIiwgZnVuY3Rpb24gKGV2KSB7XHJcbiAgICAgICAgTC5Eb21FdmVudC5zdG9wUHJvcGFnYXRpb24oZXYpO1xyXG5cclxuICAgICAgICBpZiAoZXYud2hpY2ggPT0gMTMgfHwgZXYua2V5Q29kZSA9PSAxMykge1xyXG4gICAgICAgICAgICBzZWFyY2hFbGVtZW50cy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuXHJcbiAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBzZWFjcmNoIGJ5IGFkZHJlc3NcclxuICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XHJcbiAgICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcclxuICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnc2VhcmNoIGFkZHJlc3MnLFxyXG4gICAgICAgICAgICAgICAgZXZlbnRMYWJlbDogZXYudGFyZ2V0LnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9zZWFyY2guanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbGVhZmxldENvbnRyb2wgPSByZXF1aXJlKCcuL2xlYWZsZXRDb250cm9sJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnR2VvU2VhcmNoQ29udHJvbCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xlYWZsZXRDb250cm9sKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9zZWFyY2hFbGVtZW50ID0gcmVxdWlyZSgnLi9zZWFyY2hFbGVtZW50Jyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnU2VhcmNoRWxlbWVudCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaEVsZW1lbnQpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX2JpbmdQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL2JpbmdQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0JpbmdQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JpbmdQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfZXNyaVByb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcnMvZXNyaVByb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnRXNyaVByb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXNyaVByb3ZpZGVyKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9nb29nbGVQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL2dvb2dsZVByb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnR29vZ2xlUHJvdmlkZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nb29nbGVQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfb3BlblN0cmVldE1hcFByb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcnMvb3BlblN0cmVldE1hcFByb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnT3BlblN0cmVldE1hcFByb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb3BlblN0cmVldE1hcFByb3ZpZGVyKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL3Byb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnUHJvdmlkZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvaW5kZXguanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbm9kZW50UnVudGltZSA9IHJlcXVpcmUoJ25vZGVudC1ydW50aW1lJyk7XG5cbnZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gTGVhZmxldENvbnRyb2w7XG5cbnZhciBfbG9kYXNoID0gcmVxdWlyZSgnbG9kYXNoLmRlYm91bmNlJyk7XG5cbnZhciBfbG9kYXNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvZGFzaCk7XG5cbnZhciBfc2VhcmNoRWxlbWVudCA9IHJlcXVpcmUoJy4vc2VhcmNoRWxlbWVudCcpO1xuXG52YXIgX3NlYXJjaEVsZW1lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoRWxlbWVudCk7XG5cbnZhciBfcmVzdWx0TGlzdCA9IHJlcXVpcmUoJy4vcmVzdWx0TGlzdCcpO1xuXG52YXIgX3Jlc3VsdExpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVzdWx0TGlzdCk7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuL2RvbVV0aWxzJyk7XG5cbnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGRlZmF1bHRPcHRpb25zID0gZnVuY3Rpb24gZGVmYXVsdE9wdGlvbnMoKSB7XG4gIHJldHVybiB7XG4gICAgcG9zaXRpb246ICd0b3BsZWZ0JyxcbiAgICBzdHlsZTogJ2J1dHRvbicsXG4gICAgc2hvd01hcmtlcjogdHJ1ZSxcbiAgICBzaG93UG9wdXA6IGZhbHNlLFxuICAgIG1hcmtlcjoge1xuICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCksXG4gICAgICBkcmFnZ2FibGU6IGZhbHNlXG4gICAgfSxcbiAgICBtYXhNYXJrZXJzOiAxLFxuICAgIHJldGFpblpvb21MZXZlbDogZmFsc2UsXG4gICAgYW5pbWF0ZVpvb206IHRydWUsXG4gICAgc2VhcmNoTGFiZWw6ICdFbnRlciBhZGRyZXNzJyxcbiAgICBub3RGb3VuZE1lc3NhZ2U6ICdTb3JyeSwgdGhhdCBhZGRyZXNzIGNvdWxkIG5vdCBiZSBmb3VuZC4nLFxuICAgIG1lc3NhZ2VIaWRlRGVsYXk6IDMwMDAsXG4gICAgem9vbUxldmVsOiAxOCxcbiAgICBjbGFzc05hbWVzOiB7XG4gICAgICBjb250YWluZXI6ICdsZWFmbGV0LWJhciBsZWFmbGV0LWNvbnRyb2wgbGVhZmxldC1jb250cm9sLWdlb3NlYXJjaCcsXG4gICAgICBidXR0b246ICdsZWFmbGV0LWJhci1wYXJ0IGxlYWZsZXQtYmFyLXBhcnQtc2luZ2xlJyxcbiAgICAgIG1zZ2JveDogJ2xlYWZsZXQtYmFyIG1lc3NhZ2UnLFxuICAgICAgZm9ybTogJycsXG4gICAgICBpbnB1dDogJydcbiAgICB9LFxuICAgIGF1dG9Db21wbGV0ZTogdHJ1ZSxcbiAgICBhdXRvQ29tcGxldGVEZWxheTogMjUwXG4gIH07XG59O1xuXG52YXIgQ29udHJvbCA9IHtcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHRoaXMubWFya2VycyA9IG5ldyBMLkZlYXR1cmVHcm91cCgpO1xuXG4gICAgdGhpcy5vcHRpb25zID0gX2V4dGVuZHMoe30sIGRlZmF1bHRPcHRpb25zKCksIG9wdGlvbnMpO1xuXG4gICAgdmFyIF9vcHRpb25zID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBzdHlsZSA9IF9vcHRpb25zLnN0eWxlLFxuICAgICAgICBjbGFzc05hbWVzID0gX29wdGlvbnMuY2xhc3NOYW1lcyxcbiAgICAgICAgc2VhcmNoTGFiZWwgPSBfb3B0aW9ucy5zZWFyY2hMYWJlbCxcbiAgICAgICAgYXV0b0NvbXBsZXRlID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlLFxuICAgICAgICBhdXRvQ29tcGxldGVEZWxheSA9IF9vcHRpb25zLmF1dG9Db21wbGV0ZURlbGF5O1xuXG4gICAgaWYgKHN0eWxlICE9PSAnYnV0dG9uJykge1xuICAgICAgdGhpcy5vcHRpb25zLmNsYXNzTmFtZXMuY29udGFpbmVyICs9ICcgJyArIG9wdGlvbnMuc3R5bGU7XG4gICAgfVxuXG4gICAgdGhpcy5zZWFyY2hFbGVtZW50ID0gbmV3IF9zZWFyY2hFbGVtZW50Mi5kZWZhdWx0KF9leHRlbmRzKHt9LCB0aGlzLm9wdGlvbnMsIHtcbiAgICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KHF1ZXJ5KSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5vblN1Ym1pdChxdWVyeSk7XG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgdmFyIF9zZWFyY2hFbGVtZW50JGVsZW1lbiA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cyxcbiAgICAgICAgY29udGFpbmVyID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmNvbnRhaW5lcixcbiAgICAgICAgZm9ybSA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5mb3JtLFxuICAgICAgICBpbnB1dCA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5pbnB1dDtcblxuICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuXG4gICAgdmFyIGJ1dHRvbiA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2EnLCBjbGFzc05hbWVzLmJ1dHRvbiwgY29udGFpbmVyKTtcbiAgICBidXR0b24udGl0bGUgPSBzZWFyY2hMYWJlbDtcbiAgICBidXR0b24uaHJlZiA9ICcjJztcblxuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5vbkNsaWNrKGUpO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIGlmIChhdXRvQ29tcGxldGUpIHtcbiAgICAgIHRoaXMucmVzdWx0TGlzdCA9IG5ldyBfcmVzdWx0TGlzdDIuZGVmYXVsdCh7XG4gICAgICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVDbGljayhfcmVmKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IF9yZWYucmVzdWx0O1xuXG4gICAgICAgICAgaW5wdXQudmFsdWUgPSByZXN1bHQubGFiZWw7XG4gICAgICAgICAgX3RoaXMub25TdWJtaXQoeyBxdWVyeTogcmVzdWx0LmxhYmVsIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZm9ybS5hcHBlbmRDaGlsZCh0aGlzLnJlc3VsdExpc3QuZWxlbWVudHMuY29udGFpbmVyKTtcblxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoMCwgX2xvZGFzaDIuZGVmYXVsdCkoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmF1dG9TZWFyY2goZSk7XG4gICAgICB9LCBhdXRvQ29tcGxldGVEZWxheSksIHRydWUpO1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5zZWxlY3RSZXN1bHQoZSk7XG4gICAgICB9LCB0cnVlKTtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMuY2xlYXJSZXN1bHRzKGUpO1xuICAgICAgfSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5lbGVtZW50cyA9IHsgYnV0dG9uOiBidXR0b24gfTtcbiAgfSxcbiAgb25BZGQ6IGZ1bmN0aW9uIG9uQWRkKG1hcCkge1xuICAgIHZhciBfb3B0aW9uczIgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHNob3dNYXJrZXIgPSBfb3B0aW9uczIuc2hvd01hcmtlcixcbiAgICAgICAgc3R5bGUgPSBfb3B0aW9uczIuc3R5bGU7XG5cblxuICAgIHRoaXMubWFwID0gbWFwO1xuICAgIGlmIChzaG93TWFya2VyKSB7XG4gICAgICB0aGlzLm1hcmtlcnMuYWRkVG8obWFwKTtcbiAgICB9XG5cbiAgICBpZiAoc3R5bGUgPT09ICdiYXInKSB7XG4gICAgICB2YXIgZm9ybSA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5mb3JtO1xuXG4gICAgICB2YXIgcm9vdCA9IG1hcC5nZXRDb250YWluZXIoKS5xdWVyeVNlbGVjdG9yKCcubGVhZmxldC1jb250cm9sLWNvbnRhaW5lcicpO1xuXG4gICAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgJ2xlYWZsZXQtY29udHJvbC1nZW9zZWFyY2ggYmFyJyk7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZm9ybSk7XG4gICAgICByb290LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmNvbnRhaW5lcjtcbiAgfSxcbiAgb25SZW1vdmU6IGZ1bmN0aW9uIG9uUmVtb3ZlKCkge1xuICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcbiAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgX3NlYXJjaEVsZW1lbnQkZWxlbWVuMiA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cyxcbiAgICAgICAgY29udGFpbmVyID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuMi5jb250YWluZXIsXG4gICAgICAgIGlucHV0ID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuMi5pbnB1dDtcblxuXG4gICAgaWYgKGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG4gICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcbiAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgfVxuICB9LFxuICBzZWxlY3RSZXN1bHQ6IGZ1bmN0aW9uIHNlbGVjdFJlc3VsdChldmVudCkge1xuICAgIGlmICghW19jb25zdGFudHMuQVJST1dfRE9XTl9LRVksIF9jb25zdGFudHMuQVJST1dfVVBfS0VZXS5pbmNsdWRlcyhldmVudC5rZXlDb2RlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIGlucHV0ID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmlucHV0O1xuXG5cbiAgICB2YXIgbGlzdCA9IHRoaXMucmVzdWx0TGlzdDtcbiAgICB2YXIgbWF4ID0gdGhpcy5yZXN1bHRMaXN0LmNvdW50KCkgLSAxO1xuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2VcbiAgICB2YXIgbmV4dCA9IGV2ZW50LmNvZGUgPT09ICdBcnJvd0Rvd24nID8gfn5saXN0LnNlbGVjdGVkICsgMSA6IH5+bGlzdC5zZWxlY3RlZCAtIDE7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5lc3RlZC10ZXJuYXJ5XG4gICAgdmFyIGlkeCA9IG5leHQgPCAwID8gbWF4IDogbmV4dCA+IG1heCA/IDAgOiBuZXh0O1xuXG4gICAgdmFyIGl0ZW0gPSBsaXN0LnNlbGVjdChpZHgpO1xuICAgIGlucHV0LnZhbHVlID0gaXRlbS5sYWJlbDtcbiAgfSxcbiAgY2xlYXJSZXN1bHRzOiBmdW5jdGlvbiBjbGVhclJlc3VsdHMoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSAhPT0gX2NvbnN0YW50cy5FU0NBUEVfS0VZKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5yZXN1bHRMaXN0LmNsZWFyKCk7XG4gIH0sXG4gIGF1dG9TZWFyY2g6IGZ1bmN0aW9uIGF1dG9TZWFyY2goZXZlbnQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgdmFyIHF1ZXJ5LCBwcm92aWRlciwgcmVzdWx0cztcblxuICAgICAgaWYgKF9jb25zdGFudHMuU1BFQ0lBTF9LRVlTLmluY2x1ZGVzKGV2ZW50LmtleUNvZGUpKSB7XG4gICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG4gICAgICB9XG5cbiAgICAgIHF1ZXJ5ID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgcHJvdmlkZXIgPSB0aGlzLm9wdGlvbnMucHJvdmlkZXI7XG4gICAgICByZXR1cm4gcHJvdmlkZXIuc2VhcmNoKHsgcXVlcnk6IHF1ZXJ5IH0pLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG5cbiAgICAgICAgcmVzdWx0cyA9ICRhd2FpdF8xO1xuICAgICAgICB0aGlzLnJlc3VsdExpc3QucmVuZGVyKHJlc3VsdHMpO1xuICAgICAgICByZXR1cm4gJHJldHVybigpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgfSxcbiAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KHF1ZXJ5KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgIHZhciBwcm92aWRlciwgcmVzdWx0cztcbiAgICAgIHByb3ZpZGVyID0gdGhpcy5vcHRpb25zLnByb3ZpZGVyO1xuICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlYXJjaChxdWVyeSkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzIpIHtcblxuICAgICAgICByZXN1bHRzID0gJGF3YWl0XzI7XG5cbiAgICAgICAgaWYgKHJlc3VsdHMgJiYgcmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5zaG93UmVzdWx0KHJlc3VsdHNbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICB9LFxuICBzaG93UmVzdWx0OiBmdW5jdGlvbiBzaG93UmVzdWx0KHJlc3VsdCkge1xuICAgIHZhciBtYXJrZXJzID0gT2JqZWN0LmtleXModGhpcy5tYXJrZXJzLl9sYXllcnMpO1xuICAgIGlmIChtYXJrZXJzLmxlbmd0aCA+PSB0aGlzLm9wdGlvbnMubWF4TWFya2Vycykge1xuICAgICAgdGhpcy5tYXJrZXJzLnJlbW92ZUxheWVyKG1hcmtlcnNbMF0pO1xuICAgIH1cblxuICAgIHZhciBtYXJrZXIgPSB0aGlzLmFkZE1hcmtlcihyZXN1bHQpO1xuICAgIHRoaXMuY2VudGVyTWFwKHJlc3VsdCk7XG5cbiAgICB0aGlzLm1hcC5maXJlRXZlbnQoJ2dlb3NlYXJjaC9zaG93bG9jYXRpb24nLCB7XG4gICAgICBsb2NhdGlvbjogcmVzdWx0LFxuICAgICAgbWFya2VyOiBtYXJrZXJcbiAgICB9KTtcbiAgfSxcbiAgYWRkTWFya2VyOiBmdW5jdGlvbiBhZGRNYXJrZXIocmVzdWx0KSB7XG4gICAgdmFyIF9vcHRpb25zMyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgb3B0aW9ucyA9IF9vcHRpb25zMy5tYXJrZXIsXG4gICAgICAgIHNob3dQb3B1cCA9IF9vcHRpb25zMy5zaG93UG9wdXA7XG5cbiAgICB2YXIgbWFya2VyID0gbmV3IEwuTWFya2VyKFtyZXN1bHQueSwgcmVzdWx0LnhdLCBvcHRpb25zKTtcbiAgICBtYXJrZXIuYmluZFBvcHVwKHJlc3VsdC5sYWJlbCk7XG5cbiAgICB0aGlzLm1hcmtlcnMuYWRkTGF5ZXIobWFya2VyKTtcblxuICAgIGlmIChzaG93UG9wdXApIHtcbiAgICAgIG1hcmtlci5vcGVuUG9wdXAoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWFya2VyO1xuICB9LFxuICBjZW50ZXJNYXA6IGZ1bmN0aW9uIGNlbnRlck1hcChyZXN1bHQpIHtcbiAgICB2YXIgX29wdGlvbnM0ID0gdGhpcy5vcHRpb25zLFxuICAgICAgICByZXRhaW5ab29tTGV2ZWwgPSBfb3B0aW9uczQucmV0YWluWm9vbUxldmVsLFxuICAgICAgICBhbmltYXRlWm9vbSA9IF9vcHRpb25zNC5hbmltYXRlWm9vbTtcblxuXG4gICAgdmFyIHJlc3VsdEJvdW5kcyA9IG5ldyBMLkxhdExuZ0JvdW5kcyhyZXN1bHQuYm91bmRzKTtcbiAgICB2YXIgYm91bmRzID0gcmVzdWx0Qm91bmRzLmlzVmFsaWQoKSA/IHJlc3VsdEJvdW5kcyA6IHRoaXMubWFya2Vycy5nZXRCb3VuZHMoKTtcblxuICAgIGlmICghcmV0YWluWm9vbUxldmVsICYmIHJlc3VsdEJvdW5kcy5pc1ZhbGlkKCkpIHtcbiAgICAgIHRoaXMubWFwLmZpdEJvdW5kcyhib3VuZHMsIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWFwLnNldFZpZXcoYm91bmRzLmdldENlbnRlcigpLCB0aGlzLmdldFpvb20oKSwgeyBhbmltYXRlOiBhbmltYXRlWm9vbSB9KTtcbiAgICB9XG4gIH0sXG4gIGdldFpvb206IGZ1bmN0aW9uIGdldFpvb20oKSB7XG4gICAgdmFyIF9vcHRpb25zNSA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgcmV0YWluWm9vbUxldmVsID0gX29wdGlvbnM1LnJldGFpblpvb21MZXZlbCxcbiAgICAgICAgem9vbUxldmVsID0gX29wdGlvbnM1Lnpvb21MZXZlbDtcblxuICAgIHJldHVybiByZXRhaW5ab29tTGV2ZWwgPyB0aGlzLm1hcC5nZXRab29tKCkgOiB6b29tTGV2ZWw7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIExlYWZsZXRDb250cm9sKCkge1xuICBpZiAoIUwgfHwgIUwuQ29udHJvbCB8fCAhTC5Db250cm9sLmV4dGVuZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTGVhZmxldCBtdXN0IGJlIGxvYWRlZCBiZWZvcmUgaW5zdGFudGlhdGluZyB0aGUgR2VvU2VhcmNoIGNvbnRyb2wnKTtcbiAgfVxuXG4gIHZhciBMQ29udHJvbCA9IEwuQ29udHJvbC5leHRlbmQoQ29udHJvbCk7XG5cbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG9wdGlvbnMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBvcHRpb25zW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoTENvbnRyb2wsIFtudWxsXS5jb25jYXQob3B0aW9ucykpKSgpO1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL2xlYWZsZXRDb250cm9sLmpzIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKlxuICogJGFzeW5jYmluZCBoYXMgbXVsdGlwbGUgdXNlcywgZGVwZW5kaW5nIG9uIHRoZSBwYXJhbWV0ZXIgbGlzdC4gSXQgaXMgaW4gRnVuY3Rpb24ucHJvdG90eXBlLCBzbyAndGhpcycgaXMgYWx3YXlzIGEgZnVuY3Rpb25cbiAqXG4gKiAxKSBJZiBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudCAodGhpcyksIGl0IGlzIHVzZWQgd2hlbiBkZWZpbmluZyBhbiBhc3luYyBmdW5jdGlvbiB0byBlbnN1cmUgd2hlblxuICogICAgICBpdCBpcyBpbnZva2VkLCB0aGUgY29ycmVjdCAndGhpcycgaXMgcHJlc2VudCwganVzdCBsaWtlIFwiYmluZFwiLiBGb3IgbGVnYWN5IHJlYXNvbnMsICd0aGlzJyBpcyBnaXZlblxuICogICAgICBhIG1lbWViZXIgJ3RoZW4nIHdoaWNoIHJlZmVycyB0byBpdHNlbGYuXG4gKiAyKSBJZiBjYWxsZWQgd2l0aCBhIHNlY29uZCBwYXJhbWV0ZXIgKFwiY2F0Y2hlclwiKSBhbmQgY2F0Y2hlciE9PXRydWUgaXQgaXMgYmVpbmcgdXNlZCB0byBpbnZva2UgYW4gYXN5bmNcbiAqICAgICAgZnVuY3Rpb24gd2hlcmUgdGhlIHNlY29uZCBwYXJhbWV0ZXIgaXMgdGhlIGVycm9yIGNhbGxiYWNrIChmb3Igc3luYyBleGNlcHRpb25zIGFuZCB0byBiZSBwYXNzZWQgdG9cbiAqICAgICAgbmVzdGVkIGFzeW5jIGNhbGxzKVxuICogMykgSWYgY2FsbGVkIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXI9PT10cnVlLCBpdCBpcyB0aGUgc2FtZSB1c2UgYXMgKDEpLCBidXQgdGhlIGZ1bmN0aW9uIGlzIHdyYXBwZWRcbiAqICAgICAgaW4gYW4gJ1Byb21pc2UnIGFzIHdlbGwgYm91bmQgdG8gJ3RoaXMnLlxuICogICAgICBJdCBpcyB0aGUgc2FtZSBhcyBjYWxsaW5nICduZXcgUHJvbWlzZSh0aGlzKScsIHdoZXJlICd0aGlzJyBpcyB0aGUgZnVuY3Rpb24gYmVpbmcgYm91bmQvd3JhcHBlZFxuICogNCkgSWYgY2FsbGVkIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXI9PT0wLCBpdCBpcyB0aGUgc2FtZSB1c2UgYXMgKDEpLCBidXQgdGhlIGZ1bmN0aW9uIGlzIHdyYXBwZWRcbiAqICAgICAgaW4gYSAnTGF6eVRoZW5hYmxlJywgd2hpY2ggZXhlY3V0ZXMgbGF6aWx5IGFuZCBjYW4gcmVzb2x2ZSBzeW5jaHJvbm91c2x5LlxuICogICAgICBJdCBpcyB0aGUgc2FtZSBhcyBjYWxsaW5nICduZXcgTGF6eVRoZW5hYmxlKHRoaXMpJyAoaWYgc3VjaCBhIHR5cGUgd2VyZSBleHBvc2VkKSwgd2hlcmUgJ3RoaXMnIGlzXG4gKiAgICAgIHRoZSBmdW5jdGlvbiBiZWluZyBib3VuZC93cmFwcGVkXG4gKi9cblxuZnVuY3Rpb24gcHJvY2Vzc0luY2x1ZGVzKGluY2x1ZGVzLGlucHV0KSB7XG4gICAgdmFyIHNyYyA9IGlucHV0LnRvU3RyaW5nKCkgO1xuICAgIHZhciB0ID0gXCJyZXR1cm4gXCIrc3JjIDtcbiAgICB2YXIgYXJncyA9IHNyYy5tYXRjaCgvLipcXCgoW14pXSopXFwpLylbMV0gO1xuICAgIHZhciByZSA9IC9bJ1wiXSEhIShbXidcIl0qKVsnXCJdL2cgO1xuICAgIHZhciBtID0gW10gO1xuICAgIHdoaWxlICgxKSB7XG4gICAgICAgIHZhciBteCA9IHJlLmV4ZWModCkgO1xuICAgICAgICBpZiAobXgpXG4gICAgICAgICAgICBtLnB1c2gobXgpIDtcbiAgICAgICAgZWxzZSBicmVhayA7XG4gICAgfVxuICAgIG0ucmV2ZXJzZSgpLmZvckVhY2goZnVuY3Rpb24oZSl7XG4gICAgICAgIHQgPSB0LnNsaWNlKDAsZS5pbmRleCkraW5jbHVkZXNbZVsxXV0rdC5zdWJzdHIoZS5pbmRleCtlWzBdLmxlbmd0aCkgO1xuICAgIH0pIDtcbiAgICB0ID0gdC5yZXBsYWNlKC9cXC9cXCpbXipdKlxcKlxcLy9nLCcgJykucmVwbGFjZSgvXFxzKy9nLCcgJykgO1xuICAgIHJldHVybiBuZXcgRnVuY3Rpb24oYXJncyx0KSgpIDtcbn1cblxudmFyICRhc3luY2JpbmQgPSBwcm9jZXNzSW5jbHVkZXMoe1xuICAgIHpvdXNhbjpyZXF1aXJlKCcuL3pvdXNhbicpLnRvU3RyaW5nKCksXG4gICAgdGhlbmFibGU6cmVxdWlyZSgnLi90aGVuYWJsZUZhY3RvcnknKS50b1N0cmluZygpXG59LFxuZnVuY3Rpb24gJGFzeW5jYmluZChzZWxmLGNhdGNoZXIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBpZiAoIUZ1bmN0aW9uLnByb3RvdHlwZS4kYXN5bmNiaW5kKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsXCIkYXN5bmNiaW5kXCIse3ZhbHVlOiRhc3luY2JpbmQsZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlfSkgO1xuICAgIH1cblxuICAgIGlmICghJGFzeW5jYmluZC50cmFtcG9saW5lKSB7XG4gICAgICAkYXN5bmNiaW5kLnRyYW1wb2xpbmUgPSBmdW5jdGlvbiB0cmFtcG9saW5lKHQseCxzLGUsdSl7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBiKHEpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAocSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocS50aGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxID0gcS50aGVuKGIsIGUpIDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1P3VuZGVmaW5lZDpxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocS5wb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcS5wb3AoKSA/IHguY2FsbCh0KSA6IHE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHEuY2FsbCh0KVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZShyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCEkYXN5bmNiaW5kLkxhenlUaGVuYWJsZSkge1xuICAgICAgICAkYXN5bmNiaW5kLkxhenlUaGVuYWJsZSA9ICchISF0aGVuYWJsZScoKTtcbiAgICAgICAgJGFzeW5jYmluZC5FYWdlclRoZW5hYmxlID0gJGFzeW5jYmluZC5UaGVuYWJsZSA9ICgkYXN5bmNiaW5kLkVhZ2VyVGhlbmFibGVGYWN0b3J5ID0gJyEhIXpvdXNhbicpKCk7XG4gICAgfVxuXG4gICAgdmFyIHJlc29sdmVyID0gdGhpcztcbiAgICBzd2l0Y2ggKGNhdGNoZXIpIHtcbiAgICBjYXNlIHRydWU6XG4gICAgICAgIHJldHVybiBuZXcgKCRhc3luY2JpbmQuVGhlbmFibGUpKGJvdW5kVGhlbik7XG4gICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gbmV3ICgkYXN5bmNiaW5kLkxhenlUaGVuYWJsZSkoYm91bmRUaGVuKTtcbiAgICBjYXNlIHVuZGVmaW5lZDpcbiAgICAgICAgLyogRm9yIHJ1bnRpbWUgY29tcGF0aWJpbGl0eSB3aXRoIE5vZGVudCB2Mi54LCBwcm92aWRlIGEgdGhlbmFibGUgKi9cbiAgICAgICAgYm91bmRUaGVuLnRoZW4gPSBib3VuZFRoZW4gO1xuICAgICAgICByZXR1cm4gYm91bmRUaGVuIDtcbiAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVyLmFwcGx5KHNlbGYsYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH0gY2F0Y2goZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2F0Y2hlcihleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gYm91bmRUaGVuKCkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZXIuYXBwbHkoc2VsZixhcmd1bWVudHMpO1xuICAgIH1cbn0pIDtcblxuZnVuY3Rpb24gJGFzeW5jc3Bhd24ocHJvbWlzZVByb3ZpZGVyLHNlbGYpIHtcbiAgICBpZiAoIUZ1bmN0aW9uLnByb3RvdHlwZS4kYXN5bmNzcGF3bikge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLFwiJGFzeW5jc3Bhd25cIix7dmFsdWU6JGFzeW5jc3Bhd24sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlfSkgO1xuICAgIH1cbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRnVuY3Rpb24pKSByZXR1cm4gO1xuXG4gICAgdmFyIGdlbkYgPSB0aGlzIDtcbiAgICByZXR1cm4gbmV3IHByb21pc2VQcm92aWRlcihmdW5jdGlvbiBlbm91Z2gocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciBnZW4gPSBnZW5GLmNhbGwoc2VsZiwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgZnVuY3Rpb24gc3RlcChmbixhcmcpIHtcbiAgICAgICAgICAgIHZhciBuZXh0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBuZXh0ID0gZm4uY2FsbChnZW4sYXJnKTtcbiAgICAgICAgICAgICAgICBpZihuZXh0LmRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUgIT09IHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlICYmIG5leHQudmFsdWU9PT1uZXh0LnZhbHVlLnRoZW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQudmFsdWUocmVzb2x2ZSxyZWplY3QpIDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUgJiYgcmVzb2x2ZShuZXh0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUgPSBudWxsIDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUudGhlbikge1xuICAgICAgICAgICAgICAgICAgICBuZXh0LnZhbHVlLnRoZW4oZnVuY3Rpb24odikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4ubmV4dCx2KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4udGhyb3csZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLm5leHQsbmV4dC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0ICYmIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICByZWplY3QgPSBudWxsIDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RlcChnZW4ubmV4dCk7XG4gICAgfSk7XG59XG5cbi8vIEluaXRpYWxpemUgYXN5bmMgYmluZGluZ3NcbiRhc3luY2JpbmQoKSA7XG4kYXN5bmNzcGF3bigpIDtcblxuLy8gRXhwb3J0IGFzeW5jIGJpbmRpbmdzXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAkYXN5bmNiaW5kOiRhc3luY2JpbmQsXG4gICAgJGFzeW5jc3Bhd246JGFzeW5jc3Bhd25cbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L25vZGVudC1ydW50aW1lL3J1bnRpbWUuanMiLCIvKiBUaGlzIGNvZGUgaXMgYmFzZWQgb246XG56b3VzYW4gLSBBIExpZ2h0bmluZyBGYXN0LCBZZXQgVmVyeSBTbWFsbCBQcm9taXNlIEErIENvbXBsaWFudCBJbXBsZW1lbnRhdGlvblxuaHR0cHM6Ly9naXRodWIuY29tL2JsdWVqYXZhL3pvdXNhblxuQXV0aG9yOiBHbGVubiBDcm93bm92ZXIgPGdsZW5uQGJsdWVqYXZhLmNvbT4gKGh0dHA6Ly93d3cuYmx1ZWphdmEuY29tKVxuVmVyc2lvbiAyLjMuM1xuTGljZW5zZTogTUlUICovXG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odGljayl7XG4gICAgdGljayA9IHRpY2sgfHwgKHR5cGVvZiBwcm9jZXNzPT09XCJvYmplY3RcIiAmJiBwcm9jZXNzLm5leHRUaWNrKSB8fCAodHlwZW9mIHNldEltbWVkaWF0ZT09PVwiZnVuY3Rpb25cIiAmJiBzZXRJbW1lZGlhdGUpIHx8IGZ1bmN0aW9uKGYpe3NldFRpbWVvdXQoZiwwKX07XG4gICAgdmFyIHNvb24gPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZnEgPSBbXSwgZnFTdGFydCA9IDAsIGJ1ZmZlclNpemUgPSAxMDI0O1xuICAgICAgICBmdW5jdGlvbiBjYWxsUXVldWUoKSB7XG4gICAgICAgICAgICB3aGlsZSAoZnEubGVuZ3RoIC0gZnFTdGFydCkge1xuICAgICAgICAgICAgICAgIHRyeSB7IGZxW2ZxU3RhcnRdKCkgfSBjYXRjaChleCkgeyAvKiBjb25zb2xlLmVycm9yKGV4KSAqLyB9XG4gICAgICAgICAgICAgICAgZnFbZnFTdGFydCsrXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAoZnFTdGFydCA9PT0gYnVmZmVyU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICBmcS5zcGxpY2UoMCwgYnVmZmVyU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIGZxU3RhcnQgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgIGZxLnB1c2goZm4pO1xuICAgICAgICAgICAgaWYgKGZxLmxlbmd0aCAtIGZxU3RhcnQgPT09IDEpXG4gICAgICAgICAgICAgICAgdGljayhjYWxsUXVldWUpO1xuICAgICAgICB9O1xuICAgIH0pKCk7XG5cbiAgICBmdW5jdGlvbiBab3VzYW4oZnVuYykge1xuICAgICAgICBpZiAoZnVuYykge1xuICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgICAgIGZ1bmMoZnVuY3Rpb24gKGFyZykge1xuICAgICAgICAgICAgICAgIG1lLnJlc29sdmUoYXJnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgICAgICAgICBtZS5yZWplY3QoYXJnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgWm91c2FuLnByb3RvdHlwZSA9IHtcbiAgICAgICAgcmVzb2x2ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcylcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWplY3QobmV3IFR5cGVFcnJvcihcIkF0dGVtcHQgdG8gcmVzb2x2ZSBwcm9taXNlIHdpdGggc2VsZlwiKSk7XG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHZhbHVlICYmICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiB8fCB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoZW4gPSB2YWx1ZS50aGVuO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoZW4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBmdW5jdGlvbiAocmEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVzb2x2ZShyYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJlamVjdChycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GVUxGSUxMRUQ7XG4gICAgICAgICAgICB0aGlzLnYgPSB2YWx1ZTtcbiAgICAgICAgICAgIGlmIChtZS5jKVxuICAgICAgICAgICAgICAgIHNvb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgbCA9IG1lLmMubGVuZ3RoO24gPCBsOyBuKyspXG4gICAgICAgICAgICAgICAgICAgICAgICBTVEFURV9GVUxGSUxMRUQobWUuY1tuXSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZWplY3Q6IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1JFSkVDVEVEO1xuICAgICAgICAgICAgdGhpcy52ID0gcmVhc29uO1xuICAgICAgICAgICAgdmFyIGNsaWVudHMgPSB0aGlzLmM7XG4gICAgICAgICAgICBpZiAoY2xpZW50cylcbiAgICAgICAgICAgICAgICBzb29uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIGwgPSBjbGllbnRzLmxlbmd0aDtuIDwgbDsgbisrKVxuICAgICAgICAgICAgICAgICAgICAgICAgU1RBVEVfUkVKRUNURUQoY2xpZW50c1tuXSwgcmVhc29uKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgdGhlbjogZnVuY3Rpb24gKG9uRiwgb25SKSB7XG4gICAgICAgICAgICB2YXIgcCA9IG5ldyBab3VzYW4oKTtcbiAgICAgICAgICAgIHZhciBjbGllbnQgPSB7XG4gICAgICAgICAgICAgICAgeTogb25GLFxuICAgICAgICAgICAgICAgIG46IG9uUixcbiAgICAgICAgICAgICAgICBwOiBwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmMpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYy5wdXNoKGNsaWVudCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmMgPSBbY2xpZW50XTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSB0aGlzLnN0YXRlLCBhID0gdGhpcy52O1xuICAgICAgICAgICAgICAgIHNvb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzKGNsaWVudCwgYSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBTVEFURV9GVUxGSUxMRUQoYywgYXJnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYy55ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHlyZXQgPSBjLnkuY2FsbCh1bmRlZmluZWQsIGFyZyk7XG4gICAgICAgICAgICAgICAgYy5wLnJlc29sdmUoeXJldCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjLnAucmVqZWN0KGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgYy5wLnJlc29sdmUoYXJnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBTVEFURV9SRUpFQ1RFRChjLCByZWFzb24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjLm4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgeXJldCA9IGMubi5jYWxsKHVuZGVmaW5lZCwgcmVhc29uKTtcbiAgICAgICAgICAgICAgICBjLnAucmVzb2x2ZSh5cmV0KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGMucC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICBjLnAucmVqZWN0KHJlYXNvbik7XG4gICAgfVxuXG4gICAgWm91c2FuLnJlc29sdmUgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIGlmICh2YWwgJiYgKHZhbCBpbnN0YW5jZW9mIFpvdXNhbikpXG4gICAgICAgICAgICByZXR1cm4gdmFsIDtcbiAgICAgICAgdmFyIHogPSBuZXcgWm91c2FuKCk7XG4gICAgICAgIHoucmVzb2x2ZSh2YWwpO1xuICAgICAgICByZXR1cm4gejtcbiAgICB9O1xuICAgIFpvdXNhbi5yZWplY3QgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmIChlcnIgJiYgKGVyciBpbnN0YW5jZW9mIFpvdXNhbikpXG4gICAgICAgICAgICByZXR1cm4gZXJyIDtcbiAgICAgICAgdmFyIHogPSBuZXcgWm91c2FuKCk7XG4gICAgICAgIHoucmVqZWN0KGVycik7XG4gICAgICAgIHJldHVybiB6O1xuICAgIH07XG5cbiAgICBab3VzYW4udmVyc2lvbiA9IFwiMi4zLjMtbm9kZW50XCIgO1xuICAgIHJldHVybiBab3VzYW4gO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbm9kZW50LXJ1bnRpbWUvem91c2FuLmpzIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsInZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblxuLy8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3NcblxuZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcbiAgaWYgKHRpbWVvdXQpIHtcbiAgICB0aW1lb3V0LmNsb3NlKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5UaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5UaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG59O1xuXG4vLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cbmV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xufTtcblxuZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xufTtcblxuZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXG4gIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuICBpZiAobXNlY3MgPj0gMCkge1xuICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcbiAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpXG4gICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuICAgIH0sIG1zZWNzKTtcbiAgfVxufTtcblxuLy8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdFxucmVxdWlyZShcInNldGltbWVkaWF0ZVwiKTtcbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcyIsIihmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG4gICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG4gICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXG4gICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4gICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcbiAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuICAgICAgfVxuICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrXG4gICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG4gICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcbiAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpO1xuICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW4odGFzaykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG4gICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcbiAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cbiAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcbiAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5JZlByZXNlbnQoaGFuZGxlKTsgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG4gICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcbiAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG4gICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG4gICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcbiAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG4gICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblxuICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG4gICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcbiAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblxuICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cbiAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG4gICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcbiAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuICAgICAgICAvLyBGb3IgSUUgNuKAkzhcbiAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcbiAgICB9XG5cbiAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG4gICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcbn0odHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IGdsb2JhbCA6IHNlbGYpKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L34vc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gaXNUaGVuYWJsZShvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAmJiAob2JqIGluc3RhbmNlb2YgT2JqZWN0KSAmJiB0eXBlb2Ygb2JqLnRoZW49PT1cImZ1bmN0aW9uXCI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x1dGlvbihwLHIsaG93KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvKiAyLjIuNy4xICovXG4gICAgICAgICAgICB2YXIgeCA9IGhvdyA/IGhvdyhyKTpyIDtcblxuICAgICAgICAgICAgaWYgKHA9PT14KSAvKiAyLjMuMSAqL1xuICAgICAgICAgICAgICAgIHJldHVybiBwLnJlamVjdChuZXcgVHlwZUVycm9yKFwiUHJvbWlzZSByZXNvbHV0aW9uIGxvb3BcIikpIDtcblxuICAgICAgICAgICAgaWYgKGlzVGhlbmFibGUoeCkpIHtcbiAgICAgICAgICAgICAgICAvKiAyLjMuMyAqL1xuICAgICAgICAgICAgICAgIHgudGhlbihmdW5jdGlvbih5KXtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbihwLHkpO1xuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgICAgIHAucmVqZWN0KGUpXG4gICAgICAgICAgICAgICAgfSkgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwLnJlc29sdmUoeCkgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgLyogMi4yLjcuMiAqL1xuICAgICAgICAgICAgcC5yZWplY3QoZXgpIDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIENoYWluZWQoKSB7fTtcbiAgICBDaGFpbmVkLnByb3RvdHlwZSA9IHtcbiAgICAgICAgcmVzb2x2ZTpfdW5jaGFpbmVkLFxuICAgICAgICByZWplY3Q6X3VuY2hhaW5lZCxcbiAgICAgICAgdGhlbjp0aGVuQ2hhaW5cbiAgICB9O1xuICAgIGZ1bmN0aW9uIF91bmNoYWluZWQodil7fVxuICAgIGZ1bmN0aW9uIHRoZW5DaGFpbihyZXMscmVqKXtcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzO1xuICAgICAgICB0aGlzLnJlamVjdCA9IHJlajtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gdGhlbihyZXMscmVqKXtcbiAgICAgICAgdmFyIGNoYWluID0gbmV3IENoYWluZWQoKSA7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlcihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc1RoZW5hYmxlKHZhbHVlKSA/IHZhbHVlLnRoZW4ocmVzLHJlaikgOiByZXNvbHV0aW9uKGNoYWluLHZhbHVlLHJlcyk7XG4gICAgICAgICAgICB9LGZ1bmN0aW9uKGV4KSB7XG4gICAgICAgICAgICAgICAgcmVzb2x1dGlvbihjaGFpbixleCxyZWopIDtcbiAgICAgICAgICAgIH0pIDtcbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIHJlc29sdXRpb24oY2hhaW4sZXgscmVqKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hhaW4gO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFRoZW5hYmxlKHJlc29sdmVyKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVyID0gcmVzb2x2ZXIgO1xuICAgICAgICB0aGlzLnRoZW4gPSB0aGVuIDtcbiAgICB9O1xuXG4gICAgVGhlbmFibGUucmVzb2x2ZSA9IGZ1bmN0aW9uKHYpe1xuICAgICAgICByZXR1cm4gVGhlbmFibGUuaXNUaGVuYWJsZSh2KSA/IHYgOiB7dGhlbjpmdW5jdGlvbihyZXNvbHZlKXtyZXR1cm4gcmVzb2x2ZSh2KX19O1xuICAgIH07XG5cbiAgICBUaGVuYWJsZS5pc1RoZW5hYmxlID0gaXNUaGVuYWJsZSA7XG5cbiAgICByZXR1cm4gVGhlbmFibGUgO1xufSA7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L25vZGVudC1ydW50aW1lL3RoZW5hYmxlRmFjdG9yeS5qcyIsIi8qKlxuICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgTkFOID0gMCAvIDA7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblxuLyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi9cbnZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXG4vKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xudmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xudmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cbi8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG4gICAgbmF0aXZlTWluID0gTWF0aC5taW47XG5cbi8qKlxuICogR2V0cyB0aGUgdGltZXN0YW1wIG9mIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlXG4gKiB0aGUgVW5peCBlcG9jaCAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDIuNC4wXG4gKiBAY2F0ZWdvcnkgRGF0ZVxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXN0YW1wLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7XG4gKiAgIGNvbnNvbGUubG9nKF8ubm93KCkgLSBzdGFtcCk7XG4gKiB9LCBfLm5vdygpKTtcbiAqIC8vID0+IExvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGludm9jYXRpb24uXG4gKi9cbnZhciBub3cgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHJvb3QuRGF0ZS5ub3coKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGRlYm91bmNlZCBmdW5jdGlvbiB0aGF0IGRlbGF5cyBpbnZva2luZyBgZnVuY2AgdW50aWwgYWZ0ZXIgYHdhaXRgXG4gKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcbiAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcbiAqIGRlbGF5ZWQgYGZ1bmNgIGludm9jYXRpb25zIGFuZCBhIGBmbHVzaGAgbWV0aG9kIHRvIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLlxuICogUHJvdmlkZSBgb3B0aW9uc2AgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb24gdGhlXG4gKiBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkXG4gKiB3aXRoIHRoZSBsYXN0IGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50XG4gKiBjYWxscyB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYFxuICogaW52b2NhdGlvbi5cbiAqXG4gKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzXG4gKiBpbnZva2VkIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuICogaXMgaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICpcbiAqIElmIGB3YWl0YCBpcyBgMGAgYW5kIGBsZWFkaW5nYCBpcyBgZmFsc2VgLCBgZnVuY2AgaW52b2NhdGlvbiBpcyBkZWZlcnJlZFxuICogdW50aWwgdG8gdGhlIG5leHQgdGljaywgc2ltaWxhciB0byBgc2V0VGltZW91dGAgd2l0aCBhIHRpbWVvdXQgb2YgYDBgLlxuICpcbiAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKVxuICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy5kZWJvdW5jZWAgYW5kIGBfLnRocm90dGxlYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlLlxuICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9ZmFsc2VdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdXG4gKiAgVGhlIG1heGltdW0gdGltZSBgZnVuY2AgaXMgYWxsb3dlZCB0byBiZSBkZWxheWVkIGJlZm9yZSBpdCdzIGludm9rZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gQXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eC5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG4gKlxuICogLy8gSW52b2tlIGBzZW5kTWFpbGAgd2hlbiBjbGlja2VkLCBkZWJvdW5jaW5nIHN1YnNlcXVlbnQgY2FsbHMuXG4gKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG4gKiAgICdsZWFkaW5nJzogdHJ1ZSxcbiAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAqIH0pKTtcbiAqXG4gKiAvLyBFbnN1cmUgYGJhdGNoTG9nYCBpcyBpbnZva2VkIG9uY2UgYWZ0ZXIgMSBzZWNvbmQgb2YgZGVib3VuY2VkIGNhbGxzLlxuICogdmFyIGRlYm91bmNlZCA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwgeyAnbWF4V2FpdCc6IDEwMDAgfSk7XG4gKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG4gKiBqUXVlcnkoc291cmNlKS5vbignbWVzc2FnZScsIGRlYm91bmNlZCk7XG4gKlxuICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyBkZWJvdW5jZWQgaW52b2NhdGlvbi5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGRlYm91bmNlZC5jYW5jZWwpO1xuICovXG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gIHZhciBsYXN0QXJncyxcbiAgICAgIGxhc3RUaGlzLFxuICAgICAgbWF4V2FpdCxcbiAgICAgIHJlc3VsdCxcbiAgICAgIHRpbWVySWQsXG4gICAgICBsYXN0Q2FsbFRpbWUsXG4gICAgICBsYXN0SW52b2tlVGltZSA9IDAsXG4gICAgICBsZWFkaW5nID0gZmFsc2UsXG4gICAgICBtYXhpbmcgPSBmYWxzZSxcbiAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICB3YWl0ID0gdG9OdW1iZXIod2FpdCkgfHwgMDtcbiAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuICAgIG1heGluZyA9ICdtYXhXYWl0JyBpbiBvcHRpb25zO1xuICAgIG1heFdhaXQgPSBtYXhpbmcgPyBuYXRpdmVNYXgodG9OdW1iZXIob3B0aW9ucy5tYXhXYWl0KSB8fCAwLCB3YWl0KSA6IG1heFdhaXQ7XG4gICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuICAgIHZhciBhcmdzID0gbGFzdEFyZ3MsXG4gICAgICAgIHRoaXNBcmcgPSBsYXN0VGhpcztcblxuICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxlYWRpbmdFZGdlKHRpbWUpIHtcbiAgICAvLyBSZXNldCBhbnkgYG1heFdhaXRgIHRpbWVyLlxuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICAvLyBTdGFydCB0aGUgdGltZXIgZm9yIHRoZSB0cmFpbGluZyBlZGdlLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG4gICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcbiAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSxcbiAgICAgICAgcmVzdWx0ID0gd2FpdCAtIHRpbWVTaW5jZUxhc3RDYWxsO1xuXG4gICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQsIG1heFdhaXQgLSB0aW1lU2luY2VMYXN0SW52b2tlKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcbiAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZTtcblxuICAgIC8vIEVpdGhlciB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCBhY3Rpdml0eSBoYXMgc3RvcHBlZCBhbmQgd2UncmUgYXQgdGhlXG4gICAgLy8gdHJhaWxpbmcgZWRnZSwgdGhlIHN5c3RlbSB0aW1lIGhhcyBnb25lIGJhY2t3YXJkcyBhbmQgd2UncmUgdHJlYXRpbmdcbiAgICAvLyBpdCBhcyB0aGUgdHJhaWxpbmcgZWRnZSwgb3Igd2UndmUgaGl0IHRoZSBgbWF4V2FpdGAgbGltaXQuXG4gICAgcmV0dXJuIChsYXN0Q2FsbFRpbWUgPT09IHVuZGVmaW5lZCB8fCAodGltZVNpbmNlTGFzdENhbGwgPj0gd2FpdCkgfHxcbiAgICAgICh0aW1lU2luY2VMYXN0Q2FsbCA8IDApIHx8IChtYXhpbmcgJiYgdGltZVNpbmNlTGFzdEludm9rZSA+PSBtYXhXYWl0KSk7XG4gIH1cblxuICBmdW5jdGlvbiB0aW1lckV4cGlyZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKTtcbiAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG4gICAgICByZXR1cm4gdHJhaWxpbmdFZGdlKHRpbWUpO1xuICAgIH1cbiAgICAvLyBSZXN0YXJ0IHRoZSB0aW1lci5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHJlbWFpbmluZ1dhaXQodGltZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhaWxpbmdFZGdlKHRpbWUpIHtcbiAgICB0aW1lcklkID0gdW5kZWZpbmVkO1xuXG4gICAgLy8gT25seSBpbnZva2UgaWYgd2UgaGF2ZSBgbGFzdEFyZ3NgIHdoaWNoIG1lYW5zIGBmdW5jYCBoYXMgYmVlblxuICAgIC8vIGRlYm91bmNlZCBhdCBsZWFzdCBvbmNlLlxuICAgIGlmICh0cmFpbGluZyAmJiBsYXN0QXJncykge1xuICAgICAgcmV0dXJuIGludm9rZUZ1bmModGltZSk7XG4gICAgfVxuICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICBpZiAodGltZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7XG4gICAgfVxuICAgIGxhc3RJbnZva2VUaW1lID0gMDtcbiAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIHJldHVybiB0aW1lcklkID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCksXG4gICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG5cbiAgICBsYXN0QXJncyA9IGFyZ3VtZW50cztcbiAgICBsYXN0VGhpcyA9IHRoaXM7XG4gICAgbGFzdENhbGxUaW1lID0gdGltZTtcblxuICAgIGlmIChpc0ludm9raW5nKSB7XG4gICAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBsZWFkaW5nRWRnZShsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgICAgaWYgKG1heGluZykge1xuICAgICAgICAvLyBIYW5kbGUgaW52b2NhdGlvbnMgaW4gYSB0aWdodCBsb29wLlxuICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG4gIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuICByZXR1cm4gZGVib3VuY2VkO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChfLm5vb3ApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTeW1ib2woJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3ltYm9sJyB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG51bWJlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b051bWJlcigzLjIpO1xuICogLy8gPT4gMy4yXG4gKlxuICogXy50b051bWJlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDVlLTMyNFxuICpcbiAqIF8udG9OdW1iZXIoSW5maW5pdHkpO1xuICogLy8gPT4gSW5maW5pdHlcbiAqXG4gKiBfLnRvTnVtYmVyKCczLjInKTtcbiAqIC8vID0+IDMuMlxuICovXG5mdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gTkFOO1xuICB9XG4gIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICB2YXIgb3RoZXIgPSB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PSAnZnVuY3Rpb24nID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG4gICAgdmFsdWUgPSBpc09iamVjdChvdGhlcikgPyAob3RoZXIgKyAnJykgOiBvdGhlcjtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG4gIH1cbiAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpO1xuICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuICByZXR1cm4gKGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSlcbiAgICA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOClcbiAgICA6IChyZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkZWJvdW5jZTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvfi9sb2Rhc2guZGVib3VuY2UvaW5kZXguanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbm9kZW50UnVudGltZSA9IHJlcXVpcmUoJ25vZGVudC1ydW50aW1lJyk7XG5cbnZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9kb21VdGlscyA9IHJlcXVpcmUoJy4vZG9tVXRpbHMnKTtcblxudmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgU2VhcmNoRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU2VhcmNoRWxlbWVudCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICBfcmVmJGhhbmRsZVN1Ym1pdCA9IF9yZWYuaGFuZGxlU3VibWl0LFxuICAgICAgICBoYW5kbGVTdWJtaXQgPSBfcmVmJGhhbmRsZVN1Ym1pdCA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZVN1Ym1pdCxcbiAgICAgICAgX3JlZiRzZWFyY2hMYWJlbCA9IF9yZWYuc2VhcmNoTGFiZWwsXG4gICAgICAgIHNlYXJjaExhYmVsID0gX3JlZiRzZWFyY2hMYWJlbCA9PT0gdW5kZWZpbmVkID8gJ3NlYXJjaCcgOiBfcmVmJHNlYXJjaExhYmVsLFxuICAgICAgICBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG4gICAgICAgIGNsYXNzTmFtZXMgPSBfcmVmJGNsYXNzTmFtZXMgPT09IHVuZGVmaW5lZCA/IHt9IDogX3JlZiRjbGFzc05hbWVzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNlYXJjaEVsZW1lbnQpO1xuXG4gICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIFsnZ2Vvc2VhcmNoJywgY2xhc3NOYW1lcy5jb250YWluZXJdLmpvaW4oJyAnKSk7XG4gICAgdmFyIGZvcm0gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdmb3JtJywgWycnLCBjbGFzc05hbWVzLmZvcm1dLmpvaW4oJyAnKSwgY29udGFpbmVyKTtcbiAgICB2YXIgaW5wdXQgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdpbnB1dCcsIFsnZ2xhc3MnLCBjbGFzc05hbWVzLmlucHV0XS5qb2luKCcgJyksIGZvcm0pO1xuXG4gICAgaW5wdXQudHlwZSA9ICd0ZXh0JztcbiAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHNlYXJjaExhYmVsO1xuXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25JbnB1dChlKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25LZXlVcChlKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25LZXlQcmVzcyhlKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25Gb2N1cyhlKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5vbkJsdXIoZSk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgdGhpcy5lbGVtZW50cyA9IHsgY29udGFpbmVyOiBjb250YWluZXIsIGZvcm06IGZvcm0sIGlucHV0OiBpbnB1dCB9O1xuICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFNlYXJjaEVsZW1lbnQsIFt7XG4gICAga2V5OiAnb25Gb2N1cycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uRm9jdXMoKSB7XG4gICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkodGhpcy5lbGVtZW50cy5mb3JtLCAnYWN0aXZlJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25CbHVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25CbHVyKCkge1xuICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKHRoaXMuZWxlbWVudHMuZm9ybSwgJ2FjdGl2ZScpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uU3VibWl0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWJtaXQoZXZlbnQpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG4gICAgICAgIHZhciBfZWxlbWVudHMsIGlucHV0LCBjb250YWluZXI7XG5cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgX2VsZW1lbnRzID0gdGhpcy5lbGVtZW50cywgaW5wdXQgPSBfZWxlbWVudHMuaW5wdXQsIGNvbnRhaW5lciA9IF9lbGVtZW50cy5jb250YWluZXI7XG5cbiAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2Vycm9yJyk7XG4gICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlU3VibWl0KHsgcXVlcnk6IGlucHV0LnZhbHVlIH0pLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG4gICAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcbiAgICAgICAgICByZXR1cm4gJHJldHVybigpO1xuICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25JbnB1dCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uSW5wdXQoKSB7XG4gICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cblxuICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcbiAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2Vycm9yJyk7XG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvbktleVVwJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25LZXlVcChldmVudCkge1xuICAgICAgdmFyIF9lbGVtZW50czIgPSB0aGlzLmVsZW1lbnRzLFxuICAgICAgICAgIGNvbnRhaW5lciA9IF9lbGVtZW50czIuY29udGFpbmVyLFxuICAgICAgICAgIGlucHV0ID0gX2VsZW1lbnRzMi5pbnB1dDtcblxuXG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gX2NvbnN0YW50cy5FU0NBUEVfS0VZKSB7XG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblxuICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuXG4gICAgICAgIGRvY3VtZW50LmJvZHkuZm9jdXMoKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5ibHVyKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25LZXlQcmVzcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5UHJlc3MoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBfY29uc3RhbnRzLkVOVEVSX0tFWSkge1xuICAgICAgICB0aGlzLm9uU3VibWl0KGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZXRRdWVyeScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldFF1ZXJ5KHF1ZXJ5KSB7XG4gICAgICB2YXIgaW5wdXQgPSB0aGlzLmVsZW1lbnRzLmlucHV0O1xuXG4gICAgICBpbnB1dC52YWx1ZSA9IHF1ZXJ5O1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTZWFyY2hFbGVtZW50O1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBTZWFyY2hFbGVtZW50O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3NlYXJjaEVsZW1lbnQuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXG52YXIgY3JlYXRlRWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoZWxlbWVudCkge1xuICB2YXIgY2xhc3NOYW1lcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG4gIHZhciBwYXJlbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IG51bGw7XG5cbiAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50KTtcbiAgZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lcztcblxuICBpZiAocGFyZW50KSB7XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGVsKTtcbiAgfVxuXG4gIHJldHVybiBlbDtcbn07XG5cbnZhciBjcmVhdGVTY3JpcHRFbGVtZW50ID0gZXhwb3J0cy5jcmVhdGVTY3JpcHRFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlU2NyaXB0RWxlbWVudCh1cmwsIGNiKSB7XG4gIHZhciBzY3JpcHQgPSBjcmVhdGVFbGVtZW50KCdzY3JpcHQnLCBudWxsLCBkb2N1bWVudC5ib2R5KTtcbiAgc2NyaXB0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2phdmFzY3JpcHQnKTtcblxuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICB3aW5kb3dbY2JdID0gZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgIHNjcmlwdC5yZW1vdmUoKTtcbiAgICAgIGRlbGV0ZSB3aW5kb3dbY2JdO1xuICAgICAgcmVzb2x2ZShqc29uKTtcbiAgICB9O1xuXG4gICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3JjJywgdXJsKTtcbiAgfSk7XG59O1xuXG52YXIgYWRkQ2xhc3NOYW1lID0gZXhwb3J0cy5hZGRDbGFzc05hbWUgPSBmdW5jdGlvbiBhZGRDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbGVtZW50ICYmICFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gIH1cbn07XG5cbnZhciByZW1vdmVDbGFzc05hbWUgPSBleHBvcnRzLnJlbW92ZUNsYXNzTmFtZSA9IGZ1bmN0aW9uIHJlbW92ZUNsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICB9XG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL2RvbVV0aWxzLmpzIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG52YXIgRU5URVJfS0VZID0gZXhwb3J0cy5FTlRFUl9LRVkgPSAxMztcbnZhciBFU0NBUEVfS0VZID0gZXhwb3J0cy5FU0NBUEVfS0VZID0gMjc7XG52YXIgQVJST1dfRE9XTl9LRVkgPSBleHBvcnRzLkFSUk9XX0RPV05fS0VZID0gNDA7XG52YXIgQVJST1dfVVBfS0VZID0gZXhwb3J0cy5BUlJPV19VUF9LRVkgPSAzODtcbnZhciBBUlJPV19MRUZUX0tFWSA9IGV4cG9ydHMuQVJST1dfTEVGVF9LRVkgPSAzNztcbnZhciBBUlJPV19SSUdIVF9LRVkgPSBleHBvcnRzLkFSUk9XX1JJR0hUX0tFWSA9IDM5O1xuXG52YXIgU1BFQ0lBTF9LRVlTID0gZXhwb3J0cy5TUEVDSUFMX0tFWVMgPSBbRU5URVJfS0VZLCBFU0NBUEVfS0VZLCBBUlJPV19ET1dOX0tFWSwgQVJST1dfVVBfS0VZLCBBUlJPV19MRUZUX0tFWSwgQVJST1dfUklHSFRfS0VZXTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9jb25zdGFudHMuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuL2RvbVV0aWxzJyk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBjeCA9IGZ1bmN0aW9uIGN4KCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgY2xhc3NuYW1lcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGNsYXNzbmFtZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gY2xhc3NuYW1lcy5qb2luKCcgJykudHJpbSgpO1xufTtcblxudmFyIFJlc3VsdExpc3QgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFJlc3VsdExpc3QoKSB7XG4gICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICBfcmVmJGhhbmRsZUNsaWNrID0gX3JlZi5oYW5kbGVDbGljayxcbiAgICAgICAgaGFuZGxlQ2xpY2sgPSBfcmVmJGhhbmRsZUNsaWNrID09PSB1bmRlZmluZWQgPyBmdW5jdGlvbiAoKSB7fSA6IF9yZWYkaGFuZGxlQ2xpY2ssXG4gICAgICAgIF9yZWYkY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcbiAgICAgICAgY2xhc3NOYW1lcyA9IF9yZWYkY2xhc3NOYW1lcyA9PT0gdW5kZWZpbmVkID8ge30gOiBfcmVmJGNsYXNzTmFtZXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVzdWx0TGlzdCk7XG5cbiAgICBfaW5pdGlhbGlzZVByb3BzLmNhbGwodGhpcyk7XG5cbiAgICB0aGlzLnByb3BzID0geyBoYW5kbGVDbGljazogaGFuZGxlQ2xpY2ssIGNsYXNzTmFtZXM6IGNsYXNzTmFtZXMgfTtcbiAgICB0aGlzLnNlbGVjdGVkID0gLTE7XG5cbiAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgY3goJ3Jlc3VsdHMnLCBjbGFzc05hbWVzLmNvbnRhaW5lcikpO1xuICAgIHZhciByZXN1bHRJdGVtID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgY3goY2xhc3NOYW1lcy5pdGVtKSk7XG5cbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2ssIHRydWUpO1xuICAgIHRoaXMuZWxlbWVudHMgPSB7IGNvbnRhaW5lcjogY29udGFpbmVyLCByZXN1bHRJdGVtOiByZXN1bHRJdGVtIH07XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUmVzdWx0TGlzdCwgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgcmVzdWx0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107XG4gICAgICB2YXIgX2VsZW1lbnRzID0gdGhpcy5lbGVtZW50cyxcbiAgICAgICAgICBjb250YWluZXIgPSBfZWxlbWVudHMuY29udGFpbmVyLFxuICAgICAgICAgIHJlc3VsdEl0ZW0gPSBfZWxlbWVudHMucmVzdWx0SXRlbTtcblxuICAgICAgdGhpcy5jbGVhcigpO1xuXG4gICAgICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKHJlc3VsdCwgaWR4KSB7XG4gICAgICAgIHZhciBjaGlsZCA9IHJlc3VsdEl0ZW0uY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoJ2RhdGEta2V5JywgaWR4KTtcbiAgICAgICAgY2hpbGQuaW5uZXJIVE1MID0gcmVzdWx0LmxhYmVsO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJlc3VsdHMgPSByZXN1bHRzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NlbGVjdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdChpbmRleCkge1xuICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZnVzaW5nLWFycm93XG5cbiAgICAgIEFycmF5LmZyb20oY29udGFpbmVyLmNoaWxkcmVuKS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCwgaWR4KSB7XG4gICAgICAgIHJldHVybiBpZHggPT09IGluZGV4ID8gKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJykgOiAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY2hpbGQsICdhY3RpdmUnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnNlbGVjdGVkID0gaW5kZXg7XG4gICAgICByZXR1cm4gdGhpcy5yZXN1bHRzW2luZGV4XTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvdW50KCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVzdWx0cy5sZW5ndGg7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY2xlYXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuICAgICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXG4gICAgICB3aGlsZSAoY29udGFpbmVyLmxhc3RDaGlsZCkge1xuICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmxhc3RDaGlsZCk7XG4gICAgICB9XG5cbiAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUmVzdWx0TGlzdDtcbn0oKTtcblxudmFyIF9pbml0aWFsaXNlUHJvcHMgPSBmdW5jdGlvbiBfaW5pdGlhbGlzZVByb3BzKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHRoaXMub25DbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3JlZjIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICB0YXJnZXQgPSBfcmVmMi50YXJnZXQ7XG5cbiAgICB2YXIgaGFuZGxlQ2xpY2sgPSBfdGhpcy5wcm9wcy5oYW5kbGVDbGljaztcbiAgICB2YXIgY29udGFpbmVyID0gX3RoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXG5cbiAgICBpZiAodGFyZ2V0LnBhcmVudE5vZGUgIT09IGNvbnRhaW5lciB8fCAhdGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1rZXknKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBpZHggPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWtleScpO1xuICAgIHZhciByZXN1bHQgPSBfdGhpcy5yZXN1bHRzW2lkeF07XG4gICAgaGFuZGxlQ2xpY2soeyByZXN1bHQ6IHJlc3VsdCB9KTtcbiAgfTtcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFJlc3VsdExpc3Q7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcmVzdWx0TGlzdC5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9ub2RlbnRSdW50aW1lID0gcmVxdWlyZSgnbm9kZW50LXJ1bnRpbWUnKTtcblxudmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3Byb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcicpO1xuXG52YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblxudmFyIF9kb21VdGlscyA9IHJlcXVpcmUoJy4uL2RvbVV0aWxzJyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcbiAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblxuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZW5kcG9pbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG4gICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sLFxuICAgICAgICAgIGpzb25wID0gX3JlZi5qc29ucDtcblxuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cblxuICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG4gICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAganNvbnA6IGpzb25wXG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiBwcm90b2NvbCArICcvL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvTG9jYXRpb25zPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIGlmIChkYXRhLnJlc291cmNlU2V0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YS5yZXNvdXJjZVNldHNbMF0ucmVzb3VyY2VzLm1hcChmdW5jdGlvbiAocikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IHIucG9pbnQuY29vcmRpbmF0ZXNbMV0sXG4gICAgICAgICAgeTogci5wb2ludC5jb29yZGluYXRlc1swXSxcbiAgICAgICAgICBsYWJlbDogci5hZGRyZXNzLmZvcm1hdHRlZEFkZHJlc3MsXG4gICAgICAgICAgYm91bmRzOiBbW3IuYmJveFswXSwgci5iYm94WzFdXSwgLy8gcywgd1xuICAgICAgICAgIFtyLmJib3hbMl0sIHIuYmJveFszXV1dLFxuICAgICAgICAgIHJhdzogclxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2VhcmNoJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKF9yZWYzKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgICB2YXIgcXVlcnksIHByb3RvY29sLCBqc29ucCwgdXJsLCBqc29uO1xuICAgICAgICBxdWVyeSA9IF9yZWYzLnF1ZXJ5O1xuXG4gICAgICAgIHByb3RvY29sID0gfmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoJ2h0dHAnKSA/IGxvY2F0aW9uLnByb3RvY29sIDogJ2h0dHBzOic7XG5cbiAgICAgICAganNvbnAgPSAnQklOR19KU09OUF9DQl8nICsgRGF0ZS5ub3coKTtcbiAgICAgICAgdXJsID0gdGhpcy5lbmRwb2ludCh7IHF1ZXJ5OiBxdWVyeSwgcHJvdG9jb2w6IHByb3RvY29sLCBqc29ucDoganNvbnAgfSk7XG5cbiAgICAgICAgcmV0dXJuICgwLCBfZG9tVXRpbHMuY3JlYXRlU2NyaXB0RWxlbWVudCkodXJsLCBqc29ucCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcbiAgICAgICAgICBqc29uID0gJGF3YWl0XzE7XG4gICAgICAgICAgcmV0dXJuICRyZXR1cm4odGhpcy5wYXJzZSh7IGRhdGE6IGpzb24gfSkpO1xuICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvYmluZ1Byb3ZpZGVyLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX25vZGVudFJ1bnRpbWUgPSByZXF1aXJlKCdub2RlbnQtcnVudGltZScpO1xuXG52YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZ2V0UGFyYW1TdHJpbmcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQYXJhbVN0cmluZyhwYXJhbXMpIHtcbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhwYXJhbXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbXNba2V5XSk7XG4gICAgICB9KS5qb2luKCcmJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2VhcmNoJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKF9yZWYpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG4gICAgICAgIHZhciBxdWVyeSwgcHJvdG9jb2wsIHVybCwgcmVxdWVzdCwganNvbjtcbiAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5O1xuXG4gICAgICAgIHByb3RvY29sID0gfmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoJ2h0dHAnKSA/IGxvY2F0aW9uLnByb3RvY29sIDogJ2h0dHBzOic7XG4gICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCB9KTtcblxuICAgICAgICByZXR1cm4gZmV0Y2godXJsKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuICAgICAgICAgIHJlcXVlc3QgPSAkYXdhaXRfMTtcbiAgICAgICAgICByZXR1cm4gcmVxdWVzdC5qc29uKCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzIpIHtcbiAgICAgICAgICAgIGpzb24gPSAkYXdhaXRfMjtcbiAgICAgICAgICAgIHJldHVybiAkcmV0dXJuKHRoaXMucGFyc2UoeyBkYXRhOiBqc29uIH0pKTtcbiAgICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm92aWRlcjtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL3Byb3ZpZGVyLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3Byb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcicpO1xuXG52YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXG4gIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcbiAgICBrZXk6ICdlbmRwb2ludCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcbiAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXG5cbiAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuICAgICAgICBmOiAnanNvbicsXG4gICAgICAgIHRleHQ6IHF1ZXJ5XG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiBwcm90b2NvbCArICcvL2dlb2NvZGUuYXJjZ2lzLmNvbS9hcmNnaXMvcmVzdC9zZXJ2aWNlcy9Xb3JsZC9HZW9jb2RlU2VydmVyL2ZpbmQ/JyArIHBhcmFtU3RyaW5nO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3BhcnNlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcbiAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblxuICAgICAgcmV0dXJuIGRhdGEubG9jYXRpb25zLm1hcChmdW5jdGlvbiAocikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IHIuZmVhdHVyZS5nZW9tZXRyeS54LFxuICAgICAgICAgIHk6IHIuZmVhdHVyZS5nZW9tZXRyeS55LFxuICAgICAgICAgIGxhYmVsOiByLm5hbWUsXG4gICAgICAgICAgYm91bmRzOiBbW3IuZXh0ZW50LnltaW4sIHIuZXh0ZW50LnhtaW5dLCAvLyBzLCB3XG4gICAgICAgICAgW3IuZXh0ZW50LnltYXgsIHIuZXh0ZW50LnhtYXhdXSxcbiAgICAgICAgICByYXc6IHJcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm92aWRlcjtcbn0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2VzcmlQcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcbiAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblxuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZW5kcG9pbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG4gICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblxuXG4gICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcbiAgICAgICAgYWRkcmVzczogcXVlcnlcbiAgICAgIH0pKTtcblxuICAgICAgLy8gZ29vZ2xlIHJlcXVpcmVzIGEgc2VjdXJlIGNvbm5lY3Rpb24gd2hlbiB1c2luZyBhcGkga2V5c1xuICAgICAgdmFyIHByb3RvID0gcGFyYW1zICYmIHBhcmFtcy5rZXkgPyAnaHR0cHM6JyA6IHByb3RvY29sO1xuICAgICAgcmV0dXJuIHByb3RvICsgJy8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24/JyArIHBhcmFtU3RyaW5nO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3BhcnNlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcbiAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblxuICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cy5tYXAoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiByLmdlb21ldHJ5LmxvY2F0aW9uLmxuZyxcbiAgICAgICAgICB5OiByLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCxcbiAgICAgICAgICBsYWJlbDogci5mb3JtYXR0ZWRfYWRkcmVzcyxcbiAgICAgICAgICBib3VuZHM6IFtbci5nZW9tZXRyeS52aWV3cG9ydC5zb3V0aHdlc3QubGF0LCByLmdlb21ldHJ5LnZpZXdwb3J0LnNvdXRod2VzdC5sbmddLCAvLyBzLCB3XG4gICAgICAgICAgW3IuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0LmxhdCwgci5nZW9tZXRyeS52aWV3cG9ydC5ub3J0aGVhc3QubG5nXV0sXG4gICAgICAgICAgcmF3OiByXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9nb29nbGVQcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcbiAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblxuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZW5kcG9pbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG4gICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblxuXG4gICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcbiAgICAgICAgZm9ybWF0OiAnanNvbicsXG4gICAgICAgIHE6IHF1ZXJ5XG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiBwcm90b2NvbCArICcvL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2g/JyArIHBhcmFtU3RyaW5nO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3BhcnNlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcbiAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblxuICAgICAgcmV0dXJuIGRhdGEubWFwKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgeDogci5sb24sXG4gICAgICAgICAgeTogci5sYXQsXG4gICAgICAgICAgbGFiZWw6IHIuZGlzcGxheV9uYW1lLFxuICAgICAgICAgIGJvdW5kczogW1twYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMF0pLCBwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMl0pXSwgLy8gcywgd1xuICAgICAgICAgIFtwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMV0pLCBwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbM10pXV0sXG4gICAgICAgICAgcmF3OiByXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9vcGVuU3RyZWV0TWFwUHJvdmlkZXIuanMiLCJpbXBvcnQge3RvZ2dsZUxheWVyfSBmcm9tIFwiLi9sYXllclwiO1xyXG5pbXBvcnQge21ha2VPcGFjaXR5U2xpZGVyfSBmcm9tIFwiLi9vcGFjaXR5U2xpZGVyXCJcclxuaW1wb3J0IHtzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb259IGZyb20gXCIuL29wYWNpdHlTbGlkZXJcIlxyXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tIFwiLi9zaGFyZVwiO1xyXG5cclxudmFyIGxheWVyR3JvdXBMYXlvdXQgPSBbXVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdldEFjdGl2ZUxheWVyR3JvdXBzICgpIHtcclxuICAgIHJldHVybiBsYXllckdyb3VwTGF5b3V0LmZpbHRlcihsYXllckdyb3VwID0+IHtcclxuICAgICAgICByZXR1cm4gbGF5ZXJHcm91cC5hY3RpdmVcclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBTZXR1cFBhbmVsIChsYXllcnMsIGxheW91dCkge1xyXG4gICAgbGF5ZXJHcm91cExheW91dCA9IGxheW91dFsnbGF5ZXItZ3JvdXBzLW9yZGVyJ11cclxuICAgIHZhciBsYXllckdyb3VwcyA9IG1ha2VMYXllckdyb3VwcyhsYXlvdXRbJ2xheWVyLWdyb3Vwcy1vcmRlciddKTtcclxuICAgIG1ha2VMYXllckVsZW1zKGxheWVyR3JvdXBzLCBsYXllcnMpO1xyXG4gICAgbWFrZVBhbmVsRHJhZ2dhYmxlKClcclxuICAgIHNldFBhbmVsU2Nyb2xsSGFuZGxlcigpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJyb3dzZXJJc0ludGVybmV0RXhwbG9yZXIoKSB7XHJcbiAgICB2YXIgdWEgPSB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudFxyXG4gICAgcmV0dXJuIHVhLmluZGV4T2YoJ01TSUUnKSA+IC0xIHx8IHVhLmluZGV4T2YoJ3J2OjExLjAnKSA+IC0xXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldFBhbmVsU2Nyb2xsSGFuZGxlcigpIHtcclxuICAgIHZhciBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpXHJcbiAgICBwYW5lbC5vbnNjcm9sbCA9IHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHRcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZVBhbmVsRHJhZ2dhYmxlKCkge1xyXG4gICAgaWYgKGJyb3dzZXJJc0ludGVybmV0RXhwbG9yZXIoKSkgcmV0dXJuXHJcblxyXG4gICAgdmFyIG92ZXJsYXkgPSBkMy5zZWxlY3QoJyNyaWdodC1wYW5lbC1kcmFnLW92ZXJsYXknKVxyXG5cclxuICAgIG92ZXJsYXkuc3R5bGUoJ2N1cnNvcicsICdldy1yZXNpemUnKVxyXG5cclxuICAgIG92ZXJsYXkuY2FsbChkMy5kcmFnKClcclxuICAgICAgICAub24oJ2RyYWcnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcGFuZWxEcmFnRXZlbnRIYW5kbGVyLmNhbGwodGhpcylcclxuICAgIH0pKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFuZWxEcmFnRXZlbnRIYW5kbGVyKCkge1xyXG4gICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpXHJcbiAgICB1cGRhdGVQYW5lbFdpZHRoKClcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQgKCkge1xyXG4gICAgdmFyIHBhbmVsID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwnKVxyXG4gICAgdmFyIHBhbmVsT2Zmc2V0SGVpZ2h0ID0gcGFuZWwucHJvcGVydHkoJ29mZnNldEhlaWdodCcpXHJcbiAgICB2YXIgcGFuZWxEcmFnT3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbC1kcmFnLW92ZXJsYXknKVxyXG4gICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbC1oZWFkZXInKVxyXG5cclxuICAgIHZhciBuZXdIZWlnaHRcclxuXHJcbiAgICBpZiAocGFuZWwuY2xhc3NlZCgnZ3JhcGhzLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgdmFyIGdyYXBoTGlzdEV4dHJhU3BhY2UgPSA3MDBcclxuICAgICAgICB2YXIgZ3JhcGhMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyYXBoLWxpc3QnKVxyXG4gICAgICAgIG5ld0hlaWdodCA9IGhlYWRlci5zY3JvbGxIZWlnaHQgKyBncmFwaExpc3Quc2Nyb2xsSGVpZ2h0ICsgZ3JhcGhMaXN0RXh0cmFTcGFjZVxyXG4gICAgfVxyXG4gICAgZWxzZSB7IC8vIHBhbmVsLmNsYXNzZWQoJ2xheWVycy1hY3RpdmUnKVxyXG4gICAgICAgIHZhciBsYXllckxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGF5ZXItbGlzdCcpXHJcbiAgICAgICAgbmV3SGVpZ2h0ID0gaGVhZGVyLnNjcm9sbEhlaWdodCArIGxheWVyTGlzdC5zY3JvbGxIZWlnaHRcclxuICAgIH1cclxuICAgIG5ld0hlaWdodCA9IG5ld0hlaWdodCA+IHBhbmVsT2Zmc2V0SGVpZ2h0ID8gYCR7bmV3SGVpZ2h0fWArJ3B4JyA6IG51bGxcclxuICAgIHBhbmVsRHJhZ092ZXJsYXkuc3R5bGUuaGVpZ2h0ID0gbmV3SGVpZ2h0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVBhbmVsV2lkdGgoKSB7XHJcbiAgICB2YXIgcGFuZWwgPSBkMy5zZWxlY3QoJyNyaWdodC1wYW5lbCcpXHJcbiAgICB2YXIgcGFuZWxNaW5XaWR0aCA9ICtwYW5lbC5zdHlsZSgnbWluLXdpZHRoJykuc2xpY2UoMCwgLTIpXHJcbiAgICB2YXIgcGFuZWxDbGllbnRXaWR0aCA9IHBhbmVsLnByb3BlcnR5KCdjbGllbnRXaWR0aCcpXHJcblxyXG4gICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd3JhcHBlcicpXHJcbiAgICB2YXIgd3JhcHBlcldpZHRoID0gd3JhcHBlci5jbGllbnRXaWR0aFxyXG5cclxuICAgIHZhciBtYXBXcmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcC13cmFwcGVyJylcclxuXHJcbiAgICB2YXIgbW91c2VYID0gZDMuZXZlbnQuc291cmNlRXZlbnQueFxyXG4gICAgdmFyIHhEZWx0YSA9ICh3cmFwcGVyV2lkdGggLSBtb3VzZVgpIC0gcGFuZWxDbGllbnRXaWR0aFxyXG5cclxuICAgIHZhciBuZXdQYW5lbFdpZHRoID0gcGFuZWxDbGllbnRXaWR0aCArIHhEZWx0YVxyXG4gICAgbmV3UGFuZWxXaWR0aCA9IG5ld1BhbmVsV2lkdGggPCBwYW5lbE1pbldpZHRoID9cclxuICAgICAgICBwYW5lbE1pbldpZHRoXHJcbiAgICA6ICAgbmV3UGFuZWxXaWR0aCA+IHdyYXBwZXJXaWR0aCA/XHJcbiAgICAgICAgd3JhcHBlcldpZHRoXHJcbiAgICA6ICAgbmV3UGFuZWxXaWR0aFxyXG4gICAgbWFwV3JhcHBlci5zdHlsZS5wYWRkaW5nUmlnaHQgPSBgJHtuZXdQYW5lbFdpZHRofWArJ3B4J1xyXG4gICAgcGFuZWwuc3R5bGUoJ3dpZHRoJywgYCR7bmV3UGFuZWxXaWR0aH1gKydweCcpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VMYXllckdyb3VwcyAobGF5b3V0KSB7XHJcbiAgICByZXR1cm4gZDMuc2VsZWN0KCcjbGF5ZXItbGlzdCcpXHJcbiAgICAgICAgLnNlbGVjdEFsbCgnLmxheWVyLWdyb3VwLXdyYXBwZXInKVxyXG4gICAgICAgIC5kYXRhKGxheW91dClcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAtd3JhcHBlcicpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIGxheWVyR3JvdXAgPT4gbGF5ZXJHcm91cC5pZClcclxuICAgICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGxheWVyR3JvdXAgPT4gbGF5ZXJHcm91cC5hY3RpdmUpXHJcbiAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cC1idG4gYnRuJylcclxuICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvZ2dsZSB0aGUgbGF5ZXIgbGlzdCBhY2NvcmRpYW5zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdsYXllciBsaXN0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ3RvZ2dsZSAnICsgIWxheWVyR3JvdXAuYWN0aXZlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6IGxheWVyR3JvdXAubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllckdyb3VwLmFjdGl2ZSA9ICFsYXllckdyb3VwLmFjdGl2ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMucGFyZW50Tm9kZSkuY2xhc3NlZCgnYWN0aXZlJywgKCkgPT4gbGF5ZXJHcm91cC5hY3RpdmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KClcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlU2hhcmVVcmwoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHQobGF5ZXJHcm91cC5uYW1lKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cCcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTGF5ZXJFbGVtcyAobGF5ZXJHcm91cHMsIGxheWVycykge1xyXG4gICAgbGF5ZXJHcm91cHMuc2VsZWN0QWxsKCcubGF5ZXItc2VsZWN0JylcclxuICAgICAgICAuZGF0YShsYXllckdyb3VwID0+IGxheWVyc1tsYXllckdyb3VwLmlkXSlcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoJ2RpdicpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLXNlbGVjdCcpXHJcbiAgICAgICAgLmVhY2goZnVuY3Rpb24gKGxheWVyKSB7XHJcbiAgICAgICAgICAgIHZhciBncm91cE5hbWUgPSB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZDtcclxuICAgICAgICAgICAgdmFyIGxheWVyRGl2ID0gZDMuc2VsZWN0KHRoaXMpXHJcbiAgICAgICAgICAgIG1ha2VDaGVja2JveChsYXllciwgbGF5ZXJEaXYpO1xyXG4gICAgICAgICAgICBtYWtlTGFiZWwobGF5ZXIsIGxheWVyRGl2KTtcclxuICAgICAgICAgICAgbWFrZURlc2NyaXB0aW9uKGxheWVyLCBsYXllckRpdik7XHJcbiAgICAgICAgICAgIGxheWVyRGl2Lm5vZGUoKS5hcHBlbmRDaGlsZChtYWtlTGF5ZXJUb29scyhsYXllcikpO1xyXG4gICAgICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlQ2hlY2tib3ggKGxheWVyLCBsYXllckRpdikge1xyXG4gICAgbGF5ZXJEaXYuYXBwZW5kKCdpbnB1dCcpXHJcbiAgICAgICAgLmF0dHIoJ3R5cGUnLCAnY2hlY2tib3gnKVxyXG4gICAgICAgIC5hdHRyKCdpZCcsIGxheWVyID0+IGxheWVyLmlkKVxyXG4gICAgICAgIC5hdHRyKCdjaGVja2VkJywgKGxheWVyKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBsYXllci5hY3RpdmUgPyAnY2hlY2tlZCcgOiBudWxsO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uKGxheWVyKSB7XHJcbiAgICAgICAgICAgIHRvZ2dsZUxheWVyKGxheWVyKTtcclxuICAgICAgICAgICAgbGF5ZXJEaXYuc2VsZWN0KCcubGF5ZXItdG9vbHMtd3JhcHBlcicpXHJcbiAgICAgICAgICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJywgbGF5ZXIuYWN0aXZlKTtcclxuICAgICAgICAgICAgaWYgKGxheWVyLmFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlckhhbmRsZSA9IGxheWVyRGl2LnNlbGVjdCgnLm9wYWNpdHktc2xpZGVyLWhhbmRsZScpLm5vZGUoKVxyXG4gICAgICAgICAgICAgICAgc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uKGxheWVyLCBzbGlkZXJIYW5kbGUsIGxheWVyLm9wYWNpdGl5KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VMYWJlbChsYXllciwgbGF5ZXJEaXYpIHtcclxuICAgIGxheWVyRGl2XHJcbiAgICAgICAgLmFwcGVuZCgnZGl2JylcclxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWxhYmVsLXdyYXBwZXInKVxyXG4gICAgICAgIC5hcHBlbmQoJ2xhYmVsJylcclxuICAgICAgICAgICAgLmF0dHIoJ2ZvcicsIGxheWVyID0+IGxheWVyLmlkKVxyXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItbGFiZWwnKVxyXG4gICAgICAgICAgICAuaHRtbChsYXllciA9PiBsYXllci5uYW1lKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZURlc2NyaXB0aW9uIChsYXllciwgbGF5ZXJEaXYpIHtcclxuICAgIGlmIChsYXllci5pbmZvICYmIGxheWVyLmluZm8gIT09ICcnKSB7XHJcbiAgICAgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby1idG4td3JhcHBlcicpXHJcbiAgICAgICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoJy5sYXllci1pbmZvLXdyYXBwZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgY2xpY2sgb24gbGF5ZXIgaW5mb1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbGF5ZXIgaW5mbycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGlja2VkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudExhYmVsOiBsYXllci5uYW1lICsgXCIgXCIgKyAhZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ2FjdGl2ZScpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdpbWcnKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8taWNvbicpXHJcbiAgICAgICAgICAgICAgICAuYXR0cignc3JjJywgJ2ltZ3MvbW9yZS1pbmZvLWljb24tNjR4NjQucG5nJylcclxuICAgICAgICAgICAgICAgIC5hdHRyKFwiYWx0XCIsIFwiUmVhZCBtb3JlIGFib3V0IHRoZSBcIiArIGxheWVyLm5hbWUgKyBcIiBsYXllclwiKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJ0aXRsZVwiLCBcIlJlYWQgbW9yZSBhYm91dCB0aGUgXCIgKyBsYXllci5uYW1lICsgXCIgbGF5ZXJcIilcclxuXHJcbiAgICAgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby13cmFwcGVyJylcclxuICAgICAgICAgICAgLnRleHQobGF5ZXIgPT4gbGF5ZXIuaW5mbyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VMYXllclRvb2xzKGxheWVyLCBsYXllckRpdikge1xyXG4gICAgdmFyIGxheWVyVG9vbHNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgbGF5ZXJUb29sc0Rpdi5jbGFzc0xpc3QuYWRkKCdsYXllci10b29scy13cmFwcGVyJylcclxuICAgIGlmIChsYXllci5hY3RpdmUpIGxheWVyVG9vbHNEaXYuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuXHJcbiAgICB2YXIgb3BhY2l0eVNsaWRlciA9IG1ha2VPcGFjaXR5U2xpZGVyKGxheWVyKTtcclxuICAgIHZhciBsZWdlbmQgPSBtYWtlTGVnZW5kKGxheWVyKTtcclxuXHJcbiAgICBsYXllclRvb2xzRGl2LmFwcGVuZENoaWxkKGxlZ2VuZClcclxuICAgIGxheWVyVG9vbHNEaXYuYXBwZW5kQ2hpbGQob3BhY2l0eVNsaWRlcilcclxuXHJcbiAgICByZXR1cm4gbGF5ZXJUb29sc0RpdlxyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTGVnZW5kIChsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIpIHtcclxuICAgIHZhciBsZWdlbmRXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgIHZhciBsZWdlbmRJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxyXG4gICAgbGVnZW5kV3JhcHBlci5jbGFzc0xpc3QuYWRkKCdsZWdlbmQtd3JhcHBlcicpXHJcbiAgICBsZWdlbmRJbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBsYXllci5sZWdlbmQpXHJcbiAgICBsZWdlbmRXcmFwcGVyLmFwcGVuZENoaWxkKGxlZ2VuZEltZylcclxuICAgIHJldHVybiBsZWdlbmRXcmFwcGVyXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvcGFuZWwuanMiLCJpbXBvcnQge0dldE1hcH0gZnJvbSBcIi4vbWFwXCI7XHJcbmltcG9ydCB7dXBkYXRlU2hhcmVVcmx9IGZyb20gXCIuL3NoYXJlXCI7XHJcblxyXG4vKipcclxuICogTmVlZGVkIGZvciB0aGUgc2hhcmUgdXJsIHNpbmNlIExlYWZsZXQgZG9lcyBub3QgaGF2ZSBhIGRlZmF1bHQgd2F5IHRvIHN1cmZhY2VcclxuICogdGhlIG9yZGVyIG9mIGxheWVycyBpbiB0aGUgbWFwXHJcbiAqL1xyXG52YXIgX2N1cnJlbnRfbGF5ZXJzID0gW107XHJcbnZhciBfY3VycmVudF9sYXllcnNfb2JqZWN0cyA9IFtdO1xyXG5cclxuLyoqXHJcbiAqIE5vdGU6IGxheWVyIGlzIG5vdCB0aGUgbGVhZmxldCBjb25jZXB0IG9mIGEgbGF5ZXIsIGJ1dCByYXRoZXIgdGhlIGludGVybmFsXHJcbiAqICAgICAgIG9iamVjdCB3aGljaCB0cmFja3MgdGhlbS4gbGF5ZXIubWFwTGF5ZXIgaXMgdGhlIHBvaW50ZXIgdG8gdGhlXHJcbiAqICAgICAgIGxlYWZsZXQgbGF5ZXIuXHJcbiAqL1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdldEN1cnJlbnRMYXllcnMgKCkge1xyXG4gICAgcmV0dXJuIF9jdXJyZW50X2xheWVycztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIENyZWF0ZURlZmF1bHRMYXllcnMgKGxheWVycywgZGVmYXVsdExheWVycykge1xyXG4gICAgdmFyIGksIGosIHByb3AsIGxheWVyZ3JvdXA7XHJcbiAgICB2YXIgZGVmYXVsdExheWVyO1xyXG4gICAgdmFyIGZvdW5kTGF5ZXI7XHJcblxyXG4gICAgaWYgKCFkZWZhdWx0TGF5ZXJzIHx8IGRlZmF1bHRMYXllcnMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IGRlZmF1bHRMYXllcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBmb3VuZExheWVyID0gZmFsc2U7XHJcbiAgICAgICAgZGVmYXVsdExheWVyID0gZGVmYXVsdExheWVyc1tpXTtcclxuICAgICAgICBmb3IgKHByb3AgaW4gbGF5ZXJzKSB7XHJcbiAgICAgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XHJcbiAgICAgICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XHJcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsYXllcmdyb3VwLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZGVmYXVsdExheWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlTGF5ZXIobGF5ZXJncm91cFtqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRMYXllciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUxheWVyIChsYXllcikge1xyXG4gICAgaWYgKCFsYXllci5hY3RpdmUpIHtcclxuICAgICAgICBlbmFibGVMYXllcihsYXllcik7XHJcblxyXG4gICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvZ2dsZSB0aGUgbGF5ZXIgb25cclxuICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdsYXllcicsXHJcbiAgICAgICAgICBldmVudEFjdGlvbjogJ3RvZ2dsZSBvbicsXHJcbiAgICAgICAgICBldmVudExhYmVsOiBsYXllci5uYW1lLFxyXG4gICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBkaXNhYmxlTGF5ZXIobGF5ZXIpO1xyXG5cclxuICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyB0b2dnbGUgdGhlIGxheWVyIG9mZlxyXG4gICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xyXG4gICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2xheWVyJyxcclxuICAgICAgICAgIGV2ZW50QWN0aW9uOiAndG9nZ2xlIG9mZicsXHJcbiAgICAgICAgICBldmVudExhYmVsOiBsYXllci5uYW1lLFxyXG4gICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlTGF5ZXIgKGxheWVyKSB7XHJcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XHJcblxyXG4gICAgbGF5ZXIuYWN0aXZlID0gdHJ1ZTtcclxuICAgIGxheWVyLm1hcExheWVyID0gbGF5ZXIubWFwTGF5ZXIgfHwgbWFrZVdtc1RpbGVMYXllcihsYXllcik7XHJcbiAgICBtYXAuYWRkTGF5ZXIobGF5ZXIubWFwTGF5ZXIpO1xyXG4gICAgYWRkTGF5ZXJUb0ludGVybmFsVHJhY2tlcihsYXllcik7XHJcbiAgICBtb3ZlT3ZlcmxheUxheWVyc1RvVG9wKCk7XHJcbiAgICB1cGRhdGVTaGFyZVVybCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtb3ZlT3ZlcmxheUxheWVyc1RvVG9wICgpIHtcclxuICAgIHZhciBsYXllcjtcclxuICAgIHZhciBpLCBsO1xyXG5cclxuICAgIGZvciAoaSA9IDAsIGwgPSBfY3VycmVudF9sYXllcnNfb2JqZWN0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBsYXllciA9IF9jdXJyZW50X2xheWVyc19vYmplY3RzW2ldO1xyXG4gICAgICAgIGlmIChsYXllci50eXBlID09PSBcIm92ZXJsYXlcIikgbGF5ZXIubWFwTGF5ZXIuYnJpbmdUb0Zyb250KCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIgKGxheWVyKSB7XHJcbiAgICBfY3VycmVudF9sYXllcnMucHVzaChsYXllci5pZCk7XHJcbiAgICBfY3VycmVudF9sYXllcnNfb2JqZWN0cy5wdXNoKGxheWVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVMYXllciAobGF5ZXIpIHtcclxuICAgIHZhciBtYXAgPSBHZXRNYXAoKTtcclxuXHJcbiAgICBsYXllci5hY3RpdmUgPSBmYWxzZTtcclxuICAgIGlmIChsYXllci5tYXBMYXllciAmJiBtYXAuaGFzTGF5ZXIobGF5ZXIubWFwTGF5ZXIpKSB7XHJcbiAgICAgICAgbWFwLnJlbW92ZUxheWVyKGxheWVyLm1hcExheWVyKTtcclxuICAgIH1cclxuICAgIHJlbW92ZUxheWVyRnJvbUludGVybmFsVHJhY2tlcihsYXllcik7XHJcbiAgICB1cGRhdGVTaGFyZVVybCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIgKGxheWVyKSB7XHJcbiAgICB2YXIgbG9jID0gX2N1cnJlbnRfbGF5ZXJzLmluZGV4T2YobGF5ZXIuaWQpO1xyXG4gICAgaWYgKGxvYyA9PT0gLTEpIHJldHVybjtcclxuICAgIF9jdXJyZW50X2xheWVycy5zcGxpY2UobG9jLCAxKTtcclxuICAgIF9jdXJyZW50X2xheWVyc19vYmplY3RzLnNwbGljZShsb2MsIDEpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlTGF5ZXJPcGFjaXR5IChsYXllciwgbmV3T3BhY2l0eSkge1xyXG4gICAgbGF5ZXIub3BhY2l0eSA9IG5ld09wYWNpdHlcclxuICAgIGxheWVyLm1hcExheWVyLnNldE9wYWNpdHkobmV3T3BhY2l0eSlcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZVdtc1RpbGVMYXllciAobGF5ZXIpIHtcclxuICAgIHJldHVybiBMLnRpbGVMYXllci53bXMobGF5ZXIudXJsLCB7XHJcbiAgICAgICAgbGF5ZXJzOiBsYXllci5pZCxcclxuICAgICAgICB0cmFuc3BhcmVudDogbGF5ZXIudHJhbnNwYXJlbnQgfHwgdHJ1ZSxcclxuICAgICAgICB2ZXJzaW9uOiBsYXllci52ZXJzaW9uIHx8ICcxLjMuMCcsXHJcbiAgICAgICAgY3JzOiBsYXllci5jcnMgfHwgTC5DUlMuRVBTRzkwMDkxMyxcclxuICAgICAgICBmb3JtYXQ6IGxheWVyLmZvcm1hdCB8fCAnaW1hZ2UvcG5nJyxcclxuICAgICAgICBvcGFjaXR5OiBsYXllci5vcGFjaXR5IHx8IC43NSxcclxuICAgICAgICB0aWxlU2l6ZTogbGF5ZXIudGlsZVNpemUgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXBcIikuY2xpZW50V2lkdGhcclxuICAgIH0pO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2xheWVyLmpzIiwidmFyIG1hcDtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBDcmVhdGVNYXAgKG1hcENvbmZpZykge1xyXG4gICAgY29uc29sZS5sb2cobWFwQ29uZmlnKVxyXG4gICAgdmFyIGlkID0gbWFwQ29uZmlnLmlkIHx8IFwibWFwXCI7XHJcbiAgICB2YXIgb3B0aW9ucyA9IG1hcENvbmZpZy5vcHRpb25zIHx8IHtcInNjcm9sbFdoZWVsWm9vbVwiIDogZmFsc2V9O1xyXG4gICAgdmFyIGluaXRpYWxDZW50ZXIgPSBtYXBDb25maWcuY2VudGVyIHx8IFtcIjM4LjVcIiwgXCItODFcIl07XHJcbiAgICB2YXIgaW5pdGlhbFpvb20gPSBtYXBDb25maWcuem9vbSB8fCA2O1xyXG5cclxuICAgIG1hcCA9IEwubWFwKGlkLCBvcHRpb25zKS5zZXRWaWV3KGluaXRpYWxDZW50ZXIsIGluaXRpYWxab29tKTtcclxuICAgIEwuY29udHJvbC5hdHRyaWJ1dGlvbigpLmFkZFRvKG1hcClcclxuXHJcbiAgICB2YXIgbGVhZmxldFpvb21JbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJsZWFmbGV0LWNvbnRyb2wtem9vbS1pblwiKVswXTtcclxuXHJcbiAgICBsZWFmbGV0Wm9vbUluLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xyXG4gICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3Igc2VhY3JjaCBieSBhZGRyZXNzXHJcbiAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xyXG4gICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxyXG4gICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2sgYnV0dG9uJyxcclxuICAgICAgICBldmVudExhYmVsOiAnem9vbSBpbicsXHJcbiAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXHJcbiAgICAgIH0pO1xyXG4gICAgfSlcclxuXHJcbiAgICB2YXIgbGVhZmxldFpvb21PdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibGVhZmxldC1jb250cm9sLXpvb20tb3V0XCIpWzBdO1xyXG5cclxuICAgIGxlYWZsZXRab29tT3V0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xyXG4gICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3Igc2VhY3JjaCBieSBhZGRyZXNzXHJcbiAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xyXG4gICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxyXG4gICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2sgYnV0dG9uJyxcclxuICAgICAgICBldmVudExhYmVsOiAnem9vbSBvdXQnLFxyXG4gICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICB9KTtcclxuICAgIH0pXHJcblxyXG4gICAgbWFwLm9uKFwiZHJhZ2VuZFwiLCBmdW5jdGlvbihlKXtcclxuICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIGRyYWcgKHBhbikgZW5kXHJcbiAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xyXG4gICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxyXG4gICAgICAgIGV2ZW50QWN0aW9uOiAnZHJhZycsXHJcbiAgICAgICAgZXZlbnRMYWJlbDogSlNPTi5zdHJpbmdpZnkobWFwLmdldEJvdW5kcygpKSxcclxuICAgICAgICBub25JbnRlcmFjdGlvbjogdHJ1ZVxyXG4gICAgICB9KTtcclxuICAgIH0pXHJcblxyXG4gICAgbWFwLm9uKFwiem9vbWVuZFwiLCBmdW5jdGlvbihlKXtcclxuICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIHpvb20gZW5kXHJcbiAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xyXG4gICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxyXG4gICAgICAgIGV2ZW50QWN0aW9uOiAnem9vbScsXHJcbiAgICAgICAgZXZlbnRMYWJlbDogSlNPTi5zdHJpbmdpZnkobWFwLmdldEJvdW5kcygpKSxcclxuICAgICAgICBub25JbnRlcmFjdGlvbjogdHJ1ZVxyXG4gICAgICB9KTtcclxuICAgIH0pXHJcbiAgICByZXR1cm4gbWFwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2V0TWFwICgpIHtcclxuICAgIHJldHVybiBtYXA7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvbWFwLmpzIiwiaW1wb3J0IHtHZXRNYXB9IGZyb20gJy4vbWFwJztcclxuaW1wb3J0IHtCQVNFX0xBWUVSX1RZUEV9IGZyb20gJy4vYmFzZWxheWVyJztcclxuaW1wb3J0IHtHZXRDdXJyZW50TGF5ZXJzfSBmcm9tICcuL2xheWVyJztcclxuaW1wb3J0IHtHZXRBbGxQb2ludHNPZkludGVyZXN0fSBmcm9tICcuL3BvaSc7XHJcbmltcG9ydCB7R2V0QWN0aXZlTGF5ZXJHcm91cHN9IGZyb20gJy4vcGFuZWwnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEJpbmRVcGRhdGVTaGFyZVVybCAobWFwKSB7XHJcbiAgICBtYXAub24oXCJtb3ZlZW5kXCIsIHVwZGF0ZVNoYXJlVXJsKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVNoYXJlVXJsIChlKSB7XHJcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XHJcblxyXG4gICAgdmFyIHBhcmFtcyA9IFtcclxuICAgICAgICBtYWtlQ2VudGVyU3RyaW5nKG1hcCksXHJcbiAgICAgICAgbWFrZVpvb21TdHJpbmcobWFwKSxcclxuICAgICAgICBtYWtlTGF5ZXJTdHJpbmcobWFwKSxcclxuICAgICAgICBtYWtlTGF5ZXJHcm91cHNTdHJpbmcoKSxcclxuICAgICAgICBtYWtlQmFzZUxheWVyU3RyaW5nKG1hcCksXHJcbiAgICAgICAgbWFrZVBvaW50c09mSW50ZXJlc3RTdHJpbmcoKSxcclxuICAgICAgICBtYWtlQWN0aXZlVGFiU3RyaW5nKCksXHJcbiAgICAgICAgbWFrZUFjdGl2ZUdyYXBoVGFiU3RyaW5nKClcclxuICAgIF07XHJcblxyXG4gICAgc2V0U2hhcmVVcmwobWFrZVNoYXJlVXJsKHBhcmFtcykpO1xyXG4gICAgc2V0Q29weUxpbmtVcmwoKTtcclxuICAgIHNldFNvY2lhbFVybHMoKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZyAoY29uZmlnKSB7XHJcbiAgICB2YXIgc2hhcmUgPSBwYXJzZVNoYXJlVXJsKCk7XHJcbiAgICBpZiAoIXNoYXJlKSByZXR1cm47XHJcbiAgICBpZiAoc2hhcmUuY2VudGVyKSBjb25maWcubWFwLmNlbnRlciA9IHNoYXJlLmNlbnRlcjtcclxuICAgIGlmIChzaGFyZS56b29tKSBjb25maWcubWFwLnpvb20gPSBzaGFyZS56b29tO1xyXG4gICAgaWYgKHNoYXJlLmxheWVycykgYWRkTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlLmxheWVycywgY29uZmlnKTtcclxuICAgIGlmIChzaGFyZS5iYXNlbGF5ZXJzKSBhZGRCYXNlTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlLmJhc2VsYXllcnMsIGNvbmZpZyk7XHJcbiAgICBpZiAoc2hhcmUucG9pcykgYWRkUG9pbnRzT2ZJbnRlcmVzdFRvQ29uZmlnKHNoYXJlLnBvaXMsIGNvbmZpZylcclxuICAgIGlmIChzaGFyZS50YWIpIGNvbmZpZy50YWIgPSBzaGFyZS50YWI7XHJcbiAgICBpZiAoc2hhcmUuZ3JhcGgpIGNvbmZpZy5ncmFwaCA9IHNoYXJlLmdyYXBoO1xyXG4gICAgaWYgKHNoYXJlLmxheWVyR3JvdXBzKSBjb25maWcubGF5ZXJHcm91cHMgPSBhZGRMYXllckdyb3VwU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5sYXllckdyb3VwcywgY29uZmlnKVxyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlU2hhcmVVcmwgKHBhcmFtcykge1xyXG4gICAgcmV0dXJuIFwiP1wiICsgcGFyYW1zLmZpbHRlcihmdW5jdGlvbiAocCkgeyByZXR1cm4gcCAhPT0gdW5kZWZpbmVkIH0pLmpvaW4oXCImXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRTaGFyZVVybCAodXJsKSB7XHJcbiAgICBpZiAod2luZG93Lmhpc3RvcnkgJiYgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKSB7XHJcbiAgICAgICAgd2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBcIlwiLCB1cmwpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRDb3B5TGlua1VybCAoKSB7XHJcbiAgICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNoYXJldXJsLWxpbmstdXJsXCIpLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIHVybCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBCaW5kQ29weUxpbmtFdmVudHMgKCkge1xyXG4gICAgZDMuc2VsZWN0KGRvY3VtZW50KS5vbihcImNsaWNrXCIsIGhhbmRsZUJvZHlDbGljayk7XHJcbiAgICBkMy5zZWxlY3QoXCIuc2hhcmV1cmwtbGluayBhXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlU2hhcmVMaW5rQnV0dG9uQ2xpY2spO1xyXG4gICAgZDMuc2VsZWN0KFwiLnNoYXJldXJsLWxpbmstdXJsXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlU2hhcmVMaW5rVXJsQ2xpY2spO1xyXG4gICAgZDMuc2VsZWN0KFwiLnNoYXJldXJsLWxpbmstcG9wdXAtcmVtb3ZlclwiKS5vbihcImNsaWNrXCIsIGhhbmRsZVNoYXJlTGlua0Nsb3NlQnV0dG9uQ2xpY2spO1xyXG59XHJcblxyXG4vKipcclxuICogU2hvdWxkIGNsb3NlIHRoZSBjb3B5IGxpbmsgcG9wdXAgaWYgaXQgaXMgYWN0aXZlIGFuZCBpZiB5b3UgY2xpY2sgb24gYW55IGVsZW1lbnRcclxuICogdGhhdCBpcyBub3QgdGhlIHBvcHVwIG9yIGl0cyBjaGlsZHJlbi5cclxuICovXHJcbmZ1bmN0aW9uIGhhbmRsZUJvZHlDbGljayAoKSB7XHJcbiAgICB2YXIgZXZlbnQgPSBkMy5ldmVudDtcclxuICAgIHZhciBub2RlUGF0aCA9IFtdXHJcbiAgICBub2RlUGF0aCA9IGdldERvbVBhdGgoZXZlbnQudGFyZ2V0KVxyXG5cclxuICAgIHZhciB0b0Nsb3NlUG9wdXAgPSB0cnVlO1xyXG4gICAgdmFyIGksIGw7XHJcblxyXG4gICAgZm9yIChpID0gMCwgbCA9IG5vZGVQYXRoLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmIChub2RlUGF0aFtpXS5jbGFzc0xpc3QuY29udGFpbnMoJ3NoYXJldXJsLWxpbmstcG9wdXAnKSB8fFxyXG4gICAgICAgICAgICAgICAgbm9kZVBhdGhbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaGFyZXVybC1saW5rJykpIHtcclxuICAgICAgICAgICAgdG9DbG9zZVBvcHVwID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodG9DbG9zZVBvcHVwKSB7XHJcbiAgICAgICAgdmFyIHNoYXJlUG9wdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzaGFyZXVybC1saW5rLXBvcHVwJykuaXRlbSgwKVxyXG4gICAgICAgIGhhbmRsZUNvcHlMaW5rQ2xvc2Uoc2hhcmVQb3B1cCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldERvbVBhdGgobm9kZSkge1xyXG4gICAgdmFyIHBhdGggPSBbXVxyXG4gICAgd2hpbGUgKG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlKSB7XHJcbiAgICAgICAgcGF0aC5wdXNoKG5vZGUpXHJcbiAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhdGhcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlU2hhcmVMaW5rQnV0dG9uQ2xpY2sgKCkge1xyXG4gICAgdmFyIHNoYXJlUG9wdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2hhcmV1cmwtbGluay1wb3B1cFwiKS5pdGVtKDApXHJcbiAgICBpZiAoZDMuc2VsZWN0KHNoYXJlUG9wdXApLmNsYXNzZWQoXCJhY3RpdmVcIikpIHtcclxuICAgICAgICBoYW5kbGVDb3B5TGlua0Nsb3NlKHNoYXJlUG9wdXApXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGhhbmRsZUNvcHlMaW5rT3BlbihzaGFyZVBvcHVwKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlU2hhcmVMaW5rQ2xvc2VCdXR0b25DbGljayAoKSB7XHJcbiAgICB2YXIgc2hhcmVQb3B1cCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaGFyZXVybC1saW5rLXBvcHVwXCIpLml0ZW0oMClcclxuICAgIGhhbmRsZUNvcHlMaW5rQ2xvc2Uoc2hhcmVQb3B1cCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVNoYXJlTGlua1VybENsaWNrICgpIHtcclxuICAgIHNlbGVjdENvcHlMaW5rVXJsKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNvcHlMaW5rT3BlbiAoc2hhcmVQb3B1cCkge1xyXG4gICAgc2hhcmVQb3B1cC5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpXHJcbiAgICBzZWxlY3RDb3B5TGlua1VybCgpO1xyXG5cclxuICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGNsaWNrIG9uIHNoYXJlIHVybFxyXG4gICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XHJcbiAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdzaGFyZXVybCcsXHJcbiAgICAgIGV2ZW50QWN0aW9uOiAnb3BlbicsXHJcbiAgICAgIGV2ZW50TGFiZWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hhcmV1cmwtbGluay11cmxcIikuZ2V0QXR0cmlidXRlKFwidmFsdWVcIiksXHJcbiAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgfSk7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDb3B5TGlua0Nsb3NlIChzaGFyZVBvcHVwKSB7XHJcblxyXG4gICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZXZlbnQgY2xpY2sgb24gc2hhcmUgdXJsIGNsb3NlXHJcbiAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgZXZlbnRDYXRlZ29yeTogJ3NoYXJldXJsJyxcclxuICAgICAgZXZlbnRBY3Rpb246ICdjbG9zZScsXHJcbiAgICAgIGV2ZW50TGFiZWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hhcmV1cmwtbGluay11cmxcIikuZ2V0QXR0cmlidXRlKFwidmFsdWVcIiksXHJcbiAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2hhcmVQb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNlbGVjdENvcHlMaW5rVXJsICgpIHtcclxuICAgIHZhciBzaGFyZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKTtcclxuICAgIHNoYXJlSW5wdXQuZm9jdXMoKTtcclxuICAgIHNoYXJlSW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgc2hhcmVJbnB1dC52YWx1ZS5sZW5ndGgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRTb2NpYWxVcmxzICgpIHtcclxuICAgIHZhciB1cmwgPSBtYW5nbGVQYXJhbVN0cmluZyh3aW5kb3cubG9jYXRpb24uaHJlZik7XHJcbiAgICB2YXIgc29jaWFsTGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2hhcmV1cmwtc29jaWFsXCIpO1xyXG4gICAgdmFyIHNvY2lhbExpbms7XHJcbiAgICB2YXIgbmV3VXJsO1xyXG4gICAgdmFyIGksIGw7XHJcblxyXG4gICAgZm9yIChpID0gMCwgbCA9IHNvY2lhbExpbmtzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIHNvY2lhbExpbmsgPSBzb2NpYWxMaW5rc1tpXTtcclxuXHJcbiAgICAgICAgbmV3VXJsID0gc29jaWFsTGluay5nZXRBdHRyaWJ1dGUoXCJkYXRhLWJhc2V1cmxcIikgKyB1cmw7XHJcbiAgICAgICAgc29jaWFsTGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIG5ld1VybCk7XHJcblxyXG4gICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGZvciBzb2NpYWwgdXJsc1xyXG4gICAgICAgIHNvY2lhbExpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ3NoYXJldXJsJyxcclxuICAgICAgICAgICAgZXZlbnRBY3Rpb246IHRoaXMuZ2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiKSxcclxuICAgICAgICAgICAgZXZlbnRMYWJlbDogdGhpcy5ocmVmLFxyXG4gICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VDZW50ZXJTdHJpbmcgKG1hcCkge1xyXG4gICAgdmFyIGNlbnRlciA9IG1hcC5nZXRDZW50ZXIoKTtcclxuICAgIHJldHVybiBcImNlbnRlcj1cIiArIGNlbnRlci5sYXQudG9TdHJpbmcoKSArIFwiLFwiICsgY2VudGVyLmxuZy50b1N0cmluZygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlWm9vbVN0cmluZyAobWFwKSB7XHJcbiAgICByZXR1cm4gXCJ6b29tPVwiICsgbWFwLmdldFpvb20oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUxheWVyU3RyaW5nIChtYXApIHtcclxuICAgIHZhciBsYXllcnMgPSBbXTtcclxuICAgIHZhciBvcGFjaXR5VmFscyA9IHt9O1xyXG4gICAgdmFyIGN1cnJlbnRMYXllcnMgPSBHZXRDdXJyZW50TGF5ZXJzKCk7XHJcblxyXG4gICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcclxuICAgICAgICB2YXIgb3B0aW9ucyA9IGxheWVyLm9wdGlvbnM7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sYXllcnMpIHtcclxuICAgICAgICAgICAgb3BhY2l0eVZhbHNbb3B0aW9ucy5sYXllcnNdID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShcIm9wYWNpdHlcIikgPyBvcHRpb25zLm9wYWNpdHkgOiBcIjFcIjtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgY3VycmVudExheWVyO1xyXG4gICAgdmFyIGk7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgY3VycmVudExheWVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGN1cnJlbnRMYXllciA9IGN1cnJlbnRMYXllcnNbaV07XHJcbiAgICAgICAgbGF5ZXJzLnB1c2goY3VycmVudExheWVyKTtcclxuICAgICAgICBsYXllcnMucHVzaChvcGFjaXR5VmFsc1tjdXJyZW50TGF5ZXJdKTtcclxuICAgIH1cclxuICAgIHJldHVybiBcImxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUJhc2VMYXllclN0cmluZyAobWFwKSB7XHJcbiAgICB2YXIgbGF5ZXJzID0gW107XHJcbiAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xyXG4gICAgICAgIGlmIChsYXllci5vcHRpb25zICYmIGxheWVyLm9wdGlvbnMudHlwZSA9PT0gQkFTRV9MQVlFUl9UWVBFKSB7XHJcbiAgICAgICAgICAgIGxheWVycy5wdXNoKGxheWVyLm9wdGlvbnMuaWQpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIFwiYmFzZWxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUxheWVyR3JvdXBzU3RyaW5nICgpIHtcclxuICAgIHZhciBhY3RpdmVMYXllckdyb3VwcyA9IEdldEFjdGl2ZUxheWVyR3JvdXBzKClcclxuICAgIHJldHVybiBcImxheWVyR3JvdXBzPVwiK2FjdGl2ZUxheWVyR3JvdXBzLm1hcChkID0+IGQuaWQpLmpvaW4oJywnKVxyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlUG9pbnRzT2ZJbnRlcmVzdFN0cmluZyAoKSB7XHJcbiAgICB2YXIgcG9pcyA9IEdldEFsbFBvaW50c09mSW50ZXJlc3QoKVxyXG4gICAgaWYgKCFwb2lzLmxlbmd0aCkgcmV0dXJuXHJcbiAgICB2YXIgcG9pU3RyaW5nID0gXCJwb2lzPVwiXHJcbiAgICBwb2lzLmZvckVhY2gocG9pID0+IHtcclxuICAgICAgICBwb2lTdHJpbmcgKz0gcG9pLmxhdCArICcsJyArIHBvaS5sbmcgKyAnOydcclxuICAgIH0pXHJcbiAgICByZXR1cm4gcG9pU3RyaW5nXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VBY3RpdmVUYWJTdHJpbmcgKCkge1xyXG4gICAgcmV0dXJuIFwidGFiPVwiICsgZDMuc2VsZWN0KFwiLnBhbmVsLXRvcC1idG4uYWN0aXZlXCIpLmF0dHIoXCJkYXRhLWFjdGl2ZVwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUFjdGl2ZUdyYXBoVGFiU3RyaW5nICgpIHtcclxuICAgIHJldHVybiBcImdyYXBoPVwiICsgZDMuc2VsZWN0KFwiLmdyYXBoLXR5cGUtYnRuLmFjdGl2ZVwiKS5hdHRyKFwiZGF0YS10eXBlXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZVNoYXJlVXJsICgpIHtcclxuICAgIHZhciBwYXJhbXMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xyXG4gICAgaWYgKHBhcmFtcyA9PT0gXCJcIikgcmV0dXJuO1xyXG5cclxuICAgIHBhcmFtcyA9IGdldFBhcmFtc0FycmF5KHBhcmFtcyk7XHJcbiAgICBwYXJhbXMgPSBtYWtlS2V5ZWRQYXJhbXNPYmplY3QocGFyYW1zKTtcclxuXHJcbiAgICBmb3JtYXRQYXJhbXMocGFyYW1zKTtcclxuICAgIHJldHVybiBwYXJhbXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFBhcmFtc0FycmF5IChwYXJhbXMpIHtcclxuICAgIHBhcmFtcyA9IHBhcmFtcy5zdWJzdHJpbmcoMSk7XHJcbiAgICBwYXJhbXMgPSB1bm1hbmdsZVBhcmFtU3RyaW5nKHBhcmFtcyk7XHJcbiAgICByZXR1cm4gcGFyYW1zLnNwbGl0KFwiJlwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFuZ2xlUGFyYW1TdHJpbmcgKHVybCkge1xyXG4gICAgcmV0dXJuIHVybC5yZXBsYWNlKC9cXDovZywgXCIlM0FcIilcclxuICAgICAgICAucmVwbGFjZSgvXFw7L2csIFwiJTNCXCIpXHJcbiAgICAgICAgLnJlcGxhY2UoL1xcLy9nLCBcIiUyRlwiKVxyXG4gICAgICAgIC5yZXBsYWNlKC9cXCwvZywgXCIlMkNcIilcclxuICAgICAgICAucmVwbGFjZSgvXFwmL2csIFwiJTI2XCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1bm1hbmdsZVBhcmFtU3RyaW5nIChwYXJhbXMpIHtcclxuICAgIHJldHVybiBwYXJhbXMucmVwbGFjZSgvXFwlMltjfENdL2csIFwiLFwiKS5yZXBsYWNlKC9cXCUzW2J8Ql0vZywgXCI7XCIpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VLZXllZFBhcmFtc09iamVjdCAocGFyYW1zQXJyKSB7XHJcbiAgICB2YXIgcGFyc2VkUGFyYW1zID0ge307XHJcbiAgICB2YXIgcGFyYW1QYWlyO1xyXG4gICAgdmFyIGk7XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IHBhcmFtc0Fyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHBhcmFtUGFpciA9IHBhcmFtc0FycltpXS5zcGxpdChcIj1cIik7XHJcbiAgICAgICAgcGFyc2VkUGFyYW1zW3BhcmFtUGFpclswXV0gPSBwYXJhbVBhaXJbMV1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcGFyc2VkUGFyYW1zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRQYXJhbXMgKHBhcmFtcykge1xyXG4gICAgaWYgKHBhcmFtcy5jZW50ZXIpIHBhcmFtcy5jZW50ZXIgPSBmb3JtYXRDZW50ZXJQYXJhbShwYXJhbXMuY2VudGVyKTtcclxuICAgIGlmIChwYXJhbXMubGF5ZXJzKSBwYXJhbXMubGF5ZXJzID0gZm9ybWF0TGF5ZXJQYXJhbShwYXJhbXMubGF5ZXJzKTtcclxuICAgIGlmIChwYXJhbXMuYmFzZWxheWVycykgcGFyYW1zLmJhc2VsYXllcnMgPSBmb3JtYXRCYXNlTGF5ZXJQYXJhbShwYXJhbXMuYmFzZWxheWVycyk7XHJcbiAgICBpZiAocGFyYW1zLnBvaXMpIHBhcmFtcy5wb2lzID0gZm9ybWF0UG9pbnRzT2ZJbnRlcmVzdFBhcmFtKHBhcmFtcy5wb2lzKVxyXG4gICAgaWYgKHBhcmFtcy5sYXllckdyb3VwcykgcGFyYW1zLmxheWVyR3JvdXBzID0gZm9ybWF0TGF5ZXJHcm91cHNQYXJhbShwYXJhbXMubGF5ZXJHcm91cHMpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdENlbnRlclBhcmFtIChjZW50ZXIpIHtcclxuICAgIHJldHVybiBjZW50ZXIuc3BsaXQoXCIsXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRMYXllclBhcmFtIChsYXllcnMpIHtcclxuICAgIHZhciBmb3JtYXR0ZWRMYXllcnMgPSB7XHJcbiAgICAgICAgXCJlbmFibGVkTGF5ZXJzXCI6IFtdLFxyXG4gICAgICAgIFwib3BhY2l0eVZhbHNcIjoge31cclxuICAgIH07XHJcbiAgICB2YXIgbGF5ZXJJZDtcclxuICAgIHZhciBpO1xyXG5cclxuICAgIGxheWVycyA9IGxheWVycy5zcGxpdChcIixcIik7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGF5ZXJzLmxlbmd0aDsgaSA9IGkgKyAyKSB7XHJcbiAgICAgICAgbGF5ZXJJZCA9IGxheWVyc1tpXTtcclxuICAgICAgICBmb3JtYXR0ZWRMYXllcnMuZW5hYmxlZExheWVycy5wdXNoKGxheWVySWQpO1xyXG4gICAgICAgIGZvcm1hdHRlZExheWVycy5vcGFjaXR5VmFsc1tsYXllcklkXSA9IGxheWVyc1tpKzFdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmb3JtYXR0ZWRMYXllcnM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdEJhc2VMYXllclBhcmFtIChiYXNlbGF5ZXJzKSB7XHJcbiAgICByZXR1cm4gYmFzZWxheWVycy5zcGxpdChcIixcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdFBvaW50c09mSW50ZXJlc3RQYXJhbSAocG9pcykge1xyXG4gICAgcmV0dXJuIHBvaXMuc3BsaXQoJzsnKVxyXG4gICAgICAgIC5maWx0ZXIoKHN0cikgPT4gc3RyICE9PSAnJylcclxuICAgICAgICAubWFwKChwb2kpID0+IHtcclxuICAgICAgICAgICAgcG9pID0gcG9pLnNwbGl0KCcsJylcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGxhdDogcG9pWzBdLFxyXG4gICAgICAgICAgICAgICAgbG5nOiBwb2lbMV1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdExheWVyR3JvdXBzUGFyYW0gKGxheWVyR3JvdXBTZXR0aW5ncykge1xyXG4gICAgcmV0dXJuIGxheWVyR3JvdXBTZXR0aW5ncy5zcGxpdCgnLCcpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZExheWVyR3JvdXBTZXR0aW5nc1RvQ29uZmlnKGFjdGl2ZUxheWVyR3JvdXBJZHMsIGNvbmZpZykge1xyXG4gICAgY29uZmlnLmxheW91dFsnbGF5ZXItZ3JvdXBzLW9yZGVyJ10uZm9yRWFjaChsYXllckdyb3VwID0+IHtcclxuICAgICAgICAvLyBzZXQgbGF5ZXIgZ3JvdXAgdG8gYWN0aXZlIGlmIGl0cyBpZCBhcHBlYXJzIGluIHRoZSBzaGFyZSB1cmwgc2V0dGluZ3NcclxuICAgICAgICBsYXllckdyb3VwLmFjdGl2ZSA9IGFjdGl2ZUxheWVyR3JvdXBJZHMuZmlsdGVyKGlkID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGlkID09PSBsYXllckdyb3VwLmlkXHJcbiAgICAgICAgfSkubGVuZ3RoID4gMFxyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkTGF5ZXJTZXR0aW5nc1RvQ29uZmlnIChzaGFyZUxheWVyU2V0dGluZ3MsIGNvbmZpZykge1xyXG4gICAgdmFyIGVuYWJsZWRMYXllcnMgPSBzaGFyZUxheWVyU2V0dGluZ3MuZW5hYmxlZExheWVycztcclxuICAgIGNvbmZpZ1tcImFjdGl2ZS1sYXllcnNcIl0gPSBlbmFibGVkTGF5ZXJzO1xyXG5cclxuICAgIHZhciBpLCBqLCBwcm9wLCBsYXllcmdyb3VwO1xyXG4gICAgdmFyIGVuYWJsZWRMYXllcjtcclxuICAgIHZhciBmb3VuZExheWVyO1xyXG4gICAgdmFyIGxheWVycyA9IGNvbmZpZy5sYXllcnM7XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IGVuYWJsZWRMYXllcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBmb3VuZExheWVyID0gZmFsc2U7XHJcbiAgICAgICAgZW5hYmxlZExheWVyID0gZW5hYmxlZExheWVyc1tpXTtcclxuICAgICAgICBmb3IgKHByb3AgaW4gbGF5ZXJzKSB7XHJcbiAgICAgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XHJcbiAgICAgICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XHJcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsYXllcmdyb3VwLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZW5hYmxlZExheWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJncm91cFtqXS5vcGFjaXR5ID0gc2hhcmVMYXllclNldHRpbmdzLm9wYWNpdHlWYWxzW2VuYWJsZWRMYXllcl07XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRMYXllciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWRkQmFzZUxheWVyU2V0dGluZ3NUb0NvbmZpZyAoc2hhcmVCYXNlTGF5ZXJTZXR0aW5ncywgY29uZmlnKSB7XHJcbiAgICB2YXIgYmFzZWxheWVycyA9IGNvbmZpZy5iYXNlbGF5ZXJzO1xyXG4gICAgdmFyIGJhc2VsYXllcjtcclxuICAgIHZhciBpO1xyXG5cclxuICAgIGZvciAoaSA9IDA7IGkgPCBiYXNlbGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgYmFzZWxheWVyID0gYmFzZWxheWVyc1tpXTtcclxuICAgICAgICBiYXNlbGF5ZXIuYWN0aXZlID0gKHNoYXJlQmFzZUxheWVyU2V0dGluZ3MuaW5kZXhPZihiYXNlbGF5ZXIuaWQpICE9PSAtMSkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFBvaW50c09mSW50ZXJlc3RUb0NvbmZpZyhwb2lzLCBjb25maWcpIHtcclxuICAgIGNvbmZpZ1tcInBvaXNcIl0gPSBwb2lzXHJcbn1cclxuXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3NoYXJlLmpzIiwiaW1wb3J0IHtHZXRNYXB9IGZyb20gXCIuL21hcFwiO1xyXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tIFwiLi9zaGFyZVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IEJBU0VfTEFZRVJfVFlQRSA9IFwiYmFzZWxheWVyXCI7XHJcblxyXG52YXIgX2Jhc2VsYXllcnM7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQ3JlYXRlQmFzZUxheWVycyAobWFwLCBsYXllckNvbmZpZykge1xyXG4gICAgbGF5ZXJDb25maWcgPSBsYXllckNvbmZpZyB8fFxyXG4gICAgICAgIFt7XHJcbiAgICAgICAgICAgIFwiaWRcIiA6IFwiY2FydG8tbGlnaHQtZGVmYXVsdFwiLFxyXG4gICAgICAgICAgICBcInVybFwiIDogXCJodHRwOi8ve3N9LmJhc2VtYXBzLmNhcnRvY2RuLmNvbS9saWdodF9hbGwve3p9L3t4fS97eX0ucG5nXCIsXHJcbiAgICAgICAgICAgIFwiYXR0cmlidXRpb25cIiA6ICcmY29weTsgPGEgaHJlZj1cImh0dHA6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzLCAmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vY2FydG8uY29tL2F0dHJpYnV0aW9uc1wiPkNBUlRPPC9hPidcclxuICAgICAgICB9XTtcclxuXHJcbiAgICBfYmFzZWxheWVycyA9IGxheWVyQ29uZmlnO1xyXG4gICAgdmFyIGk7XHJcbiAgICB2YXIgYmFzZUxheWVyO1xyXG4gICAgdmFyIGNvbmZpZztcclxuXHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGF5ZXJDb25maWcubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25maWcgPSBsYXllckNvbmZpZ1tpXTtcclxuXHJcbiAgICAgICAgaWYgKCFjb25maWcuYWN0aXZlKSBjb250aW51ZTtcclxuICAgICAgICBiYXNlTGF5ZXIgPSBjcmVhdGVCYXNlTGF5ZXIoY29uZmlnKTtcclxuICAgICAgICBjb25maWcubGF5ZXIgPSBiYXNlTGF5ZXI7XHJcbiAgICAgICAgYmFzZUxheWVyLmFkZFRvKG1hcCk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQmFzZUxheWVyVUkobGF5ZXJDb25maWcpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VMYXllclVJIChjb25maWcpIHtcclxuICAgIHZhciBiYXNlVUkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgYmFzZVVJLmNsYXNzTmFtZSA9IFwiYmFzZWxheWVyLXVpXCI7XHJcbiAgICB2YXIgYmFzZVdyYXBwZXI7XHJcbiAgICB2YXIgYmFzZUltZztcclxuICAgIHZhciBiYXNlTGFiZWw7XHJcblxyXG4gICAgdmFyIGxheWVyO1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb25maWcubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgbGF5ZXIgPSBjb25maWdbaV07XHJcbiAgICAgICAgaWYgKCFsYXllci5oYXNPd25Qcm9wZXJ0eShcImltYWdlXCIpKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgYmFzZVdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGJhc2VXcmFwcGVyLnNldEF0dHJpYnV0ZShcImRhdGEtbGF5ZXJcIiwgbGF5ZXIuaWQpO1xyXG4gICAgICAgIGJhc2VJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xyXG4gICAgICAgIGJhc2VJbWcuc2V0QXR0cmlidXRlKFwic3JjXCIsIGxheWVyLmltYWdlKTtcclxuICAgICAgICBiYXNlSW1nLnNldEF0dHJpYnV0ZShcImFsdFwiLCBsYXllci5sYWJlbCk7XHJcbiAgICAgICAgYmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBsYXllci5sYWJlbCk7XHJcbiAgICAgICAgYmFzZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBiYXNlTGFiZWwudGV4dENvbnRlbnQgPSBsYXllci5sYWJlbDtcclxuICAgICAgICBiYXNlV3JhcHBlci5hcHBlbmRDaGlsZChiYXNlSW1nKTtcclxuICAgICAgICBiYXNlV3JhcHBlci5hcHBlbmRDaGlsZChiYXNlTGFiZWwpO1xyXG4gICAgICAgIGJhc2VXcmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVCYXNlQ2xpY2spXHJcblxyXG4gICAgICAgIGQzLnNlbGVjdChiYXNlV3JhcHBlcilcclxuICAgICAgICAgICAgLmNsYXNzZWQoXCJiYXNlLXNlbGVjdG9yXCIsIHRydWUpXHJcbiAgICAgICAgICAgIC5jbGFzc2VkKFwiYWN0aXZlXCIsIGxheWVyLmFjdGl2ZSk7XHJcblxyXG4gICAgICAgIGJhc2VVSS5hcHBlbmRDaGlsZChiYXNlV3JhcHBlcik7XHJcbiAgICB9XHJcblxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImxlYWZsZXQtYm90dG9tIGxlYWZsZXQtbGVmdFwiKVswXS5hcHBlbmRDaGlsZChiYXNlVUkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVCYXNlQ2xpY2sgKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB2YXIgbGF5ZXJpZCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiKTtcclxuICAgIHRvZ2dsZUFjdGl2ZUJhc2VVSSh0aGlzKTtcclxuICAgIHJlbW92ZUN1cnJlbnRCYXNlTGF5ZXIoKTtcclxuICAgIGFkZE5ld0Jhc2VMYXllclRvTWFwKGxheWVyaWQpO1xyXG5cclxuICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBjaGFuZ2VpbmcgYmFzZSBsYXllclxyXG4gICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XHJcbiAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxyXG4gICAgICBldmVudEFjdGlvbjogJ2NoYW5nZSBiYXNlIGxheWVyJyxcclxuICAgICAgZXZlbnRMYWJlbDogbGF5ZXJpZCxcclxuICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXHJcbiAgICB9KTtcclxuXHJcbiAgICB1cGRhdGVTaGFyZVVybCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVBY3RpdmVCYXNlVUkgKGJhc2VVSUVsZW0pIHtcclxuICAgIGQzLnNlbGVjdChcIi5iYXNlLXNlbGVjdG9yLmFjdGl2ZVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGZhbHNlKTtcclxuICAgIGQzLnNlbGVjdChiYXNlVUlFbGVtKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVDdXJyZW50QmFzZUxheWVyICgpIHtcclxuICAgIHZhciBtYXAgPSBHZXRNYXAoKTtcclxuXHJcbiAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xyXG4gICAgICAgIGlmIChsYXllci5vcHRpb25zLnR5cGUgIT09IEJBU0VfTEFZRVJfVFlQRSkgcmV0dXJuO1xyXG4gICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllcik7XHJcbiAgICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGROZXdCYXNlTGF5ZXJUb01hcCAobGF5ZXJpZCkge1xyXG4gICAgdmFyIG1hcCA9IEdldE1hcCgpO1xyXG5cclxuICAgIHZhciBsYXllcjtcclxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gX2Jhc2VsYXllcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgbGF5ZXIgPSBfYmFzZWxheWVyc1tpXTtcclxuICAgICAgICBpZiAobGF5ZXIuaWQgIT09IGxheWVyaWQpIGNvbnRpbnVlO1xyXG4gICAgICAgIGlmICghbGF5ZXIubGF5ZXIpIGxheWVyLmxheWVyID0gY3JlYXRlQmFzZUxheWVyKGxheWVyKTtcclxuICAgICAgICBsYXllci5sYXllci5hZGRUbyhtYXApO1xyXG4gICAgICAgIGxheWVyLmxheWVyLmJyaW5nVG9CYWNrKCk7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VMYXllciAobGF5ZXJDb25maWcpIHtcclxuICAgIHJldHVybiBMLnRpbGVMYXllcihcclxuICAgICAgICBsYXllckNvbmZpZy51cmwsXHJcbiAgICAgICAgbWFrZUJhc2VMYXllck9wdGlvbnMobGF5ZXJDb25maWcpXHJcbiAgICApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlQmFzZUxheWVyT3B0aW9ucyAoY29uZmlnKSB7XHJcbiAgICB2YXIgb3B0aW9ucyA9IHt9O1xyXG4gICAgaWYgKGNvbmZpZy5pZCkgb3B0aW9ucy5pZCA9IGNvbmZpZy5pZDtcclxuICAgIGlmIChjb25maWcuYXR0cmlidXRpb24pIG9wdGlvbnMuYXR0cmlidXRpb24gPSBjb25maWcuYXR0cmlidXRpb247XHJcbiAgICBpZiAoY29uZmlnLnN1YmRvbWFpbnMpIG9wdGlvbnMuc3ViZG9tYWlucyA9IGNvbmZpZy5zdWJkb21haW5zO1xyXG4gICAgb3B0aW9ucy50eXBlID0gQkFTRV9MQVlFUl9UWVBFO1xyXG5cclxuICAgIHJldHVybiBvcHRpb25zO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2Jhc2VsYXllci5qcyIsImltcG9ydCB7XHJcbiAgY3JlYXRlR3JhcGhEaXYsXHJcbiAgY3JlYXRlTWFya2VyLFxyXG4gIGNyZWF0ZUdyYXBoUmVtb3ZlcixcclxuICBnZXRJY29uXHJcbn0gZnJvbSAnLi9ncmFwaCdcclxuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSAnLi9zaGFyZSdcclxuaW1wb3J0IHtHZXRNYXB9IGZyb20gJy4vbWFwJ1xyXG5pbXBvcnQge0dldEFjdGl2ZVRhYiwgSGFuZGxlVGFiQ2hhbmdlfSBmcm9tICcuL3RhYnMnXHJcblxyXG52YXIgX3BvaW50c19vZl9pbnRlcmVzdCA9IFtdXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCAoKSB7XHJcbiAgICByZXR1cm4gX3BvaW50c19vZl9pbnRlcmVzdFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyIChsYXQsIGxuZykge1xyXG4gICAgdmFyIHBvaSA9IHtcclxuICAgICAgICBsYXQ6IGxhdCxcclxuICAgICAgICBsbmc6IGxuZ1xyXG4gICAgfVxyXG4gICAgX3BvaW50c19vZl9pbnRlcmVzdC5wdXNoKHBvaSlcclxuICAgIHJldHVybiBwb2lcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFNldHVwUG9pbnRzT2ZJbnRlcmVzdCAobWFwLCBuZXdQb2lzKSB7XHJcbiAgICBBZGRNdWx0aXBsZVBvaW50c09mSW50ZXJlc3QobmV3UG9pcylcclxuICAgIHZhciBwb2lzID0gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCgpXHJcbiAgICB2YXIgbWFwID0gR2V0TWFwKClcclxuICAgIHBvaXMuZm9yRWFjaChwb2kgPT4ge1xyXG4gICAgICAgIFNldHVwUG9pbnRPZkludGVyZXN0VUkobWFwLCBwb2kpXHJcbiAgICB9KVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQWRkTXVsdGlwbGVQb2ludHNPZkludGVyZXN0IChwb2lzKSB7XHJcbiAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShfcG9pbnRzX29mX2ludGVyZXN0LCBwb2lzKVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gUmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXIocG9pVG9SZW1vdmUpIHtcclxuICAgIF9wb2ludHNfb2ZfaW50ZXJlc3QgPSBfcG9pbnRzX29mX2ludGVyZXN0LmZpbHRlcihwb2kgPT4ge1xyXG4gICAgICAgIHJldHVybiAhKHBvaSA9PT0gcG9pVG9SZW1vdmUpXHJcbiAgfSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFNldHVwUG9pbnRPZkludGVyZXN0VUkgKG1hcCwgcG9pKSB7XHJcbiAgICB2YXIgZGl2ID0gY3JlYXRlR3JhcGhEaXYocG9pKTtcclxuICAgIHZhciBtYXJrZXIgPSBjcmVhdGVNYXJrZXIobWFwLCBwb2kubGF0LCBwb2kubG5nKTtcclxuICAgIHBvaS5ncmFwaERpdiA9IGRpdlxyXG4gICAgcG9pLm1hcmtlciA9IG1hcmtlclxyXG4gICAgbWFya2VyLmFkZFRvKG1hcClcclxuICAgIGNyZWF0ZUdyYXBoUmVtb3ZlcihtYXAsIGRpdiwgbWFya2VyLCBwb2kpO1xyXG5cclxuICAgIGQzLnNlbGVjdChkaXYpLm9uKFwibW91c2VlbnRlclwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIG1hcmtlci5zZXRJY29uKGdldEljb24oJ2hvdmVyJykpO1xyXG4gICAgfSlcclxuICAgIGQzLnNlbGVjdChkaXYpLm9uKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbWFya2VyLnNldEljb24oZ2V0SWNvbignZ3JhcGgnKSk7XHJcbiAgICB9KVxyXG4gICAgbWFya2VyLm9uKCdjbGljayBkYmxjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaGFuZGxlTWFya2VyTW91c2VFdmVudChlLCBwb2kpXHJcbiAgICB9KVxyXG4gICAgbWFya2VyLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIG1hcmtlci5zZXRJY29uKGdldEljb24oJ2hvdmVyJykpXHJcbiAgICB9KVxyXG4gICAgbWFya2VyLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgbWFya2VyLnNldEljb24oZ2V0SWNvbignZ3JhcGgnKSlcclxuICAgICAgICBwb2kuZ3JhcGhEaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncGFuLXRvLW1hcmtlci1idG4nKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlJylcclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU1hcmtlck1vdXNlRXZlbnQgKGUsIHBvaSkge1xyXG4gICAgZS5vcmlnaW5hbEV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXHJcbiAgICBIYW5kbGVUYWJDaGFuZ2UoJ2dyYXBocy1hY3RpdmUnKVxyXG4gICAgc2Nyb2xsVG9Qb2ludE9mSW50ZXJlc3RHcmFwaChwb2kpXHJcbiAgICB0cmlnZ2VyR3JhcGhBbmltYXRpb24ocG9pKVxyXG59XHJcblxyXG5mdW5jdGlvbiB0cmlnZ2VyR3JhcGhBbmltYXRpb24gKHBvaSkge1xyXG4gICAgcG9pLmdyYXBoRGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Bhbi10by1tYXJrZXItYnRuJylbMF0uY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZScpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNjcm9sbFRvUG9pbnRPZkludGVyZXN0R3JhcGggKHBvaSkge1xyXG4gICAgdmFyIHJpZ2h0UGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKVxyXG4gICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbC1oZWFkZXInKVxyXG4gICAgdmFyIGdyYXBoVHlwZUhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaC10eXBlLWhlYWRlcicpXHJcbiAgICByaWdodFBhbmVsLnNjcm9sbFRvcCA9IHBvaS5ncmFwaERpdi5vZmZzZXRUb3BcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJIChtYXAsIGRpdiwgbWFya2VyKSB7XHJcbiAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaC1saXN0Jyk7XHJcbiAgICBsaXN0LnJlbW92ZUNoaWxkKGRpdik7XHJcbiAgICBtYXAucmVtb3ZlTGF5ZXIobWFya2VyKTtcclxuICAgIHVwZGF0ZVNoYXJlVXJsKClcclxufVxyXG5cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvcG9pLmpzIiwiaW1wb3J0IHtcclxuICAgIEFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlcixcclxuICAgIFJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyLFxyXG4gICAgU2V0dXBQb2ludE9mSW50ZXJlc3RVSSxcclxuICAgIFJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJLFxyXG4gICAgR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdFxyXG59IGZyb20gJy4vcG9pJ1xyXG5pbXBvcnQge3VwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHR9IGZyb20gJy4vcGFuZWwnXHJcbmltcG9ydCB7dXBkYXRlU2hhcmVVcmx9IGZyb20gJy4vc2hhcmUnXHJcbmltcG9ydCB7R2V0TWFwfSBmcm9tICcuL21hcCdcclxuaW1wb3J0IHtHZXRBamF4T2JqZWN0fSBmcm9tICcuL3BhcnNlcidcclxuXHJcbnZhciB0aXAgPSB7fTtcclxuXHJcbmZ1bmN0aW9uIGdldEdyYXBoVGlwKCkge1xyXG4gICAgcmV0dXJuIHRpcFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gU2V0dXBHcmFwaHMgKCkge1xyXG4gICAgZDMuc2VsZWN0QWxsKFwiLmdyYXBoLXR5cGUtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2spO1xyXG4gICAgZXh0ZW5kRGF0ZU1vZHVsZSgpO1xyXG4gICAgdGlwID0gZDMudGlwKCkuYXR0cignY2xhc3MnLCAnZDMtdGlwJykuaHRtbChmdW5jdGlvbiAoZCkgeyByZXR1cm4gZDsgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGV4dGVuZERhdGVNb2R1bGUgKCkge1xyXG4gICAgRGF0ZS5wcm90b3R5cGUuaXNMZWFwWWVhciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB5ZWFyID0gdGhpcy5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIGlmKCh5ZWFyICYgMykgIT0gMCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIHJldHVybiAoKHllYXIgJSAxMDApICE9IDAgfHwgKHllYXIgJSA0MDApID09IDApO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBHZXQgRGF5IG9mIFllYXJcclxuICAgIERhdGUucHJvdG90eXBlLmdldERPWSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBkYXlDb3VudCA9IFswLCAzMSwgNTksIDkwLCAxMjAsIDE1MSwgMTgxLCAyMTIsIDI0MywgMjczLCAzMDQsIDMzNF07XHJcbiAgICAgICAgdmFyIG1uID0gdGhpcy5nZXRNb250aCgpO1xyXG4gICAgICAgIHZhciBkbiA9IHRoaXMuZ2V0RGF0ZSgpO1xyXG4gICAgICAgIHZhciBkYXlPZlllYXIgPSBkYXlDb3VudFttbl0gKyBkbjtcclxuICAgICAgICBpZihtbiA+IDEgJiYgdGhpcy5pc0xlYXBZZWFyKCkpIGRheU9mWWVhcisrO1xyXG4gICAgICAgIHJldHVybiBkYXlPZlllYXI7XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQmluZEdyYXBoRXZlbnRzIChtYXApIHtcclxuICAgIG1hcC5vbihcImNsaWNrXCIsIGhhbmRsZU1hcENsaWNrKTtcclxufVxyXG5cclxudmFyIGJhc2VJY29uID0gTC5JY29uLmV4dGVuZCh7fSk7XHJcblxyXG52YXIgZ3JhcGhJY29uID0gbmV3IGJhc2VJY29uKHtcclxuICAgIGljb25Vcmw6ICdpbWdzL2JsdWVfaWNvbi5wbmcnLFxyXG4gICAgc2hhZG93VXJsOiAnaW1ncy9tYXJrZXJfc2hhZG93LnBuZycsXHJcbiAgICBpY29uU2l6ZTogWzI1LCA0MV0sXHJcbiAgICBpY29uQW5jaG9yOiBbMTIsIDQxXSxcclxuICAgIHBvcHVwQW5jaG9yOiBbMSwgLTM0XSxcclxuICAgIHNoYWRvd1NpemU6IFs0MSwgNDFdXHJcbn0pO1xyXG5cclxudmFyIGhvdmVySWNvbiA9IG5ldyBiYXNlSWNvbih7XHJcbiAgICBpY29uVXJsOiAnaW1ncy9vcmFuZ2VfaWNvbi5wbmcnLFxyXG4gICAgc2hhZG93VXJsOiAnaW1ncy9tYXJrZXJfc2hhZG93LnBuZycsXHJcbiAgICBpY29uU2l6ZTogWzI1LCA0MV0sXHJcbiAgICBpY29uQW5jaG9yOiBbMTIsIDQxXSxcclxuICAgIHBvcHVwQW5jaG9yOiBbMSwgLTM0XSxcclxuICAgIHNoYWRvd1NpemU6IFs0MSwgNDFdXHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEljb24odHlwZSkge1xyXG4gICAgcmV0dXJuIHR5cGUgPT09ICdob3ZlcicgPyBob3Zlckljb24gOiBncmFwaEljb25cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTWFwQ2xpY2sgKGUpIHtcclxuICAgIHZhciBtYXAgPSB0aGlzO1xyXG4gICAgdmFyIGxhdCA9IGUubGF0bG5nLmxhdDtcclxuICAgIHZhciBsbmcgPSBlLmxhdGxuZy5sbmc7XHJcblxyXG4gICAgdmFyIHBvaSA9IEFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlcihsYXQsIGxuZylcclxuICAgIFNldHVwUG9pbnRPZkludGVyZXN0VUkobWFwLCBwb2ksIGhvdmVySWNvbiwgZ3JhcGhJY29uKVxyXG4gICAgdXBkYXRlU2hhcmVVcmwoKVxyXG5cclxuICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGNsaWNrIG9uIG1hcFxyXG4gICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XHJcbiAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxyXG4gICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcclxuICAgICAgZXZlbnRMYWJlbDogJ2FkZCBwb2ludCcsXHJcbiAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgfSk7XHJcblxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTWFya2VyIChtYXAsIGxhdCwgbG5nKSB7XHJcbiAgICByZXR1cm4gTC5tYXJrZXIoW2xhdCwgbG5nXSwge2ljb246IGdyYXBoSWNvbn0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlR3JhcGhSZW1vdmVyIChtYXAsIGRpdiwgbWFya2VyLCBwb2kpIHtcclxuICAgIHZhciBlbGVtID0gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSgpO1xyXG4gICAgZGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC1lbGVtLWhlYWRlclwiKVswXS5hcHBlbmRDaGlsZChlbGVtKTtcclxuICAgIGQzLnNlbGVjdChlbGVtKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgcmVtb3ZlIGdyYXBoXHJcbiAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XHJcbiAgICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxyXG4gICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXHJcbiAgICAgICAgICBldmVudExhYmVsOiAncmVtb3ZlJyxcclxuICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBSZW1vdmVQb2ludE9mSW50ZXJlc3RGcm9tVHJhY2tlcihwb2kpXHJcbiAgICAgICAgUmVtb3ZlUG9pbnRPZkludGVyZXN0VUkobWFwLCBkaXYsIG1hcmtlcilcclxuICAgICAgICB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KClcclxuICAgICAgICB1cGRhdGVTaGFyZVVybCgpXHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSAoKSB7XHJcbiAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICBlbGVtLmNsYXNzTmFtZSA9IFwicmVtb3ZlLWdyYXBoXCI7XHJcbiAgICBlbGVtLmlubmVyVGV4dCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoXCIxMDAwNVwiKTtcclxuICAgIGVsZW0uc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgXCJSZW1vdmUgZ3JhcGhcIik7XHJcbiAgICByZXR1cm4gZWxlbTtcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBHUkFQSCBEQVRBIFBST0NFU1NJTkcgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZnVuY3Rpb24gc2VuZFJlcXVlc3QocmVxdWVzdCwgdXJsKSB7XHJcbiAgICByZXF1ZXN0Lm9wZW4oJ0dFVCcsIHVybClcclxuICAgIHJlcXVlc3Quc2VuZCgpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUdyYXBoRGF0YVJlc3BvbnNlIChkaXYsIGxhdCwgbG5nLCByZXNwb25zZSkge1xyXG4gICAgcmVzcG9uc2UgPSByZXNwb25zZS5yZXBsYWNlKC9cXFt8XFxdfFxcJy9nLCBcIlwiKS5zcGxpdChcIiwgXCIpO1xyXG4gICAgZHJhd0dyYXBoKHJlc3BvbnNlLCBkaXYsIGxhdCwgbG5nKTtcclxuICAgIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXREYXRhKGxhdCwgbG5nLCBkaXYpIHtcclxuICAgIHZhciB1cmwgPSBcImh0dHBzOi8vZmNhdi1uZHZpLm5lbWFjLm9yZy9sYW5kZGF0X3Byb2R1Y3QuY2dpP2FyZ3M9XCIgKyBsbmcgKyBcIixcIiArIGxhdDtcclxuICAgIHZhciBvUmVxID0gR2V0QWpheE9iamVjdChmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICBoYW5kbGVHcmFwaERhdGFSZXNwb25zZShkaXYsIGxhdCwgbG5nLCByZXNwb25zZSlcclxuICAgIH0pXHJcblxyXG4gICAgb1JlcS5vcGVuKFwiR0VUXCIsIHVybCk7XHJcbiAgICBvUmVxLnNlbmQoKVxyXG59XHJcblxyXG5mdW5jdGlvbiBzcGxpdERhdGEoZGF0YSkge1xyXG4gICAgdmFyIGk7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGRhdGFbaV0gPSBkYXRhW2ldLnNwbGl0KFwiLFwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXByb2Nlc3NEYXRhIChvcmlnZGF0YSkge1xyXG4gICAgdmFyIGV4cGVjdGVkWWVhckxlbmd0aCA9IDQ2O1xyXG4gICAgdmFyIGRhdGEgPSB7fTtcclxuICAgIHZhciBwb2ludDtcclxuICAgIHZhciBrZXk7XHJcbiAgICB2YXIgaSwgajtcclxuXHJcbiAgICBkYXRhW1wia2V5c1wiXSA9IFtdO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IG9yaWdkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgcG9pbnQgPSBvcmlnZGF0YVtpXTtcclxuICAgICAgICBrZXkgPSBwb2ludFswXS5zdWJzdHJpbmcoMCw0KTtcclxuICAgICAgICBpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICBkYXRhW2tleV0gPSBbXTtcclxuICAgICAgICAgICAgZGF0YVtcImtleXNcIl0ucHVzaChrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhW2tleV0ucHVzaChwb2ludCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGtleXNUb0JlRGVsZXRlZCA9IFtdO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IGRhdGEua2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGtleSA9IGRhdGEua2V5c1tpXTtcclxuICAgICAgICBpZiAoZGF0YVtrZXldLmxlbmd0aCAhPT0gZXhwZWN0ZWRZZWFyTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGtleXNUb0JlRGVsZXRlZC5wdXNoKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZvciAoaSA9IDA7IGkgPCBrZXlzVG9CZURlbGV0ZWQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBrZXkgPSBrZXlzVG9CZURlbGV0ZWRbaV07XHJcbiAgICAgICAgZGVsZXRlIGRhdGFba2V5XTtcclxuICAgICAgICBkYXRhLmtleXMuc3BsaWNlKGRhdGEua2V5cy5pbmRleE9mKGtleSksIDEpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBkYXRhRm9yTWVkaWFucztcclxuICAgIHZhciBtZWRpYW47XHJcbiAgICBkYXRhW1wibWVkaWFuc1wiXSA9IFtdO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IGV4cGVjdGVkWWVhckxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZGF0YUZvck1lZGlhbnMgPSBbXTtcclxuICAgICAgICBmb3IgKGogPSBpOyBqIDwgb3JpZ2RhdGEubGVuZ3RoOyBqICs9IGV4cGVjdGVkWWVhckxlbmd0aCkge1xyXG4gICAgICAgICAgICBkYXRhRm9yTWVkaWFucy5wdXNoKG9yaWdkYXRhW2pdWzFdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1lZGlhbiA9IGRhdGFGb3JNZWRpYW5zLnNvcnQoKVtNYXRoLmZsb29yKGRhdGFGb3JNZWRpYW5zLmxlbmd0aC8yKV07XHJcbiAgICAgICAgZGF0YVtcIm1lZGlhbnNcIl0ucHVzaChtZWRpYW4pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIElOVEVSRkFDRSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrICgpIHtcclxuICAgIHZhciB0eXBlID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpO1xyXG4gICAgdmFyIGFjdGl2ZVR5cGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZ3JhcGgtdHlwZS1idG4gYWN0aXZlXCIpWzBdLmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJyk7XHJcblxyXG4gICAgaWYgKHR5cGUgPT09IGFjdGl2ZVR5cGUpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgY2xpY2sgb24gZ3JhcGggdHlwZVxyXG4gICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XHJcbiAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCB0eXBlJyxcclxuICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXHJcbiAgICAgIGV2ZW50TGFiZWw6IHR5cGUsXHJcbiAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgfSk7XHJcblxyXG4gICAgSGFuZGxlR3JhcGhUYWJDaGFuZ2UodHlwZSwgYWN0aXZlVHlwZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBIYW5kbGVHcmFwaFRhYkNoYW5nZSAoZ3JhcGhUeXBlKSB7XHJcbiAgICBpZiAoIWlzR3JhcGhMaXN0RW1wdHkoKSkge1xyXG4gICAgICAgIHZhciBvbGRBY3RpdmVHcmFwaEVsZW1IZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC1lbGVtJylbMF0uc2Nyb2xsSGVpZ2h0XHJcbiAgICAgICAgdmFyIG9sZEFjdGl2ZUdyYXBoSW5mb0hlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLXR5cGUtaW5mbyBhY3RpdmUnKVswXS5zY3JvbGxIZWlnaHRcclxuICAgICAgICB2YXIgcmlnaHRQYW5lbFNjcm9sbFRvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpLnNjcm9sbFRvcFxyXG4gICAgfVxyXG4gICAgZGlzYWJsZUFjdGl2ZUdyYXBoVGFiKCk7XHJcbiAgICBlbmFibGVHcmFwaFRhYihncmFwaFR5cGUpO1xyXG4gICAgaWYgKCFpc0dyYXBoTGlzdEVtcHR5KCkpIGFkanVzdFNjcm9sbFBvc2l0aW9uKG9sZEFjdGl2ZUdyYXBoSW5mb0hlaWdodCwgb2xkQWN0aXZlR3JhcGhFbGVtSGVpZ2h0LCByaWdodFBhbmVsU2Nyb2xsVG9wKVxyXG4gICAgdXBkYXRlU2hhcmVVcmwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNHcmFwaExpc3RFbXB0eSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC1lbGVtJylbMF0gPT09IHVuZGVmaW5lZFxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGp1c3RTY3JvbGxQb3NpdGlvbihvbGRHcmFwaEluZm9IZWlnaHQsIG9sZEdyYXBoRWxlbUhlaWdodCwgb2xkUmlnaHRQYW5lbFNjcm9sbFRvcCkge1xyXG4gICAgdmFyIG5ld0dyYXBoSW5mb0hlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLXR5cGUtaW5mbyBhY3RpdmUnKVswXS5zY3JvbGxIZWlnaHRcclxuICAgIHZhciBuZXdHcmFwaEVsZW1IZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC1lbGVtJylbMF0uc2Nyb2xsSGVpZ2h0XHJcblxyXG4gICAgdmFyIG5ld0dyYXBoRWxlbUhlaWdodFNjYWxlID0gKG5ld0dyYXBoRWxlbUhlaWdodCAvIG9sZEdyYXBoRWxlbUhlaWdodClcclxuICAgIHZhciBuZXdSaWdodFBhbmVsU2Nyb2xsVG9wID0gbmV3R3JhcGhJbmZvSGVpZ2h0ICsgKFxyXG4gICAgICAgIChvbGRSaWdodFBhbmVsU2Nyb2xsVG9wIC0gb2xkR3JhcGhJbmZvSGVpZ2h0KSAqIG5ld0dyYXBoRWxlbUhlaWdodFNjYWxlXHJcbiAgICApXHJcblxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsJykuc2Nyb2xsVG9wID0gbmV3UmlnaHRQYW5lbFNjcm9sbFRvcFxyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNhYmxlQWN0aXZlR3JhcGhUYWIgKCkge1xyXG4gICAgdmFyIGFjdGl2ZUVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZ3JhcGgtdHlwZS1idG4gYWN0aXZlXCIpWzBdO1xyXG4gICAgdmFyIGFjdGl2ZUNsYXNzID0gXCJncmFwaC1cIiArIGFjdGl2ZUVsZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS10eXBlXCIpO1xyXG5cclxuICAgIGFjdGl2ZUVsZW0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKS5jbGFzc0xpc3QucmVtb3ZlKGFjdGl2ZUNsYXNzKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW5hYmxlR3JhcGhUYWIgKGdyYXBoVHlwZSkge1xyXG4gICAgZDMuc2VsZWN0KFwiLmdyYXBoLXR5cGUtYnRuW2RhdGEtdHlwZT0nXCIgKyBncmFwaFR5cGUgKyBcIiddXCIpLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXBoLWxpc3RcIikuY2xhc3NMaXN0LmFkZChcImdyYXBoLVwiICsgZ3JhcGhUeXBlKTtcclxuICAgIGQzLnNlbGVjdEFsbCgnLmdyYXBoLXR5cGUtaW5mbycpXHJcbiAgICAuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBncmFwaFR5cGUgPT09IHRoaXMuaWQuc3BsaXQoJy0nKVswXVxyXG4gICAgfSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdyYXBoRGl2IChwb2kpIHtcclxuICAgIHZhciBkZWNpbWFsUGxhY2VzID0gM1xyXG4gICAgdmFyIGxhdFNob3J0ID0gcm91bmRGbG9hdChwb2kubGF0LCBkZWNpbWFsUGxhY2VzKVxyXG4gICAgdmFyIGxuZ1Nob3J0ID0gcm91bmRGbG9hdChwb2kubG5nLCBkZWNpbWFsUGxhY2VzKVxyXG4gICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGhlYWRlcilcclxuICAgIHZhciB6b29tVG9NYXJrZXJCdXR0b24gPSBtYWtlWm9vbVRvTWFwTWFya2VyQnV0dG9uKHBvaSlcclxuICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJMYXQ6IFwiICsgbGF0U2hvcnQgKyBcIiwgTG9uZzogXCIgKyBsbmdTaG9ydCk7XHJcbiAgICB2YXIgY29udGVudERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBjb250ZW50RGl2LmNsYXNzTmFtZSA9IFwiZ3JhcGgtbGF0LWxvblwiO1xyXG4gICAgY29udGVudERpdi5hcHBlbmRDaGlsZChjb250ZW50KTtcclxuXHJcbiAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoem9vbVRvTWFya2VyQnV0dG9uKVxyXG4gICAgaGVhZGVyLmFwcGVuZENoaWxkKGNvbnRlbnREaXYpO1xyXG5cclxuICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZChcImdyYXBoLWVsZW1cIilcclxuICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtZWxlbS1oZWFkZXJcIilcclxuXHJcbiAgICBnZXREYXRhKHBvaS5sYXQsIHBvaS5sbmcsIHdyYXBwZXIpO1xyXG4gICAgcmV0dXJuIHdyYXBwZXI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2Vab29tVG9NYXBNYXJrZXJCdXR0b24ocG9pKSB7XHJcbiAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKVxyXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2J0bicpXHJcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgncGFuLXRvLW1hcmtlci1idG4nKVxyXG4gICAgYnV0dG9uLnRleHRDb250ZW50ID0gXCJTaG93IE9uIE1hcFwiXHJcbiAgICBidXR0b24ub25jbGljayA9IGZ1bmN0aW9uIChwb2ksIGUpIHtcclxuICAgICAgICB2YXIgbWFwID0gR2V0TWFwKClcclxuICAgICAgICBtYXAucGFuVG8oW3BvaS5sYXQsIHBvaS5sbmddKVxyXG5cclxuICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBjbGljayBvbiBzaG93IG9uIG1hcFxyXG4gICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xyXG4gICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcclxuICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxyXG4gICAgICAgICAgZXZlbnRMYWJlbDogJ3tcInNob3cgb24gbWFwXCI6e1wibGF0XCI6JyArIHBvaS5sYXQgKyAnLFwibG9uZ1wiOicrICBwb2kubG5nKyAnfX0nLFxyXG4gICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfS5iaW5kKGJ1dHRvbiwgcG9pKVxyXG4gICAgcmV0dXJuIGJ1dHRvblxyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3R3JhcGgoZGF0YSwgZGl2LCBsYXQsIGxuZykge1xyXG4gICAgZGF0YSA9IHNwbGl0RGF0YShkYXRhKTtcclxuICAgIHZhciByZXByb2Nlc3NlZERhdGEgPSByZXByb2Nlc3NEYXRhKGRhdGEpO1xyXG4gICAgbWFrZVVwRG93bkxpbmVHcmFwaChkYXRhLCBkaXYsIHJlcHJvY2Vzc2VkRGF0YVtcIm1lZGlhbnNcIl0pO1xyXG4gICAgbWFrZVVwRG93bk92ZXJsYXBpbmdMaW5lR3JhcGhXaXRoQ2hlY2tib3hlcyhyZXByb2Nlc3NlZERhdGEsIGRpdiwgbGF0LCBsbmcpO1xyXG4gICAgZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzKHJlcHJvY2Vzc2VkRGF0YSwgZGl2LCBsYXQsIGxuZyk7XHJcbiAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKTtcclxuICAgIGxpc3QuYXBwZW5kQ2hpbGQoZGl2KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcm91bmRGbG9hdChudW1iZXIsIGRlY2ltYWxQbGFjZXMpIHtcclxuICAgIHJldHVybiBNYXRoLnJvdW5kKG51bWJlciAqIE1hdGgucG93KDEwLCBkZWNpbWFsUGxhY2VzKSkgLyAoTWF0aC5wb3coMTAsIGRlY2ltYWxQbGFjZXMpKVxyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8gVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5mdW5jdGlvbiBtYWtlVXBEb3duTGluZUdyYXBoIChkYXRhLCBkaXYsIGF2ZXJhZ2VzKSB7XHJcbiAgICAvLyBTZXQgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIGNhbnZhcyAvIGdyYXBoXHJcbiAgICB2YXIgbWFyZ2luID0ge3RvcDogMzAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMCwgbGVmdDogMjl9LFxyXG4gICAgd2lkdGggPSA1ODAgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCxcclxuICAgIGhlaWdodCA9IDI3MCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tO1xyXG5cclxuICAgIC8vIFNldCB0aGUgcmFuZ2VzXHJcbiAgICB2YXIgeCA9IGQzLnNjYWxlVGltZSgpLnJhbmdlKFswLCB3aWR0aF0pXHJcbiAgICAgICAgLmRvbWFpbihbXHJcbiAgICAgICAgICAgIHBhcnNlRGF0ZShkYXRhWzBdWzBdKSxcclxuICAgICAgICAgICAgcGFyc2VEYXRlKGRhdGFbZGF0YS5sZW5ndGgtMV1bMF0pXHJcbiAgICAgICAgXSk7XHJcbiAgICB2YXIgeSA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodCwgMF0pXHJcbiAgICAgICAgLmRvbWFpbihbMCwgMTAwXSk7XHJcblxyXG4gICAgLy8gRGVmaW5lIHRoZSBheGVzXHJcbiAgICB2YXIgeEF4aXMgPSBkMy5heGlzQm90dG9tKHgpXHJcbiAgICAgICAgLnRpY2tzKDE2KVxyXG4gICAgICAgIC50aWNrRm9ybWF0KGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgdmFyIHlBeGlzID0gZDMuYXhpc0xlZnQoeSlcclxuICAgICAgICAudGlja3MoNik7XHJcblxyXG4gICAgLy8gRGVmaW5lIHRoZSBsaW5lXHJcbiAgICB2YXIgdmFsdWVsaW5lID0gZDMubGluZSgpXHJcbiAgICAgICAgLngoZnVuY3Rpb24oZCkgeyByZXR1cm4geChwYXJzZURhdGUoZFswXSkpOyB9KVxyXG4gICAgICAgIC55KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHkoZFsxXSk7IH0pO1xyXG5cclxuICAgIHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KGRpdilcclxuICAgICAgICAuYXBwZW5kKFwiZGl2XCIpXHJcbiAgICAgICAgLmNsYXNzZWQoXCJ0aW1lc2VyaWVzLWdyYXBoXCIsIHRydWUpO1xyXG5cclxuICAgIC8vIEFkZHMgdGhlIHN2ZyBjYW52YXNcclxuICAgIHZhciBzdmcgPSB3cmFwcGVyLmFwcGVuZChcInN2Z1wiKVxyXG4gICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKVxyXG4gICAgICAgIC5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdyA9IHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHRcclxuICAgICAgICAgICAgdmFyIGggPSBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbVxyXG4gICAgICAgICAgICByZXR1cm4gJzAgMCAnICsgdyArICcgJyArIGhcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJylcclxuICAgICAgICAuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xyXG5cclxuICAgIHN2Zy5jYWxsKHRpcCk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSB2YWx1ZWxpbmUgcGF0aC5cclxuICAgIGRyYXdMaW5lYXJQYXRoKGRhdGEsIHZhbHVlbGluZSwgc3ZnKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIFggQXhpc1xyXG4gICAgc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieCBheGlzXCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGhlaWdodCArIFwiKVwiKVxyXG4gICAgICAgIC5jYWxsKHhBeGlzKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIFkgQXhpc1xyXG4gICAgc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpXHJcbiAgICAgICAgLmNhbGwoeUF4aXMpO1xyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxyXG4gICAgICovXHJcbiAgICBkcmF3TGluZWFyUG9pbnRzKGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcyk7XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vIE9WRVJMQVBQSU5HIFRJTUVTRVJJRVMgTElORSBHUkFQSCAvLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5mdW5jdGlvbiBtYWtlVXBEb3duT3ZlcmxhcGluZ0xpbmVHcmFwaFdpdGhDaGVja2JveGVzIChkYXRhLCBkaXYsIGxhdCwgbG5nKSB7XHJcbiAgICB2YXIgeWVhciA9IFwiMjAxNVwiO1xyXG5cclxuICAgIHZhciBjaGFydHMgPSB7fTtcclxuXHJcbiAgICAvLyBTZXQgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIGNhbnZhcyAvIGdyYXBoXHJcbiAgICB2YXIgbWFyZ2luID0ge3RvcDogMzAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMCwgbGVmdDogMjl9LFxyXG4gICAgICAgIHdpZHRoID0gNTAwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsXHJcbiAgICAgICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XHJcblxyXG4gICAgdmFyIGF2ZXJhZ2VzID0gZGF0YS5tZWRpYW5zO1xyXG5cclxuICAgIHZhciB4ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbMCwgd2lkdGhdKVxyXG4gICAgICAgIC5kb21haW4oWzAsIDM2NV0pO1xyXG4gICAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKVxyXG4gICAgICAgIC5kb21haW4oWzAsIDEwMF0pO1xyXG5cclxuICAgIC8vIERlZmluZSB0aGUgYXhlc1xyXG4gICAgZnVuY3Rpb24gZm9ybWF0TW9udGhUaWNrIChkKSB7XHJcbiAgICAgICAgcmV0dXJuIChNT05USF9MQUJFTFNbKGQtMTUpLzMwXSk7XHJcbiAgICB9XHJcbiAgICB2YXIgeEF4aXMgPSBkMy5heGlzQm90dG9tKHgpXHJcbiAgICAgICAgLnRpY2tzKDExKVxyXG4gICAgICAgIC50aWNrVmFsdWVzKFsxNSwgNDUsIDc1LCAxMDUsIDEzNSwgMTY1LCAxOTUsIDIyNSwgMjU1LCAyODUsIDMxNSwgMzQ1XSlcclxuICAgICAgICAudGlja0Zvcm1hdChmb3JtYXRNb250aFRpY2spO1xyXG5cclxuICAgIHZhciB5QXhpcyA9IGQzLmF4aXNMZWZ0KHkpXHJcbiAgICAgICAgLnRpY2tzKDYpO1xyXG5cclxuICAgIC8vIERlZmluZSB0aGUgbGluZVxyXG4gICAgdmFyIHZhbHVlbGluZSA9IGQzLmxpbmUoKVxyXG4gICAgICAgIC54KGZ1bmN0aW9uKGQsIGkpIHsgcmV0dXJuIChBcnJheS5pc0FycmF5KGQpID8geChwYXJzZUp1bGlhbkRheShkWzBdKSkgOiB4KChpICogOCkgKyAzICkpOyB9KVxyXG4gICAgICAgIC55KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIChBcnJheS5pc0FycmF5KGQpID8geShkWzFdKSA6IHkoZCkpOyB9KTtcclxuXHJcbiAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwib3ZlcmxhcHBpbmctZ3JhcGhcIiwgdHJ1ZSk7XHJcblxyXG4gICAgLy8gQWRkcyB0aGUgc3ZnIGNhbnZhc1xyXG4gICAgdmFyIHN2ZyA9IHdyYXBwZXJcclxuICAgICAgICAuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHcgPSB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0XHJcbiAgICAgICAgICAgICAgICB2YXIgaCA9IGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJzAgMCAnICsgdyArICcgJyArIGhcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKVxyXG4gICAgICAgICAgICAvLy5hdHRyKFwid2lkdGhcIiwgd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodClcclxuICAgICAgICAgICAgLy8uYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcclxuICAgICAgICAuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLFxyXG4gICAgICAgICAgICAgICAgICBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpO1xyXG5cclxuICAgIHN2Zy5jYWxsKHRpcCk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBYIEF4aXNcclxuICAgIHN2Zy5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInggYXhpc1wiKVxyXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIilcclxuICAgICAgICAuY2FsbCh4QXhpcyk7XHJcblxyXG4gICAgLy8gQWRkIHRoZSBZIEF4aXNcclxuICAgIHN2Zy5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInkgYXhpc1wiKVxyXG4gICAgICAgIC5jYWxsKHlBeGlzKTtcclxuXHJcbiAgICBjaGFydHNbXCJtZWRpYW5zXCJdID0ge1xyXG4gICAgICAgIFwicGF0aFwiIDogZHJhd0xpbmVhclBhdGgoZGF0YVtcIm1lZGlhbnNcIl0sIHZhbHVlbGluZSwgc3ZnKVxyXG4gICAgfTtcclxuXHJcbiAgICBjaGFydHNbeWVhcl0gPSB7XHJcbiAgICAgICAgXCJwYXRoXCIgOiBkcmF3TGluZWFyUGF0aChkYXRhW3llYXJdLCB2YWx1ZWxpbmUsIHN2ZylcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxyXG4gICAgICovXHJcbiAgICBjaGFydHNbXCJtZWRpYW5zXCJdW1wicG9pbnRzXCJdID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW1wibWVkaWFuc1wiXSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcclxuICAgIGNoYXJ0c1t5ZWFyXVtcInBvaW50c1wiXSA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVt5ZWFyXSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcclxuXHJcbiAgICB2YXIgaW5wdXR3cmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcImlucHV0LXdyYXBwZXJcIiwgdHJ1ZSk7XHJcblxyXG4gICAgZGF0YS5rZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwga2V5LCBcInRpbWVzZXJpZXNcIiwgeWVhciwgY2hhcnRzLCBkYXRhLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMsIGxhdCwgbG5nKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwgXCJtZWRpYW5zXCIsIFwidGltZXNlcmllc1wiLCBcIm1lZGlhbnNcIiwgY2hhcnRzLCBkYXRhLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMsIGxhdCwgbG5nKTtcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBQT0xBUiBHUkFQSCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZnVuY3Rpb24gZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzIChkYXRhLCBkaXYsIGxhdCwgbG5nKSB7XHJcbiAgICB2YXIgeWVhciA9IFwiMjAxNVwiO1xyXG4gICAgdmFyIHdpZHRoID0gNDkwLFxyXG4gICAgICAgIGhlaWdodCA9IDQ5MCxcclxuICAgICAgICByYWRpdXMgPSBNYXRoLm1pbih3aWR0aCwgaGVpZ2h0KSAvIDIgLSAzMDtcclxuXHJcbiAgICB2YXIgYXZlcmFnZXMgPSBkYXRhW1wibWVkaWFuc1wiXTtcclxuICAgIHZhciBjZW50ZXIgPSBmaW5kUG9sYXJDZW50ZXIoZGF0YSk7XHJcbiAgICB2YXIgdGhyZXNob2xkcyA9IGZpbmRQb2xhclRocmVzaG9sZHMoYXZlcmFnZXMsIGNlbnRlclsxXVswXSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHVwIHNjYWxpbmcgb2YgZGF0YS4gV2Uga25vdyB0aGF0IHRoZSBuZHZpIHZhbHVlcyBmYWxsIGJldHdlZW5cclxuICAgICAqIDAgJiAxMDAgc28gd2Ugc2V0IG91ciBkb21haW4gdG8gdGhhdC4gVGhlIHJhbmdlIGNvbnRyb2xzIHdoZXJlIHRoZVxyXG4gICAgICogcG9pbnRzIHdpbGwgbGllIGluIG91ciBncmFwaCwgc28gd2Ugc2V0IHRoZW0gdG8gYmUgYmV0d2VlbiAwIGFuZCB0aGVcclxuICAgICAqIHJhZGl1cy5cclxuICAgICAqL1xyXG4gICAgdmFyIHIgPSBkMy5zY2FsZUxpbmVhcigpXHJcbiAgICAgICAgLmRvbWFpbihbMCwgMTAwXSlcclxuICAgICAgICAucmFuZ2UoWzAsIHJhZGl1c10pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogZnVuY3Rpb24gd2hpY2ggd2lsbCBkcmF3IGVhY2ggcG9pbnQuIFRvIGNvbXB1dGUgdGhlIGRpc3RhbmNlIGZyb20gdGhlXHJcbiAgICAgKiBjZW50ZXIgZWFjaCBwb2ludCBpcyB3ZSBwYXNzIHRoZSBkYXRhcG9pbnQgdG8gdGhlIGZ1bmN0aW9uIGRlZmluZWQgYWJvdmUuXHJcbiAgICAgKiBUbyBkZXRlcm1pbmUgdGhlIGFuZ2xlIGZyb20gdGhlIG9yaWdpbiB3ZSBuZWVkIHRvIGNvbnZlcnQgdGhlIGRheSB0b1xyXG4gICAgICogcmFkaWFucywgc28gd2UgY29udmVydCB0aGUgZGF5IHRvIGEgbnVtYmVyIGJldHdlZW4gMCAmIDEgYW5kIHRoZW4gbXVsdGlwbHlcclxuICAgICAqIGl0IGJ5IDIgcGkuXHJcbiAgICAgKi9cclxuICAgIHZhciBsaW5lID0gZDMucmFkaWFsTGluZSgpXHJcbiAgICAgICAgLnJhZGl1cyhmdW5jdGlvbihkKSB7IHJldHVybiBBcnJheS5pc0FycmF5KGQpID8gcihkWzFdKSA6IHIoZCk7IH0pXHJcbiAgICAgICAgLmFuZ2xlKGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgdmFyIGRheSA9IEFycmF5LmlzQXJyYXkoZCkgPyBwYXJzZUp1bGlhbkRheShkWzBdKSA6IChpICogOCkgKyAzO1xyXG4gICAgICAgICAgICByZXR1cm4gKCgoKGRheSAtIDEpJTM2NSkvMzY1KSAqICgyKk1hdGguUEkpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdXAgdGhlIGNhbnZhcyB3aGVyZSB0aGUgY2lyY2xlIHdpbGwgYmUgZHJhd24uXHJcbiAgICAgKi9cclxuICAgIHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KGRpdikuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJwb2xhci1ncmFwaFwiLCB0cnVlKTtcclxuICAgIHZhciBzdmcgPSB3cmFwcGVyLmFwcGVuZChcInN2Z1wiKVxyXG4gICAgICAgIC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcclxuICAgICAgICAvLy5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodClcclxuICAgICAgICAuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICcwIDAgJysgd2lkdGggKyAnICcgKyBoZWlnaHRcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJylcclxuICAgICAgICAuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgd2lkdGggLyAyICsgXCIsXCIgKyBoZWlnaHQgLyAyICsgXCIpXCIpO1xyXG5cclxuICAgIHN2Zy5jYWxsKHRpcCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGJpZyBjaXJjbGVzIG9mIHRoZSBncmFwaCAmIHRoZWlyIGxhYmVsc1xyXG4gICAgICovXHJcbiAgICB2YXIgZ3IgPSBzdmcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJyIGF4aXNcIilcclxuICAgICAgICAuc2VsZWN0QWxsKFwiZ1wiKVxyXG4gICAgICAgIC5kYXRhKHIudGlja3MoNSkuc2xpY2UoMSkpXHJcbiAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwiZ1wiKTtcclxuXHJcbiAgICBnci5hcHBlbmQoXCJjaXJjbGVcIilcclxuICAgICAgICAuYXR0cihcInJcIiwgcik7XHJcblxyXG4gICAgZ3IuYXBwZW5kKFwidGV4dFwiKVxyXG4gICAgICAgIC5hdHRyKFwieVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiAtcihkKSAtIDQ7IH0pXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJyb3RhdGUoMTUpXCIpXHJcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIilcclxuICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBkOyB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgbGFiZWxzIGZvciBlYWNoIG1vbnRoIGFuZCB0aGUgbGluZXNcclxuICAgICAqIHRoYXQgZ28gb3V0IHRvIHRoZW0uXHJcbiAgICAgKi9cclxuICAgIHZhciBnYV9hID0gc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYSBheGlzXCIpXHJcbiAgICAgICAgLnNlbGVjdEFsbChcImdcIilcclxuICAgICAgICAuZGF0YShkMy5yYW5nZSgwLCAzNjAsIDMwKSlcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwicm90YXRlKFwiICsgKGQgLSA5MCkgKyBcIilcIjsgfSk7XHJcblxyXG4gICAgZ2FfYS5hcHBlbmQoXCJsaW5lXCIpXHJcbiAgICAgICAgLmF0dHIoXCJ4MlwiLCByYWRpdXMpO1xyXG5cclxuICAgIGdhX2EuYXBwZW5kKFwidGV4dFwiKVxyXG4gICAgICAgIC5hdHRyKFwieFwiLCByYWRpdXMgKyA2KVxyXG4gICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKVxyXG4gICAgICAgIC5zdHlsZShcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQgPCAzNjAgJiYgZCA+IDE4MCA/IFwiZW5kXCIgOiBudWxsOyB9KVxyXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQgPCAzNjAgJiYgZCA+IDE4MCA/IFwicm90YXRlKDE4MCBcIiArIChyYWRpdXMgKyA2KSArIFwiLDApXCIgOiBudWxsOyB9KVxyXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIE1PTlRIX0xBQkVMU1tkLzMwXTsgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyB0aGUgdGhyZXNob2xkIGxpbmVzXHJcbiAgICAgKi9cclxuICAgIHZhciB0aHJlc2hvbGRFbGVtID0gc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuc2VsZWN0QWxsKFwiZ1wiKVxyXG4gICAgICAgIC5kYXRhKHRocmVzaG9sZHMpXHJcbiAgICAgICAgLmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInJvdGF0ZShcIiArIChkLmRhdGFbMV1bMF0gLSA5MCkgKyBcIilcIjsgfSk7XHJcblxyXG4gICAgdGhyZXNob2xkRWxlbS5hcHBlbmQoXCJsaW5lXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIilcclxuICAgICAgICAuYXR0cihcIngyXCIsIHJhZGl1cyk7XHJcblxyXG4gICAgdGhyZXNob2xkRWxlbS5hcHBlbmQoXCJ0ZXh0XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uIChkKSB7IHZhciBkYXkgPSBkLmRhdGFbMV1bMF07IHJldHVybiBkYXkgPCAzNjAgJiYgZGF5ID4gMTgwID8gcmFkaXVzICsgMzAgOiByYWRpdXMgLSAzMH0pXHJcbiAgICAgICAgLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uIChkKSB7IHJldHVybiAoKCgoZC5kYXRhWzFdWzBdKSUzNjUpLzM2NSkgKiAoMipNYXRoLlBJKSkgKyA2OyB9KVxyXG4gICAgICAgIC5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKVxyXG4gICAgICAgIC5zdHlsZShcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uKGQpIHsgdmFyIGRheSA9IGQuZGF0YVsxXVswXTsgcmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyBcIm1pZGRsZVwiIDogbnVsbDsgfSlcclxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHZhciBkYXkgPSBkLmRhdGFbMV1bMF07IHJldHVybiBkYXkgPCAzNjAgJiYgZGF5ID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7IH0pXHJcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5sYWJlbDsgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEcmF3cyB0aGUgbGluZSB0byB0aGUgY2VudGVyIG9mIHRoZSBkYXRhXHJcbiAgICAgKi9cclxuICAgIHZhciBjZW50ZXJEYXkgPSBjZW50ZXJbMV1bMF07XHJcbiAgICB2YXIgY2VudGVyRGF5T3Bwb3NpdGUgPSAoY2VudGVyRGF5ICsgKDM2NS8yKSkgJSAzNjU7XHJcbiAgICB2YXIgY2VudGVyRGF5RGF0YSA9IFtjZW50ZXJEYXksIDEwMF07XHJcbiAgICB2YXIgY2VudGVyRGF5T3Bwb3NpdGVEYXRhID0gW2NlbnRlckRheU9wcG9zaXRlLCAxMDBdO1xyXG4gICAgdmFyIGdyb3dpbmdTZWFzb25EYXRhID0gW2NlbnRlckRheURhdGEsIGNlbnRlckRheU9wcG9zaXRlRGF0YV1cclxuXHJcbiAgICBkcmF3UG9sYXJQYXRoKGdyb3dpbmdTZWFzb25EYXRhLCBsaW5lLCBzdmcpXHJcbiAgICAgICAgLmNsYXNzZWQoXCJncm93aW5nLXNlYXNvbi1saW5lXCIsIFwidHJ1ZVwiKTtcclxuXHJcbiAgICBkcmF3UG9sYXJQYXRoKGNlbnRlciwgbGluZSwgc3ZnKVxyXG4gICAgICAgIC5jbGFzc2VkKFwiY2VudGVyLWxpbmVcIiwgXCJ0cnVlXCIpO1xyXG5cclxuICAgIHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKVxyXG4gICAgICAgIC5kYXRhKFtjZW50ZXJbMV1dKVxyXG4gICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgLmFwcGVuZChcImNpcmNsZVwiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJjZW50ZXJcIilcclxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHZhciBjb29ycyA9IGxpbmUoW2RdKS5zbGljZSgxKS5zbGljZSgwLCAtMSk7XHJcbiAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGNvb3JzICsgXCIpXCJcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwiIzAwMFwiKVxyXG4gICAgICAgIC5hdHRyKFwiZmlsbFwiLCBcIiNlYTBjNDhcIilcclxuICAgICAgICAub24oXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICB0aXAuc2hvdyhcIkNlbnRlcjogXCIgICsgU3RyaW5nKGRbMV0pLnN1YnN0cmluZygwLCA3KSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vbihcIm1vdXNlb3V0XCIsIGZ1bmN0aW9uIChkKSB7XHJcbiAgICAgICAgICAgIHRpcC5oaWRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB2YXIgY2hhcnRzID0ge307XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGxpbmUgdGhhdCB0aGUgZGF0YSBmb2xsb3dzXHJcbiAgICAgKi9cclxuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl0gPSB7XHJcbiAgICAgICAgXCJwYXRoXCIgOiBkcmF3UG9sYXJQYXRoKGF2ZXJhZ2VzLCBsaW5lLCBzdmcpXHJcbiAgICB9O1xyXG5cclxuICAgIGNoYXJ0c1t5ZWFyXSA9IHtcclxuICAgICAgICBcInBhdGhcIiA6IGRyYXdQb2xhclBhdGgoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnKVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XHJcbiAgICAgKi9cclxuICAgIGNoYXJ0cy5tZWRpYW5zLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoYXZlcmFnZXMsIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG4gICAgY2hhcnRzW3llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XHJcblxyXG4gICAgdmFyIGlucHV0d3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJpbnB1dC13cmFwcGVyXCIsIHRydWUpO1xyXG5cclxuICAgIGRhdGEua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImlucHV0XCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiaWRcIiwgXCJwb2xhci1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcclxuICAgICAgICAgICAgLmF0dHIoXCJ2YWx1ZVwiLCBrZXkpXHJcbiAgICAgICAgICAgIC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgKGtleSA9PT0geWVhcikgPyB0cnVlIDogZmFsc2UpXHJcbiAgICAgICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBncmFwaCB5ZWFyIGNsaWNrIG9mZlxyXG4gICAgICAgICAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcclxuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxyXG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnRMYWJlbDogIG5ld1llYXIgKyAnIHBvbGFyIHRpbWVzZXJpZXMgb2ZmJyxcclxuICAgICAgICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hhcnRzLmhhc093blByb3BlcnR5KG5ld1llYXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZ3JhcGggeWVhciBjbGljayBvZmZcclxuICAgICAgICAgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcclxuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6ICBuZXdZZWFyICsgJyBwb2xhciB0aW1lc2VyaWVzIG9uJyxcclxuICAgICAgICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdQb2xhclBhdGgoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnKTtcclxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKVxyXG4gICAgICAgICAgICAudGV4dChrZXkpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiZm9yXCIsIFwicG9sYXItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xyXG5cclxuICAgICAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpXHJcbiAgICAgICAgICAgIC5zdHlsZShcImJhY2tncm91bmRcIiwgcHVsbERpc3RpbmN0Q29sb3Ioa2V5ICE9PSBcIm1lZGlhbnNcIiA/IGtleSA6IDApKVxyXG4gICAgICAgICAgICAuY2xhc3NlZChcImdyYXBoLXBpcC1leGFtcGxlXCIsIHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIGNoZWNrYm94V3JhcHBlciA9IGlucHV0d3JhcHBlci5hcHBlbmQoXCJkaXZcIik7XHJcblxyXG4gICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImlucHV0XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIilcclxuICAgICAgICAuYXR0cihcImlkXCIsIFwicG9sYXItYXZlcmFnZS1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcclxuICAgICAgICAuYXR0cihcInZhbHVlXCIsIFwibWVkaWFuc1wiKVxyXG4gICAgICAgIC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgdHJ1ZSlcclxuICAgICAgICAub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGgucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGdyYXBoIHllYXIgY2xpY2sgb2ZmXHJcbiAgICAgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcclxuICAgICAgICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6ICBuZXdZZWFyICsgJyBwb2xhciB0aW1lc2VyaWVzIG9mZicsXHJcbiAgICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjaGFydHMuaGFzT3duUHJvcGVydHkobmV3WWVhcikpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBncmFwaCB5ZWFyIGNsaWNrIG9mZlxyXG4gICAgICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxyXG4gICAgICAgICAgICAgICAgICBldmVudExhYmVsOiAgbmV3WWVhciArICcgcG9sYXIgdGltZXNlcmllcyBvbicsXHJcbiAgICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3UG9sYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZylcclxuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKVxyXG4gICAgICAgIC50ZXh0KFwiQmFzZWxpbmVcIilcclxuICAgICAgICAuYXR0cihcImZvclwiLCBcInBvbGFyLWF2ZXJhZ2UtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xyXG5cclxuICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJkaXZcIilcclxuICAgICAgICAuc3R5bGUoXCJiYWNrZ3JvdW5kXCIsIHB1bGxEaXN0aW5jdENvbG9yKDApKVxyXG4gICAgICAgIC5jbGFzc2VkKFwiZ3JhcGgtcGlwLWV4YW1wbGVcIiwgdHJ1ZSk7XHJcblxyXG4gICAgdmFyIHRocmVzaG9sZENoZWNrYm94PSBpbnB1dHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpXHJcbiAgICAgICAgLmNsYXNzZWQoXCJ0aHJlc2hvbGQtY2hlY2tib3hcIiwgdHJ1ZSk7XHJcblxyXG4gICAgdGhyZXNob2xkQ2hlY2tib3guYXBwZW5kKFwiaW5wdXRcIilcclxuICAgICAgICAuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKVxyXG4gICAgICAgIC5hdHRyKFwiaWRcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpXHJcbiAgICAgICAgLnByb3BlcnR5KFwiY2hlY2tlZFwiLCB0cnVlKVxyXG4gICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB0aHJlc2hvbGRFbGVtLnN0eWxlKFwib3BhY2l0eVwiLCAodGhpcy5jaGVja2VkKSA/IDEgOiAwKTtcclxuICAgICAgICAgICAgdmFyIG9mZm9uID0gdGhpcy5jaGVja2VkID8gJ29mZicgOiAnb24nO1xyXG5cclxuICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZ3JhcGggdGhyZXNob2xkIGNsaWNrIG9mZlxyXG4gICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxyXG4gICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxyXG4gICAgICAgICAgICAgIGV2ZW50TGFiZWw6ICAndGhyZXNob2xkIHBvbGFyIHRpbWVzZXJpZXMgJyArIG9mZm9uLFxyXG4gICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB0aHJlc2hvbGRDaGVja2JveC5hcHBlbmQoXCJsYWJlbFwiKVxyXG4gICAgICAgIC50ZXh0KFwiVGhyZXNob2xkc1wiKVxyXG4gICAgICAgIC5hdHRyKFwiZm9yXCIsIFwidGhyZXNob2xkLWNoZWNrYm94LVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcclxufVxyXG5cclxuLyogUE9MQVIgR1JBUEggSEVMUEVSUyAqL1xyXG5cclxuZnVuY3Rpb24gZmluZFBvbGFyQ2VudGVyIChkYXRhKSB7XHJcbiAgICB2YXIgaSwgaiwgbGVuZ3RoLCBhcnI7XHJcbiAgICB2YXIgdG90YWxTdW0gPSAwO1xyXG4gICAgdmFyIGluY29tcGxldGVZZWFycyA9IDA7XHJcbiAgICB2YXIgc3VtO1xyXG4gICAgbGVuZ3RoID0gNDY7XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IGRhdGEua2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGFyciA9IGRhdGFbZGF0YS5rZXlzW2ldXTtcclxuICAgICAgICBpZiAoYXJyLmxlbmd0aCAhPT0gbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGluY29tcGxldGVZZWFycysrO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3VtID0gMDtcclxuICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGVuZ3RoLzI7IGorKykge1xyXG4gICAgICAgICAgICBzdW0gKz0gKGFycltqXVsxXSAtIGFycltqKzIzXVsxXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN1bSA9IHN1bSAvIDIzO1xyXG4gICAgICAgIHRvdGFsU3VtICs9IHN1bTtcclxuICAgIH1cclxuICAgIHRvdGFsU3VtID0gTWF0aC5hYnModG90YWxTdW0pIC8gKGRhdGEua2V5cy5sZW5ndGggLSBpbmNvbXBsZXRlWWVhcnMpO1xyXG5cclxuICAgIHZhciBhcmVhRGlmZiA9IDEwMDAwMDA7XHJcbiAgICB2YXIgY2hlY2tEaWZmO1xyXG4gICAgdmFyIGFyZWFJbmRleCA9IDA7XHJcbiAgICB2YXIgbGVmdEFyZWEsIHJpZ2h0QXJlYTtcclxuICAgIHZhciBhdmdzID0gZGF0YS5tZWRpYW5zO1xyXG4gICAgdmFyIGssIGNvdW50ZXI7XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aC8yOyBpKyspIHtcclxuICAgICAgICBsZWZ0QXJlYSA9IDA7XHJcbiAgICAgICAgcmlnaHRBcmVhID0gMDtcclxuICAgICAgICBmb3IgKGNvdW50ZXIgPSAwOyBjb3VudGVyIDwgbGVuZ3RoLzI7IGNvdW50ZXIrKykge1xyXG4gICAgICAgICAgICBqID0gKGkgKyBjb3VudGVyKSAlIDQ2O1xyXG4gICAgICAgICAgICBrID0gKGogKyAyMykgJSA0NjtcclxuXHJcbiAgICAgICAgICAgIGxlZnRBcmVhICs9IHBhcnNlSW50KGF2Z3Nbal0sIDEwKTtcclxuICAgICAgICAgICAgcmlnaHRBcmVhICs9IHBhcnNlSW50KGF2Z3Nba10sMTApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjaGVja0RpZmYgPSBNYXRoLmFicyhsZWZ0QXJlYSAtIHJpZ2h0QXJlYSk7XHJcbiAgICAgICAgaWYgKGNoZWNrRGlmZiA8IGFyZWFEaWZmKSB7XHJcbiAgICAgICAgICAgIGFyZWFEaWZmID0gY2hlY2tEaWZmO1xyXG4gICAgICAgICAgICBhcmVhSW5kZXggPSBpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgZmlyc3RSYWRpdXMgPSBwYXJzZUludChhdmdzW2FyZWFJbmRleF0sIDEwKTtcclxuICAgIHZhciBzZWNvbmRSYWRpdXMgPSBwYXJzZUludCgtYXZnc1thcmVhSW5kZXggKyAyM10sIDEwKTtcclxuXHJcbiAgICB2YXIgZmlyc3REaWZmID0gTWF0aC5hYnModG90YWxTdW0gLSBmaXJzdFJhZGl1cykgLSBNYXRoLmFicyh0b3RhbFN1bSAtIHNlY29uZFJhZGl1cyk7XHJcbiAgICB2YXIgc2Vjb25kRGlmZiA9IE1hdGguYWJzKC10b3RhbFN1bSAtIGZpcnN0UmFkaXVzKSAtIE1hdGguYWJzKC10b3RhbFN1bSAtIHNlY29uZFJhZGl1cyk7XHJcbiAgICBpZiAoc2Vjb25kRGlmZiA+IGZpcnN0RGlmZikge1xyXG4gICAgICAgIGFyZWFJbmRleCA9IGFyZWFJbmRleCArIDIzO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBjaXJjbGVjZW50ZXIgPSBbMCwgMF07XHJcbiAgICB2YXIgZGF0YWNlbnRlciA9IFsoYXJlYUluZGV4ICogOCkgKyAzLCB0b3RhbFN1bV07XHJcblxyXG4gICAgcmV0dXJuKFtjaXJjbGVjZW50ZXIsIGRhdGFjZW50ZXJdKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIHN0YXJ0RGF5IGlzIGFjdHVhbGx5IHRoZSBzZWFzb25hbGl0eSBpbmRleCwgaWYgaXQgb2NjdXJzIGFmdGVyIGp1bHkgaXQgc2hvdWxkIGJlIGZsaXBwZWRcclxuICovXHJcbmZ1bmN0aW9uIGZpbmRQb2xhclRocmVzaG9sZHMgKGRhdGEsIHN0YXJ0RGF5KSB7XHJcbiAgICB2YXIgc3RhcnRJbmRleCA9IE1hdGguZmxvb3IoKHN0YXJ0RGF5IC0gMykgLyA4KTtcclxuICAgIGlmIChzdGFydEluZGV4ID4gMjIpIHtcclxuICAgICAgICBzdGFydEluZGV4ID0gc3RhcnRJbmRleCAtIDIzO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBpLCBqLCBsZW5ndGgsIGFycjtcclxuICAgIHZhciB0b3RhbFN1bSA9IDA7XHJcbiAgICB2YXIgc3VtO1xyXG4gICAgbGVuZ3RoID0gNDY7XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaiA9IChzdGFydEluZGV4ICsgaSkgJSBsZW5ndGg7XHJcbiAgICAgICAgdG90YWxTdW0gKz0gcGFyc2VJbnQoZGF0YVtqXSwgMTApO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBmaWZ0ZWVuVGhyZXNob2xkID0gdG90YWxTdW0gKiAuMTU7XHJcbiAgICB2YXIgZWlnaHR5VGhyZXNob2xkID0gdG90YWxTdW0gKiAuODA7XHJcbiAgICB2YXIgZmlmdGVlbkluZGV4Rm91bmQgPSBmYWxzZSxcclxuICAgICAgICBlaWdodHlJbmRleEZvdW5kID0gZmFsc2U7XHJcbiAgICB2YXIgZmlmdGVlbkluZGV4LCBlaWdodHlJbmRleDtcclxuXHJcbiAgICB0b3RhbFN1bSA9IDA7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBqID0gKHN0YXJ0SW5kZXggKyBpKSAlIGxlbmd0aDtcclxuICAgICAgICB0b3RhbFN1bSArPSBwYXJzZUludChkYXRhW2pdLCAxMCk7XHJcbiAgICAgICAgaWYgKCFmaWZ0ZWVuSW5kZXhGb3VuZCAmJiB0b3RhbFN1bSA+IGZpZnRlZW5UaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgZmlmdGVlbkluZGV4ID0gajtcclxuICAgICAgICAgICAgZmlmdGVlbkluZGV4Rm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFlaWdodHlJbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZWlnaHR5VGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgIGVpZ2h0eUluZGV4ID0gajtcclxuICAgICAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgY2lyY2xlQ2VudGVyID0gWzAsIDBdO1xyXG5cclxuICAgIHZhciBmaWZ0ZWVuRW5kID0gWyhmaWZ0ZWVuSW5kZXggKiA4KSArIDMsIDEwMF07XHJcbiAgICB2YXIgZWlnaHR5RW5kID0gWyhlaWdodHlJbmRleCAqIDgpICsgMywgMTAwXTtcclxuXHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJsYWJlbFwiIDogXCIxNSVcIixcclxuICAgICAgICAgICAgXCJkYXRhXCIgOiBbY2lyY2xlQ2VudGVyLCBmaWZ0ZWVuRW5kXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcImxhYmVsXCIgOiBcIjgwJVwiLFxyXG4gICAgICAgICAgICBcImRhdGFcIiA6IFtjaXJjbGVDZW50ZXIsIGVpZ2h0eUVuZF1cclxuICAgICAgICB9XHJcbiAgICBdO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSEVMUEVSUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZnVuY3Rpb24gZHJhd0xpbmVhclBhdGgoZGF0YSwgbGluZSwgc3ZnKSB7XHJcbiAgICByZXR1cm4gc3ZnLmFwcGVuZChcInBhdGhcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibGluZVwiKVxyXG4gICAgICAgIC5hdHRyKFwiZFwiLCBsaW5lKGRhdGEpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd1BvbGFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcclxuICAgIHJldHVybiBzdmcuYXBwZW5kKFwicGF0aFwiKVxyXG4gICAgICAgIC5kYXR1bShkYXRhKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpXHJcbiAgICAgICAgLmF0dHIoXCJkXCIsIGxpbmUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3TGluZWFyUG9pbnRzKGRhdGEsIGxpbmUsIHN2ZywgYXZlcmFnZXMpIHtcclxuICAgIHJldHVybiBzdmcuc2VsZWN0QWxsKFwicG9pbnRcIilcclxuICAgICAgICAuZGF0YShkYXRhKVxyXG4gICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgLmFwcGVuZChcImNpcmNsZVwiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJwb2ludFwiKVxyXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgdmFyIHBvaW50ID0gQXJyYXkuaXNBcnJheShkKSA/IGQgOiBbKGkqOCkgKyAzLCBkXTtcclxuICAgICAgICAgICAgdmFyIGNvb3JzID0gbGluZShbcG9pbnRdKS5zbGljZSgxKS5zbGljZSgwLCAtMSk7XHJcbiAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGNvb3JzICsgXCIpXCJcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vLmF0dHIoXCJyXCIsIDMpXHJcbiAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCIjMDAwXCIpXHJcbiAgICAgICAgLmF0dHIoXCJmaWxsXCIsZnVuY3Rpb24oZCxpKXtcclxuICAgICAgICAgICAgdmFyIHZhbCA9IEFycmF5LmlzQXJyYXkoZCkgPyBkWzBdLnN1YnN0cmluZygwLCA0KSA6IDA7XHJcbiAgICAgICAgICAgIHJldHVybiBwdWxsRGlzdGluY3RDb2xvcih2YWwpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAub24oXCJtb3VzZW92ZXJcIiwgaGFuZGxlUG9pbnRNb3VzZW92ZXIpXHJcbiAgICAgICAgLm9uKFwibW91c2VvdXRcIiwgaGFuZGxlUG9pbnRNb3VzZW91dCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdmVyKGQpIHtcclxuICAgIHZhciB0aXBTdHJpbmcgPSBBcnJheS5pc0FycmF5KGQpID8gZm9ybWF0RGF0ZShkWzBdKSArIFwiOiBcIiAgKyBkWzFdIDogXCJBdmVyYWdlOiBcIiAgKyBkO1xyXG4gICAgdGlwLnNob3codGlwU3RyaW5nKTtcclxuICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuICAgIC8vdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDUpO1xyXG4gICAgLy90aGlzLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjJweFwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUG9pbnRNb3VzZW91dChkKSB7XHJcbiAgICB0aXAuaGlkZSgpO1xyXG4gICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxyXG4gICAgLy90aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgMyk7XHJcbiAgICAvL3RoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMXB4XCIpO1xyXG5cclxuICAgIHZhciBhY3RpdmVUeXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyYXBoLXR5cGUtYnRuIGFjdGl2ZVwiKVswXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpO1xyXG5cclxuICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvb2wgdGlwIG9uIGdyYXBoIGRvIHRoaXMgb24gdGhlIG1vdXNlb3V0IHNvIG1vdXNlb3ZlciBkb3NlIG5vdCBkbyBhIGxvdCBvZiBldmVudHMuLi4uXHJcbiAgICAvLyB3ZSBtaXNzIGEgZmV3IGJ1dCB0aGF0IGlzIGJldHRlciB0aGFuIG92ZXIgY291bnRpbmcuXHJcbiAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcclxuICAgICAgZXZlbnRBY3Rpb246ICdob3ZlcicsXHJcbiAgICAgIGV2ZW50TGFiZWw6IGFjdGl2ZVR5cGUgKyAnIHRvb2wgdGlwJyxcclxuICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2hlY2tib3god3JhcHBlciwga2V5LCB0eXBlLCB5ZWFyLCBjaGFydHMsIGRhdGEsIGxpbmUsIHN2ZywgYXZlcmFnZXMsIGxhdCwgbG5nKSB7XHJcbiAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIik7XHJcblxyXG4gICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImlucHV0XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIilcclxuICAgICAgICAuYXR0cihcImlkXCIsIHR5cGUgKyBcIi1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcclxuICAgICAgICAuYXR0cihcInZhbHVlXCIsIGtleSlcclxuICAgICAgICAucHJvcGVydHkoXCJjaGVja2VkXCIsIChrZXkgPT09IHllYXIpID8gdHJ1ZSA6IGZhbHNlKVxyXG4gICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgbmV3WWVhciA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZ3JhcGggeWVhciBjbGljayBvZmZcclxuICAgICAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xyXG4gICAgICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxyXG4gICAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcclxuICAgICAgICAgICAgICAgICAgZXZlbnRMYWJlbDogIG5ld1llYXIgKyAnIG92ZXJsYXBwaW5nIHRpbWVzZXJpZXMgb2ZmJyxcclxuICAgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3TGluZWFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xyXG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZ3JhcGggeWVhciBjbGljayBvblxyXG4gICAgICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxyXG4gICAgICAgICAgICAgICAgICBldmVudExhYmVsOiAgbmV3WWVhciArICcgb3ZlcmxhcHBpbmcgdGltZXNlcmllcyBvbicsXHJcbiAgICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwibGFiZWxcIilcclxuICAgICAgICAudGV4dChrZXkpXHJcbiAgICAgICAgLmF0dHIoXCJmb3JcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcclxuXHJcbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpXHJcbiAgICAgICAgLnN0eWxlKFwiYmFja2dyb3VuZFwiLCBwdWxsRGlzdGluY3RDb2xvcihrZXkgIT09IFwibWVkaWFuc1wiID8ga2V5IDogMCkpXHJcbiAgICAgICAgLmNsYXNzZWQoXCJncmFwaC1waXAtZXhhbXBsZVwiLCB0cnVlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcHVsbERpc3RpbmN0Q29sb3IgKHllYXIpIHtcclxuICAgIHZhciBjb2xvclJhbXAgPSBbXHJcbiAgICAgICAgXCIjZmZlNDc2XCIsXHJcbiAgICAgICAgXCIjMDM2NTkzXCIsXHJcbiAgICAgICAgXCIjMTE2YzkxXCIsXHJcbiAgICAgICAgXCIjMWU3MzkwXCIsXHJcbiAgICAgICAgXCIjMmM3YjhlXCIsXHJcbiAgICAgICAgXCIjMzk4MjhjXCIsXHJcbiAgICAgICAgXCIjNGM4YzhhXCIsXHJcbiAgICAgICAgXCIjNWU5NTg5XCIsXHJcbiAgICAgICAgXCIjNzE5Zjg3XCIsXHJcbiAgICAgICAgXCIjODNhODg2XCIsXHJcbiAgICAgICAgXCIjOTViMTgzXCIsXHJcbiAgICAgICAgXCIjYTZiYTgwXCIsXHJcbiAgICAgICAgXCIjYjhjMzdjXCIsXHJcbiAgICAgICAgXCIjY2FjYzc5XCIsXHJcbiAgICAgICAgXCIjZDZkMjc5XCIsXHJcbiAgICAgICAgXCIjZTJkNzc5XCIsXHJcbiAgICAgICAgXCIjZWZkZDc4XCIsXHJcbiAgICAgICAgXCIjZmJlMzc4XCJcclxuICAgIF07XHJcblxyXG4gICAgcmV0dXJuICh5ZWFyID09PSAwKSA/IFwiI2ZmZlwiIDogY29sb3JSYW1wW3BhcnNlSW50KHllYXIsIDEwKSAlIGNvbG9yUmFtcC5sZW5ndGhdO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIERBVEUgSEVMUEVSUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmZ1bmN0aW9uIHBhcnNlRGF0ZSAoZGF0ZSkge1xyXG4gICAgZGF0ZSA9IGRhdGUudG9TdHJpbmcoKTtcclxuICAgIHZhciB5ZWFyID0gZGF0ZS5zdWJzdHJpbmcoMCwgNCk7XHJcbiAgICB2YXIgbW9udGggPSBwYXJzZUludChkYXRlLnN1YnN0cmluZyg0LCA2KSwgMTApIC0gMTtcclxuICAgIHZhciBkYXkgPSBkYXRlLnN1YnN0cmluZyg2LCA4KTtcclxuXHJcbiAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlSnVsaWFuRGF5IChkYXRlKSB7XHJcbiAgICBpZiAodHlwZW9mKGRhdGUpID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcclxuICAgICAgICByZXR1cm4gZGF0ZS5nZXRET1koKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdERhdGUgKGRhdGUpIHtcclxuICAgIGlmIChkYXRlID09PSBcIkF2ZXJhZ2VcIikgeyByZXR1cm4gZGF0ZTsgfVxyXG5cclxuICAgIGRhdGUgPSBwYXJzZURhdGUoZGF0ZSk7XHJcbiAgICByZXR1cm4gZm9ybWF0TW9udGgoZGF0ZS5nZXRNb250aCgpKSArIFwiIFwiICsgb3JkaW5hbF9zdWZmaXhfb2YoZGF0ZS5nZXREYXRlKCkpICsgXCIsIFwiICsgZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRNb250aCAobW9udGgpIHtcclxuICAgIHN3aXRjaCAobW9udGgpIHtcclxuICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgIHJldHVybiBcIkphbi5cIlxyXG4gICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgcmV0dXJuIFwiRmViLlwiXHJcbiAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJNYXIuXCJcclxuICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgIHJldHVybiBcIkFwci5cIlxyXG4gICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgcmV0dXJuIFwiTWF5XCJcclxuICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgIHJldHVybiBcIkp1bi5cIlxyXG4gICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgcmV0dXJuIFwiSnVsLlwiXHJcbiAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICByZXR1cm4gXCJBdWcuXCJcclxuICAgICAgICBjYXNlIDg6XHJcbiAgICAgICAgICAgIHJldHVybiBcIlNlcC5cIlxyXG4gICAgICAgIGNhc2UgOTpcclxuICAgICAgICAgICAgcmV0dXJuIFwiT2N0LlwiXHJcbiAgICAgICAgY2FzZSAxMDpcclxuICAgICAgICAgICAgcmV0dXJuIFwiTm92LlwiXHJcbiAgICAgICAgY2FzZSAxMTpcclxuICAgICAgICAgICAgcmV0dXJuIFwiRGVjLlwiXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9yZGluYWxfc3VmZml4X29mKGRheSkge1xyXG4gICAgdmFyIGogPSBkYXkgJSAxMCxcclxuICAgICAgICBrID0gZGF5ICUgMTAwO1xyXG4gICAgaWYgKGogPT09IDEgJiYgayAhPT0gMTEpIHtcclxuICAgICAgICByZXR1cm4gZGF5ICsgXCJzdFwiO1xyXG4gICAgfVxyXG4gICAgaWYgKGogPT09IDIgJiYgayAhPT0gMTIpIHtcclxuICAgICAgICByZXR1cm4gZGF5ICsgXCJuZFwiO1xyXG4gICAgfVxyXG4gICAgaWYgKGogPT09IDMgJiYgayAhPT0gMTMpIHtcclxuICAgICAgICByZXR1cm4gZGF5ICsgXCJyZFwiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRheSArIFwidGhcIjtcclxufVxyXG5cclxudmFyIE1PTlRIX0xBQkVMUyA9IHtcclxuICAgIDA6IFwiSmFuXCIsXHJcbiAgICAxOiBcIkZlYlwiLFxyXG4gICAgMjogXCJNYXJcIixcclxuICAgIDM6IFwiQXByXCIsXHJcbiAgICA0OiBcIk1heVwiLFxyXG4gICAgNTogXCJKdW5cIixcclxuICAgIDY6IFwiSnVsXCIsXHJcbiAgICA3OiBcIkF1Z1wiLFxyXG4gICAgODogXCJTZXBcIixcclxuICAgIDk6IFwiT2N0XCIsXHJcbiAgICAxMDogXCJOb3ZcIixcclxuICAgIDExOiBcIkRlY1wiXHJcbn07XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2dyYXBoLmpzIiwiaW1wb3J0IHt1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0fSBmcm9tIFwiLi9wYW5lbFwiO1xyXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tIFwiLi9zaGFyZVwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEJpbmRUYWJFdmVudHMgKCkge1xyXG4gICAgZDMuc2VsZWN0QWxsKFwiLnBhbmVsLXRvcC1idG5cIikub24oXCJjbGlja1wiLCBoYW5kbGVUYWJIZWFkZXJCdG5DbGljayk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZXRBY3RpdmVUYWIgKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJwYW5lbC10b3AtYnRuIGFjdGl2ZVwiKVswXS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWFjdGl2ZVwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2sgKCkge1xyXG4gICAgLy8gSWYgdGhlIHNlY3Rpb24gaXMgYWxyZWFkeSBhY3RpdmUsIGRvIG5vdGhpbmdcclxuICAgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkgcmV0dXJuO1xyXG4gICAgXHJcbiAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBjbGljayBvbiBncmFwaCB0eXBlXHJcbiAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgZXZlbnRDYXRlZ29yeTogJ3RhYicsXHJcbiAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxyXG4gICAgICBldmVudExhYmVsOiB0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtYWN0aXZlXCIpLFxyXG4gICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcclxuICAgIH0pO1xyXG5cclxuICAgIEhhbmRsZVRhYkNoYW5nZSh0aGlzLmdldEF0dHJpYnV0ZShcImRhdGEtYWN0aXZlXCIpKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEhhbmRsZVRhYkNoYW5nZSAobmV3Q2xhc3MpIHtcclxuICAgIGRpc2FibGVBY3RpdmVUYWIoKTtcclxuICAgIGVuYWJsZVRhYihuZXdDbGFzcyk7XHJcbiAgICB1cGRhdGVTaGFyZVVybCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmFibGVUYWIgKG5ld0NsYXNzKSB7XHJcbiAgICBkMy5zZWxlY3QoXCIucGFuZWwtdG9wLWJ0bltkYXRhLWFjdGl2ZT0nXCIgKyBuZXdDbGFzcyArIFwiJ11cIikuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcclxuXHJcbiAgICBkMy5zZWxlY3RBbGwoXCIjbWFwLXdyYXBwZXIsICNyaWdodC1wYW5lbFwiKVxyXG4gICAgICAgIC5jbGFzc2VkKG5ld0NsYXNzLCB0cnVlKTtcclxuXHJcbiAgICBkMy5zZWxlY3QoXCIucGFuZWwtc2VjdGlvbi13cmFwcGVyW2RhdGEtYWN0aXZlPSdcIiArIG5ld0NsYXNzICsgXCInXVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xyXG5cclxuICAgIHRvZ2dsZU1hcFBhZGRpbmcoKTtcclxuICAgIHJlc2V0UGFuZWxXaWR0aCgpO1xyXG4gICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNhYmxlQWN0aXZlVGFiICgpIHtcclxuICAgIHZhciBhY3RpdmVDbGFzcyA9IGQzLnNlbGVjdChcIi5wYW5lbC10b3AtYnRuLmFjdGl2ZVwiKS5hdHRyKFwiZGF0YS1hY3RpdmVcIik7XHJcblxyXG4gICAgZDMuc2VsZWN0QWxsKCcjbWFwLXdyYXBwZXIsICNyaWdodC1wYW5lbCcpXHJcbiAgICAgICAgLmNsYXNzZWQoYWN0aXZlQ2xhc3MsIGZhbHNlKTtcclxuXHJcbiAgICBkMy5zZWxlY3RBbGwoJy5wYW5lbC10b3AtYnRuLmFjdGl2ZSwgLnBhbmVsLXNlY3Rpb24td3JhcHBlci5hY3RpdmUnKVxyXG4gICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmYWxzZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZU1hcFBhZGRpbmcgKCkge1xyXG4gICAgdmFyIHBhZGRpbmdSaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmlnaHQtcGFuZWxcIikub2Zmc2V0V2lkdGg7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcC13cmFwcGVyXCIpLnN0eWxlLnBhZGRpbmdSaWdodCA9IHBhZGRpbmdSaWdodCArIFwicHhcIjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNpbmNlIHRoZSBwYW5lbCBoYXMgY2hpbGQgZWxlbWVudHMgd2l0aCBwb3NpdGlvbiBmaXhlZCBhbmQgd2lkdGggaW5oZXJpdFxyXG4gKiB3ZSBuZWVkIHRvIGNsZWFyIHRoZSBpbmxpbmUgd2lkdGggcHJvcGVydHkgaWYgYW5kIG9ubHkgaWYgdGhlIGlubGluZVxyXG4gKiB3aWR0aCBpcyBsZXNzIHRoYW4gdGhlIG1pbiB3aWR0aFxyXG4gKi9cclxuZnVuY3Rpb24gcmVzZXRQYW5lbFdpZHRoICgpIHtcclxuICAgIHZhciBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmlnaHQtcGFuZWxcIik7XHJcbiAgICB2YXIgd2lkdGggPSBwYW5lbC5zdHlsZS53aWR0aDtcclxuICAgIGlmICghd2lkdGgpIHJldHVybjtcclxuXHJcbiAgICB2YXIgcGFuZWxNaW5XaWR0aCA9IGQzLnNlbGVjdChwYW5lbCkuc3R5bGUoJ21pbi13aWR0aCcpLnNsaWNlKDAsIC0yKTtcclxuICAgIGlmIChwYXJzZUludCh3aWR0aC5zbGljZSgwLCAtMiksIDEwKSA+IHBhcnNlSW50KHBhbmVsTWluV2lkdGgsIDEwKSkgcmV0dXJuO1xyXG5cclxuICAgIHBhbmVsLnN0eWxlLndpZHRoID0gXCJcIjtcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy90YWJzLmpzIiwiaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSAnLi9zaGFyZSdcclxuaW1wb3J0IHt1cGRhdGVMYXllck9wYWNpdHl9IGZyb20gXCIuL2xheWVyXCI7XHJcblxyXG4vLyBzZXQgaXQgbWFudWFsbHkgZm9yIG5vd1xyXG5jb25zdCBPUEFDSVRZX1JBTkdFX01BWCA9IDkwXHJcblxyXG52YXIgb3BhY2l0eVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgLmRvbWFpbihbMSwgMF0pXHJcbiAgICAucmFuZ2UoWzAsIE9QQUNJVFlfUkFOR0VfTUFYXSlcclxuICAgIC5jbGFtcCh0cnVlKVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbiAobGF5ZXIsIHNsaWRlckhhbmRsZSwgb3BhY2l0eSkge1xyXG4gICAgb3BhY2l0eSA9IG9wYWNpdHkgfHwgbGF5ZXIub3BhY2l0eVxyXG4gICAgc2xpZGVySGFuZGxlLnN0eWxlLnRvcCA9ICcnK29wYWNpdHlTY2FsZShvcGFjaXR5KSsncHgnXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlT3BhY2l0eVNsaWRlciAobGF5ZXIpIHtcclxuICAgIHZhciBsYXllck9wYWNpdHkgPSBsYXllci5vcGFjaXR5ICE9PSB1bmRlZmluZWQgPyBsYXllci5vcGFjaXR5IDogMVxyXG4gICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgdmFyIHNsaWRlclRyYWNrT3ZlcmxheSA9IG1ha2VTbGlkZXJUcmFjayhsYXllciwgbGF5ZXJPcGFjaXR5KVxyXG4gICAgdmFyIGljb25XcmFwcGVyQ2xvc2VkID0gbWFrZU9wYWNpdHlJY29uV3JhcHBlcignY2xvc2VkJywgbGF5ZXIsIHNsaWRlclRyYWNrT3ZlcmxheSlcclxuXHJcbiAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktc2xpZGVyLXdyYXBwZXInKVxyXG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChzbGlkZXJUcmFja092ZXJsYXkpXHJcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGljb25XcmFwcGVyQ2xvc2VkKVxyXG4gICAgcmV0dXJuIHdyYXBwZXJcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZU9wYWNpdHlJY29uV3JhcHBlcihzdGF0ZSwgbGF5ZXIsIHNsaWRlclRyYWNrT3ZlcmxheSkge1xyXG4gICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgdmFyIGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxyXG4gICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LWljb24td3JhcHBlcicpXHJcbiAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktaWNvbicpXHJcbiAgICBpY29uLmNsYXNzTGlzdC5hZGQoc3RhdGUpXHJcbiAgICBpY29uLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZ3Mvb3BhY2l0eS1pY29uLScrc3RhdGUrJy02NHg2NC5wbmcnKVxyXG4gICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ2FsdCcsICdVc2UgdGhpcyBzbGlkZXIgdG8gYWRqdXN0IHRyYW5zcGFyZW5jeSBmb3IgdGhlICcgKyBsYXllci5uYW1lICsgJyBsYXllcicpXHJcbiAgICBpY29uLnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnVXNlIHRoaXMgc2xpZGVyIHRvIGFkanVzdCB0cmFuc3BhcmVuY3kgZm9yIHRoZSAnICsgbGF5ZXIubmFtZSArICcgbGF5ZXInKVxyXG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChpY29uKVxyXG4gICAgd3JhcHBlci5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB2YXIgc2xpZGVySGFuZGxlID0gc2xpZGVyVHJhY2tPdmVybGF5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ29wYWNpdHktc2xpZGVyLWhhbmRsZScpWzBdXHJcbiAgICAgICAgdXBkYXRlTGF5ZXJPcGFjaXR5KGxheWVyLCAwKVxyXG4gICAgICAgIHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbihsYXllciwgc2xpZGVySGFuZGxlLCAwKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHdyYXBwZXJcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZVNsaWRlclRyYWNrKGxheWVyLCBsYXllck9wYWNpdHkpIHtcclxuXHJcbiAgICB2YXIgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICB2YXIgdHJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgdmFyIHNsaWRlckhhbmRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcblxyXG4gICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci10cmFjay1vdmVybGF5JylcclxuICAgIHRyYWNrLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktc2xpZGVyLXRyYWNrJylcclxuICAgIHNsaWRlckhhbmRsZS5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci1oYW5kbGUnKVxyXG5cclxuICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQodHJhY2spXHJcbiAgICBvdmVybGF5LmFwcGVuZChzbGlkZXJIYW5kbGUpXHJcblxyXG4gICAgaWYgKGxheWVyLmFjdGl2ZSkgc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uKGxheWVyLCBzbGlkZXJIYW5kbGUpXHJcbiAgICBzZXREcmFnRXZlbnRMaXN0ZW5lcihvdmVybGF5LCBsYXllciwgbGF5ZXJPcGFjaXR5KVxyXG5cclxuICAgIHJldHVybiBvdmVybGF5XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldERyYWdFdmVudExpc3RlbmVyKG92ZXJsYXksIGxheWVyLCBsYXllck9wYWNpdHkpIHtcclxuICAgIGQzLnNlbGVjdChvdmVybGF5KS5jYWxsKGQzLmRyYWcoKVxyXG4gICAgICAgIC5vbignc3RhcnQgZHJhZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHNsaWRlckhhbmRsZSA9IG92ZXJsYXkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnb3BhY2l0eS1zbGlkZXItaGFuZGxlJylbMF1cclxuICAgICAgICAgICAgdmFyIG5ld09wYWNpdHkgPSBjYWxjT3BhY2l0eUZyb21Nb3VzZVBvcyhvdmVybGF5KVxyXG4gICAgICAgICAgICB1cGRhdGVMYXllck9wYWNpdHkobGF5ZXIsIG5ld09wYWNpdHkpXHJcbiAgICAgICAgICAgIHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbihsYXllciwgc2xpZGVySGFuZGxlLCBuZXdPcGFjaXR5KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm9uKCdlbmQnLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgdmFyIG5ld09wYWNpdHkgPSBjYWxjT3BhY2l0eUZyb21Nb3VzZVBvcyhvdmVybGF5KVxyXG5cclxuICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIG9wYWNpdHkgc2xpZGVyIGNoYW5nZVxyXG4gICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XHJcbiAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdvcGFjaXR5IHNsaWRlcicsXHJcbiAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2hhbmdlJyxcclxuICAgICAgICAgICAgZXZlbnRMYWJlbDogJ3tcIicgKyBsYXllci5uYW1lICsgJ1wiOiBcIicgKyBuZXdPcGFjaXR5ICsgJ1wifScsXHJcbiAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB1cGRhdGVTaGFyZVVybCgpXHJcbiAgICAgICAgfSlcclxuICAgIClcclxufVxyXG5cclxuZnVuY3Rpb24gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSkge1xyXG4gICAgdmFyIHlQb3MgPSBkMy5tb3VzZShvdmVybGF5KVsxXVxyXG4gICAgdmFyIG5ld09wYWNpdHkgPSBvcGFjaXR5U2NhbGUuaW52ZXJ0KHlQb3MpXHJcbiAgICByZXR1cm4gbmV3T3BhY2l0eVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL29wYWNpdHlTbGlkZXIuanMiLCIvKlxyXG4gIFwibG9nb1wiOiB7XHJcbiAgICBcImltYWdlXCI6IFwiaW1ncy9sYW5kYXRfbG9nb19ibHVlLnBuZ1wiLFxyXG4gICAgXCJhbHRcIjogXCJMb2dvIGZvciB0aGUgTGFuRGF0IHByb2plY3RcIixcclxuICAgIFwibGlua1wiOiBcImh0dHBzOi8vbGFuZGF0LWRldi5uZW1hYy5vcmdcIixcclxuICAgIFwibG9jYXRpb25cIjogW1wiYm90dG9tXCIsIFwicmlnaHRcIl1cclxuICB9LFxyXG4qL1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQ3JlYXRlTG9nbyAobG9nb2RhdGEpIHtcclxuICAgIGlmICghbG9nb2RhdGEuaW1hZ2UpIHJldHVybjtcclxuXHJcbiAgICB2YXIgbG9nb1dyYXBwZXIgPSBjcmVhdGVMb2dvV3JhcHBlcigpO1xyXG4gICAgdmFyIGxvZ29JbWFnZSA9IGNyZWF0ZUxvZ29JbWFnZShsb2dvZGF0YSk7XHJcbiAgICB2YXIgbG9nb0xpbmsgPSBsb2dvZGF0YS5saW5rID8gY3JlYXRlTG9nb0xpbmsobG9nb2RhdGEubGluaykgOiBudWxsO1xyXG5cclxuICAgIGlmIChsb2dvTGluaykge1xyXG4gICAgICAgIGxvZ29MaW5rLmFwcGVuZENoaWxkKGxvZ29JbWFnZSk7XHJcbiAgICAgICAgbG9nb1dyYXBwZXIuYXBwZW5kQ2hpbGQobG9nb0xpbmspO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBsb2dvV3JhcHBlci5hcHBlbmRDaGlsZChsb2dvSW1hZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBpbnNlcnRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShsb2dvZGF0YS5sb2NhdGlvbilbMF07XHJcbiAgICB2YXIgZXhpc3RpbmdDaGlsZCA9IGluc2VydEVsZW1lbnQuZmlyc3RDaGlsZDtcclxuICAgIGluc2VydEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGxvZ29XcmFwcGVyLCBleGlzdGluZ0NoaWxkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlTG9nb1dyYXBwZXIgKCkge1xyXG4gICAgdmFyIGxvZ29XcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGQzLnNlbGVjdChsb2dvV3JhcHBlcikuY2xhc3NlZChcInByb2plY3QtbG9nb1wiLCB0cnVlKTtcclxuICAgIHJldHVybiBsb2dvV3JhcHBlcjtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlTG9nb0ltYWdlIChsb2dvZGF0YSkge1xyXG4gICAgdmFyIGxvZ29JbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICBsb2dvSW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIGxvZ29kYXRhLmltYWdlKTtcclxuICAgIGlmIChsb2dvZGF0YS5sYWJlbCkge1xyXG4gICAgICAgIGxvZ29JbWFnZS5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgbG9nb2RhdGEubGFiZWwpO1xyXG4gICAgICAgIGxvZ29JbWFnZS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBsb2dvZGF0YS5sYWJlbCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbG9nb0ltYWdlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVMb2dvTGluayAobGluaykge1xyXG4gICAgdmFyIGxvZ29MaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7XHJcbiAgICBsb2dvTGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIGxpbmspO1xyXG4gICAgbG9nb0xpbmsuc2V0QXR0cmlidXRlKFwidGFyZ2V0XCIsIFwiX2JsYW5rXCIpO1xyXG5cclxuICAgIGxvZ29MaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIGNsaWNraW5nIGxvZ29cclxuICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XHJcbiAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXHJcbiAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXHJcbiAgICAgICAgZXZlbnRMYWJlbDogJ2xhbmRhdCBsb2dvJyxcclxuICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gbG9nb0xpbms7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvbG9nby5qcyJdLCJzb3VyY2VSb290IjoiIn0=