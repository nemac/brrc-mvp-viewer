!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=n(3),i=r(o),c=n(22),s=n(26),l=n(28),u=n(29),p=n(24),d=n(25),f=n(23),v=n(31),h=r(v),m=n(27),y=(n(32),function(e){(0,a.ParseConfig)(e,g),(0,l.SetupGraphs)(),(0,u.BindTabEvents)(),(0,d.BindCopyLinkEvents)()}),g=function(e){(0,d.AddShareSettingsToConfig)(e);var t=(0,p.CreateMap)(e.map);(0,s.CreateBaseLayers)(t,e.baselayers),(0,f.CreateDefaultLayers)(e.layers,e["active-layers"]),(0,c.SetupPanel)(e.layers,e.layout),(0,i.default)(t),(0,h.default)(e.logo),e.tab&&(0,u.HandleTabChange)(e.tab),e.graph&&(0,l.HandleGraphTabChange)(e.graph),(0,l.BindGraphEvents)(t),(0,d.BindUpdateShareUrl)(t),(0,m.SetupPointsOfInterest)(t,e.pois),(0,d.updateShareUrl)()};window.Base=y,t.default={Base:y}},function(e,t){"use strict";function n(e,t){a(e,t)}function r(e){var t;return t=!window.XMLHttpRequest&&window.ActiveXObject?new window.ActiveXObject("MSXML2.XMLHTTP.3.0"):new XMLHttpRequest,t.onreadystatechange=function(){4===t.readyState&&e(t.response)},t}function a(e,t){var n=r(function(e){t(o(e))});n.open("GET",e,!0),n.send(),console.log("hi")}function o(e){return e=JSON.parse(e),i(e),c(e),e}function i(e){e.map||(e.map={})}function c(e){var t,n,r=e.layers,a=e.mapserverUrl;e["active-layers"];for(var o in r){if(!r.hasOwnProperty(o))return;for(t=r[o],n=0;n<t.length;n++)l(t[n],a),s(t[n],e.defaultLayerOpacity)}}function s(e,t){e.opacity=e.opacity||t}function l(e,t){e.url=e.url||t}Object.defineProperty(t,"__esModule",{value:!0}),t.ParseConfig=n,t.GetAjaxObject=r},function(e,t,n){"use strict";function r(e){var t=new a.OpenStreetMapProvider,n=new a.GeoSearchControl({provider:t,showMarker:!1,autoComplete:!0,showPopup:!1});e.addControl(n);var r=n.searchElement.elements;L.DomEvent.on(r.container,"click",function(e){L.DomEvent.stopPropagation(e);for(var t=r.form.getElementsByClassName("results")[0].children,n=0;n<t.length;n++)e.target===t[n]&&r.container.classList.remove("active");ga("send","event",{eventCategory:"map",eventAction:"search",eventLabel:"click",nonInteraction:!1})}),L.DomEvent.on(r.container,"keydown",function(e){L.DomEvent.stopPropagation(e),13!=e.which&&13!=e.keyCode||(r.container.classList.remove("active"),ga("send","event",{eventCategory:"map",eventAction:"search address",eventLabel:e.target.value,nonInteraction:!1}))})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=n(4)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(5);Object.defineProperty(t,"GeoSearchControl",{enumerable:!0,get:function(){return r(a).default}});var o=n(13);Object.defineProperty(t,"SearchElement",{enumerable:!0,get:function(){return r(o).default}});var i=n(17);Object.defineProperty(t,"BingProvider",{enumerable:!0,get:function(){return r(i).default}});var c=n(19);Object.defineProperty(t,"EsriProvider",{enumerable:!0,get:function(){return r(c).default}});var s=n(20);Object.defineProperty(t,"GoogleProvider",{enumerable:!0,get:function(){return r(s).default}});var l=n(21);Object.defineProperty(t,"OpenStreetMapProvider",{enumerable:!0,get:function(){return r(l).default}});var u=n(18);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return r(u).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){if(!L||!L.Control||!L.Control.extend)throw new Error("Leaflet must be loaded before instantiating the GeoSearch control");for(var e=L.Control.extend(m),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e,[null].concat(n)))}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=(r(o),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});t.default=a;var c=n(12),s=r(c),l=n(13),u=r(l),p=n(16),d=r(p),f=n(14),v=n(15),h=function(){return{position:"topleft",style:"button",showMarker:!0,showPopup:!1,marker:{icon:new L.Icon.Default,draggable:!1},maxMarkers:1,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",notFoundMessage:"Sorry, that address could not be found.",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",msgbox:"leaflet-bar message",form:"",input:""},autoComplete:!0,autoCompleteDelay:250}},m={initialize:function(e){var t=this;this.markers=new L.FeatureGroup,this.options=i({},h(),e);var n=this.options,r=n.style,a=n.classNames,o=n.searchLabel,c=n.autoComplete,l=n.autoCompleteDelay;"button"!==r&&(this.options.classNames.container+=" "+e.style),this.searchElement=new u.default(i({},this.options,{handleSubmit:function(e){return t.onSubmit(e)}}));var p=this.searchElement.elements,v=p.container,m=p.form,y=p.input;v.addEventListener("dblclick",function(e){e.stopPropagation()});var g=(0,f.createElement)("a",a.button,v);g.title=o,g.href="#",g.addEventListener("click",function(e){t.onClick(e)},!1),c&&(this.resultList=new d.default({handleClick:function(e){var n=e.result;y.value=n.label,t.onSubmit({query:n.label})}}),m.appendChild(this.resultList.elements.container),y.addEventListener("keyup",(0,s.default)(function(e){return t.autoSearch(e)},l),!0),y.addEventListener("keydown",function(e){return t.selectResult(e)},!0),y.addEventListener("keydown",function(e){return t.clearResults(e)},!0)),this.elements={button:g}},onAdd:function(e){var t=this.options,n=t.showMarker,r=t.style;if(this.map=e,n&&this.markers.addTo(e),"bar"===r){var a=this.searchElement.elements.form,o=e.getContainer().querySelector(".leaflet-control-container"),i=(0,f.createElement)("div","leaflet-control-geosearch bar");i.appendChild(a),o.appendChild(i),this.elements.container=i}return this.searchElement.elements.container},onRemove:function(){var e=this.elements.container;return e&&e.remove(),this},onClick:function(e){e.preventDefault();var t=this.searchElement.elements,n=t.container,r=t.input;n.classList.contains("active")?(0,f.removeClassName)(n,"active"):((0,f.addClassName)(n,"active"),r.focus())},selectResult:function(e){if([v.ARROW_DOWN_KEY,v.ARROW_UP_KEY].includes(e.keyCode)){e.preventDefault();var t=this.searchElement.elements.input,n=this.resultList,r=this.resultList.count()-1,a="ArrowDown"===e.code?1+~~n.selected:~~n.selected-1,o=a<0?r:a>r?0:a,i=n.select(o);t.value=i.label}},clearResults:function(e){e.keyCode===v.ESCAPE_KEY&&this.resultList.clear()},autoSearch:function(e){return new Promise(function(t,n){var r,a,o;return v.SPECIAL_KEYS.includes(e.keyCode)?t():(r=e.target.value,a=this.options.provider,a.search({query:r}).then(function(e){return o=e,this.resultList.render(o),t()}.$asyncbind(this,n),n))}.$asyncbind(this))},onSubmit:function(e){return new Promise(function(t,n){var r,a;return r=this.options.provider,r.search(e).then(function(e){return a=e,a&&a.length>0&&this.showResult(a[0]),t()}.$asyncbind(this,n),n)}.$asyncbind(this))},showResult:function(e){var t=Object.keys(this.markers._layers);t.length>=this.options.maxMarkers&&this.markers.removeLayer(t[0]);var n=this.addMarker(e);this.centerMap(e),this.map.fireEvent("geosearch/showlocation",{location:e,marker:n})},addMarker:function(e){var t=this.options,n=t.marker,r=t.showPopup,a=new L.Marker([e.y,e.x],n);return a.bindPopup(e.label),this.markers.addLayer(a),r&&a.openPopup(),a},centerMap:function(e){var t=this.options,n=t.retainZoomLevel,r=t.animateZoom,a=new L.LatLngBounds(e.bounds),o=a.isValid()?a:this.markers.getBounds();!n&&a.isValid()?this.map.fitBounds(o,{animate:r}):this.map.setView(o.getCenter(),this.getZoom(),{animate:r})},getZoom:function(){var e=this.options,t=e.retainZoomLevel,n=e.zoomLevel;return t?this.map.getZoom():n}}},function(e,t,n){"use strict";function r(e,t){if(Function.prototype.$asyncspawn||Object.defineProperty(Function.prototype,"$asyncspawn",{value:r,enumerable:!1,configurable:!0,writable:!0}),this instanceof Function){var n=this;return new e(function(e,r){function a(t,n){var i;try{if(i=t.call(o,n),i.done){if(i.value!==e){if(i.value&&i.value===i.value.then)return i.value(e,r);e&&e(i.value),e=null}return}i.value.then?i.value.then(function(e){a(o.next,e)},function(e){a(o.throw,e)}):a(o.next,i.value)}catch(e){return r&&r(e),void(r=null)}}var o=n.call(t,e,r);a(o.next)})}}var a=function(e,t){for(var n=t.toString(),r="return "+n,a=n.match(/.*\(([^)]*)\)/)[1],o=/['"]!!!([^'"]*)['"]/g,i=[];;){var c=o.exec(r);if(!c)break;i.push(c)}return i.reverse().forEach(function(t){r=r.slice(0,t.index)+e[t[1]]+r.substr(t.index+t[0].length)}),r=r.replace(/\/\*[^*]*\*\//g," ").replace(/\s+/g," "),new Function(a,r)()}({zousan:n(7).toString(),thenable:n(11).toString()},function e(t,n){function r(){return a.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,a){return function o(i){for(;i;){if(i.then)return i=i.then(o,r),a?void 0:i;try{if(i.pop){if(i.length)return i.pop()?t.call(e):i;i=n}else i=i.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable="!!!thenable"(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory="!!!zousan")());var a=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return a.apply(t,arguments)}catch(e){return n(e)}}}});a(),r(),e.exports={$asyncbind:a,$asyncspawn:r}},function(e,t,n){(function(t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){function a(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function o(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function i(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===(void 0===t?"undefined":r(t))&&t.nextTick||"function"==typeof n&&n||function(e){setTimeout(e,0)};var c=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===a&&(n.splice(0,a),r=0)}}var n=[],r=0,a=1024;return function(a){n.push(a),n.length-r==1&&e(t)}}();return a.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":r(e))))try{var n=0,a=e.then;if("function"==typeof a)return void a.call(e,function(e){n++||t.resolve(e)},function(e){n++||t.reject(e)})}catch(e){return void(n||this.reject(e))}this.state=o,this.v=e,t.c&&c(function(){for(var n=0,r=t.c.length;n<r;n++)o(t.c[n],e)})}},reject:function(e){if(void 0===this.state){this.state=i,this.v=e;var t=this.c;t&&c(function(){for(var n=0,r=t.length;n<r;n++)i(t[n],e)})}},then:function(e,t){var n=new a,r={y:e,n:t,p:n};if(void 0===this.state)this.c?this.c.push(r):this.c=[r];else{var o=this.state,i=this.v;c(function(){o(r,i)})}return n}},a.resolve=function(e){if(e&&e instanceof a)return e;var t=new a;return t.resolve(e),t},a.reject=function(e){if(e&&e instanceof a)return e;var t=new a;return t.reject(e),t},a.version="2.3.3-nodent",a}}).call(t,n(8),n(9).setImmediate)},function(e,t){"use strict";function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(e){if(p===clearTimeout)return clearTimeout(e);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function i(){h&&f&&(h=!1,f.length?v=f.concat(v):m=-1,v.length&&c())}function c(){if(!h){var e=a(i);h=!0;for(var t=v.length;t;){for(f=v,v=[];++m<t;)f&&f[m].run();m=-1,t=v.length}f=null,h=!1,o(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var u,p,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(e){p=r}}();var f,v=[],h=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new s(e,t)),1!==v.length||h||a(c)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";function r(e,t){this._id=e,this._clearFn=t}var a=Function.prototype.apply;t.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(10),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){"use strict";!function(e,n){function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[s]=r,c(s),s++}function a(e){delete l[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function i(e){if(u)setTimeout(i,0,e);else{var t=l[e];if(t){u=!0;try{o(t)}finally{a(e),u=!1}}}}if(!e.setImmediate){var c,s=1,l={},u=!1,p=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){i(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},c=function(t){e.port2.postMessage(t)}}():p&&"onreadystatechange"in p.createElement("script")?function(){var e=p.documentElement;c=function(t){var n=p.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(i,0,e)}}(),d.setImmediate=r,d.clearImmediate=a}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(t,function(){return this}(),n(8))},function(e,t){"use strict";e.exports=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,a){try{var o=a?a(r):r;if(n===o)return n.reject(new TypeError("Promise resolution loop"));e(o)?o.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(o)}catch(e){n.reject(e)}}function n(){}function r(e){}function a(e,t){this.resolve=e,this.reject=t}function o(r,a){var o=new n;try{this._resolver(function(n){return e(n)?n.then(r,a):t(o,n,r)},function(e){t(o,e,a)})}catch(e){t(o,e,a)}return o}function i(e){this._resolver=e,this.then=o}return n.prototype={resolve:r,reject:r,then:a},i.resolve=function(e){return i.isThenable(e)?e:{then:function(t){return t(e)}}},i.isThenable=e,i}},function(e,t){(function(t){"use strict";function n(e,t,n){function a(t){var n=h,r=m;return h=m=void 0,C=t,g=e.apply(r,n)}function o(e){return C=e,b=setTimeout(u,t),O?a(e):g}function c(e){var n=e-w,r=e-C,a=t-n;return S?E(a,y-r):a}function l(e){var n=e-w,r=e-C;return void 0===w||n>=t||n<0||S&&r>=y}function u(){var e=L();if(l(e))return p(e);b=setTimeout(u,c(e))}function p(e){return b=void 0,_&&h?a(e):(h=m=void 0,g)}function d(){void 0!==b&&clearTimeout(b),C=0,h=w=m=b=void 0}function f(){return void 0===b?g:p(L())}function v(){var e=L(),n=l(e);if(h=arguments,m=this,w=e,n){if(void 0===b)return o(w);if(S)return b=setTimeout(u,t),a(w)}return void 0===b&&(b=setTimeout(u,t)),g}var h,m,y,g,b,w,C=0,O=!1,S=!1,_=!0;if("function"!=typeof e)throw new TypeError(s);return t=i(t)||0,r(n)&&(O=!!n.leading,S="maxWait"in n,y=S?k(i(n.maxWait)||0,t):y,_="trailing"in n?!!n.trailing:_),v.cancel=d,v.flush=f,v}function r(e){var t=void 0===e?"undefined":c(e);return!!e&&("object"==t||"function"==t)}function a(e){return!!e&&"object"==(void 0===e?"undefined":c(e))}function o(e){return"symbol"==(void 0===e?"undefined":c(e))||a(e)&&w.call(e)==u}function i(e){if("number"==typeof e)return e;if(o(e))return l;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(p,"");var n=f.test(e);return n||v.test(e)?h(e.slice(2),n?2:8):d.test(e)?l:+e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="Expected a function",l=NaN,u="[object Symbol]",p=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,v=/^0o[0-7]+$/i,h=parseInt,m="object"==(void 0===t?"undefined":c(t))&&t&&t.Object===Object&&t,y="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,g=m||y||Function("return this")(),b=Object.prototype,w=b.toString,k=Math.max,E=Math.min,L=function(){return g.Date.now()};e.exports=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=(function(e){e&&e.__esModule?e:{default:e}}(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=n(14),c=n(15),s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.handleSubmit,o=void 0===a?function(){}:a,c=n.searchLabel,s=void 0===c?"search":c,l=n.classNames,u=void 0===l?{}:l;r(this,e);var p=(0,i.createElement)("div",["geosearch",u.container].join(" ")),d=(0,i.createElement)("form",["",u.form].join(" "),p),f=(0,i.createElement)("input",["glass",u.input].join(" "),d);f.type="text",f.placeholder=s,f.addEventListener("input",function(e){t.onInput(e)},!1),f.addEventListener("keyup",function(e){t.onKeyUp(e)},!1),f.addEventListener("keypress",function(e){t.onKeyPress(e)},!1),f.addEventListener("focus",function(e){t.onFocus(e)},!1),f.addEventListener("blur",function(e){t.onBlur(e)},!1),this.elements={container:p,form:d,input:f},this.handleSubmit=o}return o(e,[{key:"onFocus",value:function(){(0,i.addClassName)(this.elements.form,"active")}},{key:"onBlur",value:function(){(0,i.removeClassName)(this.elements.form,"active")}},{key:"onSubmit",value:function(e){return new Promise(function(t,n){var r,a,o;return e.preventDefault(),e.stopPropagation(),r=this.elements,a=r.input,o=r.container,(0,i.removeClassName)(o,"error"),(0,i.addClassName)(o,"pending"),this.handleSubmit({query:a.value}).then(function(e){return(0,i.removeClassName)(o,"pending"),t()}.$asyncbind(this,n),n)}.$asyncbind(this))}},{key:"onInput",value:function(){var e=this.elements.container;this.hasError&&((0,i.removeClassName)(e,"error"),this.hasError=!1)}},{key:"onKeyUp",value:function(e){var t=this.elements,n=t.container,r=t.input;e.keyCode===c.ESCAPE_KEY&&((0,i.removeClassName)(n,"pending"),(0,i.removeClassName)(n,"active"),r.value="",document.body.focus(),document.body.blur())}},{key:"onKeyPress",value:function(e){e.keyCode===c.ENTER_KEY&&this.onSubmit(e)}},{key:"setQuery",value:function(e){this.elements.input.value=e}}]),e}();t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.createElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElement(e);return r.className=t,n&&n.appendChild(r),r};t.createScriptElement=function(e,t){var r=n("script",null,document.body);return r.setAttribute("type","text/javascript"),new Promise(function(n){window[t]=function(e){r.remove(),delete window[t],n(e)},r.setAttribute("src",e)})},t.addClassName=function(e,t){e&&!e.classList.contains(t)&&e.classList.add(t)},t.removeClassName=function(e,t){e&&e.classList.contains(t)&&e.classList.remove(t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.ENTER_KEY=13,r=t.ESCAPE_KEY=27,a=t.ARROW_DOWN_KEY=40,o=t.ARROW_UP_KEY=38,i=t.ARROW_LEFT_KEY=37,c=t.ARROW_RIGHT_KEY=39;t.SPECIAL_KEYS=[n,r,a,o,i,c]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(14),i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join(" ").trim()},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.handleClick,a=void 0===n?function(){}:n,c=t.classNames,l=void 0===c?{}:c;r(this,e),s.call(this),this.props={handleClick:a,classNames:l},this.selected=-1;var u=(0,o.createElement)("div",i("results",l.container)),p=(0,o.createElement)("div",i(l.item));u.addEventListener("click",this.onClick,!0),this.elements={container:u,resultItem:p}}return a(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.elements,n=t.container,r=t.resultItem;this.clear(),e.forEach(function(e,t){var a=r.cloneNode(!0);a.setAttribute("data-key",t),a.innerHTML=e.label,n.appendChild(a)}),e.length>0&&(0,o.addClassName)(n,"active"),this.results=e}},{key:"select",value:function(e){var t=this.elements.container;return Array.from(t.children).forEach(function(t,n){return n===e?(0,o.addClassName)(t,"active"):(0,o.removeClassName)(t,"active")}),this.selected=e,this.results[e]}},{key:"count",value:function(){return this.results.length}},{key:"clear",value:function(){var e=this.elements.container;for(this.selected=-1;e.lastChild;)e.removeChild(e.lastChild);(0,o.removeClassName)(e,"active")}}]),e}(),s=function(){var e=this;this.onClick=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.target,r=e.props.handleClick,a=e.elements.container;if(n.parentNode===a&&n.hasAttribute("data-key")){var o=n.getAttribute("data-key");r({result:e.results[o]})}}};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),l=(r(s),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(18),d=r(p),f=n(14),v=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=e.jsonp,a=this.options.params;return n+"//dev.virtualearth.net/REST/v1/Locations?"+this.getParamString(l({},a,{query:t,jsonp:r}))}},{key:"parse",value:function(e){var t=e.data;return 0===t.resourceSets.length?[]:t.resourceSets[0].resources.map(function(e){return{x:e.point.coordinates[1],y:e.point.coordinates[0],label:e.address.formattedAddress,bounds:[[e.bbox[0],e.bbox[1]],[e.bbox[2],e.bbox[3]]],raw:e}})}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o="BING_JSONP_CB_"+Date.now(),i=this.endpoint({query:r,protocol:a,jsonp:o}),(0,f.createScriptElement)(i,o).then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),t}(d.default);t.default=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=(function(e){e&&e.__esModule?e:{default:e}}(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.options=t}return o(e,[{key:"getParamString",value:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},{key:"search",value:function(e){return new Promise(function(t,n){var r,a,o,i,c;return r=e.query,a=~location.protocol.indexOf("http")?location.protocol:"https:",o=this.endpoint({query:r,protocol:a}),fetch(o).then(function(e){return i=e,i.json().then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=function(e){return e&&e.__esModule?e:{default:e}}(l),p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find?"+this.getParamString(c({},r,{f:"json",text:t}))}},{key:"parse",value:function(e){return e.data.locations.map(function(e){return{x:e.feature.geometry.x,y:e.feature.geometry.y,label:e.name,bounds:[[e.extent.ymin,e.extent.xmin],[e.extent.ymax,e.extent.xmax]],raw:e}})}}]),t}(u.default);t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=function(e){return e&&e.__esModule?e:{default:e}}(l),p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params,a=this.getParamString(c({},r,{address:t}));return(r&&r.key?"https:":n)+"//maps.googleapis.com/maps/api/geocode/json?"+a}},{key:"parse",value:function(e){return e.data.results.map(function(e){return{x:e.geometry.location.lng,y:e.geometry.location.lat,label:e.formatted_address,bounds:[[e.geometry.viewport.southwest.lat,e.geometry.viewport.southwest.lng],[e.geometry.viewport.northeast.lat,e.geometry.viewport.northeast.lng]],raw:e}})}}]),t}(u.default);t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(18),u=function(e){return e&&e.__esModule?e:{default:e}}(l),p=function(e){function t(){return r(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//nominatim.openstreetmap.org/search?"+this.getParamString(c({},r,{format:"json",q:t}))}},{key:"parse",value:function(e){return e.data.map(function(e){return{x:e.lon,y:e.lat,label:e.display_name,bounds:[[parseFloat(e.boundingbox[0]),parseFloat(e.boundingbox[2])],[parseFloat(e.boundingbox[1]),parseFloat(e.boundingbox[3])]],raw:e}})}}]),t}(u.default);t.default=p},function(e,t,n){"use strict";function r(){return k.filter(function(e){return e.active})}function a(e,t){k=t["layer-groups-order"],d(p(t["layer-groups-order"]),e),c(),i()}function o(){var e=window.navigator.userAgent;return e.indexOf("MSIE")>-1||e.indexOf("rv:11.0")>-1}function i(){document.getElementById("right-panel").onscroll=l}function c(){if(!o()){var e=d3.select("#right-panel-drag-overlay");e.style("cursor","ew-resize"),e.call(d3.drag().on("drag",function(){s.call(this)}))}}function s(){l(),u()}function l(){var e,t=d3.select("#right-panel"),n=t.property("offsetHeight"),r=document.getElementById("right-panel-drag-overlay"),a=document.getElementById("right-panel-header");if(t.classed("graphs-active")){var o=document.getElementById("graph-list");e=a.scrollHeight+o.scrollHeight+700}else{var i=document.getElementById("layer-list");e=a.scrollHeight+i.scrollHeight}e=e>n?e+"px":null,r.style.height=e}function u(){var e=d3.select("#right-panel"),t=+e.style("min-width").slice(0,-2),n=e.property("clientWidth"),r=document.getElementById("wrapper"),a=r.clientWidth,o=document.getElementById("map-wrapper"),i=d3.event.sourceEvent.x,c=a-i-n,s=n+c;s=s<t?t:s>a?a:s,o.style.paddingRight=s+"px",e.style("width",s+"px")}function p(e){return d3.select("#layer-list").selectAll(".layer-group-wrapper").data(e).enter().append("div").attr("class","layer-group-wrapper").attr("id",function(e){return e.id}).classed("active",function(e){return e.active}).each(function(e){d3.select(this).append("div").attr("class","layer-group-btn btn").on("click",function(e){ga("send","event",{eventCategory:"layer list",eventAction:"toggle "+!e.active,eventLabel:e.name,nonInteraction:!1}),e.active=!e.active,d3.select(this.parentNode).classed("active",function(){return e.active}),l(),(0,w.updateShareUrl)()}).text(e.name)}).append("div").attr("class","layer-group")}function d(e,t){e.selectAll(".layer-select").data(function(e){return t[e.id]}).enter().append("div").attr("class","layer-select").each(function(e){var t=(this.parentNode.parentNode.id,d3.select(this));f(e,t),v(e,t),h(e,t),t.node().appendChild(m(e))})}function f(e,t){t.append("input").attr("type","checkbox").attr("id",function(e){return e.id}).attr("checked",function(e){return e.active?"checked":null}).on("click",function(e){if((0,g.toggleLayer)(e),t.select(".layer-tools-wrapper").classed("active",e.active),e.active){var n=t.select(".opacity-slider-handle").node();(0,b.setOpacitySliderPosition)(e,n,e.opacitiy)}})}function v(e,t){t.append("div").attr("class","layer-label-wrapper").append("label").attr("for",function(e){return e.id}).attr("class","layer-label").html(function(e){return e.name})}function h(e,t){e.info&&""!==e.info&&(t.append("div").attr("class","layer-info-btn-wrapper").on("click",function(){d3.select(this.parentNode).select(".layer-info-wrapper").classed("active",function(){return ga("send","event",{eventCategory:"layer info",eventAction:"clicked",eventLabel:e.name+" "+!d3.select(this).classed("active"),nonInteraction:!1}),!d3.select(this).classed("active")})}).append("img").attr("class","layer-info-icon").attr("src","imgs/more-info-icon-64x64.png").attr("alt","Read more about the "+e.name+" layer").attr("title","Read more about the "+e.name+" layer"),t.append("div").attr("class","layer-info-wrapper").text(function(e){return e.info}))}function m(e,t){var n=document.createElement("div");n.classList.add("layer-tools-wrapper"),e.active&&n.classList.add("active");var r=(0,b.makeOpacitySlider)(e),a=y(e);return n.appendChild(a),n.appendChild(r),n}function y(e,t){var n=document.createElement("div"),r=document.createElement("img");return n.classList.add("legend-wrapper"),r.setAttribute("src",e.legend),n.appendChild(r),n}Object.defineProperty(t,"__esModule",{value:!0}),t.GetActiveLayerGroups=r,t.SetupPanel=a,t.updatePanelDragOverlayHeight=l;var g=n(23),b=n(30),w=n(25),k=[]},function(e,t,n){"use strict";function r(){return h}function a(e,t){var n,r,a,o,c,s;if(t&&0!==t.length)for(n=0;n<t.length;n++){s=!1,c=t[n];for(a in e){if(!e.hasOwnProperty(a))return;for(o=e[a],r=0;r<o.length;r++)if(o[r].id===c){i(o[r]),s=!0;break}if(s)break}}}function o(e){e.active?(l(e),ga("send","event",{eventCategory:"layer",eventAction:"toggle off",eventLabel:e.name,nonInteraction:!1})):(i(e),ga("send","event",{eventCategory:"layer",eventAction:"toggle on",eventLabel:e.name,nonInteraction:!1}))}function i(e){var t=(0,f.GetMap)();e.active=!0,e.mapLayer=e.mapLayer||d(e),t.addLayer(e.mapLayer),s(e),c(),(0,v.updateShareUrl)()}function c(){var e,t,n;for(t=0,n=m.length;t<n;t++)e=m[t],"overlay"===e.type&&e.mapLayer.bringToFront()}function s(e){h.push(e.id),m.push(e)}function l(e){var t=(0,f.GetMap)();e.active=!1,e.mapLayer&&t.hasLayer(e.mapLayer)&&t.removeLayer(e.mapLayer),u(e),(0,v.updateShareUrl)()}function u(e){var t=h.indexOf(e.id);t!==-1&&(h.splice(t,1),m.splice(t,1))}function p(e,t){e.opacity=t,e.mapLayer.setOpacity(t)}function d(e){return L.tileLayer.wms(e.url,{layers:e.id,transparent:e.transparent||!0,version:e.version||"1.3.0",crs:e.crs||L.CRS.EPSG900913,format:e.format||"image/png",opacity:e.opacity||.75,tileSize:e.tileSize||document.getElementById("map").clientWidth})}Object.defineProperty(t,"__esModule",{value:!0}),t.GetCurrentLayers=r,t.CreateDefaultLayers=a,t.toggleLayer=o,t.enableLayer=i,t.disableLayer=l,t.updateLayerOpacity=p;var f=n(24),v=n(25),h=[],m=[]},function(e,t){"use strict";function n(e){var t=e.id||"map",n=e.options||{scrollWheelZoom:!1},r=e.center||["38.5","-81"],o=e.zoom||6;return a=L.map(t,n).setView(r,o),L.control.attribution().addTo(a),document.getElementsByClassName("leaflet-control-zoom-in")[0].addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click button",eventLabel:"zoom in",nonInteraction:!1})}),document.getElementsByClassName("leaflet-control-zoom-out")[0].addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click button",eventLabel:"zoom out",nonInteraction:!1})}),a.on("dragend",function(e){ga("send","event",{eventCategory:"map",eventAction:"drag",eventLabel:JSON.stringify(a.getBounds()),nonInteraction:!0})}),a.on("zoomend",function(e){ga("send","event",{eventCategory:"map",eventAction:"zoom",eventLabel:JSON.stringify(a.getBounds()),nonInteraction:!0})}),a}function r(){return a}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateMap=n,t.GetMap=r;var a},function(e,t,n){"use strict";function r(e){e.on("moveend",a)}function a(e){var t=(0,Y.GetMap)();c(i([b(t),w(t),k(t),L(),E(t),C(),O(),S()])),s(),g()}function o(e){var t=_();t&&(t.center&&(e.map.center=t.center),t.zoom&&(e.map.zoom=t.zoom),t.layers&&D(t.layers,e),t.baselayers&&F(t.baselayers,e),t.pois&&U(t.pois,e),t.tab&&(e.tab=t.tab),t.graph&&(e.graph=t.graph),t.layerGroups&&(e.layerGroups=G(t.layerGroups,e)))}function i(e){return"?"+e.filter(function(e){return void 0!==e}).join("&")}function c(e){window.history&&window.history.replaceState&&window.history.replaceState({},"",e)}function s(){var e=window.location.href;document.getElementById("shareurl-link-url").setAttribute("value",e)}function l(){d3.select(document).on("click",u),d3.select(".shareurl-link a").on("click",d),d3.select(".shareurl-link-url").on("click",v),d3.select(".shareurl-link-popup-remover").on("click",f)}function u(){var e=d3.event,t=[];t=p(e.target);var n,r,a=!0;for(n=0,r=t.length;n<r;n++)try{if(t[n].classList.contains("shareurl-link-popup")||t[n].classList.contains("shareurl-link")){a=!1;break}}catch(e){}if(a){m(document.getElementsByClassName("shareurl-link-popup").item(0))}}function p(e){for(var t=[];e&&e.parentNode;)t.push(e),e=e.parentNode;return t}function d(){var e=document.getElementsByClassName("shareurl-link-popup").item(0);d3.select(e).classed("active")?m(e):h(e)}function f(){m(document.getElementsByClassName("shareurl-link-popup").item(0))}function v(){y()}function h(e){e.classList.toggle("active"),y(),ga("send","event",{eventCategory:"shareurl",eventAction:"open",eventLabel:document.getElementById("shareurl-link-url").getAttribute("value"),nonInteraction:!1})}function m(e){ga("send","event",{eventCategory:"shareurl",eventAction:"close",eventLabel:document.getElementById("shareurl-link-url").getAttribute("value"),nonInteraction:!1}),e.classList.remove("active")}function y(){var e=document.getElementById("shareurl-link-url");e.focus(),e.setSelectionRange(0,e.value.length)}function g(){var e,t,n,r,a=P(window.location.href),o=document.getElementsByClassName("shareurl-social");for(n=0,r=o.length;n<r;n++)e=o[n],t=e.getAttribute("data-baseurl")+a,e.setAttribute("href",t),e.addEventListener("click",function(){ga("send","event",{eventCategory:"shareurl",eventAction:this.getAttribute("aria-label"),eventLabel:this.href,nonInteraction:!1})})}function b(e){var t=e.getCenter();return"center="+t.lat.toString()+","+t.lng.toString()}function w(e){return"zoom="+e.getZoom()}function k(e){var t=[],n={},r=(0,H.GetCurrentLayers)();e.eachLayer(function(e){var t=e.options;t&&t.layers&&(n[t.layers]=t.hasOwnProperty("opacity")?t.opacity:"1")});var a,o;for(o=0;o<r.length;o++)a=r[o],t.push(a),t.push(n[a]);return"layers="+t.join(",")}function E(e){var t=[];return e.eachLayer(function(e){e.options&&e.options.type===z.BASE_LAYER_TYPE&&t.push(e.options.id)}),"baselayers="+t.join(",")}function L(){return"layerGroups="+(0,K.GetActiveLayerGroups)().map(function(e){return e.id}).join(",")}function C(){var e=(0,$.GetAllPointsOfInterest)();if(e.length){var t="pois=";return e.forEach(function(e){t+=e.lat+","+e.lng+";"}),t}}function O(){return"tab="+d3.select(".panel-top-btn.active").attr("data-active")}function S(){return"graph="+d3.select(".graph-type-btn.active").attr("data-type")}function _(){var e=window.location.search;if(""!==e)return e=A(e),e=j(e),I(e),e}function A(e){return e=e.substring(1),e=x(e),e.split("&")}function P(e){return e.replace(/\:/g,"%3A").replace(/\;/g,"%3B").replace(/\//g,"%2F").replace(/\,/g,"%2C").replace(/\&/g,"%26")}function x(e){return e.replace(/\%2[c|C]/g,",").replace(/\%3[b|B]/g,";")}function j(e){var t,n,r={};for(n=0;n<e.length;n++)t=e[n].split("="),r[t[0]]=t[1];return r}function I(e){e.center&&(e.center=T(e.center)),e.layers&&(e.layers=M(e.layers)),e.baselayers&&(e.baselayers=B(e.baselayers)),e.pois&&(e.pois=N(e.pois)),e.layerGroups&&(e.layerGroups=R(e.layerGroups))}function T(e){return e.split(",")}function M(e){var t,n,r={enabledLayers:[],opacityVals:{}};for(e=e.split(","),n=0;n<e.length;n+=2)t=e[n],r.enabledLayers.push(t),r.opacityVals[t]=e[n+1];return r}function B(e){return e.split(",")}function N(e){return e.split(";").filter(function(e){return""!==e}).map(function(e){return e=e.split(","),{lat:e[0],lng:e[1]}})}function R(e){return e.split(",")}function G(e,t){t.layout["layer-groups-order"].forEach(function(t){t.active=e.filter(function(e){return e===t.id}).length>0})}function D(e,t){var n=e.enabledLayers;t["active-layers"]=n;var r,a,o,i,c,s,l=t.layers;for(r=0;r<n.length;r++){s=!1,c=n[r];for(o in l){if(!l.hasOwnProperty(o))return;for(i=l[o],a=0;a<i.length;a++)if(i[a].id===c){i[a].opacity=e.opacityVals[c],s=!0;break}if(s)break}}}function F(e,t){var n,r,a=t.baselayers;for(r=0;r<a.length;r++)n=a[r],n.active=e.indexOf(n.id)!==-1}function U(e,t){t.pois=e}Object.defineProperty(t,"__esModule",{value:!0}),t.BindUpdateShareUrl=r,t.updateShareUrl=a,t.AddShareSettingsToConfig=o,t.BindCopyLinkEvents=l;var Y=n(24),z=n(26),H=n(23),$=n(27),K=n(22)},function(e,t,n){"use strict";function r(e,t){t=t||[{id:"carto-light-default",url:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attributions">CARTO</a>'}],p=t;var n,r,o;for(n=0;n<t.length;n++)o=t[n],o.active&&(r=l(o),o.layer=r,r.addTo(e));a(t)}function a(e){var t=document.createElement("div");t.className="baselayer-ui";for(var n,r,a,i,c=0,s=e.length;c<s;c++)i=e[c],i.hasOwnProperty("image")&&(n=document.createElement("div"),n.setAttribute("data-layer",i.id),r=document.createElement("img"),r.setAttribute("src",i.image),r.setAttribute("alt",i.label),r.setAttribute("title",i.label),a=document.createElement("div"),a.textContent=i.label,n.appendChild(r),n.appendChild(a),n.addEventListener("click",o),d3.select(n).classed("base-selector",!0).classed("active",i.active),t.appendChild(n));document.getElementsByClassName("leaflet-bottom leaflet-left")[0].appendChild(t)}function o(e){e.stopPropagation();var t=this.getAttribute("data-layer");i(this),c(),s(t),ga("send","event",{eventCategory:"map",eventAction:"change base layer",eventLabel:t,nonInteraction:!1}),(0,f.updateShareUrl)()}function i(e){d3.select(".base-selector.active").classed("active",!1),d3.select(e).classed("active",!0)}function c(){var e=(0,d.GetMap)();e.eachLayer(function(t){t.options.type===v&&e.removeLayer(t)})}function s(e){for(var t,n=(0,d.GetMap)(),r=0,a=p.length;r<a;r++)if(t=p[r],t.id===e){t.layer||(t.layer=l(t)),t.layer.addTo(n),t.layer.bringToBack();break}}function l(e){return L.tileLayer(e.url,u(e))}function u(e){var t={};return e.id&&(t.id=e.id),e.attribution&&(t.attribution=e.attribution),e.subdomains&&(t.subdomains=e.subdomains),t.type=v,t}Object.defineProperty(t,"__esModule",{value:!0}),t.BASE_LAYER_TYPE=void 0,t.CreateBaseLayers=r;var p,d=n(24),f=n(25),v=t.BASE_LAYER_TYPE="baselayer"},function(e,t,n){"use strict";function r(){return y}function a(e,t){var n={lat:e,lng:t};return y.push(n),n}function o(e,t){i(t);var n=r(),e=(0,h.GetMap)();n.forEach(function(t){s(e,t)})}function i(e){Array.prototype.push.apply(y,e)}function c(e){y=y.filter(function(t){return!(t===e)})}function s(e,t){var n=(0,f.createGraphDiv)(t),r=(0,f.createMarker)(e,t.lat,t.lng);t.graphDiv=n,t.marker=r,r.addTo(e),(0,f.createGraphRemover)(e,n,r,t),d3.select(n).on("mouseenter",function(e){r.setIcon((0,f.getIcon)("hover"))}),d3.select(n).on("mouseleave",function(){r.setIcon((0,f.getIcon)("graph"))}),r.on("click dblclick",function(e){l(e,t)}),r.on("mouseover",function(e){r.setIcon((0,f.getIcon)("hover"))}),r.on("mouseout",function(e){r.setIcon((0,f.getIcon)("graph")),t.graphDiv.getElementsByClassName("pan-to-marker-btn")[0].classList.remove("animate")})}function l(e,t){e.originalEvent.stopPropagation(),(0,m.HandleTabChange)("graphs-active"),p(t),u(t)}function u(e){e.graphDiv.getElementsByClassName("pan-to-marker-btn")[0].classList.add("animate")}function p(e){var t=document.getElementById("right-panel");document.getElementById("right-panel-header"),document.getElementById("graph-type-header");t.scrollTop=e.graphDiv.offsetTop}function d(e,t,n){document.getElementById("graph-list").removeChild(t),e.removeLayer(n),(0,v.updateShareUrl)()}Object.defineProperty(t,"__esModule",{value:!0}),t.GetAllPointsOfInterest=r,t.AddPointOfInterestToTracker=a,t.SetupPointsOfInterest=o,t.AddMultiplePointsOfInterest=i,t.RemovePointOfInterestFromTracker=c,t.SetupPointOfInterestUI=s,t.RemovePointOfInterestUI=d;var f=n(28),v=n(25),h=n(24),m=n(29),y=[]},function(e,t,n){"use strict";function r(){d3.selectAll(".graph-type-btn").on("click",h),a(),W=d3.tip().attr("class","d3-tip").html(function(e){return e})}function a(){Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100!=0||e%400==0)},Date.prototype.getDOY=function(){var e=[0,31,59,90,120,151,181,212,243,273,304,334],t=this.getMonth(),n=this.getDate(),r=e[t]+n;return t>1&&this.isLeapYear()&&r++,r}}function o(e){e.on("click",c)}function i(e){return"hover"===e?V:Z}function c(e){var t=this,n=e.latlng.lat,r=e.latlng.lng,a=(0,z.AddPointOfInterestToTracker)(n,r);(0,z.SetupPointOfInterestUI)(t,a,V,Z),(0,$.updateShareUrl)(),ga("send","event",{eventCategory:"map",eventAction:"click",eventLabel:"add point",nonInteraction:!1})}function s(e,t,n){return L.marker([t,n],{icon:Z})}function l(e,t,n,r){var a=u();t.getElementsByClassName("graph-elem-header")[0].appendChild(a),d3.select(a).on("click",function(){ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:"remove",nonInteraction:!1}),(0,z.RemovePointOfInterestFromTracker)(r),(0,z.RemovePointOfInterestUI)(e,t,n),(0,H.updatePanelDragOverlayHeight)(),(0,$.updateShareUrl)()})}function u(){var e=document.createElement("button");return e.className="remove-graph",e.innerText=String.fromCharCode("10005"),e.setAttribute("title","Remove graph"),e}function p(e,t,n,r){r=r.replace(/\[|\]|\'/g,"").split(", "),C(r,e,t,n),(0,H.updatePanelDragOverlayHeight)()}function d(e,t,n){var r="https://fcav-ndvi.nemac.org/landdat_product.cgi?args="+t+","+e,a=(0,q.GetAjaxObject)(function(r){p(n,e,t,r)});a.open("GET",r),a.send()}function f(e){var t;for(t=0;t<e.length;t++)e[t]=e[t].split(",");return e}function v(e){var t,n,r,a,o={};for(o.keys=[],r=0;r<e.length;r++)t=e[r],n=t[0].substring(0,4),o.hasOwnProperty(n)||(o[n]=[],o.keys.push(n)),o[n].push(t);var i=[];for(r=0;r<o.keys.length;r++)n=o.keys[r],46!==o[n].length&&i.push(n);for(r=0;r<i.length;r++)n=i[r],delete o[n],o.keys.splice(o.keys.indexOf(n),1);var c,s;for(o.medians=[],r=0;r<46;r++){for(c=[],a=r;a<e.length;a+=46)c.push(e[a][1]);s=c.sort()[Math.floor(c.length/2)],o.medians.push(s)}return o}function h(){var e=this.getAttribute("data-type"),t=document.getElementsByClassName("graph-type-btn active")[0].getAttribute("data-type");e!==t&&(ga("send","event",{eventCategory:"graph type",eventAction:"click",eventLabel:e,nonInteraction:!1}),m(e))}function m(e){if(!y())var t=document.getElementsByClassName("graph-elem")[0].scrollHeight,n=document.getElementsByClassName("graph-type-info active")[0].scrollHeight,r=document.getElementById("right-panel").scrollTop;b(),w(e),y()||g(n,t,r),(0,$.updateShareUrl)()}function y(){return void 0===document.getElementsByClassName("graph-elem")[0]}function g(e,t,n){var r=document.getElementsByClassName("graph-type-info active")[0].scrollHeight,a=document.getElementsByClassName("graph-elem")[0].scrollHeight,o=a/t,i=r+(n-e)*o;document.getElementById("right-panel").scrollTop=i}function b(){var e=document.getElementsByClassName("graph-type-btn active")[0],t="graph-"+e.getAttribute("data-type");e.classList.remove("active"),document.getElementById("graph-list").classList.remove(t)}function w(e){d3.select(".graph-type-btn[data-type='"+e+"']").classed("active",!0),document.getElementById("graph-list").classList.add("graph-"+e),d3.selectAll(".graph-type-info").classed("active",function(){return e===this.id.split("-")[0]})}function k(e){var t=O(e.lat,3),n=O(e.lng,3),r=document.createElement("div"),a=document.createElement("div");r.appendChild(a);var o=E(e),i=document.createTextNode("Lat: "+t+", Long: "+n),c=document.createElement("div");return c.className="graph-lat-lon",c.appendChild(i),a.appendChild(o),a.appendChild(c),r.classList.add("graph-elem"),a.classList.add("graph-elem-header"),d(e.lat,e.lng,r),r}function E(e){var t=document.createElement("button");return t.classList.add("btn"),t.classList.add("pan-to-marker-btn"),t.textContent="Show On Map",t.onclick=function(e,t){(0,K.GetMap)().panTo([e.lat,e.lng]),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:'{"show on map":{"lat":'+e.lat+',"long":'+e.lng+"}}",nonInteraction:!1})}.bind(t,e),t}function C(e,t,n,r){e=f(e);var a=v(e);S(e,t,a.medians),_(a,t,n,r),A(a,t,n,r),document.getElementById("graph-list").appendChild(t)}function O(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}function S(e,t,n){var r={top:30,right:20,bottom:30,left:29},a=580-r.left-r.right,o=270-r.top-r.bottom,i=d3.scaleTime().range([0,a]).domain([G(e[0][0]),G(e[e.length-1][0])]),c=d3.scaleLinear().range([o,0]).domain([0,100]),s=d3.axisBottom(i).ticks(16).tickFormat(function(e){return e.getFullYear()}),l=d3.axisLeft(c).ticks(6),u=d3.line().x(function(e){return i(G(e[0]))}).y(function(e){return c(e[1])}),p=d3.select(t).append("div").classed("timeseries-graph",!0),d=p.append("svg").attr("height",o+r.top+r.bottom).attr("viewBox",function(){return"0 0 "+(a+r.left+r.right)+" "+(o+r.top+r.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+r.left+","+r.top+")");d.call(W),j(e,u,d),d.append("g").attr("class","x axis").attr("transform","translate(0,"+o+")").call(s),d.append("g").attr("class","y axis").call(l),T(e,u,d,n)}function _(e,t,n,r){function a(e){return X[(e-15)/30]}var o={},i={top:30,right:20,bottom:30,left:29},c=500-i.left-i.right,s=270-i.top-i.bottom,l=e.medians,u=d3.scaleLinear().range([0,c]).domain([0,365]),p=d3.scaleLinear().range([s,0]).domain([0,100]),d=d3.axisBottom(u).ticks(11).tickValues([15,45,75,105,135,165,195,225,255,285,315,345]).tickFormat(a),f=d3.axisLeft(p).ticks(6),v=d3.line().x(function(e,t){return u(Array.isArray(e)?D(e[0]):8*t+3)}).y(function(e){return p(Array.isArray(e)?e[1]:e)}),h=d3.select(t).append("div").classed("overlapping-graph",!0),m=h.append("svg").attr("viewBox",function(){return"0 0 "+(c+i.left+i.right)+" "+(s+i.top+i.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+i.left+","+i.top+")");m.call(W),m.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(d),m.append("g").attr("class","y axis").call(f),o.medians={path:j(e.medians,v,m)},o[2015]={path:j(e[2015],v,m)},o.medians.points=T(e.medians,v,m,l),o[2015].points=T(e[2015],v,m,l);var y=h.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){N(y,t,"timeseries","2015",o,e,v,m,l,n,r)}),N(y,"medians","timeseries","medians",o,e,v,m,l,n,r)}function A(e,t,n,r){var a=Math.min(490,490)/2-30,o=e.medians,i=P(e),c=x(o,i[1][0]),s=d3.scaleLinear().domain([0,100]).range([0,a]),l=d3.radialLine().radius(function(e){return s(Array.isArray(e)?e[1]:e)}).angle(function(e,t){return((Array.isArray(e)?D(e[0]):8*t+3)-1)%365/365*(2*Math.PI)}),u=d3.select(t).append("div").classed("polar-graph",!0),p=u.append("svg").attr("viewBox",function(){return"0 0 490 490"}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate(245,245)");p.call(W);var d=p.append("g").attr("class","r axis").selectAll("g").data(s.ticks(5).slice(1)).enter().append("g");d.append("circle").attr("r",s),d.append("text").attr("y",function(e){return-s(e)-4}).attr("transform","rotate(15)").style("text-anchor","middle").text(function(e){return e});var f=p.append("g").attr("class","a axis").selectAll("g").data(d3.range(0,360,30)).enter().append("g").attr("transform",function(e){return"rotate("+(e-90)+")"});f.append("line").attr("x2",a),f.append("text").attr("x",a+6).attr("dy",".35em").style("text-anchor",function(e){return e<360&&e>180?"end":null}).attr("transform",function(e){return e<360&&e>180?"rotate(180 "+(a+6)+",0)":null}).text(function(e){return X[e/30]});var v=p.append("g").selectAll("g").data(c).enter().append("g").attr("transform",function(e){return"rotate("+(e.data[1][0]-90)+")"});v.append("line").attr("class","line").attr("x2",a),v.append("text").attr("x",function(e){var t=e.data[1][0];return t<360&&t>180?a+30:a-30}).attr("y",function(e){return e.data[1][0]%365/365*(2*Math.PI)+6}).attr("dy",".35em").style("text-anchor",function(e){var t=e.data[1][0];return t<360&&t>180?"middle":null}).attr("transform",function(e){var t=e.data[1][0];return t<360&&t>180?"rotate(180 "+(a+6)+",0)":null}).text(function(e){return e.label});var h=i[1][0];I([[h,100],[(h+182.5)%365,100]],l,p).classed("growing-season-line","true"),I(i,l,p).classed("center-line","true"),p.selectAll("point").data([i[1]]).enter().append("circle").attr("class","center").attr("r",4).attr("transform",function(e){return"translate("+l([e]).slice(1).slice(0,-1)+")"}).attr("stroke","#000").attr("fill","#ea0c48").on("mouseover",function(e){W.show("Center: "+String(e[1]).substring(0,7)),this.setAttribute("r",5)}).on("mouseout",function(e){W.hide(),this.setAttribute("r",4)});var m={};m.medians={path:I(o,l,p)},m[2015]={path:I(e[2015],l,p)},m.medians.points=T(o,l,p,o),m[2015].points=T(e[2015],l,p,o);var y=u.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){var a=y.append("div");a.append("input").attr("type","checkbox").attr("id","polar-"+t+n.toString().replace(".","")+"-"+r.toString().replace(".","")).attr("value",t).property("checked","2015"===t).on("change",function(t){var n=this.value;this.checked?(m.hasOwnProperty(n)||(m[n]={}),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:n+" polar timeseries on",nonInteraction:!1}),m[n].path=I(e[n],l,p),m[n].points=T(e[n],l,p,o)):(m[n].path.remove(),m[n].points.remove(),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:n+" polar timeseries off",nonInteraction:!1}))}),a.append("label").text(t).attr("for","polar-"+t+n.toString().replace(".","")+"-"+r.toString().replace(".","")),a.append("div").style("background",R("medians"!==t?t:0)).classed("graph-pip-example",!0)});var g=y.append("div");g.append("input").attr("type","checkbox").attr("id","polar-average-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")).attr("value","medians").property("checked",!0).on("change",function(t){var n=this.value;this.checked?(m.hasOwnProperty(n)||(m[n]={}),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:n+" polar timeseries on",nonInteraction:!1}),m[n].path=I(e[n],l,p),m[n].points=T(e[n],l,p,o)):(m[n].path.remove(),m[n].points.remove(),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:n+" polar timeseries off",nonInteraction:!1}))}),g.append("label").text("Baseline").attr("for","polar-average-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")),g.append("div").style("background",R(0)).classed("graph-pip-example",!0);var b=y.append("div").classed("threshold-checkbox",!0);b.append("input").attr("type","checkbox").attr("id","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")).property("checked",!0).on("change",function(e){v.style("opacity",this.checked?1:0);var t=this.checked?"off":"on";ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:"threshold polar timeseries "+t,nonInteraction:!1})}),b.append("label").text("Thresholds").attr("for","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".",""))}function P(e){var t,n,r,a,o,i=0,c=0;for(r=46,t=0;t<e.keys.length;t++)if(a=e[e.keys[t]],a.length===r){for(o=0,n=0;n<r/2;n++)o+=a[n][1]-a[n+23][1];o/=23,i+=o}else c++;i=Math.abs(i)/(e.keys.length-c);var s,l,u,p,d,f=1e6,v=0,h=e.medians;for(t=0;t<r/2;t++){for(l=0,u=0,d=0;d<r/2;d++)n=(t+d)%46,p=(n+23)%46,l+=parseInt(h[n],10),u+=parseInt(h[p],10);s=Math.abs(l-u),s<f&&(f=s,v=t)}var m=parseInt(h[v],10),y=parseInt(-h[v+23],10),g=Math.abs(i-m)-Math.abs(i-y);return Math.abs(-i-m)-Math.abs(-i-y)>g&&(v+=23),[[0,0],[8*v+3,i]]}function x(e,t){var n=Math.floor((t-3)/8);n>22&&(n-=23);var r,a,o,i=0;for(o=46,r=0;r<o;r++)a=(n+r)%o,i+=parseInt(e[a],10);var c,s,l=.15*i,u=.8*i,p=!1,d=!1;for(i=0,r=0;r<o;r++)a=(n+r)%o,i+=parseInt(e[a],10),!p&&i>l?(c=a,p=!0):!d&&i>u&&(s=a,d=!0);var f=[0,0];return[{label:"15%",data:[f,[8*c+3,100]]},{label:"80%",data:[f,[8*s+3,100]]}]}function j(e,t,n){return n.append("path").attr("class","line").attr("d",t(e))}function I(e,t,n){return n.append("path").datum(e).attr("class","line").attr("d",t)}function T(e,t,n,r){return n.selectAll("point").data(e).enter().append("circle").attr("r",2).attr("class","point").attr("transform",function(e,n){return"translate("+t([Array.isArray(e)?e:[8*n+3,e]]).slice(1).slice(0,-1)+")"}).attr("stroke","#000").attr("fill",function(e,t){return R(Array.isArray(e)?e[0].substring(0,4):0)}).on("mouseover",M).on("mouseout",B)}function M(e){var t=Array.isArray(e)?F(e[0])+": "+e[1]:"Average: "+e;W.show(t),this.setAttribute("r","4")}function B(e){W.hide(),this.setAttribute("r","2");var t=document.getElementsByClassName("graph-type-btn active")[0].getAttribute("data-type");ga("send","event",{eventCategory:"graph",eventAction:"hover",eventLabel:t+" tool tip",nonInteraction:!1})}function N(e,t,n,r,a,o,i,c,s,l,u){var p=e.append("div");p.append("input").attr("type","checkbox").attr("id",n+"-"+t+l.toString().replace(".","")+"-"+u.toString().replace(".","")).attr("value",t).property("checked",t===r).on("change",function(e){var t=this.value;this.checked?(a.hasOwnProperty(t)||(a[t]={}),a[t].path=j(o[t],i,c),a[t].points=T(o[t],i,c,s),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:t+" overlapping timeseries on",nonInteraction:!1})):(a[t].path.remove(),a[t].points.remove(),ga("send","event",{eventCategory:"graph",eventAction:"click",eventLabel:t+" overlapping timeseries off",nonInteraction:!1}))}),p.append("label").text(t).attr("for",n+"-"+t+l.toString().replace(".","")+"-"+u.toString().replace(".","")),p.append("div").style("background",R("medians"!==t?t:0)).classed("graph-pip-example",!0)}function R(e){var t=["#ffe476","#036593","#116c91","#1e7390","#2c7b8e","#39828c","#4c8c8a","#5e9589","#719f87","#83a886","#95b183","#a6ba80","#b8c37c","#cacc79","#d6d279","#e2d779","#efdd78","#fbe378"];return 0===e?"#fff":t[parseInt(e,10)%t.length]}function G(e){e=e.toString();var t=e.substring(0,4),n=parseInt(e.substring(4,6),10)-1,r=e.substring(6,8);return new Date(t,n,r)}function D(e){return"string"==typeof e?(e=G(e),e.getDOY()):e}function F(e){return"Average"===e?e:(e=G(e),U(e.getMonth())+" "+Y(e.getDate())+", "+e.getFullYear())}function U(e){switch(e){case 0:return"Jan.";case 1:return"Feb.";case 2:return"Mar.";case 3:return"Apr.";case 4:return"May";case 5:return"Jun.";case 6:return"Jul.";case 7:return"Aug.";case 8:return"Sep.";case 9:return"Oct.";case 10:return"Nov.";case 11:return"Dec."}}function Y(e){var t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"}Object.defineProperty(t,"__esModule",{value:!0}),t.SetupGraphs=r,t.BindGraphEvents=o,t.getIcon=i,t.createMarker=s,t.createGraphRemover=l,t.HandleGraphTabChange=m,t.createGraphDiv=k;var z=n(27),H=n(22),$=n(25),K=n(24),q=n(2),W={},J=L.Icon.extend({}),Z=new J({iconUrl:"imgs/blue_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),V=new J({iconUrl:"imgs/orange_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),X={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"}},function(e,t,n){"use strict";function r(){d3.selectAll(".panel-top-btn").on("click",o)}function a(){return document.getElementsByClassName("panel-top-btn active")[0].getAttribute("data-active")}function o(){this.classList.contains("active")||(ga("send","event",{eventCategory:"tab",eventAction:"click",eventLabel:this.getAttribute("data-active"),nonInteraction:!1}),i(this.getAttribute("data-active")))}function i(e){s(),c(e),(0,d.updateShareUrl)()}function c(e){d3.select(".panel-top-btn[data-active='"+e+"']").classed("active",!0),document.getElementById("map-wrapper").classList.add(e),document.getElementById("right-panel").classList.add(e),d3.select(".panel-section-wrapper[data-active='"+e+"']").classed("active",!0),l(),u(),(0,p.updatePanelDragOverlayHeight)()}function s(){var e=d3.select(".panel-top-btn.active").attr("data-active");d3.selectAll("#map-wrapper, #right-panel").classed(e,!1),d3.selectAll(".panel-top-btn.active, .panel-section-wrapper.active").classed("active",!1)}function l(){var e=document.getElementById("right-panel").offsetWidth;document.getElementById("map-wrapper").style.paddingRight=e+"px"}function u(){var e=document.getElementById("right-panel"),t=e.style.width;if(t){var n=d3.select(e).style("min-width").slice(0,-2);parseInt(t.slice(0,-2),10)>parseInt(n,10)||(e.style.width="")}}Object.defineProperty(t,"__esModule",{value:!0}),t.BindTabEvents=r,t.GetActiveTab=a,t.HandleTabChange=i;var p=n(22),d=n(25)},function(e,t,n){"use strict";function r(e,t,n){n=n||e.opacity,t.style.top=p(n)+"px"}function a(e){var t=void 0!==e.opacity?e.opacity:1,n=document.createElement("div"),r=i(e,t),a=o("closed",e,r);return n.classList.add("opacity-slider-wrapper"),n.appendChild(r),n.appendChild(a),n}function o(e,t,n){var a=document.createElement("div"),o=document.createElement("img");return a.classList.add("opacity-icon-wrapper"),o.classList.add("opacity-icon"),o.classList.add(e),o.setAttribute("src","imgs/opacity-icon-"+e+"-64x64.png"),o.setAttribute("alt","Use this slider to adjust transparency for the "+t.name+" layer"),o.setAttribute("title","Use this slider to adjust transparency for the "+t.name+" layer"),a.appendChild(o),a.onclick=function(e){var a=n.getElementsByClassName("opacity-slider-handle")[0];(0,u.updateLayerOpacity)(t,0),r(t,a,0)},a}function i(e,t){var n=document.createElement("div"),a=document.createElement("div"),o=document.createElement("div");return n.classList.add("opacity-slider-track-overlay"),a.classList.add("opacity-slider-track"),o.classList.add("opacity-slider-handle"),n.appendChild(a),n.appendChild(o),e.active&&r(e,o),c(n,e,t),n}function c(e,t,n){d3.select(e).call(d3.drag().on("start drag",function(){var n=e.getElementsByClassName("opacity-slider-handle")[0],a=s(e);(0,u.updateLayerOpacity)(t,a),r(t,n,a)}).on("end",function(){var n=s(e);ga("send","event",{eventCategory:"opacity slider",eventAction:"change",eventLabel:'{"'+t.name+'": "'+n+'"}',nonInteraction:!1}),(0,l.updateShareUrl)()}))}function s(e){var t=d3.mouse(e)[1];return p.invert(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.setOpacitySliderPosition=r,t.makeOpacitySlider=a;var l=n(25),u=n(23),p=d3.scaleLinear().domain([1,0]).range([0,90]).clamp(!0)},function(e,t){"use strict";function n(e){if(e.image){var t=r(),n=a(e),i=e.link?o(e.link):null;i?(i.appendChild(n),t.appendChild(i)):t.appendChild(n);var c=document.getElementsByClassName(e.location)[0],s=c.firstChild;c.insertBefore(t,s)}}function r(){var e=document.createElement("div");return d3.select(e).classed("project-logo",!0),e}function a(e){var t=document.createElement("img");return t.setAttribute("src",e.image),e.label&&(t.setAttribute("alt",e.label),t.setAttribute("title",e.label)),t}function o(e){var t=document.createElement("a");return t.setAttribute("href",e),t.setAttribute("target","_blank"),t.addEventListener("click",function(){ga("send","event",{eventCategory:"map",eventAction:"click",eventLabel:"landat logo",nonInteraction:!1})}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXhfYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAwNzY1NzVkZTIzMjc2ODhlYWNiYyIsIndlYnBhY2s6Ly8vLi9qcy9iYXNlLmpzIiwid2VicGFjazovLy8uL2pzL3BhcnNlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvbGVhZmxldENvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ub2RlbnQtcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovLy8uL34vbm9kZW50LXJ1bnRpbWUvem91c2FuLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L34vc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L25vZGVudC1ydW50aW1lL3RoZW5hYmxlRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL34vbG9kYXNoLmRlYm91bmNlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3NlYXJjaEVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvZG9tVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Jlc3VsdExpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2JpbmdQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvcHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2VzcmlQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL29wZW5TdHJlZXRNYXBQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9wYW5lbC5qcyIsIndlYnBhY2s6Ly8vLi9qcy9sYXllci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tYXAuanMiLCJ3ZWJwYWNrOi8vLy4vanMvc2hhcmUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvYmFzZWxheWVyLmpzIiwid2VicGFjazovLy8uL2pzL3BvaS5qcyIsIndlYnBhY2s6Ly8vLi9qcy9ncmFwaC5qcyIsIndlYnBhY2s6Ly8vLi9qcy90YWJzLmpzIiwid2VicGFjazovLy8uL2pzL29wYWNpdHlTbGlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vanMvbG9nby5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX3BhcnNlciIsIl9zZWFyY2giLCJfc2VhcmNoMiIsIl9wYW5lbCIsIl9iYXNlbGF5ZXIiLCJfZ3JhcGgiLCJfdGFicyIsIl9tYXAiLCJfc2hhcmUiLCJfbGF5ZXIiLCJfbG9nbyIsIl9sb2dvMiIsIl9wb2kiLCJCYXNlIiwiY29uZmlnIiwiUGFyc2VDb25maWciLCJjYWxsYmFjayIsIlNldHVwR3JhcGhzIiwiQmluZFRhYkV2ZW50cyIsIkJpbmRDb3B5TGlua0V2ZW50cyIsImRhdGEiLCJBZGRTaGFyZVNldHRpbmdzVG9Db25maWciLCJtYXAiLCJDcmVhdGVNYXAiLCJDcmVhdGVCYXNlTGF5ZXJzIiwiYmFzZWxheWVycyIsIkNyZWF0ZURlZmF1bHRMYXllcnMiLCJsYXllcnMiLCJTZXR1cFBhbmVsIiwibGF5b3V0IiwibG9nbyIsInRhYiIsIkhhbmRsZVRhYkNoYW5nZSIsImdyYXBoIiwiSGFuZGxlR3JhcGhUYWJDaGFuZ2UiLCJCaW5kR3JhcGhFdmVudHMiLCJCaW5kVXBkYXRlU2hhcmVVcmwiLCJTZXR1cFBvaW50c09mSW50ZXJlc3QiLCJwb2lzIiwidXBkYXRlU2hhcmVVcmwiLCJ3aW5kb3ciLCJjb25maWdGaWxlIiwiR2V0Q29uZmlnIiwiR2V0QWpheE9iamVjdCIsInJlc3BvbnNlSGFuZGxlciIsInhtbGh0dHAiLCJYTUxIdHRwUmVxdWVzdCIsIkFjdGl2ZVhPYmplY3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwicmVzcG9uc2UiLCJvcGVuIiwic2VuZCIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwicGFyc2UiLCJmb3JtYXRNYXAiLCJmb3JtYXRMYXllcnMiLCJsYXllcmdyb3VwIiwiaSIsImRlZmF1bHRNYXBzZXJ2ZXJVcmwiLCJtYXBzZXJ2ZXJVcmwiLCJwcm9wIiwiaGFzT3duUHJvcGVydHkiLCJsZW5ndGgiLCJzZXRNYXBzZXJ2ZXJVcmwiLCJzZXREZWZhdWx0TGF5ZXJPcGFjaXR5IiwiZGVmYXVsdExheWVyT3BhY2l0eSIsImxheWVyIiwib3BhY2l0eSIsInVybCIsIkNyZWF0ZVNlYXJjaCIsInByb3ZpZGVyIiwiX2xlYWZsZXRHZW9zZWFyY2giLCJPcGVuU3RyZWV0TWFwUHJvdmlkZXIiLCJzZWFyY2hDb250cm9sIiwiR2VvU2VhcmNoQ29udHJvbCIsInNob3dNYXJrZXIiLCJhdXRvQ29tcGxldGUiLCJzaG93UG9wdXAiLCJhZGRDb250cm9sIiwic2VhcmNoRWxlbWVudHMiLCJzZWFyY2hFbGVtZW50IiwiZWxlbWVudHMiLCJMIiwiRG9tRXZlbnQiLCJvbiIsImNvbnRhaW5lciIsImV2Iiwic3RvcFByb3BhZ2F0aW9uIiwic2VhcmNoRW50cmllcyIsImZvcm0iLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY2hpbGRyZW4iLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJnYSIsImV2ZW50Q2F0ZWdvcnkiLCJldmVudEFjdGlvbiIsImV2ZW50TGFiZWwiLCJub25JbnRlcmFjdGlvbiIsIndoaWNoIiwia2V5Q29kZSIsIl9sZWFmbGV0Q29udHJvbCIsImVudW1lcmFibGUiLCJnZXQiLCJfc2VhcmNoRWxlbWVudCIsIl9iaW5nUHJvdmlkZXIiLCJfZXNyaVByb3ZpZGVyIiwiX2dvb2dsZVByb3ZpZGVyIiwiX29wZW5TdHJlZXRNYXBQcm92aWRlciIsIl9wcm92aWRlciIsIkxlYWZsZXRDb250cm9sIiwiQ29udHJvbCIsImV4dGVuZCIsIkVycm9yIiwiTENvbnRyb2wiLCJfbGVuIiwiYXJndW1lbnRzIiwib3B0aW9ucyIsIkFycmF5IiwiX2tleSIsIkZ1bmN0aW9uIiwicHJvdG90eXBlIiwiYmluZCIsImFwcGx5IiwiY29uY2F0IiwiX25vZGVudFJ1bnRpbWUiLCJfZXh0ZW5kcyIsImFzc2lnbiIsInNvdXJjZSIsImtleSIsIl9sb2Rhc2giLCJfbG9kYXNoMiIsIl9zZWFyY2hFbGVtZW50MiIsIl9yZXN1bHRMaXN0IiwiX3Jlc3VsdExpc3QyIiwiX2RvbVV0aWxzIiwiX2NvbnN0YW50cyIsImRlZmF1bHRPcHRpb25zIiwicG9zaXRpb24iLCJzdHlsZSIsIm1hcmtlciIsImljb24iLCJJY29uIiwiRGVmYXVsdCIsImRyYWdnYWJsZSIsIm1heE1hcmtlcnMiLCJyZXRhaW5ab29tTGV2ZWwiLCJhbmltYXRlWm9vbSIsInNlYXJjaExhYmVsIiwibm90Rm91bmRNZXNzYWdlIiwibWVzc2FnZUhpZGVEZWxheSIsInpvb21MZXZlbCIsImNsYXNzTmFtZXMiLCJidXR0b24iLCJtc2dib3giLCJpbnB1dCIsImF1dG9Db21wbGV0ZURlbGF5IiwiaW5pdGlhbGl6ZSIsIl90aGlzIiwidGhpcyIsIm1hcmtlcnMiLCJGZWF0dXJlR3JvdXAiLCJfb3B0aW9ucyIsImhhbmRsZVN1Ym1pdCIsInF1ZXJ5Iiwib25TdWJtaXQiLCJfc2VhcmNoRWxlbWVudCRlbGVtZW4iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImNyZWF0ZUVsZW1lbnQiLCJ0aXRsZSIsImhyZWYiLCJvbkNsaWNrIiwicmVzdWx0TGlzdCIsImhhbmRsZUNsaWNrIiwiX3JlZiIsInJlc3VsdCIsImxhYmVsIiwiYXBwZW5kQ2hpbGQiLCJhdXRvU2VhcmNoIiwic2VsZWN0UmVzdWx0IiwiY2xlYXJSZXN1bHRzIiwib25BZGQiLCJfb3B0aW9uczIiLCJhZGRUbyIsInJvb3QiLCJnZXRDb250YWluZXIiLCJxdWVyeVNlbGVjdG9yIiwib25SZW1vdmUiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiX3NlYXJjaEVsZW1lbnQkZWxlbWVuMiIsImNvbnRhaW5zIiwicmVtb3ZlQ2xhc3NOYW1lIiwiYWRkQ2xhc3NOYW1lIiwiZm9jdXMiLCJBUlJPV19ET1dOX0tFWSIsIkFSUk9XX1VQX0tFWSIsImluY2x1ZGVzIiwibGlzdCIsIm1heCIsImNvdW50IiwibmV4dCIsImNvZGUiLCJzZWxlY3RlZCIsImlkeCIsIml0ZW0iLCJzZWxlY3QiLCJFU0NBUEVfS0VZIiwiY2xlYXIiLCJQcm9taXNlIiwiJHJldHVybiIsIiRlcnJvciIsInJlc3VsdHMiLCJTUEVDSUFMX0tFWVMiLCJzZWFyY2giLCJ0aGVuIiwiJGF3YWl0XzEiLCJyZW5kZXIiLCIkYXN5bmNiaW5kIiwiJGF3YWl0XzIiLCJzaG93UmVzdWx0Iiwia2V5cyIsIl9sYXllcnMiLCJyZW1vdmVMYXllciIsImFkZE1hcmtlciIsImNlbnRlck1hcCIsImZpcmVFdmVudCIsImxvY2F0aW9uIiwiX29wdGlvbnMzIiwiTWFya2VyIiwieSIsIngiLCJiaW5kUG9wdXAiLCJhZGRMYXllciIsIm9wZW5Qb3B1cCIsIl9vcHRpb25zNCIsInJlc3VsdEJvdW5kcyIsIkxhdExuZ0JvdW5kcyIsImJvdW5kcyIsImlzVmFsaWQiLCJnZXRCb3VuZHMiLCJmaXRCb3VuZHMiLCJhbmltYXRlIiwic2V0VmlldyIsImdldENlbnRlciIsImdldFpvb20iLCJfb3B0aW9uczUiLCIkYXN5bmNzcGF3biIsInByb21pc2VQcm92aWRlciIsInNlbGYiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImdlbkYiLCJyZXNvbHZlIiwicmVqZWN0Iiwic3RlcCIsImZuIiwiYXJnIiwiZ2VuIiwiZG9uZSIsInYiLCJ0aHJvdyIsInNyYyIsInRvU3RyaW5nIiwidCIsImFyZ3MiLCJtYXRjaCIsInJlIiwibXgiLCJleGVjIiwicHVzaCIsInJldmVyc2UiLCJmb3JFYWNoIiwic2xpY2UiLCJpbmRleCIsInN1YnN0ciIsInJlcGxhY2UiLCJ6b3VzYW4iLCJ0aGVuYWJsZSIsImNhdGNoZXIiLCJib3VuZFRoZW4iLCJyZXNvbHZlciIsInRyYW1wb2xpbmUiLCJzIiwidSIsImIiLCJxIiwidW5kZWZpbmVkIiwicG9wIiwiciIsIkxhenlUaGVuYWJsZSIsIkVhZ2VyVGhlbmFibGUiLCJUaGVuYWJsZSIsIkVhZ2VyVGhlbmFibGVGYWN0b3J5IiwiZXgiLCJwcm9jZXNzIiwic2V0SW1tZWRpYXRlIiwiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJ0aWNrIiwiWm91c2FuIiwiZnVuYyIsIm1lIiwiU1RBVEVfRlVMRklMTEVEIiwieXJldCIsImVyciIsIlNUQVRFX1JFSkVDVEVEIiwicmVhc29uIiwibiIsIm5leHRUaWNrIiwiZiIsInNldFRpbWVvdXQiLCJzb29uIiwiY2FsbFF1ZXVlIiwiZnEiLCJmcVN0YXJ0IiwiYnVmZmVyU2l6ZSIsInNwbGljZSIsInN0YXRlIiwiVHlwZUVycm9yIiwiZmlyc3QiLCJyYSIsInJyIiwibCIsImNsaWVudHMiLCJvbkYiLCJvblIiLCJjbGllbnQiLCJhIiwidmFsIiwieiIsInZlcnNpb24iLCJkZWZhdWx0U2V0VGltb3V0IiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJjYWNoZWRTZXRUaW1lb3V0IiwicnVuQ2xlYXJUaW1lb3V0IiwiY2FjaGVkQ2xlYXJUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiY2xlYW5VcE5leHRUaWNrIiwiZHJhaW5pbmciLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsInF1ZXVlSW5kZXgiLCJkcmFpblF1ZXVlIiwidGltZW91dCIsImxlbiIsInJ1biIsIkl0ZW0iLCJhcnJheSIsIm5vb3AiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb25zIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwiYmluZGluZyIsIm5hbWUiLCJjd2QiLCJjaGRpciIsImRpciIsInVtYXNrIiwiVGltZW91dCIsImNsZWFyRm4iLCJfaWQiLCJfY2xlYXJGbiIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImNsb3NlIiwidW5yZWYiLCJyZWYiLCJlbnJvbGwiLCJtc2VjcyIsIl9pZGxlVGltZW91dElkIiwiX2lkbGVUaW1lb3V0IiwidW5lbnJvbGwiLCJfdW5yZWZBY3RpdmUiLCJhY3RpdmUiLCJfb25UaW1lb3V0IiwiY2xlYXJJbW1lZGlhdGUiLCJnbG9iYWwiLCJ0YXNrIiwidGFza3NCeUhhbmRsZSIsIm5leHRIYW5kbGUiLCJyZWdpc3RlckltbWVkaWF0ZSIsImhhbmRsZSIsInJ1bklmUHJlc2VudCIsImN1cnJlbnRseVJ1bm5pbmdBVGFzayIsImRvYyIsImRvY3VtZW50IiwiYXR0YWNoVG8iLCJnZXRQcm90b3R5cGVPZiIsInBvc3RNZXNzYWdlIiwiaW1wb3J0U2NyaXB0cyIsInBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMiLCJvbGRPbk1lc3NhZ2UiLCJvbm1lc3NhZ2UiLCJtZXNzYWdlUHJlZml4IiwiTWF0aCIsInJhbmRvbSIsIm9uR2xvYmFsTWVzc2FnZSIsImluZGV4T2YiLCJhdHRhY2hFdmVudCIsIk1lc3NhZ2VDaGFubmVsIiwiY2hhbm5lbCIsInBvcnQxIiwicG9ydDIiLCJodG1sIiwiZG9jdW1lbnRFbGVtZW50Iiwic2NyaXB0IiwicmVtb3ZlQ2hpbGQiLCJpc1RoZW5hYmxlIiwicmVzb2x1dGlvbiIsImhvdyIsIkNoYWluZWQiLCJfdW5jaGFpbmVkIiwidGhlbkNoYWluIiwicmVzIiwicmVqIiwiY2hhaW4iLCJfcmVzb2x2ZXIiLCJkZWJvdW5jZSIsIndhaXQiLCJpbnZva2VGdW5jIiwidGltZSIsImxhc3RBcmdzIiwidGhpc0FyZyIsImxhc3RUaGlzIiwibGFzdEludm9rZVRpbWUiLCJsZWFkaW5nRWRnZSIsInRpbWVySWQiLCJ0aW1lckV4cGlyZWQiLCJsZWFkaW5nIiwicmVtYWluaW5nV2FpdCIsInRpbWVTaW5jZUxhc3RDYWxsIiwibGFzdENhbGxUaW1lIiwidGltZVNpbmNlTGFzdEludm9rZSIsIm1heGluZyIsIm5hdGl2ZU1pbiIsIm1heFdhaXQiLCJzaG91bGRJbnZva2UiLCJub3ciLCJ0cmFpbGluZ0VkZ2UiLCJ0cmFpbGluZyIsImNhbmNlbCIsImZsdXNoIiwiZGVib3VuY2VkIiwiaXNJbnZva2luZyIsIkZVTkNfRVJST1JfVEVYVCIsInRvTnVtYmVyIiwiaXNPYmplY3QiLCJuYXRpdmVNYXgiLCJ0eXBlIiwiaXNPYmplY3RMaWtlIiwiaXNTeW1ib2wiLCJvYmplY3RUb1N0cmluZyIsInN5bWJvbFRhZyIsIk5BTiIsIm90aGVyIiwidmFsdWVPZiIsInJlVHJpbSIsImlzQmluYXJ5IiwicmVJc0JpbmFyeSIsInRlc3QiLCJyZUlzT2N0YWwiLCJmcmVlUGFyc2VJbnQiLCJyZUlzQmFkSGV4IiwicGFyc2VJbnQiLCJmcmVlR2xvYmFsIiwiZnJlZVNlbGYiLCJvYmplY3RQcm90byIsIm1pbiIsIkRhdGUiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInByb3BzIiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIlNlYXJjaEVsZW1lbnQiLCJfcmVmJGhhbmRsZVN1Ym1pdCIsIl9yZWYkc2VhcmNoTGFiZWwiLCJfcmVmJGNsYXNzTmFtZXMiLCJqb2luIiwicGxhY2Vob2xkZXIiLCJvbklucHV0Iiwib25LZXlVcCIsIm9uS2V5UHJlc3MiLCJvbkZvY3VzIiwib25CbHVyIiwiX2VsZW1lbnRzIiwiaGFzRXJyb3IiLCJfZWxlbWVudHMyIiwiYm9keSIsImJsdXIiLCJFTlRFUl9LRVkiLCJlbGVtZW50IiwicGFyZW50IiwiZWwiLCJjbGFzc05hbWUiLCJjcmVhdGVTY3JpcHRFbGVtZW50IiwiY2IiLCJzZXRBdHRyaWJ1dGUiLCJqc29uIiwiYWRkIiwiQVJST1dfTEVGVF9LRVkiLCJBUlJPV19SSUdIVF9LRVkiLCJjeCIsImNsYXNzbmFtZXMiLCJ0cmltIiwiUmVzdWx0TGlzdCIsIl9yZWYkaGFuZGxlQ2xpY2siLCJfaW5pdGlhbGlzZVByb3BzIiwicmVzdWx0SXRlbSIsImNoaWxkIiwiY2xvbmVOb2RlIiwiaW5uZXJIVE1MIiwiZnJvbSIsImxhc3RDaGlsZCIsIl9yZWYyIiwicGFyZW50Tm9kZSIsImhhc0F0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiUmVmZXJlbmNlRXJyb3IiLCJfaW5oZXJpdHMiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJjcmVhdGUiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIl9wcm92aWRlcjIiLCJQcm92aWRlciIsIl9CYXNlUHJvdmlkZXIiLCJwcm90b2NvbCIsImpzb25wIiwicGFyYW1zIiwiZ2V0UGFyYW1TdHJpbmciLCJyZXNvdXJjZVNldHMiLCJyZXNvdXJjZXMiLCJwb2ludCIsImNvb3JkaW5hdGVzIiwiYWRkcmVzcyIsImZvcm1hdHRlZEFkZHJlc3MiLCJiYm94IiwicmF3IiwiX3JlZjMiLCJlbmRwb2ludCIsImVuY29kZVVSSUNvbXBvbmVudCIsInJlcXVlc3QiLCJmZXRjaCIsInRleHQiLCJsb2NhdGlvbnMiLCJmZWF0dXJlIiwiZ2VvbWV0cnkiLCJleHRlbnQiLCJ5bWluIiwieG1pbiIsInltYXgiLCJ4bWF4IiwicGFyYW1TdHJpbmciLCJsbmciLCJsYXQiLCJmb3JtYXR0ZWRfYWRkcmVzcyIsInZpZXdwb3J0Iiwic291dGh3ZXN0Iiwibm9ydGhlYXN0IiwiZm9ybWF0IiwibG9uIiwiZGlzcGxheV9uYW1lIiwicGFyc2VGbG9hdCIsImJvdW5kaW5nYm94IiwiR2V0QWN0aXZlTGF5ZXJHcm91cHMiLCJsYXllckdyb3VwTGF5b3V0IiwiZmlsdGVyIiwibGF5ZXJHcm91cCIsIm1ha2VMYXllckVsZW1zIiwibWFrZUxheWVyR3JvdXBzIiwibWFrZVBhbmVsRHJhZ2dhYmxlIiwic2V0UGFuZWxTY3JvbGxIYW5kbGVyIiwiYnJvd3NlcklzSW50ZXJuZXRFeHBsb3JlciIsInVhIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJvbnNjcm9sbCIsInVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQiLCJvdmVybGF5IiwiZDMiLCJkcmFnIiwicGFuZWxEcmFnRXZlbnRIYW5kbGVyIiwidXBkYXRlUGFuZWxXaWR0aCIsIm5ld0hlaWdodCIsInBhbmVsIiwicGFuZWxPZmZzZXRIZWlnaHQiLCJwcm9wZXJ0eSIsInBhbmVsRHJhZ092ZXJsYXkiLCJoZWFkZXIiLCJjbGFzc2VkIiwiZ3JhcGhMaXN0Iiwic2Nyb2xsSGVpZ2h0IiwibGF5ZXJMaXN0IiwiaGVpZ2h0IiwicGFuZWxNaW5XaWR0aCIsInBhbmVsQ2xpZW50V2lkdGgiLCJ3cmFwcGVyIiwid3JhcHBlcldpZHRoIiwiY2xpZW50V2lkdGgiLCJtYXBXcmFwcGVyIiwibW91c2VYIiwic291cmNlRXZlbnQiLCJ4RGVsdGEiLCJuZXdQYW5lbFdpZHRoIiwicGFkZGluZ1JpZ2h0Iiwic2VsZWN0QWxsIiwiZW50ZXIiLCJhcHBlbmQiLCJhdHRyIiwiZWFjaCIsImxheWVyR3JvdXBzIiwibGF5ZXJEaXYiLCJtYWtlQ2hlY2tib3giLCJtYWtlTGFiZWwiLCJtYWtlRGVzY3JpcHRpb24iLCJub2RlIiwibWFrZUxheWVyVG9vbHMiLCJ0b2dnbGVMYXllciIsInNsaWRlckhhbmRsZSIsIl9vcGFjaXR5U2xpZGVyIiwic2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uIiwib3BhY2l0aXkiLCJpbmZvIiwibGF5ZXJUb29sc0RpdiIsIm9wYWNpdHlTbGlkZXIiLCJtYWtlT3BhY2l0eVNsaWRlciIsImxlZ2VuZCIsIm1ha2VMZWdlbmQiLCJsYXllclRvb2xzV3JhcHBlciIsImxlZ2VuZFdyYXBwZXIiLCJsZWdlbmRJbWciLCJHZXRDdXJyZW50TGF5ZXJzIiwiX2N1cnJlbnRfbGF5ZXJzIiwiZGVmYXVsdExheWVycyIsImoiLCJkZWZhdWx0TGF5ZXIiLCJmb3VuZExheWVyIiwiZW5hYmxlTGF5ZXIiLCJkaXNhYmxlTGF5ZXIiLCJHZXRNYXAiLCJtYXBMYXllciIsIm1ha2VXbXNUaWxlTGF5ZXIiLCJhZGRMYXllclRvSW50ZXJuYWxUcmFja2VyIiwibW92ZU92ZXJsYXlMYXllcnNUb1RvcCIsIl9jdXJyZW50X2xheWVyc19vYmplY3RzIiwiYnJpbmdUb0Zyb250IiwiaGFzTGF5ZXIiLCJyZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIiLCJsb2MiLCJ1cGRhdGVMYXllck9wYWNpdHkiLCJuZXdPcGFjaXR5Iiwic2V0T3BhY2l0eSIsInRpbGVMYXllciIsIndtcyIsInRyYW5zcGFyZW50IiwiY3JzIiwiQ1JTIiwiRVBTRzkwMDkxMyIsInRpbGVTaXplIiwibWFwQ29uZmlnIiwic2Nyb2xsV2hlZWxab29tIiwiaW5pdGlhbENlbnRlciIsImNlbnRlciIsImluaXRpYWxab29tIiwiem9vbSIsImNvbnRyb2wiLCJhdHRyaWJ1dGlvbiIsInN0cmluZ2lmeSIsInNldFNoYXJlVXJsIiwibWFrZVNoYXJlVXJsIiwibWFrZUNlbnRlclN0cmluZyIsIm1ha2Vab29tU3RyaW5nIiwibWFrZUxheWVyU3RyaW5nIiwibWFrZUxheWVyR3JvdXBzU3RyaW5nIiwibWFrZUJhc2VMYXllclN0cmluZyIsIm1ha2VQb2ludHNPZkludGVyZXN0U3RyaW5nIiwibWFrZUFjdGl2ZVRhYlN0cmluZyIsIm1ha2VBY3RpdmVHcmFwaFRhYlN0cmluZyIsInNldENvcHlMaW5rVXJsIiwic2V0U29jaWFsVXJscyIsInNoYXJlIiwicGFyc2VTaGFyZVVybCIsImFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyIsImFkZEJhc2VMYXllclNldHRpbmdzVG9Db25maWciLCJhZGRQb2ludHNPZkludGVyZXN0VG9Db25maWciLCJhZGRMYXllckdyb3VwU2V0dGluZ3NUb0NvbmZpZyIsImhpc3RvcnkiLCJyZXBsYWNlU3RhdGUiLCJoYW5kbGVCb2R5Q2xpY2siLCJoYW5kbGVTaGFyZUxpbmtCdXR0b25DbGljayIsImhhbmRsZVNoYXJlTGlua1VybENsaWNrIiwiaGFuZGxlU2hhcmVMaW5rQ2xvc2VCdXR0b25DbGljayIsIm5vZGVQYXRoIiwiZ2V0RG9tUGF0aCIsInRvQ2xvc2VQb3B1cCIsImhhbmRsZUNvcHlMaW5rQ2xvc2UiLCJwYXRoIiwic2hhcmVQb3B1cCIsImhhbmRsZUNvcHlMaW5rT3BlbiIsInNlbGVjdENvcHlMaW5rVXJsIiwidG9nZ2xlIiwic2hhcmVJbnB1dCIsInNldFNlbGVjdGlvblJhbmdlIiwic29jaWFsTGluayIsIm5ld1VybCIsIm1hbmdsZVBhcmFtU3RyaW5nIiwic29jaWFsTGlua3MiLCJvcGFjaXR5VmFscyIsImN1cnJlbnRMYXllcnMiLCJlYWNoTGF5ZXIiLCJjdXJyZW50TGF5ZXIiLCJCQVNFX0xBWUVSX1RZUEUiLCJkIiwiR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCIsInBvaVN0cmluZyIsInBvaSIsImdldFBhcmFtc0FycmF5IiwibWFrZUtleWVkUGFyYW1zT2JqZWN0IiwiZm9ybWF0UGFyYW1zIiwic3Vic3RyaW5nIiwidW5tYW5nbGVQYXJhbVN0cmluZyIsInNwbGl0IiwicGFyYW1zQXJyIiwicGFyYW1QYWlyIiwicGFyc2VkUGFyYW1zIiwiZm9ybWF0Q2VudGVyUGFyYW0iLCJmb3JtYXRMYXllclBhcmFtIiwiZm9ybWF0QmFzZUxheWVyUGFyYW0iLCJmb3JtYXRQb2ludHNPZkludGVyZXN0UGFyYW0iLCJmb3JtYXRMYXllckdyb3Vwc1BhcmFtIiwibGF5ZXJJZCIsImZvcm1hdHRlZExheWVycyIsImVuYWJsZWRMYXllcnMiLCJzdHIiLCJsYXllckdyb3VwU2V0dGluZ3MiLCJhY3RpdmVMYXllckdyb3VwSWRzIiwic2hhcmVMYXllclNldHRpbmdzIiwiZW5hYmxlZExheWVyIiwic2hhcmVCYXNlTGF5ZXJTZXR0aW5ncyIsImJhc2VsYXllciIsImxheWVyQ29uZmlnIiwiX2Jhc2VsYXllcnMiLCJiYXNlTGF5ZXIiLCJjcmVhdGVCYXNlTGF5ZXIiLCJjcmVhdGVCYXNlTGF5ZXJVSSIsImJhc2VVSSIsImJhc2VXcmFwcGVyIiwiYmFzZUltZyIsImJhc2VMYWJlbCIsImltYWdlIiwidGV4dENvbnRlbnQiLCJoYW5kbGVCYXNlQ2xpY2siLCJsYXllcmlkIiwidG9nZ2xlQWN0aXZlQmFzZVVJIiwicmVtb3ZlQ3VycmVudEJhc2VMYXllciIsImFkZE5ld0Jhc2VMYXllclRvTWFwIiwiYmFzZVVJRWxlbSIsImJyaW5nVG9CYWNrIiwibWFrZUJhc2VMYXllck9wdGlvbnMiLCJzdWJkb21haW5zIiwiX3BvaW50c19vZl9pbnRlcmVzdCIsIkFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlciIsIm5ld1BvaXMiLCJBZGRNdWx0aXBsZVBvaW50c09mSW50ZXJlc3QiLCJTZXR1cFBvaW50T2ZJbnRlcmVzdFVJIiwiUmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXIiLCJwb2lUb1JlbW92ZSIsImRpdiIsImNyZWF0ZUdyYXBoRGl2IiwiY3JlYXRlTWFya2VyIiwiZ3JhcGhEaXYiLCJjcmVhdGVHcmFwaFJlbW92ZXIiLCJzZXRJY29uIiwiZ2V0SWNvbiIsImhhbmRsZU1hcmtlck1vdXNlRXZlbnQiLCJvcmlnaW5hbEV2ZW50Iiwic2Nyb2xsVG9Qb2ludE9mSW50ZXJlc3RHcmFwaCIsInRyaWdnZXJHcmFwaEFuaW1hdGlvbiIsInJpZ2h0UGFuZWwiLCJzY3JvbGxUb3AiLCJvZmZzZXRUb3AiLCJSZW1vdmVQb2ludE9mSW50ZXJlc3RVSSIsImhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrIiwiZXh0ZW5kRGF0ZU1vZHVsZSIsInRpcCIsImlzTGVhcFllYXIiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJnZXRET1kiLCJkYXlDb3VudCIsIm1uIiwiZ2V0TW9udGgiLCJkbiIsImdldERhdGUiLCJkYXlPZlllYXIiLCJoYW5kbGVNYXBDbGljayIsImhvdmVySWNvbiIsImdyYXBoSWNvbiIsImxhdGxuZyIsImVsZW0iLCJjcmVhdGVHcmFwaFJlbW92ZXJFbGVtIiwiaW5uZXJUZXh0IiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiaGFuZGxlR3JhcGhEYXRhUmVzcG9uc2UiLCJkcmF3R3JhcGgiLCJnZXREYXRhIiwib1JlcSIsInNwbGl0RGF0YSIsInJlcHJvY2Vzc0RhdGEiLCJvcmlnZGF0YSIsImtleXNUb0JlRGVsZXRlZCIsImRhdGFGb3JNZWRpYW5zIiwibWVkaWFuIiwic29ydCIsImZsb29yIiwiYWN0aXZlVHlwZSIsImdyYXBoVHlwZSIsImlzR3JhcGhMaXN0RW1wdHkiLCJvbGRBY3RpdmVHcmFwaEVsZW1IZWlnaHQiLCJvbGRBY3RpdmVHcmFwaEluZm9IZWlnaHQiLCJyaWdodFBhbmVsU2Nyb2xsVG9wIiwiZGlzYWJsZUFjdGl2ZUdyYXBoVGFiIiwiZW5hYmxlR3JhcGhUYWIiLCJhZGp1c3RTY3JvbGxQb3NpdGlvbiIsIm9sZEdyYXBoSW5mb0hlaWdodCIsIm9sZEdyYXBoRWxlbUhlaWdodCIsIm9sZFJpZ2h0UGFuZWxTY3JvbGxUb3AiLCJuZXdHcmFwaEluZm9IZWlnaHQiLCJuZXdHcmFwaEVsZW1IZWlnaHQiLCJuZXdHcmFwaEVsZW1IZWlnaHRTY2FsZSIsIm5ld1JpZ2h0UGFuZWxTY3JvbGxUb3AiLCJhY3RpdmVFbGVtIiwiYWN0aXZlQ2xhc3MiLCJsYXRTaG9ydCIsInJvdW5kRmxvYXQiLCJsbmdTaG9ydCIsInpvb21Ub01hcmtlckJ1dHRvbiIsIm1ha2Vab29tVG9NYXBNYXJrZXJCdXR0b24iLCJjb250ZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJjb250ZW50RGl2Iiwib25jbGljayIsInBhblRvIiwicmVwcm9jZXNzZWREYXRhIiwibWFrZVVwRG93bkxpbmVHcmFwaCIsIm1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMiLCJkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMiLCJudW1iZXIiLCJkZWNpbWFsUGxhY2VzIiwicm91bmQiLCJwb3ciLCJhdmVyYWdlcyIsIm1hcmdpbiIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCIsIndpZHRoIiwic2NhbGVUaW1lIiwicmFuZ2UiLCJkb21haW4iLCJwYXJzZURhdGUiLCJzY2FsZUxpbmVhciIsInhBeGlzIiwiYXhpc0JvdHRvbSIsInRpY2tzIiwidGlja0Zvcm1hdCIsInlBeGlzIiwiYXhpc0xlZnQiLCJ2YWx1ZWxpbmUiLCJsaW5lIiwic3ZnIiwiZHJhd0xpbmVhclBhdGgiLCJkcmF3TGluZWFyUG9pbnRzIiwiZm9ybWF0TW9udGhUaWNrIiwiTU9OVEhfTEFCRUxTIiwiY2hhcnRzIiwibWVkaWFucyIsInRpY2tWYWx1ZXMiLCJpc0FycmF5IiwicGFyc2VKdWxpYW5EYXkiLCJpbnB1dHdyYXBwZXIiLCJjcmVhdGVDaGVja2JveCIsInJhZGl1cyIsImZpbmRQb2xhckNlbnRlciIsInRocmVzaG9sZHMiLCJmaW5kUG9sYXJUaHJlc2hvbGRzIiwicmFkaWFsTGluZSIsImFuZ2xlIiwiUEkiLCJnciIsImdhX2EiLCJ0aHJlc2hvbGRFbGVtIiwiZGF5IiwiY2VudGVyRGF5IiwiZHJhd1BvbGFyUGF0aCIsInNob3ciLCJoaWRlIiwicG9pbnRzIiwiY2hlY2tib3hXcmFwcGVyIiwibmV3WWVhciIsImNoZWNrZWQiLCJwdWxsRGlzdGluY3RDb2xvciIsInRocmVzaG9sZENoZWNrYm94Iiwib2Zmb24iLCJhcnIiLCJzdW0iLCJ0b3RhbFN1bSIsImluY29tcGxldGVZZWFycyIsImFicyIsImNoZWNrRGlmZiIsImxlZnRBcmVhIiwicmlnaHRBcmVhIiwiayIsImNvdW50ZXIiLCJhcmVhRGlmZiIsImFyZWFJbmRleCIsImF2Z3MiLCJmaXJzdFJhZGl1cyIsInNlY29uZFJhZGl1cyIsImZpcnN0RGlmZiIsInN0YXJ0RGF5Iiwic3RhcnRJbmRleCIsImZpZnRlZW5JbmRleCIsImVpZ2h0eUluZGV4IiwiZmlmdGVlblRocmVzaG9sZCIsImVpZ2h0eVRocmVzaG9sZCIsImZpZnRlZW5JbmRleEZvdW5kIiwiZWlnaHR5SW5kZXhGb3VuZCIsImNpcmNsZUNlbnRlciIsImRhdHVtIiwiaGFuZGxlUG9pbnRNb3VzZW92ZXIiLCJoYW5kbGVQb2ludE1vdXNlb3V0IiwidGlwU3RyaW5nIiwiZm9ybWF0RGF0ZSIsImNvbG9yUmFtcCIsImRhdGUiLCJtb250aCIsImZvcm1hdE1vbnRoIiwib3JkaW5hbF9zdWZmaXhfb2YiLCJiYXNlSWNvbiIsImljb25VcmwiLCJzaGFkb3dVcmwiLCJpY29uU2l6ZSIsImljb25BbmNob3IiLCJwb3B1cEFuY2hvciIsInNoYWRvd1NpemUiLCIwIiwiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5IiwiMTAiLCIxMSIsImhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrIiwiR2V0QWN0aXZlVGFiIiwibmV3Q2xhc3MiLCJkaXNhYmxlQWN0aXZlVGFiIiwiZW5hYmxlVGFiIiwidG9nZ2xlTWFwUGFkZGluZyIsInJlc2V0UGFuZWxXaWR0aCIsIm9mZnNldFdpZHRoIiwib3BhY2l0eVNjYWxlIiwibGF5ZXJPcGFjaXR5Iiwic2xpZGVyVHJhY2tPdmVybGF5IiwibWFrZVNsaWRlclRyYWNrIiwiaWNvbldyYXBwZXJDbG9zZWQiLCJtYWtlT3BhY2l0eUljb25XcmFwcGVyIiwidHJhY2siLCJzZXREcmFnRXZlbnRMaXN0ZW5lciIsImNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zIiwieVBvcyIsIm1vdXNlIiwiaW52ZXJ0IiwiY2xhbXAiLCJDcmVhdGVMb2dvIiwibG9nb2RhdGEiLCJsb2dvV3JhcHBlciIsImNyZWF0ZUxvZ29XcmFwcGVyIiwibG9nb0ltYWdlIiwiY3JlYXRlTG9nb0ltYWdlIiwibG9nb0xpbmsiLCJsaW5rIiwiY3JlYXRlTG9nb0xpbmsiLCJpbnNlcnRFbGVtZW50IiwiZXhpc3RpbmdDaGlsZCIsImZpcnN0Q2hpbGQiLCJpbnNlcnRCZWZvcmUiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FFLFdBQ0FFLEdBQUFKLEVBQ0FLLFFBQUEsRUFVQSxPQU5BUCxHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBNEJBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLEdBR0FWLEVBQUEsS0RNTSxTQUFTSSxFQUFRRCxFQUFTSCxHQUUvQkksRUFBT0QsUUFBVUgsRUFBb0IsSUFLaEMsU0FBU0ksRUFBUUQsRUFBU0gsR0FFL0IsWUFnQ0EsU0FBU1csR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsR0E5QnZGRyxPQUFPQyxlQUFlYixFQUFTLGNBQzNCYyxPQUFPLEdFeERjLElBQUFDLEdBQUFsQixFQUFBLEdBQ0RtQixFQUFBbkIsRUFBQSxH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QWlCLFFBQVMsV2hDNDVKOUJ6RSxHZ0N6NUpBLE9BQVEsU2hDMDVKSkMsY2dDeDVKTCxNaEN5NUpLQyxZZ0N4NUpMLFFoQ3k1SktDLFdnQ3g1SkwsY2hDeTVKS0MsZ0JnQ3Y1SlIsTUFHSjg0QixFaEN3MUpBdi9CLE9BQU9DLGVBQWViLEVBQVMsY0FDM0JjLE9BQU8sSUFFWGQsRUFBUVcsUUFBVWsvQixHQWtFYixTQUFTNS9CLEVBQVFEIiwiZmlsZSI6ImluZGV4X2J1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9wYXJzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9zZWFyY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIF9zZWFyY2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoKTtcblx0XG5cdHZhciBfcGFuZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0XG5cdHZhciBfYmFzZWxheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdFxuXHR2YXIgX2dyYXBoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdFxuXHR2YXIgX3RhYnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHR2YXIgX2xheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHR2YXIgX2xvZ28gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKTtcblx0XG5cdHZhciBfbG9nbzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2dvKTtcblx0XG5cdHZhciBfcG9pID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0dmFyIGNzcyA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpO1xuXHRcblx0Ly8gRG9lcyBub3QgcmVseSBvbiBtYXAgb2JqZWN0IG9yIGNvbmZpZyBmaWxlXG5cdHZhciBCYXNlID0gZnVuY3Rpb24gQmFzZShjb25maWcpIHtcblx0ICAgICgwLCBfcGFyc2VyLlBhcnNlQ29uZmlnKShjb25maWcsIGNhbGxiYWNrKTtcblx0ICAgICgwLCBfZ3JhcGguU2V0dXBHcmFwaHMpKCk7XG5cdCAgICAoMCwgX3RhYnMuQmluZFRhYkV2ZW50cykoKTtcblx0ICAgICgwLCBfc2hhcmUuQmluZENvcHlMaW5rRXZlbnRzKSgpO1xuXHR9O1xuXHRcblx0Ly8gRG9lcyByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcblx0dmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2soZGF0YSkge1xuXHQgICAgKDAsIF9zaGFyZS5BZGRTaGFyZVNldHRpbmdzVG9Db25maWcpKGRhdGEpO1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkNyZWF0ZU1hcCkoZGF0YS5tYXApO1xuXHQgICAgKDAsIF9iYXNlbGF5ZXIuQ3JlYXRlQmFzZUxheWVycykobWFwLCBkYXRhLmJhc2VsYXllcnMpO1xuXHQgICAgKDAsIF9sYXllci5DcmVhdGVEZWZhdWx0TGF5ZXJzKShkYXRhLmxheWVycywgZGF0YVtcImFjdGl2ZS1sYXllcnNcIl0pO1xuXHQgICAgKDAsIF9wYW5lbC5TZXR1cFBhbmVsKShkYXRhLmxheWVycywgZGF0YS5sYXlvdXQpO1xuXHQgICAgKDAsIF9zZWFyY2gyLmRlZmF1bHQpKG1hcCk7XG5cdCAgICAoMCwgX2xvZ28yLmRlZmF1bHQpKGRhdGEubG9nbyk7XG5cdCAgICBpZiAoZGF0YS50YWIpICgwLCBfdGFicy5IYW5kbGVUYWJDaGFuZ2UpKGRhdGEudGFiKTtcblx0ICAgIGlmIChkYXRhLmdyYXBoKSAoMCwgX2dyYXBoLkhhbmRsZUdyYXBoVGFiQ2hhbmdlKShkYXRhLmdyYXBoKTtcblx0ICAgICgwLCBfZ3JhcGguQmluZEdyYXBoRXZlbnRzKShtYXApO1xuXHQgICAgKDAsIF9zaGFyZS5CaW5kVXBkYXRlU2hhcmVVcmwpKG1hcCk7XG5cdCAgICAoMCwgX3BvaS5TZXR1cFBvaW50c09mSW50ZXJlc3QpKG1hcCwgZGF0YS5wb2lzKTtcblx0ICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH07XG5cdFxuXHR3aW5kb3cuQmFzZSA9IEJhc2U7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7IEJhc2U6IEJhc2UgfTtcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5QYXJzZUNvbmZpZyA9IFBhcnNlQ29uZmlnO1xuXHRleHBvcnRzLkdldEFqYXhPYmplY3QgPSBHZXRBamF4T2JqZWN0O1xuXHQvKipcclxuXHQgKiBQYXJzZXMgYSBjb25maWcgZmlsZS4gU2luY2UgdGhlIHByb2Nlc3MgdG8gZ2V0IGV4dGVybmFsIGZpbGVzXHJcblx0ICogdXNlcyBBSkFYIHlvdSBuZWVkIHRvIHBhc3MgYSBjYWxsYmFjayB0byBoYW5kbGUgdGhlIG5leHQgc3RlcHNcclxuXHQgKiBvZiB1c2luZyB0aGUgY29uZmlnIGZpbGUsIHNpbmNlIHdlIGRvIG5vdCBrbm93IGhvdyBsb25nIGl0XHJcblx0ICogd2lsbCB0YWtlIHRvIGdyYWIgdGhlIGZpbGUuXHJcblx0ICovXG5cdGZ1bmN0aW9uIFBhcnNlQ29uZmlnKGNvbmZpZ0ZpbGUsIGNhbGxiYWNrKSB7XG5cdCAgICBHZXRDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBHZXRBamF4T2JqZWN0KHJlc3BvbnNlSGFuZGxlcikge1xuXHQgICAgdmFyIHhtbGh0dHA7XG5cdCAgICBpZiAoIXdpbmRvdy5YTUxIdHRwUmVxdWVzdCAmJiB3aW5kb3cuQWN0aXZlWE9iamVjdCkge1xuXHQgICAgICAgIHhtbGh0dHAgPSBuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoXCJNU1hNTDIuWE1MSFRUUC4zLjBcIik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0ICAgIH1cblx0ICAgIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh4bWxodHRwLnJlYWR5U3RhdGUgPT09IDQpIHtcblx0ICAgICAgICAgICAgcmVzcG9uc2VIYW5kbGVyKHhtbGh0dHAucmVzcG9uc2UpO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4geG1saHR0cDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gR2V0Q29uZmlnKGNvbmZpZ0ZpbGUsIGNhbGxiYWNrKSB7XG5cdCAgICB2YXIgeG1saHR0cCA9IEdldEFqYXhPYmplY3QoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZUhhbmRsZXIocmVzcG9uc2UpO1xuXHQgICAgICAgIGNhbGxiYWNrKGRhdGEpO1xuXHQgICAgfSk7XG5cdCAgICB4bWxodHRwLm9wZW4oXCJHRVRcIiwgY29uZmlnRmlsZSwgdHJ1ZSk7XG5cdCAgICB4bWxodHRwLnNlbmQoKTtcblx0ICAgIGNvbnNvbGUubG9nKFwiaGlcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlc3BvbnNlSGFuZGxlcihyZXNwb25zZSkge1xuXHQgICAgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcblx0ICAgIGZvcm1hdE1hcChyZXNwb25zZSk7XG5cdCAgICBmb3JtYXRMYXllcnMocmVzcG9uc2UpO1xuXHQgICAgcmV0dXJuIHJlc3BvbnNlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRNYXAoZGF0YSkge1xuXHQgICAgaWYgKCFkYXRhLm1hcCkgZGF0YS5tYXAgPSB7fTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0TGF5ZXJzKGRhdGEpIHtcblx0ICAgIHZhciBsYXllcnMgPSBkYXRhLmxheWVycztcblx0ICAgIHZhciBkZWZhdWx0TWFwc2VydmVyVXJsID0gZGF0YS5tYXBzZXJ2ZXJVcmw7XG5cdCAgICB2YXIgZGVmYXVsdEVuYWJsZWRMYXllcnMgPSBkYXRhW1wiYWN0aXZlLWxheWVyc1wiXTtcblx0ICAgIHZhciBsYXllcmdyb3VwO1xuXHQgICAgdmFyIGk7XG5cdFxuXHQgICAgZm9yICh2YXIgcHJvcCBpbiBsYXllcnMpIHtcblx0ICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xuXHQgICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IGxheWVyZ3JvdXAubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgc2V0TWFwc2VydmVyVXJsKGxheWVyZ3JvdXBbaV0sIGRlZmF1bHRNYXBzZXJ2ZXJVcmwpO1xuXHQgICAgICAgICAgICBzZXREZWZhdWx0TGF5ZXJPcGFjaXR5KGxheWVyZ3JvdXBbaV0sIGRhdGEuZGVmYXVsdExheWVyT3BhY2l0eSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXREZWZhdWx0TGF5ZXJPcGFjaXR5KGxheWVyLCBvcGFjaXR5KSB7XG5cdCAgICBsYXllci5vcGFjaXR5ID0gbGF5ZXIub3BhY2l0eSB8fCBvcGFjaXR5O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRNYXBzZXJ2ZXJVcmwobGF5ZXIsIHVybCkge1xuXHQgICAgbGF5ZXIudXJsID0gbGF5ZXIudXJsIHx8IHVybDtcblx0fVxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ3JlYXRlU2VhcmNoO1xuXHRcblx0dmFyIF9sZWFmbGV0R2Vvc2VhcmNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdGZ1bmN0aW9uIENyZWF0ZVNlYXJjaChtYXApIHtcblx0ICAgIHZhciBwcm92aWRlciA9IG5ldyBfbGVhZmxldEdlb3NlYXJjaC5PcGVuU3RyZWV0TWFwUHJvdmlkZXIoKTtcblx0XG5cdCAgICB2YXIgc2VhcmNoQ29udHJvbCA9IG5ldyBfbGVhZmxldEdlb3NlYXJjaC5HZW9TZWFyY2hDb250cm9sKHtcblx0ICAgICAgICBwcm92aWRlcjogcHJvdmlkZXIsXG5cdCAgICAgICAgc2hvd01hcmtlcjogZmFsc2UsXG5cdCAgICAgICAgYXV0b0NvbXBsZXRlOiB0cnVlLFxuXHQgICAgICAgIHNob3dQb3B1cDogZmFsc2Vcblx0ICAgIH0pO1xuXHRcblx0ICAgIG1hcC5hZGRDb250cm9sKHNlYXJjaENvbnRyb2wpO1xuXHRcblx0ICAgIHZhciBzZWFyY2hFbGVtZW50cyA9IHNlYXJjaENvbnRyb2wuc2VhcmNoRWxlbWVudC5lbGVtZW50cztcblx0XG5cdCAgICBMLkRvbUV2ZW50Lm9uKHNlYXJjaEVsZW1lbnRzLmNvbnRhaW5lciwgXCJjbGlja1wiLCBmdW5jdGlvbiAoZXYpIHtcblx0ICAgICAgICBMLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbihldik7XG5cdFxuXHQgICAgICAgIHZhciBzZWFyY2hFbnRyaWVzID0gc2VhcmNoRWxlbWVudHMuZm9ybS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdyZXN1bHRzJylbMF0uY2hpbGRyZW47XG5cdFxuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VhcmNoRW50cmllcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBpZiAoZXYudGFyZ2V0ID09PSBzZWFyY2hFbnRyaWVzW2ldKSB7XG5cdCAgICAgICAgICAgICAgICBzZWFyY2hFbGVtZW50cy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBzZWFyY2ggYnkgYWRkcmVzc1xuXHQgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcblx0ICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdzZWFyY2gnLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiAnY2xpY2snLFxuXHQgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICB9KTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIEwuRG9tRXZlbnQub24oc2VhcmNoRWxlbWVudHMuY29udGFpbmVyLCBcImtleWRvd25cIiwgZnVuY3Rpb24gKGV2KSB7XG5cdCAgICAgICAgTC5Eb21FdmVudC5zdG9wUHJvcGFnYXRpb24oZXYpO1xuXHRcblx0ICAgICAgICBpZiAoZXYud2hpY2ggPT0gMTMgfHwgZXYua2V5Q29kZSA9PSAxMykge1xuXHQgICAgICAgICAgICBzZWFyY2hFbGVtZW50cy5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG5cdFxuXHQgICAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3Igc2VhY3JjaCBieSBhZGRyZXNzXG5cdCAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdCAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ3NlYXJjaCBhZGRyZXNzJyxcblx0ICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6IGV2LnRhcmdldC52YWx1ZSxcblx0ICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2xlYWZsZXRDb250cm9sID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnR2VvU2VhcmNoQ29udHJvbCcsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xlYWZsZXRDb250cm9sKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX3NlYXJjaEVsZW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnU2VhcmNoRWxlbWVudCcsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaEVsZW1lbnQpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfYmluZ1Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0JpbmdQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JpbmdQcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9lc3JpUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnRXNyaVByb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXNyaVByb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX2dvb2dsZVByb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0dvb2dsZVByb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ29vZ2xlUHJvdmlkZXIpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfb3BlblN0cmVldE1hcFByb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ09wZW5TdHJlZXRNYXBQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29wZW5TdHJlZXRNYXBQcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9wcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdQcm92aWRlcicsIHtcblx0ICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cbi8qKiovIH0sXG4vKiA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcblx0ICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG5cdCAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG5cdCAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1yZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gTGVhZmxldENvbnRyb2w7XG5cdFxuXHR2YXIgX2xvZGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHRcblx0dmFyIF9sb2Rhc2gyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbG9kYXNoKTtcblx0XG5cdHZhciBfc2VhcmNoRWxlbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0dmFyIF9zZWFyY2hFbGVtZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaEVsZW1lbnQpO1xuXHRcblx0dmFyIF9yZXN1bHRMaXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdFxuXHR2YXIgX3Jlc3VsdExpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVzdWx0TGlzdCk7XG5cdFxuXHR2YXIgX2RvbVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHR2YXIgX2NvbnN0YW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0dmFyIGRlZmF1bHRPcHRpb25zID0gZnVuY3Rpb24gZGVmYXVsdE9wdGlvbnMoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHBvc2l0aW9uOiAndG9wbGVmdCcsXG5cdCAgICBzdHlsZTogJ2J1dHRvbicsXG5cdCAgICBzaG93TWFya2VyOiB0cnVlLFxuXHQgICAgc2hvd1BvcHVwOiBmYWxzZSxcblx0ICAgIG1hcmtlcjoge1xuXHQgICAgICBpY29uOiBuZXcgTC5JY29uLkRlZmF1bHQoKSxcblx0ICAgICAgZHJhZ2dhYmxlOiBmYWxzZVxuXHQgICAgfSxcblx0ICAgIG1heE1hcmtlcnM6IDEsXG5cdCAgICByZXRhaW5ab29tTGV2ZWw6IGZhbHNlLFxuXHQgICAgYW5pbWF0ZVpvb206IHRydWUsXG5cdCAgICBzZWFyY2hMYWJlbDogJ0VudGVyIGFkZHJlc3MnLFxuXHQgICAgbm90Rm91bmRNZXNzYWdlOiAnU29ycnksIHRoYXQgYWRkcmVzcyBjb3VsZCBub3QgYmUgZm91bmQuJyxcblx0ICAgIG1lc3NhZ2VIaWRlRGVsYXk6IDMwMDAsXG5cdCAgICB6b29tTGV2ZWw6IDE4LFxuXHQgICAgY2xhc3NOYW1lczoge1xuXHQgICAgICBjb250YWluZXI6ICdsZWFmbGV0LWJhciBsZWFmbGV0LWNvbnRyb2wgbGVhZmxldC1jb250cm9sLWdlb3NlYXJjaCcsXG5cdCAgICAgIGJ1dHRvbjogJ2xlYWZsZXQtYmFyLXBhcnQgbGVhZmxldC1iYXItcGFydC1zaW5nbGUnLFxuXHQgICAgICBtc2dib3g6ICdsZWFmbGV0LWJhciBtZXNzYWdlJyxcblx0ICAgICAgZm9ybTogJycsXG5cdCAgICAgIGlucHV0OiAnJ1xuXHQgICAgfSxcblx0ICAgIGF1dG9Db21wbGV0ZTogdHJ1ZSxcblx0ICAgIGF1dG9Db21wbGV0ZURlbGF5OiAyNTBcblx0ICB9O1xuXHR9O1xuXHRcblx0dmFyIENvbnRyb2wgPSB7XG5cdCAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShvcHRpb25zKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHRoaXMubWFya2VycyA9IG5ldyBMLkZlYXR1cmVHcm91cCgpO1xuXHRcblx0ICAgIHRoaXMub3B0aW9ucyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0T3B0aW9ucygpLCBvcHRpb25zKTtcblx0XG5cdCAgICB2YXIgX29wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXG5cdCAgICAgICAgc3R5bGUgPSBfb3B0aW9ucy5zdHlsZSxcblx0ICAgICAgICBjbGFzc05hbWVzID0gX29wdGlvbnMuY2xhc3NOYW1lcyxcblx0ICAgICAgICBzZWFyY2hMYWJlbCA9IF9vcHRpb25zLnNlYXJjaExhYmVsLFxuXHQgICAgICAgIGF1dG9Db21wbGV0ZSA9IF9vcHRpb25zLmF1dG9Db21wbGV0ZSxcblx0ICAgICAgICBhdXRvQ29tcGxldGVEZWxheSA9IF9vcHRpb25zLmF1dG9Db21wbGV0ZURlbGF5O1xuXHRcblx0ICAgIGlmIChzdHlsZSAhPT0gJ2J1dHRvbicpIHtcblx0ICAgICAgdGhpcy5vcHRpb25zLmNsYXNzTmFtZXMuY29udGFpbmVyICs9ICcgJyArIG9wdGlvbnMuc3R5bGU7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5zZWFyY2hFbGVtZW50ID0gbmV3IF9zZWFyY2hFbGVtZW50Mi5kZWZhdWx0KF9leHRlbmRzKHt9LCB0aGlzLm9wdGlvbnMsIHtcblx0ICAgICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQocXVlcnkpIHtcblx0ICAgICAgICByZXR1cm4gX3RoaXMub25TdWJtaXQocXVlcnkpO1xuXHQgICAgICB9XG5cdCAgICB9KSk7XG5cdFxuXHQgICAgdmFyIF9zZWFyY2hFbGVtZW50JGVsZW1lbiA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cyxcblx0ICAgICAgICBjb250YWluZXIgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uY29udGFpbmVyLFxuXHQgICAgICAgIGZvcm0gPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uZm9ybSxcblx0ICAgICAgICBpbnB1dCA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5pbnB1dDtcblx0XG5cdCAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIGJ1dHRvbiA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2EnLCBjbGFzc05hbWVzLmJ1dHRvbiwgY29udGFpbmVyKTtcblx0ICAgIGJ1dHRvbi50aXRsZSA9IHNlYXJjaExhYmVsO1xuXHQgICAgYnV0dG9uLmhyZWYgPSAnIyc7XG5cdFxuXHQgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgX3RoaXMub25DbGljayhlKTtcblx0ICAgIH0sIGZhbHNlKTtcblx0XG5cdCAgICBpZiAoYXV0b0NvbXBsZXRlKSB7XG5cdCAgICAgIHRoaXMucmVzdWx0TGlzdCA9IG5ldyBfcmVzdWx0TGlzdDIuZGVmYXVsdCh7XG5cdCAgICAgICAgaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrKF9yZWYpIHtcblx0ICAgICAgICAgIHZhciByZXN1bHQgPSBfcmVmLnJlc3VsdDtcblx0XG5cdCAgICAgICAgICBpbnB1dC52YWx1ZSA9IHJlc3VsdC5sYWJlbDtcblx0ICAgICAgICAgIF90aGlzLm9uU3VibWl0KHsgcXVlcnk6IHJlc3VsdC5sYWJlbCB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgZm9ybS5hcHBlbmRDaGlsZCh0aGlzLnJlc3VsdExpc3QuZWxlbWVudHMuY29udGFpbmVyKTtcblx0XG5cdCAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKDAsIF9sb2Rhc2gyLmRlZmF1bHQpKGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgcmV0dXJuIF90aGlzLmF1dG9TZWFyY2goZSk7XG5cdCAgICAgIH0sIGF1dG9Db21wbGV0ZURlbGF5KSwgdHJ1ZSk7XG5cdCAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5zZWxlY3RSZXN1bHQoZSk7XG5cdCAgICAgIH0sIHRydWUpO1xuXHQgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICByZXR1cm4gX3RoaXMuY2xlYXJSZXN1bHRzKGUpO1xuXHQgICAgICB9LCB0cnVlKTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmVsZW1lbnRzID0geyBidXR0b246IGJ1dHRvbiB9O1xuXHQgIH0sXG5cdCAgb25BZGQ6IGZ1bmN0aW9uIG9uQWRkKG1hcCkge1xuXHQgICAgdmFyIF9vcHRpb25zMiA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICBzaG93TWFya2VyID0gX29wdGlvbnMyLnNob3dNYXJrZXIsXG5cdCAgICAgICAgc3R5bGUgPSBfb3B0aW9uczIuc3R5bGU7XG5cdFxuXHQgICAgdGhpcy5tYXAgPSBtYXA7XG5cdCAgICBpZiAoc2hvd01hcmtlcikge1xuXHQgICAgICB0aGlzLm1hcmtlcnMuYWRkVG8obWFwKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoc3R5bGUgPT09ICdiYXInKSB7XG5cdCAgICAgIHZhciBmb3JtID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmZvcm07XG5cdFxuXHQgICAgICB2YXIgcm9vdCA9IG1hcC5nZXRDb250YWluZXIoKS5xdWVyeVNlbGVjdG9yKCcubGVhZmxldC1jb250cm9sLWNvbnRhaW5lcicpO1xuXHRcblx0ICAgICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsICdsZWFmbGV0LWNvbnRyb2wtZ2Vvc2VhcmNoIGJhcicpO1xuXHQgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZm9ybSk7XG5cdCAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcblx0ICAgICAgdGhpcy5lbGVtZW50cy5jb250YWluZXIgPSBjb250YWluZXI7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5jb250YWluZXI7XG5cdCAgfSxcblx0ICBvblJlbW92ZTogZnVuY3Rpb24gb25SZW1vdmUoKSB7XG5cdCAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgaWYgKGNvbnRhaW5lcikge1xuXHQgICAgICBjb250YWluZXIucmVtb3ZlKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfSxcblx0ICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGV2ZW50KSB7XG5cdCAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcblx0ICAgIHZhciBfc2VhcmNoRWxlbWVudCRlbGVtZW4yID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLFxuXHQgICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbjIuY29udGFpbmVyLFxuXHQgICAgICAgIGlucHV0ID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuMi5pbnB1dDtcblx0XG5cdCAgICBpZiAoY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcblx0ICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHQgICAgICBpbnB1dC5mb2N1cygpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgc2VsZWN0UmVzdWx0OiBmdW5jdGlvbiBzZWxlY3RSZXN1bHQoZXZlbnQpIHtcblx0ICAgIGlmICghW19jb25zdGFudHMuQVJST1dfRE9XTl9LRVksIF9jb25zdGFudHMuQVJST1dfVVBfS0VZXS5pbmNsdWRlcyhldmVudC5rZXlDb2RlKSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgIHZhciBpbnB1dCA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5pbnB1dDtcblx0XG5cdCAgICB2YXIgbGlzdCA9IHRoaXMucmVzdWx0TGlzdDtcblx0ICAgIHZhciBtYXggPSB0aGlzLnJlc3VsdExpc3QuY291bnQoKSAtIDE7XG5cdFxuXHQgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2Vcblx0ICAgIHZhciBuZXh0ID0gZXZlbnQuY29kZSA9PT0gJ0Fycm93RG93bicgPyB+fmxpc3Quc2VsZWN0ZWQgKyAxIDogfn5saXN0LnNlbGVjdGVkIC0gMTtcblx0ICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuXHQgICAgdmFyIGlkeCA9IG5leHQgPCAwID8gbWF4IDogbmV4dCA+IG1heCA/IDAgOiBuZXh0O1xuXHRcblx0ICAgIHZhciBpdGVtID0gbGlzdC5zZWxlY3QoaWR4KTtcblx0ICAgIGlucHV0LnZhbHVlID0gaXRlbS5sYWJlbDtcblx0ICB9LFxuXHQgIGNsZWFyUmVzdWx0czogZnVuY3Rpb24gY2xlYXJSZXN1bHRzKGV2ZW50KSB7XG5cdCAgICBpZiAoZXZlbnQua2V5Q29kZSAhPT0gX2NvbnN0YW50cy5FU0NBUEVfS0VZKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLnJlc3VsdExpc3QuY2xlYXIoKTtcblx0ICB9LFxuXHQgIGF1dG9TZWFyY2g6IGZ1bmN0aW9uIGF1dG9TZWFyY2goZXZlbnQpIHtcblx0ICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgIHZhciBxdWVyeSwgcHJvdmlkZXIsIHJlc3VsdHM7XG5cdFxuXHQgICAgICBpZiAoX2NvbnN0YW50cy5TUEVDSUFMX0tFWVMuaW5jbHVkZXMoZXZlbnQua2V5Q29kZSkpIHtcblx0ICAgICAgICByZXR1cm4gJHJldHVybigpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBxdWVyeSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcblx0ICAgICAgcHJvdmlkZXIgPSB0aGlzLm9wdGlvbnMucHJvdmlkZXI7XG5cdCAgICAgIHJldHVybiBwcm92aWRlci5zZWFyY2goeyBxdWVyeTogcXVlcnkgfSkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcblx0XG5cdCAgICAgICAgcmVzdWx0cyA9ICRhd2FpdF8xO1xuXHQgICAgICAgIHRoaXMucmVzdWx0TGlzdC5yZW5kZXIocmVzdWx0cyk7XG5cdCAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcblx0ICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuXHQgIH0sXG5cdCAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KHF1ZXJ5KSB7XG5cdCAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuXHQgICAgICB2YXIgcHJvdmlkZXIsIHJlc3VsdHM7XG5cdCAgICAgIHByb3ZpZGVyID0gdGhpcy5vcHRpb25zLnByb3ZpZGVyO1xuXHQgICAgICByZXR1cm4gcHJvdmlkZXIuc2VhcmNoKHF1ZXJ5KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMikge1xuXHRcblx0ICAgICAgICByZXN1bHRzID0gJGF3YWl0XzI7XG5cdFxuXHQgICAgICAgIGlmIChyZXN1bHRzICYmIHJlc3VsdHMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgdGhpcy5zaG93UmVzdWx0KHJlc3VsdHNbMF0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gJHJldHVybigpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgfSxcblx0ICBzaG93UmVzdWx0OiBmdW5jdGlvbiBzaG93UmVzdWx0KHJlc3VsdCkge1xuXHQgICAgdmFyIG1hcmtlcnMgPSBPYmplY3Qua2V5cyh0aGlzLm1hcmtlcnMuX2xheWVycyk7XG5cdCAgICBpZiAobWFya2Vycy5sZW5ndGggPj0gdGhpcy5vcHRpb25zLm1heE1hcmtlcnMpIHtcblx0ICAgICAgdGhpcy5tYXJrZXJzLnJlbW92ZUxheWVyKG1hcmtlcnNbMF0pO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBtYXJrZXIgPSB0aGlzLmFkZE1hcmtlcihyZXN1bHQpO1xuXHQgICAgdGhpcy5jZW50ZXJNYXAocmVzdWx0KTtcblx0XG5cdCAgICB0aGlzLm1hcC5maXJlRXZlbnQoJ2dlb3NlYXJjaC9zaG93bG9jYXRpb24nLCB7XG5cdCAgICAgIGxvY2F0aW9uOiByZXN1bHQsXG5cdCAgICAgIG1hcmtlcjogbWFya2VyXG5cdCAgICB9KTtcblx0ICB9LFxuXHQgIGFkZE1hcmtlcjogZnVuY3Rpb24gYWRkTWFya2VyKHJlc3VsdCkge1xuXHQgICAgdmFyIF9vcHRpb25zMyA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICBvcHRpb25zID0gX29wdGlvbnMzLm1hcmtlcixcblx0ICAgICAgICBzaG93UG9wdXAgPSBfb3B0aW9uczMuc2hvd1BvcHVwO1xuXHRcblx0ICAgIHZhciBtYXJrZXIgPSBuZXcgTC5NYXJrZXIoW3Jlc3VsdC55LCByZXN1bHQueF0sIG9wdGlvbnMpO1xuXHQgICAgbWFya2VyLmJpbmRQb3B1cChyZXN1bHQubGFiZWwpO1xuXHRcblx0ICAgIHRoaXMubWFya2Vycy5hZGRMYXllcihtYXJrZXIpO1xuXHRcblx0ICAgIGlmIChzaG93UG9wdXApIHtcblx0ICAgICAgbWFya2VyLm9wZW5Qb3B1cCgpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBtYXJrZXI7XG5cdCAgfSxcblx0ICBjZW50ZXJNYXA6IGZ1bmN0aW9uIGNlbnRlck1hcChyZXN1bHQpIHtcblx0ICAgIHZhciBfb3B0aW9uczQgPSB0aGlzLm9wdGlvbnMsXG5cdCAgICAgICAgcmV0YWluWm9vbUxldmVsID0gX29wdGlvbnM0LnJldGFpblpvb21MZXZlbCxcblx0ICAgICAgICBhbmltYXRlWm9vbSA9IF9vcHRpb25zNC5hbmltYXRlWm9vbTtcblx0XG5cdCAgICB2YXIgcmVzdWx0Qm91bmRzID0gbmV3IEwuTGF0TG5nQm91bmRzKHJlc3VsdC5ib3VuZHMpO1xuXHQgICAgdmFyIGJvdW5kcyA9IHJlc3VsdEJvdW5kcy5pc1ZhbGlkKCkgPyByZXN1bHRCb3VuZHMgOiB0aGlzLm1hcmtlcnMuZ2V0Qm91bmRzKCk7XG5cdFxuXHQgICAgaWYgKCFyZXRhaW5ab29tTGV2ZWwgJiYgcmVzdWx0Qm91bmRzLmlzVmFsaWQoKSkge1xuXHQgICAgICB0aGlzLm1hcC5maXRCb3VuZHMoYm91bmRzLCB7IGFuaW1hdGU6IGFuaW1hdGVab29tIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5tYXAuc2V0Vmlldyhib3VuZHMuZ2V0Q2VudGVyKCksIHRoaXMuZ2V0Wm9vbSgpLCB7IGFuaW1hdGU6IGFuaW1hdGVab29tIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgZ2V0Wm9vbTogZnVuY3Rpb24gZ2V0Wm9vbSgpIHtcblx0ICAgIHZhciBfb3B0aW9uczUgPSB0aGlzLm9wdGlvbnMsXG5cdCAgICAgICAgcmV0YWluWm9vbUxldmVsID0gX29wdGlvbnM1LnJldGFpblpvb21MZXZlbCxcblx0ICAgICAgICB6b29tTGV2ZWwgPSBfb3B0aW9uczUuem9vbUxldmVsO1xuXHRcblx0ICAgIHJldHVybiByZXRhaW5ab29tTGV2ZWwgPyB0aGlzLm1hcC5nZXRab29tKCkgOiB6b29tTGV2ZWw7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gTGVhZmxldENvbnRyb2woKSB7XG5cdCAgaWYgKCFMIHx8ICFMLkNvbnRyb2wgfHwgIUwuQ29udHJvbC5leHRlbmQpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignTGVhZmxldCBtdXN0IGJlIGxvYWRlZCBiZWZvcmUgaW5zdGFudGlhdGluZyB0aGUgR2VvU2VhcmNoIGNvbnRyb2wnKTtcblx0ICB9XG5cdFxuXHQgIHZhciBMQ29udHJvbCA9IEwuQ29udHJvbC5leHRlbmQoQ29udHJvbCk7XG5cdFxuXHQgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBvcHRpb25zID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG5cdCAgICBvcHRpb25zW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoTENvbnRyb2wsIFtudWxsXS5jb25jYXQob3B0aW9ucykpKSgpO1xuXHR9XG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0Lypcblx0ICogJGFzeW5jYmluZCBoYXMgbXVsdGlwbGUgdXNlcywgZGVwZW5kaW5nIG9uIHRoZSBwYXJhbWV0ZXIgbGlzdC4gSXQgaXMgaW4gRnVuY3Rpb24ucHJvdG90eXBlLCBzbyAndGhpcycgaXMgYWx3YXlzIGEgZnVuY3Rpb25cblx0ICpcblx0ICogMSkgSWYgY2FsbGVkIHdpdGggYSBzaW5nbGUgYXJndW1lbnQgKHRoaXMpLCBpdCBpcyB1c2VkIHdoZW4gZGVmaW5pbmcgYW4gYXN5bmMgZnVuY3Rpb24gdG8gZW5zdXJlIHdoZW5cblx0ICogICAgICBpdCBpcyBpbnZva2VkLCB0aGUgY29ycmVjdCAndGhpcycgaXMgcHJlc2VudCwganVzdCBsaWtlIFwiYmluZFwiLiBGb3IgbGVnYWN5IHJlYXNvbnMsICd0aGlzJyBpcyBnaXZlblxuXHQgKiAgICAgIGEgbWVtZWJlciAndGhlbicgd2hpY2ggcmVmZXJzIHRvIGl0c2VsZi5cblx0ICogMikgSWYgY2FsbGVkIHdpdGggYSBzZWNvbmQgcGFyYW1ldGVyIChcImNhdGNoZXJcIikgYW5kIGNhdGNoZXIhPT10cnVlIGl0IGlzIGJlaW5nIHVzZWQgdG8gaW52b2tlIGFuIGFzeW5jXG5cdCAqICAgICAgZnVuY3Rpb24gd2hlcmUgdGhlIHNlY29uZCBwYXJhbWV0ZXIgaXMgdGhlIGVycm9yIGNhbGxiYWNrIChmb3Igc3luYyBleGNlcHRpb25zIGFuZCB0byBiZSBwYXNzZWQgdG9cblx0ICogICAgICBuZXN0ZWQgYXN5bmMgY2FsbHMpXG5cdCAqIDMpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09dHJ1ZSwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG5cdCAqICAgICAgaW4gYW4gJ1Byb21pc2UnIGFzIHdlbGwgYm91bmQgdG8gJ3RoaXMnLlxuXHQgKiAgICAgIEl0IGlzIHRoZSBzYW1lIGFzIGNhbGxpbmcgJ25ldyBQcm9taXNlKHRoaXMpJywgd2hlcmUgJ3RoaXMnIGlzIHRoZSBmdW5jdGlvbiBiZWluZyBib3VuZC93cmFwcGVkXG5cdCAqIDQpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09MCwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG5cdCAqICAgICAgaW4gYSAnTGF6eVRoZW5hYmxlJywgd2hpY2ggZXhlY3V0ZXMgbGF6aWx5IGFuZCBjYW4gcmVzb2x2ZSBzeW5jaHJvbm91c2x5LlxuXHQgKiAgICAgIEl0IGlzIHRoZSBzYW1lIGFzIGNhbGxpbmcgJ25ldyBMYXp5VGhlbmFibGUodGhpcyknIChpZiBzdWNoIGEgdHlwZSB3ZXJlIGV4cG9zZWQpLCB3aGVyZSAndGhpcycgaXNcblx0ICogICAgICB0aGUgZnVuY3Rpb24gYmVpbmcgYm91bmQvd3JhcHBlZFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NJbmNsdWRlcyhpbmNsdWRlcywgaW5wdXQpIHtcblx0ICAgIHZhciBzcmMgPSBpbnB1dC50b1N0cmluZygpO1xuXHQgICAgdmFyIHQgPSBcInJldHVybiBcIiArIHNyYztcblx0ICAgIHZhciBhcmdzID0gc3JjLm1hdGNoKC8uKlxcKChbXildKilcXCkvKVsxXTtcblx0ICAgIHZhciByZSA9IC9bJ1wiXSEhIShbXidcIl0qKVsnXCJdL2c7XG5cdCAgICB2YXIgbSA9IFtdO1xuXHQgICAgd2hpbGUgKDEpIHtcblx0ICAgICAgICB2YXIgbXggPSByZS5leGVjKHQpO1xuXHQgICAgICAgIGlmIChteCkgbS5wdXNoKG14KTtlbHNlIGJyZWFrO1xuXHQgICAgfVxuXHQgICAgbS5yZXZlcnNlKCkuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHQgPSB0LnNsaWNlKDAsIGUuaW5kZXgpICsgaW5jbHVkZXNbZVsxXV0gKyB0LnN1YnN0cihlLmluZGV4ICsgZVswXS5sZW5ndGgpO1xuXHQgICAgfSk7XG5cdCAgICB0ID0gdC5yZXBsYWNlKC9cXC9cXCpbXipdKlxcKlxcLy9nLCAnICcpLnJlcGxhY2UoL1xccysvZywgJyAnKTtcblx0ICAgIHJldHVybiBuZXcgRnVuY3Rpb24oYXJncywgdCkoKTtcblx0fVxuXHRcblx0dmFyICRhc3luY2JpbmQgPSBwcm9jZXNzSW5jbHVkZXMoe1xuXHQgICAgem91c2FuOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpLnRvU3RyaW5nKCksXG5cdCAgICB0aGVuYWJsZTogX193ZWJwYWNrX3JlcXVpcmVfXygxMSkudG9TdHJpbmcoKVxuXHR9LCBmdW5jdGlvbiAkYXN5bmNiaW5kKHNlbGYsIGNhdGNoZXIpIHtcblx0ICAgIFwidXNlIHN0cmljdFwiO1xuXHRcblx0ICAgIGlmICghRnVuY3Rpb24ucHJvdG90eXBlLiRhc3luY2JpbmQpIHtcblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLCBcIiRhc3luY2JpbmRcIiwgeyB2YWx1ZTogJGFzeW5jYmluZCwgZW51bWVyYWJsZTogZmFsc2UsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCEkYXN5bmNiaW5kLnRyYW1wb2xpbmUpIHtcblx0ICAgICAgICAkYXN5bmNiaW5kLnRyYW1wb2xpbmUgPSBmdW5jdGlvbiB0cmFtcG9saW5lKHQsIHgsIHMsIGUsIHUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGIocSkge1xuXHQgICAgICAgICAgICAgICAgd2hpbGUgKHEpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAocS50aGVuKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBxLnRoZW4oYiwgZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1ID8gdW5kZWZpbmVkIDogcTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEucG9wKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocS5sZW5ndGgpIHJldHVybiBxLnBvcCgpID8geC5jYWxsKHQpIDogcTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBzO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgcSA9IHEuY2FsbCh0KTtcblx0ICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlKHIpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHQgICAgaWYgKCEkYXN5bmNiaW5kLkxhenlUaGVuYWJsZSkge1xuXHQgICAgICAgICRhc3luY2JpbmQuTGF6eVRoZW5hYmxlID0gJyEhIXRoZW5hYmxlJygpO1xuXHQgICAgICAgICRhc3luY2JpbmQuRWFnZXJUaGVuYWJsZSA9ICRhc3luY2JpbmQuVGhlbmFibGUgPSAoJGFzeW5jYmluZC5FYWdlclRoZW5hYmxlRmFjdG9yeSA9ICchISF6b3VzYW4nKSgpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciByZXNvbHZlciA9IHRoaXM7XG5cdCAgICBzd2l0Y2ggKGNhdGNoZXIpIHtcblx0ICAgICAgICBjYXNlIHRydWU6XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgJGFzeW5jYmluZC5UaGVuYWJsZShib3VuZFRoZW4pO1xuXHQgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyAkYXN5bmNiaW5kLkxhenlUaGVuYWJsZShib3VuZFRoZW4pO1xuXHQgICAgICAgIGNhc2UgdW5kZWZpbmVkOlxuXHQgICAgICAgICAgICAvKiBGb3IgcnVudGltZSBjb21wYXRpYmlsaXR5IHdpdGggTm9kZW50IHYyLngsIHByb3ZpZGUgYSB0aGVuYWJsZSAqL1xuXHQgICAgICAgICAgICBib3VuZFRoZW4udGhlbiA9IGJvdW5kVGhlbjtcblx0ICAgICAgICAgICAgcmV0dXJuIGJvdW5kVGhlbjtcblx0ICAgICAgICBkZWZhdWx0OlxuXHQgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZXIuYXBwbHkoc2VsZiwgYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhdGNoZXIoZXgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gYm91bmRUaGVuKCkge1xuXHQgICAgICAgIHJldHVybiByZXNvbHZlci5hcHBseShzZWxmLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uICRhc3luY3NwYXduKHByb21pc2VQcm92aWRlciwgc2VsZikge1xuXHQgICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jc3Bhd24pIHtcblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLCBcIiRhc3luY3NwYXduXCIsIHsgdmFsdWU6ICRhc3luY3NwYXduLCBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTtcblx0ICAgIH1cblx0ICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBGdW5jdGlvbikpIHJldHVybjtcblx0XG5cdCAgICB2YXIgZ2VuRiA9IHRoaXM7XG5cdCAgICByZXR1cm4gbmV3IHByb21pc2VQcm92aWRlcihmdW5jdGlvbiBlbm91Z2gocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgdmFyIGdlbiA9IGdlbkYuY2FsbChzZWxmLCByZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICAgIGZ1bmN0aW9uIHN0ZXAoZm4sIGFyZykge1xuXHQgICAgICAgICAgICB2YXIgbmV4dDtcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIG5leHQgPSBmbi5jYWxsKGdlbiwgYXJnKTtcblx0ICAgICAgICAgICAgICAgIGlmIChuZXh0LmRvbmUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZSAhPT0gcmVzb2x2ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZSAmJiBuZXh0LnZhbHVlID09PSBuZXh0LnZhbHVlLnRoZW4pIHJldHVybiBuZXh0LnZhbHVlKHJlc29sdmUsIHJlamVjdCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUgJiYgcmVzb2x2ZShuZXh0LnZhbHVlKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZS50aGVuKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgbmV4dC52YWx1ZS50aGVuKGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLm5leHQsIHYpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLnRocm93LCBlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4ubmV4dCwgbmV4dC52YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgIHJlamVjdCAmJiByZWplY3QoZSk7XG5cdCAgICAgICAgICAgICAgICByZWplY3QgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN0ZXAoZ2VuLm5leHQpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdC8vIEluaXRpYWxpemUgYXN5bmMgYmluZGluZ3Ncblx0JGFzeW5jYmluZCgpO1xuXHQkYXN5bmNzcGF3bigpO1xuXHRcblx0Ly8gRXhwb3J0IGFzeW5jIGJpbmRpbmdzXG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgICAgJGFzeW5jYmluZDogJGFzeW5jYmluZCxcblx0ICAgICRhc3luY3NwYXduOiAkYXN5bmNzcGF3blxuXHR9O1xuXG4vKioqLyB9LFxuLyogNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MsIHNldEltbWVkaWF0ZSkgey8qIFRoaXMgY29kZSBpcyBiYXNlZCBvbjpcblx0em91c2FuIC0gQSBMaWdodG5pbmcgRmFzdCwgWWV0IFZlcnkgU21hbGwgUHJvbWlzZSBBKyBDb21wbGlhbnQgSW1wbGVtZW50YXRpb25cblx0aHR0cHM6Ly9naXRodWIuY29tL2JsdWVqYXZhL3pvdXNhblxuXHRBdXRob3I6IEdsZW5uIENyb3dub3ZlciA8Z2xlbm5AYmx1ZWphdmEuY29tPiAoaHR0cDovL3d3dy5ibHVlamF2YS5jb20pXG5cdFZlcnNpb24gMi4zLjNcblx0TGljZW5zZTogTUlUICovXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGljaykge1xuXHQgICAgdGljayA9IHRpY2sgfHwgKHR5cGVvZiBwcm9jZXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YocHJvY2VzcykpID09PSBcIm9iamVjdFwiICYmIHByb2Nlc3MubmV4dFRpY2sgfHwgdHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gXCJmdW5jdGlvblwiICYmIHNldEltbWVkaWF0ZSB8fCBmdW5jdGlvbiAoZikge1xuXHQgICAgICAgIHNldFRpbWVvdXQoZiwgMCk7XG5cdCAgICB9O1xuXHQgICAgdmFyIHNvb24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGZxID0gW10sXG5cdCAgICAgICAgICAgIGZxU3RhcnQgPSAwLFxuXHQgICAgICAgICAgICBidWZmZXJTaXplID0gMTAyNDtcblx0ICAgICAgICBmdW5jdGlvbiBjYWxsUXVldWUoKSB7XG5cdCAgICAgICAgICAgIHdoaWxlIChmcS5sZW5ndGggLSBmcVN0YXJ0KSB7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIGZxW2ZxU3RhcnRdKCk7XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkgey8qIGNvbnNvbGUuZXJyb3IoZXgpICovfVxuXHQgICAgICAgICAgICAgICAgZnFbZnFTdGFydCsrXSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICAgICAgICAgIGlmIChmcVN0YXJ0ID09PSBidWZmZXJTaXplKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZnEuc3BsaWNlKDAsIGJ1ZmZlclNpemUpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZxU3RhcnQgPSAwO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZuKSB7XG5cdCAgICAgICAgICAgIGZxLnB1c2goZm4pO1xuXHQgICAgICAgICAgICBpZiAoZnEubGVuZ3RoIC0gZnFTdGFydCA9PT0gMSkgdGljayhjYWxsUXVldWUpO1xuXHQgICAgICAgIH07XG5cdCAgICB9KCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gWm91c2FuKGZ1bmMpIHtcblx0ICAgICAgICBpZiAoZnVuYykge1xuXHQgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXHQgICAgICAgICAgICBmdW5jKGZ1bmN0aW9uIChhcmcpIHtcblx0ICAgICAgICAgICAgICAgIG1lLnJlc29sdmUoYXJnKTtcblx0ICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgICAgICAgICAgbWUucmVqZWN0KGFyZyk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBab3VzYW4ucHJvdG90eXBlID0ge1xuXHQgICAgICAgIHJlc29sdmU6IGZ1bmN0aW9uIHJlc29sdmUodmFsdWUpIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXHQgICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMpIHJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKFwiQXR0ZW1wdCB0byByZXNvbHZlIHByb21pc2Ugd2l0aCBzZWxmXCIpKTtcblx0ICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcblx0ICAgICAgICAgICAgaWYgKHZhbHVlICYmICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiB8fCAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YodmFsdWUpKSA9PT0gXCJvYmplY3RcIikpIHtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0ID0gMDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdGhlbiA9IHZhbHVlLnRoZW47XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBmdW5jdGlvbiAocmEpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QrKykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJlc29sdmUocmEpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocnIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QrKykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJlamVjdChycik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QpIHRoaXMucmVqZWN0KGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRlVMRklMTEVEO1xuXHQgICAgICAgICAgICB0aGlzLnYgPSB2YWx1ZTtcblx0ICAgICAgICAgICAgaWYgKG1lLmMpIHNvb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIGwgPSBtZS5jLmxlbmd0aDsgbiA8IGw7IG4rKykge1xuXHQgICAgICAgICAgICAgICAgICAgIFNUQVRFX0ZVTEZJTExFRChtZS5jW25dLCB2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSB1bmRlZmluZWQpIHJldHVybjtcblx0ICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1JFSkVDVEVEO1xuXHQgICAgICAgICAgICB0aGlzLnYgPSByZWFzb247XG5cdCAgICAgICAgICAgIHZhciBjbGllbnRzID0gdGhpcy5jO1xuXHQgICAgICAgICAgICBpZiAoY2xpZW50cykgc29vbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgbCA9IGNsaWVudHMubGVuZ3RoOyBuIDwgbDsgbisrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgU1RBVEVfUkVKRUNURUQoY2xpZW50c1tuXSwgcmVhc29uKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICB0aGVuOiBmdW5jdGlvbiB0aGVuKG9uRiwgb25SKSB7XG5cdCAgICAgICAgICAgIHZhciBwID0gbmV3IFpvdXNhbigpO1xuXHQgICAgICAgICAgICB2YXIgY2xpZW50ID0ge1xuXHQgICAgICAgICAgICAgICAgeTogb25GLFxuXHQgICAgICAgICAgICAgICAgbjogb25SLFxuXHQgICAgICAgICAgICAgICAgcDogcFxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAodGhpcy5jKSB0aGlzLmMucHVzaChjbGllbnQpO2Vsc2UgdGhpcy5jID0gW2NsaWVudF07XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgcyA9IHRoaXMuc3RhdGUsXG5cdCAgICAgICAgICAgICAgICAgICAgYSA9IHRoaXMudjtcblx0ICAgICAgICAgICAgICAgIHNvb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHMoY2xpZW50LCBhKTtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBwO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgZnVuY3Rpb24gU1RBVEVfRlVMRklMTEVEKGMsIGFyZykge1xuXHQgICAgICAgIGlmICh0eXBlb2YgYy55ID09PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIHZhciB5cmV0ID0gYy55LmNhbGwodW5kZWZpbmVkLCBhcmcpO1xuXHQgICAgICAgICAgICAgICAgYy5wLnJlc29sdmUoeXJldCk7XG5cdCAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICAgICAgYy5wLnJlamVjdChlcnIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIGMucC5yZXNvbHZlKGFyZyk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gU1RBVEVfUkVKRUNURUQoYywgcmVhc29uKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjLm4gPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgdmFyIHlyZXQgPSBjLm4uY2FsbCh1bmRlZmluZWQsIHJlYXNvbik7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVzb2x2ZSh5cmV0KTtcblx0ICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVqZWN0KGVycik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgYy5wLnJlamVjdChyZWFzb24pO1xuXHQgICAgfVxuXHRcblx0ICAgIFpvdXNhbi5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgICAgIGlmICh2YWwgJiYgdmFsIGluc3RhbmNlb2YgWm91c2FuKSByZXR1cm4gdmFsO1xuXHQgICAgICAgIHZhciB6ID0gbmV3IFpvdXNhbigpO1xuXHQgICAgICAgIHoucmVzb2x2ZSh2YWwpO1xuXHQgICAgICAgIHJldHVybiB6O1xuXHQgICAgfTtcblx0ICAgIFpvdXNhbi5yZWplY3QgPSBmdW5jdGlvbiAoZXJyKSB7XG5cdCAgICAgICAgaWYgKGVyciAmJiBlcnIgaW5zdGFuY2VvZiBab3VzYW4pIHJldHVybiBlcnI7XG5cdCAgICAgICAgdmFyIHogPSBuZXcgWm91c2FuKCk7XG5cdCAgICAgICAgei5yZWplY3QoZXJyKTtcblx0ICAgICAgICByZXR1cm4gejtcblx0ICAgIH07XG5cdFxuXHQgICAgWm91c2FuLnZlcnNpb24gPSBcIjIuMy4zLW5vZGVudFwiO1xuXHQgICAgcmV0dXJuIFpvdXNhbjtcblx0fTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oOCksIF9fd2VicGFja19yZXF1aXJlX18oOSkuc2V0SW1tZWRpYXRlKSlcblxuLyoqKi8gfSxcbi8qIDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXHR2YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cdFxuXHQvLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcblx0Ly8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG5cdC8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcblx0Ly8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblx0XG5cdHZhciBjYWNoZWRTZXRUaW1lb3V0O1xuXHR2YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXHRcblx0ZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xuXHR9XG5cdGZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQoKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xuXHR9XG5cdChmdW5jdGlvbiAoKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgfVxuXHR9KSgpO1xuXHRmdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuXHQgICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdGZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcblx0ICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuXHQgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuXHQgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH1cblx0ICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuXHQgICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHR2YXIgcXVldWUgPSBbXTtcblx0dmFyIGRyYWluaW5nID0gZmFsc2U7XG5cdHZhciBjdXJyZW50UXVldWU7XG5cdHZhciBxdWV1ZUluZGV4ID0gLTE7XG5cdFxuXHRmdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG5cdCAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICB9XG5cdCAgICBpZiAocXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgZHJhaW5RdWV1ZSgpO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuXHQgICAgaWYgKGRyYWluaW5nKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG5cdCAgICBkcmFpbmluZyA9IHRydWU7XG5cdFxuXHQgICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIHdoaWxlIChsZW4pIHtcblx0ICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcblx0ICAgICAgICBxdWV1ZSA9IFtdO1xuXHQgICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcblx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB9XG5cdCAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0fVxuXHRcblx0cHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcblx0ICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcblx0ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG5cdCAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuXHQgICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG5cdCAgICB9XG5cdH07XG5cdFxuXHQvLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5cdGZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuXHQgICAgdGhpcy5mdW4gPSBmdW47XG5cdCAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG5cdH1cblx0SXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG5cdH07XG5cdHByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5cdHByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5cdHByb2Nlc3MuZW52ID0ge307XG5cdHByb2Nlc3MuYXJndiA9IFtdO1xuXHRwcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcblx0cHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXHRcblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cdFxuXHRwcm9jZXNzLm9uID0gbm9vcDtcblx0cHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5cdHByb2Nlc3Mub25jZSA9IG5vb3A7XG5cdHByb2Nlc3Mub2ZmID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcblx0cHJvY2Vzcy5lbWl0ID0gbm9vcDtcblx0XG5cdHByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdFxuXHRwcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiAnLyc7XG5cdH07XG5cdHByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRwcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIDA7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblx0XG5cdC8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cdFxuXHRleHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xuXHR9O1xuXHRleHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xuXHR9O1xuXHRleHBvcnRzLmNsZWFyVGltZW91dCA9IGV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uICh0aW1lb3V0KSB7XG5cdCAgaWYgKHRpbWVvdXQpIHtcblx0ICAgIHRpbWVvdXQuY2xvc2UoKTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG5cdCAgdGhpcy5faWQgPSBpZDtcblx0ICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcblx0fVxuXHRUaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uICgpIHt9O1xuXHRUaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG5cdH07XG5cdFxuXHQvLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cblx0ZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbiAoaXRlbSwgbXNlY3MpIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdCAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcblx0fTtcblx0XG5cdGV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbiAoaXRlbSkge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0ICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHRcblx0ICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcblx0ICBpZiAobXNlY3MgPj0gMCkge1xuXHQgICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuXHQgICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KSBpdGVtLl9vblRpbWVvdXQoKTtcblx0ICAgIH0sIG1zZWNzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyBzZXRpbW1lZGlhdGUgYXR0YWNoZXMgaXRzZWxmIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRleHBvcnRzLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcblx0ZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xuXG4vKioqLyB9LFxuLyogMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwsIHByb2Nlc3MpIHtcInVzZSBzdHJpY3RcIjtcblx0XG5cdChmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcblx0ICAgIFwidXNlIHN0cmljdFwiO1xuXHRcblx0ICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG5cdCAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuXHQgICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuXHQgICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcblx0ICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblx0XG5cdCAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcblx0ICAgICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcblx0ICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcblx0ICAgICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcblx0ICAgICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG5cdCAgICAgICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG5cdCAgICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG5cdCAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcblx0ICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcblx0ICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgY2FzZSAxOlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgY2FzZSAyOlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgY2FzZSAzOlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuXHQgICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcblx0ICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuXHQgICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcblx0ICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcblx0ICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cblx0ICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG5cdCAgICAgICAgICAgIGlmICh0YXNrKSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG5cdCAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcblx0ICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG5cdCAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG5cdCAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcblx0ICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuXHQgICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcblx0ICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSBmYWxzZTtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcblx0ICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcblx0ICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuXHQgICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuXHQgICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblx0XG5cdCAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSBcInNldEltbWVkaWF0ZSRcIiArIE1hdGgucmFuZG9tKCkgKyBcIiRcIjtcblx0ICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24gb25HbG9iYWxNZXNzYWdlKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJiB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJiBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcblx0ICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0XG5cdCAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuXHQgICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuXHQgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcblx0ICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cblx0ICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuXHQgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG5cdCAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcblx0ICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS5cblx0ICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcblx0ICAgIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXHRcblx0ICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cblx0ICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcblx0ICAgICAgICAvLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45XG5cdCAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuXHQgICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcblx0ICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcblx0ICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuXHQgICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9IGVsc2UgaWYgKGRvYyAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpKSB7XG5cdCAgICAgICAgLy8gRm9yIElFIDbigJM4XG5cdCAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcblx0ICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuXHQgICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcblx0fSkodHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdW5kZWZpbmVkIDogZ2xvYmFsIDogc2VsZik7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpKSlcblxuLyoqKi8gfSxcbi8qIDExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gaXNUaGVuYWJsZShvYmopIHtcblx0ICAgICAgICByZXR1cm4gb2JqICYmIG9iaiBpbnN0YW5jZW9mIE9iamVjdCAmJiB0eXBlb2Ygb2JqLnRoZW4gPT09IFwiZnVuY3Rpb25cIjtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiByZXNvbHV0aW9uKHAsIHIsIGhvdykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIC8qIDIuMi43LjEgKi9cblx0ICAgICAgICAgICAgdmFyIHggPSBob3cgPyBob3cocikgOiByO1xuXHRcblx0ICAgICAgICAgICAgaWYgKHAgPT09IHgpIC8qIDIuMy4xICovXG5cdCAgICAgICAgICAgICAgICByZXR1cm4gcC5yZWplY3QobmV3IFR5cGVFcnJvcihcIlByb21pc2UgcmVzb2x1dGlvbiBsb29wXCIpKTtcblx0XG5cdCAgICAgICAgICAgIGlmIChpc1RoZW5hYmxlKHgpKSB7XG5cdCAgICAgICAgICAgICAgICAvKiAyLjMuMyAqL1xuXHQgICAgICAgICAgICAgICAgeC50aGVuKGZ1bmN0aW9uICh5KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbihwLCB5KTtcblx0ICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcC5yZWplY3QoZSk7XG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHAucmVzb2x2ZSh4KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cdCAgICAgICAgICAgIC8qIDIuMi43LjIgKi9cblx0ICAgICAgICAgICAgcC5yZWplY3QoZXgpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBDaGFpbmVkKCkge307XG5cdCAgICBDaGFpbmVkLnByb3RvdHlwZSA9IHtcblx0ICAgICAgICByZXNvbHZlOiBfdW5jaGFpbmVkLFxuXHQgICAgICAgIHJlamVjdDogX3VuY2hhaW5lZCxcblx0ICAgICAgICB0aGVuOiB0aGVuQ2hhaW5cblx0ICAgIH07XG5cdCAgICBmdW5jdGlvbiBfdW5jaGFpbmVkKHYpIHt9XG5cdCAgICBmdW5jdGlvbiB0aGVuQ2hhaW4ocmVzLCByZWopIHtcblx0ICAgICAgICB0aGlzLnJlc29sdmUgPSByZXM7XG5cdCAgICAgICAgdGhpcy5yZWplY3QgPSByZWo7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gdGhlbihyZXMsIHJlaikge1xuXHQgICAgICAgIHZhciBjaGFpbiA9IG5ldyBDaGFpbmVkKCk7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZXIoZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gaXNUaGVuYWJsZSh2YWx1ZSkgPyB2YWx1ZS50aGVuKHJlcywgcmVqKSA6IHJlc29sdXRpb24oY2hhaW4sIHZhbHVlLCByZXMpO1xuXHQgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXgpIHtcblx0ICAgICAgICAgICAgICAgIHJlc29sdXRpb24oY2hhaW4sIGV4LCByZWopO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9IGNhdGNoIChleCkge1xuXHQgICAgICAgICAgICByZXNvbHV0aW9uKGNoYWluLCBleCwgcmVqKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIGNoYWluO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIFRoZW5hYmxlKHJlc29sdmVyKSB7XG5cdCAgICAgICAgdGhpcy5fcmVzb2x2ZXIgPSByZXNvbHZlcjtcblx0ICAgICAgICB0aGlzLnRoZW4gPSB0aGVuO1xuXHQgICAgfTtcblx0XG5cdCAgICBUaGVuYWJsZS5yZXNvbHZlID0gZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICByZXR1cm4gVGhlbmFibGUuaXNUaGVuYWJsZSh2KSA/IHYgOiB7IHRoZW46IGZ1bmN0aW9uIHRoZW4ocmVzb2x2ZSkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodik7XG5cdCAgICAgICAgICAgIH0gfTtcblx0ICAgIH07XG5cdFxuXHQgICAgVGhlbmFibGUuaXNUaGVuYWJsZSA9IGlzVGhlbmFibGU7XG5cdFxuXHQgICAgcmV0dXJuIFRoZW5hYmxlO1xuXHR9O1xuXG4vKioqLyB9LFxuLyogMTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHQvKipcblx0ICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG5cdCAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdCAqL1xuXHRcblx0LyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cblx0dmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblx0XG5cdC8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xuXHR2YXIgTkFOID0gMCAvIDA7XG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG5cdHZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXHRcblx0LyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cblx0dmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXHRcblx0LyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cblx0dmFyIGZyZWVHbG9iYWwgPSAodHlwZW9mIGdsb2JhbCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoZ2xvYmFsKSkgPT0gJ29iamVjdCcgJiYgZ2xvYmFsICYmIGdsb2JhbC5PYmplY3QgPT09IE9iamVjdCAmJiBnbG9iYWw7XG5cdFxuXHQvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xuXHR2YXIgZnJlZVNlbGYgPSAodHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHNlbGYpKSA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblx0XG5cdC8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xuXHR2YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuXHQgICAgbmF0aXZlTWluID0gTWF0aC5taW47XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgdGltZXN0YW1wIG9mIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlXG5cdCAqIHRoZSBVbml4IGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAyLjQuMFxuXHQgKiBAY2F0ZWdvcnkgRGF0ZVxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lc3RhbXAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcblx0ICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuXHQgKiB9LCBfLm5vdygpKTtcblx0ICogLy8gPT4gTG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgaW52b2NhdGlvbi5cblx0ICovXG5cdHZhciBub3cgPSBmdW5jdGlvbiBub3coKSB7XG5cdCAgcmV0dXJuIHJvb3QuRGF0ZS5ub3coKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcblx0ICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG5cdCAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcblx0ICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG5cdCAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZVxuXHQgKiBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkXG5cdCAqIHdpdGggdGhlIGxhc3QgYXJndW1lbnRzIHByb3ZpZGVkIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24uIFN1YnNlcXVlbnRcblx0ICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2Bcblx0ICogaW52b2NhdGlvbi5cblx0ICpcblx0ICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpc1xuXHQgKiBpbnZva2VkIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuXHQgKiBpcyBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG5cdCAqXG5cdCAqIElmIGB3YWl0YCBpcyBgMGAgYW5kIGBsZWFkaW5nYCBpcyBgZmFsc2VgLCBgZnVuY2AgaW52b2NhdGlvbiBpcyBkZWZlcnJlZFxuXHQgKiB1bnRpbCB0byB0aGUgbmV4dCB0aWNrLCBzaW1pbGFyIHRvIGBzZXRUaW1lb3V0YCB3aXRoIGEgdGltZW91dCBvZiBgMGAuXG5cdCAqXG5cdCAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKVxuXHQgKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV1cblx0ICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdXG5cdCAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC5cblx0ICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuXHQgKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LlxuXHQgKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuXHQgKlxuXHQgKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy5cblx0ICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuXHQgKiAgICdsZWFkaW5nJzogdHJ1ZSxcblx0ICogICAndHJhaWxpbmcnOiBmYWxzZVxuXHQgKiB9KSk7XG5cdCAqXG5cdCAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuXG5cdCAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuXHQgKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG5cdCAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTtcblx0ICpcblx0ICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyBkZWJvdW5jZWQgaW52b2NhdGlvbi5cblx0ICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7XG5cdCAqL1xuXHRmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG5cdCAgdmFyIGxhc3RBcmdzLFxuXHQgICAgICBsYXN0VGhpcyxcblx0ICAgICAgbWF4V2FpdCxcblx0ICAgICAgcmVzdWx0LFxuXHQgICAgICB0aW1lcklkLFxuXHQgICAgICBsYXN0Q2FsbFRpbWUsXG5cdCAgICAgIGxhc3RJbnZva2VUaW1lID0gMCxcblx0ICAgICAgbGVhZGluZyA9IGZhbHNlLFxuXHQgICAgICBtYXhpbmcgPSBmYWxzZSxcblx0ICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXHRcblx0ICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuXHQgIH1cblx0ICB3YWl0ID0gdG9OdW1iZXIod2FpdCkgfHwgMDtcblx0ICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcblx0ICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcblx0ICAgIG1heGluZyA9ICdtYXhXYWl0JyBpbiBvcHRpb25zO1xuXHQgICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcblx0ICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcblx0ICAgIHZhciBhcmdzID0gbGFzdEFyZ3MsXG5cdCAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzO1xuXHRcblx0ICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG5cdCAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG5cdCAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGxlYWRpbmdFZGdlKHRpbWUpIHtcblx0ICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG5cdCAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG5cdCAgICAvLyBTdGFydCB0aGUgdGltZXIgZm9yIHRoZSB0cmFpbGluZyBlZGdlLlxuXHQgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuXHQgICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7XG5cdCAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuXHQgICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG5cdCAgICAgICAgcmVzdWx0ID0gd2FpdCAtIHRpbWVTaW5jZUxhc3RDYWxsO1xuXHRcblx0ICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuXHQgICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcblx0ICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lO1xuXHRcblx0ICAgIC8vIEVpdGhlciB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCBhY3Rpdml0eSBoYXMgc3RvcHBlZCBhbmQgd2UncmUgYXQgdGhlXG5cdCAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuXHQgICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuXHQgICAgcmV0dXJuIGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8IHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQgfHwgdGltZVNpbmNlTGFzdENhbGwgPCAwIHx8IG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB0aW1lckV4cGlyZWQoKSB7XG5cdCAgICB2YXIgdGltZSA9IG5vdygpO1xuXHQgICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuXHQgICAgICByZXR1cm4gdHJhaWxpbmdFZGdlKHRpbWUpO1xuXHQgICAgfVxuXHQgICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG5cdCAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHJlbWFpbmluZ1dhaXQodGltZSkpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdHJhaWxpbmdFZGdlKHRpbWUpIHtcblx0ICAgIHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cdFxuXHQgICAgLy8gT25seSBpbnZva2UgaWYgd2UgaGF2ZSBgbGFzdEFyZ3NgIHdoaWNoIG1lYW5zIGBmdW5jYCBoYXMgYmVlblxuXHQgICAgLy8gZGVib3VuY2VkIGF0IGxlYXN0IG9uY2UuXG5cdCAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcblx0ICAgICAgcmV0dXJuIGludm9rZUZ1bmModGltZSk7XG5cdCAgICB9XG5cdCAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGNhbmNlbCgpIHtcblx0ICAgIGlmICh0aW1lcklkICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuXHQgICAgfVxuXHQgICAgbGFzdEludm9rZVRpbWUgPSAwO1xuXHQgICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBmbHVzaCgpIHtcblx0ICAgIHJldHVybiB0aW1lcklkID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuXHQgICAgdmFyIHRpbWUgPSBub3coKSxcblx0ICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXHRcblx0ICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuXHQgICAgbGFzdFRoaXMgPSB0aGlzO1xuXHQgICAgbGFzdENhbGxUaW1lID0gdGltZTtcblx0XG5cdCAgICBpZiAoaXNJbnZva2luZykge1xuXHQgICAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgcmV0dXJuIGxlYWRpbmdFZGdlKGxhc3RDYWxsVGltZSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKG1heGluZykge1xuXHQgICAgICAgIC8vIEhhbmRsZSBpbnZvY2F0aW9ucyBpbiBhIHRpZ2h0IGxvb3AuXG5cdCAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0ICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuXHQgIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuXHQgIHJldHVybiBkZWJvdW5jZWQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcblx0ICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuXHQgKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc09iamVjdCh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoXy5ub29wKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KG51bGwpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcblx0ICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodmFsdWUpO1xuXHQgIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcblx0ICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc09iamVjdExpa2Uoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICpcblx0ICogXy5pc09iamVjdExpa2UobnVsbCk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcblx0ICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih2YWx1ZSkpID09ICdvYmplY3QnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHN5bWJvbCwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzU3ltYm9sKFN5bWJvbC5pdGVyYXRvcik7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc1N5bWJvbCgnYWJjJyk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1N5bWJvbCh2YWx1ZSkge1xuXHQgIHJldHVybiAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih2YWx1ZSkpID09ICdzeW1ib2wnIHx8IGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgbnVtYmVyLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKDMuMik7XG5cdCAqIC8vID0+IDMuMlxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKE51bWJlci5NSU5fVkFMVUUpO1xuXHQgKiAvLyA9PiA1ZS0zMjRcblx0ICpcblx0ICogXy50b051bWJlcihJbmZpbml0eSk7XG5cdCAqIC8vID0+IEluZmluaXR5XG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoJzMuMicpO1xuXHQgKiAvLyA9PiAzLjJcblx0ICovXG5cdGZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gTkFOO1xuXHQgIH1cblx0ICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG5cdCAgICB2YXIgb3RoZXIgPSB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PSAnZnVuY3Rpb24nID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG5cdCAgICB2YWx1ZSA9IGlzT2JqZWN0KG90aGVyKSA/IG90aGVyICsgJycgOiBvdGhlcjtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG5cdCAgfVxuXHQgIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcblx0ICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuXHQgIHJldHVybiBpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpIDogcmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBkZWJvdW5jZTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfZG9tVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdHZhciBfY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgU2VhcmNoRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBTZWFyY2hFbGVtZW50KCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgX3JlZiRoYW5kbGVTdWJtaXQgPSBfcmVmLmhhbmRsZVN1Ym1pdCxcblx0ICAgICAgICBoYW5kbGVTdWJtaXQgPSBfcmVmJGhhbmRsZVN1Ym1pdCA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZVN1Ym1pdCxcblx0ICAgICAgICBfcmVmJHNlYXJjaExhYmVsID0gX3JlZi5zZWFyY2hMYWJlbCxcblx0ICAgICAgICBzZWFyY2hMYWJlbCA9IF9yZWYkc2VhcmNoTGFiZWwgPT09IHVuZGVmaW5lZCA/ICdzZWFyY2gnIDogX3JlZiRzZWFyY2hMYWJlbCxcblx0ICAgICAgICBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG5cdCAgICAgICAgY2xhc3NOYW1lcyA9IF9yZWYkY2xhc3NOYW1lcyA9PT0gdW5kZWZpbmVkID8ge30gOiBfcmVmJGNsYXNzTmFtZXM7XG5cdFxuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNlYXJjaEVsZW1lbnQpO1xuXHRcblx0ICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBbJ2dlb3NlYXJjaCcsIGNsYXNzTmFtZXMuY29udGFpbmVyXS5qb2luKCcgJykpO1xuXHQgICAgdmFyIGZvcm0gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdmb3JtJywgWycnLCBjbGFzc05hbWVzLmZvcm1dLmpvaW4oJyAnKSwgY29udGFpbmVyKTtcblx0ICAgIHZhciBpbnB1dCA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2lucHV0JywgWydnbGFzcycsIGNsYXNzTmFtZXMuaW5wdXRdLmpvaW4oJyAnKSwgZm9ybSk7XG5cdFxuXHQgICAgaW5wdXQudHlwZSA9ICd0ZXh0Jztcblx0ICAgIGlucHV0LnBsYWNlaG9sZGVyID0gc2VhcmNoTGFiZWw7XG5cdFxuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbklucHV0KGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbktleVVwKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbktleVByZXNzKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbkZvY3VzKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHQgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uQmx1cihlKTtcblx0ICAgIH0sIGZhbHNlKTtcblx0XG5cdCAgICB0aGlzLmVsZW1lbnRzID0geyBjb250YWluZXI6IGNvbnRhaW5lciwgZm9ybTogZm9ybSwgaW5wdXQ6IGlucHV0IH07XG5cdCAgICB0aGlzLmhhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhTZWFyY2hFbGVtZW50LCBbe1xuXHQgICAga2V5OiAnb25Gb2N1cycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25Gb2N1cygpIHtcblx0ICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKHRoaXMuZWxlbWVudHMuZm9ybSwgJ2FjdGl2ZScpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uQmx1cicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25CbHVyKCkge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkodGhpcy5lbGVtZW50cy5mb3JtLCAnYWN0aXZlJyk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb25TdWJtaXQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uU3VibWl0KGV2ZW50KSB7XG5cdCAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgICAgdmFyIF9lbGVtZW50cywgaW5wdXQsIGNvbnRhaW5lcjtcblx0XG5cdCAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XG5cdCAgICAgICAgX2VsZW1lbnRzID0gdGhpcy5lbGVtZW50cywgaW5wdXQgPSBfZWxlbWVudHMuaW5wdXQsIGNvbnRhaW5lciA9IF9lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG5cdFxuXHQgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZVN1Ym1pdCh7IHF1ZXJ5OiBpbnB1dC52YWx1ZSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHQgICAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcblx0ICAgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG5cdCAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb25JbnB1dCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25JbnB1dCgpIHtcblx0ICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnZXJyb3InKTtcblx0ICAgICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvbktleVVwJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleVVwKGV2ZW50KSB7XG5cdCAgICAgIHZhciBfZWxlbWVudHMyID0gdGhpcy5lbGVtZW50cyxcblx0ICAgICAgICAgIGNvbnRhaW5lciA9IF9lbGVtZW50czIuY29udGFpbmVyLFxuXHQgICAgICAgICAgaW5wdXQgPSBfZWxlbWVudHMyLmlucHV0O1xuXHRcblx0ICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IF9jb25zdGFudHMuRVNDQVBFX0tFWSkge1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHRcblx0ICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuXHRcblx0ICAgICAgICBkb2N1bWVudC5ib2R5LmZvY3VzKCk7XG5cdCAgICAgICAgZG9jdW1lbnQuYm9keS5ibHVyKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvbktleVByZXNzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleVByZXNzKGV2ZW50KSB7XG5cdCAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBfY29uc3RhbnRzLkVOVEVSX0tFWSkge1xuXHQgICAgICAgIHRoaXMub25TdWJtaXQoZXZlbnQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2V0UXVlcnknLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFF1ZXJ5KHF1ZXJ5KSB7XG5cdCAgICAgIHZhciBpbnB1dCA9IHRoaXMuZWxlbWVudHMuaW5wdXQ7XG5cdFxuXHQgICAgICBpbnB1dC52YWx1ZSA9IHF1ZXJ5O1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFNlYXJjaEVsZW1lbnQ7XG5cdH0oKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFNlYXJjaEVsZW1lbnQ7XG5cbi8qKiovIH0sXG4vKiAxNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9wcmVmZXItZGVmYXVsdC1leHBvcnQgKi9cblx0dmFyIGNyZWF0ZUVsZW1lbnQgPSBleHBvcnRzLmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KGVsZW1lbnQpIHtcblx0ICB2YXIgY2xhc3NOYW1lcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG5cdCAgdmFyIHBhcmVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogbnVsbDtcblx0XG5cdCAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50KTtcblx0ICBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWVzO1xuXHRcblx0ICBpZiAocGFyZW50KSB7XG5cdCAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGVsO1xuXHR9O1xuXHRcblx0dmFyIGNyZWF0ZVNjcmlwdEVsZW1lbnQgPSBleHBvcnRzLmNyZWF0ZVNjcmlwdEVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVTY3JpcHRFbGVtZW50KHVybCwgY2IpIHtcblx0ICB2YXIgc2NyaXB0ID0gY3JlYXRlRWxlbWVudCgnc2NyaXB0JywgbnVsbCwgZG9jdW1lbnQuYm9keSk7XG5cdCAgc2NyaXB0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2phdmFzY3JpcHQnKTtcblx0XG5cdCAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG5cdCAgICB3aW5kb3dbY2JdID0gZnVuY3Rpb24gKGpzb24pIHtcblx0ICAgICAgc2NyaXB0LnJlbW92ZSgpO1xuXHQgICAgICBkZWxldGUgd2luZG93W2NiXTtcblx0ICAgICAgcmVzb2x2ZShqc29uKTtcblx0ICAgIH07XG5cdFxuXHQgICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3JjJywgdXJsKTtcblx0ICB9KTtcblx0fTtcblx0XG5cdHZhciBhZGRDbGFzc05hbWUgPSBleHBvcnRzLmFkZENsYXNzTmFtZSA9IGZ1bmN0aW9uIGFkZENsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWUpIHtcblx0ICBpZiAoZWxlbWVudCAmJiAhZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuXHQgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHJlbW92ZUNsYXNzTmFtZSA9IGV4cG9ydHMucmVtb3ZlQ2xhc3NOYW1lID0gZnVuY3Rpb24gcmVtb3ZlQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuXHQgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcblx0ICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSxcbi8qIDE1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHR2YXIgRU5URVJfS0VZID0gZXhwb3J0cy5FTlRFUl9LRVkgPSAxMztcblx0dmFyIEVTQ0FQRV9LRVkgPSBleHBvcnRzLkVTQ0FQRV9LRVkgPSAyNztcblx0dmFyIEFSUk9XX0RPV05fS0VZID0gZXhwb3J0cy5BUlJPV19ET1dOX0tFWSA9IDQwO1xuXHR2YXIgQVJST1dfVVBfS0VZID0gZXhwb3J0cy5BUlJPV19VUF9LRVkgPSAzODtcblx0dmFyIEFSUk9XX0xFRlRfS0VZID0gZXhwb3J0cy5BUlJPV19MRUZUX0tFWSA9IDM3O1xuXHR2YXIgQVJST1dfUklHSFRfS0VZID0gZXhwb3J0cy5BUlJPV19SSUdIVF9LRVkgPSAzOTtcblx0XG5cdHZhciBTUEVDSUFMX0tFWVMgPSBleHBvcnRzLlNQRUNJQUxfS0VZUyA9IFtFTlRFUl9LRVksIEVTQ0FQRV9LRVksIEFSUk9XX0RPV05fS0VZLCBBUlJPV19VUF9LRVksIEFSUk9XX0xFRlRfS0VZLCBBUlJPV19SSUdIVF9LRVldO1xuXG4vKioqLyB9LFxuLyogMTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9kb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGN4ID0gZnVuY3Rpb24gY3goKSB7XG5cdCAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGNsYXNzbmFtZXMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgIGNsYXNzbmFtZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gY2xhc3NuYW1lcy5qb2luKCcgJykudHJpbSgpO1xuXHR9O1xuXHRcblx0dmFyIFJlc3VsdExpc3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gUmVzdWx0TGlzdCgpIHtcblx0ICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICBfcmVmJGhhbmRsZUNsaWNrID0gX3JlZi5oYW5kbGVDbGljayxcblx0ICAgICAgICBoYW5kbGVDbGljayA9IF9yZWYkaGFuZGxlQ2xpY2sgPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uICgpIHt9IDogX3JlZiRoYW5kbGVDbGljayxcblx0ICAgICAgICBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG5cdCAgICAgICAgY2xhc3NOYW1lcyA9IF9yZWYkY2xhc3NOYW1lcyA9PT0gdW5kZWZpbmVkID8ge30gOiBfcmVmJGNsYXNzTmFtZXM7XG5cdFxuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlc3VsdExpc3QpO1xuXHRcblx0ICAgIF9pbml0aWFsaXNlUHJvcHMuY2FsbCh0aGlzKTtcblx0XG5cdCAgICB0aGlzLnByb3BzID0geyBoYW5kbGVDbGljazogaGFuZGxlQ2xpY2ssIGNsYXNzTmFtZXM6IGNsYXNzTmFtZXMgfTtcblx0ICAgIHRoaXMuc2VsZWN0ZWQgPSAtMTtcblx0XG5cdCAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgY3goJ3Jlc3VsdHMnLCBjbGFzc05hbWVzLmNvbnRhaW5lcikpO1xuXHQgICAgdmFyIHJlc3VsdEl0ZW0gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBjeChjbGFzc05hbWVzLml0ZW0pKTtcblx0XG5cdCAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2ssIHRydWUpO1xuXHQgICAgdGhpcy5lbGVtZW50cyA9IHsgY29udGFpbmVyOiBjb250YWluZXIsIHJlc3VsdEl0ZW06IHJlc3VsdEl0ZW0gfTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhSZXN1bHRMaXN0LCBbe1xuXHQgICAga2V5OiAncmVuZGVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG5cdCAgICAgIHZhciByZXN1bHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTtcblx0ICAgICAgdmFyIF9lbGVtZW50cyA9IHRoaXMuZWxlbWVudHMsXG5cdCAgICAgICAgICBjb250YWluZXIgPSBfZWxlbWVudHMuY29udGFpbmVyLFxuXHQgICAgICAgICAgcmVzdWx0SXRlbSA9IF9lbGVtZW50cy5yZXN1bHRJdGVtO1xuXHRcblx0ICAgICAgdGhpcy5jbGVhcigpO1xuXHRcblx0ICAgICAgcmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChyZXN1bHQsIGlkeCkge1xuXHQgICAgICAgIHZhciBjaGlsZCA9IHJlc3VsdEl0ZW0uY2xvbmVOb2RlKHRydWUpO1xuXHQgICAgICAgIGNoaWxkLnNldEF0dHJpYnV0ZSgnZGF0YS1rZXknLCBpZHgpO1xuXHQgICAgICAgIGNoaWxkLmlubmVySFRNTCA9IHJlc3VsdC5sYWJlbDtcblx0ICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMucmVzdWx0cyA9IHJlc3VsdHM7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2VsZWN0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3QoaW5kZXgpIHtcblx0ICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbmZ1c2luZy1hcnJvd1xuXHRcblx0ICAgICAgQXJyYXkuZnJvbShjb250YWluZXIuY2hpbGRyZW4pLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkLCBpZHgpIHtcblx0ICAgICAgICByZXR1cm4gaWR4ID09PSBpbmRleCA/ICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjaGlsZCwgJ2FjdGl2ZScpIDogKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJyk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgdGhpcy5zZWxlY3RlZCA9IGluZGV4O1xuXHQgICAgICByZXR1cm4gdGhpcy5yZXN1bHRzW2luZGV4XTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdjb3VudCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gY291bnQoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnJlc3VsdHMubGVuZ3RoO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NsZWFyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHtcblx0ICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXHRcblx0ICAgICAgd2hpbGUgKGNvbnRhaW5lci5sYXN0Q2hpbGQpIHtcblx0ICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmxhc3RDaGlsZCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBSZXN1bHRMaXN0O1xuXHR9KCk7XG5cdFxuXHR2YXIgX2luaXRpYWxpc2VQcm9wcyA9IGZ1bmN0aW9uIF9pbml0aWFsaXNlUHJvcHMoKSB7XG5cdCAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgdGhpcy5vbkNsaWNrID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICB0YXJnZXQgPSBfcmVmMi50YXJnZXQ7XG5cdFxuXHQgICAgdmFyIGhhbmRsZUNsaWNrID0gX3RoaXMucHJvcHMuaGFuZGxlQ2xpY2s7XG5cdCAgICB2YXIgY29udGFpbmVyID0gX3RoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXHRcblx0ICAgIGlmICh0YXJnZXQucGFyZW50Tm9kZSAhPT0gY29udGFpbmVyIHx8ICF0YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLWtleScpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgaWR4ID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKTtcblx0ICAgIHZhciByZXN1bHQgPSBfdGhpcy5yZXN1bHRzW2lkeF07XG5cdCAgICBoYW5kbGVDbGljayh7IHJlc3VsdDogcmVzdWx0IH0pO1xuXHQgIH07XG5cdH07XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBSZXN1bHRMaXN0O1xuXG4vKioqLyB9LFxuLyogMTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfXJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblx0XG5cdHZhciBfZG9tVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcblx0ICBpZiAoIXNlbGYpIHtcblx0ICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcblx0ICB9cmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihzdXBlckNsYXNzKSkpO1xuXHQgIH1zdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pO2lmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcblx0fVxuXHRcblx0dmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcblx0ICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXHRcblx0ICBmdW5jdGlvbiBQcm92aWRlcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG5cdCAgICBrZXk6ICdlbmRwb2ludCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG5cdCAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcblx0ICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbCxcblx0ICAgICAgICAgIGpzb25wID0gX3JlZi5qc29ucDtcblx0XG5cdCAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG5cdCAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuXHQgICAgICAgIGpzb25wOiBqc29ucFxuXHQgICAgICB9KSk7XG5cdFxuXHQgICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9kZXYudmlydHVhbGVhcnRoLm5ldC9SRVNUL3YxL0xvY2F0aW9ucz8nICsgcGFyYW1TdHJpbmc7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncGFyc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG5cdCAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblx0XG5cdCAgICAgIGlmIChkYXRhLnJlc291cmNlU2V0cy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICByZXR1cm4gW107XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBkYXRhLnJlc291cmNlU2V0c1swXS5yZXNvdXJjZXMubWFwKGZ1bmN0aW9uIChyKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHg6IHIucG9pbnQuY29vcmRpbmF0ZXNbMV0sXG5cdCAgICAgICAgICB5OiByLnBvaW50LmNvb3JkaW5hdGVzWzBdLFxuXHQgICAgICAgICAgbGFiZWw6IHIuYWRkcmVzcy5mb3JtYXR0ZWRBZGRyZXNzLFxuXHQgICAgICAgICAgYm91bmRzOiBbW3IuYmJveFswXSwgci5iYm94WzFdXSwgLy8gcywgd1xuXHQgICAgICAgICAgW3IuYmJveFsyXSwgci5iYm94WzNdXV0sXG5cdCAgICAgICAgICByYXc6IHJcblx0ICAgICAgICB9O1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZWFyY2gnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmMykge1xuXHQgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuXHQgICAgICAgIHZhciBxdWVyeSwgcHJvdG9jb2wsIGpzb25wLCB1cmwsIGpzb247XG5cdCAgICAgICAgcXVlcnkgPSBfcmVmMy5xdWVyeTtcblx0XG5cdCAgICAgICAgcHJvdG9jb2wgPSB+bG9jYXRpb24ucHJvdG9jb2wuaW5kZXhPZignaHR0cCcpID8gbG9jYXRpb24ucHJvdG9jb2wgOiAnaHR0cHM6Jztcblx0XG5cdCAgICAgICAganNvbnAgPSAnQklOR19KU09OUF9DQl8nICsgRGF0ZS5ub3coKTtcblx0ICAgICAgICB1cmwgPSB0aGlzLmVuZHBvaW50KHsgcXVlcnk6IHF1ZXJ5LCBwcm90b2NvbDogcHJvdG9jb2wsIGpzb25wOiBqc29ucCB9KTtcblx0XG5cdCAgICAgICAgcmV0dXJuICgwLCBfZG9tVXRpbHMuY3JlYXRlU2NyaXB0RWxlbWVudCkodXJsLCBqc29ucCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcblx0ICAgICAgICAgIGpzb24gPSAkYXdhaXRfMTtcblx0ICAgICAgICAgIHJldHVybiAkcmV0dXJuKHRoaXMucGFyc2UoeyBkYXRhOiBqc29uIH0pKTtcblx0ICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBQcm92aWRlcjtcblx0fShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cbi8qKiovIH0sXG4vKiAxOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXHRcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cdFxuXHQgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2dldFBhcmFtU3RyaW5nJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQYXJhbVN0cmluZyhwYXJhbXMpIHtcblx0ICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHBhcmFtcykubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pO1xuXHQgICAgICB9KS5qb2luKCcmJyk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc2VhcmNoJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZWFyY2goX3JlZikge1xuXHQgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuXHQgICAgICAgIHZhciBxdWVyeSwgcHJvdG9jb2wsIHVybCwgcmVxdWVzdCwganNvbjtcblx0ICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnk7XG5cdFxuXHQgICAgICAgIHByb3RvY29sID0gfmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoJ2h0dHAnKSA/IGxvY2F0aW9uLnByb3RvY29sIDogJ2h0dHBzOic7XG5cdCAgICAgICAgdXJsID0gdGhpcy5lbmRwb2ludCh7IHF1ZXJ5OiBxdWVyeSwgcHJvdG9jb2w6IHByb3RvY29sIH0pO1xuXHRcblx0ICAgICAgICByZXR1cm4gZmV0Y2godXJsKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHQgICAgICAgICAgcmVxdWVzdCA9ICRhd2FpdF8xO1xuXHQgICAgICAgICAgcmV0dXJuIHJlcXVlc3QuanNvbigpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG5cdCAgICAgICAgICAgIGpzb24gPSAkYXdhaXRfMjtcblx0ICAgICAgICAgICAgcmV0dXJuICRyZXR1cm4odGhpcy5wYXJzZSh7IGRhdGE6IGpzb24gfSkpO1xuXHQgICAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oKTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9LFxuLyogMTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcblx0ICB9c3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTtpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG5cdCAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblx0XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZW5kcG9pbnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG5cdCAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblx0XG5cdCAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuXHQgICAgICAgIGY6ICdqc29uJyxcblx0ICAgICAgICB0ZXh0OiBxdWVyeVxuXHQgICAgICB9KSk7XG5cdFxuXHQgICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9nZW9jb2RlLmFyY2dpcy5jb20vYXJjZ2lzL3Jlc3Qvc2VydmljZXMvV29ybGQvR2VvY29kZVNlcnZlci9maW5kPycgKyBwYXJhbVN0cmluZztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcblx0ICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXHRcblx0ICAgICAgcmV0dXJuIGRhdGEubG9jYXRpb25zLm1hcChmdW5jdGlvbiAocikge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICB4OiByLmZlYXR1cmUuZ2VvbWV0cnkueCxcblx0ICAgICAgICAgIHk6IHIuZmVhdHVyZS5nZW9tZXRyeS55LFxuXHQgICAgICAgICAgbGFiZWw6IHIubmFtZSxcblx0ICAgICAgICAgIGJvdW5kczogW1tyLmV4dGVudC55bWluLCByLmV4dGVudC54bWluXSwgLy8gcywgd1xuXHQgICAgICAgICAgW3IuZXh0ZW50LnltYXgsIHIuZXh0ZW50LnhtYXhdXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSxcbi8qIDIwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfXJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcblx0ICBpZiAoIXNlbGYpIHtcblx0ICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcblx0ICB9cmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGNhbGwpKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcblx0ICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArICh0eXBlb2Ygc3VwZXJDbGFzcyA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7XG5cdCAgfXN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7aWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuXHQgIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2VuZHBvaW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcblx0ICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuXHQgICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcblx0ICAgICAgICBhZGRyZXNzOiBxdWVyeVxuXHQgICAgICB9KSk7XG5cdFxuXHQgICAgICAvLyBnb29nbGUgcmVxdWlyZXMgYSBzZWN1cmUgY29ubmVjdGlvbiB3aGVuIHVzaW5nIGFwaSBrZXlzXG5cdCAgICAgIHZhciBwcm90byA9IHBhcmFtcyAmJiBwYXJhbXMua2V5ID8gJ2h0dHBzOicgOiBwcm90b2NvbDtcblx0ICAgICAgcmV0dXJuIHByb3RvICsgJy8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24/JyArIHBhcmFtU3RyaW5nO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BhcnNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuXHQgICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cdFxuXHQgICAgICByZXR1cm4gZGF0YS5yZXN1bHRzLm1hcChmdW5jdGlvbiAocikge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICB4OiByLmdlb21ldHJ5LmxvY2F0aW9uLmxuZyxcblx0ICAgICAgICAgIHk6IHIuZ2VvbWV0cnkubG9jYXRpb24ubGF0LFxuXHQgICAgICAgICAgbGFiZWw6IHIuZm9ybWF0dGVkX2FkZHJlc3MsXG5cdCAgICAgICAgICBib3VuZHM6IFtbci5nZW9tZXRyeS52aWV3cG9ydC5zb3V0aHdlc3QubGF0LCByLmdlb21ldHJ5LnZpZXdwb3J0LnNvdXRod2VzdC5sbmddLCAvLyBzLCB3XG5cdCAgICAgICAgICBbci5nZW9tZXRyeS52aWV3cG9ydC5ub3J0aGVhc3QubGF0LCByLmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sbmddXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSxcbi8qIDIxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfXJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHtcblx0ICBpZiAoIXNlbGYpIHtcblx0ICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcblx0ICB9cmV0dXJuIGNhbGwgJiYgKCh0eXBlb2YgY2FsbCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKGNhbGwpKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcblx0ICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArICh0eXBlb2Ygc3VwZXJDbGFzcyA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7XG5cdCAgfXN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7aWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuXHQgIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2VuZHBvaW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcblx0ICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuXHQgICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcblx0ICAgICAgICBmb3JtYXQ6ICdqc29uJyxcblx0ICAgICAgICBxOiBxdWVyeVxuXHQgICAgICB9KSk7XG5cdFxuXHQgICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvc2VhcmNoPycgKyBwYXJhbVN0cmluZztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcblx0ICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXHRcblx0ICAgICAgcmV0dXJuIGRhdGEubWFwKGZ1bmN0aW9uIChyKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHg6IHIubG9uLFxuXHQgICAgICAgICAgeTogci5sYXQsXG5cdCAgICAgICAgICBsYWJlbDogci5kaXNwbGF5X25hbWUsXG5cdCAgICAgICAgICBib3VuZHM6IFtbcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzBdKSwgcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzJdKV0sIC8vIHMsIHdcblx0ICAgICAgICAgIFtwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMV0pLCBwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbM10pXV0sXG5cdCAgICAgICAgICByYXc6IHJcblx0ICAgICAgICB9O1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBQcm92aWRlcjtcblx0fShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cbi8qKiovIH0sXG4vKiAyMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkdldEFjdGl2ZUxheWVyR3JvdXBzID0gR2V0QWN0aXZlTGF5ZXJHcm91cHM7XG5cdGV4cG9ydHMuU2V0dXBQYW5lbCA9IFNldHVwUGFuZWw7XG5cdGV4cG9ydHMudXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCA9IHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQ7XG5cdFxuXHR2YXIgX2xheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHR2YXIgX29wYWNpdHlTbGlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciBsYXllckdyb3VwTGF5b3V0ID0gW107XG5cdFxuXHRmdW5jdGlvbiBHZXRBY3RpdmVMYXllckdyb3VwcygpIHtcblx0ICAgIHJldHVybiBsYXllckdyb3VwTGF5b3V0LmZpbHRlcihmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgIHJldHVybiBsYXllckdyb3VwLmFjdGl2ZTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBTZXR1cFBhbmVsKGxheWVycywgbGF5b3V0KSB7XG5cdCAgICBsYXllckdyb3VwTGF5b3V0ID0gbGF5b3V0WydsYXllci1ncm91cHMtb3JkZXInXTtcblx0ICAgIHZhciBsYXllckdyb3VwcyA9IG1ha2VMYXllckdyb3VwcyhsYXlvdXRbJ2xheWVyLWdyb3Vwcy1vcmRlciddKTtcblx0ICAgIG1ha2VMYXllckVsZW1zKGxheWVyR3JvdXBzLCBsYXllcnMpO1xuXHQgICAgbWFrZVBhbmVsRHJhZ2dhYmxlKCk7XG5cdCAgICBzZXRQYW5lbFNjcm9sbEhhbmRsZXIoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYnJvd3NlcklzSW50ZXJuZXRFeHBsb3JlcigpIHtcblx0ICAgIHZhciB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xuXHQgICAgcmV0dXJuIHVhLmluZGV4T2YoJ01TSUUnKSA+IC0xIHx8IHVhLmluZGV4T2YoJ3J2OjExLjAnKSA+IC0xO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRQYW5lbFNjcm9sbEhhbmRsZXIoKSB7XG5cdCAgICB2YXIgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKTtcblx0ICAgIHBhbmVsLm9uc2Nyb2xsID0gdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVBhbmVsRHJhZ2dhYmxlKCkge1xuXHQgICAgaWYgKGJyb3dzZXJJc0ludGVybmV0RXhwbG9yZXIoKSkgcmV0dXJuO1xuXHRcblx0ICAgIHZhciBvdmVybGF5ID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwtZHJhZy1vdmVybGF5Jyk7XG5cdFxuXHQgICAgb3ZlcmxheS5zdHlsZSgnY3Vyc29yJywgJ2V3LXJlc2l6ZScpO1xuXHRcblx0ICAgIG92ZXJsYXkuY2FsbChkMy5kcmFnKCkub24oJ2RyYWcnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcGFuZWxEcmFnRXZlbnRIYW5kbGVyLmNhbGwodGhpcyk7XG5cdCAgICB9KSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBhbmVsRHJhZ0V2ZW50SGFuZGxlcigpIHtcblx0ICAgIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKTtcblx0ICAgIHVwZGF0ZVBhbmVsV2lkdGgoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpIHtcblx0ICAgIHZhciBwYW5lbCA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsJyk7XG5cdCAgICB2YXIgcGFuZWxPZmZzZXRIZWlnaHQgPSBwYW5lbC5wcm9wZXJ0eSgnb2Zmc2V0SGVpZ2h0Jyk7XG5cdCAgICB2YXIgcGFuZWxEcmFnT3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbC1kcmFnLW92ZXJsYXknKTtcblx0ICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwtaGVhZGVyJyk7XG5cdFxuXHQgICAgdmFyIG5ld0hlaWdodDtcblx0XG5cdCAgICBpZiAocGFuZWwuY2xhc3NlZCgnZ3JhcGhzLWFjdGl2ZScpKSB7XG5cdCAgICAgICAgdmFyIGdyYXBoTGlzdEV4dHJhU3BhY2UgPSA3MDA7XG5cdCAgICAgICAgdmFyIGdyYXBoTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaC1saXN0Jyk7XG5cdCAgICAgICAgbmV3SGVpZ2h0ID0gaGVhZGVyLnNjcm9sbEhlaWdodCArIGdyYXBoTGlzdC5zY3JvbGxIZWlnaHQgKyBncmFwaExpc3RFeHRyYVNwYWNlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBwYW5lbC5jbGFzc2VkKCdsYXllcnMtYWN0aXZlJylcblx0ICAgICAgICB2YXIgbGF5ZXJMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheWVyLWxpc3QnKTtcblx0ICAgICAgICBuZXdIZWlnaHQgPSBoZWFkZXIuc2Nyb2xsSGVpZ2h0ICsgbGF5ZXJMaXN0LnNjcm9sbEhlaWdodDtcblx0ICAgIH1cblx0ICAgIG5ld0hlaWdodCA9IG5ld0hlaWdodCA+IHBhbmVsT2Zmc2V0SGVpZ2h0ID8gXCJcIiArIG5ld0hlaWdodCArICdweCcgOiBudWxsO1xuXHQgICAgcGFuZWxEcmFnT3ZlcmxheS5zdHlsZS5oZWlnaHQgPSBuZXdIZWlnaHQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZVBhbmVsV2lkdGgoKSB7XG5cdCAgICB2YXIgcGFuZWwgPSBkMy5zZWxlY3QoJyNyaWdodC1wYW5lbCcpO1xuXHQgICAgdmFyIHBhbmVsTWluV2lkdGggPSArcGFuZWwuc3R5bGUoJ21pbi13aWR0aCcpLnNsaWNlKDAsIC0yKTtcblx0ICAgIHZhciBwYW5lbENsaWVudFdpZHRoID0gcGFuZWwucHJvcGVydHkoJ2NsaWVudFdpZHRoJyk7XG5cdFxuXHQgICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd3JhcHBlcicpO1xuXHQgICAgdmFyIHdyYXBwZXJXaWR0aCA9IHdyYXBwZXIuY2xpZW50V2lkdGg7XG5cdFxuXHQgICAgdmFyIG1hcFdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLXdyYXBwZXInKTtcblx0XG5cdCAgICB2YXIgbW91c2VYID0gZDMuZXZlbnQuc291cmNlRXZlbnQueDtcblx0ICAgIHZhciB4RGVsdGEgPSB3cmFwcGVyV2lkdGggLSBtb3VzZVggLSBwYW5lbENsaWVudFdpZHRoO1xuXHRcblx0ICAgIHZhciBuZXdQYW5lbFdpZHRoID0gcGFuZWxDbGllbnRXaWR0aCArIHhEZWx0YTtcblx0ICAgIG5ld1BhbmVsV2lkdGggPSBuZXdQYW5lbFdpZHRoIDwgcGFuZWxNaW5XaWR0aCA/IHBhbmVsTWluV2lkdGggOiBuZXdQYW5lbFdpZHRoID4gd3JhcHBlcldpZHRoID8gd3JhcHBlcldpZHRoIDogbmV3UGFuZWxXaWR0aDtcblx0ICAgIG1hcFdyYXBwZXIuc3R5bGUucGFkZGluZ1JpZ2h0ID0gXCJcIiArIG5ld1BhbmVsV2lkdGggKyAncHgnO1xuXHQgICAgcGFuZWwuc3R5bGUoJ3dpZHRoJywgXCJcIiArIG5ld1BhbmVsV2lkdGggKyAncHgnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyR3JvdXBzKGxheW91dCkge1xuXHQgICAgcmV0dXJuIGQzLnNlbGVjdCgnI2xheWVyLWxpc3QnKS5zZWxlY3RBbGwoJy5sYXllci1ncm91cC13cmFwcGVyJykuZGF0YShsYXlvdXQpLmVudGVyKCkuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cC13cmFwcGVyJykuYXR0cignaWQnLCBmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgIHJldHVybiBsYXllckdyb3VwLmlkO1xuXHQgICAgfSkuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXJHcm91cC5hY3RpdmU7XG5cdCAgICB9KS5lYWNoKGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAtYnRuIGJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdFxuXHQgICAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyB0b2dnbGUgdGhlIGxheWVyIGxpc3QgYWNjb3JkaWFuc1xuXHQgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdsYXllciBsaXN0Jyxcblx0ICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAndG9nZ2xlICcgKyAhbGF5ZXJHcm91cC5hY3RpdmUsXG5cdCAgICAgICAgICAgICAgICBldmVudExhYmVsOiBsYXllckdyb3VwLm5hbWUsXG5cdCAgICAgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICAgICBsYXllckdyb3VwLmFjdGl2ZSA9ICFsYXllckdyb3VwLmFjdGl2ZTtcblx0ICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMucGFyZW50Tm9kZSkuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGxheWVyR3JvdXAuYWN0aXZlO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpO1xuXHQgICAgICAgICAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHQgICAgICAgIH0pLnRleHQobGF5ZXJHcm91cC5uYW1lKTtcblx0ICAgIH0pLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyRWxlbXMobGF5ZXJHcm91cHMsIGxheWVycykge1xuXHQgICAgbGF5ZXJHcm91cHMuc2VsZWN0QWxsKCcubGF5ZXItc2VsZWN0JykuZGF0YShmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgIHJldHVybiBsYXllcnNbbGF5ZXJHcm91cC5pZF07XG5cdCAgICB9KS5lbnRlcigpLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItc2VsZWN0JykuZWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICB2YXIgZ3JvdXBOYW1lID0gdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWQ7XG5cdCAgICAgICAgdmFyIGxheWVyRGl2ID0gZDMuc2VsZWN0KHRoaXMpO1xuXHQgICAgICAgIG1ha2VDaGVja2JveChsYXllciwgbGF5ZXJEaXYpO1xuXHQgICAgICAgIG1ha2VMYWJlbChsYXllciwgbGF5ZXJEaXYpO1xuXHQgICAgICAgIG1ha2VEZXNjcmlwdGlvbihsYXllciwgbGF5ZXJEaXYpO1xuXHQgICAgICAgIGxheWVyRGl2Lm5vZGUoKS5hcHBlbmRDaGlsZChtYWtlTGF5ZXJUb29scyhsYXllcikpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VDaGVja2JveChsYXllciwgbGF5ZXJEaXYpIHtcblx0ICAgIGxheWVyRGl2LmFwcGVuZCgnaW5wdXQnKS5hdHRyKCd0eXBlJywgJ2NoZWNrYm94JykuYXR0cignaWQnLCBmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXIuaWQ7XG5cdCAgICB9KS5hdHRyKCdjaGVja2VkJywgZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyLmFjdGl2ZSA/ICdjaGVja2VkJyA6IG51bGw7XG5cdCAgICB9KS5vbignY2xpY2snLCBmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICAoMCwgX2xheWVyLnRvZ2dsZUxheWVyKShsYXllcik7XG5cdCAgICAgICAgbGF5ZXJEaXYuc2VsZWN0KCcubGF5ZXItdG9vbHMtd3JhcHBlcicpLmNsYXNzZWQoJ2FjdGl2ZScsIGxheWVyLmFjdGl2ZSk7XG5cdCAgICAgICAgaWYgKGxheWVyLmFjdGl2ZSkge1xuXHQgICAgICAgICAgICB2YXIgc2xpZGVySGFuZGxlID0gbGF5ZXJEaXYuc2VsZWN0KCcub3BhY2l0eS1zbGlkZXItaGFuZGxlJykubm9kZSgpO1xuXHQgICAgICAgICAgICAoMCwgX29wYWNpdHlTbGlkZXIuc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uKShsYXllciwgc2xpZGVySGFuZGxlLCBsYXllci5vcGFjaXRpeSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VMYWJlbChsYXllciwgbGF5ZXJEaXYpIHtcblx0ICAgIGxheWVyRGl2LmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItbGFiZWwtd3JhcHBlcicpLmFwcGVuZCgnbGFiZWwnKS5hdHRyKCdmb3InLCBmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXIuaWQ7XG5cdCAgICB9KS5hdHRyKCdjbGFzcycsICdsYXllci1sYWJlbCcpLmh0bWwoZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyLm5hbWU7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZURlc2NyaXB0aW9uKGxheWVyLCBsYXllckRpdikge1xuXHQgICAgaWYgKGxheWVyLmluZm8gJiYgbGF5ZXIuaW5mbyAhPT0gJycpIHtcblx0ICAgICAgICBsYXllckRpdi5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8tYnRuLXdyYXBwZXInKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLnBhcmVudE5vZGUpLnNlbGVjdCgnLmxheWVyLWluZm8td3JhcHBlcicpLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uICgpIHtcblx0XG5cdCAgICAgICAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBjbGljayBvbiBsYXllciBpbmZvXG5cdCAgICAgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbGF5ZXIgaW5mbycsXG5cdCAgICAgICAgICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGlja2VkJyxcblx0ICAgICAgICAgICAgICAgICAgICBldmVudExhYmVsOiBsYXllci5uYW1lICsgXCIgXCIgKyAhZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoJ2FjdGl2ZScpLFxuXHQgICAgICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgICAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICAgICAgICAgcmV0dXJuICFkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnYWN0aXZlJyk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0pLmFwcGVuZCgnaW1nJykuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby1pY29uJykuYXR0cignc3JjJywgJ2ltZ3MvbW9yZS1pbmZvLWljb24tNjR4NjQucG5nJykuYXR0cihcImFsdFwiLCBcIlJlYWQgbW9yZSBhYm91dCB0aGUgXCIgKyBsYXllci5uYW1lICsgXCIgbGF5ZXJcIikuYXR0cihcInRpdGxlXCIsIFwiUmVhZCBtb3JlIGFib3V0IHRoZSBcIiArIGxheWVyLm5hbWUgKyBcIiBsYXllclwiKTtcblx0XG5cdCAgICAgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1pbmZvLXdyYXBwZXInKS50ZXh0KGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgICAgICByZXR1cm4gbGF5ZXIuaW5mbztcblx0ICAgICAgICB9KTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyVG9vbHMobGF5ZXIsIGxheWVyRGl2KSB7XG5cdCAgICB2YXIgbGF5ZXJUb29sc0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgbGF5ZXJUb29sc0Rpdi5jbGFzc0xpc3QuYWRkKCdsYXllci10b29scy13cmFwcGVyJyk7XG5cdCAgICBpZiAobGF5ZXIuYWN0aXZlKSBsYXllclRvb2xzRGl2LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXHRcblx0ICAgIHZhciBvcGFjaXR5U2xpZGVyID0gKDAsIF9vcGFjaXR5U2xpZGVyLm1ha2VPcGFjaXR5U2xpZGVyKShsYXllcik7XG5cdCAgICB2YXIgbGVnZW5kID0gbWFrZUxlZ2VuZChsYXllcik7XG5cdFxuXHQgICAgbGF5ZXJUb29sc0Rpdi5hcHBlbmRDaGlsZChsZWdlbmQpO1xuXHQgICAgbGF5ZXJUb29sc0Rpdi5hcHBlbmRDaGlsZChvcGFjaXR5U2xpZGVyKTtcblx0XG5cdCAgICByZXR1cm4gbGF5ZXJUb29sc0Rpdjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxlZ2VuZChsYXllciwgbGF5ZXJUb29sc1dyYXBwZXIpIHtcblx0ICAgIHZhciBsZWdlbmRXcmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICB2YXIgbGVnZW5kSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cdCAgICBsZWdlbmRXcmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2xlZ2VuZC13cmFwcGVyJyk7XG5cdCAgICBsZWdlbmRJbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBsYXllci5sZWdlbmQpO1xuXHQgICAgbGVnZW5kV3JhcHBlci5hcHBlbmRDaGlsZChsZWdlbmRJbWcpO1xuXHQgICAgcmV0dXJuIGxlZ2VuZFdyYXBwZXI7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuR2V0Q3VycmVudExheWVycyA9IEdldEN1cnJlbnRMYXllcnM7XG5cdGV4cG9ydHMuQ3JlYXRlRGVmYXVsdExheWVycyA9IENyZWF0ZURlZmF1bHRMYXllcnM7XG5cdGV4cG9ydHMudG9nZ2xlTGF5ZXIgPSB0b2dnbGVMYXllcjtcblx0ZXhwb3J0cy5lbmFibGVMYXllciA9IGVuYWJsZUxheWVyO1xuXHRleHBvcnRzLmRpc2FibGVMYXllciA9IGRpc2FibGVMYXllcjtcblx0ZXhwb3J0cy51cGRhdGVMYXllck9wYWNpdHkgPSB1cGRhdGVMYXllck9wYWNpdHk7XG5cdFxuXHR2YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0LyoqXHJcblx0ICogTmVlZGVkIGZvciB0aGUgc2hhcmUgdXJsIHNpbmNlIExlYWZsZXQgZG9lcyBub3QgaGF2ZSBhIGRlZmF1bHQgd2F5IHRvIHN1cmZhY2VcclxuXHQgKiB0aGUgb3JkZXIgb2YgbGF5ZXJzIGluIHRoZSBtYXBcclxuXHQgKi9cblx0dmFyIF9jdXJyZW50X2xheWVycyA9IFtdO1xuXHR2YXIgX2N1cnJlbnRfbGF5ZXJzX29iamVjdHMgPSBbXTtcblx0XG5cdC8qKlxyXG5cdCAqIE5vdGU6IGxheWVyIGlzIG5vdCB0aGUgbGVhZmxldCBjb25jZXB0IG9mIGEgbGF5ZXIsIGJ1dCByYXRoZXIgdGhlIGludGVybmFsXHJcblx0ICogICAgICAgb2JqZWN0IHdoaWNoIHRyYWNrcyB0aGVtLiBsYXllci5tYXBMYXllciBpcyB0aGUgcG9pbnRlciB0byB0aGVcclxuXHQgKiAgICAgICBsZWFmbGV0IGxheWVyLlxyXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gR2V0Q3VycmVudExheWVycygpIHtcblx0ICAgIHJldHVybiBfY3VycmVudF9sYXllcnM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIENyZWF0ZURlZmF1bHRMYXllcnMobGF5ZXJzLCBkZWZhdWx0TGF5ZXJzKSB7XG5cdCAgICB2YXIgaSwgaiwgcHJvcCwgbGF5ZXJncm91cDtcblx0ICAgIHZhciBkZWZhdWx0TGF5ZXI7XG5cdCAgICB2YXIgZm91bmRMYXllcjtcblx0XG5cdCAgICBpZiAoIWRlZmF1bHRMYXllcnMgfHwgZGVmYXVsdExheWVycy5sZW5ndGggPT09IDApIHJldHVybjtcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgZGVmYXVsdExheWVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGZvdW5kTGF5ZXIgPSBmYWxzZTtcblx0ICAgICAgICBkZWZhdWx0TGF5ZXIgPSBkZWZhdWx0TGF5ZXJzW2ldO1xuXHQgICAgICAgIGZvciAocHJvcCBpbiBsYXllcnMpIHtcblx0ICAgICAgICAgICAgaWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcblx0ICAgICAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcblx0ICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGxheWVyZ3JvdXAubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgICAgICAgIGlmIChsYXllcmdyb3VwW2pdLmlkID09PSBkZWZhdWx0TGF5ZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICBlbmFibGVMYXllcihsYXllcmdyb3VwW2pdKTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3VuZExheWVyID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoZm91bmRMYXllcikgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b2dnbGVMYXllcihsYXllcikge1xuXHQgICAgaWYgKCFsYXllci5hY3RpdmUpIHtcblx0ICAgICAgICBlbmFibGVMYXllcihsYXllcik7XG5cdFxuXHQgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvZ2dsZSB0aGUgbGF5ZXIgb25cblx0ICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2xheWVyJyxcblx0ICAgICAgICAgICAgZXZlbnRBY3Rpb246ICd0b2dnbGUgb24nLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiBsYXllci5uYW1lLFxuXHQgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZGlzYWJsZUxheWVyKGxheWVyKTtcblx0XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgdG9nZ2xlIHRoZSBsYXllciBvZmZcblx0ICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2xheWVyJyxcblx0ICAgICAgICAgICAgZXZlbnRBY3Rpb246ICd0b2dnbGUgb2ZmJyxcblx0ICAgICAgICAgICAgZXZlbnRMYWJlbDogbGF5ZXIubmFtZSxcblx0ICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgfSk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGVuYWJsZUxheWVyKGxheWVyKSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIGxheWVyLmFjdGl2ZSA9IHRydWU7XG5cdCAgICBsYXllci5tYXBMYXllciA9IGxheWVyLm1hcExheWVyIHx8IG1ha2VXbXNUaWxlTGF5ZXIobGF5ZXIpO1xuXHQgICAgbWFwLmFkZExheWVyKGxheWVyLm1hcExheWVyKTtcblx0ICAgIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xuXHQgICAgbW92ZU92ZXJsYXlMYXllcnNUb1RvcCgpO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbW92ZU92ZXJsYXlMYXllcnNUb1RvcCgpIHtcblx0ICAgIHZhciBsYXllcjtcblx0ICAgIHZhciBpLCBsO1xuXHRcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBfY3VycmVudF9sYXllcnNfb2JqZWN0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBsYXllciA9IF9jdXJyZW50X2xheWVyc19vYmplY3RzW2ldO1xuXHQgICAgICAgIGlmIChsYXllci50eXBlID09PSBcIm92ZXJsYXlcIikgbGF5ZXIubWFwTGF5ZXIuYnJpbmdUb0Zyb250KCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIobGF5ZXIpIHtcblx0ICAgIF9jdXJyZW50X2xheWVycy5wdXNoKGxheWVyLmlkKTtcblx0ICAgIF9jdXJyZW50X2xheWVyc19vYmplY3RzLnB1c2gobGF5ZXIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkaXNhYmxlTGF5ZXIobGF5ZXIpIHtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHQgICAgbGF5ZXIuYWN0aXZlID0gZmFsc2U7XG5cdCAgICBpZiAobGF5ZXIubWFwTGF5ZXIgJiYgbWFwLmhhc0xheWVyKGxheWVyLm1hcExheWVyKSkge1xuXHQgICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllci5tYXBMYXllcik7XG5cdCAgICB9XG5cdCAgICByZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlTGF5ZXJGcm9tSW50ZXJuYWxUcmFja2VyKGxheWVyKSB7XG5cdCAgICB2YXIgbG9jID0gX2N1cnJlbnRfbGF5ZXJzLmluZGV4T2YobGF5ZXIuaWQpO1xuXHQgICAgaWYgKGxvYyA9PT0gLTEpIHJldHVybjtcblx0ICAgIF9jdXJyZW50X2xheWVycy5zcGxpY2UobG9jLCAxKTtcblx0ICAgIF9jdXJyZW50X2xheWVyc19vYmplY3RzLnNwbGljZShsb2MsIDEpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVMYXllck9wYWNpdHkobGF5ZXIsIG5ld09wYWNpdHkpIHtcblx0ICAgIGxheWVyLm9wYWNpdHkgPSBuZXdPcGFjaXR5O1xuXHQgICAgbGF5ZXIubWFwTGF5ZXIuc2V0T3BhY2l0eShuZXdPcGFjaXR5KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVdtc1RpbGVMYXllcihsYXllcikge1xuXHQgICAgcmV0dXJuIEwudGlsZUxheWVyLndtcyhsYXllci51cmwsIHtcblx0ICAgICAgICBsYXllcnM6IGxheWVyLmlkLFxuXHQgICAgICAgIHRyYW5zcGFyZW50OiBsYXllci50cmFuc3BhcmVudCB8fCB0cnVlLFxuXHQgICAgICAgIHZlcnNpb246IGxheWVyLnZlcnNpb24gfHwgJzEuMy4wJyxcblx0ICAgICAgICBjcnM6IGxheWVyLmNycyB8fCBMLkNSUy5FUFNHOTAwOTEzLFxuXHQgICAgICAgIGZvcm1hdDogbGF5ZXIuZm9ybWF0IHx8ICdpbWFnZS9wbmcnLFxuXHQgICAgICAgIG9wYWNpdHk6IGxheWVyLm9wYWNpdHkgfHwgLjc1LFxuXHQgICAgICAgIHRpbGVTaXplOiBsYXllci50aWxlU2l6ZSB8fCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcFwiKS5jbGllbnRXaWR0aFxuXHQgICAgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQ3JlYXRlTWFwID0gQ3JlYXRlTWFwO1xuXHRleHBvcnRzLkdldE1hcCA9IEdldE1hcDtcblx0dmFyIG1hcDtcblx0XG5cdGZ1bmN0aW9uIENyZWF0ZU1hcChtYXBDb25maWcpIHtcblx0ICAgIHZhciBpZCA9IG1hcENvbmZpZy5pZCB8fCBcIm1hcFwiO1xuXHQgICAgdmFyIG9wdGlvbnMgPSBtYXBDb25maWcub3B0aW9ucyB8fCB7IFwic2Nyb2xsV2hlZWxab29tXCI6IGZhbHNlIH07XG5cdCAgICB2YXIgaW5pdGlhbENlbnRlciA9IG1hcENvbmZpZy5jZW50ZXIgfHwgW1wiMzguNVwiLCBcIi04MVwiXTtcblx0ICAgIHZhciBpbml0aWFsWm9vbSA9IG1hcENvbmZpZy56b29tIHx8IDY7XG5cdFxuXHQgICAgbWFwID0gTC5tYXAoaWQsIG9wdGlvbnMpLnNldFZpZXcoaW5pdGlhbENlbnRlciwgaW5pdGlhbFpvb20pO1xuXHQgICAgTC5jb250cm9sLmF0dHJpYnV0aW9uKCkuYWRkVG8obWFwKTtcblx0XG5cdCAgICB2YXIgbGVhZmxldFpvb21JbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJsZWFmbGV0LWNvbnRyb2wtem9vbS1pblwiKVswXTtcblx0XG5cdCAgICBsZWFmbGV0Wm9vbUluLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIHNlYWNyY2ggYnkgYWRkcmVzc1xuXHQgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcblx0ICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljayBidXR0b24nLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiAnem9vbSBpbicsXG5cdCAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgICAgIH0pO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIGxlYWZsZXRab29tT3V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImxlYWZsZXQtY29udHJvbC16b29tLW91dFwiKVswXTtcblx0XG5cdCAgICBsZWFmbGV0Wm9vbU91dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBzZWFjcmNoIGJ5IGFkZHJlc3Ncblx0ICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdCAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2sgYnV0dG9uJyxcblx0ICAgICAgICAgICAgZXZlbnRMYWJlbDogJ3pvb20gb3V0Jyxcblx0ICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgfSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICBtYXAub24oXCJkcmFnZW5kXCIsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIGRyYWcgKHBhbikgZW5kXG5cdCAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuXHQgICAgICAgICAgICBldmVudEFjdGlvbjogJ2RyYWcnLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiBKU09OLnN0cmluZ2lmeShtYXAuZ2V0Qm91bmRzKCkpLFxuXHQgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogdHJ1ZVxuXHQgICAgICAgIH0pO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgbWFwLm9uKFwiem9vbWVuZFwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciB6b29tIGVuZFxuXHQgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcblx0ICAgICAgICAgICAgZXZlbnRBY3Rpb246ICd6b29tJyxcblx0ICAgICAgICAgICAgZXZlbnRMYWJlbDogSlNPTi5zdHJpbmdpZnkobWFwLmdldEJvdW5kcygpKSxcblx0ICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IHRydWVcblx0ICAgICAgICB9KTtcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIG1hcDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gR2V0TWFwKCkge1xuXHQgICAgcmV0dXJuIG1hcDtcblx0fVxuXG4vKioqLyB9LFxuLyogMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQmluZFVwZGF0ZVNoYXJlVXJsID0gQmluZFVwZGF0ZVNoYXJlVXJsO1xuXHRleHBvcnRzLnVwZGF0ZVNoYXJlVXJsID0gdXBkYXRlU2hhcmVVcmw7XG5cdGV4cG9ydHMuQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnID0gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnO1xuXHRleHBvcnRzLkJpbmRDb3B5TGlua0V2ZW50cyA9IEJpbmRDb3B5TGlua0V2ZW50cztcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX2Jhc2VsYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRcblx0dmFyIF9sYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHRcblx0dmFyIF9wb2kgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdHZhciBfcGFuZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0XG5cdGZ1bmN0aW9uIEJpbmRVcGRhdGVTaGFyZVVybChtYXApIHtcblx0ICAgIG1hcC5vbihcIm1vdmVlbmRcIiwgdXBkYXRlU2hhcmVVcmwpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVTaGFyZVVybChlKSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIHZhciBwYXJhbXMgPSBbbWFrZUNlbnRlclN0cmluZyhtYXApLCBtYWtlWm9vbVN0cmluZyhtYXApLCBtYWtlTGF5ZXJTdHJpbmcobWFwKSwgbWFrZUxheWVyR3JvdXBzU3RyaW5nKCksIG1ha2VCYXNlTGF5ZXJTdHJpbmcobWFwKSwgbWFrZVBvaW50c09mSW50ZXJlc3RTdHJpbmcoKSwgbWFrZUFjdGl2ZVRhYlN0cmluZygpLCBtYWtlQWN0aXZlR3JhcGhUYWJTdHJpbmcoKV07XG5cdFxuXHQgICAgc2V0U2hhcmVVcmwobWFrZVNoYXJlVXJsKHBhcmFtcykpO1xuXHQgICAgc2V0Q29weUxpbmtVcmwoKTtcblx0ICAgIHNldFNvY2lhbFVybHMoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnKGNvbmZpZykge1xuXHQgICAgdmFyIHNoYXJlID0gcGFyc2VTaGFyZVVybCgpO1xuXHQgICAgaWYgKCFzaGFyZSkgcmV0dXJuO1xuXHQgICAgaWYgKHNoYXJlLmNlbnRlcikgY29uZmlnLm1hcC5jZW50ZXIgPSBzaGFyZS5jZW50ZXI7XG5cdCAgICBpZiAoc2hhcmUuem9vbSkgY29uZmlnLm1hcC56b29tID0gc2hhcmUuem9vbTtcblx0ICAgIGlmIChzaGFyZS5sYXllcnMpIGFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5sYXllcnMsIGNvbmZpZyk7XG5cdCAgICBpZiAoc2hhcmUuYmFzZWxheWVycykgYWRkQmFzZUxheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5iYXNlbGF5ZXJzLCBjb25maWcpO1xuXHQgICAgaWYgKHNoYXJlLnBvaXMpIGFkZFBvaW50c09mSW50ZXJlc3RUb0NvbmZpZyhzaGFyZS5wb2lzLCBjb25maWcpO1xuXHQgICAgaWYgKHNoYXJlLnRhYikgY29uZmlnLnRhYiA9IHNoYXJlLnRhYjtcblx0ICAgIGlmIChzaGFyZS5ncmFwaCkgY29uZmlnLmdyYXBoID0gc2hhcmUuZ3JhcGg7XG5cdCAgICBpZiAoc2hhcmUubGF5ZXJHcm91cHMpIGNvbmZpZy5sYXllckdyb3VwcyA9IGFkZExheWVyR3JvdXBTZXR0aW5nc1RvQ29uZmlnKHNoYXJlLmxheWVyR3JvdXBzLCBjb25maWcpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlU2hhcmVVcmwocGFyYW1zKSB7XG5cdCAgICByZXR1cm4gXCI/XCIgKyBwYXJhbXMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7XG5cdCAgICAgICAgcmV0dXJuIHAgIT09IHVuZGVmaW5lZDtcblx0ICAgIH0pLmpvaW4oXCImXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRTaGFyZVVybCh1cmwpIHtcblx0ICAgIGlmICh3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcblx0ICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIFwiXCIsIHVybCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldENvcHlMaW5rVXJsKCkge1xuXHQgICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCB1cmwpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBCaW5kQ29weUxpbmtFdmVudHMoKSB7XG5cdCAgICBkMy5zZWxlY3QoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgaGFuZGxlQm9keUNsaWNrKTtcblx0ICAgIGQzLnNlbGVjdChcIi5zaGFyZXVybC1saW5rIGFcIikub24oXCJjbGlja1wiLCBoYW5kbGVTaGFyZUxpbmtCdXR0b25DbGljayk7XG5cdCAgICBkMy5zZWxlY3QoXCIuc2hhcmV1cmwtbGluay11cmxcIikub24oXCJjbGlja1wiLCBoYW5kbGVTaGFyZUxpbmtVcmxDbGljayk7XG5cdCAgICBkMy5zZWxlY3QoXCIuc2hhcmV1cmwtbGluay1wb3B1cC1yZW1vdmVyXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlU2hhcmVMaW5rQ2xvc2VCdXR0b25DbGljayk7XG5cdH1cblx0XG5cdC8qKlxyXG5cdCAqIFNob3VsZCBjbG9zZSB0aGUgY29weSBsaW5rIHBvcHVwIGlmIGl0IGlzIGFjdGl2ZSBhbmQgaWYgeW91IGNsaWNrIG9uIGFueSBlbGVtZW50XHJcblx0ICogdGhhdCBpcyBub3QgdGhlIHBvcHVwIG9yIGl0cyBjaGlsZHJlbi5cclxuXHQgKi9cblx0ZnVuY3Rpb24gaGFuZGxlQm9keUNsaWNrKCkge1xuXHQgICAgdmFyIGV2ZW50ID0gZDMuZXZlbnQ7XG5cdCAgICB2YXIgbm9kZVBhdGggPSBbXTtcblx0ICAgIG5vZGVQYXRoID0gZ2V0RG9tUGF0aChldmVudC50YXJnZXQpO1xuXHRcblx0ICAgIHZhciB0b0Nsb3NlUG9wdXAgPSB0cnVlO1xuXHQgICAgdmFyIGksIGw7XG5cdFxuXHQgICAgZm9yIChpID0gMCwgbCA9IG5vZGVQYXRoLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIGlmIChub2RlUGF0aFtpXS5jbGFzc0xpc3QuY29udGFpbnMoJ3NoYXJldXJsLWxpbmstcG9wdXAnKSB8fCBub2RlUGF0aFtpXS5jbGFzc0xpc3QuY29udGFpbnMoJ3NoYXJldXJsLWxpbmsnKSkge1xuXHQgICAgICAgICAgICAgICAgdG9DbG9zZVBvcHVwID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgLy8gY2xpY2tpbmcgc3ZnIHRocm93cyBhbiBlcnJvciBpbiBJRVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAodG9DbG9zZVBvcHVwKSB7XG5cdCAgICAgICAgdmFyIHNoYXJlUG9wdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzaGFyZXVybC1saW5rLXBvcHVwJykuaXRlbSgwKTtcblx0ICAgICAgICBoYW5kbGVDb3B5TGlua0Nsb3NlKHNoYXJlUG9wdXApO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXREb21QYXRoKG5vZGUpIHtcblx0ICAgIHZhciBwYXRoID0gW107XG5cdCAgICB3aGlsZSAobm9kZSAmJiBub2RlLnBhcmVudE5vZGUpIHtcblx0ICAgICAgICBwYXRoLnB1c2gobm9kZSk7XG5cdCAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBwYXRoO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVTaGFyZUxpbmtCdXR0b25DbGljaygpIHtcblx0ICAgIHZhciBzaGFyZVBvcHVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNoYXJldXJsLWxpbmstcG9wdXBcIikuaXRlbSgwKTtcblx0ICAgIGlmIChkMy5zZWxlY3Qoc2hhcmVQb3B1cCkuY2xhc3NlZChcImFjdGl2ZVwiKSkge1xuXHQgICAgICAgIGhhbmRsZUNvcHlMaW5rQ2xvc2Uoc2hhcmVQb3B1cCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIGhhbmRsZUNvcHlMaW5rT3BlbihzaGFyZVBvcHVwKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlU2hhcmVMaW5rQ2xvc2VCdXR0b25DbGljaygpIHtcblx0ICAgIHZhciBzaGFyZVBvcHVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNoYXJldXJsLWxpbmstcG9wdXBcIikuaXRlbSgwKTtcblx0ICAgIGhhbmRsZUNvcHlMaW5rQ2xvc2Uoc2hhcmVQb3B1cCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVNoYXJlTGlua1VybENsaWNrKCkge1xuXHQgICAgc2VsZWN0Q29weUxpbmtVcmwoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlQ29weUxpbmtPcGVuKHNoYXJlUG9wdXApIHtcblx0ICAgIHNoYXJlUG9wdXAuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKTtcblx0ICAgIHNlbGVjdENvcHlMaW5rVXJsKCk7XG5cdFxuXHQgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZXZlbnQgY2xpY2sgb24gc2hhcmUgdXJsXG5cdCAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICBldmVudENhdGVnb3J5OiAnc2hhcmV1cmwnLFxuXHQgICAgICAgIGV2ZW50QWN0aW9uOiAnb3BlbicsXG5cdCAgICAgICAgZXZlbnRMYWJlbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSxcblx0ICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVDb3B5TGlua0Nsb3NlKHNoYXJlUG9wdXApIHtcblx0XG5cdCAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBldmVudCBjbGljayBvbiBzaGFyZSB1cmwgY2xvc2Vcblx0ICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdzaGFyZXVybCcsXG5cdCAgICAgICAgZXZlbnRBY3Rpb246ICdjbG9zZScsXG5cdCAgICAgICAgZXZlbnRMYWJlbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSxcblx0ICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgIH0pO1xuXHRcblx0ICAgIHNoYXJlUG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2VsZWN0Q29weUxpbmtVcmwoKSB7XG5cdCAgICB2YXIgc2hhcmVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hhcmV1cmwtbGluay11cmxcIik7XG5cdCAgICBzaGFyZUlucHV0LmZvY3VzKCk7XG5cdCAgICBzaGFyZUlucHV0LnNldFNlbGVjdGlvblJhbmdlKDAsIHNoYXJlSW5wdXQudmFsdWUubGVuZ3RoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0U29jaWFsVXJscygpIHtcblx0ICAgIHZhciB1cmwgPSBtYW5nbGVQYXJhbVN0cmluZyh3aW5kb3cubG9jYXRpb24uaHJlZik7XG5cdCAgICB2YXIgc29jaWFsTGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic2hhcmV1cmwtc29jaWFsXCIpO1xuXHQgICAgdmFyIHNvY2lhbExpbms7XG5cdCAgICB2YXIgbmV3VXJsO1xuXHQgICAgdmFyIGksIGw7XG5cdFxuXHQgICAgZm9yIChpID0gMCwgbCA9IHNvY2lhbExpbmtzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHNvY2lhbExpbmsgPSBzb2NpYWxMaW5rc1tpXTtcblx0XG5cdCAgICAgICAgbmV3VXJsID0gc29jaWFsTGluay5nZXRBdHRyaWJ1dGUoXCJkYXRhLWJhc2V1cmxcIikgKyB1cmw7XG5cdCAgICAgICAgc29jaWFsTGluay5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIG5ld1VybCk7XG5cdFxuXHQgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGV2ZW50IGZvciBzb2NpYWwgdXJsc1xuXHQgICAgICAgIHNvY2lhbExpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdFxuXHQgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdzaGFyZXVybCcsXG5cdCAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogdGhpcy5nZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIpLFxuXHQgICAgICAgICAgICAgICAgZXZlbnRMYWJlbDogdGhpcy5ocmVmLFxuXHQgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlQ2VudGVyU3RyaW5nKG1hcCkge1xuXHQgICAgdmFyIGNlbnRlciA9IG1hcC5nZXRDZW50ZXIoKTtcblx0ICAgIHJldHVybiBcImNlbnRlcj1cIiArIGNlbnRlci5sYXQudG9TdHJpbmcoKSArIFwiLFwiICsgY2VudGVyLmxuZy50b1N0cmluZygpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlWm9vbVN0cmluZyhtYXApIHtcblx0ICAgIHJldHVybiBcInpvb209XCIgKyBtYXAuZ2V0Wm9vbSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGF5ZXJTdHJpbmcobWFwKSB7XG5cdCAgICB2YXIgbGF5ZXJzID0gW107XG5cdCAgICB2YXIgb3BhY2l0eVZhbHMgPSB7fTtcblx0ICAgIHZhciBjdXJyZW50TGF5ZXJzID0gKDAsIF9sYXllci5HZXRDdXJyZW50TGF5ZXJzKSgpO1xuXHRcblx0ICAgIG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgdmFyIG9wdGlvbnMgPSBsYXllci5vcHRpb25zO1xuXHQgICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubGF5ZXJzKSB7XG5cdCAgICAgICAgICAgIG9wYWNpdHlWYWxzW29wdGlvbnMubGF5ZXJzXSA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoXCJvcGFjaXR5XCIpID8gb3B0aW9ucy5vcGFjaXR5IDogXCIxXCI7XG5cdCAgICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIGN1cnJlbnRMYXllcjtcblx0ICAgIHZhciBpO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGN1cnJlbnRMYXllcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBjdXJyZW50TGF5ZXIgPSBjdXJyZW50TGF5ZXJzW2ldO1xuXHQgICAgICAgIGxheWVycy5wdXNoKGN1cnJlbnRMYXllcik7XG5cdCAgICAgICAgbGF5ZXJzLnB1c2gob3BhY2l0eVZhbHNbY3VycmVudExheWVyXSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gXCJsYXllcnM9XCIgKyBsYXllcnMuam9pbihcIixcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VCYXNlTGF5ZXJTdHJpbmcobWFwKSB7XG5cdCAgICB2YXIgbGF5ZXJzID0gW107XG5cdCAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIGlmIChsYXllci5vcHRpb25zICYmIGxheWVyLm9wdGlvbnMudHlwZSA9PT0gX2Jhc2VsYXllci5CQVNFX0xBWUVSX1RZUEUpIHtcblx0ICAgICAgICAgICAgbGF5ZXJzLnB1c2gobGF5ZXIub3B0aW9ucy5pZCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gXCJiYXNlbGF5ZXJzPVwiICsgbGF5ZXJzLmpvaW4oXCIsXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGF5ZXJHcm91cHNTdHJpbmcoKSB7XG5cdCAgICB2YXIgYWN0aXZlTGF5ZXJHcm91cHMgPSAoMCwgX3BhbmVsLkdldEFjdGl2ZUxheWVyR3JvdXBzKSgpO1xuXHQgICAgcmV0dXJuIFwibGF5ZXJHcm91cHM9XCIgKyBhY3RpdmVMYXllckdyb3Vwcy5tYXAoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZC5pZDtcblx0ICAgIH0pLmpvaW4oJywnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVBvaW50c09mSW50ZXJlc3RTdHJpbmcoKSB7XG5cdCAgICB2YXIgcG9pcyA9ICgwLCBfcG9pLkdldEFsbFBvaW50c09mSW50ZXJlc3QpKCk7XG5cdCAgICBpZiAoIXBvaXMubGVuZ3RoKSByZXR1cm47XG5cdCAgICB2YXIgcG9pU3RyaW5nID0gXCJwb2lzPVwiO1xuXHQgICAgcG9pcy5mb3JFYWNoKGZ1bmN0aW9uIChwb2kpIHtcblx0ICAgICAgICBwb2lTdHJpbmcgKz0gcG9pLmxhdCArICcsJyArIHBvaS5sbmcgKyAnOyc7XG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBwb2lTdHJpbmc7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VBY3RpdmVUYWJTdHJpbmcoKSB7XG5cdCAgICByZXR1cm4gXCJ0YWI9XCIgKyBkMy5zZWxlY3QoXCIucGFuZWwtdG9wLWJ0bi5hY3RpdmVcIikuYXR0cihcImRhdGEtYWN0aXZlXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlQWN0aXZlR3JhcGhUYWJTdHJpbmcoKSB7XG5cdCAgICByZXR1cm4gXCJncmFwaD1cIiArIGQzLnNlbGVjdChcIi5ncmFwaC10eXBlLWJ0bi5hY3RpdmVcIikuYXR0cihcImRhdGEtdHlwZVwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGFyc2VTaGFyZVVybCgpIHtcblx0ICAgIHZhciBwYXJhbXMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xuXHQgICAgaWYgKHBhcmFtcyA9PT0gXCJcIikgcmV0dXJuO1xuXHRcblx0ICAgIHBhcmFtcyA9IGdldFBhcmFtc0FycmF5KHBhcmFtcyk7XG5cdCAgICBwYXJhbXMgPSBtYWtlS2V5ZWRQYXJhbXNPYmplY3QocGFyYW1zKTtcblx0XG5cdCAgICBmb3JtYXRQYXJhbXMocGFyYW1zKTtcblx0ICAgIHJldHVybiBwYXJhbXM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldFBhcmFtc0FycmF5KHBhcmFtcykge1xuXHQgICAgcGFyYW1zID0gcGFyYW1zLnN1YnN0cmluZygxKTtcblx0ICAgIHBhcmFtcyA9IHVubWFuZ2xlUGFyYW1TdHJpbmcocGFyYW1zKTtcblx0ICAgIHJldHVybiBwYXJhbXMuc3BsaXQoXCImXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYW5nbGVQYXJhbVN0cmluZyh1cmwpIHtcblx0ICAgIHJldHVybiB1cmwucmVwbGFjZSgvXFw6L2csIFwiJTNBXCIpLnJlcGxhY2UoL1xcOy9nLCBcIiUzQlwiKS5yZXBsYWNlKC9cXC8vZywgXCIlMkZcIikucmVwbGFjZSgvXFwsL2csIFwiJTJDXCIpLnJlcGxhY2UoL1xcJi9nLCBcIiUyNlwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdW5tYW5nbGVQYXJhbVN0cmluZyhwYXJhbXMpIHtcblx0ICAgIHJldHVybiBwYXJhbXMucmVwbGFjZSgvXFwlMltjfENdL2csIFwiLFwiKS5yZXBsYWNlKC9cXCUzW2J8Ql0vZywgXCI7XCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlS2V5ZWRQYXJhbXNPYmplY3QocGFyYW1zQXJyKSB7XG5cdCAgICB2YXIgcGFyc2VkUGFyYW1zID0ge307XG5cdCAgICB2YXIgcGFyYW1QYWlyO1xuXHQgICAgdmFyIGk7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IHBhcmFtc0Fyci5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHBhcmFtUGFpciA9IHBhcmFtc0FycltpXS5zcGxpdChcIj1cIik7XG5cdCAgICAgICAgcGFyc2VkUGFyYW1zW3BhcmFtUGFpclswXV0gPSBwYXJhbVBhaXJbMV07XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHBhcnNlZFBhcmFtcztcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0UGFyYW1zKHBhcmFtcykge1xuXHQgICAgaWYgKHBhcmFtcy5jZW50ZXIpIHBhcmFtcy5jZW50ZXIgPSBmb3JtYXRDZW50ZXJQYXJhbShwYXJhbXMuY2VudGVyKTtcblx0ICAgIGlmIChwYXJhbXMubGF5ZXJzKSBwYXJhbXMubGF5ZXJzID0gZm9ybWF0TGF5ZXJQYXJhbShwYXJhbXMubGF5ZXJzKTtcblx0ICAgIGlmIChwYXJhbXMuYmFzZWxheWVycykgcGFyYW1zLmJhc2VsYXllcnMgPSBmb3JtYXRCYXNlTGF5ZXJQYXJhbShwYXJhbXMuYmFzZWxheWVycyk7XG5cdCAgICBpZiAocGFyYW1zLnBvaXMpIHBhcmFtcy5wb2lzID0gZm9ybWF0UG9pbnRzT2ZJbnRlcmVzdFBhcmFtKHBhcmFtcy5wb2lzKTtcblx0ICAgIGlmIChwYXJhbXMubGF5ZXJHcm91cHMpIHBhcmFtcy5sYXllckdyb3VwcyA9IGZvcm1hdExheWVyR3JvdXBzUGFyYW0ocGFyYW1zLmxheWVyR3JvdXBzKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0Q2VudGVyUGFyYW0oY2VudGVyKSB7XG5cdCAgICByZXR1cm4gY2VudGVyLnNwbGl0KFwiLFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0TGF5ZXJQYXJhbShsYXllcnMpIHtcblx0ICAgIHZhciBmb3JtYXR0ZWRMYXllcnMgPSB7XG5cdCAgICAgICAgXCJlbmFibGVkTGF5ZXJzXCI6IFtdLFxuXHQgICAgICAgIFwib3BhY2l0eVZhbHNcIjoge31cblx0ICAgIH07XG5cdCAgICB2YXIgbGF5ZXJJZDtcblx0ICAgIHZhciBpO1xuXHRcblx0ICAgIGxheWVycyA9IGxheWVycy5zcGxpdChcIixcIik7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGF5ZXJzLmxlbmd0aDsgaSA9IGkgKyAyKSB7XG5cdCAgICAgICAgbGF5ZXJJZCA9IGxheWVyc1tpXTtcblx0ICAgICAgICBmb3JtYXR0ZWRMYXllcnMuZW5hYmxlZExheWVycy5wdXNoKGxheWVySWQpO1xuXHQgICAgICAgIGZvcm1hdHRlZExheWVycy5vcGFjaXR5VmFsc1tsYXllcklkXSA9IGxheWVyc1tpICsgMV07XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGZvcm1hdHRlZExheWVycztcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0QmFzZUxheWVyUGFyYW0oYmFzZWxheWVycykge1xuXHQgICAgcmV0dXJuIGJhc2VsYXllcnMuc3BsaXQoXCIsXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRQb2ludHNPZkludGVyZXN0UGFyYW0ocG9pcykge1xuXHQgICAgcmV0dXJuIHBvaXMuc3BsaXQoJzsnKS5maWx0ZXIoZnVuY3Rpb24gKHN0cikge1xuXHQgICAgICAgIHJldHVybiBzdHIgIT09ICcnO1xuXHQgICAgfSkubWFwKGZ1bmN0aW9uIChwb2kpIHtcblx0ICAgICAgICBwb2kgPSBwb2kuc3BsaXQoJywnKTtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICBsYXQ6IHBvaVswXSxcblx0ICAgICAgICAgICAgbG5nOiBwb2lbMV1cblx0ICAgICAgICB9O1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdExheWVyR3JvdXBzUGFyYW0obGF5ZXJHcm91cFNldHRpbmdzKSB7XG5cdCAgICByZXR1cm4gbGF5ZXJHcm91cFNldHRpbmdzLnNwbGl0KCcsJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZExheWVyR3JvdXBTZXR0aW5nc1RvQ29uZmlnKGFjdGl2ZUxheWVyR3JvdXBJZHMsIGNvbmZpZykge1xuXHQgICAgY29uZmlnLmxheW91dFsnbGF5ZXItZ3JvdXBzLW9yZGVyJ10uZm9yRWFjaChmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgIC8vIHNldCBsYXllciBncm91cCB0byBhY3RpdmUgaWYgaXRzIGlkIGFwcGVhcnMgaW4gdGhlIHNoYXJlIHVybCBzZXR0aW5nc1xuXHQgICAgICAgIGxheWVyR3JvdXAuYWN0aXZlID0gYWN0aXZlTGF5ZXJHcm91cElkcy5maWx0ZXIoZnVuY3Rpb24gKGlkKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBpZCA9PT0gbGF5ZXJHcm91cC5pZDtcblx0ICAgICAgICB9KS5sZW5ndGggPiAwO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZUxheWVyU2V0dGluZ3MsIGNvbmZpZykge1xuXHQgICAgdmFyIGVuYWJsZWRMYXllcnMgPSBzaGFyZUxheWVyU2V0dGluZ3MuZW5hYmxlZExheWVycztcblx0ICAgIGNvbmZpZ1tcImFjdGl2ZS1sYXllcnNcIl0gPSBlbmFibGVkTGF5ZXJzO1xuXHRcblx0ICAgIHZhciBpLCBqLCBwcm9wLCBsYXllcmdyb3VwO1xuXHQgICAgdmFyIGVuYWJsZWRMYXllcjtcblx0ICAgIHZhciBmb3VuZExheWVyO1xuXHQgICAgdmFyIGxheWVycyA9IGNvbmZpZy5sYXllcnM7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGVuYWJsZWRMYXllcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBmb3VuZExheWVyID0gZmFsc2U7XG5cdCAgICAgICAgZW5hYmxlZExheWVyID0gZW5hYmxlZExheWVyc1tpXTtcblx0ICAgICAgICBmb3IgKHByb3AgaW4gbGF5ZXJzKSB7XG5cdCAgICAgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG5cdCAgICAgICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XG5cdCAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsYXllcmdyb3VwLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZW5hYmxlZExheWVyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgbGF5ZXJncm91cFtqXS5vcGFjaXR5ID0gc2hhcmVMYXllclNldHRpbmdzLm9wYWNpdHlWYWxzW2VuYWJsZWRMYXllcl07XG5cdCAgICAgICAgICAgICAgICAgICAgZm91bmRMYXllciA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkQmFzZUxheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZUJhc2VMYXllclNldHRpbmdzLCBjb25maWcpIHtcblx0ICAgIHZhciBiYXNlbGF5ZXJzID0gY29uZmlnLmJhc2VsYXllcnM7XG5cdCAgICB2YXIgYmFzZWxheWVyO1xuXHQgICAgdmFyIGk7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGJhc2VsYXllcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBiYXNlbGF5ZXIgPSBiYXNlbGF5ZXJzW2ldO1xuXHQgICAgICAgIGJhc2VsYXllci5hY3RpdmUgPSBzaGFyZUJhc2VMYXllclNldHRpbmdzLmluZGV4T2YoYmFzZWxheWVyLmlkKSAhPT0gLTEgPyB0cnVlIDogZmFsc2U7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZFBvaW50c09mSW50ZXJlc3RUb0NvbmZpZyhwb2lzLCBjb25maWcpIHtcblx0ICAgIGNvbmZpZ1tcInBvaXNcIl0gPSBwb2lzO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkJBU0VfTEFZRVJfVFlQRSA9IHVuZGVmaW5lZDtcblx0ZXhwb3J0cy5DcmVhdGVCYXNlTGF5ZXJzID0gQ3JlYXRlQmFzZUxheWVycztcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHR2YXIgQkFTRV9MQVlFUl9UWVBFID0gZXhwb3J0cy5CQVNFX0xBWUVSX1RZUEUgPSBcImJhc2VsYXllclwiO1xuXHRcblx0dmFyIF9iYXNlbGF5ZXJzO1xuXHRcblx0ZnVuY3Rpb24gQ3JlYXRlQmFzZUxheWVycyhtYXAsIGxheWVyQ29uZmlnKSB7XG5cdCAgICBsYXllckNvbmZpZyA9IGxheWVyQ29uZmlnIHx8IFt7XG5cdCAgICAgICAgXCJpZFwiOiBcImNhcnRvLWxpZ2h0LWRlZmF1bHRcIixcblx0ICAgICAgICBcInVybFwiOiBcImh0dHA6Ly97c30uYmFzZW1hcHMuY2FydG9jZG4uY29tL2xpZ2h0X2FsbC97en0ve3h9L3t5fS5wbmdcIixcblx0ICAgICAgICBcImF0dHJpYnV0aW9uXCI6ICcmY29weTsgPGEgaHJlZj1cImh0dHA6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzLCAmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vY2FydG8uY29tL2F0dHJpYnV0aW9uc1wiPkNBUlRPPC9hPidcblx0ICAgIH1dO1xuXHRcblx0ICAgIF9iYXNlbGF5ZXJzID0gbGF5ZXJDb25maWc7XG5cdCAgICB2YXIgaTtcblx0ICAgIHZhciBiYXNlTGF5ZXI7XG5cdCAgICB2YXIgY29uZmlnO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsYXllckNvbmZpZy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGNvbmZpZyA9IGxheWVyQ29uZmlnW2ldO1xuXHRcblx0ICAgICAgICBpZiAoIWNvbmZpZy5hY3RpdmUpIGNvbnRpbnVlO1xuXHQgICAgICAgIGJhc2VMYXllciA9IGNyZWF0ZUJhc2VMYXllcihjb25maWcpO1xuXHQgICAgICAgIGNvbmZpZy5sYXllciA9IGJhc2VMYXllcjtcblx0ICAgICAgICBiYXNlTGF5ZXIuYWRkVG8obWFwKTtcblx0ICAgIH1cblx0XG5cdCAgICBjcmVhdGVCYXNlTGF5ZXJVSShsYXllckNvbmZpZyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUJhc2VMYXllclVJKGNvbmZpZykge1xuXHQgICAgdmFyIGJhc2VVSSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICBiYXNlVUkuY2xhc3NOYW1lID0gXCJiYXNlbGF5ZXItdWlcIjtcblx0ICAgIHZhciBiYXNlV3JhcHBlcjtcblx0ICAgIHZhciBiYXNlSW1nO1xuXHQgICAgdmFyIGJhc2VMYWJlbDtcblx0XG5cdCAgICB2YXIgbGF5ZXI7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbmZpZy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBsYXllciA9IGNvbmZpZ1tpXTtcblx0ICAgICAgICBpZiAoIWxheWVyLmhhc093blByb3BlcnR5KFwiaW1hZ2VcIikpIGNvbnRpbnVlO1xuXHRcblx0ICAgICAgICBiYXNlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICAgICAgYmFzZVdyYXBwZXIuc2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiLCBsYXllci5pZCk7XG5cdCAgICAgICAgYmFzZUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG5cdCAgICAgICAgYmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbGF5ZXIuaW1hZ2UpO1xuXHQgICAgICAgIGJhc2VJbWcuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGxheWVyLmxhYmVsKTtcblx0ICAgICAgICBiYXNlSW1nLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIGxheWVyLmxhYmVsKTtcblx0ICAgICAgICBiYXNlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHQgICAgICAgIGJhc2VMYWJlbC50ZXh0Q29udGVudCA9IGxheWVyLmxhYmVsO1xuXHQgICAgICAgIGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VJbWcpO1xuXHQgICAgICAgIGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VMYWJlbCk7XG5cdCAgICAgICAgYmFzZVdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUJhc2VDbGljayk7XG5cdFxuXHQgICAgICAgIGQzLnNlbGVjdChiYXNlV3JhcHBlcikuY2xhc3NlZChcImJhc2Utc2VsZWN0b3JcIiwgdHJ1ZSkuY2xhc3NlZChcImFjdGl2ZVwiLCBsYXllci5hY3RpdmUpO1xuXHRcblx0ICAgICAgICBiYXNlVUkuYXBwZW5kQ2hpbGQoYmFzZVdyYXBwZXIpO1xuXHQgICAgfVxuXHRcblx0ICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJsZWFmbGV0LWJvdHRvbSBsZWFmbGV0LWxlZnRcIilbMF0uYXBwZW5kQ2hpbGQoYmFzZVVJKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlQmFzZUNsaWNrKGUpIHtcblx0ICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgICB2YXIgbGF5ZXJpZCA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiKTtcblx0ICAgIHRvZ2dsZUFjdGl2ZUJhc2VVSSh0aGlzKTtcblx0ICAgIHJlbW92ZUN1cnJlbnRCYXNlTGF5ZXIoKTtcblx0ICAgIGFkZE5ld0Jhc2VMYXllclRvTWFwKGxheWVyaWQpO1xuXHRcblx0ICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBjaGFuZ2VpbmcgYmFzZSBsYXllclxuXHQgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXG5cdCAgICAgICAgZXZlbnRBY3Rpb246ICdjaGFuZ2UgYmFzZSBsYXllcicsXG5cdCAgICAgICAgZXZlbnRMYWJlbDogbGF5ZXJpZCxcblx0ICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgIH0pO1xuXHRcblx0ICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvZ2dsZUFjdGl2ZUJhc2VVSShiYXNlVUlFbGVtKSB7XG5cdCAgICBkMy5zZWxlY3QoXCIuYmFzZS1zZWxlY3Rvci5hY3RpdmVcIikuY2xhc3NlZChcImFjdGl2ZVwiLCBmYWxzZSk7XG5cdCAgICBkMy5zZWxlY3QoYmFzZVVJRWxlbSkuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlQ3VycmVudEJhc2VMYXllcigpIHtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHQgICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICBpZiAobGF5ZXIub3B0aW9ucy50eXBlICE9PSBCQVNFX0xBWUVSX1RZUEUpIHJldHVybjtcblx0ICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobGF5ZXIpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZE5ld0Jhc2VMYXllclRvTWFwKGxheWVyaWQpIHtcblx0ICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdFxuXHQgICAgdmFyIGxheWVyO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBfYmFzZWxheWVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBsYXllciA9IF9iYXNlbGF5ZXJzW2ldO1xuXHQgICAgICAgIGlmIChsYXllci5pZCAhPT0gbGF5ZXJpZCkgY29udGludWU7XG5cdCAgICAgICAgaWYgKCFsYXllci5sYXllcikgbGF5ZXIubGF5ZXIgPSBjcmVhdGVCYXNlTGF5ZXIobGF5ZXIpO1xuXHQgICAgICAgIGxheWVyLmxheWVyLmFkZFRvKG1hcCk7XG5cdCAgICAgICAgbGF5ZXIubGF5ZXIuYnJpbmdUb0JhY2soKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQmFzZUxheWVyKGxheWVyQ29uZmlnKSB7XG5cdCAgICByZXR1cm4gTC50aWxlTGF5ZXIobGF5ZXJDb25maWcudXJsLCBtYWtlQmFzZUxheWVyT3B0aW9ucyhsYXllckNvbmZpZykpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlQmFzZUxheWVyT3B0aW9ucyhjb25maWcpIHtcblx0ICAgIHZhciBvcHRpb25zID0ge307XG5cdCAgICBpZiAoY29uZmlnLmlkKSBvcHRpb25zLmlkID0gY29uZmlnLmlkO1xuXHQgICAgaWYgKGNvbmZpZy5hdHRyaWJ1dGlvbikgb3B0aW9ucy5hdHRyaWJ1dGlvbiA9IGNvbmZpZy5hdHRyaWJ1dGlvbjtcblx0ICAgIGlmIChjb25maWcuc3ViZG9tYWlucykgb3B0aW9ucy5zdWJkb21haW5zID0gY29uZmlnLnN1YmRvbWFpbnM7XG5cdCAgICBvcHRpb25zLnR5cGUgPSBCQVNFX0xBWUVSX1RZUEU7XG5cdFxuXHQgICAgcmV0dXJuIG9wdGlvbnM7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkdldEFsbFBvaW50c09mSW50ZXJlc3QgPSBHZXRBbGxQb2ludHNPZkludGVyZXN0O1xuXHRleHBvcnRzLkFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlciA9IEFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlcjtcblx0ZXhwb3J0cy5TZXR1cFBvaW50c09mSW50ZXJlc3QgPSBTZXR1cFBvaW50c09mSW50ZXJlc3Q7XG5cdGV4cG9ydHMuQWRkTXVsdGlwbGVQb2ludHNPZkludGVyZXN0ID0gQWRkTXVsdGlwbGVQb2ludHNPZkludGVyZXN0O1xuXHRleHBvcnRzLlJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyID0gUmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXI7XG5cdGV4cG9ydHMuU2V0dXBQb2ludE9mSW50ZXJlc3RVSSA9IFNldHVwUG9pbnRPZkludGVyZXN0VUk7XG5cdGV4cG9ydHMuUmVtb3ZlUG9pbnRPZkludGVyZXN0VUkgPSBSZW1vdmVQb2ludE9mSW50ZXJlc3RVSTtcblx0XG5cdHZhciBfZ3JhcGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX3RhYnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0XG5cdHZhciBfcG9pbnRzX29mX2ludGVyZXN0ID0gW107XG5cdFxuXHRmdW5jdGlvbiBHZXRBbGxQb2ludHNPZkludGVyZXN0KCkge1xuXHQgICAgcmV0dXJuIF9wb2ludHNfb2ZfaW50ZXJlc3Q7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEFkZFBvaW50T2ZJbnRlcmVzdFRvVHJhY2tlcihsYXQsIGxuZykge1xuXHQgICAgdmFyIHBvaSA9IHtcblx0ICAgICAgICBsYXQ6IGxhdCxcblx0ICAgICAgICBsbmc6IGxuZ1xuXHQgICAgfTtcblx0ICAgIF9wb2ludHNfb2ZfaW50ZXJlc3QucHVzaChwb2kpO1xuXHQgICAgcmV0dXJuIHBvaTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gU2V0dXBQb2ludHNPZkludGVyZXN0KG1hcCwgbmV3UG9pcykge1xuXHQgICAgQWRkTXVsdGlwbGVQb2ludHNPZkludGVyZXN0KG5ld1BvaXMpO1xuXHQgICAgdmFyIHBvaXMgPSBHZXRBbGxQb2ludHNPZkludGVyZXN0KCk7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHQgICAgcG9pcy5mb3JFYWNoKGZ1bmN0aW9uIChwb2kpIHtcblx0ICAgICAgICBTZXR1cFBvaW50T2ZJbnRlcmVzdFVJKG1hcCwgcG9pKTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBBZGRNdWx0aXBsZVBvaW50c09mSW50ZXJlc3QocG9pcykge1xuXHQgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoX3BvaW50c19vZl9pbnRlcmVzdCwgcG9pcyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyKHBvaVRvUmVtb3ZlKSB7XG5cdCAgICBfcG9pbnRzX29mX2ludGVyZXN0ID0gX3BvaW50c19vZl9pbnRlcmVzdC5maWx0ZXIoZnVuY3Rpb24gKHBvaSkge1xuXHQgICAgICAgIHJldHVybiAhKHBvaSA9PT0gcG9pVG9SZW1vdmUpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFNldHVwUG9pbnRPZkludGVyZXN0VUkobWFwLCBwb2kpIHtcblx0ICAgIHZhciBkaXYgPSAoMCwgX2dyYXBoLmNyZWF0ZUdyYXBoRGl2KShwb2kpO1xuXHQgICAgdmFyIG1hcmtlciA9ICgwLCBfZ3JhcGguY3JlYXRlTWFya2VyKShtYXAsIHBvaS5sYXQsIHBvaS5sbmcpO1xuXHQgICAgcG9pLmdyYXBoRGl2ID0gZGl2O1xuXHQgICAgcG9pLm1hcmtlciA9IG1hcmtlcjtcblx0ICAgIG1hcmtlci5hZGRUbyhtYXApO1xuXHQgICAgKDAsIF9ncmFwaC5jcmVhdGVHcmFwaFJlbW92ZXIpKG1hcCwgZGl2LCBtYXJrZXIsIHBvaSk7XG5cdFxuXHQgICAgZDMuc2VsZWN0KGRpdikub24oXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgbWFya2VyLnNldEljb24oKDAsIF9ncmFwaC5nZXRJY29uKSgnaG92ZXInKSk7XG5cdCAgICB9KTtcblx0ICAgIGQzLnNlbGVjdChkaXYpLm9uKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgbWFya2VyLnNldEljb24oKDAsIF9ncmFwaC5nZXRJY29uKSgnZ3JhcGgnKSk7XG5cdCAgICB9KTtcblx0ICAgIG1hcmtlci5vbignY2xpY2sgZGJsY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIGhhbmRsZU1hcmtlck1vdXNlRXZlbnQoZSwgcG9pKTtcblx0ICAgIH0pO1xuXHQgICAgbWFya2VyLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIG1hcmtlci5zZXRJY29uKCgwLCBfZ3JhcGguZ2V0SWNvbikoJ2hvdmVyJykpO1xuXHQgICAgfSk7XG5cdCAgICBtYXJrZXIub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICBtYXJrZXIuc2V0SWNvbigoMCwgX2dyYXBoLmdldEljb24pKCdncmFwaCcpKTtcblx0ICAgICAgICBwb2kuZ3JhcGhEaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncGFuLXRvLW1hcmtlci1idG4nKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRlJyk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlTWFya2VyTW91c2VFdmVudChlLCBwb2kpIHtcblx0ICAgIGUub3JpZ2luYWxFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0ICAgICgwLCBfdGFicy5IYW5kbGVUYWJDaGFuZ2UpKCdncmFwaHMtYWN0aXZlJyk7XG5cdCAgICBzY3JvbGxUb1BvaW50T2ZJbnRlcmVzdEdyYXBoKHBvaSk7XG5cdCAgICB0cmlnZ2VyR3JhcGhBbmltYXRpb24ocG9pKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdHJpZ2dlckdyYXBoQW5pbWF0aW9uKHBvaSkge1xuXHQgICAgcG9pLmdyYXBoRGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Bhbi10by1tYXJrZXItYnRuJylbMF0uY2xhc3NMaXN0LmFkZCgnYW5pbWF0ZScpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzY3JvbGxUb1BvaW50T2ZJbnRlcmVzdEdyYXBoKHBvaSkge1xuXHQgICAgdmFyIHJpZ2h0UGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKTtcblx0ICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwtaGVhZGVyJyk7XG5cdCAgICB2YXIgZ3JhcGhUeXBlSGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyYXBoLXR5cGUtaGVhZGVyJyk7XG5cdCAgICByaWdodFBhbmVsLnNjcm9sbFRvcCA9IHBvaS5ncmFwaERpdi5vZmZzZXRUb3A7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIFJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJKG1hcCwgZGl2LCBtYXJrZXIpIHtcblx0ICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyYXBoLWxpc3QnKTtcblx0ICAgIGxpc3QucmVtb3ZlQ2hpbGQoZGl2KTtcblx0ICAgIG1hcC5yZW1vdmVMYXllcihtYXJrZXIpO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuU2V0dXBHcmFwaHMgPSBTZXR1cEdyYXBocztcblx0ZXhwb3J0cy5CaW5kR3JhcGhFdmVudHMgPSBCaW5kR3JhcGhFdmVudHM7XG5cdGV4cG9ydHMuZ2V0SWNvbiA9IGdldEljb247XG5cdGV4cG9ydHMuY3JlYXRlTWFya2VyID0gY3JlYXRlTWFya2VyO1xuXHRleHBvcnRzLmNyZWF0ZUdyYXBoUmVtb3ZlciA9IGNyZWF0ZUdyYXBoUmVtb3Zlcjtcblx0ZXhwb3J0cy5IYW5kbGVHcmFwaFRhYkNoYW5nZSA9IEhhbmRsZUdyYXBoVGFiQ2hhbmdlO1xuXHRleHBvcnRzLmNyZWF0ZUdyYXBoRGl2ID0gY3JlYXRlR3JhcGhEaXY7XG5cdFxuXHR2YXIgX3BvaSA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHRcblx0dmFyIF9wYW5lbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHRcblx0dmFyIF9zaGFyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0dmFyIF9tYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI0KTtcblx0XG5cdHZhciBfcGFyc2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciB0aXAgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIGdldEdyYXBoVGlwKCkge1xuXHQgICAgcmV0dXJuIHRpcDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gU2V0dXBHcmFwaHMoKSB7XG5cdCAgICBkMy5zZWxlY3RBbGwoXCIuZ3JhcGgtdHlwZS1idG5cIikub24oXCJjbGlja1wiLCBoYW5kbGVHcmFwaFR5cGVCdG5DbGljayk7XG5cdCAgICBleHRlbmREYXRlTW9kdWxlKCk7XG5cdCAgICB0aXAgPSBkMy50aXAoKS5hdHRyKCdjbGFzcycsICdkMy10aXAnKS5odG1sKGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIGQ7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZXh0ZW5kRGF0ZU1vZHVsZSgpIHtcblx0ICAgIERhdGUucHJvdG90eXBlLmlzTGVhcFllYXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIHllYXIgPSB0aGlzLmdldEZ1bGxZZWFyKCk7XG5cdCAgICAgICAgaWYgKCh5ZWFyICYgMykgIT0gMCkgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIHJldHVybiB5ZWFyICUgMTAwICE9IDAgfHwgeWVhciAlIDQwMCA9PSAwO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBHZXQgRGF5IG9mIFllYXJcblx0ICAgIERhdGUucHJvdG90eXBlLmdldERPWSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZGF5Q291bnQgPSBbMCwgMzEsIDU5LCA5MCwgMTIwLCAxNTEsIDE4MSwgMjEyLCAyNDMsIDI3MywgMzA0LCAzMzRdO1xuXHQgICAgICAgIHZhciBtbiA9IHRoaXMuZ2V0TW9udGgoKTtcblx0ICAgICAgICB2YXIgZG4gPSB0aGlzLmdldERhdGUoKTtcblx0ICAgICAgICB2YXIgZGF5T2ZZZWFyID0gZGF5Q291bnRbbW5dICsgZG47XG5cdCAgICAgICAgaWYgKG1uID4gMSAmJiB0aGlzLmlzTGVhcFllYXIoKSkgZGF5T2ZZZWFyKys7XG5cdCAgICAgICAgcmV0dXJuIGRheU9mWWVhcjtcblx0ICAgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEJpbmRHcmFwaEV2ZW50cyhtYXApIHtcblx0ICAgIG1hcC5vbihcImNsaWNrXCIsIGhhbmRsZU1hcENsaWNrKTtcblx0fVxuXHRcblx0dmFyIGJhc2VJY29uID0gTC5JY29uLmV4dGVuZCh7fSk7XG5cdFxuXHR2YXIgZ3JhcGhJY29uID0gbmV3IGJhc2VJY29uKHtcblx0ICAgIGljb25Vcmw6ICdpbWdzL2JsdWVfaWNvbi5wbmcnLFxuXHQgICAgc2hhZG93VXJsOiAnaW1ncy9tYXJrZXJfc2hhZG93LnBuZycsXG5cdCAgICBpY29uU2l6ZTogWzI1LCA0MV0sXG5cdCAgICBpY29uQW5jaG9yOiBbMTIsIDQxXSxcblx0ICAgIHBvcHVwQW5jaG9yOiBbMSwgLTM0XSxcblx0ICAgIHNoYWRvd1NpemU6IFs0MSwgNDFdXG5cdH0pO1xuXHRcblx0dmFyIGhvdmVySWNvbiA9IG5ldyBiYXNlSWNvbih7XG5cdCAgICBpY29uVXJsOiAnaW1ncy9vcmFuZ2VfaWNvbi5wbmcnLFxuXHQgICAgc2hhZG93VXJsOiAnaW1ncy9tYXJrZXJfc2hhZG93LnBuZycsXG5cdCAgICBpY29uU2l6ZTogWzI1LCA0MV0sXG5cdCAgICBpY29uQW5jaG9yOiBbMTIsIDQxXSxcblx0ICAgIHBvcHVwQW5jaG9yOiBbMSwgLTM0XSxcblx0ICAgIHNoYWRvd1NpemU6IFs0MSwgNDFdXG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gZ2V0SWNvbih0eXBlKSB7XG5cdCAgICByZXR1cm4gdHlwZSA9PT0gJ2hvdmVyJyA/IGhvdmVySWNvbiA6IGdyYXBoSWNvbjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlTWFwQ2xpY2soZSkge1xuXHQgICAgdmFyIG1hcCA9IHRoaXM7XG5cdCAgICB2YXIgbGF0ID0gZS5sYXRsbmcubGF0O1xuXHQgICAgdmFyIGxuZyA9IGUubGF0bG5nLmxuZztcblx0XG5cdCAgICB2YXIgcG9pID0gKDAsIF9wb2kuQWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyKShsYXQsIGxuZyk7XG5cdCAgICAoMCwgX3BvaS5TZXR1cFBvaW50T2ZJbnRlcmVzdFVJKShtYXAsIHBvaSwgaG92ZXJJY29uLCBncmFwaEljb24pO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0XG5cdCAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBldmVudCBjbGljayBvbiBtYXBcblx0ICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuXHQgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHQgICAgICAgIGV2ZW50TGFiZWw6ICdhZGQgcG9pbnQnLFxuXHQgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZU1hcmtlcihtYXAsIGxhdCwgbG5nKSB7XG5cdCAgICByZXR1cm4gTC5tYXJrZXIoW2xhdCwgbG5nXSwgeyBpY29uOiBncmFwaEljb24gfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUdyYXBoUmVtb3ZlcihtYXAsIGRpdiwgbWFya2VyLCBwb2kpIHtcblx0ICAgIHZhciBlbGVtID0gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSgpO1xuXHQgICAgZGl2LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC1lbGVtLWhlYWRlclwiKVswXS5hcHBlbmRDaGlsZChlbGVtKTtcblx0ICAgIGQzLnNlbGVjdChlbGVtKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcblx0XG5cdCAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgcmVtb3ZlIGdyYXBoXG5cdCAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXG5cdCAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiAncmVtb3ZlJyxcblx0ICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICgwLCBfcG9pLlJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyKShwb2kpO1xuXHQgICAgICAgICgwLCBfcG9pLlJlbW92ZVBvaW50T2ZJbnRlcmVzdFVJKShtYXAsIGRpdiwgbWFya2VyKTtcblx0ICAgICAgICAoMCwgX3BhbmVsLnVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQpKCk7XG5cdCAgICAgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVHcmFwaFJlbW92ZXJFbGVtKCkge1xuXHQgICAgdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuXHQgICAgZWxlbS5jbGFzc05hbWUgPSBcInJlbW92ZS1ncmFwaFwiO1xuXHQgICAgZWxlbS5pbm5lclRleHQgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKFwiMTAwMDVcIik7XG5cdCAgICBlbGVtLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIFwiUmVtb3ZlIGdyYXBoXCIpO1xuXHQgICAgcmV0dXJuIGVsZW07XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggREFUQSBQUk9DRVNTSU5HIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIHNlbmRSZXF1ZXN0KHJlcXVlc3QsIHVybCkge1xuXHQgICAgcmVxdWVzdC5vcGVuKCdHRVQnLCB1cmwpO1xuXHQgICAgcmVxdWVzdC5zZW5kKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZUdyYXBoRGF0YVJlc3BvbnNlKGRpdiwgbGF0LCBsbmcsIHJlc3BvbnNlKSB7XG5cdCAgICByZXNwb25zZSA9IHJlc3BvbnNlLnJlcGxhY2UoL1xcW3xcXF18XFwnL2csIFwiXCIpLnNwbGl0KFwiLCBcIik7XG5cdCAgICBkcmF3R3JhcGgocmVzcG9uc2UsIGRpdiwgbGF0LCBsbmcpO1xuXHQgICAgKDAsIF9wYW5lbC51cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0KSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXREYXRhKGxhdCwgbG5nLCBkaXYpIHtcblx0ICAgIHZhciB1cmwgPSBcImh0dHBzOi8vZmNhdi1uZHZpLm5lbWFjLm9yZy9sYW5kZGF0X3Byb2R1Y3QuY2dpP2FyZ3M9XCIgKyBsbmcgKyBcIixcIiArIGxhdDtcblx0ICAgIHZhciBvUmVxID0gKDAsIF9wYXJzZXIuR2V0QWpheE9iamVjdCkoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdCAgICAgICAgaGFuZGxlR3JhcGhEYXRhUmVzcG9uc2UoZGl2LCBsYXQsIGxuZywgcmVzcG9uc2UpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgb1JlcS5vcGVuKFwiR0VUXCIsIHVybCk7XG5cdCAgICBvUmVxLnNlbmQoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc3BsaXREYXRhKGRhdGEpIHtcblx0ICAgIHZhciBpO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBkYXRhW2ldID0gZGF0YVtpXS5zcGxpdChcIixcIik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZGF0YTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVwcm9jZXNzRGF0YShvcmlnZGF0YSkge1xuXHQgICAgdmFyIGV4cGVjdGVkWWVhckxlbmd0aCA9IDQ2O1xuXHQgICAgdmFyIGRhdGEgPSB7fTtcblx0ICAgIHZhciBwb2ludDtcblx0ICAgIHZhciBrZXk7XG5cdCAgICB2YXIgaSwgajtcblx0XG5cdCAgICBkYXRhW1wia2V5c1wiXSA9IFtdO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IG9yaWdkYXRhLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgcG9pbnQgPSBvcmlnZGF0YVtpXTtcblx0ICAgICAgICBrZXkgPSBwb2ludFswXS5zdWJzdHJpbmcoMCwgNCk7XG5cdCAgICAgICAgaWYgKCFkYXRhLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgICAgICAgZGF0YVtrZXldID0gW107XG5cdCAgICAgICAgICAgIGRhdGFbXCJrZXlzXCJdLnB1c2goa2V5KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZGF0YVtrZXldLnB1c2gocG9pbnQpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBrZXlzVG9CZURlbGV0ZWQgPSBbXTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmtleXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBrZXkgPSBkYXRhLmtleXNbaV07XG5cdCAgICAgICAgaWYgKGRhdGFba2V5XS5sZW5ndGggIT09IGV4cGVjdGVkWWVhckxlbmd0aCkge1xuXHQgICAgICAgICAgICBrZXlzVG9CZURlbGV0ZWQucHVzaChrZXkpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwga2V5c1RvQmVEZWxldGVkLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAga2V5ID0ga2V5c1RvQmVEZWxldGVkW2ldO1xuXHQgICAgICAgIGRlbGV0ZSBkYXRhW2tleV07XG5cdCAgICAgICAgZGF0YS5rZXlzLnNwbGljZShkYXRhLmtleXMuaW5kZXhPZihrZXkpLCAxKTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZGF0YUZvck1lZGlhbnM7XG5cdCAgICB2YXIgbWVkaWFuO1xuXHQgICAgZGF0YVtcIm1lZGlhbnNcIl0gPSBbXTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBleHBlY3RlZFllYXJMZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGRhdGFGb3JNZWRpYW5zID0gW107XG5cdCAgICAgICAgZm9yIChqID0gaTsgaiA8IG9yaWdkYXRhLmxlbmd0aDsgaiArPSBleHBlY3RlZFllYXJMZW5ndGgpIHtcblx0ICAgICAgICAgICAgZGF0YUZvck1lZGlhbnMucHVzaChvcmlnZGF0YVtqXVsxXSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBtZWRpYW4gPSBkYXRhRm9yTWVkaWFucy5zb3J0KClbTWF0aC5mbG9vcihkYXRhRm9yTWVkaWFucy5sZW5ndGggLyAyKV07XG5cdCAgICAgICAgZGF0YVtcIm1lZGlhbnNcIl0ucHVzaChtZWRpYW4pO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBkYXRhO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIElOVEVSRkFDRSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrKCkge1xuXHQgICAgdmFyIHR5cGUgPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJyk7XG5cdCAgICB2YXIgYWN0aXZlVHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF0uZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKTtcblx0XG5cdCAgICBpZiAodHlwZSA9PT0gYWN0aXZlVHlwZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBjbGljayBvbiBncmFwaCB0eXBlXG5cdCAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGggdHlwZScsXG5cdCAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdCAgICAgICAgZXZlbnRMYWJlbDogdHlwZSxcblx0ICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgIH0pO1xuXHRcblx0ICAgIEhhbmRsZUdyYXBoVGFiQ2hhbmdlKHR5cGUsIGFjdGl2ZVR5cGUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBIYW5kbGVHcmFwaFRhYkNoYW5nZShncmFwaFR5cGUpIHtcblx0ICAgIGlmICghaXNHcmFwaExpc3RFbXB0eSgpKSB7XG5cdCAgICAgICAgdmFyIG9sZEFjdGl2ZUdyYXBoRWxlbUhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLWVsZW0nKVswXS5zY3JvbGxIZWlnaHQ7XG5cdCAgICAgICAgdmFyIG9sZEFjdGl2ZUdyYXBoSW5mb0hlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLXR5cGUtaW5mbyBhY3RpdmUnKVswXS5zY3JvbGxIZWlnaHQ7XG5cdCAgICAgICAgdmFyIHJpZ2h0UGFuZWxTY3JvbGxUb3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKS5zY3JvbGxUb3A7XG5cdCAgICB9XG5cdCAgICBkaXNhYmxlQWN0aXZlR3JhcGhUYWIoKTtcblx0ICAgIGVuYWJsZUdyYXBoVGFiKGdyYXBoVHlwZSk7XG5cdCAgICBpZiAoIWlzR3JhcGhMaXN0RW1wdHkoKSkgYWRqdXN0U2Nyb2xsUG9zaXRpb24ob2xkQWN0aXZlR3JhcGhJbmZvSGVpZ2h0LCBvbGRBY3RpdmVHcmFwaEVsZW1IZWlnaHQsIHJpZ2h0UGFuZWxTY3JvbGxUb3ApO1xuXHQgICAgKDAsIF9zaGFyZS51cGRhdGVTaGFyZVVybCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNHcmFwaExpc3RFbXB0eSgpIHtcblx0ICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC1lbGVtJylbMF0gPT09IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRqdXN0U2Nyb2xsUG9zaXRpb24ob2xkR3JhcGhJbmZvSGVpZ2h0LCBvbGRHcmFwaEVsZW1IZWlnaHQsIG9sZFJpZ2h0UGFuZWxTY3JvbGxUb3ApIHtcblx0ICAgIHZhciBuZXdHcmFwaEluZm9IZWlnaHQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdncmFwaC10eXBlLWluZm8gYWN0aXZlJylbMF0uc2Nyb2xsSGVpZ2h0O1xuXHQgICAgdmFyIG5ld0dyYXBoRWxlbUhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLWVsZW0nKVswXS5zY3JvbGxIZWlnaHQ7XG5cdFxuXHQgICAgdmFyIG5ld0dyYXBoRWxlbUhlaWdodFNjYWxlID0gbmV3R3JhcGhFbGVtSGVpZ2h0IC8gb2xkR3JhcGhFbGVtSGVpZ2h0O1xuXHQgICAgdmFyIG5ld1JpZ2h0UGFuZWxTY3JvbGxUb3AgPSBuZXdHcmFwaEluZm9IZWlnaHQgKyAob2xkUmlnaHRQYW5lbFNjcm9sbFRvcCAtIG9sZEdyYXBoSW5mb0hlaWdodCkgKiBuZXdHcmFwaEVsZW1IZWlnaHRTY2FsZTtcblx0XG5cdCAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKS5zY3JvbGxUb3AgPSBuZXdSaWdodFBhbmVsU2Nyb2xsVG9wO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkaXNhYmxlQWN0aXZlR3JhcGhUYWIoKSB7XG5cdCAgICB2YXIgYWN0aXZlRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF07XG5cdCAgICB2YXIgYWN0aXZlQ2xhc3MgPSBcImdyYXBoLVwiICsgYWN0aXZlRWxlbS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR5cGVcIik7XG5cdFxuXHQgICAgYWN0aXZlRWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpLmNsYXNzTGlzdC5yZW1vdmUoYWN0aXZlQ2xhc3MpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBlbmFibGVHcmFwaFRhYihncmFwaFR5cGUpIHtcblx0ICAgIGQzLnNlbGVjdChcIi5ncmFwaC10eXBlLWJ0bltkYXRhLXR5cGU9J1wiICsgZ3JhcGhUeXBlICsgXCInXVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpLmNsYXNzTGlzdC5hZGQoXCJncmFwaC1cIiArIGdyYXBoVHlwZSk7XG5cdCAgICBkMy5zZWxlY3RBbGwoJy5ncmFwaC10eXBlLWluZm8nKS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGdyYXBoVHlwZSA9PT0gdGhpcy5pZC5zcGxpdCgnLScpWzBdO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUdyYXBoRGl2KHBvaSkge1xuXHQgICAgdmFyIGRlY2ltYWxQbGFjZXMgPSAzO1xuXHQgICAgdmFyIGxhdFNob3J0ID0gcm91bmRGbG9hdChwb2kubGF0LCBkZWNpbWFsUGxhY2VzKTtcblx0ICAgIHZhciBsbmdTaG9ydCA9IHJvdW5kRmxvYXQocG9pLmxuZywgZGVjaW1hbFBsYWNlcyk7XG5cdCAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblx0ICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaGVhZGVyKTtcblx0ICAgIHZhciB6b29tVG9NYXJrZXJCdXR0b24gPSBtYWtlWm9vbVRvTWFwTWFya2VyQnV0dG9uKHBvaSk7XG5cdCAgICB2YXIgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiTGF0OiBcIiArIGxhdFNob3J0ICsgXCIsIExvbmc6IFwiICsgbG5nU2hvcnQpO1xuXHQgICAgdmFyIGNvbnRlbnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHQgICAgY29udGVudERpdi5jbGFzc05hbWUgPSBcImdyYXBoLWxhdC1sb25cIjtcblx0ICAgIGNvbnRlbnREaXYuYXBwZW5kQ2hpbGQoY29udGVudCk7XG5cdFxuXHQgICAgaGVhZGVyLmFwcGVuZENoaWxkKHpvb21Ub01hcmtlckJ1dHRvbik7XG5cdCAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoY29udGVudERpdik7XG5cdFxuXHQgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtZWxlbVwiKTtcblx0ICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtZWxlbS1oZWFkZXJcIik7XG5cdFxuXHQgICAgZ2V0RGF0YShwb2kubGF0LCBwb2kubG5nLCB3cmFwcGVyKTtcblx0ICAgIHJldHVybiB3cmFwcGVyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlWm9vbVRvTWFwTWFya2VyQnV0dG9uKHBvaSkge1xuXHQgICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG5cdCAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuJyk7XG5cdCAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgncGFuLXRvLW1hcmtlci1idG4nKTtcblx0ICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2hvdyBPbiBNYXBcIjtcblx0ICAgIGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKHBvaSwgZSkge1xuXHQgICAgICAgIHZhciBtYXAgPSAoMCwgX21hcC5HZXRNYXApKCk7XG5cdCAgICAgICAgbWFwLnBhblRvKFtwb2kubGF0LCBwb2kubG5nXSk7XG5cdFxuXHQgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIHNob3cgb24gbWFwXG5cdCAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXG5cdCAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiAne1wic2hvdyBvbiBtYXBcIjp7XCJsYXRcIjonICsgcG9pLmxhdCArICcsXCJsb25nXCI6JyArIHBvaS5sbmcgKyAnfX0nLFxuXHQgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICB9KTtcblx0ICAgIH0uYmluZChidXR0b24sIHBvaSk7XG5cdCAgICByZXR1cm4gYnV0dG9uO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmF3R3JhcGgoZGF0YSwgZGl2LCBsYXQsIGxuZykge1xuXHQgICAgZGF0YSA9IHNwbGl0RGF0YShkYXRhKTtcblx0ICAgIHZhciByZXByb2Nlc3NlZERhdGEgPSByZXByb2Nlc3NEYXRhKGRhdGEpO1xuXHQgICAgbWFrZVVwRG93bkxpbmVHcmFwaChkYXRhLCBkaXYsIHJlcHJvY2Vzc2VkRGF0YVtcIm1lZGlhbnNcIl0pO1xuXHQgICAgbWFrZVVwRG93bk92ZXJsYXBpbmdMaW5lR3JhcGhXaXRoQ2hlY2tib3hlcyhyZXByb2Nlc3NlZERhdGEsIGRpdiwgbGF0LCBsbmcpO1xuXHQgICAgZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzKHJlcHJvY2Vzc2VkRGF0YSwgZGl2LCBsYXQsIGxuZyk7XG5cdCAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKTtcblx0ICAgIGxpc3QuYXBwZW5kQ2hpbGQoZGl2KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcm91bmRGbG9hdChudW1iZXIsIGRlY2ltYWxQbGFjZXMpIHtcblx0ICAgIHJldHVybiBNYXRoLnJvdW5kKG51bWJlciAqIE1hdGgucG93KDEwLCBkZWNpbWFsUGxhY2VzKSkgLyBNYXRoLnBvdygxMCwgZGVjaW1hbFBsYWNlcyk7XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLyBUSU1FU0VSSUVTIExJTkUgR1JBUEggLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIG1ha2VVcERvd25MaW5lR3JhcGgoZGF0YSwgZGl2LCBhdmVyYWdlcykge1xuXHQgICAgLy8gU2V0IHRoZSBkaW1lbnNpb25zIG9mIHRoZSBjYW52YXMgLyBncmFwaFxuXHQgICAgdmFyIG1hcmdpbiA9IHsgdG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyOSB9LFxuXHQgICAgICAgIHdpZHRoID0gNTgwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsXG5cdCAgICAgICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cdFxuXHQgICAgLy8gU2V0IHRoZSByYW5nZXNcblx0ICAgIHZhciB4ID0gZDMuc2NhbGVUaW1lKCkucmFuZ2UoWzAsIHdpZHRoXSkuZG9tYWluKFtwYXJzZURhdGUoZGF0YVswXVswXSksIHBhcnNlRGF0ZShkYXRhW2RhdGEubGVuZ3RoIC0gMV1bMF0pXSk7XG5cdCAgICB2YXIgeSA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodCwgMF0pLmRvbWFpbihbMCwgMTAwXSk7XG5cdFxuXHQgICAgLy8gRGVmaW5lIHRoZSBheGVzXG5cdCAgICB2YXIgeEF4aXMgPSBkMy5heGlzQm90dG9tKHgpLnRpY2tzKDE2KS50aWNrRm9ybWF0KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIGQuZ2V0RnVsbFllYXIoKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciB5QXhpcyA9IGQzLmF4aXNMZWZ0KHkpLnRpY2tzKDYpO1xuXHRcblx0ICAgIC8vIERlZmluZSB0aGUgbGluZVxuXHQgICAgdmFyIHZhbHVlbGluZSA9IGQzLmxpbmUoKS54KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIHgocGFyc2VEYXRlKGRbMF0pKTtcblx0ICAgIH0pLnkoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4geShkWzFdKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KGRpdikuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJ0aW1lc2VyaWVzLWdyYXBoXCIsIHRydWUpO1xuXHRcblx0ICAgIC8vIEFkZHMgdGhlIHN2ZyBjYW52YXNcblx0ICAgIHZhciBzdmcgPSB3cmFwcGVyLmFwcGVuZChcInN2Z1wiKS5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKS5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciB3ID0gd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodDtcblx0ICAgICAgICB2YXIgaCA9IGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tO1xuXHQgICAgICAgIHJldHVybiAnMCAwICcgKyB3ICsgJyAnICsgaDtcblx0ICAgIH0pLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtYXJnaW4ubGVmdCArIFwiLFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKTtcblx0XG5cdCAgICBzdmcuY2FsbCh0aXApO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgdmFsdWVsaW5lIHBhdGguXG5cdCAgICBkcmF3TGluZWFyUGF0aChkYXRhLCB2YWx1ZWxpbmUsIHN2Zyk7XG5cdFxuXHQgICAgLy8gQWRkIHRoZSBYIEF4aXNcblx0ICAgIHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInggYXhpc1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIikuY2FsbCh4QXhpcyk7XG5cdFxuXHQgICAgLy8gQWRkIHRoZSBZIEF4aXNcblx0ICAgIHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInkgYXhpc1wiKS5jYWxsKHlBeGlzKTtcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxyXG5cdCAgICAgKi9cblx0ICAgIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8gT1ZFUkxBUFBJTkcgVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMoZGF0YSwgZGl2LCBsYXQsIGxuZykge1xuXHQgICAgdmFyIHllYXIgPSBcIjIwMTVcIjtcblx0XG5cdCAgICB2YXIgY2hhcnRzID0ge307XG5cdFxuXHQgICAgLy8gU2V0IHRoZSBkaW1lbnNpb25zIG9mIHRoZSBjYW52YXMgLyBncmFwaFxuXHQgICAgdmFyIG1hcmdpbiA9IHsgdG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyOSB9LFxuXHQgICAgICAgIHdpZHRoID0gNTAwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsXG5cdCAgICAgICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cdFxuXHQgICAgdmFyIGF2ZXJhZ2VzID0gZGF0YS5tZWRpYW5zO1xuXHRcblx0ICAgIHZhciB4ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbMCwgd2lkdGhdKS5kb21haW4oWzAsIDM2NV0pO1xuXHQgICAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKS5kb21haW4oWzAsIDEwMF0pO1xuXHRcblx0ICAgIC8vIERlZmluZSB0aGUgYXhlc1xuXHQgICAgZnVuY3Rpb24gZm9ybWF0TW9udGhUaWNrKGQpIHtcblx0ICAgICAgICByZXR1cm4gTU9OVEhfTEFCRUxTWyhkIC0gMTUpIC8gMzBdO1xuXHQgICAgfVxuXHQgICAgdmFyIHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4KS50aWNrcygxMSkudGlja1ZhbHVlcyhbMTUsIDQ1LCA3NSwgMTA1LCAxMzUsIDE2NSwgMTk1LCAyMjUsIDI1NSwgMjg1LCAzMTUsIDM0NV0pLnRpY2tGb3JtYXQoZm9ybWF0TW9udGhUaWNrKTtcblx0XG5cdCAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KS50aWNrcyg2KTtcblx0XG5cdCAgICAvLyBEZWZpbmUgdGhlIGxpbmVcblx0ICAgIHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKCkueChmdW5jdGlvbiAoZCwgaSkge1xuXHQgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGQpID8geChwYXJzZUp1bGlhbkRheShkWzBdKSkgOiB4KGkgKiA4ICsgMyk7XG5cdCAgICB9KS55KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyB5KGRbMV0pIDogeShkKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KGRpdikuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJvdmVybGFwcGluZy1ncmFwaFwiLCB0cnVlKTtcblx0XG5cdCAgICAvLyBBZGRzIHRoZSBzdmcgY2FudmFzXG5cdCAgICB2YXIgc3ZnID0gd3JhcHBlci5hcHBlbmQoXCJzdmdcIikuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgdyA9IHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQ7XG5cdCAgICAgICAgdmFyIGggPSBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbTtcblx0ICAgICAgICByZXR1cm4gJzAgMCAnICsgdyArICcgJyArIGg7XG5cdCAgICB9KS5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJylcblx0ICAgIC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuXHQgICAgLy8uYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcblx0ICAgIC5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtYXJnaW4ubGVmdCArIFwiLFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKTtcblx0XG5cdCAgICBzdmcuY2FsbCh0aXApO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWCBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ4IGF4aXNcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpLmNhbGwoeEF4aXMpO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWSBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ5IGF4aXNcIikuY2FsbCh5QXhpcyk7XG5cdFxuXHQgICAgY2hhcnRzW1wibWVkaWFuc1wiXSA9IHtcblx0ICAgICAgICBcInBhdGhcIjogZHJhd0xpbmVhclBhdGgoZGF0YVtcIm1lZGlhbnNcIl0sIHZhbHVlbGluZSwgc3ZnKVxuXHQgICAgfTtcblx0XG5cdCAgICBjaGFydHNbeWVhcl0gPSB7XG5cdCAgICAgICAgXCJwYXRoXCI6IGRyYXdMaW5lYXJQYXRoKGRhdGFbeWVhcl0sIHZhbHVlbGluZSwgc3ZnKVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcclxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBwb2ludCBhdCBlYWNoIGRhdGEgcG9pbnRcclxuXHQgICAgICovXG5cdCAgICBjaGFydHNbXCJtZWRpYW5zXCJdW1wicG9pbnRzXCJdID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW1wibWVkaWFuc1wiXSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0ICAgIGNoYXJ0c1t5ZWFyXVtcInBvaW50c1wiXSA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVt5ZWFyXSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0XG5cdCAgICB2YXIgaW5wdXR3cmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcImlucHV0LXdyYXBwZXJcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgZGF0YS5rZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwga2V5LCBcInRpbWVzZXJpZXNcIiwgeWVhciwgY2hhcnRzLCBkYXRhLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMsIGxhdCwgbG5nKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwgXCJtZWRpYW5zXCIsIFwidGltZXNlcmllc1wiLCBcIm1lZGlhbnNcIiwgY2hhcnRzLCBkYXRhLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMsIGxhdCwgbG5nKTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBQT0xBUiBHUkFQSCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcblx0ICAgIHZhciB5ZWFyID0gXCIyMDE1XCI7XG5cdCAgICB2YXIgd2lkdGggPSA0OTAsXG5cdCAgICAgICAgaGVpZ2h0ID0gNDkwLFxuXHQgICAgICAgIHJhZGl1cyA9IE1hdGgubWluKHdpZHRoLCBoZWlnaHQpIC8gMiAtIDMwO1xuXHRcblx0ICAgIHZhciBhdmVyYWdlcyA9IGRhdGFbXCJtZWRpYW5zXCJdO1xuXHQgICAgdmFyIGNlbnRlciA9IGZpbmRQb2xhckNlbnRlcihkYXRhKTtcblx0ICAgIHZhciB0aHJlc2hvbGRzID0gZmluZFBvbGFyVGhyZXNob2xkcyhhdmVyYWdlcywgY2VudGVyWzFdWzBdKTtcblx0XG5cdCAgICAvKipcclxuXHQgICAgICogU2V0cyB1cCBzY2FsaW5nIG9mIGRhdGEuIFdlIGtub3cgdGhhdCB0aGUgbmR2aSB2YWx1ZXMgZmFsbCBiZXR3ZWVuXHJcblx0ICAgICAqIDAgJiAxMDAgc28gd2Ugc2V0IG91ciBkb21haW4gdG8gdGhhdC4gVGhlIHJhbmdlIGNvbnRyb2xzIHdoZXJlIHRoZVxyXG5cdCAgICAgKiBwb2ludHMgd2lsbCBsaWUgaW4gb3VyIGdyYXBoLCBzbyB3ZSBzZXQgdGhlbSB0byBiZSBiZXR3ZWVuIDAgYW5kIHRoZVxyXG5cdCAgICAgKiByYWRpdXMuXHJcblx0ICAgICAqL1xuXHQgICAgdmFyIHIgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgMTAwXSkucmFuZ2UoWzAsIHJhZGl1c10pO1xuXHRcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBmdW5jdGlvbiB3aGljaCB3aWxsIGRyYXcgZWFjaCBwb2ludC4gVG8gY29tcHV0ZSB0aGUgZGlzdGFuY2UgZnJvbSB0aGVcclxuXHQgICAgICogY2VudGVyIGVhY2ggcG9pbnQgaXMgd2UgcGFzcyB0aGUgZGF0YXBvaW50IHRvIHRoZSBmdW5jdGlvbiBkZWZpbmVkIGFib3ZlLlxyXG5cdCAgICAgKiBUbyBkZXRlcm1pbmUgdGhlIGFuZ2xlIGZyb20gdGhlIG9yaWdpbiB3ZSBuZWVkIHRvIGNvbnZlcnQgdGhlIGRheSB0b1xyXG5cdCAgICAgKiByYWRpYW5zLCBzbyB3ZSBjb252ZXJ0IHRoZSBkYXkgdG8gYSBudW1iZXIgYmV0d2VlbiAwICYgMSBhbmQgdGhlbiBtdWx0aXBseVxyXG5cdCAgICAgKiBpdCBieSAyIHBpLlxyXG5cdCAgICAgKi9cblx0ICAgIHZhciBsaW5lID0gZDMucmFkaWFsTGluZSgpLnJhZGl1cyhmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGQpID8gcihkWzFdKSA6IHIoZCk7XG5cdCAgICB9KS5hbmdsZShmdW5jdGlvbiAoZCwgaSkge1xuXHQgICAgICAgIHZhciBkYXkgPSBBcnJheS5pc0FycmF5KGQpID8gcGFyc2VKdWxpYW5EYXkoZFswXSkgOiBpICogOCArIDM7XG5cdCAgICAgICAgcmV0dXJuIChkYXkgLSAxKSAlIDM2NSAvIDM2NSAqICgyICogTWF0aC5QSSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKipcclxuXHQgICAgICogU2V0cyB1cCB0aGUgY2FudmFzIHdoZXJlIHRoZSBjaXJjbGUgd2lsbCBiZSBkcmF3bi5cclxuXHQgICAgICovXG5cdCAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwicG9sYXItZ3JhcGhcIiwgdHJ1ZSk7XG5cdCAgICB2YXIgc3ZnID0gd3JhcHBlci5hcHBlbmQoXCJzdmdcIilcblx0ICAgIC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcblx0ICAgIC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuXHQgICAgLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuICcwIDAgJyArIHdpZHRoICsgJyAnICsgaGVpZ2h0O1xuXHQgICAgfSkuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWlkWU1pZCcpLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHdpZHRoIC8gMiArIFwiLFwiICsgaGVpZ2h0IC8gMiArIFwiKVwiKTtcblx0XG5cdCAgICBzdmcuY2FsbCh0aXApO1xuXHRcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGJpZyBjaXJjbGVzIG9mIHRoZSBncmFwaCAmIHRoZWlyIGxhYmVsc1xyXG5cdCAgICAgKi9cblx0ICAgIHZhciBnciA9IHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInIgYXhpc1wiKS5zZWxlY3RBbGwoXCJnXCIpLmRhdGEoci50aWNrcyg1KS5zbGljZSgxKSkuZW50ZXIoKS5hcHBlbmQoXCJnXCIpO1xuXHRcblx0ICAgIGdyLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiclwiLCByKTtcblx0XG5cdCAgICBnci5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIC1yKGQpIC0gNDtcblx0ICAgIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJyb3RhdGUoMTUpXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIikudGV4dChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXHJcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgbGFiZWxzIGZvciBlYWNoIG1vbnRoIGFuZCB0aGUgbGluZXNcclxuXHQgICAgICogdGhhdCBnbyBvdXQgdG8gdGhlbS5cclxuXHQgICAgICovXG5cdCAgICB2YXIgZ2FfYSA9IHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcImEgYXhpc1wiKS5zZWxlY3RBbGwoXCJnXCIpLmRhdGEoZDMucmFuZ2UoMCwgMzYwLCAzMCkpLmVudGVyKCkuYXBwZW5kKFwiZ1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIFwicm90YXRlKFwiICsgKGQgLSA5MCkgKyBcIilcIjtcblx0ICAgIH0pO1xuXHRcblx0ICAgIGdhX2EuYXBwZW5kKFwibGluZVwiKS5hdHRyKFwieDJcIiwgcmFkaXVzKTtcblx0XG5cdCAgICBnYV9hLmFwcGVuZChcInRleHRcIikuYXR0cihcInhcIiwgcmFkaXVzICsgNikuYXR0cihcImR5XCIsIFwiLjM1ZW1cIikuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkIDwgMzYwICYmIGQgPiAxODAgPyBcImVuZFwiIDogbnVsbDtcblx0ICAgIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7XG5cdCAgICB9KS50ZXh0KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIE1PTlRIX0xBQkVMU1tkIC8gMzBdO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXHJcblx0ICAgICAqIERyYXdzIHRoZSB0aHJlc2hvbGQgbGluZXNcclxuXHQgICAgICovXG5cdCAgICB2YXIgdGhyZXNob2xkRWxlbSA9IHN2Zy5hcHBlbmQoXCJnXCIpLnNlbGVjdEFsbChcImdcIikuZGF0YSh0aHJlc2hvbGRzKS5lbnRlcigpLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBcInJvdGF0ZShcIiArIChkLmRhdGFbMV1bMF0gLSA5MCkgKyBcIilcIjtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHRocmVzaG9sZEVsZW0uYXBwZW5kKFwibGluZVwiKS5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpLmF0dHIoXCJ4MlwiLCByYWRpdXMpO1xuXHRcblx0ICAgIHRocmVzaG9sZEVsZW0uYXBwZW5kKFwidGV4dFwiKS5hdHRyKFwieFwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHZhciBkYXkgPSBkLmRhdGFbMV1bMF07cmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyByYWRpdXMgKyAzMCA6IHJhZGl1cyAtIDMwO1xuXHQgICAgfSkuYXR0cihcInlcIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZC5kYXRhWzFdWzBdICUgMzY1IC8gMzY1ICogKDIgKiBNYXRoLlBJKSArIDY7XG5cdCAgICB9KS5hdHRyKFwiZHlcIiwgXCIuMzVlbVwiKS5zdHlsZShcInRleHQtYW5jaG9yXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgdmFyIGRheSA9IGQuZGF0YVsxXVswXTtyZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IFwibWlkZGxlXCIgOiBudWxsO1xuXHQgICAgfSkuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHZhciBkYXkgPSBkLmRhdGFbMV1bMF07cmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyBcInJvdGF0ZSgxODAgXCIgKyAocmFkaXVzICsgNikgKyBcIiwwKVwiIDogbnVsbDtcblx0ICAgIH0pLnRleHQoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZC5sYWJlbDtcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBEcmF3cyB0aGUgbGluZSB0byB0aGUgY2VudGVyIG9mIHRoZSBkYXRhXHJcblx0ICAgICAqL1xuXHQgICAgdmFyIGNlbnRlckRheSA9IGNlbnRlclsxXVswXTtcblx0ICAgIHZhciBjZW50ZXJEYXlPcHBvc2l0ZSA9IChjZW50ZXJEYXkgKyAzNjUgLyAyKSAlIDM2NTtcblx0ICAgIHZhciBjZW50ZXJEYXlEYXRhID0gW2NlbnRlckRheSwgMTAwXTtcblx0ICAgIHZhciBjZW50ZXJEYXlPcHBvc2l0ZURhdGEgPSBbY2VudGVyRGF5T3Bwb3NpdGUsIDEwMF07XG5cdCAgICB2YXIgZ3Jvd2luZ1NlYXNvbkRhdGEgPSBbY2VudGVyRGF5RGF0YSwgY2VudGVyRGF5T3Bwb3NpdGVEYXRhXTtcblx0XG5cdCAgICBkcmF3UG9sYXJQYXRoKGdyb3dpbmdTZWFzb25EYXRhLCBsaW5lLCBzdmcpLmNsYXNzZWQoXCJncm93aW5nLXNlYXNvbi1saW5lXCIsIFwidHJ1ZVwiKTtcblx0XG5cdCAgICBkcmF3UG9sYXJQYXRoKGNlbnRlciwgbGluZSwgc3ZnKS5jbGFzc2VkKFwiY2VudGVyLWxpbmVcIiwgXCJ0cnVlXCIpO1xuXHRcblx0ICAgIHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKS5kYXRhKFtjZW50ZXJbMV1dKS5lbnRlcigpLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiY2xhc3NcIiwgXCJjZW50ZXJcIikuYXR0cihcInJcIiwgNCkuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHZhciBjb29ycyA9IGxpbmUoW2RdKS5zbGljZSgxKS5zbGljZSgwLCAtMSk7XG5cdCAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgY29vcnMgKyBcIilcIjtcblx0ICAgIH0pLmF0dHIoXCJzdHJva2VcIiwgXCIjMDAwXCIpLmF0dHIoXCJmaWxsXCIsIFwiI2VhMGM0OFwiKS5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHRpcC5zaG93KFwiQ2VudGVyOiBcIiArIFN0cmluZyhkWzFdKS5zdWJzdHJpbmcoMCwgNykpO1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCA1KTtcblx0ICAgIH0pLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB0aXAuaGlkZSgpO1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCA0KTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciBjaGFydHMgPSB7fTtcblx0XG5cdCAgICAvKipcclxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBsaW5lIHRoYXQgdGhlIGRhdGEgZm9sbG93c1xyXG5cdCAgICAgKi9cblx0ICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl0gPSB7XG5cdCAgICAgICAgXCJwYXRoXCI6IGRyYXdQb2xhclBhdGgoYXZlcmFnZXMsIGxpbmUsIHN2Zylcblx0ICAgIH07XG5cdFxuXHQgICAgY2hhcnRzW3llYXJdID0ge1xuXHQgICAgICAgIFwicGF0aFwiOiBkcmF3UG9sYXJQYXRoKGRhdGFbeWVhcl0sIGxpbmUsIHN2Zylcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXHJcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XHJcblx0ICAgICAqL1xuXHQgICAgY2hhcnRzLm1lZGlhbnMucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhhdmVyYWdlcywgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdCAgICBjaGFydHNbeWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW3llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0XG5cdCAgICB2YXIgaW5wdXR3cmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcImlucHV0LXdyYXBwZXJcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgZGF0YS5rZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSBpbnB1dHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpO1xuXHRcblx0ICAgICAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgXCJwb2xhci1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSkuYXR0cihcInZhbHVlXCIsIGtleSkucHJvcGVydHkoXCJjaGVja2VkXCIsIGtleSA9PT0geWVhciA/IHRydWUgOiBmYWxzZSkub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xuXHQgICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGgucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xuXHRcblx0ICAgICAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGdyYXBoIHllYXIgY2xpY2sgb2ZmXG5cdCAgICAgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxuXHQgICAgICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHQgICAgICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6IG5ld1llYXIgKyAnIHBvbGFyIHRpbWVzZXJpZXMgb2ZmJyxcblx0ICAgICAgICAgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgaWYgKCFjaGFydHMuaGFzT3duUHJvcGVydHkobmV3WWVhcikpIHtcblx0ICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcblx0ICAgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBncmFwaCB5ZWFyIGNsaWNrIG9mZlxuXHQgICAgICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcblx0ICAgICAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0ICAgICAgICAgICAgICAgICAgICBldmVudExhYmVsOiBuZXdZZWFyICsgJyBwb2xhciB0aW1lc2VyaWVzIG9uJyxcblx0ICAgICAgICAgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd1BvbGFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImxhYmVsXCIpLnRleHQoa2V5KS5hdHRyKFwiZm9yXCIsIFwicG9sYXItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuXHRcblx0ICAgICAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLnN0eWxlKFwiYmFja2dyb3VuZFwiLCBwdWxsRGlzdGluY3RDb2xvcihrZXkgIT09IFwibWVkaWFuc1wiID8ga2V5IDogMCkpLmNsYXNzZWQoXCJncmFwaC1waXAtZXhhbXBsZVwiLCB0cnVlKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSBpbnB1dHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpO1xuXHRcblx0ICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJpbnB1dFwiKS5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpLmF0dHIoXCJpZFwiLCBcInBvbGFyLWF2ZXJhZ2UtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpLmF0dHIoXCJ2YWx1ZVwiLCBcIm1lZGlhbnNcIikucHJvcGVydHkoXCJjaGVja2VkXCIsIHRydWUpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xuXHQgICAgICAgIGlmICghdGhpcy5jaGVja2VkKSB7XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoLnJlbW92ZSgpO1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xuXHRcblx0ICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZ3JhcGggeWVhciBjbGljayBvZmZcblx0ICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxuXHQgICAgICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXG5cdCAgICAgICAgICAgICAgICBldmVudExhYmVsOiBuZXdZZWFyICsgJyBwb2xhciB0aW1lc2VyaWVzIG9mZicsXG5cdCAgICAgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgaWYgKCFjaGFydHMuaGFzT3duUHJvcGVydHkobmV3WWVhcikpIHtcblx0ICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXSA9IHt9O1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBncmFwaCB5ZWFyIGNsaWNrIG9mZlxuXHQgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXG5cdCAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0ICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6IG5ld1llYXIgKyAnIHBvbGFyIHRpbWVzZXJpZXMgb24nLFxuXHQgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3UG9sYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2Zyk7XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKS50ZXh0KFwiQmFzZWxpbmVcIikuYXR0cihcImZvclwiLCBcInBvbGFyLWF2ZXJhZ2UtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuXHRcblx0ICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJkaXZcIikuc3R5bGUoXCJiYWNrZ3JvdW5kXCIsIHB1bGxEaXN0aW5jdENvbG9yKDApKS5jbGFzc2VkKFwiZ3JhcGgtcGlwLWV4YW1wbGVcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgdmFyIHRocmVzaG9sZENoZWNrYm94ID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwidGhyZXNob2xkLWNoZWNrYm94XCIsIHRydWUpO1xuXHRcblx0ICAgIHRocmVzaG9sZENoZWNrYm94LmFwcGVuZChcImlucHV0XCIpLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIikuYXR0cihcImlkXCIsIFwidGhyZXNob2xkLWNoZWNrYm94LVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKS5wcm9wZXJ0eShcImNoZWNrZWRcIiwgdHJ1ZSkub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICB0aHJlc2hvbGRFbGVtLnN0eWxlKFwib3BhY2l0eVwiLCB0aGlzLmNoZWNrZWQgPyAxIDogMCk7XG5cdCAgICAgICAgdmFyIG9mZm9uID0gdGhpcy5jaGVja2VkID8gJ29mZicgOiAnb24nO1xuXHRcblx0ICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBncmFwaCB0aHJlc2hvbGQgY2xpY2sgb2ZmXG5cdCAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXG5cdCAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiAndGhyZXNob2xkIHBvbGFyIHRpbWVzZXJpZXMgJyArIG9mZm9uLFxuXHQgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgICAgICB9KTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHRocmVzaG9sZENoZWNrYm94LmFwcGVuZChcImxhYmVsXCIpLnRleHQoXCJUaHJlc2hvbGRzXCIpLmF0dHIoXCJmb3JcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuXHR9XG5cdFxuXHQvKiBQT0xBUiBHUkFQSCBIRUxQRVJTICovXG5cdFxuXHRmdW5jdGlvbiBmaW5kUG9sYXJDZW50ZXIoZGF0YSkge1xuXHQgICAgdmFyIGksIGosIGxlbmd0aCwgYXJyO1xuXHQgICAgdmFyIHRvdGFsU3VtID0gMDtcblx0ICAgIHZhciBpbmNvbXBsZXRlWWVhcnMgPSAwO1xuXHQgICAgdmFyIHN1bTtcblx0ICAgIGxlbmd0aCA9IDQ2O1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmtleXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBhcnIgPSBkYXRhW2RhdGEua2V5c1tpXV07XG5cdCAgICAgICAgaWYgKGFyci5sZW5ndGggIT09IGxlbmd0aCkge1xuXHQgICAgICAgICAgICBpbmNvbXBsZXRlWWVhcnMrKztcblx0ICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1bSA9IDA7XG5cdCAgICAgICAgZm9yIChqID0gMDsgaiA8IGxlbmd0aCAvIDI7IGorKykge1xuXHQgICAgICAgICAgICBzdW0gKz0gYXJyW2pdWzFdIC0gYXJyW2ogKyAyM11bMV07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1bSA9IHN1bSAvIDIzO1xuXHQgICAgICAgIHRvdGFsU3VtICs9IHN1bTtcblx0ICAgIH1cblx0ICAgIHRvdGFsU3VtID0gTWF0aC5hYnModG90YWxTdW0pIC8gKGRhdGEua2V5cy5sZW5ndGggLSBpbmNvbXBsZXRlWWVhcnMpO1xuXHRcblx0ICAgIHZhciBhcmVhRGlmZiA9IDEwMDAwMDA7XG5cdCAgICB2YXIgY2hlY2tEaWZmO1xuXHQgICAgdmFyIGFyZWFJbmRleCA9IDA7XG5cdCAgICB2YXIgbGVmdEFyZWEsIHJpZ2h0QXJlYTtcblx0ICAgIHZhciBhdmdzID0gZGF0YS5tZWRpYW5zO1xuXHQgICAgdmFyIGssIGNvdW50ZXI7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aCAvIDI7IGkrKykge1xuXHQgICAgICAgIGxlZnRBcmVhID0gMDtcblx0ICAgICAgICByaWdodEFyZWEgPSAwO1xuXHQgICAgICAgIGZvciAoY291bnRlciA9IDA7IGNvdW50ZXIgPCBsZW5ndGggLyAyOyBjb3VudGVyKyspIHtcblx0ICAgICAgICAgICAgaiA9IChpICsgY291bnRlcikgJSA0Njtcblx0ICAgICAgICAgICAgayA9IChqICsgMjMpICUgNDY7XG5cdFxuXHQgICAgICAgICAgICBsZWZ0QXJlYSArPSBwYXJzZUludChhdmdzW2pdLCAxMCk7XG5cdCAgICAgICAgICAgIHJpZ2h0QXJlYSArPSBwYXJzZUludChhdmdzW2tdLCAxMCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNoZWNrRGlmZiA9IE1hdGguYWJzKGxlZnRBcmVhIC0gcmlnaHRBcmVhKTtcblx0ICAgICAgICBpZiAoY2hlY2tEaWZmIDwgYXJlYURpZmYpIHtcblx0ICAgICAgICAgICAgYXJlYURpZmYgPSBjaGVja0RpZmY7XG5cdCAgICAgICAgICAgIGFyZWFJbmRleCA9IGk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBmaXJzdFJhZGl1cyA9IHBhcnNlSW50KGF2Z3NbYXJlYUluZGV4XSwgMTApO1xuXHQgICAgdmFyIHNlY29uZFJhZGl1cyA9IHBhcnNlSW50KC1hdmdzW2FyZWFJbmRleCArIDIzXSwgMTApO1xuXHRcblx0ICAgIHZhciBmaXJzdERpZmYgPSBNYXRoLmFicyh0b3RhbFN1bSAtIGZpcnN0UmFkaXVzKSAtIE1hdGguYWJzKHRvdGFsU3VtIC0gc2Vjb25kUmFkaXVzKTtcblx0ICAgIHZhciBzZWNvbmREaWZmID0gTWF0aC5hYnMoLXRvdGFsU3VtIC0gZmlyc3RSYWRpdXMpIC0gTWF0aC5hYnMoLXRvdGFsU3VtIC0gc2Vjb25kUmFkaXVzKTtcblx0ICAgIGlmIChzZWNvbmREaWZmID4gZmlyc3REaWZmKSB7XG5cdCAgICAgICAgYXJlYUluZGV4ID0gYXJlYUluZGV4ICsgMjM7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGNpcmNsZWNlbnRlciA9IFswLCAwXTtcblx0ICAgIHZhciBkYXRhY2VudGVyID0gW2FyZWFJbmRleCAqIDggKyAzLCB0b3RhbFN1bV07XG5cdFxuXHQgICAgcmV0dXJuIFtjaXJjbGVjZW50ZXIsIGRhdGFjZW50ZXJdO1xuXHR9XG5cdFxuXHQvKipcclxuXHQgKiBzdGFydERheSBpcyBhY3R1YWxseSB0aGUgc2Vhc29uYWxpdHkgaW5kZXgsIGlmIGl0IG9jY3VycyBhZnRlciBqdWx5IGl0IHNob3VsZCBiZSBmbGlwcGVkXHJcblx0ICovXG5cdGZ1bmN0aW9uIGZpbmRQb2xhclRocmVzaG9sZHMoZGF0YSwgc3RhcnREYXkpIHtcblx0ICAgIHZhciBzdGFydEluZGV4ID0gTWF0aC5mbG9vcigoc3RhcnREYXkgLSAzKSAvIDgpO1xuXHQgICAgaWYgKHN0YXJ0SW5kZXggPiAyMikge1xuXHQgICAgICAgIHN0YXJ0SW5kZXggPSBzdGFydEluZGV4IC0gMjM7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGksIGosIGxlbmd0aCwgYXJyO1xuXHQgICAgdmFyIHRvdGFsU3VtID0gMDtcblx0ICAgIHZhciBzdW07XG5cdCAgICBsZW5ndGggPSA0Njtcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBqID0gKHN0YXJ0SW5kZXggKyBpKSAlIGxlbmd0aDtcblx0ICAgICAgICB0b3RhbFN1bSArPSBwYXJzZUludChkYXRhW2pdLCAxMCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGZpZnRlZW5UaHJlc2hvbGQgPSB0b3RhbFN1bSAqIC4xNTtcblx0ICAgIHZhciBlaWdodHlUaHJlc2hvbGQgPSB0b3RhbFN1bSAqIC44MDtcblx0ICAgIHZhciBmaWZ0ZWVuSW5kZXhGb3VuZCA9IGZhbHNlLFxuXHQgICAgICAgIGVpZ2h0eUluZGV4Rm91bmQgPSBmYWxzZTtcblx0ICAgIHZhciBmaWZ0ZWVuSW5kZXgsIGVpZ2h0eUluZGV4O1xuXHRcblx0ICAgIHRvdGFsU3VtID0gMDtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGogPSAoc3RhcnRJbmRleCArIGkpICUgbGVuZ3RoO1xuXHQgICAgICAgIHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcblx0ICAgICAgICBpZiAoIWZpZnRlZW5JbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZmlmdGVlblRocmVzaG9sZCkge1xuXHQgICAgICAgICAgICBmaWZ0ZWVuSW5kZXggPSBqO1xuXHQgICAgICAgICAgICBmaWZ0ZWVuSW5kZXhGb3VuZCA9IHRydWU7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIWVpZ2h0eUluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBlaWdodHlUaHJlc2hvbGQpIHtcblx0ICAgICAgICAgICAgZWlnaHR5SW5kZXggPSBqO1xuXHQgICAgICAgICAgICBlaWdodHlJbmRleEZvdW5kID0gdHJ1ZTtcblx0ICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjaXJjbGVDZW50ZXIgPSBbMCwgMF07XG5cdFxuXHQgICAgdmFyIGZpZnRlZW5FbmQgPSBbZmlmdGVlbkluZGV4ICogOCArIDMsIDEwMF07XG5cdCAgICB2YXIgZWlnaHR5RW5kID0gW2VpZ2h0eUluZGV4ICogOCArIDMsIDEwMF07XG5cdFxuXHQgICAgcmV0dXJuIFt7XG5cdCAgICAgICAgXCJsYWJlbFwiOiBcIjE1JVwiLFxuXHQgICAgICAgIFwiZGF0YVwiOiBbY2lyY2xlQ2VudGVyLCBmaWZ0ZWVuRW5kXVxuXHQgICAgfSwge1xuXHQgICAgICAgIFwibGFiZWxcIjogXCI4MCVcIixcblx0ICAgICAgICBcImRhdGFcIjogW2NpcmNsZUNlbnRlciwgZWlnaHR5RW5kXVxuXHQgICAgfV07XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBHUkFQSCBIRUxQRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBkcmF3TGluZWFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcblx0ICAgIHJldHVybiBzdmcuYXBwZW5kKFwicGF0aFwiKS5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpLmF0dHIoXCJkXCIsIGxpbmUoZGF0YSkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmF3UG9sYXJQYXRoKGRhdGEsIGxpbmUsIHN2Zykge1xuXHQgICAgcmV0dXJuIHN2Zy5hcHBlbmQoXCJwYXRoXCIpLmRhdHVtKGRhdGEpLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIikuYXR0cihcImRcIiwgbGluZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcykge1xuXHQgICAgcmV0dXJuIHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKS5kYXRhKGRhdGEpLmVudGVyKCkuYXBwZW5kKFwiY2lyY2xlXCIpLmF0dHIoXCJyXCIsIDIpLmF0dHIoXCJjbGFzc1wiLCBcInBvaW50XCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQsIGkpIHtcblx0ICAgICAgICB2YXIgcG9pbnQgPSBBcnJheS5pc0FycmF5KGQpID8gZCA6IFtpICogOCArIDMsIGRdO1xuXHQgICAgICAgIHZhciBjb29ycyA9IGxpbmUoW3BvaW50XSkuc2xpY2UoMSkuc2xpY2UoMCwgLTEpO1xuXHQgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGNvb3JzICsgXCIpXCI7XG5cdCAgICB9KVxuXHQgICAgLy8uYXR0cihcInJcIiwgMylcblx0ICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwiIzAwMFwiKS5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbiAoZCwgaSkge1xuXHQgICAgICAgIHZhciB2YWwgPSBBcnJheS5pc0FycmF5KGQpID8gZFswXS5zdWJzdHJpbmcoMCwgNCkgOiAwO1xuXHQgICAgICAgIHJldHVybiBwdWxsRGlzdGluY3RDb2xvcih2YWwpO1xuXHQgICAgfSkub24oXCJtb3VzZW92ZXJcIiwgaGFuZGxlUG9pbnRNb3VzZW92ZXIpLm9uKFwibW91c2VvdXRcIiwgaGFuZGxlUG9pbnRNb3VzZW91dCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdmVyKGQpIHtcblx0ICAgIHZhciB0aXBTdHJpbmcgPSBBcnJheS5pc0FycmF5KGQpID8gZm9ybWF0RGF0ZShkWzBdKSArIFwiOiBcIiArIGRbMV0gOiBcIkF2ZXJhZ2U6IFwiICsgZDtcblx0ICAgIHRpcC5zaG93KHRpcFN0cmluZyk7XG5cdCAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgXCI0XCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVQb2ludE1vdXNlb3V0KGQpIHtcblx0ICAgIHRpcC5oaWRlKCk7XG5cdCAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgXCIyXCIpO1xuXHRcblx0ICAgIHZhciBhY3RpdmVUeXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyYXBoLXR5cGUtYnRuIGFjdGl2ZVwiKVswXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpO1xuXHRcblx0ICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIHRvb2wgdGlwIG9uIGdyYXBoIGRvIHRoaXMgb24gdGhlIG1vdXNlb3V0IHNvIG1vdXNlb3ZlciBkb3NlIG5vdCBkbyBhIGxvdCBvZiBldmVudHMuLi4uXG5cdCAgICAvLyB3ZSBtaXNzIGEgZmV3IGJ1dCB0aGF0IGlzIGJldHRlciB0aGFuIG92ZXIgY291bnRpbmcuXG5cdCAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxuXHQgICAgICAgIGV2ZW50QWN0aW9uOiAnaG92ZXInLFxuXHQgICAgICAgIGV2ZW50TGFiZWw6IGFjdGl2ZVR5cGUgKyAnIHRvb2wgdGlwJyxcblx0ICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2Vcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVDaGVja2JveCh3cmFwcGVyLCBrZXksIHR5cGUsIHllYXIsIGNoYXJ0cywgZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpIHtcblx0ICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKS5hdHRyKFwidmFsdWVcIiwga2V5KS5wcm9wZXJ0eShcImNoZWNrZWRcIiwga2V5ID09PSB5ZWFyID8gdHJ1ZSA6IGZhbHNlKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcblx0XG5cdCAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGdyYXBoIHllYXIgY2xpY2sgb2ZmXG5cdCAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcblx0ICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHQgICAgICAgICAgICAgICAgZXZlbnRMYWJlbDogbmV3WWVhciArICcgb3ZlcmxhcHBpbmcgdGltZXNlcmllcyBvZmYnLFxuXHQgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGlmICghY2hhcnRzLmhhc093blByb3BlcnR5KG5ld1llYXIpKSB7XG5cdCAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdMaW5lYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2Zyk7XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHRcblx0ICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZ3JhcGggeWVhciBjbGljayBvblxuXHQgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXG5cdCAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0ICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6IG5ld1llYXIgKyAnIG92ZXJsYXBwaW5nIHRpbWVzZXJpZXMgb24nLFxuXHQgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKS50ZXh0KGtleSkuYXR0cihcImZvclwiLCB0eXBlICsgXCItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuXHRcblx0ICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJkaXZcIikuc3R5bGUoXCJiYWNrZ3JvdW5kXCIsIHB1bGxEaXN0aW5jdENvbG9yKGtleSAhPT0gXCJtZWRpYW5zXCIgPyBrZXkgOiAwKSkuY2xhc3NlZChcImdyYXBoLXBpcC1leGFtcGxlXCIsIHRydWUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwdWxsRGlzdGluY3RDb2xvcih5ZWFyKSB7XG5cdCAgICB2YXIgY29sb3JSYW1wID0gW1wiI2ZmZTQ3NlwiLCBcIiMwMzY1OTNcIiwgXCIjMTE2YzkxXCIsIFwiIzFlNzM5MFwiLCBcIiMyYzdiOGVcIiwgXCIjMzk4MjhjXCIsIFwiIzRjOGM4YVwiLCBcIiM1ZTk1ODlcIiwgXCIjNzE5Zjg3XCIsIFwiIzgzYTg4NlwiLCBcIiM5NWIxODNcIiwgXCIjYTZiYTgwXCIsIFwiI2I4YzM3Y1wiLCBcIiNjYWNjNzlcIiwgXCIjZDZkMjc5XCIsIFwiI2UyZDc3OVwiLCBcIiNlZmRkNzhcIiwgXCIjZmJlMzc4XCJdO1xuXHRcblx0ICAgIHJldHVybiB5ZWFyID09PSAwID8gXCIjZmZmXCIgOiBjb2xvclJhbXBbcGFyc2VJbnQoeWVhciwgMTApICUgY29sb3JSYW1wLmxlbmd0aF07XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gREFURSBIRUxQRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VEYXRlKGRhdGUpIHtcblx0ICAgIGRhdGUgPSBkYXRlLnRvU3RyaW5nKCk7XG5cdCAgICB2YXIgeWVhciA9IGRhdGUuc3Vic3RyaW5nKDAsIDQpO1xuXHQgICAgdmFyIG1vbnRoID0gcGFyc2VJbnQoZGF0ZS5zdWJzdHJpbmcoNCwgNiksIDEwKSAtIDE7XG5cdCAgICB2YXIgZGF5ID0gZGF0ZS5zdWJzdHJpbmcoNiwgOCk7XG5cdFxuXHQgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwYXJzZUp1bGlhbkRheShkYXRlKSB7XG5cdCAgICBpZiAodHlwZW9mIGRhdGUgPT09IFwic3RyaW5nXCIpIHtcblx0ICAgICAgICBkYXRlID0gcGFyc2VEYXRlKGRhdGUpO1xuXHQgICAgICAgIHJldHVybiBkYXRlLmdldERPWSgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gZGF0ZTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKSB7XG5cdCAgICBpZiAoZGF0ZSA9PT0gXCJBdmVyYWdlXCIpIHtcblx0ICAgICAgICByZXR1cm4gZGF0ZTtcblx0ICAgIH1cblx0XG5cdCAgICBkYXRlID0gcGFyc2VEYXRlKGRhdGUpO1xuXHQgICAgcmV0dXJuIGZvcm1hdE1vbnRoKGRhdGUuZ2V0TW9udGgoKSkgKyBcIiBcIiArIG9yZGluYWxfc3VmZml4X29mKGRhdGUuZ2V0RGF0ZSgpKSArIFwiLCBcIiArIGRhdGUuZ2V0RnVsbFllYXIoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0TW9udGgobW9udGgpIHtcblx0ICAgIHN3aXRjaCAobW9udGgpIHtcblx0ICAgICAgICBjYXNlIDA6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkphbi5cIjtcblx0ICAgICAgICBjYXNlIDE6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkZlYi5cIjtcblx0ICAgICAgICBjYXNlIDI6XG5cdCAgICAgICAgICAgIHJldHVybiBcIk1hci5cIjtcblx0ICAgICAgICBjYXNlIDM6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkFwci5cIjtcblx0ICAgICAgICBjYXNlIDQ6XG5cdCAgICAgICAgICAgIHJldHVybiBcIk1heVwiO1xuXHQgICAgICAgIGNhc2UgNTpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiSnVuLlwiO1xuXHQgICAgICAgIGNhc2UgNjpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiSnVsLlwiO1xuXHQgICAgICAgIGNhc2UgNzpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiQXVnLlwiO1xuXHQgICAgICAgIGNhc2UgODpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiU2VwLlwiO1xuXHQgICAgICAgIGNhc2UgOTpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiT2N0LlwiO1xuXHQgICAgICAgIGNhc2UgMTA6XG5cdCAgICAgICAgICAgIHJldHVybiBcIk5vdi5cIjtcblx0ICAgICAgICBjYXNlIDExOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJEZWMuXCI7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9yZGluYWxfc3VmZml4X29mKGRheSkge1xuXHQgICAgdmFyIGogPSBkYXkgJSAxMCxcblx0ICAgICAgICBrID0gZGF5ICUgMTAwO1xuXHQgICAgaWYgKGogPT09IDEgJiYgayAhPT0gMTEpIHtcblx0ICAgICAgICByZXR1cm4gZGF5ICsgXCJzdFwiO1xuXHQgICAgfVxuXHQgICAgaWYgKGogPT09IDIgJiYgayAhPT0gMTIpIHtcblx0ICAgICAgICByZXR1cm4gZGF5ICsgXCJuZFwiO1xuXHQgICAgfVxuXHQgICAgaWYgKGogPT09IDMgJiYgayAhPT0gMTMpIHtcblx0ICAgICAgICByZXR1cm4gZGF5ICsgXCJyZFwiO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGRheSArIFwidGhcIjtcblx0fVxuXHRcblx0dmFyIE1PTlRIX0xBQkVMUyA9IHtcblx0ICAgIDA6IFwiSmFuXCIsXG5cdCAgICAxOiBcIkZlYlwiLFxuXHQgICAgMjogXCJNYXJcIixcblx0ICAgIDM6IFwiQXByXCIsXG5cdCAgICA0OiBcIk1heVwiLFxuXHQgICAgNTogXCJKdW5cIixcblx0ICAgIDY6IFwiSnVsXCIsXG5cdCAgICA3OiBcIkF1Z1wiLFxuXHQgICAgODogXCJTZXBcIixcblx0ICAgIDk6IFwiT2N0XCIsXG5cdCAgICAxMDogXCJOb3ZcIixcblx0ICAgIDExOiBcIkRlY1wiXG5cdH07XG5cbi8qKiovIH0sXG4vKiAyOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkJpbmRUYWJFdmVudHMgPSBCaW5kVGFiRXZlbnRzO1xuXHRleHBvcnRzLkdldEFjdGl2ZVRhYiA9IEdldEFjdGl2ZVRhYjtcblx0ZXhwb3J0cy5IYW5kbGVUYWJDaGFuZ2UgPSBIYW5kbGVUYWJDaGFuZ2U7XG5cdFxuXHR2YXIgX3BhbmVsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHRmdW5jdGlvbiBCaW5kVGFiRXZlbnRzKCkge1xuXHQgICAgZDMuc2VsZWN0QWxsKFwiLnBhbmVsLXRvcC1idG5cIikub24oXCJjbGlja1wiLCBoYW5kbGVUYWJIZWFkZXJCdG5DbGljayk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEdldEFjdGl2ZVRhYigpIHtcblx0ICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwicGFuZWwtdG9wLWJ0biBhY3RpdmVcIilbMF0uZ2V0QXR0cmlidXRlKFwiZGF0YS1hY3RpdmVcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrKCkge1xuXHQgICAgLy8gSWYgdGhlIHNlY3Rpb24gaXMgYWxyZWFkeSBhY3RpdmUsIGRvIG5vdGhpbmdcblx0ICAgIGlmICh0aGlzLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkgcmV0dXJuO1xuXHRcblx0ICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIGdyYXBoIHR5cGVcblx0ICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xuXHQgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICd0YWInLFxuXHQgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxuXHQgICAgICAgIGV2ZW50TGFiZWw6IHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1hY3RpdmVcIiksXG5cdCAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICB9KTtcblx0XG5cdCAgICBIYW5kbGVUYWJDaGFuZ2UodGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWFjdGl2ZVwiKSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIEhhbmRsZVRhYkNoYW5nZShuZXdDbGFzcykge1xuXHQgICAgZGlzYWJsZUFjdGl2ZVRhYigpO1xuXHQgICAgZW5hYmxlVGFiKG5ld0NsYXNzKTtcblx0ICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGVuYWJsZVRhYihuZXdDbGFzcykge1xuXHQgICAgZDMuc2VsZWN0KFwiLnBhbmVsLXRvcC1idG5bZGF0YS1hY3RpdmU9J1wiICsgbmV3Q2xhc3MgKyBcIiddXCIpLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXAtd3JhcHBlclwiKS5jbGFzc0xpc3QuYWRkKG5ld0NsYXNzKTtcblx0ICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmlnaHQtcGFuZWxcIikuY2xhc3NMaXN0LmFkZChuZXdDbGFzcyk7XG5cdFxuXHQgICAgZDMuc2VsZWN0KFwiLnBhbmVsLXNlY3Rpb24td3JhcHBlcltkYXRhLWFjdGl2ZT0nXCIgKyBuZXdDbGFzcyArIFwiJ11cIikuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcblx0XG5cdCAgICB0b2dnbGVNYXBQYWRkaW5nKCk7XG5cdCAgICByZXNldFBhbmVsV2lkdGgoKTtcblx0ICAgICgwLCBfcGFuZWwudXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCkoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZGlzYWJsZUFjdGl2ZVRhYigpIHtcblx0ICAgIHZhciBhY3RpdmVDbGFzcyA9IGQzLnNlbGVjdChcIi5wYW5lbC10b3AtYnRuLmFjdGl2ZVwiKS5hdHRyKFwiZGF0YS1hY3RpdmVcIik7XG5cdFxuXHQgICAgZDMuc2VsZWN0QWxsKCcjbWFwLXdyYXBwZXIsICNyaWdodC1wYW5lbCcpLmNsYXNzZWQoYWN0aXZlQ2xhc3MsIGZhbHNlKTtcblx0XG5cdCAgICBkMy5zZWxlY3RBbGwoJy5wYW5lbC10b3AtYnRuLmFjdGl2ZSwgLnBhbmVsLXNlY3Rpb24td3JhcHBlci5hY3RpdmUnKS5jbGFzc2VkKCdhY3RpdmUnLCBmYWxzZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvZ2dsZU1hcFBhZGRpbmcoKSB7XG5cdCAgICB2YXIgcGFkZGluZ1JpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyaWdodC1wYW5lbFwiKS5vZmZzZXRXaWR0aDtcblx0ICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwLXdyYXBwZXJcIikuc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGFkZGluZ1JpZ2h0ICsgXCJweFwiO1xuXHR9XG5cdFxuXHQvKipcclxuXHQgKiBTaW5jZSB0aGUgcGFuZWwgaGFzIGNoaWxkIGVsZW1lbnRzIHdpdGggcG9zaXRpb24gZml4ZWQgYW5kIHdpZHRoIGluaGVyaXRcclxuXHQgKiB3ZSBuZWVkIHRvIGNsZWFyIHRoZSBpbmxpbmUgd2lkdGggcHJvcGVydHkgaWYgYW5kIG9ubHkgaWYgdGhlIGlubGluZVxyXG5cdCAqIHdpZHRoIGlzIGxlc3MgdGhhbiB0aGUgbWluIHdpZHRoXHJcblx0ICovXG5cdGZ1bmN0aW9uIHJlc2V0UGFuZWxXaWR0aCgpIHtcblx0ICAgIHZhciBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmlnaHQtcGFuZWxcIik7XG5cdCAgICB2YXIgd2lkdGggPSBwYW5lbC5zdHlsZS53aWR0aDtcblx0ICAgIGlmICghd2lkdGgpIHJldHVybjtcblx0XG5cdCAgICB2YXIgcGFuZWxNaW5XaWR0aCA9IGQzLnNlbGVjdChwYW5lbCkuc3R5bGUoJ21pbi13aWR0aCcpLnNsaWNlKDAsIC0yKTtcblx0ICAgIGlmIChwYXJzZUludCh3aWR0aC5zbGljZSgwLCAtMiksIDEwKSA+IHBhcnNlSW50KHBhbmVsTWluV2lkdGgsIDEwKSkgcmV0dXJuO1xuXHRcblx0ICAgIHBhbmVsLnN0eWxlLndpZHRoID0gXCJcIjtcblx0fVxuXG4vKioqLyB9LFxuLyogMzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uID0gc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uO1xuXHRleHBvcnRzLm1ha2VPcGFjaXR5U2xpZGVyID0gbWFrZU9wYWNpdHlTbGlkZXI7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHR2YXIgX2xheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHQvLyBzZXQgaXQgbWFudWFsbHkgZm9yIG5vd1xuXHR2YXIgT1BBQ0lUWV9SQU5HRV9NQVggPSA5MDtcblx0XG5cdHZhciBvcGFjaXR5U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMSwgMF0pLnJhbmdlKFswLCBPUEFDSVRZX1JBTkdFX01BWF0pLmNsYW1wKHRydWUpO1xuXHRcblx0ZnVuY3Rpb24gc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uKGxheWVyLCBzbGlkZXJIYW5kbGUsIG9wYWNpdHkpIHtcblx0ICAgIG9wYWNpdHkgPSBvcGFjaXR5IHx8IGxheWVyLm9wYWNpdHk7XG5cdCAgICBzbGlkZXJIYW5kbGUuc3R5bGUudG9wID0gJycgKyBvcGFjaXR5U2NhbGUob3BhY2l0eSkgKyAncHgnO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlT3BhY2l0eVNsaWRlcihsYXllcikge1xuXHQgICAgdmFyIGxheWVyT3BhY2l0eSA9IGxheWVyLm9wYWNpdHkgIT09IHVuZGVmaW5lZCA/IGxheWVyLm9wYWNpdHkgOiAxO1xuXHQgICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIHZhciBzbGlkZXJUcmFja092ZXJsYXkgPSBtYWtlU2xpZGVyVHJhY2sobGF5ZXIsIGxheWVyT3BhY2l0eSk7XG5cdCAgICB2YXIgaWNvbldyYXBwZXJDbG9zZWQgPSBtYWtlT3BhY2l0eUljb25XcmFwcGVyKCdjbG9zZWQnLCBsYXllciwgc2xpZGVyVHJhY2tPdmVybGF5KTtcblx0XG5cdCAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktc2xpZGVyLXdyYXBwZXInKTtcblx0ICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoc2xpZGVyVHJhY2tPdmVybGF5KTtcblx0ICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaWNvbldyYXBwZXJDbG9zZWQpO1xuXHQgICAgcmV0dXJuIHdyYXBwZXI7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VPcGFjaXR5SWNvbldyYXBwZXIoc3RhdGUsIGxheWVyLCBzbGlkZXJUcmFja092ZXJsYXkpIHtcblx0ICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICB2YXIgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXHQgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LWljb24td3JhcHBlcicpO1xuXHQgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LWljb24nKTtcblx0ICAgIGljb24uY2xhc3NMaXN0LmFkZChzdGF0ZSk7XG5cdCAgICBpY29uLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZ3Mvb3BhY2l0eS1pY29uLScgKyBzdGF0ZSArICctNjR4NjQucG5nJyk7XG5cdCAgICBpY29uLnNldEF0dHJpYnV0ZSgnYWx0JywgJ1VzZSB0aGlzIHNsaWRlciB0byBhZGp1c3QgdHJhbnNwYXJlbmN5IGZvciB0aGUgJyArIGxheWVyLm5hbWUgKyAnIGxheWVyJyk7XG5cdCAgICBpY29uLnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnVXNlIHRoaXMgc2xpZGVyIHRvIGFkanVzdCB0cmFuc3BhcmVuY3kgZm9yIHRoZSAnICsgbGF5ZXIubmFtZSArICcgbGF5ZXInKTtcblx0ICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaWNvbik7XG5cdCAgICB3cmFwcGVyLm9uY2xpY2sgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHZhciBzbGlkZXJIYW5kbGUgPSBzbGlkZXJUcmFja092ZXJsYXkuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnb3BhY2l0eS1zbGlkZXItaGFuZGxlJylbMF07XG5cdCAgICAgICAgKDAsIF9sYXllci51cGRhdGVMYXllck9wYWNpdHkpKGxheWVyLCAwKTtcblx0ICAgICAgICBzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb24obGF5ZXIsIHNsaWRlckhhbmRsZSwgMCk7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIHdyYXBwZXI7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VTbGlkZXJUcmFjayhsYXllciwgbGF5ZXJPcGFjaXR5KSB7XG5cdFxuXHQgICAgdmFyIG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIHZhciB0cmFjayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgdmFyIHNsaWRlckhhbmRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcblx0ICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1zbGlkZXItdHJhY2stb3ZlcmxheScpO1xuXHQgICAgdHJhY2suY2xhc3NMaXN0LmFkZCgnb3BhY2l0eS1zbGlkZXItdHJhY2snKTtcblx0ICAgIHNsaWRlckhhbmRsZS5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci1oYW5kbGUnKTtcblx0XG5cdCAgICBvdmVybGF5LmFwcGVuZENoaWxkKHRyYWNrKTtcblx0ICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQoc2xpZGVySGFuZGxlKTtcblx0XG5cdCAgICBpZiAobGF5ZXIuYWN0aXZlKSBzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb24obGF5ZXIsIHNsaWRlckhhbmRsZSk7XG5cdCAgICBzZXREcmFnRXZlbnRMaXN0ZW5lcihvdmVybGF5LCBsYXllciwgbGF5ZXJPcGFjaXR5KTtcblx0XG5cdCAgICByZXR1cm4gb3ZlcmxheTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2V0RHJhZ0V2ZW50TGlzdGVuZXIob3ZlcmxheSwgbGF5ZXIsIGxheWVyT3BhY2l0eSkge1xuXHQgICAgZDMuc2VsZWN0KG92ZXJsYXkpLmNhbGwoZDMuZHJhZygpLm9uKCdzdGFydCBkcmFnJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBzbGlkZXJIYW5kbGUgPSBvdmVybGF5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ29wYWNpdHktc2xpZGVyLWhhbmRsZScpWzBdO1xuXHQgICAgICAgIHZhciBuZXdPcGFjaXR5ID0gY2FsY09wYWNpdHlGcm9tTW91c2VQb3Mob3ZlcmxheSk7XG5cdCAgICAgICAgKDAsIF9sYXllci51cGRhdGVMYXllck9wYWNpdHkpKGxheWVyLCBuZXdPcGFjaXR5KTtcblx0ICAgICAgICBzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb24obGF5ZXIsIHNsaWRlckhhbmRsZSwgbmV3T3BhY2l0eSk7XG5cdCAgICB9KS5vbignZW5kJywgZnVuY3Rpb24gKCkge1xuXHRcblx0ICAgICAgICB2YXIgbmV3T3BhY2l0eSA9IGNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zKG92ZXJsYXkpO1xuXHRcblx0ICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBvcGFjaXR5IHNsaWRlciBjaGFuZ2Vcblx0ICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcblx0ICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ29wYWNpdHkgc2xpZGVyJyxcblx0ICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjaGFuZ2UnLFxuXHQgICAgICAgICAgICBldmVudExhYmVsOiAne1wiJyArIGxheWVyLm5hbWUgKyAnXCI6IFwiJyArIG5ld09wYWNpdHkgKyAnXCJ9Jyxcblx0ICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdCAgICB9KSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zKG92ZXJsYXkpIHtcblx0ICAgIHZhciB5UG9zID0gZDMubW91c2Uob3ZlcmxheSlbMV07XG5cdCAgICB2YXIgbmV3T3BhY2l0eSA9IG9wYWNpdHlTY2FsZS5pbnZlcnQoeVBvcyk7XG5cdCAgICByZXR1cm4gbmV3T3BhY2l0eTtcblx0fVxuXG4vKioqLyB9LFxuLyogMzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQ3JlYXRlTG9nbztcblx0LypcclxuXHQgIFwibG9nb1wiOiB7XHJcblx0ICAgIFwiaW1hZ2VcIjogXCJpbWdzL2xhbmRhdF9sb2dvX2JsdWUucG5nXCIsXHJcblx0ICAgIFwiYWx0XCI6IFwiTG9nbyBmb3IgdGhlIExhbkRhdCBwcm9qZWN0XCIsXHJcblx0ICAgIFwibGlua1wiOiBcImh0dHBzOi8vbGFuZGF0LWRldi5uZW1hYy5vcmdcIixcclxuXHQgICAgXCJsb2NhdGlvblwiOiBbXCJib3R0b21cIiwgXCJyaWdodFwiXVxyXG5cdCAgfSxcclxuXHQqL1xuXHRcblx0ZnVuY3Rpb24gQ3JlYXRlTG9nbyhsb2dvZGF0YSkge1xuXHQgICAgaWYgKCFsb2dvZGF0YS5pbWFnZSkgcmV0dXJuO1xuXHRcblx0ICAgIHZhciBsb2dvV3JhcHBlciA9IGNyZWF0ZUxvZ29XcmFwcGVyKCk7XG5cdCAgICB2YXIgbG9nb0ltYWdlID0gY3JlYXRlTG9nb0ltYWdlKGxvZ29kYXRhKTtcblx0ICAgIHZhciBsb2dvTGluayA9IGxvZ29kYXRhLmxpbmsgPyBjcmVhdGVMb2dvTGluayhsb2dvZGF0YS5saW5rKSA6IG51bGw7XG5cdFxuXHQgICAgaWYgKGxvZ29MaW5rKSB7XG5cdCAgICAgICAgbG9nb0xpbmsuYXBwZW5kQ2hpbGQobG9nb0ltYWdlKTtcblx0ICAgICAgICBsb2dvV3JhcHBlci5hcHBlbmRDaGlsZChsb2dvTGluayk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIGxvZ29XcmFwcGVyLmFwcGVuZENoaWxkKGxvZ29JbWFnZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGluc2VydEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGxvZ29kYXRhLmxvY2F0aW9uKVswXTtcblx0ICAgIHZhciBleGlzdGluZ0NoaWxkID0gaW5zZXJ0RWxlbWVudC5maXJzdENoaWxkO1xuXHQgICAgaW5zZXJ0RWxlbWVudC5pbnNlcnRCZWZvcmUobG9nb1dyYXBwZXIsIGV4aXN0aW5nQ2hpbGQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVMb2dvV3JhcHBlcigpIHtcblx0ICAgIHZhciBsb2dvV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICBkMy5zZWxlY3QobG9nb1dyYXBwZXIpLmNsYXNzZWQoXCJwcm9qZWN0LWxvZ29cIiwgdHJ1ZSk7XG5cdCAgICByZXR1cm4gbG9nb1dyYXBwZXI7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUxvZ29JbWFnZShsb2dvZGF0YSkge1xuXHQgICAgdmFyIGxvZ29JbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG5cdCAgICBsb2dvSW1hZ2Uuc2V0QXR0cmlidXRlKFwic3JjXCIsIGxvZ29kYXRhLmltYWdlKTtcblx0ICAgIGlmIChsb2dvZGF0YS5sYWJlbCkge1xuXHQgICAgICAgIGxvZ29JbWFnZS5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgbG9nb2RhdGEubGFiZWwpO1xuXHQgICAgICAgIGxvZ29JbWFnZS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBsb2dvZGF0YS5sYWJlbCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbG9nb0ltYWdlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVMb2dvTGluayhsaW5rKSB7XG5cdCAgICB2YXIgbG9nb0xpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcblx0ICAgIGxvZ29MaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgbGluayk7XG5cdCAgICBsb2dvTGluay5zZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIiwgXCJfYmxhbmtcIik7XG5cdFxuXHQgICAgbG9nb0xpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdFxuXHQgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBjbGlja2luZyBsb2dvXG5cdCAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XG5cdCAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdtYXAnLFxuXHQgICAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcblx0ICAgICAgICAgICAgZXZlbnRMYWJlbDogJ2xhbmRhdCBsb2dvJyxcblx0ICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXG5cdCAgICAgICAgfSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICByZXR1cm4gbG9nb0xpbms7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDMyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gaW5kZXhfYnVuZGxlLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgMDc2NTc1ZGUyMzI3Njg4ZWFjYmMiLCJpbXBvcnQge1BhcnNlQ29uZmlnfSBmcm9tICcuL3BhcnNlcic7XHJcbmltcG9ydCBDcmVhdGVTZWFyY2ggZnJvbSAnLi9zZWFyY2gnO1xyXG5pbXBvcnQge1NldHVwUGFuZWx9IGZyb20gJy4vcGFuZWwnO1xyXG5pbXBvcnQge0NyZWF0ZUJhc2VMYXllcnN9IGZyb20gJy4vYmFzZWxheWVyJztcclxuaW1wb3J0IHtTZXR1cEdyYXBocywgQmluZEdyYXBoRXZlbnRzLCBIYW5kbGVHcmFwaFRhYkNoYW5nZX0gZnJvbSAnLi9ncmFwaCdcclxuaW1wb3J0IHtCaW5kVGFiRXZlbnRzLCBIYW5kbGVUYWJDaGFuZ2V9IGZyb20gJy4vdGFicydcclxuaW1wb3J0IHtDcmVhdGVNYXB9IGZyb20gJy4vbWFwJ1xyXG5pbXBvcnQge0JpbmRVcGRhdGVTaGFyZVVybCwgQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnLCBCaW5kQ29weUxpbmtFdmVudHN9IGZyb20gJy4vc2hhcmUnXHJcbmltcG9ydCB7Q3JlYXRlRGVmYXVsdExheWVyc30gZnJvbSAnLi9sYXllcidcclxuaW1wb3J0IENyZWF0ZUxvZ28gZnJvbSAnLi9sb2dvJztcclxuaW1wb3J0IHtTZXR1cFBvaW50c09mSW50ZXJlc3R9IGZyb20gJy4vcG9pJztcclxuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSAnLi9zaGFyZSc7XHJcblxyXG52YXIgY3NzID0gcmVxdWlyZSgnLi4vY3NzL3Nhc3MvbGFuZGF0LnNjc3MnKVxyXG5cclxuLy8gRG9lcyBub3QgcmVseSBvbiBtYXAgb2JqZWN0IG9yIGNvbmZpZyBmaWxlXHJcbnZhciBCYXNlID0gZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgUGFyc2VDb25maWcoY29uZmlnLCBjYWxsYmFjayk7XHJcbiAgICBTZXR1cEdyYXBocygpO1xyXG4gICAgQmluZFRhYkV2ZW50cygpO1xyXG4gICAgQmluZENvcHlMaW5rRXZlbnRzKCk7XHJcbn1cclxuXHJcbi8vIERvZXMgcmVseSBvbiBtYXAgb2JqZWN0IG9yIGNvbmZpZyBmaWxlXHJcbnZhciBjYWxsYmFjayA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICBBZGRTaGFyZVNldHRpbmdzVG9Db25maWcoZGF0YSlcclxuICAgIHZhciBtYXAgPSBDcmVhdGVNYXAoZGF0YS5tYXApO1xyXG4gICAgQ3JlYXRlQmFzZUxheWVycyhtYXAsIGRhdGEuYmFzZWxheWVycyk7XHJcbiAgICBDcmVhdGVEZWZhdWx0TGF5ZXJzKGRhdGEubGF5ZXJzLCBkYXRhW1wiYWN0aXZlLWxheWVyc1wiXSk7XHJcbiAgICBTZXR1cFBhbmVsKGRhdGEubGF5ZXJzLCBkYXRhLmxheW91dCk7XHJcbiAgICBDcmVhdGVTZWFyY2gobWFwKTtcclxuICAgIENyZWF0ZUxvZ28oZGF0YS5sb2dvKTtcclxuICAgIGlmIChkYXRhLnRhYikgSGFuZGxlVGFiQ2hhbmdlKGRhdGEudGFiKTtcclxuICAgIGlmIChkYXRhLmdyYXBoKSBIYW5kbGVHcmFwaFRhYkNoYW5nZShkYXRhLmdyYXBoKTtcclxuICAgIEJpbmRHcmFwaEV2ZW50cyhtYXApO1xyXG4gICAgQmluZFVwZGF0ZVNoYXJlVXJsKG1hcCk7XHJcbiAgICBTZXR1cFBvaW50c09mSW50ZXJlc3QobWFwLCBkYXRhLnBvaXMpXHJcbiAgICB1cGRhdGVTaGFyZVVybCgpXHJcbn1cclxuXHJcbndpbmRvdy5CYXNlID0gQmFzZTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtCYXNlfTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvYmFzZS5qcyIsIi8qKlxyXG4gKiBQYXJzZXMgYSBjb25maWcgZmlsZS4gU2luY2UgdGhlIHByb2Nlc3MgdG8gZ2V0IGV4dGVybmFsIGZpbGVzXHJcbiAqIHVzZXMgQUpBWCB5b3UgbmVlZCB0byBwYXNzIGEgY2FsbGJhY2sgdG8gaGFuZGxlIHRoZSBuZXh0IHN0ZXBzXHJcbiAqIG9mIHVzaW5nIHRoZSBjb25maWcgZmlsZSwgc2luY2Ugd2UgZG8gbm90IGtub3cgaG93IGxvbmcgaXRcclxuICogd2lsbCB0YWtlIHRvIGdyYWIgdGhlIGZpbGUuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gUGFyc2VDb25maWcgKGNvbmZpZ0ZpbGUsIGNhbGxiYWNrKSB7XHJcbiAgICBHZXRDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2V0QWpheE9iamVjdChyZXNwb25zZUhhbmRsZXIpIHtcclxuICAgIHZhciB4bWxodHRwXHJcbiAgICBpZiAoIXdpbmRvdy5YTUxIdHRwUmVxdWVzdCAmJiB3aW5kb3cuQWN0aXZlWE9iamVjdCkge1xyXG4gICAgICAgIHhtbGh0dHAgPSBuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoXCJNU1hNTDIuWE1MSFRUUC4zLjBcIilcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgeG1saHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXHJcbiAgICB9XHJcbiAgICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoeG1saHR0cC5yZWFkeVN0YXRlID09PSA0KSB7XHJcbiAgICAgICAgICAgIHJlc3BvbnNlSGFuZGxlcih4bWxodHRwLnJlc3BvbnNlKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB4bWxodHRwXHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldENvbmZpZyAoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcclxuICAgIHZhciB4bWxodHRwID0gR2V0QWpheE9iamVjdChmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlSGFuZGxlcihyZXNwb25zZSlcclxuICAgICAgICBjYWxsYmFjayhkYXRhKVxyXG4gICAgfSlcclxuICAgIHhtbGh0dHAub3BlbihcIkdFVFwiLCBjb25maWdGaWxlLCB0cnVlKTtcclxuICAgIHhtbGh0dHAuc2VuZCgpO1xyXG4gICAgY29uc29sZS5sb2coXCJoaVwiKVxyXG59XHJcblxyXG5mdW5jdGlvbiByZXNwb25zZUhhbmRsZXIgKHJlc3BvbnNlKSB7XHJcbiAgICByZXNwb25zZSA9IEpTT04ucGFyc2UocmVzcG9uc2UpXHJcbiAgICBmb3JtYXRNYXAocmVzcG9uc2UpO1xyXG4gICAgZm9ybWF0TGF5ZXJzKHJlc3BvbnNlKTtcclxuICAgIHJldHVybiByZXNwb25zZVxyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRNYXAgKGRhdGEpIHtcclxuICAgIGlmICghZGF0YS5tYXApIGRhdGEubWFwID0ge307XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdExheWVycyAoZGF0YSkge1xyXG4gICAgdmFyIGxheWVycyA9IGRhdGEubGF5ZXJzO1xyXG4gICAgdmFyIGRlZmF1bHRNYXBzZXJ2ZXJVcmwgPSBkYXRhLm1hcHNlcnZlclVybDtcclxuICAgIHZhciBkZWZhdWx0RW5hYmxlZExheWVycyA9IGRhdGFbXCJhY3RpdmUtbGF5ZXJzXCJdO1xyXG4gICAgdmFyIGxheWVyZ3JvdXA7XHJcbiAgICB2YXIgaTtcclxuXHJcbiAgICBmb3IgKHZhciBwcm9wIGluIGxheWVycykge1xyXG4gICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XHJcbiAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGF5ZXJncm91cC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBzZXRNYXBzZXJ2ZXJVcmwobGF5ZXJncm91cFtpXSwgZGVmYXVsdE1hcHNlcnZlclVybCk7XHJcbiAgICAgICAgICAgIHNldERlZmF1bHRMYXllck9wYWNpdHkobGF5ZXJncm91cFtpXSwgZGF0YS5kZWZhdWx0TGF5ZXJPcGFjaXR5KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2V0RGVmYXVsdExheWVyT3BhY2l0eSAobGF5ZXIsIG9wYWNpdHkpIHtcclxuICAgIGxheWVyLm9wYWNpdHkgPSBsYXllci5vcGFjaXR5IHx8IG9wYWNpdHlcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0TWFwc2VydmVyVXJsIChsYXllciwgdXJsKSB7XHJcbiAgICBsYXllci51cmwgPSBsYXllci51cmwgfHwgdXJsO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3BhcnNlci5qcyIsImltcG9ydCB7IEdlb1NlYXJjaENvbnRyb2wsIE9wZW5TdHJlZXRNYXBQcm92aWRlciB9IGZyb20gJ2xlYWZsZXQtZ2Vvc2VhcmNoJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENyZWF0ZVNlYXJjaCAobWFwKSB7XHJcbiAgICBjb25zdCBwcm92aWRlciA9IG5ldyBPcGVuU3RyZWV0TWFwUHJvdmlkZXIoKTtcclxuXHJcbiAgICBjb25zdCBzZWFyY2hDb250cm9sID0gbmV3IEdlb1NlYXJjaENvbnRyb2woe1xyXG4gICAgICAgIHByb3ZpZGVyOiBwcm92aWRlcixcclxuICAgICAgICBzaG93TWFya2VyOiBmYWxzZSxcclxuICAgICAgICBhdXRvQ29tcGxldGU6IHRydWUsXHJcbiAgICAgICAgc2hvd1BvcHVwOiBmYWxzZSxcclxuICAgIH0pO1xyXG5cclxuICAgIG1hcC5hZGRDb250cm9sKHNlYXJjaENvbnRyb2wpO1xyXG5cclxuICAgIHZhciBzZWFyY2hFbGVtZW50cyA9IHNlYXJjaENvbnRyb2wuc2VhcmNoRWxlbWVudC5lbGVtZW50c1xyXG5cclxuICAgIEwuRG9tRXZlbnQub24oc2VhcmNoRWxlbWVudHMuY29udGFpbmVyLCBcImNsaWNrXCIsIGZ1bmN0aW9uIChldikge1xyXG4gICAgICAgIEwuRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKGV2KTtcclxuXHJcbiAgICAgICAgdmFyIHNlYXJjaEVudHJpZXMgPSBzZWFyY2hFbGVtZW50cy5mb3JtXHJcbiAgICAgICAgICAgIC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdyZXN1bHRzJylbMF0uY2hpbGRyZW5cclxuXHJcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPHNlYXJjaEVudHJpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGV2LnRhcmdldCA9PT0gc2VhcmNoRW50cmllc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgc2VhcmNoRWxlbWVudHMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBzZWFyY2ggYnkgYWRkcmVzc1xyXG4gICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xyXG4gICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcclxuICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdzZWFyY2gnLFxyXG4gICAgICAgICAgICBldmVudExhYmVsOiAnY2xpY2snLFxyXG4gICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICBMLkRvbUV2ZW50Lm9uKHNlYXJjaEVsZW1lbnRzLmNvbnRhaW5lciwgXCJrZXlkb3duXCIsIGZ1bmN0aW9uIChldikge1xyXG4gICAgICAgIEwuRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKGV2KTtcclxuXHJcbiAgICAgICAgaWYgKGV2LndoaWNoID09IDEzIHx8IGV2LmtleUNvZGUgPT0gMTMpIHtcclxuICAgICAgICAgICAgc2VhcmNoRWxlbWVudHMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcblxyXG4gICAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3Igc2VhY3JjaCBieSBhZGRyZXNzXHJcbiAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xyXG4gICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXHJcbiAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ3NlYXJjaCBhZGRyZXNzJyxcclxuICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6IGV2LnRhcmdldC52YWx1ZSxcclxuICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvc2VhcmNoLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2xlYWZsZXRDb250cm9sID0gcmVxdWlyZSgnLi9sZWFmbGV0Q29udHJvbCcpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0dlb1NlYXJjaENvbnRyb2wnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sZWFmbGV0Q29udHJvbCkuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfc2VhcmNoRWxlbWVudCA9IHJlcXVpcmUoJy4vc2VhcmNoRWxlbWVudCcpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1NlYXJjaEVsZW1lbnQnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZWFyY2hFbGVtZW50KS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9iaW5nUHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9iaW5nUHJvdmlkZXInKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdCaW5nUHJvdmlkZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iaW5nUHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX2VzcmlQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL2VzcmlQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0VzcmlQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2VzcmlQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfZ29vZ2xlUHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9nb29nbGVQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0dvb2dsZVByb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ29vZ2xlUHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX29wZW5TdHJlZXRNYXBQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL29wZW5TdHJlZXRNYXBQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ09wZW5TdHJlZXRNYXBQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX29wZW5TdHJlZXRNYXBQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVycy9wcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1Byb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL2luZGV4LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX25vZGVudFJ1bnRpbWUgPSByZXF1aXJlKCdub2RlbnQtcnVudGltZScpO1xuXG52YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IExlYWZsZXRDb250cm9sO1xuXG52YXIgX2xvZGFzaCA9IHJlcXVpcmUoJ2xvZGFzaC5kZWJvdW5jZScpO1xuXG52YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXG52YXIgX3NlYXJjaEVsZW1lbnQgPSByZXF1aXJlKCcuL3NlYXJjaEVsZW1lbnQnKTtcblxudmFyIF9zZWFyY2hFbGVtZW50MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaEVsZW1lbnQpO1xuXG52YXIgX3Jlc3VsdExpc3QgPSByZXF1aXJlKCcuL3Jlc3VsdExpc3QnKTtcblxudmFyIF9yZXN1bHRMaXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Jlc3VsdExpc3QpO1xuXG52YXIgX2RvbVV0aWxzID0gcmVxdWlyZSgnLi9kb21VdGlscycpO1xuXG52YXIgX2NvbnN0YW50cyA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBkZWZhdWx0T3B0aW9ucyA9IGZ1bmN0aW9uIGRlZmF1bHRPcHRpb25zKCkge1xuICByZXR1cm4ge1xuICAgIHBvc2l0aW9uOiAndG9wbGVmdCcsXG4gICAgc3R5bGU6ICdidXR0b24nLFxuICAgIHNob3dNYXJrZXI6IHRydWUsXG4gICAgc2hvd1BvcHVwOiBmYWxzZSxcbiAgICBtYXJrZXI6IHtcbiAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpLFxuICAgICAgZHJhZ2dhYmxlOiBmYWxzZVxuICAgIH0sXG4gICAgbWF4TWFya2VyczogMSxcbiAgICByZXRhaW5ab29tTGV2ZWw6IGZhbHNlLFxuICAgIGFuaW1hdGVab29tOiB0cnVlLFxuICAgIHNlYXJjaExhYmVsOiAnRW50ZXIgYWRkcmVzcycsXG4gICAgbm90Rm91bmRNZXNzYWdlOiAnU29ycnksIHRoYXQgYWRkcmVzcyBjb3VsZCBub3QgYmUgZm91bmQuJyxcbiAgICBtZXNzYWdlSGlkZURlbGF5OiAzMDAwLFxuICAgIHpvb21MZXZlbDogMTgsXG4gICAgY2xhc3NOYW1lczoge1xuICAgICAgY29udGFpbmVyOiAnbGVhZmxldC1iYXIgbGVhZmxldC1jb250cm9sIGxlYWZsZXQtY29udHJvbC1nZW9zZWFyY2gnLFxuICAgICAgYnV0dG9uOiAnbGVhZmxldC1iYXItcGFydCBsZWFmbGV0LWJhci1wYXJ0LXNpbmdsZScsXG4gICAgICBtc2dib3g6ICdsZWFmbGV0LWJhciBtZXNzYWdlJyxcbiAgICAgIGZvcm06ICcnLFxuICAgICAgaW5wdXQ6ICcnXG4gICAgfSxcbiAgICBhdXRvQ29tcGxldGU6IHRydWUsXG4gICAgYXV0b0NvbXBsZXRlRGVsYXk6IDI1MFxuICB9O1xufTtcblxudmFyIENvbnRyb2wgPSB7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUob3B0aW9ucykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB0aGlzLm1hcmtlcnMgPSBuZXcgTC5GZWF0dXJlR3JvdXAoKTtcblxuICAgIHRoaXMub3B0aW9ucyA9IF9leHRlbmRzKHt9LCBkZWZhdWx0T3B0aW9ucygpLCBvcHRpb25zKTtcblxuICAgIHZhciBfb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgc3R5bGUgPSBfb3B0aW9ucy5zdHlsZSxcbiAgICAgICAgY2xhc3NOYW1lcyA9IF9vcHRpb25zLmNsYXNzTmFtZXMsXG4gICAgICAgIHNlYXJjaExhYmVsID0gX29wdGlvbnMuc2VhcmNoTGFiZWwsXG4gICAgICAgIGF1dG9Db21wbGV0ZSA9IF9vcHRpb25zLmF1dG9Db21wbGV0ZSxcbiAgICAgICAgYXV0b0NvbXBsZXRlRGVsYXkgPSBfb3B0aW9ucy5hdXRvQ29tcGxldGVEZWxheTtcblxuICAgIGlmIChzdHlsZSAhPT0gJ2J1dHRvbicpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5jbGFzc05hbWVzLmNvbnRhaW5lciArPSAnICcgKyBvcHRpb25zLnN0eWxlO1xuICAgIH1cblxuICAgIHRoaXMuc2VhcmNoRWxlbWVudCA9IG5ldyBfc2VhcmNoRWxlbWVudDIuZGVmYXVsdChfZXh0ZW5kcyh7fSwgdGhpcy5vcHRpb25zLCB7XG4gICAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChxdWVyeSkge1xuICAgICAgICByZXR1cm4gX3RoaXMub25TdWJtaXQocXVlcnkpO1xuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHZhciBfc2VhcmNoRWxlbWVudCRlbGVtZW4gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMsXG4gICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5jb250YWluZXIsXG4gICAgICAgIGZvcm0gPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uZm9ybSxcbiAgICAgICAgaW5wdXQgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4uaW5wdXQ7XG5cbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9KTtcblxuICAgIHZhciBidXR0b24gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdhJywgY2xhc3NOYW1lcy5idXR0b24sIGNvbnRhaW5lcik7XG4gICAgYnV0dG9uLnRpdGxlID0gc2VhcmNoTGFiZWw7XG4gICAgYnV0dG9uLmhyZWYgPSAnIyc7XG5cbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25DbGljayhlKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICBpZiAoYXV0b0NvbXBsZXRlKSB7XG4gICAgICB0aGlzLnJlc3VsdExpc3QgPSBuZXcgX3Jlc3VsdExpc3QyLmRlZmF1bHQoe1xuICAgICAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2soX3JlZikge1xuICAgICAgICAgIHZhciByZXN1bHQgPSBfcmVmLnJlc3VsdDtcblxuICAgICAgICAgIGlucHV0LnZhbHVlID0gcmVzdWx0LmxhYmVsO1xuICAgICAgICAgIF90aGlzLm9uU3VibWl0KHsgcXVlcnk6IHJlc3VsdC5sYWJlbCB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGZvcm0uYXBwZW5kQ2hpbGQodGhpcy5yZXN1bHRMaXN0LmVsZW1lbnRzLmNvbnRhaW5lcik7XG5cbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKDAsIF9sb2Rhc2gyLmRlZmF1bHQpKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5hdXRvU2VhcmNoKGUpO1xuICAgICAgfSwgYXV0b0NvbXBsZXRlRGVsYXkpLCB0cnVlKTtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMuc2VsZWN0UmVzdWx0KGUpO1xuICAgICAgfSwgdHJ1ZSk7XG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmNsZWFyUmVzdWx0cyhlKTtcbiAgICAgIH0sIHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudHMgPSB7IGJ1dHRvbjogYnV0dG9uIH07XG4gIH0sXG4gIG9uQWRkOiBmdW5jdGlvbiBvbkFkZChtYXApIHtcbiAgICB2YXIgX29wdGlvbnMyID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBzaG93TWFya2VyID0gX29wdGlvbnMyLnNob3dNYXJrZXIsXG4gICAgICAgIHN0eWxlID0gX29wdGlvbnMyLnN0eWxlO1xuXG5cbiAgICB0aGlzLm1hcCA9IG1hcDtcbiAgICBpZiAoc2hvd01hcmtlcikge1xuICAgICAgdGhpcy5tYXJrZXJzLmFkZFRvKG1hcCk7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlID09PSAnYmFyJykge1xuICAgICAgdmFyIGZvcm0gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuZm9ybTtcblxuICAgICAgdmFyIHJvb3QgPSBtYXAuZ2V0Q29udGFpbmVyKCkucXVlcnlTZWxlY3RvcignLmxlYWZsZXQtY29udHJvbC1jb250YWluZXInKTtcblxuICAgICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsICdsZWFmbGV0LWNvbnRyb2wtZ2Vvc2VhcmNoIGJhcicpO1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZvcm0pO1xuICAgICAgcm9vdC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgICAgdGhpcy5lbGVtZW50cy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5jb250YWluZXI7XG4gIH0sXG4gIG9uUmVtb3ZlOiBmdW5jdGlvbiBvblJlbW92ZSgpIHtcbiAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cbiAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICBjb250YWluZXIucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH0sXG4gIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIF9zZWFyY2hFbGVtZW50JGVsZW1lbjIgPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMsXG4gICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbjIuY29udGFpbmVyLFxuICAgICAgICBpbnB1dCA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbjIuaW5wdXQ7XG5cblxuICAgIGlmIChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgICBpbnB1dC5mb2N1cygpO1xuICAgIH1cbiAgfSxcbiAgc2VsZWN0UmVzdWx0OiBmdW5jdGlvbiBzZWxlY3RSZXN1bHQoZXZlbnQpIHtcbiAgICBpZiAoIVtfY29uc3RhbnRzLkFSUk9XX0RPV05fS0VZLCBfY29uc3RhbnRzLkFSUk9XX1VQX0tFWV0uaW5jbHVkZXMoZXZlbnQua2V5Q29kZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciBpbnB1dCA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5pbnB1dDtcblxuXG4gICAgdmFyIGxpc3QgPSB0aGlzLnJlc3VsdExpc3Q7XG4gICAgdmFyIG1heCA9IHRoaXMucmVzdWx0TGlzdC5jb3VudCgpIC0gMTtcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gICAgdmFyIG5leHQgPSBldmVudC5jb2RlID09PSAnQXJyb3dEb3duJyA/IH5+bGlzdC5zZWxlY3RlZCArIDEgOiB+fmxpc3Quc2VsZWN0ZWQgLSAxO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeVxuICAgIHZhciBpZHggPSBuZXh0IDwgMCA/IG1heCA6IG5leHQgPiBtYXggPyAwIDogbmV4dDtcblxuICAgIHZhciBpdGVtID0gbGlzdC5zZWxlY3QoaWR4KTtcbiAgICBpbnB1dC52YWx1ZSA9IGl0ZW0ubGFiZWw7XG4gIH0sXG4gIGNsZWFyUmVzdWx0czogZnVuY3Rpb24gY2xlYXJSZXN1bHRzKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgIT09IF9jb25zdGFudHMuRVNDQVBFX0tFWSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucmVzdWx0TGlzdC5jbGVhcigpO1xuICB9LFxuICBhdXRvU2VhcmNoOiBmdW5jdGlvbiBhdXRvU2VhcmNoKGV2ZW50KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgIHZhciBxdWVyeSwgcHJvdmlkZXIsIHJlc3VsdHM7XG5cbiAgICAgIGlmIChfY29uc3RhbnRzLlNQRUNJQUxfS0VZUy5pbmNsdWRlcyhldmVudC5rZXlDb2RlKSkge1xuICAgICAgICByZXR1cm4gJHJldHVybigpO1xuICAgICAgfVxuXG4gICAgICBxdWVyeSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICAgIHByb3ZpZGVyID0gdGhpcy5vcHRpb25zLnByb3ZpZGVyO1xuICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlYXJjaCh7IHF1ZXJ5OiBxdWVyeSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXG4gICAgICAgIHJlc3VsdHMgPSAkYXdhaXRfMTtcbiAgICAgICAgdGhpcy5yZXN1bHRMaXN0LnJlbmRlcihyZXN1bHRzKTtcbiAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcbiAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG4gIH0sXG4gIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdChxdWVyeSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG4gICAgICB2YXIgcHJvdmlkZXIsIHJlc3VsdHM7XG4gICAgICBwcm92aWRlciA9IHRoaXMub3B0aW9ucy5wcm92aWRlcjtcbiAgICAgIHJldHVybiBwcm92aWRlci5zZWFyY2gocXVlcnkpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG5cbiAgICAgICAgcmVzdWx0cyA9ICRhd2FpdF8yO1xuXG4gICAgICAgIGlmIChyZXN1bHRzICYmIHJlc3VsdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuc2hvd1Jlc3VsdChyZXN1bHRzWzBdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJHJldHVybigpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgfSxcbiAgc2hvd1Jlc3VsdDogZnVuY3Rpb24gc2hvd1Jlc3VsdChyZXN1bHQpIHtcbiAgICB2YXIgbWFya2VycyA9IE9iamVjdC5rZXlzKHRoaXMubWFya2Vycy5fbGF5ZXJzKTtcbiAgICBpZiAobWFya2Vycy5sZW5ndGggPj0gdGhpcy5vcHRpb25zLm1heE1hcmtlcnMpIHtcbiAgICAgIHRoaXMubWFya2Vycy5yZW1vdmVMYXllcihtYXJrZXJzWzBdKTtcbiAgICB9XG5cbiAgICB2YXIgbWFya2VyID0gdGhpcy5hZGRNYXJrZXIocmVzdWx0KTtcbiAgICB0aGlzLmNlbnRlck1hcChyZXN1bHQpO1xuXG4gICAgdGhpcy5tYXAuZmlyZUV2ZW50KCdnZW9zZWFyY2gvc2hvd2xvY2F0aW9uJywge1xuICAgICAgbG9jYXRpb246IHJlc3VsdCxcbiAgICAgIG1hcmtlcjogbWFya2VyXG4gICAgfSk7XG4gIH0sXG4gIGFkZE1hcmtlcjogZnVuY3Rpb24gYWRkTWFya2VyKHJlc3VsdCkge1xuICAgIHZhciBfb3B0aW9uczMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIG9wdGlvbnMgPSBfb3B0aW9uczMubWFya2VyLFxuICAgICAgICBzaG93UG9wdXAgPSBfb3B0aW9uczMuc2hvd1BvcHVwO1xuXG4gICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihbcmVzdWx0LnksIHJlc3VsdC54XSwgb3B0aW9ucyk7XG4gICAgbWFya2VyLmJpbmRQb3B1cChyZXN1bHQubGFiZWwpO1xuXG4gICAgdGhpcy5tYXJrZXJzLmFkZExheWVyKG1hcmtlcik7XG5cbiAgICBpZiAoc2hvd1BvcHVwKSB7XG4gICAgICBtYXJrZXIub3BlblBvcHVwKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hcmtlcjtcbiAgfSxcbiAgY2VudGVyTWFwOiBmdW5jdGlvbiBjZW50ZXJNYXAocmVzdWx0KSB7XG4gICAgdmFyIF9vcHRpb25zNCA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgcmV0YWluWm9vbUxldmVsID0gX29wdGlvbnM0LnJldGFpblpvb21MZXZlbCxcbiAgICAgICAgYW5pbWF0ZVpvb20gPSBfb3B0aW9uczQuYW5pbWF0ZVpvb207XG5cblxuICAgIHZhciByZXN1bHRCb3VuZHMgPSBuZXcgTC5MYXRMbmdCb3VuZHMocmVzdWx0LmJvdW5kcyk7XG4gICAgdmFyIGJvdW5kcyA9IHJlc3VsdEJvdW5kcy5pc1ZhbGlkKCkgPyByZXN1bHRCb3VuZHMgOiB0aGlzLm1hcmtlcnMuZ2V0Qm91bmRzKCk7XG5cbiAgICBpZiAoIXJldGFpblpvb21MZXZlbCAmJiByZXN1bHRCb3VuZHMuaXNWYWxpZCgpKSB7XG4gICAgICB0aGlzLm1hcC5maXRCb3VuZHMoYm91bmRzLCB7IGFuaW1hdGU6IGFuaW1hdGVab29tIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1hcC5zZXRWaWV3KGJvdW5kcy5nZXRDZW50ZXIoKSwgdGhpcy5nZXRab29tKCksIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG4gICAgfVxuICB9LFxuICBnZXRab29tOiBmdW5jdGlvbiBnZXRab29tKCkge1xuICAgIHZhciBfb3B0aW9uczUgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHJldGFpblpvb21MZXZlbCA9IF9vcHRpb25zNS5yZXRhaW5ab29tTGV2ZWwsXG4gICAgICAgIHpvb21MZXZlbCA9IF9vcHRpb25zNS56b29tTGV2ZWw7XG5cbiAgICByZXR1cm4gcmV0YWluWm9vbUxldmVsID8gdGhpcy5tYXAuZ2V0Wm9vbSgpIDogem9vbUxldmVsO1xuICB9XG59O1xuXG5mdW5jdGlvbiBMZWFmbGV0Q29udHJvbCgpIHtcbiAgaWYgKCFMIHx8ICFMLkNvbnRyb2wgfHwgIUwuQ29udHJvbC5leHRlbmQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0xlYWZsZXQgbXVzdCBiZSBsb2FkZWQgYmVmb3JlIGluc3RhbnRpYXRpbmcgdGhlIEdlb1NlYXJjaCBjb250cm9sJyk7XG4gIH1cblxuICB2YXIgTENvbnRyb2wgPSBMLkNvbnRyb2wuZXh0ZW5kKENvbnRyb2wpO1xuXG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBvcHRpb25zID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgb3B0aW9uc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBuZXcgKEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmFwcGx5KExDb250cm9sLCBbbnVsbF0uY29uY2F0KG9wdGlvbnMpKSkoKTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9sZWFmbGV0Q29udHJvbC5qcyIsIlwidXNlIHN0cmljdFwiO1xuLypcbiAqICRhc3luY2JpbmQgaGFzIG11bHRpcGxlIHVzZXMsIGRlcGVuZGluZyBvbiB0aGUgcGFyYW1ldGVyIGxpc3QuIEl0IGlzIGluIEZ1bmN0aW9uLnByb3RvdHlwZSwgc28gJ3RoaXMnIGlzIGFsd2F5cyBhIGZ1bmN0aW9uXG4gKlxuICogMSkgSWYgY2FsbGVkIHdpdGggYSBzaW5nbGUgYXJndW1lbnQgKHRoaXMpLCBpdCBpcyB1c2VkIHdoZW4gZGVmaW5pbmcgYW4gYXN5bmMgZnVuY3Rpb24gdG8gZW5zdXJlIHdoZW5cbiAqICAgICAgaXQgaXMgaW52b2tlZCwgdGhlIGNvcnJlY3QgJ3RoaXMnIGlzIHByZXNlbnQsIGp1c3QgbGlrZSBcImJpbmRcIi4gRm9yIGxlZ2FjeSByZWFzb25zLCAndGhpcycgaXMgZ2l2ZW5cbiAqICAgICAgYSBtZW1lYmVyICd0aGVuJyB3aGljaCByZWZlcnMgdG8gaXRzZWxmLlxuICogMikgSWYgY2FsbGVkIHdpdGggYSBzZWNvbmQgcGFyYW1ldGVyIChcImNhdGNoZXJcIikgYW5kIGNhdGNoZXIhPT10cnVlIGl0IGlzIGJlaW5nIHVzZWQgdG8gaW52b2tlIGFuIGFzeW5jXG4gKiAgICAgIGZ1bmN0aW9uIHdoZXJlIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIHRoZSBlcnJvciBjYWxsYmFjayAoZm9yIHN5bmMgZXhjZXB0aW9ucyBhbmQgdG8gYmUgcGFzc2VkIHRvXG4gKiAgICAgIG5lc3RlZCBhc3luYyBjYWxscylcbiAqIDMpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09dHJ1ZSwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG4gKiAgICAgIGluIGFuICdQcm9taXNlJyBhcyB3ZWxsIGJvdW5kIHRvICd0aGlzJy5cbiAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IFByb21pc2UodGhpcyknLCB3aGVyZSAndGhpcycgaXMgdGhlIGZ1bmN0aW9uIGJlaW5nIGJvdW5kL3dyYXBwZWRcbiAqIDQpIElmIGNhbGxlZCB3aXRoIHRoZSBzZWNvbmQgcGFyYW1ldGVyPT09MCwgaXQgaXMgdGhlIHNhbWUgdXNlIGFzICgxKSwgYnV0IHRoZSBmdW5jdGlvbiBpcyB3cmFwcGVkXG4gKiAgICAgIGluIGEgJ0xhenlUaGVuYWJsZScsIHdoaWNoIGV4ZWN1dGVzIGxhemlseSBhbmQgY2FuIHJlc29sdmUgc3luY2hyb25vdXNseS5cbiAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IExhenlUaGVuYWJsZSh0aGlzKScgKGlmIHN1Y2ggYSB0eXBlIHdlcmUgZXhwb3NlZCksIHdoZXJlICd0aGlzJyBpc1xuICogICAgICB0aGUgZnVuY3Rpb24gYmVpbmcgYm91bmQvd3JhcHBlZFxuICovXG5cbmZ1bmN0aW9uIHByb2Nlc3NJbmNsdWRlcyhpbmNsdWRlcyxpbnB1dCkge1xuICAgIHZhciBzcmMgPSBpbnB1dC50b1N0cmluZygpIDtcbiAgICB2YXIgdCA9IFwicmV0dXJuIFwiK3NyYyA7XG4gICAgdmFyIGFyZ3MgPSBzcmMubWF0Y2goLy4qXFwoKFteKV0qKVxcKS8pWzFdIDtcbiAgICB2YXIgcmUgPSAvWydcIl0hISEoW14nXCJdKilbJ1wiXS9nIDtcbiAgICB2YXIgbSA9IFtdIDtcbiAgICB3aGlsZSAoMSkge1xuICAgICAgICB2YXIgbXggPSByZS5leGVjKHQpIDtcbiAgICAgICAgaWYgKG14KVxuICAgICAgICAgICAgbS5wdXNoKG14KSA7XG4gICAgICAgIGVsc2UgYnJlYWsgO1xuICAgIH1cbiAgICBtLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe1xuICAgICAgICB0ID0gdC5zbGljZSgwLGUuaW5kZXgpK2luY2x1ZGVzW2VbMV1dK3Quc3Vic3RyKGUuaW5kZXgrZVswXS5sZW5ndGgpIDtcbiAgICB9KSA7XG4gICAgdCA9IHQucmVwbGFjZSgvXFwvXFwqW14qXSpcXCpcXC8vZywnICcpLnJlcGxhY2UoL1xccysvZywnICcpIDtcbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKGFyZ3MsdCkoKSA7XG59XG5cbnZhciAkYXN5bmNiaW5kID0gcHJvY2Vzc0luY2x1ZGVzKHtcbiAgICB6b3VzYW46cmVxdWlyZSgnLi96b3VzYW4nKS50b1N0cmluZygpLFxuICAgIHRoZW5hYmxlOnJlcXVpcmUoJy4vdGhlbmFibGVGYWN0b3J5JykudG9TdHJpbmcoKVxufSxcbmZ1bmN0aW9uICRhc3luY2JpbmQoc2VsZixjYXRjaGVyKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jYmluZCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLFwiJGFzeW5jYmluZFwiLHt2YWx1ZTokYXN5bmNiaW5kLGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6dHJ1ZX0pIDtcbiAgICB9XG5cbiAgICBpZiAoISRhc3luY2JpbmQudHJhbXBvbGluZSkge1xuICAgICAgJGFzeW5jYmluZC50cmFtcG9saW5lID0gZnVuY3Rpb24gdHJhbXBvbGluZSh0LHgscyxlLHUpe1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gYihxKSB7XG4gICAgICAgICAgICAgICAgd2hpbGUgKHEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHEudGhlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHEudGhlbihiLCBlKSA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdT91bmRlZmluZWQ6cTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEucG9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHEucG9wKCkgPyB4LmNhbGwodCkgOiBxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBzO1xuICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBxLmNhbGwodClcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAocikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUocik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICghJGFzeW5jYmluZC5MYXp5VGhlbmFibGUpIHtcbiAgICAgICAgJGFzeW5jYmluZC5MYXp5VGhlbmFibGUgPSAnISEhdGhlbmFibGUnKCk7XG4gICAgICAgICRhc3luY2JpbmQuRWFnZXJUaGVuYWJsZSA9ICRhc3luY2JpbmQuVGhlbmFibGUgPSAoJGFzeW5jYmluZC5FYWdlclRoZW5hYmxlRmFjdG9yeSA9ICchISF6b3VzYW4nKSgpO1xuICAgIH1cblxuICAgIHZhciByZXNvbHZlciA9IHRoaXM7XG4gICAgc3dpdGNoIChjYXRjaGVyKSB7XG4gICAgY2FzZSB0cnVlOlxuICAgICAgICByZXR1cm4gbmV3ICgkYXN5bmNiaW5kLlRoZW5hYmxlKShib3VuZFRoZW4pO1xuICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIG5ldyAoJGFzeW5jYmluZC5MYXp5VGhlbmFibGUpKGJvdW5kVGhlbik7XG4gICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICAgIC8qIEZvciBydW50aW1lIGNvbXBhdGliaWxpdHkgd2l0aCBOb2RlbnQgdjIueCwgcHJvdmlkZSBhIHRoZW5hYmxlICovXG4gICAgICAgIGJvdW5kVGhlbi50aGVuID0gYm91bmRUaGVuIDtcbiAgICAgICAgcmV0dXJuIGJvdW5kVGhlbiA7XG4gICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlci5hcHBseShzZWxmLGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9IGNhdGNoKGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhdGNoZXIoZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIGJvdW5kVGhlbigpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmVyLmFwcGx5KHNlbGYsYXJndW1lbnRzKTtcbiAgICB9XG59KSA7XG5cbmZ1bmN0aW9uICRhc3luY3NwYXduKHByb21pc2VQcm92aWRlcixzZWxmKSB7XG4gICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jc3Bhd24pIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSxcIiRhc3luY3NwYXduXCIse3ZhbHVlOiRhc3luY3NwYXduLGVudW1lcmFibGU6ZmFsc2UsY29uZmlndXJhYmxlOnRydWUsd3JpdGFibGU6dHJ1ZX0pIDtcbiAgICB9XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEZ1bmN0aW9uKSkgcmV0dXJuIDtcblxuICAgIHZhciBnZW5GID0gdGhpcyA7XG4gICAgcmV0dXJuIG5ldyBwcm9taXNlUHJvdmlkZXIoZnVuY3Rpb24gZW5vdWdoKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgZ2VuID0gZ2VuRi5jYWxsKHNlbGYsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAoZm4sYXJnKSB7XG4gICAgICAgICAgICB2YXIgbmV4dDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbmV4dCA9IGZuLmNhbGwoZ2VuLGFyZyk7XG4gICAgICAgICAgICAgICAgaWYobmV4dC5kb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlICE9PSByZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV4dC52YWx1ZSAmJiBuZXh0LnZhbHVlPT09bmV4dC52YWx1ZS50aGVuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0LnZhbHVlKHJlc29sdmUscmVqZWN0KSA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlICYmIHJlc29sdmUobmV4dC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gbnVsbCA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlLnRoZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dC52YWx1ZS50aGVuKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLm5leHQsdik7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLnRocm93LGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi5uZXh0LG5leHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgIHJlamVjdCAmJiByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgcmVqZWN0ID0gbnVsbCA7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0ZXAoZ2VuLm5leHQpO1xuICAgIH0pO1xufVxuXG4vLyBJbml0aWFsaXplIGFzeW5jIGJpbmRpbmdzXG4kYXN5bmNiaW5kKCkgO1xuJGFzeW5jc3Bhd24oKSA7XG5cbi8vIEV4cG9ydCBhc3luYyBiaW5kaW5nc1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgJGFzeW5jYmluZDokYXN5bmNiaW5kLFxuICAgICRhc3luY3NwYXduOiRhc3luY3NwYXduXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9ub2RlbnQtcnVudGltZS9ydW50aW1lLmpzIiwiLyogVGhpcyBjb2RlIGlzIGJhc2VkIG9uOlxuem91c2FuIC0gQSBMaWdodG5pbmcgRmFzdCwgWWV0IFZlcnkgU21hbGwgUHJvbWlzZSBBKyBDb21wbGlhbnQgSW1wbGVtZW50YXRpb25cbmh0dHBzOi8vZ2l0aHViLmNvbS9ibHVlamF2YS96b3VzYW5cbkF1dGhvcjogR2xlbm4gQ3Jvd25vdmVyIDxnbGVubkBibHVlamF2YS5jb20+IChodHRwOi8vd3d3LmJsdWVqYXZhLmNvbSlcblZlcnNpb24gMi4zLjNcbkxpY2Vuc2U6IE1JVCAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRpY2spe1xuICAgIHRpY2sgPSB0aWNrIHx8ICh0eXBlb2YgcHJvY2Vzcz09PVwib2JqZWN0XCIgJiYgcHJvY2Vzcy5uZXh0VGljaykgfHwgKHR5cGVvZiBzZXRJbW1lZGlhdGU9PT1cImZ1bmN0aW9uXCIgJiYgc2V0SW1tZWRpYXRlKSB8fCBmdW5jdGlvbihmKXtzZXRUaW1lb3V0KGYsMCl9O1xuICAgIHZhciBzb29uID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZxID0gW10sIGZxU3RhcnQgPSAwLCBidWZmZXJTaXplID0gMTAyNDtcbiAgICAgICAgZnVuY3Rpb24gY2FsbFF1ZXVlKCkge1xuICAgICAgICAgICAgd2hpbGUgKGZxLmxlbmd0aCAtIGZxU3RhcnQpIHtcbiAgICAgICAgICAgICAgICB0cnkgeyBmcVtmcVN0YXJ0XSgpIH0gY2F0Y2goZXgpIHsgLyogY29uc29sZS5lcnJvcihleCkgKi8gfVxuICAgICAgICAgICAgICAgIGZxW2ZxU3RhcnQrK10gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaWYgKGZxU3RhcnQgPT09IGJ1ZmZlclNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgZnEuc3BsaWNlKDAsIGJ1ZmZlclNpemUpO1xuICAgICAgICAgICAgICAgICAgICBmcVN0YXJ0ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICBmcS5wdXNoKGZuKTtcbiAgICAgICAgICAgIGlmIChmcS5sZW5ndGggLSBmcVN0YXJ0ID09PSAxKVxuICAgICAgICAgICAgICAgIHRpY2soY2FsbFF1ZXVlKTtcbiAgICAgICAgfTtcbiAgICB9KSgpO1xuXG4gICAgZnVuY3Rpb24gWm91c2FuKGZ1bmMpIHtcbiAgICAgICAgaWYgKGZ1bmMpIHtcbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgICAgICBmdW5jKGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgICAgICAgICBtZS5yZXNvbHZlKGFyZyk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoYXJnKSB7XG4gICAgICAgICAgICAgICAgbWUucmVqZWN0KGFyZyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIFpvdXNhbi5wcm90b3R5cGUgPSB7XG4gICAgICAgIHJlc29sdmU6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJBdHRlbXB0IHRvIHJlc29sdmUgcHJvbWlzZSB3aXRoIHNlbGZcIikpO1xuICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgICAgIGlmICh2YWx1ZSAmJiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aGVuID0gdmFsdWUudGhlbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVuY3Rpb24gKHJhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJlc29sdmUocmEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5yZWplY3QocnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRlVMRklMTEVEO1xuICAgICAgICAgICAgdGhpcy52ID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAobWUuYylcbiAgICAgICAgICAgICAgICBzb29uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIGwgPSBtZS5jLmxlbmd0aDtuIDwgbDsgbisrKVxuICAgICAgICAgICAgICAgICAgICAgICAgU1RBVEVfRlVMRklMTEVEKG1lLmNbbl0sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVqZWN0OiBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9SRUpFQ1RFRDtcbiAgICAgICAgICAgIHRoaXMudiA9IHJlYXNvbjtcbiAgICAgICAgICAgIHZhciBjbGllbnRzID0gdGhpcy5jO1xuICAgICAgICAgICAgaWYgKGNsaWVudHMpXG4gICAgICAgICAgICAgICAgc29vbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCBsID0gY2xpZW50cy5sZW5ndGg7biA8IGw7IG4rKylcbiAgICAgICAgICAgICAgICAgICAgICAgIFNUQVRFX1JFSkVDVEVEKGNsaWVudHNbbl0sIHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHRoZW46IGZ1bmN0aW9uIChvbkYsIG9uUikge1xuICAgICAgICAgICAgdmFyIHAgPSBuZXcgWm91c2FuKCk7XG4gICAgICAgICAgICB2YXIgY2xpZW50ID0ge1xuICAgICAgICAgICAgICAgIHk6IG9uRixcbiAgICAgICAgICAgICAgICBuOiBvblIsXG4gICAgICAgICAgICAgICAgcDogcFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmMucHVzaChjbGllbnQpO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jID0gW2NsaWVudF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcy5zdGF0ZSwgYSA9IHRoaXMudjtcbiAgICAgICAgICAgICAgICBzb29uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcyhjbGllbnQsIGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gU1RBVEVfRlVMRklMTEVEKGMsIGFyZykge1xuICAgICAgICBpZiAodHlwZW9mIGMueSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciB5cmV0ID0gYy55LmNhbGwodW5kZWZpbmVkLCBhcmcpO1xuICAgICAgICAgICAgICAgIGMucC5yZXNvbHZlKHlyZXQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgYy5wLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2VcbiAgICAgICAgICAgIGMucC5yZXNvbHZlKGFyZyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gU1RBVEVfUkVKRUNURUQoYywgcmVhc29uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYy5uID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHlyZXQgPSBjLm4uY2FsbCh1bmRlZmluZWQsIHJlYXNvbik7XG4gICAgICAgICAgICAgICAgYy5wLnJlc29sdmUoeXJldCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjLnAucmVqZWN0KGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgYy5wLnJlamVjdChyZWFzb24pO1xuICAgIH1cblxuICAgIFpvdXNhbi5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICBpZiAodmFsICYmICh2YWwgaW5zdGFuY2VvZiBab3VzYW4pKVxuICAgICAgICAgICAgcmV0dXJuIHZhbCA7XG4gICAgICAgIHZhciB6ID0gbmV3IFpvdXNhbigpO1xuICAgICAgICB6LnJlc29sdmUodmFsKTtcbiAgICAgICAgcmV0dXJuIHo7XG4gICAgfTtcbiAgICBab3VzYW4ucmVqZWN0ID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoZXJyICYmIChlcnIgaW5zdGFuY2VvZiBab3VzYW4pKVxuICAgICAgICAgICAgcmV0dXJuIGVyciA7XG4gICAgICAgIHZhciB6ID0gbmV3IFpvdXNhbigpO1xuICAgICAgICB6LnJlamVjdChlcnIpO1xuICAgICAgICByZXR1cm4gejtcbiAgICB9O1xuXG4gICAgWm91c2FuLnZlcnNpb24gPSBcIjIuMy4zLW5vZGVudFwiIDtcbiAgICByZXR1cm4gWm91c2FuIDtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L25vZGVudC1ydW50aW1lL3pvdXNhbi5qcyIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ2YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcbn07XG5leHBvcnRzLmNsZWFyVGltZW91dCA9XG5leHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7XG4gIGlmICh0aW1lb3V0KSB7XG4gICAgdGltZW91dC5jbG9zZSgpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG4gIHRoaXMuX2lkID0gaWQ7XG4gIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xufVxuVGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbigpIHt9O1xuVGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdywgdGhpcy5faWQpO1xufTtcblxuLy8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5leHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcbiAgaWYgKG1zZWNzID49IDApIHtcbiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcbiAgICB9LCBtc2Vjcyk7XG4gIH1cbn07XG5cbi8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3RcbnJlcXVpcmUoXCJzZXRpbW1lZGlhdGVcIik7XG5leHBvcnRzLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L21haW4uanMiLCIoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm9cbiAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblxuICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG4gICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcbiAgICAgIH1cbiAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuICAgICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG4gICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcbiAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuKHRhc2spIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcbiAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG4gICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uXG4gICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcbiAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG4gICAgICAgICAgICAvLyBcInRvbyBtdWNoIHJlY3Vyc2lvblwiIGVycm9yLlxuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsgcnVuSWZQcmVzZW50KGhhbmRsZSk7IH0pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG4gICAgICAgIC8vIHdoZXJlIGBnbG9iYWwucG9zdE1lc3NhZ2VgIG1lYW5zIHNvbWV0aGluZyBjb21wbGV0ZWx5IGRpZmZlcmVudCBhbmQgY2FuJ3QgYmUgdXNlZCBmb3IgdGhpcyBwdXJwb3NlLlxuICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG9sZE9uTWVzc2FnZSA9IGdsb2JhbC5vbm1lc3NhZ2U7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShcIlwiLCBcIipcIik7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG4gICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG5cbiAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSBcInNldEltbWVkaWF0ZSRcIiArIE1hdGgucmFuZG9tKCkgKyBcIiRcIjtcbiAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cbiAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS5cbiAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG4gICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cbiAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG4gICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuICAgICAgICAvLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45XG4gICAgICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGNhblVzZVBvc3RNZXNzYWdlKCkpIHtcbiAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcbiAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcbiAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcbiAgICAgICAgLy8gRm9yIElFIDbigJM4XG4gICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG4gICAgfVxuXG4gICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuICAgIGF0dGFjaFRvLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG59KHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiID8gdHlwZW9mIGdsb2JhbCA9PT0gXCJ1bmRlZmluZWRcIiA/IHRoaXMgOiBnbG9iYWwgOiBzZWxmKSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9+L3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanMiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIGlzVGhlbmFibGUob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogJiYgKG9iaiBpbnN0YW5jZW9mIE9iamVjdCkgJiYgdHlwZW9mIG9iai50aGVuPT09XCJmdW5jdGlvblwiO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc29sdXRpb24ocCxyLGhvdykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLyogMi4yLjcuMSAqL1xuICAgICAgICAgICAgdmFyIHggPSBob3cgPyBob3cocik6ciA7XG5cbiAgICAgICAgICAgIGlmIChwPT09eCkgLyogMi4zLjEgKi9cbiAgICAgICAgICAgICAgICByZXR1cm4gcC5yZWplY3QobmV3IFR5cGVFcnJvcihcIlByb21pc2UgcmVzb2x1dGlvbiBsb29wXCIpKSA7XG5cbiAgICAgICAgICAgIGlmIChpc1RoZW5hYmxlKHgpKSB7XG4gICAgICAgICAgICAgICAgLyogMi4zLjMgKi9cbiAgICAgICAgICAgICAgICB4LnRoZW4oZnVuY3Rpb24oeSl7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb24ocCx5KTtcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgICAgICAgICBwLnJlamVjdChlKVxuICAgICAgICAgICAgICAgIH0pIDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcC5yZXNvbHZlKHgpIDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIC8qIDIuMi43LjIgKi9cbiAgICAgICAgICAgIHAucmVqZWN0KGV4KSA7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBDaGFpbmVkKCkge307XG4gICAgQ2hhaW5lZC5wcm90b3R5cGUgPSB7XG4gICAgICAgIHJlc29sdmU6X3VuY2hhaW5lZCxcbiAgICAgICAgcmVqZWN0Ol91bmNoYWluZWQsXG4gICAgICAgIHRoZW46dGhlbkNoYWluXG4gICAgfTtcbiAgICBmdW5jdGlvbiBfdW5jaGFpbmVkKHYpe31cbiAgICBmdW5jdGlvbiB0aGVuQ2hhaW4ocmVzLHJlail7XG4gICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlcztcbiAgICAgICAgdGhpcy5yZWplY3QgPSByZWo7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHRoZW4ocmVzLHJlail7XG4gICAgICAgIHZhciBjaGFpbiA9IG5ldyBDaGFpbmVkKCkgO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZXIoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNUaGVuYWJsZSh2YWx1ZSkgPyB2YWx1ZS50aGVuKHJlcyxyZWopIDogcmVzb2x1dGlvbihjaGFpbix2YWx1ZSxyZXMpO1xuICAgICAgICAgICAgfSxmdW5jdGlvbihleCkge1xuICAgICAgICAgICAgICAgIHJlc29sdXRpb24oY2hhaW4sZXgscmVqKSA7XG4gICAgICAgICAgICB9KSA7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uKGNoYWluLGV4LHJlaik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNoYWluIDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBUaGVuYWJsZShyZXNvbHZlcikge1xuICAgICAgICB0aGlzLl9yZXNvbHZlciA9IHJlc29sdmVyIDtcbiAgICAgICAgdGhpcy50aGVuID0gdGhlbiA7XG4gICAgfTtcblxuICAgIFRoZW5hYmxlLnJlc29sdmUgPSBmdW5jdGlvbih2KXtcbiAgICAgICAgcmV0dXJuIFRoZW5hYmxlLmlzVGhlbmFibGUodikgPyB2IDoge3RoZW46ZnVuY3Rpb24ocmVzb2x2ZSl7cmV0dXJuIHJlc29sdmUodil9fTtcbiAgICB9O1xuXG4gICAgVGhlbmFibGUuaXNUaGVuYWJsZSA9IGlzVGhlbmFibGUgO1xuXG4gICAgcmV0dXJuIFRoZW5hYmxlIDtcbn0gO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9ub2RlbnQtcnVudGltZS90aGVuYWJsZUZhY3RvcnkuanMiLCIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE5BTiA9IDAgLyAwO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG52YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG52YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblxuLyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cbnZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cbnZhciBmcmVlU2VsZiA9IHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXG4vKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cbnZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXG4vKipcbiAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAyLjQuMFxuICogQGNhdGVnb3J5IERhdGVcbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICogfSwgXy5ub3coKSk7XG4gKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuICovXG52YXIgbm93ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiByb290LkRhdGUubm93KCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG4gKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG4gKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cbiAqIFByb3ZpZGUgYG9wdGlvbnNgIHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZVxuICogbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZFxuICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudFxuICogY2FsbHMgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2BcbiAqIGludm9jYXRpb24uXG4gKlxuICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpc1xuICogaW52b2tlZCBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cbiAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAqXG4gKiBJZiBgd2FpdGAgaXMgYDBgIGFuZCBgbGVhZGluZ2AgaXMgYGZhbHNlYCwgYGZ1bmNgIGludm9jYXRpb24gaXMgZGVmZXJyZWRcbiAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cbiAqXG4gKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9kZWJvdW5jaW5nLXRocm90dGxpbmctZXhwbGFpbmVkLWV4YW1wbGVzLylcbiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9ucz17fV0gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XVxuICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXVxuICogIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG4gKiBqUXVlcnkod2luZG93KS5vbigncmVzaXplJywgXy5kZWJvdW5jZShjYWxjdWxhdGVMYXlvdXQsIDE1MCkpO1xuICpcbiAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuICogalF1ZXJ5KGVsZW1lbnQpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuICogICAnbGVhZGluZyc6IHRydWUsXG4gKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gKiB9KSk7XG4gKlxuICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cbiAqIHZhciBkZWJvdW5jZWQgPSBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHsgJ21heFdhaXQnOiAxMDAwIH0pO1xuICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuICpcbiAqIC8vIENhbmNlbCB0aGUgdHJhaWxpbmcgZGVib3VuY2VkIGludm9jYXRpb24uXG4gKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgbGFzdEFyZ3MsXG4gICAgICBsYXN0VGhpcyxcbiAgICAgIG1heFdhaXQsXG4gICAgICByZXN1bHQsXG4gICAgICB0aW1lcklkLFxuICAgICAgbGFzdENhbGxUaW1lLFxuICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuICAgICAgbGVhZGluZyA9IGZhbHNlLFxuICAgICAgbWF4aW5nID0gZmFsc2UsXG4gICAgICB0cmFpbGluZyA9IHRydWU7XG5cbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgd2FpdCA9IHRvTnVtYmVyKHdhaXQpIHx8IDA7XG4gIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgIGxlYWRpbmcgPSAhIW9wdGlvbnMubGVhZGluZztcbiAgICBtYXhpbmcgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucztcbiAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZva2VGdW5jKHRpbWUpIHtcbiAgICB2YXIgYXJncyA9IGxhc3RBcmdzLFxuICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBsZWFkaW5nRWRnZSh0aW1lKSB7XG4gICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgLy8gU3RhcnQgdGhlIHRpbWVyIGZvciB0aGUgdHJhaWxpbmcgZWRnZS5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIC8vIEludm9rZSB0aGUgbGVhZGluZyBlZGdlLlxuICAgIHJldHVybiBsZWFkaW5nID8gaW52b2tlRnVuYyh0aW1lKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbWFpbmluZ1dhaXQodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWUsXG4gICAgICAgIHJlc3VsdCA9IHdhaXQgLSB0aW1lU2luY2VMYXN0Q2FsbDtcblxuICAgIHJldHVybiBtYXhpbmcgPyBuYXRpdmVNaW4ocmVzdWx0LCBtYXhXYWl0IC0gdGltZVNpbmNlTGFzdEludm9rZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBzaG91bGRJbnZva2UodGltZSkge1xuICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG4gICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cbiAgICAvLyBFaXRoZXIgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgYWN0aXZpdHkgaGFzIHN0b3BwZWQgYW5kIHdlJ3JlIGF0IHRoZVxuICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG4gICAgLy8gaXQgYXMgdGhlIHRyYWlsaW5nIGVkZ2UsIG9yIHdlJ3ZlIGhpdCB0aGUgYG1heFdhaXRgIGxpbWl0LlxuICAgIHJldHVybiAobGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgKHRpbWVTaW5jZUxhc3RDYWxsID49IHdhaXQpIHx8XG4gICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCk7XG4gICAgaWYgKHNob3VsZEludm9rZSh0aW1lKSkge1xuICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcbiAgICB9XG4gICAgLy8gUmVzdGFydCB0aGUgdGltZXIuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG4gICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblxuICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cbiAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cbiAgICBpZiAodHJhaWxpbmcgJiYgbGFzdEFyZ3MpIHtcbiAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuICAgIH1cbiAgICBsYXN0QXJncyA9IGxhc3RUaGlzID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVySWQpO1xuICAgIH1cbiAgICBsYXN0SW52b2tlVGltZSA9IDA7XG4gICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICByZXR1cm4gdGltZXJJZCA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogdHJhaWxpbmdFZGdlKG5vdygpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpLFxuICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXG4gICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG4gICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG5cbiAgICBpZiAoaXNJbnZva2luZykge1xuICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXhpbmcpIHtcbiAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcbiAgcmV0dXJuIGRlYm91bmNlZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuIEEgdmFsdWUgaXMgb2JqZWN0LWxpa2UgaWYgaXQncyBub3QgYG51bGxgXG4gKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdExpa2Uoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc09iamVjdExpa2UobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgU3ltYm9sYCBwcmltaXRpdmUgb3Igb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9OdW1iZXIoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcbiAqIC8vID0+IEluZmluaXR5XG4gKlxuICogXy50b051bWJlcignMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIE5BTjtcbiAgfVxuICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG4gICAgdmFyIG90aGVyID0gdHlwZW9mIHZhbHVlLnZhbHVlT2YgPT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuICB9XG4gIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcbiAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIChpc0JpbmFyeSB8fCByZUlzT2N0YWwudGVzdCh2YWx1ZSkpXG4gICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG4gICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL34vbG9kYXNoLmRlYm91bmNlL2luZGV4LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX25vZGVudFJ1bnRpbWUgPSByZXF1aXJlKCdub2RlbnQtcnVudGltZScpO1xuXG52YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuL2RvbVV0aWxzJyk7XG5cbnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIFNlYXJjaEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFNlYXJjaEVsZW1lbnQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgX3JlZiRoYW5kbGVTdWJtaXQgPSBfcmVmLmhhbmRsZVN1Ym1pdCxcbiAgICAgICAgaGFuZGxlU3VibWl0ID0gX3JlZiRoYW5kbGVTdWJtaXQgPT09IHVuZGVmaW5lZCA/IGZ1bmN0aW9uICgpIHt9IDogX3JlZiRoYW5kbGVTdWJtaXQsXG4gICAgICAgIF9yZWYkc2VhcmNoTGFiZWwgPSBfcmVmLnNlYXJjaExhYmVsLFxuICAgICAgICBzZWFyY2hMYWJlbCA9IF9yZWYkc2VhcmNoTGFiZWwgPT09IHVuZGVmaW5lZCA/ICdzZWFyY2gnIDogX3JlZiRzZWFyY2hMYWJlbCxcbiAgICAgICAgX3JlZiRjbGFzc05hbWVzID0gX3JlZi5jbGFzc05hbWVzLFxuICAgICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTZWFyY2hFbGVtZW50KTtcblxuICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBbJ2dlb3NlYXJjaCcsIGNsYXNzTmFtZXMuY29udGFpbmVyXS5qb2luKCcgJykpO1xuICAgIHZhciBmb3JtID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZm9ybScsIFsnJywgY2xhc3NOYW1lcy5mb3JtXS5qb2luKCcgJyksIGNvbnRhaW5lcik7XG4gICAgdmFyIGlucHV0ID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnaW5wdXQnLCBbJ2dsYXNzJywgY2xhc3NOYW1lcy5pbnB1dF0uam9pbignICcpLCBmb3JtKTtcblxuICAgIGlucHV0LnR5cGUgPSAndGV4dCc7XG4gICAgaW5wdXQucGxhY2Vob2xkZXIgPSBzZWFyY2hMYWJlbDtcblxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uSW5wdXQoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uS2V5VXAoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uS2V5UHJlc3MoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIF90aGlzLm9uRm9jdXMoZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25CbHVyKGUpO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIHRoaXMuZWxlbWVudHMgPSB7IGNvbnRhaW5lcjogY29udGFpbmVyLCBmb3JtOiBmb3JtLCBpbnB1dDogaW5wdXQgfTtcbiAgICB0aGlzLmhhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhTZWFyY2hFbGVtZW50LCBbe1xuICAgIGtleTogJ29uRm9jdXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbkZvY3VzKCkge1xuICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKHRoaXMuZWxlbWVudHMuZm9ybSwgJ2FjdGl2ZScpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uQmx1cicsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uQmx1cigpIHtcbiAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKSh0aGlzLmVsZW1lbnRzLmZvcm0sICdhY3RpdmUnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvblN1Ym1pdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uU3VibWl0KGV2ZW50KSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgICB2YXIgX2VsZW1lbnRzLCBpbnB1dCwgY29udGFpbmVyO1xuXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIF9lbGVtZW50cyA9IHRoaXMuZWxlbWVudHMsIGlucHV0ID0gX2VsZW1lbnRzLmlucHV0LCBjb250YWluZXIgPSBfZWxlbWVudHMuY29udGFpbmVyO1xuXG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuICAgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmhhbmRsZVN1Ym1pdCh7IHF1ZXJ5OiBpbnB1dC52YWx1ZSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuICAgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG4gICAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcbiAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uSW5wdXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbklucHV0KCkge1xuICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXG5cbiAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuICAgICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25LZXlVcCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5VXAoZXZlbnQpIHtcbiAgICAgIHZhciBfZWxlbWVudHMyID0gdGhpcy5lbGVtZW50cyxcbiAgICAgICAgICBjb250YWluZXIgPSBfZWxlbWVudHMyLmNvbnRhaW5lcixcbiAgICAgICAgICBpbnB1dCA9IF9lbGVtZW50czIuaW5wdXQ7XG5cblxuICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IF9jb25zdGFudHMuRVNDQVBFX0tFWSkge1xuICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cbiAgICAgICAgaW5wdXQudmFsdWUgPSAnJztcblxuICAgICAgICBkb2N1bWVudC5ib2R5LmZvY3VzKCk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYmx1cigpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uS2V5UHJlc3MnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbktleVByZXNzKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gX2NvbnN0YW50cy5FTlRFUl9LRVkpIHtcbiAgICAgICAgdGhpcy5vblN1Ym1pdChldmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2V0UXVlcnknLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRRdWVyeShxdWVyeSkge1xuICAgICAgdmFyIGlucHV0ID0gdGhpcy5lbGVtZW50cy5pbnB1dDtcblxuICAgICAgaW5wdXQudmFsdWUgPSBxdWVyeTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gU2VhcmNoRWxlbWVudDtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gU2VhcmNoRWxlbWVudDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9zZWFyY2hFbGVtZW50LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xudmFyIGNyZWF0ZUVsZW1lbnQgPSBleHBvcnRzLmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KGVsZW1lbnQpIHtcbiAgdmFyIGNsYXNzTmFtZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnO1xuICB2YXIgcGFyZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsO1xuXG4gIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudCk7XG4gIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZXM7XG5cbiAgaWYgKHBhcmVudCkge1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XG4gIH1cblxuICByZXR1cm4gZWw7XG59O1xuXG52YXIgY3JlYXRlU2NyaXB0RWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlU2NyaXB0RWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZVNjcmlwdEVsZW1lbnQodXJsLCBjYikge1xuICB2YXIgc2NyaXB0ID0gY3JlYXRlRWxlbWVudCgnc2NyaXB0JywgbnVsbCwgZG9jdW1lbnQuYm9keSk7XG4gIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9qYXZhc2NyaXB0Jyk7XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgd2luZG93W2NiXSA9IGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICBzY3JpcHQucmVtb3ZlKCk7XG4gICAgICBkZWxldGUgd2luZG93W2NiXTtcbiAgICAgIHJlc29sdmUoanNvbik7XG4gICAgfTtcblxuICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHVybCk7XG4gIH0pO1xufTtcblxudmFyIGFkZENsYXNzTmFtZSA9IGV4cG9ydHMuYWRkQ2xhc3NOYW1lID0gZnVuY3Rpb24gYWRkQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICBpZiAoZWxlbWVudCAmJiAhZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICB9XG59O1xuXG52YXIgcmVtb3ZlQ2xhc3NOYW1lID0gZXhwb3J0cy5yZW1vdmVDbGFzc05hbWUgPSBmdW5jdGlvbiByZW1vdmVDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgfVxufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9kb21VdGlscy5qcyIsIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xudmFyIEVOVEVSX0tFWSA9IGV4cG9ydHMuRU5URVJfS0VZID0gMTM7XG52YXIgRVNDQVBFX0tFWSA9IGV4cG9ydHMuRVNDQVBFX0tFWSA9IDI3O1xudmFyIEFSUk9XX0RPV05fS0VZID0gZXhwb3J0cy5BUlJPV19ET1dOX0tFWSA9IDQwO1xudmFyIEFSUk9XX1VQX0tFWSA9IGV4cG9ydHMuQVJST1dfVVBfS0VZID0gMzg7XG52YXIgQVJST1dfTEVGVF9LRVkgPSBleHBvcnRzLkFSUk9XX0xFRlRfS0VZID0gMzc7XG52YXIgQVJST1dfUklHSFRfS0VZID0gZXhwb3J0cy5BUlJPV19SSUdIVF9LRVkgPSAzOTtcblxudmFyIFNQRUNJQUxfS0VZUyA9IGV4cG9ydHMuU1BFQ0lBTF9LRVlTID0gW0VOVEVSX0tFWSwgRVNDQVBFX0tFWSwgQVJST1dfRE9XTl9LRVksIEFSUk9XX1VQX0tFWSwgQVJST1dfTEVGVF9LRVksIEFSUk9XX1JJR0hUX0tFWV07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvY29uc3RhbnRzLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX2RvbVV0aWxzID0gcmVxdWlyZSgnLi9kb21VdGlscycpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgY3ggPSBmdW5jdGlvbiBjeCgpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGNsYXNzbmFtZXMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBjbGFzc25hbWVzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIGNsYXNzbmFtZXMuam9pbignICcpLnRyaW0oKTtcbn07XG5cbnZhciBSZXN1bHRMaXN0ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBSZXN1bHRMaXN0KCkge1xuICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgX3JlZiRoYW5kbGVDbGljayA9IF9yZWYuaGFuZGxlQ2xpY2ssXG4gICAgICAgIGhhbmRsZUNsaWNrID0gX3JlZiRoYW5kbGVDbGljayA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZUNsaWNrLFxuICAgICAgICBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG4gICAgICAgIGNsYXNzTmFtZXMgPSBfcmVmJGNsYXNzTmFtZXMgPT09IHVuZGVmaW5lZCA/IHt9IDogX3JlZiRjbGFzc05hbWVzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlc3VsdExpc3QpO1xuXG4gICAgX2luaXRpYWxpc2VQcm9wcy5jYWxsKHRoaXMpO1xuXG4gICAgdGhpcy5wcm9wcyA9IHsgaGFuZGxlQ2xpY2s6IGhhbmRsZUNsaWNrLCBjbGFzc05hbWVzOiBjbGFzc05hbWVzIH07XG4gICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXG4gICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIGN4KCdyZXN1bHRzJywgY2xhc3NOYW1lcy5jb250YWluZXIpKTtcbiAgICB2YXIgcmVzdWx0SXRlbSA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIGN4KGNsYXNzTmFtZXMuaXRlbSkpO1xuXG4gICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsaWNrLCB0cnVlKTtcbiAgICB0aGlzLmVsZW1lbnRzID0geyBjb250YWluZXI6IGNvbnRhaW5lciwgcmVzdWx0SXRlbTogcmVzdWx0SXRlbSB9O1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFJlc3VsdExpc3QsIFt7XG4gICAga2V5OiAncmVuZGVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgICAgdmFyIHJlc3VsdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdO1xuICAgICAgdmFyIF9lbGVtZW50cyA9IHRoaXMuZWxlbWVudHMsXG4gICAgICAgICAgY29udGFpbmVyID0gX2VsZW1lbnRzLmNvbnRhaW5lcixcbiAgICAgICAgICByZXN1bHRJdGVtID0gX2VsZW1lbnRzLnJlc3VsdEl0ZW07XG5cbiAgICAgIHRoaXMuY2xlYXIoKTtcblxuICAgICAgcmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uIChyZXN1bHQsIGlkeCkge1xuICAgICAgICB2YXIgY2hpbGQgPSByZXN1bHRJdGVtLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKCdkYXRhLWtleScsIGlkeCk7XG4gICAgICAgIGNoaWxkLmlubmVySFRNTCA9IHJlc3VsdC5sYWJlbDtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5yZXN1bHRzID0gcmVzdWx0cztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZWxlY3QnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3QoaW5kZXgpIHtcbiAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbmZ1c2luZy1hcnJvd1xuXG4gICAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQsIGlkeCkge1xuICAgICAgICByZXR1cm4gaWR4ID09PSBpbmRleCA/ICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjaGlsZCwgJ2FjdGl2ZScpIDogKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJyk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5zZWxlY3RlZCA9IGluZGV4O1xuICAgICAgcmV0dXJuIHRoaXMucmVzdWx0c1tpbmRleF07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY291bnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjb3VudCgpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlc3VsdHMubGVuZ3RoO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2NsZWFyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSAtMTtcblxuICAgICAgd2hpbGUgKGNvbnRhaW5lci5sYXN0Q2hpbGQpIHtcbiAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5sYXN0Q2hpbGQpO1xuICAgICAgfVxuXG4gICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFJlc3VsdExpc3Q7XG59KCk7XG5cbnZhciBfaW5pdGlhbGlzZVByb3BzID0gZnVuY3Rpb24gX2luaXRpYWxpc2VQcm9wcygpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB0aGlzLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgdGFyZ2V0ID0gX3JlZjIudGFyZ2V0O1xuXG4gICAgdmFyIGhhbmRsZUNsaWNrID0gX3RoaXMucHJvcHMuaGFuZGxlQ2xpY2s7XG4gICAgdmFyIGNvbnRhaW5lciA9IF90aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuXG4gICAgaWYgKHRhcmdldC5wYXJlbnROb2RlICE9PSBjb250YWluZXIgfHwgIXRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEta2V5JykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgaWR4ID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1rZXknKTtcbiAgICB2YXIgcmVzdWx0ID0gX3RoaXMucmVzdWx0c1tpZHhdO1xuICAgIGhhbmRsZUNsaWNrKHsgcmVzdWx0OiByZXN1bHQgfSk7XG4gIH07XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBSZXN1bHRMaXN0O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Jlc3VsdExpc3QuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbm9kZW50UnVudGltZSA9IHJlcXVpcmUoJ25vZGVudC1ydW50aW1lJyk7XG5cbnZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuLi9kb21VdGlscycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbCxcbiAgICAgICAgICBqc29ucCA9IF9yZWYuanNvbnA7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXG5cbiAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuICAgICAgICBxdWVyeTogcXVlcnksXG4gICAgICAgIGpzb25wOiBqc29ucFxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9kZXYudmlydHVhbGVhcnRoLm5ldC9SRVNUL3YxL0xvY2F0aW9ucz8nICsgcGFyYW1TdHJpbmc7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncGFyc2UnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXG4gICAgICBpZiAoZGF0YS5yZXNvdXJjZVNldHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcy5tYXAoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiByLnBvaW50LmNvb3JkaW5hdGVzWzFdLFxuICAgICAgICAgIHk6IHIucG9pbnQuY29vcmRpbmF0ZXNbMF0sXG4gICAgICAgICAgbGFiZWw6IHIuYWRkcmVzcy5mb3JtYXR0ZWRBZGRyZXNzLFxuICAgICAgICAgIGJvdW5kczogW1tyLmJib3hbMF0sIHIuYmJveFsxXV0sIC8vIHMsIHdcbiAgICAgICAgICBbci5iYm94WzJdLCByLmJib3hbM11dXSxcbiAgICAgICAgICByYXc6IHJcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NlYXJjaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmMykge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwganNvbnAsIHVybCwganNvbjtcbiAgICAgICAgcXVlcnkgPSBfcmVmMy5xdWVyeTtcblxuICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuXG4gICAgICAgIGpzb25wID0gJ0JJTkdfSlNPTlBfQ0JfJyArIERhdGUubm93KCk7XG4gICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCwganNvbnA6IGpzb25wIH0pO1xuXG4gICAgICAgIHJldHVybiAoMCwgX2RvbVV0aWxzLmNyZWF0ZVNjcmlwdEVsZW1lbnQpKHVybCwganNvbnApLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG4gICAgICAgICAganNvbiA9ICRhd2FpdF8xO1xuICAgICAgICAgIHJldHVybiAkcmV0dXJuKHRoaXMucGFyc2UoeyBkYXRhOiBqc29uIH0pKTtcbiAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm92aWRlcjtcbn0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2JpbmdQcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9ub2RlbnRSdW50aW1lID0gcmVxdWlyZSgnbm9kZW50LXJ1bnRpbWUnKTtcblxudmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2dldFBhcmFtU3RyaW5nJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGFyYW1TdHJpbmcocGFyYW1zKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQocGFyYW1zW2tleV0pO1xuICAgICAgfSkuam9pbignJicpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NlYXJjaCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgICB2YXIgcXVlcnksIHByb3RvY29sLCB1cmwsIHJlcXVlc3QsIGpzb247XG4gICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeTtcblxuICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuICAgICAgICB1cmwgPSB0aGlzLmVuZHBvaW50KHsgcXVlcnk6IHF1ZXJ5LCBwcm90b2NvbDogcHJvdG9jb2wgfSk7XG5cbiAgICAgICAgcmV0dXJuIGZldGNoKHVybCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcbiAgICAgICAgICByZXF1ZXN0ID0gJGF3YWl0XzE7XG4gICAgICAgICAgcmV0dXJuIHJlcXVlc3QuanNvbigpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG4gICAgICAgICAgICBqc29uID0gJGF3YWl0XzI7XG4gICAgICAgICAgICByZXR1cm4gJHJldHVybih0aGlzLnBhcnNlKHsgZGF0YToganNvbiB9KSk7XG4gICAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9wcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcbiAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblxuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZW5kcG9pbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG4gICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblxuXG4gICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcbiAgICAgICAgZjogJ2pzb24nLFxuICAgICAgICB0ZXh0OiBxdWVyeVxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9nZW9jb2RlLmFyY2dpcy5jb20vYXJjZ2lzL3Jlc3Qvc2VydmljZXMvV29ybGQvR2VvY29kZVNlcnZlci9maW5kPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHJldHVybiBkYXRhLmxvY2F0aW9ucy5tYXAoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiByLmZlYXR1cmUuZ2VvbWV0cnkueCxcbiAgICAgICAgICB5OiByLmZlYXR1cmUuZ2VvbWV0cnkueSxcbiAgICAgICAgICBsYWJlbDogci5uYW1lLFxuICAgICAgICAgIGJvdW5kczogW1tyLmV4dGVudC55bWluLCByLmV4dGVudC54bWluXSwgLy8gcywgd1xuICAgICAgICAgIFtyLmV4dGVudC55bWF4LCByLmV4dGVudC54bWF4XV0sXG4gICAgICAgICAgcmF3OiByXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9lc3JpUHJvdmlkZXIuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVyJyk7XG5cbnZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblxuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cblxuICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG4gICAgICAgIGFkZHJlc3M6IHF1ZXJ5XG4gICAgICB9KSk7XG5cbiAgICAgIC8vIGdvb2dsZSByZXF1aXJlcyBhIHNlY3VyZSBjb25uZWN0aW9uIHdoZW4gdXNpbmcgYXBpIGtleXNcbiAgICAgIHZhciBwcm90byA9IHBhcmFtcyAmJiBwYXJhbXMua2V5ID8gJ2h0dHBzOicgOiBwcm90b2NvbDtcbiAgICAgIHJldHVybiBwcm90byArICcvL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHJldHVybiBkYXRhLnJlc3VsdHMubWFwKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgeDogci5nZW9tZXRyeS5sb2NhdGlvbi5sbmcsXG4gICAgICAgICAgeTogci5nZW9tZXRyeS5sb2NhdGlvbi5sYXQsXG4gICAgICAgICAgbGFiZWw6IHIuZm9ybWF0dGVkX2FkZHJlc3MsXG4gICAgICAgICAgYm91bmRzOiBbW3IuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0LmxhdCwgci5nZW9tZXRyeS52aWV3cG9ydC5zb3V0aHdlc3QubG5nXSwgLy8gcywgd1xuICAgICAgICAgIFtyLmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0LmxuZ11dLFxuICAgICAgICAgIHJhdzogclxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXIuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfcHJvdmlkZXIgPSByZXF1aXJlKCcuL3Byb3ZpZGVyJyk7XG5cbnZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG4gIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuICAgIGtleTogJ2VuZHBvaW50JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblxuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cblxuICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG4gICAgICAgIGZvcm1hdDogJ2pzb24nLFxuICAgICAgICBxOiBxdWVyeVxuICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcHJvdG9jb2wgKyAnLy9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvc2VhcmNoPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIHJldHVybiBkYXRhLm1hcChmdW5jdGlvbiAocikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IHIubG9uLFxuICAgICAgICAgIHk6IHIubGF0LFxuICAgICAgICAgIGxhYmVsOiByLmRpc3BsYXlfbmFtZSxcbiAgICAgICAgICBib3VuZHM6IFtbcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzBdKSwgcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzJdKV0sIC8vIHMsIHdcbiAgICAgICAgICBbcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzFdKSwgcGFyc2VGbG9hdChyLmJvdW5kaW5nYm94WzNdKV1dLFxuICAgICAgICAgIHJhdzogclxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvb3BlblN0cmVldE1hcFByb3ZpZGVyLmpzIiwiaW1wb3J0IHt0b2dnbGVMYXllcn0gZnJvbSBcIi4vbGF5ZXJcIjtcclxuaW1wb3J0IHttYWtlT3BhY2l0eVNsaWRlcn0gZnJvbSBcIi4vb3BhY2l0eVNsaWRlclwiXHJcbmltcG9ydCB7c2V0T3BhY2l0eVNsaWRlclBvc2l0aW9ufSBmcm9tIFwiLi9vcGFjaXR5U2xpZGVyXCJcclxuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSBcIi4vc2hhcmVcIjtcclxuXHJcbnZhciBsYXllckdyb3VwTGF5b3V0ID0gW11cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZXRBY3RpdmVMYXllckdyb3VwcyAoKSB7XHJcbiAgICByZXR1cm4gbGF5ZXJHcm91cExheW91dC5maWx0ZXIobGF5ZXJHcm91cCA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGxheWVyR3JvdXAuYWN0aXZlXHJcbiAgICB9KVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gU2V0dXBQYW5lbCAobGF5ZXJzLCBsYXlvdXQpIHtcclxuICAgIGxheWVyR3JvdXBMYXlvdXQgPSBsYXlvdXRbJ2xheWVyLWdyb3Vwcy1vcmRlciddXHJcbiAgICB2YXIgbGF5ZXJHcm91cHMgPSBtYWtlTGF5ZXJHcm91cHMobGF5b3V0WydsYXllci1ncm91cHMtb3JkZXInXSk7XHJcbiAgICBtYWtlTGF5ZXJFbGVtcyhsYXllckdyb3VwcywgbGF5ZXJzKTtcclxuICAgIG1ha2VQYW5lbERyYWdnYWJsZSgpXHJcbiAgICBzZXRQYW5lbFNjcm9sbEhhbmRsZXIoKVxyXG59XHJcblxyXG5mdW5jdGlvbiBicm93c2VySXNJbnRlcm5ldEV4cGxvcmVyKCkge1xyXG4gICAgdmFyIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnRcclxuICAgIHJldHVybiB1YS5pbmRleE9mKCdNU0lFJykgPiAtMSB8fCB1YS5pbmRleE9mKCdydjoxMS4wJykgPiAtMVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRQYW5lbFNjcm9sbEhhbmRsZXIoKSB7XHJcbiAgICB2YXIgcGFuZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKVxyXG4gICAgcGFuZWwub25zY3JvbGwgPSB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VQYW5lbERyYWdnYWJsZSgpIHtcclxuICAgIGlmIChicm93c2VySXNJbnRlcm5ldEV4cGxvcmVyKCkpIHJldHVyblxyXG5cclxuICAgIHZhciBvdmVybGF5ID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwtZHJhZy1vdmVybGF5JylcclxuXHJcbiAgICBvdmVybGF5LnN0eWxlKCdjdXJzb3InLCAnZXctcmVzaXplJylcclxuXHJcbiAgICBvdmVybGF5LmNhbGwoZDMuZHJhZygpXHJcbiAgICAgICAgLm9uKCdkcmFnJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHBhbmVsRHJhZ0V2ZW50SGFuZGxlci5jYWxsKHRoaXMpXHJcbiAgICB9KSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhbmVsRHJhZ0V2ZW50SGFuZGxlcigpIHtcclxuICAgIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKVxyXG4gICAgdXBkYXRlUGFuZWxXaWR0aCgpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQYW5lbERyYWdPdmVybGF5SGVpZ2h0ICgpIHtcclxuICAgIHZhciBwYW5lbCA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsJylcclxuICAgIHZhciBwYW5lbE9mZnNldEhlaWdodCA9IHBhbmVsLnByb3BlcnR5KCdvZmZzZXRIZWlnaHQnKVxyXG4gICAgdmFyIHBhbmVsRHJhZ092ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwtZHJhZy1vdmVybGF5JylcclxuICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwtaGVhZGVyJylcclxuXHJcbiAgICB2YXIgbmV3SGVpZ2h0XHJcblxyXG4gICAgaWYgKHBhbmVsLmNsYXNzZWQoJ2dyYXBocy1hY3RpdmUnKSkge1xyXG4gICAgICAgIHZhciBncmFwaExpc3RFeHRyYVNwYWNlID0gNzAwXHJcbiAgICAgICAgdmFyIGdyYXBoTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncmFwaC1saXN0JylcclxuICAgICAgICBuZXdIZWlnaHQgPSBoZWFkZXIuc2Nyb2xsSGVpZ2h0ICsgZ3JhcGhMaXN0LnNjcm9sbEhlaWdodCArIGdyYXBoTGlzdEV4dHJhU3BhY2VcclxuICAgIH1cclxuICAgIGVsc2UgeyAvLyBwYW5lbC5jbGFzc2VkKCdsYXllcnMtYWN0aXZlJylcclxuICAgICAgICB2YXIgbGF5ZXJMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xheWVyLWxpc3QnKVxyXG4gICAgICAgIG5ld0hlaWdodCA9IGhlYWRlci5zY3JvbGxIZWlnaHQgKyBsYXllckxpc3Quc2Nyb2xsSGVpZ2h0XHJcbiAgICB9XHJcbiAgICBuZXdIZWlnaHQgPSBuZXdIZWlnaHQgPiBwYW5lbE9mZnNldEhlaWdodCA/IGAke25ld0hlaWdodH1gKydweCcgOiBudWxsXHJcbiAgICBwYW5lbERyYWdPdmVybGF5LnN0eWxlLmhlaWdodCA9IG5ld0hlaWdodFxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVQYW5lbFdpZHRoKCkge1xyXG4gICAgdmFyIHBhbmVsID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwnKVxyXG4gICAgdmFyIHBhbmVsTWluV2lkdGggPSArcGFuZWwuc3R5bGUoJ21pbi13aWR0aCcpLnNsaWNlKDAsIC0yKVxyXG4gICAgdmFyIHBhbmVsQ2xpZW50V2lkdGggPSBwYW5lbC5wcm9wZXJ0eSgnY2xpZW50V2lkdGgnKVxyXG5cclxuICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyYXBwZXInKVxyXG4gICAgdmFyIHdyYXBwZXJXaWR0aCA9IHdyYXBwZXIuY2xpZW50V2lkdGhcclxuXHJcbiAgICB2YXIgbWFwV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtd3JhcHBlcicpXHJcblxyXG4gICAgdmFyIG1vdXNlWCA9IGQzLmV2ZW50LnNvdXJjZUV2ZW50LnhcclxuICAgIHZhciB4RGVsdGEgPSAod3JhcHBlcldpZHRoIC0gbW91c2VYKSAtIHBhbmVsQ2xpZW50V2lkdGhcclxuXHJcbiAgICB2YXIgbmV3UGFuZWxXaWR0aCA9IHBhbmVsQ2xpZW50V2lkdGggKyB4RGVsdGFcclxuICAgIG5ld1BhbmVsV2lkdGggPSBuZXdQYW5lbFdpZHRoIDwgcGFuZWxNaW5XaWR0aCA/XHJcbiAgICAgICAgcGFuZWxNaW5XaWR0aFxyXG4gICAgOiAgIG5ld1BhbmVsV2lkdGggPiB3cmFwcGVyV2lkdGggP1xyXG4gICAgICAgIHdyYXBwZXJXaWR0aFxyXG4gICAgOiAgIG5ld1BhbmVsV2lkdGhcclxuICAgIG1hcFdyYXBwZXIuc3R5bGUucGFkZGluZ1JpZ2h0ID0gYCR7bmV3UGFuZWxXaWR0aH1gKydweCdcclxuICAgIHBhbmVsLnN0eWxlKCd3aWR0aCcsIGAke25ld1BhbmVsV2lkdGh9YCsncHgnKVxyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTGF5ZXJHcm91cHMgKGxheW91dCkge1xyXG4gICAgcmV0dXJuIGQzLnNlbGVjdCgnI2xheWVyLWxpc3QnKVxyXG4gICAgICAgIC5zZWxlY3RBbGwoJy5sYXllci1ncm91cC13cmFwcGVyJylcclxuICAgICAgICAuZGF0YShsYXlvdXQpXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAgICAgLmFwcGVuZCgnZGl2JylcclxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWdyb3VwLXdyYXBwZXInKVxyXG4gICAgICAgICAgICAuYXR0cignaWQnLCBsYXllckdyb3VwID0+IGxheWVyR3JvdXAuaWQpXHJcbiAgICAgICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBsYXllckdyb3VwID0+IGxheWVyR3JvdXAuYWN0aXZlKVxyXG4gICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgnZGl2JylcclxuICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAtYnRuIGJ0bicpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyB0b2dnbGUgdGhlIGxheWVyIGxpc3QgYWNjb3JkaWFuc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnbGF5ZXIgbGlzdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRBY3Rpb246ICd0b2dnbGUgJyArICFsYXllckdyb3VwLmFjdGl2ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudExhYmVsOiBsYXllckdyb3VwLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJHcm91cC5hY3RpdmUgPSAhbGF5ZXJHcm91cC5hY3RpdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLnBhcmVudE5vZGUpLmNsYXNzZWQoJ2FjdGl2ZScsICgpID0+IGxheWVyR3JvdXAuYWN0aXZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVNoYXJlVXJsKClcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KGxheWVyR3JvdXAubmFtZSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUxheWVyRWxlbXMgKGxheWVyR3JvdXBzLCBsYXllcnMpIHtcclxuICAgIGxheWVyR3JvdXBzLnNlbGVjdEFsbCgnLmxheWVyLXNlbGVjdCcpXHJcbiAgICAgICAgLmRhdGEobGF5ZXJHcm91cCA9PiBsYXllcnNbbGF5ZXJHcm91cC5pZF0pXHJcbiAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1zZWxlY3QnKVxyXG4gICAgICAgIC5lYWNoKGZ1bmN0aW9uIChsYXllcikge1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXBOYW1lID0gdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWQ7XHJcbiAgICAgICAgICAgIHZhciBsYXllckRpdiA9IGQzLnNlbGVjdCh0aGlzKVxyXG4gICAgICAgICAgICBtYWtlQ2hlY2tib3gobGF5ZXIsIGxheWVyRGl2KTtcclxuICAgICAgICAgICAgbWFrZUxhYmVsKGxheWVyLCBsYXllckRpdik7XHJcbiAgICAgICAgICAgIG1ha2VEZXNjcmlwdGlvbihsYXllciwgbGF5ZXJEaXYpO1xyXG4gICAgICAgICAgICBsYXllckRpdi5ub2RlKCkuYXBwZW5kQ2hpbGQobWFrZUxheWVyVG9vbHMobGF5ZXIpKTtcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUNoZWNrYm94IChsYXllciwgbGF5ZXJEaXYpIHtcclxuICAgIGxheWVyRGl2LmFwcGVuZCgnaW5wdXQnKVxyXG4gICAgICAgIC5hdHRyKCd0eXBlJywgJ2NoZWNrYm94JylcclxuICAgICAgICAuYXR0cignaWQnLCBsYXllciA9PiBsYXllci5pZClcclxuICAgICAgICAuYXR0cignY2hlY2tlZCcsIChsYXllcikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbGF5ZXIuYWN0aXZlID8gJ2NoZWNrZWQnIDogbnVsbDtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbihsYXllcikge1xyXG4gICAgICAgICAgICB0b2dnbGVMYXllcihsYXllcik7XHJcbiAgICAgICAgICAgIGxheWVyRGl2LnNlbGVjdCgnLmxheWVyLXRvb2xzLXdyYXBwZXInKVxyXG4gICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGxheWVyLmFjdGl2ZSk7XHJcbiAgICAgICAgICAgIGlmIChsYXllci5hY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzbGlkZXJIYW5kbGUgPSBsYXllckRpdi5zZWxlY3QoJy5vcGFjaXR5LXNsaWRlci1oYW5kbGUnKS5ub2RlKClcclxuICAgICAgICAgICAgICAgIHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbihsYXllciwgc2xpZGVySGFuZGxlLCBsYXllci5vcGFjaXRpeSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTGFiZWwobGF5ZXIsIGxheWVyRGl2KSB7XHJcbiAgICBsYXllckRpdlxyXG4gICAgICAgIC5hcHBlbmQoJ2RpdicpXHJcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1sYWJlbC13cmFwcGVyJylcclxuICAgICAgICAuYXBwZW5kKCdsYWJlbCcpXHJcbiAgICAgICAgICAgIC5hdHRyKCdmb3InLCBsYXllciA9PiBsYXllci5pZClcclxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWxhYmVsJylcclxuICAgICAgICAgICAgLmh0bWwobGF5ZXIgPT4gbGF5ZXIubmFtZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VEZXNjcmlwdGlvbiAobGF5ZXIsIGxheWVyRGl2KSB7XHJcbiAgICBpZiAobGF5ZXIuaW5mbyAmJiBsYXllci5pbmZvICE9PSAnJykge1xyXG4gICAgICAgIGxheWVyRGl2LmFwcGVuZCgnZGl2JylcclxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8tYnRuLXdyYXBwZXInKVxyXG4gICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMucGFyZW50Tm9kZSlcclxuICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCcubGF5ZXItaW5mby13cmFwcGVyJylcclxuICAgICAgICAgICAgICAgICAgICAuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIGxheWVyIGluZm9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2xheWVyIGluZm8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2tlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRMYWJlbDogbGF5ZXIubmFtZSArIFwiIFwiICsgIWQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdhY3RpdmUnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFwcGVuZCgnaW1nJylcclxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1pbmZvLWljb24nKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3NyYycsICdpbWdzL21vcmUtaW5mby1pY29uLTY0eDY0LnBuZycpXHJcbiAgICAgICAgICAgICAgICAuYXR0cihcImFsdFwiLCBcIlJlYWQgbW9yZSBhYm91dCB0aGUgXCIgKyBsYXllci5uYW1lICsgXCIgbGF5ZXJcIilcclxuICAgICAgICAgICAgICAgIC5hdHRyKFwidGl0bGVcIiwgXCJSZWFkIG1vcmUgYWJvdXQgdGhlIFwiICsgbGF5ZXIubmFtZSArIFwiIGxheWVyXCIpXHJcblxyXG4gICAgICAgIGxheWVyRGl2LmFwcGVuZCgnZGl2JylcclxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8td3JhcHBlcicpXHJcbiAgICAgICAgICAgIC50ZXh0KGxheWVyID0+IGxheWVyLmluZm8pO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTGF5ZXJUb29scyhsYXllciwgbGF5ZXJEaXYpIHtcclxuICAgIHZhciBsYXllclRvb2xzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgIGxheWVyVG9vbHNEaXYuY2xhc3NMaXN0LmFkZCgnbGF5ZXItdG9vbHMtd3JhcHBlcicpXHJcbiAgICBpZiAobGF5ZXIuYWN0aXZlKSBsYXllclRvb2xzRGl2LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcblxyXG4gICAgdmFyIG9wYWNpdHlTbGlkZXIgPSBtYWtlT3BhY2l0eVNsaWRlcihsYXllcik7XHJcbiAgICB2YXIgbGVnZW5kID0gbWFrZUxlZ2VuZChsYXllcik7XHJcblxyXG4gICAgbGF5ZXJUb29sc0Rpdi5hcHBlbmRDaGlsZChsZWdlbmQpXHJcbiAgICBsYXllclRvb2xzRGl2LmFwcGVuZENoaWxkKG9wYWNpdHlTbGlkZXIpXHJcblxyXG4gICAgcmV0dXJuIGxheWVyVG9vbHNEaXZcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUxlZ2VuZCAobGF5ZXIsIGxheWVyVG9vbHNXcmFwcGVyKSB7XHJcbiAgICB2YXIgbGVnZW5kV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICB2YXIgbGVnZW5kSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcclxuICAgIGxlZ2VuZFdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnbGVnZW5kLXdyYXBwZXInKVxyXG4gICAgbGVnZW5kSW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgbGF5ZXIubGVnZW5kKVxyXG4gICAgbGVnZW5kV3JhcHBlci5hcHBlbmRDaGlsZChsZWdlbmRJbWcpXHJcbiAgICByZXR1cm4gbGVnZW5kV3JhcHBlclxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3BhbmVsLmpzIiwiaW1wb3J0IHtHZXRNYXB9IGZyb20gXCIuL21hcFwiO1xyXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tIFwiLi9zaGFyZVwiO1xyXG5cclxuLyoqXHJcbiAqIE5lZWRlZCBmb3IgdGhlIHNoYXJlIHVybCBzaW5jZSBMZWFmbGV0IGRvZXMgbm90IGhhdmUgYSBkZWZhdWx0IHdheSB0byBzdXJmYWNlXHJcbiAqIHRoZSBvcmRlciBvZiBsYXllcnMgaW4gdGhlIG1hcFxyXG4gKi9cclxudmFyIF9jdXJyZW50X2xheWVycyA9IFtdO1xyXG52YXIgX2N1cnJlbnRfbGF5ZXJzX29iamVjdHMgPSBbXTtcclxuXHJcbi8qKlxyXG4gKiBOb3RlOiBsYXllciBpcyBub3QgdGhlIGxlYWZsZXQgY29uY2VwdCBvZiBhIGxheWVyLCBidXQgcmF0aGVyIHRoZSBpbnRlcm5hbFxyXG4gKiAgICAgICBvYmplY3Qgd2hpY2ggdHJhY2tzIHRoZW0uIGxheWVyLm1hcExheWVyIGlzIHRoZSBwb2ludGVyIHRvIHRoZVxyXG4gKiAgICAgICBsZWFmbGV0IGxheWVyLlxyXG4gKi9cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZXRDdXJyZW50TGF5ZXJzICgpIHtcclxuICAgIHJldHVybiBfY3VycmVudF9sYXllcnM7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBDcmVhdGVEZWZhdWx0TGF5ZXJzIChsYXllcnMsIGRlZmF1bHRMYXllcnMpIHtcclxuICAgIHZhciBpLCBqLCBwcm9wLCBsYXllcmdyb3VwO1xyXG4gICAgdmFyIGRlZmF1bHRMYXllcjtcclxuICAgIHZhciBmb3VuZExheWVyO1xyXG5cclxuICAgIGlmICghZGVmYXVsdExheWVycyB8fCBkZWZhdWx0TGF5ZXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuICAgIGZvciAoaSA9IDA7IGkgPCBkZWZhdWx0TGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZm91bmRMYXllciA9IGZhbHNlO1xyXG4gICAgICAgIGRlZmF1bHRMYXllciA9IGRlZmF1bHRMYXllcnNbaV07XHJcbiAgICAgICAgZm9yIChwcm9wIGluIGxheWVycykge1xyXG4gICAgICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xyXG4gICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGF5ZXJncm91cC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxheWVyZ3JvdXBbal0uaWQgPT09IGRlZmF1bHRMYXllcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZUxheWVyKGxheWVyZ3JvdXBbal0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kTGF5ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChmb3VuZExheWVyKSBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVMYXllciAobGF5ZXIpIHtcclxuICAgIGlmICghbGF5ZXIuYWN0aXZlKSB7XHJcbiAgICAgICAgZW5hYmxlTGF5ZXIobGF5ZXIpO1xyXG5cclxuICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyB0b2dnbGUgdGhlIGxheWVyIG9uXHJcbiAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XHJcbiAgICAgICAgICBldmVudENhdGVnb3J5OiAnbGF5ZXInLFxyXG4gICAgICAgICAgZXZlbnRBY3Rpb246ICd0b2dnbGUgb24nLFxyXG4gICAgICAgICAgZXZlbnRMYWJlbDogbGF5ZXIubmFtZSxcclxuICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZGlzYWJsZUxheWVyKGxheWVyKTtcclxuXHJcbiAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgdG9nZ2xlIHRoZSBsYXllciBvZmZcclxuICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdsYXllcicsXHJcbiAgICAgICAgICBldmVudEFjdGlvbjogJ3RvZ2dsZSBvZmYnLFxyXG4gICAgICAgICAgZXZlbnRMYWJlbDogbGF5ZXIubmFtZSxcclxuICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZUxheWVyIChsYXllcikge1xyXG4gICAgdmFyIG1hcCA9IEdldE1hcCgpO1xyXG5cclxuICAgIGxheWVyLmFjdGl2ZSA9IHRydWU7XHJcbiAgICBsYXllci5tYXBMYXllciA9IGxheWVyLm1hcExheWVyIHx8IG1ha2VXbXNUaWxlTGF5ZXIobGF5ZXIpO1xyXG4gICAgbWFwLmFkZExheWVyKGxheWVyLm1hcExheWVyKTtcclxuICAgIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xyXG4gICAgbW92ZU92ZXJsYXlMYXllcnNUb1RvcCgpO1xyXG4gICAgdXBkYXRlU2hhcmVVcmwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbW92ZU92ZXJsYXlMYXllcnNUb1RvcCAoKSB7XHJcbiAgICB2YXIgbGF5ZXI7XHJcbiAgICB2YXIgaSwgbDtcclxuXHJcbiAgICBmb3IgKGkgPSAwLCBsID0gX2N1cnJlbnRfbGF5ZXJzX29iamVjdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgbGF5ZXIgPSBfY3VycmVudF9sYXllcnNfb2JqZWN0c1tpXTtcclxuICAgICAgICBpZiAobGF5ZXIudHlwZSA9PT0gXCJvdmVybGF5XCIpIGxheWVyLm1hcExheWVyLmJyaW5nVG9Gcm9udCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRMYXllclRvSW50ZXJuYWxUcmFja2VyIChsYXllcikge1xyXG4gICAgX2N1cnJlbnRfbGF5ZXJzLnB1c2gobGF5ZXIuaWQpO1xyXG4gICAgX2N1cnJlbnRfbGF5ZXJzX29iamVjdHMucHVzaChsYXllcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlTGF5ZXIgKGxheWVyKSB7XHJcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XHJcblxyXG4gICAgbGF5ZXIuYWN0aXZlID0gZmFsc2U7XHJcbiAgICBpZiAobGF5ZXIubWFwTGF5ZXIgJiYgbWFwLmhhc0xheWVyKGxheWVyLm1hcExheWVyKSkge1xyXG4gICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllci5tYXBMYXllcik7XHJcbiAgICB9XHJcbiAgICByZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xyXG4gICAgdXBkYXRlU2hhcmVVcmwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlTGF5ZXJGcm9tSW50ZXJuYWxUcmFja2VyIChsYXllcikge1xyXG4gICAgdmFyIGxvYyA9IF9jdXJyZW50X2xheWVycy5pbmRleE9mKGxheWVyLmlkKTtcclxuICAgIGlmIChsb2MgPT09IC0xKSByZXR1cm47XHJcbiAgICBfY3VycmVudF9sYXllcnMuc3BsaWNlKGxvYywgMSk7XHJcbiAgICBfY3VycmVudF9sYXllcnNfb2JqZWN0cy5zcGxpY2UobG9jLCAxKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUxheWVyT3BhY2l0eSAobGF5ZXIsIG5ld09wYWNpdHkpIHtcclxuICAgIGxheWVyLm9wYWNpdHkgPSBuZXdPcGFjaXR5XHJcbiAgICBsYXllci5tYXBMYXllci5zZXRPcGFjaXR5KG5ld09wYWNpdHkpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VXbXNUaWxlTGF5ZXIgKGxheWVyKSB7XHJcbiAgICByZXR1cm4gTC50aWxlTGF5ZXIud21zKGxheWVyLnVybCwge1xyXG4gICAgICAgIGxheWVyczogbGF5ZXIuaWQsXHJcbiAgICAgICAgdHJhbnNwYXJlbnQ6IGxheWVyLnRyYW5zcGFyZW50IHx8IHRydWUsXHJcbiAgICAgICAgdmVyc2lvbjogbGF5ZXIudmVyc2lvbiB8fCAnMS4zLjAnLFxyXG4gICAgICAgIGNyczogbGF5ZXIuY3JzIHx8IEwuQ1JTLkVQU0c5MDA5MTMsXHJcbiAgICAgICAgZm9ybWF0OiBsYXllci5mb3JtYXQgfHwgJ2ltYWdlL3BuZycsXHJcbiAgICAgICAgb3BhY2l0eTogbGF5ZXIub3BhY2l0eSB8fCAuNzUsXHJcbiAgICAgICAgdGlsZVNpemU6IGxheWVyLnRpbGVTaXplIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwXCIpLmNsaWVudFdpZHRoXHJcbiAgICB9KTtcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9sYXllci5qcyIsInZhciBtYXA7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQ3JlYXRlTWFwIChtYXBDb25maWcpIHtcclxuICAgIHZhciBpZCA9IG1hcENvbmZpZy5pZCB8fCBcIm1hcFwiO1xyXG4gICAgdmFyIG9wdGlvbnMgPSBtYXBDb25maWcub3B0aW9ucyB8fCB7XCJzY3JvbGxXaGVlbFpvb21cIiA6IGZhbHNlfTtcclxuICAgIHZhciBpbml0aWFsQ2VudGVyID0gbWFwQ29uZmlnLmNlbnRlciB8fCBbXCIzOC41XCIsIFwiLTgxXCJdO1xyXG4gICAgdmFyIGluaXRpYWxab29tID0gbWFwQ29uZmlnLnpvb20gfHwgNjtcclxuXHJcbiAgICBtYXAgPSBMLm1hcChpZCwgb3B0aW9ucykuc2V0Vmlldyhpbml0aWFsQ2VudGVyLCBpbml0aWFsWm9vbSk7XHJcbiAgICBMLmNvbnRyb2wuYXR0cmlidXRpb24oKS5hZGRUbyhtYXApXHJcblxyXG4gICAgdmFyIGxlYWZsZXRab29tSW4gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibGVhZmxldC1jb250cm9sLXpvb20taW5cIilbMF07XHJcblxyXG4gICAgbGVhZmxldFpvb21Jbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcclxuICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIHNlYWNyY2ggYnkgYWRkcmVzc1xyXG4gICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcclxuICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrIGJ1dHRvbicsXHJcbiAgICAgICAgZXZlbnRMYWJlbDogJ3pvb20gaW4nLFxyXG4gICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICB9KTtcclxuICAgIH0pXHJcblxyXG4gICAgdmFyIGxlYWZsZXRab29tT3V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImxlYWZsZXQtY29udHJvbC16b29tLW91dFwiKVswXTtcclxuXHJcbiAgICBsZWFmbGV0Wm9vbU91dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcclxuICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIHNlYWNyY2ggYnkgYWRkcmVzc1xyXG4gICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcclxuICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrIGJ1dHRvbicsXHJcbiAgICAgICAgZXZlbnRMYWJlbDogJ3pvb20gb3V0JyxcclxuICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG5cclxuICAgIG1hcC5vbihcImRyYWdlbmRcIiwgZnVuY3Rpb24oZSl7XHJcbiAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciBkcmFnIChwYW4pIGVuZFxyXG4gICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcclxuICAgICAgICBldmVudEFjdGlvbjogJ2RyYWcnLFxyXG4gICAgICAgIGV2ZW50TGFiZWw6IEpTT04uc3RyaW5naWZ5KG1hcC5nZXRCb3VuZHMoKSksXHJcbiAgICAgICAgbm9uSW50ZXJhY3Rpb246IHRydWVcclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG5cclxuICAgIG1hcC5vbihcInpvb21lbmRcIiwgZnVuY3Rpb24oZSl7XHJcbiAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGZvciB6b29tIGVuZFxyXG4gICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcclxuICAgICAgICBldmVudEFjdGlvbjogJ3pvb20nLFxyXG4gICAgICAgIGV2ZW50TGFiZWw6IEpTT04uc3RyaW5naWZ5KG1hcC5nZXRCb3VuZHMoKSksXHJcbiAgICAgICAgbm9uSW50ZXJhY3Rpb246IHRydWVcclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIG1hcDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdldE1hcCAoKSB7XHJcbiAgICByZXR1cm4gbWFwO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL21hcC5qcyIsImltcG9ydCB7R2V0TWFwfSBmcm9tICcuL21hcCc7XHJcbmltcG9ydCB7QkFTRV9MQVlFUl9UWVBFfSBmcm9tICcuL2Jhc2VsYXllcic7XHJcbmltcG9ydCB7R2V0Q3VycmVudExheWVyc30gZnJvbSAnLi9sYXllcic7XHJcbmltcG9ydCB7R2V0QWxsUG9pbnRzT2ZJbnRlcmVzdH0gZnJvbSAnLi9wb2knO1xyXG5pbXBvcnQge0dldEFjdGl2ZUxheWVyR3JvdXBzfSBmcm9tICcuL3BhbmVsJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBCaW5kVXBkYXRlU2hhcmVVcmwgKG1hcCkge1xyXG4gICAgbWFwLm9uKFwibW92ZWVuZFwiLCB1cGRhdGVTaGFyZVVybCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVTaGFyZVVybCAoZSkge1xyXG4gICAgdmFyIG1hcCA9IEdldE1hcCgpO1xyXG5cclxuICAgIHZhciBwYXJhbXMgPSBbXHJcbiAgICAgICAgbWFrZUNlbnRlclN0cmluZyhtYXApLFxyXG4gICAgICAgIG1ha2Vab29tU3RyaW5nKG1hcCksXHJcbiAgICAgICAgbWFrZUxheWVyU3RyaW5nKG1hcCksXHJcbiAgICAgICAgbWFrZUxheWVyR3JvdXBzU3RyaW5nKCksXHJcbiAgICAgICAgbWFrZUJhc2VMYXllclN0cmluZyhtYXApLFxyXG4gICAgICAgIG1ha2VQb2ludHNPZkludGVyZXN0U3RyaW5nKCksXHJcbiAgICAgICAgbWFrZUFjdGl2ZVRhYlN0cmluZygpLFxyXG4gICAgICAgIG1ha2VBY3RpdmVHcmFwaFRhYlN0cmluZygpXHJcbiAgICBdO1xyXG5cclxuICAgIHNldFNoYXJlVXJsKG1ha2VTaGFyZVVybChwYXJhbXMpKTtcclxuICAgIHNldENvcHlMaW5rVXJsKCk7XHJcbiAgICBzZXRTb2NpYWxVcmxzKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBBZGRTaGFyZVNldHRpbmdzVG9Db25maWcgKGNvbmZpZykge1xyXG4gICAgdmFyIHNoYXJlID0gcGFyc2VTaGFyZVVybCgpO1xyXG4gICAgaWYgKCFzaGFyZSkgcmV0dXJuO1xyXG4gICAgaWYgKHNoYXJlLmNlbnRlcikgY29uZmlnLm1hcC5jZW50ZXIgPSBzaGFyZS5jZW50ZXI7XHJcbiAgICBpZiAoc2hhcmUuem9vbSkgY29uZmlnLm1hcC56b29tID0gc2hhcmUuem9vbTtcclxuICAgIGlmIChzaGFyZS5sYXllcnMpIGFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5sYXllcnMsIGNvbmZpZyk7XHJcbiAgICBpZiAoc2hhcmUuYmFzZWxheWVycykgYWRkQmFzZUxheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZS5iYXNlbGF5ZXJzLCBjb25maWcpO1xyXG4gICAgaWYgKHNoYXJlLnBvaXMpIGFkZFBvaW50c09mSW50ZXJlc3RUb0NvbmZpZyhzaGFyZS5wb2lzLCBjb25maWcpXHJcbiAgICBpZiAoc2hhcmUudGFiKSBjb25maWcudGFiID0gc2hhcmUudGFiO1xyXG4gICAgaWYgKHNoYXJlLmdyYXBoKSBjb25maWcuZ3JhcGggPSBzaGFyZS5ncmFwaDtcclxuICAgIGlmIChzaGFyZS5sYXllckdyb3VwcykgY29uZmlnLmxheWVyR3JvdXBzID0gYWRkTGF5ZXJHcm91cFNldHRpbmdzVG9Db25maWcoc2hhcmUubGF5ZXJHcm91cHMsIGNvbmZpZylcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZVNoYXJlVXJsIChwYXJhbXMpIHtcclxuICAgIHJldHVybiBcIj9cIiArIHBhcmFtcy5maWx0ZXIoZnVuY3Rpb24gKHApIHsgcmV0dXJuIHAgIT09IHVuZGVmaW5lZCB9KS5qb2luKFwiJlwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0U2hhcmVVcmwgKHVybCkge1xyXG4gICAgaWYgKHdpbmRvdy5oaXN0b3J5ICYmIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSkge1xyXG4gICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgXCJcIiwgdXJsKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2V0Q29weUxpbmtVcmwgKCkge1xyXG4gICAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCB1cmwpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQmluZENvcHlMaW5rRXZlbnRzICgpIHtcclxuICAgIGQzLnNlbGVjdChkb2N1bWVudCkub24oXCJjbGlja1wiLCBoYW5kbGVCb2R5Q2xpY2spO1xyXG4gICAgZDMuc2VsZWN0KFwiLnNoYXJldXJsLWxpbmsgYVwiKS5vbihcImNsaWNrXCIsIGhhbmRsZVNoYXJlTGlua0J1dHRvbkNsaWNrKTtcclxuICAgIGQzLnNlbGVjdChcIi5zaGFyZXVybC1saW5rLXVybFwiKS5vbihcImNsaWNrXCIsIGhhbmRsZVNoYXJlTGlua1VybENsaWNrKTtcclxuICAgIGQzLnNlbGVjdChcIi5zaGFyZXVybC1saW5rLXBvcHVwLXJlbW92ZXJcIikub24oXCJjbGlja1wiLCBoYW5kbGVTaGFyZUxpbmtDbG9zZUJ1dHRvbkNsaWNrKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNob3VsZCBjbG9zZSB0aGUgY29weSBsaW5rIHBvcHVwIGlmIGl0IGlzIGFjdGl2ZSBhbmQgaWYgeW91IGNsaWNrIG9uIGFueSBlbGVtZW50XHJcbiAqIHRoYXQgaXMgbm90IHRoZSBwb3B1cCBvciBpdHMgY2hpbGRyZW4uXHJcbiAqL1xyXG5mdW5jdGlvbiBoYW5kbGVCb2R5Q2xpY2sgKCkge1xyXG4gICAgdmFyIGV2ZW50ID0gZDMuZXZlbnQ7XHJcbiAgICB2YXIgbm9kZVBhdGggPSBbXVxyXG4gICAgbm9kZVBhdGggPSBnZXREb21QYXRoKGV2ZW50LnRhcmdldClcclxuXHJcbiAgICB2YXIgdG9DbG9zZVBvcHVwID0gdHJ1ZTtcclxuICAgIHZhciBpLCBsO1xyXG5cclxuICAgIGZvciAoaSA9IDAsIGwgPSBub2RlUGF0aC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAobm9kZVBhdGhbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzaGFyZXVybC1saW5rLXBvcHVwJykgfHxcclxuICAgICAgICAgICAgICAgICAgICBub2RlUGF0aFtpXS5jbGFzc0xpc3QuY29udGFpbnMoJ3NoYXJldXJsLWxpbmsnKSkge1xyXG4gICAgICAgICAgICAgICAgdG9DbG9zZVBvcHVwID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2goZSkge1xyXG4gICAgICAgICAgICAvLyBjbGlja2luZyBzdmcgdGhyb3dzIGFuIGVycm9yIGluIElFXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0b0Nsb3NlUG9wdXApIHtcclxuICAgICAgICB2YXIgc2hhcmVQb3B1cCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3NoYXJldXJsLWxpbmstcG9wdXAnKS5pdGVtKDApXHJcbiAgICAgICAgaGFuZGxlQ29weUxpbmtDbG9zZShzaGFyZVBvcHVwKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RG9tUGF0aChub2RlKSB7XHJcbiAgICB2YXIgcGF0aCA9IFtdXHJcbiAgICB3aGlsZSAobm9kZSAmJiBub2RlLnBhcmVudE5vZGUpIHtcclxuICAgICAgICBwYXRoLnB1c2gobm9kZSlcclxuICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGF0aFxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVTaGFyZUxpbmtCdXR0b25DbGljayAoKSB7XHJcbiAgICB2YXIgc2hhcmVQb3B1cCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaGFyZXVybC1saW5rLXBvcHVwXCIpLml0ZW0oMClcclxuICAgIGlmIChkMy5zZWxlY3Qoc2hhcmVQb3B1cCkuY2xhc3NlZChcImFjdGl2ZVwiKSkge1xyXG4gICAgICAgIGhhbmRsZUNvcHlMaW5rQ2xvc2Uoc2hhcmVQb3B1cClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaGFuZGxlQ29weUxpbmtPcGVuKHNoYXJlUG9wdXApO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVTaGFyZUxpbmtDbG9zZUJ1dHRvbkNsaWNrICgpIHtcclxuICAgIHZhciBzaGFyZVBvcHVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInNoYXJldXJsLWxpbmstcG9wdXBcIikuaXRlbSgwKVxyXG4gICAgaGFuZGxlQ29weUxpbmtDbG9zZShzaGFyZVBvcHVwKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlU2hhcmVMaW5rVXJsQ2xpY2sgKCkge1xyXG4gICAgc2VsZWN0Q29weUxpbmtVcmwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ29weUxpbmtPcGVuIChzaGFyZVBvcHVwKSB7XHJcbiAgICBzaGFyZVBvcHVwLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIilcclxuICAgIHNlbGVjdENvcHlMaW5rVXJsKCk7XHJcblxyXG4gICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZXZlbnQgY2xpY2sgb24gc2hhcmUgdXJsXHJcbiAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgZXZlbnRDYXRlZ29yeTogJ3NoYXJldXJsJyxcclxuICAgICAgZXZlbnRBY3Rpb246ICdvcGVuJyxcclxuICAgICAgZXZlbnRMYWJlbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSxcclxuICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXHJcbiAgICB9KTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNvcHlMaW5rQ2xvc2UgKHNoYXJlUG9wdXApIHtcclxuXHJcbiAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBldmVudCBjbGljayBvbiBzaGFyZSB1cmwgY2xvc2VcclxuICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xyXG4gICAgICBldmVudENhdGVnb3J5OiAnc2hhcmV1cmwnLFxyXG4gICAgICBldmVudEFjdGlvbjogJ2Nsb3NlJyxcclxuICAgICAgZXZlbnRMYWJlbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGFyZXVybC1saW5rLXVybFwiKS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSxcclxuICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXHJcbiAgICB9KTtcclxuXHJcbiAgICBzaGFyZVBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcclxufVxyXG5cclxuZnVuY3Rpb24gc2VsZWN0Q29weUxpbmtVcmwgKCkge1xyXG4gICAgdmFyIHNoYXJlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNoYXJldXJsLWxpbmstdXJsXCIpO1xyXG4gICAgc2hhcmVJbnB1dC5mb2N1cygpO1xyXG4gICAgc2hhcmVJbnB1dC5zZXRTZWxlY3Rpb25SYW5nZSgwLCBzaGFyZUlucHV0LnZhbHVlLmxlbmd0aCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldFNvY2lhbFVybHMgKCkge1xyXG4gICAgdmFyIHVybCA9IG1hbmdsZVBhcmFtU3RyaW5nKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcclxuICAgIHZhciBzb2NpYWxMaW5rcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzaGFyZXVybC1zb2NpYWxcIik7XHJcbiAgICB2YXIgc29jaWFsTGluaztcclxuICAgIHZhciBuZXdVcmw7XHJcbiAgICB2YXIgaSwgbDtcclxuXHJcbiAgICBmb3IgKGkgPSAwLCBsID0gc29jaWFsTGlua3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgc29jaWFsTGluayA9IHNvY2lhbExpbmtzW2ldO1xyXG5cclxuICAgICAgICBuZXdVcmwgPSBzb2NpYWxMaW5rLmdldEF0dHJpYnV0ZShcImRhdGEtYmFzZXVybFwiKSArIHVybDtcclxuICAgICAgICBzb2NpYWxMaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgbmV3VXJsKTtcclxuXHJcbiAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZXZlbnQgZm9yIHNvY2lhbCB1cmxzXHJcbiAgICAgICAgc29jaWFsTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xyXG4gICAgICAgICAgICBldmVudENhdGVnb3J5OiAnc2hhcmV1cmwnLFxyXG4gICAgICAgICAgICBldmVudEFjdGlvbjogdGhpcy5nZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIpLFxyXG4gICAgICAgICAgICBldmVudExhYmVsOiB0aGlzLmhyZWYsXHJcbiAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUNlbnRlclN0cmluZyAobWFwKSB7XHJcbiAgICB2YXIgY2VudGVyID0gbWFwLmdldENlbnRlcigpO1xyXG4gICAgcmV0dXJuIFwiY2VudGVyPVwiICsgY2VudGVyLmxhdC50b1N0cmluZygpICsgXCIsXCIgKyBjZW50ZXIubG5nLnRvU3RyaW5nKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2Vab29tU3RyaW5nIChtYXApIHtcclxuICAgIHJldHVybiBcInpvb209XCIgKyBtYXAuZ2V0Wm9vbSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTGF5ZXJTdHJpbmcgKG1hcCkge1xyXG4gICAgdmFyIGxheWVycyA9IFtdO1xyXG4gICAgdmFyIG9wYWNpdHlWYWxzID0ge307XHJcbiAgICB2YXIgY3VycmVudExheWVycyA9IEdldEN1cnJlbnRMYXllcnMoKTtcclxuXHJcbiAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gbGF5ZXIub3B0aW9ucztcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxheWVycykge1xyXG4gICAgICAgICAgICBvcGFjaXR5VmFsc1tvcHRpb25zLmxheWVyc10gPSBvcHRpb25zLmhhc093blByb3BlcnR5KFwib3BhY2l0eVwiKSA/IG9wdGlvbnMub3BhY2l0eSA6IFwiMVwiO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBjdXJyZW50TGF5ZXI7XHJcbiAgICB2YXIgaTtcclxuICAgIGZvciAoaSA9IDA7IGkgPCBjdXJyZW50TGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY3VycmVudExheWVyID0gY3VycmVudExheWVyc1tpXTtcclxuICAgICAgICBsYXllcnMucHVzaChjdXJyZW50TGF5ZXIpO1xyXG4gICAgICAgIGxheWVycy5wdXNoKG9wYWNpdHlWYWxzW2N1cnJlbnRMYXllcl0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFwibGF5ZXJzPVwiICsgbGF5ZXJzLmpvaW4oXCIsXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlQmFzZUxheWVyU3RyaW5nIChtYXApIHtcclxuICAgIHZhciBsYXllcnMgPSBbXTtcclxuICAgIG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XHJcbiAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMgJiYgbGF5ZXIub3B0aW9ucy50eXBlID09PSBCQVNFX0xBWUVSX1RZUEUpIHtcclxuICAgICAgICAgICAgbGF5ZXJzLnB1c2gobGF5ZXIub3B0aW9ucy5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gXCJiYXNlbGF5ZXJzPVwiICsgbGF5ZXJzLmpvaW4oXCIsXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTGF5ZXJHcm91cHNTdHJpbmcgKCkge1xyXG4gICAgdmFyIGFjdGl2ZUxheWVyR3JvdXBzID0gR2V0QWN0aXZlTGF5ZXJHcm91cHMoKVxyXG4gICAgcmV0dXJuIFwibGF5ZXJHcm91cHM9XCIrYWN0aXZlTGF5ZXJHcm91cHMubWFwKGQgPT4gZC5pZCkuam9pbignLCcpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VQb2ludHNPZkludGVyZXN0U3RyaW5nICgpIHtcclxuICAgIHZhciBwb2lzID0gR2V0QWxsUG9pbnRzT2ZJbnRlcmVzdCgpXHJcbiAgICBpZiAoIXBvaXMubGVuZ3RoKSByZXR1cm5cclxuICAgIHZhciBwb2lTdHJpbmcgPSBcInBvaXM9XCJcclxuICAgIHBvaXMuZm9yRWFjaChwb2kgPT4ge1xyXG4gICAgICAgIHBvaVN0cmluZyArPSBwb2kubGF0ICsgJywnICsgcG9pLmxuZyArICc7J1xyXG4gICAgfSlcclxuICAgIHJldHVybiBwb2lTdHJpbmdcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUFjdGl2ZVRhYlN0cmluZyAoKSB7XHJcbiAgICByZXR1cm4gXCJ0YWI9XCIgKyBkMy5zZWxlY3QoXCIucGFuZWwtdG9wLWJ0bi5hY3RpdmVcIikuYXR0cihcImRhdGEtYWN0aXZlXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlQWN0aXZlR3JhcGhUYWJTdHJpbmcgKCkge1xyXG4gICAgcmV0dXJuIFwiZ3JhcGg9XCIgKyBkMy5zZWxlY3QoXCIuZ3JhcGgtdHlwZS1idG4uYWN0aXZlXCIpLmF0dHIoXCJkYXRhLXR5cGVcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlU2hhcmVVcmwgKCkge1xyXG4gICAgdmFyIHBhcmFtcyA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XHJcbiAgICBpZiAocGFyYW1zID09PSBcIlwiKSByZXR1cm47XHJcblxyXG4gICAgcGFyYW1zID0gZ2V0UGFyYW1zQXJyYXkocGFyYW1zKTtcclxuICAgIHBhcmFtcyA9IG1ha2VLZXllZFBhcmFtc09iamVjdChwYXJhbXMpO1xyXG5cclxuICAgIGZvcm1hdFBhcmFtcyhwYXJhbXMpO1xyXG4gICAgcmV0dXJuIHBhcmFtcztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UGFyYW1zQXJyYXkgKHBhcmFtcykge1xyXG4gICAgcGFyYW1zID0gcGFyYW1zLnN1YnN0cmluZygxKTtcclxuICAgIHBhcmFtcyA9IHVubWFuZ2xlUGFyYW1TdHJpbmcocGFyYW1zKTtcclxuICAgIHJldHVybiBwYXJhbXMuc3BsaXQoXCImXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYW5nbGVQYXJhbVN0cmluZyAodXJsKSB7XHJcbiAgICByZXR1cm4gdXJsLnJlcGxhY2UoL1xcOi9nLCBcIiUzQVwiKVxyXG4gICAgICAgIC5yZXBsYWNlKC9cXDsvZywgXCIlM0JcIilcclxuICAgICAgICAucmVwbGFjZSgvXFwvL2csIFwiJTJGXCIpXHJcbiAgICAgICAgLnJlcGxhY2UoL1xcLC9nLCBcIiUyQ1wiKVxyXG4gICAgICAgIC5yZXBsYWNlKC9cXCYvZywgXCIlMjZcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVubWFuZ2xlUGFyYW1TdHJpbmcgKHBhcmFtcykge1xyXG4gICAgcmV0dXJuIHBhcmFtcy5yZXBsYWNlKC9cXCUyW2N8Q10vZywgXCIsXCIpLnJlcGxhY2UoL1xcJTNbYnxCXS9nLCBcIjtcIilcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUtleWVkUGFyYW1zT2JqZWN0IChwYXJhbXNBcnIpIHtcclxuICAgIHZhciBwYXJzZWRQYXJhbXMgPSB7fTtcclxuICAgIHZhciBwYXJhbVBhaXI7XHJcbiAgICB2YXIgaTtcclxuXHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgcGFyYW1zQXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgcGFyYW1QYWlyID0gcGFyYW1zQXJyW2ldLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICBwYXJzZWRQYXJhbXNbcGFyYW1QYWlyWzBdXSA9IHBhcmFtUGFpclsxXVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBwYXJzZWRQYXJhbXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdFBhcmFtcyAocGFyYW1zKSB7XHJcbiAgICBpZiAocGFyYW1zLmNlbnRlcikgcGFyYW1zLmNlbnRlciA9IGZvcm1hdENlbnRlclBhcmFtKHBhcmFtcy5jZW50ZXIpO1xyXG4gICAgaWYgKHBhcmFtcy5sYXllcnMpIHBhcmFtcy5sYXllcnMgPSBmb3JtYXRMYXllclBhcmFtKHBhcmFtcy5sYXllcnMpO1xyXG4gICAgaWYgKHBhcmFtcy5iYXNlbGF5ZXJzKSBwYXJhbXMuYmFzZWxheWVycyA9IGZvcm1hdEJhc2VMYXllclBhcmFtKHBhcmFtcy5iYXNlbGF5ZXJzKTtcclxuICAgIGlmIChwYXJhbXMucG9pcykgcGFyYW1zLnBvaXMgPSBmb3JtYXRQb2ludHNPZkludGVyZXN0UGFyYW0ocGFyYW1zLnBvaXMpXHJcbiAgICBpZiAocGFyYW1zLmxheWVyR3JvdXBzKSBwYXJhbXMubGF5ZXJHcm91cHMgPSBmb3JtYXRMYXllckdyb3Vwc1BhcmFtKHBhcmFtcy5sYXllckdyb3VwcylcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0Q2VudGVyUGFyYW0gKGNlbnRlcikge1xyXG4gICAgcmV0dXJuIGNlbnRlci5zcGxpdChcIixcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdExheWVyUGFyYW0gKGxheWVycykge1xyXG4gICAgdmFyIGZvcm1hdHRlZExheWVycyA9IHtcclxuICAgICAgICBcImVuYWJsZWRMYXllcnNcIjogW10sXHJcbiAgICAgICAgXCJvcGFjaXR5VmFsc1wiOiB7fVxyXG4gICAgfTtcclxuICAgIHZhciBsYXllcklkO1xyXG4gICAgdmFyIGk7XHJcblxyXG4gICAgbGF5ZXJzID0gbGF5ZXJzLnNwbGl0KFwiLFwiKTtcclxuICAgIGZvciAoaSA9IDA7IGkgPCBsYXllcnMubGVuZ3RoOyBpID0gaSArIDIpIHtcclxuICAgICAgICBsYXllcklkID0gbGF5ZXJzW2ldO1xyXG4gICAgICAgIGZvcm1hdHRlZExheWVycy5lbmFibGVkTGF5ZXJzLnB1c2gobGF5ZXJJZCk7XHJcbiAgICAgICAgZm9ybWF0dGVkTGF5ZXJzLm9wYWNpdHlWYWxzW2xheWVySWRdID0gbGF5ZXJzW2krMV07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZvcm1hdHRlZExheWVycztcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0QmFzZUxheWVyUGFyYW0gKGJhc2VsYXllcnMpIHtcclxuICAgIHJldHVybiBiYXNlbGF5ZXJzLnNwbGl0KFwiLFwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0UG9pbnRzT2ZJbnRlcmVzdFBhcmFtIChwb2lzKSB7XHJcbiAgICByZXR1cm4gcG9pcy5zcGxpdCgnOycpXHJcbiAgICAgICAgLmZpbHRlcigoc3RyKSA9PiBzdHIgIT09ICcnKVxyXG4gICAgICAgIC5tYXAoKHBvaSkgPT4ge1xyXG4gICAgICAgICAgICBwb2kgPSBwb2kuc3BsaXQoJywnKVxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbGF0OiBwb2lbMF0sXHJcbiAgICAgICAgICAgICAgICBsbmc6IHBvaVsxXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0TGF5ZXJHcm91cHNQYXJhbSAobGF5ZXJHcm91cFNldHRpbmdzKSB7XHJcbiAgICByZXR1cm4gbGF5ZXJHcm91cFNldHRpbmdzLnNwbGl0KCcsJylcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkTGF5ZXJHcm91cFNldHRpbmdzVG9Db25maWcoYWN0aXZlTGF5ZXJHcm91cElkcywgY29uZmlnKSB7XHJcbiAgICBjb25maWcubGF5b3V0WydsYXllci1ncm91cHMtb3JkZXInXS5mb3JFYWNoKGxheWVyR3JvdXAgPT4ge1xyXG4gICAgICAgIC8vIHNldCBsYXllciBncm91cCB0byBhY3RpdmUgaWYgaXRzIGlkIGFwcGVhcnMgaW4gdGhlIHNoYXJlIHVybCBzZXR0aW5nc1xyXG4gICAgICAgIGxheWVyR3JvdXAuYWN0aXZlID0gYWN0aXZlTGF5ZXJHcm91cElkcy5maWx0ZXIoaWQgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gaWQgPT09IGxheWVyR3JvdXAuaWRcclxuICAgICAgICB9KS5sZW5ndGggPiAwXHJcbiAgICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRMYXllclNldHRpbmdzVG9Db25maWcgKHNoYXJlTGF5ZXJTZXR0aW5ncywgY29uZmlnKSB7XHJcbiAgICB2YXIgZW5hYmxlZExheWVycyA9IHNoYXJlTGF5ZXJTZXR0aW5ncy5lbmFibGVkTGF5ZXJzO1xyXG4gICAgY29uZmlnW1wiYWN0aXZlLWxheWVyc1wiXSA9IGVuYWJsZWRMYXllcnM7XHJcblxyXG4gICAgdmFyIGksIGosIHByb3AsIGxheWVyZ3JvdXA7XHJcbiAgICB2YXIgZW5hYmxlZExheWVyO1xyXG4gICAgdmFyIGZvdW5kTGF5ZXI7XHJcbiAgICB2YXIgbGF5ZXJzID0gY29uZmlnLmxheWVycztcclxuXHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgZW5hYmxlZExheWVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGZvdW5kTGF5ZXIgPSBmYWxzZTtcclxuICAgICAgICBlbmFibGVkTGF5ZXIgPSBlbmFibGVkTGF5ZXJzW2ldO1xyXG4gICAgICAgIGZvciAocHJvcCBpbiBsYXllcnMpIHtcclxuICAgICAgICAgICAgaWYgKCFsYXllcnMuaGFzT3duUHJvcGVydHkocHJvcCkpIHJldHVybjtcclxuICAgICAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcclxuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGxheWVyZ3JvdXAubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChsYXllcmdyb3VwW2pdLmlkID09PSBlbmFibGVkTGF5ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXllcmdyb3VwW2pdLm9wYWNpdHkgPSBzaGFyZUxheWVyU2V0dGluZ3Mub3BhY2l0eVZhbHNbZW5hYmxlZExheWVyXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZExheWVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZm91bmRMYXllcikgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRCYXNlTGF5ZXJTZXR0aW5nc1RvQ29uZmlnIChzaGFyZUJhc2VMYXllclNldHRpbmdzLCBjb25maWcpIHtcclxuICAgIHZhciBiYXNlbGF5ZXJzID0gY29uZmlnLmJhc2VsYXllcnM7XHJcbiAgICB2YXIgYmFzZWxheWVyO1xyXG4gICAgdmFyIGk7XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IGJhc2VsYXllcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBiYXNlbGF5ZXIgPSBiYXNlbGF5ZXJzW2ldO1xyXG4gICAgICAgIGJhc2VsYXllci5hY3RpdmUgPSAoc2hhcmVCYXNlTGF5ZXJTZXR0aW5ncy5pbmRleE9mKGJhc2VsYXllci5pZCkgIT09IC0xKSA/IHRydWUgOiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWRkUG9pbnRzT2ZJbnRlcmVzdFRvQ29uZmlnKHBvaXMsIGNvbmZpZykge1xyXG4gICAgY29uZmlnW1wicG9pc1wiXSA9IHBvaXNcclxufVxyXG5cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvc2hhcmUuanMiLCJpbXBvcnQge0dldE1hcH0gZnJvbSBcIi4vbWFwXCI7XHJcbmltcG9ydCB7dXBkYXRlU2hhcmVVcmx9IGZyb20gXCIuL3NoYXJlXCI7XHJcblxyXG5leHBvcnQgY29uc3QgQkFTRV9MQVlFUl9UWVBFID0gXCJiYXNlbGF5ZXJcIjtcclxuXHJcbnZhciBfYmFzZWxheWVycztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBDcmVhdGVCYXNlTGF5ZXJzIChtYXAsIGxheWVyQ29uZmlnKSB7XHJcbiAgICBsYXllckNvbmZpZyA9IGxheWVyQ29uZmlnIHx8XHJcbiAgICAgICAgW3tcclxuICAgICAgICAgICAgXCJpZFwiIDogXCJjYXJ0by1saWdodC1kZWZhdWx0XCIsXHJcbiAgICAgICAgICAgIFwidXJsXCIgOiBcImh0dHA6Ly97c30uYmFzZW1hcHMuY2FydG9jZG4uY29tL2xpZ2h0X2FsbC97en0ve3h9L3t5fS5wbmdcIixcclxuICAgICAgICAgICAgXCJhdHRyaWJ1dGlvblwiIDogJyZjb3B5OyA8YSBocmVmPVwiaHR0cDovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsICZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly9jYXJ0by5jb20vYXR0cmlidXRpb25zXCI+Q0FSVE88L2E+J1xyXG4gICAgICAgIH1dO1xyXG5cclxuICAgIF9iYXNlbGF5ZXJzID0gbGF5ZXJDb25maWc7XHJcbiAgICB2YXIgaTtcclxuICAgIHZhciBiYXNlTGF5ZXI7XHJcbiAgICB2YXIgY29uZmlnO1xyXG5cclxuICAgIGZvciAoaSA9IDA7IGkgPCBsYXllckNvbmZpZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbmZpZyA9IGxheWVyQ29uZmlnW2ldO1xyXG5cclxuICAgICAgICBpZiAoIWNvbmZpZy5hY3RpdmUpIGNvbnRpbnVlO1xyXG4gICAgICAgIGJhc2VMYXllciA9IGNyZWF0ZUJhc2VMYXllcihjb25maWcpO1xyXG4gICAgICAgIGNvbmZpZy5sYXllciA9IGJhc2VMYXllcjtcclxuICAgICAgICBiYXNlTGF5ZXIuYWRkVG8obWFwKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVCYXNlTGF5ZXJVSShsYXllckNvbmZpZylcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQmFzZUxheWVyVUkgKGNvbmZpZykge1xyXG4gICAgdmFyIGJhc2VVSSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBiYXNlVUkuY2xhc3NOYW1lID0gXCJiYXNlbGF5ZXItdWlcIjtcclxuICAgIHZhciBiYXNlV3JhcHBlcjtcclxuICAgIHZhciBiYXNlSW1nO1xyXG4gICAgdmFyIGJhc2VMYWJlbDtcclxuXHJcbiAgICB2YXIgbGF5ZXI7XHJcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbmZpZy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBsYXllciA9IGNvbmZpZ1tpXTtcclxuICAgICAgICBpZiAoIWxheWVyLmhhc093blByb3BlcnR5KFwiaW1hZ2VcIikpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICBiYXNlV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgYmFzZVdyYXBwZXIuc2V0QXR0cmlidXRlKFwiZGF0YS1sYXllclwiLCBsYXllci5pZCk7XHJcbiAgICAgICAgYmFzZUltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgYmFzZUltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbGF5ZXIuaW1hZ2UpO1xyXG4gICAgICAgIGJhc2VJbWcuc2V0QXR0cmlidXRlKFwiYWx0XCIsIGxheWVyLmxhYmVsKTtcclxuICAgICAgICBiYXNlSW1nLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIGxheWVyLmxhYmVsKTtcclxuICAgICAgICBiYXNlTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGJhc2VMYWJlbC50ZXh0Q29udGVudCA9IGxheWVyLmxhYmVsO1xyXG4gICAgICAgIGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VJbWcpO1xyXG4gICAgICAgIGJhc2VXcmFwcGVyLmFwcGVuZENoaWxkKGJhc2VMYWJlbCk7XHJcbiAgICAgICAgYmFzZVdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZUJhc2VDbGljaylcclxuXHJcbiAgICAgICAgZDMuc2VsZWN0KGJhc2VXcmFwcGVyKVxyXG4gICAgICAgICAgICAuY2xhc3NlZChcImJhc2Utc2VsZWN0b3JcIiwgdHJ1ZSlcclxuICAgICAgICAgICAgLmNsYXNzZWQoXCJhY3RpdmVcIiwgbGF5ZXIuYWN0aXZlKTtcclxuXHJcbiAgICAgICAgYmFzZVVJLmFwcGVuZENoaWxkKGJhc2VXcmFwcGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibGVhZmxldC1ib3R0b20gbGVhZmxldC1sZWZ0XCIpWzBdLmFwcGVuZENoaWxkKGJhc2VVSSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUJhc2VDbGljayAoZSkge1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIHZhciBsYXllcmlkID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJkYXRhLWxheWVyXCIpO1xyXG4gICAgdG9nZ2xlQWN0aXZlQmFzZVVJKHRoaXMpO1xyXG4gICAgcmVtb3ZlQ3VycmVudEJhc2VMYXllcigpO1xyXG4gICAgYWRkTmV3QmFzZUxheWVyVG9NYXAobGF5ZXJpZCk7XHJcblxyXG4gICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZm9yIGNoYW5nZWluZyBiYXNlIGxheWVyXHJcbiAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXHJcbiAgICAgIGV2ZW50QWN0aW9uOiAnY2hhbmdlIGJhc2UgbGF5ZXInLFxyXG4gICAgICBldmVudExhYmVsOiBsYXllcmlkLFxyXG4gICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcclxuICAgIH0pO1xyXG5cclxuICAgIHVwZGF0ZVNoYXJlVXJsKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZUFjdGl2ZUJhc2VVSSAoYmFzZVVJRWxlbSkge1xyXG4gICAgZDMuc2VsZWN0KFwiLmJhc2Utc2VsZWN0b3IuYWN0aXZlXCIpLmNsYXNzZWQoXCJhY3RpdmVcIiwgZmFsc2UpO1xyXG4gICAgZDMuc2VsZWN0KGJhc2VVSUVsZW0pLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUN1cnJlbnRCYXNlTGF5ZXIgKCkge1xyXG4gICAgdmFyIG1hcCA9IEdldE1hcCgpO1xyXG5cclxuICAgIG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XHJcbiAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMudHlwZSAhPT0gQkFTRV9MQVlFUl9UWVBFKSByZXR1cm47XHJcbiAgICAgICAgbWFwLnJlbW92ZUxheWVyKGxheWVyKTtcclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZE5ld0Jhc2VMYXllclRvTWFwIChsYXllcmlkKSB7XHJcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XHJcblxyXG4gICAgdmFyIGxheWVyO1xyXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBfYmFzZWxheWVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBsYXllciA9IF9iYXNlbGF5ZXJzW2ldO1xyXG4gICAgICAgIGlmIChsYXllci5pZCAhPT0gbGF5ZXJpZCkgY29udGludWU7XHJcbiAgICAgICAgaWYgKCFsYXllci5sYXllcikgbGF5ZXIubGF5ZXIgPSBjcmVhdGVCYXNlTGF5ZXIobGF5ZXIpO1xyXG4gICAgICAgIGxheWVyLmxheWVyLmFkZFRvKG1hcCk7XHJcbiAgICAgICAgbGF5ZXIubGF5ZXIuYnJpbmdUb0JhY2soKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQmFzZUxheWVyIChsYXllckNvbmZpZykge1xyXG4gICAgcmV0dXJuIEwudGlsZUxheWVyKFxyXG4gICAgICAgIGxheWVyQ29uZmlnLnVybCxcclxuICAgICAgICBtYWtlQmFzZUxheWVyT3B0aW9ucyhsYXllckNvbmZpZylcclxuICAgICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VCYXNlTGF5ZXJPcHRpb25zIChjb25maWcpIHtcclxuICAgIHZhciBvcHRpb25zID0ge307XHJcbiAgICBpZiAoY29uZmlnLmlkKSBvcHRpb25zLmlkID0gY29uZmlnLmlkO1xyXG4gICAgaWYgKGNvbmZpZy5hdHRyaWJ1dGlvbikgb3B0aW9ucy5hdHRyaWJ1dGlvbiA9IGNvbmZpZy5hdHRyaWJ1dGlvbjtcclxuICAgIGlmIChjb25maWcuc3ViZG9tYWlucykgb3B0aW9ucy5zdWJkb21haW5zID0gY29uZmlnLnN1YmRvbWFpbnM7XHJcbiAgICBvcHRpb25zLnR5cGUgPSBCQVNFX0xBWUVSX1RZUEU7XHJcblxyXG4gICAgcmV0dXJuIG9wdGlvbnM7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvYmFzZWxheWVyLmpzIiwiaW1wb3J0IHtcclxuICBjcmVhdGVHcmFwaERpdixcclxuICBjcmVhdGVNYXJrZXIsXHJcbiAgY3JlYXRlR3JhcGhSZW1vdmVyLFxyXG4gIGdldEljb25cclxufSBmcm9tICcuL2dyYXBoJ1xyXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tICcuL3NoYXJlJ1xyXG5pbXBvcnQge0dldE1hcH0gZnJvbSAnLi9tYXAnXHJcbmltcG9ydCB7R2V0QWN0aXZlVGFiLCBIYW5kbGVUYWJDaGFuZ2V9IGZyb20gJy4vdGFicydcclxuXHJcbnZhciBfcG9pbnRzX29mX2ludGVyZXN0ID0gW11cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBHZXRBbGxQb2ludHNPZkludGVyZXN0ICgpIHtcclxuICAgIHJldHVybiBfcG9pbnRzX29mX2ludGVyZXN0XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBBZGRQb2ludE9mSW50ZXJlc3RUb1RyYWNrZXIgKGxhdCwgbG5nKSB7XHJcbiAgICB2YXIgcG9pID0ge1xyXG4gICAgICAgIGxhdDogbGF0LFxyXG4gICAgICAgIGxuZzogbG5nXHJcbiAgICB9XHJcbiAgICBfcG9pbnRzX29mX2ludGVyZXN0LnB1c2gocG9pKVxyXG4gICAgcmV0dXJuIHBvaVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gU2V0dXBQb2ludHNPZkludGVyZXN0IChtYXAsIG5ld1BvaXMpIHtcclxuICAgIEFkZE11bHRpcGxlUG9pbnRzT2ZJbnRlcmVzdChuZXdQb2lzKVxyXG4gICAgdmFyIHBvaXMgPSBHZXRBbGxQb2ludHNPZkludGVyZXN0KClcclxuICAgIHZhciBtYXAgPSBHZXRNYXAoKVxyXG4gICAgcG9pcy5mb3JFYWNoKHBvaSA9PiB7XHJcbiAgICAgICAgU2V0dXBQb2ludE9mSW50ZXJlc3RVSShtYXAsIHBvaSlcclxuICAgIH0pXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBBZGRNdWx0aXBsZVBvaW50c09mSW50ZXJlc3QgKHBvaXMpIHtcclxuICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KF9wb2ludHNfb2ZfaW50ZXJlc3QsIHBvaXMpXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBSZW1vdmVQb2ludE9mSW50ZXJlc3RGcm9tVHJhY2tlcihwb2lUb1JlbW92ZSkge1xyXG4gICAgX3BvaW50c19vZl9pbnRlcmVzdCA9IF9wb2ludHNfb2ZfaW50ZXJlc3QuZmlsdGVyKHBvaSA9PiB7XHJcbiAgICAgICAgcmV0dXJuICEocG9pID09PSBwb2lUb1JlbW92ZSlcclxuICB9KVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gU2V0dXBQb2ludE9mSW50ZXJlc3RVSSAobWFwLCBwb2kpIHtcclxuICAgIHZhciBkaXYgPSBjcmVhdGVHcmFwaERpdihwb2kpO1xyXG4gICAgdmFyIG1hcmtlciA9IGNyZWF0ZU1hcmtlcihtYXAsIHBvaS5sYXQsIHBvaS5sbmcpO1xyXG4gICAgcG9pLmdyYXBoRGl2ID0gZGl2XHJcbiAgICBwb2kubWFya2VyID0gbWFya2VyXHJcbiAgICBtYXJrZXIuYWRkVG8obWFwKVxyXG4gICAgY3JlYXRlR3JhcGhSZW1vdmVyKG1hcCwgZGl2LCBtYXJrZXIsIHBvaSk7XHJcblxyXG4gICAgZDMuc2VsZWN0KGRpdikub24oXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgbWFya2VyLnNldEljb24oZ2V0SWNvbignaG92ZXInKSk7XHJcbiAgICB9KVxyXG4gICAgZDMuc2VsZWN0KGRpdikub24oXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBtYXJrZXIuc2V0SWNvbihnZXRJY29uKCdncmFwaCcpKTtcclxuICAgIH0pXHJcbiAgICBtYXJrZXIub24oJ2NsaWNrIGRibGNsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBoYW5kbGVNYXJrZXJNb3VzZUV2ZW50KGUsIHBvaSlcclxuICAgIH0pXHJcbiAgICBtYXJrZXIub24oJ21vdXNlb3ZlcicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgbWFya2VyLnNldEljb24oZ2V0SWNvbignaG92ZXInKSlcclxuICAgIH0pXHJcbiAgICBtYXJrZXIub24oJ21vdXNlb3V0JywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBtYXJrZXIuc2V0SWNvbihnZXRJY29uKCdncmFwaCcpKVxyXG4gICAgICAgIHBvaS5ncmFwaERpdi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdwYW4tdG8tbWFya2VyLWJ0bicpWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGUnKVxyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTWFya2VyTW91c2VFdmVudCAoZSwgcG9pKSB7XHJcbiAgICBlLm9yaWdpbmFsRXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcclxuICAgIEhhbmRsZVRhYkNoYW5nZSgnZ3JhcGhzLWFjdGl2ZScpXHJcbiAgICBzY3JvbGxUb1BvaW50T2ZJbnRlcmVzdEdyYXBoKHBvaSlcclxuICAgIHRyaWdnZXJHcmFwaEFuaW1hdGlvbihwb2kpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRyaWdnZXJHcmFwaEFuaW1hdGlvbiAocG9pKSB7XHJcbiAgICBwb2kuZ3JhcGhEaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncGFuLXRvLW1hcmtlci1idG4nKVswXS5jbGFzc0xpc3QuYWRkKCdhbmltYXRlJylcclxufVxyXG5cclxuZnVuY3Rpb24gc2Nyb2xsVG9Qb2ludE9mSW50ZXJlc3RHcmFwaCAocG9pKSB7XHJcbiAgICB2YXIgcmlnaHRQYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyaWdodC1wYW5lbCcpXHJcbiAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsLWhlYWRlcicpXHJcbiAgICB2YXIgZ3JhcGhUeXBlSGVhZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyYXBoLXR5cGUtaGVhZGVyJylcclxuICAgIHJpZ2h0UGFuZWwuc2Nyb2xsVG9wID0gcG9pLmdyYXBoRGl2Lm9mZnNldFRvcFxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gUmVtb3ZlUG9pbnRPZkludGVyZXN0VUkgKG1hcCwgZGl2LCBtYXJrZXIpIHtcclxuICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyYXBoLWxpc3QnKTtcclxuICAgIGxpc3QucmVtb3ZlQ2hpbGQoZGl2KTtcclxuICAgIG1hcC5yZW1vdmVMYXllcihtYXJrZXIpO1xyXG4gICAgdXBkYXRlU2hhcmVVcmwoKVxyXG59XHJcblxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9wb2kuanMiLCJpbXBvcnQge1xyXG4gICAgQWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyLFxyXG4gICAgUmVtb3ZlUG9pbnRPZkludGVyZXN0RnJvbVRyYWNrZXIsXHJcbiAgICBTZXR1cFBvaW50T2ZJbnRlcmVzdFVJLFxyXG4gICAgUmVtb3ZlUG9pbnRPZkludGVyZXN0VUksXHJcbiAgICBHZXRBbGxQb2ludHNPZkludGVyZXN0XHJcbn0gZnJvbSAnLi9wb2knXHJcbmltcG9ydCB7dXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodH0gZnJvbSAnLi9wYW5lbCdcclxuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSAnLi9zaGFyZSdcclxuaW1wb3J0IHtHZXRNYXB9IGZyb20gJy4vbWFwJ1xyXG5pbXBvcnQge0dldEFqYXhPYmplY3R9IGZyb20gJy4vcGFyc2VyJ1xyXG5cclxudmFyIHRpcCA9IHt9O1xyXG5cclxuZnVuY3Rpb24gZ2V0R3JhcGhUaXAoKSB7XHJcbiAgICByZXR1cm4gdGlwXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBTZXR1cEdyYXBocyAoKSB7XHJcbiAgICBkMy5zZWxlY3RBbGwoXCIuZ3JhcGgtdHlwZS1idG5cIikub24oXCJjbGlja1wiLCBoYW5kbGVHcmFwaFR5cGVCdG5DbGljayk7XHJcbiAgICBleHRlbmREYXRlTW9kdWxlKCk7XHJcbiAgICB0aXAgPSBkMy50aXAoKS5hdHRyKCdjbGFzcycsICdkMy10aXAnKS5odG1sKGZ1bmN0aW9uIChkKSB7IHJldHVybiBkOyB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZXh0ZW5kRGF0ZU1vZHVsZSAoKSB7XHJcbiAgICBEYXRlLnByb3RvdHlwZS5pc0xlYXBZZWFyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHllYXIgPSB0aGlzLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgaWYoKHllYXIgJiAzKSAhPSAwKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuICgoeWVhciAlIDEwMCkgIT0gMCB8fCAoeWVhciAlIDQwMCkgPT0gMCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIEdldCBEYXkgb2YgWWVhclxyXG4gICAgRGF0ZS5wcm90b3R5cGUuZ2V0RE9ZID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGRheUNvdW50ID0gWzAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0XTtcclxuICAgICAgICB2YXIgbW4gPSB0aGlzLmdldE1vbnRoKCk7XHJcbiAgICAgICAgdmFyIGRuID0gdGhpcy5nZXREYXRlKCk7XHJcbiAgICAgICAgdmFyIGRheU9mWWVhciA9IGRheUNvdW50W21uXSArIGRuO1xyXG4gICAgICAgIGlmKG1uID4gMSAmJiB0aGlzLmlzTGVhcFllYXIoKSkgZGF5T2ZZZWFyKys7XHJcbiAgICAgICAgcmV0dXJuIGRheU9mWWVhcjtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBCaW5kR3JhcGhFdmVudHMgKG1hcCkge1xyXG4gICAgbWFwLm9uKFwiY2xpY2tcIiwgaGFuZGxlTWFwQ2xpY2spO1xyXG59XHJcblxyXG52YXIgYmFzZUljb24gPSBMLkljb24uZXh0ZW5kKHt9KTtcclxuXHJcbnZhciBncmFwaEljb24gPSBuZXcgYmFzZUljb24oe1xyXG4gICAgaWNvblVybDogJ2ltZ3MvYmx1ZV9pY29uLnBuZycsXHJcbiAgICBzaGFkb3dVcmw6ICdpbWdzL21hcmtlcl9zaGFkb3cucG5nJyxcclxuICAgIGljb25TaXplOiBbMjUsIDQxXSxcclxuICAgIGljb25BbmNob3I6IFsxMiwgNDFdLFxyXG4gICAgcG9wdXBBbmNob3I6IFsxLCAtMzRdLFxyXG4gICAgc2hhZG93U2l6ZTogWzQxLCA0MV1cclxufSk7XHJcblxyXG52YXIgaG92ZXJJY29uID0gbmV3IGJhc2VJY29uKHtcclxuICAgIGljb25Vcmw6ICdpbWdzL29yYW5nZV9pY29uLnBuZycsXHJcbiAgICBzaGFkb3dVcmw6ICdpbWdzL21hcmtlcl9zaGFkb3cucG5nJyxcclxuICAgIGljb25TaXplOiBbMjUsIDQxXSxcclxuICAgIGljb25BbmNob3I6IFsxMiwgNDFdLFxyXG4gICAgcG9wdXBBbmNob3I6IFsxLCAtMzRdLFxyXG4gICAgc2hhZG93U2l6ZTogWzQxLCA0MV1cclxufSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SWNvbih0eXBlKSB7XHJcbiAgICByZXR1cm4gdHlwZSA9PT0gJ2hvdmVyJyA/IGhvdmVySWNvbiA6IGdyYXBoSWNvblxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVNYXBDbGljayAoZSkge1xyXG4gICAgdmFyIG1hcCA9IHRoaXM7XHJcbiAgICB2YXIgbGF0ID0gZS5sYXRsbmcubGF0O1xyXG4gICAgdmFyIGxuZyA9IGUubGF0bG5nLmxuZztcclxuXHJcbiAgICB2YXIgcG9pID0gQWRkUG9pbnRPZkludGVyZXN0VG9UcmFja2VyKGxhdCwgbG5nKVxyXG4gICAgU2V0dXBQb2ludE9mSW50ZXJlc3RVSShtYXAsIHBvaSwgaG92ZXJJY29uLCBncmFwaEljb24pXHJcbiAgICB1cGRhdGVTaGFyZVVybCgpXHJcblxyXG4gICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZXZlbnQgY2xpY2sgb24gbWFwXHJcbiAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgZXZlbnRDYXRlZ29yeTogJ21hcCcsXHJcbiAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxyXG4gICAgICBldmVudExhYmVsOiAnYWRkIHBvaW50JyxcclxuICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXHJcbiAgICB9KTtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNYXJrZXIgKG1hcCwgbGF0LCBsbmcpIHtcclxuICAgIHJldHVybiBMLm1hcmtlcihbbGF0LCBsbmddLCB7aWNvbjogZ3JhcGhJY29ufSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHcmFwaFJlbW92ZXIgKG1hcCwgZGl2LCBtYXJrZXIsIHBvaSkge1xyXG4gICAgdmFyIGVsZW0gPSBjcmVhdGVHcmFwaFJlbW92ZXJFbGVtKCk7XHJcbiAgICBkaXYuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyYXBoLWVsZW0taGVhZGVyXCIpWzBdLmFwcGVuZENoaWxkKGVsZW0pO1xyXG4gICAgZDMuc2VsZWN0KGVsZW0pLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyByZW1vdmUgZ3JhcGhcclxuICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXHJcbiAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcclxuICAgICAgICAgIGV2ZW50TGFiZWw6ICdyZW1vdmUnLFxyXG4gICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIFJlbW92ZVBvaW50T2ZJbnRlcmVzdEZyb21UcmFja2VyKHBvaSlcclxuICAgICAgICBSZW1vdmVQb2ludE9mSW50ZXJlc3RVSShtYXAsIGRpdiwgbWFya2VyKVxyXG4gICAgICAgIHVwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHQoKVxyXG4gICAgICAgIHVwZGF0ZVNoYXJlVXJsKClcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVHcmFwaFJlbW92ZXJFbGVtICgpIHtcclxuICAgIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgIGVsZW0uY2xhc3NOYW1lID0gXCJyZW1vdmUtZ3JhcGhcIjtcclxuICAgIGVsZW0uaW5uZXJUZXh0ID0gU3RyaW5nLmZyb21DaGFyQ29kZShcIjEwMDA1XCIpO1xyXG4gICAgZWxlbS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBcIlJlbW92ZSBncmFwaFwiKTtcclxuICAgIHJldHVybiBlbGVtO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIERBVEEgUFJPQ0VTU0lORyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5mdW5jdGlvbiBzZW5kUmVxdWVzdChyZXF1ZXN0LCB1cmwpIHtcclxuICAgIHJlcXVlc3Qub3BlbignR0VUJywgdXJsKVxyXG4gICAgcmVxdWVzdC5zZW5kKClcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlR3JhcGhEYXRhUmVzcG9uc2UgKGRpdiwgbGF0LCBsbmcsIHJlc3BvbnNlKSB7XHJcbiAgICByZXNwb25zZSA9IHJlc3BvbnNlLnJlcGxhY2UoL1xcW3xcXF18XFwnL2csIFwiXCIpLnNwbGl0KFwiLCBcIik7XHJcbiAgICBkcmF3R3JhcGgocmVzcG9uc2UsIGRpdiwgbGF0LCBsbmcpO1xyXG4gICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldERhdGEobGF0LCBsbmcsIGRpdikge1xyXG4gICAgdmFyIHVybCA9IFwiaHR0cHM6Ly9mY2F2LW5kdmkubmVtYWMub3JnL2xhbmRkYXRfcHJvZHVjdC5jZ2k/YXJncz1cIiArIGxuZyArIFwiLFwiICsgbGF0O1xyXG4gICAgdmFyIG9SZXEgPSBHZXRBamF4T2JqZWN0KGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgIGhhbmRsZUdyYXBoRGF0YVJlc3BvbnNlKGRpdiwgbGF0LCBsbmcsIHJlc3BvbnNlKVxyXG4gICAgfSlcclxuXHJcbiAgICBvUmVxLm9wZW4oXCJHRVRcIiwgdXJsKTtcclxuICAgIG9SZXEuc2VuZCgpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNwbGl0RGF0YShkYXRhKSB7XHJcbiAgICB2YXIgaTtcclxuICAgIGZvciAoaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZGF0YVtpXSA9IGRhdGFbaV0uc3BsaXQoXCIsXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlcHJvY2Vzc0RhdGEgKG9yaWdkYXRhKSB7XHJcbiAgICB2YXIgZXhwZWN0ZWRZZWFyTGVuZ3RoID0gNDY7XHJcbiAgICB2YXIgZGF0YSA9IHt9O1xyXG4gICAgdmFyIHBvaW50O1xyXG4gICAgdmFyIGtleTtcclxuICAgIHZhciBpLCBqO1xyXG5cclxuICAgIGRhdGFbXCJrZXlzXCJdID0gW107XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgb3JpZ2RhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBwb2ludCA9IG9yaWdkYXRhW2ldO1xyXG4gICAgICAgIGtleSA9IHBvaW50WzBdLnN1YnN0cmluZygwLDQpO1xyXG4gICAgICAgIGlmICghZGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgIGRhdGFba2V5XSA9IFtdO1xyXG4gICAgICAgICAgICBkYXRhW1wia2V5c1wiXS5wdXNoKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGFba2V5XS5wdXNoKHBvaW50KTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIga2V5c1RvQmVEZWxldGVkID0gW107XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5rZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAga2V5ID0gZGF0YS5rZXlzW2ldO1xyXG4gICAgICAgIGlmIChkYXRhW2tleV0ubGVuZ3RoICE9PSBleHBlY3RlZFllYXJMZW5ndGgpIHtcclxuICAgICAgICAgICAga2V5c1RvQmVEZWxldGVkLnB1c2goa2V5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IGtleXNUb0JlRGVsZXRlZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGtleSA9IGtleXNUb0JlRGVsZXRlZFtpXTtcclxuICAgICAgICBkZWxldGUgZGF0YVtrZXldO1xyXG4gICAgICAgIGRhdGEua2V5cy5zcGxpY2UoZGF0YS5rZXlzLmluZGV4T2Yoa2V5KSwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGRhdGFGb3JNZWRpYW5zO1xyXG4gICAgdmFyIG1lZGlhbjtcclxuICAgIGRhdGFbXCJtZWRpYW5zXCJdID0gW107XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgZXhwZWN0ZWRZZWFyTGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBkYXRhRm9yTWVkaWFucyA9IFtdO1xyXG4gICAgICAgIGZvciAoaiA9IGk7IGogPCBvcmlnZGF0YS5sZW5ndGg7IGogKz0gZXhwZWN0ZWRZZWFyTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGRhdGFGb3JNZWRpYW5zLnB1c2gob3JpZ2RhdGFbal1bMV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbWVkaWFuID0gZGF0YUZvck1lZGlhbnMuc29ydCgpW01hdGguZmxvb3IoZGF0YUZvck1lZGlhbnMubGVuZ3RoLzIpXTtcclxuICAgICAgICBkYXRhW1wibWVkaWFuc1wiXS5wdXNoKG1lZGlhbik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSU5URVJGQUNFIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2sgKCkge1xyXG4gICAgdmFyIHR5cGUgPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJyk7XHJcbiAgICB2YXIgYWN0aXZlVHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF0uZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKTtcclxuXHJcbiAgICBpZiAodHlwZSA9PT0gYWN0aXZlVHlwZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBjbGljayBvbiBncmFwaCB0eXBlXHJcbiAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoIHR5cGUnLFxyXG4gICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcclxuICAgICAgZXZlbnRMYWJlbDogdHlwZSxcclxuICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXHJcbiAgICB9KTtcclxuXHJcbiAgICBIYW5kbGVHcmFwaFRhYkNoYW5nZSh0eXBlLCBhY3RpdmVUeXBlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEhhbmRsZUdyYXBoVGFiQ2hhbmdlIChncmFwaFR5cGUpIHtcclxuICAgIGlmICghaXNHcmFwaExpc3RFbXB0eSgpKSB7XHJcbiAgICAgICAgdmFyIG9sZEFjdGl2ZUdyYXBoRWxlbUhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLWVsZW0nKVswXS5zY3JvbGxIZWlnaHRcclxuICAgICAgICB2YXIgb2xkQWN0aXZlR3JhcGhJbmZvSGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhcGgtdHlwZS1pbmZvIGFjdGl2ZScpWzBdLnNjcm9sbEhlaWdodFxyXG4gICAgICAgIHZhciByaWdodFBhbmVsU2Nyb2xsVG9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsJykuc2Nyb2xsVG9wXHJcbiAgICB9XHJcbiAgICBkaXNhYmxlQWN0aXZlR3JhcGhUYWIoKTtcclxuICAgIGVuYWJsZUdyYXBoVGFiKGdyYXBoVHlwZSk7XHJcbiAgICBpZiAoIWlzR3JhcGhMaXN0RW1wdHkoKSkgYWRqdXN0U2Nyb2xsUG9zaXRpb24ob2xkQWN0aXZlR3JhcGhJbmZvSGVpZ2h0LCBvbGRBY3RpdmVHcmFwaEVsZW1IZWlnaHQsIHJpZ2h0UGFuZWxTY3JvbGxUb3ApXHJcbiAgICB1cGRhdGVTaGFyZVVybCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0dyYXBoTGlzdEVtcHR5KCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLWVsZW0nKVswXSA9PT0gdW5kZWZpbmVkXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkanVzdFNjcm9sbFBvc2l0aW9uKG9sZEdyYXBoSW5mb0hlaWdodCwgb2xkR3JhcGhFbGVtSGVpZ2h0LCBvbGRSaWdodFBhbmVsU2Nyb2xsVG9wKSB7XHJcbiAgICB2YXIgbmV3R3JhcGhJbmZvSGVpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZ3JhcGgtdHlwZS1pbmZvIGFjdGl2ZScpWzBdLnNjcm9sbEhlaWdodFxyXG4gICAgdmFyIG5ld0dyYXBoRWxlbUhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyYXBoLWVsZW0nKVswXS5zY3JvbGxIZWlnaHRcclxuXHJcbiAgICB2YXIgbmV3R3JhcGhFbGVtSGVpZ2h0U2NhbGUgPSAobmV3R3JhcGhFbGVtSGVpZ2h0IC8gb2xkR3JhcGhFbGVtSGVpZ2h0KVxyXG4gICAgdmFyIG5ld1JpZ2h0UGFuZWxTY3JvbGxUb3AgPSBuZXdHcmFwaEluZm9IZWlnaHQgKyAoXHJcbiAgICAgICAgKG9sZFJpZ2h0UGFuZWxTY3JvbGxUb3AgLSBvbGRHcmFwaEluZm9IZWlnaHQpICogbmV3R3JhcGhFbGVtSGVpZ2h0U2NhbGVcclxuICAgIClcclxuXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtcGFuZWwnKS5zY3JvbGxUb3AgPSBuZXdSaWdodFBhbmVsU2Nyb2xsVG9wXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRpc2FibGVBY3RpdmVHcmFwaFRhYiAoKSB7XHJcbiAgICB2YXIgYWN0aXZlRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF07XHJcbiAgICB2YXIgYWN0aXZlQ2xhc3MgPSBcImdyYXBoLVwiICsgYWN0aXZlRWxlbS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXR5cGVcIik7XHJcblxyXG4gICAgYWN0aXZlRWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpLmNsYXNzTGlzdC5yZW1vdmUoYWN0aXZlQ2xhc3MpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmFibGVHcmFwaFRhYiAoZ3JhcGhUeXBlKSB7XHJcbiAgICBkMy5zZWxlY3QoXCIuZ3JhcGgtdHlwZS1idG5bZGF0YS10eXBlPSdcIiArIGdyYXBoVHlwZSArIFwiJ11cIikuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKS5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtXCIgKyBncmFwaFR5cGUpO1xyXG4gICAgZDMuc2VsZWN0QWxsKCcuZ3JhcGgtdHlwZS1pbmZvJylcclxuICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIGdyYXBoVHlwZSA9PT0gdGhpcy5pZC5zcGxpdCgnLScpWzBdXHJcbiAgICB9KVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlR3JhcGhEaXYgKHBvaSkge1xyXG4gICAgdmFyIGRlY2ltYWxQbGFjZXMgPSAzXHJcbiAgICB2YXIgbGF0U2hvcnQgPSByb3VuZEZsb2F0KHBvaS5sYXQsIGRlY2ltYWxQbGFjZXMpXHJcbiAgICB2YXIgbG5nU2hvcnQgPSByb3VuZEZsb2F0KHBvaS5sbmcsIGRlY2ltYWxQbGFjZXMpXHJcbiAgICB2YXIgd3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICB2YXIgaGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHdyYXBwZXIuYXBwZW5kQ2hpbGQoaGVhZGVyKVxyXG4gICAgdmFyIHpvb21Ub01hcmtlckJ1dHRvbiA9IG1ha2Vab29tVG9NYXBNYXJrZXJCdXR0b24ocG9pKVxyXG4gICAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIkxhdDogXCIgKyBsYXRTaG9ydCArIFwiLCBMb25nOiBcIiArIGxuZ1Nob3J0KTtcclxuICAgIHZhciBjb250ZW50RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGNvbnRlbnREaXYuY2xhc3NOYW1lID0gXCJncmFwaC1sYXQtbG9uXCI7XHJcbiAgICBjb250ZW50RGl2LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xyXG5cclxuICAgIGhlYWRlci5hcHBlbmRDaGlsZCh6b29tVG9NYXJrZXJCdXR0b24pXHJcbiAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoY29udGVudERpdik7XHJcblxyXG4gICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtZWxlbVwiKVxyXG4gICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJncmFwaC1lbGVtLWhlYWRlclwiKVxyXG5cclxuICAgIGdldERhdGEocG9pLmxhdCwgcG9pLmxuZywgd3JhcHBlcik7XHJcbiAgICByZXR1cm4gd3JhcHBlcjtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZVpvb21Ub01hcE1hcmtlckJ1dHRvbihwb2kpIHtcclxuICAgIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXHJcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYnRuJylcclxuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdwYW4tdG8tbWFya2VyLWJ0bicpXHJcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSBcIlNob3cgT24gTWFwXCJcclxuICAgIGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKHBvaSwgZSkge1xyXG4gICAgICAgIHZhciBtYXAgPSBHZXRNYXAoKVxyXG4gICAgICAgIG1hcC5wYW5UbyhbcG9pLmxhdCwgcG9pLmxuZ10pXHJcblxyXG4gICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIHNob3cgb24gbWFwXHJcbiAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XHJcbiAgICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxyXG4gICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXHJcbiAgICAgICAgICBldmVudExhYmVsOiAne1wic2hvdyBvbiBtYXBcIjp7XCJsYXRcIjonICsgcG9pLmxhdCArICcsXCJsb25nXCI6JysgIHBvaS5sbmcrICd9fScsXHJcbiAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9LmJpbmQoYnV0dG9uLCBwb2kpXHJcbiAgICByZXR1cm4gYnV0dG9uXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdHcmFwaChkYXRhLCBkaXYsIGxhdCwgbG5nKSB7XHJcbiAgICBkYXRhID0gc3BsaXREYXRhKGRhdGEpO1xyXG4gICAgdmFyIHJlcHJvY2Vzc2VkRGF0YSA9IHJlcHJvY2Vzc0RhdGEoZGF0YSk7XHJcbiAgICBtYWtlVXBEb3duTGluZUdyYXBoKGRhdGEsIGRpdiwgcmVwcm9jZXNzZWREYXRhW1wibWVkaWFuc1wiXSk7XHJcbiAgICBtYWtlVXBEb3duT3ZlcmxhcGluZ0xpbmVHcmFwaFdpdGhDaGVja2JveGVzKHJlcHJvY2Vzc2VkRGF0YSwgZGl2LCBsYXQsIGxuZyk7XHJcbiAgICBkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMocmVwcm9jZXNzZWREYXRhLCBkaXYsIGxhdCwgbG5nKTtcclxuICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpO1xyXG4gICAgbGlzdC5hcHBlbmRDaGlsZChkaXYpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByb3VuZEZsb2F0KG51bWJlciwgZGVjaW1hbFBsYWNlcykge1xyXG4gICAgcmV0dXJuIE1hdGgucm91bmQobnVtYmVyICogTWF0aC5wb3coMTAsIGRlY2ltYWxQbGFjZXMpKSAvIChNYXRoLnBvdygxMCwgZGVjaW1hbFBsYWNlcykpXHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLyBUSU1FU0VSSUVTIExJTkUgR1JBUEggLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmZ1bmN0aW9uIG1ha2VVcERvd25MaW5lR3JhcGggKGRhdGEsIGRpdiwgYXZlcmFnZXMpIHtcclxuICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcclxuICAgIHZhciBtYXJnaW4gPSB7dG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyOX0sXHJcbiAgICB3aWR0aCA9IDU4MCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxyXG4gICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XHJcblxyXG4gICAgLy8gU2V0IHRoZSByYW5nZXNcclxuICAgIHZhciB4ID0gZDMuc2NhbGVUaW1lKCkucmFuZ2UoWzAsIHdpZHRoXSlcclxuICAgICAgICAuZG9tYWluKFtcclxuICAgICAgICAgICAgcGFyc2VEYXRlKGRhdGFbMF1bMF0pLFxyXG4gICAgICAgICAgICBwYXJzZURhdGUoZGF0YVtkYXRhLmxlbmd0aC0xXVswXSlcclxuICAgICAgICBdKTtcclxuICAgIHZhciB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSlcclxuICAgICAgICAuZG9tYWluKFswLCAxMDBdKTtcclxuXHJcbiAgICAvLyBEZWZpbmUgdGhlIGF4ZXNcclxuICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcclxuICAgICAgICAudGlja3MoMTYpXHJcbiAgICAgICAgLnRpY2tGb3JtYXQoZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KVxyXG4gICAgICAgIC50aWNrcyg2KTtcclxuXHJcbiAgICAvLyBEZWZpbmUgdGhlIGxpbmVcclxuICAgIHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKClcclxuICAgICAgICAueChmdW5jdGlvbihkKSB7IHJldHVybiB4KHBhcnNlRGF0ZShkWzBdKSk7IH0pXHJcbiAgICAgICAgLnkoZnVuY3Rpb24oZCkgeyByZXR1cm4geShkWzFdKTsgfSk7XHJcblxyXG4gICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KVxyXG4gICAgICAgIC5hcHBlbmQoXCJkaXZcIilcclxuICAgICAgICAuY2xhc3NlZChcInRpbWVzZXJpZXMtZ3JhcGhcIiwgdHJ1ZSk7XHJcblxyXG4gICAgLy8gQWRkcyB0aGUgc3ZnIGNhbnZhc1xyXG4gICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXHJcbiAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB3ID0gd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodFxyXG4gICAgICAgICAgICB2YXIgaCA9IGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tXHJcbiAgICAgICAgICAgIHJldHVybiAnMCAwICcgKyB3ICsgJyAnICsgaFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKVxyXG4gICAgICAgIC5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XHJcblxyXG4gICAgc3ZnLmNhbGwodGlwKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIHZhbHVlbGluZSBwYXRoLlxyXG4gICAgZHJhd0xpbmVhclBhdGgoZGF0YSwgdmFsdWVsaW5lLCBzdmcpO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgWCBBeGlzXHJcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ4IGF4aXNcIilcclxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpXHJcbiAgICAgICAgLmNhbGwoeEF4aXMpO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgWSBBeGlzXHJcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ5IGF4aXNcIilcclxuICAgICAgICAuY2FsbCh5QXhpcyk7XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XHJcbiAgICAgKi9cclxuICAgIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8gT1ZFUkxBUFBJTkcgVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmZ1bmN0aW9uIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMgKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcclxuICAgIHZhciB5ZWFyID0gXCIyMDE1XCI7XHJcblxyXG4gICAgdmFyIGNoYXJ0cyA9IHt9O1xyXG5cclxuICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcclxuICAgIHZhciBtYXJnaW4gPSB7dG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyOX0sXHJcbiAgICAgICAgd2lkdGggPSA1MDAgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCxcclxuICAgICAgICBoZWlnaHQgPSAyNzAgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcclxuXHJcbiAgICB2YXIgYXZlcmFnZXMgPSBkYXRhLm1lZGlhbnM7XHJcblxyXG4gICAgdmFyIHggPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFswLCB3aWR0aF0pXHJcbiAgICAgICAgLmRvbWFpbihbMCwgMzY1XSk7XHJcbiAgICB2YXIgeSA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodCwgMF0pXHJcbiAgICAgICAgLmRvbWFpbihbMCwgMTAwXSk7XHJcblxyXG4gICAgLy8gRGVmaW5lIHRoZSBheGVzXHJcbiAgICBmdW5jdGlvbiBmb3JtYXRNb250aFRpY2sgKGQpIHtcclxuICAgICAgICByZXR1cm4gKE1PTlRIX0xBQkVMU1soZC0xNSkvMzBdKTtcclxuICAgIH1cclxuICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcclxuICAgICAgICAudGlja3MoMTEpXHJcbiAgICAgICAgLnRpY2tWYWx1ZXMoWzE1LCA0NSwgNzUsIDEwNSwgMTM1LCAxNjUsIDE5NSwgMjI1LCAyNTUsIDI4NSwgMzE1LCAzNDVdKVxyXG4gICAgICAgIC50aWNrRm9ybWF0KGZvcm1hdE1vbnRoVGljayk7XHJcblxyXG4gICAgdmFyIHlBeGlzID0gZDMuYXhpc0xlZnQoeSlcclxuICAgICAgICAudGlja3MoNik7XHJcblxyXG4gICAgLy8gRGVmaW5lIHRoZSBsaW5lXHJcbiAgICB2YXIgdmFsdWVsaW5lID0gZDMubGluZSgpXHJcbiAgICAgICAgLngoZnVuY3Rpb24oZCwgaSkgeyByZXR1cm4gKEFycmF5LmlzQXJyYXkoZCkgPyB4KHBhcnNlSnVsaWFuRGF5KGRbMF0pKSA6IHgoKGkgKiA4KSArIDMgKSk7IH0pXHJcbiAgICAgICAgLnkoZnVuY3Rpb24oZCkgeyByZXR1cm4gKEFycmF5LmlzQXJyYXkoZCkgPyB5KGRbMV0pIDogeShkKSk7IH0pO1xyXG5cclxuICAgIHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KGRpdikuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJvdmVybGFwcGluZy1ncmFwaFwiLCB0cnVlKTtcclxuXHJcbiAgICAvLyBBZGRzIHRoZSBzdmcgY2FudmFzXHJcbiAgICB2YXIgc3ZnID0gd3JhcHBlclxyXG4gICAgICAgIC5hcHBlbmQoXCJzdmdcIilcclxuICAgICAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdyA9IHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHRcclxuICAgICAgICAgICAgICAgIHZhciBoID0gaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b21cclxuICAgICAgICAgICAgICAgIHJldHVybiAnMCAwICcgKyB3ICsgJyAnICsgaFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWlkWU1pZCcpXHJcbiAgICAgICAgICAgIC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxyXG4gICAgICAgICAgICAvLy5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKVxyXG4gICAgICAgIC5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsXHJcbiAgICAgICAgICAgICAgICAgIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XHJcblxyXG4gICAgc3ZnLmNhbGwodGlwKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIFggQXhpc1xyXG4gICAgc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieCBheGlzXCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGhlaWdodCArIFwiKVwiKVxyXG4gICAgICAgIC5jYWxsKHhBeGlzKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIFkgQXhpc1xyXG4gICAgc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpXHJcbiAgICAgICAgLmNhbGwoeUF4aXMpO1xyXG5cclxuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl0gPSB7XHJcbiAgICAgICAgXCJwYXRoXCIgOiBkcmF3TGluZWFyUGF0aChkYXRhW1wibWVkaWFuc1wiXSwgdmFsdWVsaW5lLCBzdmcpXHJcbiAgICB9O1xyXG5cclxuICAgIGNoYXJ0c1t5ZWFyXSA9IHtcclxuICAgICAgICBcInBhdGhcIiA6IGRyYXdMaW5lYXJQYXRoKGRhdGFbeWVhcl0sIHZhbHVlbGluZSwgc3ZnKVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XHJcbiAgICAgKi9cclxuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl1bXCJwb2ludHNcIl0gPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbXCJtZWRpYW5zXCJdLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG4gICAgY2hhcnRzW3llYXJdW1wicG9pbnRzXCJdID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW3llYXJdLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG5cclxuICAgIHZhciBpbnB1dHdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwiaW5wdXQtd3JhcHBlclwiLCB0cnVlKTtcclxuXHJcbiAgICBkYXRhLmtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgY3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBrZXksIFwidGltZXNlcmllc1wiLCB5ZWFyLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBcIm1lZGlhbnNcIiwgXCJ0aW1lc2VyaWVzXCIsIFwibWVkaWFuc1wiLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFBPTEFSIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5mdW5jdGlvbiBkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMgKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcclxuICAgIHZhciB5ZWFyID0gXCIyMDE1XCI7XHJcbiAgICB2YXIgd2lkdGggPSA0OTAsXHJcbiAgICAgICAgaGVpZ2h0ID0gNDkwLFxyXG4gICAgICAgIHJhZGl1cyA9IE1hdGgubWluKHdpZHRoLCBoZWlnaHQpIC8gMiAtIDMwO1xyXG5cclxuICAgIHZhciBhdmVyYWdlcyA9IGRhdGFbXCJtZWRpYW5zXCJdO1xyXG4gICAgdmFyIGNlbnRlciA9IGZpbmRQb2xhckNlbnRlcihkYXRhKTtcclxuICAgIHZhciB0aHJlc2hvbGRzID0gZmluZFBvbGFyVGhyZXNob2xkcyhhdmVyYWdlcywgY2VudGVyWzFdWzBdKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdXAgc2NhbGluZyBvZiBkYXRhLiBXZSBrbm93IHRoYXQgdGhlIG5kdmkgdmFsdWVzIGZhbGwgYmV0d2VlblxyXG4gICAgICogMCAmIDEwMCBzbyB3ZSBzZXQgb3VyIGRvbWFpbiB0byB0aGF0LiBUaGUgcmFuZ2UgY29udHJvbHMgd2hlcmUgdGhlXHJcbiAgICAgKiBwb2ludHMgd2lsbCBsaWUgaW4gb3VyIGdyYXBoLCBzbyB3ZSBzZXQgdGhlbSB0byBiZSBiZXR3ZWVuIDAgYW5kIHRoZVxyXG4gICAgICogcmFkaXVzLlxyXG4gICAgICovXHJcbiAgICB2YXIgciA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAuZG9tYWluKFswLCAxMDBdKVxyXG4gICAgICAgIC5yYW5nZShbMCwgcmFkaXVzXSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB3aGljaCB3aWxsIGRyYXcgZWFjaCBwb2ludC4gVG8gY29tcHV0ZSB0aGUgZGlzdGFuY2UgZnJvbSB0aGVcclxuICAgICAqIGNlbnRlciBlYWNoIHBvaW50IGlzIHdlIHBhc3MgdGhlIGRhdGFwb2ludCB0byB0aGUgZnVuY3Rpb24gZGVmaW5lZCBhYm92ZS5cclxuICAgICAqIFRvIGRldGVybWluZSB0aGUgYW5nbGUgZnJvbSB0aGUgb3JpZ2luIHdlIG5lZWQgdG8gY29udmVydCB0aGUgZGF5IHRvXHJcbiAgICAgKiByYWRpYW5zLCBzbyB3ZSBjb252ZXJ0IHRoZSBkYXkgdG8gYSBudW1iZXIgYmV0d2VlbiAwICYgMSBhbmQgdGhlbiBtdWx0aXBseVxyXG4gICAgICogaXQgYnkgMiBwaS5cclxuICAgICAqL1xyXG4gICAgdmFyIGxpbmUgPSBkMy5yYWRpYWxMaW5lKClcclxuICAgICAgICAucmFkaXVzKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyByKGRbMV0pIDogcihkKTsgfSlcclxuICAgICAgICAuYW5nbGUoZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICB2YXIgZGF5ID0gQXJyYXkuaXNBcnJheShkKSA/IHBhcnNlSnVsaWFuRGF5KGRbMF0pIDogKGkgKiA4KSArIDM7XHJcbiAgICAgICAgICAgIHJldHVybiAoKCgoZGF5IC0gMSklMzY1KS8zNjUpICogKDIqTWF0aC5QSSkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB1cCB0aGUgY2FudmFzIHdoZXJlIHRoZSBjaXJjbGUgd2lsbCBiZSBkcmF3bi5cclxuICAgICAqL1xyXG4gICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcInBvbGFyLWdyYXBoXCIsIHRydWUpO1xyXG4gICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgICAgLy8uYXR0cihcIndpZHRoXCIsIHdpZHRoKVxyXG4gICAgICAgIC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxyXG4gICAgICAgIC5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJzAgMCAnKyB3aWR0aCArICcgJyArIGhlaWdodFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKVxyXG4gICAgICAgIC5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB3aWR0aCAvIDIgKyBcIixcIiArIGhlaWdodCAvIDIgKyBcIilcIik7XHJcblxyXG4gICAgc3ZnLmNhbGwodGlwKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgYmlnIGNpcmNsZXMgb2YgdGhlIGdyYXBoICYgdGhlaXIgbGFiZWxzXHJcbiAgICAgKi9cclxuICAgIHZhciBnciA9IHN2Zy5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInIgYXhpc1wiKVxyXG4gICAgICAgIC5zZWxlY3RBbGwoXCJnXCIpXHJcbiAgICAgICAgLmRhdGEoci50aWNrcyg1KS5zbGljZSgxKSlcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpO1xyXG5cclxuICAgIGdyLmFwcGVuZChcImNpcmNsZVwiKVxyXG4gICAgICAgIC5hdHRyKFwiclwiLCByKTtcclxuXHJcbiAgICBnci5hcHBlbmQoXCJ0ZXh0XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIC1yKGQpIC0gNDsgfSlcclxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInJvdGF0ZSgxNSlcIilcclxuICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxyXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQ7IH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBsYWJlbHMgZm9yIGVhY2ggbW9udGggYW5kIHRoZSBsaW5lc1xyXG4gICAgICogdGhhdCBnbyBvdXQgdG8gdGhlbS5cclxuICAgICAqL1xyXG4gICAgdmFyIGdhX2EgPSBzdmcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJhIGF4aXNcIilcclxuICAgICAgICAuc2VsZWN0QWxsKFwiZ1wiKVxyXG4gICAgICAgIC5kYXRhKGQzLnJhbmdlKDAsIDM2MCwgMzApKVxyXG4gICAgICAgIC5lbnRlcigpLmFwcGVuZChcImdcIilcclxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJyb3RhdGUoXCIgKyAoZCAtIDkwKSArIFwiKVwiOyB9KTtcclxuXHJcbiAgICBnYV9hLmFwcGVuZChcImxpbmVcIilcclxuICAgICAgICAuYXR0cihcIngyXCIsIHJhZGl1cyk7XHJcblxyXG4gICAgZ2FfYS5hcHBlbmQoXCJ0ZXh0XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ4XCIsIHJhZGl1cyArIDYpXHJcbiAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpXHJcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJlbmRcIiA6IG51bGw7IH0pXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7IH0pXHJcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gTU9OVEhfTEFCRUxTW2QvMzBdOyB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIHRoZSB0aHJlc2hvbGQgbGluZXNcclxuICAgICAqL1xyXG4gICAgdmFyIHRocmVzaG9sZEVsZW0gPSBzdmcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5zZWxlY3RBbGwoXCJnXCIpXHJcbiAgICAgICAgLmRhdGEodGhyZXNob2xkcylcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwicm90YXRlKFwiICsgKGQuZGF0YVsxXVswXSAtIDkwKSArIFwiKVwiOyB9KTtcclxuXHJcbiAgICB0aHJlc2hvbGRFbGVtLmFwcGVuZChcImxpbmVcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibGluZVwiKVxyXG4gICAgICAgIC5hdHRyKFwieDJcIiwgcmFkaXVzKTtcclxuXHJcbiAgICB0aHJlc2hvbGRFbGVtLmFwcGVuZChcInRleHRcIilcclxuICAgICAgICAuYXR0cihcInhcIiwgZnVuY3Rpb24gKGQpIHsgdmFyIGRheSA9IGQuZGF0YVsxXVswXTsgcmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyByYWRpdXMgKyAzMCA6IHJhZGl1cyAtIDMwfSlcclxuICAgICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuICgoKChkLmRhdGFbMV1bMF0pJTM2NSkvMzY1KSAqICgyKk1hdGguUEkpKSArIDY7IH0pXHJcbiAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpXHJcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdOyByZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IFwibWlkZGxlXCIgOiBudWxsOyB9KVxyXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgdmFyIGRheSA9IGQuZGF0YVsxXVswXTsgcmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyBcInJvdGF0ZSgxODAgXCIgKyAocmFkaXVzICsgNikgKyBcIiwwKVwiIDogbnVsbDsgfSlcclxuICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBkLmxhYmVsOyB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIHRoZSBsaW5lIHRvIHRoZSBjZW50ZXIgb2YgdGhlIGRhdGFcclxuICAgICAqL1xyXG4gICAgdmFyIGNlbnRlckRheSA9IGNlbnRlclsxXVswXTtcclxuICAgIHZhciBjZW50ZXJEYXlPcHBvc2l0ZSA9IChjZW50ZXJEYXkgKyAoMzY1LzIpKSAlIDM2NTtcclxuICAgIHZhciBjZW50ZXJEYXlEYXRhID0gW2NlbnRlckRheSwgMTAwXTtcclxuICAgIHZhciBjZW50ZXJEYXlPcHBvc2l0ZURhdGEgPSBbY2VudGVyRGF5T3Bwb3NpdGUsIDEwMF07XHJcbiAgICB2YXIgZ3Jvd2luZ1NlYXNvbkRhdGEgPSBbY2VudGVyRGF5RGF0YSwgY2VudGVyRGF5T3Bwb3NpdGVEYXRhXVxyXG5cclxuICAgIGRyYXdQb2xhclBhdGgoZ3Jvd2luZ1NlYXNvbkRhdGEsIGxpbmUsIHN2ZylcclxuICAgICAgICAuY2xhc3NlZChcImdyb3dpbmctc2Vhc29uLWxpbmVcIiwgXCJ0cnVlXCIpO1xyXG5cclxuICAgIGRyYXdQb2xhclBhdGgoY2VudGVyLCBsaW5lLCBzdmcpXHJcbiAgICAgICAgLmNsYXNzZWQoXCJjZW50ZXItbGluZVwiLCBcInRydWVcIik7XHJcblxyXG4gICAgc3ZnLnNlbGVjdEFsbChcInBvaW50XCIpXHJcbiAgICAgICAgLmRhdGEoW2NlbnRlclsxXV0pXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKFwiY2lyY2xlXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImNlbnRlclwiKVxyXG4gICAgICAgIC5hdHRyKFwiclwiLCA0KVxyXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHtcclxuICAgICAgICAgICAgdmFyIGNvb3JzID0gbGluZShbZF0pLnNsaWNlKDEpLnNsaWNlKDAsIC0xKTtcclxuICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgY29vcnMgKyBcIilcIlxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCIjMDAwXCIpXHJcbiAgICAgICAgLmF0dHIoXCJmaWxsXCIsIFwiI2VhMGM0OFwiKVxyXG4gICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbihkKSB7XHJcbiAgICAgICAgICAgIHRpcC5zaG93KFwiQ2VudGVyOiBcIiAgKyBTdHJpbmcoZFsxXSkuc3Vic3RyaW5nKDAsIDcpKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDUpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAgICAgICB0aXAuaGlkZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgNClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB2YXIgY2hhcnRzID0ge307XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGxpbmUgdGhhdCB0aGUgZGF0YSBmb2xsb3dzXHJcbiAgICAgKi9cclxuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl0gPSB7XHJcbiAgICAgICAgXCJwYXRoXCIgOiBkcmF3UG9sYXJQYXRoKGF2ZXJhZ2VzLCBsaW5lLCBzdmcpXHJcbiAgICB9O1xyXG5cclxuICAgIGNoYXJ0c1t5ZWFyXSA9IHtcclxuICAgICAgICBcInBhdGhcIiA6IGRyYXdQb2xhclBhdGgoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnKVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XHJcbiAgICAgKi9cclxuICAgIGNoYXJ0cy5tZWRpYW5zLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoYXZlcmFnZXMsIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG4gICAgY2hhcnRzW3llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XHJcblxyXG4gICAgdmFyIGlucHV0d3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJpbnB1dC13cmFwcGVyXCIsIHRydWUpO1xyXG5cclxuICAgIGRhdGEua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImlucHV0XCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiaWRcIiwgXCJwb2xhci1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcclxuICAgICAgICAgICAgLmF0dHIoXCJ2YWx1ZVwiLCBrZXkpXHJcbiAgICAgICAgICAgIC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgKGtleSA9PT0geWVhcikgPyB0cnVlIDogZmFsc2UpXHJcbiAgICAgICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBncmFwaCB5ZWFyIGNsaWNrIG9mZlxyXG4gICAgICAgICAgICAgICAgICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcclxuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxyXG4gICAgICAgICAgICAgICAgICAgICAgZXZlbnRMYWJlbDogIG5ld1llYXIgKyAnIHBvbGFyIHRpbWVzZXJpZXMgb2ZmJyxcclxuICAgICAgICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2hhcnRzLmhhc093blByb3BlcnR5KG5ld1llYXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZ3JhcGggeWVhciBjbGljayBvZmZcclxuICAgICAgICAgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcclxuICAgICAgICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6ICBuZXdZZWFyICsgJyBwb2xhciB0aW1lc2VyaWVzIG9uJyxcclxuICAgICAgICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdQb2xhclBhdGgoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnKTtcclxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKVxyXG4gICAgICAgICAgICAudGV4dChrZXkpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiZm9yXCIsIFwicG9sYXItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xyXG5cclxuICAgICAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpXHJcbiAgICAgICAgICAgIC5zdHlsZShcImJhY2tncm91bmRcIiwgcHVsbERpc3RpbmN0Q29sb3Ioa2V5ICE9PSBcIm1lZGlhbnNcIiA/IGtleSA6IDApKVxyXG4gICAgICAgICAgICAuY2xhc3NlZChcImdyYXBoLXBpcC1leGFtcGxlXCIsIHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIGNoZWNrYm94V3JhcHBlciA9IGlucHV0d3JhcHBlci5hcHBlbmQoXCJkaXZcIik7XHJcblxyXG4gICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImlucHV0XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIilcclxuICAgICAgICAuYXR0cihcImlkXCIsIFwicG9sYXItYXZlcmFnZS1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcclxuICAgICAgICAuYXR0cihcInZhbHVlXCIsIFwibWVkaWFuc1wiKVxyXG4gICAgICAgIC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgdHJ1ZSlcclxuICAgICAgICAub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGgucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGdyYXBoIHllYXIgY2xpY2sgb2ZmXHJcbiAgICAgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcclxuICAgICAgICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6ICBuZXdZZWFyICsgJyBwb2xhciB0aW1lc2VyaWVzIG9mZicsXHJcbiAgICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjaGFydHMuaGFzT3duUHJvcGVydHkobmV3WWVhcikpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBncmFwaCB5ZWFyIGNsaWNrIG9mZlxyXG4gICAgICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxyXG4gICAgICAgICAgICAgICAgICBldmVudExhYmVsOiAgbmV3WWVhciArICcgcG9sYXIgdGltZXNlcmllcyBvbicsXHJcbiAgICAgICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3UG9sYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZylcclxuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKVxyXG4gICAgICAgIC50ZXh0KFwiQmFzZWxpbmVcIilcclxuICAgICAgICAuYXR0cihcImZvclwiLCBcInBvbGFyLWF2ZXJhZ2UtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xyXG5cclxuICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJkaXZcIilcclxuICAgICAgICAuc3R5bGUoXCJiYWNrZ3JvdW5kXCIsIHB1bGxEaXN0aW5jdENvbG9yKDApKVxyXG4gICAgICAgIC5jbGFzc2VkKFwiZ3JhcGgtcGlwLWV4YW1wbGVcIiwgdHJ1ZSk7XHJcblxyXG4gICAgdmFyIHRocmVzaG9sZENoZWNrYm94PSBpbnB1dHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpXHJcbiAgICAgICAgLmNsYXNzZWQoXCJ0aHJlc2hvbGQtY2hlY2tib3hcIiwgdHJ1ZSk7XHJcblxyXG4gICAgdGhyZXNob2xkQ2hlY2tib3guYXBwZW5kKFwiaW5wdXRcIilcclxuICAgICAgICAuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKVxyXG4gICAgICAgIC5hdHRyKFwiaWRcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpXHJcbiAgICAgICAgLnByb3BlcnR5KFwiY2hlY2tlZFwiLCB0cnVlKVxyXG4gICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB0aHJlc2hvbGRFbGVtLnN0eWxlKFwib3BhY2l0eVwiLCAodGhpcy5jaGVja2VkKSA/IDEgOiAwKTtcclxuICAgICAgICAgICAgdmFyIG9mZm9uID0gdGhpcy5jaGVja2VkID8gJ29mZicgOiAnb24nO1xyXG5cclxuICAgICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgZ3JhcGggdGhyZXNob2xkIGNsaWNrIG9mZlxyXG4gICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICAgICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxyXG4gICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxyXG4gICAgICAgICAgICAgIGV2ZW50TGFiZWw6ICAndGhyZXNob2xkIHBvbGFyIHRpbWVzZXJpZXMgJyArIG9mZm9uLFxyXG4gICAgICAgICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB0aHJlc2hvbGRDaGVja2JveC5hcHBlbmQoXCJsYWJlbFwiKVxyXG4gICAgICAgIC50ZXh0KFwiVGhyZXNob2xkc1wiKVxyXG4gICAgICAgIC5hdHRyKFwiZm9yXCIsIFwidGhyZXNob2xkLWNoZWNrYm94LVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcclxufVxyXG5cclxuLyogUE9MQVIgR1JBUEggSEVMUEVSUyAqL1xyXG5cclxuZnVuY3Rpb24gZmluZFBvbGFyQ2VudGVyIChkYXRhKSB7XHJcbiAgICB2YXIgaSwgaiwgbGVuZ3RoLCBhcnI7XHJcbiAgICB2YXIgdG90YWxTdW0gPSAwO1xyXG4gICAgdmFyIGluY29tcGxldGVZZWFycyA9IDA7XHJcbiAgICB2YXIgc3VtO1xyXG4gICAgbGVuZ3RoID0gNDY7XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IGRhdGEua2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGFyciA9IGRhdGFbZGF0YS5rZXlzW2ldXTtcclxuICAgICAgICBpZiAoYXJyLmxlbmd0aCAhPT0gbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGluY29tcGxldGVZZWFycysrO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3VtID0gMDtcclxuICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGVuZ3RoLzI7IGorKykge1xyXG4gICAgICAgICAgICBzdW0gKz0gKGFycltqXVsxXSAtIGFycltqKzIzXVsxXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN1bSA9IHN1bSAvIDIzO1xyXG4gICAgICAgIHRvdGFsU3VtICs9IHN1bTtcclxuICAgIH1cclxuICAgIHRvdGFsU3VtID0gTWF0aC5hYnModG90YWxTdW0pIC8gKGRhdGEua2V5cy5sZW5ndGggLSBpbmNvbXBsZXRlWWVhcnMpO1xyXG5cclxuICAgIHZhciBhcmVhRGlmZiA9IDEwMDAwMDA7XHJcbiAgICB2YXIgY2hlY2tEaWZmO1xyXG4gICAgdmFyIGFyZWFJbmRleCA9IDA7XHJcbiAgICB2YXIgbGVmdEFyZWEsIHJpZ2h0QXJlYTtcclxuICAgIHZhciBhdmdzID0gZGF0YS5tZWRpYW5zO1xyXG4gICAgdmFyIGssIGNvdW50ZXI7XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aC8yOyBpKyspIHtcclxuICAgICAgICBsZWZ0QXJlYSA9IDA7XHJcbiAgICAgICAgcmlnaHRBcmVhID0gMDtcclxuICAgICAgICBmb3IgKGNvdW50ZXIgPSAwOyBjb3VudGVyIDwgbGVuZ3RoLzI7IGNvdW50ZXIrKykge1xyXG4gICAgICAgICAgICBqID0gKGkgKyBjb3VudGVyKSAlIDQ2O1xyXG4gICAgICAgICAgICBrID0gKGogKyAyMykgJSA0NjtcclxuXHJcbiAgICAgICAgICAgIGxlZnRBcmVhICs9IHBhcnNlSW50KGF2Z3Nbal0sIDEwKTtcclxuICAgICAgICAgICAgcmlnaHRBcmVhICs9IHBhcnNlSW50KGF2Z3Nba10sMTApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjaGVja0RpZmYgPSBNYXRoLmFicyhsZWZ0QXJlYSAtIHJpZ2h0QXJlYSk7XHJcbiAgICAgICAgaWYgKGNoZWNrRGlmZiA8IGFyZWFEaWZmKSB7XHJcbiAgICAgICAgICAgIGFyZWFEaWZmID0gY2hlY2tEaWZmO1xyXG4gICAgICAgICAgICBhcmVhSW5kZXggPSBpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgZmlyc3RSYWRpdXMgPSBwYXJzZUludChhdmdzW2FyZWFJbmRleF0sIDEwKTtcclxuICAgIHZhciBzZWNvbmRSYWRpdXMgPSBwYXJzZUludCgtYXZnc1thcmVhSW5kZXggKyAyM10sIDEwKTtcclxuXHJcbiAgICB2YXIgZmlyc3REaWZmID0gTWF0aC5hYnModG90YWxTdW0gLSBmaXJzdFJhZGl1cykgLSBNYXRoLmFicyh0b3RhbFN1bSAtIHNlY29uZFJhZGl1cyk7XHJcbiAgICB2YXIgc2Vjb25kRGlmZiA9IE1hdGguYWJzKC10b3RhbFN1bSAtIGZpcnN0UmFkaXVzKSAtIE1hdGguYWJzKC10b3RhbFN1bSAtIHNlY29uZFJhZGl1cyk7XHJcbiAgICBpZiAoc2Vjb25kRGlmZiA+IGZpcnN0RGlmZikge1xyXG4gICAgICAgIGFyZWFJbmRleCA9IGFyZWFJbmRleCArIDIzO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBjaXJjbGVjZW50ZXIgPSBbMCwgMF07XHJcbiAgICB2YXIgZGF0YWNlbnRlciA9IFsoYXJlYUluZGV4ICogOCkgKyAzLCB0b3RhbFN1bV07XHJcblxyXG4gICAgcmV0dXJuKFtjaXJjbGVjZW50ZXIsIGRhdGFjZW50ZXJdKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIHN0YXJ0RGF5IGlzIGFjdHVhbGx5IHRoZSBzZWFzb25hbGl0eSBpbmRleCwgaWYgaXQgb2NjdXJzIGFmdGVyIGp1bHkgaXQgc2hvdWxkIGJlIGZsaXBwZWRcclxuICovXHJcbmZ1bmN0aW9uIGZpbmRQb2xhclRocmVzaG9sZHMgKGRhdGEsIHN0YXJ0RGF5KSB7XHJcbiAgICB2YXIgc3RhcnRJbmRleCA9IE1hdGguZmxvb3IoKHN0YXJ0RGF5IC0gMykgLyA4KTtcclxuICAgIGlmIChzdGFydEluZGV4ID4gMjIpIHtcclxuICAgICAgICBzdGFydEluZGV4ID0gc3RhcnRJbmRleCAtIDIzO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBpLCBqLCBsZW5ndGgsIGFycjtcclxuICAgIHZhciB0b3RhbFN1bSA9IDA7XHJcbiAgICB2YXIgc3VtO1xyXG4gICAgbGVuZ3RoID0gNDY7XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgaiA9IChzdGFydEluZGV4ICsgaSkgJSBsZW5ndGg7XHJcbiAgICAgICAgdG90YWxTdW0gKz0gcGFyc2VJbnQoZGF0YVtqXSwgMTApO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBmaWZ0ZWVuVGhyZXNob2xkID0gdG90YWxTdW0gKiAuMTU7XHJcbiAgICB2YXIgZWlnaHR5VGhyZXNob2xkID0gdG90YWxTdW0gKiAuODA7XHJcbiAgICB2YXIgZmlmdGVlbkluZGV4Rm91bmQgPSBmYWxzZSxcclxuICAgICAgICBlaWdodHlJbmRleEZvdW5kID0gZmFsc2U7XHJcbiAgICB2YXIgZmlmdGVlbkluZGV4LCBlaWdodHlJbmRleDtcclxuXHJcbiAgICB0b3RhbFN1bSA9IDA7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBqID0gKHN0YXJ0SW5kZXggKyBpKSAlIGxlbmd0aDtcclxuICAgICAgICB0b3RhbFN1bSArPSBwYXJzZUludChkYXRhW2pdLCAxMCk7XHJcbiAgICAgICAgaWYgKCFmaWZ0ZWVuSW5kZXhGb3VuZCAmJiB0b3RhbFN1bSA+IGZpZnRlZW5UaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgZmlmdGVlbkluZGV4ID0gajtcclxuICAgICAgICAgICAgZmlmdGVlbkluZGV4Rm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFlaWdodHlJbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZWlnaHR5VGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgIGVpZ2h0eUluZGV4ID0gajtcclxuICAgICAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgY2lyY2xlQ2VudGVyID0gWzAsIDBdO1xyXG5cclxuICAgIHZhciBmaWZ0ZWVuRW5kID0gWyhmaWZ0ZWVuSW5kZXggKiA4KSArIDMsIDEwMF07XHJcbiAgICB2YXIgZWlnaHR5RW5kID0gWyhlaWdodHlJbmRleCAqIDgpICsgMywgMTAwXTtcclxuXHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJsYWJlbFwiIDogXCIxNSVcIixcclxuICAgICAgICAgICAgXCJkYXRhXCIgOiBbY2lyY2xlQ2VudGVyLCBmaWZ0ZWVuRW5kXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcImxhYmVsXCIgOiBcIjgwJVwiLFxyXG4gICAgICAgICAgICBcImRhdGFcIiA6IFtjaXJjbGVDZW50ZXIsIGVpZ2h0eUVuZF1cclxuICAgICAgICB9XHJcbiAgICBdO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gR1JBUEggSEVMUEVSUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZnVuY3Rpb24gZHJhd0xpbmVhclBhdGgoZGF0YSwgbGluZSwgc3ZnKSB7XHJcbiAgICByZXR1cm4gc3ZnLmFwcGVuZChcInBhdGhcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibGluZVwiKVxyXG4gICAgICAgIC5hdHRyKFwiZFwiLCBsaW5lKGRhdGEpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd1BvbGFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcclxuICAgIHJldHVybiBzdmcuYXBwZW5kKFwicGF0aFwiKVxyXG4gICAgICAgIC5kYXR1bShkYXRhKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpXHJcbiAgICAgICAgLmF0dHIoXCJkXCIsIGxpbmUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3TGluZWFyUG9pbnRzKGRhdGEsIGxpbmUsIHN2ZywgYXZlcmFnZXMpIHtcclxuICAgIHJldHVybiBzdmcuc2VsZWN0QWxsKFwicG9pbnRcIilcclxuICAgICAgICAuZGF0YShkYXRhKVxyXG4gICAgICAgIC5lbnRlcigpXHJcbiAgICAgICAgLmFwcGVuZChcImNpcmNsZVwiKVxyXG4gICAgICAgIC5hdHRyKFwiclwiLCAyKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJwb2ludFwiKVxyXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQsIGkpIHtcclxuICAgICAgICAgICAgdmFyIHBvaW50ID0gQXJyYXkuaXNBcnJheShkKSA/IGQgOiBbKGkqOCkgKyAzLCBkXTtcclxuICAgICAgICAgICAgdmFyIGNvb3JzID0gbGluZShbcG9pbnRdKS5zbGljZSgxKS5zbGljZSgwLCAtMSk7XHJcbiAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGNvb3JzICsgXCIpXCJcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vLmF0dHIoXCJyXCIsIDMpXHJcbiAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCIjMDAwXCIpXHJcbiAgICAgICAgLmF0dHIoXCJmaWxsXCIsZnVuY3Rpb24oZCxpKXtcclxuICAgICAgICAgICAgdmFyIHZhbCA9IEFycmF5LmlzQXJyYXkoZCkgPyBkWzBdLnN1YnN0cmluZygwLCA0KSA6IDA7XHJcbiAgICAgICAgICAgIHJldHVybiBwdWxsRGlzdGluY3RDb2xvcih2YWwpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAub24oXCJtb3VzZW92ZXJcIiwgaGFuZGxlUG9pbnRNb3VzZW92ZXIpXHJcbiAgICAgICAgLm9uKFwibW91c2VvdXRcIiwgaGFuZGxlUG9pbnRNb3VzZW91dCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdmVyKGQpIHtcclxuICAgIHZhciB0aXBTdHJpbmcgPSBBcnJheS5pc0FycmF5KGQpID8gZm9ybWF0RGF0ZShkWzBdKSArIFwiOiBcIiAgKyBkWzFdIDogXCJBdmVyYWdlOiBcIiAgKyBkO1xyXG4gICAgdGlwLnNob3codGlwU3RyaW5nKTtcclxuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCBcIjRcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdXQoZCkge1xyXG4gICAgdGlwLmhpZGUoKTtcclxuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCBcIjJcIik7XHJcblxyXG4gICAgdmFyIGFjdGl2ZVR5cGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZ3JhcGgtdHlwZS1idG4gYWN0aXZlXCIpWzBdLmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJyk7XHJcblxyXG4gICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3MgdG9vbCB0aXAgb24gZ3JhcGggZG8gdGhpcyBvbiB0aGUgbW91c2VvdXQgc28gbW91c2VvdmVyIGRvc2Ugbm90IGRvIGEgbG90IG9mIGV2ZW50cy4uLi5cclxuICAgIC8vIHdlIG1pc3MgYSBmZXcgYnV0IHRoYXQgaXMgYmV0dGVyIHRoYW4gb3ZlciBjb3VudGluZy5cclxuICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xyXG4gICAgICBldmVudENhdGVnb3J5OiAnZ3JhcGgnLFxyXG4gICAgICBldmVudEFjdGlvbjogJ2hvdmVyJyxcclxuICAgICAgZXZlbnRMYWJlbDogYWN0aXZlVHlwZSArICcgdG9vbCB0aXAnLFxyXG4gICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDaGVja2JveCh3cmFwcGVyLCBrZXksIHR5cGUsIHllYXIsIGNoYXJ0cywgZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpIHtcclxuICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcclxuXHJcbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIilcclxuICAgICAgICAuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKVxyXG4gICAgICAgIC5hdHRyKFwiaWRcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKVxyXG4gICAgICAgIC5hdHRyKFwidmFsdWVcIiwga2V5KVxyXG4gICAgICAgIC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgKGtleSA9PT0geWVhcikgPyB0cnVlIDogZmFsc2UpXHJcbiAgICAgICAgLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBncmFwaCB5ZWFyIGNsaWNrIG9mZlxyXG4gICAgICAgICAgICAgICAgZ2EoJ3NlbmQnLCAnZXZlbnQnLCB7XHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnk6ICdncmFwaCcsXHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50QWN0aW9uOiAnY2xpY2snLFxyXG4gICAgICAgICAgICAgICAgICBldmVudExhYmVsOiAgbmV3WWVhciArICcgb3ZlcmxhcHBpbmcgdGltZXNlcmllcyBvZmYnLFxyXG4gICAgICAgICAgICAgICAgICBub25JbnRlcmFjdGlvbjogZmFsc2VcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghY2hhcnRzLmhhc093blByb3BlcnR5KG5ld1llYXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdMaW5lYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2Zyk7XHJcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBncmFwaCB5ZWFyIGNsaWNrIG9uXHJcbiAgICAgICAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ2dyYXBoJyxcclxuICAgICAgICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXHJcbiAgICAgICAgICAgICAgICAgIGV2ZW50TGFiZWw6ICBuZXdZZWFyICsgJyBvdmVybGFwcGluZyB0aW1lc2VyaWVzIG9uJyxcclxuICAgICAgICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKVxyXG4gICAgICAgIC50ZXh0KGtleSlcclxuICAgICAgICAuYXR0cihcImZvclwiLCB0eXBlICsgXCItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xyXG5cclxuICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJkaXZcIilcclxuICAgICAgICAuc3R5bGUoXCJiYWNrZ3JvdW5kXCIsIHB1bGxEaXN0aW5jdENvbG9yKGtleSAhPT0gXCJtZWRpYW5zXCIgPyBrZXkgOiAwKSlcclxuICAgICAgICAuY2xhc3NlZChcImdyYXBoLXBpcC1leGFtcGxlXCIsIHRydWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwdWxsRGlzdGluY3RDb2xvciAoeWVhcikge1xyXG4gICAgdmFyIGNvbG9yUmFtcCA9IFtcclxuICAgICAgICBcIiNmZmU0NzZcIixcclxuICAgICAgICBcIiMwMzY1OTNcIixcclxuICAgICAgICBcIiMxMTZjOTFcIixcclxuICAgICAgICBcIiMxZTczOTBcIixcclxuICAgICAgICBcIiMyYzdiOGVcIixcclxuICAgICAgICBcIiMzOTgyOGNcIixcclxuICAgICAgICBcIiM0YzhjOGFcIixcclxuICAgICAgICBcIiM1ZTk1ODlcIixcclxuICAgICAgICBcIiM3MTlmODdcIixcclxuICAgICAgICBcIiM4M2E4ODZcIixcclxuICAgICAgICBcIiM5NWIxODNcIixcclxuICAgICAgICBcIiNhNmJhODBcIixcclxuICAgICAgICBcIiNiOGMzN2NcIixcclxuICAgICAgICBcIiNjYWNjNzlcIixcclxuICAgICAgICBcIiNkNmQyNzlcIixcclxuICAgICAgICBcIiNlMmQ3NzlcIixcclxuICAgICAgICBcIiNlZmRkNzhcIixcclxuICAgICAgICBcIiNmYmUzNzhcIlxyXG4gICAgXTtcclxuXHJcbiAgICByZXR1cm4gKHllYXIgPT09IDApID8gXCIjZmZmXCIgOiBjb2xvclJhbXBbcGFyc2VJbnQoeWVhciwgMTApICUgY29sb3JSYW1wLmxlbmd0aF07XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gREFURSBIRUxQRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZnVuY3Rpb24gcGFyc2VEYXRlIChkYXRlKSB7XHJcbiAgICBkYXRlID0gZGF0ZS50b1N0cmluZygpO1xyXG4gICAgdmFyIHllYXIgPSBkYXRlLnN1YnN0cmluZygwLCA0KTtcclxuICAgIHZhciBtb250aCA9IHBhcnNlSW50KGRhdGUuc3Vic3RyaW5nKDQsIDYpLCAxMCkgLSAxO1xyXG4gICAgdmFyIGRheSA9IGRhdGUuc3Vic3RyaW5nKDYsIDgpO1xyXG5cclxuICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VKdWxpYW5EYXkgKGRhdGUpIHtcclxuICAgIGlmICh0eXBlb2YoZGF0ZSkgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICBkYXRlID0gcGFyc2VEYXRlKGRhdGUpO1xyXG4gICAgICAgIHJldHVybiBkYXRlLmdldERPWSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZGF0ZTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0RGF0ZSAoZGF0ZSkge1xyXG4gICAgaWYgKGRhdGUgPT09IFwiQXZlcmFnZVwiKSB7IHJldHVybiBkYXRlOyB9XHJcblxyXG4gICAgZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcclxuICAgIHJldHVybiBmb3JtYXRNb250aChkYXRlLmdldE1vbnRoKCkpICsgXCIgXCIgKyBvcmRpbmFsX3N1ZmZpeF9vZihkYXRlLmdldERhdGUoKSkgKyBcIiwgXCIgKyBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdE1vbnRoIChtb250aCkge1xyXG4gICAgc3dpdGNoIChtb250aCkge1xyXG4gICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgcmV0dXJuIFwiSmFuLlwiXHJcbiAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJGZWIuXCJcclxuICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgIHJldHVybiBcIk1hci5cIlxyXG4gICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiQXByLlwiXHJcbiAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICByZXR1cm4gXCJNYXlcIlxyXG4gICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgcmV0dXJuIFwiSnVuLlwiXHJcbiAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICByZXR1cm4gXCJKdWwuXCJcclxuICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgIHJldHVybiBcIkF1Zy5cIlxyXG4gICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgcmV0dXJuIFwiU2VwLlwiXHJcbiAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICByZXR1cm4gXCJPY3QuXCJcclxuICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJOb3YuXCJcclxuICAgICAgICBjYXNlIDExOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJEZWMuXCJcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb3JkaW5hbF9zdWZmaXhfb2YoZGF5KSB7XHJcbiAgICB2YXIgaiA9IGRheSAlIDEwLFxyXG4gICAgICAgIGsgPSBkYXkgJSAxMDA7XHJcbiAgICBpZiAoaiA9PT0gMSAmJiBrICE9PSAxMSkge1xyXG4gICAgICAgIHJldHVybiBkYXkgKyBcInN0XCI7XHJcbiAgICB9XHJcbiAgICBpZiAoaiA9PT0gMiAmJiBrICE9PSAxMikge1xyXG4gICAgICAgIHJldHVybiBkYXkgKyBcIm5kXCI7XHJcbiAgICB9XHJcbiAgICBpZiAoaiA9PT0gMyAmJiBrICE9PSAxMykge1xyXG4gICAgICAgIHJldHVybiBkYXkgKyBcInJkXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF5ICsgXCJ0aFwiO1xyXG59XHJcblxyXG52YXIgTU9OVEhfTEFCRUxTID0ge1xyXG4gICAgMDogXCJKYW5cIixcclxuICAgIDE6IFwiRmViXCIsXHJcbiAgICAyOiBcIk1hclwiLFxyXG4gICAgMzogXCJBcHJcIixcclxuICAgIDQ6IFwiTWF5XCIsXHJcbiAgICA1OiBcIkp1blwiLFxyXG4gICAgNjogXCJKdWxcIixcclxuICAgIDc6IFwiQXVnXCIsXHJcbiAgICA4OiBcIlNlcFwiLFxyXG4gICAgOTogXCJPY3RcIixcclxuICAgIDEwOiBcIk5vdlwiLFxyXG4gICAgMTE6IFwiRGVjXCJcclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvZ3JhcGguanMiLCJpbXBvcnQge3VwZGF0ZVBhbmVsRHJhZ092ZXJsYXlIZWlnaHR9IGZyb20gXCIuL3BhbmVsXCI7XHJcbmltcG9ydCB7dXBkYXRlU2hhcmVVcmx9IGZyb20gXCIuL3NoYXJlXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQmluZFRhYkV2ZW50cyAoKSB7XHJcbiAgICBkMy5zZWxlY3RBbGwoXCIucGFuZWwtdG9wLWJ0blwiKS5vbihcImNsaWNrXCIsIGhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdldEFjdGl2ZVRhYiAoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInBhbmVsLXRvcC1idG4gYWN0aXZlXCIpWzBdLmdldEF0dHJpYnV0ZShcImRhdGEtYWN0aXZlXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVUYWJIZWFkZXJCdG5DbGljayAoKSB7XHJcbiAgICAvLyBJZiB0aGUgc2VjdGlvbiBpcyBhbHJlYWR5IGFjdGl2ZSwgZG8gbm90aGluZ1xyXG4gICAgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSByZXR1cm47XHJcbiAgICBcclxuICAgIC8vc2VuZCBnb29nbGUgYW5hbHl0aWNzIGNsaWNrIG9uIGdyYXBoIHR5cGVcclxuICAgIGdhKCdzZW5kJywgJ2V2ZW50Jywge1xyXG4gICAgICBldmVudENhdGVnb3J5OiAndGFiJyxcclxuICAgICAgZXZlbnRBY3Rpb246ICdjbGljaycsXHJcbiAgICAgIGV2ZW50TGFiZWw6IHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1hY3RpdmVcIiksXHJcbiAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgfSk7XHJcblxyXG4gICAgSGFuZGxlVGFiQ2hhbmdlKHRoaXMuZ2V0QXR0cmlidXRlKFwiZGF0YS1hY3RpdmVcIikpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gSGFuZGxlVGFiQ2hhbmdlIChuZXdDbGFzcykge1xyXG4gICAgZGlzYWJsZUFjdGl2ZVRhYigpO1xyXG4gICAgZW5hYmxlVGFiKG5ld0NsYXNzKTtcclxuICAgIHVwZGF0ZVNoYXJlVXJsKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuYWJsZVRhYiAobmV3Q2xhc3MpIHtcclxuICAgIGQzLnNlbGVjdChcIi5wYW5lbC10b3AtYnRuW2RhdGEtYWN0aXZlPSdcIiArIG5ld0NsYXNzICsgXCInXVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xyXG5cclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwLXdyYXBwZXJcIikuY2xhc3NMaXN0LmFkZChuZXdDbGFzcylcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmlnaHQtcGFuZWxcIikuY2xhc3NMaXN0LmFkZChuZXdDbGFzcylcclxuXHJcbiAgICBkMy5zZWxlY3QoXCIucGFuZWwtc2VjdGlvbi13cmFwcGVyW2RhdGEtYWN0aXZlPSdcIiArIG5ld0NsYXNzICsgXCInXVwiKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xyXG5cclxuICAgIHRvZ2dsZU1hcFBhZGRpbmcoKTtcclxuICAgIHJlc2V0UGFuZWxXaWR0aCgpO1xyXG4gICAgdXBkYXRlUGFuZWxEcmFnT3ZlcmxheUhlaWdodCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNhYmxlQWN0aXZlVGFiICgpIHtcclxuICAgIHZhciBhY3RpdmVDbGFzcyA9IGQzLnNlbGVjdChcIi5wYW5lbC10b3AtYnRuLmFjdGl2ZVwiKS5hdHRyKFwiZGF0YS1hY3RpdmVcIik7XHJcblxyXG4gICAgZDMuc2VsZWN0QWxsKCcjbWFwLXdyYXBwZXIsICNyaWdodC1wYW5lbCcpXHJcbiAgICAgICAgLmNsYXNzZWQoYWN0aXZlQ2xhc3MsIGZhbHNlKTtcclxuXHJcbiAgICBkMy5zZWxlY3RBbGwoJy5wYW5lbC10b3AtYnRuLmFjdGl2ZSwgLnBhbmVsLXNlY3Rpb24td3JhcHBlci5hY3RpdmUnKVxyXG4gICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBmYWxzZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZU1hcFBhZGRpbmcgKCkge1xyXG4gICAgdmFyIHBhZGRpbmdSaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmlnaHQtcGFuZWxcIikub2Zmc2V0V2lkdGg7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcC13cmFwcGVyXCIpLnN0eWxlLnBhZGRpbmdSaWdodCA9IHBhZGRpbmdSaWdodCArIFwicHhcIjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNpbmNlIHRoZSBwYW5lbCBoYXMgY2hpbGQgZWxlbWVudHMgd2l0aCBwb3NpdGlvbiBmaXhlZCBhbmQgd2lkdGggaW5oZXJpdFxyXG4gKiB3ZSBuZWVkIHRvIGNsZWFyIHRoZSBpbmxpbmUgd2lkdGggcHJvcGVydHkgaWYgYW5kIG9ubHkgaWYgdGhlIGlubGluZVxyXG4gKiB3aWR0aCBpcyBsZXNzIHRoYW4gdGhlIG1pbiB3aWR0aFxyXG4gKi9cclxuZnVuY3Rpb24gcmVzZXRQYW5lbFdpZHRoICgpIHtcclxuICAgIHZhciBwYW5lbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmlnaHQtcGFuZWxcIik7XHJcbiAgICB2YXIgd2lkdGggPSBwYW5lbC5zdHlsZS53aWR0aDtcclxuICAgIGlmICghd2lkdGgpIHJldHVybjtcclxuXHJcbiAgICB2YXIgcGFuZWxNaW5XaWR0aCA9IGQzLnNlbGVjdChwYW5lbCkuc3R5bGUoJ21pbi13aWR0aCcpLnNsaWNlKDAsIC0yKTtcclxuICAgIGlmIChwYXJzZUludCh3aWR0aC5zbGljZSgwLCAtMiksIDEwKSA+IHBhcnNlSW50KHBhbmVsTWluV2lkdGgsIDEwKSkgcmV0dXJuO1xyXG5cclxuICAgIHBhbmVsLnN0eWxlLndpZHRoID0gXCJcIjtcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy90YWJzLmpzIiwiaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSAnLi9zaGFyZSdcclxuaW1wb3J0IHt1cGRhdGVMYXllck9wYWNpdHl9IGZyb20gXCIuL2xheWVyXCI7XHJcblxyXG4vLyBzZXQgaXQgbWFudWFsbHkgZm9yIG5vd1xyXG5jb25zdCBPUEFDSVRZX1JBTkdFX01BWCA9IDkwXHJcblxyXG52YXIgb3BhY2l0eVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgLmRvbWFpbihbMSwgMF0pXHJcbiAgICAucmFuZ2UoWzAsIE9QQUNJVFlfUkFOR0VfTUFYXSlcclxuICAgIC5jbGFtcCh0cnVlKVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbiAobGF5ZXIsIHNsaWRlckhhbmRsZSwgb3BhY2l0eSkge1xyXG4gICAgb3BhY2l0eSA9IG9wYWNpdHkgfHwgbGF5ZXIub3BhY2l0eVxyXG4gICAgc2xpZGVySGFuZGxlLnN0eWxlLnRvcCA9ICcnK29wYWNpdHlTY2FsZShvcGFjaXR5KSsncHgnXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtYWtlT3BhY2l0eVNsaWRlciAobGF5ZXIpIHtcclxuICAgIHZhciBsYXllck9wYWNpdHkgPSBsYXllci5vcGFjaXR5ICE9PSB1bmRlZmluZWQgPyBsYXllci5vcGFjaXR5IDogMVxyXG4gICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgdmFyIHNsaWRlclRyYWNrT3ZlcmxheSA9IG1ha2VTbGlkZXJUcmFjayhsYXllciwgbGF5ZXJPcGFjaXR5KVxyXG4gICAgdmFyIGljb25XcmFwcGVyQ2xvc2VkID0gbWFrZU9wYWNpdHlJY29uV3JhcHBlcignY2xvc2VkJywgbGF5ZXIsIHNsaWRlclRyYWNrT3ZlcmxheSlcclxuXHJcbiAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktc2xpZGVyLXdyYXBwZXInKVxyXG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChzbGlkZXJUcmFja092ZXJsYXkpXHJcbiAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGljb25XcmFwcGVyQ2xvc2VkKVxyXG4gICAgcmV0dXJuIHdyYXBwZXJcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZU9wYWNpdHlJY29uV3JhcHBlcihzdGF0ZSwgbGF5ZXIsIHNsaWRlclRyYWNrT3ZlcmxheSkge1xyXG4gICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgdmFyIGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKVxyXG4gICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LWljb24td3JhcHBlcicpXHJcbiAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktaWNvbicpXHJcbiAgICBpY29uLmNsYXNzTGlzdC5hZGQoc3RhdGUpXHJcbiAgICBpY29uLnNldEF0dHJpYnV0ZSgnc3JjJywgJ2ltZ3Mvb3BhY2l0eS1pY29uLScrc3RhdGUrJy02NHg2NC5wbmcnKVxyXG4gICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ2FsdCcsICdVc2UgdGhpcyBzbGlkZXIgdG8gYWRqdXN0IHRyYW5zcGFyZW5jeSBmb3IgdGhlICcgKyBsYXllci5uYW1lICsgJyBsYXllcicpXHJcbiAgICBpY29uLnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnVXNlIHRoaXMgc2xpZGVyIHRvIGFkanVzdCB0cmFuc3BhcmVuY3kgZm9yIHRoZSAnICsgbGF5ZXIubmFtZSArICcgbGF5ZXInKVxyXG4gICAgd3JhcHBlci5hcHBlbmRDaGlsZChpY29uKVxyXG4gICAgd3JhcHBlci5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB2YXIgc2xpZGVySGFuZGxlID0gc2xpZGVyVHJhY2tPdmVybGF5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ29wYWNpdHktc2xpZGVyLWhhbmRsZScpWzBdXHJcbiAgICAgICAgdXBkYXRlTGF5ZXJPcGFjaXR5KGxheWVyLCAwKVxyXG4gICAgICAgIHNldE9wYWNpdHlTbGlkZXJQb3NpdGlvbihsYXllciwgc2xpZGVySGFuZGxlLCAwKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHdyYXBwZXJcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZVNsaWRlclRyYWNrKGxheWVyLCBsYXllck9wYWNpdHkpIHtcclxuXHJcbiAgICB2YXIgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICB2YXIgdHJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgdmFyIHNsaWRlckhhbmRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcblxyXG4gICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci10cmFjay1vdmVybGF5JylcclxuICAgIHRyYWNrLmNsYXNzTGlzdC5hZGQoJ29wYWNpdHktc2xpZGVyLXRyYWNrJylcclxuICAgIHNsaWRlckhhbmRsZS5jbGFzc0xpc3QuYWRkKCdvcGFjaXR5LXNsaWRlci1oYW5kbGUnKVxyXG5cclxuICAgIG92ZXJsYXkuYXBwZW5kQ2hpbGQodHJhY2spXHJcbiAgICBvdmVybGF5LmFwcGVuZENoaWxkKHNsaWRlckhhbmRsZSlcclxuXHJcbiAgICBpZiAobGF5ZXIuYWN0aXZlKSBzZXRPcGFjaXR5U2xpZGVyUG9zaXRpb24obGF5ZXIsIHNsaWRlckhhbmRsZSlcclxuICAgIHNldERyYWdFdmVudExpc3RlbmVyKG92ZXJsYXksIGxheWVyLCBsYXllck9wYWNpdHkpXHJcblxyXG4gICAgcmV0dXJuIG92ZXJsYXlcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0RHJhZ0V2ZW50TGlzdGVuZXIob3ZlcmxheSwgbGF5ZXIsIGxheWVyT3BhY2l0eSkge1xyXG4gICAgZDMuc2VsZWN0KG92ZXJsYXkpLmNhbGwoZDMuZHJhZygpXHJcbiAgICAgICAgLm9uKCdzdGFydCBkcmFnJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgc2xpZGVySGFuZGxlID0gb3ZlcmxheS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdvcGFjaXR5LXNsaWRlci1oYW5kbGUnKVswXVxyXG4gICAgICAgICAgICB2YXIgbmV3T3BhY2l0eSA9IGNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zKG92ZXJsYXkpXHJcbiAgICAgICAgICAgIHVwZGF0ZUxheWVyT3BhY2l0eShsYXllciwgbmV3T3BhY2l0eSlcclxuICAgICAgICAgICAgc2V0T3BhY2l0eVNsaWRlclBvc2l0aW9uKGxheWVyLCBzbGlkZXJIYW5kbGUsIG5ld09wYWNpdHkpXHJcbiAgICAgICAgfSlcclxuICAgICAgICAub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICB2YXIgbmV3T3BhY2l0eSA9IGNhbGNPcGFjaXR5RnJvbU1vdXNlUG9zKG92ZXJsYXkpXHJcblxyXG4gICAgICAgICAgLy9zZW5kIGdvb2dsZSBhbmFseXRpY3Mgb3BhY2l0eSBzbGlkZXIgY2hhbmdlXHJcbiAgICAgICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICAgICAgZXZlbnRDYXRlZ29yeTogJ29wYWNpdHkgc2xpZGVyJyxcclxuICAgICAgICAgICAgZXZlbnRBY3Rpb246ICdjaGFuZ2UnLFxyXG4gICAgICAgICAgICBldmVudExhYmVsOiAne1wiJyArIGxheWVyLm5hbWUgKyAnXCI6IFwiJyArIG5ld09wYWNpdHkgKyAnXCJ9JyxcclxuICAgICAgICAgICAgbm9uSW50ZXJhY3Rpb246IGZhbHNlXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHVwZGF0ZVNoYXJlVXJsKClcclxuICAgICAgICB9KVxyXG4gICAgKVxyXG59XHJcblxyXG5mdW5jdGlvbiBjYWxjT3BhY2l0eUZyb21Nb3VzZVBvcyhvdmVybGF5KSB7XHJcbiAgICB2YXIgeVBvcyA9IGQzLm1vdXNlKG92ZXJsYXkpWzFdXHJcbiAgICB2YXIgbmV3T3BhY2l0eSA9IG9wYWNpdHlTY2FsZS5pbnZlcnQoeVBvcylcclxuICAgIHJldHVybiBuZXdPcGFjaXR5XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvb3BhY2l0eVNsaWRlci5qcyIsIi8qXHJcbiAgXCJsb2dvXCI6IHtcclxuICAgIFwiaW1hZ2VcIjogXCJpbWdzL2xhbmRhdF9sb2dvX2JsdWUucG5nXCIsXHJcbiAgICBcImFsdFwiOiBcIkxvZ28gZm9yIHRoZSBMYW5EYXQgcHJvamVjdFwiLFxyXG4gICAgXCJsaW5rXCI6IFwiaHR0cHM6Ly9sYW5kYXQtZGV2Lm5lbWFjLm9yZ1wiLFxyXG4gICAgXCJsb2NhdGlvblwiOiBbXCJib3R0b21cIiwgXCJyaWdodFwiXVxyXG4gIH0sXHJcbiovXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBDcmVhdGVMb2dvIChsb2dvZGF0YSkge1xyXG4gICAgaWYgKCFsb2dvZGF0YS5pbWFnZSkgcmV0dXJuO1xyXG5cclxuICAgIHZhciBsb2dvV3JhcHBlciA9IGNyZWF0ZUxvZ29XcmFwcGVyKCk7XHJcbiAgICB2YXIgbG9nb0ltYWdlID0gY3JlYXRlTG9nb0ltYWdlKGxvZ29kYXRhKTtcclxuICAgIHZhciBsb2dvTGluayA9IGxvZ29kYXRhLmxpbmsgPyBjcmVhdGVMb2dvTGluayhsb2dvZGF0YS5saW5rKSA6IG51bGw7XHJcblxyXG4gICAgaWYgKGxvZ29MaW5rKSB7XHJcbiAgICAgICAgbG9nb0xpbmsuYXBwZW5kQ2hpbGQobG9nb0ltYWdlKTtcclxuICAgICAgICBsb2dvV3JhcHBlci5hcHBlbmRDaGlsZChsb2dvTGluayk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxvZ29XcmFwcGVyLmFwcGVuZENoaWxkKGxvZ29JbWFnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGluc2VydEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGxvZ29kYXRhLmxvY2F0aW9uKVswXTtcclxuICAgIHZhciBleGlzdGluZ0NoaWxkID0gaW5zZXJ0RWxlbWVudC5maXJzdENoaWxkO1xyXG4gICAgaW5zZXJ0RWxlbWVudC5pbnNlcnRCZWZvcmUobG9nb1dyYXBwZXIsIGV4aXN0aW5nQ2hpbGQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVMb2dvV3JhcHBlciAoKSB7XHJcbiAgICB2YXIgbG9nb1dyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZDMuc2VsZWN0KGxvZ29XcmFwcGVyKS5jbGFzc2VkKFwicHJvamVjdC1sb2dvXCIsIHRydWUpO1xyXG4gICAgcmV0dXJuIGxvZ29XcmFwcGVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVMb2dvSW1hZ2UgKGxvZ29kYXRhKSB7XHJcbiAgICB2YXIgbG9nb0ltYWdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgIGxvZ29JbWFnZS5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgbG9nb2RhdGEuaW1hZ2UpO1xyXG4gICAgaWYgKGxvZ29kYXRhLmxhYmVsKSB7XHJcbiAgICAgICAgbG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcImFsdFwiLCBsb2dvZGF0YS5sYWJlbCk7XHJcbiAgICAgICAgbG9nb0ltYWdlLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIGxvZ29kYXRhLmxhYmVsKTtcclxuICAgIH1cclxuICAgIHJldHVybiBsb2dvSW1hZ2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUxvZ29MaW5rIChsaW5rKSB7XHJcbiAgICB2YXIgbG9nb0xpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICAgIGxvZ29MaW5rLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgbGluayk7XHJcbiAgICBsb2dvTGluay5zZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIiwgXCJfYmxhbmtcIik7XHJcblxyXG4gICAgbG9nb0xpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAvL3NlbmQgZ29vZ2xlIGFuYWx5dGljcyBmb3IgY2xpY2tpbmcgbG9nb1xyXG4gICAgICBnYSgnc2VuZCcsICdldmVudCcsIHtcclxuICAgICAgICBldmVudENhdGVnb3J5OiAnbWFwJyxcclxuICAgICAgICBldmVudEFjdGlvbjogJ2NsaWNrJyxcclxuICAgICAgICBldmVudExhYmVsOiAnbGFuZGF0IGxvZ28nLFxyXG4gICAgICAgIG5vbkludGVyYWN0aW9uOiBmYWxzZVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBsb2dvTGluaztcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9sb2dvLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==