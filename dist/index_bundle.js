!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=r(o),i=n(3),c=r(i),s=n(22),u=r(s),l=n(26),f=n(28),p=n(29),d=r(p),h=n(24),v=n(25),y=n(23),m=(n(30),function(e){(0,a.default)(e,b),(0,f.SetupGraphs)(),(0,d.default)()}),b=function(e){(0,v.AddShareSettingsToConfig)(e);var t=(0,h.CreateMap)(e.map);(0,l.CreateBaseLayers)(t,e.baselayers),(0,y.CreateDefaultLayers)(e.layers,e["active-layers"]),(0,u.default)(e.layers,e.layout),(0,c.default)(t),(0,f.BindGraphEvents)(t),(0,v.BindUpdateShareUrl)(t)};window.Base=m,t.default={Base:m}},function(e,t){"use strict";function n(e,t){r(e,t)}function r(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState){try{var e=JSON.parse(n.responseText)}catch(e){console.log("ERROR: Malformed JSON in config file."),console.log(e)}o(e),a(e),t(e)}},n.open("GET",e,!0),n.send(),console.log("hi")}function o(e){e.map||(e.map={})}function a(e){var t,n,r=e.layers,o=e.mapserverUrl;e["active-layers"];for(var a in r){if(!r.hasOwnProperty(a))return;for(t=r[a],n=0;n<t.length;n++)i(t[n],o)}}function i(e,t){e.url=e.url||t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){var t=new o.EsriProvider,n=new o.GeoSearchControl({provider:t,showMarker:!1});e.addControl(n),L.DomEvent.on(n.searchElement.elements.container,"click",function(e){L.DomEvent.stopPropagation(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(4)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5);Object.defineProperty(t,"GeoSearchControl",{enumerable:!0,get:function(){return r(o).default}});var a=n(13);Object.defineProperty(t,"SearchElement",{enumerable:!0,get:function(){return r(a).default}});var i=n(17);Object.defineProperty(t,"BingProvider",{enumerable:!0,get:function(){return r(i).default}});var c=n(19);Object.defineProperty(t,"EsriProvider",{enumerable:!0,get:function(){return r(c).default}});var s=n(20);Object.defineProperty(t,"GoogleProvider",{enumerable:!0,get:function(){return r(s).default}});var u=n(21);Object.defineProperty(t,"OpenStreetMapProvider",{enumerable:!0,get:function(){return r(u).default}});var l=n(18);Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return r(l).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){if(!L||!L.Control||!L.Control.extend)throw new Error("Leaflet must be loaded before instantiating the GeoSearch control");for(var e=L.Control.extend(y),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e,[null].concat(n)))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),i=(r(a),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});t.default=o;var c=n(12),s=r(c),u=n(13),l=r(u),f=n(16),p=r(f),d=n(14),h=n(15),v=function(){return{position:"topleft",style:"button",showMarker:!0,showPopup:!1,marker:{icon:new L.Icon.Default,draggable:!1},maxMarkers:1,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",notFoundMessage:"Sorry, that address could not be found.",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",msgbox:"leaflet-bar message",form:"",input:""},autoComplete:!0,autoCompleteDelay:250}},y={initialize:function(e){var t=this;this.markers=new L.FeatureGroup,this.options=i({},v(),e);var n=this.options,r=n.style,o=n.classNames,a=n.searchLabel,c=n.autoComplete,u=n.autoCompleteDelay;"button"!==r&&(this.options.classNames.container+=" "+e.style),this.searchElement=new l.default(i({},this.options,{handleSubmit:function(e){return t.onSubmit(e)}}));var f=this.searchElement.elements,h=f.container,y=f.form,m=f.input;h.addEventListener("dblclick",function(e){e.stopPropagation()});var b=(0,d.createElement)("a",o.button,h);b.title=a,b.href="#",b.addEventListener("click",function(e){t.onClick(e)},!1),c&&(this.resultList=new p.default({handleClick:function(e){var n=e.result;m.value=n.label,t.onSubmit({query:n.label})}}),y.appendChild(this.resultList.elements.container),m.addEventListener("keyup",(0,s.default)(function(e){return t.autoSearch(e)},u),!0),m.addEventListener("keydown",function(e){return t.selectResult(e)},!0),m.addEventListener("keydown",function(e){return t.clearResults(e)},!0)),this.elements={button:b}},onAdd:function(e){var t=this.options,n=t.showMarker,r=t.style;if(this.map=e,n&&this.markers.addTo(e),"bar"===r){var o=this.searchElement.elements.form,a=e.getContainer().querySelector(".leaflet-control-container"),i=(0,d.createElement)("div","leaflet-control-geosearch bar");i.appendChild(o),a.appendChild(i),this.elements.container=i}return this.searchElement.elements.container},onRemove:function(){var e=this.elements.container;return e&&e.remove(),this},onClick:function(e){e.preventDefault();var t=this.searchElement.elements,n=t.container,r=t.input;n.classList.contains("active")?(0,d.removeClassName)(n,"active"):((0,d.addClassName)(n,"active"),r.focus())},selectResult:function(e){if([h.ARROW_DOWN_KEY,h.ARROW_UP_KEY].includes(e.keyCode)){e.preventDefault();var t=this.searchElement.elements.input,n=this.resultList,r=this.resultList.count()-1,o="ArrowDown"===e.code?1+~~n.selected:~~n.selected-1,a=o<0?r:o>r?0:o,i=n.select(a);t.value=i.label}},clearResults:function(e){e.keyCode===h.ESCAPE_KEY&&this.resultList.clear()},autoSearch:function(e){return new Promise(function(t,n){var r,o,a;return h.SPECIAL_KEYS.includes(e.keyCode)?t():(r=e.target.value,o=this.options.provider,o.search({query:r}).then(function(e){return a=e,this.resultList.render(a),t()}.$asyncbind(this,n),n))}.$asyncbind(this))},onSubmit:function(e){return new Promise(function(t,n){var r,o;return r=this.options.provider,r.search(e).then(function(e){return o=e,o&&o.length>0&&this.showResult(o[0]),t()}.$asyncbind(this,n),n)}.$asyncbind(this))},showResult:function(e){var t=Object.keys(this.markers._layers);t.length>=this.options.maxMarkers&&this.markers.removeLayer(t[0]);var n=this.addMarker(e);this.centerMap(e),this.map.fireEvent("geosearch/showlocation",{location:e,marker:n})},addMarker:function(e){var t=this.options,n=t.marker,r=t.showPopup,o=new L.Marker([e.y,e.x],n);return o.bindPopup(e.label),this.markers.addLayer(o),r&&o.openPopup(),o},centerMap:function(e){var t=this.options,n=t.retainZoomLevel,r=t.animateZoom,o=new L.LatLngBounds(e.bounds),a=o.isValid()?o:this.markers.getBounds();!n&&o.isValid()?this.map.fitBounds(a,{animate:r}):this.map.setView(a.getCenter(),this.getZoom(),{animate:r})},getZoom:function(){var e=this.options,t=e.retainZoomLevel,n=e.zoomLevel;return t?this.map.getZoom():n}}},function(e,t,n){"use strict";function r(e,t){if(Function.prototype.$asyncspawn||Object.defineProperty(Function.prototype,"$asyncspawn",{value:r,enumerable:!1,configurable:!0,writable:!0}),this instanceof Function){var n=this;return new e(function(e,r){function o(t,n){var i;try{if(i=t.call(a,n),i.done){if(i.value!==e){if(i.value&&i.value===i.value.then)return i.value(e,r);e&&e(i.value),e=null}return}i.value.then?i.value.then(function(e){o(a.next,e)},function(e){o(a.throw,e)}):o(a.next,i.value)}catch(e){return r&&r(e),void(r=null)}}var a=n.call(t,e,r);o(a.next)})}}var o=function(e,t){for(var n=t.toString(),r="return "+n,o=n.match(/.*\(([^)]*)\)/)[1],a=/['"]!!!([^'"]*)['"]/g,i=[];;){var c=a.exec(r);if(!c)break;i.push(c)}return i.reverse().forEach(function(t){r=r.slice(0,t.index)+e[t[1]]+r.substr(t.index+t[0].length)}),r=r.replace(/\/\*[^*]*\*\//g," ").replace(/\s+/g," "),new Function(o,r)()}({zousan:n(7).toString(),thenable:n(11).toString()},function e(t,n){function r(){return o.apply(t,arguments)}Function.prototype.$asyncbind||Object.defineProperty(Function.prototype,"$asyncbind",{value:e,enumerable:!1,configurable:!0,writable:!0}),e.trampoline||(e.trampoline=function(e,t,n,r,o){return function a(i){for(;i;){if(i.then)return i=i.then(a,r),o?void 0:i;try{if(i.pop){if(i.length)return i.pop()?t.call(e):i;i=n}else i=i.call(e)}catch(e){return r(e)}}}}),e.LazyThenable||(e.LazyThenable="!!!thenable"(),e.EagerThenable=e.Thenable=(e.EagerThenableFactory="!!!zousan")());var o=this;switch(n){case!0:return new e.Thenable(r);case 0:return new e.LazyThenable(r);case void 0:return r.then=r,r;default:return function(){try{return o.apply(t,arguments)}catch(e){return n(e)}}}});o(),r(),e.exports={$asyncbind:o,$asyncspawn:r}},function(e,t,n){(function(t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){function o(e){if(e){var t=this;e(function(e){t.resolve(e)},function(e){t.reject(e)})}}function a(e,t){if("function"==typeof e.y)try{var n=e.y.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.resolve(t)}function i(e,t){if("function"==typeof e.n)try{var n=e.n.call(void 0,t);e.p.resolve(n)}catch(t){e.p.reject(t)}else e.p.reject(t)}e=e||"object"===(void 0===t?"undefined":r(t))&&t.nextTick||"function"==typeof n&&n||function(e){setTimeout(e,0)};var c=function(){function t(){for(;n.length-r;){try{n[r]()}catch(e){}n[r++]=void 0,r===o&&(n.splice(0,o),r=0)}}var n=[],r=0,o=1024;return function(o){n.push(o),n.length-r==1&&e(t)}}();return o.prototype={resolve:function(e){if(void 0===this.state){if(e===this)return this.reject(new TypeError("Attempt to resolve promise with self"));var t=this;if(e&&("function"==typeof e||"object"===(void 0===e?"undefined":r(e))))try{var n=0,o=e.then;if("function"==typeof o)return void o.call(e,function(e){n++||t.resolve(e)},function(e){n++||t.reject(e)})}catch(e){return void(n||this.reject(e))}this.state=a,this.v=e,t.c&&c(function(){for(var n=0,r=t.c.length;n<r;n++)a(t.c[n],e)})}},reject:function(e){if(void 0===this.state){this.state=i,this.v=e;var t=this.c;t&&c(function(){for(var n=0,r=t.length;n<r;n++)i(t[n],e)})}},then:function(e,t){var n=new o,r={y:e,n:t,p:n};if(void 0===this.state)this.c?this.c.push(r):this.c=[r];else{var a=this.state,i=this.v;c(function(){a(r,i)})}return n}},o.resolve=function(e){if(e&&e instanceof o)return e;var t=new o;return t.resolve(e),t},o.reject=function(e){if(e&&e instanceof o)return e;var t=new o;return t.reject(e),t},o.version="2.3.3-nodent",o}}).call(t,n(8),n(9).setImmediate)},function(e,t){"use strict";function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function i(){v&&d&&(v=!1,d.length?h=d.concat(h):y=-1,h.length&&c())}function c(){if(!v){var e=o(i);v=!0;for(var t=h.length;t;){for(d=h,h=[];++y<t;)d&&d[y].run();y=-1,t=h.length}d=null,v=!1,a(e)}}function s(e,t){this.fun=e,this.array=t}function u(){}var l,f,p=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,h=[],v=!1,y=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new s(e,t)),1!==h.length||v||o(c)},s.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";function r(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(10),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){"use strict";!function(e,n){function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[s]=r,c(s),s++}function o(e){delete u[e]}function a(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function i(e){if(l)setTimeout(i,0,e);else{var t=u[e];if(t){l=!0;try{a(t)}finally{o(e),l=!1}}}}if(!e.setImmediate){var c,s=1,u={},l=!1,f=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){i(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){i(e.data)},c=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;c=function(t){var n=f.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(i,0,e)}}(),p.setImmediate=r,p.clearImmediate=o}}("undefined"==typeof self?void 0===e?void 0:e:self)}).call(t,function(){return this}(),n(8))},function(e,t){"use strict";e.exports=function(){function e(e){return e&&e instanceof Object&&"function"==typeof e.then}function t(n,r,o){try{var a=o?o(r):r;if(n===a)return n.reject(new TypeError("Promise resolution loop"));e(a)?a.then(function(e){t(n,e)},function(e){n.reject(e)}):n.resolve(a)}catch(e){n.reject(e)}}function n(){}function r(e){}function o(e,t){this.resolve=e,this.reject=t}function a(r,o){var a=new n;try{this._resolver(function(n){return e(n)?n.then(r,o):t(a,n,r)},function(e){t(a,e,o)})}catch(e){t(a,e,o)}return a}function i(e){this._resolver=e,this.then=a}return n.prototype={resolve:r,reject:r,then:o},i.resolve=function(e){return i.isThenable(e)?e:{then:function(t){return t(e)}}},i.isThenable=e,i}},function(e,t){(function(t){"use strict";function n(e,t,n){function o(t){var n=v,r=y;return v=y=void 0,O=t,b=e.apply(r,n)}function a(e){return O=e,g=setTimeout(l,t),S?o(e):b}function c(e){var n=e-w,r=e-O,o=t-n;return E?_(o,m-r):o}function u(e){var n=e-w,r=e-O;return void 0===w||n>=t||n<0||E&&r>=m}function l(){var e=x();if(u(e))return f(e);g=setTimeout(l,c(e))}function f(e){return g=void 0,j&&v?o(e):(v=y=void 0,b)}function p(){void 0!==g&&clearTimeout(g),O=0,v=w=y=g=void 0}function d(){return void 0===g?b:f(x())}function h(){var e=x(),n=u(e);if(v=arguments,y=this,w=e,n){if(void 0===g)return a(w);if(E)return g=setTimeout(l,t),o(w)}return void 0===g&&(g=setTimeout(l,t)),b}var v,y,m,b,g,w,O=0,S=!1,E=!1,j=!0;if("function"!=typeof e)throw new TypeError(s);return t=i(t)||0,r(n)&&(S=!!n.leading,E="maxWait"in n,m=E?k(i(n.maxWait)||0,t):m,j="trailing"in n?!!n.trailing:j),h.cancel=p,h.flush=d,h}function r(e){var t=void 0===e?"undefined":c(e);return!!e&&("object"==t||"function"==t)}function o(e){return!!e&&"object"==(void 0===e?"undefined":c(e))}function a(e){return"symbol"==(void 0===e?"undefined":c(e))||o(e)&&w.call(e)==l}function i(e){if("number"==typeof e)return e;if(a(e))return u;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(f,"");var n=d.test(e);return n||h.test(e)?v(e.slice(2),n?2:8):p.test(e)?u:+e}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="Expected a function",u=NaN,l="[object Symbol]",f=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,h=/^0o[0-7]+$/i,v=parseInt,y="object"==(void 0===t?"undefined":c(t))&&t&&t.Object===Object&&t,m="object"==("undefined"==typeof self?"undefined":c(self))&&self&&self.Object===Object&&self,b=y||m||Function("return this")(),g=Object.prototype,w=g.toString,k=Math.max,_=Math.min,x=function(){return b.Date.now()};e.exports=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),a=(function(e){e&&e.__esModule?e:{default:e}}(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=n(14),c=n(15),s=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.handleSubmit,a=void 0===o?function(){}:o,c=n.searchLabel,s=void 0===c?"search":c,u=n.classNames,l=void 0===u?{}:u;r(this,e);var f=(0,i.createElement)("div",["geosearch",l.container].join(" ")),p=(0,i.createElement)("form",["",l.form].join(" "),f),d=(0,i.createElement)("input",["glass",l.input].join(" "),p);d.type="text",d.placeholder=s,d.addEventListener("input",function(e){t.onInput(e)},!1),d.addEventListener("keyup",function(e){t.onKeyUp(e)},!1),d.addEventListener("keypress",function(e){t.onKeyPress(e)},!1),d.addEventListener("focus",function(e){t.onFocus(e)},!1),d.addEventListener("blur",function(e){t.onBlur(e)},!1),this.elements={container:f,form:p,input:d},this.handleSubmit=a}return a(e,[{key:"onFocus",value:function(){(0,i.addClassName)(this.elements.form,"active")}},{key:"onBlur",value:function(){(0,i.removeClassName)(this.elements.form,"active")}},{key:"onSubmit",value:function(e){return new Promise(function(t,n){var r,o,a;return e.preventDefault(),e.stopPropagation(),r=this.elements,o=r.input,a=r.container,(0,i.removeClassName)(a,"error"),(0,i.addClassName)(a,"pending"),this.handleSubmit({query:o.value}).then(function(e){return(0,i.removeClassName)(a,"pending"),t()}.$asyncbind(this,n),n)}.$asyncbind(this))}},{key:"onInput",value:function(){var e=this.elements.container;this.hasError&&((0,i.removeClassName)(e,"error"),this.hasError=!1)}},{key:"onKeyUp",value:function(e){var t=this.elements,n=t.container,r=t.input;e.keyCode===c.ESCAPE_KEY&&((0,i.removeClassName)(n,"pending"),(0,i.removeClassName)(n,"active"),r.value="",document.body.focus(),document.body.blur())}},{key:"onKeyPress",value:function(e){e.keyCode===c.ENTER_KEY&&this.onSubmit(e)}},{key:"setQuery",value:function(e){this.elements.input.value=e}}]),e}();t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.createElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElement(e);return r.className=t,n&&n.appendChild(r),r};t.createScriptElement=function(e,t){var r=n("script",null,document.body);return r.setAttribute("type","text/javascript"),new Promise(function(n){window[t]=function(e){r.remove(),delete window[t],n(e)},r.setAttribute("src",e)})},t.addClassName=function(e,t){e&&!e.classList.contains(t)&&e.classList.add(t)},t.removeClassName=function(e,t){e&&e.classList.contains(t)&&e.classList.remove(t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.ENTER_KEY=13,r=t.ESCAPE_KEY=27,o=t.ARROW_DOWN_KEY=40,a=t.ARROW_UP_KEY=38,i=t.ARROW_LEFT_KEY=37,c=t.ARROW_RIGHT_KEY=39;t.SPECIAL_KEYS=[n,r,o,a,i,c]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(14),i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join(" ").trim()},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.handleClick,o=void 0===n?function(){}:n,c=t.classNames,u=void 0===c?{}:c;r(this,e),s.call(this),this.props={handleClick:o,classNames:u},this.selected=-1;var l=(0,a.createElement)("div",i("results",u.container)),f=(0,a.createElement)("div",i(u.item));l.addEventListener("click",this.onClick,!0),this.elements={container:l,resultItem:f}}return o(e,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.elements,n=t.container,r=t.resultItem;this.clear(),e.forEach(function(e,t){var o=r.cloneNode(!0);o.setAttribute("data-key",t),o.innerHTML=e.label,n.appendChild(o)}),e.length>0&&(0,a.addClassName)(n,"active"),this.results=e}},{key:"select",value:function(e){var t=this.elements.container;return Array.from(t.children).forEach(function(t,n){return n===e?(0,a.addClassName)(t,"active"):(0,a.removeClassName)(t,"active")}),this.selected=e,this.results[e]}},{key:"count",value:function(){return this.results.length}},{key:"clear",value:function(){var e=this.elements.container;for(this.selected=-1;e.lastChild;)e.removeChild(e.lastChild);(0,a.removeClassName)(e,"active")}}]),e}(),s=function(){var e=this;this.onClick=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.target,r=e.props.handleClick,o=e.elements.container;if(n.parentNode===o&&n.hasAttribute("data-key")){var a=n.getAttribute("data-key");r({result:e.results[a]})}}};t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var s=n(6),u=(r(s),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(18),p=r(f),d=n(14),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=e.jsonp,o=this.options.params;return n+"//dev.virtualearth.net/REST/v1/Locations?"+this.getParamString(u({},o,{query:t,jsonp:r}))}},{key:"parse",value:function(e){var t=e.data;return 0===t.resourceSets.length?[]:t.resourceSets[0].resources.map(function(e){return{x:e.point.coordinates[1],y:e.point.coordinates[0],label:e.address.formattedAddress,bounds:[[e.bbox[0],e.bbox[1]],[e.bbox[2],e.bbox[3]]],raw:e}})}},{key:"search",value:function(e){return new Promise(function(t,n){var r,o,a,i,c;return r=e.query,o=~location.protocol.indexOf("http")?location.protocol:"https:",a="BING_JSONP_CB_"+Date.now(),i=this.endpoint({query:r,protocol:o,jsonp:a}),(0,d.createScriptElement)(i,a).then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),t}(p.default);t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),a=(function(e){e&&e.__esModule?e:{default:e}}(o),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.options=t}return a(e,[{key:"getParamString",value:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}},{key:"search",value:function(e){return new Promise(function(t,n){var r,o,a,i,c;return r=e.query,o=~location.protocol.indexOf("http")?location.protocol:"https:",a=this.endpoint({query:r,protocol:o}),fetch(a).then(function(e){return i=e,i.json().then(function(e){return c=e,t(this.parse({data:c}))}.$asyncbind(this,n),n)}.$asyncbind(this,n),n)}.$asyncbind(this))}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),l=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/find?"+this.getParamString(c({},r,{f:"json",text:t}))}},{key:"parse",value:function(e){return e.data.locations.map(function(e){return{x:e.feature.geometry.x,y:e.feature.geometry.y,label:e.name,bounds:[[e.extent.ymin,e.extent.xmin],[e.extent.ymax,e.extent.xmax]],raw:e}})}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),l=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params,o=this.getParamString(c({},r,{address:t}));return(r&&r.key?"https:":n)+"//maps.googleapis.com/maps/api/geocode/json?"+o}},{key:"parse",value:function(e){return e.data.results.map(function(e){return{x:e.geometry.location.lng,y:e.geometry.location.lat,label:e.formatted_address,bounds:[[e.geometry.viewport.southwest.lat,e.geometry.viewport.southwest.lng],[e.geometry.viewport.northeast.lat,e.geometry.viewport.northeast.lng]],raw:e}})}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),l=function(e){return e&&e.__esModule?e:{default:e}}(u),f=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"endpoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=e.protocol,r=this.options.params;return n+"//nominatim.openstreetmap.org/search?"+this.getParamString(c({},r,{format:"json",q:t}))}},{key:"parse",value:function(e){return e.data.map(function(e){return{x:e.lon,y:e.lat,label:e.display_name,bounds:[[parseFloat(e.boundingbox[0]),parseFloat(e.boundingbox[2])],[parseFloat(e.boundingbox[1]),parseFloat(e.boundingbox[3])]],raw:e}})}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e,t){c(i(t["layer-groups-order"]),e),o()}function o(){d3.select("#right-panel-drag-overlay").call(d3.drag().on("drag",function(){a.call(this)}))}function a(){var e=document.getElementById("right-panel"),t=document.getElementById("map-wrapper"),n=document.getElementById("wrapper"),r=n.clientWidth,o=e.clientWidth,a=+e.style.minWidth.slice(0,-2),i=d3.event.sourceEvent.x,c=r-i-o,s=o+c;s=s<a?a:s,t.style.paddingRight=s+"px",e.style.width=s+"px"}function i(e){return d3.select(".layer-list").selectAll(".layer-group-wrapper").data(e).enter().append("div").attr("class","layer-group-wrapper").attr("id",function(e){return e.id}).classed("active",function(e){return e.active}).each(function(e){d3.select(this).append("div").attr("class","layer-group-btn btn").on("click",function(e){e.active=!e.active,d3.select(this.parentNode).classed("active",function(){return e.active})}).text(e.name)}).append("div").attr("class","layer-group")}function c(e,t){e.selectAll(".layer-select").data(function(e){return t[e.id]}).enter().append("div").attr("class","layer-select").each(function(e){var t=(this.parentNode.parentNode.id,d3.select(this));s(e,t),u(e,t),l(e,t),f(e,t),(0,d.makeOpacitySlider)(e,t)})}function s(e,t){t.append("input").attr("type","checkbox").attr("id",function(e){return e.id}).attr("checked",function(e){return e.active?"checked":null}).on("click",function(e){(0,p.toggleLayer)(e),t.selectAll(".legend-wrapper, .opacity-slider-wrapper").classed("active",e.active)})}function u(e,t){t.append("label").attr("for",function(e){return e.id}).attr("class","layer-label").html(function(e){return e.name})}function l(e,t){e.info&&""!==e.info&&(t.append("div").attr("class","layer-info-btn").text("(?)").on("click",function(){d3.select(this.parentNode).select(".layer-info-wrapper").classed("active",function(){return!d3.select(this).classed("active")})}),t.append("div").attr("class","layer-info-wrapper").text(function(e){return e.info}))}function f(e,t){t.append("div").attr("class","legend-wrapper").classed("active",e.active).append("img").attr("src",e.legend||"mean_ndvi_legend.jpg")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var p=n(23),d=n(27);n(25)},function(e,t,n){"use strict";function r(){return d}function o(e,t){var n,r,o,a,c,s;if(t&&0!==t.length)for(n=0;n<t.length;n++){s=!1,c=t[n];for(o in e){if(!e.hasOwnProperty(o))return;for(a=e[o],r=0;r<a.length;r++)if(a[r].id===c){i(a[r]),s=!0;break}if(s)break}}}function a(e,t){e.active?s(e):i(e)}function i(e){var t=(0,f.GetMap)();e.active=!0,e.mapLayer=e.mapLayer||l(e),t.addLayer(e.mapLayer),c(e),(0,p.updateShareUrl)()}function c(e){d.push(e.id)}function s(e){var t=(0,f.GetMap)();e.active=!1,e.mapLayer&&t.hasLayer(e.mapLayer)&&t.removeLayer(e.mapLayer),u(e),(0,p.updateShareUrl)()}function u(e){var t=d.indexOf(e.id);t!==-1&&d.splice(t,1)}function l(e){return L.tileLayer.wms(e.url,{layers:e.id,transparent:e.transparent||!0,version:e.version||"1.3.0",crs:e.crs||L.CRS.EPSG4326,format:e.format||"image/png",opacity:e.opacity||"1"})}Object.defineProperty(t,"__esModule",{value:!0}),t.GetCurrentLayers=r,t.CreateDefaultLayers=o,t.toggleLayer=a,t.enableLayer=i,t.disableLayer=s;var f=n(24),p=n(25),d=[]},function(e,t){"use strict";function n(e){var t=e.id||"map",n=e.options||{scrollWheelZoom:!1},r=e.initialCenter||["38.5","-81"],a=e.initialZoom||6;return o=L.map(t,n).setView(r,a),L.control.attribution({position:"bottomleft"}).addTo(o),o}function r(){return o}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateMap=n,t.GetMap=r;var o},function(e,t,n){"use strict";function r(e){e.on("moveend",o)}function o(e){var t=(0,_.GetMap)();i(a([c(t),s(t),u(t),l(t)]))}function a(e){return"?"+e.filter(function(e){return void 0!==e}).join("&")}function i(e){window.history&&window.history.replaceState&&window.history.replaceState({},"",e)}function c(e){var t=e.getCenter();return"center="+t.lat.toString()+","+t.lng.toString()}function s(e){return"zoom="+e.getZoom()}function u(e){var t=[],n={},r=(0,O.GetCurrentLayers)();e.eachLayer(function(e){var t=e.options;t&&t.layers&&(n[t.layers]=t.hasOwnProperty("opacity")?t.opacity:"1")});var o,a;for(a=0;a<r.length;a++)o=r[a],t.push(o),t.push(n[o]);return"layers="+t.join(",")}function l(e){var t=[];return e.eachLayer(function(e){e.options&&e.options.type===x.BASE_LAYER_TYPE&&t.push(e.options.id)}),"baselayers="+t.join(",")}function f(){var e=window.location.search;if(""!==e)return e=p(e),e=h(e),v(e),e}function p(e){return e=e.substring(1),e=d(e),e.split("&")}function d(e){return e.replace(/\%2[c|C]/g,",")}function h(e){var t,n,r={};for(n=0;n<e.length;n++)t=e[n].split("="),r[t[0]]=t[1];return r}function v(e){e.center&&(e.center=y(e.center)),e.layers&&(e.layers=m(e.layers)),e.baselayers&&(e.baselayers=b(e.baselayers))}function y(e){return e.split(",")}function m(e){var t,n,r={enabledLayers:[],opacityVals:{}};for(e=e.split(","),n=0;n<e.length;n+=2)t=e[n],r.enabledLayers.push(t),r.opacityVals[t]=e[n+1];return r}function b(e){return e.split(",")}function g(e){var t=f();t&&(t.center&&(e.map.initialCenter=t.center),t.zoom&&(e.map.initialZoom=t.zoom),t.layers&&w(t.layers,e),t.baselayers&&k(t.baselayers,e))}function w(e,t){var n=e.enabledLayers;t["active-layers"]=n;var r,o,a,i,c,s,u=t.layers;for(r=0;r<n.length;r++){s=!1,c=n[r];for(a in u){if(!u.hasOwnProperty(a))return;for(i=u[a],o=0;o<i.length;o++)if(i[o].id===c){i[o].opacity=e.opacityVals[c],s=!0;break}if(s)break}}}function k(e,t){var n,r,o=t.baselayers;for(r=0;r<o.length;r++)n=o[r],n.active=e.indexOf(n.id)!==-1}Object.defineProperty(t,"__esModule",{value:!0}),t.BindUpdateShareUrl=r,t.updateShareUrl=o,t.AddShareSettingsToConfig=g;var _=n(24),x=n(26),O=n(23)},function(e,t){"use strict";function n(e,t){t=t||[{id:"carto-light-default",url:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attributions">CARTO</a>'}];var n,o,a;for(n=0;n<t.length;n++)a=t[n],a.active&&(o=r(a),o.addTo(e))}function r(e){return L.tileLayer(e.url,{id:e.id,type:o,attribution:e.attribution})}Object.defineProperty(t,"__esModule",{value:!0}),t.CreateBaseLayers=n;var o=t.BASE_LAYER_TYPE="baselayer"},function(e,t,n){"use strict";function r(e,t){var n=void 0!==e.opacity?e.opacity:1,r=t.append("div").attr("class","opacity-slider-wrapper").classed("active",e.active),i=r.append("svg").attr("viewBox",l.xMin+" "+l.yMin+" "+l.width+" "+l.height).append("g").attr("class","opacity-slider").attr("transform","translate(0, "+u+")");a(i,e,n),o(i,e)}function o(e,t){e.selectAll("*").call(d3.drag().on("start drag",function(){i(t,this.parentNode,d3.event.x)}).on("end",function(){(0,c.updateShareUrl)()}))}function a(e,t,n){e.append("line").attr("class","opacity-slider-track").attr("x1",0).attr("x2",s).attr("stroke","#666").attr("stroke-width",".5px"),e.append("line").attr("class","opacity-slider-track-overlay").attr("x1",""+l.xMin).attr("x2",""+(l.width-u)).attr("stroke","#000000").attr("stroke-width",2*u+"px").attr("stroke-opacity","0.0"),e.append("circle").attr("r",u).attr("cx",f.invert(n)+"px").attr("class","opacity-slider-circle")}function i(e,t,n){var n=f.invert(f(n));t=d3.select(t),t.select("circle").attr("cx",n),t.select("text").text(parseInt(100*f(n),10)+"%"),e.mapLayer.setOpacity(f(d3.event.x))}Object.defineProperty(t,"__esModule",{value:!0}),t.makeOpacitySlider=r;var c=n(25),s=100,u=2,l={xMin:-u,yMin:0,width:s+2*u,height:2*u},f=d3.scaleLinear().domain([0,s]).range([0,1]).clamp(!0)},function(e,t){"use strict";function n(){d3.selectAll(".graph-type-btn").on("click",p),r(),A=d3.tip().attr("class","d3-tip").html(function(e){return e})}function r(){Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100!=0||e%400==0)},Date.prototype.getDOY=function(){var e=[0,31,59,90,120,151,181,212,243,273,304,334],t=this.getMonth(),n=this.getDate(),r=e[t]+n;return t>1&&this.isLeapYear()&&r++,r}}function o(e){e.on("click",a)}function a(e){var t=this,n=e.latlng.lat,r=e.latlng.lng,o=d(n,r),a=i(t,n,r);d3.select(o).on("mouseenter",function(){a.setIcon(R)}),d3.select(o).on("mouseleave",function(){a.setIcon(N)}),c(t,o,a)}function i(e,t,n){return L.marker([t,n],{icon:N}).addTo(e)}function c(e,t,n){var r=s();t.appendChild(r),d3.select(r).on("click",function(){document.getElementById("graph-list").removeChild(t),e.removeLayer(n)})}function s(){var e=document.createElement("button");return e.className="remove-graph",e.innerText=String.fromCharCode("10005"),e.setAttribute("title","Remove graph"),e}function u(e,t,n){var r="https://fcav-ndvi.nemac.org/landdat_product.cgi?args="+t+","+e,o=new XMLHttpRequest;o.addEventListener("load",function(){var r=this.responseText;r=r.replace(/\[|\]|\'/g,"").split(", "),h(r,n,e,t)}),o.open("GET",r),o.send()}function l(e){var t;for(t=0;t<e.length;t++)e[t]=e[t].split(",");return e}function f(e){var t,n,r,o,a={};for(a.keys=[],r=0;r<e.length;r++)t=e[r],n=t[0].substring(0,4),a.hasOwnProperty(n)||(a[n]=[],a.keys.push(n)),a[n].push(t);var i,c;for(a.medians=[],r=0;r<46;r++){for(i=[],o=r;o<e.length;o+=46)i.push(e[o][1]);c=i.sort()[Math.floor(i.length/2)],a.medians.push(c)}return a}function p(){var e=this.dataset.type,t=document.getElementsByClassName("graph-type-btn active")[0],n=t.dataset.type;e!==n&&(d3.select("#graph-list").classed("graph-"+n,!1).classed("graph-"+e,!0),d3.select(t).classed("active",!1),d3.select(this).classed("active",!0))}function d(e,t){var n=document.createElement("div"),r=document.createTextNode("Lat: "+e+", Lon: "+t);return n.appendChild(r),n.classList.add("graph-elem"),u(e,t,n),n}function h(e,t,n,r){e=l(e);var o=f(e);v(e,t,o.medians),y(o,t,n,r),m(o,t,n,r),document.getElementById("graph-list").appendChild(t)}function v(e,t,n){var r={top:30,right:20,bottom:30,left:25},o=580-r.left-r.right,a=270-r.top-r.bottom,i=d3.scaleTime().range([0,o]).domain([j(e[0][0]),j(e[e.length-1][0])]),c=d3.scaleLinear().range([a,0]).domain([0,100]),s=d3.axisBottom(i).ticks(16).tickFormat(function(e){return e.getFullYear()}),u=d3.axisLeft(c).ticks(6),l=d3.line().x(function(e){return i(j(e[0]))}).y(function(e){return c(e[1])}),f=d3.select(t).append("div").classed("timeseries-graph",!0),p=f.append("svg").attr("height",a+r.top+r.bottom).attr("viewBox",function(){return"0 0 "+(o+r.left+r.right)+" "+(a+r.top+r.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+r.left+","+r.top+")");p.call(A),w(e,l,p),p.append("g").attr("class","x axis").attr("transform","translate(0,"+a+")").call(s),p.append("g").attr("class","y axis").call(u),_(e,l,p,n)}function y(e,t,n,r){function o(e){return B[(e-15)/30]}var a={},i={top:30,right:20,bottom:30,left:25},c=500-i.left-i.right,s=270-i.top-i.bottom,u=e.medians,l=d3.scaleLinear().range([0,c]).domain([0,365]),f=d3.scaleLinear().range([s,0]).domain([0,100]),p=d3.axisBottom(l).ticks(11).tickValues([15,45,75,105,135,165,195,225,255,285,315,345]).tickFormat(o),d=d3.axisLeft(f).ticks(6),h=d3.line().x(function(e,t){return l(Array.isArray(e)?P(e[0]):8*t+3)}).y(function(e){return f(Array.isArray(e)?e[1]:e)}),v=d3.select(t).append("div").classed("overlapping-graph",!0),y=v.append("svg").attr("viewBox",function(){return"0 0 "+(c+i.left+i.right)+" "+(s+i.top+i.bottom)}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate("+i.left+","+i.top+")");y.call(A),y.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(p),y.append("g").attr("class","y axis").call(d),a.medians={path:w(e.medians,h,y)},a[2015]={path:w(e[2015],h,y)},a.medians.points=_(e.medians,h,y,u),a[2015].points=_(e[2015],h,y,u);var m=v.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){S(m,t,"timeseries","2015",a,e,h,y,u,n,r)}),S(m,"medians","timeseries","medians",a,e,h,y,u,n,r)}function m(e,t,n,r){var o=Math.min(490,490)/2-30,a=e.medians,i=b(e),c=g(a,i[1][0]),s=d3.scaleLinear().domain([0,100]).range([0,o]),u=d3.radialLine().radius(function(e){return s(Array.isArray(e)?e[1]:e)}).angle(function(e,t){return((Array.isArray(e)?P(e[0]):8*t+3)-1)%365/365*(2*Math.PI)}),l=d3.select(t).append("div").classed("polar-graph",!0),f=l.append("svg").attr("viewBox",function(){return"0 0 490 490"}).attr("preserveAspectRatio","xMidYMid").append("g").attr("transform","translate(245,245)");f.call(A);var p=f.append("g").attr("class","r axis").selectAll("g").data(s.ticks(5).slice(1)).enter().append("g");p.append("circle").attr("r",s),p.append("text").attr("y",function(e){return-s(e)-4}).attr("transform","rotate(15)").style("text-anchor","middle").text(function(e){return e});var d=f.append("g").attr("class","a axis").selectAll("g").data(d3.range(0,360,30)).enter().append("g").attr("transform",function(e){return"rotate("+(e-90)+")"});d.append("line").attr("x2",o),d.append("text").attr("x",o+6).attr("dy",".35em").style("text-anchor",function(e){return e<360&&e>180?"end":null}).attr("transform",function(e){return e<360&&e>180?"rotate(180 "+(o+6)+",0)":null}).text(function(e){return B[e/30]});var h=f.append("g").selectAll("g").data(c).enter().append("g").attr("transform",function(e){return"rotate("+(e.data[1][0]-90)+")"});h.append("line").attr("class","line").attr("x2",o),h.append("text").attr("x",o+6).attr("y",function(e){return(e.data[1][0]-1)%365/365*(2*Math.PI)}).attr("dy",".35em").style("text-anchor",function(e){var t=e.data[1][0];return t<360&&t>180?"end":null}).attr("transform",function(e){var t=e.data[1][0];return t<360&&t>180?"rotate(180 "+(o+6)+",0)":null}).text(function(e){return e.label});var v=i[1][0];k([[v,100],[(v+182.5)%365,100]],u,f).classed("growing-season-line","true"),k(i,u,f).classed("center-line","true"),f.selectAll("point").data([i[1]]).enter().append("circle").attr("class","point").attr("transform",function(e){return"translate("+u([e]).slice(1).slice(0,-1)+")"}).attr("r",2.5).attr("stroke","#000").attr("fill","#dd82d2").on("mouseover",function(e){A.show("Center: "+String(e[1]).substring(0,7)),this.setAttribute("r",5),this.setAttribute("stroke-width","2px"),d3.select(this).classed("active",!0)}).on("mouseout",function(e){A.hide(),this.setAttribute("r",2.5),this.setAttribute("stroke-width","1px"),d3.select(this).classed("active",!0)});var y={};y.medians={path:k(a,u,f)},y[2015]={path:k(e[2015],u,f)},y.medians.points=_(a,u,f,a),y[2015].points=_(e[2015],u,f,a);var m=l.append("div").classed("input-wrapper",!0);e.keys.forEach(function(t){var o=m.append("div");o.append("input").attr("type","checkbox").attr("id","polar-"+t+n.toString().replace(".","")+"-"+r.toString().replace(".","")).attr("value",t).property("checked","2015"===t).on("change",function(t){var n=this.value;this.checked?(y.hasOwnProperty(n)||(y[n]={}),y[n].path=k(e[n],u,f),y[n].points=_(e[n],u,f,a)):(y[n].path.remove(),y[n].points.remove())}),o.append("label").text(t).attr("for","polar-"+t+n.toString().replace(".","")+"-"+r.toString().replace(".",""))});var w=m.append("div");w.append("input").attr("type","checkbox").attr("id","polar-average-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")).attr("value","medians").property("checked",!0).on("change",function(t){var n=this.value;this.checked?(y.hasOwnProperty(n)||(y[n]={}),y[n].path=k(e[n],u,f),y[n].points=_(e[n],u,f,a)):(y[n].path.remove(),y[n].points.remove())}),w.append("label").text("Baseline").attr("for","polar-average-"+n.toString().replace(".","")+"-"+r.toString().replace(".",""));var x=m.append("div").classed("threshold-checkbox",!0);x.append("input").attr("type","checkbox").attr("id","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".","")).property("checked",!0).on("change",function(e){h.style("opacity",this.checked?1:0)}),x.append("label").text("Thresholds").attr("for","threshold-checkbox-"+n.toString().replace(".","")+"-"+r.toString().replace(".",""))}function b(e){var t,n,r,o,a,i=0,c=0;for(r=46,t=0;t<e.keys.length;t++)if(o=e[e.keys[t]],o.length===r){for(a=0,n=0;n<r/2;n++)a+=o[n][1]-o[n+23][1];a/=23,i+=a}else c++;i=Math.abs(i)/(e.keys.length-c);var s,u,l,f,p,d=1e6,h=0,v=e.medians;for(t=0;t<r/2;t++){for(u=0,l=0,p=0;p<r/2;p++)n=(t+p)%46,f=(n+23)%46,u+=parseInt(v[n],10),l+=parseInt(v[f],10);s=Math.abs(u-l),s<d&&(d=s,h=t)}var y=parseInt(v[h],10),m=parseInt(-v[h+23],10),b=Math.abs(i-y)-Math.abs(i-m);return Math.abs(-i-y)-Math.abs(-i-m)>b&&(h+=23),[[0,0],[8*h+3,i]]}function g(e,t){var n=Math.floor((t-3)/8);n>22&&(n-=23);var r,o,a,i=0;for(a=46,r=0;r<a;r++)o=(n+r)%a,i+=parseInt(e[o],10);var c,s,u,l=.15*i,f=.8*i,p=.85*i,d=!1,h=!1,v=!1;for(i=0,r=0;r<a;r++)if(o=(n+r)%a,i+=parseInt(e[o],10),!d&&i>l)c=o,d=!0;else if(!h&&i>f)s=o,h=!0;else if(!v&&i>p){u=o,v=!0;break}var y=[0,0];return[{label:"15%",data:[y,[8*c+3,100]]},{label:"80%",data:[y,[8*s+3,100]]},{label:"85%",data:[y,[8*u+3,100]]}]}function w(e,t,n){return n.append("path").attr("class","line").attr("d",t(e))}function k(e,t,n){return n.append("path").datum(e).attr("class","line").attr("d",t)}function _(e,t,n,r){return n.selectAll("point").data(e).enter().append("circle").attr("class","point").attr("transform",function(e,n){return"translate("+t([Array.isArray(e)?e:[8*n+3,e]]).slice(1).slice(0,-1)+")"}).attr("r",3).attr("stroke","#000").attr("fill",function(e,t){return E(Array.isArray(e)?e[1]:e,r[t%46],3)}).on("mouseover",x).on("mouseout",O)}function x(e){var t=Array.isArray(e)?C(e[0])+": "+e[1]:"Average: "+e;A.show(t),this.setAttribute("r",5),this.setAttribute("stroke-width","2px")}function O(e){A.hide(),this.setAttribute("r",3),this.setAttribute("stroke-width","1px")}function S(e,t,n,r,o,a,i,c,s,u,l){var f=e.append("div");f.append("input").attr("type","checkbox").attr("id",n+"-"+t+u.toString().replace(".","")+"-"+l.toString().replace(".","")).attr("value",t).property("checked",t===r).on("change",function(e){var t=this.value;this.checked?(o.hasOwnProperty(t)||(o[t]={}),o[t].path=w(a[t],i,c),o[t].points=_(a[t],i,c,s)):(o[t].path.remove(),o[t].points.remove())}),f.append("label").text(t).attr("for",n+"-"+t+u.toString().replace(".","")+"-"+l.toString().replace(".",""))}function E(e,t,n){var r=e-t,o=Math.abs(r)/t*100*n,a=100-o+"%";return r>0?"hsl(8, 79%, "+a+")":"hsl(219, 79%, "+a+")"}function j(e){e=e.toString();var t=e.substring(0,4),n=parseInt(e.substring(4,6),10)-1,r=e.substring(6,8);return new Date(t,n,r)}function P(e){return"string"==typeof e?(e=j(e),e.getDOY()):e}function C(e){return"Average"===e?e:(e=j(e),M(e.getMonth())+" "+T(e.getDate())+", "+e.getFullYear())}function M(e){switch(e){case 0:return"Jan.";case 1:return"Feb.";case 2:return"Mar.";case 3:return"Apr.";case 4:return"May";case 5:return"Jun.";case 6:return"Jul.";case 7:return"Aug.";case 8:return"Sep.";case 9:return"Oct.";case 10:return"Nov.";case 11:return"Dec."}}function T(e){var t=e%10,n=e%100;return 1===t&&11!==n?e+"st":2===t&&12!==n?e+"nd":3===t&&13!==n?e+"rd":e+"th"}Object.defineProperty(t,"__esModule",{value:!0}),t.SetupGraphs=n,t.BindGraphEvents=o;var A,I=L.Icon.extend({}),N=new I({iconUrl:"imgs/blue_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),R=new I({iconUrl:"imgs/orange_icon.png",shadowUrl:"imgs/marker_shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),B={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"}},function(e,t){"use strict";function n(){d3.selectAll(".panel-top-btn").on("click",r)}function r(){this.classList.contains("active")||(o(),a(),d3.selectAll(".panel-top-btn, .panel-section-wrapper").classed("active",function(){return!d3.select(this).classed("active")}))}function o(){var e=d3.selectAll("#map-wrapper, #right-panel"),t=e.classed("layers-active"),n=e.classed("graphs-active");e.classed("layers-active",!t).classed("graphs-active",!n)}function a(){var e=document.getElementById("right-panel").offsetWidth;document.getElementById("map-wrapper").style.paddingRight=e+"px"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXhfYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBlN2ZhY2ZiNWE2YzZhY2Y5NGZmMSIsIndlYnBhY2s6Ly8vLi9qcy9iYXNlLmpzIiwid2VicGFjazovLy8uL2pzL3BhcnNlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9zZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvbGVhZmxldENvbnRyb2wuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ub2RlbnQtcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovLy8uL34vbm9kZW50LXJ1bnRpbWUvem91c2FuLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL34vbm9kZS1saWJzLWJyb3dzZXIvfi90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzIiwid2VicGFjazovLy8od2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L34vc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L25vZGVudC1ydW50aW1lL3RoZW5hYmxlRmFjdG9yeS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL34vbG9kYXNoLmRlYm91bmNlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3NlYXJjaEVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvZG9tVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Jlc3VsdExpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2JpbmdQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvcHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2VzcmlQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvZ29vZ2xlUHJvdmlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL29wZW5TdHJlZXRNYXBQcm92aWRlci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9wYW5lbC5qcyIsIndlYnBhY2s6Ly8vLi9qcy90b2dnbGVMYXllci5qcyIsIndlYnBhY2s6Ly8vLi9qcy9tYXAuanMiLCJ3ZWJwYWNrOi8vLy4vanMvc2hhcmUuanMiLCJ3ZWJwYWNrOi8vLy4vanMvYmFzZWxheWVyLmpzIiwid2VicGFjazovLy8uL2pzL29wYWNpdHlTbGlkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vanMvZ3JhcGguanMiLCJ3ZWJwYWNrOi8vLy4vanMvdGFicy5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX3BhcnNlciIsIl9wYXJzZXIyIiwiX3NlYXJjaCIsIl9zZWFyY2gyIiwiX3BhbmVsIiwiX3BhbmVsMiIsIl9iYXNlbGF5ZXIiLCJfZ3JhcGgiLCJfdGFicyIsIl90YWJzMiIsIl9tYXAiLCJfc2hhcmUiLCJfdG9nZ2xlTGF5ZXIiLCJCYXNlIiwiY29uZmlnIiwiY2FsbGJhY2siLCJTZXR1cEdyYXBocyIsImRhdGEiLCJBZGRTaGFyZVNldHRpbmdzVG9Db25maWciLCJtYXAiLCJDcmVhdGVNYXAiLCJDcmVhdGVCYXNlTGF5ZXJzIiwiYmFzZWxheWVycyIsIkNyZWF0ZURlZmF1bHRMYXllcnMiLCJsYXllcnMiLCJsYXlvdXQiLCJCaW5kR3JhcGhFdmVudHMiLCJCaW5kVXBkYXRlU2hhcmVVcmwiLCJ3aW5kb3ciLCJQYXJzZUNvbmZpZyIsImNvbmZpZ0ZpbGUiLCJHZXRDb25maWciLCJ4bWxodHRwIiwiWE1MSHR0cFJlcXVlc3QiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwiZXJyIiwiY29uc29sZSIsImxvZyIsImZvcm1hdE1hcCIsImZvcm1hdExheWVycyIsIm9wZW4iLCJzZW5kIiwibGF5ZXJncm91cCIsImkiLCJkZWZhdWx0TWFwc2VydmVyVXJsIiwibWFwc2VydmVyVXJsIiwicHJvcCIsImhhc093blByb3BlcnR5IiwibGVuZ3RoIiwic2V0TWFwc2VydmVyVXJsIiwibGF5ZXIiLCJ1cmwiLCJDcmVhdGVTZWFyY2giLCJwcm92aWRlciIsIl9sZWFmbGV0R2Vvc2VhcmNoIiwiRXNyaVByb3ZpZGVyIiwic2VhcmNoQ29udHJvbCIsIkdlb1NlYXJjaENvbnRyb2wiLCJzaG93TWFya2VyIiwiYWRkQ29udHJvbCIsIkwiLCJEb21FdmVudCIsIm9uIiwic2VhcmNoRWxlbWVudCIsImVsZW1lbnRzIiwiY29udGFpbmVyIiwiZXYiLCJzdG9wUHJvcGFnYXRpb24iLCJfbGVhZmxldENvbnRyb2wiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiX3NlYXJjaEVsZW1lbnQiLCJfYmluZ1Byb3ZpZGVyIiwiX2VzcmlQcm92aWRlciIsIl9nb29nbGVQcm92aWRlciIsIl9vcGVuU3RyZWV0TWFwUHJvdmlkZXIiLCJfcHJvdmlkZXIiLCJMZWFmbGV0Q29udHJvbCIsIkNvbnRyb2wiLCJleHRlbmQiLCJFcnJvciIsIkxDb250cm9sIiwiX2xlbiIsImFyZ3VtZW50cyIsIm9wdGlvbnMiLCJBcnJheSIsIl9rZXkiLCJGdW5jdGlvbiIsInByb3RvdHlwZSIsImJpbmQiLCJhcHBseSIsImNvbmNhdCIsIl9ub2RlbnRSdW50aW1lIiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJ0YXJnZXQiLCJzb3VyY2UiLCJrZXkiLCJfbG9kYXNoIiwiX2xvZGFzaDIiLCJfc2VhcmNoRWxlbWVudDIiLCJfcmVzdWx0TGlzdCIsIl9yZXN1bHRMaXN0MiIsIl9kb21VdGlscyIsIl9jb25zdGFudHMiLCJkZWZhdWx0T3B0aW9ucyIsInBvc2l0aW9uIiwic3R5bGUiLCJzaG93UG9wdXAiLCJtYXJrZXIiLCJpY29uIiwiSWNvbiIsIkRlZmF1bHQiLCJkcmFnZ2FibGUiLCJtYXhNYXJrZXJzIiwicmV0YWluWm9vbUxldmVsIiwiYW5pbWF0ZVpvb20iLCJzZWFyY2hMYWJlbCIsIm5vdEZvdW5kTWVzc2FnZSIsIm1lc3NhZ2VIaWRlRGVsYXkiLCJ6b29tTGV2ZWwiLCJjbGFzc05hbWVzIiwiYnV0dG9uIiwibXNnYm94IiwiZm9ybSIsImlucHV0IiwiYXV0b0NvbXBsZXRlIiwiYXV0b0NvbXBsZXRlRGVsYXkiLCJpbml0aWFsaXplIiwiX3RoaXMiLCJ0aGlzIiwibWFya2VycyIsIkZlYXR1cmVHcm91cCIsIl9vcHRpb25zIiwiaGFuZGxlU3VibWl0IiwicXVlcnkiLCJvblN1Ym1pdCIsIl9zZWFyY2hFbGVtZW50JGVsZW1lbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY3JlYXRlRWxlbWVudCIsInRpdGxlIiwiaHJlZiIsIm9uQ2xpY2siLCJyZXN1bHRMaXN0IiwiaGFuZGxlQ2xpY2siLCJfcmVmIiwicmVzdWx0IiwibGFiZWwiLCJhcHBlbmRDaGlsZCIsImF1dG9TZWFyY2giLCJzZWxlY3RSZXN1bHQiLCJjbGVhclJlc3VsdHMiLCJvbkFkZCIsIl9vcHRpb25zMiIsImFkZFRvIiwicm9vdCIsImdldENvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJvblJlbW92ZSIsInJlbW92ZSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJfc2VhcmNoRWxlbWVudCRlbGVtZW4yIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmVDbGFzc05hbWUiLCJhZGRDbGFzc05hbWUiLCJmb2N1cyIsIkFSUk9XX0RPV05fS0VZIiwiQVJST1dfVVBfS0VZIiwiaW5jbHVkZXMiLCJrZXlDb2RlIiwibGlzdCIsIm1heCIsImNvdW50IiwibmV4dCIsImNvZGUiLCJzZWxlY3RlZCIsImlkeCIsIml0ZW0iLCJzZWxlY3QiLCJFU0NBUEVfS0VZIiwiY2xlYXIiLCJQcm9taXNlIiwiJHJldHVybiIsIiRlcnJvciIsInJlc3VsdHMiLCJTUEVDSUFMX0tFWVMiLCJzZWFyY2giLCJ0aGVuIiwiJGF3YWl0XzEiLCJyZW5kZXIiLCIkYXN5bmNiaW5kIiwiJGF3YWl0XzIiLCJzaG93UmVzdWx0Iiwia2V5cyIsIl9sYXllcnMiLCJyZW1vdmVMYXllciIsImFkZE1hcmtlciIsImNlbnRlck1hcCIsImZpcmVFdmVudCIsImxvY2F0aW9uIiwiX29wdGlvbnMzIiwiTWFya2VyIiwieSIsIngiLCJiaW5kUG9wdXAiLCJhZGRMYXllciIsIm9wZW5Qb3B1cCIsIl9vcHRpb25zNCIsInJlc3VsdEJvdW5kcyIsIkxhdExuZ0JvdW5kcyIsImJvdW5kcyIsImlzVmFsaWQiLCJnZXRCb3VuZHMiLCJmaXRCb3VuZHMiLCJhbmltYXRlIiwic2V0VmlldyIsImdldENlbnRlciIsImdldFpvb20iLCJfb3B0aW9uczUiLCIkYXN5bmNzcGF3biIsInByb21pc2VQcm92aWRlciIsInNlbGYiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImdlbkYiLCJyZXNvbHZlIiwicmVqZWN0Iiwic3RlcCIsImZuIiwiYXJnIiwiZ2VuIiwiZG9uZSIsInYiLCJ0aHJvdyIsInNyYyIsInRvU3RyaW5nIiwidCIsImFyZ3MiLCJtYXRjaCIsInJlIiwibXgiLCJleGVjIiwicHVzaCIsInJldmVyc2UiLCJmb3JFYWNoIiwic2xpY2UiLCJpbmRleCIsInN1YnN0ciIsInJlcGxhY2UiLCJ6b3VzYW4iLCJ0aGVuYWJsZSIsImNhdGNoZXIiLCJib3VuZFRoZW4iLCJyZXNvbHZlciIsInRyYW1wb2xpbmUiLCJzIiwidSIsImIiLCJxIiwidW5kZWZpbmVkIiwicG9wIiwiciIsIkxhenlUaGVuYWJsZSIsIkVhZ2VyVGhlbmFibGUiLCJUaGVuYWJsZSIsIkVhZ2VyVGhlbmFibGVGYWN0b3J5IiwiZXgiLCJwcm9jZXNzIiwic2V0SW1tZWRpYXRlIiwiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiY29uc3RydWN0b3IiLCJ0aWNrIiwiWm91c2FuIiwiZnVuYyIsIm1lIiwiU1RBVEVfRlVMRklMTEVEIiwieXJldCIsIlNUQVRFX1JFSkVDVEVEIiwicmVhc29uIiwibiIsIm5leHRUaWNrIiwiZiIsInNldFRpbWVvdXQiLCJzb29uIiwiY2FsbFF1ZXVlIiwiZnEiLCJmcVN0YXJ0IiwiYnVmZmVyU2l6ZSIsInNwbGljZSIsInN0YXRlIiwiVHlwZUVycm9yIiwiZmlyc3QiLCJyYSIsInJyIiwibCIsImNsaWVudHMiLCJvbkYiLCJvblIiLCJjbGllbnQiLCJhIiwidmFsIiwieiIsInZlcnNpb24iLCJkZWZhdWx0U2V0VGltb3V0IiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJjYWNoZWRTZXRUaW1lb3V0IiwicnVuQ2xlYXJUaW1lb3V0IiwiY2FjaGVkQ2xlYXJUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwiY2xlYW5VcE5leHRUaWNrIiwiZHJhaW5pbmciLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsInF1ZXVlSW5kZXgiLCJkcmFpblF1ZXVlIiwidGltZW91dCIsImxlbiIsInJ1biIsIkl0ZW0iLCJhcnJheSIsIm5vb3AiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb25zIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwiYmluZGluZyIsIm5hbWUiLCJjd2QiLCJjaGRpciIsImRpciIsInVtYXNrIiwiVGltZW91dCIsImNsZWFyRm4iLCJfaWQiLCJfY2xlYXJGbiIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImNsb3NlIiwidW5yZWYiLCJyZWYiLCJlbnJvbGwiLCJtc2VjcyIsIl9pZGxlVGltZW91dElkIiwiX2lkbGVUaW1lb3V0IiwidW5lbnJvbGwiLCJfdW5yZWZBY3RpdmUiLCJhY3RpdmUiLCJfb25UaW1lb3V0IiwiY2xlYXJJbW1lZGlhdGUiLCJnbG9iYWwiLCJ0YXNrIiwidGFza3NCeUhhbmRsZSIsIm5leHRIYW5kbGUiLCJyZWdpc3RlckltbWVkaWF0ZSIsImhhbmRsZSIsInJ1bklmUHJlc2VudCIsImN1cnJlbnRseVJ1bm5pbmdBVGFzayIsImRvYyIsImRvY3VtZW50IiwiYXR0YWNoVG8iLCJnZXRQcm90b3R5cGVPZiIsInBvc3RNZXNzYWdlIiwiaW1wb3J0U2NyaXB0cyIsInBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMiLCJvbGRPbk1lc3NhZ2UiLCJvbm1lc3NhZ2UiLCJtZXNzYWdlUHJlZml4IiwiTWF0aCIsInJhbmRvbSIsIm9uR2xvYmFsTWVzc2FnZSIsImluZGV4T2YiLCJhdHRhY2hFdmVudCIsIk1lc3NhZ2VDaGFubmVsIiwiY2hhbm5lbCIsInBvcnQxIiwicG9ydDIiLCJodG1sIiwiZG9jdW1lbnRFbGVtZW50Iiwic2NyaXB0IiwicmVtb3ZlQ2hpbGQiLCJpc1RoZW5hYmxlIiwicmVzb2x1dGlvbiIsImhvdyIsIkNoYWluZWQiLCJfdW5jaGFpbmVkIiwidGhlbkNoYWluIiwicmVzIiwicmVqIiwiY2hhaW4iLCJfcmVzb2x2ZXIiLCJkZWJvdW5jZSIsIndhaXQiLCJpbnZva2VGdW5jIiwidGltZSIsImxhc3RBcmdzIiwidGhpc0FyZyIsImxhc3RUaGlzIiwibGFzdEludm9rZVRpbWUiLCJsZWFkaW5nRWRnZSIsInRpbWVySWQiLCJ0aW1lckV4cGlyZWQiLCJsZWFkaW5nIiwicmVtYWluaW5nV2FpdCIsInRpbWVTaW5jZUxhc3RDYWxsIiwibGFzdENhbGxUaW1lIiwidGltZVNpbmNlTGFzdEludm9rZSIsIm1heGluZyIsIm5hdGl2ZU1pbiIsIm1heFdhaXQiLCJzaG91bGRJbnZva2UiLCJub3ciLCJ0cmFpbGluZ0VkZ2UiLCJ0cmFpbGluZyIsImNhbmNlbCIsImZsdXNoIiwiZGVib3VuY2VkIiwiaXNJbnZva2luZyIsIkZVTkNfRVJST1JfVEVYVCIsInRvTnVtYmVyIiwiaXNPYmplY3QiLCJuYXRpdmVNYXgiLCJ0eXBlIiwiaXNPYmplY3RMaWtlIiwiaXNTeW1ib2wiLCJvYmplY3RUb1N0cmluZyIsInN5bWJvbFRhZyIsIk5BTiIsIm90aGVyIiwidmFsdWVPZiIsInJlVHJpbSIsImlzQmluYXJ5IiwicmVJc0JpbmFyeSIsInRlc3QiLCJyZUlzT2N0YWwiLCJmcmVlUGFyc2VJbnQiLCJyZUlzQmFkSGV4IiwicGFyc2VJbnQiLCJmcmVlR2xvYmFsIiwiZnJlZVNlbGYiLCJvYmplY3RQcm90byIsIm1pbiIsIkRhdGUiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInByb3BzIiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIlNlYXJjaEVsZW1lbnQiLCJfcmVmJGhhbmRsZVN1Ym1pdCIsIl9yZWYkc2VhcmNoTGFiZWwiLCJfcmVmJGNsYXNzTmFtZXMiLCJqb2luIiwicGxhY2Vob2xkZXIiLCJvbklucHV0Iiwib25LZXlVcCIsIm9uS2V5UHJlc3MiLCJvbkZvY3VzIiwib25CbHVyIiwiX2VsZW1lbnRzIiwiaGFzRXJyb3IiLCJfZWxlbWVudHMyIiwiYm9keSIsImJsdXIiLCJFTlRFUl9LRVkiLCJlbGVtZW50IiwicGFyZW50IiwiZWwiLCJjbGFzc05hbWUiLCJjcmVhdGVTY3JpcHRFbGVtZW50IiwiY2IiLCJzZXRBdHRyaWJ1dGUiLCJqc29uIiwiYWRkIiwiQVJST1dfTEVGVF9LRVkiLCJBUlJPV19SSUdIVF9LRVkiLCJjeCIsImNsYXNzbmFtZXMiLCJ0cmltIiwiUmVzdWx0TGlzdCIsIl9yZWYkaGFuZGxlQ2xpY2siLCJfaW5pdGlhbGlzZVByb3BzIiwicmVzdWx0SXRlbSIsImNoaWxkIiwiY2xvbmVOb2RlIiwiaW5uZXJIVE1MIiwiZnJvbSIsImNoaWxkcmVuIiwibGFzdENoaWxkIiwiX3JlZjIiLCJwYXJlbnROb2RlIiwiaGFzQXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNyZWF0ZSIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX3Byb3ZpZGVyMiIsIlByb3ZpZGVyIiwiX0Jhc2VQcm92aWRlciIsInByb3RvY29sIiwianNvbnAiLCJwYXJhbXMiLCJnZXRQYXJhbVN0cmluZyIsInJlc291cmNlU2V0cyIsInJlc291cmNlcyIsInBvaW50IiwiY29vcmRpbmF0ZXMiLCJhZGRyZXNzIiwiZm9ybWF0dGVkQWRkcmVzcyIsImJib3giLCJyYXciLCJfcmVmMyIsImVuZHBvaW50IiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVxdWVzdCIsImZldGNoIiwidGV4dCIsImxvY2F0aW9ucyIsImZlYXR1cmUiLCJnZW9tZXRyeSIsImV4dGVudCIsInltaW4iLCJ4bWluIiwieW1heCIsInhtYXgiLCJwYXJhbVN0cmluZyIsImxuZyIsImxhdCIsImZvcm1hdHRlZF9hZGRyZXNzIiwidmlld3BvcnQiLCJzb3V0aHdlc3QiLCJub3J0aGVhc3QiLCJmb3JtYXQiLCJsb24iLCJkaXNwbGF5X25hbWUiLCJwYXJzZUZsb2F0IiwiYm91bmRpbmdib3giLCJzZXR1cFBhbmVsIiwibWFrZUxheWVyRWxlbXMiLCJtYWtlTGF5ZXJHcm91cHMiLCJtYWtlUGFuZWxEcmFnZ2FibGUiLCJkMyIsImRyYWciLCJwYW5lbERyYWdFdmVudEhhbmRsZXIiLCJwYW5lbCIsImdldEVsZW1lbnRCeUlkIiwibWFwV3JhcHBlciIsIndyYXBwZXIiLCJ3cmFwcGVyV2lkdGgiLCJjbGllbnRXaWR0aCIsInBhbmVsV2lkdGgiLCJwYW5lbE1pbldpZHRoIiwibWluV2lkdGgiLCJtb3VzZVgiLCJzb3VyY2VFdmVudCIsInhEZWx0YSIsIm5ld1BhbmVsV2lkdGgiLCJwYWRkaW5nUmlnaHQiLCJ3aWR0aCIsInNlbGVjdEFsbCIsImVudGVyIiwiYXBwZW5kIiwiYXR0ciIsImxheWVyR3JvdXAiLCJjbGFzc2VkIiwiZWFjaCIsImxheWVyR3JvdXBzIiwibGF5ZXJEaXYiLCJtYWtlQ2hlY2tib3giLCJtYWtlTGFiZWwiLCJtYWtlRGVzY3JpcHRpb24iLCJtYWtlTGVnZW5kIiwiX29wYWNpdHlTbGlkZXIiLCJtYWtlT3BhY2l0eVNsaWRlciIsInRvZ2dsZUxheWVyIiwiaW5mbyIsImxlZ2VuZCIsIkdldEN1cnJlbnRMYXllcnMiLCJfY3VycmVudF9sYXllcnMiLCJkZWZhdWx0TGF5ZXJzIiwiaiIsImRlZmF1bHRMYXllciIsImZvdW5kTGF5ZXIiLCJlbmFibGVMYXllciIsImRpc2FibGVMYXllciIsIkdldE1hcCIsIm1hcExheWVyIiwibWFrZVdtc1RpbGVMYXllciIsImFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIiLCJ1cGRhdGVTaGFyZVVybCIsImhhc0xheWVyIiwicmVtb3ZlTGF5ZXJGcm9tSW50ZXJuYWxUcmFja2VyIiwibG9jIiwidGlsZUxheWVyIiwid21zIiwidHJhbnNwYXJlbnQiLCJjcnMiLCJDUlMiLCJFUFNHNDMyNiIsIm9wYWNpdHkiLCJtYXBDb25maWciLCJzY3JvbGxXaGVlbFpvb20iLCJpbml0aWFsQ2VudGVyIiwiaW5pdGlhbFpvb20iLCJjb250cm9sIiwiYXR0cmlidXRpb24iLCJzZXRTaGFyZVVybCIsIm1ha2VTaGFyZVVybCIsIm1ha2VDZW50ZXJTdHJpbmciLCJtYWtlWm9vbVN0cmluZyIsIm1ha2VMYXllclN0cmluZyIsIm1ha2VCYXNlTGF5ZXJTdHJpbmciLCJmaWx0ZXIiLCJoaXN0b3J5IiwicmVwbGFjZVN0YXRlIiwiY2VudGVyIiwib3BhY2l0eVZhbHMiLCJjdXJyZW50TGF5ZXJzIiwiZWFjaExheWVyIiwiY3VycmVudExheWVyIiwiQkFTRV9MQVlFUl9UWVBFIiwicGFyc2VTaGFyZVVybCIsImdldFBhcmFtc0FycmF5IiwibWFrZUtleWVkUGFyYW1zT2JqZWN0IiwiZm9ybWF0UGFyYW1zIiwic3Vic3RyaW5nIiwidW5tYW5nbGVQYXJhbVN0cmluZyIsInNwbGl0IiwicGFyYW1zQXJyIiwicGFyYW1QYWlyIiwicGFyc2VkUGFyYW1zIiwiZm9ybWF0Q2VudGVyUGFyYW0iLCJmb3JtYXRMYXllclBhcmFtIiwiZm9ybWF0QmFzZUxheWVyUGFyYW0iLCJsYXllcklkIiwiZm9ybWF0dGVkTGF5ZXJzIiwiZW5hYmxlZExheWVycyIsInNoYXJlIiwiem9vbSIsImFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyIsImFkZEJhc2VMYXllclNldHRpbmdzVG9Db25maWciLCJzaGFyZUxheWVyU2V0dGluZ3MiLCJlbmFibGVkTGF5ZXIiLCJzaGFyZUJhc2VMYXllclNldHRpbmdzIiwiYmFzZWxheWVyIiwibGF5ZXJDb25maWciLCJiYXNlTGF5ZXIiLCJjcmVhdGVCYXNlTGF5ZXIiLCJsYXllck9wYWNpdHkiLCJvcGFjaXR5U2xpZGVyV3JhcHBlciIsIm9wYWNpdHlTbGlkZXJTdmciLCJ2aWV3Qm94IiwieE1pbiIsInlNaW4iLCJoZWlnaHQiLCJDSVJDTEVfUkFESVVTIiwibWFrZVNsaWRlclRyYWNrIiwic2V0RHJhZ0V2ZW50TGlzdGVuZXIiLCJzdmciLCJ1cGRhdGVPcGFjaXR5IiwiTUFYX09QQUNJVFlfTE9DIiwib3BhY2l0eVNjYWxlIiwiaW52ZXJ0Iiwic2xpZGVyIiwieFBvcyIsInNldE9wYWNpdHkiLCJzY2FsZUxpbmVhciIsImRvbWFpbiIsInJhbmdlIiwiY2xhbXAiLCJoYW5kbGVHcmFwaFR5cGVCdG5DbGljayIsImV4dGVuZERhdGVNb2R1bGUiLCJ0aXAiLCJkIiwiaXNMZWFwWWVhciIsInllYXIiLCJnZXRGdWxsWWVhciIsImdldERPWSIsImRheUNvdW50IiwibW4iLCJnZXRNb250aCIsImRuIiwiZ2V0RGF0ZSIsImRheU9mWWVhciIsImhhbmRsZU1hcENsaWNrIiwibGF0bG5nIiwiZGl2IiwiY3JlYXRlR3JhcGhEaXYiLCJjcmVhdGVNYXJrZXIiLCJzZXRJY29uIiwiaG92ZXJJY29uIiwiZ3JhcGhJY29uIiwiY3JlYXRlR3JhcGhSZW1vdmVyIiwiZWxlbSIsImNyZWF0ZUdyYXBoUmVtb3ZlckVsZW0iLCJpbm5lclRleHQiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJnZXREYXRhIiwib1JlcSIsInJlc3BvbnNlIiwiZHJhd0dyYXBoIiwic3BsaXREYXRhIiwicmVwcm9jZXNzRGF0YSIsIm9yaWdkYXRhIiwiZGF0YUZvck1lZGlhbnMiLCJtZWRpYW4iLCJzb3J0IiwiZmxvb3IiLCJkYXRhc2V0IiwiYWN0aXZlRWxlbSIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJhY3RpdmVUeXBlIiwiY29udGVudCIsImNyZWF0ZVRleHROb2RlIiwicmVwcm9jZXNzZWREYXRhIiwibWFrZVVwRG93bkxpbmVHcmFwaCIsIm1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMiLCJkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMiLCJhdmVyYWdlcyIsIm1hcmdpbiIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwibGVmdCIsInNjYWxlVGltZSIsInBhcnNlRGF0ZSIsInhBeGlzIiwiYXhpc0JvdHRvbSIsInRpY2tzIiwidGlja0Zvcm1hdCIsInlBeGlzIiwiYXhpc0xlZnQiLCJ2YWx1ZWxpbmUiLCJsaW5lIiwiZHJhd0xpbmVhclBhdGgiLCJkcmF3TGluZWFyUG9pbnRzIiwiZm9ybWF0TW9udGhUaWNrIiwiTU9OVEhfTEFCRUxTIiwiY2hhcnRzIiwibWVkaWFucyIsInRpY2tWYWx1ZXMiLCJpc0FycmF5IiwicGFyc2VKdWxpYW5EYXkiLCJwYXRoIiwiaW5wdXR3cmFwcGVyIiwiY3JlYXRlQ2hlY2tib3giLCJyYWRpdXMiLCJmaW5kUG9sYXJDZW50ZXIiLCJ0aHJlc2hvbGRzIiwiZmluZFBvbGFyVGhyZXNob2xkcyIsInJhZGlhbExpbmUiLCJhbmdsZSIsIlBJIiwiZ3IiLCJnYSIsInRocmVzaG9sZEVsZW0iLCJkYXkiLCJjZW50ZXJEYXkiLCJkcmF3UG9sYXJQYXRoIiwic2hvdyIsImhpZGUiLCJwb2ludHMiLCJjaGVja2JveFdyYXBwZXIiLCJwcm9wZXJ0eSIsIm5ld1llYXIiLCJjaGVja2VkIiwidGhyZXNob2xkQ2hlY2tib3giLCJhcnIiLCJzdW0iLCJ0b3RhbFN1bSIsImluY29tcGxldGVZZWFycyIsImFicyIsImNoZWNrRGlmZiIsImxlZnRBcmVhIiwicmlnaHRBcmVhIiwiayIsImNvdW50ZXIiLCJhcmVhRGlmZiIsImFyZWFJbmRleCIsImF2Z3MiLCJmaXJzdFJhZGl1cyIsInNlY29uZFJhZGl1cyIsImZpcnN0RGlmZiIsInN0YXJ0RGF5Iiwic3RhcnRJbmRleCIsImZpZnRlZW5JbmRleCIsImVpZ2h0eUluZGV4IiwiZWlnaHR5Zml2ZUluZGV4IiwiZmlmdGVlblRocmVzaG9sZCIsImVpZ2h0eVRocmVzaG9sZCIsImVpZ2h0eWZpdmVUaHJlc2hvbGQiLCJmaWZ0ZWVuSW5kZXhGb3VuZCIsImVpZ2h0eUluZGV4Rm91bmQiLCJlaWdodHlmaXZlSW5kZXhGb3VuZCIsImNpcmNsZUNlbnRlciIsImRhdHVtIiwiY29tcHV0ZUNvbG9yIiwiaGFuZGxlUG9pbnRNb3VzZW92ZXIiLCJoYW5kbGVQb2ludE1vdXNlb3V0IiwidGlwU3RyaW5nIiwiZm9ybWF0RGF0ZSIsInNjYWxlIiwiZGlmZiIsInBlcmNlbnRfZGlmZiIsImxpZ2h0bmVzcyIsImRhdGUiLCJtb250aCIsImZvcm1hdE1vbnRoIiwib3JkaW5hbF9zdWZmaXhfb2YiLCJiYXNlSWNvbiIsImljb25VcmwiLCJzaGFkb3dVcmwiLCJpY29uU2l6ZSIsImljb25BbmNob3IiLCJwb3B1cEFuY2hvciIsInNoYWRvd1NpemUiLCIwIiwiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5IiwiMTAiLCIxMSIsIkJpbmRUYWJFdmVudHMiLCJoYW5kbGVUYWJIZWFkZXJCdG5DbGljayIsInRvZ2dsZVBhbmVsV2lkdGgiLCJ0b2dnbGVNYXBQYWRkaW5nIiwid3JhcHBlcnMiLCJsYXllcnNBY3RpdmUiLCJncmFwaHNBY3RpdmUiLCJvZmZzZXRXaWR0aCJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0E0QkFGLEdBQUFRLEVBQUFULEVBR0FDLEVBQUFTLEVBQUFQLEVBR0FGLEVBQUFVLEVBQUEsR0FHQVYsRUFBQSxLRE1NLFNBQVNJLEVBQVFELEVBQVNILEdBRS9CSSxFQUFPRCxRQUFVSCxFQUFvQixJQUtoQyxTQUFTSSxFQUFRRCxFQUFTSCxHQUUvQixZQWdDQSxTQUFTVyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHQTlCdkZHLE9BQU9DLGVBQWViLEVBQVMsY0FDM0JjLE9BQU8sR0V4RFksSUFBQUMsR0FBQWxCLEVBQUEsR0Y2RG5CbUIsRUFBV1IsRUFBdUJPLEdFNURkRSxFQUFBcEIsRUFBQSxHRmdFcEJxQixFQUFXVixFQUF1QlMsR0UvRGhCRSxFQUFBdEIsRUFBQSxJRm1FbEJ1QixFQUFVWixFQUF1QlcsR0VsRVBFLEVBQUF4QixFQUFBLElBQ1l5QixFQUFBekIsRUFBQSxJQUNqQjBCLEVBQUExQixFQUFBLElGd0VyQjJCLEVBQVNoQixFQUF1QmUsR0V2RWJFLEVBQUE1QixFQUFBLElBQ21DNkIsRUFBQTdCLEVBQUEsSUFDekI4QixFQUFBOUIsRUFBQSxJQUs5QitCLEdBSE0vQixFQUFRLElBR1AsU0FBVWdDLElGOEVoQixFQUFJYixFQUFTTCxTRTdFRmtCLEVBQ1pDLElBQ0EsRUFBQVIsRUFBQVMsZ0JBQ0gsRUFBQVAsRUFBQWIsYUFHR21CLEVBQVcsU0FBVUUsSUY4RXBCLEVBQUlOLEVBQU9PLDBCRTVFWkQsRUY2RUMsSUU3RUdFLElBQU0sRUFBQVQsRUFBQVUsV0FBVUgsRUFDcEJFLE1GNkVDLEVBQUliLEVBQVdlLGtCRTdFQ0YsRUFBS0YsRUFDdEJLLGFGNkVDLEVBQUlWLEVBQWFXLHFCRTdFRU4sRUFBS08sT0FBUVAsRUFDakMsbUJGNkVDLEVBQUlaLEVBQVFULFNFN0VGcUIsRUFBS08sT0FBUVAsRUFDeEJRLFNGNkVDLEVBQUl0QixFQUFTUCxTRTVFZHVCLElGNkVDLEVBQUlaLEVBQU9tQixpQkU1RVpQLElGNkVDLEVBQUlSLEVBQU9nQixvQkU1RWZSLEdBRURTLFFBQU9mLEtBRVBBLEVGNkVDNUIsRUFBUVcsU0U3RU9pQixTRmlGVixTQUFTM0IsRUFBUUQsR0FFdEIsWUc5R2MsU0FBUzRDLEdBQWFDLEVBQVlmLEdIMkg1Q2dCLEVHMUhTRCxFQUNiZixHQUVELFFBQVNnQixHQUFXRCxFQUFZZixHSDJIM0IsR0cxSEdpQixHQUFVLEdBQ2RDLGVIMEhDRCxHRzFIT0UsbUJBQXFCLFdIMkh4QixHRzFIeUIsR0FBdEJGLEVBQVFHLFdBQ1IsQ0gwSEMsSUFDSSxHRzFIR2xCLEdBQU9tQixLQUFLQyxNQUFNTCxFQUN6Qk0sY0FBQyxNQUFNQyxHSDJISEMsUUcxSE9DLElBQ1IseUNIMEhDRCxRRzFIT0MsSUFDWEYsR0gySEFHLEVHekhEekIsR0gwSEMwQixFR3pIRDFCLEdIMEhDRixFR3pISkUsS0g2SEplLEVHMUhPWSxLQUFLLE1BQU9kLEdBQ3BCLEdIMEhDRSxFR3pIRGEsT0gwSENMLFFHMUhPQyxJQUNYLE1BRUQsUUFBU0MsR0FBV3pCLEdBQ1hBLEVBQUtFLE1BQUtGLEVBQUtFLFFBR3hCLFFBQVN3QixHQUFjMUIsR0gySGxCLEdHdEhENkIsR0FFQUMsRUFOSXZCLEVBQVNQLEVBQ2JPLE9BQUl3QixFQUFzQi9CLEVBQzFCZ0MsWUFBMkJoQyxHQUMzQixnQkg2SEMsS0cxSEksR0FBSWlDLEtBQVExQixHQUNiLENIMEhDLElHMUhJQSxFQUFPMkIsZUFBZUQsR0FDM0IsTUgySEMsS0FEQUosRUcxSFl0QixFQUNiMEIsR0FBS0gsRUFBSSxFQUFHQSxFQUFJRCxFQUFXTSxPQUFRTCxJSDJIOUJNLEVHMUhlUCxFQUFXQyxHQUM5QkMsSUFJVCxRQUFTSyxHQUFpQkMsRUFBT0MsR0gySDVCRCxFRzFIS0MsSUFBTUQsRUFBTUMsS0FDckJBLEVIaUVBMUQsT0FBT0MsZUFBZWIsRUFBUyxjQUMzQmMsT0FBTyxJQUVYZCxFQUFRVyxRQUFVaUMsR0EwRGIsU0FBUzNDLEVBQVFELEVBQVNILEdBRS9CLFlJbkxjLFNBQVMwRSxHQUFjckMsR0o2TGpDLEdJNUxLc0MsR0FFTixHQUFBQyxHQUFBQyxhQUFNQyxFQUFBLEdBQUFGLEdBQUFHLGtCSjZMREosU0kzTERBLEVKNExDSyxZSXpMTCxHSjRMQzNDLEdJNUxHNEMsV0FFSkgsR0o0TENJLEVJNUxDQyxTQUFTQyxHQUFHTixFQUFjTyxjQUFjQyxTQUFTQyxVQUFXLFFBQVMsU0FBVUMsR0o2TDVFTixFSTVMQ0MsU0FBU00sZ0JBQ2RELEtKeUtKekUsT0FBT0MsZUFBZWIsRUFBUyxjQUMzQmMsT0FBTyxJQUVYZCxFQUFRVyxRQUFVNEQsQ0l4TG5CLElBQUFFLEdBQUE1RSxFQUFBLElKNk1NLFNBQVNJLEVBQVFELEVBQVNILEdLL01oQyxZQXFFQSxTQUFTVyxHQUF1QkMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixHQW5FdkZHLE9BQU9DLGVBQWViLEVBQVMsY0FDN0JjLE9BQU8sR0FHVCxJQUFJeUUsR0FBa0IxRixFQUFRLEVBRTlCZSxRQUFPQyxlQUFlYixFQUFTLG9CQUM3QndGLFlBQVksRUFDWkMsSUFBSyxXQUNILE1BQU9qRixHQUF1QitFLEdBQWlCNUUsVUFJbkQsSUFBSStFLEdBQWlCN0YsRUFBUSxHQUU3QmUsUUFBT0MsZUFBZWIsRUFBUyxpQkFDN0J3RixZQUFZLEVBQ1pDLElBQUssV0FDSCxNQUFPakYsR0FBdUJrRixHQUFnQi9FLFVBSWxELElBQUlnRixHQUFnQjlGLEVBQVEsR0FFNUJlLFFBQU9DLGVBQWViLEVBQVMsZ0JBQzdCd0YsWUFBWSxFQUNaQyxJQUFLLFdBQ0gsTUFBT2pGLEdBQXVCbUYsR0FBZWhGLFVBSWpELElBQUlpRixHQUFnQi9GLEVBQVEsR0FFNUJlLFFBQU9DLGVBQWViLEVBQVMsZ0JBQzdCd0YsWUFBWSxFQUNaQyxJQUFLLFdBQ0gsTUFBT2pGLEdBQXVCb0YsR0FBZWpGLFVBSWpELElBQUlrRixHQUFrQmhHLEVBQVEsR0FFOUJlLFFBQU9DLGVBQWViLEVBQVMsa0JBQzdCd0YsWUFBWSxFQUNaQyxJQUFLLFdBQ0gsTUFBT2pGLEdBQXVCcUYsR0FBaUJsRixVQUluRCxJQUFJbUYsR0FBeUJqRyxFQUFRLEdBRXJDZSxRQUFPQyxlQUFlYixFQUFTLHlCQUM3QndGLFlBQVksRUFDWkMsSUFBSyxXQUNILE1BQU9qRixHQUF1QnNGLEdBQXdCbkYsVUFJMUQsSUFBSW9GLEdBQVlsRyxFQUFRLEdBRXhCZSxRQUFPQyxlQUFlYixFQUFTLFlBQzdCd0YsWUFBWSxFQUNaQyxJQUFLLFdBQ0gsTUFBT2pGLEdBQXVCdUYsR0FBV3BGLFlMMk52QyxTQUFTVixFQUFRRCxFQUFTSCxHTTVSaEMsWUE4QkEsU0FBU1csR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsR0FvUXZGLFFBQVN1RixLQUNQLElBQUtqQixJQUFNQSxFQUFFa0IsVUFBWWxCLEVBQUVrQixRQUFRQyxPQUNqQyxLQUFNLElBQUlDLE9BQU0sb0VBS2xCLEtBQUssR0FGREMsR0FBV3JCLEVBQUVrQixRQUFRQyxPQUFPRCxHQUV2QkksRUFBT0MsVUFBVW5DLE9BQVFvQyxFQUFVQyxNQUFNSCxHQUFPSSxFQUFPLEVBQUdBLEVBQU9KLEVBQU1JLElBQzlFRixFQUFRRSxHQUFRSCxVQUFVRyxFQUc1QixPQUFPLEtBQUtDLFNBQVNDLFVBQVVDLEtBQUtDLE1BQU1ULEdBQVcsTUFBTVUsT0FBT1AsS0EzU3BFM0YsT0FBT0MsZUFBZWIsRUFBUyxjQUM3QmMsT0FBTyxHQUdULElBQUlpRyxHQUFpQmxILEVBQVEsR0FJekJtSCxHQUZrQnhHLEVBQXVCdUcsR0FFOUJuRyxPQUFPcUcsUUFBVSxTQUFVQyxHQUFVLElBQUssR0FBSXBELEdBQUksRUFBR0EsRUFBSXdDLFVBQVVuQyxPQUFRTCxJQUFLLENBQUUsR0FBSXFELEdBQVNiLFVBQVV4QyxFQUFJLEtBQUssR0FBSXNELEtBQU9ELEdBQWN2RyxPQUFPK0YsVUFBVXpDLGVBQWU5RCxLQUFLK0csRUFBUUMsS0FBUUYsRUFBT0UsR0FBT0QsRUFBT0MsSUFBWSxNQUFPRixJQUV2UGxILEdBQVFXLFFBQVVxRixDQUVsQixJQUFJcUIsR0FBVXhILEVBQVEsSUFFbEJ5SCxFQUFXOUcsRUFBdUI2RyxHQUVsQzNCLEVBQWlCN0YsRUFBUSxJQUV6QjBILEVBQWtCL0csRUFBdUJrRixHQUV6QzhCLEVBQWMzSCxFQUFRLElBRXRCNEgsRUFBZWpILEVBQXVCZ0gsR0FFdENFLEVBQVk3SCxFQUFRLElBRXBCOEgsRUFBYTlILEVBQVEsSUFJckIrSCxFQUFpQixXQUNuQixPQUNFQyxTQUFVLFVBQ1ZDLE1BQU8sU0FDUGpELFlBQVksRUFDWmtELFdBQVcsRUFDWEMsUUFDRUMsS0FBTSxHQUFJbEQsR0FBRW1ELEtBQUtDLFFBQ2pCQyxXQUFXLEdBRWJDLFdBQVksRUFDWkMsaUJBQWlCLEVBQ2pCQyxhQUFhLEVBQ2JDLFlBQWEsZ0JBQ2JDLGdCQUFpQiwwQ0FDakJDLGlCQUFrQixJQUNsQkMsVUFBVyxHQUNYQyxZQUNFeEQsVUFBVyx3REFDWHlELE9BQVEsMkNBQ1JDLE9BQVEsc0JBQ1JDLEtBQU0sR0FDTkMsTUFBTyxJQUVUQyxjQUFjLEVBQ2RDLGtCQUFtQixNQUluQmpELEdBQ0ZrRCxXQUFZLFNBQW9CNUMsR0FDOUIsR0FBSTZDLEdBQVFDLElBRVpBLE1BQUtDLFFBQVUsR0FBSXZFLEdBQUV3RSxhQUVyQkYsS0FBSzlDLFFBQVVTLEtBQWFZLElBQWtCckIsRUFFOUMsSUFBSWlELEdBQVdILEtBQUs5QyxRQUNoQnVCLEVBQVEwQixFQUFTMUIsTUFDakJjLEVBQWFZLEVBQVNaLFdBQ3RCSixFQUFjZ0IsRUFBU2hCLFlBQ3ZCUyxFQUFlTyxFQUFTUCxhQUN4QkMsRUFBb0JNLEVBQVNOLGlCQUVuQixZQUFWcEIsSUFDRnVCLEtBQUs5QyxRQUFRcUMsV0FBV3hELFdBQWEsSUFBTW1CLEVBQVF1QixPQUdyRHVCLEtBQUtuRSxjQUFnQixHQUFJcUMsR0FBZ0I1RyxRQUFRcUcsS0FBYXFDLEtBQUs5QyxTQUNqRWtELGFBQWMsU0FBc0JDLEdBQ2xDLE1BQU9OLEdBQU1PLFNBQVNELE1BSTFCLElBQUlFLEdBQXdCUCxLQUFLbkUsY0FBY0MsU0FDM0NDLEVBQVl3RSxFQUFzQnhFLFVBQ2xDMkQsRUFBT2EsRUFBc0JiLEtBQzdCQyxFQUFRWSxFQUFzQlosS0FFbEM1RCxHQUFVeUUsaUJBQWlCLFdBQVksU0FBVUMsR0FDL0NBLEVBQUV4RSxtQkFHSixJQUFJdUQsSUFBUyxFQUFJbkIsRUFBVXFDLGVBQWUsSUFBS25CLEVBQVdDLE9BQVF6RCxFQUNsRXlELEdBQU9tQixNQUFReEIsRUFDZkssRUFBT29CLEtBQU8sSUFFZHBCLEVBQU9nQixpQkFBaUIsUUFBUyxTQUFVQyxHQUN6Q1YsRUFBTWMsUUFBUUosS0FDYixHQUVDYixJQUNGSSxLQUFLYyxXQUFhLEdBQUkxQyxHQUFhOUcsU0FDakN5SixZQUFhLFNBQXFCQyxHQUNoQyxHQUFJQyxHQUFTRCxFQUFLQyxNQUVsQnRCLEdBQU1sSSxNQUFRd0osRUFBT0MsTUFDckJuQixFQUFNTyxVQUFXRCxNQUFPWSxFQUFPQyxXQUluQ3hCLEVBQUt5QixZQUFZbkIsS0FBS2MsV0FBV2hGLFNBQVNDLFdBRTFDNEQsRUFBTWEsaUJBQWlCLFNBQVMsRUFBSXZDLEVBQVMzRyxTQUFTLFNBQVVtSixHQUM5RCxNQUFPVixHQUFNcUIsV0FBV1gsSUFDdkJaLElBQW9CLEdBQ3ZCRixFQUFNYSxpQkFBaUIsVUFBVyxTQUFVQyxHQUMxQyxNQUFPVixHQUFNc0IsYUFBYVosS0FDekIsR0FDSGQsRUFBTWEsaUJBQWlCLFVBQVcsU0FBVUMsR0FDMUMsTUFBT1YsR0FBTXVCLGFBQWFiLEtBQ3pCLElBR0xULEtBQUtsRSxVQUFhMEQsT0FBUUEsSUFFNUIrQixNQUFPLFNBQWUxSSxHQUNwQixHQUFJMkksR0FBWXhCLEtBQUs5QyxRQUNqQjFCLEVBQWFnRyxFQUFVaEcsV0FDdkJpRCxFQUFRK0MsRUFBVS9DLEtBUXRCLElBTEF1QixLQUFLbkgsSUFBTUEsRUFDUDJDLEdBQ0Z3RSxLQUFLQyxRQUFRd0IsTUFBTTVJLEdBR1AsUUFBVjRGLEVBQWlCLENBQ25CLEdBQUlpQixHQUFPTSxLQUFLbkUsY0FBY0MsU0FBUzRELEtBRW5DZ0MsRUFBTzdJLEVBQUk4SSxlQUFlQyxjQUFjLDhCQUV4QzdGLEdBQVksRUFBSXNDLEVBQVVxQyxlQUFlLE1BQU8sZ0NBQ3BEM0UsR0FBVW9GLFlBQVl6QixHQUN0QmdDLEVBQUtQLFlBQVlwRixHQUNqQmlFLEtBQUtsRSxTQUFTQyxVQUFZQSxFQUc1QixNQUFPaUUsTUFBS25FLGNBQWNDLFNBQVNDLFdBRXJDOEYsU0FBVSxXQUNSLEdBQUk5RixHQUFZaUUsS0FBS2xFLFNBQVNDLFNBTTlCLE9BSklBLElBQ0ZBLEVBQVUrRixTQUdMOUIsTUFFVGEsUUFBUyxTQUFpQmtCLEdBQ3hCQSxFQUFNQyxnQkFFTixJQUFJQyxHQUF5QmpDLEtBQUtuRSxjQUFjQyxTQUM1Q0MsRUFBWWtHLEVBQXVCbEcsVUFDbkM0RCxFQUFRc0MsRUFBdUJ0QyxLQUcvQjVELEdBQVVtRyxVQUFVQyxTQUFTLFdBQy9CLEVBQUk5RCxFQUFVK0QsaUJBQWlCckcsRUFBVyxZQUUxQyxFQUFJc0MsRUFBVWdFLGNBQWN0RyxFQUFXLFVBQ3ZDNEQsRUFBTTJDLFVBR1ZqQixhQUFjLFNBQXNCVSxHQUNsQyxJQUFNekQsRUFBV2lFLGVBQWdCakUsRUFBV2tFLGNBQWNDLFNBQVNWLEVBQU1XLFNBQXpFLENBSUFYLEVBQU1DLGdCQUNOLElBQUlyQyxHQUFRSyxLQUFLbkUsY0FBY0MsU0FBUzZELE1BR3BDZ0QsRUFBTzNDLEtBQUtjLFdBQ1o4QixFQUFNNUMsS0FBS2MsV0FBVytCLFFBQVUsRUFHaENDLEVBQXNCLGNBQWZmLEVBQU1nQixLQUF5QyxJQUFoQkosRUFBS0ssV0FBaUJMLEVBQUtLLFNBQVcsRUFFNUVDLEVBQU1ILEVBQU8sRUFBSUYsRUFBTUUsRUFBT0YsRUFBTSxFQUFJRSxFQUV4Q0ksRUFBT1AsRUFBS1EsT0FBT0YsRUFDdkJ0RCxHQUFNbEksTUFBUXlMLEVBQUtoQyxRQUVyQkksYUFBYyxTQUFzQlMsR0FDOUJBLEVBQU1XLFVBQVlwRSxFQUFXOEUsWUFJakNwRCxLQUFLYyxXQUFXdUMsU0FFbEJqQyxXQUFZLFNBQW9CVyxHQUM5QixNQUFPLElBQUl1QixTQUFRLFNBQVVDLEVBQVNDLEdBQ3BDLEdBQUluRCxHQUFPbEYsRUFBVXNJLENBRXJCLE9BQUluRixHQUFXb0YsYUFBYWpCLFNBQVNWLEVBQU1XLFNBQ2xDYSxLQUdUbEQsRUFBUTBCLEVBQU1sRSxPQUFPcEcsTUFDckIwRCxFQUFXNkUsS0FBSzlDLFFBQVEvQixTQUNqQkEsRUFBU3dJLFFBQVN0RCxNQUFPQSxJQUFTdUQsS0FBSyxTQUFVQyxHQUl0RCxNQUZBSixHQUFVSSxFQUNWN0QsS0FBS2MsV0FBV2dELE9BQU9MLEdBQ2hCRixLQUNQUSxXQUFXL0QsS0FBTXdELEdBQVNBLEtBQzVCTyxXQUFXL0QsUUFFZk0sU0FBVSxTQUFrQkQsR0FDMUIsTUFBTyxJQUFJaUQsU0FBUSxTQUFVQyxFQUFTQyxHQUNwQyxHQUFJckksR0FBVXNJLENBRWQsT0FEQXRJLEdBQVc2RSxLQUFLOUMsUUFBUS9CLFNBQ2pCQSxFQUFTd0ksT0FBT3RELEdBQU91RCxLQUFLLFNBQVVJLEdBTzNDLE1BTEFQLEdBQVVPLEVBRU5QLEdBQVdBLEVBQVEzSSxPQUFTLEdBQzlCa0YsS0FBS2lFLFdBQVdSLEVBQVEsSUFFbkJGLEtBQ1BRLFdBQVcvRCxLQUFNd0QsR0FBU0EsSUFDNUJPLFdBQVcvRCxRQUVmaUUsV0FBWSxTQUFvQmhELEdBQzlCLEdBQUloQixHQUFVMUksT0FBTzJNLEtBQUtsRSxLQUFLQyxRQUFRa0UsUUFDbkNsRSxHQUFRbkYsUUFBVWtGLEtBQUs5QyxRQUFROEIsWUFDakNnQixLQUFLQyxRQUFRbUUsWUFBWW5FLEVBQVEsR0FHbkMsSUFBSXRCLEdBQVNxQixLQUFLcUUsVUFBVXBELEVBQzVCakIsTUFBS3NFLFVBQVVyRCxHQUVmakIsS0FBS25ILElBQUkwTCxVQUFVLDBCQUNqQkMsU0FBVXZELEVBQ1Z0QyxPQUFRQSxLQUdaMEYsVUFBVyxTQUFtQnBELEdBQzVCLEdBQUl3RCxHQUFZekUsS0FBSzlDLFFBQ2pCQSxFQUFVdUgsRUFBVTlGLE9BQ3BCRCxFQUFZK0YsRUFBVS9GLFVBRXRCQyxFQUFTLEdBQUlqRCxHQUFFZ0osUUFBUXpELEVBQU8wRCxFQUFHMUQsRUFBTzJELEdBQUkxSCxFQVNoRCxPQVJBeUIsR0FBT2tHLFVBQVU1RCxFQUFPQyxPQUV4QmxCLEtBQUtDLFFBQVE2RSxTQUFTbkcsR0FFbEJELEdBQ0ZDLEVBQU9vRyxZQUdGcEcsR0FFVDJGLFVBQVcsU0FBbUJyRCxHQUM1QixHQUFJK0QsR0FBWWhGLEtBQUs5QyxRQUNqQitCLEVBQWtCK0YsRUFBVS9GLGdCQUM1QkMsRUFBYzhGLEVBQVU5RixZQUd4QitGLEVBQWUsR0FBSXZKLEdBQUV3SixhQUFhakUsRUFBT2tFLFFBQ3pDQSxFQUFTRixFQUFhRyxVQUFZSCxFQUFlakYsS0FBS0MsUUFBUW9GLGFBRTdEcEcsR0FBbUJnRyxFQUFhRyxVQUNuQ3BGLEtBQUtuSCxJQUFJeU0sVUFBVUgsR0FBVUksUUFBU3JHLElBRXRDYyxLQUFLbkgsSUFBSTJNLFFBQVFMLEVBQU9NLFlBQWF6RixLQUFLMEYsV0FBYUgsUUFBU3JHLEtBR3BFd0csUUFBUyxXQUNQLEdBQUlDLEdBQVkzRixLQUFLOUMsUUFDakIrQixFQUFrQjBHLEVBQVUxRyxnQkFDNUJLLEVBQVlxRyxFQUFVckcsU0FFMUIsT0FBT0wsR0FBa0JlLEtBQUtuSCxJQUFJNk0sVUFBWXBHLEtOd1Q1QyxTQUFTMUksRUFBUUQsRUFBU0gsR090bEJoQyxZQW1HQSxTQUFTb1AsR0FBWUMsRUFBZ0JDLEdBSWpDLEdBSEt6SSxTQUFTQyxVQUFVc0ksYUFDcEJyTyxPQUFPQyxlQUFlNkYsU0FBU0MsVUFBVSxlQUFlN0YsTUFBTW1PLEVBQVl6SixZQUFXLEVBQU00SixjQUFhLEVBQUtDLFVBQVMsSUFFcEhoRyxlQUFnQjNDLFVBQXRCLENBRUEsR0FBSTRJLEdBQU9qRyxJQUNYLE9BQU8sSUFBSTZGLEdBQWdCLFNBQWdCSyxFQUFTQyxHQUVoRCxRQUFTQyxHQUFLQyxFQUFHQyxHQUNiLEdBQUl4RCxFQUNKLEtBRUksR0FEQUEsRUFBT3VELEVBQUd0UCxLQUFLd1AsRUFBSUQsR0FDaEJ4RCxFQUFLMEQsS0FBTSxDQUNWLEdBQUkxRCxFQUFLckwsUUFBVXlPLEVBQVMsQ0FDeEIsR0FBSXBELEVBQUtyTCxPQUFTcUwsRUFBS3JMLFFBQVFxTCxFQUFLckwsTUFBTW1NLEtBQ3RDLE1BQU9kLEdBQUtyTCxNQUFNeU8sRUFBUUMsRUFDOUJELElBQVdBLEVBQVFwRCxFQUFLckwsT0FDeEJ5TyxFQUFVLEtBRWQsT0FHQXBELEVBQUtyTCxNQUFNbU0sS0FDWGQsRUFBS3JMLE1BQU1tTSxLQUFLLFNBQVM2QyxHQUNyQkwsRUFBS0csRUFBSXpELEtBQUsyRCxJQUNmLFNBQVNoRyxHQUNSMkYsRUFBS0csRUFBSUcsTUFBTWpHLEtBR25CMkYsRUFBS0csRUFBSXpELEtBQUtBLEVBQUtyTCxPQUV6QixNQUFNZ0osR0FHSixNQUZBMEYsSUFBVUEsRUFBTzFGLFFBQ2pCMEYsRUFBUyxPQTFCakIsR0FBSUksR0FBTU4sRUFBS2xQLEtBQUsrTyxFQUFNSSxFQUFTQyxFQThCbkNDLEdBQUtHLEVBQUl6RCxTQW5HakIsR0FBSWlCLEdBbkJKLFNBQXlCdEIsRUFBUzlDLEdBTTlCLElBTEEsR0FBSWdILEdBQU1oSCxFQUFNaUgsV0FDWkMsRUFBSSxVQUFVRixFQUNkRyxFQUFPSCxFQUFJSSxNQUFNLGlCQUFpQixHQUNsQ0MsRUFBSyx1QkFDTGhRLE9BQ00sQ0FDTixHQUFJaVEsR0FBS0QsRUFBR0UsS0FBS0wsRUFDakIsS0FBSUksRUFFQyxLQUREalEsR0FBRW1RLEtBQUtGLEdBT2YsTUFKQWpRLEdBQUVvUSxVQUFVQyxRQUFRLFNBQVM1RyxHQUN6Qm9HLEVBQUlBLEVBQUVTLE1BQU0sRUFBRTdHLEVBQUU4RyxPQUFPOUUsRUFBU2hDLEVBQUUsSUFBSW9HLEVBQUVXLE9BQU8vRyxFQUFFOEcsTUFBTTlHLEVBQUUsR0FBRzNGLFVBRWhFK0wsRUFBSUEsRUFBRVksUUFBUSxpQkFBaUIsS0FBS0EsUUFBUSxPQUFPLEtBQzVDLEdBQUlwSyxVQUFTeUosRUFBS0QsT0FJekJhLE9BQU9sUixFQUFRLEdBQVlvUSxXQUMzQmUsU0FBU25SLEVBQVEsSUFBcUJvUSxZQUUxQyxRQUFTN0MsR0FBVytCLEVBQUs4QixHQW9EckIsUUFBU0MsS0FDTCxNQUFPQyxHQUFTdEssTUFBTXNJLEVBQUs3SSxXQW5EMUJJLFNBQVNDLFVBQVV5RyxZQUNwQnhNLE9BQU9DLGVBQWU2RixTQUFTQyxVQUFVLGNBQWM3RixNQUFNc00sRUFBVzVILFlBQVcsRUFBTTRKLGNBQWEsRUFBS0MsVUFBUyxJQUduSGpDLEVBQVdnRSxhQUNkaEUsRUFBV2dFLFdBQWEsU0FBb0JsQixFQUFFakMsRUFBRW9ELEVBQUV2SCxFQUFFd0gsR0FDbEQsTUFBTyxTQUFTQyxHQUFFQyxHQUNWLEtBQU9BLEdBQUcsQ0FDTixHQUFJQSxFQUFFdkUsS0FFRixNQURBdUUsR0FBSUEsRUFBRXZFLEtBQUtzRSxFQUFHekgsR0FDUHdILEVBQUVHLE9BQVVELENBRXZCLEtBQ0ksR0FBSUEsRUFBRUUsSUFBSyxDQUNQLEdBQUlGLEVBQUVyTixPQUNKLE1BQU9xTixHQUFFRSxNQUFRekQsRUFBRTdOLEtBQUs4UCxHQUFLc0IsQ0FDL0JBLEdBQUlILE1BRUpHLEdBQUlBLEVBQUVwUixLQUFLOFAsR0FDakIsTUFBT3lCLEdBQ0wsTUFBTzdILEdBQUU2SCxRQU14QnZFLEVBQVd3RSxlQUNaeEUsRUFBV3dFLGFBQWUsZ0JBQzFCeEUsRUFBV3lFLGNBQWdCekUsRUFBVzBFLFVBQVkxRSxFQUFXMkUscUJBQXVCLGVBR3hGLElBQUlaLEdBQVc5SCxJQUNmLFFBQVE0SCxHQUNSLEtBQUssRUFDRCxNQUFPLElBQUs3RCxHQUFXMEUsU0FBVVosRUFDckMsS0FBSyxHQUNELE1BQU8sSUFBSzlELEdBQVd3RSxhQUFjVixFQUN6QyxLQUFLTyxRQUdELE1BREFQLEdBQVVqRSxLQUFPaUUsRUFDVkEsQ0FDWCxTQUNJLE1BQU8sWUFDSCxJQUNJLE1BQU9DLEdBQVN0SyxNQUFNc0ksRUFBSzdJLFdBQzdCLE1BQU0wTCxHQUNKLE1BQU9mLEdBQVFlLE9Bb0QvQjVFLEtBQ0E2QixJQUdBaFAsRUFBT0QsU0FDSG9OLFdBQVdBLEVBQ1g2QixZQUFZQSxJUHdsQlYsU0FBU2hQLEVBQVFELEVBQVNILElRNXVCaEMsU0FBQW9TLEVBQUFDLEdBTUEsWVJndkJDLElBQUlDLEdBQTRCLGtCQUFYQyxTQUFvRCxnQkFBcEJBLFFBQU9DLFNBQXdCLFNBQVU1UixHQUFPLGFBQWNBLElBQVMsU0FBVUEsR0FBTyxNQUFPQSxJQUF5QixrQkFBWDJSLFNBQXlCM1IsRUFBSTZSLGNBQWdCRixRQUFVM1IsSUFBUTJSLE9BQU96TCxVQUFZLGVBQWtCbEcsR1EvdUJ2UVIsR0FBT0QsUUFBVSxTQUFTdVMsR0FzQnRCLFFBQVNDLEdBQU9DLEdBQ1osR0FBSUEsRUFBTSxDQUNOLEdBQUlDLEdBQUtySixJQUNUb0osR0FBSyxTQUFVOUMsR0FDWCtDLEVBQUduRCxRQUFRSSxJQUNaLFNBQVVBLEdBQ1QrQyxFQUFHbEQsT0FBT0csTUE0RXRCLFFBQVNnRCxHQUFnQnJTLEVBQUdxUCxHQUN4QixHQUFtQixrQkFBUnJQLEdBQUUwTixFQUNULElBQ0ksR0FBSTRFLEdBQU90UyxFQUFFME4sRUFBRTVOLEtBQUtxUixPQUFXOUIsRUFDL0JyUCxHQUFFQyxFQUFFZ1AsUUFBUXFELEdBQ2QsTUFBT3RQLEdBQ0xoRCxFQUFFQyxFQUFFaVAsT0FBT2xNLE9BR2ZoRCxHQUFFQyxFQUFFZ1AsUUFBUUksR0FHcEIsUUFBU2tELEdBQWV2UyxFQUFHd1MsR0FDdkIsR0FBbUIsa0JBQVJ4UyxHQUFFeVMsRUFDVCxJQUNJLEdBQUlILEdBQU90UyxFQUFFeVMsRUFBRTNTLEtBQUtxUixPQUFXcUIsRUFDL0J4UyxHQUFFQyxFQUFFZ1AsUUFBUXFELEdBQ2QsTUFBT3RQLEdBQ0xoRCxFQUFFQyxFQUFFaVAsT0FBT2xNLE9BR2ZoRCxHQUFFQyxFQUFFaVAsT0FBT3NELEdBNUhuQlAsRUFBT0EsR0FBMEIsWUFBakIsU0FBT04sRUFBUCxZQUFBRSxFQUFPRixLQUFzQkEsRUFBUWUsVUFBb0Msa0JBQWZkLElBQTZCQSxHQUFpQixTQUFTZSxHQUFHQyxXQUFXRCxFQUFFLEdBQ2pKLElBQUlFLEdBQVEsV0FFUixRQUFTQyxLQUNMLEtBQU9DLEVBQUdsUCxPQUFTbVAsR0FBUyxDQUN4QixJQUFNRCxFQUFHQyxLQUFhLE1BQU10QixJQUM1QnFCLEVBQUdDLEtBQWE3QixPQUNaNkIsSUFBWUMsSUFDWkYsRUFBR0csT0FBTyxFQUFHRCxHQUNiRCxFQUFVLElBUHRCLEdBQUlELE1BQVNDLEVBQVUsRUFBR0MsRUFBYSxJQVl2QyxPQUFPLFVBQVU3RCxHQUNiMkQsRUFBRzdDLEtBQUtkLEdBQ0oyRCxFQUFHbFAsT0FBU21QLEdBQVksR0FDeEJmLEVBQUthLE1BOEhqQixPQS9HQVosR0FBTzdMLFdBQ0g0SSxRQUFTLFNBQVV6TyxHQUNmLEdBQW1CMlEsU0FBZnBJLEtBQUtvSyxNQUFULENBRUEsR0FBSTNTLElBQVV1SSxLQUNWLE1BQU9BLE1BQUttRyxPQUFPLEdBQUlrRSxXQUFVLHdDQUNyQyxJQUFJaEIsR0FBS3JKLElBQ1QsSUFBSXZJLElBQTJCLGtCQUFWQSxJQUF5QyxZQUFqQixTQUFPQSxFQUFQLFlBQUFxUixFQUFPclIsS0FDaEQsSUFDSSxHQUFJNlMsR0FBUSxFQUNSMUcsRUFBT25NLEVBQU1tTSxJQUNqQixJQUFvQixrQkFBVEEsR0FVUCxXQVRBQSxHQUFLN00sS0FBS1UsRUFBTyxTQUFVOFMsR0FDbEJELEtBQ0RqQixFQUFHbkQsUUFBUXFFLElBRWhCLFNBQVVDLEdBQ0pGLEtBQ0RqQixFQUFHbEQsT0FBT3FFLEtBS3hCLE1BQU8vSixHQUdMLFlBRks2SixHQUNEdEssS0FBS21HLE9BQU8xRixJQUl4QlQsS0FBS29LLE1BQVFkLEVBQ2J0SixLQUFLeUcsRUFBSWhQLEVBQ0w0UixFQUFHcFMsR0FDSDZTLEVBQUssV0FDRCxJQUFLLEdBQUlKLEdBQUksRUFBR2UsRUFBSXBCLEVBQUdwUyxFQUFFNkQsT0FBTzRPLEVBQUllLEVBQUdmLElBQ25DSixFQUFnQkQsRUFBR3BTLEVBQUV5UyxHQUFJalMsT0FHekMwTyxPQUFRLFNBQVVzRCxHQUNkLEdBQW1CckIsU0FBZnBJLEtBQUtvSyxNQUFULENBRUFwSyxLQUFLb0ssTUFBUVosRUFDYnhKLEtBQUt5RyxFQUFJZ0QsQ0FDVCxJQUFJaUIsR0FBVTFLLEtBQUsvSSxDQUNmeVQsSUFDQVosRUFBSyxXQUNELElBQUssR0FBSUosR0FBSSxFQUFHZSxFQUFJQyxFQUFRNVAsT0FBTzRPLEVBQUllLEVBQUdmLElBQ3RDRixFQUFla0IsRUFBUWhCLEdBQUlELE9BRzNDN0YsS0FBTSxTQUFVK0csRUFBS0MsR0FDakIsR0FBSTFULEdBQUksR0FBSWlTLEdBQ1IwQixHQUNBbEcsRUFBR2dHLEVBQ0hqQixFQUFHa0IsRUFDSDFULEVBQUdBLEVBRVAsSUFBbUJrUixTQUFmcEksS0FBS29LLE1BQ0RwSyxLQUFLL0ksRUFDTCtJLEtBQUsvSSxFQUFFa1EsS0FBSzBELEdBRVo3SyxLQUFLL0ksR0FBSzRULE9BQ1gsQ0FDSCxHQUFJN0MsR0FBSWhJLEtBQUtvSyxNQUFPVSxFQUFJOUssS0FBS3lHLENBQzdCcUQsR0FBSyxXQUNEOUIsRUFBRTZDLEVBQVFDLEtBR2xCLE1BQU81VCxLQTRCZmlTLEVBQU9qRCxRQUFVLFNBQVU2RSxHQUN2QixHQUFJQSxHQUFRQSxZQUFlNUIsR0FDdkIsTUFBTzRCLEVBQ1gsSUFBSUMsR0FBSSxHQUFJN0IsRUFFWixPQURBNkIsR0FBRTlFLFFBQVE2RSxHQUNIQyxHQUVYN0IsRUFBT2hELE9BQVMsU0FBVWxNLEdBQ3RCLEdBQUlBLEdBQVFBLFlBQWVrUCxHQUN2QixNQUFPbFAsRUFDWCxJQUFJK1EsR0FBSSxHQUFJN0IsRUFFWixPQURBNkIsR0FBRTdFLE9BQU9sTSxHQUNGK1EsR0FHWDdCLEVBQU84QixRQUFVLGVBQ1Y5QixLUjh1Qm1CcFMsS0FBS0osRUFBU0gsRUFBb0IsR0FBSUEsRUFBb0IsR0FBR3FTLGVBSXJGLFNBQVNqUyxFQUFRRCxHQUV0QixZU2g0QkQsU0FBU3VVLEtBQ0wsS0FBTSxJQUFJcE8sT0FBTSxtQ0FFcEIsUUFBU3FPLEtBQ0wsS0FBTSxJQUFJck8sT0FBTSxxQ0FzQnBCLFFBQVNzTyxHQUFXQyxHQUNoQixHQUFJQyxJQUFxQnpCLFdBRXJCLE1BQU9BLFlBQVd3QixFQUFLLEVBRzNCLEtBQUtDLElBQXFCSixJQUFxQkksSUFBcUJ6QixXQUVoRSxNQURBeUIsR0FBbUJ6QixXQUNaQSxXQUFXd0IsRUFBSyxFQUUzQixLQUVJLE1BQU9DLEdBQWlCRCxFQUFLLEdBQy9CLE1BQU01SyxHQUNKLElBRUksTUFBTzZLLEdBQWlCdlUsS0FBSyxLQUFNc1UsRUFBSyxHQUMxQyxNQUFNNUssR0FFSixNQUFPNkssR0FBaUJ2VSxLQUFLaUosS0FBTXFMLEVBQUssS0FNcEQsUUFBU0UsR0FBZ0I1TSxHQUNyQixHQUFJNk0sSUFBdUJDLGFBRXZCLE1BQU9BLGNBQWE5TSxFQUd4QixLQUFLNk0sSUFBdUJMLElBQXdCSyxJQUF1QkMsYUFFdkUsTUFEQUQsR0FBcUJDLGFBQ2RBLGFBQWE5TSxFQUV4QixLQUVJLE1BQU82TSxHQUFtQjdNLEdBQzVCLE1BQU84QixHQUNMLElBRUksTUFBTytLLEdBQW1CelUsS0FBSyxLQUFNNEgsR0FDdkMsTUFBTzhCLEdBR0wsTUFBTytLLEdBQW1CelUsS0FBS2lKLEtBQU1yQixLQVlqRCxRQUFTK00sS0FDQUMsR0FBYUMsSUFHbEJELEdBQVcsRUFDUEMsRUFBYTlRLE9BQ2IrUSxFQUFRRCxFQUFhbk8sT0FBT29PLEdBRTVCQyxHQUFjLEVBRWRELEVBQU0vUSxRQUNOaVIsS0FJUixRQUFTQSxLQUNMLElBQUlKLEVBQUosQ0FHQSxHQUFJSyxHQUFVWixFQUFXTSxFQUN6QkMsSUFBVyxDQUdYLEtBREEsR0FBSU0sR0FBTUosRUFBTS9RLE9BQ1ZtUixHQUFLLENBR1AsSUFGQUwsRUFBZUMsRUFDZkEsT0FDU0MsRUFBYUcsR0FDZEwsR0FDQUEsRUFBYUUsR0FBWUksS0FHakNKLElBQWMsRUFDZEcsRUFBTUosRUFBTS9RLE9BRWhCOFEsRUFBZSxLQUNmRCxHQUFXLEVBQ1hKLEVBQWdCUyxJQWlCcEIsUUFBU0csR0FBS2QsRUFBS2UsR0FDZnBNLEtBQUtxTCxJQUFNQSxFQUNYckwsS0FBS29NLE1BQVFBLEVBWWpCLFFBQVNDLE1BaEtULEdBT0lmLEdBQ0FFLEVBUkE1QyxFQUFVaFMsRUFBT0QsWUFnQnBCLFdBQ0csSUFFUTJVLEVBRHNCLGtCQUFmekIsWUFDWUEsV0FFQXFCLEVBRXpCLE1BQU96SyxHQUNMNkssRUFBbUJKLEVBRXZCLElBRVFNLEVBRHdCLGtCQUFqQkMsY0FDY0EsYUFFQU4sRUFFM0IsTUFBTzFLLEdBQ0wrSyxFQUFxQkwsS0F1RDdCLElBRUlTLEdBRkFDLEtBQ0FGLEdBQVcsRUFFWEcsR0FBYyxDQXlDbEJsRCxHQUFRZSxTQUFXLFNBQVUwQixHQUN6QixHQUFJdkUsR0FBTyxHQUFJM0osT0FBTUYsVUFBVW5DLE9BQVMsRUFDeEMsSUFBSW1DLFVBQVVuQyxPQUFTLEVBQ25CLElBQUssR0FBSUwsR0FBSSxFQUFHQSxFQUFJd0MsVUFBVW5DLE9BQVFMLElBQ2xDcU0sRUFBS3JNLEVBQUksR0FBS3dDLFVBQVV4QyxFQUdoQ29SLEdBQU0xRSxLQUFLLEdBQUlnRixHQUFLZCxFQUFLdkUsSUFDSixJQUFqQitFLEVBQU0vUSxRQUFpQjZRLEdBQ3ZCUCxFQUFXVyxJQVNuQkksRUFBSzdPLFVBQVU0TyxJQUFNLFdBQ2pCbE0sS0FBS3FMLElBQUk3TixNQUFNLEtBQU13QyxLQUFLb00sUUFFOUJ4RCxFQUFRakksTUFBUSxVQUNoQmlJLEVBQVEwRCxTQUFVLEVBQ2xCMUQsRUFBUTJELE9BQ1IzRCxFQUFRNEQsUUFDUjVELEVBQVFxQyxRQUFVLEdBQ2xCckMsRUFBUTZELFlBSVI3RCxFQUFRaE4sR0FBS3lRLEVBQ2J6RCxFQUFROEQsWUFBY0wsRUFDdEJ6RCxFQUFRK0QsS0FBT04sRUFDZnpELEVBQVFnRSxJQUFNUCxFQUNkekQsRUFBUWlFLGVBQWlCUixFQUN6QnpELEVBQVFrRSxtQkFBcUJULEVBQzdCekQsRUFBUW1FLEtBQU9WLEVBRWZ6RCxFQUFRb0UsUUFBVSxTQUFVQyxHQUN4QixLQUFNLElBQUluUSxPQUFNLHFDQUdwQjhMLEVBQVFzRSxJQUFNLFdBQWMsTUFBTyxLQUNuQ3RFLEVBQVF1RSxNQUFRLFNBQVVDLEdBQ3RCLEtBQU0sSUFBSXRRLE9BQU0sbUNBRXBCOEwsRUFBUXlFLE1BQVEsV0FBYSxNQUFPLEtUZzVCOUIsU0FBU3pXLEVBQVFELEVBQVNILEdBRS9CLFlVcGpDRCxTQUFTOFcsR0FBUXpXLEVBQUkwVyxHQUNuQnZOLEtBQUt3TixJQUFNM1csRUFDWG1KLEtBQUt5TixTQUFXRixFQW5CbEIsR0FBSS9QLEdBQVFILFNBQVNDLFVBQVVFLEtBSS9CN0csR0FBUWtULFdBQWEsV0FDbkIsTUFBTyxJQUFJeUQsR0FBUTlQLEVBQU16RyxLQUFLOFMsV0FBWXZRLE9BQVEyRCxXQUFZd08sZUFFaEU5VSxFQUFRK1csWUFBYyxXQUNwQixNQUFPLElBQUlKLEdBQVE5UCxFQUFNekcsS0FBSzJXLFlBQWFwVSxPQUFRMkQsV0FBWTBRLGdCQUVqRWhYLEVBQVE4VSxhQUNSOVUsRUFBUWdYLGNBQWdCLFNBQVMzQixHQUMzQkEsR0FDRkEsRUFBUTRCLFNBUVpOLEVBQVFoUSxVQUFVdVEsTUFBUVAsRUFBUWhRLFVBQVV3USxJQUFNLGFBQ2xEUixFQUFRaFEsVUFBVXNRLE1BQVEsV0FDeEI1TixLQUFLeU4sU0FBUzFXLEtBQUt1QyxPQUFRMEcsS0FBS3dOLE1BSWxDN1csRUFBUW9YLE9BQVMsU0FBUzdLLEVBQU04SyxHQUM5QnZDLGFBQWF2SSxFQUFLK0ssZ0JBQ2xCL0ssRUFBS2dMLGFBQWVGLEdBR3RCclgsRUFBUXdYLFNBQVcsU0FBU2pMLEdBQzFCdUksYUFBYXZJLEVBQUsrSyxnQkFDbEIvSyxFQUFLZ0wsY0FBZ0IsR0FHdkJ2WCxFQUFReVgsYUFBZXpYLEVBQVEwWCxPQUFTLFNBQVNuTCxHQUMvQ3VJLGFBQWF2SSxFQUFLK0ssZUFFbEIsSUFBSUQsR0FBUTlLLEVBQUtnTCxZQUNiRixJQUFTLElBQ1g5SyxFQUFLK0ssZUFBaUJwRSxXQUFXLFdBQzNCM0csRUFBS29MLFlBQ1BwTCxFQUFLb0wsY0FDTk4sS0FLUHhYLEVBQVEsSUFDUkcsRUFBUWtTLGFBQWVBLGFBQ3ZCbFMsRUFBUTRYLGVBQWlCQSxnQlZ5a0NuQixTQUFTM1gsRUFBUUQsRUFBU0gsSUFFSCxTQUFTZ1ksRUFBUTVGLEdBQVUsY1cvbkN2RCxTQUFVNEYsRUFBUXBHLEdBYWYsUUFBU1MsR0FBYXBRLEdBRUksa0JBQWJBLEtBQ1RBLEVBQVcsR0FBSTRFLFVBQVMsR0FBSzVFLEdBSS9CLEtBQUssR0FERHFPLEdBQU8sR0FBSTNKLE9BQU1GLFVBQVVuQyxPQUFTLEdBQy9CTCxFQUFJLEVBQUdBLEVBQUlxTSxFQUFLaE0sT0FBUUwsSUFDN0JxTSxFQUFLck0sR0FBS3dDLFVBQVV4QyxFQUFJLEVBRzVCLElBQUlnVSxJQUFTaFcsU0FBVUEsRUFBVXFPLEtBQU1BLEVBR3ZDLE9BRkE0SCxHQUFjQyxHQUFjRixFQUM1QkcsRUFBa0JELEdBQ1hBLElBR1QsUUFBU0osR0FBZU0sU0FDYkgsR0FBY0csR0FHekIsUUFBUzNDLEdBQUl1QyxHQUNULEdBQUloVyxHQUFXZ1csRUFBS2hXLFNBQ2hCcU8sRUFBTzJILEVBQUszSCxJQUNoQixRQUFRQSxFQUFLaE0sUUFDYixJQUFLLEdBQ0RyQyxHQUNBLE1BQ0osS0FBSyxHQUNEQSxFQUFTcU8sRUFBSyxHQUNkLE1BQ0osS0FBSyxHQUNEck8sRUFBU3FPLEVBQUssR0FBSUEsRUFBSyxHQUN2QixNQUNKLEtBQUssR0FDRHJPLEVBQVNxTyxFQUFLLEdBQUlBLEVBQUssR0FBSUEsRUFBSyxHQUNoQyxNQUNKLFNBQ0lyTyxFQUFTK0UsTUFBTTRLLEVBQVd0QixJQUtsQyxRQUFTZ0ksR0FBYUQsR0FHbEIsR0FBSUUsRUFHQWxGLFdBQVdpRixFQUFjLEVBQUdELE9BQ3pCLENBQ0gsR0FBSUosR0FBT0MsRUFBY0csRUFDekIsSUFBSUosRUFBTSxDQUNOTSxHQUF3QixDQUN4QixLQUNJN0MsRUFBSXVDLEdBRFIsUUFHSUYsRUFBZU0sR0FDZkUsR0FBd0IsS0FwRXhDLElBQUlQLEVBQU8zRixhQUFYLENBSUEsR0FJSStGLEdBSkFELEVBQWEsRUFDYkQsS0FDQUssR0FBd0IsRUFDeEJDLEVBQU1SLEVBQU9TLFNBb0piQyxFQUFXM1gsT0FBTzRYLGdCQUFrQjVYLE9BQU80WCxlQUFlWCxFQUM5RFUsR0FBV0EsR0FBWUEsRUFBU3JGLFdBQWFxRixFQUFXVixFQUdmLHdCQUFsQzVILFNBQVM3UCxLQUFLeVgsRUFBTzVGLFNBckY1QixXQUNJZ0csRUFBb0IsU0FBU0MsR0FDekJqRyxFQUFRZSxTQUFTLFdBQWNtRixFQUFhRCxTQUlwRCxXQUdJLEdBQUlMLEVBQU9ZLGNBQWdCWixFQUFPYSxjQUFlLENBQzdDLEdBQUlDLElBQTRCLEVBQzVCQyxFQUFlZixFQUFPZ0IsU0FNMUIsT0FMQWhCLEdBQU9nQixVQUFZLFdBQ2ZGLEdBQTRCLEdBRWhDZCxFQUFPWSxZQUFZLEdBQUksS0FDdkJaLEVBQU9nQixVQUFZRCxFQUNaRCxNQUlmLFdBS0ksR0FBSUcsR0FBZ0IsZ0JBQWtCQyxLQUFLQyxTQUFXLElBQ2xEQyxFQUFrQixTQUFTN04sR0FDdkJBLEVBQU1qRSxTQUFXMFEsR0FDSyxnQkFBZnpNLEdBQU1wSixNQUN5QixJQUF0Q29KLEVBQU1wSixLQUFLa1gsUUFBUUosSUFDbkJYLEdBQWMvTSxFQUFNcEosS0FBSzJPLE1BQU1tSSxFQUFjM1UsU0FJakQwVCxHQUFPaE8saUJBQ1BnTyxFQUFPaE8saUJBQWlCLFVBQVdvUCxHQUFpQixHQUVwRHBCLEVBQU9zQixZQUFZLFlBQWFGLEdBR3BDaEIsRUFBb0IsU0FBU0MsR0FDekJMLEVBQU9ZLFlBQVlLLEVBQWdCWixFQUFRLFNBbUR4Q0wsRUFBT3VCLGVBL0NsQixXQUNJLEdBQUlDLEdBQVUsR0FBSUQsZUFDbEJDLEdBQVFDLE1BQU1ULFVBQVksU0FBU3pOLEdBRS9CK00sRUFEYS9NLEVBQU1wSixPQUl2QmlXLEVBQW9CLFNBQVNDLEdBQ3pCbUIsRUFBUUUsTUFBTWQsWUFBWVAsT0EyQ3ZCRyxHQUFPLHNCQUF3QkEsR0FBSXRPLGNBQWMsVUF2QzVELFdBQ0ksR0FBSXlQLEdBQU9uQixFQUFJb0IsZUFDZnhCLEdBQW9CLFNBQVNDLEdBR3pCLEdBQUl3QixHQUFTckIsRUFBSXRPLGNBQWMsU0FDL0IyUCxHQUFPelcsbUJBQXFCLFdBQ3hCa1YsRUFBYUQsR0FDYndCLEVBQU96VyxtQkFBcUIsS0FDNUJ1VyxFQUFLRyxZQUFZRCxHQUNqQkEsRUFBUyxNQUViRixFQUFLaFAsWUFBWWtQLE9BSXpCLFdBQ0l6QixFQUFvQixTQUFTQyxHQUN6QmhGLFdBQVdpRixFQUFjLEVBQUdELE9BOEJwQ0ssRUFBU3JHLGFBQWVBLEVBQ3hCcUcsRUFBU1gsZUFBaUJBLElBQ1osbUJBQVR6SSxNQUF5QyxTQUFYMEksRUFBUHBHLE9BQXVDb0csRUFBUzFJLFFYOG5DbEQvTyxLQUFLSixFQUFVLFdBQWEsTUFBT3FKLFNBQVl4SixFQUFvQixLQUkzRixTQUFTSSxFQUFRRCxHQUV0QixZWTd6Q0RDLEdBQU9ELFFBQVUsV0FDYixRQUFTNFosR0FBV25aLEdBQ2hCLE1BQU9BLElBQVFBLFlBQWVHLFNBQTZCLGtCQUFYSCxHQUFJd00sS0FHeEQsUUFBUzRNLEdBQVd0WixFQUFFb1IsRUFBRW1JLEdBQ3BCLElBRUksR0FBSTdMLEdBQUk2TCxFQUFNQSxFQUFJbkksR0FBR0EsQ0FFckIsSUFBSXBSLElBQUkwTixFQUNKLE1BQU8xTixHQUFFaVAsT0FBTyxHQUFJa0UsV0FBVSwyQkFFOUJrRyxHQUFXM0wsR0FFWEEsRUFBRWhCLEtBQUssU0FBU2UsR0FDWjZMLEVBQVd0WixFQUFFeU4sSUFDZixTQUFTbEUsR0FDUHZKLEVBQUVpUCxPQUFPMUYsS0FHYnZKLEVBQUVnUCxRQUFRdEIsR0FFaEIsTUFBTytELEdBRUx6UixFQUFFaVAsT0FBT3dDLElBSWpCLFFBQVMrSCxNQU1ULFFBQVNDLEdBQVdsSyxJQUNwQixRQUFTbUssR0FBVUMsRUFBSUMsR0FDbkI5USxLQUFLa0csUUFBVTJLLEVBQ2Y3USxLQUFLbUcsT0FBUzJLLEVBR2xCLFFBQVNsTixHQUFLaU4sRUFBSUMsR0FDZCxHQUFJQyxHQUFRLEdBQUlMLEVBQ2hCLEtBQ0kxUSxLQUFLZ1IsVUFBVSxTQUFTdlosR0FDcEIsTUFBTzhZLEdBQVc5WSxHQUFTQSxFQUFNbU0sS0FBS2lOLEVBQUlDLEdBQU9OLEVBQVdPLEVBQU10WixFQUFNb1osSUFDMUUsU0FBU2xJLEdBQ1A2SCxFQUFXTyxFQUFNcEksRUFBR21JLEtBRTFCLE1BQU9uSSxHQUNMNkgsRUFBV08sRUFBTXBJLEVBQUdtSSxHQUV4QixNQUFPQyxHQUdYLFFBQVN0SSxHQUFTWCxHQUNkOUgsS0FBS2dSLFVBQVlsSixFQUNqQjlILEtBQUs0RCxLQUFPQSxFQVNoQixNQXBDQThNLEdBQVFwVCxXQUNKNEksUUFBUXlLLEVBQ1J4SyxPQUFPd0ssRUFDUC9NLEtBQUtnTixHQTJCVG5JLEVBQVN2QyxRQUFVLFNBQVNPLEdBQ3hCLE1BQU9nQyxHQUFTOEgsV0FBVzlKLEdBQUtBLEdBQUs3QyxLQUFLLFNBQVNzQyxHQUFTLE1BQU9BLEdBQVFPLE1BRy9FZ0MsRUFBUzhILFdBQWFBLEVBRWY5SCxJWnMwQ0wsU0FBUzdSLEVBQVFELElBRU0sU0FBUzZYLEdBQVMsWWF4d0MvQyxTQUFTeUMsR0FBUzdILEVBQU04SCxFQUFNaFUsR0F1QjVCLFFBQVNpVSxHQUFXQyxHQUNsQixHQUFJdEssR0FBT3VLLEVBQ1BDLEVBQVVDLENBS2QsT0FIQUYsR0FBV0UsRUFBV25KLE9BQ3RCb0osRUFBaUJKLEVBQ2pCblEsRUFBU21JLEVBQUs1TCxNQUFNOFQsRUFBU3hLLEdBSS9CLFFBQVMySyxHQUFZTCxHQU1uQixNQUpBSSxHQUFpQkosRUFFakJNLEVBQVU3SCxXQUFXOEgsRUFBY1QsR0FFNUJVLEVBQVVULEVBQVdDLEdBQVFuUSxFQUd0QyxRQUFTNFEsR0FBY1QsR0FDckIsR0FBSVUsR0FBb0JWLEVBQU9XLEVBQzNCQyxFQUFzQlosRUFBT0ksRUFDN0J2USxFQUFTaVEsRUFBT1ksQ0FFcEIsT0FBT0csR0FBU0MsRUFBVWpSLEVBQVFrUixFQUFVSCxHQUF1Qi9RLEVBR3JFLFFBQVNtUixHQUFhaEIsR0FDcEIsR0FBSVUsR0FBb0JWLEVBQU9XLEVBQzNCQyxFQUFzQlosRUFBT0ksQ0FLakMsT0FBeUJwSixVQUFqQjJKLEdBQStCRCxHQUFxQlosR0FDekRZLEVBQW9CLEdBQU9HLEdBQVVELEdBQXVCRyxFQUdqRSxRQUFTUixLQUNQLEdBQUlQLEdBQU9pQixHQUNYLElBQUlELEVBQWFoQixHQUNmLE1BQU9rQixHQUFhbEIsRUFHdEJNLEdBQVU3SCxXQUFXOEgsRUFBY0UsRUFBY1QsSUFHbkQsUUFBU2tCLEdBQWFsQixHQUtwQixNQUpBTSxHQUFVdEosT0FJTm1LLEdBQVlsQixFQUNQRixFQUFXQyxJQUVwQkMsRUFBV0UsRUFBV25KLE9BQ2ZuSCxHQUdULFFBQVN1UixLQUNTcEssU0FBWnNKLEdBQ0ZqRyxhQUFhaUcsR0FFZkYsRUFBaUIsRUFDakJILEVBQVdVLEVBQWVSLEVBQVdHLEVBQVV0SixPQUdqRCxRQUFTcUssS0FDUCxNQUFtQnJLLFVBQVpzSixFQUF3QnpRLEVBQVNxUixFQUFhRCxLQUd2RCxRQUFTSyxLQUNQLEdBQUl0QixHQUFPaUIsSUFDUE0sRUFBYVAsRUFBYWhCLEVBTTlCLElBSkFDLEVBQVdwVSxVQUNYc1UsRUFBV3ZSLEtBQ1grUixFQUFlWCxFQUVYdUIsRUFBWSxDQUNkLEdBQWdCdkssU0FBWnNKLEVBQ0YsTUFBT0QsR0FBWU0sRUFFckIsSUFBSUUsRUFHRixNQURBUCxHQUFVN0gsV0FBVzhILEVBQWNULEdBQzVCQyxFQUFXWSxHQU10QixNQUhnQjNKLFVBQVpzSixJQUNGQSxFQUFVN0gsV0FBVzhILEVBQWNULElBRTlCalEsRUFsSFQsR0FBSW9RLEdBQ0FFLEVBQ0FZLEVBQ0FsUixFQUNBeVEsRUFDQUssRUFDQVAsRUFBaUIsRUFDakJJLEdBQVUsRUFDVkssR0FBUyxFQUNUTSxHQUFXLENBRWYsSUFBbUIsa0JBQVJuSixHQUNULEtBQU0sSUFBSWlCLFdBQVV1SSxFQTBHdEIsT0F4R0ExQixHQUFPMkIsRUFBUzNCLElBQVMsRUFDckI0QixFQUFTNVYsS0FDWDBVLElBQVkxVSxFQUFRMFUsUUFDcEJLLEVBQVMsV0FBYS9VLEdBQ3RCaVYsRUFBVUYsRUFBU2MsRUFBVUYsRUFBUzNWLEVBQVFpVixVQUFZLEVBQUdqQixHQUFRaUIsRUFDckVJLEVBQVcsWUFBY3JWLEtBQVlBLEVBQVFxVixTQUFXQSxHQWlHMURHLEVBQVVGLE9BQVNBLEVBQ25CRSxFQUFVRCxNQUFRQSxFQUNYQyxFQTRCVCxRQUFTSSxHQUFTcmIsR0FDaEIsR0FBSXViLEdBQUEsU0FBY3ZiLEVBQWQsWUFBQXFSLEVBQWNyUixFQUNsQixTQUFTQSxJQUFrQixVQUFSdWIsR0FBNEIsWUFBUkEsR0EyQnpDLFFBQVNDLEdBQWF4YixHQUNwQixRQUFTQSxHQUF5QixXQUFoQixTQUFPQSxFQUFQLFlBQUFxUixFQUFPclIsSUFvQjNCLFFBQVN5YixHQUFTemIsR0FDaEIsTUFBdUIsV0FBaEIsU0FBT0EsRUFBUCxZQUFBcVIsRUFBT3JSLEtBQ1h3YixFQUFheGIsSUFBVTBiLEVBQWVwYyxLQUFLVSxJQUFVMmIsRUEwQjFELFFBQVNQLEdBQVNwYixHQUNoQixHQUFvQixnQkFBVEEsR0FDVCxNQUFPQSxFQUVULElBQUl5YixFQUFTemIsR0FDWCxNQUFPNGIsRUFFVCxJQUFJUCxFQUFTcmIsR0FBUSxDQUNuQixHQUFJNmIsR0FBZ0Msa0JBQWpCN2IsR0FBTThiLFFBQXdCOWIsRUFBTThiLFVBQVk5YixDQUNuRUEsR0FBUXFiLEVBQVNRLEdBQVVBLEVBQVEsR0FBTUEsRUFFM0MsR0FBb0IsZ0JBQVQ3YixHQUNULE1BQWlCLEtBQVZBLEVBQWNBLEdBQVNBLENBRWhDQSxHQUFRQSxFQUFNZ1EsUUFBUStMLEVBQVEsR0FDOUIsSUFBSUMsR0FBV0MsRUFBV0MsS0FBS2xjLEVBQy9CLE9BQVFnYyxJQUFZRyxFQUFVRCxLQUFLbGMsR0FDL0JvYyxFQUFhcGMsRUFBTTZQLE1BQU0sR0FBSW1NLEVBQVcsRUFBSSxHQUMzQ0ssRUFBV0gsS0FBS2xjLEdBQVM0YixHQUFPNWIsRWJ1aEN0QyxHQUFJcVIsR0FBNEIsa0JBQVhDLFNBQW9ELGdCQUFwQkEsUUFBT0MsU0FBd0IsU0FBVTVSLEdBQU8sYUFBY0EsSUFBUyxTQUFVQSxHQUFPLE1BQU9BLElBQXlCLGtCQUFYMlIsU0FBeUIzUixFQUFJNlIsY0FBZ0JGLFFBQVUzUixJQUFRMlIsT0FBT3pMLFVBQVksZUFBa0JsRyxJYWw0Q25Rd2IsRUFBa0Isc0JBR2xCUyxFQUFNLElBR05ELEVBQVksa0JBR1pJLEVBQVMsYUFHVE0sRUFBYSxxQkFHYkosRUFBYSxhQUdiRSxFQUFZLGNBR1pDLEVBQWVFLFNBR2ZDLEVBQThCLFdBQWpCLFNBQU94RixFQUFQLFlBQUExRixFQUFPMEYsS0FBc0JBLEdBQVVBLEVBQU9qWCxTQUFXQSxRQUFVaVgsRUFHaEZ5RixFQUEwQixXQUFmLG1CQUFPbk8sTUFBUCxZQUFBZ0QsRUFBT2hELFFBQW9CQSxNQUFRQSxLQUFLdk8sU0FBV0EsUUFBVXVPLEtBR3hFcEUsRUFBT3NTLEdBQWNDLEdBQVk1VyxTQUFTLGlCQUcxQzZXLEVBQWMzYyxPQUFPK0YsVUFPckI2VixFQUFpQmUsRUFBWXROLFNBRzdCbU0sRUFBWXJELEtBQUs5TSxJQUNqQnNQLEVBQVl4QyxLQUFLeUUsSUFrQmpCOUIsRUFBTSxXQUNSLE1BQU8zUSxHQUFLMFMsS0FBSy9CLE1BK1NuQnpiLEdBQU9ELFFBQVVzYSxJYjI0Q2FsYSxLQUFLSixFQUFVLFdBQWEsTUFBT3FKLFdBSTNELFNBQVNwSixFQUFRRCxFQUFTSCxHY3Z3RGhDLFlBa0JBLFNBQVM2ZCxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJbEssV0FBVSxxQ0FoQmhIOVMsT0FBT0MsZUFBZWIsRUFBUyxjQUM3QmMsT0FBTyxHQUdULElBQUlpRyxHQUFpQmxILEVBQVEsR0FJekJnZSxHQU1KLFNBQWdDcGQsR0FBY0EsR0FBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsSUFSMUNzRyxHQUUxQixXQUFjLFFBQVMrVyxHQUFpQjVXLEVBQVE2VyxHQUFTLElBQUssR0FBSWphLEdBQUksRUFBR0EsRUFBSWlhLEVBQU01WixPQUFRTCxJQUFLLENBQUUsR0FBSWthLEdBQWFELEVBQU1qYSxFQUFJa2EsR0FBV3hZLFdBQWF3WSxFQUFXeFksYUFBYyxFQUFPd1ksRUFBVzVPLGNBQWUsRUFBVSxTQUFXNE8sS0FBWUEsRUFBVzNPLFVBQVcsR0FBTXpPLE9BQU9DLGVBQWVxRyxFQUFROFcsRUFBVzVXLElBQUs0VyxJQUFpQixNQUFPLFVBQVVKLEVBQWFLLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZSCxFQUFpQkYsRUFBWWpYLFVBQVdzWCxHQUFpQkMsR0FBYUosRUFBaUJGLEVBQWFNLEdBQXFCTixPQUU1aEJsVyxFQUFZN0gsRUFBUSxJQUVwQjhILEVBQWE5SCxFQUFRLElBTXJCc2UsRUFBZ0IsV0FDbEIsUUFBU0EsS0FDUCxHQUFJL1UsR0FBUUMsS0FFUmdCLEVBQU8vRCxVQUFVbkMsT0FBUyxHQUFzQnNOLFNBQWpCbkwsVUFBVSxHQUFtQkEsVUFBVSxNQUN0RThYLEVBQW9CL1QsRUFBS1osYUFDekJBLEVBQXFDZ0ksU0FBdEIyTSxFQUFrQyxhQUFpQkEsRUFDbEVDLEVBQW1CaFUsRUFBSzdCLFlBQ3hCQSxFQUFtQ2lKLFNBQXJCNE0sRUFBaUMsU0FBV0EsRUFDMURDLEVBQWtCalUsRUFBS3pCLFdBQ3ZCQSxFQUFpQzZJLFNBQXBCNk0sS0FBcUNBLENBRXREWixHQUFnQnJVLEtBQU04VSxFQUV0QixJQUFJL1ksSUFBWSxFQUFJc0MsRUFBVXFDLGVBQWUsT0FBUSxZQUFhbkIsRUFBV3hELFdBQVdtWixLQUFLLE1BQ3pGeFYsR0FBTyxFQUFJckIsRUFBVXFDLGVBQWUsUUFBUyxHQUFJbkIsRUFBV0csTUFBTXdWLEtBQUssS0FBTW5aLEdBQzdFNEQsR0FBUSxFQUFJdEIsRUFBVXFDLGVBQWUsU0FBVSxRQUFTbkIsRUFBV0ksT0FBT3VWLEtBQUssS0FBTXhWLEVBRXpGQyxHQUFNcVQsS0FBTyxPQUNiclQsRUFBTXdWLFlBQWNoVyxFQUVwQlEsRUFBTWEsaUJBQWlCLFFBQVMsU0FBVUMsR0FDeENWLEVBQU1xVixRQUFRM1UsS0FDYixHQUNIZCxFQUFNYSxpQkFBaUIsUUFBUyxTQUFVQyxHQUN4Q1YsRUFBTXNWLFFBQVE1VSxLQUNiLEdBQ0hkLEVBQU1hLGlCQUFpQixXQUFZLFNBQVVDLEdBQzNDVixFQUFNdVYsV0FBVzdVLEtBQ2hCLEdBQ0hkLEVBQU1hLGlCQUFpQixRQUFTLFNBQVVDLEdBQ3hDVixFQUFNd1YsUUFBUTlVLEtBQ2IsR0FDSGQsRUFBTWEsaUJBQWlCLE9BQVEsU0FBVUMsR0FDdkNWLEVBQU15VixPQUFPL1UsS0FDWixHQUVIVCxLQUFLbEUsVUFBYUMsVUFBV0EsRUFBVzJELEtBQU1BLEVBQU1DLE1BQU9BLEdBQzNESyxLQUFLSSxhQUFlQSxFQThFdEIsTUEzRUFvVSxHQUFhTSxJQUNYL1csSUFBSyxVQUNMdEcsTUFBTyxZQUNMLEVBQUk0RyxFQUFVZ0UsY0FBY3JDLEtBQUtsRSxTQUFTNEQsS0FBTSxhQUdsRDNCLElBQUssU0FDTHRHLE1BQU8sWUFDTCxFQUFJNEcsRUFBVStELGlCQUFpQnBDLEtBQUtsRSxTQUFTNEQsS0FBTSxhQUdyRDNCLElBQUssV0FDTHRHLE1BQU8sU0FBa0JzSyxHQUN2QixNQUFPLElBQUl1QixTQUFRLFNBQVVDLEVBQVNDLEdBQ3BDLEdBQUlpUyxHQUFXOVYsRUFBTzVELENBVXRCLE9BUkFnRyxHQUFNQyxpQkFDTkQsRUFBTTlGLGtCQUVOd1osRUFBWXpWLEtBQUtsRSxTQUFVNkQsRUFBUThWLEVBQVU5VixNQUFPNUQsRUFBWTBaLEVBQVUxWixXQUUxRSxFQUFJc0MsRUFBVStELGlCQUFpQnJHLEVBQVcsVUFDMUMsRUFBSXNDLEVBQVVnRSxjQUFjdEcsRUFBVyxXQUVoQ2lFLEtBQUtJLGNBQWVDLE1BQU9WLEVBQU1sSSxRQUFTbU0sS0FBSyxTQUFVQyxHQUU5RCxPQURBLEVBQUl4RixFQUFVK0QsaUJBQWlCckcsRUFBVyxXQUNuQ3dILEtBQ1BRLFdBQVcvRCxLQUFNd0QsR0FBU0EsSUFDNUJPLFdBQVcvRCxVQUdmakMsSUFBSyxVQUNMdEcsTUFBTyxXQUNMLEdBQUlzRSxHQUFZaUUsS0FBS2xFLFNBQVNDLFNBRzFCaUUsTUFBSzBWLFlBQ1AsRUFBSXJYLEVBQVUrRCxpQkFBaUJyRyxFQUFXLFNBQzFDaUUsS0FBSzBWLFVBQVcsTUFJcEIzWCxJQUFLLFVBQ0x0RyxNQUFPLFNBQWlCc0ssR0FDdEIsR0FBSTRULEdBQWEzVixLQUFLbEUsU0FDbEJDLEVBQVk0WixFQUFXNVosVUFDdkI0RCxFQUFRZ1csRUFBV2hXLEtBR25Cb0MsR0FBTVcsVUFBWXBFLEVBQVc4RSxjQUMvQixFQUFJL0UsRUFBVStELGlCQUFpQnJHLEVBQVcsWUFDMUMsRUFBSXNDLEVBQVUrRCxpQkFBaUJyRyxFQUFXLFVBRTFDNEQsRUFBTWxJLE1BQVEsR0FFZHdYLFNBQVMyRyxLQUFLdFQsUUFDZDJNLFNBQVMyRyxLQUFLQyxXQUlsQjlYLElBQUssYUFDTHRHLE1BQU8sU0FBb0JzSyxHQUNyQkEsRUFBTVcsVUFBWXBFLEVBQVd3WCxXQUMvQjlWLEtBQUtNLFNBQVN5QixNQUlsQmhFLElBQUssV0FDTHRHLE1BQU8sU0FBa0I0SSxHQUNYTCxLQUFLbEUsU0FBUzZELE1BRXBCbEksTUFBUTRJLE1BSVh5VSxJQUdUbmUsR0FBUVcsUUFBVXdkLEdkeXhEWixTQUFTbGUsRUFBUUQsR2VwNkR2QixZQUVBWSxRQUFPQyxlQUFlYixFQUFTLGNBQzdCYyxPQUFPLEdBR1QsSUFBSWlKLEdBQWdCL0osRUFBUStKLGNBQWdCLFNBQXVCcVYsR0FDakUsR0FBSXhXLEdBQWF0QyxVQUFVbkMsT0FBUyxHQUFzQnNOLFNBQWpCbkwsVUFBVSxHQUFtQkEsVUFBVSxHQUFLLEdBQ2pGK1ksRUFBUy9ZLFVBQVVuQyxPQUFTLEdBQXNCc04sU0FBakJuTCxVQUFVLEdBQW1CQSxVQUFVLEdBQUssS0FFN0VnWixFQUFLaEgsU0FBU3ZPLGNBQWNxVixFQU9oQyxPQU5BRSxHQUFHQyxVQUFZM1csRUFFWHlXLEdBQ0ZBLEVBQU83VSxZQUFZOFUsR0FHZEEsRUFHaUJ0ZixHQUFRd2Ysb0JBQXNCLFNBQTZCbGIsRUFBS21iLEdBQ3hGLEdBQUkvRixHQUFTM1AsRUFBYyxTQUFVLEtBQU11TyxTQUFTMkcsS0FHcEQsT0FGQXZGLEdBQU9nRyxhQUFhLE9BQVEsbUJBRXJCLEdBQUkvUyxTQUFRLFNBQVU0QyxHQUMzQjVNLE9BQU84YyxHQUFNLFNBQVVFLEdBQ3JCakcsRUFBT3ZPLGVBQ0F4SSxRQUFPOGMsR0FDZGxRLEVBQVFvUSxJQUdWakcsRUFBT2dHLGFBQWEsTUFBT3BiLE1BSVp0RSxFQUFRMEwsYUFBZSxTQUFzQjBULEVBQVNHLEdBQ25FSCxJQUFZQSxFQUFRN1QsVUFBVUMsU0FBUytULElBQ3pDSCxFQUFRN1QsVUFBVXFVLElBQUlMLElBSUp2ZixFQUFReUwsZ0JBQWtCLFNBQXlCMlQsRUFBU0csR0FDNUVILEdBQVdBLEVBQVE3VCxVQUFVQyxTQUFTK1QsSUFDeENILEVBQVE3VCxVQUFVSixPQUFPb1UsS2Y0NkR2QixTQUFTdGYsRUFBUUQsR2dCdjlEdkIsWUFFQVksUUFBT0MsZUFBZWIsRUFBUyxjQUM3QmMsT0FBTyxHQUVULElBQUlxZSxHQUFZbmYsRUFBUW1mLFVBQVksR0FDaEMxUyxFQUFhek0sRUFBUXlNLFdBQWEsR0FDbENiLEVBQWlCNUwsRUFBUTRMLGVBQWlCLEdBQzFDQyxFQUFlN0wsRUFBUTZMLGFBQWUsR0FDdENnVSxFQUFpQjdmLEVBQVE2ZixlQUFpQixHQUMxQ0MsRUFBa0I5ZixFQUFROGYsZ0JBQWtCLEVBRTdCOWYsR0FBUStNLGNBQWdCb1MsRUFBVzFTLEVBQVliLEVBQWdCQyxFQUFjZ1UsRUFBZ0JDLEloQjY5RDFHLFNBQVM3ZixFQUFRRCxFQUFTSCxHaUJ6K0RoQyxZQVVBLFNBQVM2ZCxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJbEssV0FBVSxxQ0FSaEg5UyxPQUFPQyxlQUFlYixFQUFTLGNBQzdCYyxPQUFPLEdBR1QsSUFBSStjLEdBQWUsV0FBYyxRQUFTQyxHQUFpQjVXLEVBQVE2VyxHQUFTLElBQUssR0FBSWphLEdBQUksRUFBR0EsRUFBSWlhLEVBQU01WixPQUFRTCxJQUFLLENBQUUsR0FBSWthLEdBQWFELEVBQU1qYSxFQUFJa2EsR0FBV3hZLFdBQWF3WSxFQUFXeFksYUFBYyxFQUFPd1ksRUFBVzVPLGNBQWUsRUFBVSxTQUFXNE8sS0FBWUEsRUFBVzNPLFVBQVcsR0FBTXpPLE9BQU9DLGVBQWVxRyxFQUFROFcsRUFBVzVXLElBQUs0VyxJQUFpQixNQUFPLFVBQVVKLEVBQWFLLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZSCxFQUFpQkYsRUFBWWpYLFVBQVdzWCxHQUFpQkMsR0FBYUosRUFBaUJGLEVBQWFNLEdBQXFCTixNQUU1aEJsVyxFQUFZN0gsRUFBUSxJQUlwQmtnQixFQUFLLFdBQ1AsSUFBSyxHQUFJMVosR0FBT0MsVUFBVW5DLE9BQVE2YixFQUFheFosTUFBTUgsR0FBT0ksRUFBTyxFQUFHQSxFQUFPSixFQUFNSSxJQUNqRnVaLEVBQVd2WixHQUFRSCxVQUFVRyxFQUcvQixPQUFPdVosR0FBV3pCLEtBQUssS0FBSzBCLFFBRzFCQyxFQUFhLFdBQ2YsUUFBU0EsS0FDUCxHQUFJN1YsR0FBTy9ELFVBQVVuQyxPQUFTLEdBQXNCc04sU0FBakJuTCxVQUFVLEdBQW1CQSxVQUFVLE1BQ3RFNlosRUFBbUI5VixFQUFLRCxZQUN4QkEsRUFBbUNxSCxTQUFyQjBPLEVBQWlDLGFBQWlCQSxFQUNoRTdCLEVBQWtCalUsRUFBS3pCLFdBQ3ZCQSxFQUFpQzZJLFNBQXBCNk0sS0FBcUNBLENBRXREWixHQUFnQnJVLEtBQU02VyxHQUV0QkUsRUFBaUJoZ0IsS0FBS2lKLE1BRXRCQSxLQUFLMFUsT0FBVTNULFlBQWFBLEVBQWF4QixXQUFZQSxHQUNyRFMsS0FBS2dELFVBQVksQ0FFakIsSUFBSWpILElBQVksRUFBSXNDLEVBQVVxQyxlQUFlLE1BQU9nVyxFQUFHLFVBQVduWCxFQUFXeEQsWUFDekVpYixHQUFhLEVBQUkzWSxFQUFVcUMsZUFBZSxNQUFPZ1csRUFBR25YLEVBQVcyRCxNQUVuRW5ILEdBQVV5RSxpQkFBaUIsUUFBU1IsS0FBS2EsU0FBUyxHQUNsRGIsS0FBS2xFLFVBQWFDLFVBQVdBLEVBQVdpYixXQUFZQSxHQTREdEQsTUF6REF4QyxHQUFhcUMsSUFDWDlZLElBQUssU0FDTHRHLE1BQU8sV0FDTCxHQUFJZ00sR0FBVXhHLFVBQVVuQyxPQUFTLEdBQXNCc04sU0FBakJuTCxVQUFVLEdBQW1CQSxVQUFVLE1BQ3pFd1ksRUFBWXpWLEtBQUtsRSxTQUNqQkMsRUFBWTBaLEVBQVUxWixVQUN0QmliLEVBQWF2QixFQUFVdUIsVUFFM0JoWCxNQUFLcUQsUUFFTEksRUFBUTRELFFBQVEsU0FBVXBHLEVBQVFnQyxHQUNoQyxHQUFJZ1UsR0FBUUQsRUFBV0UsV0FBVSxFQUNqQ0QsR0FBTVosYUFBYSxXQUFZcFQsR0FDL0JnVSxFQUFNRSxVQUFZbFcsRUFBT0MsTUFDekJuRixFQUFVb0YsWUFBWThWLEtBR3BCeFQsRUFBUTNJLE9BQVMsSUFDbkIsRUFBSXVELEVBQVVnRSxjQUFjdEcsRUFBVyxVQUd6Q2lFLEtBQUt5RCxRQUFVQSxLQUdqQjFGLElBQUssU0FDTHRHLE1BQU8sU0FBZ0I4UCxHQUNyQixHQUFJeEwsR0FBWWlFLEtBQUtsRSxTQUFTQyxTQVM5QixPQUxBb0IsT0FBTWlhLEtBQUtyYixFQUFVc2IsVUFBVWhRLFFBQVEsU0FBVTRQLEVBQU9oVSxHQUN0RCxNQUFPQSxLQUFRc0UsR0FBUSxFQUFJbEosRUFBVWdFLGNBQWM0VSxFQUFPLFdBQVksRUFBSTVZLEVBQVUrRCxpQkFBaUI2VSxFQUFPLFlBRzlHalgsS0FBS2dELFNBQVd1RSxFQUNUdkgsS0FBS3lELFFBQVE4RCxNQUd0QnhKLElBQUssUUFDTHRHLE1BQU8sV0FDTCxNQUFPdUksTUFBS3lELFFBQVEzSSxVQUd0QmlELElBQUssUUFDTHRHLE1BQU8sV0FDTCxHQUFJc0UsR0FBWWlFLEtBQUtsRSxTQUFTQyxTQUk5QixLQUZBaUUsS0FBS2dELFVBQVksRUFFVmpILEVBQVV1YixXQUNmdmIsRUFBVXVVLFlBQVl2VSxFQUFVdWIsWUFHbEMsRUFBSWpaLEVBQVUrRCxpQkFBaUJyRyxFQUFXLGNBSXZDOGEsS0FHTEUsRUFBbUIsV0FDckIsR0FBSWhYLEdBQVFDLElBRVpBLE1BQUthLFFBQVUsV0FDYixHQUFJMFcsR0FBUXRhLFVBQVVuQyxPQUFTLEdBQXNCc04sU0FBakJuTCxVQUFVLEdBQW1CQSxVQUFVLE1BQ3ZFWSxFQUFTMFosRUFBTTFaLE9BRWZrRCxFQUFjaEIsRUFBTTJVLE1BQU0zVCxZQUMxQmhGLEVBQVlnRSxFQUFNakUsU0FBU0MsU0FHL0IsSUFBSThCLEVBQU8yWixhQUFlemIsR0FBYzhCLEVBQU80WixhQUFhLFlBQTVELENBSUEsR0FBSXhVLEdBQU1wRixFQUFPNlosYUFBYSxXQUU5QjNXLElBQWNFLE9BRERsQixFQUFNMEQsUUFBUVIsT0FLL0J0TSxHQUFRVyxRQUFVdWYsR2pCMC9EWixTQUFTamdCLEVBQVFELEVBQVNILEdrQnJuRWhDLFlBb0JBLFNBQVNXLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLEdBRXZGLFFBQVNpZCxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJbEssV0FBVSxxQ0FFaEgsUUFBU3NOLEdBQTJCN1IsRUFBTS9PLEdBQVEsSUFBSytPLEVBQVEsS0FBTSxJQUFJOFIsZ0JBQWUsNERBQWdFLFFBQU83Z0IsR0FBeUIsWUFBaEIsU0FBT0EsRUFBUCxZQUFBK1IsRUFBTy9SLEtBQXFDLGtCQUFUQSxHQUE4QitPLEVBQVAvTyxFQUVsTyxRQUFTOGdCLEdBQVVDLEVBQVVDLEdBQWMsR0FBMEIsa0JBQWZBLElBQTRDLE9BQWZBLEVBQXVCLEtBQU0sSUFBSTFOLFdBQVUscUVBQW9FME4sRUFBcEUsWUFBQWpQLEVBQW9FaVAsSUFBZUQsR0FBU3hhLFVBQVkvRixPQUFPeWdCLE9BQU9ELEdBQWNBLEVBQVd6YSxXQUFhMkwsYUFBZXhSLE1BQU9xZ0IsRUFBVTNiLFlBQVksRUFBTzZKLFVBQVUsRUFBTUQsY0FBYyxLQUFlZ1MsSUFBWXhnQixPQUFPMGdCLGVBQWlCMWdCLE9BQU8wZ0IsZUFBZUgsRUFBVUMsR0FBY0QsRUFBU0ksVUFBWUgsR2xCK2xFaGUsR0FBSWpQLEdBQTRCLGtCQUFYQyxTQUFvRCxnQkFBcEJBLFFBQU9DLFNBQXdCLFNBQVU1UixHQUFPLGFBQWNBLElBQVMsU0FBVUEsR0FBTyxNQUFPQSxJQUF5QixrQkFBWDJSLFNBQXlCM1IsRUFBSTZSLGNBQWdCRixRQUFVM1IsSUFBUTJSLE9BQU96TCxVQUFZLGVBQWtCbEcsR2tCdm5FdlFHLFFBQU9DLGVBQWViLEVBQVMsY0FDN0JjLE9BQU8sR0FHVCxJQUFJaUcsR0FBaUJsSCxFQUFRLEdBSXpCbUgsR0FGa0J4RyxFQUF1QnVHLEdBRTlCbkcsT0FBT3FHLFFBQVUsU0FBVUMsR0FBVSxJQUFLLEdBQUlwRCxHQUFJLEVBQUdBLEVBQUl3QyxVQUFVbkMsT0FBUUwsSUFBSyxDQUFFLEdBQUlxRCxHQUFTYixVQUFVeEMsRUFBSSxLQUFLLEdBQUlzRCxLQUFPRCxHQUFjdkcsT0FBTytGLFVBQVV6QyxlQUFlOUQsS0FBSytHLEVBQVFDLEtBQVFGLEVBQU9FLEdBQU9ELEVBQU9DLElBQVksTUFBT0YsS0FFblAyVyxFQUFlLFdBQWMsUUFBU0MsR0FBaUI1VyxFQUFRNlcsR0FBUyxJQUFLLEdBQUlqYSxHQUFJLEVBQUdBLEVBQUlpYSxFQUFNNVosT0FBUUwsSUFBSyxDQUFFLEdBQUlrYSxHQUFhRCxFQUFNamEsRUFBSWthLEdBQVd4WSxXQUFhd1ksRUFBV3hZLGFBQWMsRUFBT3dZLEVBQVc1TyxjQUFlLEVBQVUsU0FBVzRPLEtBQVlBLEVBQVczTyxVQUFXLEdBQU16TyxPQUFPQyxlQUFlcUcsRUFBUThXLEVBQVc1VyxJQUFLNFcsSUFBaUIsTUFBTyxVQUFVSixFQUFhSyxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWUgsRUFBaUJGLEVBQVlqWCxVQUFXc1gsR0FBaUJDLEdBQWFKLEVBQWlCRixFQUFhTSxHQUFxQk4sTUFFNWhCN1gsRUFBWWxHLEVBQVEsSUFFcEIyaEIsRUFBYWhoQixFQUF1QnVGLEdBRXBDMkIsRUFBWTdILEVBQVEsSUFVcEI0aEIsRUFBVyxTQUFVQyxHQUd2QixRQUFTRCxLQUdQLE1BRkEvRCxHQUFnQnJVLEtBQU1vWSxHQUVmVCxFQUEyQjNYLE1BQU9vWSxFQUFTRixXQUFhM2dCLE9BQU80WCxlQUFlaUosSUFBVzVhLE1BQU13QyxLQUFNL0MsWUE2RDlHLE1BbEVBNGEsR0FBVU8sRUFBVUMsR0FRcEI3RCxFQUFhNEQsSUFDWHJhLElBQUssV0FDTHRHLE1BQU8sV0FDTCxHQUFJdUosR0FBTy9ELFVBQVVuQyxPQUFTLEdBQXNCc04sU0FBakJuTCxVQUFVLEdBQW1CQSxVQUFVLE1BQ3RFb0QsRUFBUVcsRUFBS1gsTUFDYmlZLEVBQVd0WCxFQUFLc1gsU0FDaEJDLEVBQVF2WCxFQUFLdVgsTUFFYkMsRUFBU3hZLEtBQUs5QyxRQUFRc2IsTUFRMUIsT0FBT0YsR0FBVyw0Q0FMQXRZLEtBQUt5WSxlQUFlOWEsS0FBYTZhLEdBQ2pEblksTUFBT0EsRUFDUGtZLE1BQU9BLFFBTVh4YSxJQUFLLFFBQ0x0RyxNQUFPLFNBQWU4ZixHQUNwQixHQUFJNWUsR0FBTzRlLEVBQU01ZSxJQUVqQixPQUFpQyxLQUE3QkEsRUFBSytmLGFBQWE1ZCxVQUlmbkMsRUFBSytmLGFBQWEsR0FBR0MsVUFBVTlmLElBQUksU0FBVXlQLEdBQ2xELE9BQ0UxRCxFQUFHMEQsRUFBRXNRLE1BQU1DLFlBQVksR0FDdkJsVSxFQUFHMkQsRUFBRXNRLE1BQU1DLFlBQVksR0FDdkIzWCxNQUFPb0gsRUFBRXdRLFFBQVFDLGlCQUNqQjVULFNBQVVtRCxFQUFFMFEsS0FBSyxHQUFJMVEsRUFBRTBRLEtBQUssS0FDM0IxUSxFQUFFMFEsS0FBSyxHQUFJMVEsRUFBRTBRLEtBQUssS0FDbkJDLElBQUszUSxRQUtYdkssSUFBSyxTQUNMdEcsTUFBTyxTQUFnQnloQixHQUNyQixNQUFPLElBQUk1VixTQUFRLFNBQVVDLEVBQVNDLEdBQ3BDLEdBQUluRCxHQUFPaVksRUFBVUMsRUFBT3RkLEVBQUtxYixDQVFqQyxPQVBBalcsR0FBUTZZLEVBQU03WSxNQUVkaVksR0FBWTlULFNBQVM4VCxTQUFTekksUUFBUSxRQUFVckwsU0FBUzhULFNBQVcsU0FFcEVDLEVBQVEsaUJBQW1CbkUsS0FBSy9CLE1BQ2hDcFgsRUFBTStFLEtBQUttWixVQUFXOVksTUFBT0EsRUFBT2lZLFNBQVVBLEVBQVVDLE1BQU9BLEtBRXhELEVBQUlsYSxFQUFVOFgscUJBQXFCbGIsRUFBS3NkLEdBQU8zVSxLQUFLLFNBQVVDLEdBRW5FLE1BREF5UyxHQUFPelMsRUFDQU4sRUFBUXZELEtBQUtqRyxPQUFRcEIsS0FBTTJkLE1BQ2xDdlMsV0FBVy9ELEtBQU13RCxHQUFTQSxJQUM1Qk8sV0FBVy9ELFdBSVZvWSxHQUNQRCxFQUFXN2dCLFFBRWJYLEdBQVFXLFFBQVU4Z0IsR2xCMHBFWixTQUFTeGhCLEVBQVFELEVBQVNILEdtQjV2RWhDLFlBY0EsU0FBUzZkLEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlsSyxXQUFVLHFDQVpoSDlTLE9BQU9DLGVBQWViLEVBQVMsY0FDN0JjLE9BQU8sR0FHVCxJQUFJaUcsR0FBaUJsSCxFQUFRLEdBSXpCZ2UsR0FFSixTQUFnQ3BkLEdBQWNBLEdBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLElBSjFDc0csR0FFMUIsV0FBYyxRQUFTK1csR0FBaUI1VyxFQUFRNlcsR0FBUyxJQUFLLEdBQUlqYSxHQUFJLEVBQUdBLEVBQUlpYSxFQUFNNVosT0FBUUwsSUFBSyxDQUFFLEdBQUlrYSxHQUFhRCxFQUFNamEsRUFBSWthLEdBQVd4WSxXQUFhd1ksRUFBV3hZLGFBQWMsRUFBT3dZLEVBQVc1TyxjQUFlLEVBQVUsU0FBVzRPLEtBQVlBLEVBQVczTyxVQUFXLEdBQU16TyxPQUFPQyxlQUFlcUcsRUFBUThXLEVBQVc1VyxJQUFLNFcsSUFBaUIsTUFBTyxVQUFVSixFQUFhSyxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWUgsRUFBaUJGLEVBQVlqWCxVQUFXc1gsR0FBaUJDLEdBQWFKLEVBQWlCRixFQUFhTSxHQUFxQk4sT0FNNWhCNkQsRUFBVyxXQUNiLFFBQVNBLEtBQ1AsR0FBSWxiLEdBQVVELFVBQVVuQyxPQUFTLEdBQXNCc04sU0FBakJuTCxVQUFVLEdBQW1CQSxVQUFVLEtBRTdFb1gsR0FBZ0JyVSxLQUFNb1ksR0FFdEJwWSxLQUFLOUMsUUFBVUEsRUErQmpCLE1BNUJBc1gsR0FBYTRELElBQ1hyYSxJQUFLLGlCQUNMdEcsTUFBTyxTQUF3QitnQixHQUM3QixNQUFPamhCLFFBQU8yTSxLQUFLc1UsR0FBUTNmLElBQUksU0FBVWtGLEdBQ3ZDLE1BQU9xYixvQkFBbUJyYixHQUFPLElBQU1xYixtQkFBbUJaLEVBQU96YSxNQUNoRW1YLEtBQUssUUFHVm5YLElBQUssU0FDTHRHLE1BQU8sU0FBZ0J1SixHQUNyQixNQUFPLElBQUlzQyxTQUFRLFNBQVVDLEVBQVNDLEdBQ3BDLEdBQUluRCxHQUFPaVksRUFBVXJkLEVBQUtvZSxFQUFTL0MsQ0FNbkMsT0FMQWpXLEdBQVFXLEVBQUtYLE1BRWJpWSxHQUFZOVQsU0FBUzhULFNBQVN6SSxRQUFRLFFBQVVyTCxTQUFTOFQsU0FBVyxTQUNwRXJkLEVBQU0rRSxLQUFLbVosVUFBVzlZLE1BQU9BLEVBQU9pWSxTQUFVQSxJQUV2Q2dCLE1BQU1yZSxHQUFLMkksS0FBSyxTQUFVQyxHQUUvQixNQURBd1YsR0FBVXhWLEVBQ0h3VixFQUFRL0MsT0FBTzFTLEtBQUssU0FBVUksR0FFbkMsTUFEQXNTLEdBQU90UyxFQUNBVCxFQUFRdkQsS0FBS2pHLE9BQVFwQixLQUFNMmQsTUFDbEN2UyxXQUFXL0QsS0FBTXdELEdBQVNBLElBQzVCTyxXQUFXL0QsS0FBTXdELEdBQVNBLElBQzVCTyxXQUFXL0QsV0FJVm9ZLElBR1R6aEIsR0FBUVcsUUFBVThnQixHbkJneEVaLFNBQVN4aEIsRUFBUUQsRUFBU0gsR29CeDBFaEMsWUFnQkEsU0FBUzZkLEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlsSyxXQUFVLHFDQUVoSCxRQUFTc04sR0FBMkI3UixFQUFNL08sR0FBUSxJQUFLK08sRUFBUSxLQUFNLElBQUk4UixnQkFBZSw0REFBZ0UsUUFBTzdnQixHQUF5QixZQUFoQixTQUFPQSxFQUFQLFlBQUErUixFQUFPL1IsS0FBcUMsa0JBQVRBLEdBQThCK08sRUFBUC9PLEVBRWxPLFFBQVM4Z0IsR0FBVUMsRUFBVUMsR0FBYyxHQUEwQixrQkFBZkEsSUFBNEMsT0FBZkEsRUFBdUIsS0FBTSxJQUFJMU4sV0FBVSxxRUFBb0UwTixFQUFwRSxZQUFBalAsRUFBb0VpUCxJQUFlRCxHQUFTeGEsVUFBWS9GLE9BQU95Z0IsT0FBT0QsR0FBY0EsRUFBV3phLFdBQWEyTCxhQUFleFIsTUFBT3FnQixFQUFVM2IsWUFBWSxFQUFPNkosVUFBVSxFQUFNRCxjQUFjLEtBQWVnUyxJQUFZeGdCLE9BQU8wZ0IsZUFBaUIxZ0IsT0FBTzBnQixlQUFlSCxFQUFVQyxHQUFjRCxFQUFTSSxVQUFZSCxHcEJ3ekVoZSxHQUFJalAsR0FBNEIsa0JBQVhDLFNBQW9ELGdCQUFwQkEsUUFBT0MsU0FBd0IsU0FBVTVSLEdBQU8sYUFBY0EsSUFBUyxTQUFVQSxHQUFPLE1BQU9BLElBQXlCLGtCQUFYMlIsU0FBeUIzUixFQUFJNlIsY0FBZ0JGLFFBQVUzUixJQUFRMlIsT0FBT3pMLFVBQVksZUFBa0JsRyxHb0IxMEV2UUcsUUFBT0MsZUFBZWIsRUFBUyxjQUM3QmMsT0FBTyxHQUdULElBQUlrRyxHQUFXcEcsT0FBT3FHLFFBQVUsU0FBVUMsR0FBVSxJQUFLLEdBQUlwRCxHQUFJLEVBQUdBLEVBQUl3QyxVQUFVbkMsT0FBUUwsSUFBSyxDQUFFLEdBQUlxRCxHQUFTYixVQUFVeEMsRUFBSSxLQUFLLEdBQUlzRCxLQUFPRCxHQUFjdkcsT0FBTytGLFVBQVV6QyxlQUFlOUQsS0FBSytHLEVBQVFDLEtBQVFGLEVBQU9FLEdBQU9ELEVBQU9DLElBQVksTUFBT0YsSUFFblAyVyxFQUFlLFdBQWMsUUFBU0MsR0FBaUI1VyxFQUFRNlcsR0FBUyxJQUFLLEdBQUlqYSxHQUFJLEVBQUdBLEVBQUlpYSxFQUFNNVosT0FBUUwsSUFBSyxDQUFFLEdBQUlrYSxHQUFhRCxFQUFNamEsRUFBSWthLEdBQVd4WSxXQUFhd1ksRUFBV3hZLGFBQWMsRUFBT3dZLEVBQVc1TyxjQUFlLEVBQVUsU0FBVzRPLEtBQVlBLEVBQVczTyxVQUFXLEdBQU16TyxPQUFPQyxlQUFlcUcsRUFBUThXLEVBQVc1VyxJQUFLNFcsSUFBaUIsTUFBTyxVQUFVSixFQUFhSyxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWUgsRUFBaUJGLEVBQVlqWCxVQUFXc1gsR0FBaUJDLEdBQWFKLEVBQWlCRixFQUFhTSxHQUFxQk4sTUFFNWhCN1gsRUFBWWxHLEVBQVEsSUFFcEIyaEIsRUFFSixTQUFnQy9nQixHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFFBQVNGLElBRi9Dc0YsR0FVcEMwYixFQUFXLFNBQVVDLEdBR3ZCLFFBQVNELEtBR1AsTUFGQS9ELEdBQWdCclUsS0FBTW9ZLEdBRWZULEVBQTJCM1gsTUFBT29ZLEVBQVNGLFdBQWEzZ0IsT0FBTzRYLGVBQWVpSixJQUFXNWEsTUFBTXdDLEtBQU0vQyxZQXNDOUcsTUEzQ0E0YSxHQUFVTyxFQUFVQyxHQVFwQjdELEVBQWE0RCxJQUNYcmEsSUFBSyxXQUNMdEcsTUFBTyxXQUNMLEdBQUl1SixHQUFPL0QsVUFBVW5DLE9BQVMsR0FBc0JzTixTQUFqQm5MLFVBQVUsR0FBbUJBLFVBQVUsTUFDdEVvRCxFQUFRVyxFQUFLWCxNQUNiaVksRUFBV3RYLEVBQUtzWCxTQUVoQkUsRUFBU3hZLEtBQUs5QyxRQUFRc2IsTUFRMUIsT0FBT0YsR0FBVyxzRUFMQXRZLEtBQUt5WSxlQUFlOWEsS0FBYTZhLEdBQ2pENU8sRUFBRyxPQUNIMlAsS0FBTWxaLFFBTVZ0QyxJQUFLLFFBQ0x0RyxNQUFPLFNBQWU4ZixHQUdwQixNQUZXQSxHQUFNNWUsS0FFTDZnQixVQUFVM2dCLElBQUksU0FBVXlQLEdBQ2xDLE9BQ0UxRCxFQUFHMEQsRUFBRW1SLFFBQVFDLFNBQVM5VSxFQUN0QkQsRUFBRzJELEVBQUVtUixRQUFRQyxTQUFTL1UsRUFDdEJ6RCxNQUFPb0gsRUFBRTJFLEtBQ1Q5SCxTQUFVbUQsRUFBRXFSLE9BQU9DLEtBQU10UixFQUFFcVIsT0FBT0UsT0FDakN2UixFQUFFcVIsT0FBT0csS0FBTXhSLEVBQUVxUixPQUFPSSxPQUN6QmQsSUFBSzNRLFNBTU44UCxHQUNQRCxFQUFXN2dCLFFBRWJYLEdBQVFXLFFBQVU4Z0IsR3BCNjJFWixTQUFTeGhCLEVBQVFELEVBQVNILEdxQmw3RWhDLFlBZ0JBLFNBQVM2ZCxHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJbEssV0FBVSxxQ0FFaEgsUUFBU3NOLEdBQTJCN1IsRUFBTS9PLEdBQVEsSUFBSytPLEVBQVEsS0FBTSxJQUFJOFIsZ0JBQWUsNERBQWdFLFFBQU83Z0IsR0FBeUIsWUFBaEIsU0FBT0EsRUFBUCxZQUFBK1IsRUFBTy9SLEtBQXFDLGtCQUFUQSxHQUE4QitPLEVBQVAvTyxFQUVsTyxRQUFTOGdCLEdBQVVDLEVBQVVDLEdBQWMsR0FBMEIsa0JBQWZBLElBQTRDLE9BQWZBLEVBQXVCLEtBQU0sSUFBSTFOLFdBQVUscUVBQW9FME4sRUFBcEUsWUFBQWpQLEVBQW9FaVAsSUFBZUQsR0FBU3hhLFVBQVkvRixPQUFPeWdCLE9BQU9ELEdBQWNBLEVBQVd6YSxXQUFhMkwsYUFBZXhSLE1BQU9xZ0IsRUFBVTNiLFlBQVksRUFBTzZKLFVBQVUsRUFBTUQsY0FBYyxLQUFlZ1MsSUFBWXhnQixPQUFPMGdCLGVBQWlCMWdCLE9BQU8wZ0IsZUFBZUgsRUFBVUMsR0FBY0QsRUFBU0ksVUFBWUgsR3JCazZFaGUsR0FBSWpQLEdBQTRCLGtCQUFYQyxTQUFvRCxnQkFBcEJBLFFBQU9DLFNBQXdCLFNBQVU1UixHQUFPLGFBQWNBLElBQVMsU0FBVUEsR0FBTyxNQUFPQSxJQUF5QixrQkFBWDJSLFNBQXlCM1IsRUFBSTZSLGNBQWdCRixRQUFVM1IsSUFBUTJSLE9BQU96TCxVQUFZLGVBQWtCbEcsR3FCcDdFdlFHLFFBQU9DLGVBQWViLEVBQVMsY0FDN0JjLE9BQU8sR0FHVCxJQUFJa0csR0FBV3BHLE9BQU9xRyxRQUFVLFNBQVVDLEdBQVUsSUFBSyxHQUFJcEQsR0FBSSxFQUFHQSxFQUFJd0MsVUFBVW5DLE9BQVFMLElBQUssQ0FBRSxHQUFJcUQsR0FBU2IsVUFBVXhDLEVBQUksS0FBSyxHQUFJc0QsS0FBT0QsR0FBY3ZHLE9BQU8rRixVQUFVekMsZUFBZTlELEtBQUsrRyxFQUFRQyxLQUFRRixFQUFPRSxHQUFPRCxFQUFPQyxJQUFZLE1BQU9GLElBRW5QMlcsRUFBZSxXQUFjLFFBQVNDLEdBQWlCNVcsRUFBUTZXLEdBQVMsSUFBSyxHQUFJamEsR0FBSSxFQUFHQSxFQUFJaWEsRUFBTTVaLE9BQVFMLElBQUssQ0FBRSxHQUFJa2EsR0FBYUQsRUFBTWphLEVBQUlrYSxHQUFXeFksV0FBYXdZLEVBQVd4WSxhQUFjLEVBQU93WSxFQUFXNU8sY0FBZSxFQUFVLFNBQVc0TyxLQUFZQSxFQUFXM08sVUFBVyxHQUFNek8sT0FBT0MsZUFBZXFHLEVBQVE4VyxFQUFXNVcsSUFBSzRXLElBQWlCLE1BQU8sVUFBVUosRUFBYUssRUFBWUMsR0FBaUosTUFBOUhELElBQVlILEVBQWlCRixFQUFZalgsVUFBV3NYLEdBQWlCQyxHQUFhSixFQUFpQkYsRUFBYU0sR0FBcUJOLE1BRTVoQjdYLEVBQVlsRyxFQUFRLElBRXBCMmhCLEVBRUosU0FBZ0MvZ0IsR0FBTyxNQUFPQSxJQUFPQSxFQUFJQyxXQUFhRCxHQUFRRSxRQUFTRixJQUYvQ3NGLEdBVXBDMGIsRUFBVyxTQUFVQyxHQUd2QixRQUFTRCxLQUdQLE1BRkEvRCxHQUFnQnJVLEtBQU1vWSxHQUVmVCxFQUEyQjNYLE1BQU9vWSxFQUFTRixXQUFhM2dCLE9BQU80WCxlQUFlaUosSUFBVzVhLE1BQU13QyxLQUFNL0MsWUF1QzlHLE1BNUNBNGEsR0FBVU8sRUFBVUMsR0FRcEI3RCxFQUFhNEQsSUFDWHJhLElBQUssV0FDTHRHLE1BQU8sV0FDTCxHQUFJdUosR0FBTy9ELFVBQVVuQyxPQUFTLEdBQXNCc04sU0FBakJuTCxVQUFVLEdBQW1CQSxVQUFVLE1BQ3RFb0QsRUFBUVcsRUFBS1gsTUFDYmlZLEVBQVd0WCxFQUFLc1gsU0FFaEJFLEVBQVN4WSxLQUFLOUMsUUFBUXNiLE9BR3RCd0IsRUFBY2hhLEtBQUt5WSxlQUFlOWEsS0FBYTZhLEdBQ2pETSxRQUFTelksSUFLWCxRQURZbVksR0FBVUEsRUFBT3phLElBQU0sU0FBV3VhLEdBQy9CLCtDQUFpRDBCLEtBR2xFamMsSUFBSyxRQUNMdEcsTUFBTyxTQUFlOGYsR0FHcEIsTUFGV0EsR0FBTTVlLEtBRUw4SyxRQUFRNUssSUFBSSxTQUFVeVAsR0FDaEMsT0FDRTFELEVBQUcwRCxFQUFFb1IsU0FBU2xWLFNBQVN5VixJQUN2QnRWLEVBQUcyRCxFQUFFb1IsU0FBU2xWLFNBQVMwVixJQUN2QmhaLE1BQU9vSCxFQUFFNlIsa0JBQ1RoVixTQUFVbUQsRUFBRW9SLFNBQVNVLFNBQVNDLFVBQVVILElBQUs1UixFQUFFb1IsU0FBU1UsU0FBU0MsVUFBVUosTUFDMUUzUixFQUFFb1IsU0FBU1UsU0FBU0UsVUFBVUosSUFBSzVSLEVBQUVvUixTQUFTVSxTQUFTRSxVQUFVTCxNQUNsRWhCLElBQUszUSxTQU1OOFAsR0FDUEQsRUFBVzdnQixRQUViWCxHQUFRVyxRQUFVOGdCLEdyQnU5RVosU0FBU3hoQixFQUFRRCxFQUFTSCxHc0I3aEZoQyxZQWdCQSxTQUFTNmQsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSWxLLFdBQVUscUNBRWhILFFBQVNzTixHQUEyQjdSLEVBQU0vTyxHQUFRLElBQUsrTyxFQUFRLEtBQU0sSUFBSThSLGdCQUFlLDREQUFnRSxRQUFPN2dCLEdBQXlCLFlBQWhCLFNBQU9BLEVBQVAsWUFBQStSLEVBQU8vUixLQUFxQyxrQkFBVEEsR0FBOEIrTyxFQUFQL08sRUFFbE8sUUFBUzhnQixHQUFVQyxFQUFVQyxHQUFjLEdBQTBCLGtCQUFmQSxJQUE0QyxPQUFmQSxFQUF1QixLQUFNLElBQUkxTixXQUFVLHFFQUFvRTBOLEVBQXBFLFlBQUFqUCxFQUFvRWlQLElBQWVELEdBQVN4YSxVQUFZL0YsT0FBT3lnQixPQUFPRCxHQUFjQSxFQUFXemEsV0FBYTJMLGFBQWV4UixNQUFPcWdCLEVBQVUzYixZQUFZLEVBQU82SixVQUFVLEVBQU1ELGNBQWMsS0FBZWdTLElBQVl4Z0IsT0FBTzBnQixlQUFpQjFnQixPQUFPMGdCLGVBQWVILEVBQVVDLEdBQWNELEVBQVNJLFVBQVlILEd0QjZnRmhlLEdBQUlqUCxHQUE0QixrQkFBWEMsU0FBb0QsZ0JBQXBCQSxRQUFPQyxTQUF3QixTQUFVNVIsR0FBTyxhQUFjQSxJQUFTLFNBQVVBLEdBQU8sTUFBT0EsSUFBeUIsa0JBQVgyUixTQUF5QjNSLEVBQUk2UixjQUFnQkYsUUFBVTNSLElBQVEyUixPQUFPekwsVUFBWSxlQUFrQmxHLEdzQi9oRnZRRyxRQUFPQyxlQUFlYixFQUFTLGNBQzdCYyxPQUFPLEdBR1QsSUFBSWtHLEdBQVdwRyxPQUFPcUcsUUFBVSxTQUFVQyxHQUFVLElBQUssR0FBSXBELEdBQUksRUFBR0EsRUFBSXdDLFVBQVVuQyxPQUFRTCxJQUFLLENBQUUsR0FBSXFELEdBQVNiLFVBQVV4QyxFQUFJLEtBQUssR0FBSXNELEtBQU9ELEdBQWN2RyxPQUFPK0YsVUFBVXpDLGVBQWU5RCxLQUFLK0csRUFBUUMsS0FBUUYsRUFBT0UsR0FBT0QsRUFBT0MsSUFBWSxNQUFPRixJQUVuUDJXLEVBQWUsV0FBYyxRQUFTQyxHQUFpQjVXLEVBQVE2VyxHQUFTLElBQUssR0FBSWphLEdBQUksRUFBR0EsRUFBSWlhLEVBQU01WixPQUFRTCxJQUFLLENBQUUsR0FBSWthLEdBQWFELEVBQU1qYSxFQUFJa2EsR0FBV3hZLFdBQWF3WSxFQUFXeFksYUFBYyxFQUFPd1ksRUFBVzVPLGNBQWUsRUFBVSxTQUFXNE8sS0FBWUEsRUFBVzNPLFVBQVcsR0FBTXpPLE9BQU9DLGVBQWVxRyxFQUFROFcsRUFBVzVXLElBQUs0VyxJQUFpQixNQUFPLFVBQVVKLEVBQWFLLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZSCxFQUFpQkYsRUFBWWpYLFVBQVdzWCxHQUFpQkMsR0FBYUosRUFBaUJGLEVBQWFNLEdBQXFCTixNQUU1aEI3WCxFQUFZbEcsRUFBUSxJQUVwQjJoQixFQUVKLFNBQWdDL2dCLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsSUFGL0NzRixHQVVwQzBiLEVBQVcsU0FBVUMsR0FHdkIsUUFBU0QsS0FHUCxNQUZBL0QsR0FBZ0JyVSxLQUFNb1ksR0FFZlQsRUFBMkIzWCxNQUFPb1ksRUFBU0YsV0FBYTNnQixPQUFPNFgsZUFBZWlKLElBQVc1YSxNQUFNd0MsS0FBTS9DLFlBc0M5RyxNQTNDQTRhLEdBQVVPLEVBQVVDLEdBUXBCN0QsRUFBYTRELElBQ1hyYSxJQUFLLFdBQ0x0RyxNQUFPLFdBQ0wsR0FBSXVKLEdBQU8vRCxVQUFVbkMsT0FBUyxHQUFzQnNOLFNBQWpCbkwsVUFBVSxHQUFtQkEsVUFBVSxNQUN0RW9ELEVBQVFXLEVBQUtYLE1BQ2JpWSxFQUFXdFgsRUFBS3NYLFNBRWhCRSxFQUFTeFksS0FBSzlDLFFBQVFzYixNQVExQixPQUFPRixHQUFXLHdDQUxBdFksS0FBS3lZLGVBQWU5YSxLQUFhNmEsR0FDakQrQixPQUFRLE9BQ1JwUyxFQUFHOUgsUUFNUHRDLElBQUssUUFDTHRHLE1BQU8sU0FBZThmLEdBR3BCLE1BRldBLEdBQU01ZSxLQUVMRSxJQUFJLFNBQVV5UCxHQUN4QixPQUNFMUQsRUFBRzBELEVBQUVrUyxJQUNMN1YsRUFBRzJELEVBQUU0UixJQUNMaFosTUFBT29ILEVBQUVtUyxhQUNUdFYsU0FBVXVWLFdBQVdwUyxFQUFFcVMsWUFBWSxJQUFLRCxXQUFXcFMsRUFBRXFTLFlBQVksTUFDaEVELFdBQVdwUyxFQUFFcVMsWUFBWSxJQUFLRCxXQUFXcFMsRUFBRXFTLFlBQVksTUFDeEQxQixJQUFLM1EsU0FNTjhQLEdBQ1BELEVBQVc3Z0IsUUFFYlgsR0FBUVcsUUFBVThnQixHdEJra0ZaLFNBQVN4aEIsRUFBUUQsRUFBU0gsR0FFL0IsWXVCcm9GYyxTQUFTb2tCLEdBQVkxaEIsRUFBUUMsR3ZCb3BGdkMwaEIsRXVCbnBGaUJDLEVBQWdCM2hCLEVBQ2xDLHVCQUNBRCxHQUNINmhCLElBRUQsUUFBU0EsS0FDT0MsR0FBRzdYLE9BRWpCLDZCQUFRcE0sS0FBQWlrQixHQUFRQyxPQUNicmYsR0FBRyxPQUFRLFd2QmtwRlBzZixFdUJqcEZtQm5rQixLQUN2QmlKLFNBR0wsUUFBU2tiLEt2QmtwRkosR3VCanBGR0MsR0FBUWxNLFNBQVNtTSxlQUNyQixlQUFJQyxFQUFhcE0sU0FBU21NLGVBQzFCLGVBQUlFLEVBQVVyTSxTQUFTbU0sZUFDdkIsV0FBSUcsRUFBZUQsRUFFbkJFLFlBQUlDLEVBQWFOLEVBQ2pCSyxZQUFJRSxHQUFpQlAsRUFBTTFjLE1BQU1rZCxTQUFTclUsTUFBTSxHQUVoRCxHQUFJc1UsRUFBU1osR0FBR2paLE1BQU04WixZQUN0QmpYLEVBQUlrWCxFQUFVUCxFQUFlSyxFQUU3QkgsRUFBSU0sRUFBZ0JOLEVBQ3BCSyxDdkJpcEZDQyxHdUJqcEZlQSxFQUFnQkwsRUFBZ0JBLEVBRWhESyxFdkJpcEZDVixFdUJqcEZVNWMsTUFBc0J1ZCxhQUNqQ0QsRUFBQSxLdkJpcEZDWixFdUJqcEZLMWMsTUFBZXdkLE1BQ3hCRixFQUFBLEtBRUQsUUFBU2pCLEdBQWlCM2hCLEd2QmtwRnJCLE1BQU82aEIsSXVCanBGRTdYLE9BQU8sZUFDWitZLFVBQVUsd0JBQ1Z2akIsS0FBS1EsR0FDTGdqQixRQUNJQyxPQUFPLE9BQ1BDLEtBQUssUUFBUyx1QkFDZEEsS0FBSyxjQUFBQyxHQUFNLE1BQWNBLEdBQVd6bEIsS0FDcEMwbEIsUUFBUSxrQkFBQUQsR0FBVSxNQUFjQSxHQUFXak8sU0FDM0NtTyxLQUFLLFNBQVVGLEd2QjhvRm5CdEIsR3VCN29GVTdYLE9BQU9uRCxNQUFNb2MsT0FBTyxPQUNsQkMsS0FBSyxRQUFTLHVCQUNkemdCLEdBQUcsUUFBUyxTQUFVMGdCLEd2QjRvRjlCQSxFdUIzb0ZzQmpPLFFBQVVpTyxFQUNyQmpPLE92QjJvRlgyTSxHdUIzb0ZjN1gsT0FBT25ELEtBQUt3WCxZQUFZK0UsUUFBUSxvQkFBVSxNQUFNRCxHQUN0RGpPLFdBQ0FrTCxLQUFLK0MsRUFDYnJQLFFBQ0FtUCxPQUFPLE9BQU9DLEtBQUssUUFDL0IsZUFFRCxRQUFTeEIsR0FBZ0I0QixFQUFhdmpCLEd2QjRvRmpDdWpCLEV1QjNvRldQLFVBQVUsaUJBQ2pCdmpCLEtBQUEsU0FBQTJqQixHQUFLLE1BQWNwakIsR0FBT29qQixFQUFXemxCLE1BQ3JDc2xCLFFBQVFDLE9BQU8sT0FDZkMsS0FBSyxRQUFTLGdCQUNkRyxLQUFLLFNBQVV4aEIsR3ZCMG9GZixHdUJ4b0ZPMGhCLElBRFkxYyxLQUFLd1gsV0FBV0EsV0FDaEMzZ0IsR0FBZW1rQixHQUFHN1gsT0FFbEJuRCxNdkJ5b0ZIMmMsR3VCem9GZ0IzaEIsRUFDYjBoQixHdkJ5b0ZIRSxFdUJ6b0ZhNWhCLEVBQ1YwaEIsR3ZCeW9GSEcsRXVCem9GbUI3aEIsRUFDaEIwaEIsR3ZCeW9GSEksRXVCem9GYzloQixFQUNYMGhCLEl2QnlvRkgsRUFBSUssRUFBZUMsbUJ1QnpvRkVoaUIsRUFDckIwaEIsS0FHVCxRQUFTQyxHQUFjM2hCLEVBQU8waEIsR3ZCMG9GekJBLEV1QnpvRlFOLE9BQU8sU0FDWEMsS0FBSyxPQUFRLFlBQ2JBLEtBQUssY0FBQXJoQixHQUFNLE1BQVNBLEdBQU1uRSxLQUMxQndsQixLQUFLLFVBQVksU0FBQXJoQixHdkJ5b0ZqQixNdUJ4b0ZVQSxHQUFNcVQsT0FBUyxVQUN6QixPQUNBelMsR0FBRyxRQUFTLFNBQUFaLEl2QndvRlosRUFBSTFDLEVBQWEya0IsYXVCdG9GZGppQixHdkJ1b0ZIMGhCLEV1QnZvRllSLFVBQVUsNENBQ2RLLFFBQVEsU0FBVXZoQixFQUMxQnFULFVBR1QsUUFBU3VPLEdBQVU1aEIsRUFBTzBoQixHdkJ1b0ZyQkEsRXVCdG9GUU4sT0FBTyxTQUNYQyxLQUFLLGVBQUFyaEIsR0FBTyxNQUFTQSxHQUFNbkUsS0FDM0J3bEIsS0FBSyxRQUFTLGVBQ2RsTSxLQUFBLFNBQUFuVixHQUFLLE1BQVNBLEdBQ3RCaVMsT0FFRCxRQUFTNFAsR0FBaUI3aEIsRUFBTzBoQixHQUN6QjFoQixFQUFNa2lCLE1BQXVCLEtBQWZsaUIsRUFBTWtpQixPdkJ3b0ZuQlIsRXVCdm9GUU4sT0FBTyxPQUNYQyxLQUFLLFFBQVMsa0JBQ2Q5QyxLQUFLLE9BQ0wzZCxHQUFHLFFBQVMsV3ZCcW9GWm9mLEd1QnBvRk03WCxPQUFPbkQsS0FBS3dYLFlBQ1ZyVSxPQUFPLHVCQUNQb1osUUFBUSxTQUFVLFd2Qm1vRnRCLE91QmxvRmV2QixHQUFHN1gsT0FBT25ELE1BQU11YyxRQUMzQixjdkJxb0ZaRyxFdUJsb0ZRTixPQUFPLE9BQ1hDLEtBQUssUUFBUyxzQkFDZDlDLEtBQUEsU0FBQXZlLEdBQUssTUFBU0EsR0FDdEJraUIsUUFHTCxRQUFTSixHQUFZOWhCLEVBQU8waEIsR3ZCbW9GdkJBLEV1QmxvRlFOLE9BQU8sT0FDWEMsS0FBSyxRQUFTLGtCQUNkRSxRQUFRLFNBQVV2aEIsRUFBTXFULFFBQ3hCK04sT0FBTyxPQUNQQyxLQUFLLE1BQU9yaEIsRUFBTW1pQixRQUMxQix3QnZCaWhGQTVsQixPQUFPQyxlQUFlYixFQUFTLGNBQzNCYyxPQUFPLElBRVhkLEVBQVFXLFFBQVVzakIsQ3VCOW9GTyxJQUFBdGlCLEdBQUE5QixFQUFBLElBQ011bUIsRUFBQXZtQixFQUFBLEdBR2hDQSxHQUFBLEt2Qnd2Rk0sU0FBU0ksRUFBUUQsRUFBU0gsR0FFL0IsWXdCL3VGTSxTQUFBNG1CLEt4QjJ3RkYsTXdCendGSkMsR0FFTSxRQUFBcGtCLEdBQThCQyxFQUFRb2tCLEd4QjJ3RnhDLEd3QjF3Rkc3aUIsR0FBRzhpQixFQUFHM2lCLEVBQ1ZKLEVBQ0FnakIsRUFFQUMsQ3hCMHdGQyxJd0Ixd0ZJSCxHQUEwQyxJQUF6QkEsRUFBY3hpQixPeEI0d0ZuQyxJd0Ixd0ZJTCxFQUFJLEVBQUdBLEVBQUk2aUIsRUFBY3hpQixPQUFRTCxJQUNsQyxDeEIwd0ZDZ2pCLEd3Qnp3RkQsRXhCMHdGQ0QsRXdCMXdGY0YsRUFDZjdpQixFeEIwd0ZDLEt3QjF3RklHLElBQVExQixHQUNULEN4QjB3RkMsSXdCMXdGSUEsRUFBTzJCLGVBQWVELEdBQzNCLE14QjJ3RkMsS0FEQUosRXdCMXdGWXRCLEVBQ2IwQixHQUFLMmlCLEVBQUksRUFBR0EsRUFBSS9pQixFQUFXTSxPQUFReWlCLEl4QjJ3RjlCLEd3QjF3RkcvaUIsRUFBVytpQixHQUFHMW1CLEtBQU8ybUIsRUFDckIsQ3hCMHdGQ0UsRXdCMXdGV2xqQixFQUNaK2lCLEl4QjB3RkNFLEd3Qnp3RkQsQ0FDSCxPeEI0d0ZKLEd3QjF3RkdBLEVBQ1AsUUFJRixRQUFBUixHQUFzQmppQixFQUFPMGhCLEdBQzNCMWhCLEVBQU1xVCxPeEI2d0ZOc1AsRXdCMXdGWTNpQixHeEJ3d0ZaMGlCLEV3QjF3RlcxaUIsR0FNYixRQUFBMGlCLEdBQXNCMWlCLEd4QjJ3RnhCLEd3QjF3RkduQyxJQUVKLEVBQUFULEVBQUF3bEIsU3hCMHdGQzVpQixHd0Ixd0ZLcVQsUUFDTixFeEIwd0ZDclQsRXdCMXdGSzZpQixTQUFXN2lCLEVBQU02aUIsVUFBWUMsRUFDbkM5aUIsR3hCMHdGQ25DLEV3QjF3RkdpTSxTQUFTOUosRUFDYjZpQixVeEIwd0ZDRSxFd0J6d0ZEL2lCLElBQ0gsRUFBQTNDLEVBQUEybEIsa0JBRUQsUUFBU0QsR0FBMkIvaUIsR3hCMndGL0JxaUIsRXdCMXdGZWxXLEtBQUtuTSxFQUN4Qm5FLElBRU0sUUFBQThtQixHQUF1QjNpQixHeEIyd0Z6QixHd0Ixd0ZHbkMsSUFFSixFQUFBVCxFQUFBd2xCLFN4QjB3RkM1aUIsR3dCMXdGS3FULFFBQ04sRUFBSXJULEVBQU02aUIsVUFBWWhsQixFQUFJb2xCLFNBQVNqakIsRUFBTTZpQixXeEIyd0ZwQ2hsQixFd0Ixd0ZHdUwsWUFBWXBKLEVBQ25CNmlCLFV4QjJ3RkFLLEV3Qnp3RkRsakIsSUFDSCxFQUFBM0MsRUFBQTJsQixrQkFFRCxRQUFTRSxHQUFnQ2xqQixHeEIyd0ZwQyxHd0Ixd0ZHbWpCLEdBQU1kLEVBQWdCeE4sUUFBUTdVLEVBQ2xDbkUsR0FBSXNuQixNQUFTLEd4QjJ3RlpkLEV3QjF3RmVsVCxPQUFPZ1UsRUFDMUIsR0FFRCxRQUFTTCxHQUFrQjlpQixHeEIyd0Z0QixNQUFPVSxHd0Ixd0ZDMGlCLFVBQVVDLElBQUlyakIsRUFBTUMsS3hCMndGeEIvQixPd0Ixd0ZPOEIsRUFDUm5FLEd4QjB3RkN5bkIsWXdCMXdGWXRqQixFQUFNc2pCLGNBQ25CLEV4QjB3RkNyVCxRd0Ixd0ZRalEsRUFBTWlRLFNBQ2YsUXhCMHdGQ3NULEl3QjF3Rkl2akIsRUFBTXVqQixLQUFPN2lCLEVBQUU4aUIsSUFDcEJDLFN4QjB3RkNsRSxPd0Ixd0ZPdmYsRUFBTXVmLFFBQ2QsWXhCMHdGQ21FLFF3QjF3RlExakIsRUFBTTBqQixTQUV0QixNeEJvcUZBbm5CLE9BQU9DLGVBQWViLEVBQVMsY0FDM0JjLE9BQU8sSUFFWGQsRXdCcHZGZXltQixtQnhCcXZGZnptQixFd0JqdkZlc0Msc0J4Qmt2RmZ0QyxFd0J6dEZlc21CLGN4QjB0RmZ0bUIsRXdCbHRGZSttQixjeEJtdEZmL21CLEV3QnJzRmVnbkIsY0FsRUssSUFBQXZsQixHQUFBNUIsRUFBQSxJQUNRNkIsRUFBQTdCLEVBQUEsSUFNekI2bUIsTXhCbTJGRSxTQUFTem1CLEVBQVFELEdBRXRCLFl5QjEyRk0sU0FBQW1DLEdBQW9CNmxCLEd6Qm8zRnRCLEd5Qm4zRkc5bkIsR0FBSzhuQixFQUFVOW5CLElBQ25CLE1BQUlxRyxFQUFVeWhCLEVBQVV6aEIsVUFBWTBoQixpQkFDcEMsR0FBSUMsRUFBZ0JGLEVBQVVFLGdCQUFrQixPQUNoRCxPQUFJQyxFQUFjSCxFQUFVRyxhQUU1QixDekJxM0ZDLE9BRkFqbUIsR3lCbjNGSzZDLEVBQUU3QyxJQUFJaEMsRUFBSXFHLEdBQVNzSSxRQUFRcVosRUFDakNDLEd6Qm0zRkNwakIsRXlCbjNGQ3FqQixRQUFRQyxhQUFjeGdCLFNBQVUsZUFBZ0JpRCxNQUNsRDVJLEdBQ0hBLEVBRU0sUUFBQStrQixLekJvM0ZGLE15QmwzRkova0IsR3pCKzFGQXRCLE9BQU9DLGVBQWViLEVBQVMsY0FDM0JjLE9BQU8sSUFFWGQsRXlCLzJGZW1DLFl6QmczRmZuQyxFeUJyMkZlaW5CLFFBYmhCLElBRUEva0IsSXpCbzRGTSxTQUFTakMsRUFBUUQsRUFBU0gsR0FFL0IsWTBCcDRGTSxTQUFBNkMsR0FBNkJSLEcxQm81Ri9CQSxFMEJuNUZHK0MsR0FBRyxVQUNWb2lCLEdBRU0sUUFBQUEsR0FBeUJ2ZCxHMUJvNUYzQixHMEJuNUZHNUgsSUFFSixFQUFBVCxFQUFBd2xCLFMxQnE1RkNxQixHMEI5NEZXQyxHQU5SQyxFQUFpQnRtQixHQUNqQnVtQixFQUFldm1CLEdBQ2Z3bUIsRUFBZ0J4bUIsR0FDaEJ5bUIsRUFHSnptQixNQUdKLFFBQVNxbUIsR0FBYzFHLEcxQis0RmxCLE0wQjk0Rk0sSUFBQUEsRUFBYStHLE9BQU8sU0FBVXJvQixHMUIrNEZoQyxNMEIvNEY2RGtSLFVBQWpCbFIsSUFBbUJnZSxLQUN2RSxLQUVELFFBQVMrSixHQUFhaGtCLEdBQ2QzQixPQUFPa21CLFNBQVdsbUIsT0FBT2ttQixRQUFRQyxjMUJpNUZoQ25tQixPMEJoNUZNa21CLFFBQVFDLGdCQUFpQixHQUNuQ3hrQixHQUdMLFFBQVNra0IsR0FBa0J0bUIsRzFCaTVGdEIsRzBCaDVGRzZtQixHQUFTN21CLEVBQ2I0TSxXMUJnNUZDLE8wQmg1Rk0sVUFBWWlhLEVBQU94RixJQUFJdFQsV0FBYSxJQUFNOFksRUFBT3pGLElBQzNEclQsV0FFRCxRQUFTd1ksR0FBZ0J2bUIsRzFCaTVGcEIsTTBCaDVGTSxRQUFVQSxFQUNwQjZNLFVBRUQsUUFBUzJaLEdBQWlCeG1CLEcxQmk1RnJCLEcwQmg1RkdLLE1BQ0F5bUIsS0FDQUMsR0FFSixFQUFBdG5CLEVBQUE4a0IsbUIxQmc1RkN2a0IsRzBCaDVGR2duQixVQUFVLFNBQVU3a0IsRzFCaTVGbkIsRzBCaDVGR2tDLEdBQVVsQyxFQUNka0MsT0FBSUEsSUFBV0EsRUFBUWhFLFMxQmk1RmxCeW1CLEUwQmg1Rld6aUIsRUFBUWhFLFFBQVVnRSxFQUFRckMsZUFBZSxXQUFhcUMsRUFBUXdoQixRQUM3RSxNMUJtNUZKLEkwQi80RkRvQixHQUNBcmxCLEMxQmc1RkMsSzBCaDVGSUEsRUFBSSxFQUFHQSxFQUFJbWxCLEVBQWM5a0IsT0FBUUwsSTFCaTVGakNxbEIsRTBCaDVGY0YsRUFDZm5sQixHMUJnNUZDdkIsRTBCaDVGTWlPLEtBQ1AyWSxHMUJnNUZDNW1CLEUwQmg1Rk1pTyxLQUFLd1ksRUFDZkcsRzFCaTVGQSxPMEJoNUZNLFVBQVk1bUIsRUFBT2djLEtBQzdCLEtBRUQsUUFBU29LLEdBQXFCem1CLEcxQmk1RnpCLEcwQmg1RkdLLEsxQnM1RkgsT0FMQUwsRzBCaDVGR2duQixVQUFVLFNBQVU3a0IsR0FDaEJBLEVBQU1rQyxTQUFXbEMsRUFBTWtDLFFBQWlCOFYsT0FBQWhiLEVBQUErbkIsaUIxQmk1RnZDN21CLEUwQmg1Rk1pTyxLQUFLbk0sRUFBTWtDLFFBQ3JCckcsTUFFRSxjQUFnQnFDLEVBQU9nYyxLQUNqQyxLQUVELFFBQVM4SyxLMUJpNUZKLEcwQmg1Rkd4SCxHQUFTbGYsT0FBT2tMLFNBQ3BCYixNMUJnNUZDLEkwQmg1RmMsS0FBWDZVLEUxQnM1RkgsTUFKQUEsRzBCaDVGUXlILEVBQ1R6SCxHMUJnNUZDQSxFMEJoNUZRMEgsRUFFVDFILEcxQmc1RkMySCxFMEIvNEZEM0gsR0FDSEEsRUFFRCxRQUFTeUgsR0FBZ0J6SCxHMUJtNUZwQixNQUZBQSxHMEJoNUZRQSxFQUFPNEgsVUFDaEIsRzFCZzVGQzVILEUwQmg1RlE2SCxFQUNUN0gsR0FBT0EsRUFBTzhILE1BQ2pCLEtBRUQsUUFBU0QsR0FBcUI3SCxHMUJpNUZ6QixNMEJoNUZNQSxHQUFPL1EsUUFBUSxZQUN6QixLQUVELFFBQVN5WSxHQUF1QkssRzFCaTVGM0IsRzBCOTRGREMsR0FFQS9sQixFQUpJZ21CLEkxQm81RkgsSzBCaDVGSWhtQixFQUFJLEVBQUdBLEVBQUk4bEIsRUFBVXpsQixPQUFRTCxJMUJpNUY3QitsQixFMEJoNUZXRCxFQUFVOWxCLEdBQUc2bEIsTUFDekIsSzFCZzVGQ0csRTBCaDVGWUQsRUFBVSxJQUFNQSxFQUNoQyxFMUJrNUZBLE8wQi80RkpDLEdBRUQsUUFBU04sR0FBYzNILEdBQ2ZBLEVBQU9rSCxTQUFRbEgsRUFBT2tILE9BQVNnQixFQUFrQmxJLEVBQ3JEa0gsU0FBSWxILEVBQU90ZixTQUFRc2YsRUFBT3RmLE9BQVN5bkIsRUFBaUJuSSxFQUNwRHRmLFNBQUlzZixFQUFPeGYsYUFBWXdmLEVBQU94ZixXQUFhNG5CLEVBQXFCcEksRUFDbkV4ZixhQUVELFFBQVMwbkIsR0FBbUJoQixHMUJpNUZ2QixNMEJoNUZNQSxHQUFPWSxNQUNqQixLQUVELFFBQVNLLEdBQWtCem5CLEcxQmk1RnRCLEcwQjM0RkQybkIsR0FFQXBtQixFQVBJcW1CLEcxQmk1RkNDLGlCQUNBcEIsZUFNSixLQURBem1CLEUwQmg1RlFBLEVBQU9vbkIsTUFDaEIsS0FBSzdsQixFQUFJLEVBQUdBLEVBQUl2QixFQUFPNEIsT0FBUUwsR0FBUSxFMUJpNUZsQ29tQixFMEJoNUZTM25CLEVBQ1Z1QixHMUJnNUZDcW1CLEUwQmg1RmVDLGNBQWM1WixLQUM5QjBaLEcxQmc1RkNDLEUwQmg1RmVuQixZQUFZa0IsR0FBVzNuQixFQUFPdUIsRUFDakQsRTFCazVGQSxPMEIvNEZKcW1CLEdBRUQsUUFBU0YsR0FBc0I1bkIsRzFCaTVGMUIsTTBCaDVGTUEsR0FBV3NuQixNQUNyQixLQUVNLFFBQUExbkIsR0FBbUNKLEcxQmk1RnJDLEcwQmg1Rkd3b0IsR0FDSmhCLEdBQUtnQixLQUNEQSxFQUFNdEIsU0FBUWxuQixFQUFPSyxJQUFJZ21CLGNBQWdCbUMsRUFDN0N0QixRQUFJc0IsRUFBTUMsT0FBTXpvQixFQUFPSyxJQUFJaW1CLFlBQWNrQyxFQUN6Q0MsTUFBSUQsRUFBTTluQixRQUFRZ29CLEVBQXlCRixFQUFNOW5CLE9BQ2pEVixHQUFJd29CLEVBQU1ob0IsWUFBWW1vQixFQUE2QkgsRUFBTWhvQixXQUM1RFIsSUFFRCxRQUFTMG9CLEdBQTBCRSxFQUFvQjVvQixHMUJpNUZsRCxHMEJoNUZHdW9CLEdBQWdCSyxFQUNwQkwsYTFCZzVGQ3ZvQixHMEJoNUZNLGlCQUVQdW9CLEMxQmc1RkMsSTBCaDVGR3RtQixHQUFHOGlCLEVBQUczaUIsRUFDVkosRUFDQTZtQixFQUNBNUQsRUFBSXZrQixFQUFTVixFQUViVSxNMUJnNUZDLEswQmg1Rkl1QixFQUFJLEVBQUdBLEVBQUlzbUIsRUFBY2ptQixPQUFRTCxJQUNsQyxDMUJnNUZDZ2pCLEcwQi80RkQsRTFCZzVGQzRELEUwQmg1RmNOLEVBQ2Z0bUIsRTFCZzVGQyxLMEJoNUZJRyxJQUFRMUIsR0FDVCxDMUJnNUZDLEkwQmg1RklBLEVBQU8yQixlQUFlRCxHQUMzQixNMUJpNUZDLEtBREFKLEUwQmg1Rll0QixFQUNiMEIsR0FBSzJpQixFQUFJLEVBQUdBLEVBQUkvaUIsRUFBV00sT0FBUXlpQixJMUJpNUY5QixHMEJoNUZHL2lCLEVBQVcraUIsR0FBRzFtQixLQUFPd3FCLEVBQ3JCLEMxQmc1RkM3bUIsRTBCaDVGVStpQixHQUFHbUIsUUFBVTBDLEVBQW1CekIsWUFDM0MwQixHMUJnNUZDNUQsRzBCLzRGRCxDQUNILE8xQms1RkosRzBCaDVGR0EsRUFDUCxRQUlULFFBQVMwRCxHQUE4QkcsRUFBd0I5b0IsRzFCaTVGMUQsRzBCOTRGRCtvQixHQUVBOW1CLEVBSkl6QixFQUFhUixFQUNqQlEsVTFCbTVGQyxLMEJoNUZJeUIsRUFBSSxFQUFHQSxFQUFJekIsRUFBVzhCLE9BQVFMLEkxQmk1RjlCOG1CLEUwQmg1Rld2b0IsRUFDWnlCLEcxQmc1RkM4bUIsRTBCaDVGU2xULE9BQVVpVCxFQUF1QnpSLFFBQVEwUixFQUFVMXFCLE9BQVMsRTFCcXRGN0VVLE9BQU9DLGVBQWViLEVBQVMsY0FDM0JjLE9BQU8sSUFFWGQsRTBCejRGZTBDLHFCMUIwNEZmMUMsRTBCdDRGZXFuQixpQjFCdTRGZnJuQixFMEJyd0ZlaUMsMEJBMUlLLElBQUFSLEdBQUE1QixFQUFBLElBQ1N3QixFQUFBeEIsRUFBQSxJQUc5QjhCLEVBQUE5QixFQUFBLEsxQnVrR00sU0FBU0ksRUFBUUQsR0FFdEIsWTJCM2tHTSxTQUFBb0MsR0FBMkJGLEVBQUsyb0IsRzNCb2xHbENBLEUyQm5sR2FBLEszQm9sR1QzcUIsRzJCamxHRyxzQjNCa2xHSG9FLEkyQmpsR0csNkQzQmtsR0grakIsWTJCaGxHTCxxSjNCa2xHQyxJMkJqbEdEdmtCLEdBQ0FnbkIsRUFFQWpwQixDM0JrbEdDLEsyQmxsR0lpQyxFQUFJLEVBQUdBLEVBQUcrbUIsRUFBWTFtQixPQUFRTCxJM0JtbEc5QmpDLEUyQmxsR1FncEIsRUFFVC9tQixHQUFLakMsRUFBTzZWLFMzQm1sR1hvVCxFMkJsbEdXQyxFQUNabHBCLEczQmtsR0NpcEIsRTJCbGxHU2hnQixNQUNiNUksSUFHTCxRQUFTNm9CLEdBQWlCRixHM0JtbEdyQixNQUFPOWxCLEcyQmxsR0MwaUIsVUFDTG9ELEVBQVl2bUIsSzNCa2xHWHBFLEcyQmhsR08ycUIsRUFDSjNxQixHM0JnbEdIbWMsSzJCL2tHRytNLEUzQmdsR0hmLFkyQmhsR2dCd0MsRUFHeEJ4QyxjM0JnakdBem5CLE9BQU9DLGVBQWViLEVBQVMsY0FDM0JjLE9BQU8sSUFFWGQsRTJCaGxHZW9DLGtCQUZULElBQU1nbkIsR0FBQXBwQixFQUFBb3BCLGdCQUViLGEzQmduR00sU0FBU25wQixFQUFRRCxFQUFTSCxHQUUvQixZNEIxbEdNLFNBQUF3bUIsR0FBNEJoaUIsRUFBTzBoQixHNUIwbkdyQyxHNEJ4bkdHaUYsR0FBaUN2WixTQUFsQnBOLEVBQU0wakIsUUFBd0IxakIsRUFBTTBqQixRQUV2RCxFQUFJa0QsRUFBdUJsRixFQUFTTixPQUFPLE9BQ3RDQyxLQUFLLFFBQVMsMEJBQ2RFLFFBQVEsU0FBVXZoQixFQUV2QnFULFFBQUl3VCxFQUFBRCxFQUNDeEYsT0FBTyxPQUNIQyxLQUFpQixVQUFFeUYsRUFBYUMsS0FBQSxJQUFHRCxFQUFhRSxLQUFBLElBQUdGLEVBQWM3RixNQUFBLElBQUc2RixFQUNyRUcsUUFDSDdGLE9BQU8sS0FDSEMsS0FBSyxRQUFTLGtCQUNkQSxLQUFtQiw0QkFFNUI2RixFQUFBLEk1QmtuR0NDLEc0QmxuR2VOLEVBQWtCN21CLEVBQ2xDMm1CLEc1QmtuR0NTLEU0QmxuR29CUCxFQUN4QjdtQixHQU1ELFFBQVNvbkIsR0FBcUJDLEVBQUtybkIsRzVCaW5HOUJxbkIsRTRCaG5HR25HLFVBQVUsS0FDVG5sQixLQUFBaWtCLEdBQVFDLE9BQ1JyZixHQUFHLGFBQWMsVzVCK21HakIwbUIsRTRCOW1HaUJ0bkIsRUFBT2dGLEtBQUt3WCxXQUFZd0QsR0FBR2paLE1BQzVDNkMsS0FDQWhKLEdBQUcsTUFBTyxZQUVWLEVBQUF2RCxFQUFBMmxCLHFCQUdULFFBQVNtRSxHQUFnQkUsRUFBS3JuQixFQUFPMm1CLEc1QjhtR2hDVSxFNEI3bUdHakcsT0FBTyxRQUNOQyxLQUFLLFFBQVMsd0JBQ2RBLEtBQUssS0FBTSxHQUFHQSxLQUFLLEtBQU1rRyxHQUN6QmxHLEtBQUssU0FBVSxRQUNmQSxLQUFLLGVBRVYsUTVCMG1HQ2dHLEU0QnptR0dqRyxPQUFPLFFBQ05DLEtBQUssUUFBUyxnQ0FDZEEsS0FBWSxRQUFFeUYsRUFBYUMsTUFDM0IxRixLQUFZLFNBQUV5RixFQUFRN0YsTUFBc0JpRyxJQUM1QzdGLEtBQUssU0FBVSxXQUNmQSxLQUFzQixlQUFrQixFQUFoQjZGLEVBQWdCLE1BQ3hDN0YsS0FBSyxpQkFFVixPNUJtbUdDZ0csRTRCbm1HR2pHLE9BQU8sVUFDTkMsS0FBSyxJQUFLNkYsR0FDVjdGLEtBQVksS0FBRW1HLEVBQWFDLE9BQXFCZCxHQUFBLE1BQ2hEdEYsS0FBSyxRQUNiLHlCQUVELFFBQVNpRyxHQUFjdG5CLEVBQU8wbkIsRUFBUUMsRzVCa21HakMsRzRCaG1HQ0EsR0FBT0gsRUFBYUMsT0FBT0QsRUFDL0JHLEc1QmdtR0dELEc0QmhtR00xSCxHQUFHN1gsT0FFWnVmLEc1QmdtR0dBLEU0QmhtR0l2ZixPQUFPLFVBQVVrWixLQUFLLEtBQzdCc0csRzVCZ21HR0QsRTRCaG1HSXZmLE9BQU8sUUFBUW9XLEtBQUt4RixTQUE0QixJQUFuQnlPLEVBQWFHLEdBQVcsSUFDNUQsSzVCZ21HRzNuQixFNEJobUdHNmlCLFNBQVMrRSxXQUFXSixFQUFheEgsR0FBR2paLE1BQzNDNkMsSTVCMmhHQXJOLE9BQU9DLGVBQWViLEVBQVMsY0FDM0JjLE9BQU8sSUFFWGQsRTRCL2xHZXFtQixtQkExQmEsSUFBQTNrQixHQUFBN0IsRUFBQSxJQVd2QityQixFQUFrQixJQUNsQkwsRUFBZ0IsRUFFbEJKLEc1QjRuR0NDLE00QjFuR0RHLEU1QjJuR0NGLEs0QjFuR0QsRTVCMm5HQy9GLE00QjNuR01zRyxFQUNQLEVBRHlCTCxFNUI0bkd4QkQsTzRCM25HcUIsRUFBZEMsR0FHUk0sRUFBZXhILEdBQUc2SCxjQUNqQkMsUUFBUSxFQUFHUCxJQUNYUSxPQUFPLEVBQUcsSUFDVkMsT0FFTCxJNUJxcUdNLFNBQVNwc0IsRUFBUUQsR0FFdEIsWTZCL3JHTSxTQUFBK0IsSzdCeXNHRnNpQixHNkJ4c0dFa0IsVUFBVSxtQkFBbUJ0Z0IsR0FBRyxRQUNuQ3FuQixHQUNBQyxJN0J3c0dDQyxFQUFNbkksRzZCeHNHRW1JLE1BQU05RyxLQUFLLFFBQVMsVUFBVWxNLEtBQUssU0FBVWlULEc3QnlzR2pELE02QnpzR2lFQSxLQUcxRSxRQUFTRixLN0Iyc0dKOU8sSzZCMXNHSTlXLFVBQVUrbEIsV0FBYSxXN0Iyc0d2QixHNkIxc0dHQyxHQUFPdGpCLEtBQ1h1akIsYTdCMHNHQyxPNkIxc0dnQixLQUFOLEVBQVBELEtBQ0tBLEVBQU8sS0FBUSxHQUFNQSxFQUFPLEtBQ3hDLEk3QjZzR0FsUCxLNkIxc0dJOVcsVUFBVWttQixPQUFTLFc3QjJzR25CLEc2QjFzR0dDLElBQVksRUFBRyxHQUFJLEdBQUksR0FBSSxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUM3RCxLQUFJQyxFQUFLMWpCLEtBQ1QyakIsV0FBSUMsRUFBSzVqQixLQUNUNmpCLFVBQUlDLEVBQVlMLEVBQVNDLEdBQ3pCRSxDN0Iyc0dDLE82QjNzR0VGLEdBQUssR0FBSzFqQixLQUFLcWpCLGNBQ2xCUyxJQUNIQSxHQUdFLFFBQUExcUIsR0FBMEJQLEc3QjJzRzVCQSxFNkIxc0dHK0MsR0FBRyxRQUNWbW9CLEdBc0JELFFBQVNBLEdBQWdCdGpCLEc3QjJzR3BCLEc2QjFzR0c1SCxHQUNKbUgsS0FBSWthLEVBQU16WixFQUFFdWpCLE9BQ1o5SixJQUFJRCxFQUFNeFosRUFBRXVqQixPQUVaL0osSUFBSWdLLEVBQU1DLEVBQWVoSyxFQUN6QkQsR0FBSXRiLEVBQVN3bEIsRUFBYXRyQixFQUFLcWhCLEVBQy9CRCxFN0Iwc0dDZSxJNkIxc0dFN1gsT0FBTzhnQixHQUFLcm9CLEdBQUcsYUFBYyxXN0Iyc0czQitDLEU2QjFzR015bEIsUUFDVkMsSzdCMnNHQXJKLEc2QjFzR0U3WCxPQUFPOGdCLEdBQUtyb0IsR0FBRyxhQUFjLFc3QjJzRzNCK0MsRTZCMXNHTXlsQixRQUNWRSxLN0Iyc0dBQyxFNkIxc0drQjFyQixFQUFLb3JCLEVBQzNCdGxCLEdBRUQsUUFBU3dsQixHQUFjdHJCLEVBQUtxaEIsRUFBS0QsRzdCMnNHNUIsTTZCMXNHTXZlLEdBQUVpRCxRQUFRdWIsRUFBS0QsSUFBT3JiLEtBQU0wbEIsSUFBWTdpQixNQUNsRDVJLEdBRUQsUUFBUzByQixHQUFvQjFyQixFQUFLb3JCLEVBQUt0bEIsRzdCMnNHbEMsRzZCMXNHRzZsQixHQUNKQyxHN0Iwc0dDUixHNkIxc0dHOWlCLFlBQ0pxakIsRzdCMHNHQ3hKLEc2QjFzR0U3WCxPQUFPcWhCLEdBQU01b0IsR0FBRyxRQUFTLFdBQ2JxVCxTQUFTbU0sZUFDcEIsY0FBSzlLLFlBQ0wyVCxHN0Iwc0dDcHJCLEU2QjFzR0d1TCxZQUNQekYsS0FHTCxRQUFTOGxCLEs3QjJzR0osRzZCMXNHR0QsR0FBT3ZWLFNBQVN2TyxjQUNwQixTN0I2c0dDLE9BSEE4akIsRzZCMXNHSXRPLFVBQ0wsZTdCMHNHQ3NPLEU2QjFzR0lFLFVBQVlDLE9BQU9DLGFBQ3hCLFM3QjBzR0NKLEU2QjFzR0luTyxhQUFhLFFBQ2xCLGdCQUNIbU8sRUFJRCxRQUFTSyxHQUFRM0ssRUFBS0QsRUFBS2dLLEc3QjJzR3RCLEc2QjFzR0docEIsR0FBTSx3REFBMERnZixFQUFNLElBQzFFQyxFQUFJNEssRUFBTyxHQUNYbnJCLGU3QjBzR0NtckIsRzZCMXNHSXRrQixpQkFBaUIsT0FBUSxXN0Iyc0d6QixHNkIxc0dHdWtCLEdBQVcva0IsS0FDZmhHLFk3QjBzR0MrcUIsRzZCMXNHVUEsRUFBU3RkLFFBQVEsWUFBYSxJQUFJNlksTUFDN0MsTTdCMHNHQzBFLEU2QjFzR1NELEVBQVVkLEVBQUsvSixFQUM1QkQsSzdCMnNHQTZLLEU2QjFzR0l4cUIsS0FBSyxNQUNWVyxHN0Iwc0dDNnBCLEU2QnpzR0p2cUIsT0FFRCxRQUFTMHFCLEdBQVV0c0IsRzdCMnNHZCxHNkJ6c0dEOEIsRTdCMHNHQyxLNkIxc0dJQSxFQUFJLEVBQUdBLEVBQUk5QixFQUFLbUMsT0FBUUwsSTdCMnNHeEI5QixFNkIxc0dJOEIsR0FBSzlCLEVBQUs4QixHQUFHNmxCLE1BQ3JCLEk3QjJzR0EsTzZCenNHSjNuQixHQUVELFFBQVN1c0IsR0FBZUMsRzdCMnNHbkIsRzZCeHNHRHZNLEdBQ0E3YSxFQUFJdEQsRUFFSjhpQixFQUxJNWtCLEk3Qmd0R0gsS0FEQUEsRTZCMXNHSSxRQUNBOEIsRUFBSSxFQUFHQSxFQUFJMHFCLEVBQVNycUIsT0FBUUwsSTdCMnNHNUJtZSxFNkIxc0dPdU0sRUFDUjFxQixHN0Iwc0dDc0QsRTZCMXNHSzZhLEVBQU0sR0FBR3dILFVBQVUsRUFDekIsR0FBS3puQixFQUFLa0MsZUFBZWtELEs3QjJzR3BCcEYsRTZCMXNHSW9GLE03QjJzR0pwRixFNkIxc0dJLEtBQVF3TyxLQUNoQnBKLEk3QjJzR0FwRixFNkIxc0dJb0YsR0FBS29KLEtBQ2J5UixFN0I0c0dBLEk2QnpzR0R3TSxHQUNBQyxDN0Iyc0dDLEtBREExc0IsRTZCMXNHSSxXQUNBOEIsRUFBSSxFQUFHQSxFQUFJLEdBQUlBLElBQ2hCLEM3QjJzR0MsSUFEQTJxQixLNkJ6c0dJN0gsRUFBSTlpQixFQUFHOGlCLEVBQUk0SCxFQUFTcnFCLE9BQVF5aUIsR0FBSyxHN0Iyc0dqQzZILEU2QjFzR2NqZSxLQUFLZ2UsRUFBUzVILEdBQ2hDLEc3QjRzR0E4SCxHNkIxc0dRRCxFQUFlRSxPQUFPNVYsS0FBSzZWLE1BQU1ILEVBQWV0cUIsT0FDekQsSTdCMHNHQ25DLEU2QjFzR0ksUUFBV3dPLEtBQ25Ca2UsRzdCNHNHQSxNNkJ6c0dKMXNCLEdBSUQsUUFBU3NxQixLN0Iyc0dKLEc2QjFzR0dqUSxHQUFPaFQsS0FBS3dsQixRQUNoQnhTLEtBQUl5UyxFQUFheFcsU0FBU3lXLHVCQUF1Qix5QkFDakQsR0FBSUMsRUFBYUYsRUFBV0QsUUFFNUJ4UyxJQUFJQSxLQUFTMlMsSTdCOHNHWjNLLEc2QjFzR0U3WCxPQUFPLGVBQ0xvWixRQUFRLFNBQVdvSixHQUFZLEdBQy9CcEosUUFBUSxTQUFXdkosR0FFeEIsRzdCd3NHQ2dJLEc2QnhzR0U3WCxPQUFPc2lCLEdBQVlsSixRQUFRLFVBQzlCLEc3QndzR0N2QixHNkJ4c0dFN1gsT0FBT25ELE1BQU11YyxRQUFRLFVBQzNCLElBRUQsUUFBUzJILEdBQWdCaEssRUFBS0QsRzdCeXNHekIsRzZCeHNHR2dLLEdBQU1oVixTQUFTdk8sY0FDbkIsT0FBSWtsQixFQUFVM1csU0FBUzRXLGVBQWUsUUFBVTNMLEVBQU0sVUFDdERELEU3QjJzR0MsT0FIQWdLLEc2QnhzR0c5aUIsWUFDSnlrQixHN0J3c0dDM0IsRTZCeHNHRy9oQixVQUFVcVUsSUFDZCxjN0J3c0dDc08sRTZCeHNHTzNLLEVBQUtELEVBQ2JnSyxHQUNIQSxFQUVELFFBQVNlLEdBQVVyc0IsRUFBTXNyQixFQUFLL0osRUFBS0QsRzdCeXNHOUJ0aEIsRTZCeHNHTXNzQixFQUNQdHNCLEU3QndzR0MsSTZCeHNHR210QixHQUFrQlosRUFDdEJ2c0IsRTdCd3NHQ290QixHNkJ4c0dtQnB0QixFQUFNc3JCLEVBQUs2QixFQUMvQixTN0J3c0dDRSxFNkJ4c0cyQ0YsRUFBaUI3QixFQUFLL0osRUFDbEVELEc3QndzR0NnTSxFNkJ4c0cwQ0gsRUFBaUI3QixFQUFLL0osRUFDakVELEdBQVdoTCxTQUFTbU0sZUFDcEIsY0FBS2phLFlBQ1I4aUIsR0FJRCxRQUFTOEIsR0FBcUJwdEIsRUFBTXNyQixFQUFLaUMsRzdCMHNHcEMsRzZCeHNHR0MsSUFBVUMsSUFBSyxHQUFJQyxNQUFPLEdBQUlDLE9BQVEsR0FBSUMsS0FBTSxJQUNwRHRLLEVBQVEsSUFBTWtLLEVBQU9JLEtBQU9KLEVBQU9FLE1BQ25DcEUsRUFBUyxJQUFNa0UsRUFBT0MsSUFBTUQsRUFFNUJHLE9BQ0kxaEIsRUFBSW9XLEdBQUd3TCxZQUFZekQsT0FBTyxFQUFHOUcsSUFDNUI2RyxRQUNHMkQsRUFBVTl0QixFQUFLLEdBQUcsSUFDbEI4dEIsRUFBVTl0QixFQUFLQSxFQUFLbUMsT0FBTyxHQUVuQyxNQUFJNkosRUFBSXFXLEdBQUc2SCxjQUFjRSxPQUFPZCxFQUFRLElBQ25DYSxRQUFRLEVBRWIsTUFDSTRELEVBQUExTCxHQUFXMkwsV0FBVy9oQixHQUNyQmdpQixNQUFNLElBQ05DLFdBQVcsU0FBVXpELEc3QmtzR3JCLE02QmpzR1VBLEdBQ1ZHLGdCQUVEdUQsRUFBUTlMLEdBQUcrTCxTQUFTcGlCLEdBQ25CaWlCLE1BRUwsR0FDSUksRUFBQWhNLEdBQWVpTSxPQUNkcmlCLEVBQUUsU0FBU3dlLEc3QmdzR1gsTTZCaHNHdUJ4ZSxHQUFFNmhCLEVBQVVyRCxFQUFTLE9BQzVDemUsRUFBRSxTQUFTeWUsRzdCaXNHWCxNNkJqc0d1QnplLEdBQUV5ZSxFQUFRLE1BRWxDOUgsRUFBVU4sR0FBRzdYLE9BQU84Z0IsR0FDbkI3SCxPQUFPLE9BQ1BHLFFBQVEsb0JBRWIsR0FDSThGLEVBQUEvRyxFQUNDYyxPQUNELE9BQ0NDLEtBQUssU0FBVTRGLEVBQVNrRSxFQUFPQyxJQUFNRCxFQUFPRyxRQUM1Q2pLLEtBQUssVUFBVyxXN0Jpc0doQixNNkI5ckdVLFFBRkNKLEVBQVFrSyxFQUFPSSxLQUFPSixFQUM5QkUsT0FDb0IsS0FEWnBFLEVBQVNrRSxFQUFPQyxJQUFNRCxFQUM5QkcsVUFFSGpLLEtBQUssc0JBQXVCLFlBQzVCRCxPQUFPLEtBQ0hDLEtBQUssWUFBYSxhQUFlOEosRUFBT0ksS0FBTyxJQUFNSixFQUFPQyxJQUVyRSxJN0IyckdDL0QsRzZCM3JHR3RyQixLQUVKb3NCLEc3QjRyR0MrRCxFNkIzckdjdnVCLEVBQU1xdUIsRUFFckIzRSxHN0I0ckdDQSxFNkIzckdHakcsT0FBTyxLQUNOQyxLQUFLLFFBQVMsVUFDZEEsS0FBSyxZQUFhLGVBQWlCNEYsRUFBUyxLQUM1Q2xyQixLQUVMMnZCLEc3QnlyR0NyRSxFNkJ4ckdHakcsT0FBTyxLQUNOQyxLQUFLLFFBQVMsVUFDZHRsQixLQUNMK3ZCLEc3QnlyR0NLLEU2QnRyR2dCeHVCLEVBQU1xdUIsRUFBVzNFLEVBQ3JDNkQsR0FJRCxRQUFTRixHQUE2Q3J0QixFQUFNc3JCLEVBQUsvSixFQUFLRCxHN0Jzc0dqRSxRNkJwckdRbU4sR0FBaUJoRSxHN0JxckdyQixNNkJwckdPaUUsSUFBY2pFLEVBQUUsSUFDM0IsSTdCbXFHQSxHNkJwckdHa0UsTUFHQW5CLEdBQVVDLElBQUssR0FBSUMsTUFBTyxHQUFJQyxPQUFRLEdBQUlDLEtBQU0sSUFDaER0SyxFQUFRLElBQU1rSyxFQUFPSSxLQUFPSixFQUFPRSxNQUNuQ3BFLEVBQVMsSUFBTWtFLEVBQU9DLElBQU1ELEVBRWhDRyxPQUFJSixFQUFXdnRCLEVBRWY0dUIsUUFBSTNpQixFQUFJb1csR0FBRzZILGNBQWNFLE9BQU8sRUFBRzlHLElBQzlCNkcsUUFBUSxFQUNiLE1BQUluZSxFQUFJcVcsR0FBRzZILGNBQWNFLE9BQU9kLEVBQVEsSUFDbkNhLFFBQVEsRUFFYixNQUlJNEQsRUFBUTFMLEdBQUcyTCxXQUFXL2hCLEdBQ3JCZ2lCLE1BQU0sSUFDTlksWUFBWSxHQUFJLEdBQUksR0FBSSxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssTUFDaEVYLFdBRUxPLEdBQUlOLEVBQVE5TCxHQUFHK0wsU0FBU3BpQixHQUNuQmlpQixNQUVMLEdBQ0lJLEVBQUFoTSxHQUFlaU0sT0FDZHJpQixFQUFFLFNBQVN3ZSxFQUFHM29CLEc3QmdyR2QsTTZCaHJHOENtSyxHQUFuQnpILE1BQU1zcUIsUUFBUXJFLEdBQU9zRSxFQUFldEUsRUFBRSxJQUFjLEVBQUozb0IsRUFBZ0IsS0FDM0ZrSyxFQUFFLFNBQVN5ZSxHN0JpckdYLE02QmpyRzJDemUsR0FBbkJ4SCxNQUFNc3FCLFFBQVFyRSxHQUFPQSxFQUFFLEdBQWNBLEtBRTlEOUgsRUFBVU4sR0FBRzdYLE9BQU84Z0IsR0FBSzdILE9BQU8sT0FBT0csUUFBUSxxQkFFbkQsR0FDSThGLEVBQUEvRyxFQUNDYyxPQUFPLE9BQ0hDLEtBQUssVUFBVyxXN0JtckdwQixNNkJockdjLFFBRkNKLEVBQVFrSyxFQUFPSSxLQUFPSixFQUM5QkUsT0FDb0IsS0FEWnBFLEVBQVNrRSxFQUFPQyxJQUFNRCxFQUM5QkcsVUFFSGpLLEtBQUssc0JBQ04sWUFFSEQsT0FBTyxLQUNIQyxLQUFLLFlBQ0EsYUFBZThKLEVBQU9JLEtBQU8sSUFBTUosRUFBT0MsSUFFeEQsSTdCNnFHQy9ELEc2QjdxR0d0ckIsS0FFSm9zQixHN0I4cUdDZCxFNkI3cUdHakcsT0FBTyxLQUNOQyxLQUFLLFFBQVMsVUFDZEEsS0FBSyxZQUFhLGVBQWlCNEYsRUFBUyxLQUM1Q2xyQixLQUVMMnZCLEc3QjJxR0NyRSxFNkIxcUdHakcsT0FBTyxLQUNOQyxLQUFLLFFBQVMsVUFDZHRsQixLQUVMK3ZCLEc3QndxR0NRLEU2QnhxR00sUzdCeXFHRkssSzZCeHFHUVQsRUFBZXZ1QixFQUFLLFFBQVlxdUIsRUFHN0MzRSxJN0J3cUdDaUYsRTZCenVHRCxPN0IwdUdLSyxLNkJ4cUdRVCxFQUFldnVCLEVBbEU1QixNQWtFd0NxdUIsRUFHeEMzRSxJN0IycUdDaUYsRTZCeHFHTSxRQUFXLE9BQVlILEVBQWlCeHVCLEVBQUssUUFBWXF1QixFQUFXM0UsRUFDM0U2RCxHN0J3cUdDb0IsRTZCanZHRCxNQXlFYSxPQUFZSCxFQUFpQnh1QixFQXpFMUMsTUF5RXNEcXVCLEVBQVczRSxFQUVqRTZELEU3QndxR0MsSTZCeHFHRzBCLEdBQWV0TSxFQUFRYyxPQUFPLE9BQU9HLFFBQVEsaUJBRWpELEU3QndxR0M1akIsRzZCeHFHSXVMLEtBQUttRCxRQUFRLFNBQVV0SixHN0J5cUd2QjhwQixFNkJ4cUdjRCxFQUFjN3BCLEVBQUssYUE5RXRDLE9BOEUwRHVwQixFQUFRM3VCLEVBQU1xdUIsRUFBVzNFLEVBQUs2RCxFQUFVaE0sRUFDakdELEs3QjBxR0E0TixFNkJ4cUdjRCxFQUFjLFVBQVcsYUFBYyxVQUFXTixFQUFRM3VCLEVBQU1xdUIsRUFBVzNFLEVBQUs2RCxFQUFVaE0sRUFDNUdELEdBSUQsUUFBU2dNLEdBQTRDdHRCLEVBQU1zckIsRUFBSy9KLEVBQUtELEc3QnlxR2hFLEc2QnJxR0c2TixHQUFTcFksS0FBS3lFLElBRk4sSUFDQyxLQUMwQixFQUV2QyxHQUFJK1IsRUFBV3Z0QixFQUNmLFFBQUkrbUIsRUFBU3FJLEVBQ2JwdkIsR0FBSXF2QixFQUFhQyxFQUFvQi9CLEVBQVV4RyxFQUFPLEdBRXRELElBTUlwWCxFQUFJMFMsR0FBRzZILGNBQ05DLFFBQVEsRUFBRyxNQUNYQyxPQUFPLEVBRVorRSxJQU9JYixFQUFBak0sR0FBVWtOLGFBQ1RKLE9BQU8sU0FBUzFFLEc3QnNxR2hCLE02QnRxRytDOWEsR0FBbkJuTCxNQUFNc3FCLFFBQVFyRSxHQUFPQSxFQUFFLEdBQWFBLEtBQ2hFK0UsTUFBTSxTQUFTL0UsRUFBRzNvQixHN0J3cUdsQixRNkJ2cUdhMEMsTUFBTXNxQixRQUFRckUsR0FBS3NFLEVBQWV0RSxFQUFFLElBQVcsRUFBSjNvQixFQUNyRCxHQUFpQixHQUFHLElBQUssS0FBUSxFQUFFaVYsS0FDdEMwWSxNQUtEOU0sRUFBVU4sR0FBRzdYLE9BQU84Z0IsR0FBSzdILE9BQU8sT0FBT0csUUFBUSxlQUNuRCxHQUFJOEYsRUFBQS9HLEVBQWNjLE9BQ2QsT0FFQ0MsS0FBSyxVQUFXLFc3QnVxR2hCLE02QnRxR1UsZ0JBRVZBLEtBQUssc0JBQXVCLFlBQzVCRCxPQUFPLEtBQ1BDLEtBQUssWUFBYSxxQjdCcXFHdEJnRyxHNkJucUdHdHJCLEtBRUpvc0IsRTdCc3FHQyxJNkJucUdHa0YsR0FBS2hHLEVBQUlqRyxPQUFPLEtBQ2ZDLEtBQUssUUFBUyxVQUNkSCxVQUFVLEtBQ1Z2akIsS0FBSzJQLEVBQUVzZSxNQUFNLEdBQUd0ZixNQUFNLElBQ3RCNlUsUUFBUUMsT0FFYixJN0IrcEdDaU0sRzZCL3BHRWpNLE9BQU8sVUFDTEMsS0FBSyxJQUVWL1QsRzdCOHBHQytmLEU2QjlwR0VqTSxPQUFPLFFBQ0xDLEtBQUssSUFBSyxTQUFTK0csRzdCOHBHbkIsTzZCOXBHZ0M5YSxFQUFFOGEsR0FBUyxJQUMzQy9HLEtBQUssWUFBYSxjQUNsQjVkLE1BQU0sY0FBZSxVQUNyQjhhLEtBQUssU0FBUzZKLEc3QjZwR2QsTTZCN3BHOEJBLEk3Qm9xR2xDLEk2QjlwR0drRixHQUFBakcsRUFBU2pHLE9BQU8sS0FDZkMsS0FBSyxRQUFTLFVBQ2RILFVBQVUsS0FDVnZqQixLQUFLcWlCLEdBQUcrSCxNQUFNLEVBQUcsSUFBSyxLQUN0QjVHLFFBQVFDLE9BQU8sS0FDWEMsS0FBSyxZQUFhLFNBQVMrRyxHN0IwcEcvQixNNkIxcEcyQyxXQUFhQSxFQUFJLElBQVksSzdCNnBHNUVrRixHNkIzcEdFbE0sT0FBTyxRQUNMQyxLQUFLLEtBRVZ5TCxHN0IwcEdDUSxFNkIxcEdFbE0sT0FBTyxRQUNMQyxLQUFLLElBQUt5TCxFQUFTLEdBQ25CekwsS0FBSyxLQUFNLFNBQ1g1ZCxNQUFNLGNBQWUsU0FBUzJrQixHN0J3cEc5QixNNkJ4cEcwQ0EsR0FBSSxLQUFPQSxFQUFJLElBQU0sTUFBZSxPQUM5RS9HLEtBQUssWUFBYSxTQUFTK0csRzdCeXBHM0IsTTZCenBHdUNBLEdBQUksS0FBT0EsRUFBSSxJQUFNLGVBQWlCMEUsRUFBUyxHQUFLLE1BQWUsT0FDMUd2TyxLQUFLLFNBQVM2SixHN0IwcEdkLE02QjFwRzBCaUUsR0FBYWpFLEVBQVEsSzdCZ3FHbkQsSTZCM3BHR21GLEdBQUFsRyxFQUFvQmpHLE9BQU8sS0FDMUJGLFVBQVUsS0FDVnZqQixLQUFLcXZCLEdBQ0w3TCxRQUFRQyxPQUFPLEtBQ1hDLEtBQUssWUFBYSxTQUFTK0csRzdCd3BHL0IsTTZCeHBHMkMsV0FBYUEsRUFBRXpxQixLQUFLLEdBQUcsR0FBSyxJQUFZLEs3QjJwR3ZGNHZCLEc2QnpwR2FuTSxPQUFPLFFBQ2hCQyxLQUFLLFFBQVMsUUFDZEEsS0FBSyxLQUVWeUwsRzdCdXBHQ1MsRTZCdnBHYW5NLE9BQU8sUUFDaEJDLEtBQUssSUFBS3lMLEVBQVMsR0FDbkJ6TCxLQUFLLElBQUssU0FBVStHLEc3QnNwR3BCLE82QnRwR29DQSxFQUFFenFCLEtBQUssR0FBRyxHQUFLLEdBQUcsSUFBSyxLQUFRLEVBQUUrVyxLQUFZMFksTUFDakYvTCxLQUFLLEtBQU0sU0FDWDVkLE1BQU0sY0FBZSxTQUFTMmtCLEc3QnNwRzlCLEc2QnRwR3VDb0YsR0FBTXBGLEVBQUV6cUIsS0FBSyxHQUFHLEVBQUksT0FBTzZ2QixHQUFNLEtBQU9BLEVBQU0sSUFBTSxNQUFlLE9BQzFHbk0sS0FBSyxZQUFhLFNBQVMrRyxHN0J1cEczQixHNkJ2cEdvQ29GLEdBQU1wRixFQUFFenFCLEtBQUssR0FBRyxFQUFJLE9BQU82dkIsR0FBTSxLQUFPQSxFQUFNLElBQU0sZUFBaUJWLEVBQVMsR0FBSyxNQUFlLE9BQ3RJdk8sS0FBSyxTQUFTNkosRzdCd3BHZCxNNkJ4cEcwQkEsR0FBVWxpQixPN0I4cEd4QyxJNkJ6cEdHdW5CLEdBQVkvSSxFQUFPLEdBQ3ZCLEU3QjhwR0NnSixLNkI3cEdvQkQsRUFDckIsT0FGeUJBLEVBQWEsT0FDdEMsSUFFQSxNQUVpQ3hCLEVBQU01RSxHQUNsQzlGLFFBQVEsc0JBRWIsUTdCd3BHQ21NLEU2QnhwR2FoSixFQUFRdUgsRUFBTTVFLEdBQ3ZCOUYsUUFBUSxjQUViLFE3QnVwR0M4RixFNkJ2cEdHbkcsVUFBVSxTQUNUdmpCLE1BQU0rbUIsRUFBTyxLQUNidkQsUUFDQUMsT0FBTyxVQUNQQyxLQUFLLFFBQVMsU0FDZEEsS0FBSyxZQUFhLFNBQVMrRyxHN0JvcEczQixNNkJscEdVLGFBREs2RCxHQUFNN0QsSUFBSTliLE1BQU0sR0FBR0EsTUFBTSxHQUNyQyxHQUNILE1BQ0ErVSxLQUFLLElBQUssS0FDVkEsS0FBSyxTQUFVLFFBQ2ZBLEtBQUssT0FBUSxXQUNiemdCLEdBQUcsWUFBYSxTQUFTd25CLEc3QitvR3pCRCxFNkI5b0dPd0YsS0FBSyxXQUFjaEUsT0FBT3ZCLEVBQUUsSUFBSWhELFVBQVUsRUFDOUMsSTdCOG9HSHBnQixLNkI5b0dRcVcsYUFBYSxJQUNsQixHN0I4b0dIclcsSzZCOW9HUXFXLGFBQWEsZUFDbEIsTzdCOG9HSDJFLEc2QjlvR003WCxPQUFPbkQsTUFBTXVjLFFBQVEsVUFDM0IsS0FDQTNnQixHQUFHLFdBQVksU0FBVXduQixHN0I4b0d6QkQsRTZCNW9HR3lGLE83QjZvR0g1b0IsSzZCN29HUXFXLGFBQWEsSUFDbEIsSzdCNm9HSHJXLEs2QjdvR1FxVyxhQUFhLGVBQ2xCLE83QjZvR0gyRSxHNkI3b0dNN1gsT0FBT25ELE1BQU11YyxRQUFRLFVBQzNCLEk3QitvR0osSTZCN29HRytLLEs3QmtwR0hBLEc2QjdvR00sUzdCOG9HRkssSzZCN29HUWUsRUFBY3hDLEVBQVVlLEVBR3JDNUUsSTdCNm9HQ2lGLEU2QjF5R0QsTzdCMnlHS0ssSzZCN29HUWUsRUFBYy92QixFQTlKM0IsTUE4SnVDc3VCLEVBR3ZDNUUsSTdCZ3BHQ2lGLEU2QjdvR01DLFFBQVFzQixPQUFTMUIsRUFBaUJqQixFQUFVZSxFQUFNNUUsRUFDekQ2RCxHN0I2b0dDb0IsRTZCbHpHRCxNQXFLYXVCLE9BQVMxQixFQUFpQnh1QixFQXJLdkMsTUFxS21Ec3VCLEVBQU01RSxFQUV6RDZELEU3QjZvR0MsSTZCN29HRzBCLEdBQWV0TSxFQUFRYyxPQUFPLE9BQU9HLFFBQVEsaUJBRWpELEU3QjZvR0M1akIsRzZCN29HSXVMLEtBQUttRCxRQUFRLFNBQVV0SixHN0I4b0d2QixHNkI3b0dHK3FCLEdBQWtCbEIsRUFBYXhMLE9BRW5DLE03QjZvR0MwTSxHNkI3b0dlMU0sT0FBTyxTQUNsQkMsS0FBSyxPQUFRLFlBQ2JBLEtBQUssS0FBTSxTQUFXdGUsRUFBTW1jLEVBQUl0VCxXQUFXYSxRQUFRLElBQUssSUFBTSxJQUFNd1MsRUFBSXJULFdBQVdhLFFBQVEsSUFBSyxLQUNoRzRVLEtBQUssUUFBU3RlLEdBQ2RnckIsU0FBUyxVQWhMbEIsU0FnTDhCaHJCLEdBQ3JCbkMsR0FBRyxTQUFVLFNBQVU2RSxHN0J5b0d2QixHNkJ4b0dPdW9CLEdBQVVocEIsS0FDZHZJLEtBQUt1SSxNQUFLaXBCLFNBSUQzQixFQUFPenNCLGVBQWVtdUIsSzdCeW9HMUIxQixFNkJ4b0dVMEIsTzdCMm9HZDFCLEU2QnhvR1UwQixHQUFTckIsS0FBT2UsRUFBYy92QixFQUFLcXdCLEdBQVUvQixFQUNwRDVFLEc3QndvR0hpRixFNkJ4b0dVMEIsR0FBU0gsT0FBUzFCLEVBQWlCeHVCLEVBQUtxd0IsR0FBVS9CLEVBQU01RSxFQUNsRTZELEs3QituR0FvQixFNkJ4b0dVMEIsR0FBU3JCLEtBQ2hCN2xCLFM3QndvR0h3bEIsRTZCeG9HVTBCLEdBQVNILE9BQ25CL21CLFk3QmtwR1JnbkIsRTZCeG9HZTFNLE9BQU8sU0FDbEI3QyxLQUFLeGIsR0FDTHNlLEtBQUssTUFBTyxTQUFXdGUsRUFBTW1jLEVBQUl0VCxXQUFXYSxRQUFRLElBQUssSUFBTSxJQUFNd1MsRUFBSXJULFdBQVdhLFFBQVEsSUFDcEcsTTdCd29HQSxJNkJ0b0dHcWhCLEdBQWtCbEIsRUFBYXhMLE9BRW5DLE03QnNvR0MwTSxHNkJ0b0dlMU0sT0FBTyxTQUNsQkMsS0FBSyxPQUFRLFlBQ2JBLEtBQUssS0FBTSxpQkFBbUJuQyxFQUFJdFQsV0FBV2EsUUFBUSxJQUFLLElBQU0sSUFBTXdTLEVBQUlyVCxXQUFXYSxRQUFRLElBQUssS0FDbEc0VSxLQUFLLFFBQVMsV0FDZDBNLFNBQVMsV0FBVyxHQUNwQm50QixHQUFHLFNBQVUsU0FBVTZFLEc3QmtvR3ZCLEc2QmpvR091b0IsR0FBVWhwQixLQUNkdkksS0FBS3VJLE1BQUtpcEIsU0FJRDNCLEVBQU96c0IsZUFBZW11QixLN0Jrb0cxQjFCLEU2QmpvR1UwQixPN0Jvb0dkMUIsRTZCam9HVTBCLEdBQVNyQixLQUFPZSxFQUFjL3ZCLEVBQUtxd0IsR0FBVS9CLEVBRXBENUUsRzdCaW9HSGlGLEU2QmpvR1UwQixHQUFTSCxPQUFTMUIsRUFBaUJ4dUIsRUFBS3F3QixHQUFVL0IsRUFBTTVFLEVBQ2xFNkQsSzdCdW5HQW9CLEU2QmpvR1UwQixHQUFTckIsS0FDaEI3bEIsUzdCaW9HSHdsQixFNkJqb0dVMEIsR0FBU0gsT0FDbkIvbUIsWTdCNG9HUmduQixFNkJqb0dlMU0sT0FBTyxTQUNsQjdDLEtBQUssWUFDTDhDLEtBQUssTUFBTyxpQkFBbUJuQyxFQUFJdFQsV0FBV2EsUUFBUSxJQUFLLElBQU0sSUFBTXdTLEVBQUlyVCxXQUFXYSxRQUFRLElBRW5HLEk3QituR0MsSTZCL25HR3loQixHQUFtQnRCLEVBQWF4TCxPQUFPLE9BQ3RDRyxRQUFRLHNCQUViLEU3QjhuR0MyTSxHNkI5bkdpQjlNLE9BQU8sU0FDcEJDLEtBQUssT0FBUSxZQUNiQSxLQUFLLEtBQU0sc0JBQXdCbkMsRUFBSXRULFdBQVdhLFFBQVEsSUFBSyxJQUFNLElBQU13UyxFQUFJclQsV0FBV2EsUUFBUSxJQUFLLEtBQ3ZHc2hCLFNBQVMsV0FBVyxHQUNwQm50QixHQUFHLFNBQVUsU0FBVTZFLEc3QjJuR3ZCOG5CLEU2QjFuR2lCOXBCLE1BQU0sVUFBWXVCLEtBQUtpcEIsUUFBVyxFQUNuRCxLN0I0bkdKQyxFNkIxbkdpQjlNLE9BQU8sU0FDcEI3QyxLQUFLLGNBQ0w4QyxLQUFLLE1BQU8sc0JBQXdCbkMsRUFBSXRULFdBQVdhLFFBQVEsSUFBSyxJQUFNLElBQU13UyxFQUFJclQsV0FBV2EsUUFBUSxJQUMzRyxLQUlELFFBQVNzZ0IsR0FBaUJwdkIsRzdCeW5HckIsRzZCeG5HRzhCLEdBQUc4aUIsRUFBR3ppQixFQUNWcXVCLEVBR0FDLEVBSElDLEVBQ0osRUFBSUMsRUFDSixDN0IybkdDLEtBRkF4dUIsRTZCdG5HRCxHQUFLTCxFQUFJLEVBQUdBLEVBQUk5QixFQUFLdUwsS0FBS3BKLE9BQVFMLEk3QjBuRzdCLEdBREEwdUIsRTZCeG5HS3h3QixFQUFLQSxFQUFLdUwsS0FDaEJ6SixJQUFJMHVCLEVBQUlydUIsU0FBV0EsRTdCd25HbEIsQ0FLQSxJQURBc3VCLEU2QnZuR0QsRUFBSzdMLEVBQUksRUFBR0EsRUFBSXppQixFQUFPLEVBQUd5aUIsSTdCeW5HckI2TCxHNkJ4bkdPRCxFQUFJNUwsR0FBRyxHQUFLNEwsRUFBSTVMLEVBQUUsSUFDN0IsRTdCeW5HQTZMLEk2QnZuR0QsRzdCd25HQ0MsRzZCdm5HSkQsTUFST0UsSTdCaW9HUEQsRzZCeG5HVTNaLEtBQUs2WixJQUFJRixJQUFhMXdCLEVBQUt1TCxLQUFLcEosT0FFM0N3dUIsRTdCd25HQyxJNkJ0bkdERSxHQUNJQyxFQUNKQyxFQUNJQyxFQUVKQyxFQVBJQyxFQUNKLElBQ0lDLEVBQ0osRUFDSUMsRUFBT3B4QixFQUNYNHVCLE83QjBuR0MsSzZCeG5HSTlzQixFQUFJLEVBQUdBLEVBQUlLLEVBQU8sRUFBR0wsSUFDdEIsQzdCMG5HQyxJQUZBZ3ZCLEU2QnZuR0QsRTdCd25HQ0MsRTZCdm5HRCxFQUFLRSxFQUFVLEVBQUdBLEVBQVU5dUIsRUFBTyxFQUFHOHVCLEk3QnluR2pDck0sRzZCeG5HSTlpQixFQUFJbXZCLEdBQ1QsRzdCd25HQ0QsRzZCeG5HSXBNLEVBQUksSUFFVCxHN0J3bkdDa00sRzZCeG5HVzFWLFNBQVNnVyxFQUFLeE0sR0FDMUIsSTdCd25HQ21NLEc2QnhuR1kzVixTQUFTZ1csRUFBS0osR0FDOUIsRzdCeW5HQUgsRzZCeG5HVzlaLEtBQUs2WixJQUFJRSxFQUNyQkMsR0FBSUYsRUFBWUssSTdCeW5HWEEsRTZCdm5HREwsRTdCd25HQ00sRTZCdm5HSnJ2QixHN0IybkdKLEc2QnhuR0d1dkIsR0FBY2pXLFNBQVNnVyxFQUFLRCxHQUNoQyxJQUFJRyxFQUFlbFcsVUFBVWdXLEVBQUtELEVBQVksSUFFOUMsSUFBSUksRUFBWXhhLEtBQUs2WixJQUFJRixFQUFXVyxHQUFldGEsS0FBSzZaLElBQUlGLEVBQzVEWSxFN0Jnb0dDLE82QmhvR2dCdmEsTUFBSzZaLEtBQUtGLEVBQVdXLEdBQWV0YSxLQUFLNlosS0FBS0YsRUFDL0RZLEdBQWlCQyxJN0J5bkdaSixHNkJ2bkdKLE1BRW1CLEVBQ3BCLElBQStCLEVBQVpBLEVBQWlCLEVBRXBDVCxJQU1KLFFBQVNwQixHQUFxQnR2QixFQUFNd3hCLEc3QnluRy9CLEc2QnhuR0dDLEdBQWExYSxLQUFLNlYsT0FBTzRFLEVBQVcsR0FDeEMsRUFBSUMsR0FBYSxLN0J5bkdaQSxHNkJ2bkdKLEc3QjBuR0EsSTZCeG5HRzN2QixHQUFHOGlCLEVBQUd6aUIsRUFDTnV1QixFQUNKLEM3QjJuR0MsS0FGQXZ1QixFNkJ0bkdELEdBQUtMLEVBQUksRUFBR0EsRUFBSUssRUFBUUwsSTdCeW5HbkI4aUIsRzZCeG5HSTZNLEVBQWEzdkIsR0FDbEJLLEU3QnduR0N1dUIsRzZCeG5HV3RWLFNBQVNwYixFQUFLNGtCLEdBQzdCLEc3QjBuR0EsSTZCbG5HRzhNLEdBQWNDLEVBRWxCQyxFQVJJQyxFQUNKLElBRHVCbkIsRUFDbkJvQixFQUNKLEdBRHNCcEIsRUFDbEJxQixFQUNKLElBRDBCckIsRUFDdEJzQixHQUFvQixFQUNwQkMsR0FBbUIsRUFDbkJDLEdBQ0osQzdCMm5HQyxLQURBeEIsRTZCdm5HRCxFQUFLNXVCLEVBQUksRUFBR0EsRUFBSUssRUFBUUwsSTdCMm5HbkIsR0FGQThpQixHNkJ4bkdJNk0sRUFBYTN2QixHQUNsQkssRTdCd25HQ3V1QixHNkJ4bkdXdFYsU0FBU3BiLEVBQUs0a0IsR0FDMUIsS0FBS29OLEdBQXFCdEIsRUFBV21CLEU3QnluR2hDSCxFNkJ2bkdEOU0sRTdCd25HQ29OLEc2QnZuR0QsTTdCMG5HSCxLNkJ4bkdJQyxHQUFvQnZCLEVBQVdvQixFN0J5bkcvQkgsRTZCdm5HRC9NLEU3QnduR0NxTixHNkJ2bkdELE03QjBuR0gsSzZCeG5HSUMsR0FBd0J4QixFQUFXcUIsRUFDcEMsQzdCd25HQ0gsRTZCdm5HRGhOLEU3QnduR0NzTixHNkJ2bkdELENBQ0gsTzdCMm5HSixHNkJ4bkdHQyxJQUFnQixFQUVwQixFN0I0bkdDLFNBQ0k1cEIsTTZCdG5HRyxNN0J1bkdIdkksTTZCdm5HYW15QixHQVBnQixFQUFmVCxFQUFvQixFQUN2QyxRN0IrbkdLbnBCLE02QnJuR0csTTdCc25HSHZJLE02QnRuR2FteUIsR0FWYyxFQUFkUixFQUFtQixFQUNyQyxRN0Jpb0dLcHBCLE02QnBuR0csTTdCcW5HSHZJLE02QnJuR2FteUIsR0Fic0IsRUFBbEJQLEVBQXVCLEVBRTdDLFFBa0JKLFFBQVNyRCxHQUFldnVCLEVBQU1zdUIsRUFBTTVFLEc3QnFuRy9CLE02QnBuR01BLEdBQUlqRyxPQUFPLFFBQ2JDLEtBQUssUUFBUyxRQUNkQSxLQUFLLElBQUs0SyxFQUNsQnR1QixJQUVELFFBQVMrdkIsR0FBYy92QixFQUFNc3VCLEVBQU01RSxHN0Jtbkc5QixNNkJsbkdNQSxHQUFJakcsT0FBTyxRQUNiMk8sTUFBTXB5QixHQUNOMGpCLEtBQUssUUFBUyxRQUNkQSxLQUFLLElBQ2I0SyxHQUVELFFBQVNFLEdBQWlCeHVCLEVBQU1zdUIsRUFBTTVFLEVBQUs2RCxHN0Jnbkd0QyxNQUFPN0QsRzZCL21HR25HLFVBQVUsU0FDaEJ2akIsS0FBS0EsR0FDTHdqQixRQUNBQyxPQUFPLFVBQ1BDLEtBQUssUUFBUyxTQUNkQSxLQUFLLFlBQWEsU0FBUytHLEVBQUczb0IsRzdCNm1HOUIsTTZCMW1HVSxhQURLd3NCLEdBREE5cEIsTUFBTXNxQixRQUFRckUsR0FBS0EsR0FBUSxFQUFGM29CLEVBQU8sRUFDNUMyb0IsS0FBMEI5YixNQUFNLEdBQUdBLE1BQU0sR0FDekMsR0FDSCxNQUNBK1UsS0FBSyxJQUFLLEdBQ1ZBLEtBQUssU0FBVSxRQUNmQSxLQUFLLE9BQU8sU0FBUytHLEVBQUUzb0IsRzdCeW1HdkIsTTZCdm1HVXV3QixHQURHN3RCLE1BQU1zcUIsUUFBUXJFLEdBQUtBLEVBQUUsR0FDL0JBLEVBQXlCOEMsRUFBU3pyQixFQUFFLElBQ3ZDLEtBQ0FtQixHQUFHLFlBQWFxdkIsR0FDaEJydkIsR0FBRyxXQUNYc3ZCLEdBRUQsUUFBU0QsR0FBcUI3SCxHN0JzbUd6QixHNkJybUdHK0gsR0FBWWh1QixNQUFNc3FCLFFBQVFyRSxHQUFLZ0ksRUFBV2hJLEVBQUUsSUFBTSxLQUFRQSxFQUFFLEdBQUssWUFDckVBLEM3QnFtR0NELEc2QnJtR0d3RixLQUNKd0MsRzdCcW1HQ25yQixLNkJybUdJcVcsYUFBYSxJQUNsQixHN0JxbUdDclcsSzZCcm1HSXFXLGFBQWEsZUFDckIsT0FFRCxRQUFTNlUsR0FBb0I5SCxHN0JzbUd4QkQsRTZCcG1HRHlGLE83QnFtR0M1b0IsSzZCcm1HSXFXLGFBQWEsSUFDbEIsRzdCcW1HQ3JXLEs2QnJtR0lxVyxhQUFhLGVBQ3JCLE9BRUQsUUFBU3dSLEdBQWV2TSxFQUFTdmQsRUFBS2lWLEVBQU1zUSxFQUFNZ0UsRUFBUTN1QixFQUFNc3VCLEVBQU01RSxFQUFLNkQsRUFBVWhNLEVBQUtELEc3QnNtR3JGLEc2QnJtR0c2TyxHQUFrQnhOLEVBQVFjLE9BRTlCLE03QnFtR0MwTSxHNkJybUdlMU0sT0FBTyxTQUNsQkMsS0FBSyxPQUFRLFlBQ2JBLEtBQUssS0FBTXJKLEVBQU8sSUFBTWpWLEVBQU1tYyxFQUFJdFQsV0FBV2EsUUFBUSxJQUFLLElBQU0sSUFBTXdTLEVBQUlyVCxXQUFXYSxRQUFRLElBQUssS0FDbEc0VSxLQUFLLFFBQVN0ZSxHQUNkZ3JCLFNBQVMsVUFBWWhyQixJQUFRdWxCLEdBQzdCMW5CLEdBQUcsU0FBVSxTQUFVNkUsRzdCaW1HdkIsRzZCaG1HT3VvQixHQUFVaHBCLEtBQ2R2SSxLQUFLdUksTUFBS2lwQixTQUlEM0IsRUFBT3pzQixlQUFlbXVCLEs3QmltRzFCMUIsRTZCaG1HVTBCLE83QmttR2QxQixFNkJobUdVMEIsR0FBU3JCLEtBQU9ULEVBQWV2dUIsRUFBS3F3QixHQUFVL0IsRUFDckQ1RSxHN0JnbUdIaUYsRTZCaG1HVTBCLEdBQVNILE9BQVMxQixFQUFpQnh1QixFQUFLcXdCLEdBQVUvQixFQUFNNUUsRUFDbEU2RCxLN0J3bEdBb0IsRTZCaG1HVTBCLEdBQVNyQixLQUNoQjdsQixTN0JnbUdId2xCLEU2QmhtR1UwQixHQUFTSCxPQUNuQi9tQixZN0J5bUdSZ25CLEU2QmhtR2UxTSxPQUFPLFNBQ2xCN0MsS0FBS3hiLEdBQ0xzZSxLQUFLLE1BQU9ySixFQUFPLElBQU1qVixFQUFNbWMsRUFBSXRULFdBQVdhLFFBQVEsSUFBSyxJQUFNLElBQU13UyxFQUFJclQsV0FBV2EsUUFBUSxJQUN0RyxLQUVELFFBQVN1akIsR0FBY3Z6QixFQUFPNHRCLEVBQVFnRyxHN0IrbEdqQyxHNkI5bEdHQyxHQUFPN3pCLEVBQ1g0dEIsRUFBSWtHLEVBQWdCN2IsS0FBSzZaLElBQUkrQixHQUFNakcsRUFBVSxJQUM3Q2dHLEVBQUlHLEVBQWEsSUFBTUQsRUFFdkIsRzdCOGxHQyxPNkI5bEdHRCxHQUFPLEVBQ0EsZUFBaUJFLEVBQzNCLElBQ1UsaUJBQW1CQSxFQUM3QixJQUtMLFFBQVMvRSxHQUFXZ0YsRzdCK2xHZkEsRTZCOWxHTUEsRUFDUDdrQixVN0I4bEdDLEk2QjlsR0cwYyxHQUFPbUksRUFBS3JMLFVBQVUsRUFDMUIsR0FBSXNMLEVBQVEzWCxTQUFTMFgsRUFBS3JMLFVBQVUsRUFBRyxHQUFJLElBQzNDLEVBQUlvSSxFQUFNaUQsRUFBS3JMLFVBQVUsRUFFekIsRTdCOGxHQyxPNkI5bEdNLElBQUloTSxNQUFLa1AsRUFBTW9JLEVBQ3pCbEQsR0FFRCxRQUFTZCxHQUFnQitELEc3QitsR3BCLE02QjlsR29CLGdCQUFWQSxJN0IrbEdOQSxFNkI5bEdNaEYsRUFDUGdGLEdBQU9BLEVBQ1ZqSSxVQUVBaUksRUFHTCxRQUFTTCxHQUFZSyxHN0IrbEdoQixNNkI5bEdZLFlBQVRBLEVBQW9DQSxHN0JrbUd2Q0EsRTZCaG1HTWhGLEVBQ1BnRixHQUFPRSxFQUFZRixFQUFLOUgsWUFBYyxJQUFNaUksRUFBa0JILEVBQUs1SCxXQUFhLEtBQU80SCxFQUMxRmxJLGVBRUQsUUFBU29JLEdBQWFELEc3QmltR2pCLE82Qi9sR0dBLEc3QmdtR0MsSTZCL2xHRyxHN0JnbUdDLE02Qi9sR0wsTTdCZ21HQyxLNkIvbEdHLEc3QmdtR0MsTTZCL2xHTCxNN0JnbUdDLEs2Qi9sR0csRzdCZ21HQyxNNkIvbEdMLE03QmdtR0MsSzZCL2xHRyxHN0JnbUdDLE02Qi9sR0wsTTdCZ21HQyxLNkIvbEdHLEc3QmdtR0MsTTZCL2xHTCxLN0JnbUdDLEs2Qi9sR0csRzdCZ21HQyxNNkIvbEdMLE03QmdtR0MsSzZCL2xHRyxHN0JnbUdDLE02Qi9sR0wsTTdCZ21HQyxLNkIvbEdHLEc3QmdtR0MsTTZCL2xHTCxNN0JnbUdDLEs2Qi9sR0csRzdCZ21HQyxNNkIvbEdMLE03QmdtR0MsSzZCL2xHRyxHN0JnbUdDLE02Qi9sR0wsTTdCZ21HQyxLNkIvbEdHLEk3QmdtR0MsTTZCL2xHTCxNN0JnbUdDLEs2Qi9sR0csSTdCZ21HQyxNNkI5bEdaLFFBRUQsUUFBU0UsR0FBa0JwRCxHN0JpbUd0QixHNkJobUdHakwsR0FBSWlMLEVBQU0sR0FDVm1CLEVBQUluQixFQUNSLEc3QmdtR0MsTzZCaG1HUyxLQUFOakwsR0FBaUIsS0FBTm9NLEVBQ0puQixFQUNWLEtBQ1MsSUFBTmpMLEdBQWlCLEtBQU5vTSxFQUNKbkIsRUFDVixLQUNTLElBQU5qTCxHQUFpQixLQUFOb00sRUFDSm5CLEVBQ1YsS0FDTUEsRUFDVixLN0J3MUVBanhCLE9BQU9DLGVBQWViLEVBQVMsY0FDM0JjLE9BQU8sSUFFWGQsRTZCcHNHZStCLGM3QnFzR2YvQixFNkI3cUdleUMsaUJBMUJoQixJQUVBK3BCLEdBNEJJMEksRUFBV253QixFQUFFbUQsS0FBS2hDLFdBRWxCeW5CLEVBQUEsR0FBZ0J1SCxJN0Iyc0dmQyxRNkJ6c0dELHFCN0Iwc0dDQyxVNkJ6c0dELHlCN0Iwc0dDQyxVNkIxc0dVLEdBQ1gsSTdCMHNHQ0MsWTZCMXNHWSxHQUNiLEk3QjBzR0NDLGE2QjFzR2EsR0FDZCxJN0Iwc0dDQyxZNkIxc0dZLEdBQUksTUFHakI5SCxFQUFBLEdBQWdCd0gsSTdCMnNHZkMsUTZCenNHRCx1QjdCMHNHQ0MsVTZCenNHRCx5QjdCMHNHQ0MsVTZCMXNHVSxHQUNYLEk3QjBzR0NDLFk2QjFzR1ksR0FDYixJN0Iwc0dDQyxhNkIxc0dhLEdBQ2QsSTdCMHNHQ0MsWTZCMXNHWSxHQUFJLE1BOHpCakI5RSxHN0JpbUdDK0UsRTZCL2xHRCxNN0JnbUdDQyxFNkIvbEdELE03QmdtR0NDLEU2Qi9sR0QsTTdCZ21HQ0MsRTZCL2xHRCxNN0JnbUdDQyxFNkIvbEdELE03QmdtR0NDLEU2Qi9sR0QsTTdCZ21HQ0MsRTZCL2xHRCxNN0JnbUdDQyxFNkIvbEdELE03QmdtR0NDLEU2Qi9sR0QsTTdCZ21HQ0MsRTZCL2xHRCxNN0JnbUdDQyxHNkIvbEdELE03QmdtR0NDLEc2QmhtR0csUTdCcW1HRixTQUFTbjJCLEVBQVFELEdBRXRCLFk4QmgrSGMsU0FBU3EyQixLOUJ1K0hyQmhTLEc4QnQrSEVrQixVQUFVLGtCQUFrQnRnQixHQUFHLFFBQ25DcXhCLEdBRUQsUUFBU0EsS0FFSGp0QixLQUFLa0MsVUFBVUMsU0FBUyxZQUc1QitxQixJQUVBQyxJOUJzK0hDblMsRzhCdCtIRWtCLFVBQVUsMENBQ1ZLLFFBQVEsU0FBVSxXOUJzK0hsQixPOEJyK0hTdkIsR0FBRzdYLE9BQU9uRCxNQUFNdWMsUUFDekIsYUFJTCxRQUFTMlEsSzlCcStITixHOEJwK0hHRSxHQUFXcFMsR0FBR2tCLFVBRWxCLDhCQUFJbVIsRUFBZUQsRUFBUzdRLFFBQzVCLGlCQUFJK1EsRUFBZUYsRUFBUzdRLFFBRTVCLGdCOUJvK0hDNlEsRzhCbitIRTdRLFFBQVEsaUJBQWtCOFEsR0FDMUI5USxRQUFRLGlCQUNaK1EsR0FFRCxRQUFTSCxLOUJtK0hOLEc4QmwrSEtuUixHQUFlL00sU0FBU21NLGVBQWUsZUFDM0NtUyxXOUJrK0hEdGUsVThCbCtIVW1NLGVBQWUsZUFBZTNjLE1BQU11ZCxhQUFlQSxFQUMvRCxLOUJrOEhBemtCLE9BQU9DLGVBQWViLEVBQVMsY0FDN0JjLE9BQU8sSUFFVGQsRUFBUVcsUUFBVTAxQixHQWlDYixTQUFTcDJCLEVBQVFEIiwiZmlsZSI6ImluZGV4X2J1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9wYXJzZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0dmFyIF9wYXJzZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGFyc2VyKTtcblx0XG5cdHZhciBfc2VhcmNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBfc2VhcmNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaCk7XG5cdFxuXHR2YXIgX3BhbmVsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdFxuXHR2YXIgX3BhbmVsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3BhbmVsKTtcblx0XG5cdHZhciBfYmFzZWxheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdFxuXHR2YXIgX2dyYXBoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdFxuXHR2YXIgX3RhYnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0XG5cdHZhciBfdGFiczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90YWJzKTtcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHR2YXIgX3RvZ2dsZUxheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0dmFyIGNzcyA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHRcblx0Ly8gRG9lcyBub3QgcmVseSBvbiBtYXAgb2JqZWN0IG9yIGNvbmZpZyBmaWxlXG5cdHZhciBCYXNlID0gZnVuY3Rpb24gQmFzZShjb25maWcpIHtcblx0ICAgICgwLCBfcGFyc2VyMi5kZWZhdWx0KShjb25maWcsIGNhbGxiYWNrKTtcblx0ICAgICgwLCBfZ3JhcGguU2V0dXBHcmFwaHMpKCk7XG5cdCAgICAoMCwgX3RhYnMyLmRlZmF1bHQpKCk7XG5cdH07XG5cdFxuXHQvLyBEb2VzIHJlbHkgb24gbWFwIG9iamVjdCBvciBjb25maWcgZmlsZVxuXHR2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjayhkYXRhKSB7XG5cdCAgICAoMCwgX3NoYXJlLkFkZFNoYXJlU2V0dGluZ3NUb0NvbmZpZykoZGF0YSk7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuQ3JlYXRlTWFwKShkYXRhLm1hcCk7XG5cdCAgICAoMCwgX2Jhc2VsYXllci5DcmVhdGVCYXNlTGF5ZXJzKShtYXAsIGRhdGEuYmFzZWxheWVycyk7XG5cdCAgICAoMCwgX3RvZ2dsZUxheWVyLkNyZWF0ZURlZmF1bHRMYXllcnMpKGRhdGEubGF5ZXJzLCBkYXRhW1wiYWN0aXZlLWxheWVyc1wiXSk7XG5cdCAgICAoMCwgX3BhbmVsMi5kZWZhdWx0KShkYXRhLmxheWVycywgZGF0YS5sYXlvdXQpO1xuXHQgICAgKDAsIF9zZWFyY2gyLmRlZmF1bHQpKG1hcCk7XG5cdCAgICAoMCwgX2dyYXBoLkJpbmRHcmFwaEV2ZW50cykobWFwKTtcblx0ICAgICgwLCBfc2hhcmUuQmluZFVwZGF0ZVNoYXJlVXJsKShtYXApO1xuXHR9O1xuXHRcblx0d2luZG93LkJhc2UgPSBCYXNlO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0geyBCYXNlOiBCYXNlIH07XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFBhcnNlQ29uZmlnO1xuXHQvKipcclxuXHQgKiBQYXJzZXMgYSBjb25maWcgZmlsZS4gU2luY2UgdGhlIHByb2Nlc3MgdG8gZ2V0IGV4dGVybmFsIGZpbGVzXHJcblx0ICogdXNlcyBBSkFYIHlvdSBuZWVkIHRvIHBhc3MgYSBjYWxsYmFjayB0byBoYW5kbGUgdGhlIG5leHQgc3RlcHNcclxuXHQgKiBvZiB1c2luZyB0aGUgY29uZmlnIGZpbGUsIHNpbmNlIHdlIGRvIG5vdCBrbm93IGhvdyBsb25nIGl0XHJcblx0ICogd2lsbCB0YWtlIHRvIGdyYWIgdGhlIGZpbGUuXHJcblx0ICovXG5cdGZ1bmN0aW9uIFBhcnNlQ29uZmlnKGNvbmZpZ0ZpbGUsIGNhbGxiYWNrKSB7XG5cdCAgICBHZXRDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBHZXRDb25maWcoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcblx0ICAgIHZhciB4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdCAgICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoeG1saHR0cC5yZWFkeVN0YXRlID09IDQpIHtcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4bWxodHRwLnJlc3BvbnNlVGV4dCk7XG5cdCAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFUlJPUjogTWFsZm9ybWVkIEpTT04gaW4gY29uZmlnIGZpbGUuXCIpO1xuXHQgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBmb3JtYXRNYXAoZGF0YSk7XG5cdCAgICAgICAgICAgIGZvcm1hdExheWVycyhkYXRhKTtcblx0ICAgICAgICAgICAgY2FsbGJhY2soZGF0YSk7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB4bWxodHRwLm9wZW4oXCJHRVRcIiwgY29uZmlnRmlsZSwgdHJ1ZSk7XG5cdCAgICB4bWxodHRwLnNlbmQoKTtcblx0ICAgIGNvbnNvbGUubG9nKFwiaGlcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdE1hcChkYXRhKSB7XG5cdCAgICBpZiAoIWRhdGEubWFwKSBkYXRhLm1hcCA9IHt9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRMYXllcnMoZGF0YSkge1xuXHQgICAgdmFyIGxheWVycyA9IGRhdGEubGF5ZXJzO1xuXHQgICAgdmFyIGRlZmF1bHRNYXBzZXJ2ZXJVcmwgPSBkYXRhLm1hcHNlcnZlclVybDtcblx0ICAgIHZhciBkZWZhdWx0RW5hYmxlZExheWVycyA9IGRhdGFbXCJhY3RpdmUtbGF5ZXJzXCJdO1xuXHQgICAgdmFyIGxheWVyZ3JvdXA7XG5cdCAgICB2YXIgaTtcblx0XG5cdCAgICBmb3IgKHZhciBwcm9wIGluIGxheWVycykge1xuXHQgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG5cdCAgICAgICAgbGF5ZXJncm91cCA9IGxheWVyc1twcm9wXTtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGF5ZXJncm91cC5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBzZXRNYXBzZXJ2ZXJVcmwobGF5ZXJncm91cFtpXSwgZGVmYXVsdE1hcHNlcnZlclVybCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZXRNYXBzZXJ2ZXJVcmwobGF5ZXIsIHVybCkge1xuXHQgICAgbGF5ZXIudXJsID0gbGF5ZXIudXJsIHx8IHVybDtcblx0fVxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBDcmVhdGVTZWFyY2g7XG5cdFxuXHR2YXIgX2xlYWZsZXRHZW9zZWFyY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0ZnVuY3Rpb24gQ3JlYXRlU2VhcmNoKG1hcCkge1xuXHQgICAgdmFyIHByb3ZpZGVyID0gbmV3IF9sZWFmbGV0R2Vvc2VhcmNoLkVzcmlQcm92aWRlcigpO1xuXHRcblx0ICAgIHZhciBzZWFyY2hDb250cm9sID0gbmV3IF9sZWFmbGV0R2Vvc2VhcmNoLkdlb1NlYXJjaENvbnRyb2woe1xuXHQgICAgICAgIHByb3ZpZGVyOiBwcm92aWRlcixcblx0ICAgICAgICBzaG93TWFya2VyOiBmYWxzZVxuXHQgICAgfSk7XG5cdFxuXHQgICAgbWFwLmFkZENvbnRyb2woc2VhcmNoQ29udHJvbCk7XG5cdFxuXHQgICAgTC5Eb21FdmVudC5vbihzZWFyY2hDb250cm9sLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuY29udGFpbmVyLCBcImNsaWNrXCIsIGZ1bmN0aW9uIChldikge1xuXHQgICAgICAgIEwuRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKGV2KTtcblx0ICAgIH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbGVhZmxldENvbnRyb2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdHZW9TZWFyY2hDb250cm9sJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGVhZmxldENvbnRyb2wpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfc2VhcmNoRWxlbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdTZWFyY2hFbGVtZW50Jywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoRWxlbWVudCkuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9iaW5nUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnQmluZ1Byb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmluZ1Byb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX2VzcmlQcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdFc3JpUHJvdmlkZXInLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9lc3JpUHJvdmlkZXIpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBfZ29vZ2xlUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnR29vZ2xlUHJvdmlkZXInLCB7XG5cdCAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nb29nbGVQcm92aWRlcikuZGVmYXVsdDtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIF9vcGVuU3RyZWV0TWFwUHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnT3BlblN0cmVldE1hcFByb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb3BlblN0cmVldE1hcFByb3ZpZGVyKS5kZWZhdWx0O1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgX3Byb3ZpZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ1Byb3ZpZGVyJywge1xuXHQgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpLmRlZmF1bHQ7XG5cdCAgfVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO2ZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcblx0ICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfXJldHVybiB0YXJnZXQ7XG5cdH07XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBMZWFmbGV0Q29udHJvbDtcblx0XG5cdHZhciBfbG9kYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHR2YXIgX2xvZGFzaDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sb2Rhc2gpO1xuXHRcblx0dmFyIF9zZWFyY2hFbGVtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHR2YXIgX3NlYXJjaEVsZW1lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoRWxlbWVudCk7XG5cdFxuXHR2YXIgX3Jlc3VsdExpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdHZhciBfcmVzdWx0TGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZXN1bHRMaXN0KTtcblx0XG5cdHZhciBfZG9tVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdHZhciBfY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHR2YXIgZGVmYXVsdE9wdGlvbnMgPSBmdW5jdGlvbiBkZWZhdWx0T3B0aW9ucygpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcG9zaXRpb246ICd0b3BsZWZ0Jyxcblx0ICAgIHN0eWxlOiAnYnV0dG9uJyxcblx0ICAgIHNob3dNYXJrZXI6IHRydWUsXG5cdCAgICBzaG93UG9wdXA6IGZhbHNlLFxuXHQgICAgbWFya2VyOiB7XG5cdCAgICAgIGljb246IG5ldyBMLkljb24uRGVmYXVsdCgpLFxuXHQgICAgICBkcmFnZ2FibGU6IGZhbHNlXG5cdCAgICB9LFxuXHQgICAgbWF4TWFya2VyczogMSxcblx0ICAgIHJldGFpblpvb21MZXZlbDogZmFsc2UsXG5cdCAgICBhbmltYXRlWm9vbTogdHJ1ZSxcblx0ICAgIHNlYXJjaExhYmVsOiAnRW50ZXIgYWRkcmVzcycsXG5cdCAgICBub3RGb3VuZE1lc3NhZ2U6ICdTb3JyeSwgdGhhdCBhZGRyZXNzIGNvdWxkIG5vdCBiZSBmb3VuZC4nLFxuXHQgICAgbWVzc2FnZUhpZGVEZWxheTogMzAwMCxcblx0ICAgIHpvb21MZXZlbDogMTgsXG5cdCAgICBjbGFzc05hbWVzOiB7XG5cdCAgICAgIGNvbnRhaW5lcjogJ2xlYWZsZXQtYmFyIGxlYWZsZXQtY29udHJvbCBsZWFmbGV0LWNvbnRyb2wtZ2Vvc2VhcmNoJyxcblx0ICAgICAgYnV0dG9uOiAnbGVhZmxldC1iYXItcGFydCBsZWFmbGV0LWJhci1wYXJ0LXNpbmdsZScsXG5cdCAgICAgIG1zZ2JveDogJ2xlYWZsZXQtYmFyIG1lc3NhZ2UnLFxuXHQgICAgICBmb3JtOiAnJyxcblx0ICAgICAgaW5wdXQ6ICcnXG5cdCAgICB9LFxuXHQgICAgYXV0b0NvbXBsZXRlOiB0cnVlLFxuXHQgICAgYXV0b0NvbXBsZXRlRGVsYXk6IDI1MFxuXHQgIH07XG5cdH07XG5cdFxuXHR2YXIgQ29udHJvbCA9IHtcblx0ICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKG9wdGlvbnMpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdGhpcy5tYXJrZXJzID0gbmV3IEwuRmVhdHVyZUdyb3VwKCk7XG5cdFxuXHQgICAgdGhpcy5vcHRpb25zID0gX2V4dGVuZHMoe30sIGRlZmF1bHRPcHRpb25zKCksIG9wdGlvbnMpO1xuXHRcblx0ICAgIHZhciBfb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICBzdHlsZSA9IF9vcHRpb25zLnN0eWxlLFxuXHQgICAgICAgIGNsYXNzTmFtZXMgPSBfb3B0aW9ucy5jbGFzc05hbWVzLFxuXHQgICAgICAgIHNlYXJjaExhYmVsID0gX29wdGlvbnMuc2VhcmNoTGFiZWwsXG5cdCAgICAgICAgYXV0b0NvbXBsZXRlID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlLFxuXHQgICAgICAgIGF1dG9Db21wbGV0ZURlbGF5ID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlRGVsYXk7XG5cdFxuXHQgICAgaWYgKHN0eWxlICE9PSAnYnV0dG9uJykge1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY2xhc3NOYW1lcy5jb250YWluZXIgKz0gJyAnICsgb3B0aW9ucy5zdHlsZTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLnNlYXJjaEVsZW1lbnQgPSBuZXcgX3NlYXJjaEVsZW1lbnQyLmRlZmF1bHQoX2V4dGVuZHMoe30sIHRoaXMub3B0aW9ucywge1xuXHQgICAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChxdWVyeSkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5vblN1Ym1pdChxdWVyeSk7XG5cdCAgICAgIH1cblx0ICAgIH0pKTtcblx0XG5cdCAgICB2YXIgX3NlYXJjaEVsZW1lbnQkZWxlbWVuID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLFxuXHQgICAgICAgIGNvbnRhaW5lciA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5jb250YWluZXIsXG5cdCAgICAgICAgZm9ybSA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5mb3JtLFxuXHQgICAgICAgIGlucHV0ID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmlucHV0O1xuXHRcblx0ICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgYnV0dG9uID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnYScsIGNsYXNzTmFtZXMuYnV0dG9uLCBjb250YWluZXIpO1xuXHQgICAgYnV0dG9uLnRpdGxlID0gc2VhcmNoTGFiZWw7XG5cdCAgICBidXR0b24uaHJlZiA9ICcjJztcblx0XG5cdCAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBfdGhpcy5vbkNsaWNrKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHRcblx0ICAgIGlmIChhdXRvQ29tcGxldGUpIHtcblx0ICAgICAgdGhpcy5yZXN1bHRMaXN0ID0gbmV3IF9yZXN1bHRMaXN0Mi5kZWZhdWx0KHtcblx0ICAgICAgICBoYW5kbGVDbGljazogZnVuY3Rpb24gaGFuZGxlQ2xpY2soX3JlZikge1xuXHQgICAgICAgICAgdmFyIHJlc3VsdCA9IF9yZWYucmVzdWx0O1xuXHRcblx0ICAgICAgICAgIGlucHV0LnZhbHVlID0gcmVzdWx0LmxhYmVsO1xuXHQgICAgICAgICAgX3RoaXMub25TdWJtaXQoeyBxdWVyeTogcmVzdWx0LmxhYmVsIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICBmb3JtLmFwcGVuZENoaWxkKHRoaXMucmVzdWx0TGlzdC5lbGVtZW50cy5jb250YWluZXIpO1xuXHRcblx0ICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoMCwgX2xvZGFzaDIuZGVmYXVsdCkoZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICByZXR1cm4gX3RoaXMuYXV0b1NlYXJjaChlKTtcblx0ICAgICAgfSwgYXV0b0NvbXBsZXRlRGVsYXkpLCB0cnVlKTtcblx0ICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgcmV0dXJuIF90aGlzLnNlbGVjdFJlc3VsdChlKTtcblx0ICAgICAgfSwgdHJ1ZSk7XG5cdCAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHJldHVybiBfdGhpcy5jbGVhclJlc3VsdHMoZSk7XG5cdCAgICAgIH0sIHRydWUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuZWxlbWVudHMgPSB7IGJ1dHRvbjogYnV0dG9uIH07XG5cdCAgfSxcblx0ICBvbkFkZDogZnVuY3Rpb24gb25BZGQobWFwKSB7XG5cdCAgICB2YXIgX29wdGlvbnMyID0gdGhpcy5vcHRpb25zLFxuXHQgICAgICAgIHNob3dNYXJrZXIgPSBfb3B0aW9uczIuc2hvd01hcmtlcixcblx0ICAgICAgICBzdHlsZSA9IF9vcHRpb25zMi5zdHlsZTtcblx0XG5cdCAgICB0aGlzLm1hcCA9IG1hcDtcblx0ICAgIGlmIChzaG93TWFya2VyKSB7XG5cdCAgICAgIHRoaXMubWFya2Vycy5hZGRUbyhtYXApO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzdHlsZSA9PT0gJ2JhcicpIHtcblx0ICAgICAgdmFyIGZvcm0gPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMuZm9ybTtcblx0XG5cdCAgICAgIHZhciByb290ID0gbWFwLmdldENvbnRhaW5lcigpLnF1ZXJ5U2VsZWN0b3IoJy5sZWFmbGV0LWNvbnRyb2wtY29udGFpbmVyJyk7XG5cdFxuXHQgICAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgJ2xlYWZsZXQtY29udHJvbC1nZW9zZWFyY2ggYmFyJyk7XG5cdCAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChmb3JtKTtcblx0ICAgICAgcm9vdC5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuXHQgICAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0ICB9LFxuXHQgIG9uUmVtb3ZlOiBmdW5jdGlvbiBvblJlbW92ZSgpIHtcblx0ICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICBpZiAoY29udGFpbmVyKSB7XG5cdCAgICAgIGNvbnRhaW5lci5yZW1vdmUoKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9LFxuXHQgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZXZlbnQpIHtcblx0ICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFxuXHQgICAgdmFyIF9zZWFyY2hFbGVtZW50JGVsZW1lbjIgPSB0aGlzLnNlYXJjaEVsZW1lbnQuZWxlbWVudHMsXG5cdCAgICAgICAgY29udGFpbmVyID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuMi5jb250YWluZXIsXG5cdCAgICAgICAgaW5wdXQgPSBfc2VhcmNoRWxlbWVudCRlbGVtZW4yLmlucHV0O1xuXHRcblx0ICAgIGlmIChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdCAgICAgIGlucHV0LmZvY3VzKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBzZWxlY3RSZXN1bHQ6IGZ1bmN0aW9uIHNlbGVjdFJlc3VsdChldmVudCkge1xuXHQgICAgaWYgKCFbX2NvbnN0YW50cy5BUlJPV19ET1dOX0tFWSwgX2NvbnN0YW50cy5BUlJPV19VUF9LRVldLmluY2x1ZGVzKGV2ZW50LmtleUNvZGUpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgdmFyIGlucHV0ID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmlucHV0O1xuXHRcblx0ICAgIHZhciBsaXN0ID0gdGhpcy5yZXN1bHRMaXN0O1xuXHQgICAgdmFyIG1heCA9IHRoaXMucmVzdWx0TGlzdC5jb3VudCgpIC0gMTtcblx0XG5cdCAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYml0d2lzZVxuXHQgICAgdmFyIG5leHQgPSBldmVudC5jb2RlID09PSAnQXJyb3dEb3duJyA/IH5+bGlzdC5zZWxlY3RlZCArIDEgOiB+fmxpc3Quc2VsZWN0ZWQgLSAxO1xuXHQgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5lc3RlZC10ZXJuYXJ5XG5cdCAgICB2YXIgaWR4ID0gbmV4dCA8IDAgPyBtYXggOiBuZXh0ID4gbWF4ID8gMCA6IG5leHQ7XG5cdFxuXHQgICAgdmFyIGl0ZW0gPSBsaXN0LnNlbGVjdChpZHgpO1xuXHQgICAgaW5wdXQudmFsdWUgPSBpdGVtLmxhYmVsO1xuXHQgIH0sXG5cdCAgY2xlYXJSZXN1bHRzOiBmdW5jdGlvbiBjbGVhclJlc3VsdHMoZXZlbnQpIHtcblx0ICAgIGlmIChldmVudC5rZXlDb2RlICE9PSBfY29uc3RhbnRzLkVTQ0FQRV9LRVkpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMucmVzdWx0TGlzdC5jbGVhcigpO1xuXHQgIH0sXG5cdCAgYXV0b1NlYXJjaDogZnVuY3Rpb24gYXV0b1NlYXJjaChldmVudCkge1xuXHQgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgdmFyIHF1ZXJ5LCBwcm92aWRlciwgcmVzdWx0cztcblx0XG5cdCAgICAgIGlmIChfY29uc3RhbnRzLlNQRUNJQUxfS0VZUy5pbmNsdWRlcyhldmVudC5rZXlDb2RlKSkge1xuXHQgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHF1ZXJ5ID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuXHQgICAgICBwcm92aWRlciA9IHRoaXMub3B0aW9ucy5wcm92aWRlcjtcblx0ICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlYXJjaCh7IHF1ZXJ5OiBxdWVyeSB9KS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHRcblx0ICAgICAgICByZXN1bHRzID0gJGF3YWl0XzE7XG5cdCAgICAgICAgdGhpcy5yZXN1bHRMaXN0LnJlbmRlcihyZXN1bHRzKTtcblx0ICAgICAgICByZXR1cm4gJHJldHVybigpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG5cdCAgfSxcblx0ICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQocXVlcnkpIHtcblx0ICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgIHZhciBwcm92aWRlciwgcmVzdWx0cztcblx0ICAgICAgcHJvdmlkZXIgPSB0aGlzLm9wdGlvbnMucHJvdmlkZXI7XG5cdCAgICAgIHJldHVybiBwcm92aWRlci5zZWFyY2gocXVlcnkpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8yKSB7XG5cdFxuXHQgICAgICAgIHJlc3VsdHMgPSAkYXdhaXRfMjtcblx0XG5cdCAgICAgICAgaWYgKHJlc3VsdHMgJiYgcmVzdWx0cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICB0aGlzLnNob3dSZXN1bHQocmVzdWx0c1swXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG5cdCAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICB9LFxuXHQgIHNob3dSZXN1bHQ6IGZ1bmN0aW9uIHNob3dSZXN1bHQocmVzdWx0KSB7XG5cdCAgICB2YXIgbWFya2VycyA9IE9iamVjdC5rZXlzKHRoaXMubWFya2Vycy5fbGF5ZXJzKTtcblx0ICAgIGlmIChtYXJrZXJzLmxlbmd0aCA+PSB0aGlzLm9wdGlvbnMubWF4TWFya2Vycykge1xuXHQgICAgICB0aGlzLm1hcmtlcnMucmVtb3ZlTGF5ZXIobWFya2Vyc1swXSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG1hcmtlciA9IHRoaXMuYWRkTWFya2VyKHJlc3VsdCk7XG5cdCAgICB0aGlzLmNlbnRlck1hcChyZXN1bHQpO1xuXHRcblx0ICAgIHRoaXMubWFwLmZpcmVFdmVudCgnZ2Vvc2VhcmNoL3Nob3dsb2NhdGlvbicsIHtcblx0ICAgICAgbG9jYXRpb246IHJlc3VsdCxcblx0ICAgICAgbWFya2VyOiBtYXJrZXJcblx0ICAgIH0pO1xuXHQgIH0sXG5cdCAgYWRkTWFya2VyOiBmdW5jdGlvbiBhZGRNYXJrZXIocmVzdWx0KSB7XG5cdCAgICB2YXIgX29wdGlvbnMzID0gdGhpcy5vcHRpb25zLFxuXHQgICAgICAgIG9wdGlvbnMgPSBfb3B0aW9uczMubWFya2VyLFxuXHQgICAgICAgIHNob3dQb3B1cCA9IF9vcHRpb25zMy5zaG93UG9wdXA7XG5cdFxuXHQgICAgdmFyIG1hcmtlciA9IG5ldyBMLk1hcmtlcihbcmVzdWx0LnksIHJlc3VsdC54XSwgb3B0aW9ucyk7XG5cdCAgICBtYXJrZXIuYmluZFBvcHVwKHJlc3VsdC5sYWJlbCk7XG5cdFxuXHQgICAgdGhpcy5tYXJrZXJzLmFkZExheWVyKG1hcmtlcik7XG5cdFxuXHQgICAgaWYgKHNob3dQb3B1cCkge1xuXHQgICAgICBtYXJrZXIub3BlblBvcHVwKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG1hcmtlcjtcblx0ICB9LFxuXHQgIGNlbnRlck1hcDogZnVuY3Rpb24gY2VudGVyTWFwKHJlc3VsdCkge1xuXHQgICAgdmFyIF9vcHRpb25zNCA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICByZXRhaW5ab29tTGV2ZWwgPSBfb3B0aW9uczQucmV0YWluWm9vbUxldmVsLFxuXHQgICAgICAgIGFuaW1hdGVab29tID0gX29wdGlvbnM0LmFuaW1hdGVab29tO1xuXHRcblx0ICAgIHZhciByZXN1bHRCb3VuZHMgPSBuZXcgTC5MYXRMbmdCb3VuZHMocmVzdWx0LmJvdW5kcyk7XG5cdCAgICB2YXIgYm91bmRzID0gcmVzdWx0Qm91bmRzLmlzVmFsaWQoKSA/IHJlc3VsdEJvdW5kcyA6IHRoaXMubWFya2Vycy5nZXRCb3VuZHMoKTtcblx0XG5cdCAgICBpZiAoIXJldGFpblpvb21MZXZlbCAmJiByZXN1bHRCb3VuZHMuaXNWYWxpZCgpKSB7XG5cdCAgICAgIHRoaXMubWFwLmZpdEJvdW5kcyhib3VuZHMsIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLm1hcC5zZXRWaWV3KGJvdW5kcy5nZXRDZW50ZXIoKSwgdGhpcy5nZXRab29tKCksIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBnZXRab29tOiBmdW5jdGlvbiBnZXRab29tKCkge1xuXHQgICAgdmFyIF9vcHRpb25zNSA9IHRoaXMub3B0aW9ucyxcblx0ICAgICAgICByZXRhaW5ab29tTGV2ZWwgPSBfb3B0aW9uczUucmV0YWluWm9vbUxldmVsLFxuXHQgICAgICAgIHpvb21MZXZlbCA9IF9vcHRpb25zNS56b29tTGV2ZWw7XG5cdFxuXHQgICAgcmV0dXJuIHJldGFpblpvb21MZXZlbCA/IHRoaXMubWFwLmdldFpvb20oKSA6IHpvb21MZXZlbDtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBMZWFmbGV0Q29udHJvbCgpIHtcblx0ICBpZiAoIUwgfHwgIUwuQ29udHJvbCB8fCAhTC5Db250cm9sLmV4dGVuZCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdMZWFmbGV0IG11c3QgYmUgbG9hZGVkIGJlZm9yZSBpbnN0YW50aWF0aW5nIHRoZSBHZW9TZWFyY2ggY29udHJvbCcpO1xuXHQgIH1cblx0XG5cdCAgdmFyIExDb250cm9sID0gTC5Db250cm9sLmV4dGVuZChDb250cm9sKTtcblx0XG5cdCAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG9wdGlvbnMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgIG9wdGlvbnNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbmV3IChGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5hcHBseShMQ29udHJvbCwgW251bGxdLmNvbmNhdChvcHRpb25zKSkpKCk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHQvKlxuXHQgKiAkYXN5bmNiaW5kIGhhcyBtdWx0aXBsZSB1c2VzLCBkZXBlbmRpbmcgb24gdGhlIHBhcmFtZXRlciBsaXN0LiBJdCBpcyBpbiBGdW5jdGlvbi5wcm90b3R5cGUsIHNvICd0aGlzJyBpcyBhbHdheXMgYSBmdW5jdGlvblxuXHQgKlxuXHQgKiAxKSBJZiBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudCAodGhpcyksIGl0IGlzIHVzZWQgd2hlbiBkZWZpbmluZyBhbiBhc3luYyBmdW5jdGlvbiB0byBlbnN1cmUgd2hlblxuXHQgKiAgICAgIGl0IGlzIGludm9rZWQsIHRoZSBjb3JyZWN0ICd0aGlzJyBpcyBwcmVzZW50LCBqdXN0IGxpa2UgXCJiaW5kXCIuIEZvciBsZWdhY3kgcmVhc29ucywgJ3RoaXMnIGlzIGdpdmVuXG5cdCAqICAgICAgYSBtZW1lYmVyICd0aGVuJyB3aGljaCByZWZlcnMgdG8gaXRzZWxmLlxuXHQgKiAyKSBJZiBjYWxsZWQgd2l0aCBhIHNlY29uZCBwYXJhbWV0ZXIgKFwiY2F0Y2hlclwiKSBhbmQgY2F0Y2hlciE9PXRydWUgaXQgaXMgYmVpbmcgdXNlZCB0byBpbnZva2UgYW4gYXN5bmNcblx0ICogICAgICBmdW5jdGlvbiB3aGVyZSB0aGUgc2Vjb25kIHBhcmFtZXRlciBpcyB0aGUgZXJyb3IgY2FsbGJhY2sgKGZvciBzeW5jIGV4Y2VwdGlvbnMgYW5kIHRvIGJlIHBhc3NlZCB0b1xuXHQgKiAgICAgIG5lc3RlZCBhc3luYyBjYWxscylcblx0ICogMykgSWYgY2FsbGVkIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXI9PT10cnVlLCBpdCBpcyB0aGUgc2FtZSB1c2UgYXMgKDEpLCBidXQgdGhlIGZ1bmN0aW9uIGlzIHdyYXBwZWRcblx0ICogICAgICBpbiBhbiAnUHJvbWlzZScgYXMgd2VsbCBib3VuZCB0byAndGhpcycuXG5cdCAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IFByb21pc2UodGhpcyknLCB3aGVyZSAndGhpcycgaXMgdGhlIGZ1bmN0aW9uIGJlaW5nIGJvdW5kL3dyYXBwZWRcblx0ICogNCkgSWYgY2FsbGVkIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXI9PT0wLCBpdCBpcyB0aGUgc2FtZSB1c2UgYXMgKDEpLCBidXQgdGhlIGZ1bmN0aW9uIGlzIHdyYXBwZWRcblx0ICogICAgICBpbiBhICdMYXp5VGhlbmFibGUnLCB3aGljaCBleGVjdXRlcyBsYXppbHkgYW5kIGNhbiByZXNvbHZlIHN5bmNocm9ub3VzbHkuXG5cdCAqICAgICAgSXQgaXMgdGhlIHNhbWUgYXMgY2FsbGluZyAnbmV3IExhenlUaGVuYWJsZSh0aGlzKScgKGlmIHN1Y2ggYSB0eXBlIHdlcmUgZXhwb3NlZCksIHdoZXJlICd0aGlzJyBpc1xuXHQgKiAgICAgIHRoZSBmdW5jdGlvbiBiZWluZyBib3VuZC93cmFwcGVkXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc0luY2x1ZGVzKGluY2x1ZGVzLCBpbnB1dCkge1xuXHQgICAgdmFyIHNyYyA9IGlucHV0LnRvU3RyaW5nKCk7XG5cdCAgICB2YXIgdCA9IFwicmV0dXJuIFwiICsgc3JjO1xuXHQgICAgdmFyIGFyZ3MgPSBzcmMubWF0Y2goLy4qXFwoKFteKV0qKVxcKS8pWzFdO1xuXHQgICAgdmFyIHJlID0gL1snXCJdISEhKFteJ1wiXSopWydcIl0vZztcblx0ICAgIHZhciBtID0gW107XG5cdCAgICB3aGlsZSAoMSkge1xuXHQgICAgICAgIHZhciBteCA9IHJlLmV4ZWModCk7XG5cdCAgICAgICAgaWYgKG14KSBtLnB1c2gobXgpO2Vsc2UgYnJlYWs7XG5cdCAgICB9XG5cdCAgICBtLnJldmVyc2UoKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgdCA9IHQuc2xpY2UoMCwgZS5pbmRleCkgKyBpbmNsdWRlc1tlWzFdXSArIHQuc3Vic3RyKGUuaW5kZXggKyBlWzBdLmxlbmd0aCk7XG5cdCAgICB9KTtcblx0ICAgIHQgPSB0LnJlcGxhY2UoL1xcL1xcKlteKl0qXFwqXFwvL2csICcgJykucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuXHQgICAgcmV0dXJuIG5ldyBGdW5jdGlvbihhcmdzLCB0KSgpO1xuXHR9XG5cdFxuXHR2YXIgJGFzeW5jYmluZCA9IHByb2Nlc3NJbmNsdWRlcyh7XG5cdCAgICB6b3VzYW46IF9fd2VicGFja19yZXF1aXJlX18oNykudG9TdHJpbmcoKSxcblx0ICAgIHRoZW5hYmxlOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKS50b1N0cmluZygpXG5cdH0sIGZ1bmN0aW9uICRhc3luY2JpbmQoc2VsZiwgY2F0Y2hlcikge1xuXHQgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHQgICAgaWYgKCFGdW5jdGlvbi5wcm90b3R5cGUuJGFzeW5jYmluZCkge1xuXHQgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsIFwiJGFzeW5jYmluZFwiLCB7IHZhbHVlOiAkYXN5bmNiaW5kLCBlbnVtZXJhYmxlOiBmYWxzZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoISRhc3luY2JpbmQudHJhbXBvbGluZSkge1xuXHQgICAgICAgICRhc3luY2JpbmQudHJhbXBvbGluZSA9IGZ1bmN0aW9uIHRyYW1wb2xpbmUodCwgeCwgcywgZSwgdSkge1xuXHQgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gYihxKSB7XG5cdCAgICAgICAgICAgICAgICB3aGlsZSAocSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChxLnRoZW4pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHEudGhlbihiLCBlKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHUgPyB1bmRlZmluZWQgOiBxO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAocS5wb3ApIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxLmxlbmd0aCkgcmV0dXJuIHEucG9wKCkgPyB4LmNhbGwodCkgOiBxO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHM7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBxID0gcS5jYWxsKHQpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUocik7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdCAgICBpZiAoISRhc3luY2JpbmQuTGF6eVRoZW5hYmxlKSB7XG5cdCAgICAgICAgJGFzeW5jYmluZC5MYXp5VGhlbmFibGUgPSAnISEhdGhlbmFibGUnKCk7XG5cdCAgICAgICAgJGFzeW5jYmluZC5FYWdlclRoZW5hYmxlID0gJGFzeW5jYmluZC5UaGVuYWJsZSA9ICgkYXN5bmNiaW5kLkVhZ2VyVGhlbmFibGVGYWN0b3J5ID0gJyEhIXpvdXNhbicpKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHJlc29sdmVyID0gdGhpcztcblx0ICAgIHN3aXRjaCAoY2F0Y2hlcikge1xuXHQgICAgICAgIGNhc2UgdHJ1ZTpcblx0ICAgICAgICAgICAgcmV0dXJuIG5ldyAkYXN5bmNiaW5kLlRoZW5hYmxlKGJvdW5kVGhlbik7XG5cdCAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICByZXR1cm4gbmV3ICRhc3luY2JpbmQuTGF6eVRoZW5hYmxlKGJvdW5kVGhlbik7XG5cdCAgICAgICAgY2FzZSB1bmRlZmluZWQ6XG5cdCAgICAgICAgICAgIC8qIEZvciBydW50aW1lIGNvbXBhdGliaWxpdHkgd2l0aCBOb2RlbnQgdjIueCwgcHJvdmlkZSBhIHRoZW5hYmxlICovXG5cdCAgICAgICAgICAgIGJvdW5kVGhlbi50aGVuID0gYm91bmRUaGVuO1xuXHQgICAgICAgICAgICByZXR1cm4gYm91bmRUaGVuO1xuXHQgICAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlci5hcHBseShzZWxmLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2F0Y2hlcihleCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH07XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBib3VuZFRoZW4oKSB7XG5cdCAgICAgICAgcmV0dXJuIHJlc29sdmVyLmFwcGx5KHNlbGYsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gJGFzeW5jc3Bhd24ocHJvbWlzZVByb3ZpZGVyLCBzZWxmKSB7XG5cdCAgICBpZiAoIUZ1bmN0aW9uLnByb3RvdHlwZS4kYXN5bmNzcGF3bikge1xuXHQgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsIFwiJGFzeW5jc3Bhd25cIiwgeyB2YWx1ZTogJGFzeW5jc3Bhd24sIGVudW1lcmFibGU6IGZhbHNlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pO1xuXHQgICAgfVxuXHQgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEZ1bmN0aW9uKSkgcmV0dXJuO1xuXHRcblx0ICAgIHZhciBnZW5GID0gdGhpcztcblx0ICAgIHJldHVybiBuZXcgcHJvbWlzZVByb3ZpZGVyKGZ1bmN0aW9uIGVub3VnaChyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICB2YXIgZ2VuID0gZ2VuRi5jYWxsKHNlbGYsIHJlc29sdmUsIHJlamVjdCk7XG5cdCAgICAgICAgZnVuY3Rpb24gc3RlcChmbiwgYXJnKSB7XG5cdCAgICAgICAgICAgIHZhciBuZXh0O1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgbmV4dCA9IGZuLmNhbGwoZ2VuLCBhcmcpO1xuXHQgICAgICAgICAgICAgICAgaWYgKG5leHQuZG9uZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlICE9PSByZXNvbHZlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlICYmIG5leHQudmFsdWUgPT09IG5leHQudmFsdWUudGhlbikgcmV0dXJuIG5leHQudmFsdWUocmVzb2x2ZSwgcmVqZWN0KTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSAmJiByZXNvbHZlKG5leHQudmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlLnRoZW4pIHtcblx0ICAgICAgICAgICAgICAgICAgICBuZXh0LnZhbHVlLnRoZW4oZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4ubmV4dCwgdik7XG5cdCAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4udGhyb3csIGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICBzdGVwKGdlbi5uZXh0LCBuZXh0LnZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgICAgcmVqZWN0ICYmIHJlamVjdChlKTtcblx0ICAgICAgICAgICAgICAgIHJlamVjdCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgc3RlcChnZW4ubmV4dCk7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0Ly8gSW5pdGlhbGl6ZSBhc3luYyBiaW5kaW5nc1xuXHQkYXN5bmNiaW5kKCk7XG5cdCRhc3luY3NwYXduKCk7XG5cdFxuXHQvLyBFeHBvcnQgYXN5bmMgYmluZGluZ3Ncblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgICAkYXN5bmNiaW5kOiAkYXN5bmNiaW5kLFxuXHQgICAgJGFzeW5jc3Bhd246ICRhc3luY3NwYXduXG5cdH07XG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcywgc2V0SW1tZWRpYXRlKSB7LyogVGhpcyBjb2RlIGlzIGJhc2VkIG9uOlxuXHR6b3VzYW4gLSBBIExpZ2h0bmluZyBGYXN0LCBZZXQgVmVyeSBTbWFsbCBQcm9taXNlIEErIENvbXBsaWFudCBJbXBsZW1lbnRhdGlvblxuXHRodHRwczovL2dpdGh1Yi5jb20vYmx1ZWphdmEvem91c2FuXG5cdEF1dGhvcjogR2xlbm4gQ3Jvd25vdmVyIDxnbGVubkBibHVlamF2YS5jb20+IChodHRwOi8vd3d3LmJsdWVqYXZhLmNvbSlcblx0VmVyc2lvbiAyLjMuM1xuXHRMaWNlbnNlOiBNSVQgKi9cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0aWNrKSB7XG5cdCAgICB0aWNrID0gdGljayB8fCAodHlwZW9mIHByb2Nlc3MgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihwcm9jZXNzKSkgPT09IFwib2JqZWN0XCIgJiYgcHJvY2Vzcy5uZXh0VGljayB8fCB0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSBcImZ1bmN0aW9uXCIgJiYgc2V0SW1tZWRpYXRlIHx8IGZ1bmN0aW9uIChmKSB7XG5cdCAgICAgICAgc2V0VGltZW91dChmLCAwKTtcblx0ICAgIH07XG5cdCAgICB2YXIgc29vbiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgZnEgPSBbXSxcblx0ICAgICAgICAgICAgZnFTdGFydCA9IDAsXG5cdCAgICAgICAgICAgIGJ1ZmZlclNpemUgPSAxMDI0O1xuXHQgICAgICAgIGZ1bmN0aW9uIGNhbGxRdWV1ZSgpIHtcblx0ICAgICAgICAgICAgd2hpbGUgKGZxLmxlbmd0aCAtIGZxU3RhcnQpIHtcblx0ICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZnFbZnFTdGFydF0oKTtcblx0ICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7LyogY29uc29sZS5lcnJvcihleCkgKi99XG5cdCAgICAgICAgICAgICAgICBmcVtmcVN0YXJ0KytdID0gdW5kZWZpbmVkO1xuXHQgICAgICAgICAgICAgICAgaWYgKGZxU3RhcnQgPT09IGJ1ZmZlclNpemUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBmcS5zcGxpY2UoMCwgYnVmZmVyU2l6ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgZnFTdGFydCA9IDA7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbiAoZm4pIHtcblx0ICAgICAgICAgICAgZnEucHVzaChmbik7XG5cdCAgICAgICAgICAgIGlmIChmcS5sZW5ndGggLSBmcVN0YXJ0ID09PSAxKSB0aWNrKGNhbGxRdWV1ZSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH0oKTtcblx0XG5cdCAgICBmdW5jdGlvbiBab3VzYW4oZnVuYykge1xuXHQgICAgICAgIGlmIChmdW5jKSB7XG5cdCAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG5cdCAgICAgICAgICAgIGZ1bmMoZnVuY3Rpb24gKGFyZykge1xuXHQgICAgICAgICAgICAgICAgbWUucmVzb2x2ZShhcmcpO1xuXHQgICAgICAgICAgICB9LCBmdW5jdGlvbiAoYXJnKSB7XG5cdCAgICAgICAgICAgICAgICBtZS5yZWplY3QoYXJnKTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIFpvdXNhbi5wcm90b3R5cGUgPSB7XG5cdCAgICAgICAgcmVzb2x2ZTogZnVuY3Rpb24gcmVzb2x2ZSh2YWx1ZSkge1xuXHQgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gdW5kZWZpbmVkKSByZXR1cm47XG5cdCAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcykgcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJBdHRlbXB0IHRvIHJlc29sdmUgcHJvbWlzZSB3aXRoIHNlbGZcIikpO1xuXHQgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXHQgICAgICAgICAgICBpZiAodmFsdWUgJiYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiIHx8ICh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZih2YWx1ZSkpID09PSBcIm9iamVjdFwiKSkge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZmlyc3QgPSAwO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciB0aGVuID0gdmFsdWUudGhlbjtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoZW4gPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bmN0aW9uIChyYSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVzb2x2ZShyYSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChycikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVqZWN0KHJyKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCkgdGhpcy5yZWplY3QoZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GVUxGSUxMRUQ7XG5cdCAgICAgICAgICAgIHRoaXMudiA9IHZhbHVlO1xuXHQgICAgICAgICAgICBpZiAobWUuYykgc29vbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgbCA9IG1lLmMubGVuZ3RoOyBuIDwgbDsgbisrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgU1RBVEVfRlVMRklMTEVEKG1lLmNbbl0sIHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICByZWplY3Q6IGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXHQgICAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfUkVKRUNURUQ7XG5cdCAgICAgICAgICAgIHRoaXMudiA9IHJlYXNvbjtcblx0ICAgICAgICAgICAgdmFyIGNsaWVudHMgPSB0aGlzLmM7XG5cdCAgICAgICAgICAgIGlmIChjbGllbnRzKSBzb29uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIG4gPSAwLCBsID0gY2xpZW50cy5sZW5ndGg7IG4gPCBsOyBuKyspIHtcblx0ICAgICAgICAgICAgICAgICAgICBTVEFURV9SRUpFQ1RFRChjbGllbnRzW25dLCByZWFzb24pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHRoZW46IGZ1bmN0aW9uIHRoZW4ob25GLCBvblIpIHtcblx0ICAgICAgICAgICAgdmFyIHAgPSBuZXcgWm91c2FuKCk7XG5cdCAgICAgICAgICAgIHZhciBjbGllbnQgPSB7XG5cdCAgICAgICAgICAgICAgICB5OiBvbkYsXG5cdCAgICAgICAgICAgICAgICBuOiBvblIsXG5cdCAgICAgICAgICAgICAgICBwOiBwXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICAgICAgICAgIGlmICh0aGlzLmMpIHRoaXMuYy5wdXNoKGNsaWVudCk7ZWxzZSB0aGlzLmMgPSBbY2xpZW50XTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcy5zdGF0ZSxcblx0ICAgICAgICAgICAgICAgICAgICBhID0gdGhpcy52O1xuXHQgICAgICAgICAgICAgICAgc29vbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcyhjbGllbnQsIGEpO1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIHA7XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBmdW5jdGlvbiBTVEFURV9GVUxGSUxMRUQoYywgYXJnKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjLnkgPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgdmFyIHlyZXQgPSBjLnkuY2FsbCh1bmRlZmluZWQsIGFyZyk7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVzb2x2ZSh5cmV0KTtcblx0ICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgICAgICBjLnAucmVqZWN0KGVycik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgYy5wLnJlc29sdmUoYXJnKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBTVEFURV9SRUpFQ1RFRChjLCByZWFzb24pIHtcblx0ICAgICAgICBpZiAodHlwZW9mIGMubiA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgeXJldCA9IGMubi5jYWxsKHVuZGVmaW5lZCwgcmVhc29uKTtcblx0ICAgICAgICAgICAgICAgIGMucC5yZXNvbHZlKHlyZXQpO1xuXHQgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgIGMucC5yZWplY3QoZXJyKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBjLnAucmVqZWN0KHJlYXNvbik7XG5cdCAgICB9XG5cdFxuXHQgICAgWm91c2FuLnJlc29sdmUgPSBmdW5jdGlvbiAodmFsKSB7XG5cdCAgICAgICAgaWYgKHZhbCAmJiB2YWwgaW5zdGFuY2VvZiBab3VzYW4pIHJldHVybiB2YWw7XG5cdCAgICAgICAgdmFyIHogPSBuZXcgWm91c2FuKCk7XG5cdCAgICAgICAgei5yZXNvbHZlKHZhbCk7XG5cdCAgICAgICAgcmV0dXJuIHo7XG5cdCAgICB9O1xuXHQgICAgWm91c2FuLnJlamVjdCA9IGZ1bmN0aW9uIChlcnIpIHtcblx0ICAgICAgICBpZiAoZXJyICYmIGVyciBpbnN0YW5jZW9mIFpvdXNhbikgcmV0dXJuIGVycjtcblx0ICAgICAgICB2YXIgeiA9IG5ldyBab3VzYW4oKTtcblx0ICAgICAgICB6LnJlamVjdChlcnIpO1xuXHQgICAgICAgIHJldHVybiB6O1xuXHQgICAgfTtcblx0XG5cdCAgICBab3VzYW4udmVyc2lvbiA9IFwiMi4zLjMtbm9kZW50XCI7XG5cdCAgICByZXR1cm4gWm91c2FuO1xuXHR9O1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg4KSwgX193ZWJwYWNrX3JlcXVpcmVfXyg5KS5zZXRJbW1lZGlhdGUpKVxuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cdHZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblx0XG5cdC8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuXHQvLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcblx0Ly8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuXHQvLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXHRcblx0dmFyIGNhY2hlZFNldFRpbWVvdXQ7XG5cdHZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cdFxuXHRmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0ZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCgpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0KGZ1bmN0aW9uICgpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICB9XG5cdH0pKCk7XG5cdGZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG5cdCAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuXHQgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuXHQgICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuXHQgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0ZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuXHQgICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG5cdCAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG5cdCAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuXHQgICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG5cdCAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuXHQgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG5cdCAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgZHJhaW5pbmcgPSBmYWxzZTtcblx0dmFyIGN1cnJlbnRRdWV1ZTtcblx0dmFyIHF1ZXVlSW5kZXggPSAtMTtcblx0XG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG5cdCAgICBpZiAoZHJhaW5pbmcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcblx0ICAgIGRyYWluaW5nID0gdHJ1ZTtcblx0XG5cdCAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGxlbikge1xuXHQgICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuXHQgICAgICAgIHF1ZXVlID0gW107XG5cdCAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuXHQgICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIH1cblx0ICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHR9XG5cdFxuXHRwcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcblx0ICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG5cdCAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcblx0ICAgIH1cblx0fTtcblx0XG5cdC8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcblx0ZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG5cdCAgICB0aGlzLmZ1biA9IGZ1bjtcblx0ICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcblx0fVxuXHRJdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcblx0fTtcblx0cHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcblx0cHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcblx0cHJvY2Vzcy5lbnYgPSB7fTtcblx0cHJvY2Vzcy5hcmd2ID0gW107XG5cdHByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xuXHRwcm9jZXNzLnZlcnNpb25zID0ge307XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge31cblx0XG5cdHByb2Nlc3Mub24gPSBub29wO1xuXHRwcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5vbmNlID0gbm9vcDtcblx0cHJvY2Vzcy5vZmYgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xuXHRwcm9jZXNzLmVtaXQgPSBub29wO1xuXHRcblx0cHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0XG5cdHByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuICcvJztcblx0fTtcblx0cHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdHByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gMDtcblx0fTtcblxuLyoqKi8gfSxcbi8qIDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0dmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXHRcblx0Ly8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3Ncblx0XG5cdGV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG5cdH07XG5cdGV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG5cdH07XG5cdGV4cG9ydHMuY2xlYXJUaW1lb3V0ID0gZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24gKHRpbWVvdXQpIHtcblx0ICBpZiAodGltZW91dCkge1xuXHQgICAgdGltZW91dC5jbG9zZSgpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcblx0ICB0aGlzLl9pZCA9IGlkO1xuXHQgIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xuXHR9XG5cdFRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24gKCkge307XG5cdFRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csIHRoaXMuX2lkKTtcblx0fTtcblx0XG5cdC8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuXHRleHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uIChpdGVtLCBtc2Vjcykge1xuXHQgIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblx0ICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXHQgIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG5cdH07XG5cdFxuXHRleHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cdFxuXHQgIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuXHQgIGlmIChtc2VjcyA+PSAwKSB7XG5cdCAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG5cdCAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpIGl0ZW0uX29uVGltZW91dCgpO1xuXHQgICAgfSwgbXNlY3MpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3Rcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdGV4cG9ydHMuc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuXHRleHBvcnRzLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG5cbi8qKiovIH0sXG4vKiAxMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCwgcHJvY2Vzcykge1widXNlIHN0cmljdFwiO1xuXHRcblx0KGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuXHQgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHQgICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm9cblx0ICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG5cdCAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG5cdCAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuXHQgICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXHRcblx0ICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuXHQgICAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuXHQgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBDb3B5IGZ1bmN0aW9uIGFyZ3VtZW50c1xuXHQgICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuXHQgICAgICAgIHZhciB0YXNrID0geyBjYWxsYmFjazogY2FsbGJhY2ssIGFyZ3M6IGFyZ3MgfTtcblx0ICAgICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcblx0ICAgICAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gcnVuKHRhc2spIHtcblx0ICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuXHQgICAgICAgIHZhciBhcmdzID0gdGFzay5hcmdzO1xuXHQgICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgY2FzZSAwOlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBjYXNlIDE6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBjYXNlIDI6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBjYXNlIDM6XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBkZWZhdWx0OlxuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG5cdCAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogXCJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC5cIlxuXHQgICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uXG5cdCAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuXHQgICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuXHQgICAgICAgICAgICAvLyBcInRvbyBtdWNoIHJlY3Vyc2lvblwiIGVycm9yLlxuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcblx0ICAgICAgICAgICAgaWYgKHRhc2spIHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcblx0ICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG5cdCAgICAgICAgICAgICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcblx0ICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuXHQgICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcblx0ICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cblx0ICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuXHQgICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG5cdCAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuXHQgICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuXHQgICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuXHQgICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG5cdCAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG5cdCAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXHRcblx0ICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuXHQgICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbiBvbkdsb2JhbE1lc3NhZ2UoZXZlbnQpIHtcblx0ICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuXHQgICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0ICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbiByZWdpc3RlckltbWVkaWF0ZShoYW5kbGUpIHtcblx0ICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuXHQgICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG5cdCAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG5cdCAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuXHQgICAgICAgIH07XG5cdFxuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG5cdCAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXHQgICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24gcmVnaXN0ZXJJbW1lZGlhdGUoaGFuZGxlKSB7XG5cdCAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuXHQgICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuXHQgICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG5cdCAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcblx0ICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcblx0ICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uIHJlZ2lzdGVySW1tZWRpYXRlKGhhbmRsZSkge1xuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuXHQgICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuXHQgICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cdFxuXHQgICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuXHQgICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuXHQgICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcblx0ICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXHQgICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG5cdCAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuXHQgICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuXHQgICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG5cdCAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcblx0ICAgICAgICAvLyBGb3IgSUUgNuKAkzhcblx0ICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuXHQgICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcblx0ICAgIH1cblx0XG5cdCAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG5cdCAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xuXHR9KSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB1bmRlZmluZWQgOiBnbG9iYWwgOiBzZWxmKTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSksIF9fd2VicGFja19yZXF1aXJlX18oOCkpKVxuXG4vKioqLyB9LFxuLyogMTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBpc1RoZW5hYmxlKG9iaikge1xuXHQgICAgICAgIHJldHVybiBvYmogJiYgb2JqIGluc3RhbmNlb2YgT2JqZWN0ICYmIHR5cGVvZiBvYmoudGhlbiA9PT0gXCJmdW5jdGlvblwiO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIHJlc29sdXRpb24ocCwgciwgaG93KSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLyogMi4yLjcuMSAqL1xuXHQgICAgICAgICAgICB2YXIgeCA9IGhvdyA/IGhvdyhyKSA6IHI7XG5cdFxuXHQgICAgICAgICAgICBpZiAocCA9PT0geCkgLyogMi4zLjEgKi9cblx0ICAgICAgICAgICAgICAgIHJldHVybiBwLnJlamVjdChuZXcgVHlwZUVycm9yKFwiUHJvbWlzZSByZXNvbHV0aW9uIGxvb3BcIikpO1xuXHRcblx0ICAgICAgICAgICAgaWYgKGlzVGhlbmFibGUoeCkpIHtcblx0ICAgICAgICAgICAgICAgIC8qIDIuMy4zICovXG5cdCAgICAgICAgICAgICAgICB4LnRoZW4oZnVuY3Rpb24gKHkpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uKHAsIHkpO1xuXHQgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBwLnJlamVjdChlKTtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgcC5yZXNvbHZlKHgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBjYXRjaCAoZXgpIHtcblx0ICAgICAgICAgICAgLyogMi4yLjcuMiAqL1xuXHQgICAgICAgICAgICBwLnJlamVjdChleCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIENoYWluZWQoKSB7fTtcblx0ICAgIENoYWluZWQucHJvdG90eXBlID0ge1xuXHQgICAgICAgIHJlc29sdmU6IF91bmNoYWluZWQsXG5cdCAgICAgICAgcmVqZWN0OiBfdW5jaGFpbmVkLFxuXHQgICAgICAgIHRoZW46IHRoZW5DaGFpblxuXHQgICAgfTtcblx0ICAgIGZ1bmN0aW9uIF91bmNoYWluZWQodikge31cblx0ICAgIGZ1bmN0aW9uIHRoZW5DaGFpbihyZXMsIHJlaikge1xuXHQgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlcztcblx0ICAgICAgICB0aGlzLnJlamVjdCA9IHJlajtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiB0aGVuKHJlcywgcmVqKSB7XG5cdCAgICAgICAgdmFyIGNoYWluID0gbmV3IENoYWluZWQoKTtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB0aGlzLl9yZXNvbHZlcihmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBpc1RoZW5hYmxlKHZhbHVlKSA/IHZhbHVlLnRoZW4ocmVzLCByZWopIDogcmVzb2x1dGlvbihjaGFpbiwgdmFsdWUsIHJlcyk7XG5cdCAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChleCkge1xuXHQgICAgICAgICAgICAgICAgcmVzb2x1dGlvbihjaGFpbiwgZXgsIHJlaik7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG5cdCAgICAgICAgICAgIHJlc29sdXRpb24oY2hhaW4sIGV4LCByZWopO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gY2hhaW47XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gVGhlbmFibGUocmVzb2x2ZXIpIHtcblx0ICAgICAgICB0aGlzLl9yZXNvbHZlciA9IHJlc29sdmVyO1xuXHQgICAgICAgIHRoaXMudGhlbiA9IHRoZW47XG5cdCAgICB9O1xuXHRcblx0ICAgIFRoZW5hYmxlLnJlc29sdmUgPSBmdW5jdGlvbiAodikge1xuXHQgICAgICAgIHJldHVybiBUaGVuYWJsZS5pc1RoZW5hYmxlKHYpID8gdiA6IHsgdGhlbjogZnVuY3Rpb24gdGhlbihyZXNvbHZlKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh2KTtcblx0ICAgICAgICAgICAgfSB9O1xuXHQgICAgfTtcblx0XG5cdCAgICBUaGVuYWJsZS5pc1RoZW5hYmxlID0gaXNUaGVuYWJsZTtcblx0XG5cdCAgICByZXR1cm4gVGhlbmFibGU7XG5cdH07XG5cbi8qKiovIH0sXG4vKiAxMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdC8qKlxuXHQgKiBsb2Rhc2ggKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuXHQgKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cblx0ICogUmVsZWFzZWQgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuXHQgKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICovXG5cdFxuXHQvKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xuXHR2YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXHRcblx0LyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG5cdHZhciBOQU4gPSAwIC8gMDtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXHRcblx0LyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi9cblx0dmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cdFxuXHQvKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xuXHR2YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cdFxuXHQvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xuXHR2YXIgZnJlZUdsb2JhbCA9ICh0eXBlb2YgZ2xvYmFsID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihnbG9iYWwpKSA9PSAnb2JqZWN0JyAmJiBnbG9iYWwgJiYgZ2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGdsb2JhbDtcblx0XG5cdC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG5cdHZhciBmcmVlU2VsZiA9ICh0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2Yoc2VsZikpID09ICdvYmplY3QnICYmIHNlbGYgJiYgc2VsZi5PYmplY3QgPT09IE9iamVjdCAmJiBzZWxmO1xuXHRcblx0LyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG5cdHZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcblx0ICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG5cdCAqIG9mIHZhbHVlcy5cblx0ICovXG5cdHZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXHRcblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuXHR2YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG5cdCAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2Vcblx0ICogdGhlIFVuaXggZXBvY2ggKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDIuNC4wXG5cdCAqIEBjYXRlZ29yeSBEYXRlXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVzdGFtcC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuXHQgKiAgIGNvbnNvbGUubG9nKF8ubm93KCkgLSBzdGFtcCk7XG5cdCAqIH0sIF8ubm93KCkpO1xuXHQgKiAvLyA9PiBMb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBpbnZvY2F0aW9uLlxuXHQgKi9cblx0dmFyIG5vdyA9IGZ1bmN0aW9uIG5vdygpIHtcblx0ICByZXR1cm4gcm9vdC5EYXRlLm5vdygpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuXHQgKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcblx0ICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuXHQgKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cblx0ICogUHJvdmlkZSBgb3B0aW9uc2AgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb24gdGhlXG5cdCAqIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcblx0ICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudFxuXHQgKiBjYWxscyB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYFxuXHQgKiBpbnZvY2F0aW9uLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzXG5cdCAqIGludm9rZWQgb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG5cdCAqIGlzIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cblx0ICpcblx0ICogSWYgYHdhaXRgIGlzIGAwYCBhbmQgYGxlYWRpbmdgIGlzIGBmYWxzZWAsIGBmdW5jYCBpbnZvY2F0aW9uIGlzIGRlZmVycmVkXG5cdCAqIHVudGlsIHRvIHRoZSBuZXh0IHRpY2ssIHNpbWlsYXIgdG8gYHNldFRpbWVvdXRgIHdpdGggYSB0aW1lb3V0IG9mIGAwYC5cblx0ICpcblx0ICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG5cdCAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBGdW5jdGlvblxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cblx0ICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuXHQgKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cblx0ICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG5cdCAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG5cdCAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG5cdCAqXG5cdCAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuXHQgKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG5cdCAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuXHQgKiAgICd0cmFpbGluZyc6IGZhbHNlXG5cdCAqIH0pKTtcblx0ICpcblx0ICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cblx0ICogdmFyIGRlYm91bmNlZCA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwgeyAnbWF4V2FpdCc6IDEwMDAgfSk7XG5cdCAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcblx0ICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuXHQgKlxuXHQgKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuXHQgKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcblx0ICovXG5cdGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcblx0ICB2YXIgbGFzdEFyZ3MsXG5cdCAgICAgIGxhc3RUaGlzLFxuXHQgICAgICBtYXhXYWl0LFxuXHQgICAgICByZXN1bHQsXG5cdCAgICAgIHRpbWVySWQsXG5cdCAgICAgIGxhc3RDYWxsVGltZSxcblx0ICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuXHQgICAgICBsZWFkaW5nID0gZmFsc2UsXG5cdCAgICAgIG1heGluZyA9IGZhbHNlLFxuXHQgICAgICB0cmFpbGluZyA9IHRydWU7XG5cdFxuXHQgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG5cdCAgfVxuXHQgIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuXHQgIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuXHQgICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuXHQgICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG5cdCAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuXHQgICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuXHQgICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcblx0ICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cdFxuXHQgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcblx0ICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcblx0ICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuXHQgICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cblx0ICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcblx0ICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG5cdCAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG5cdCAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcblx0ICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG5cdCAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSxcblx0ICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cdFxuXHQgICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQsIG1heFdhaXQgLSB0aW1lU2luY2VMYXN0SW52b2tlKSA6IHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG5cdCAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuXHQgICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cdFxuXHQgICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcblx0ICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG5cdCAgICAvLyBpdCBhcyB0aGUgdHJhaWxpbmcgZWRnZSwgb3Igd2UndmUgaGl0IHRoZSBgbWF4V2FpdGAgbGltaXQuXG5cdCAgICByZXR1cm4gbGFzdENhbGxUaW1lID09PSB1bmRlZmluZWQgfHwgdGltZVNpbmNlTGFzdENhbGwgPj0gd2FpdCB8fCB0aW1lU2luY2VMYXN0Q2FsbCA8IDAgfHwgbWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHtcblx0ICAgIHZhciB0aW1lID0gbm93KCk7XG5cdCAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG5cdCAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7XG5cdCAgICB9XG5cdCAgICAvLyBSZXN0YXJ0IHRoZSB0aW1lci5cblx0ICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuXHQgICAgdGltZXJJZCA9IHVuZGVmaW5lZDtcblx0XG5cdCAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG5cdCAgICAvLyBkZWJvdW5jZWQgYXQgbGVhc3Qgb25jZS5cblx0ICAgIGlmICh0cmFpbGluZyAmJiBsYXN0QXJncykge1xuXHQgICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcblx0ICAgIH1cblx0ICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gY2FuY2VsKCkge1xuXHQgICAgaWYgKHRpbWVySWQgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7XG5cdCAgICB9XG5cdCAgICBsYXN0SW52b2tlVGltZSA9IDA7XG5cdCAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGZsdXNoKCkge1xuXHQgICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG5cdCAgICB2YXIgdGltZSA9IG5vdygpLFxuXHQgICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG5cdFxuXHQgICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG5cdCAgICBsYXN0VGhpcyA9IHRoaXM7XG5cdCAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXHRcblx0ICAgIGlmIChpc0ludm9raW5nKSB7XG5cdCAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAobWF4aW5nKSB7XG5cdCAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cblx0ICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHQgIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG5cdCAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG5cdCAgcmV0dXJuIGRlYm91bmNlZDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuXHQgKiBbbGFuZ3VhZ2UgdHlwZV0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMpXG5cdCAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KHt9KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChfLm5vb3ApO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QobnVsbCk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuXHQgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih2YWx1ZSk7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuXHQgKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuXHQgIHJldHVybiAhIXZhbHVlICYmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHZhbHVlKSkgPT0gJ29iamVjdCc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgc3ltYm9sLCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzU3ltYm9sKCdhYmMnKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG5cdCAgcmV0dXJuICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHZhbHVlKSkgPT0gJ3N5bWJvbCcgfHwgaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoMy4yKTtcblx0ICogLy8gPT4gMy4yXG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG5cdCAqIC8vID0+IDVlLTMyNFxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcblx0ICogLy8gPT4gSW5maW5pdHlcblx0ICpcblx0ICogXy50b051bWJlcignMy4yJyk7XG5cdCAqIC8vID0+IDMuMlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcblx0ICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHQgIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBOQU47XG5cdCAgfVxuXHQgIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcblx0ICAgIHZhciBvdGhlciA9IHR5cGVvZiB2YWx1ZS52YWx1ZU9mID09ICdmdW5jdGlvbicgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcblx0ICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gb3RoZXIgKyAnJyA6IG90aGVyO1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6ICt2YWx1ZTtcblx0ICB9XG5cdCAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpO1xuXHQgIHZhciBpc0JpbmFyeSA9IHJlSXNCaW5hcnkudGVzdCh2YWx1ZSk7XG5cdCAgcmV0dXJuIGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOCkgOiByZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGRlYm91bmNlO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSkpXG5cbi8qKiovIH0sXG4vKiAxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9kb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0dmFyIF9jb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcblx0ICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBTZWFyY2hFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIFNlYXJjaEVsZW1lbnQoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICBfcmVmJGhhbmRsZVN1Ym1pdCA9IF9yZWYuaGFuZGxlU3VibWl0LFxuXHQgICAgICAgIGhhbmRsZVN1Ym1pdCA9IF9yZWYkaGFuZGxlU3VibWl0ID09PSB1bmRlZmluZWQgPyBmdW5jdGlvbiAoKSB7fSA6IF9yZWYkaGFuZGxlU3VibWl0LFxuXHQgICAgICAgIF9yZWYkc2VhcmNoTGFiZWwgPSBfcmVmLnNlYXJjaExhYmVsLFxuXHQgICAgICAgIHNlYXJjaExhYmVsID0gX3JlZiRzZWFyY2hMYWJlbCA9PT0gdW5kZWZpbmVkID8gJ3NlYXJjaCcgOiBfcmVmJHNlYXJjaExhYmVsLFxuXHQgICAgICAgIF9yZWYkY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcblx0ICAgICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcztcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2VhcmNoRWxlbWVudCk7XG5cdFxuXHQgICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIFsnZ2Vvc2VhcmNoJywgY2xhc3NOYW1lcy5jb250YWluZXJdLmpvaW4oJyAnKSk7XG5cdCAgICB2YXIgZm9ybSA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2Zvcm0nLCBbJycsIGNsYXNzTmFtZXMuZm9ybV0uam9pbignICcpLCBjb250YWluZXIpO1xuXHQgICAgdmFyIGlucHV0ID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnaW5wdXQnLCBbJ2dsYXNzJywgY2xhc3NOYW1lcy5pbnB1dF0uam9pbignICcpLCBmb3JtKTtcblx0XG5cdCAgICBpbnB1dC50eXBlID0gJ3RleHQnO1xuXHQgICAgaW5wdXQucGxhY2Vob2xkZXIgPSBzZWFyY2hMYWJlbDtcblx0XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uSW5wdXQoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uS2V5VXAoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uS2V5UHJlc3MoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIF90aGlzLm9uRm9jdXMoZSk7XG5cdCAgICB9LCBmYWxzZSk7XG5cdCAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgX3RoaXMub25CbHVyKGUpO1xuXHQgICAgfSwgZmFsc2UpO1xuXHRcblx0ICAgIHRoaXMuZWxlbWVudHMgPSB7IGNvbnRhaW5lcjogY29udGFpbmVyLCBmb3JtOiBmb3JtLCBpbnB1dDogaW5wdXQgfTtcblx0ICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFNlYXJjaEVsZW1lbnQsIFt7XG5cdCAgICBrZXk6ICdvbkZvY3VzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbkZvY3VzKCkge1xuXHQgICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkodGhpcy5lbGVtZW50cy5mb3JtLCAnYWN0aXZlJyk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb25CbHVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbkJsdXIoKSB7XG5cdCAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKSh0aGlzLmVsZW1lbnRzLmZvcm0sICdhY3RpdmUnKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvblN1Ym1pdCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWJtaXQoZXZlbnQpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcblx0ICAgICAgICB2YXIgX2VsZW1lbnRzLCBpbnB1dCwgY29udGFpbmVyO1xuXHRcblx0ICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcblx0ICAgICAgICBfZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzLCBpbnB1dCA9IF9lbGVtZW50cy5pbnB1dCwgY29udGFpbmVyID0gX2VsZW1lbnRzLmNvbnRhaW5lcjtcblx0XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2Vycm9yJyk7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcblx0XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlU3VibWl0KHsgcXVlcnk6IGlucHV0LnZhbHVlIH0pLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG5cdCAgICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAncGVuZGluZycpO1xuXHQgICAgICAgICAgcmV0dXJuICRyZXR1cm4oKTtcblx0ICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvbklucHV0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbklucHV0KCkge1xuXHQgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICBpZiAodGhpcy5oYXNFcnJvcikge1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdlcnJvcicpO1xuXHQgICAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uS2V5VXAnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5VXAoZXZlbnQpIHtcblx0ICAgICAgdmFyIF9lbGVtZW50czIgPSB0aGlzLmVsZW1lbnRzLFxuXHQgICAgICAgICAgY29udGFpbmVyID0gX2VsZW1lbnRzMi5jb250YWluZXIsXG5cdCAgICAgICAgICBpbnB1dCA9IF9lbGVtZW50czIuaW5wdXQ7XG5cdFxuXHQgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gX2NvbnN0YW50cy5FU0NBUEVfS0VZKSB7XG5cdCAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcblx0ICAgICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG5cdFxuXHQgICAgICAgIGlucHV0LnZhbHVlID0gJyc7XG5cdFxuXHQgICAgICAgIGRvY3VtZW50LmJvZHkuZm9jdXMoKTtcblx0ICAgICAgICBkb2N1bWVudC5ib2R5LmJsdXIoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ29uS2V5UHJlc3MnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5UHJlc3MoZXZlbnQpIHtcblx0ICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IF9jb25zdGFudHMuRU5URVJfS0VZKSB7XG5cdCAgICAgICAgdGhpcy5vblN1Ym1pdChldmVudCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZXRRdWVyeScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UXVlcnkocXVlcnkpIHtcblx0ICAgICAgdmFyIGlucHV0ID0gdGhpcy5lbGVtZW50cy5pbnB1dDtcblx0XG5cdCAgICAgIGlucHV0LnZhbHVlID0gcXVlcnk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gU2VhcmNoRWxlbWVudDtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gU2VhcmNoRWxlbWVudDtcblxuLyoqKi8gfSxcbi8qIDE0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0LyogZXNsaW50LWRpc2FibGUgaW1wb3J0L3ByZWZlci1kZWZhdWx0LWV4cG9ydCAqL1xuXHR2YXIgY3JlYXRlRWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoZWxlbWVudCkge1xuXHQgIHZhciBjbGFzc05hbWVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJztcblx0ICB2YXIgcGFyZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsO1xuXHRcblx0ICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1lbnQpO1xuXHQgIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZXM7XG5cdFxuXHQgIGlmIChwYXJlbnQpIHtcblx0ICAgIHBhcmVudC5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZWw7XG5cdH07XG5cdFxuXHR2YXIgY3JlYXRlU2NyaXB0RWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlU2NyaXB0RWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZVNjcmlwdEVsZW1lbnQodXJsLCBjYikge1xuXHQgIHZhciBzY3JpcHQgPSBjcmVhdGVFbGVtZW50KCdzY3JpcHQnLCBudWxsLCBkb2N1bWVudC5ib2R5KTtcblx0ICBzY3JpcHQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvamF2YXNjcmlwdCcpO1xuXHRcblx0ICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcblx0ICAgIHdpbmRvd1tjYl0gPSBmdW5jdGlvbiAoanNvbikge1xuXHQgICAgICBzY3JpcHQucmVtb3ZlKCk7XG5cdCAgICAgIGRlbGV0ZSB3aW5kb3dbY2JdO1xuXHQgICAgICByZXNvbHZlKGpzb24pO1xuXHQgICAgfTtcblx0XG5cdCAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdzcmMnLCB1cmwpO1xuXHQgIH0pO1xuXHR9O1xuXHRcblx0dmFyIGFkZENsYXNzTmFtZSA9IGV4cG9ydHMuYWRkQ2xhc3NOYW1lID0gZnVuY3Rpb24gYWRkQ2xhc3NOYW1lKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuXHQgIGlmIChlbGVtZW50ICYmICFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG5cdCAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcmVtb3ZlQ2xhc3NOYW1lID0gZXhwb3J0cy5yZW1vdmVDbGFzc05hbWUgPSBmdW5jdGlvbiByZW1vdmVDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG5cdCAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuXHQgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9LFxuLyogMTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdHZhciBFTlRFUl9LRVkgPSBleHBvcnRzLkVOVEVSX0tFWSA9IDEzO1xuXHR2YXIgRVNDQVBFX0tFWSA9IGV4cG9ydHMuRVNDQVBFX0tFWSA9IDI3O1xuXHR2YXIgQVJST1dfRE9XTl9LRVkgPSBleHBvcnRzLkFSUk9XX0RPV05fS0VZID0gNDA7XG5cdHZhciBBUlJPV19VUF9LRVkgPSBleHBvcnRzLkFSUk9XX1VQX0tFWSA9IDM4O1xuXHR2YXIgQVJST1dfTEVGVF9LRVkgPSBleHBvcnRzLkFSUk9XX0xFRlRfS0VZID0gMzc7XG5cdHZhciBBUlJPV19SSUdIVF9LRVkgPSBleHBvcnRzLkFSUk9XX1JJR0hUX0tFWSA9IDM5O1xuXHRcblx0dmFyIFNQRUNJQUxfS0VZUyA9IGV4cG9ydHMuU1BFQ0lBTF9LRVlTID0gW0VOVEVSX0tFWSwgRVNDQVBFX0tFWSwgQVJST1dfRE9XTl9LRVksIEFSUk9XX1VQX0tFWSwgQVJST1dfTEVGVF9LRVksIEFSUk9XX1JJR0hUX0tFWV07XG5cbi8qKiovIH0sXG4vKiAxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHR2YXIgX2RvbVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgY3ggPSBmdW5jdGlvbiBjeCgpIHtcblx0ICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgY2xhc3NuYW1lcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgY2xhc3NuYW1lc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBjbGFzc25hbWVzLmpvaW4oJyAnKS50cmltKCk7XG5cdH07XG5cdFxuXHR2YXIgUmVzdWx0TGlzdCA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBSZXN1bHRMaXN0KCkge1xuXHQgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgIF9yZWYkaGFuZGxlQ2xpY2sgPSBfcmVmLmhhbmRsZUNsaWNrLFxuXHQgICAgICAgIGhhbmRsZUNsaWNrID0gX3JlZiRoYW5kbGVDbGljayA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZUNsaWNrLFxuXHQgICAgICAgIF9yZWYkY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcblx0ICAgICAgICBjbGFzc05hbWVzID0gX3JlZiRjbGFzc05hbWVzID09PSB1bmRlZmluZWQgPyB7fSA6IF9yZWYkY2xhc3NOYW1lcztcblx0XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVzdWx0TGlzdCk7XG5cdFxuXHQgICAgX2luaXRpYWxpc2VQcm9wcy5jYWxsKHRoaXMpO1xuXHRcblx0ICAgIHRoaXMucHJvcHMgPSB7IGhhbmRsZUNsaWNrOiBoYW5kbGVDbGljaywgY2xhc3NOYW1lczogY2xhc3NOYW1lcyB9O1xuXHQgICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXHRcblx0ICAgIHZhciBjb250YWluZXIgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdkaXYnLCBjeCgncmVzdWx0cycsIGNsYXNzTmFtZXMuY29udGFpbmVyKSk7XG5cdCAgICB2YXIgcmVzdWx0SXRlbSA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIGN4KGNsYXNzTmFtZXMuaXRlbSkpO1xuXHRcblx0ICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DbGljaywgdHJ1ZSk7XG5cdCAgICB0aGlzLmVsZW1lbnRzID0geyBjb250YWluZXI6IGNvbnRhaW5lciwgcmVzdWx0SXRlbTogcmVzdWx0SXRlbSB9O1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFJlc3VsdExpc3QsIFt7XG5cdCAgICBrZXk6ICdyZW5kZXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcblx0ICAgICAgdmFyIHJlc3VsdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdO1xuXHQgICAgICB2YXIgX2VsZW1lbnRzID0gdGhpcy5lbGVtZW50cyxcblx0ICAgICAgICAgIGNvbnRhaW5lciA9IF9lbGVtZW50cy5jb250YWluZXIsXG5cdCAgICAgICAgICByZXN1bHRJdGVtID0gX2VsZW1lbnRzLnJlc3VsdEl0ZW07XG5cdFxuXHQgICAgICB0aGlzLmNsZWFyKCk7XG5cdFxuXHQgICAgICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKHJlc3VsdCwgaWR4KSB7XG5cdCAgICAgICAgdmFyIGNoaWxkID0gcmVzdWx0SXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG5cdCAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKCdkYXRhLWtleScsIGlkeCk7XG5cdCAgICAgICAgY2hpbGQuaW5uZXJIVE1MID0gcmVzdWx0LmxhYmVsO1xuXHQgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5yZXN1bHRzID0gcmVzdWx0cztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZWxlY3QnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdChpbmRleCkge1xuXHQgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZnVzaW5nLWFycm93XG5cdFxuXHQgICAgICBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQsIGlkeCkge1xuXHQgICAgICAgIHJldHVybiBpZHggPT09IGluZGV4ID8gKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJykgOiAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY2hpbGQsICdhY3RpdmUnKTtcblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICB0aGlzLnNlbGVjdGVkID0gaW5kZXg7XG5cdCAgICAgIHJldHVybiB0aGlzLnJlc3VsdHNbaW5kZXhdO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NvdW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjb3VudCgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMucmVzdWx0cy5sZW5ndGg7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnY2xlYXInLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkge1xuXHQgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgICB0aGlzLnNlbGVjdGVkID0gLTE7XG5cdFxuXHQgICAgICB3aGlsZSAoY29udGFpbmVyLmxhc3RDaGlsZCkge1xuXHQgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIubGFzdENoaWxkKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFJlc3VsdExpc3Q7XG5cdH0oKTtcblx0XG5cdHZhciBfaW5pdGlhbGlzZVByb3BzID0gZnVuY3Rpb24gX2luaXRpYWxpc2VQcm9wcygpIHtcblx0ICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICB0aGlzLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgX3JlZjIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgIHRhcmdldCA9IF9yZWYyLnRhcmdldDtcblx0XG5cdCAgICB2YXIgaGFuZGxlQ2xpY2sgPSBfdGhpcy5wcm9wcy5oYW5kbGVDbGljaztcblx0ICAgIHZhciBjb250YWluZXIgPSBfdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cdFxuXHQgICAgaWYgKHRhcmdldC5wYXJlbnROb2RlICE9PSBjb250YWluZXIgfHwgIXRhcmdldC5oYXNBdHRyaWJ1dGUoJ2RhdGEta2V5JykpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpZHggPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWtleScpO1xuXHQgICAgdmFyIHJlc3VsdCA9IF90aGlzLnJlc3VsdHNbaWR4XTtcblx0ICAgIGhhbmRsZUNsaWNrKHsgcmVzdWx0OiByZXN1bHQgfSk7XG5cdCAgfTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFJlc3VsdExpc3Q7XG5cbi8qKiovIH0sXG4vKiAxNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xuXHRcblx0dmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0dmFyIF9kb21VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG5cdCAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHN1cGVyQ2xhc3MpKSk7XG5cdCAgfXN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7aWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuXHQgIF9pbmhlcml0cyhQcm92aWRlciwgX0Jhc2VQcm92aWRlcik7XG5cdFxuXHQgIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcblx0ICAgIGtleTogJ2VuZHBvaW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcblx0ICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5LFxuXHQgICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sLFxuXHQgICAgICAgICAganNvbnAgPSBfcmVmLmpzb25wO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcblx0ICAgICAgICBxdWVyeTogcXVlcnksXG5cdCAgICAgICAganNvbnA6IGpzb25wXG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIHJldHVybiBwcm90b2NvbCArICcvL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvTG9jYXRpb25zPycgKyBwYXJhbVN0cmluZztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcblx0ICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXHRcblx0ICAgICAgaWYgKGRhdGEucmVzb3VyY2VTZXRzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgICAgIHJldHVybiBbXTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIGRhdGEucmVzb3VyY2VTZXRzWzBdLnJlc291cmNlcy5tYXAoZnVuY3Rpb24gKHIpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgeDogci5wb2ludC5jb29yZGluYXRlc1sxXSxcblx0ICAgICAgICAgIHk6IHIucG9pbnQuY29vcmRpbmF0ZXNbMF0sXG5cdCAgICAgICAgICBsYWJlbDogci5hZGRyZXNzLmZvcm1hdHRlZEFkZHJlc3MsXG5cdCAgICAgICAgICBib3VuZHM6IFtbci5iYm94WzBdLCByLmJib3hbMV1dLCAvLyBzLCB3XG5cdCAgICAgICAgICBbci5iYm94WzJdLCByLmJib3hbM11dXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NlYXJjaCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKF9yZWYzKSB7XG5cdCAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwganNvbnAsIHVybCwganNvbjtcblx0ICAgICAgICBxdWVyeSA9IF9yZWYzLnF1ZXJ5O1xuXHRcblx0ICAgICAgICBwcm90b2NvbCA9IH5sb2NhdGlvbi5wcm90b2NvbC5pbmRleE9mKCdodHRwJykgPyBsb2NhdGlvbi5wcm90b2NvbCA6ICdodHRwczonO1xuXHRcblx0ICAgICAgICBqc29ucCA9ICdCSU5HX0pTT05QX0NCXycgKyBEYXRlLm5vdygpO1xuXHQgICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCwganNvbnA6IGpzb25wIH0pO1xuXHRcblx0ICAgICAgICByZXR1cm4gKDAsIF9kb21VdGlscy5jcmVhdGVTY3JpcHRFbGVtZW50KSh1cmwsIGpzb25wKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuXHQgICAgICAgICAganNvbiA9ICRhd2FpdF8xO1xuXHQgICAgICAgICAgcmV0dXJuICRyZXR1cm4odGhpcy5wYXJzZSh7IGRhdGE6IGpzb24gfSkpO1xuXHQgICAgICAgIH0uJGFzeW5jYmluZCh0aGlzLCAkZXJyb3IpLCAkZXJyb3IpO1xuXHQgICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSxcbi8qIDE4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfbm9kZW50UnVudGltZSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHR2YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG5cdCAgICB9XG5cdCAgfXJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG5cdCAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO2lmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjtcblx0ICB9O1xuXHR9KCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG5cdFxuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblx0XG5cdCAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZ2V0UGFyYW1TdHJpbmcnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFBhcmFtU3RyaW5nKHBhcmFtcykge1xuXHQgICAgICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbXNba2V5XSk7XG5cdCAgICAgIH0pLmpvaW4oJyYnKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZWFyY2gnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNlYXJjaChfcmVmKSB7XG5cdCAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG5cdCAgICAgICAgdmFyIHF1ZXJ5LCBwcm90b2NvbCwgdXJsLCByZXF1ZXN0LCBqc29uO1xuXHQgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeTtcblx0XG5cdCAgICAgICAgcHJvdG9jb2wgPSB+bG9jYXRpb24ucHJvdG9jb2wuaW5kZXhPZignaHR0cCcpID8gbG9jYXRpb24ucHJvdG9jb2wgOiAnaHR0cHM6Jztcblx0ICAgICAgICB1cmwgPSB0aGlzLmVuZHBvaW50KHsgcXVlcnk6IHF1ZXJ5LCBwcm90b2NvbDogcHJvdG9jb2wgfSk7XG5cdFxuXHQgICAgICAgIHJldHVybiBmZXRjaCh1cmwpLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG5cdCAgICAgICAgICByZXF1ZXN0ID0gJGF3YWl0XzE7XG5cdCAgICAgICAgICByZXR1cm4gcmVxdWVzdC5qc29uKCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzIpIHtcblx0ICAgICAgICAgICAganNvbiA9ICRhd2FpdF8yO1xuXHQgICAgICAgICAgICByZXR1cm4gJHJldHVybih0aGlzLnBhcnNlKHsgZGF0YToganNvbiB9KSk7XG5cdCAgICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcblx0ICAgICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBQcm92aWRlcjtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cbi8qKiovIH0sXG4vKiAxOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcblx0ICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG5cdCAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG5cdCAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1yZXR1cm4gdGFyZ2V0O1xuXHR9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7ZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO2lmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuXHQgICAgfVxuXHQgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuXHQgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7XG5cdCAgfTtcblx0fSgpO1xuXHRcblx0dmFyIF9wcm92aWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0dmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuXHQgIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG5cdCAgaWYgKCFzZWxmKSB7XG5cdCAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG5cdCAgfXJldHVybiBjYWxsICYmICgodHlwZW9mIGNhbGwgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihjYWxsKSkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG5cdCAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyAodHlwZW9mIHN1cGVyQ2xhc3MgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZihzdXBlckNsYXNzKSkpO1xuXHQgIH1zdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pO2lmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcblx0fVxuXHRcblx0dmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcblx0ICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXHRcblx0ICBmdW5jdGlvbiBQcm92aWRlcigpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG5cdCAgICBrZXk6ICdlbmRwb2ludCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZW5kcG9pbnQoKSB7XG5cdCAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcblx0ICAgICAgICAgIHByb3RvY29sID0gX3JlZi5wcm90b2NvbDtcblx0XG5cdCAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXHRcblx0ICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG5cdCAgICAgICAgZjogJ2pzb24nLFxuXHQgICAgICAgIHRleHQ6IHF1ZXJ5XG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIHJldHVybiBwcm90b2NvbCArICcvL2dlb2NvZGUuYXJjZ2lzLmNvbS9hcmNnaXMvcmVzdC9zZXJ2aWNlcy9Xb3JsZC9HZW9jb2RlU2VydmVyL2ZpbmQ/JyArIHBhcmFtU3RyaW5nO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BhcnNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuXHQgICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cdFxuXHQgICAgICByZXR1cm4gZGF0YS5sb2NhdGlvbnMubWFwKGZ1bmN0aW9uIChyKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHg6IHIuZmVhdHVyZS5nZW9tZXRyeS54LFxuXHQgICAgICAgICAgeTogci5mZWF0dXJlLmdlb21ldHJ5LnksXG5cdCAgICAgICAgICBsYWJlbDogci5uYW1lLFxuXHQgICAgICAgICAgYm91bmRzOiBbW3IuZXh0ZW50LnltaW4sIHIuZXh0ZW50LnhtaW5dLCAvLyBzLCB3XG5cdCAgICAgICAgICBbci5leHRlbnQueW1heCwgci5leHRlbnQueG1heF1dLFxuXHQgICAgICAgICAgcmF3OiByXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9LFxuLyogMjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcblx0ICB9c3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTtpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG5cdCAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblx0XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZW5kcG9pbnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG5cdCAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblx0XG5cdCAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuXHQgICAgICAgIGFkZHJlc3M6IHF1ZXJ5XG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIC8vIGdvb2dsZSByZXF1aXJlcyBhIHNlY3VyZSBjb25uZWN0aW9uIHdoZW4gdXNpbmcgYXBpIGtleXNcblx0ICAgICAgdmFyIHByb3RvID0gcGFyYW1zICYmIHBhcmFtcy5rZXkgPyAnaHR0cHM6JyA6IHByb3RvY29sO1xuXHQgICAgICByZXR1cm4gcHJvdG8gKyAnLy9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbj8nICsgcGFyYW1TdHJpbmc7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncGFyc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG5cdCAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblx0XG5cdCAgICAgIHJldHVybiBkYXRhLnJlc3VsdHMubWFwKGZ1bmN0aW9uIChyKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHg6IHIuZ2VvbWV0cnkubG9jYXRpb24ubG5nLFxuXHQgICAgICAgICAgeTogci5nZW9tZXRyeS5sb2NhdGlvbi5sYXQsXG5cdCAgICAgICAgICBsYWJlbDogci5mb3JtYXR0ZWRfYWRkcmVzcyxcblx0ICAgICAgICAgIGJvdW5kczogW1tyLmdlb21ldHJ5LnZpZXdwb3J0LnNvdXRod2VzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQuc291dGh3ZXN0LmxuZ10sIC8vIHMsIHdcblx0ICAgICAgICAgIFtyLmdlb21ldHJ5LnZpZXdwb3J0Lm5vcnRoZWFzdC5sYXQsIHIuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0LmxuZ11dLFxuXHQgICAgICAgICAgcmF3OiByXG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gUHJvdmlkZXI7XG5cdH0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG4vKioqLyB9LFxuLyogMjEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07Zm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuXHQgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuXHQgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcblx0ICAgIH1cblx0ICB9cmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcblx0ICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7aWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7cmV0dXJuIENvbnN0cnVjdG9yO1xuXHQgIH07XG5cdH0oKTtcblx0XG5cdHZhciBfcHJvdmlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0XG5cdHZhciBfcHJvdmlkZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcHJvdmlkZXIpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHtcblx0ICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkge1xuXHQgIGlmICghc2VsZikge1xuXHQgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO1xuXHQgIH1yZXR1cm4gY2FsbCAmJiAoKHR5cGVvZiBjYWxsID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoY2FsbCkpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuXHQgIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgKHR5cGVvZiBzdXBlckNsYXNzID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2Yoc3VwZXJDbGFzcykpKTtcblx0ICB9c3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTtpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7XG5cdH1cblx0XG5cdHZhciBQcm92aWRlciA9IGZ1bmN0aW9uIChfQmFzZVByb3ZpZGVyKSB7XG5cdCAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblx0XG5cdCAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXHRcblx0ICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHJvdmlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQcm92aWRlcikpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFByb3ZpZGVyLCBbe1xuXHQgICAga2V5OiAnZW5kcG9pbnQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG5cdCAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cdFxuXHQgICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblx0XG5cdCAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuXHQgICAgICAgIGZvcm1hdDogJ2pzb24nLFxuXHQgICAgICAgIHE6IHF1ZXJ5XG5cdCAgICAgIH0pKTtcblx0XG5cdCAgICAgIHJldHVybiBwcm90b2NvbCArICcvL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2g/JyArIHBhcmFtU3RyaW5nO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3BhcnNlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwYXJzZShfcmVmMikge1xuXHQgICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cdFxuXHQgICAgICByZXR1cm4gZGF0YS5tYXAoZnVuY3Rpb24gKHIpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgeDogci5sb24sXG5cdCAgICAgICAgICB5OiByLmxhdCxcblx0ICAgICAgICAgIGxhYmVsOiByLmRpc3BsYXlfbmFtZSxcblx0ICAgICAgICAgIGJvdW5kczogW1twYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMF0pLCBwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMl0pXSwgLy8gcywgd1xuXHQgICAgICAgICAgW3BhcnNlRmxvYXQoci5ib3VuZGluZ2JveFsxXSksIHBhcnNlRmxvYXQoci5ib3VuZGluZ2JveFszXSldXSxcblx0ICAgICAgICAgIHJhdzogclxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFByb3ZpZGVyO1xuXHR9KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuLyoqKi8gfSxcbi8qIDIyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHNldHVwUGFuZWw7XG5cdFxuXHR2YXIgX3RvZ2dsZUxheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdFxuXHR2YXIgX29wYWNpdHlTbGlkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdHZhciBfc2hhcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0XG5cdGZ1bmN0aW9uIHNldHVwUGFuZWwobGF5ZXJzLCBsYXlvdXQpIHtcblx0ICAgIHZhciBsYXllckdyb3VwcyA9IG1ha2VMYXllckdyb3VwcyhsYXlvdXRbJ2xheWVyLWdyb3Vwcy1vcmRlciddKTtcblx0ICAgIG1ha2VMYXllckVsZW1zKGxheWVyR3JvdXBzLCBsYXllcnMpO1xuXHQgICAgbWFrZVBhbmVsRHJhZ2dhYmxlKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VQYW5lbERyYWdnYWJsZSgpIHtcblx0ICAgIHZhciBvdmVybGF5ID0gZDMuc2VsZWN0KCcjcmlnaHQtcGFuZWwtZHJhZy1vdmVybGF5Jyk7XG5cdFxuXHQgICAgb3ZlcmxheS5jYWxsKGQzLmRyYWcoKS5vbignZHJhZycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBwYW5lbERyYWdFdmVudEhhbmRsZXIuY2FsbCh0aGlzKTtcblx0ICAgIH0pKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGFuZWxEcmFnRXZlbnRIYW5kbGVyKCkge1xuXHQgICAgdmFyIHBhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsJyk7XG5cdCAgICB2YXIgbWFwV3JhcHBlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAtd3JhcHBlcicpO1xuXHQgICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd3JhcHBlcicpO1xuXHQgICAgdmFyIHdyYXBwZXJXaWR0aCA9IHdyYXBwZXIuY2xpZW50V2lkdGg7XG5cdFxuXHQgICAgdmFyIHBhbmVsV2lkdGggPSBwYW5lbC5jbGllbnRXaWR0aDtcblx0ICAgIHZhciBwYW5lbE1pbldpZHRoID0gK3BhbmVsLnN0eWxlLm1pbldpZHRoLnNsaWNlKDAsIC0yKTtcblx0XG5cdCAgICB2YXIgbW91c2VYID0gZDMuZXZlbnQuc291cmNlRXZlbnQueDtcblx0ICAgIHZhciB4RGVsdGEgPSB3cmFwcGVyV2lkdGggLSBtb3VzZVggLSBwYW5lbFdpZHRoO1xuXHRcblx0ICAgIHZhciBuZXdQYW5lbFdpZHRoID0gcGFuZWxXaWR0aCArIHhEZWx0YTtcblx0ICAgIG5ld1BhbmVsV2lkdGggPSBuZXdQYW5lbFdpZHRoIDwgcGFuZWxNaW5XaWR0aCA/IHBhbmVsTWluV2lkdGggOiBuZXdQYW5lbFdpZHRoO1xuXHRcblx0ICAgIG1hcFdyYXBwZXIuc3R5bGUucGFkZGluZ1JpZ2h0ID0gbmV3UGFuZWxXaWR0aCArIFwicHhcIjtcblx0ICAgIHBhbmVsLnN0eWxlLndpZHRoID0gbmV3UGFuZWxXaWR0aCArIFwicHhcIjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyR3JvdXBzKGxheW91dCkge1xuXHQgICAgcmV0dXJuIGQzLnNlbGVjdCgnLmxheWVyLWxpc3QnKS5zZWxlY3RBbGwoJy5sYXllci1ncm91cC13cmFwcGVyJykuZGF0YShsYXlvdXQpLmVudGVyKCkuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cC13cmFwcGVyJykuYXR0cignaWQnLCBmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgIHJldHVybiBsYXllckdyb3VwLmlkO1xuXHQgICAgfSkuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXJHcm91cC5hY3RpdmU7XG5cdCAgICB9KS5lYWNoKGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAtYnRuIGJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG5cdCAgICAgICAgICAgIGxheWVyR3JvdXAuYWN0aXZlID0gIWxheWVyR3JvdXAuYWN0aXZlO1xuXHQgICAgICAgICAgICBkMy5zZWxlY3QodGhpcy5wYXJlbnROb2RlKS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gbGF5ZXJHcm91cC5hY3RpdmU7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0pLnRleHQobGF5ZXJHcm91cC5uYW1lKTtcblx0ICAgIH0pLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyRWxlbXMobGF5ZXJHcm91cHMsIGxheWVycykge1xuXHQgICAgbGF5ZXJHcm91cHMuc2VsZWN0QWxsKCcubGF5ZXItc2VsZWN0JykuZGF0YShmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuXHQgICAgICAgIHJldHVybiBsYXllcnNbbGF5ZXJHcm91cC5pZF07XG5cdCAgICB9KS5lbnRlcigpLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItc2VsZWN0JykuZWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICB2YXIgZ3JvdXBOYW1lID0gdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWQ7XG5cdCAgICAgICAgdmFyIGxheWVyRGl2ID0gZDMuc2VsZWN0KHRoaXMpO1xuXHRcblx0ICAgICAgICBtYWtlQ2hlY2tib3gobGF5ZXIsIGxheWVyRGl2KTtcblx0ICAgICAgICBtYWtlTGFiZWwobGF5ZXIsIGxheWVyRGl2KTtcblx0ICAgICAgICBtYWtlRGVzY3JpcHRpb24obGF5ZXIsIGxheWVyRGl2KTtcblx0ICAgICAgICBtYWtlTGVnZW5kKGxheWVyLCBsYXllckRpdik7XG5cdCAgICAgICAgKDAsIF9vcGFjaXR5U2xpZGVyLm1ha2VPcGFjaXR5U2xpZGVyKShsYXllciwgbGF5ZXJEaXYpO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VDaGVja2JveChsYXllciwgbGF5ZXJEaXYpIHtcblx0ICAgIGxheWVyRGl2LmFwcGVuZCgnaW5wdXQnKS5hdHRyKCd0eXBlJywgJ2NoZWNrYm94JykuYXR0cignaWQnLCBmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICByZXR1cm4gbGF5ZXIuaWQ7XG5cdCAgICB9KS5hdHRyKCdjaGVja2VkJywgZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyLmFjdGl2ZSA/ICdjaGVja2VkJyA6IG51bGw7XG5cdCAgICB9KS5vbignY2xpY2snLCBmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICAoMCwgX3RvZ2dsZUxheWVyLnRvZ2dsZUxheWVyKShsYXllcik7XG5cdCAgICAgICAgbGF5ZXJEaXYuc2VsZWN0QWxsKCcubGVnZW5kLXdyYXBwZXIsIC5vcGFjaXR5LXNsaWRlci13cmFwcGVyJykuY2xhc3NlZCgnYWN0aXZlJywgbGF5ZXIuYWN0aXZlKTtcblx0ICAgIH0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGFiZWwobGF5ZXIsIGxheWVyRGl2KSB7XG5cdCAgICBsYXllckRpdi5hcHBlbmQoJ2xhYmVsJykuYXR0cignZm9yJywgZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgcmV0dXJuIGxheWVyLmlkO1xuXHQgICAgfSkuYXR0cignY2xhc3MnLCAnbGF5ZXItbGFiZWwnKS5odG1sKGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHJldHVybiBsYXllci5uYW1lO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VEZXNjcmlwdGlvbihsYXllciwgbGF5ZXJEaXYpIHtcblx0ICAgIGlmIChsYXllci5pbmZvICYmIGxheWVyLmluZm8gIT09ICcnKSB7XG5cdCAgICAgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsYXllci1pbmZvLWJ0bicpLnRleHQoJyg/KScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMucGFyZW50Tm9kZSkuc2VsZWN0KCcubGF5ZXItaW5mby13cmFwcGVyJykuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuICFkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnYWN0aXZlJyk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBsYXllckRpdi5hcHBlbmQoJ2RpdicpLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8td3JhcHBlcicpLnRleHQoZnVuY3Rpb24gKGxheWVyKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBsYXllci5pbmZvO1xuXHQgICAgICAgIH0pO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlTGVnZW5kKGxheWVyLCBsYXllckRpdikge1xuXHQgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdsZWdlbmQtd3JhcHBlcicpLmNsYXNzZWQoJ2FjdGl2ZScsIGxheWVyLmFjdGl2ZSkuYXBwZW5kKCdpbWcnKS5hdHRyKCdzcmMnLCBsYXllci5sZWdlbmQgfHwgJ21lYW5fbmR2aV9sZWdlbmQuanBnJyk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuR2V0Q3VycmVudExheWVycyA9IEdldEN1cnJlbnRMYXllcnM7XG5cdGV4cG9ydHMuQ3JlYXRlRGVmYXVsdExheWVycyA9IENyZWF0ZURlZmF1bHRMYXllcnM7XG5cdGV4cG9ydHMudG9nZ2xlTGF5ZXIgPSB0b2dnbGVMYXllcjtcblx0ZXhwb3J0cy5lbmFibGVMYXllciA9IGVuYWJsZUxheWVyO1xuXHRleHBvcnRzLmRpc2FibGVMYXllciA9IGRpc2FibGVMYXllcjtcblx0XG5cdHZhciBfbWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHQvKipcclxuXHQgKiBOZWVkZWQgZm9yIHRoZSBzaGFyZSB1cmwgc2luY2UgTGVhZmxldCBkb2VzIG5vdCBoYXZlIGEgZGVmYXVsdCB3YXkgdG8gc3VyZmFjZVxyXG5cdCAqIHRoZSBvcmRlciBvZiBsYXllcnMgaW4gdGhlIG1hcFxyXG5cdCAqL1xuXHR2YXIgX2N1cnJlbnRfbGF5ZXJzID0gW107XG5cdFxuXHQvKipcclxuXHQgKiBOb3RlOiBsYXllciBpcyBub3QgdGhlIGxlYWZsZXQgY29uY2VwdCBvZiBhIGxheWVyLCBidXQgcmF0aGVyIHRoZSBpbnRlcm5hbFxyXG5cdCAqICAgICAgIG9iamVjdCB3aGljaCB0cmFja3MgdGhlbS4gbGF5ZXIubWFwTGF5ZXIgaXMgdGhlIHBvaW50ZXIgdG8gdGhlXHJcblx0ICogICAgICAgbGVhZmxldCBsYXllci5cclxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIEdldEN1cnJlbnRMYXllcnMoKSB7XG5cdCAgICByZXR1cm4gX2N1cnJlbnRfbGF5ZXJzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVEZWZhdWx0TGF5ZXJzKGxheWVycywgZGVmYXVsdExheWVycykge1xuXHQgICAgdmFyIGksIGosIHByb3AsIGxheWVyZ3JvdXA7XG5cdCAgICB2YXIgZGVmYXVsdExheWVyO1xuXHQgICAgdmFyIGZvdW5kTGF5ZXI7XG5cdFxuXHQgICAgaWYgKCFkZWZhdWx0TGF5ZXJzIHx8IGRlZmF1bHRMYXllcnMubGVuZ3RoID09PSAwKSByZXR1cm47XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGRlZmF1bHRMYXllcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBmb3VuZExheWVyID0gZmFsc2U7XG5cdCAgICAgICAgZGVmYXVsdExheWVyID0gZGVmYXVsdExheWVyc1tpXTtcblx0ICAgICAgICBmb3IgKHByb3AgaW4gbGF5ZXJzKSB7XG5cdCAgICAgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG5cdCAgICAgICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XG5cdCAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsYXllcmdyb3VwLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZGVmYXVsdExheWVyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZW5hYmxlTGF5ZXIobGF5ZXJncm91cFtqXSk7XG5cdCAgICAgICAgICAgICAgICAgICAgZm91bmRMYXllciA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9nZ2xlTGF5ZXIobGF5ZXIsIGxheWVyRGl2KSB7XG5cdCAgICBpZiAoIWxheWVyLmFjdGl2ZSkge1xuXHQgICAgICAgIGVuYWJsZUxheWVyKGxheWVyLCBsYXllckRpdik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIGRpc2FibGVMYXllcihsYXllciwgbGF5ZXJEaXYpO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBlbmFibGVMYXllcihsYXllcikge1xuXHQgICAgdmFyIG1hcCA9ICgwLCBfbWFwLkdldE1hcCkoKTtcblx0XG5cdCAgICBsYXllci5hY3RpdmUgPSB0cnVlO1xuXHQgICAgbGF5ZXIubWFwTGF5ZXIgPSBsYXllci5tYXBMYXllciB8fCBtYWtlV21zVGlsZUxheWVyKGxheWVyKTtcblx0ICAgIG1hcC5hZGRMYXllcihsYXllci5tYXBMYXllcik7XG5cdCAgICBhZGRMYXllclRvSW50ZXJuYWxUcmFja2VyKGxheWVyKTtcblx0ICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIobGF5ZXIpIHtcblx0ICAgIF9jdXJyZW50X2xheWVycy5wdXNoKGxheWVyLmlkKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZGlzYWJsZUxheWVyKGxheWVyKSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIGxheWVyLmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgaWYgKGxheWVyLm1hcExheWVyICYmIG1hcC5oYXNMYXllcihsYXllci5tYXBMYXllcikpIHtcblx0ICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobGF5ZXIubWFwTGF5ZXIpO1xuXHQgICAgfVxuXHQgICAgcmVtb3ZlTGF5ZXJGcm9tSW50ZXJuYWxUcmFja2VyKGxheWVyKTtcblx0ICAgICgwLCBfc2hhcmUudXBkYXRlU2hhcmVVcmwpKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZUxheWVyRnJvbUludGVybmFsVHJhY2tlcihsYXllcikge1xuXHQgICAgdmFyIGxvYyA9IF9jdXJyZW50X2xheWVycy5pbmRleE9mKGxheWVyLmlkKTtcblx0ICAgIGlmIChsb2MgPT09IC0xKSByZXR1cm47XG5cdCAgICBfY3VycmVudF9sYXllcnMuc3BsaWNlKGxvYywgMSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VXbXNUaWxlTGF5ZXIobGF5ZXIpIHtcblx0ICAgIHJldHVybiBMLnRpbGVMYXllci53bXMobGF5ZXIudXJsLCB7XG5cdCAgICAgICAgbGF5ZXJzOiBsYXllci5pZCxcblx0ICAgICAgICB0cmFuc3BhcmVudDogbGF5ZXIudHJhbnNwYXJlbnQgfHwgdHJ1ZSxcblx0ICAgICAgICB2ZXJzaW9uOiBsYXllci52ZXJzaW9uIHx8ICcxLjMuMCcsXG5cdCAgICAgICAgY3JzOiBsYXllci5jcnMgfHwgTC5DUlMuRVBTRzQzMjYsXG5cdCAgICAgICAgZm9ybWF0OiBsYXllci5mb3JtYXQgfHwgJ2ltYWdlL3BuZycsXG5cdCAgICAgICAgb3BhY2l0eTogbGF5ZXIub3BhY2l0eSB8fCBcIjFcIlxuXHQgICAgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQ3JlYXRlTWFwID0gQ3JlYXRlTWFwO1xuXHRleHBvcnRzLkdldE1hcCA9IEdldE1hcDtcblx0dmFyIG1hcDtcblx0XG5cdGZ1bmN0aW9uIENyZWF0ZU1hcChtYXBDb25maWcpIHtcblx0ICAgIHZhciBpZCA9IG1hcENvbmZpZy5pZCB8fCBcIm1hcFwiO1xuXHQgICAgdmFyIG9wdGlvbnMgPSBtYXBDb25maWcub3B0aW9ucyB8fCB7IFwic2Nyb2xsV2hlZWxab29tXCI6IGZhbHNlIH07XG5cdCAgICB2YXIgaW5pdGlhbENlbnRlciA9IG1hcENvbmZpZy5pbml0aWFsQ2VudGVyIHx8IFtcIjM4LjVcIiwgXCItODFcIl07XG5cdCAgICB2YXIgaW5pdGlhbFpvb20gPSBtYXBDb25maWcuaW5pdGlhbFpvb20gfHwgNjtcblx0XG5cdCAgICBtYXAgPSBMLm1hcChpZCwgb3B0aW9ucykuc2V0Vmlldyhpbml0aWFsQ2VudGVyLCBpbml0aWFsWm9vbSk7XG5cdCAgICBMLmNvbnRyb2wuYXR0cmlidXRpb24oeyBwb3NpdGlvbjogJ2JvdHRvbWxlZnQnIH0pLmFkZFRvKG1hcCk7XG5cdCAgICByZXR1cm4gbWFwO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBHZXRNYXAoKSB7XG5cdCAgICByZXR1cm4gbWFwO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5CaW5kVXBkYXRlU2hhcmVVcmwgPSBCaW5kVXBkYXRlU2hhcmVVcmw7XG5cdGV4cG9ydHMudXBkYXRlU2hhcmVVcmwgPSB1cGRhdGVTaGFyZVVybDtcblx0ZXhwb3J0cy5BZGRTaGFyZVNldHRpbmdzVG9Db25maWcgPSBBZGRTaGFyZVNldHRpbmdzVG9Db25maWc7XG5cdFxuXHR2YXIgX21hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHRcblx0dmFyIF9iYXNlbGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI2KTtcblx0XG5cdHZhciBfdG9nZ2xlTGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKTtcblx0XG5cdGZ1bmN0aW9uIEJpbmRVcGRhdGVTaGFyZVVybChtYXApIHtcblx0ICAgIG1hcC5vbihcIm1vdmVlbmRcIiwgdXBkYXRlU2hhcmVVcmwpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVTaGFyZVVybChlKSB7XG5cdCAgICB2YXIgbWFwID0gKDAsIF9tYXAuR2V0TWFwKSgpO1xuXHRcblx0ICAgIHZhciBwYXJhbXMgPSBbbWFrZUNlbnRlclN0cmluZyhtYXApLCBtYWtlWm9vbVN0cmluZyhtYXApLCBtYWtlTGF5ZXJTdHJpbmcobWFwKSwgbWFrZUJhc2VMYXllclN0cmluZyhtYXApXTtcblx0XG5cdCAgICBzZXRTaGFyZVVybChtYWtlU2hhcmVVcmwocGFyYW1zKSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VTaGFyZVVybChwYXJhbXMpIHtcblx0ICAgIHJldHVybiBcIj9cIiArIHBhcmFtcy5maWx0ZXIoZnVuY3Rpb24gKHApIHtcblx0ICAgICAgICByZXR1cm4gcCAhPT0gdW5kZWZpbmVkO1xuXHQgICAgfSkuam9pbihcIiZcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNldFNoYXJlVXJsKHVybCkge1xuXHQgICAgaWYgKHdpbmRvdy5oaXN0b3J5ICYmIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSkge1xuXHQgICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgXCJcIiwgdXJsKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUNlbnRlclN0cmluZyhtYXApIHtcblx0ICAgIHZhciBjZW50ZXIgPSBtYXAuZ2V0Q2VudGVyKCk7XG5cdCAgICByZXR1cm4gXCJjZW50ZXI9XCIgKyBjZW50ZXIubGF0LnRvU3RyaW5nKCkgKyBcIixcIiArIGNlbnRlci5sbmcudG9TdHJpbmcoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVpvb21TdHJpbmcobWFwKSB7XG5cdCAgICByZXR1cm4gXCJ6b29tPVwiICsgbWFwLmdldFpvb20oKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZUxheWVyU3RyaW5nKG1hcCkge1xuXHQgICAgdmFyIGxheWVycyA9IFtdO1xuXHQgICAgdmFyIG9wYWNpdHlWYWxzID0ge307XG5cdCAgICB2YXIgY3VycmVudExheWVycyA9ICgwLCBfdG9nZ2xlTGF5ZXIuR2V0Q3VycmVudExheWVycykoKTtcblx0XG5cdCAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xuXHQgICAgICAgIHZhciBvcHRpb25zID0gbGF5ZXIub3B0aW9ucztcblx0ICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxheWVycykge1xuXHQgICAgICAgICAgICBvcGFjaXR5VmFsc1tvcHRpb25zLmxheWVyc10gPSBvcHRpb25zLmhhc093blByb3BlcnR5KFwib3BhY2l0eVwiKSA/IG9wdGlvbnMub3BhY2l0eSA6IFwiMVwiO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciBjdXJyZW50TGF5ZXI7XG5cdCAgICB2YXIgaTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBjdXJyZW50TGF5ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgY3VycmVudExheWVyID0gY3VycmVudExheWVyc1tpXTtcblx0ICAgICAgICBsYXllcnMucHVzaChjdXJyZW50TGF5ZXIpO1xuXHQgICAgICAgIGxheWVycy5wdXNoKG9wYWNpdHlWYWxzW2N1cnJlbnRMYXllcl0pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIFwibGF5ZXJzPVwiICsgbGF5ZXJzLmpvaW4oXCIsXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlQmFzZUxheWVyU3RyaW5nKG1hcCkge1xuXHQgICAgdmFyIGxheWVycyA9IFtdO1xuXHQgICAgbWFwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHtcblx0ICAgICAgICBpZiAobGF5ZXIub3B0aW9ucyAmJiBsYXllci5vcHRpb25zLnR5cGUgPT09IF9iYXNlbGF5ZXIuQkFTRV9MQVlFUl9UWVBFKSB7XG5cdCAgICAgICAgICAgIGxheWVycy5wdXNoKGxheWVyLm9wdGlvbnMuaWQpO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIFwiYmFzZWxheWVycz1cIiArIGxheWVycy5qb2luKFwiLFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcGFyc2VTaGFyZVVybCgpIHtcblx0ICAgIHZhciBwYXJhbXMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xuXHQgICAgaWYgKHBhcmFtcyA9PT0gXCJcIikgcmV0dXJuO1xuXHRcblx0ICAgIHBhcmFtcyA9IGdldFBhcmFtc0FycmF5KHBhcmFtcyk7XG5cdCAgICBwYXJhbXMgPSBtYWtlS2V5ZWRQYXJhbXNPYmplY3QocGFyYW1zKTtcblx0XG5cdCAgICBmb3JtYXRQYXJhbXMocGFyYW1zKTtcblx0ICAgIHJldHVybiBwYXJhbXM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldFBhcmFtc0FycmF5KHBhcmFtcykge1xuXHQgICAgcGFyYW1zID0gcGFyYW1zLnN1YnN0cmluZygxKTtcblx0ICAgIHBhcmFtcyA9IHVubWFuZ2xlUGFyYW1TdHJpbmcocGFyYW1zKTtcblx0ICAgIHJldHVybiBwYXJhbXMuc3BsaXQoXCImXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1bm1hbmdsZVBhcmFtU3RyaW5nKHBhcmFtcykge1xuXHQgICAgcmV0dXJuIHBhcmFtcy5yZXBsYWNlKC9cXCUyW2N8Q10vZywgXCIsXCIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlS2V5ZWRQYXJhbXNPYmplY3QocGFyYW1zQXJyKSB7XG5cdCAgICB2YXIgcGFyc2VkUGFyYW1zID0ge307XG5cdCAgICB2YXIgcGFyYW1QYWlyO1xuXHQgICAgdmFyIGk7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IHBhcmFtc0Fyci5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHBhcmFtUGFpciA9IHBhcmFtc0FycltpXS5zcGxpdChcIj1cIik7XG5cdCAgICAgICAgcGFyc2VkUGFyYW1zW3BhcmFtUGFpclswXV0gPSBwYXJhbVBhaXJbMV07XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHBhcnNlZFBhcmFtcztcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0UGFyYW1zKHBhcmFtcykge1xuXHQgICAgaWYgKHBhcmFtcy5jZW50ZXIpIHBhcmFtcy5jZW50ZXIgPSBmb3JtYXRDZW50ZXJQYXJhbShwYXJhbXMuY2VudGVyKTtcblx0ICAgIGlmIChwYXJhbXMubGF5ZXJzKSBwYXJhbXMubGF5ZXJzID0gZm9ybWF0TGF5ZXJQYXJhbShwYXJhbXMubGF5ZXJzKTtcblx0ICAgIGlmIChwYXJhbXMuYmFzZWxheWVycykgcGFyYW1zLmJhc2VsYXllcnMgPSBmb3JtYXRCYXNlTGF5ZXJQYXJhbShwYXJhbXMuYmFzZWxheWVycyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdENlbnRlclBhcmFtKGNlbnRlcikge1xuXHQgICAgcmV0dXJuIGNlbnRlci5zcGxpdChcIixcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdExheWVyUGFyYW0obGF5ZXJzKSB7XG5cdCAgICB2YXIgZm9ybWF0dGVkTGF5ZXJzID0ge1xuXHQgICAgICAgIFwiZW5hYmxlZExheWVyc1wiOiBbXSxcblx0ICAgICAgICBcIm9wYWNpdHlWYWxzXCI6IHt9XG5cdCAgICB9O1xuXHQgICAgdmFyIGxheWVySWQ7XG5cdCAgICB2YXIgaTtcblx0XG5cdCAgICBsYXllcnMgPSBsYXllcnMuc3BsaXQoXCIsXCIpO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGxheWVycy5sZW5ndGg7IGkgPSBpICsgMikge1xuXHQgICAgICAgIGxheWVySWQgPSBsYXllcnNbaV07XG5cdCAgICAgICAgZm9ybWF0dGVkTGF5ZXJzLmVuYWJsZWRMYXllcnMucHVzaChsYXllcklkKTtcblx0ICAgICAgICBmb3JtYXR0ZWRMYXllcnMub3BhY2l0eVZhbHNbbGF5ZXJJZF0gPSBsYXllcnNbaSArIDFdO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBmb3JtYXR0ZWRMYXllcnM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdEJhc2VMYXllclBhcmFtKGJhc2VsYXllcnMpIHtcblx0ICAgIHJldHVybiBiYXNlbGF5ZXJzLnNwbGl0KFwiLFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gQWRkU2hhcmVTZXR0aW5nc1RvQ29uZmlnKGNvbmZpZykge1xuXHQgICAgdmFyIHNoYXJlID0gcGFyc2VTaGFyZVVybCgpO1xuXHQgICAgaWYgKCFzaGFyZSkgcmV0dXJuO1xuXHQgICAgaWYgKHNoYXJlLmNlbnRlcikgY29uZmlnLm1hcC5pbml0aWFsQ2VudGVyID0gc2hhcmUuY2VudGVyO1xuXHQgICAgaWYgKHNoYXJlLnpvb20pIGNvbmZpZy5tYXAuaW5pdGlhbFpvb20gPSBzaGFyZS56b29tO1xuXHQgICAgaWYgKHNoYXJlLmxheWVycykgYWRkTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlLmxheWVycywgY29uZmlnKTtcblx0ICAgIGlmIChzaGFyZS5iYXNlbGF5ZXJzKSBhZGRCYXNlTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlLmJhc2VsYXllcnMsIGNvbmZpZyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZUxheWVyU2V0dGluZ3MsIGNvbmZpZykge1xuXHQgICAgdmFyIGVuYWJsZWRMYXllcnMgPSBzaGFyZUxheWVyU2V0dGluZ3MuZW5hYmxlZExheWVycztcblx0ICAgIGNvbmZpZ1tcImFjdGl2ZS1sYXllcnNcIl0gPSBlbmFibGVkTGF5ZXJzO1xuXHRcblx0ICAgIHZhciBpLCBqLCBwcm9wLCBsYXllcmdyb3VwO1xuXHQgICAgdmFyIGVuYWJsZWRMYXllcjtcblx0ICAgIHZhciBmb3VuZExheWVyO1xuXHQgICAgdmFyIGxheWVycyA9IGNvbmZpZy5sYXllcnM7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGVuYWJsZWRMYXllcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBmb3VuZExheWVyID0gZmFsc2U7XG5cdCAgICAgICAgZW5hYmxlZExheWVyID0gZW5hYmxlZExheWVyc1tpXTtcblx0ICAgICAgICBmb3IgKHByb3AgaW4gbGF5ZXJzKSB7XG5cdCAgICAgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XG5cdCAgICAgICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XG5cdCAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsYXllcmdyb3VwLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZW5hYmxlZExheWVyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgbGF5ZXJncm91cFtqXS5vcGFjaXR5ID0gc2hhcmVMYXllclNldHRpbmdzLm9wYWNpdHlWYWxzW2VuYWJsZWRMYXllcl07XG5cdCAgICAgICAgICAgICAgICAgICAgZm91bmRMYXllciA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkQmFzZUxheWVyU2V0dGluZ3NUb0NvbmZpZyhzaGFyZUJhc2VMYXllclNldHRpbmdzLCBjb25maWcpIHtcblx0ICAgIHZhciBiYXNlbGF5ZXJzID0gY29uZmlnLmJhc2VsYXllcnM7XG5cdCAgICB2YXIgYmFzZWxheWVyO1xuXHQgICAgdmFyIGk7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGJhc2VsYXllcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBiYXNlbGF5ZXIgPSBiYXNlbGF5ZXJzW2ldO1xuXHQgICAgICAgIGJhc2VsYXllci5hY3RpdmUgPSBzaGFyZUJhc2VMYXllclNldHRpbmdzLmluZGV4T2YoYmFzZWxheWVyLmlkKSAhPT0gLTEgPyB0cnVlIDogZmFsc2U7XG5cdCAgICB9XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgICAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuQ3JlYXRlQmFzZUxheWVycyA9IENyZWF0ZUJhc2VMYXllcnM7XG5cdHZhciBCQVNFX0xBWUVSX1RZUEUgPSBleHBvcnRzLkJBU0VfTEFZRVJfVFlQRSA9IFwiYmFzZWxheWVyXCI7XG5cdFxuXHRmdW5jdGlvbiBDcmVhdGVCYXNlTGF5ZXJzKG1hcCwgbGF5ZXJDb25maWcpIHtcblx0ICAgIGxheWVyQ29uZmlnID0gbGF5ZXJDb25maWcgfHwgW3tcblx0ICAgICAgICBcImlkXCI6IFwiY2FydG8tbGlnaHQtZGVmYXVsdFwiLFxuXHQgICAgICAgIFwidXJsXCI6IFwiaHR0cDovL3tzfS5iYXNlbWFwcy5jYXJ0b2Nkbi5jb20vbGlnaHRfYWxsL3t6fS97eH0ve3l9LnBuZ1wiLFxuXHQgICAgICAgIFwiYXR0cmlidXRpb25cIjogJyZjb3B5OyA8YSBocmVmPVwiaHR0cDovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMsICZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly9jYXJ0by5jb20vYXR0cmlidXRpb25zXCI+Q0FSVE88L2E+J1xuXHQgICAgfV07XG5cdCAgICB2YXIgaTtcblx0ICAgIHZhciBiYXNlTGF5ZXI7XG5cdCAgICB2YXIgY29uZmlnO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsYXllckNvbmZpZy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGNvbmZpZyA9IGxheWVyQ29uZmlnW2ldO1xuXHRcblx0ICAgICAgICBpZiAoIWNvbmZpZy5hY3RpdmUpIGNvbnRpbnVlO1xuXHQgICAgICAgIGJhc2VMYXllciA9IGNyZWF0ZUJhc2VMYXllcihjb25maWcpO1xuXHQgICAgICAgIGJhc2VMYXllci5hZGRUbyhtYXApO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVCYXNlTGF5ZXIobGF5ZXJDb25maWcpIHtcblx0ICAgIHJldHVybiBMLnRpbGVMYXllcihsYXllckNvbmZpZy51cmwsIHtcblx0ICAgICAgICBpZDogbGF5ZXJDb25maWcuaWQsXG5cdCAgICAgICAgdHlwZTogQkFTRV9MQVlFUl9UWVBFLFxuXHQgICAgICAgIGF0dHJpYnV0aW9uOiBsYXllckNvbmZpZy5hdHRyaWJ1dGlvblxuXHQgICAgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDI3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICAgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLm1ha2VPcGFjaXR5U2xpZGVyID0gbWFrZU9wYWNpdHlTbGlkZXI7XG5cdFxuXHR2YXIgX3NoYXJlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHQvKlxyXG5cdCAgVGhlIHZpZXdCb3ggZm9yIHRoZSBvcGFjaXR5IHNsaWRlciBzdmcgY29udGFpbmVyIGlzIGNvbnN0cnVjdGVkIHNvIHRoYXRcclxuXHQgIHRoZSB2aXNpYmxlIHNsaWRlciB0cmFjayBsaW5lIGNhbiBoYXZlIGFuIHgxIG9mIDAgYW5kIHgyIG9mIDEwMCxcclxuXHQgIHRvIHJlZmxlY3QgdGhlIHJhbmdlIGZvciBsYXllciBvcGFjaXR5LlxyXG5cdFxyXG5cdCAgVGhlIHdpZHRoIGFuZCBoZWlnaHQgcmVmbGVjdCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgYm91bmRpbmcgYm94XHJcblx0ICB3aXRoaW4gd2hpY2ggYSBtb3VzZSBldmVudCBpcyBjYXB0dXJlZCBhbmQgaW50ZXJwcmV0ZWQgYXMgYSBcImRyYWdcIiBldmVudC5cclxuXHQqL1xuXHRcblx0dmFyIE1BWF9PUEFDSVRZX0xPQyA9IDEwMDtcblx0dmFyIENJUkNMRV9SQURJVVMgPSAyO1xuXHRcblx0dmFyIHZpZXdCb3ggPSB7XG5cdCAgICB4TWluOiAtQ0lSQ0xFX1JBRElVUyxcblx0ICAgIHlNaW46IDAsXG5cdCAgICB3aWR0aDogTUFYX09QQUNJVFlfTE9DICsgQ0lSQ0xFX1JBRElVUyAqIDIsXG5cdCAgICBoZWlnaHQ6IENJUkNMRV9SQURJVVMgKiAyXG5cdH07XG5cdFxuXHR2YXIgb3BhY2l0eVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKS5kb21haW4oWzAsIE1BWF9PUEFDSVRZX0xPQ10pLnJhbmdlKFswLCAxXSkuY2xhbXAodHJ1ZSk7XG5cdFxuXHRmdW5jdGlvbiBtYWtlT3BhY2l0eVNsaWRlcihsYXllciwgbGF5ZXJEaXYpIHtcblx0XG5cdCAgICB2YXIgbGF5ZXJPcGFjaXR5ID0gbGF5ZXIub3BhY2l0eSAhPT0gdW5kZWZpbmVkID8gbGF5ZXIub3BhY2l0eSA6IDE7XG5cdFxuXHQgICAgdmFyIG9wYWNpdHlTbGlkZXJXcmFwcGVyID0gbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKS5hdHRyKCdjbGFzcycsICdvcGFjaXR5LXNsaWRlci13cmFwcGVyJykuY2xhc3NlZCgnYWN0aXZlJywgbGF5ZXIuYWN0aXZlKTtcblx0XG5cdCAgICB2YXIgb3BhY2l0eVNsaWRlclN2ZyA9IG9wYWNpdHlTbGlkZXJXcmFwcGVyLmFwcGVuZCgnc3ZnJykuYXR0cigndmlld0JveCcsIHZpZXdCb3gueE1pbiArICcgJyArIHZpZXdCb3gueU1pbiArICcgJyArIHZpZXdCb3gud2lkdGggKyAnICcgKyB2aWV3Qm94LmhlaWdodClcblx0ICAgIC8vLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAnbm9uZScpXG5cdCAgICAuYXBwZW5kKCdnJykuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXInKS5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsICcgKyBDSVJDTEVfUkFESVVTICsgJyknKTtcblx0XG5cdCAgICBtYWtlU2xpZGVyVHJhY2sob3BhY2l0eVNsaWRlclN2ZywgbGF5ZXIsIGxheWVyT3BhY2l0eSk7XG5cdCAgICBzZXREcmFnRXZlbnRMaXN0ZW5lcihvcGFjaXR5U2xpZGVyU3ZnLCBsYXllcik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1ha2VPcGFjaXR5SW5kaWNhdG9yKHdyYXBwZXIsIGxheWVyT3BhY2l0eSkge31cblx0XG5cdGZ1bmN0aW9uIHNldERyYWdFdmVudExpc3RlbmVyKHN2ZywgbGF5ZXIpIHtcblx0ICAgIHN2Zy5zZWxlY3RBbGwoJyonKS5jYWxsKGQzLmRyYWcoKS5vbignc3RhcnQgZHJhZycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB1cGRhdGVPcGFjaXR5KGxheWVyLCB0aGlzLnBhcmVudE5vZGUsIGQzLmV2ZW50LngpO1xuXHQgICAgfSkub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAoMCwgX3NoYXJlLnVwZGF0ZVNoYXJlVXJsKSgpO1xuXHQgICAgfSkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlU2xpZGVyVHJhY2soc3ZnLCBsYXllciwgbGF5ZXJPcGFjaXR5KSB7XG5cdCAgICBzdmcuYXBwZW5kKCdsaW5lJykuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXItdHJhY2snKS5hdHRyKCd4MScsIDApLmF0dHIoJ3gyJywgTUFYX09QQUNJVFlfTE9DKS5hdHRyKCdzdHJva2UnLCAnIzY2NicpLmF0dHIoJ3N0cm9rZS13aWR0aCcsICcuNXB4Jyk7XG5cdFxuXHQgICAgLy8gSW52aXNpYmxlIGJveCBmb3IgY2FwdHVyaW5nIG1vdXNlIGV2ZW50c1xuXHQgICAgc3ZnLmFwcGVuZCgnbGluZScpLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktc2xpZGVyLXRyYWNrLW92ZXJsYXknKS5hdHRyKCd4MScsICcnICsgdmlld0JveC54TWluKS5hdHRyKCd4MicsICcnICsgKHZpZXdCb3gud2lkdGggLSBDSVJDTEVfUkFESVVTKSkuYXR0cignc3Ryb2tlJywgJyMwMDAwMDAnKS5hdHRyKCdzdHJva2Utd2lkdGgnLCBDSVJDTEVfUkFESVVTICogMiArICdweCcpLmF0dHIoJ3N0cm9rZS1vcGFjaXR5JywgJzAuMCcpO1xuXHRcblx0ICAgIHN2Zy5hcHBlbmQoJ2NpcmNsZScpLmF0dHIoJ3InLCBDSVJDTEVfUkFESVVTKS5hdHRyKCdjeCcsIG9wYWNpdHlTY2FsZS5pbnZlcnQobGF5ZXJPcGFjaXR5KSArICdweCcpLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktc2xpZGVyLWNpcmNsZScpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVPcGFjaXR5KGxheWVyLCBzbGlkZXIsIHhQb3MpIHtcblx0ICAgIC8vIGNsYW1wIHRoZSB4IHBvc2l0aW9uIHRvIGJlIHdpdGhpbiB0aGUgc2NhbGUncyBkb21haW5cblx0ICAgIHZhciB4UG9zID0gb3BhY2l0eVNjYWxlLmludmVydChvcGFjaXR5U2NhbGUoeFBvcykpO1xuXHQgICAgc2xpZGVyID0gZDMuc2VsZWN0KHNsaWRlcik7XG5cdFxuXHQgICAgc2xpZGVyLnNlbGVjdCgnY2lyY2xlJykuYXR0cignY3gnLCB4UG9zKTtcblx0ICAgIHNsaWRlci5zZWxlY3QoJ3RleHQnKS50ZXh0KHBhcnNlSW50KG9wYWNpdHlTY2FsZSh4UG9zKSAqIDEwMCwgMTApICsgJyUnKTtcblx0ICAgIGxheWVyLm1hcExheWVyLnNldE9wYWNpdHkob3BhY2l0eVNjYWxlKGQzLmV2ZW50LngpKTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5TZXR1cEdyYXBocyA9IFNldHVwR3JhcGhzO1xuXHRleHBvcnRzLkJpbmRHcmFwaEV2ZW50cyA9IEJpbmRHcmFwaEV2ZW50cztcblx0dmFyIHRpcDtcblx0XG5cdGZ1bmN0aW9uIFNldHVwR3JhcGhzKCkge1xuXHQgICAgZDMuc2VsZWN0QWxsKFwiLmdyYXBoLXR5cGUtYnRuXCIpLm9uKFwiY2xpY2tcIiwgaGFuZGxlR3JhcGhUeXBlQnRuQ2xpY2spO1xuXHQgICAgZXh0ZW5kRGF0ZU1vZHVsZSgpO1xuXHQgICAgdGlwID0gZDMudGlwKCkuYXR0cignY2xhc3MnLCAnZDMtdGlwJykuaHRtbChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkO1xuXHQgICAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV4dGVuZERhdGVNb2R1bGUoKSB7XG5cdCAgICBEYXRlLnByb3RvdHlwZS5pc0xlYXBZZWFyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciB5ZWFyID0gdGhpcy5nZXRGdWxsWWVhcigpO1xuXHQgICAgICAgIGlmICgoeWVhciAmIDMpICE9IDApIHJldHVybiBmYWxzZTtcblx0ICAgICAgICByZXR1cm4geWVhciAlIDEwMCAhPSAwIHx8IHllYXIgJSA0MDAgPT0gMDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gR2V0IERheSBvZiBZZWFyXG5cdCAgICBEYXRlLnByb3RvdHlwZS5nZXRET1kgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGRheUNvdW50ID0gWzAsIDMxLCA1OSwgOTAsIDEyMCwgMTUxLCAxODEsIDIxMiwgMjQzLCAyNzMsIDMwNCwgMzM0XTtcblx0ICAgICAgICB2YXIgbW4gPSB0aGlzLmdldE1vbnRoKCk7XG5cdCAgICAgICAgdmFyIGRuID0gdGhpcy5nZXREYXRlKCk7XG5cdCAgICAgICAgdmFyIGRheU9mWWVhciA9IGRheUNvdW50W21uXSArIGRuO1xuXHQgICAgICAgIGlmIChtbiA+IDEgJiYgdGhpcy5pc0xlYXBZZWFyKCkpIGRheU9mWWVhcisrO1xuXHQgICAgICAgIHJldHVybiBkYXlPZlllYXI7XG5cdCAgICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBCaW5kR3JhcGhFdmVudHMobWFwKSB7XG5cdCAgICBtYXAub24oXCJjbGlja1wiLCBoYW5kbGVNYXBDbGljayk7XG5cdH1cblx0XG5cdHZhciBiYXNlSWNvbiA9IEwuSWNvbi5leHRlbmQoe30pO1xuXHRcblx0dmFyIGdyYXBoSWNvbiA9IG5ldyBiYXNlSWNvbih7XG5cdCAgICBpY29uVXJsOiAnaW1ncy9ibHVlX2ljb24ucG5nJyxcblx0ICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxuXHQgICAgaWNvblNpemU6IFsyNSwgNDFdLFxuXHQgICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sXG5cdCAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXG5cdCAgICBzaGFkb3dTaXplOiBbNDEsIDQxXVxuXHR9KTtcblx0XG5cdHZhciBob3Zlckljb24gPSBuZXcgYmFzZUljb24oe1xuXHQgICAgaWNvblVybDogJ2ltZ3Mvb3JhbmdlX2ljb24ucG5nJyxcblx0ICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxuXHQgICAgaWNvblNpemU6IFsyNSwgNDFdLFxuXHQgICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sXG5cdCAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXG5cdCAgICBzaGFkb3dTaXplOiBbNDEsIDQxXVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIGhhbmRsZU1hcENsaWNrKGUpIHtcblx0ICAgIHZhciBtYXAgPSB0aGlzO1xuXHQgICAgdmFyIGxhdCA9IGUubGF0bG5nLmxhdDtcblx0ICAgIHZhciBsbmcgPSBlLmxhdGxuZy5sbmc7XG5cdFxuXHQgICAgdmFyIGRpdiA9IGNyZWF0ZUdyYXBoRGl2KGxhdCwgbG5nKTtcblx0ICAgIHZhciBtYXJrZXIgPSBjcmVhdGVNYXJrZXIobWFwLCBsYXQsIGxuZyk7XG5cdCAgICBkMy5zZWxlY3QoZGl2KS5vbihcIm1vdXNlZW50ZXJcIiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIG1hcmtlci5zZXRJY29uKGhvdmVySWNvbik7XG5cdCAgICB9KTtcblx0ICAgIGQzLnNlbGVjdChkaXYpLm9uKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgbWFya2VyLnNldEljb24oZ3JhcGhJY29uKTtcblx0ICAgIH0pO1xuXHQgICAgY3JlYXRlR3JhcGhSZW1vdmVyKG1hcCwgZGl2LCBtYXJrZXIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVNYXJrZXIobWFwLCBsYXQsIGxuZykge1xuXHQgICAgcmV0dXJuIEwubWFya2VyKFtsYXQsIGxuZ10sIHsgaWNvbjogZ3JhcGhJY29uIH0pLmFkZFRvKG1hcCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUdyYXBoUmVtb3ZlcihtYXAsIGRpdiwgbWFya2VyKSB7XG5cdCAgICB2YXIgZWxlbSA9IGNyZWF0ZUdyYXBoUmVtb3ZlckVsZW0oKTtcblx0ICAgIGRpdi5hcHBlbmRDaGlsZChlbGVtKTtcblx0ICAgIGQzLnNlbGVjdChlbGVtKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKTtcblx0ICAgICAgICBsaXN0LnJlbW92ZUNoaWxkKGRpdik7XG5cdCAgICAgICAgbWFwLnJlbW92ZUxheWVyKG1hcmtlcik7XG5cdCAgICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSgpIHtcblx0ICAgIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblx0ICAgIGVsZW0uY2xhc3NOYW1lID0gXCJyZW1vdmUtZ3JhcGhcIjtcblx0ICAgIGVsZW0uaW5uZXJUZXh0ID0gU3RyaW5nLmZyb21DaGFyQ29kZShcIjEwMDA1XCIpO1xuXHQgICAgZWxlbS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBcIlJlbW92ZSBncmFwaFwiKTtcblx0ICAgIHJldHVybiBlbGVtO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIERBVEEgUFJPQ0VTU0lORyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBnZXREYXRhKGxhdCwgbG5nLCBkaXYpIHtcblx0ICAgIHZhciB1cmwgPSBcImh0dHBzOi8vZmNhdi1uZHZpLm5lbWFjLm9yZy9sYW5kZGF0X3Byb2R1Y3QuY2dpP2FyZ3M9XCIgKyBsbmcgKyBcIixcIiArIGxhdDtcblx0ICAgIHZhciBvUmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdCAgICBvUmVxLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlVGV4dDtcblx0ICAgICAgICByZXNwb25zZSA9IHJlc3BvbnNlLnJlcGxhY2UoL1xcW3xcXF18XFwnL2csIFwiXCIpLnNwbGl0KFwiLCBcIik7XG5cdCAgICAgICAgZHJhd0dyYXBoKHJlc3BvbnNlLCBkaXYsIGxhdCwgbG5nKTtcblx0ICAgIH0pO1xuXHQgICAgb1JlcS5vcGVuKFwiR0VUXCIsIHVybCk7XG5cdCAgICBvUmVxLnNlbmQoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc3BsaXREYXRhKGRhdGEpIHtcblx0ICAgIHZhciBpO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBkYXRhW2ldID0gZGF0YVtpXS5zcGxpdChcIixcIik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZGF0YTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVwcm9jZXNzRGF0YShvcmlnZGF0YSkge1xuXHQgICAgdmFyIGRhdGEgPSB7fTtcblx0ICAgIHZhciBwb2ludDtcblx0ICAgIHZhciBrZXk7XG5cdCAgICB2YXIgaSwgajtcblx0XG5cdCAgICBkYXRhW1wia2V5c1wiXSA9IFtdO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IG9yaWdkYXRhLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgcG9pbnQgPSBvcmlnZGF0YVtpXTtcblx0ICAgICAgICBrZXkgPSBwb2ludFswXS5zdWJzdHJpbmcoMCwgNCk7XG5cdCAgICAgICAgaWYgKCFkYXRhLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgICAgICAgZGF0YVtrZXldID0gW107XG5cdCAgICAgICAgICAgIGRhdGFbXCJrZXlzXCJdLnB1c2goa2V5KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZGF0YVtrZXldLnB1c2gocG9pbnQpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBkYXRhRm9yTWVkaWFucztcblx0ICAgIHZhciBtZWRpYW47XG5cdCAgICBkYXRhW1wibWVkaWFuc1wiXSA9IFtdO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IDQ2OyBpKyspIHtcblx0ICAgICAgICBkYXRhRm9yTWVkaWFucyA9IFtdO1xuXHQgICAgICAgIGZvciAoaiA9IGk7IGogPCBvcmlnZGF0YS5sZW5ndGg7IGogKz0gNDYpIHtcblx0ICAgICAgICAgICAgZGF0YUZvck1lZGlhbnMucHVzaChvcmlnZGF0YVtqXVsxXSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBtZWRpYW4gPSBkYXRhRm9yTWVkaWFucy5zb3J0KClbTWF0aC5mbG9vcihkYXRhRm9yTWVkaWFucy5sZW5ndGggLyAyKV07XG5cdCAgICAgICAgZGF0YVtcIm1lZGlhbnNcIl0ucHVzaChtZWRpYW4pO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBkYXRhO1xuXHR9XG5cdFxuXHQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIElOVEVSRkFDRSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrKCkge1xuXHQgICAgdmFyIHR5cGUgPSB0aGlzLmRhdGFzZXQudHlwZTtcblx0ICAgIHZhciBhY3RpdmVFbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyYXBoLXR5cGUtYnRuIGFjdGl2ZVwiKVswXTtcblx0ICAgIHZhciBhY3RpdmVUeXBlID0gYWN0aXZlRWxlbS5kYXRhc2V0LnR5cGU7XG5cdFxuXHQgICAgaWYgKHR5cGUgPT09IGFjdGl2ZVR5cGUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgZDMuc2VsZWN0KFwiI2dyYXBoLWxpc3RcIikuY2xhc3NlZChcImdyYXBoLVwiICsgYWN0aXZlVHlwZSwgZmFsc2UpLmNsYXNzZWQoXCJncmFwaC1cIiArIHR5cGUsIHRydWUpO1xuXHRcblx0ICAgIGQzLnNlbGVjdChhY3RpdmVFbGVtKS5jbGFzc2VkKFwiYWN0aXZlXCIsIGZhbHNlKTtcblx0ICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVHcmFwaERpdihsYXQsIGxuZykge1xuXHQgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cdCAgICB2YXIgY29udGVudCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiTGF0OiBcIiArIGxhdCArIFwiLCBMb246IFwiICsgbG5nKTtcblx0ICAgIGRpdi5hcHBlbmRDaGlsZChjb250ZW50KTtcblx0ICAgIGRpdi5jbGFzc0xpc3QuYWRkKFwiZ3JhcGgtZWxlbVwiKTtcblx0ICAgIGdldERhdGEobGF0LCBsbmcsIGRpdik7XG5cdCAgICByZXR1cm4gZGl2O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmF3R3JhcGgoZGF0YSwgZGl2LCBsYXQsIGxuZykge1xuXHQgICAgZGF0YSA9IHNwbGl0RGF0YShkYXRhKTtcblx0ICAgIHZhciByZXByb2Nlc3NlZERhdGEgPSByZXByb2Nlc3NEYXRhKGRhdGEpO1xuXHQgICAgbWFrZVVwRG93bkxpbmVHcmFwaChkYXRhLCBkaXYsIHJlcHJvY2Vzc2VkRGF0YVtcIm1lZGlhbnNcIl0pO1xuXHQgICAgbWFrZVVwRG93bk92ZXJsYXBpbmdMaW5lR3JhcGhXaXRoQ2hlY2tib3hlcyhyZXByb2Nlc3NlZERhdGEsIGRpdiwgbGF0LCBsbmcpO1xuXHQgICAgZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzKHJlcHJvY2Vzc2VkRGF0YSwgZGl2LCBsYXQsIGxuZyk7XG5cdCAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3JhcGgtbGlzdFwiKTtcblx0ICAgIGxpc3QuYXBwZW5kQ2hpbGQoZGl2KTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vIFRJTUVTRVJJRVMgTElORSBHUkFQSCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVVwRG93bkxpbmVHcmFwaChkYXRhLCBkaXYsIGF2ZXJhZ2VzKSB7XG5cdCAgICAvLyBTZXQgdGhlIGRpbWVuc2lvbnMgb2YgdGhlIGNhbnZhcyAvIGdyYXBoXG5cdCAgICB2YXIgbWFyZ2luID0geyB0b3A6IDMwLCByaWdodDogMjAsIGJvdHRvbTogMzAsIGxlZnQ6IDI1IH0sXG5cdCAgICAgICAgd2lkdGggPSA1ODAgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCxcblx0ICAgICAgICBoZWlnaHQgPSAyNzAgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcblx0XG5cdCAgICAvLyBTZXQgdGhlIHJhbmdlc1xuXHQgICAgdmFyIHggPSBkMy5zY2FsZVRpbWUoKS5yYW5nZShbMCwgd2lkdGhdKS5kb21haW4oW3BhcnNlRGF0ZShkYXRhWzBdWzBdKSwgcGFyc2VEYXRlKGRhdGFbZGF0YS5sZW5ndGggLSAxXVswXSldKTtcblx0ICAgIHZhciB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSkuZG9tYWluKFswLCAxMDBdKTtcblx0XG5cdCAgICAvLyBEZWZpbmUgdGhlIGF4ZXNcblx0ICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeCkudGlja3MoMTYpLnRpY2tGb3JtYXQoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZC5nZXRGdWxsWWVhcigpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIHlBeGlzID0gZDMuYXhpc0xlZnQoeSkudGlja3MoNik7XG5cdFxuXHQgICAgLy8gRGVmaW5lIHRoZSBsaW5lXG5cdCAgICB2YXIgdmFsdWVsaW5lID0gZDMubGluZSgpLngoZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4geChwYXJzZURhdGUoZFswXSkpO1xuXHQgICAgfSkueShmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiB5KGRbMV0pO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcInRpbWVzZXJpZXMtZ3JhcGhcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgLy8gQWRkcyB0aGUgc3ZnIGNhbnZhc1xuXHQgICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpXG5cdCAgICAvLy5hdHRyKFwid2lkdGhcIiwgd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodClcblx0ICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKS5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciB3ID0gd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodDtcblx0ICAgICAgICB2YXIgaCA9IGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tO1xuXHQgICAgICAgIHJldHVybiAnMCAwICcgKyB3ICsgJyAnICsgaDtcblx0ICAgIH0pLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtYXJnaW4ubGVmdCArIFwiLFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKTtcblx0XG5cdCAgICBzdmcuY2FsbCh0aXApO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgdmFsdWVsaW5lIHBhdGguXG5cdCAgICBkcmF3TGluZWFyUGF0aChkYXRhLCB2YWx1ZWxpbmUsIHN2Zyk7XG5cdFxuXHQgICAgLy8gQWRkIHRoZSBYIEF4aXNcblx0ICAgIHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInggYXhpc1wiKS5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDAsXCIgKyBoZWlnaHQgKyBcIilcIikuY2FsbCh4QXhpcyk7XG5cdFxuXHQgICAgLy8gQWRkIHRoZSBZIEF4aXNcblx0ICAgIHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInkgYXhpc1wiKS5jYWxsKHlBeGlzKTtcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxyXG5cdCAgICAgKi9cblx0ICAgIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8gT1ZFUkxBUFBJTkcgVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy9cblx0XG5cdGZ1bmN0aW9uIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMoZGF0YSwgZGl2LCBsYXQsIGxuZykge1xuXHQgICAgdmFyIHllYXIgPSBcIjIwMTVcIjtcblx0XG5cdCAgICB2YXIgY2hhcnRzID0ge307XG5cdFxuXHQgICAgLy8gU2V0IHRoZSBkaW1lbnNpb25zIG9mIHRoZSBjYW52YXMgLyBncmFwaFxuXHQgICAgdmFyIG1hcmdpbiA9IHsgdG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyNSB9LFxuXHQgICAgICAgIHdpZHRoID0gNTAwIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsXG5cdCAgICAgICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XG5cdFxuXHQgICAgdmFyIGF2ZXJhZ2VzID0gZGF0YS5tZWRpYW5zO1xuXHRcblx0ICAgIHZhciB4ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbMCwgd2lkdGhdKS5kb21haW4oWzAsIDM2NV0pO1xuXHQgICAgdmFyIHkgPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFtoZWlnaHQsIDBdKS5kb21haW4oWzAsIDEwMF0pO1xuXHRcblx0ICAgIC8vIERlZmluZSB0aGUgYXhlc1xuXHQgICAgZnVuY3Rpb24gZm9ybWF0TW9udGhUaWNrKGQpIHtcblx0ICAgICAgICByZXR1cm4gTU9OVEhfTEFCRUxTWyhkIC0gMTUpIC8gMzBdO1xuXHQgICAgfVxuXHQgICAgdmFyIHhBeGlzID0gZDMuYXhpc0JvdHRvbSh4KS50aWNrcygxMSkudGlja1ZhbHVlcyhbMTUsIDQ1LCA3NSwgMTA1LCAxMzUsIDE2NSwgMTk1LCAyMjUsIDI1NSwgMjg1LCAzMTUsIDM0NV0pLnRpY2tGb3JtYXQoZm9ybWF0TW9udGhUaWNrKTtcblx0XG5cdCAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KS50aWNrcyg2KTtcblx0XG5cdCAgICAvLyBEZWZpbmUgdGhlIGxpbmVcblx0ICAgIHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKCkueChmdW5jdGlvbiAoZCwgaSkge1xuXHQgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGQpID8geChwYXJzZUp1bGlhbkRheShkWzBdKSkgOiB4KGkgKiA4ICsgMyk7XG5cdCAgICB9KS55KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyB5KGRbMV0pIDogeShkKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHZhciB3cmFwcGVyID0gZDMuc2VsZWN0KGRpdikuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJvdmVybGFwcGluZy1ncmFwaFwiLCB0cnVlKTtcblx0XG5cdCAgICAvLyBBZGRzIHRoZSBzdmcgY2FudmFzXG5cdCAgICB2YXIgc3ZnID0gd3JhcHBlci5hcHBlbmQoXCJzdmdcIikuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgdyA9IHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQ7XG5cdCAgICAgICAgdmFyIGggPSBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbTtcblx0ICAgICAgICByZXR1cm4gJzAgMCAnICsgdyArICcgJyArIGg7XG5cdCAgICB9KS5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJylcblx0ICAgIC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aCArIG1hcmdpbi5sZWZ0ICsgbWFyZ2luLnJpZ2h0KVxuXHQgICAgLy8uYXR0cihcImhlaWdodFwiLCBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbSlcblx0ICAgIC5hcHBlbmQoXCJnXCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyBtYXJnaW4ubGVmdCArIFwiLFwiICsgbWFyZ2luLnRvcCArIFwiKVwiKTtcblx0XG5cdCAgICBzdmcuY2FsbCh0aXApO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWCBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ4IGF4aXNcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpLmNhbGwoeEF4aXMpO1xuXHRcblx0ICAgIC8vIEFkZCB0aGUgWSBBeGlzXG5cdCAgICBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJ5IGF4aXNcIikuY2FsbCh5QXhpcyk7XG5cdFxuXHQgICAgY2hhcnRzW1wibWVkaWFuc1wiXSA9IHtcblx0ICAgICAgICBcInBhdGhcIjogZHJhd0xpbmVhclBhdGgoZGF0YVtcIm1lZGlhbnNcIl0sIHZhbHVlbGluZSwgc3ZnKVxuXHQgICAgfTtcblx0XG5cdCAgICBjaGFydHNbeWVhcl0gPSB7XG5cdCAgICAgICAgXCJwYXRoXCI6IGRyYXdMaW5lYXJQYXRoKGRhdGFbeWVhcl0sIHZhbHVlbGluZSwgc3ZnKVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcclxuXHQgICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBwb2ludCBhdCBlYWNoIGRhdGEgcG9pbnRcclxuXHQgICAgICovXG5cdCAgICBjaGFydHNbXCJtZWRpYW5zXCJdW1wicG9pbnRzXCJdID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW1wibWVkaWFuc1wiXSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0ICAgIGNoYXJ0c1t5ZWFyXVtcInBvaW50c1wiXSA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVt5ZWFyXSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0XG5cdCAgICB2YXIgaW5wdXR3cmFwcGVyID0gd3JhcHBlci5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcImlucHV0LXdyYXBwZXJcIiwgdHJ1ZSk7XG5cdFxuXHQgICAgZGF0YS5rZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwga2V5LCBcInRpbWVzZXJpZXNcIiwgeWVhciwgY2hhcnRzLCBkYXRhLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMsIGxhdCwgbG5nKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIGNyZWF0ZUNoZWNrYm94KGlucHV0d3JhcHBlciwgXCJtZWRpYW5zXCIsIFwidGltZXNlcmllc1wiLCBcIm1lZGlhbnNcIiwgY2hhcnRzLCBkYXRhLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMsIGxhdCwgbG5nKTtcblx0fVxuXHRcblx0Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBQT0xBUiBHUkFQSCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gZHJhd1VwRG93blBvbGFyV2l0aENoZWNrYm94ZXNBbmRUaHJlc2hvbGRzKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcblx0ICAgIHZhciB5ZWFyID0gXCIyMDE1XCI7XG5cdCAgICB2YXIgd2lkdGggPSA0OTAsXG5cdCAgICAgICAgaGVpZ2h0ID0gNDkwLFxuXHQgICAgICAgIHJhZGl1cyA9IE1hdGgubWluKHdpZHRoLCBoZWlnaHQpIC8gMiAtIDMwO1xuXHRcblx0ICAgIHZhciBhdmVyYWdlcyA9IGRhdGFbXCJtZWRpYW5zXCJdO1xuXHQgICAgdmFyIGNlbnRlciA9IGZpbmRQb2xhckNlbnRlcihkYXRhKTtcblx0ICAgIHZhciB0aHJlc2hvbGRzID0gZmluZFBvbGFyVGhyZXNob2xkcyhhdmVyYWdlcywgY2VudGVyWzFdWzBdKTtcblx0XG5cdCAgICAvKipcclxuXHQgICAgICogU2V0cyB1cCBzY2FsaW5nIG9mIGRhdGEuIFdlIGtub3cgdGhhdCB0aGUgbmR2aSB2YWx1ZXMgZmFsbCBiZXR3ZWVuXHJcblx0ICAgICAqIDAgJiAxMDAgc28gd2Ugc2V0IG91ciBkb21haW4gdG8gdGhhdC4gVGhlIHJhbmdlIGNvbnRyb2xzIHdoZXJlIHRoZVxyXG5cdCAgICAgKiBwb2ludHMgd2lsbCBsaWUgaW4gb3VyIGdyYXBoLCBzbyB3ZSBzZXQgdGhlbSB0byBiZSBiZXR3ZWVuIDAgYW5kIHRoZVxyXG5cdCAgICAgKiByYWRpdXMuXHJcblx0ICAgICAqL1xuXHQgICAgdmFyIHIgPSBkMy5zY2FsZUxpbmVhcigpLmRvbWFpbihbMCwgMTAwXSkucmFuZ2UoWzAsIHJhZGl1c10pO1xuXHRcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBmdW5jdGlvbiB3aGljaCB3aWxsIGRyYXcgZWFjaCBwb2ludC4gVG8gY29tcHV0ZSB0aGUgZGlzdGFuY2UgZnJvbSB0aGVcclxuXHQgICAgICogY2VudGVyIGVhY2ggcG9pbnQgaXMgd2UgcGFzcyB0aGUgZGF0YXBvaW50IHRvIHRoZSBmdW5jdGlvbiBkZWZpbmVkIGFib3ZlLlxyXG5cdCAgICAgKiBUbyBkZXRlcm1pbmUgdGhlIGFuZ2xlIGZyb20gdGhlIG9yaWdpbiB3ZSBuZWVkIHRvIGNvbnZlcnQgdGhlIGRheSB0b1xyXG5cdCAgICAgKiByYWRpYW5zLCBzbyB3ZSBjb252ZXJ0IHRoZSBkYXkgdG8gYSBudW1iZXIgYmV0d2VlbiAwICYgMSBhbmQgdGhlbiBtdWx0aXBseVxyXG5cdCAgICAgKiBpdCBieSAyIHBpLlxyXG5cdCAgICAgKi9cblx0ICAgIHZhciBsaW5lID0gZDMucmFkaWFsTGluZSgpLnJhZGl1cyhmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KGQpID8gcihkWzFdKSA6IHIoZCk7XG5cdCAgICB9KS5hbmdsZShmdW5jdGlvbiAoZCwgaSkge1xuXHQgICAgICAgIHZhciBkYXkgPSBBcnJheS5pc0FycmF5KGQpID8gcGFyc2VKdWxpYW5EYXkoZFswXSkgOiBpICogOCArIDM7XG5cdCAgICAgICAgcmV0dXJuIChkYXkgLSAxKSAlIDM2NSAvIDM2NSAqICgyICogTWF0aC5QSSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKipcclxuXHQgICAgICogU2V0cyB1cCB0aGUgY2FudmFzIHdoZXJlIHRoZSBjaXJjbGUgd2lsbCBiZSBkcmF3bi5cclxuXHQgICAgICovXG5cdCAgICB2YXIgd3JhcHBlciA9IGQzLnNlbGVjdChkaXYpLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwicG9sYXItZ3JhcGhcIiwgdHJ1ZSk7XG5cdCAgICB2YXIgc3ZnID0gd3JhcHBlci5hcHBlbmQoXCJzdmdcIilcblx0ICAgIC8vLmF0dHIoXCJ3aWR0aFwiLCB3aWR0aClcblx0ICAgIC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuXHQgICAgLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuICcwIDAgJyArIHdpZHRoICsgJyAnICsgaGVpZ2h0O1xuXHQgICAgfSkuYXR0cigncHJlc2VydmVBc3BlY3RSYXRpbycsICd4TWlkWU1pZCcpLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHdpZHRoIC8gMiArIFwiLFwiICsgaGVpZ2h0IC8gMiArIFwiKVwiKTtcblx0XG5cdCAgICBzdmcuY2FsbCh0aXApO1xuXHRcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGJpZyBjaXJjbGVzIG9mIHRoZSBncmFwaCAmIHRoZWlyIGxhYmVsc1xyXG5cdCAgICAgKi9cblx0ICAgIHZhciBnciA9IHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcInIgYXhpc1wiKS5zZWxlY3RBbGwoXCJnXCIpLmRhdGEoci50aWNrcyg1KS5zbGljZSgxKSkuZW50ZXIoKS5hcHBlbmQoXCJnXCIpO1xuXHRcblx0ICAgIGdyLmFwcGVuZChcImNpcmNsZVwiKS5hdHRyKFwiclwiLCByKTtcblx0XG5cdCAgICBnci5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIC1yKGQpIC0gNDtcblx0ICAgIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJyb3RhdGUoMTUpXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIikudGV4dChmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXHJcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgbGFiZWxzIGZvciBlYWNoIG1vbnRoIGFuZCB0aGUgbGluZXNcclxuXHQgICAgICogdGhhdCBnbyBvdXQgdG8gdGhlbS5cclxuXHQgICAgICovXG5cdCAgICB2YXIgZ2EgPSBzdmcuYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJhIGF4aXNcIikuc2VsZWN0QWxsKFwiZ1wiKS5kYXRhKGQzLnJhbmdlKDAsIDM2MCwgMzApKS5lbnRlcigpLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBcInJvdGF0ZShcIiArIChkIC0gOTApICsgXCIpXCI7XG5cdCAgICB9KTtcblx0XG5cdCAgICBnYS5hcHBlbmQoXCJsaW5lXCIpLmF0dHIoXCJ4MlwiLCByYWRpdXMpO1xuXHRcblx0ICAgIGdhLmFwcGVuZChcInRleHRcIikuYXR0cihcInhcIiwgcmFkaXVzICsgNikuYXR0cihcImR5XCIsIFwiLjM1ZW1cIikuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBkIDwgMzYwICYmIGQgPiAxODAgPyBcImVuZFwiIDogbnVsbDtcblx0ICAgIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7XG5cdCAgICB9KS50ZXh0KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIE1PTlRIX0xBQkVMU1tkIC8gMzBdO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgLyoqXHJcblx0ICAgICAqIERyYXdzIHRoZSB0aHJlc2hvbGQgbGluZXNcclxuXHQgICAgICovXG5cdCAgICB2YXIgdGhyZXNob2xkRWxlbSA9IHN2Zy5hcHBlbmQoXCJnXCIpLnNlbGVjdEFsbChcImdcIikuZGF0YSh0aHJlc2hvbGRzKS5lbnRlcigpLmFwcGVuZChcImdcIikuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiBcInJvdGF0ZShcIiArIChkLmRhdGFbMV1bMF0gLSA5MCkgKyBcIilcIjtcblx0ICAgIH0pO1xuXHRcblx0ICAgIHRocmVzaG9sZEVsZW0uYXBwZW5kKFwibGluZVwiKS5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpLmF0dHIoXCJ4MlwiLCByYWRpdXMpO1xuXHRcblx0ICAgIHRocmVzaG9sZEVsZW0uYXBwZW5kKFwidGV4dFwiKS5hdHRyKFwieFwiLCByYWRpdXMgKyA2KS5hdHRyKFwieVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHJldHVybiAoZC5kYXRhWzFdWzBdIC0gMSkgJSAzNjUgLyAzNjUgKiAoMiAqIE1hdGguUEkpO1xuXHQgICAgfSkuYXR0cihcImR5XCIsIFwiLjM1ZW1cIikuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHZhciBkYXkgPSBkLmRhdGFbMV1bMF07cmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyBcImVuZFwiIDogbnVsbDtcblx0ICAgIH0pLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQpIHtcblx0ICAgICAgICB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdO3JldHVybiBkYXkgPCAzNjAgJiYgZGF5ID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7XG5cdCAgICB9KS50ZXh0KGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgcmV0dXJuIGQubGFiZWw7XG5cdCAgICB9KTtcblx0XG5cdCAgICAvKipcclxuXHQgICAgICogRHJhd3MgdGhlIGxpbmUgdG8gdGhlIGNlbnRlciBvZiB0aGUgZGF0YVxyXG5cdCAgICAgKi9cblx0ICAgIHZhciBjZW50ZXJEYXkgPSBjZW50ZXJbMV1bMF07XG5cdCAgICB2YXIgY2VudGVyRGF5T3Bwb3NpdGUgPSAoY2VudGVyRGF5ICsgMzY1IC8gMikgJSAzNjU7XG5cdCAgICB2YXIgY2VudGVyRGF5RGF0YSA9IFtjZW50ZXJEYXksIDEwMF07XG5cdCAgICB2YXIgY2VudGVyRGF5T3Bwb3NpdGVEYXRhID0gW2NlbnRlckRheU9wcG9zaXRlLCAxMDBdO1xuXHQgICAgdmFyIGdyb3dpbmdTZWFzb25EYXRhID0gW2NlbnRlckRheURhdGEsIGNlbnRlckRheU9wcG9zaXRlRGF0YV07XG5cdFxuXHQgICAgZHJhd1BvbGFyUGF0aChncm93aW5nU2Vhc29uRGF0YSwgbGluZSwgc3ZnKS5jbGFzc2VkKFwiZ3Jvd2luZy1zZWFzb24tbGluZVwiLCBcInRydWVcIik7XG5cdFxuXHQgICAgZHJhd1BvbGFyUGF0aChjZW50ZXIsIGxpbmUsIHN2ZykuY2xhc3NlZChcImNlbnRlci1saW5lXCIsIFwidHJ1ZVwiKTtcblx0XG5cdCAgICBzdmcuc2VsZWN0QWxsKFwicG9pbnRcIikuZGF0YShbY2VudGVyWzFdXSkuZW50ZXIoKS5hcHBlbmQoXCJjaXJjbGVcIikuYXR0cihcImNsYXNzXCIsIFwicG9pbnRcIikuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHZhciBjb29ycyA9IGxpbmUoW2RdKS5zbGljZSgxKS5zbGljZSgwLCAtMSk7XG5cdCAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgY29vcnMgKyBcIilcIjtcblx0ICAgIH0pLmF0dHIoXCJyXCIsIDIuNSkuYXR0cihcInN0cm9rZVwiLCBcIiMwMDBcIikuYXR0cihcImZpbGxcIiwgXCIjZGQ4MmQyXCIpLm9uKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uIChkKSB7XG5cdCAgICAgICAgdGlwLnNob3coXCJDZW50ZXI6IFwiICsgU3RyaW5nKGRbMV0pLnN1YnN0cmluZygwLCA3KSk7XG5cdCAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDUpO1xuXHQgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMnB4XCIpO1xuXHQgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xuXHQgICAgfSkub24oXCJtb3VzZW91dFwiLCBmdW5jdGlvbiAoZCkge1xuXHQgICAgICAgIHRpcC5oaWRlKCk7XG5cdCAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDIuNSk7XG5cdCAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIxcHhcIik7XG5cdCAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmNsYXNzZWQoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgY2hhcnRzID0ge307XG5cdFxuXHQgICAgLyoqXHJcblx0ICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgbGluZSB0aGF0IHRoZSBkYXRhIGZvbGxvd3NcclxuXHQgICAgICovXG5cdCAgICBjaGFydHNbXCJtZWRpYW5zXCJdID0ge1xuXHQgICAgICAgIFwicGF0aFwiOiBkcmF3UG9sYXJQYXRoKGF2ZXJhZ2VzLCBsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIGNoYXJ0c1t5ZWFyXSA9IHtcblx0ICAgICAgICBcInBhdGhcIjogZHJhd1BvbGFyUGF0aChkYXRhW3llYXJdLCBsaW5lLCBzdmcpXG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIHBvaW50IGF0IGVhY2ggZGF0YSBwb2ludFxyXG5cdCAgICAgKi9cblx0ICAgIGNoYXJ0cy5tZWRpYW5zLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoYXZlcmFnZXMsIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHQgICAgY2hhcnRzW3llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdFxuXHQgICAgdmFyIGlucHV0d3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJpbnB1dC13cmFwcGVyXCIsIHRydWUpO1xuXHRcblx0ICAgIGRhdGEua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblx0XG5cdCAgICAgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImlucHV0XCIpLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIikuYXR0cihcImlkXCIsIFwicG9sYXItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpLmF0dHIoXCJ2YWx1ZVwiLCBrZXkpLnByb3BlcnR5KFwiY2hlY2tlZFwiLCBrZXkgPT09IHllYXIgPyB0cnVlIDogZmFsc2UpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcblx0ICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoLnJlbW92ZSgpO1xuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIGlmICghY2hhcnRzLmhhc093blByb3BlcnR5KG5ld1llYXIpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG5cdCAgICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBhdGggPSBkcmF3UG9sYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2Zyk7XG5cdCAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwibGFiZWxcIikudGV4dChrZXkpLmF0dHIoXCJmb3JcIiwgXCJwb2xhci1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcblx0XG5cdCAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIikuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKS5hdHRyKFwiaWRcIiwgXCJwb2xhci1hdmVyYWdlLVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKS5hdHRyKFwidmFsdWVcIiwgXCJtZWRpYW5zXCIpLnByb3BlcnR5KFwiY2hlY2tlZFwiLCB0cnVlKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcblx0ICAgICAgICBpZiAoIXRoaXMuY2hlY2tlZCkge1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xuXHQgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd1BvbGFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xuXHRcblx0ICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XG5cdCAgICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImxhYmVsXCIpLnRleHQoXCJCYXNlbGluZVwiKS5hdHRyKFwiZm9yXCIsIFwicG9sYXItYXZlcmFnZS1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG5cdFxuXHQgICAgdmFyIHRocmVzaG9sZENoZWNrYm94ID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwidGhyZXNob2xkLWNoZWNrYm94XCIsIHRydWUpO1xuXHRcblx0ICAgIHRocmVzaG9sZENoZWNrYm94LmFwcGVuZChcImlucHV0XCIpLmF0dHIoXCJ0eXBlXCIsIFwiY2hlY2tib3hcIikuYXR0cihcImlkXCIsIFwidGhyZXNob2xkLWNoZWNrYm94LVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKS5wcm9wZXJ0eShcImNoZWNrZWRcIiwgdHJ1ZSkub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICB0aHJlc2hvbGRFbGVtLnN0eWxlKFwib3BhY2l0eVwiLCB0aGlzLmNoZWNrZWQgPyAxIDogMCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICB0aHJlc2hvbGRDaGVja2JveC5hcHBlbmQoXCJsYWJlbFwiKS50ZXh0KFwiVGhyZXNob2xkc1wiKS5hdHRyKFwiZm9yXCIsIFwidGhyZXNob2xkLWNoZWNrYm94LVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcblx0fVxuXHRcblx0LyogUE9MQVIgR1JBUEggSEVMUEVSUyAqL1xuXHRcblx0ZnVuY3Rpb24gZmluZFBvbGFyQ2VudGVyKGRhdGEpIHtcblx0ICAgIHZhciBpLCBqLCBsZW5ndGgsIGFycjtcblx0ICAgIHZhciB0b3RhbFN1bSA9IDA7XG5cdCAgICB2YXIgaW5jb21wbGV0ZVllYXJzID0gMDtcblx0ICAgIHZhciBzdW07XG5cdCAgICBsZW5ndGggPSA0Njtcblx0XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5rZXlzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgYXJyID0gZGF0YVtkYXRhLmtleXNbaV1dO1xuXHQgICAgICAgIGlmIChhcnIubGVuZ3RoICE9PSBsZW5ndGgpIHtcblx0ICAgICAgICAgICAgaW5jb21wbGV0ZVllYXJzKys7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdW0gPSAwO1xuXHQgICAgICAgIGZvciAoaiA9IDA7IGogPCBsZW5ndGggLyAyOyBqKyspIHtcblx0ICAgICAgICAgICAgc3VtICs9IGFycltqXVsxXSAtIGFycltqICsgMjNdWzFdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdW0gPSBzdW0gLyAyMztcblx0ICAgICAgICB0b3RhbFN1bSArPSBzdW07XG5cdCAgICB9XG5cdCAgICB0b3RhbFN1bSA9IE1hdGguYWJzKHRvdGFsU3VtKSAvIChkYXRhLmtleXMubGVuZ3RoIC0gaW5jb21wbGV0ZVllYXJzKTtcblx0XG5cdCAgICB2YXIgYXJlYURpZmYgPSAxMDAwMDAwO1xuXHQgICAgdmFyIGNoZWNrRGlmZjtcblx0ICAgIHZhciBhcmVhSW5kZXggPSAwO1xuXHQgICAgdmFyIGxlZnRBcmVhLCByaWdodEFyZWE7XG5cdCAgICB2YXIgYXZncyA9IGRhdGEubWVkaWFucztcblx0ICAgIHZhciBrLCBjb3VudGVyO1xuXHRcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGggLyAyOyBpKyspIHtcblx0ICAgICAgICBsZWZ0QXJlYSA9IDA7XG5cdCAgICAgICAgcmlnaHRBcmVhID0gMDtcblx0ICAgICAgICBmb3IgKGNvdW50ZXIgPSAwOyBjb3VudGVyIDwgbGVuZ3RoIC8gMjsgY291bnRlcisrKSB7XG5cdCAgICAgICAgICAgIGogPSAoaSArIGNvdW50ZXIpICUgNDY7XG5cdCAgICAgICAgICAgIGsgPSAoaiArIDIzKSAlIDQ2O1xuXHRcblx0ICAgICAgICAgICAgbGVmdEFyZWEgKz0gcGFyc2VJbnQoYXZnc1tqXSwgMTApO1xuXHQgICAgICAgICAgICByaWdodEFyZWEgKz0gcGFyc2VJbnQoYXZnc1trXSwgMTApO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjaGVja0RpZmYgPSBNYXRoLmFicyhsZWZ0QXJlYSAtIHJpZ2h0QXJlYSk7XG5cdCAgICAgICAgaWYgKGNoZWNrRGlmZiA8IGFyZWFEaWZmKSB7XG5cdCAgICAgICAgICAgIGFyZWFEaWZmID0gY2hlY2tEaWZmO1xuXHQgICAgICAgICAgICBhcmVhSW5kZXggPSBpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZmlyc3RSYWRpdXMgPSBwYXJzZUludChhdmdzW2FyZWFJbmRleF0sIDEwKTtcblx0ICAgIHZhciBzZWNvbmRSYWRpdXMgPSBwYXJzZUludCgtYXZnc1thcmVhSW5kZXggKyAyM10sIDEwKTtcblx0XG5cdCAgICB2YXIgZmlyc3REaWZmID0gTWF0aC5hYnModG90YWxTdW0gLSBmaXJzdFJhZGl1cykgLSBNYXRoLmFicyh0b3RhbFN1bSAtIHNlY29uZFJhZGl1cyk7XG5cdCAgICB2YXIgc2Vjb25kRGlmZiA9IE1hdGguYWJzKC10b3RhbFN1bSAtIGZpcnN0UmFkaXVzKSAtIE1hdGguYWJzKC10b3RhbFN1bSAtIHNlY29uZFJhZGl1cyk7XG5cdCAgICBpZiAoc2Vjb25kRGlmZiA+IGZpcnN0RGlmZikge1xuXHQgICAgICAgIGFyZWFJbmRleCA9IGFyZWFJbmRleCArIDIzO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjaXJjbGVjZW50ZXIgPSBbMCwgMF07XG5cdCAgICB2YXIgZGF0YWNlbnRlciA9IFthcmVhSW5kZXggKiA4ICsgMywgdG90YWxTdW1dO1xuXHRcblx0ICAgIHJldHVybiBbY2lyY2xlY2VudGVyLCBkYXRhY2VudGVyXTtcblx0fVxuXHRcblx0LyoqXHJcblx0ICogc3RhcnREYXkgaXMgYWN0dWFsbHkgdGhlIHNlYXNvbmFsaXR5IGluZGV4LCBpZiBpdCBvY2N1cnMgYWZ0ZXIganVseSBpdCBzaG91bGQgYmUgZmxpcHBlZFxyXG5cdCAqL1xuXHRmdW5jdGlvbiBmaW5kUG9sYXJUaHJlc2hvbGRzKGRhdGEsIHN0YXJ0RGF5KSB7XG5cdCAgICB2YXIgc3RhcnRJbmRleCA9IE1hdGguZmxvb3IoKHN0YXJ0RGF5IC0gMykgLyA4KTtcblx0ICAgIGlmIChzdGFydEluZGV4ID4gMjIpIHtcblx0ICAgICAgICBzdGFydEluZGV4ID0gc3RhcnRJbmRleCAtIDIzO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBpLCBqLCBsZW5ndGgsIGFycjtcblx0ICAgIHZhciB0b3RhbFN1bSA9IDA7XG5cdCAgICB2YXIgc3VtO1xuXHQgICAgbGVuZ3RoID0gNDY7XG5cdFxuXHQgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgaiA9IChzdGFydEluZGV4ICsgaSkgJSBsZW5ndGg7XG5cdCAgICAgICAgdG90YWxTdW0gKz0gcGFyc2VJbnQoZGF0YVtqXSwgMTApO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBmaWZ0ZWVuVGhyZXNob2xkID0gdG90YWxTdW0gKiAuMTU7XG5cdCAgICB2YXIgZWlnaHR5VGhyZXNob2xkID0gdG90YWxTdW0gKiAuODA7XG5cdCAgICB2YXIgZWlnaHR5Zml2ZVRocmVzaG9sZCA9IHRvdGFsU3VtICogLjg1O1xuXHQgICAgdmFyIGZpZnRlZW5JbmRleEZvdW5kID0gZmFsc2UsXG5cdCAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IGZhbHNlLFxuXHQgICAgICAgIGVpZ2h0eWZpdmVJbmRleEZvdW5kID0gZmFsc2U7XG5cdCAgICB2YXIgZmlmdGVlbkluZGV4LCBlaWdodHlJbmRleCwgZWlnaHR5Zml2ZUluZGV4O1xuXHRcblx0ICAgIHRvdGFsU3VtID0gMDtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGogPSAoc3RhcnRJbmRleCArIGkpICUgbGVuZ3RoO1xuXHQgICAgICAgIHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcblx0ICAgICAgICBpZiAoIWZpZnRlZW5JbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZmlmdGVlblRocmVzaG9sZCkge1xuXHQgICAgICAgICAgICBmaWZ0ZWVuSW5kZXggPSBqO1xuXHQgICAgICAgICAgICBmaWZ0ZWVuSW5kZXhGb3VuZCA9IHRydWU7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIWVpZ2h0eUluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBlaWdodHlUaHJlc2hvbGQpIHtcblx0ICAgICAgICAgICAgZWlnaHR5SW5kZXggPSBqO1xuXHQgICAgICAgICAgICBlaWdodHlJbmRleEZvdW5kID0gdHJ1ZTtcblx0ICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICghZWlnaHR5Zml2ZUluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBlaWdodHlmaXZlVGhyZXNob2xkKSB7XG5cdCAgICAgICAgICAgIGVpZ2h0eWZpdmVJbmRleCA9IGo7XG5cdCAgICAgICAgICAgIGVpZ2h0eWZpdmVJbmRleEZvdW5kID0gdHJ1ZTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjaXJjbGVDZW50ZXIgPSBbMCwgMF07XG5cdFxuXHQgICAgdmFyIGZpZnRlZW5FbmQgPSBbZmlmdGVlbkluZGV4ICogOCArIDMsIDEwMF07XG5cdCAgICB2YXIgZWlnaHR5RW5kID0gW2VpZ2h0eUluZGV4ICogOCArIDMsIDEwMF07XG5cdCAgICB2YXIgZWlnaHR5Zml2ZUVuZCA9IFtlaWdodHlmaXZlSW5kZXggKiA4ICsgMywgMTAwXTtcblx0XG5cdCAgICByZXR1cm4gW3tcblx0ICAgICAgICBcImxhYmVsXCI6IFwiMTUlXCIsXG5cdCAgICAgICAgXCJkYXRhXCI6IFtjaXJjbGVDZW50ZXIsIGZpZnRlZW5FbmRdXG5cdCAgICB9LCB7XG5cdCAgICAgICAgXCJsYWJlbFwiOiBcIjgwJVwiLFxuXHQgICAgICAgIFwiZGF0YVwiOiBbY2lyY2xlQ2VudGVyLCBlaWdodHlFbmRdXG5cdCAgICB9LCB7XG5cdCAgICAgICAgXCJsYWJlbFwiOiBcIjg1JVwiLFxuXHQgICAgICAgIFwiZGF0YVwiOiBbY2lyY2xlQ2VudGVyLCBlaWdodHlmaXZlRW5kXVxuXHQgICAgfV07XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBHUkFQSCBIRUxQRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cdFxuXHRmdW5jdGlvbiBkcmF3TGluZWFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcblx0ICAgIHJldHVybiBzdmcuYXBwZW5kKFwicGF0aFwiKS5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpLmF0dHIoXCJkXCIsIGxpbmUoZGF0YSkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmF3UG9sYXJQYXRoKGRhdGEsIGxpbmUsIHN2Zykge1xuXHQgICAgcmV0dXJuIHN2Zy5hcHBlbmQoXCJwYXRoXCIpLmRhdHVtKGRhdGEpLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIikuYXR0cihcImRcIiwgbGluZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcykge1xuXHQgICAgcmV0dXJuIHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKS5kYXRhKGRhdGEpLmVudGVyKCkuYXBwZW5kKFwiY2lyY2xlXCIpLmF0dHIoXCJjbGFzc1wiLCBcInBvaW50XCIpLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24gKGQsIGkpIHtcblx0ICAgICAgICB2YXIgcG9pbnQgPSBBcnJheS5pc0FycmF5KGQpID8gZCA6IFtpICogOCArIDMsIGRdO1xuXHQgICAgICAgIHZhciBjb29ycyA9IGxpbmUoW3BvaW50XSkuc2xpY2UoMSkuc2xpY2UoMCwgLTEpO1xuXHQgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGNvb3JzICsgXCIpXCI7XG5cdCAgICB9KS5hdHRyKFwiclwiLCAzKS5hdHRyKFwic3Ryb2tlXCIsIFwiIzAwMFwiKS5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbiAoZCwgaSkge1xuXHQgICAgICAgIHZhciB2YWwgPSBBcnJheS5pc0FycmF5KGQpID8gZFsxXSA6IGQ7XG5cdCAgICAgICAgcmV0dXJuIGNvbXB1dGVDb2xvcih2YWwsIGF2ZXJhZ2VzW2kgJSA0Nl0sIDMpO1xuXHQgICAgfSkub24oXCJtb3VzZW92ZXJcIiwgaGFuZGxlUG9pbnRNb3VzZW92ZXIpLm9uKFwibW91c2VvdXRcIiwgaGFuZGxlUG9pbnRNb3VzZW91dCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdmVyKGQpIHtcblx0ICAgIHZhciB0aXBTdHJpbmcgPSBBcnJheS5pc0FycmF5KGQpID8gZm9ybWF0RGF0ZShkWzBdKSArIFwiOiBcIiArIGRbMV0gOiBcIkF2ZXJhZ2U6IFwiICsgZDtcblx0ICAgIHRpcC5zaG93KHRpcFN0cmluZyk7XG5cdCAgICB0aGlzLnNldEF0dHJpYnV0ZShcInJcIiwgNSk7XG5cdCAgICB0aGlzLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjJweFwiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlUG9pbnRNb3VzZW91dChkKSB7XG5cdCAgICB0aXAuaGlkZSgpO1xuXHQgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDMpO1xuXHQgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIxcHhcIik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUNoZWNrYm94KHdyYXBwZXIsIGtleSwgdHlwZSwgeWVhciwgY2hhcnRzLCBkYXRhLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzLCBsYXQsIGxuZykge1xuXHQgICAgdmFyIGNoZWNrYm94V3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpO1xuXHRcblx0ICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJpbnB1dFwiKS5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpLmF0dHIoXCJpZFwiLCB0eXBlICsgXCItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpLmF0dHIoXCJ2YWx1ZVwiLCBrZXkpLnByb3BlcnR5KFwiY2hlY2tlZFwiLCBrZXkgPT09IHllYXIgPyB0cnVlIDogZmFsc2UpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xuXHQgICAgICAgIGlmICghdGhpcy5jaGVja2VkKSB7XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoLnJlbW92ZSgpO1xuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGlmICghY2hhcnRzLmhhc093blByb3BlcnR5KG5ld1llYXIpKSB7XG5cdCAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdMaW5lYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2Zyk7XG5cdCAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKS50ZXh0KGtleSkuYXR0cihcImZvclwiLCB0eXBlICsgXCItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjb21wdXRlQ29sb3IodmFsdWUsIG1lZGlhbiwgc2NhbGUpIHtcblx0ICAgIHZhciBkaWZmID0gdmFsdWUgLSBtZWRpYW47XG5cdCAgICB2YXIgcGVyY2VudF9kaWZmID0gTWF0aC5hYnMoZGlmZikgLyBtZWRpYW4gKiAxMDAgKiBzY2FsZTtcblx0ICAgIHZhciBsaWdodG5lc3MgPSAxMDAgLSBwZXJjZW50X2RpZmYgKyBcIiVcIjtcblx0XG5cdCAgICBpZiAoZGlmZiA+IDApIHtcblx0ICAgICAgICByZXR1cm4gXCJoc2woOCwgNzklLCBcIiArIGxpZ2h0bmVzcyArIFwiKVwiO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gXCJoc2woMjE5LCA3OSUsIFwiICsgbGlnaHRuZXNzICsgXCIpXCI7XG5cdCAgICB9XG5cdH1cblx0XG5cdC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gREFURSBIRUxQRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VEYXRlKGRhdGUpIHtcblx0ICAgIGRhdGUgPSBkYXRlLnRvU3RyaW5nKCk7XG5cdCAgICB2YXIgeWVhciA9IGRhdGUuc3Vic3RyaW5nKDAsIDQpO1xuXHQgICAgdmFyIG1vbnRoID0gcGFyc2VJbnQoZGF0ZS5zdWJzdHJpbmcoNCwgNiksIDEwKSAtIDE7XG5cdCAgICB2YXIgZGF5ID0gZGF0ZS5zdWJzdHJpbmcoNiwgOCk7XG5cdFxuXHQgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwYXJzZUp1bGlhbkRheShkYXRlKSB7XG5cdCAgICBpZiAodHlwZW9mIGRhdGUgPT09IFwic3RyaW5nXCIpIHtcblx0ICAgICAgICBkYXRlID0gcGFyc2VEYXRlKGRhdGUpO1xuXHQgICAgICAgIHJldHVybiBkYXRlLmdldERPWSgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gZGF0ZTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKSB7XG5cdCAgICBpZiAoZGF0ZSA9PT0gXCJBdmVyYWdlXCIpIHtcblx0ICAgICAgICByZXR1cm4gZGF0ZTtcblx0ICAgIH1cblx0XG5cdCAgICBkYXRlID0gcGFyc2VEYXRlKGRhdGUpO1xuXHQgICAgcmV0dXJuIGZvcm1hdE1vbnRoKGRhdGUuZ2V0TW9udGgoKSkgKyBcIiBcIiArIG9yZGluYWxfc3VmZml4X29mKGRhdGUuZ2V0RGF0ZSgpKSArIFwiLCBcIiArIGRhdGUuZ2V0RnVsbFllYXIoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0TW9udGgobW9udGgpIHtcblx0ICAgIHN3aXRjaCAobW9udGgpIHtcblx0ICAgICAgICBjYXNlIDA6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkphbi5cIjtcblx0ICAgICAgICBjYXNlIDE6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkZlYi5cIjtcblx0ICAgICAgICBjYXNlIDI6XG5cdCAgICAgICAgICAgIHJldHVybiBcIk1hci5cIjtcblx0ICAgICAgICBjYXNlIDM6XG5cdCAgICAgICAgICAgIHJldHVybiBcIkFwci5cIjtcblx0ICAgICAgICBjYXNlIDQ6XG5cdCAgICAgICAgICAgIHJldHVybiBcIk1heVwiO1xuXHQgICAgICAgIGNhc2UgNTpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiSnVuLlwiO1xuXHQgICAgICAgIGNhc2UgNjpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiSnVsLlwiO1xuXHQgICAgICAgIGNhc2UgNzpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiQXVnLlwiO1xuXHQgICAgICAgIGNhc2UgODpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiU2VwLlwiO1xuXHQgICAgICAgIGNhc2UgOTpcblx0ICAgICAgICAgICAgcmV0dXJuIFwiT2N0LlwiO1xuXHQgICAgICAgIGNhc2UgMTA6XG5cdCAgICAgICAgICAgIHJldHVybiBcIk5vdi5cIjtcblx0ICAgICAgICBjYXNlIDExOlxuXHQgICAgICAgICAgICByZXR1cm4gXCJEZWMuXCI7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9yZGluYWxfc3VmZml4X29mKGRheSkge1xuXHQgICAgdmFyIGogPSBkYXkgJSAxMCxcblx0ICAgICAgICBrID0gZGF5ICUgMTAwO1xuXHQgICAgaWYgKGogPT09IDEgJiYgayAhPT0gMTEpIHtcblx0ICAgICAgICByZXR1cm4gZGF5ICsgXCJzdFwiO1xuXHQgICAgfVxuXHQgICAgaWYgKGogPT09IDIgJiYgayAhPT0gMTIpIHtcblx0ICAgICAgICByZXR1cm4gZGF5ICsgXCJuZFwiO1xuXHQgICAgfVxuXHQgICAgaWYgKGogPT09IDMgJiYgayAhPT0gMTMpIHtcblx0ICAgICAgICByZXR1cm4gZGF5ICsgXCJyZFwiO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGRheSArIFwidGhcIjtcblx0fVxuXHRcblx0dmFyIE1PTlRIX0xBQkVMUyA9IHtcblx0ICAgIDA6IFwiSmFuXCIsXG5cdCAgICAxOiBcIkZlYlwiLFxuXHQgICAgMjogXCJNYXJcIixcblx0ICAgIDM6IFwiQXByXCIsXG5cdCAgICA0OiBcIk1heVwiLFxuXHQgICAgNTogXCJKdW5cIixcblx0ICAgIDY6IFwiSnVsXCIsXG5cdCAgICA3OiBcIkF1Z1wiLFxuXHQgICAgODogXCJTZXBcIixcblx0ICAgIDk6IFwiT2N0XCIsXG5cdCAgICAxMDogXCJOb3ZcIixcblx0ICAgIDExOiBcIkRlY1wiXG5cdH07XG5cbi8qKiovIH0sXG4vKiAyOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQmluZFRhYkV2ZW50cztcblx0ZnVuY3Rpb24gQmluZFRhYkV2ZW50cygpIHtcblx0ICBkMy5zZWxlY3RBbGwoXCIucGFuZWwtdG9wLWJ0blwiKS5vbihcImNsaWNrXCIsIGhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2soKSB7XG5cdCAgLy8gSWYgdGhlIHNlY3Rpb24gaXMgYWxyZWFkeSBhY3RpdmUsIGRvIG5vdGhpbmdcblx0ICBpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSByZXR1cm47XG5cdFxuXHQgIHRvZ2dsZVBhbmVsV2lkdGgoKTtcblx0ICB0b2dnbGVNYXBQYWRkaW5nKCk7XG5cdFxuXHQgIGQzLnNlbGVjdEFsbCgnLnBhbmVsLXRvcC1idG4sIC5wYW5lbC1zZWN0aW9uLXdyYXBwZXInKS5jbGFzc2VkKCdhY3RpdmUnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gIWQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdhY3RpdmUnKTtcblx0ICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9nZ2xlUGFuZWxXaWR0aCgpIHtcblx0ICB2YXIgd3JhcHBlcnMgPSBkMy5zZWxlY3RBbGwoJyNtYXAtd3JhcHBlciwgI3JpZ2h0LXBhbmVsJyk7XG5cdFxuXHQgIHZhciBsYXllcnNBY3RpdmUgPSB3cmFwcGVycy5jbGFzc2VkKCdsYXllcnMtYWN0aXZlJyk7XG5cdCAgdmFyIGdyYXBoc0FjdGl2ZSA9IHdyYXBwZXJzLmNsYXNzZWQoJ2dyYXBocy1hY3RpdmUnKTtcblx0XG5cdCAgd3JhcHBlcnMuY2xhc3NlZCgnbGF5ZXJzLWFjdGl2ZScsICFsYXllcnNBY3RpdmUpLmNsYXNzZWQoJ2dyYXBocy1hY3RpdmUnLCAhZ3JhcGhzQWN0aXZlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9nZ2xlTWFwUGFkZGluZygpIHtcblx0ICB2YXIgcGFkZGluZ1JpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyaWdodC1wYW5lbFwiKS5vZmZzZXRXaWR0aDtcblx0ICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcC13cmFwcGVyXCIpLnN0eWxlLnBhZGRpbmdSaWdodCA9IHBhZGRpbmdSaWdodCArIFwicHhcIjtcblx0fVxuXG4vKioqLyB9LFxuLyogMzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBpbmRleF9idW5kbGUuanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBlN2ZhY2ZiNWE2YzZhY2Y5NGZmMSIsImltcG9ydCBQYXJzZUNvbmZpZyBmcm9tICcuL3BhcnNlcic7XHJcbmltcG9ydCBDcmVhdGVTZWFyY2ggZnJvbSAnLi9zZWFyY2gnO1xyXG5pbXBvcnQgc2V0dXBQYW5lbCBmcm9tICcuL3BhbmVsJztcclxuaW1wb3J0IHtDcmVhdGVCYXNlTGF5ZXJzfSBmcm9tICcuL2Jhc2VsYXllcic7XHJcbmltcG9ydCB7U2V0dXBHcmFwaHMsIEJpbmRHcmFwaEV2ZW50c30gZnJvbSAnLi9ncmFwaCdcclxuaW1wb3J0IEJpbmRUYWJFdmVudHMgZnJvbSAnLi90YWJzJ1xyXG5pbXBvcnQge0NyZWF0ZU1hcH0gZnJvbSAnLi9tYXAnXHJcbmltcG9ydCB7QmluZFVwZGF0ZVNoYXJlVXJsLCBBZGRTaGFyZVNldHRpbmdzVG9Db25maWd9IGZyb20gJy4vc2hhcmUnXHJcbmltcG9ydCB7Q3JlYXRlRGVmYXVsdExheWVyc30gZnJvbSAnLi90b2dnbGVMYXllcidcclxuXHJcbnZhciBjc3MgPSByZXF1aXJlKCcuLi9jc3Mvc2Fzcy9sYW5kYXQuc2NzcycpXHJcblxyXG4vLyBEb2VzIG5vdCByZWx5IG9uIG1hcCBvYmplY3Qgb3IgY29uZmlnIGZpbGVcclxudmFyIEJhc2UgPSBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICBQYXJzZUNvbmZpZyhjb25maWcsIGNhbGxiYWNrKTtcclxuICAgIFNldHVwR3JhcGhzKCk7XHJcbiAgICBCaW5kVGFiRXZlbnRzKCk7XHJcbn1cclxuXHJcbi8vIERvZXMgcmVseSBvbiBtYXAgb2JqZWN0IG9yIGNvbmZpZyBmaWxlXHJcbnZhciBjYWxsYmFjayA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICBBZGRTaGFyZVNldHRpbmdzVG9Db25maWcoZGF0YSlcclxuICAgIHZhciBtYXAgPSBDcmVhdGVNYXAoZGF0YS5tYXApO1xyXG4gICAgQ3JlYXRlQmFzZUxheWVycyhtYXAsIGRhdGEuYmFzZWxheWVycyk7XHJcbiAgICBDcmVhdGVEZWZhdWx0TGF5ZXJzKGRhdGEubGF5ZXJzLCBkYXRhW1wiYWN0aXZlLWxheWVyc1wiXSk7XHJcbiAgICBzZXR1cFBhbmVsKGRhdGEubGF5ZXJzLCBkYXRhLmxheW91dCk7XHJcbiAgICBDcmVhdGVTZWFyY2gobWFwKTtcclxuICAgIEJpbmRHcmFwaEV2ZW50cyhtYXApO1xyXG4gICAgQmluZFVwZGF0ZVNoYXJlVXJsKG1hcCk7XHJcbn1cclxuXHJcbndpbmRvdy5CYXNlID0gQmFzZTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtCYXNlfTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvYmFzZS5qcyIsIi8qKlxyXG4gKiBQYXJzZXMgYSBjb25maWcgZmlsZS4gU2luY2UgdGhlIHByb2Nlc3MgdG8gZ2V0IGV4dGVybmFsIGZpbGVzXHJcbiAqIHVzZXMgQUpBWCB5b3UgbmVlZCB0byBwYXNzIGEgY2FsbGJhY2sgdG8gaGFuZGxlIHRoZSBuZXh0IHN0ZXBzXHJcbiAqIG9mIHVzaW5nIHRoZSBjb25maWcgZmlsZSwgc2luY2Ugd2UgZG8gbm90IGtub3cgaG93IGxvbmcgaXRcclxuICogd2lsbCB0YWtlIHRvIGdyYWIgdGhlIGZpbGUuXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQYXJzZUNvbmZpZyAoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcclxuICAgIEdldENvbmZpZyhjb25maWdGaWxlLCBjYWxsYmFjayk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIEdldENvbmZpZyAoY29uZmlnRmlsZSwgY2FsbGJhY2spIHtcclxuICAgIHZhciB4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoeG1saHR0cC5yZWFkeVN0YXRlID09IDQpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4bWxodHRwLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2goZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVSUk9SOiBNYWxmb3JtZWQgSlNPTiBpbiBjb25maWcgZmlsZS5cIik7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvcm1hdE1hcChkYXRhKTtcclxuICAgICAgICAgICAgZm9ybWF0TGF5ZXJzKGRhdGEpO1xyXG4gICAgICAgICAgICBjYWxsYmFjayhkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gXHJcbiAgICB4bWxodHRwLm9wZW4oXCJHRVRcIiwgY29uZmlnRmlsZSwgdHJ1ZSk7XHJcbiAgICB4bWxodHRwLnNlbmQoKTtcclxuICAgIGNvbnNvbGUubG9nKFwiaGlcIilcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0TWFwIChkYXRhKSB7XHJcbiAgICBpZiAoIWRhdGEubWFwKSBkYXRhLm1hcCA9IHt9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRMYXllcnMgKGRhdGEpIHtcclxuICAgIHZhciBsYXllcnMgPSBkYXRhLmxheWVycztcclxuICAgIHZhciBkZWZhdWx0TWFwc2VydmVyVXJsID0gZGF0YS5tYXBzZXJ2ZXJVcmw7XHJcbiAgICB2YXIgZGVmYXVsdEVuYWJsZWRMYXllcnMgPSBkYXRhW1wiYWN0aXZlLWxheWVyc1wiXTtcclxuICAgIHZhciBsYXllcmdyb3VwO1xyXG4gICAgdmFyIGk7XHJcblxyXG4gICAgZm9yICh2YXIgcHJvcCBpbiBsYXllcnMpIHtcclxuICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xyXG4gICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxheWVyZ3JvdXAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgc2V0TWFwc2VydmVyVXJsKGxheWVyZ3JvdXBbaV0sIGRlZmF1bHRNYXBzZXJ2ZXJVcmwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2V0TWFwc2VydmVyVXJsIChsYXllciwgdXJsKSB7XHJcbiAgICBsYXllci51cmwgPSBsYXllci51cmwgfHwgdXJsO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3BhcnNlci5qcyIsImltcG9ydCB7IEdlb1NlYXJjaENvbnRyb2wsIEVzcmlQcm92aWRlciB9IGZyb20gJ2xlYWZsZXQtZ2Vvc2VhcmNoJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENyZWF0ZVNlYXJjaCAobWFwKSB7XHJcbiAgICBjb25zdCBwcm92aWRlciA9IG5ldyBFc3JpUHJvdmlkZXIoKTtcclxuXHJcbiAgICBjb25zdCBzZWFyY2hDb250cm9sID0gbmV3IEdlb1NlYXJjaENvbnRyb2woe1xyXG4gICAgICAgIHByb3ZpZGVyOiBwcm92aWRlcixcclxuICAgICAgICBzaG93TWFya2VyOiBmYWxzZSxcclxuICAgIH0pO1xyXG5cclxuICAgIG1hcC5hZGRDb250cm9sKHNlYXJjaENvbnRyb2wpO1xyXG5cclxuICAgIEwuRG9tRXZlbnQub24oc2VhcmNoQ29udHJvbC5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmNvbnRhaW5lciwgXCJjbGlja1wiLCBmdW5jdGlvbiAoZXYpIHtcclxuICAgICAgICBMLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbihldik7XHJcbiAgICB9KTtcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9zZWFyY2guanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbGVhZmxldENvbnRyb2wgPSByZXF1aXJlKCcuL2xlYWZsZXRDb250cm9sJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnR2VvU2VhcmNoQ29udHJvbCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xlYWZsZXRDb250cm9sKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9zZWFyY2hFbGVtZW50ID0gcmVxdWlyZSgnLi9zZWFyY2hFbGVtZW50Jyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnU2VhcmNoRWxlbWVudCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NlYXJjaEVsZW1lbnQpLmRlZmF1bHQ7XG4gIH1cbn0pO1xuXG52YXIgX2JpbmdQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL2JpbmdQcm92aWRlcicpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ0JpbmdQcm92aWRlcicsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2JpbmdQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfZXNyaVByb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcnMvZXNyaVByb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnRXNyaVByb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXNyaVByb3ZpZGVyKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9nb29nbGVQcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL2dvb2dsZVByb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnR29vZ2xlUHJvdmlkZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nb29nbGVQcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbnZhciBfb3BlblN0cmVldE1hcFByb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcnMvb3BlblN0cmVldE1hcFByb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnT3BlblN0cmVldE1hcFByb3ZpZGVyJywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb3BlblN0cmVldE1hcFByb3ZpZGVyKS5kZWZhdWx0O1xuICB9XG59KTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXJzL3Byb3ZpZGVyJyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnUHJvdmlkZXInLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcikuZGVmYXVsdDtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvaW5kZXguanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbm9kZW50UnVudGltZSA9IHJlcXVpcmUoJ25vZGVudC1ydW50aW1lJyk7XG5cbnZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gTGVhZmxldENvbnRyb2w7XG5cbnZhciBfbG9kYXNoID0gcmVxdWlyZSgnbG9kYXNoLmRlYm91bmNlJyk7XG5cbnZhciBfbG9kYXNoMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xvZGFzaCk7XG5cbnZhciBfc2VhcmNoRWxlbWVudCA9IHJlcXVpcmUoJy4vc2VhcmNoRWxlbWVudCcpO1xuXG52YXIgX3NlYXJjaEVsZW1lbnQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VhcmNoRWxlbWVudCk7XG5cbnZhciBfcmVzdWx0TGlzdCA9IHJlcXVpcmUoJy4vcmVzdWx0TGlzdCcpO1xuXG52YXIgX3Jlc3VsdExpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcmVzdWx0TGlzdCk7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuL2RvbVV0aWxzJyk7XG5cbnZhciBfY29uc3RhbnRzID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGRlZmF1bHRPcHRpb25zID0gZnVuY3Rpb24gZGVmYXVsdE9wdGlvbnMoKSB7XG4gIHJldHVybiB7XG4gICAgcG9zaXRpb246ICd0b3BsZWZ0JyxcbiAgICBzdHlsZTogJ2J1dHRvbicsXG4gICAgc2hvd01hcmtlcjogdHJ1ZSxcbiAgICBzaG93UG9wdXA6IGZhbHNlLFxuICAgIG1hcmtlcjoge1xuICAgICAgaWNvbjogbmV3IEwuSWNvbi5EZWZhdWx0KCksXG4gICAgICBkcmFnZ2FibGU6IGZhbHNlXG4gICAgfSxcbiAgICBtYXhNYXJrZXJzOiAxLFxuICAgIHJldGFpblpvb21MZXZlbDogZmFsc2UsXG4gICAgYW5pbWF0ZVpvb206IHRydWUsXG4gICAgc2VhcmNoTGFiZWw6ICdFbnRlciBhZGRyZXNzJyxcbiAgICBub3RGb3VuZE1lc3NhZ2U6ICdTb3JyeSwgdGhhdCBhZGRyZXNzIGNvdWxkIG5vdCBiZSBmb3VuZC4nLFxuICAgIG1lc3NhZ2VIaWRlRGVsYXk6IDMwMDAsXG4gICAgem9vbUxldmVsOiAxOCxcbiAgICBjbGFzc05hbWVzOiB7XG4gICAgICBjb250YWluZXI6ICdsZWFmbGV0LWJhciBsZWFmbGV0LWNvbnRyb2wgbGVhZmxldC1jb250cm9sLWdlb3NlYXJjaCcsXG4gICAgICBidXR0b246ICdsZWFmbGV0LWJhci1wYXJ0IGxlYWZsZXQtYmFyLXBhcnQtc2luZ2xlJyxcbiAgICAgIG1zZ2JveDogJ2xlYWZsZXQtYmFyIG1lc3NhZ2UnLFxuICAgICAgZm9ybTogJycsXG4gICAgICBpbnB1dDogJydcbiAgICB9LFxuICAgIGF1dG9Db21wbGV0ZTogdHJ1ZSxcbiAgICBhdXRvQ29tcGxldGVEZWxheTogMjUwXG4gIH07XG59O1xuXG52YXIgQ29udHJvbCA9IHtcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHRoaXMubWFya2VycyA9IG5ldyBMLkZlYXR1cmVHcm91cCgpO1xuXG4gICAgdGhpcy5vcHRpb25zID0gX2V4dGVuZHMoe30sIGRlZmF1bHRPcHRpb25zKCksIG9wdGlvbnMpO1xuXG4gICAgdmFyIF9vcHRpb25zID0gdGhpcy5vcHRpb25zLFxuICAgICAgICBzdHlsZSA9IF9vcHRpb25zLnN0eWxlLFxuICAgICAgICBjbGFzc05hbWVzID0gX29wdGlvbnMuY2xhc3NOYW1lcyxcbiAgICAgICAgc2VhcmNoTGFiZWwgPSBfb3B0aW9ucy5zZWFyY2hMYWJlbCxcbiAgICAgICAgYXV0b0NvbXBsZXRlID0gX29wdGlvbnMuYXV0b0NvbXBsZXRlLFxuICAgICAgICBhdXRvQ29tcGxldGVEZWxheSA9IF9vcHRpb25zLmF1dG9Db21wbGV0ZURlbGF5O1xuXG4gICAgaWYgKHN0eWxlICE9PSAnYnV0dG9uJykge1xuICAgICAgdGhpcy5vcHRpb25zLmNsYXNzTmFtZXMuY29udGFpbmVyICs9ICcgJyArIG9wdGlvbnMuc3R5bGU7XG4gICAgfVxuXG4gICAgdGhpcy5zZWFyY2hFbGVtZW50ID0gbmV3IF9zZWFyY2hFbGVtZW50Mi5kZWZhdWx0KF9leHRlbmRzKHt9LCB0aGlzLm9wdGlvbnMsIHtcbiAgICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KHF1ZXJ5KSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5vblN1Ym1pdChxdWVyeSk7XG4gICAgICB9XG4gICAgfSkpO1xuXG4gICAgdmFyIF9zZWFyY2hFbGVtZW50JGVsZW1lbiA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cyxcbiAgICAgICAgY29udGFpbmVyID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuLmNvbnRhaW5lcixcbiAgICAgICAgZm9ybSA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5mb3JtLFxuICAgICAgICBpbnB1dCA9IF9zZWFyY2hFbGVtZW50JGVsZW1lbi5pbnB1dDtcblxuICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuXG4gICAgdmFyIGJ1dHRvbiA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2EnLCBjbGFzc05hbWVzLmJ1dHRvbiwgY29udGFpbmVyKTtcbiAgICBidXR0b24udGl0bGUgPSBzZWFyY2hMYWJlbDtcbiAgICBidXR0b24uaHJlZiA9ICcjJztcblxuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5vbkNsaWNrKGUpO1xuICAgIH0sIGZhbHNlKTtcblxuICAgIGlmIChhdXRvQ29tcGxldGUpIHtcbiAgICAgIHRoaXMucmVzdWx0TGlzdCA9IG5ldyBfcmVzdWx0TGlzdDIuZGVmYXVsdCh7XG4gICAgICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbiBoYW5kbGVDbGljayhfcmVmKSB7XG4gICAgICAgICAgdmFyIHJlc3VsdCA9IF9yZWYucmVzdWx0O1xuXG4gICAgICAgICAgaW5wdXQudmFsdWUgPSByZXN1bHQubGFiZWw7XG4gICAgICAgICAgX3RoaXMub25TdWJtaXQoeyBxdWVyeTogcmVzdWx0LmxhYmVsIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZm9ybS5hcHBlbmRDaGlsZCh0aGlzLnJlc3VsdExpc3QuZWxlbWVudHMuY29udGFpbmVyKTtcblxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoMCwgX2xvZGFzaDIuZGVmYXVsdCkoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmF1dG9TZWFyY2goZSk7XG4gICAgICB9LCBhdXRvQ29tcGxldGVEZWxheSksIHRydWUpO1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5zZWxlY3RSZXN1bHQoZSk7XG4gICAgICB9LCB0cnVlKTtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICByZXR1cm4gX3RoaXMuY2xlYXJSZXN1bHRzKGUpO1xuICAgICAgfSwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgdGhpcy5lbGVtZW50cyA9IHsgYnV0dG9uOiBidXR0b24gfTtcbiAgfSxcbiAgb25BZGQ6IGZ1bmN0aW9uIG9uQWRkKG1hcCkge1xuICAgIHZhciBfb3B0aW9uczIgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHNob3dNYXJrZXIgPSBfb3B0aW9uczIuc2hvd01hcmtlcixcbiAgICAgICAgc3R5bGUgPSBfb3B0aW9uczIuc3R5bGU7XG5cblxuICAgIHRoaXMubWFwID0gbWFwO1xuICAgIGlmIChzaG93TWFya2VyKSB7XG4gICAgICB0aGlzLm1hcmtlcnMuYWRkVG8obWFwKTtcbiAgICB9XG5cbiAgICBpZiAoc3R5bGUgPT09ICdiYXInKSB7XG4gICAgICB2YXIgZm9ybSA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cy5mb3JtO1xuXG4gICAgICB2YXIgcm9vdCA9IG1hcC5nZXRDb250YWluZXIoKS5xdWVyeVNlbGVjdG9yKCcubGVhZmxldC1jb250cm9sLWNvbnRhaW5lcicpO1xuXG4gICAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgJ2xlYWZsZXQtY29udHJvbC1nZW9zZWFyY2ggYmFyJyk7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZm9ybSk7XG4gICAgICByb290LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgICB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmNvbnRhaW5lcjtcbiAgfSxcbiAgb25SZW1vdmU6IGZ1bmN0aW9uIG9uUmVtb3ZlKCkge1xuICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcbiAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgX3NlYXJjaEVsZW1lbnQkZWxlbWVuMiA9IHRoaXMuc2VhcmNoRWxlbWVudC5lbGVtZW50cyxcbiAgICAgICAgY29udGFpbmVyID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuMi5jb250YWluZXIsXG4gICAgICAgIGlucHV0ID0gX3NlYXJjaEVsZW1lbnQkZWxlbWVuMi5pbnB1dDtcblxuXG4gICAgaWYgKGNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG4gICAgICAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY29udGFpbmVyLCAnYWN0aXZlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcbiAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgfVxuICB9LFxuICBzZWxlY3RSZXN1bHQ6IGZ1bmN0aW9uIHNlbGVjdFJlc3VsdChldmVudCkge1xuICAgIGlmICghW19jb25zdGFudHMuQVJST1dfRE9XTl9LRVksIF9jb25zdGFudHMuQVJST1dfVVBfS0VZXS5pbmNsdWRlcyhldmVudC5rZXlDb2RlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIGlucHV0ID0gdGhpcy5zZWFyY2hFbGVtZW50LmVsZW1lbnRzLmlucHV0O1xuXG5cbiAgICB2YXIgbGlzdCA9IHRoaXMucmVzdWx0TGlzdDtcbiAgICB2YXIgbWF4ID0gdGhpcy5yZXN1bHRMaXN0LmNvdW50KCkgLSAxO1xuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWJpdHdpc2VcbiAgICB2YXIgbmV4dCA9IGV2ZW50LmNvZGUgPT09ICdBcnJvd0Rvd24nID8gfn5saXN0LnNlbGVjdGVkICsgMSA6IH5+bGlzdC5zZWxlY3RlZCAtIDE7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5lc3RlZC10ZXJuYXJ5XG4gICAgdmFyIGlkeCA9IG5leHQgPCAwID8gbWF4IDogbmV4dCA+IG1heCA/IDAgOiBuZXh0O1xuXG4gICAgdmFyIGl0ZW0gPSBsaXN0LnNlbGVjdChpZHgpO1xuICAgIGlucHV0LnZhbHVlID0gaXRlbS5sYWJlbDtcbiAgfSxcbiAgY2xlYXJSZXN1bHRzOiBmdW5jdGlvbiBjbGVhclJlc3VsdHMoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSAhPT0gX2NvbnN0YW50cy5FU0NBUEVfS0VZKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5yZXN1bHRMaXN0LmNsZWFyKCk7XG4gIH0sXG4gIGF1dG9TZWFyY2g6IGZ1bmN0aW9uIGF1dG9TZWFyY2goZXZlbnQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgdmFyIHF1ZXJ5LCBwcm92aWRlciwgcmVzdWx0cztcblxuICAgICAgaWYgKF9jb25zdGFudHMuU1BFQ0lBTF9LRVlTLmluY2x1ZGVzKGV2ZW50LmtleUNvZGUpKSB7XG4gICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG4gICAgICB9XG5cbiAgICAgIHF1ZXJ5ID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICAgICAgcHJvdmlkZXIgPSB0aGlzLm9wdGlvbnMucHJvdmlkZXI7XG4gICAgICByZXR1cm4gcHJvdmlkZXIuc2VhcmNoKHsgcXVlcnk6IHF1ZXJ5IH0pLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG5cbiAgICAgICAgcmVzdWx0cyA9ICRhd2FpdF8xO1xuICAgICAgICB0aGlzLnJlc3VsdExpc3QucmVuZGVyKHJlc3VsdHMpO1xuICAgICAgICByZXR1cm4gJHJldHVybigpO1xuICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgfS4kYXN5bmNiaW5kKHRoaXMpKTtcbiAgfSxcbiAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KHF1ZXJ5KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uICgkcmV0dXJuLCAkZXJyb3IpIHtcbiAgICAgIHZhciBwcm92aWRlciwgcmVzdWx0cztcbiAgICAgIHByb3ZpZGVyID0gdGhpcy5vcHRpb25zLnByb3ZpZGVyO1xuICAgICAgcmV0dXJuIHByb3ZpZGVyLnNlYXJjaChxdWVyeSkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzIpIHtcblxuICAgICAgICByZXN1bHRzID0gJGF3YWl0XzI7XG5cbiAgICAgICAgaWYgKHJlc3VsdHMgJiYgcmVzdWx0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5zaG93UmVzdWx0KHJlc3VsdHNbMF0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAkcmV0dXJuKCk7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICB9LFxuICBzaG93UmVzdWx0OiBmdW5jdGlvbiBzaG93UmVzdWx0KHJlc3VsdCkge1xuICAgIHZhciBtYXJrZXJzID0gT2JqZWN0LmtleXModGhpcy5tYXJrZXJzLl9sYXllcnMpO1xuICAgIGlmIChtYXJrZXJzLmxlbmd0aCA+PSB0aGlzLm9wdGlvbnMubWF4TWFya2Vycykge1xuICAgICAgdGhpcy5tYXJrZXJzLnJlbW92ZUxheWVyKG1hcmtlcnNbMF0pO1xuICAgIH1cblxuICAgIHZhciBtYXJrZXIgPSB0aGlzLmFkZE1hcmtlcihyZXN1bHQpO1xuICAgIHRoaXMuY2VudGVyTWFwKHJlc3VsdCk7XG5cbiAgICB0aGlzLm1hcC5maXJlRXZlbnQoJ2dlb3NlYXJjaC9zaG93bG9jYXRpb24nLCB7XG4gICAgICBsb2NhdGlvbjogcmVzdWx0LFxuICAgICAgbWFya2VyOiBtYXJrZXJcbiAgICB9KTtcbiAgfSxcbiAgYWRkTWFya2VyOiBmdW5jdGlvbiBhZGRNYXJrZXIocmVzdWx0KSB7XG4gICAgdmFyIF9vcHRpb25zMyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgb3B0aW9ucyA9IF9vcHRpb25zMy5tYXJrZXIsXG4gICAgICAgIHNob3dQb3B1cCA9IF9vcHRpb25zMy5zaG93UG9wdXA7XG5cbiAgICB2YXIgbWFya2VyID0gbmV3IEwuTWFya2VyKFtyZXN1bHQueSwgcmVzdWx0LnhdLCBvcHRpb25zKTtcbiAgICBtYXJrZXIuYmluZFBvcHVwKHJlc3VsdC5sYWJlbCk7XG5cbiAgICB0aGlzLm1hcmtlcnMuYWRkTGF5ZXIobWFya2VyKTtcblxuICAgIGlmIChzaG93UG9wdXApIHtcbiAgICAgIG1hcmtlci5vcGVuUG9wdXAoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWFya2VyO1xuICB9LFxuICBjZW50ZXJNYXA6IGZ1bmN0aW9uIGNlbnRlck1hcChyZXN1bHQpIHtcbiAgICB2YXIgX29wdGlvbnM0ID0gdGhpcy5vcHRpb25zLFxuICAgICAgICByZXRhaW5ab29tTGV2ZWwgPSBfb3B0aW9uczQucmV0YWluWm9vbUxldmVsLFxuICAgICAgICBhbmltYXRlWm9vbSA9IF9vcHRpb25zNC5hbmltYXRlWm9vbTtcblxuXG4gICAgdmFyIHJlc3VsdEJvdW5kcyA9IG5ldyBMLkxhdExuZ0JvdW5kcyhyZXN1bHQuYm91bmRzKTtcbiAgICB2YXIgYm91bmRzID0gcmVzdWx0Qm91bmRzLmlzVmFsaWQoKSA/IHJlc3VsdEJvdW5kcyA6IHRoaXMubWFya2Vycy5nZXRCb3VuZHMoKTtcblxuICAgIGlmICghcmV0YWluWm9vbUxldmVsICYmIHJlc3VsdEJvdW5kcy5pc1ZhbGlkKCkpIHtcbiAgICAgIHRoaXMubWFwLmZpdEJvdW5kcyhib3VuZHMsIHsgYW5pbWF0ZTogYW5pbWF0ZVpvb20gfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubWFwLnNldFZpZXcoYm91bmRzLmdldENlbnRlcigpLCB0aGlzLmdldFpvb20oKSwgeyBhbmltYXRlOiBhbmltYXRlWm9vbSB9KTtcbiAgICB9XG4gIH0sXG4gIGdldFpvb206IGZ1bmN0aW9uIGdldFpvb20oKSB7XG4gICAgdmFyIF9vcHRpb25zNSA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgcmV0YWluWm9vbUxldmVsID0gX29wdGlvbnM1LnJldGFpblpvb21MZXZlbCxcbiAgICAgICAgem9vbUxldmVsID0gX29wdGlvbnM1Lnpvb21MZXZlbDtcblxuICAgIHJldHVybiByZXRhaW5ab29tTGV2ZWwgPyB0aGlzLm1hcC5nZXRab29tKCkgOiB6b29tTGV2ZWw7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIExlYWZsZXRDb250cm9sKCkge1xuICBpZiAoIUwgfHwgIUwuQ29udHJvbCB8fCAhTC5Db250cm9sLmV4dGVuZCkge1xuICAgIHRocm93IG5ldyBFcnJvcignTGVhZmxldCBtdXN0IGJlIGxvYWRlZCBiZWZvcmUgaW5zdGFudGlhdGluZyB0aGUgR2VvU2VhcmNoIGNvbnRyb2wnKTtcbiAgfVxuXG4gIHZhciBMQ29udHJvbCA9IEwuQ29udHJvbC5leHRlbmQoQ29udHJvbCk7XG5cbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG9wdGlvbnMgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBvcHRpb25zW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIG5ldyAoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuYXBwbHkoTENvbnRyb2wsIFtudWxsXS5jb25jYXQob3B0aW9ucykpKSgpO1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL2xlYWZsZXRDb250cm9sLmpzIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKlxuICogJGFzeW5jYmluZCBoYXMgbXVsdGlwbGUgdXNlcywgZGVwZW5kaW5nIG9uIHRoZSBwYXJhbWV0ZXIgbGlzdC4gSXQgaXMgaW4gRnVuY3Rpb24ucHJvdG90eXBlLCBzbyAndGhpcycgaXMgYWx3YXlzIGEgZnVuY3Rpb25cbiAqXG4gKiAxKSBJZiBjYWxsZWQgd2l0aCBhIHNpbmdsZSBhcmd1bWVudCAodGhpcyksIGl0IGlzIHVzZWQgd2hlbiBkZWZpbmluZyBhbiBhc3luYyBmdW5jdGlvbiB0byBlbnN1cmUgd2hlblxuICogICAgICBpdCBpcyBpbnZva2VkLCB0aGUgY29ycmVjdCAndGhpcycgaXMgcHJlc2VudCwganVzdCBsaWtlIFwiYmluZFwiLiBGb3IgbGVnYWN5IHJlYXNvbnMsICd0aGlzJyBpcyBnaXZlblxuICogICAgICBhIG1lbWViZXIgJ3RoZW4nIHdoaWNoIHJlZmVycyB0byBpdHNlbGYuXG4gKiAyKSBJZiBjYWxsZWQgd2l0aCBhIHNlY29uZCBwYXJhbWV0ZXIgKFwiY2F0Y2hlclwiKSBhbmQgY2F0Y2hlciE9PXRydWUgaXQgaXMgYmVpbmcgdXNlZCB0byBpbnZva2UgYW4gYXN5bmNcbiAqICAgICAgZnVuY3Rpb24gd2hlcmUgdGhlIHNlY29uZCBwYXJhbWV0ZXIgaXMgdGhlIGVycm9yIGNhbGxiYWNrIChmb3Igc3luYyBleGNlcHRpb25zIGFuZCB0byBiZSBwYXNzZWQgdG9cbiAqICAgICAgbmVzdGVkIGFzeW5jIGNhbGxzKVxuICogMykgSWYgY2FsbGVkIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXI9PT10cnVlLCBpdCBpcyB0aGUgc2FtZSB1c2UgYXMgKDEpLCBidXQgdGhlIGZ1bmN0aW9uIGlzIHdyYXBwZWRcbiAqICAgICAgaW4gYW4gJ1Byb21pc2UnIGFzIHdlbGwgYm91bmQgdG8gJ3RoaXMnLlxuICogICAgICBJdCBpcyB0aGUgc2FtZSBhcyBjYWxsaW5nICduZXcgUHJvbWlzZSh0aGlzKScsIHdoZXJlICd0aGlzJyBpcyB0aGUgZnVuY3Rpb24gYmVpbmcgYm91bmQvd3JhcHBlZFxuICogNCkgSWYgY2FsbGVkIHdpdGggdGhlIHNlY29uZCBwYXJhbWV0ZXI9PT0wLCBpdCBpcyB0aGUgc2FtZSB1c2UgYXMgKDEpLCBidXQgdGhlIGZ1bmN0aW9uIGlzIHdyYXBwZWRcbiAqICAgICAgaW4gYSAnTGF6eVRoZW5hYmxlJywgd2hpY2ggZXhlY3V0ZXMgbGF6aWx5IGFuZCBjYW4gcmVzb2x2ZSBzeW5jaHJvbm91c2x5LlxuICogICAgICBJdCBpcyB0aGUgc2FtZSBhcyBjYWxsaW5nICduZXcgTGF6eVRoZW5hYmxlKHRoaXMpJyAoaWYgc3VjaCBhIHR5cGUgd2VyZSBleHBvc2VkKSwgd2hlcmUgJ3RoaXMnIGlzXG4gKiAgICAgIHRoZSBmdW5jdGlvbiBiZWluZyBib3VuZC93cmFwcGVkXG4gKi9cblxuZnVuY3Rpb24gcHJvY2Vzc0luY2x1ZGVzKGluY2x1ZGVzLGlucHV0KSB7XG4gICAgdmFyIHNyYyA9IGlucHV0LnRvU3RyaW5nKCkgO1xuICAgIHZhciB0ID0gXCJyZXR1cm4gXCIrc3JjIDtcbiAgICB2YXIgYXJncyA9IHNyYy5tYXRjaCgvLipcXCgoW14pXSopXFwpLylbMV0gO1xuICAgIHZhciByZSA9IC9bJ1wiXSEhIShbXidcIl0qKVsnXCJdL2cgO1xuICAgIHZhciBtID0gW10gO1xuICAgIHdoaWxlICgxKSB7XG4gICAgICAgIHZhciBteCA9IHJlLmV4ZWModCkgO1xuICAgICAgICBpZiAobXgpXG4gICAgICAgICAgICBtLnB1c2gobXgpIDtcbiAgICAgICAgZWxzZSBicmVhayA7XG4gICAgfVxuICAgIG0ucmV2ZXJzZSgpLmZvckVhY2goZnVuY3Rpb24oZSl7XG4gICAgICAgIHQgPSB0LnNsaWNlKDAsZS5pbmRleCkraW5jbHVkZXNbZVsxXV0rdC5zdWJzdHIoZS5pbmRleCtlWzBdLmxlbmd0aCkgO1xuICAgIH0pIDtcbiAgICB0ID0gdC5yZXBsYWNlKC9cXC9cXCpbXipdKlxcKlxcLy9nLCcgJykucmVwbGFjZSgvXFxzKy9nLCcgJykgO1xuICAgIHJldHVybiBuZXcgRnVuY3Rpb24oYXJncyx0KSgpIDtcbn1cblxudmFyICRhc3luY2JpbmQgPSBwcm9jZXNzSW5jbHVkZXMoe1xuICAgIHpvdXNhbjpyZXF1aXJlKCcuL3pvdXNhbicpLnRvU3RyaW5nKCksXG4gICAgdGhlbmFibGU6cmVxdWlyZSgnLi90aGVuYWJsZUZhY3RvcnknKS50b1N0cmluZygpXG59LFxuZnVuY3Rpb24gJGFzeW5jYmluZChzZWxmLGNhdGNoZXIpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBpZiAoIUZ1bmN0aW9uLnByb3RvdHlwZS4kYXN5bmNiaW5kKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGdW5jdGlvbi5wcm90b3R5cGUsXCIkYXN5bmNiaW5kXCIse3ZhbHVlOiRhc3luY2JpbmQsZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlfSkgO1xuICAgIH1cblxuICAgIGlmICghJGFzeW5jYmluZC50cmFtcG9saW5lKSB7XG4gICAgICAkYXN5bmNiaW5kLnRyYW1wb2xpbmUgPSBmdW5jdGlvbiB0cmFtcG9saW5lKHQseCxzLGUsdSl7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBiKHEpIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAocSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocS50aGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxID0gcS50aGVuKGIsIGUpIDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1P3VuZGVmaW5lZDpxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocS5wb3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcS5wb3AoKSA/IHguY2FsbCh0KSA6IHE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHEuY2FsbCh0KVxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZShyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCEkYXN5bmNiaW5kLkxhenlUaGVuYWJsZSkge1xuICAgICAgICAkYXN5bmNiaW5kLkxhenlUaGVuYWJsZSA9ICchISF0aGVuYWJsZScoKTtcbiAgICAgICAgJGFzeW5jYmluZC5FYWdlclRoZW5hYmxlID0gJGFzeW5jYmluZC5UaGVuYWJsZSA9ICgkYXN5bmNiaW5kLkVhZ2VyVGhlbmFibGVGYWN0b3J5ID0gJyEhIXpvdXNhbicpKCk7XG4gICAgfVxuXG4gICAgdmFyIHJlc29sdmVyID0gdGhpcztcbiAgICBzd2l0Y2ggKGNhdGNoZXIpIHtcbiAgICBjYXNlIHRydWU6XG4gICAgICAgIHJldHVybiBuZXcgKCRhc3luY2JpbmQuVGhlbmFibGUpKGJvdW5kVGhlbik7XG4gICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gbmV3ICgkYXN5bmNiaW5kLkxhenlUaGVuYWJsZSkoYm91bmRUaGVuKTtcbiAgICBjYXNlIHVuZGVmaW5lZDpcbiAgICAgICAgLyogRm9yIHJ1bnRpbWUgY29tcGF0aWJpbGl0eSB3aXRoIE5vZGVudCB2Mi54LCBwcm92aWRlIGEgdGhlbmFibGUgKi9cbiAgICAgICAgYm91bmRUaGVuLnRoZW4gPSBib3VuZFRoZW4gO1xuICAgICAgICByZXR1cm4gYm91bmRUaGVuIDtcbiAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVyLmFwcGx5KHNlbGYsYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH0gY2F0Y2goZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2F0Y2hlcihleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gYm91bmRUaGVuKCkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZXIuYXBwbHkoc2VsZixhcmd1bWVudHMpO1xuICAgIH1cbn0pIDtcblxuZnVuY3Rpb24gJGFzeW5jc3Bhd24ocHJvbWlzZVByb3ZpZGVyLHNlbGYpIHtcbiAgICBpZiAoIUZ1bmN0aW9uLnByb3RvdHlwZS4kYXN5bmNzcGF3bikge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLFwiJGFzeW5jc3Bhd25cIix7dmFsdWU6JGFzeW5jc3Bhd24sZW51bWVyYWJsZTpmYWxzZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlfSkgO1xuICAgIH1cbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgRnVuY3Rpb24pKSByZXR1cm4gO1xuXG4gICAgdmFyIGdlbkYgPSB0aGlzIDtcbiAgICByZXR1cm4gbmV3IHByb21pc2VQcm92aWRlcihmdW5jdGlvbiBlbm91Z2gocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciBnZW4gPSBnZW5GLmNhbGwoc2VsZiwgcmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgZnVuY3Rpb24gc3RlcChmbixhcmcpIHtcbiAgICAgICAgICAgIHZhciBuZXh0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBuZXh0ID0gZm4uY2FsbChnZW4sYXJnKTtcbiAgICAgICAgICAgICAgICBpZihuZXh0LmRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUgIT09IHJlc29sdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXh0LnZhbHVlICYmIG5leHQudmFsdWU9PT1uZXh0LnZhbHVlLnRoZW4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5leHQudmFsdWUocmVzb2x2ZSxyZWplY3QpIDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUgJiYgcmVzb2x2ZShuZXh0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUgPSBudWxsIDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG5leHQudmFsdWUudGhlbikge1xuICAgICAgICAgICAgICAgICAgICBuZXh0LnZhbHVlLnRoZW4oZnVuY3Rpb24odikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4ubmV4dCx2KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RlcChnZW4udGhyb3csZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN0ZXAoZ2VuLm5leHQsbmV4dC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0ICYmIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICByZWplY3QgPSBudWxsIDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc3RlcChnZW4ubmV4dCk7XG4gICAgfSk7XG59XG5cbi8vIEluaXRpYWxpemUgYXN5bmMgYmluZGluZ3NcbiRhc3luY2JpbmQoKSA7XG4kYXN5bmNzcGF3bigpIDtcblxuLy8gRXhwb3J0IGFzeW5jIGJpbmRpbmdzXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAkYXN5bmNiaW5kOiRhc3luY2JpbmQsXG4gICAgJGFzeW5jc3Bhd246JGFzeW5jc3Bhd25cbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L25vZGVudC1ydW50aW1lL3J1bnRpbWUuanMiLCIvKiBUaGlzIGNvZGUgaXMgYmFzZWQgb246XG56b3VzYW4gLSBBIExpZ2h0bmluZyBGYXN0LCBZZXQgVmVyeSBTbWFsbCBQcm9taXNlIEErIENvbXBsaWFudCBJbXBsZW1lbnRhdGlvblxuaHR0cHM6Ly9naXRodWIuY29tL2JsdWVqYXZhL3pvdXNhblxuQXV0aG9yOiBHbGVubiBDcm93bm92ZXIgPGdsZW5uQGJsdWVqYXZhLmNvbT4gKGh0dHA6Ly93d3cuYmx1ZWphdmEuY29tKVxuVmVyc2lvbiAyLjMuM1xuTGljZW5zZTogTUlUICovXG5cInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odGljayl7XG4gICAgdGljayA9IHRpY2sgfHwgKHR5cGVvZiBwcm9jZXNzPT09XCJvYmplY3RcIiAmJiBwcm9jZXNzLm5leHRUaWNrKSB8fCAodHlwZW9mIHNldEltbWVkaWF0ZT09PVwiZnVuY3Rpb25cIiAmJiBzZXRJbW1lZGlhdGUpIHx8IGZ1bmN0aW9uKGYpe3NldFRpbWVvdXQoZiwwKX07XG4gICAgdmFyIHNvb24gPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZnEgPSBbXSwgZnFTdGFydCA9IDAsIGJ1ZmZlclNpemUgPSAxMDI0O1xuICAgICAgICBmdW5jdGlvbiBjYWxsUXVldWUoKSB7XG4gICAgICAgICAgICB3aGlsZSAoZnEubGVuZ3RoIC0gZnFTdGFydCkge1xuICAgICAgICAgICAgICAgIHRyeSB7IGZxW2ZxU3RhcnRdKCkgfSBjYXRjaChleCkgeyAvKiBjb25zb2xlLmVycm9yKGV4KSAqLyB9XG4gICAgICAgICAgICAgICAgZnFbZnFTdGFydCsrXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAoZnFTdGFydCA9PT0gYnVmZmVyU2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICBmcS5zcGxpY2UoMCwgYnVmZmVyU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIGZxU3RhcnQgPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgIGZxLnB1c2goZm4pO1xuICAgICAgICAgICAgaWYgKGZxLmxlbmd0aCAtIGZxU3RhcnQgPT09IDEpXG4gICAgICAgICAgICAgICAgdGljayhjYWxsUXVldWUpO1xuICAgICAgICB9O1xuICAgIH0pKCk7XG5cbiAgICBmdW5jdGlvbiBab3VzYW4oZnVuYykge1xuICAgICAgICBpZiAoZnVuYykge1xuICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgICAgIGZ1bmMoZnVuY3Rpb24gKGFyZykge1xuICAgICAgICAgICAgICAgIG1lLnJlc29sdmUoYXJnKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgICAgICAgICAgICBtZS5yZWplY3QoYXJnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgWm91c2FuLnByb3RvdHlwZSA9IHtcbiAgICAgICAgcmVzb2x2ZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdGhpcylcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWplY3QobmV3IFR5cGVFcnJvcihcIkF0dGVtcHQgdG8gcmVzb2x2ZSBwcm9taXNlIHdpdGggc2VsZlwiKSk7XG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICAgICAgaWYgKHZhbHVlICYmICh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiB8fCB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIpKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoZW4gPSB2YWx1ZS50aGVuO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoZW4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBmdW5jdGlvbiAocmEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVzb2x2ZShyYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLnJlamVjdChycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlyc3QpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9GVUxGSUxMRUQ7XG4gICAgICAgICAgICB0aGlzLnYgPSB2YWx1ZTtcbiAgICAgICAgICAgIGlmIChtZS5jKVxuICAgICAgICAgICAgICAgIHNvb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBuID0gMCwgbCA9IG1lLmMubGVuZ3RoO24gPCBsOyBuKyspXG4gICAgICAgICAgICAgICAgICAgICAgICBTVEFURV9GVUxGSUxMRUQobWUuY1tuXSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZWplY3Q6IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX1JFSkVDVEVEO1xuICAgICAgICAgICAgdGhpcy52ID0gcmVhc29uO1xuICAgICAgICAgICAgdmFyIGNsaWVudHMgPSB0aGlzLmM7XG4gICAgICAgICAgICBpZiAoY2xpZW50cylcbiAgICAgICAgICAgICAgICBzb29uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDAsIGwgPSBjbGllbnRzLmxlbmd0aDtuIDwgbDsgbisrKVxuICAgICAgICAgICAgICAgICAgICAgICAgU1RBVEVfUkVKRUNURUQoY2xpZW50c1tuXSwgcmVhc29uKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgdGhlbjogZnVuY3Rpb24gKG9uRiwgb25SKSB7XG4gICAgICAgICAgICB2YXIgcCA9IG5ldyBab3VzYW4oKTtcbiAgICAgICAgICAgIHZhciBjbGllbnQgPSB7XG4gICAgICAgICAgICAgICAgeTogb25GLFxuICAgICAgICAgICAgICAgIG46IG9uUixcbiAgICAgICAgICAgICAgICBwOiBwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmMpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYy5wdXNoKGNsaWVudCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmMgPSBbY2xpZW50XTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSB0aGlzLnN0YXRlLCBhID0gdGhpcy52O1xuICAgICAgICAgICAgICAgIHNvb24oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzKGNsaWVudCwgYSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBTVEFURV9GVUxGSUxMRUQoYywgYXJnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYy55ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIHlyZXQgPSBjLnkuY2FsbCh1bmRlZmluZWQsIGFyZyk7XG4gICAgICAgICAgICAgICAgYy5wLnJlc29sdmUoeXJldCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjLnAucmVqZWN0KGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgYy5wLnJlc29sdmUoYXJnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBTVEFURV9SRUpFQ1RFRChjLCByZWFzb24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjLm4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgeXJldCA9IGMubi5jYWxsKHVuZGVmaW5lZCwgcmVhc29uKTtcbiAgICAgICAgICAgICAgICBjLnAucmVzb2x2ZSh5cmV0KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGMucC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICBjLnAucmVqZWN0KHJlYXNvbik7XG4gICAgfVxuXG4gICAgWm91c2FuLnJlc29sdmUgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIGlmICh2YWwgJiYgKHZhbCBpbnN0YW5jZW9mIFpvdXNhbikpXG4gICAgICAgICAgICByZXR1cm4gdmFsIDtcbiAgICAgICAgdmFyIHogPSBuZXcgWm91c2FuKCk7XG4gICAgICAgIHoucmVzb2x2ZSh2YWwpO1xuICAgICAgICByZXR1cm4gejtcbiAgICB9O1xuICAgIFpvdXNhbi5yZWplY3QgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmIChlcnIgJiYgKGVyciBpbnN0YW5jZW9mIFpvdXNhbikpXG4gICAgICAgICAgICByZXR1cm4gZXJyIDtcbiAgICAgICAgdmFyIHogPSBuZXcgWm91c2FuKCk7XG4gICAgICAgIHoucmVqZWN0KGVycik7XG4gICAgICAgIHJldHVybiB6O1xuICAgIH07XG5cbiAgICBab3VzYW4udmVyc2lvbiA9IFwiMi4zLjMtbm9kZW50XCIgO1xuICAgIHJldHVybiBab3VzYW4gO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbm9kZW50LXJ1bnRpbWUvem91c2FuLmpzIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsInZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblxuLy8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3NcblxuZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcbiAgaWYgKHRpbWVvdXQpIHtcbiAgICB0aW1lb3V0LmNsb3NlKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5UaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5UaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG59O1xuXG4vLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cbmV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xufTtcblxuZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xufTtcblxuZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXG4gIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuICBpZiAobXNlY3MgPj0gMCkge1xuICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcbiAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpXG4gICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuICAgIH0sIG1zZWNzKTtcbiAgfVxufTtcblxuLy8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdFxucmVxdWlyZShcInNldGltbWVkaWF0ZVwiKTtcbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vICh3ZWJwYWNrKS9+L25vZGUtbGlicy1icm93c2VyL34vdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qcyIsIihmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG4gICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG4gICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXG4gICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4gICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcbiAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuICAgICAgfVxuICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrXG4gICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG4gICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcbiAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpO1xuICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW4odGFzaykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG4gICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcbiAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cbiAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcbiAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5JZlByZXNlbnQoaGFuZGxlKTsgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG4gICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcbiAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG4gICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG4gICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcbiAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG4gICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblxuICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG4gICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcbiAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblxuICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cbiAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG4gICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcbiAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuICAgICAgICAvLyBGb3IgSUUgNuKAkzhcbiAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcbiAgICB9XG5cbiAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG4gICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcbn0odHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IGdsb2JhbCA6IHNlbGYpKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAod2VicGFjaykvfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3RpbWVycy1icm93c2VyaWZ5L34vc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gaXNUaGVuYWJsZShvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAmJiAob2JqIGluc3RhbmNlb2YgT2JqZWN0KSAmJiB0eXBlb2Ygb2JqLnRoZW49PT1cImZ1bmN0aW9uXCI7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x1dGlvbihwLHIsaG93KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvKiAyLjIuNy4xICovXG4gICAgICAgICAgICB2YXIgeCA9IGhvdyA/IGhvdyhyKTpyIDtcblxuICAgICAgICAgICAgaWYgKHA9PT14KSAvKiAyLjMuMSAqL1xuICAgICAgICAgICAgICAgIHJldHVybiBwLnJlamVjdChuZXcgVHlwZUVycm9yKFwiUHJvbWlzZSByZXNvbHV0aW9uIGxvb3BcIikpIDtcblxuICAgICAgICAgICAgaWYgKGlzVGhlbmFibGUoeCkpIHtcbiAgICAgICAgICAgICAgICAvKiAyLjMuMyAqL1xuICAgICAgICAgICAgICAgIHgudGhlbihmdW5jdGlvbih5KXtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbihwLHkpO1xuICAgICAgICAgICAgICAgIH0sZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgICAgIHAucmVqZWN0KGUpXG4gICAgICAgICAgICAgICAgfSkgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwLnJlc29sdmUoeCkgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgLyogMi4yLjcuMiAqL1xuICAgICAgICAgICAgcC5yZWplY3QoZXgpIDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIENoYWluZWQoKSB7fTtcbiAgICBDaGFpbmVkLnByb3RvdHlwZSA9IHtcbiAgICAgICAgcmVzb2x2ZTpfdW5jaGFpbmVkLFxuICAgICAgICByZWplY3Q6X3VuY2hhaW5lZCxcbiAgICAgICAgdGhlbjp0aGVuQ2hhaW5cbiAgICB9O1xuICAgIGZ1bmN0aW9uIF91bmNoYWluZWQodil7fVxuICAgIGZ1bmN0aW9uIHRoZW5DaGFpbihyZXMscmVqKXtcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzO1xuICAgICAgICB0aGlzLnJlamVjdCA9IHJlajtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gdGhlbihyZXMscmVqKXtcbiAgICAgICAgdmFyIGNoYWluID0gbmV3IENoYWluZWQoKSA7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLl9yZXNvbHZlcihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc1RoZW5hYmxlKHZhbHVlKSA/IHZhbHVlLnRoZW4ocmVzLHJlaikgOiByZXNvbHV0aW9uKGNoYWluLHZhbHVlLHJlcyk7XG4gICAgICAgICAgICB9LGZ1bmN0aW9uKGV4KSB7XG4gICAgICAgICAgICAgICAgcmVzb2x1dGlvbihjaGFpbixleCxyZWopIDtcbiAgICAgICAgICAgIH0pIDtcbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIHJlc29sdXRpb24oY2hhaW4sZXgscmVqKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2hhaW4gO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFRoZW5hYmxlKHJlc29sdmVyKSB7XG4gICAgICAgIHRoaXMuX3Jlc29sdmVyID0gcmVzb2x2ZXIgO1xuICAgICAgICB0aGlzLnRoZW4gPSB0aGVuIDtcbiAgICB9O1xuXG4gICAgVGhlbmFibGUucmVzb2x2ZSA9IGZ1bmN0aW9uKHYpe1xuICAgICAgICByZXR1cm4gVGhlbmFibGUuaXNUaGVuYWJsZSh2KSA/IHYgOiB7dGhlbjpmdW5jdGlvbihyZXNvbHZlKXtyZXR1cm4gcmVzb2x2ZSh2KX19O1xuICAgIH07XG5cbiAgICBUaGVuYWJsZS5pc1RoZW5hYmxlID0gaXNUaGVuYWJsZSA7XG5cbiAgICByZXR1cm4gVGhlbmFibGUgO1xufSA7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L25vZGVudC1ydW50aW1lL3RoZW5hYmxlRmFjdG9yeS5qcyIsIi8qKlxuICogbG9kYXNoIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycyA8aHR0cHM6Ly9qcXVlcnkub3JnLz5cbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqL1xuXG4vKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgTkFOID0gMCAvIDA7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblxuLyoqIFVzZWQgdG8gbWF0Y2ggbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS4gKi9cbnZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJhZCBzaWduZWQgaGV4YWRlY2ltYWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBiaW5hcnkgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXG4vKiogVXNlZCB0byBkZXRlY3Qgb2N0YWwgc3RyaW5nIHZhbHVlcy4gKi9cbnZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXG4vKiogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgd2l0aG91dCBhIGRlcGVuZGVuY3kgb24gYHJvb3RgLiAqL1xudmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xudmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cbi8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG4gICAgbmF0aXZlTWluID0gTWF0aC5taW47XG5cbi8qKlxuICogR2V0cyB0aGUgdGltZXN0YW1wIG9mIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlXG4gKiB0aGUgVW5peCBlcG9jaCAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDIuNC4wXG4gKiBAY2F0ZWdvcnkgRGF0ZVxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXN0YW1wLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7XG4gKiAgIGNvbnNvbGUubG9nKF8ubm93KCkgLSBzdGFtcCk7XG4gKiB9LCBfLm5vdygpKTtcbiAqIC8vID0+IExvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGludm9jYXRpb24uXG4gKi9cbnZhciBub3cgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHJvb3QuRGF0ZS5ub3coKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGRlYm91bmNlZCBmdW5jdGlvbiB0aGF0IGRlbGF5cyBpbnZva2luZyBgZnVuY2AgdW50aWwgYWZ0ZXIgYHdhaXRgXG4gKiBtaWxsaXNlY29uZHMgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiB3YXNcbiAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcbiAqIGRlbGF5ZWQgYGZ1bmNgIGludm9jYXRpb25zIGFuZCBhIGBmbHVzaGAgbWV0aG9kIHRvIGltbWVkaWF0ZWx5IGludm9rZSB0aGVtLlxuICogUHJvdmlkZSBgb3B0aW9uc2AgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb24gdGhlXG4gKiBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkXG4gKiB3aXRoIHRoZSBsYXN0IGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50XG4gKiBjYWxscyB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYFxuICogaW52b2NhdGlvbi5cbiAqXG4gKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzXG4gKiBpbnZva2VkIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuICogaXMgaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICpcbiAqIElmIGB3YWl0YCBpcyBgMGAgYW5kIGBsZWFkaW5nYCBpcyBgZmFsc2VgLCBgZnVuY2AgaW52b2NhdGlvbiBpcyBkZWZlcnJlZFxuICogdW50aWwgdG8gdGhlIG5leHQgdGljaywgc2ltaWxhciB0byBgc2V0VGltZW91dGAgd2l0aCBhIHRpbWVvdXQgb2YgYDBgLlxuICpcbiAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKVxuICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy5kZWJvdW5jZWAgYW5kIGBfLnRocm90dGxlYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlLlxuICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9ZmFsc2VdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdXG4gKiAgVGhlIG1heGltdW0gdGltZSBgZnVuY2AgaXMgYWxsb3dlZCB0byBiZSBkZWxheWVkIGJlZm9yZSBpdCdzIGludm9rZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gQXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eC5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG4gKlxuICogLy8gSW52b2tlIGBzZW5kTWFpbGAgd2hlbiBjbGlja2VkLCBkZWJvdW5jaW5nIHN1YnNlcXVlbnQgY2FsbHMuXG4gKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG4gKiAgICdsZWFkaW5nJzogdHJ1ZSxcbiAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAqIH0pKTtcbiAqXG4gKiAvLyBFbnN1cmUgYGJhdGNoTG9nYCBpcyBpbnZva2VkIG9uY2UgYWZ0ZXIgMSBzZWNvbmQgb2YgZGVib3VuY2VkIGNhbGxzLlxuICogdmFyIGRlYm91bmNlZCA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwgeyAnbWF4V2FpdCc6IDEwMDAgfSk7XG4gKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG4gKiBqUXVlcnkoc291cmNlKS5vbignbWVzc2FnZScsIGRlYm91bmNlZCk7XG4gKlxuICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyBkZWJvdW5jZWQgaW52b2NhdGlvbi5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGRlYm91bmNlZC5jYW5jZWwpO1xuICovXG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gIHZhciBsYXN0QXJncyxcbiAgICAgIGxhc3RUaGlzLFxuICAgICAgbWF4V2FpdCxcbiAgICAgIHJlc3VsdCxcbiAgICAgIHRpbWVySWQsXG4gICAgICBsYXN0Q2FsbFRpbWUsXG4gICAgICBsYXN0SW52b2tlVGltZSA9IDAsXG4gICAgICBsZWFkaW5nID0gZmFsc2UsXG4gICAgICBtYXhpbmcgPSBmYWxzZSxcbiAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICB3YWl0ID0gdG9OdW1iZXIod2FpdCkgfHwgMDtcbiAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuICAgIG1heGluZyA9ICdtYXhXYWl0JyBpbiBvcHRpb25zO1xuICAgIG1heFdhaXQgPSBtYXhpbmcgPyBuYXRpdmVNYXgodG9OdW1iZXIob3B0aW9ucy5tYXhXYWl0KSB8fCAwLCB3YWl0KSA6IG1heFdhaXQ7XG4gICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuICAgIHZhciBhcmdzID0gbGFzdEFyZ3MsXG4gICAgICAgIHRoaXNBcmcgPSBsYXN0VGhpcztcblxuICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxlYWRpbmdFZGdlKHRpbWUpIHtcbiAgICAvLyBSZXNldCBhbnkgYG1heFdhaXRgIHRpbWVyLlxuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICAvLyBTdGFydCB0aGUgdGltZXIgZm9yIHRoZSB0cmFpbGluZyBlZGdlLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG4gICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcbiAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSxcbiAgICAgICAgcmVzdWx0ID0gd2FpdCAtIHRpbWVTaW5jZUxhc3RDYWxsO1xuXG4gICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQsIG1heFdhaXQgLSB0aW1lU2luY2VMYXN0SW52b2tlKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcbiAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZTtcblxuICAgIC8vIEVpdGhlciB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCBhY3Rpdml0eSBoYXMgc3RvcHBlZCBhbmQgd2UncmUgYXQgdGhlXG4gICAgLy8gdHJhaWxpbmcgZWRnZSwgdGhlIHN5c3RlbSB0aW1lIGhhcyBnb25lIGJhY2t3YXJkcyBhbmQgd2UncmUgdHJlYXRpbmdcbiAgICAvLyBpdCBhcyB0aGUgdHJhaWxpbmcgZWRnZSwgb3Igd2UndmUgaGl0IHRoZSBgbWF4V2FpdGAgbGltaXQuXG4gICAgcmV0dXJuIChsYXN0Q2FsbFRpbWUgPT09IHVuZGVmaW5lZCB8fCAodGltZVNpbmNlTGFzdENhbGwgPj0gd2FpdCkgfHxcbiAgICAgICh0aW1lU2luY2VMYXN0Q2FsbCA8IDApIHx8IChtYXhpbmcgJiYgdGltZVNpbmNlTGFzdEludm9rZSA+PSBtYXhXYWl0KSk7XG4gIH1cblxuICBmdW5jdGlvbiB0aW1lckV4cGlyZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKTtcbiAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG4gICAgICByZXR1cm4gdHJhaWxpbmdFZGdlKHRpbWUpO1xuICAgIH1cbiAgICAvLyBSZXN0YXJ0IHRoZSB0aW1lci5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHJlbWFpbmluZ1dhaXQodGltZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhaWxpbmdFZGdlKHRpbWUpIHtcbiAgICB0aW1lcklkID0gdW5kZWZpbmVkO1xuXG4gICAgLy8gT25seSBpbnZva2UgaWYgd2UgaGF2ZSBgbGFzdEFyZ3NgIHdoaWNoIG1lYW5zIGBmdW5jYCBoYXMgYmVlblxuICAgIC8vIGRlYm91bmNlZCBhdCBsZWFzdCBvbmNlLlxuICAgIGlmICh0cmFpbGluZyAmJiBsYXN0QXJncykge1xuICAgICAgcmV0dXJuIGludm9rZUZ1bmModGltZSk7XG4gICAgfVxuICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICBpZiAodGltZXJJZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZXJJZCk7XG4gICAgfVxuICAgIGxhc3RJbnZva2VUaW1lID0gMDtcbiAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIHJldHVybiB0aW1lcklkID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCksXG4gICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG5cbiAgICBsYXN0QXJncyA9IGFyZ3VtZW50cztcbiAgICBsYXN0VGhpcyA9IHRoaXM7XG4gICAgbGFzdENhbGxUaW1lID0gdGltZTtcblxuICAgIGlmIChpc0ludm9raW5nKSB7XG4gICAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBsZWFkaW5nRWRnZShsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgICAgaWYgKG1heGluZykge1xuICAgICAgICAvLyBIYW5kbGUgaW52b2NhdGlvbnMgaW4gYSB0aWdodCBsb29wLlxuICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG4gIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuICByZXR1cm4gZGVib3VuY2VkO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChfLm5vb3ApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTeW1ib2woJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3ltYm9sJyB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG51bWJlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b051bWJlcigzLjIpO1xuICogLy8gPT4gMy4yXG4gKlxuICogXy50b051bWJlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDVlLTMyNFxuICpcbiAqIF8udG9OdW1iZXIoSW5maW5pdHkpO1xuICogLy8gPT4gSW5maW5pdHlcbiAqXG4gKiBfLnRvTnVtYmVyKCczLjInKTtcbiAqIC8vID0+IDMuMlxuICovXG5mdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gTkFOO1xuICB9XG4gIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICB2YXIgb3RoZXIgPSB0eXBlb2YgdmFsdWUudmFsdWVPZiA9PSAnZnVuY3Rpb24nID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG4gICAgdmFsdWUgPSBpc09iamVjdChvdGhlcikgPyAob3RoZXIgKyAnJykgOiBvdGhlcjtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG4gIH1cbiAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpO1xuICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuICByZXR1cm4gKGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSlcbiAgICA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOClcbiAgICA6IChyZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkZWJvdW5jZTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvfi9sb2Rhc2guZGVib3VuY2UvaW5kZXguanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfbm9kZW50UnVudGltZSA9IHJlcXVpcmUoJ25vZGVudC1ydW50aW1lJyk7XG5cbnZhciBfbm9kZW50UnVudGltZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9ub2RlbnRSdW50aW1lKTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9kb21VdGlscyA9IHJlcXVpcmUoJy4vZG9tVXRpbHMnKTtcblxudmFyIF9jb25zdGFudHMgPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgU2VhcmNoRWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU2VhcmNoRWxlbWVudCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICBfcmVmJGhhbmRsZVN1Ym1pdCA9IF9yZWYuaGFuZGxlU3VibWl0LFxuICAgICAgICBoYW5kbGVTdWJtaXQgPSBfcmVmJGhhbmRsZVN1Ym1pdCA9PT0gdW5kZWZpbmVkID8gZnVuY3Rpb24gKCkge30gOiBfcmVmJGhhbmRsZVN1Ym1pdCxcbiAgICAgICAgX3JlZiRzZWFyY2hMYWJlbCA9IF9yZWYuc2VhcmNoTGFiZWwsXG4gICAgICAgIHNlYXJjaExhYmVsID0gX3JlZiRzZWFyY2hMYWJlbCA9PT0gdW5kZWZpbmVkID8gJ3NlYXJjaCcgOiBfcmVmJHNlYXJjaExhYmVsLFxuICAgICAgICBfcmVmJGNsYXNzTmFtZXMgPSBfcmVmLmNsYXNzTmFtZXMsXG4gICAgICAgIGNsYXNzTmFtZXMgPSBfcmVmJGNsYXNzTmFtZXMgPT09IHVuZGVmaW5lZCA/IHt9IDogX3JlZiRjbGFzc05hbWVzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNlYXJjaEVsZW1lbnQpO1xuXG4gICAgdmFyIGNvbnRhaW5lciA9ICgwLCBfZG9tVXRpbHMuY3JlYXRlRWxlbWVudCkoJ2RpdicsIFsnZ2Vvc2VhcmNoJywgY2xhc3NOYW1lcy5jb250YWluZXJdLmpvaW4oJyAnKSk7XG4gICAgdmFyIGZvcm0gPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdmb3JtJywgWycnLCBjbGFzc05hbWVzLmZvcm1dLmpvaW4oJyAnKSwgY29udGFpbmVyKTtcbiAgICB2YXIgaW5wdXQgPSAoMCwgX2RvbVV0aWxzLmNyZWF0ZUVsZW1lbnQpKCdpbnB1dCcsIFsnZ2xhc3MnLCBjbGFzc05hbWVzLmlucHV0XS5qb2luKCcgJyksIGZvcm0pO1xuXG4gICAgaW5wdXQudHlwZSA9ICd0ZXh0JztcbiAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHNlYXJjaExhYmVsO1xuXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25JbnB1dChlKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25LZXlVcChlKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25LZXlQcmVzcyhlKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgX3RoaXMub25Gb2N1cyhlKTtcbiAgICB9LCBmYWxzZSk7XG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBfdGhpcy5vbkJsdXIoZSk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgdGhpcy5lbGVtZW50cyA9IHsgY29udGFpbmVyOiBjb250YWluZXIsIGZvcm06IGZvcm0sIGlucHV0OiBpbnB1dCB9O1xuICAgIHRoaXMuaGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFNlYXJjaEVsZW1lbnQsIFt7XG4gICAga2V5OiAnb25Gb2N1cycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uRm9jdXMoKSB7XG4gICAgICAoMCwgX2RvbVV0aWxzLmFkZENsYXNzTmFtZSkodGhpcy5lbGVtZW50cy5mb3JtLCAnYWN0aXZlJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25CbHVyJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25CbHVyKCkge1xuICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKHRoaXMuZWxlbWVudHMuZm9ybSwgJ2FjdGl2ZScpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ29uU3VibWl0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWJtaXQoZXZlbnQpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG4gICAgICAgIHZhciBfZWxlbWVudHMsIGlucHV0LCBjb250YWluZXI7XG5cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgX2VsZW1lbnRzID0gdGhpcy5lbGVtZW50cywgaW5wdXQgPSBfZWxlbWVudHMuaW5wdXQsIGNvbnRhaW5lciA9IF9lbGVtZW50cy5jb250YWluZXI7XG5cbiAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2Vycm9yJyk7XG4gICAgICAgICgwLCBfZG9tVXRpbHMuYWRkQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlU3VibWl0KHsgcXVlcnk6IGlucHV0LnZhbHVlIH0pLnRoZW4oZnVuY3Rpb24gKCRhd2FpdF8xKSB7XG4gICAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ3BlbmRpbmcnKTtcbiAgICAgICAgICByZXR1cm4gJHJldHVybigpO1xuICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25JbnB1dCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uSW5wdXQoKSB7XG4gICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5lbGVtZW50cy5jb250YWluZXI7XG5cblxuICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcbiAgICAgICAgKDAsIF9kb21VdGlscy5yZW1vdmVDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2Vycm9yJyk7XG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdvbktleVVwJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gb25LZXlVcChldmVudCkge1xuICAgICAgdmFyIF9lbGVtZW50czIgPSB0aGlzLmVsZW1lbnRzLFxuICAgICAgICAgIGNvbnRhaW5lciA9IF9lbGVtZW50czIuY29udGFpbmVyLFxuICAgICAgICAgIGlucHV0ID0gX2VsZW1lbnRzMi5pbnB1dDtcblxuXG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gX2NvbnN0YW50cy5FU0NBUEVfS0VZKSB7XG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdwZW5kaW5nJyk7XG4gICAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcblxuICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuXG4gICAgICAgIGRvY3VtZW50LmJvZHkuZm9jdXMoKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5ibHVyKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnb25LZXlQcmVzcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG9uS2V5UHJlc3MoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBfY29uc3RhbnRzLkVOVEVSX0tFWSkge1xuICAgICAgICB0aGlzLm9uU3VibWl0KGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzZXRRdWVyeScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNldFF1ZXJ5KHF1ZXJ5KSB7XG4gICAgICB2YXIgaW5wdXQgPSB0aGlzLmVsZW1lbnRzLmlucHV0O1xuXG4gICAgICBpbnB1dC52YWx1ZSA9IHF1ZXJ5O1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTZWFyY2hFbGVtZW50O1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBTZWFyY2hFbGVtZW50O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3NlYXJjaEVsZW1lbnQuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG4vKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvcHJlZmVyLWRlZmF1bHQtZXhwb3J0ICovXG52YXIgY3JlYXRlRWxlbWVudCA9IGV4cG9ydHMuY3JlYXRlRWxlbWVudCA9IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQoZWxlbWVudCkge1xuICB2YXIgY2xhc3NOYW1lcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG4gIHZhciBwYXJlbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IG51bGw7XG5cbiAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50KTtcbiAgZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lcztcblxuICBpZiAocGFyZW50KSB7XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGVsKTtcbiAgfVxuXG4gIHJldHVybiBlbDtcbn07XG5cbnZhciBjcmVhdGVTY3JpcHRFbGVtZW50ID0gZXhwb3J0cy5jcmVhdGVTY3JpcHRFbGVtZW50ID0gZnVuY3Rpb24gY3JlYXRlU2NyaXB0RWxlbWVudCh1cmwsIGNiKSB7XG4gIHZhciBzY3JpcHQgPSBjcmVhdGVFbGVtZW50KCdzY3JpcHQnLCBudWxsLCBkb2N1bWVudC5ib2R5KTtcbiAgc2NyaXB0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2phdmFzY3JpcHQnKTtcblxuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICB3aW5kb3dbY2JdID0gZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgIHNjcmlwdC5yZW1vdmUoKTtcbiAgICAgIGRlbGV0ZSB3aW5kb3dbY2JdO1xuICAgICAgcmVzb2x2ZShqc29uKTtcbiAgICB9O1xuXG4gICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgnc3JjJywgdXJsKTtcbiAgfSk7XG59O1xuXG52YXIgYWRkQ2xhc3NOYW1lID0gZXhwb3J0cy5hZGRDbGFzc05hbWUgPSBmdW5jdGlvbiBhZGRDbGFzc05hbWUoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gIGlmIChlbGVtZW50ICYmICFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gIH1cbn07XG5cbnZhciByZW1vdmVDbGFzc05hbWUgPSBleHBvcnRzLnJlbW92ZUNsYXNzTmFtZSA9IGZ1bmN0aW9uIHJlbW92ZUNsYXNzTmFtZShlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICB9XG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL2RvbVV0aWxzLmpzIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG52YXIgRU5URVJfS0VZID0gZXhwb3J0cy5FTlRFUl9LRVkgPSAxMztcbnZhciBFU0NBUEVfS0VZID0gZXhwb3J0cy5FU0NBUEVfS0VZID0gMjc7XG52YXIgQVJST1dfRE9XTl9LRVkgPSBleHBvcnRzLkFSUk9XX0RPV05fS0VZID0gNDA7XG52YXIgQVJST1dfVVBfS0VZID0gZXhwb3J0cy5BUlJPV19VUF9LRVkgPSAzODtcbnZhciBBUlJPV19MRUZUX0tFWSA9IGV4cG9ydHMuQVJST1dfTEVGVF9LRVkgPSAzNztcbnZhciBBUlJPV19SSUdIVF9LRVkgPSBleHBvcnRzLkFSUk9XX1JJR0hUX0tFWSA9IDM5O1xuXG52YXIgU1BFQ0lBTF9LRVlTID0gZXhwb3J0cy5TUEVDSUFMX0tFWVMgPSBbRU5URVJfS0VZLCBFU0NBUEVfS0VZLCBBUlJPV19ET1dOX0tFWSwgQVJST1dfVVBfS0VZLCBBUlJPV19MRUZUX0tFWSwgQVJST1dfUklHSFRfS0VZXTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9jb25zdGFudHMuanMiLCIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfZG9tVXRpbHMgPSByZXF1aXJlKCcuL2RvbVV0aWxzJyk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBjeCA9IGZ1bmN0aW9uIGN4KCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgY2xhc3NuYW1lcyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGNsYXNzbmFtZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gY2xhc3NuYW1lcy5qb2luKCcgJykudHJpbSgpO1xufTtcblxudmFyIFJlc3VsdExpc3QgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFJlc3VsdExpc3QoKSB7XG4gICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICBfcmVmJGhhbmRsZUNsaWNrID0gX3JlZi5oYW5kbGVDbGljayxcbiAgICAgICAgaGFuZGxlQ2xpY2sgPSBfcmVmJGhhbmRsZUNsaWNrID09PSB1bmRlZmluZWQgPyBmdW5jdGlvbiAoKSB7fSA6IF9yZWYkaGFuZGxlQ2xpY2ssXG4gICAgICAgIF9yZWYkY2xhc3NOYW1lcyA9IF9yZWYuY2xhc3NOYW1lcyxcbiAgICAgICAgY2xhc3NOYW1lcyA9IF9yZWYkY2xhc3NOYW1lcyA9PT0gdW5kZWZpbmVkID8ge30gOiBfcmVmJGNsYXNzTmFtZXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmVzdWx0TGlzdCk7XG5cbiAgICBfaW5pdGlhbGlzZVByb3BzLmNhbGwodGhpcyk7XG5cbiAgICB0aGlzLnByb3BzID0geyBoYW5kbGVDbGljazogaGFuZGxlQ2xpY2ssIGNsYXNzTmFtZXM6IGNsYXNzTmFtZXMgfTtcbiAgICB0aGlzLnNlbGVjdGVkID0gLTE7XG5cbiAgICB2YXIgY29udGFpbmVyID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgY3goJ3Jlc3VsdHMnLCBjbGFzc05hbWVzLmNvbnRhaW5lcikpO1xuICAgIHZhciByZXN1bHRJdGVtID0gKDAsIF9kb21VdGlscy5jcmVhdGVFbGVtZW50KSgnZGl2JywgY3goY2xhc3NOYW1lcy5pdGVtKSk7XG5cbiAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2xpY2ssIHRydWUpO1xuICAgIHRoaXMuZWxlbWVudHMgPSB7IGNvbnRhaW5lcjogY29udGFpbmVyLCByZXN1bHRJdGVtOiByZXN1bHRJdGVtIH07XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUmVzdWx0TGlzdCwgW3tcbiAgICBrZXk6ICdyZW5kZXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICB2YXIgcmVzdWx0cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107XG4gICAgICB2YXIgX2VsZW1lbnRzID0gdGhpcy5lbGVtZW50cyxcbiAgICAgICAgICBjb250YWluZXIgPSBfZWxlbWVudHMuY29udGFpbmVyLFxuICAgICAgICAgIHJlc3VsdEl0ZW0gPSBfZWxlbWVudHMucmVzdWx0SXRlbTtcblxuICAgICAgdGhpcy5jbGVhcigpO1xuXG4gICAgICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKHJlc3VsdCwgaWR4KSB7XG4gICAgICAgIHZhciBjaGlsZCA9IHJlc3VsdEl0ZW0uY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoJ2RhdGEta2V5JywgaWR4KTtcbiAgICAgICAgY2hpbGQuaW5uZXJIVE1MID0gcmVzdWx0LmxhYmVsO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNvbnRhaW5lciwgJ2FjdGl2ZScpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnJlc3VsdHMgPSByZXN1bHRzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3NlbGVjdCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdChpbmRleCkge1xuICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uZnVzaW5nLWFycm93XG5cbiAgICAgIEFycmF5LmZyb20oY29udGFpbmVyLmNoaWxkcmVuKS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCwgaWR4KSB7XG4gICAgICAgIHJldHVybiBpZHggPT09IGluZGV4ID8gKDAsIF9kb21VdGlscy5hZGRDbGFzc05hbWUpKGNoaWxkLCAnYWN0aXZlJykgOiAoMCwgX2RvbVV0aWxzLnJlbW92ZUNsYXNzTmFtZSkoY2hpbGQsICdhY3RpdmUnKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnNlbGVjdGVkID0gaW5kZXg7XG4gICAgICByZXR1cm4gdGhpcy5yZXN1bHRzW2luZGV4XTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjb3VudCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvdW50KCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVzdWx0cy5sZW5ndGg7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnY2xlYXInLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmVsZW1lbnRzLmNvbnRhaW5lcjtcblxuICAgICAgdGhpcy5zZWxlY3RlZCA9IC0xO1xuXG4gICAgICB3aGlsZSAoY29udGFpbmVyLmxhc3RDaGlsZCkge1xuICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmxhc3RDaGlsZCk7XG4gICAgICB9XG5cbiAgICAgICgwLCBfZG9tVXRpbHMucmVtb3ZlQ2xhc3NOYW1lKShjb250YWluZXIsICdhY3RpdmUnKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUmVzdWx0TGlzdDtcbn0oKTtcblxudmFyIF9pbml0aWFsaXNlUHJvcHMgPSBmdW5jdGlvbiBfaW5pdGlhbGlzZVByb3BzKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHRoaXMub25DbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgX3JlZjIgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICB0YXJnZXQgPSBfcmVmMi50YXJnZXQ7XG5cbiAgICB2YXIgaGFuZGxlQ2xpY2sgPSBfdGhpcy5wcm9wcy5oYW5kbGVDbGljaztcbiAgICB2YXIgY29udGFpbmVyID0gX3RoaXMuZWxlbWVudHMuY29udGFpbmVyO1xuXG5cbiAgICBpZiAodGFyZ2V0LnBhcmVudE5vZGUgIT09IGNvbnRhaW5lciB8fCAhdGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1rZXknKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBpZHggPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWtleScpO1xuICAgIHZhciByZXN1bHQgPSBfdGhpcy5yZXN1bHRzW2lkeF07XG4gICAgaGFuZGxlQ2xpY2soeyByZXN1bHQ6IHJlc3VsdCB9KTtcbiAgfTtcbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFJlc3VsdExpc3Q7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcmVzdWx0TGlzdC5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9ub2RlbnRSdW50aW1lID0gcmVxdWlyZSgnbm9kZW50LXJ1bnRpbWUnKTtcblxudmFyIF9ub2RlbnRSdW50aW1lMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX25vZGVudFJ1bnRpbWUpO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3Byb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcicpO1xuXG52YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblxudmFyIF9kb21VdGlscyA9IHJlcXVpcmUoJy4uL2RvbVV0aWxzJyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcbiAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblxuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZW5kcG9pbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG4gICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sLFxuICAgICAgICAgIGpzb25wID0gX3JlZi5qc29ucDtcblxuICAgICAgdmFyIHBhcmFtcyA9IHRoaXMub3B0aW9ucy5wYXJhbXM7XG5cblxuICAgICAgdmFyIHBhcmFtU3RyaW5nID0gdGhpcy5nZXRQYXJhbVN0cmluZyhfZXh0ZW5kcyh7fSwgcGFyYW1zLCB7XG4gICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAganNvbnA6IGpzb25wXG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiBwcm90b2NvbCArICcvL2Rldi52aXJ0dWFsZWFydGgubmV0L1JFU1QvdjEvTG9jYXRpb25zPycgKyBwYXJhbVN0cmluZztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdwYXJzZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHBhcnNlKF9yZWYyKSB7XG4gICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cbiAgICAgIGlmIChkYXRhLnJlc291cmNlU2V0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YS5yZXNvdXJjZVNldHNbMF0ucmVzb3VyY2VzLm1hcChmdW5jdGlvbiAocikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IHIucG9pbnQuY29vcmRpbmF0ZXNbMV0sXG4gICAgICAgICAgeTogci5wb2ludC5jb29yZGluYXRlc1swXSxcbiAgICAgICAgICBsYWJlbDogci5hZGRyZXNzLmZvcm1hdHRlZEFkZHJlc3MsXG4gICAgICAgICAgYm91bmRzOiBbW3IuYmJveFswXSwgci5iYm94WzFdXSwgLy8gcywgd1xuICAgICAgICAgIFtyLmJib3hbMl0sIHIuYmJveFszXV1dLFxuICAgICAgICAgIHJhdzogclxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2VhcmNoJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKF9yZWYzKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKCRyZXR1cm4sICRlcnJvcikge1xuICAgICAgICB2YXIgcXVlcnksIHByb3RvY29sLCBqc29ucCwgdXJsLCBqc29uO1xuICAgICAgICBxdWVyeSA9IF9yZWYzLnF1ZXJ5O1xuXG4gICAgICAgIHByb3RvY29sID0gfmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoJ2h0dHAnKSA/IGxvY2F0aW9uLnByb3RvY29sIDogJ2h0dHBzOic7XG5cbiAgICAgICAganNvbnAgPSAnQklOR19KU09OUF9DQl8nICsgRGF0ZS5ub3coKTtcbiAgICAgICAgdXJsID0gdGhpcy5lbmRwb2ludCh7IHF1ZXJ5OiBxdWVyeSwgcHJvdG9jb2w6IHByb3RvY29sLCBqc29ucDoganNvbnAgfSk7XG5cbiAgICAgICAgcmV0dXJuICgwLCBfZG9tVXRpbHMuY3JlYXRlU2NyaXB0RWxlbWVudCkodXJsLCBqc29ucCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzEpIHtcbiAgICAgICAgICBqc29uID0gJGF3YWl0XzE7XG4gICAgICAgICAgcmV0dXJuICRyZXR1cm4odGhpcy5wYXJzZSh7IGRhdGE6IGpzb24gfSkpO1xuICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICAgIH0uJGFzeW5jYmluZCh0aGlzKSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFByb3ZpZGVyO1xufShfcHJvdmlkZXIyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBQcm92aWRlcjtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9+L2xlYWZsZXQtZ2Vvc2VhcmNoL2xpYi9wcm92aWRlcnMvYmluZ1Byb3ZpZGVyLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX25vZGVudFJ1bnRpbWUgPSByZXF1aXJlKCdub2RlbnQtcnVudGltZScpO1xuXG52YXIgX25vZGVudFJ1bnRpbWUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbm9kZW50UnVudGltZSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbnZhciBQcm92aWRlciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gUHJvdmlkZXIoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb3ZpZGVyKTtcblxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZ2V0UGFyYW1TdHJpbmcnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRQYXJhbVN0cmluZyhwYXJhbXMpIHtcbiAgICAgIHJldHVybiBPYmplY3Qua2V5cyhwYXJhbXMpLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChwYXJhbXNba2V5XSk7XG4gICAgICB9KS5qb2luKCcmJyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnc2VhcmNoJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2VhcmNoKF9yZWYpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoJHJldHVybiwgJGVycm9yKSB7XG4gICAgICAgIHZhciBxdWVyeSwgcHJvdG9jb2wsIHVybCwgcmVxdWVzdCwganNvbjtcbiAgICAgICAgcXVlcnkgPSBfcmVmLnF1ZXJ5O1xuXG4gICAgICAgIHByb3RvY29sID0gfmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoJ2h0dHAnKSA/IGxvY2F0aW9uLnByb3RvY29sIDogJ2h0dHBzOic7XG4gICAgICAgIHVybCA9IHRoaXMuZW5kcG9pbnQoeyBxdWVyeTogcXVlcnksIHByb3RvY29sOiBwcm90b2NvbCB9KTtcblxuICAgICAgICByZXR1cm4gZmV0Y2godXJsKS50aGVuKGZ1bmN0aW9uICgkYXdhaXRfMSkge1xuICAgICAgICAgIHJlcXVlc3QgPSAkYXdhaXRfMTtcbiAgICAgICAgICByZXR1cm4gcmVxdWVzdC5qc29uKCkudGhlbihmdW5jdGlvbiAoJGF3YWl0XzIpIHtcbiAgICAgICAgICAgIGpzb24gPSAkYXdhaXRfMjtcbiAgICAgICAgICAgIHJldHVybiAkcmV0dXJuKHRoaXMucGFyc2UoeyBkYXRhOiBqc29uIH0pKTtcbiAgICAgICAgICB9LiRhc3luY2JpbmQodGhpcywgJGVycm9yKSwgJGVycm9yKTtcbiAgICAgICAgfS4kYXN5bmNiaW5kKHRoaXMsICRlcnJvciksICRlcnJvcik7XG4gICAgICB9LiRhc3luY2JpbmQodGhpcykpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm92aWRlcjtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL3Byb3ZpZGVyLmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3Byb3ZpZGVyID0gcmVxdWlyZSgnLi9wcm92aWRlcicpO1xuXG52YXIgX3Byb3ZpZGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Byb3ZpZGVyKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUHJvdmlkZXIgPSBmdW5jdGlvbiAoX0Jhc2VQcm92aWRlcikge1xuICBfaW5oZXJpdHMoUHJvdmlkZXIsIF9CYXNlUHJvdmlkZXIpO1xuXG4gIGZ1bmN0aW9uIFByb3ZpZGVyKCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQcm92aWRlcik7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFByb3ZpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHJvdmlkZXIpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQcm92aWRlciwgW3tcbiAgICBrZXk6ICdlbmRwb2ludCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVuZHBvaW50KCkge1xuICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgICAgICAgIHF1ZXJ5ID0gX3JlZi5xdWVyeSxcbiAgICAgICAgICBwcm90b2NvbCA9IF9yZWYucHJvdG9jb2w7XG5cbiAgICAgIHZhciBwYXJhbXMgPSB0aGlzLm9wdGlvbnMucGFyYW1zO1xuXG5cbiAgICAgIHZhciBwYXJhbVN0cmluZyA9IHRoaXMuZ2V0UGFyYW1TdHJpbmcoX2V4dGVuZHMoe30sIHBhcmFtcywge1xuICAgICAgICBmOiAnanNvbicsXG4gICAgICAgIHRleHQ6IHF1ZXJ5XG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiBwcm90b2NvbCArICcvL2dlb2NvZGUuYXJjZ2lzLmNvbS9hcmNnaXMvcmVzdC9zZXJ2aWNlcy9Xb3JsZC9HZW9jb2RlU2VydmVyL2ZpbmQ/JyArIHBhcmFtU3RyaW5nO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3BhcnNlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcbiAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblxuICAgICAgcmV0dXJuIGRhdGEubG9jYXRpb25zLm1hcChmdW5jdGlvbiAocikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IHIuZmVhdHVyZS5nZW9tZXRyeS54LFxuICAgICAgICAgIHk6IHIuZmVhdHVyZS5nZW9tZXRyeS55LFxuICAgICAgICAgIGxhYmVsOiByLm5hbWUsXG4gICAgICAgICAgYm91bmRzOiBbW3IuZXh0ZW50LnltaW4sIHIuZXh0ZW50LnhtaW5dLCAvLyBzLCB3XG4gICAgICAgICAgW3IuZXh0ZW50LnltYXgsIHIuZXh0ZW50LnhtYXhdXSxcbiAgICAgICAgICByYXc6IHJcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBQcm92aWRlcjtcbn0oX3Byb3ZpZGVyMi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUHJvdmlkZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vfi9sZWFmbGV0LWdlb3NlYXJjaC9saWIvcHJvdmlkZXJzL2VzcmlQcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcbiAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblxuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZW5kcG9pbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG4gICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblxuXG4gICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcbiAgICAgICAgYWRkcmVzczogcXVlcnlcbiAgICAgIH0pKTtcblxuICAgICAgLy8gZ29vZ2xlIHJlcXVpcmVzIGEgc2VjdXJlIGNvbm5lY3Rpb24gd2hlbiB1c2luZyBhcGkga2V5c1xuICAgICAgdmFyIHByb3RvID0gcGFyYW1zICYmIHBhcmFtcy5rZXkgPyAnaHR0cHM6JyA6IHByb3RvY29sO1xuICAgICAgcmV0dXJuIHByb3RvICsgJy8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24/JyArIHBhcmFtU3RyaW5nO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3BhcnNlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcbiAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblxuICAgICAgcmV0dXJuIGRhdGEucmVzdWx0cy5tYXAoZnVuY3Rpb24gKHIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiByLmdlb21ldHJ5LmxvY2F0aW9uLmxuZyxcbiAgICAgICAgICB5OiByLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCxcbiAgICAgICAgICBsYWJlbDogci5mb3JtYXR0ZWRfYWRkcmVzcyxcbiAgICAgICAgICBib3VuZHM6IFtbci5nZW9tZXRyeS52aWV3cG9ydC5zb3V0aHdlc3QubGF0LCByLmdlb21ldHJ5LnZpZXdwb3J0LnNvdXRod2VzdC5sbmddLCAvLyBzLCB3XG4gICAgICAgICAgW3IuZ2VvbWV0cnkudmlld3BvcnQubm9ydGhlYXN0LmxhdCwgci5nZW9tZXRyeS52aWV3cG9ydC5ub3J0aGVhc3QubG5nXV0sXG4gICAgICAgICAgcmF3OiByXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9nb29nbGVQcm92aWRlci5qcyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07IGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IH0gcmV0dXJuIHRhcmdldDsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9wcm92aWRlciA9IHJlcXVpcmUoJy4vcHJvdmlkZXInKTtcblxudmFyIF9wcm92aWRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wcm92aWRlcik7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFByb3ZpZGVyID0gZnVuY3Rpb24gKF9CYXNlUHJvdmlkZXIpIHtcbiAgX2luaGVyaXRzKFByb3ZpZGVyLCBfQmFzZVByb3ZpZGVyKTtcblxuICBmdW5jdGlvbiBQcm92aWRlcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvdmlkZXIpO1xuXG4gICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQcm92aWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFByb3ZpZGVyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoUHJvdmlkZXIsIFt7XG4gICAga2V5OiAnZW5kcG9pbnQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbmRwb2ludCgpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgICAgICBxdWVyeSA9IF9yZWYucXVlcnksXG4gICAgICAgICAgcHJvdG9jb2wgPSBfcmVmLnByb3RvY29sO1xuXG4gICAgICB2YXIgcGFyYW1zID0gdGhpcy5vcHRpb25zLnBhcmFtcztcblxuXG4gICAgICB2YXIgcGFyYW1TdHJpbmcgPSB0aGlzLmdldFBhcmFtU3RyaW5nKF9leHRlbmRzKHt9LCBwYXJhbXMsIHtcbiAgICAgICAgZm9ybWF0OiAnanNvbicsXG4gICAgICAgIHE6IHF1ZXJ5XG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiBwcm90b2NvbCArICcvL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2g/JyArIHBhcmFtU3RyaW5nO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3BhcnNlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoX3JlZjIpIHtcbiAgICAgIHZhciBkYXRhID0gX3JlZjIuZGF0YTtcblxuICAgICAgcmV0dXJuIGRhdGEubWFwKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgeDogci5sb24sXG4gICAgICAgICAgeTogci5sYXQsXG4gICAgICAgICAgbGFiZWw6IHIuZGlzcGxheV9uYW1lLFxuICAgICAgICAgIGJvdW5kczogW1twYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMF0pLCBwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMl0pXSwgLy8gcywgd1xuICAgICAgICAgIFtwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbMV0pLCBwYXJzZUZsb2F0KHIuYm91bmRpbmdib3hbM10pXV0sXG4gICAgICAgICAgcmF3OiByXG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gUHJvdmlkZXI7XG59KF9wcm92aWRlcjIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFByb3ZpZGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL34vbGVhZmxldC1nZW9zZWFyY2gvbGliL3Byb3ZpZGVycy9vcGVuU3RyZWV0TWFwUHJvdmlkZXIuanMiLCJpbXBvcnQge3RvZ2dsZUxheWVyfSBmcm9tIFwiLi90b2dnbGVMYXllclwiO1xyXG5pbXBvcnQge21ha2VPcGFjaXR5U2xpZGVyfSBmcm9tIFwiLi9vcGFjaXR5U2xpZGVyXCJcclxuaW1wb3J0IHt1cGRhdGVTaGFyZVVybH0gZnJvbSBcIi4vc2hhcmVcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHNldHVwUGFuZWwgKGxheWVycywgbGF5b3V0KSB7XHJcbiAgICB2YXIgbGF5ZXJHcm91cHMgPSBtYWtlTGF5ZXJHcm91cHMobGF5b3V0WydsYXllci1ncm91cHMtb3JkZXInXSk7XHJcbiAgICBtYWtlTGF5ZXJFbGVtcyhsYXllckdyb3VwcywgbGF5ZXJzKTtcclxuICAgIG1ha2VQYW5lbERyYWdnYWJsZSgpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VQYW5lbERyYWdnYWJsZSgpIHtcclxuICB2YXIgb3ZlcmxheSA9IGQzLnNlbGVjdCgnI3JpZ2h0LXBhbmVsLWRyYWctb3ZlcmxheScpXHJcblxyXG4gIG92ZXJsYXkuY2FsbChkMy5kcmFnKClcclxuICAgIC5vbignZHJhZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgcGFuZWxEcmFnRXZlbnRIYW5kbGVyLmNhbGwodGhpcylcclxuICAgIH0pKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFuZWxEcmFnRXZlbnRIYW5kbGVyKCkge1xyXG4gICAgdmFyIHBhbmVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JpZ2h0LXBhbmVsJylcclxuICAgIHZhciBtYXBXcmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcC13cmFwcGVyJylcclxuICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dyYXBwZXInKVxyXG4gICAgdmFyIHdyYXBwZXJXaWR0aCA9IHdyYXBwZXIuY2xpZW50V2lkdGhcclxuXHJcbiAgICB2YXIgcGFuZWxXaWR0aCA9IHBhbmVsLmNsaWVudFdpZHRoXHJcbiAgICB2YXIgcGFuZWxNaW5XaWR0aCA9ICtwYW5lbC5zdHlsZS5taW5XaWR0aC5zbGljZSgwLCAtMilcclxuXHJcbiAgICB2YXIgbW91c2VYID0gZDMuZXZlbnQuc291cmNlRXZlbnQueFxyXG4gICAgdmFyIHhEZWx0YSA9ICh3cmFwcGVyV2lkdGggLSBtb3VzZVgpIC0gcGFuZWxXaWR0aFxyXG5cclxuICAgIHZhciBuZXdQYW5lbFdpZHRoID0gcGFuZWxXaWR0aCArIHhEZWx0YVxyXG4gICAgbmV3UGFuZWxXaWR0aCA9IG5ld1BhbmVsV2lkdGggPCBwYW5lbE1pbldpZHRoID8gcGFuZWxNaW5XaWR0aCA6IG5ld1BhbmVsV2lkdGhcclxuXHJcbiAgICBtYXBXcmFwcGVyLnN0eWxlLnBhZGRpbmdSaWdodCA9IGAke25ld1BhbmVsV2lkdGh9cHhgXHJcbiAgICBwYW5lbC5zdHlsZS53aWR0aCA9IGAke25ld1BhbmVsV2lkdGh9cHhgXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VMYXllckdyb3VwcyAobGF5b3V0KSB7XHJcbiAgICByZXR1cm4gZDMuc2VsZWN0KCcubGF5ZXItbGlzdCcpXHJcbiAgICAgICAgLnNlbGVjdEFsbCgnLmxheWVyLWdyb3VwLXdyYXBwZXInKVxyXG4gICAgICAgIC5kYXRhKGxheW91dClcclxuICAgICAgICAuZW50ZXIoKVxyXG4gICAgICAgICAgICAuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAtd3JhcHBlcicpXHJcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsIGxheWVyR3JvdXAgPT4gbGF5ZXJHcm91cC5pZClcclxuICAgICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGxheWVyR3JvdXAgPT4gbGF5ZXJHcm91cC5hY3RpdmUpXHJcbiAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1ncm91cC1idG4gYnRuJylcclxuICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJHcm91cC5hY3RpdmUgPSAhbGF5ZXJHcm91cC5hY3RpdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLnBhcmVudE5vZGUpLmNsYXNzZWQoJ2FjdGl2ZScsICgpID0+IGxheWVyR3JvdXAuYWN0aXZlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KGxheWVyR3JvdXAubmFtZSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmFwcGVuZCgnZGl2JykuYXR0cignY2xhc3MnLCAnbGF5ZXItZ3JvdXAnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUxheWVyRWxlbXMgKGxheWVyR3JvdXBzLCBsYXllcnMpIHtcclxuICAgIGxheWVyR3JvdXBzLnNlbGVjdEFsbCgnLmxheWVyLXNlbGVjdCcpXHJcbiAgICAgICAgLmRhdGEobGF5ZXJHcm91cCA9PiBsYXllcnNbbGF5ZXJHcm91cC5pZF0pXHJcbiAgICAgICAgLmVudGVyKCkuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdsYXllci1zZWxlY3QnKVxyXG4gICAgICAgIC5lYWNoKGZ1bmN0aW9uIChsYXllcikge1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXBOYW1lID0gdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWQ7XHJcbiAgICAgICAgICAgIHZhciBsYXllckRpdiA9IGQzLnNlbGVjdCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIG1ha2VDaGVja2JveChsYXllciwgbGF5ZXJEaXYpO1xyXG4gICAgICAgICAgICBtYWtlTGFiZWwobGF5ZXIsIGxheWVyRGl2KTtcclxuICAgICAgICAgICAgbWFrZURlc2NyaXB0aW9uKGxheWVyLCBsYXllckRpdik7XHJcbiAgICAgICAgICAgIG1ha2VMZWdlbmQobGF5ZXIsIGxheWVyRGl2KTtcclxuICAgICAgICAgICAgbWFrZU9wYWNpdHlTbGlkZXIobGF5ZXIsIGxheWVyRGl2KTtcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZUNoZWNrYm94IChsYXllciwgbGF5ZXJEaXYpIHtcclxuICAgIGxheWVyRGl2LmFwcGVuZCgnaW5wdXQnKVxyXG4gICAgICAgIC5hdHRyKCd0eXBlJywgJ2NoZWNrYm94JylcclxuICAgICAgICAuYXR0cignaWQnLCBsYXllciA9PiBsYXllci5pZClcclxuICAgICAgICAuYXR0cignY2hlY2tlZCcsIChsYXllcikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbGF5ZXIuYWN0aXZlID8gJ2NoZWNrZWQnIDogbnVsbDtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vbignY2xpY2snLCBsYXllciA9PiB7XHJcbiAgICAgICAgICAgIHRvZ2dsZUxheWVyKGxheWVyKTtcclxuICAgICAgICAgICAgbGF5ZXJEaXYuc2VsZWN0QWxsKCcubGVnZW5kLXdyYXBwZXIsIC5vcGFjaXR5LXNsaWRlci13cmFwcGVyJylcclxuICAgICAgICAgICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBsYXllci5hY3RpdmUpO1xyXG4gICAgICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTGFiZWwobGF5ZXIsIGxheWVyRGl2KSB7XHJcbiAgICBsYXllckRpdi5hcHBlbmQoJ2xhYmVsJylcclxuICAgICAgICAuYXR0cignZm9yJywgbGF5ZXIgPT4gbGF5ZXIuaWQpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWxhYmVsJylcclxuICAgICAgICAuaHRtbChsYXllciA9PiBsYXllci5uYW1lKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZURlc2NyaXB0aW9uIChsYXllciwgbGF5ZXJEaXYpIHtcclxuICAgIGlmIChsYXllci5pbmZvICYmIGxheWVyLmluZm8gIT09ICcnKSB7XHJcbiAgICAgICAgbGF5ZXJEaXYuYXBwZW5kKCdkaXYnKVxyXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnbGF5ZXItaW5mby1idG4nKVxyXG4gICAgICAgICAgICAudGV4dCgnKD8pJylcclxuICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzLnBhcmVudE5vZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNlbGVjdCgnLmxheWVyLWluZm8td3JhcHBlcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzZWQoJ2FjdGl2ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxheWVyRGl2LmFwcGVuZCgnZGl2JylcclxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xheWVyLWluZm8td3JhcHBlcicpXHJcbiAgICAgICAgICAgIC50ZXh0KGxheWVyID0+IGxheWVyLmluZm8pO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTGVnZW5kIChsYXllciwgbGF5ZXJEaXYpIHtcclxuICAgIGxheWVyRGl2LmFwcGVuZCgnZGl2JylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbGVnZW5kLXdyYXBwZXInKVxyXG4gICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBsYXllci5hY3RpdmUpXHJcbiAgICAgICAgLmFwcGVuZCgnaW1nJylcclxuICAgICAgICAuYXR0cignc3JjJywgbGF5ZXIubGVnZW5kIHx8ICdtZWFuX25kdmlfbGVnZW5kLmpwZycpO1xyXG59XHJcblxyXG5cclxuXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3BhbmVsLmpzIiwiaW1wb3J0IHtHZXRNYXB9IGZyb20gXCIuL21hcFwiO1xyXG5pbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tIFwiLi9zaGFyZVwiO1xyXG5cclxuLyoqXHJcbiAqIE5lZWRlZCBmb3IgdGhlIHNoYXJlIHVybCBzaW5jZSBMZWFmbGV0IGRvZXMgbm90IGhhdmUgYSBkZWZhdWx0IHdheSB0byBzdXJmYWNlXHJcbiAqIHRoZSBvcmRlciBvZiBsYXllcnMgaW4gdGhlIG1hcFxyXG4gKi9cclxudmFyIF9jdXJyZW50X2xheWVycyA9IFtdO1xyXG5cclxuLyoqXHJcbiAqIE5vdGU6IGxheWVyIGlzIG5vdCB0aGUgbGVhZmxldCBjb25jZXB0IG9mIGEgbGF5ZXIsIGJ1dCByYXRoZXIgdGhlIGludGVybmFsXHJcbiAqICAgICAgIG9iamVjdCB3aGljaCB0cmFja3MgdGhlbS4gbGF5ZXIubWFwTGF5ZXIgaXMgdGhlIHBvaW50ZXIgdG8gdGhlXHJcbiAqICAgICAgIGxlYWZsZXQgbGF5ZXIuXHJcbiAqL1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEdldEN1cnJlbnRMYXllcnMgKCkge1xyXG4gICAgcmV0dXJuIF9jdXJyZW50X2xheWVycztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIENyZWF0ZURlZmF1bHRMYXllcnMgKGxheWVycywgZGVmYXVsdExheWVycykge1xyXG4gICAgdmFyIGksIGosIHByb3AsIGxheWVyZ3JvdXA7XHJcbiAgICB2YXIgZGVmYXVsdExheWVyO1xyXG4gICAgdmFyIGZvdW5kTGF5ZXI7XHJcblxyXG4gICAgaWYgKCFkZWZhdWx0TGF5ZXJzIHx8IGRlZmF1bHRMYXllcnMubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IGRlZmF1bHRMYXllcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBmb3VuZExheWVyID0gZmFsc2U7XHJcbiAgICAgICAgZGVmYXVsdExheWVyID0gZGVmYXVsdExheWVyc1tpXTtcclxuICAgICAgICBmb3IgKHByb3AgaW4gbGF5ZXJzKSB7XHJcbiAgICAgICAgICAgIGlmICghbGF5ZXJzLmhhc093blByb3BlcnR5KHByb3ApKSByZXR1cm47XHJcbiAgICAgICAgICAgIGxheWVyZ3JvdXAgPSBsYXllcnNbcHJvcF07XHJcbiAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsYXllcmdyb3VwLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJncm91cFtqXS5pZCA9PT0gZGVmYXVsdExheWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlTGF5ZXIobGF5ZXJncm91cFtqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRMYXllciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZvdW5kTGF5ZXIpIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUxheWVyIChsYXllciwgbGF5ZXJEaXYpIHtcclxuICAgIGlmICghbGF5ZXIuYWN0aXZlKSB7XHJcbiAgICAgICAgZW5hYmxlTGF5ZXIobGF5ZXIsIGxheWVyRGl2KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZGlzYWJsZUxheWVyKGxheWVyLCBsYXllckRpdik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVMYXllciAobGF5ZXIpIHtcclxuICAgIHZhciBtYXAgPSBHZXRNYXAoKTtcclxuXHJcbiAgICBsYXllci5hY3RpdmUgPSB0cnVlO1xyXG4gICAgbGF5ZXIubWFwTGF5ZXIgPSBsYXllci5tYXBMYXllciB8fCBtYWtlV21zVGlsZUxheWVyKGxheWVyKTtcclxuICAgIG1hcC5hZGRMYXllcihsYXllci5tYXBMYXllcik7XHJcbiAgICBhZGRMYXllclRvSW50ZXJuYWxUcmFja2VyKGxheWVyKTtcclxuICAgIHVwZGF0ZVNoYXJlVXJsKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZExheWVyVG9JbnRlcm5hbFRyYWNrZXIgKGxheWVyKSB7XHJcbiAgICBfY3VycmVudF9sYXllcnMucHVzaChsYXllci5pZCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlTGF5ZXIgKGxheWVyKSB7XHJcbiAgICB2YXIgbWFwID0gR2V0TWFwKCk7XHJcblxyXG4gICAgbGF5ZXIuYWN0aXZlID0gZmFsc2U7XHJcbiAgICBpZiAobGF5ZXIubWFwTGF5ZXIgJiYgbWFwLmhhc0xheWVyKGxheWVyLm1hcExheWVyKSkge1xyXG4gICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllci5tYXBMYXllcik7XHJcbiAgICB9XHJcbiAgICByZW1vdmVMYXllckZyb21JbnRlcm5hbFRyYWNrZXIobGF5ZXIpO1xyXG4gICAgdXBkYXRlU2hhcmVVcmwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlTGF5ZXJGcm9tSW50ZXJuYWxUcmFja2VyIChsYXllcikge1xyXG4gICAgdmFyIGxvYyA9IF9jdXJyZW50X2xheWVycy5pbmRleE9mKGxheWVyLmlkKTtcclxuICAgIGlmIChsb2MgPT09IC0xKSByZXR1cm47XHJcbiAgICBfY3VycmVudF9sYXllcnMuc3BsaWNlKGxvYywgMSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VXbXNUaWxlTGF5ZXIgKGxheWVyKSB7XHJcbiAgICByZXR1cm4gTC50aWxlTGF5ZXIud21zKGxheWVyLnVybCwge1xyXG4gICAgICAgIGxheWVyczogbGF5ZXIuaWQsXHJcbiAgICAgICAgdHJhbnNwYXJlbnQ6IGxheWVyLnRyYW5zcGFyZW50IHx8IHRydWUsXHJcbiAgICAgICAgdmVyc2lvbjogbGF5ZXIudmVyc2lvbiB8fCAnMS4zLjAnLFxyXG4gICAgICAgIGNyczogbGF5ZXIuY3JzIHx8IEwuQ1JTLkVQU0c0MzI2LFxyXG4gICAgICAgIGZvcm1hdDogbGF5ZXIuZm9ybWF0IHx8ICdpbWFnZS9wbmcnLFxyXG4gICAgICAgIG9wYWNpdHk6IGxheWVyLm9wYWNpdHkgfHwgXCIxXCJcclxuICAgIH0pO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3RvZ2dsZUxheWVyLmpzIiwidmFyIG1hcDtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBDcmVhdGVNYXAgKG1hcENvbmZpZykge1xyXG4gICAgdmFyIGlkID0gbWFwQ29uZmlnLmlkIHx8IFwibWFwXCI7XHJcbiAgICB2YXIgb3B0aW9ucyA9IG1hcENvbmZpZy5vcHRpb25zIHx8IHtcInNjcm9sbFdoZWVsWm9vbVwiIDogZmFsc2V9O1xyXG4gICAgdmFyIGluaXRpYWxDZW50ZXIgPSBtYXBDb25maWcuaW5pdGlhbENlbnRlciB8fCBbXCIzOC41XCIsIFwiLTgxXCJdO1xyXG4gICAgdmFyIGluaXRpYWxab29tID0gbWFwQ29uZmlnLmluaXRpYWxab29tIHx8IDY7XHJcblxyXG4gICAgbWFwID0gTC5tYXAoaWQsIG9wdGlvbnMpLnNldFZpZXcoaW5pdGlhbENlbnRlciwgaW5pdGlhbFpvb20pO1xyXG4gICAgTC5jb250cm9sLmF0dHJpYnV0aW9uKHsgcG9zaXRpb246ICdib3R0b21sZWZ0JyB9KS5hZGRUbyhtYXApXHJcbiAgICByZXR1cm4gbWFwO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gR2V0TWFwICgpIHtcclxuICAgIHJldHVybiBtYXA7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvbWFwLmpzIiwiaW1wb3J0IHtHZXRNYXB9IGZyb20gJy4vbWFwJztcclxuaW1wb3J0IHtCQVNFX0xBWUVSX1RZUEV9IGZyb20gJy4vYmFzZWxheWVyJztcclxuaW1wb3J0IHtHZXRDdXJyZW50TGF5ZXJzfSBmcm9tICcuL3RvZ2dsZUxheWVyJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBCaW5kVXBkYXRlU2hhcmVVcmwgKG1hcCkge1xyXG4gICAgbWFwLm9uKFwibW92ZWVuZFwiLCB1cGRhdGVTaGFyZVVybCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVTaGFyZVVybCAoZSkge1xyXG4gICAgdmFyIG1hcCA9IEdldE1hcCgpO1xyXG5cclxuICAgIHZhciBwYXJhbXMgPSBbXHJcbiAgICAgICAgbWFrZUNlbnRlclN0cmluZyhtYXApLFxyXG4gICAgICAgIG1ha2Vab29tU3RyaW5nKG1hcCksXHJcbiAgICAgICAgbWFrZUxheWVyU3RyaW5nKG1hcCksXHJcbiAgICAgICAgbWFrZUJhc2VMYXllclN0cmluZyhtYXApLFxyXG4gICAgXTtcclxuXHJcbiAgICBzZXRTaGFyZVVybChtYWtlU2hhcmVVcmwocGFyYW1zKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VTaGFyZVVybCAocGFyYW1zKSB7XHJcbiAgICByZXR1cm4gXCI/XCIgKyBwYXJhbXMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7IHJldHVybiBwICE9PSB1bmRlZmluZWQgfSkuam9pbihcIiZcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldFNoYXJlVXJsICh1cmwpIHtcclxuICAgIGlmICh3aW5kb3cuaGlzdG9yeSAmJiB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUpIHtcclxuICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIFwiXCIsIHVybCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VDZW50ZXJTdHJpbmcgKG1hcCkge1xyXG4gICAgdmFyIGNlbnRlciA9IG1hcC5nZXRDZW50ZXIoKTtcclxuICAgIHJldHVybiBcImNlbnRlcj1cIiArIGNlbnRlci5sYXQudG9TdHJpbmcoKSArIFwiLFwiICsgY2VudGVyLmxuZy50b1N0cmluZygpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2Vab29tU3RyaW5nIChtYXApIHtcclxuICAgIHJldHVybiBcInpvb209XCIgKyBtYXAuZ2V0Wm9vbSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlTGF5ZXJTdHJpbmcgKG1hcCkge1xyXG4gICAgdmFyIGxheWVycyA9IFtdO1xyXG4gICAgdmFyIG9wYWNpdHlWYWxzID0ge307XHJcbiAgICB2YXIgY3VycmVudExheWVycyA9IEdldEN1cnJlbnRMYXllcnMoKTtcclxuXHJcbiAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gbGF5ZXIub3B0aW9ucztcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxheWVycykge1xyXG4gICAgICAgICAgICBvcGFjaXR5VmFsc1tvcHRpb25zLmxheWVyc10gPSBvcHRpb25zLmhhc093blByb3BlcnR5KFwib3BhY2l0eVwiKSA/IG9wdGlvbnMub3BhY2l0eSA6IFwiMVwiO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBjdXJyZW50TGF5ZXI7XHJcbiAgICB2YXIgaTtcclxuICAgIGZvciAoaSA9IDA7IGkgPCBjdXJyZW50TGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY3VycmVudExheWVyID0gY3VycmVudExheWVyc1tpXTtcclxuICAgICAgICBsYXllcnMucHVzaChjdXJyZW50TGF5ZXIpO1xyXG4gICAgICAgIGxheWVycy5wdXNoKG9wYWNpdHlWYWxzW2N1cnJlbnRMYXllcl0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFwibGF5ZXJzPVwiICsgbGF5ZXJzLmpvaW4oXCIsXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlQmFzZUxheWVyU3RyaW5nIChtYXApIHtcclxuICAgIHZhciBsYXllcnMgPSBbXTtcclxuICAgIG1hcC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7XHJcbiAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMgJiYgbGF5ZXIub3B0aW9ucy50eXBlID09PSBCQVNFX0xBWUVSX1RZUEUpIHtcclxuICAgICAgICAgICAgbGF5ZXJzLnB1c2gobGF5ZXIub3B0aW9ucy5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gXCJiYXNlbGF5ZXJzPVwiICsgbGF5ZXJzLmpvaW4oXCIsXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZVNoYXJlVXJsICgpIHtcclxuICAgIHZhciBwYXJhbXMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xyXG4gICAgaWYgKHBhcmFtcyA9PT0gXCJcIikgcmV0dXJuO1xyXG5cclxuICAgIHBhcmFtcyA9IGdldFBhcmFtc0FycmF5KHBhcmFtcyk7XHJcbiAgICBwYXJhbXMgPSBtYWtlS2V5ZWRQYXJhbXNPYmplY3QocGFyYW1zKTtcclxuXHJcbiAgICBmb3JtYXRQYXJhbXMocGFyYW1zKTtcclxuICAgIHJldHVybiBwYXJhbXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFBhcmFtc0FycmF5IChwYXJhbXMpIHtcclxuICAgIHBhcmFtcyA9IHBhcmFtcy5zdWJzdHJpbmcoMSk7XHJcbiAgICBwYXJhbXMgPSB1bm1hbmdsZVBhcmFtU3RyaW5nKHBhcmFtcyk7XHJcbiAgICByZXR1cm4gcGFyYW1zLnNwbGl0KFwiJlwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdW5tYW5nbGVQYXJhbVN0cmluZyAocGFyYW1zKSB7XHJcbiAgICByZXR1cm4gcGFyYW1zLnJlcGxhY2UoL1xcJTJbY3xDXS9nLCBcIixcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VLZXllZFBhcmFtc09iamVjdCAocGFyYW1zQXJyKSB7XHJcbiAgICB2YXIgcGFyc2VkUGFyYW1zID0ge307XHJcbiAgICB2YXIgcGFyYW1QYWlyO1xyXG4gICAgdmFyIGk7XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IHBhcmFtc0Fyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHBhcmFtUGFpciA9IHBhcmFtc0FycltpXS5zcGxpdChcIj1cIik7XHJcbiAgICAgICAgcGFyc2VkUGFyYW1zW3BhcmFtUGFpclswXV0gPSBwYXJhbVBhaXJbMV1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcGFyc2VkUGFyYW1zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRQYXJhbXMgKHBhcmFtcykge1xyXG4gICAgaWYgKHBhcmFtcy5jZW50ZXIpIHBhcmFtcy5jZW50ZXIgPSBmb3JtYXRDZW50ZXJQYXJhbShwYXJhbXMuY2VudGVyKTtcclxuICAgIGlmIChwYXJhbXMubGF5ZXJzKSBwYXJhbXMubGF5ZXJzID0gZm9ybWF0TGF5ZXJQYXJhbShwYXJhbXMubGF5ZXJzKTtcclxuICAgIGlmIChwYXJhbXMuYmFzZWxheWVycykgcGFyYW1zLmJhc2VsYXllcnMgPSBmb3JtYXRCYXNlTGF5ZXJQYXJhbShwYXJhbXMuYmFzZWxheWVycyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdENlbnRlclBhcmFtIChjZW50ZXIpIHtcclxuICAgIHJldHVybiBjZW50ZXIuc3BsaXQoXCIsXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRMYXllclBhcmFtIChsYXllcnMpIHtcclxuICAgIHZhciBmb3JtYXR0ZWRMYXllcnMgPSB7XHJcbiAgICAgICAgXCJlbmFibGVkTGF5ZXJzXCI6IFtdLFxyXG4gICAgICAgIFwib3BhY2l0eVZhbHNcIjoge31cclxuICAgIH07XHJcbiAgICB2YXIgbGF5ZXJJZDtcclxuICAgIHZhciBpO1xyXG5cclxuICAgIGxheWVycyA9IGxheWVycy5zcGxpdChcIixcIik7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGF5ZXJzLmxlbmd0aDsgaSA9IGkgKyAyKSB7XHJcbiAgICAgICAgbGF5ZXJJZCA9IGxheWVyc1tpXTtcclxuICAgICAgICBmb3JtYXR0ZWRMYXllcnMuZW5hYmxlZExheWVycy5wdXNoKGxheWVySWQpO1xyXG4gICAgICAgIGZvcm1hdHRlZExheWVycy5vcGFjaXR5VmFsc1tsYXllcklkXSA9IGxheWVyc1tpKzFdO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmb3JtYXR0ZWRMYXllcnM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdEJhc2VMYXllclBhcmFtIChiYXNlbGF5ZXJzKSB7XHJcbiAgICByZXR1cm4gYmFzZWxheWVycy5zcGxpdChcIixcIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBBZGRTaGFyZVNldHRpbmdzVG9Db25maWcgKGNvbmZpZykge1xyXG4gICAgdmFyIHNoYXJlID0gcGFyc2VTaGFyZVVybCgpO1xyXG4gICAgaWYgKCFzaGFyZSkgcmV0dXJuO1xyXG4gICAgaWYgKHNoYXJlLmNlbnRlcikgY29uZmlnLm1hcC5pbml0aWFsQ2VudGVyID0gc2hhcmUuY2VudGVyO1xyXG4gICAgaWYgKHNoYXJlLnpvb20pIGNvbmZpZy5tYXAuaW5pdGlhbFpvb20gPSBzaGFyZS56b29tO1xyXG4gICAgaWYgKHNoYXJlLmxheWVycykgYWRkTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlLmxheWVycywgY29uZmlnKTtcclxuICAgIGlmIChzaGFyZS5iYXNlbGF5ZXJzKSBhZGRCYXNlTGF5ZXJTZXR0aW5nc1RvQ29uZmlnKHNoYXJlLmJhc2VsYXllcnMsIGNvbmZpZyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZExheWVyU2V0dGluZ3NUb0NvbmZpZyAoc2hhcmVMYXllclNldHRpbmdzLCBjb25maWcpIHtcclxuICAgIHZhciBlbmFibGVkTGF5ZXJzID0gc2hhcmVMYXllclNldHRpbmdzLmVuYWJsZWRMYXllcnM7XHJcbiAgICBjb25maWdbXCJhY3RpdmUtbGF5ZXJzXCJdID0gZW5hYmxlZExheWVycztcclxuXHJcbiAgICB2YXIgaSwgaiwgcHJvcCwgbGF5ZXJncm91cDtcclxuICAgIHZhciBlbmFibGVkTGF5ZXI7XHJcbiAgICB2YXIgZm91bmRMYXllcjtcclxuICAgIHZhciBsYXllcnMgPSBjb25maWcubGF5ZXJzO1xyXG5cclxuICAgIGZvciAoaSA9IDA7IGkgPCBlbmFibGVkTGF5ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZm91bmRMYXllciA9IGZhbHNlO1xyXG4gICAgICAgIGVuYWJsZWRMYXllciA9IGVuYWJsZWRMYXllcnNbaV07XHJcbiAgICAgICAgZm9yIChwcm9wIGluIGxheWVycykge1xyXG4gICAgICAgICAgICBpZiAoIWxheWVycy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICBsYXllcmdyb3VwID0gbGF5ZXJzW3Byb3BdO1xyXG4gICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbGF5ZXJncm91cC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxheWVyZ3JvdXBbal0uaWQgPT09IGVuYWJsZWRMYXllcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyZ3JvdXBbal0ub3BhY2l0eSA9IHNoYXJlTGF5ZXJTZXR0aW5ncy5vcGFjaXR5VmFsc1tlbmFibGVkTGF5ZXJdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kTGF5ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChmb3VuZExheWVyKSBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEJhc2VMYXllclNldHRpbmdzVG9Db25maWcgKHNoYXJlQmFzZUxheWVyU2V0dGluZ3MsIGNvbmZpZykge1xyXG4gICAgdmFyIGJhc2VsYXllcnMgPSBjb25maWcuYmFzZWxheWVycztcclxuICAgIHZhciBiYXNlbGF5ZXI7XHJcbiAgICB2YXIgaTtcclxuXHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgYmFzZWxheWVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGJhc2VsYXllciA9IGJhc2VsYXllcnNbaV07XHJcbiAgICAgICAgYmFzZWxheWVyLmFjdGl2ZSA9IChzaGFyZUJhc2VMYXllclNldHRpbmdzLmluZGV4T2YoYmFzZWxheWVyLmlkKSAhPT0gLTEpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3NoYXJlLmpzIiwiZXhwb3J0IGNvbnN0IEJBU0VfTEFZRVJfVFlQRSA9IFwiYmFzZWxheWVyXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gQ3JlYXRlQmFzZUxheWVycyAobWFwLCBsYXllckNvbmZpZykge1xyXG4gICAgbGF5ZXJDb25maWcgPSBsYXllckNvbmZpZyB8fCBcclxuICAgICAgICBbe1xyXG4gICAgICAgICAgICBcImlkXCIgOiBcImNhcnRvLWxpZ2h0LWRlZmF1bHRcIixcclxuICAgICAgICAgICAgXCJ1cmxcIiA6IFwiaHR0cDovL3tzfS5iYXNlbWFwcy5jYXJ0b2Nkbi5jb20vbGlnaHRfYWxsL3t6fS97eH0ve3l9LnBuZ1wiLFxyXG4gICAgICAgICAgICBcImF0dHJpYnV0aW9uXCIgOiAnJmNvcHk7IDxhIGhyZWY9XCJodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodFwiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgJmNvcHk7IDxhIGhyZWY9XCJodHRwczovL2NhcnRvLmNvbS9hdHRyaWJ1dGlvbnNcIj5DQVJUTzwvYT4nXHJcbiAgICAgICAgfV07XHJcbiAgICB2YXIgaTtcclxuICAgIHZhciBiYXNlTGF5ZXI7XHJcbiAgICB2YXIgY29uZmlnO1xyXG5cclxuICAgIGZvciAoaSA9IDA7IGk8IGxheWVyQ29uZmlnLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uZmlnID0gbGF5ZXJDb25maWdbaV07XHJcblxyXG4gICAgICAgIGlmICghY29uZmlnLmFjdGl2ZSkgY29udGludWU7XHJcbiAgICAgICAgYmFzZUxheWVyID0gY3JlYXRlQmFzZUxheWVyKGNvbmZpZyk7XHJcbiAgICAgICAgYmFzZUxheWVyLmFkZFRvKG1hcCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUJhc2VMYXllciAobGF5ZXJDb25maWcpIHtcclxuICAgIHJldHVybiBMLnRpbGVMYXllcihcclxuICAgICAgICBsYXllckNvbmZpZy51cmwsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZDogbGF5ZXJDb25maWcuaWQsXHJcbiAgICAgICAgICAgIHR5cGU6IEJBU0VfTEFZRVJfVFlQRSxcclxuICAgICAgICAgICAgYXR0cmlidXRpb246IGxheWVyQ29uZmlnLmF0dHJpYnV0aW9uXHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9qcy9iYXNlbGF5ZXIuanMiLCJpbXBvcnQge3VwZGF0ZVNoYXJlVXJsfSBmcm9tICcuL3NoYXJlJ1xyXG5cclxuLypcclxuICBUaGUgdmlld0JveCBmb3IgdGhlIG9wYWNpdHkgc2xpZGVyIHN2ZyBjb250YWluZXIgaXMgY29uc3RydWN0ZWQgc28gdGhhdFxyXG4gIHRoZSB2aXNpYmxlIHNsaWRlciB0cmFjayBsaW5lIGNhbiBoYXZlIGFuIHgxIG9mIDAgYW5kIHgyIG9mIDEwMCxcclxuICB0byByZWZsZWN0IHRoZSByYW5nZSBmb3IgbGF5ZXIgb3BhY2l0eS5cclxuXHJcbiAgVGhlIHdpZHRoIGFuZCBoZWlnaHQgcmVmbGVjdCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgYm91bmRpbmcgYm94XHJcbiAgd2l0aGluIHdoaWNoIGEgbW91c2UgZXZlbnQgaXMgY2FwdHVyZWQgYW5kIGludGVycHJldGVkIGFzIGEgXCJkcmFnXCIgZXZlbnQuXHJcbiovXHJcblxyXG5jb25zdCBNQVhfT1BBQ0lUWV9MT0MgPSAxMDBcclxuY29uc3QgQ0lSQ0xFX1JBRElVUyA9IDJcclxuXHJcbnZhciB2aWV3Qm94ID0ge1xyXG4gICAgeE1pbjogLUNJUkNMRV9SQURJVVMsXHJcbiAgICB5TWluOiAwLFxyXG4gICAgd2lkdGg6IE1BWF9PUEFDSVRZX0xPQyArIENJUkNMRV9SQURJVVMqMixcclxuICAgIGhlaWdodDogQ0lSQ0xFX1JBRElVUyoyLFxyXG59XHJcblxyXG52YXIgb3BhY2l0eVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxyXG4gICAgLmRvbWFpbihbMCwgTUFYX09QQUNJVFlfTE9DXSlcclxuICAgIC5yYW5nZShbMCwgMV0pXHJcbiAgICAuY2xhbXAodHJ1ZSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbWFrZU9wYWNpdHlTbGlkZXIgKGxheWVyLCBsYXllckRpdikge1xyXG5cclxuICAgIHZhciBsYXllck9wYWNpdHkgPSBsYXllci5vcGFjaXR5ICE9PSB1bmRlZmluZWQgPyBsYXllci5vcGFjaXR5IDogMVxyXG4gICAgXHJcbiAgICB2YXIgb3BhY2l0eVNsaWRlcldyYXBwZXIgPSBsYXllckRpdi5hcHBlbmQoJ2RpdicpXHJcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ29wYWNpdHktc2xpZGVyLXdyYXBwZXInKVxyXG4gICAgICAgIC5jbGFzc2VkKCdhY3RpdmUnLCBsYXllci5hY3RpdmUpO1xyXG5cclxuICAgIHZhciBvcGFjaXR5U2xpZGVyU3ZnID0gb3BhY2l0eVNsaWRlcldyYXBwZXJcclxuICAgICAgICAuYXBwZW5kKCdzdmcnKVxyXG4gICAgICAgICAgICAuYXR0cigndmlld0JveCcsIGAke3ZpZXdCb3gueE1pbn0gJHt2aWV3Qm94LnlNaW59ICR7dmlld0JveC53aWR0aH0gJHt2aWV3Qm94LmhlaWdodH1gKVxyXG4gICAgICAgICAgICAvLy5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ25vbmUnKVxyXG4gICAgICAgIC5hcHBlbmQoJ2cnKVxyXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXInKVxyXG4gICAgICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgwLCAke0NJUkNMRV9SQURJVVN9KWApXHJcblxyXG4gICAgbWFrZVNsaWRlclRyYWNrKG9wYWNpdHlTbGlkZXJTdmcsIGxheWVyLCBsYXllck9wYWNpdHkpXHJcbiAgICBzZXREcmFnRXZlbnRMaXN0ZW5lcihvcGFjaXR5U2xpZGVyU3ZnLCBsYXllcilcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZU9wYWNpdHlJbmRpY2F0b3Iod3JhcHBlciwgbGF5ZXJPcGFjaXR5KSB7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXREcmFnRXZlbnRMaXN0ZW5lcihzdmcsIGxheWVyKSB7XHJcbiAgICBzdmcuc2VsZWN0QWxsKCcqJylcclxuICAgICAgICAuY2FsbChkMy5kcmFnKClcclxuICAgICAgICAub24oJ3N0YXJ0IGRyYWcnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZU9wYWNpdHkobGF5ZXIsIHRoaXMucGFyZW50Tm9kZSwgZDMuZXZlbnQueCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdXBkYXRlU2hhcmVVcmwoKTtcclxuICAgICAgICB9KSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1ha2VTbGlkZXJUcmFjayhzdmcsIGxheWVyLCBsYXllck9wYWNpdHkpIHtcclxuICAgIHN2Zy5hcHBlbmQoJ2xpbmUnKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdvcGFjaXR5LXNsaWRlci10cmFjaycpXHJcbiAgICAgICAgLmF0dHIoJ3gxJywgMCkuYXR0cigneDInLCBNQVhfT1BBQ0lUWV9MT0MpXHJcbiAgICAgICAgLmF0dHIoJ3N0cm9rZScsICcjNjY2JylcclxuICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgJy41cHgnKTtcclxuXHJcbiAgICAvLyBJbnZpc2libGUgYm94IGZvciBjYXB0dXJpbmcgbW91c2UgZXZlbnRzXHJcbiAgICBzdmcuYXBwZW5kKCdsaW5lJylcclxuICAgICAgICAuYXR0cignY2xhc3MnLCAnb3BhY2l0eS1zbGlkZXItdHJhY2stb3ZlcmxheScpXHJcbiAgICAgICAgLmF0dHIoJ3gxJywgYCR7dmlld0JveC54TWlufWApXHJcbiAgICAgICAgLmF0dHIoJ3gyJywgYCR7dmlld0JveC53aWR0aCAtIENJUkNMRV9SQURJVVN9YClcclxuICAgICAgICAuYXR0cignc3Ryb2tlJywgJyMwMDAwMDAnKVxyXG4gICAgICAgIC5hdHRyKCdzdHJva2Utd2lkdGgnLCBgJHtDSVJDTEVfUkFESVVTKjJ9cHhgKVxyXG4gICAgICAgIC5hdHRyKCdzdHJva2Utb3BhY2l0eScsICcwLjAnKVxyXG5cclxuICAgIHN2Zy5hcHBlbmQoJ2NpcmNsZScpXHJcbiAgICAgICAgLmF0dHIoJ3InLCBDSVJDTEVfUkFESVVTKVxyXG4gICAgICAgIC5hdHRyKCdjeCcsIGAke29wYWNpdHlTY2FsZS5pbnZlcnQobGF5ZXJPcGFjaXR5KX1weGAgKVxyXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdvcGFjaXR5LXNsaWRlci1jaXJjbGUnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlT3BhY2l0eShsYXllciwgc2xpZGVyLCB4UG9zKSB7XHJcbiAgLy8gY2xhbXAgdGhlIHggcG9zaXRpb24gdG8gYmUgd2l0aGluIHRoZSBzY2FsZSdzIGRvbWFpblxyXG4gIHZhciB4UG9zID0gb3BhY2l0eVNjYWxlLmludmVydChvcGFjaXR5U2NhbGUoeFBvcykpXHJcbiAgc2xpZGVyID0gZDMuc2VsZWN0KHNsaWRlcilcclxuXHJcbiAgc2xpZGVyLnNlbGVjdCgnY2lyY2xlJykuYXR0cignY3gnLCB4UG9zKVxyXG4gIHNsaWRlci5zZWxlY3QoJ3RleHQnKS50ZXh0KHBhcnNlSW50KG9wYWNpdHlTY2FsZSh4UG9zKSoxMDAsIDEwKSArICclJylcclxuICBsYXllci5tYXBMYXllci5zZXRPcGFjaXR5KG9wYWNpdHlTY2FsZShkMy5ldmVudC54KSlcclxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL29wYWNpdHlTbGlkZXIuanMiLCJ2YXIgdGlwO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFNldHVwR3JhcGhzICgpIHtcclxuICAgIGQzLnNlbGVjdEFsbChcIi5ncmFwaC10eXBlLWJ0blwiKS5vbihcImNsaWNrXCIsIGhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrKTtcclxuICAgIGV4dGVuZERhdGVNb2R1bGUoKTtcclxuICAgIHRpcCA9IGQzLnRpcCgpLmF0dHIoJ2NsYXNzJywgJ2QzLXRpcCcpLmh0bWwoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQ7IH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBleHRlbmREYXRlTW9kdWxlICgpIHtcclxuICAgIERhdGUucHJvdG90eXBlLmlzTGVhcFllYXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgeWVhciA9IHRoaXMuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICBpZigoeWVhciAmIDMpICE9IDApIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gKCh5ZWFyICUgMTAwKSAhPSAwIHx8ICh5ZWFyICUgNDAwKSA9PSAwKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gR2V0IERheSBvZiBZZWFyXHJcbiAgICBEYXRlLnByb3RvdHlwZS5nZXRET1kgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgZGF5Q291bnQgPSBbMCwgMzEsIDU5LCA5MCwgMTIwLCAxNTEsIDE4MSwgMjEyLCAyNDMsIDI3MywgMzA0LCAzMzRdO1xyXG4gICAgICAgIHZhciBtbiA9IHRoaXMuZ2V0TW9udGgoKTtcclxuICAgICAgICB2YXIgZG4gPSB0aGlzLmdldERhdGUoKTtcclxuICAgICAgICB2YXIgZGF5T2ZZZWFyID0gZGF5Q291bnRbbW5dICsgZG47XHJcbiAgICAgICAgaWYobW4gPiAxICYmIHRoaXMuaXNMZWFwWWVhcigpKSBkYXlPZlllYXIrKztcclxuICAgICAgICByZXR1cm4gZGF5T2ZZZWFyO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEJpbmRHcmFwaEV2ZW50cyAobWFwKSB7XHJcbiAgICBtYXAub24oXCJjbGlja1wiLCBoYW5kbGVNYXBDbGljayk7XHJcbn1cclxuXHJcbnZhciBiYXNlSWNvbiA9IEwuSWNvbi5leHRlbmQoe30pO1xyXG5cclxudmFyIGdyYXBoSWNvbiA9IG5ldyBiYXNlSWNvbih7XHJcbiAgICBpY29uVXJsOiAnaW1ncy9ibHVlX2ljb24ucG5nJyxcclxuICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxyXG4gICAgaWNvblNpemU6IFsyNSwgNDFdLFxyXG4gICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sXHJcbiAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXHJcbiAgICBzaGFkb3dTaXplOiBbNDEsIDQxXVxyXG59KTtcclxuXHJcbnZhciBob3Zlckljb24gPSBuZXcgYmFzZUljb24oe1xyXG4gICAgaWNvblVybDogJ2ltZ3Mvb3JhbmdlX2ljb24ucG5nJyxcclxuICAgIHNoYWRvd1VybDogJ2ltZ3MvbWFya2VyX3NoYWRvdy5wbmcnLFxyXG4gICAgaWNvblNpemU6IFsyNSwgNDFdLFxyXG4gICAgaWNvbkFuY2hvcjogWzEyLCA0MV0sXHJcbiAgICBwb3B1cEFuY2hvcjogWzEsIC0zNF0sXHJcbiAgICBzaGFkb3dTaXplOiBbNDEsIDQxXVxyXG59KTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZU1hcENsaWNrIChlKSB7XHJcbiAgICB2YXIgbWFwID0gdGhpcztcclxuICAgIHZhciBsYXQgPSBlLmxhdGxuZy5sYXQ7XHJcbiAgICB2YXIgbG5nID0gZS5sYXRsbmcubG5nO1xyXG5cclxuICAgIHZhciBkaXYgPSBjcmVhdGVHcmFwaERpdihsYXQsIGxuZyk7XHJcbiAgICB2YXIgbWFya2VyID0gY3JlYXRlTWFya2VyKG1hcCwgbGF0LCBsbmcpO1xyXG4gICAgZDMuc2VsZWN0KGRpdikub24oXCJtb3VzZWVudGVyXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBtYXJrZXIuc2V0SWNvbihob3Zlckljb24pO1xyXG4gICAgfSlcclxuICAgIGQzLnNlbGVjdChkaXYpLm9uKFwibW91c2VsZWF2ZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbWFya2VyLnNldEljb24oZ3JhcGhJY29uKTtcclxuICAgIH0pXHJcbiAgICBjcmVhdGVHcmFwaFJlbW92ZXIobWFwLCBkaXYsIG1hcmtlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZU1hcmtlciAobWFwLCBsYXQsIGxuZykge1xyXG4gICAgcmV0dXJuIEwubWFya2VyKFtsYXQsIGxuZ10sIHtpY29uOiBncmFwaEljb259KS5hZGRUbyhtYXApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVHcmFwaFJlbW92ZXIgKG1hcCwgZGl2LCBtYXJrZXIpIHtcclxuICAgIHZhciBlbGVtID0gY3JlYXRlR3JhcGhSZW1vdmVyRWxlbSgpO1xyXG4gICAgZGl2LmFwcGVuZENoaWxkKGVsZW0pO1xyXG4gICAgZDMuc2VsZWN0KGVsZW0pLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJncmFwaC1saXN0XCIpO1xyXG4gICAgICAgIGxpc3QucmVtb3ZlQ2hpbGQoZGl2KTtcclxuICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobWFya2VyKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVHcmFwaFJlbW92ZXJFbGVtICgpIHtcclxuICAgIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICAgIGVsZW0uY2xhc3NOYW1lID0gXCJyZW1vdmUtZ3JhcGhcIjtcclxuICAgIGVsZW0uaW5uZXJUZXh0ID0gU3RyaW5nLmZyb21DaGFyQ29kZShcIjEwMDA1XCIpO1xyXG4gICAgZWxlbS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBcIlJlbW92ZSBncmFwaFwiKTtcclxuICAgIHJldHVybiBlbGVtO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIERBVEEgUFJPQ0VTU0lORyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5mdW5jdGlvbiBnZXREYXRhKGxhdCwgbG5nLCBkaXYpIHtcclxuICAgIHZhciB1cmwgPSBcImh0dHBzOi8vZmNhdi1uZHZpLm5lbWFjLm9yZy9sYW5kZGF0X3Byb2R1Y3QuY2dpP2FyZ3M9XCIgKyBsbmcgKyBcIixcIiArIGxhdDtcclxuICAgIHZhciBvUmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICBvUmVxLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlVGV4dDtcclxuICAgICAgICByZXNwb25zZSA9IHJlc3BvbnNlLnJlcGxhY2UoL1xcW3xcXF18XFwnL2csIFwiXCIpLnNwbGl0KFwiLCBcIik7XHJcbiAgICAgICAgZHJhd0dyYXBoKHJlc3BvbnNlLCBkaXYsIGxhdCwgbG5nKTtcclxuICAgIH0pO1xyXG4gICAgb1JlcS5vcGVuKFwiR0VUXCIsIHVybCk7XHJcbiAgICBvUmVxLnNlbmQoKVxyXG59XHJcblxyXG5mdW5jdGlvbiBzcGxpdERhdGEoZGF0YSkge1xyXG4gICAgdmFyIGk7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGRhdGFbaV0gPSBkYXRhW2ldLnNwbGl0KFwiLFwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXByb2Nlc3NEYXRhIChvcmlnZGF0YSkge1xyXG4gICAgdmFyIGRhdGEgPSB7fTtcclxuICAgIHZhciBwb2ludDtcclxuICAgIHZhciBrZXk7XHJcbiAgICB2YXIgaSwgajtcclxuXHJcbiAgICBkYXRhW1wia2V5c1wiXSA9IFtdO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IG9yaWdkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgcG9pbnQgPSBvcmlnZGF0YVtpXTtcclxuICAgICAgICBrZXkgPSBwb2ludFswXS5zdWJzdHJpbmcoMCw0KTtcclxuICAgICAgICBpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICBkYXRhW2tleV0gPSBbXTtcclxuICAgICAgICAgICAgZGF0YVtcImtleXNcIl0ucHVzaChrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYXRhW2tleV0ucHVzaChwb2ludCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGRhdGFGb3JNZWRpYW5zO1xyXG4gICAgdmFyIG1lZGlhbjtcclxuICAgIGRhdGFbXCJtZWRpYW5zXCJdID0gW107XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgNDY7IGkrKykge1xyXG4gICAgICAgIGRhdGFGb3JNZWRpYW5zID0gW107XHJcbiAgICAgICAgZm9yIChqID0gaTsgaiA8IG9yaWdkYXRhLmxlbmd0aDsgaiArPSA0Nikge1xyXG4gICAgICAgICAgICBkYXRhRm9yTWVkaWFucy5wdXNoKG9yaWdkYXRhW2pdWzFdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG1lZGlhbiA9IGRhdGFGb3JNZWRpYW5zLnNvcnQoKVtNYXRoLmZsb29yKGRhdGFGb3JNZWRpYW5zLmxlbmd0aC8yKV07XHJcbiAgICAgICAgZGF0YVtcIm1lZGlhbnNcIl0ucHVzaChtZWRpYW4pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEdSQVBIIElOVEVSRkFDRSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUdyYXBoVHlwZUJ0bkNsaWNrICgpIHtcclxuICAgIHZhciB0eXBlID0gdGhpcy5kYXRhc2V0LnR5cGU7XHJcbiAgICB2YXIgYWN0aXZlRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncmFwaC10eXBlLWJ0biBhY3RpdmVcIilbMF07XHJcbiAgICB2YXIgYWN0aXZlVHlwZSA9IGFjdGl2ZUVsZW0uZGF0YXNldC50eXBlO1xyXG5cclxuICAgIGlmICh0eXBlID09PSBhY3RpdmVUeXBlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGQzLnNlbGVjdChcIiNncmFwaC1saXN0XCIpXHJcbiAgICAgICAgLmNsYXNzZWQoXCJncmFwaC1cIiArIGFjdGl2ZVR5cGUsIGZhbHNlKVxyXG4gICAgICAgIC5jbGFzc2VkKFwiZ3JhcGgtXCIgKyB0eXBlLCB0cnVlKTtcclxuXHJcbiAgICBkMy5zZWxlY3QoYWN0aXZlRWxlbSkuY2xhc3NlZChcImFjdGl2ZVwiLCBmYWxzZSk7XHJcbiAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlR3JhcGhEaXYgKGxhdCwgbG5nKSB7XHJcbiAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJMYXQ6IFwiICsgbGF0ICsgXCIsIExvbjogXCIgKyBsbmcpO1xyXG4gICAgZGl2LmFwcGVuZENoaWxkKGNvbnRlbnQpO1xyXG4gICAgZGl2LmNsYXNzTGlzdC5hZGQoXCJncmFwaC1lbGVtXCIpXHJcbiAgICBnZXREYXRhKGxhdCwgbG5nLCBkaXYpO1xyXG4gICAgcmV0dXJuIGRpdjtcclxufVxyXG5cclxuZnVuY3Rpb24gZHJhd0dyYXBoKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcclxuICAgIGRhdGEgPSBzcGxpdERhdGEoZGF0YSk7XHJcbiAgICB2YXIgcmVwcm9jZXNzZWREYXRhID0gcmVwcm9jZXNzRGF0YShkYXRhKTtcclxuICAgIG1ha2VVcERvd25MaW5lR3JhcGgoZGF0YSwgZGl2LCByZXByb2Nlc3NlZERhdGFbXCJtZWRpYW5zXCJdKTtcclxuICAgIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMocmVwcm9jZXNzZWREYXRhLCBkaXYsIGxhdCwgbG5nKTtcclxuICAgIGRyYXdVcERvd25Qb2xhcldpdGhDaGVja2JveGVzQW5kVGhyZXNob2xkcyhyZXByb2Nlc3NlZERhdGEsIGRpdiwgbGF0LCBsbmcpO1xyXG4gICAgdmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdyYXBoLWxpc3RcIik7XHJcbiAgICBsaXN0LmFwcGVuZENoaWxkKGRpdik7XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLyBUSU1FU0VSSUVTIExJTkUgR1JBUEggLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmZ1bmN0aW9uIG1ha2VVcERvd25MaW5lR3JhcGggKGRhdGEsIGRpdiwgYXZlcmFnZXMpIHtcclxuICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcclxuICAgIHZhciBtYXJnaW4gPSB7dG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyNX0sXHJcbiAgICB3aWR0aCA9IDU4MCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LFxyXG4gICAgaGVpZ2h0ID0gMjcwIC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207XHJcblxyXG4gICAgLy8gU2V0IHRoZSByYW5nZXNcclxuICAgIHZhciB4ID0gZDMuc2NhbGVUaW1lKCkucmFuZ2UoWzAsIHdpZHRoXSlcclxuICAgICAgICAuZG9tYWluKFtcclxuICAgICAgICAgICAgcGFyc2VEYXRlKGRhdGFbMF1bMF0pLFxyXG4gICAgICAgICAgICBwYXJzZURhdGUoZGF0YVtkYXRhLmxlbmd0aC0xXVswXSlcclxuICAgICAgICBdKTtcclxuICAgIHZhciB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0LCAwXSlcclxuICAgICAgICAuZG9tYWluKFswLCAxMDBdKTtcclxuXHJcbiAgICAvLyBEZWZpbmUgdGhlIGF4ZXNcclxuICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcclxuICAgICAgICAudGlja3MoMTYpXHJcbiAgICAgICAgLnRpY2tGb3JtYXQoZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGQuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KVxyXG4gICAgICAgIC50aWNrcyg2KTtcclxuXHJcbiAgICAvLyBEZWZpbmUgdGhlIGxpbmVcclxuICAgIHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKClcclxuICAgICAgICAueChmdW5jdGlvbihkKSB7IHJldHVybiB4KHBhcnNlRGF0ZShkWzBdKSk7IH0pXHJcbiAgICAgICAgLnkoZnVuY3Rpb24oZCkgeyByZXR1cm4geShkWzFdKTsgfSk7XHJcblxyXG4gICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KVxyXG4gICAgICAgIC5hcHBlbmQoXCJkaXZcIilcclxuICAgICAgICAuY2xhc3NlZChcInRpbWVzZXJpZXMtZ3JhcGhcIiwgdHJ1ZSk7XHJcblxyXG4gICAgLy8gQWRkcyB0aGUgc3ZnIGNhbnZhc1xyXG4gICAgdmFyIHN2ZyA9IHdyYXBwZXJcclxuICAgICAgICAuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgICAgLy8uYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXHJcbiAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXHJcbiAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB3ID0gd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodFxyXG4gICAgICAgICAgICB2YXIgaCA9IGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tXHJcbiAgICAgICAgICAgIHJldHVybiAnMCAwICcgKyB3ICsgJyAnICsgaFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKVxyXG4gICAgICAgIC5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XHJcblxyXG4gICAgc3ZnLmNhbGwodGlwKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIHZhbHVlbGluZSBwYXRoLlxyXG4gICAgZHJhd0xpbmVhclBhdGgoZGF0YSwgdmFsdWVsaW5lLCBzdmcpO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgWCBBeGlzXHJcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ4IGF4aXNcIilcclxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSgwLFwiICsgaGVpZ2h0ICsgXCIpXCIpXHJcbiAgICAgICAgLmNhbGwoeEF4aXMpO1xyXG5cclxuICAgIC8vIEFkZCB0aGUgWSBBeGlzXHJcbiAgICBzdmcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJ5IGF4aXNcIilcclxuICAgICAgICAuY2FsbCh5QXhpcyk7XHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XHJcbiAgICAgKi9cclxuICAgIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgdmFsdWVsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8gT1ZFUkxBUFBJTkcgVElNRVNFUklFUyBMSU5FIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmZ1bmN0aW9uIG1ha2VVcERvd25PdmVybGFwaW5nTGluZUdyYXBoV2l0aENoZWNrYm94ZXMgKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcclxuICAgIHZhciB5ZWFyID0gXCIyMDE1XCI7XHJcblxyXG4gICAgdmFyIGNoYXJ0cyA9IHt9O1xyXG5cclxuICAgIC8vIFNldCB0aGUgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIC8gZ3JhcGhcclxuICAgIHZhciBtYXJnaW4gPSB7dG9wOiAzMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAyNX0sXHJcbiAgICAgICAgd2lkdGggPSA1MDAgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCxcclxuICAgICAgICBoZWlnaHQgPSAyNzAgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTtcclxuXHJcbiAgICB2YXIgYXZlcmFnZXMgPSBkYXRhLm1lZGlhbnM7XHJcblxyXG4gICAgdmFyIHggPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFswLCB3aWR0aF0pXHJcbiAgICAgICAgLmRvbWFpbihbMCwgMzY1XSk7XHJcbiAgICB2YXIgeSA9IGQzLnNjYWxlTGluZWFyKCkucmFuZ2UoW2hlaWdodCwgMF0pXHJcbiAgICAgICAgLmRvbWFpbihbMCwgMTAwXSk7XHJcblxyXG4gICAgLy8gRGVmaW5lIHRoZSBheGVzXHJcbiAgICBmdW5jdGlvbiBmb3JtYXRNb250aFRpY2sgKGQpIHtcclxuICAgICAgICByZXR1cm4gKE1PTlRIX0xBQkVMU1soZC0xNSkvMzBdKTtcclxuICAgIH1cclxuICAgIHZhciB4QXhpcyA9IGQzLmF4aXNCb3R0b20oeClcclxuICAgICAgICAudGlja3MoMTEpXHJcbiAgICAgICAgLnRpY2tWYWx1ZXMoWzE1LCA0NSwgNzUsIDEwNSwgMTM1LCAxNjUsIDE5NSwgMjI1LCAyNTUsIDI4NSwgMzE1LCAzNDVdKVxyXG4gICAgICAgIC50aWNrRm9ybWF0KGZvcm1hdE1vbnRoVGljayk7XHJcbiAgXHJcbiAgICB2YXIgeUF4aXMgPSBkMy5heGlzTGVmdCh5KVxyXG4gICAgICAgIC50aWNrcyg2KTtcclxuXHJcbiAgICAvLyBEZWZpbmUgdGhlIGxpbmVcclxuICAgIHZhciB2YWx1ZWxpbmUgPSBkMy5saW5lKClcclxuICAgICAgICAueChmdW5jdGlvbihkLCBpKSB7IHJldHVybiAoQXJyYXkuaXNBcnJheShkKSA/IHgocGFyc2VKdWxpYW5EYXkoZFswXSkpIDogeCgoaSAqIDgpICsgMyApKTsgfSlcclxuICAgICAgICAueShmdW5jdGlvbihkKSB7IHJldHVybiAoQXJyYXkuaXNBcnJheShkKSA/IHkoZFsxXSkgOiB5KGQpKTsgfSk7XHJcblxyXG4gICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcIm92ZXJsYXBwaW5nLWdyYXBoXCIsIHRydWUpO1xyXG5cclxuICAgIC8vIEFkZHMgdGhlIHN2ZyBjYW52YXNcclxuICAgIHZhciBzdmcgPSB3cmFwcGVyXHJcbiAgICAgICAgLmFwcGVuZChcInN2Z1wiKVxyXG4gICAgICAgICAgICAuYXR0cigndmlld0JveCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB3ID0gd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodFxyXG4gICAgICAgICAgICAgICAgdmFyIGggPSBoZWlnaHQgKyBtYXJnaW4udG9wICsgbWFyZ2luLmJvdHRvbVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcwIDAgJyArIHcgKyAnICcgKyBoXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5hdHRyKCdwcmVzZXJ2ZUFzcGVjdFJhdGlvJywgJ3hNaWRZTWlkJylcclxuICAgICAgICAgICAgLy8uYXR0cihcIndpZHRoXCIsIHdpZHRoICsgbWFyZ2luLmxlZnQgKyBtYXJnaW4ucmlnaHQpXHJcbiAgICAgICAgICAgIC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0ICsgbWFyZ2luLnRvcCArIG1hcmdpbi5ib3R0b20pXHJcbiAgICAgICAgLmFwcGVuZChcImdcIilcclxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXHJcbiAgICAgICAgICAgICAgICAgIFwidHJhbnNsYXRlKFwiICsgbWFyZ2luLmxlZnQgKyBcIixcIiArIG1hcmdpbi50b3AgKyBcIilcIik7XHJcblxyXG4gICAgc3ZnLmNhbGwodGlwKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIFggQXhpc1xyXG4gICAgc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieCBheGlzXCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGhlaWdodCArIFwiKVwiKVxyXG4gICAgICAgIC5jYWxsKHhBeGlzKTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIFkgQXhpc1xyXG4gICAgc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwieSBheGlzXCIpXHJcbiAgICAgICAgLmNhbGwoeUF4aXMpO1xyXG5cclxuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl0gPSB7XHJcbiAgICAgICAgXCJwYXRoXCIgOiBkcmF3TGluZWFyUGF0aChkYXRhW1wibWVkaWFuc1wiXSwgdmFsdWVsaW5lLCBzdmcpXHJcbiAgICB9O1xyXG5cclxuICAgIGNoYXJ0c1t5ZWFyXSA9IHtcclxuICAgICAgICBcInBhdGhcIiA6IGRyYXdMaW5lYXJQYXRoKGRhdGFbeWVhcl0sIHZhbHVlbGluZSwgc3ZnKVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XHJcbiAgICAgKi9cclxuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl1bXCJwb2ludHNcIl0gPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbXCJtZWRpYW5zXCJdLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG4gICAgY2hhcnRzW3llYXJdW1wicG9pbnRzXCJdID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW3llYXJdLCB2YWx1ZWxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG5cclxuICAgIHZhciBpbnB1dHdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKS5jbGFzc2VkKFwiaW5wdXQtd3JhcHBlclwiLCB0cnVlKTtcclxuXHJcbiAgICBkYXRhLmtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgY3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBrZXksIFwidGltZXNlcmllc1wiLCB5ZWFyLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY3JlYXRlQ2hlY2tib3goaW5wdXR3cmFwcGVyLCBcIm1lZGlhbnNcIiwgXCJ0aW1lc2VyaWVzXCIsIFwibWVkaWFuc1wiLCBjaGFydHMsIGRhdGEsIHZhbHVlbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpO1xyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFBPTEFSIEdSQVBIIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5mdW5jdGlvbiBkcmF3VXBEb3duUG9sYXJXaXRoQ2hlY2tib3hlc0FuZFRocmVzaG9sZHMgKGRhdGEsIGRpdiwgbGF0LCBsbmcpIHtcclxuICAgIHZhciB5ZWFyID0gXCIyMDE1XCI7XHJcbiAgICB2YXIgd2lkdGggPSA0OTAsXHJcbiAgICAgICAgaGVpZ2h0ID0gNDkwLFxyXG4gICAgICAgIHJhZGl1cyA9IE1hdGgubWluKHdpZHRoLCBoZWlnaHQpIC8gMiAtIDMwO1xyXG5cclxuICAgIHZhciBhdmVyYWdlcyA9IGRhdGFbXCJtZWRpYW5zXCJdO1xyXG4gICAgdmFyIGNlbnRlciA9IGZpbmRQb2xhckNlbnRlcihkYXRhKTtcclxuICAgIHZhciB0aHJlc2hvbGRzID0gZmluZFBvbGFyVGhyZXNob2xkcyhhdmVyYWdlcywgY2VudGVyWzFdWzBdKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdXAgc2NhbGluZyBvZiBkYXRhLiBXZSBrbm93IHRoYXQgdGhlIG5kdmkgdmFsdWVzIGZhbGwgYmV0d2VlblxyXG4gICAgICogMCAmIDEwMCBzbyB3ZSBzZXQgb3VyIGRvbWFpbiB0byB0aGF0LiBUaGUgcmFuZ2UgY29udHJvbHMgd2hlcmUgdGhlXHJcbiAgICAgKiBwb2ludHMgd2lsbCBsaWUgaW4gb3VyIGdyYXBoLCBzbyB3ZSBzZXQgdGhlbSB0byBiZSBiZXR3ZWVuIDAgYW5kIHRoZVxyXG4gICAgICogcmFkaXVzLlxyXG4gICAgICovXHJcbiAgICB2YXIgciA9IGQzLnNjYWxlTGluZWFyKClcclxuICAgICAgICAuZG9tYWluKFswLCAxMDBdKVxyXG4gICAgICAgIC5yYW5nZShbMCwgcmFkaXVzXSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBmdW5jdGlvbiB3aGljaCB3aWxsIGRyYXcgZWFjaCBwb2ludC4gVG8gY29tcHV0ZSB0aGUgZGlzdGFuY2UgZnJvbSB0aGVcclxuICAgICAqIGNlbnRlciBlYWNoIHBvaW50IGlzIHdlIHBhc3MgdGhlIGRhdGFwb2ludCB0byB0aGUgZnVuY3Rpb24gZGVmaW5lZCBhYm92ZS5cclxuICAgICAqIFRvIGRldGVybWluZSB0aGUgYW5nbGUgZnJvbSB0aGUgb3JpZ2luIHdlIG5lZWQgdG8gY29udmVydCB0aGUgZGF5IHRvXHJcbiAgICAgKiByYWRpYW5zLCBzbyB3ZSBjb252ZXJ0IHRoZSBkYXkgdG8gYSBudW1iZXIgYmV0d2VlbiAwICYgMSBhbmQgdGhlbiBtdWx0aXBseVxyXG4gICAgICogaXQgYnkgMiBwaS5cclxuICAgICAqL1xyXG4gICAgdmFyIGxpbmUgPSBkMy5yYWRpYWxMaW5lKClcclxuICAgICAgICAucmFkaXVzKGZ1bmN0aW9uKGQpIHsgcmV0dXJuIEFycmF5LmlzQXJyYXkoZCkgPyByKGRbMV0pIDogcihkKTsgfSlcclxuICAgICAgICAuYW5nbGUoZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICB2YXIgZGF5ID0gQXJyYXkuaXNBcnJheShkKSA/IHBhcnNlSnVsaWFuRGF5KGRbMF0pIDogKGkgKiA4KSArIDM7XHJcbiAgICAgICAgICAgIHJldHVybiAoKCgoZGF5IC0gMSklMzY1KS8zNjUpICogKDIqTWF0aC5QSSkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB1cCB0aGUgY2FudmFzIHdoZXJlIHRoZSBjaXJjbGUgd2lsbCBiZSBkcmF3bi5cclxuICAgICAqL1xyXG4gICAgdmFyIHdyYXBwZXIgPSBkMy5zZWxlY3QoZGl2KS5hcHBlbmQoXCJkaXZcIikuY2xhc3NlZChcInBvbGFyLWdyYXBoXCIsIHRydWUpO1xyXG4gICAgdmFyIHN2ZyA9IHdyYXBwZXIuYXBwZW5kKFwic3ZnXCIpXHJcbiAgICAgICAgLy8uYXR0cihcIndpZHRoXCIsIHdpZHRoKVxyXG4gICAgICAgIC8vLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxyXG4gICAgICAgIC5hdHRyKCd2aWV3Qm94JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJzAgMCAnKyB3aWR0aCArICcgJyArIGhlaWdodFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmF0dHIoJ3ByZXNlcnZlQXNwZWN0UmF0aW8nLCAneE1pZFlNaWQnKVxyXG4gICAgICAgIC5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoXCIgKyB3aWR0aCAvIDIgKyBcIixcIiArIGhlaWdodCAvIDIgKyBcIilcIik7XHJcblxyXG4gICAgc3ZnLmNhbGwodGlwKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgYmlnIGNpcmNsZXMgb2YgdGhlIGdyYXBoICYgdGhlaXIgbGFiZWxzXHJcbiAgICAgKi9cclxuICAgIHZhciBnciA9IHN2Zy5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInIgYXhpc1wiKVxyXG4gICAgICAgIC5zZWxlY3RBbGwoXCJnXCIpXHJcbiAgICAgICAgLmRhdGEoci50aWNrcyg1KS5zbGljZSgxKSlcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpO1xyXG5cclxuICAgIGdyLmFwcGVuZChcImNpcmNsZVwiKVxyXG4gICAgICAgIC5hdHRyKFwiclwiLCByKTtcclxuXHJcbiAgICBnci5hcHBlbmQoXCJ0ZXh0XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIC1yKGQpIC0gNDsgfSlcclxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInJvdGF0ZSgxNSlcIilcclxuICAgICAgICAuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKVxyXG4gICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQ7IH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBibG9jayBvZiBjb2RlIGRyYXdzIHRoZSBsYWJlbHMgZm9yIGVhY2ggbW9udGggYW5kIHRoZSBsaW5lc1xyXG4gICAgICogdGhhdCBnbyBvdXQgdG8gdGhlbS5cclxuICAgICAqL1xyXG4gICAgdmFyIGdhID0gc3ZnLmFwcGVuZChcImdcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiYSBheGlzXCIpXHJcbiAgICAgICAgLnNlbGVjdEFsbChcImdcIilcclxuICAgICAgICAuZGF0YShkMy5yYW5nZSgwLCAzNjAsIDMwKSlcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwicm90YXRlKFwiICsgKGQgLSA5MCkgKyBcIilcIjsgfSk7XHJcblxyXG4gICAgZ2EuYXBwZW5kKFwibGluZVwiKVxyXG4gICAgICAgIC5hdHRyKFwieDJcIiwgcmFkaXVzKTtcclxuXHJcbiAgICBnYS5hcHBlbmQoXCJ0ZXh0XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ4XCIsIHJhZGl1cyArIDYpXHJcbiAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpXHJcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJlbmRcIiA6IG51bGw7IH0pXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZCA8IDM2MCAmJiBkID4gMTgwID8gXCJyb3RhdGUoMTgwIFwiICsgKHJhZGl1cyArIDYpICsgXCIsMClcIiA6IG51bGw7IH0pXHJcbiAgICAgICAgLnRleHQoZnVuY3Rpb24oZCkgeyByZXR1cm4gTU9OVEhfTEFCRUxTW2QvMzBdOyB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIHRoZSB0aHJlc2hvbGQgbGluZXNcclxuICAgICAqL1xyXG4gICAgdmFyIHRocmVzaG9sZEVsZW0gPSBzdmcuYXBwZW5kKFwiZ1wiKVxyXG4gICAgICAgIC5zZWxlY3RBbGwoXCJnXCIpXHJcbiAgICAgICAgLmRhdGEodGhyZXNob2xkcylcclxuICAgICAgICAuZW50ZXIoKS5hcHBlbmQoXCJnXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwicm90YXRlKFwiICsgKGQuZGF0YVsxXVswXSAtIDkwKSArIFwiKVwiOyB9KTtcclxuXHJcbiAgICB0aHJlc2hvbGRFbGVtLmFwcGVuZChcImxpbmVcIilcclxuICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibGluZVwiKVxyXG4gICAgICAgIC5hdHRyKFwieDJcIiwgcmFkaXVzKTtcclxuXHJcbiAgICB0aHJlc2hvbGRFbGVtLmFwcGVuZChcInRleHRcIilcclxuICAgICAgICAuYXR0cihcInhcIiwgcmFkaXVzICsgNilcclxuICAgICAgICAuYXR0cihcInlcIiwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuICgoKChkLmRhdGFbMV1bMF0gLSAxKSUzNjUpLzM2NSkgKiAoMipNYXRoLlBJKSk7IH0pXHJcbiAgICAgICAgLmF0dHIoXCJkeVwiLCBcIi4zNWVtXCIpXHJcbiAgICAgICAgLnN0eWxlKFwidGV4dC1hbmNob3JcIiwgZnVuY3Rpb24oZCkgeyB2YXIgZGF5ID0gZC5kYXRhWzFdWzBdOyByZXR1cm4gZGF5IDwgMzYwICYmIGRheSA+IDE4MCA/IFwiZW5kXCIgOiBudWxsOyB9KVxyXG4gICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgdmFyIGRheSA9IGQuZGF0YVsxXVswXTsgcmV0dXJuIGRheSA8IDM2MCAmJiBkYXkgPiAxODAgPyBcInJvdGF0ZSgxODAgXCIgKyAocmFkaXVzICsgNikgKyBcIiwwKVwiIDogbnVsbDsgfSlcclxuICAgICAgICAudGV4dChmdW5jdGlvbihkKSB7IHJldHVybiBkLmxhYmVsOyB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERyYXdzIHRoZSBsaW5lIHRvIHRoZSBjZW50ZXIgb2YgdGhlIGRhdGFcclxuICAgICAqL1xyXG4gICAgdmFyIGNlbnRlckRheSA9IGNlbnRlclsxXVswXTtcclxuICAgIHZhciBjZW50ZXJEYXlPcHBvc2l0ZSA9IChjZW50ZXJEYXkgKyAoMzY1LzIpKSAlIDM2NTtcclxuICAgIHZhciBjZW50ZXJEYXlEYXRhID0gW2NlbnRlckRheSwgMTAwXTtcclxuICAgIHZhciBjZW50ZXJEYXlPcHBvc2l0ZURhdGEgPSBbY2VudGVyRGF5T3Bwb3NpdGUsIDEwMF07XHJcbiAgICB2YXIgZ3Jvd2luZ1NlYXNvbkRhdGEgPSBbY2VudGVyRGF5RGF0YSwgY2VudGVyRGF5T3Bwb3NpdGVEYXRhXVxyXG5cclxuICAgIGRyYXdQb2xhclBhdGgoZ3Jvd2luZ1NlYXNvbkRhdGEsIGxpbmUsIHN2ZylcclxuICAgICAgICAuY2xhc3NlZChcImdyb3dpbmctc2Vhc29uLWxpbmVcIiwgXCJ0cnVlXCIpO1xyXG5cclxuICAgIGRyYXdQb2xhclBhdGgoY2VudGVyLCBsaW5lLCBzdmcpXHJcbiAgICAgICAgLmNsYXNzZWQoXCJjZW50ZXItbGluZVwiLCBcInRydWVcIik7XHJcblxyXG4gICAgc3ZnLnNlbGVjdEFsbChcInBvaW50XCIpXHJcbiAgICAgICAgLmRhdGEoW2NlbnRlclsxXV0pXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKFwiY2lyY2xlXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInBvaW50XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtkXSkuc2xpY2UoMSkuc2xpY2UoMCwgLTEpO1xyXG4gICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBjb29ycyArIFwiKVwiXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuYXR0cihcInJcIiwgMi41KVxyXG4gICAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwiIzAwMFwiKVxyXG4gICAgICAgIC5hdHRyKFwiZmlsbFwiLCBcIiNkZDgyZDJcIilcclxuICAgICAgICAub24oXCJtb3VzZW92ZXJcIiwgZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICB0aXAuc2hvdyhcIkNlbnRlcjogXCIgICsgU3RyaW5nKGRbMV0pLnN1YnN0cmluZygwLCA3KSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCA1KTtcclxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIycHhcIik7XHJcbiAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKFwiYWN0aXZlXCIsIHRydWUpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24gKGQpIHtcclxuICAgICAgICAgICAgdGlwLmhpZGUoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDIuNSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMXB4XCIpO1xyXG4gICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZChcImFjdGl2ZVwiLCB0cnVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB2YXIgY2hhcnRzID0ge307XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGJsb2NrIG9mIGNvZGUgZHJhd3MgdGhlIGxpbmUgdGhhdCB0aGUgZGF0YSBmb2xsb3dzXHJcbiAgICAgKi9cclxuICAgIGNoYXJ0c1tcIm1lZGlhbnNcIl0gPSB7XHJcbiAgICAgICAgXCJwYXRoXCIgOiBkcmF3UG9sYXJQYXRoKGF2ZXJhZ2VzLCBsaW5lLCBzdmcpXHJcbiAgICB9O1xyXG5cclxuICAgIGNoYXJ0c1t5ZWFyXSA9IHtcclxuICAgICAgICBcInBhdGhcIiA6IGRyYXdQb2xhclBhdGgoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnKVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgYmxvY2sgb2YgY29kZSBkcmF3cyB0aGUgcG9pbnQgYXQgZWFjaCBkYXRhIHBvaW50XHJcbiAgICAgKi9cclxuICAgIGNoYXJ0cy5tZWRpYW5zLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoYXZlcmFnZXMsIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG4gICAgY2hhcnRzW3llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVt5ZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XHJcblxyXG4gICAgdmFyIGlucHV0d3JhcHBlciA9IHdyYXBwZXIuYXBwZW5kKFwiZGl2XCIpLmNsYXNzZWQoXCJpbnB1dC13cmFwcGVyXCIsIHRydWUpO1xyXG5cclxuICAgIGRhdGEua2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcclxuXHJcbiAgICAgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImlucHV0XCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiaWRcIiwgXCJwb2xhci1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcclxuICAgICAgICAgICAgLmF0dHIoXCJ2YWx1ZVwiLCBrZXkpXHJcbiAgICAgICAgICAgIC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgKGtleSA9PT0geWVhcikgPyB0cnVlIDogZmFsc2UpXHJcbiAgICAgICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1llYXIgPSB0aGlzLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd1BvbGFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMgPSBkcmF3TGluZWFyUG9pbnRzKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2ZywgYXZlcmFnZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY2hlY2tib3hXcmFwcGVyLmFwcGVuZChcImxhYmVsXCIpXHJcbiAgICAgICAgICAgIC50ZXh0KGtleSlcclxuICAgICAgICAgICAgLmF0dHIoXCJmb3JcIiwgXCJwb2xhci1cIiArIGtleSArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgY2hlY2tib3hXcmFwcGVyID0gaW5wdXR3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcclxuXHJcbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIilcclxuICAgICAgICAuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKVxyXG4gICAgICAgIC5hdHRyKFwiaWRcIiwgXCJwb2xhci1hdmVyYWdlLVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKVxyXG4gICAgICAgIC5hdHRyKFwidmFsdWVcIiwgXCJtZWRpYW5zXCIpXHJcbiAgICAgICAgLnByb3BlcnR5KFwiY2hlY2tlZFwiLCB0cnVlKVxyXG4gICAgICAgIC5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgbmV3WWVhciA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wb2ludHMucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNoYXJ0cy5oYXNPd25Qcm9wZXJ0eShuZXdZZWFyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoID0gZHJhd1BvbGFyUGF0aChkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcpXHJcblxyXG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cyA9IGRyYXdMaW5lYXJQb2ludHMoZGF0YVtuZXdZZWFyXSwgbGluZSwgc3ZnLCBhdmVyYWdlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwibGFiZWxcIilcclxuICAgICAgICAudGV4dChcIkJhc2VsaW5lXCIpXHJcbiAgICAgICAgLmF0dHIoXCJmb3JcIiwgXCJwb2xhci1hdmVyYWdlLVwiICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcclxuXHJcbiAgICB2YXIgdGhyZXNob2xkQ2hlY2tib3g9IGlucHV0d3JhcHBlci5hcHBlbmQoXCJkaXZcIilcclxuICAgICAgICAuY2xhc3NlZChcInRocmVzaG9sZC1jaGVja2JveFwiLCB0cnVlKTtcclxuXHJcbiAgICB0aHJlc2hvbGRDaGVja2JveC5hcHBlbmQoXCJpbnB1dFwiKVxyXG4gICAgICAgIC5hdHRyKFwidHlwZVwiLCBcImNoZWNrYm94XCIpXHJcbiAgICAgICAgLmF0dHIoXCJpZFwiLCBcInRocmVzaG9sZC1jaGVja2JveC1cIiArIGxhdC50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpICsgXCItXCIgKyBsbmcudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSlcclxuICAgICAgICAucHJvcGVydHkoXCJjaGVja2VkXCIsIHRydWUpXHJcbiAgICAgICAgLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHRocmVzaG9sZEVsZW0uc3R5bGUoXCJvcGFjaXR5XCIsICh0aGlzLmNoZWNrZWQpID8gMSA6IDApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIHRocmVzaG9sZENoZWNrYm94LmFwcGVuZChcImxhYmVsXCIpXHJcbiAgICAgICAgLnRleHQoXCJUaHJlc2hvbGRzXCIpXHJcbiAgICAgICAgLmF0dHIoXCJmb3JcIiwgXCJ0aHJlc2hvbGQtY2hlY2tib3gtXCIgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xyXG59XHJcblxyXG4vKiBQT0xBUiBHUkFQSCBIRUxQRVJTICovXHJcblxyXG5mdW5jdGlvbiBmaW5kUG9sYXJDZW50ZXIgKGRhdGEpIHtcclxuICAgIHZhciBpLCBqLCBsZW5ndGgsIGFycjtcclxuICAgIHZhciB0b3RhbFN1bSA9IDA7XHJcbiAgICB2YXIgaW5jb21wbGV0ZVllYXJzID0gMDtcclxuICAgIHZhciBzdW07XHJcbiAgICBsZW5ndGggPSA0NjtcclxuXHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5rZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgYXJyID0gZGF0YVtkYXRhLmtleXNbaV1dO1xyXG4gICAgICAgIGlmIChhcnIubGVuZ3RoICE9PSBsZW5ndGgpIHtcclxuICAgICAgICAgICAgaW5jb21wbGV0ZVllYXJzKys7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdW0gPSAwO1xyXG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBsZW5ndGgvMjsgaisrKSB7XHJcbiAgICAgICAgICAgIHN1bSArPSAoYXJyW2pdWzFdIC0gYXJyW2orMjNdWzFdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3VtID0gc3VtIC8gMjM7XHJcbiAgICAgICAgdG90YWxTdW0gKz0gc3VtO1xyXG4gICAgfVxyXG4gICAgdG90YWxTdW0gPSBNYXRoLmFicyh0b3RhbFN1bSkgLyAoZGF0YS5rZXlzLmxlbmd0aCAtIGluY29tcGxldGVZZWFycyk7XHJcblxyXG4gICAgdmFyIGFyZWFEaWZmID0gMTAwMDAwMDtcclxuICAgIHZhciBjaGVja0RpZmY7XHJcbiAgICB2YXIgYXJlYUluZGV4ID0gMDtcclxuICAgIHZhciBsZWZ0QXJlYSwgcmlnaHRBcmVhO1xyXG4gICAgdmFyIGF2Z3MgPSBkYXRhLm1lZGlhbnM7XHJcbiAgICB2YXIgaywgY291bnRlcjtcclxuXHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoLzI7IGkrKykge1xyXG4gICAgICAgIGxlZnRBcmVhID0gMDtcclxuICAgICAgICByaWdodEFyZWEgPSAwO1xyXG4gICAgICAgIGZvciAoY291bnRlciA9IDA7IGNvdW50ZXIgPCBsZW5ndGgvMjsgY291bnRlcisrKSB7XHJcbiAgICAgICAgICAgIGogPSAoaSArIGNvdW50ZXIpICUgNDY7XHJcbiAgICAgICAgICAgIGsgPSAoaiArIDIzKSAlIDQ2O1xyXG5cclxuICAgICAgICAgICAgbGVmdEFyZWEgKz0gcGFyc2VJbnQoYXZnc1tqXSwgMTApO1xyXG4gICAgICAgICAgICByaWdodEFyZWEgKz0gcGFyc2VJbnQoYXZnc1trXSwxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNoZWNrRGlmZiA9IE1hdGguYWJzKGxlZnRBcmVhIC0gcmlnaHRBcmVhKTtcclxuICAgICAgICBpZiAoY2hlY2tEaWZmIDwgYXJlYURpZmYpIHtcclxuICAgICAgICAgICAgYXJlYURpZmYgPSBjaGVja0RpZmY7XHJcbiAgICAgICAgICAgIGFyZWFJbmRleCA9IGk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBmaXJzdFJhZGl1cyA9IHBhcnNlSW50KGF2Z3NbYXJlYUluZGV4XSwgMTApO1xyXG4gICAgdmFyIHNlY29uZFJhZGl1cyA9IHBhcnNlSW50KC1hdmdzW2FyZWFJbmRleCArIDIzXSwgMTApO1xyXG5cclxuICAgIHZhciBmaXJzdERpZmYgPSBNYXRoLmFicyh0b3RhbFN1bSAtIGZpcnN0UmFkaXVzKSAtIE1hdGguYWJzKHRvdGFsU3VtIC0gc2Vjb25kUmFkaXVzKTtcclxuICAgIHZhciBzZWNvbmREaWZmID0gTWF0aC5hYnMoLXRvdGFsU3VtIC0gZmlyc3RSYWRpdXMpIC0gTWF0aC5hYnMoLXRvdGFsU3VtIC0gc2Vjb25kUmFkaXVzKTtcclxuICAgIGlmIChzZWNvbmREaWZmID4gZmlyc3REaWZmKSB7XHJcbiAgICAgICAgYXJlYUluZGV4ID0gYXJlYUluZGV4ICsgMjM7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGNpcmNsZWNlbnRlciA9IFswLCAwXTtcclxuICAgIHZhciBkYXRhY2VudGVyID0gWyhhcmVhSW5kZXggKiA4KSArIDMsIHRvdGFsU3VtXTtcclxuXHJcbiAgICByZXR1cm4oW2NpcmNsZWNlbnRlciwgZGF0YWNlbnRlcl0pO1xyXG59XHJcblxyXG4vKipcclxuICogc3RhcnREYXkgaXMgYWN0dWFsbHkgdGhlIHNlYXNvbmFsaXR5IGluZGV4LCBpZiBpdCBvY2N1cnMgYWZ0ZXIganVseSBpdCBzaG91bGQgYmUgZmxpcHBlZFxyXG4gKi9cclxuZnVuY3Rpb24gZmluZFBvbGFyVGhyZXNob2xkcyAoZGF0YSwgc3RhcnREYXkpIHtcclxuICAgIHZhciBzdGFydEluZGV4ID0gTWF0aC5mbG9vcigoc3RhcnREYXkgLSAzKSAvIDgpO1xyXG4gICAgaWYgKHN0YXJ0SW5kZXggPiAyMikge1xyXG4gICAgICAgIHN0YXJ0SW5kZXggPSBzdGFydEluZGV4IC0gMjM7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGksIGosIGxlbmd0aCwgYXJyO1xyXG4gICAgdmFyIHRvdGFsU3VtID0gMDtcclxuICAgIHZhciBzdW07XHJcbiAgICBsZW5ndGggPSA0NjtcclxuXHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBqID0gKHN0YXJ0SW5kZXggKyBpKSAlIGxlbmd0aDtcclxuICAgICAgICB0b3RhbFN1bSArPSBwYXJzZUludChkYXRhW2pdLCAxMCk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGZpZnRlZW5UaHJlc2hvbGQgPSB0b3RhbFN1bSAqIC4xNTtcclxuICAgIHZhciBlaWdodHlUaHJlc2hvbGQgPSB0b3RhbFN1bSAqIC44MDtcclxuICAgIHZhciBlaWdodHlmaXZlVGhyZXNob2xkID0gdG90YWxTdW0gKiAuODU7XHJcbiAgICB2YXIgZmlmdGVlbkluZGV4Rm91bmQgPSBmYWxzZSwgXHJcbiAgICAgICAgZWlnaHR5SW5kZXhGb3VuZCA9IGZhbHNlLFxyXG4gICAgICAgIGVpZ2h0eWZpdmVJbmRleEZvdW5kID0gZmFsc2U7XHJcbiAgICB2YXIgZmlmdGVlbkluZGV4LCBlaWdodHlJbmRleCwgZWlnaHR5Zml2ZUluZGV4O1xyXG5cclxuICAgIHRvdGFsU3VtID0gMDtcclxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGogPSAoc3RhcnRJbmRleCArIGkpICUgbGVuZ3RoO1xyXG4gICAgICAgIHRvdGFsU3VtICs9IHBhcnNlSW50KGRhdGFbal0sIDEwKTtcclxuICAgICAgICBpZiAoIWZpZnRlZW5JbmRleEZvdW5kICYmIHRvdGFsU3VtID4gZmlmdGVlblRocmVzaG9sZCkge1xyXG4gICAgICAgICAgICBmaWZ0ZWVuSW5kZXggPSBqO1xyXG4gICAgICAgICAgICBmaWZ0ZWVuSW5kZXhGb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWVpZ2h0eUluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBlaWdodHlUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgZWlnaHR5SW5kZXggPSBqO1xyXG4gICAgICAgICAgICBlaWdodHlJbmRleEZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZWlnaHR5Zml2ZUluZGV4Rm91bmQgJiYgdG90YWxTdW0gPiBlaWdodHlmaXZlVGhyZXNob2xkKSB7XHJcbiAgICAgICAgICAgIGVpZ2h0eWZpdmVJbmRleCA9IGo7XHJcbiAgICAgICAgICAgIGVpZ2h0eWZpdmVJbmRleEZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBjaXJjbGVDZW50ZXIgPSBbMCwgMF07XHJcblxyXG4gICAgdmFyIGZpZnRlZW5FbmQgPSBbKGZpZnRlZW5JbmRleCAqIDgpICsgMywgMTAwXTtcclxuICAgIHZhciBlaWdodHlFbmQgPSBbKGVpZ2h0eUluZGV4ICogOCkgKyAzLCAxMDBdO1xyXG4gICAgdmFyIGVpZ2h0eWZpdmVFbmQgPSBbKGVpZ2h0eWZpdmVJbmRleCAqIDgpICsgMywgMTAwXTtcclxuXHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJsYWJlbFwiIDogXCIxNSVcIixcclxuICAgICAgICAgICAgXCJkYXRhXCIgOiBbY2lyY2xlQ2VudGVyLCBmaWZ0ZWVuRW5kXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcImxhYmVsXCIgOiBcIjgwJVwiLFxyXG4gICAgICAgICAgICBcImRhdGFcIiA6IFtjaXJjbGVDZW50ZXIsIGVpZ2h0eUVuZF1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJsYWJlbFwiIDogXCI4NSVcIixcclxuICAgICAgICAgICAgXCJkYXRhXCIgOiBbY2lyY2xlQ2VudGVyLCBlaWdodHlmaXZlRW5kXVxyXG4gICAgICAgIH1cclxuICAgIF07XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBHUkFQSCBIRUxQRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5mdW5jdGlvbiBkcmF3TGluZWFyUGF0aChkYXRhLCBsaW5lLCBzdmcpIHtcclxuICAgIHJldHVybiBzdmcuYXBwZW5kKFwicGF0aFwiKVxyXG4gICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5lXCIpXHJcbiAgICAgICAgLmF0dHIoXCJkXCIsIGxpbmUoZGF0YSkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3UG9sYXJQYXRoKGRhdGEsIGxpbmUsIHN2Zykge1xyXG4gICAgcmV0dXJuIHN2Zy5hcHBlbmQoXCJwYXRoXCIpXHJcbiAgICAgICAgLmRhdHVtKGRhdGEpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmVcIilcclxuICAgICAgICAuYXR0cihcImRcIiwgbGluZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRyYXdMaW5lYXJQb2ludHMoZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcykge1xyXG4gICAgcmV0dXJuIHN2Zy5zZWxlY3RBbGwoXCJwb2ludFwiKVxyXG4gICAgICAgIC5kYXRhKGRhdGEpXHJcbiAgICAgICAgLmVudGVyKClcclxuICAgICAgICAuYXBwZW5kKFwiY2lyY2xlXCIpXHJcbiAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInBvaW50XCIpXHJcbiAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCwgaSkge1xyXG4gICAgICAgICAgICB2YXIgcG9pbnQgPSBBcnJheS5pc0FycmF5KGQpID8gZCA6IFsoaSo4KSArIDMsIGRdO1xyXG4gICAgICAgICAgICB2YXIgY29vcnMgPSBsaW5lKFtwb2ludF0pLnNsaWNlKDEpLnNsaWNlKDAsIC0xKTtcclxuICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgY29vcnMgKyBcIilcIlxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmF0dHIoXCJyXCIsIDMpXHJcbiAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCIjMDAwXCIpXHJcbiAgICAgICAgLmF0dHIoXCJmaWxsXCIsZnVuY3Rpb24oZCxpKXtcclxuICAgICAgICAgICAgdmFyIHZhbCA9IEFycmF5LmlzQXJyYXkoZCkgPyBkWzFdIDogZDtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXB1dGVDb2xvcih2YWwsIGF2ZXJhZ2VzW2klNDZdLCAzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5vbihcIm1vdXNlb3ZlclwiLCBoYW5kbGVQb2ludE1vdXNlb3ZlcilcclxuICAgICAgICAub24oXCJtb3VzZW91dFwiLCBoYW5kbGVQb2ludE1vdXNlb3V0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlUG9pbnRNb3VzZW92ZXIoZCkge1xyXG4gICAgdmFyIHRpcFN0cmluZyA9IEFycmF5LmlzQXJyYXkoZCkgPyBmb3JtYXREYXRlKGRbMF0pICsgXCI6IFwiICArIGRbMV0gOiBcIkF2ZXJhZ2U6IFwiICArIGQ7XHJcbiAgICB0aXAuc2hvdyh0aXBTdHJpbmcpO1xyXG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJyXCIsIDUpO1xyXG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIycHhcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVBvaW50TW91c2VvdXQoZCkge1xyXG4gICAgdGlwLmhpZGUoKTtcclxuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwiclwiLCAzKTtcclxuICAgIHRoaXMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMXB4XCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDaGVja2JveCh3cmFwcGVyLCBrZXksIHR5cGUsIHllYXIsIGNoYXJ0cywgZGF0YSwgbGluZSwgc3ZnLCBhdmVyYWdlcywgbGF0LCBsbmcpIHtcclxuICAgIHZhciBjaGVja2JveFdyYXBwZXIgPSB3cmFwcGVyLmFwcGVuZChcImRpdlwiKTtcclxuXHJcbiAgICBjaGVja2JveFdyYXBwZXIuYXBwZW5kKFwiaW5wdXRcIilcclxuICAgICAgICAuYXR0cihcInR5cGVcIiwgXCJjaGVja2JveFwiKVxyXG4gICAgICAgIC5hdHRyKFwiaWRcIiwgdHlwZSArIFwiLVwiICsga2V5ICsgbGF0LnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikgKyBcIi1cIiArIGxuZy50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKVxyXG4gICAgICAgIC5hdHRyKFwidmFsdWVcIiwga2V5KVxyXG4gICAgICAgIC5wcm9wZXJ0eShcImNoZWNrZWRcIiwgKGtleSA9PT0geWVhcikgPyB0cnVlIDogZmFsc2UpXHJcbiAgICAgICAgLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdZZWFyID0gdGhpcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIGNoYXJ0c1tuZXdZZWFyXS5wYXRoLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdLnBvaW50cy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghY2hhcnRzLmhhc093blByb3BlcnR5KG5ld1llYXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcnRzW25ld1llYXJdID0ge307XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucGF0aCA9IGRyYXdMaW5lYXJQYXRoKGRhdGFbbmV3WWVhcl0sIGxpbmUsIHN2Zyk7XHJcbiAgICAgICAgICAgICAgICBjaGFydHNbbmV3WWVhcl0ucG9pbnRzID0gZHJhd0xpbmVhclBvaW50cyhkYXRhW25ld1llYXJdLCBsaW5lLCBzdmcsIGF2ZXJhZ2VzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIGNoZWNrYm94V3JhcHBlci5hcHBlbmQoXCJsYWJlbFwiKVxyXG4gICAgICAgIC50ZXh0KGtleSlcclxuICAgICAgICAuYXR0cihcImZvclwiLCB0eXBlICsgXCItXCIgKyBrZXkgKyBsYXQudG9TdHJpbmcoKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSArIFwiLVwiICsgbG5nLnRvU3RyaW5nKCkucmVwbGFjZShcIi5cIiwgXCJcIikpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjb21wdXRlQ29sb3IgKHZhbHVlLCBtZWRpYW4sIHNjYWxlKSB7XHJcbiAgICB2YXIgZGlmZiA9IHZhbHVlIC0gbWVkaWFuO1xyXG4gICAgdmFyIHBlcmNlbnRfZGlmZiA9IChNYXRoLmFicyhkaWZmKS9tZWRpYW4pICogMTAwICogc2NhbGU7XHJcbiAgICB2YXIgbGlnaHRuZXNzID0gKDEwMCAtIHBlcmNlbnRfZGlmZikgKyBcIiVcIjtcclxuXHJcbiAgICBpZiAoZGlmZiA+IDApIHtcclxuICAgICAgICByZXR1cm4gXCJoc2woOCwgNzklLCBcIiArIGxpZ2h0bmVzcyArIFwiKVwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gXCJoc2woMjE5LCA3OSUsIFwiICsgbGlnaHRuZXNzICsgXCIpXCI7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gREFURSBIRUxQRVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZnVuY3Rpb24gcGFyc2VEYXRlIChkYXRlKSB7XHJcbiAgICBkYXRlID0gZGF0ZS50b1N0cmluZygpO1xyXG4gICAgdmFyIHllYXIgPSBkYXRlLnN1YnN0cmluZygwLCA0KTtcclxuICAgIHZhciBtb250aCA9IHBhcnNlSW50KGRhdGUuc3Vic3RyaW5nKDQsIDYpLCAxMCkgLSAxO1xyXG4gICAgdmFyIGRheSA9IGRhdGUuc3Vic3RyaW5nKDYsIDgpO1xyXG5cclxuICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VKdWxpYW5EYXkgKGRhdGUpIHtcclxuICAgIGlmICh0eXBlb2YoZGF0ZSkgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICBkYXRlID0gcGFyc2VEYXRlKGRhdGUpO1xyXG4gICAgICAgIHJldHVybiBkYXRlLmdldERPWSgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZGF0ZTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0RGF0ZSAoZGF0ZSkge1xyXG4gICAgaWYgKGRhdGUgPT09IFwiQXZlcmFnZVwiKSB7IHJldHVybiBkYXRlOyB9XHJcblxyXG4gICAgZGF0ZSA9IHBhcnNlRGF0ZShkYXRlKTtcclxuICAgIHJldHVybiBmb3JtYXRNb250aChkYXRlLmdldE1vbnRoKCkpICsgXCIgXCIgKyBvcmRpbmFsX3N1ZmZpeF9vZihkYXRlLmdldERhdGUoKSkgKyBcIiwgXCIgKyBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdE1vbnRoIChtb250aCkge1xyXG4gICAgc3dpdGNoIChtb250aCkge1xyXG4gICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgcmV0dXJuIFwiSmFuLlwiXHJcbiAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJGZWIuXCJcclxuICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgIHJldHVybiBcIk1hci5cIlxyXG4gICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiQXByLlwiXHJcbiAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICByZXR1cm4gXCJNYXlcIlxyXG4gICAgICAgIGNhc2UgNTpcclxuICAgICAgICAgICAgcmV0dXJuIFwiSnVuLlwiXHJcbiAgICAgICAgY2FzZSA2OlxyXG4gICAgICAgICAgICByZXR1cm4gXCJKdWwuXCJcclxuICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgIHJldHVybiBcIkF1Zy5cIlxyXG4gICAgICAgIGNhc2UgODpcclxuICAgICAgICAgICAgcmV0dXJuIFwiU2VwLlwiXHJcbiAgICAgICAgY2FzZSA5OlxyXG4gICAgICAgICAgICByZXR1cm4gXCJPY3QuXCJcclxuICAgICAgICBjYXNlIDEwOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJOb3YuXCJcclxuICAgICAgICBjYXNlIDExOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJEZWMuXCJcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb3JkaW5hbF9zdWZmaXhfb2YoZGF5KSB7XHJcbiAgICB2YXIgaiA9IGRheSAlIDEwLFxyXG4gICAgICAgIGsgPSBkYXkgJSAxMDA7XHJcbiAgICBpZiAoaiA9PT0gMSAmJiBrICE9PSAxMSkge1xyXG4gICAgICAgIHJldHVybiBkYXkgKyBcInN0XCI7XHJcbiAgICB9XHJcbiAgICBpZiAoaiA9PT0gMiAmJiBrICE9PSAxMikge1xyXG4gICAgICAgIHJldHVybiBkYXkgKyBcIm5kXCI7XHJcbiAgICB9XHJcbiAgICBpZiAoaiA9PT0gMyAmJiBrICE9PSAxMykge1xyXG4gICAgICAgIHJldHVybiBkYXkgKyBcInJkXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF5ICsgXCJ0aFwiO1xyXG59XHJcblxyXG52YXIgTU9OVEhfTEFCRUxTID0ge1xyXG4gICAgMDogXCJKYW5cIixcclxuICAgIDE6IFwiRmViXCIsXHJcbiAgICAyOiBcIk1hclwiLFxyXG4gICAgMzogXCJBcHJcIixcclxuICAgIDQ6IFwiTWF5XCIsXHJcbiAgICA1OiBcIkp1blwiLFxyXG4gICAgNjogXCJKdWxcIixcclxuICAgIDc6IFwiQXVnXCIsXHJcbiAgICA4OiBcIlNlcFwiLFxyXG4gICAgOTogXCJPY3RcIixcclxuICAgIDEwOiBcIk5vdlwiLFxyXG4gICAgMTE6IFwiRGVjXCJcclxufTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vanMvZ3JhcGguanMiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBCaW5kVGFiRXZlbnRzICgpIHtcclxuICBkMy5zZWxlY3RBbGwoXCIucGFuZWwtdG9wLWJ0blwiKS5vbihcImNsaWNrXCIsIGhhbmRsZVRhYkhlYWRlckJ0bkNsaWNrKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlVGFiSGVhZGVyQnRuQ2xpY2sgKCkge1xyXG4gIC8vIElmIHRoZSBzZWN0aW9uIGlzIGFscmVhZHkgYWN0aXZlLCBkbyBub3RoaW5nXHJcbiAgaWYgKHRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgcmV0dXJuXHJcblxyXG4gIHRvZ2dsZVBhbmVsV2lkdGgoKVxyXG4gIHRvZ2dsZU1hcFBhZGRpbmcoKTtcclxuXHJcbiAgZDMuc2VsZWN0QWxsKCcucGFuZWwtdG9wLWJ0biwgLnBhbmVsLXNlY3Rpb24td3JhcHBlcicpXHJcbiAgICAuY2xhc3NlZCgnYWN0aXZlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICByZXR1cm4gIWQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCdhY3RpdmUnKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlUGFuZWxXaWR0aCgpIHtcclxuICB2YXIgd3JhcHBlcnMgPSBkMy5zZWxlY3RBbGwoJyNtYXAtd3JhcHBlciwgI3JpZ2h0LXBhbmVsJylcclxuXHJcbiAgdmFyIGxheWVyc0FjdGl2ZSA9IHdyYXBwZXJzLmNsYXNzZWQoJ2xheWVycy1hY3RpdmUnKVxyXG4gIHZhciBncmFwaHNBY3RpdmUgPSB3cmFwcGVycy5jbGFzc2VkKCdncmFwaHMtYWN0aXZlJylcclxuXHJcbiAgd3JhcHBlcnNcclxuICAgIC5jbGFzc2VkKCdsYXllcnMtYWN0aXZlJywgIWxheWVyc0FjdGl2ZSlcclxuICAgIC5jbGFzc2VkKCdncmFwaHMtYWN0aXZlJywgIWdyYXBoc0FjdGl2ZSlcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlTWFwUGFkZGluZyAoKSB7XHJcbiAgICB2YXIgcGFkZGluZ1JpZ2h0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyaWdodC1wYW5lbFwiKS5vZmZzZXRXaWR0aDtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwLXdyYXBwZXJcIikuc3R5bGUucGFkZGluZ1JpZ2h0ID0gcGFkZGluZ1JpZ2h0ICsgXCJweFwiO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3RhYnMuanMiXSwic291cmNlUm9vdCI6IiJ9